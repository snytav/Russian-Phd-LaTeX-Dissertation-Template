//>>built
/*
 Copyright 2015 The MathWorks, Inc.
 @exports MW/utils/deprecation
 Copyright 2015 The MathWorks, Inc.
 @exports MW/utils/deprecation
 Copyright 2013-2016 The MathWorks, Inc.
 @module MW/dialog/DialogUtils

 Copyright 2015 The MathWorks, Inc.
 @exports MW/utils/deprecation
 Copyright 2015-2017 The MathWorks, Inc.
 Copyright 2014-2017 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2014-2015 The MathWorks, Inc.
 Copyright 2014-2015 The MathWorks, Inc.
 Copyright 2015-2017 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2014-2017 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2014-2018 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2016 The MathWorks, Inc.
 Copyright 2014-2017 The MathWorks, Inc.
 Copyright 2014-2015 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2014-2017 The MathWorks, Inc.
 Copyright 2014-2015 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2015-2017 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2016-2018 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2016 The MathWorks, Inc.
 Copyright 2013 The MathWorks, Inc.
 Copyright 2015-2018 The MathWorks, Inc.
 Copyright 2014-2018 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2018 The MathWorks, Inc.
 Copyright 2014-2017 The MathWorks, Inc.
 Copyright 2012-2014 The MathWorks, Inc.
 Copyright 2015-2018 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015-2018 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2016 The MathWorks, Inc.
 Copyright 2016 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2016 The MathWorks, Inc.
 Copyright 2016 The MathWorks, Inc.
 Copyright 2016 The MathWorks, Inc.
 Copyright 2016 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.

 Copyright 2016-2018 The MathWorks, Inc.
 Copyright 2014-2015 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015-2018 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2017 MathWorks, Inc.
 Copyright 2015 MathWorks, Inc.
 Copyright 2015-2017 MathWorks, Inc.
 Copyright 2017 MathWorks, Inc.
 Copyright 2015-2018 The MathWorks, Inc.
 Copyright 2015-2017 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015-2018 The MathWorks, Inc.
 Copyright 2017 MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2015-2018 The MathWorks, Inc.
 Copyright 2015-2018 The MathWorks, Inc.
 Copyright 2016 The MathWorks, Inc.
 Copyright 2015-2017 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015-2018 The MathWorks, Inc.

 Copyright 2014 The MathWorks, Inc.
 Copyright 2015-2017 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015-2018 The MathWorks, Inc.
 Copyright 2014-2015 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2015-2017 The MathWorks, Inc.
 Copyright 2017 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2016 The MathWorks, Inc.
 @description Enumeration of Buttons and Button types. <br />
 There are five types of commit buttons, the framework will
 place the buttons in the Commit Button Area in the following order from left-to-right:
  1. [Do It]
  2. [Don't Do It]
  3. [Cancel]
  4. [Apply]
  5. [Revert]

 Only allow one same type of buttons could exist, if several same type of buttons be
 specified, it will accept the first one. <br />

 Expand the Members to see enumerations of ButtonEnum and TYPE.
 @module mw-dialogs/ButtonEnum
 Copyright 2016 The MathWorks, Inc.
 @description Dialogs is a factory module which used to create a basic dialog framework
 @module mw-dialogs/Dialogs
 Copyright 2016 The MathWorks, Inc.
 @description This module is a newable object which contains the dialog creation life cycle and
 its APIs
 @module mw-dialogs/Dialog
 Copyright 2016 The MathWorks, Inc.
 Copyright 2016 The MathWorks, Inc.
 Copyright 2016 The MathWorks, Inc.
 Copyright 2016 The MathWorks, Inc.
 @description Resizable provides API to make a widget resizable
 @module mw-dialogs/controller/Resizable
 Copyright 2016 The MathWorks, Inc.
 Copyright 2016 The MathWorks, Inc.
 @description ButtonBar is a module which used to create button bar for a dialog
 @module mw-dialogs/view/ButtonBar
 Copyright 2016 The MathWorks, Inc.
 @description ContentWidget is a module which used to render content for a dialog
 @module mw-dialogs/view/ContentWidget
 Copyright 2016 The MathWorks, Inc.
 Copyright 2017 The MathWorks, Inc.
 Copyright 2013-2017 The MathWorks, Inc.
 Copyright 2016 The MathWorks, Inc.
 Copyright 2014-2015 The MathWorks, Inc.
 Copyright 2015-2017 The MathWorks, Inc.
 Copyright 2016 The MathWorks, Inc.
 Copyright 2014-2015 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
*/
require({cache:{"viewer/ViewerMain":function(){define("dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/aspect dojo/dom dojo/dom-construct dojo/ready mw-html-utils/HtmlUtils MW/rtc/RichTextComponent MW/rtc/datamodel/RichTextBackingStore viewer/plugin/ViewerContextMenuGenerator viewer/plugin/ViewerEventHandler viewer/plugin/ViewerKeyHandler viewer/plugin/ViewerHyperlinkHandler viewer/plugin/ViewerStatusActionBar viewer/plugin/ViewerContentLoadedHandlerProvider viewer/plugin/ViewerLoadProvider".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r){return h(null,{constructor:function(a,f,b,k,c,d,e){this._parentNode=a;this._rawData={documentXml:f,output:b,images:k,viewerType:d?d:"live_code"};this._handleHyperlinkCallback=c;this._contentLoadedCallback=e},start:function(){var a={"rtc.backingstore":new l("nonexistentfile.mlx"),"rtc.id":"1234","rtc.contextmenu.generator":new n,"rtc.eventhandler":new p,"rtc.keyhandler":new m,"viewer.contentToLoad":this._rawData,"viewer.contentloadedcallback":this._contentLoadedCallback,
"margin.statusactionbar":new r},a={"class":"rtePaneFixedSize",id:this._rtcId,dependencies:a,registry:[{id:"viewer.load",path:"viewer/plugin/ViewerLoadProvider"},{id:"viewer.contentloadedhandler",path:"viewer/plugin/ViewerContentLoadedHandlerProvider"}],features:{gutter:!1,fixedSize:!0,fileEndSelectable:!0,enabled:"rtc.serializers.serialize layoutrules embeddedoutputs rtc.serializers.containers.container margin.statusactionbar rtc.sectionbreak rtc.code.syntaxhighlighter rtc.richtext rtc.richtext.lists rtc.richtext.hyperlink rtc.richtext.equations rtc.richtext.images rtc.livecontrols viewer.load viewer.contentloadedhandler".split(" "),
disabled:"contextmenu margin.linenumber margin.statusactionbar.sectionsdecorator rtc.code.comment rtc.code.sections rtc.divselection rtc.divcaret rtc.imeinput rtc.richtext.hyperlink.tooltip rtc.richtext.matlabjsonmimeconverter rtc.cutcopypaste.htmlmimeconverter rtc.richtext.htmlhandler rtc.richtext.lists.htmllisthandler rtc.richtext.lists.htmlwordstylelist rtc.richtext.hyperlink.htmlhyperlinkhandler rtc.richtext.images.htmlhandler rtc.richtext.images.imagemimeconverter rtc.richtext.equationeditor rtc.richtext.latexeditor rtc.editordataservice rtc.alert rtc.plugins.cursorgripper".split(" ")}};
this.domNode=b.create("div");b.place(this.domNode,this._parentNode,"last");a=new k(a,this.domNode);a.startup();window.addEventListener("resize",g.hitch(this,function(){a.resize();}));var f=a.keyHandler,c;for(c in f.keyMap)f.keyMap.hasOwnProperty(c)&&("up"!==c&&"down"!==c&&"pageup"!==c&&"pagedown"!==c)&&f.removeBindings(c);this._handleHyperlinkCallback&&new q(this._handleHyperlinkCallback);a._pluginResolver.getDependency("viewer.load")._load();this.rtc=a}})})},"mw-html-utils/HtmlUtils":function(){define(["dojo/_base/window","dojo/_base/event","dojo/io-query","mw-deprecation-utils/deprecation"],
function(h,e,g,d){return{HYPERLINK_ESCAPE_REGEXP:/<a\s+href\s*=\s*"[^"]*"[^>]*>[\s\S]*?<\/a>/g,HYPERLINK_WITH_PARENTHESIS_ESCAPE_REGEXP:/<a\s+href\s*=\s*"([^"]*)"([^>]*)>([\s\S]*?)<\/a>/g,STRONG_ESCAPE_REGEXP:/<strong>|<\/strong>/g,BOLD_LINK_ATTRIBUTE_REGEX:/\bstyle\s*=\s*\"[^\"]*\bfont-weight\s*:\s*bold\b[^\"]*\"/,parseQueryString:function(){var c=h.global.location.search.substr(1,h.global.location.search.length);return this._parseQueryString(c)},_parseQueryString:function(c){return g.queryToObject(c)},
parseUrl:function(c){var b=document.createElement("a");b.display="none";b.href=c||window.location.href;b.href=b.href;b={protocol:b.protocol,hostname:b.hostname,port:b.port,pathname:b.pathname,search:b.search,hash:b.hash};if(("https:"===b.protocol||"http:"===b.protocol)&&0!==b.pathname.indexOf("/"))b.pathname="/"+b.pathname;"https:"===b.protocol&&("443"===b.port&&0!==c.indexOf("https://"+b.hostname+":443"))&&(b.port="");return b},escapeHtml:function(c){var b=h.global.document.createElement("div");
c=h.global.document.createTextNode(c);b.appendChild(c);b=b.innerHTML;c="";for(var a=0;a<b.length;a+=1){var f=b.charCodeAt(a);c=128<f?c+"\x26#"+f+";":c+b.charAt(a)}return c},escapeLinksAndHtml:function(c,b){d.deprecated({deprecated:{module:"mw-html-utils/HtmlUtils",method:"escapeLinksAndHtml"},replacement:{module:"mw-html-utils/HtmlUtils",method:"treatHtmlLikeCommandWindow"}});var a="",f=c.split(this.HYPERLINK_ESCAPE_REGEXP),k=c.match(this.HYPERLINK_ESCAPE_REGEXP),e="",g=this,p=0,m=function(a,f,b,
k){a=g.parseUrl(f).protocol;"http:"!==a&&("https:"!==a&&"matlab:"!==a)&&(f="#");f=g.escapeHtml(f);k=g._strongNotEscaped(k,!0);e='\x3ca href\x3d"'+f+'"\x3e'+k+"\x3c/a\x3e"};if(b)a=this.escapeHtml(c),a=this.escapeWhitespace(a);else if(""!==f[0]&&(a=this._strongNotEscaped(f[0],!0)),null!==k&&0!==k.length)for(p=0;p<k.length;p+=1)k[p].replace(this.HYPERLINK_WITH_PARENTHESIS_ESCAPE_REGEXP,m),""!==f[p+1]&&(f[p+1]=this._strongNotEscaped(f[p+1],!0)),a+=e+f[p+1];return a},treatHtmlLikeCommandWindow:function(c,
b,a){if("string"!==typeof c)return"";var f="",k=c.split(this.HYPERLINK_ESCAPE_REGEXP),d=c.match(this.HYPERLINK_ESCAPE_REGEXP),e="",g=this,m=0;a=a?a:{};var h=function(a,f,b,k){a=g.parseUrl(f).protocol;var c="";"http:"!==a&&("https:"!==a&&"matlab:"!==a)&&(f="#");f=g.escapeHtml(f);k=g._strongNotEscaped(k,!1);g.BOLD_LINK_ATTRIBUTE_REGEX.test(b)&&(c=' style\x3d"font-weight:bold"');e='\x3ca href\x3d"'+f+'"'+c+"\x3e"+k+"\x3c/a\x3e"};if(b)f=this.escapeHtml(c);else if(""!==k[0]&&(f=this._strongNotEscaped(k[0],
!1)),null!==d&&0!==d.length)for(m=0;m<d.length;m+=1)d[m].replace(this.HYPERLINK_WITH_PARENTHESIS_ESCAPE_REGEXP,h),""!==k[m+1]&&(k[m+1]=this._strongNotEscaped(k[m+1],!1)),f+=e+k[m+1];a.addPreTagToPreserveWhiteSpace&&(f='\x3cspan style\x3d"white-space: pre"\x3e'+f+"\x3c/span\x3e");return f},_strongNotEscaped:function(c,b){var a="",f=c.match(this.STRONG_ESCAPE_REGEXP),k=c.split(this.STRONG_ESCAPE_REGEXP),d=function(a){return a};b&&(d=this.escapeWhitespace);var e=0;if(null!==f&&0!==f.length){a=d(this.escapeHtml(k[0]));
for(e=0;e<f.length;e+=1)a+=f[e]+d(this.escapeHtml(k[e+1]))}else a=d(this.escapeHtml(c));return a},escapeWhitespace:function(c){d.deprecated({deprecated:{module:"mw-html-utils/HtmlUtils",method:"escapeWhitespace"},replacement:{module:"Plain HTML",method:'Set class as white-space: pre or use \x3cspan style\x3d"white-space: pre"\x3e...\x3c/span\x3e'}});return(c||"").replace(/\n/g,"\x3cbr\x3e").replace(/ {2}/g,"\x26nbsp;\x26nbsp;")},handleAnchors:function(c,b){if(b.target.href){e.stop(b);var a=b.target.href;
-1!==a.indexOf("matlab:")?"matlab:"===a.substring(0,7)&&(a=b.target.href.substring(7),c(h.global.unescape(a))):h.global.open(b.target.href)}},isElementOverflown:function(c){return c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth}}})},"mw-deprecation-utils/deprecation":function(){define(["dojo/_base/config","mw-log/Log"],function(h,e){var g={deprecated:function(d){var c,b;if((h.isDebug||window.showDeprecationsAsErrors)&&this._isConfigValid(d))b=window.showDeprecationsAsErrors||d.deprecationLevel===
this.ERROR?this.ERROR:this.WARN,c="DEPRECATED: ",d.deprecated&&(c+=d.deprecated.module,d.deprecated.method&&(c+="."+d.deprecated.method+"()"),c+="."),d.replacement&&(c+=" Use "+d.replacement.module,d.replacement.method&&(c+="."+d.replacement.method+"()"),c+=" instead."),d.removalVersion&&(c+=" Will be removed in version: "+d.removalVersion+"."),d.geckNumber&&(c+=" Please use g"+d.geckNumber+" to track latest information regarding this deprecation"),d.additionalInformation&&(c+=" "+d.additionalInformation),
e[b](c)},_isConfigValid:function(d){var c=!!d.deprecated&&"object"===typeof d.deprecated&&d.deprecated.hasOwnProperty("module");d.replacement&&(c=c&&"object"===typeof d.replacement&&d.replacement.hasOwnProperty("module"));d.geckNumber&&(c=c&&"number"===typeof d.geckNumber);c||e.error("Supplied deprecationConfig properties are not valid. Please refer to http://inside.mathworks.com/wiki/Web_Widgets_Deprecation_API for right API");return c}};Object.defineProperties(g,{WARN:{value:"warn",enumerable:!0},
ERROR:{value:"error",enumerable:!0}});return g})},"mw-log/Log":function(){define(["dojo/date/locale"],function(h){return function(){function e(a){f&&(k||!b||!b.log)&&f.apply(c,a)}function g(f){a[f]=function(){if(0!==l&&b&&b[f])if("assert"===f){if(!arguments[0])if(c.ScriptEngine){var a=Array.prototype.slice.call(arguments);a.shift();b[f](!1,a)}else b[f].apply(b,arguments)}else if(c.ScriptEngine)if(-1!==f.indexOf("profile"))b[f]();else b[f](arguments[0]);else b[f].apply(b,arguments)}}function d(f,k){a[k]=
function(){var a=Array.prototype.slice.call(arguments),d=h.format(new Date,{selector:"date",datePattern:"h:m:s.SSS"}),g=[k].concat(a),a=[d].concat(a);n.push(g);n.length>p&&n.shift();e(g);if(b&&(0<l?l>f:m.length+l<=f))if(b.firebug&&"error"!==k)b[k].apply(c,a);else if(b[k])b[k](a);else b.log(a)}}var c=this,b=c.console,a={},f,k,l=9,n=[],p=25,m=["error","warn","info","debug","log"],q="assert clear count dir dirxml exception group groupCollapsed groupEnd profile profileEnd table time timeEnd trace".split(" "),
r;for(r=q.length;0<=(r-=1);)g(q[r]);for(r=m.length;0<=(r-=1);)d(r,m[r]);a.setLevel=function(a){l="number"===typeof a?a:9};a.setCallback=function(a,b,c){var d=n.length;f=a||null;k="boolean"===typeof b?b:!1;for(a=d-("number"===c?c:d);a<d;)e(n[a+=1])};return a}()})},"dojo/date/locale":function(){define("../_base/lang ../_base/array ../date ../cldr/supplemental ../i18n ../regexp ../string ../i18n!../cldr/nls/gregorian module".split(" "),function(h,e,g,d,c,b,a,f,k){function l(f,b,k,c){return c.replace(/([a-z])\1*/ig,
function(e){var g,l,n=e.charAt(0);e=e.length;var p=["abbr","wide","narrow"];switch(n){case "G":g=b[4>e?"eraAbbr":"eraNames"][0>f.getFullYear()?0:1];break;case "y":g=f.getFullYear();switch(e){case 1:break;case 2:if(!k.fullYear){g=String(g);g=g.substr(g.length-2);break}default:l=!0}break;case "Q":case "q":g=Math.ceil((f.getMonth()+1)/3);l=!0;break;case "M":case "L":g=f.getMonth();3>e?(g+=1,l=!0):(n=["months","L"==n?"standAlone":"format",p[e-3]].join("-"),g=b[n][g]);break;case "w":g=m._getWeekOfYear(f,
0);l=!0;break;case "d":g=f.getDate();l=!0;break;case "D":g=m._getDayOfYear(f);l=!0;break;case "e":case "c":if(g=f.getDay(),2>e){g=(g-d.getFirstDayOfWeek(k.locale)+8)%7;break}case "E":g=f.getDay();3>e?(g+=1,l=!0):(n=["days","c"==n?"standAlone":"format",p[e-3]].join("-"),g=b[n][g]);break;case "a":n=12>f.getHours()?"am":"pm";g=k[n]||b["dayPeriods-format-wide-"+n];break;case "h":case "H":case "K":case "k":l=f.getHours();switch(n){case "h":g=l%12||12;break;case "H":g=l;break;case "K":g=l%12;break;case "k":g=
l||24}l=!0;break;case "m":g=f.getMinutes();l=!0;break;case "s":g=f.getSeconds();l=!0;break;case "S":g=Math.round(f.getMilliseconds()*Math.pow(10,e-3));l=!0;break;case "v":case "z":if(g=m._getZone(f,!0,k))break;e=4;case "Z":n=m._getZone(f,!1,k);n=[0>=n?"+":"-",a.pad(Math.floor(Math.abs(n)/60),2),a.pad(Math.abs(n)%60,2)];4==e&&(n.splice(0,0,"GMT"),n.splice(3,0,":"));g=n.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+c);}l&&(g=a.pad(g,e));return g})}function n(a,
f,b,k){var c=function(a){return a};f=f||c;b=b||c;k=k||c;var d=a.match(/(''|[^'])+/g),g="'"==a.charAt(0);e.forEach(d,function(a,k){a?(d[k]=(g?b:f)(a.replace(/''/g,"'")),g=!g):d[k]=""});return k(d.join(""))}function p(a,f,k,c){c=b.escapeString(c);k.strict||(c=c.replace(" a"," ?a"));return c.replace(/([a-z])\1*/ig,function(b){var c;c=b.charAt(0);var d=b.length,e="",g="";k.strict?(1<d&&(e="0{"+(d-1)+"}"),2<d&&(g="0{"+(d-2)+"}")):(e="0?",g="0{0,2}");switch(c){case "y":c="\\d{2,4}";break;case "M":case "L":c=
2<d?"\\S+?":"1[0-2]|"+e+"[1-9]";break;case "D":c="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+e+"[1-9][0-9]|"+g+"[1-9]";break;case "d":c="3[01]|[12]\\d|"+e+"[1-9]";break;case "w":c="[1-4][0-9]|5[0-3]|"+e+"[1-9]";break;case "E":case "e":case "c":c=".+?";break;case "h":c="1[0-2]|"+e+"[1-9]";break;case "k":c="1[01]|"+e+"\\d";break;case "H":c="1\\d|2[0-3]|"+e+"\\d";break;case "K":c="1\\d|2[0-4]|"+e+"[1-9]";break;case "m":case "s":c="[0-5]\\d";break;case "S":c="\\d{"+d+"}";break;case "a":d=k.am||f["dayPeriods-format-wide-am"];
e=k.pm||f["dayPeriods-format-wide-pm"];c=d+"|"+e;k.strict||(d!=d.toLowerCase()&&(c+="|"+d.toLowerCase()),e!=e.toLowerCase()&&(c+="|"+e.toLowerCase()),-1!=c.indexOf(".")&&(c+="|"+c.replace(/\./g,"")));c=c.replace(/\./g,"\\.");break;default:c=".*"}a&&a.push(b);return"("+c+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var m={};h.setObject(k.id.replace(/\//g,"."),m);m._getZone=function(a,f,b){return f?g.getTimezoneName(a):a.getTimezoneOffset()};m.format=function(a,f){f=f||{};var b=c.normalizeLocale(f.locale),
k=f.formatLength||"short",b=m._getGregorianBundle(b),d=[],e=h.hitch(this,l,a,b,f);if("year"==f.selector)return n(b["dateFormatItem-yyyy"]||"yyyy",e);var g;"date"!=f.selector&&(g=f.timePattern||b["timeFormat-"+k])&&d.push(n(g,e));"time"!=f.selector&&(g=f.datePattern||b["dateFormat-"+k])&&d.push(n(g,e));return 1==d.length?d[0]:b["dateTimeFormat-"+k].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(a,f){return d[f]})};m.regexp=function(a){return m._parseInfo(a).regexp};m._parseInfo=function(a){a=a||{};
var f=c.normalizeLocale(a.locale),f=m._getGregorianBundle(f),b=a.formatLength||"short",k=a.datePattern||f["dateFormat-"+b],d=a.timePattern||f["timeFormat-"+b],b="date"==a.selector?k:"time"==a.selector?d:f["dateTimeFormat-"+b].replace(/\{(\d+)\}/g,function(a,f){return[d,k][f]}),e=[];return{regexp:n(b,h.hitch(this,p,e,f,a)),tokens:e,bundle:f}};m.parse=function(a,f){var b=/[\u200E\u200F\u202A\u202E]/g,k=m._parseInfo(f),c=k.tokens,d=k.bundle,b=RegExp("^"+k.regexp.replace(b,"")+"$",k.strict?"":"i").exec(a&&
a.replace(b,""));if(!b)return null;var l=["abbr","wide","narrow"],n=[1970,0,1,0,0,0,0],p="",b=e.every(b,function(a,b){if(!b)return!0;var k=c[b-1],g=k.length,k=k.charAt(0);switch(k){case "y":if(2!=g&&f.strict)n[0]=a;else if(100>a)a=Number(a),k=""+(new Date).getFullYear(),g=100*k.substring(0,2),k=Math.min(Number(k.substring(2,4))+20,99),n[0]=a<k?g+a:g-100+a;else{if(f.strict)return!1;n[0]=a}break;case "M":case "L":if(2<g){if(g=d["months-"+("L"==k?"standAlone":"format")+"-"+l[g-3]].concat(),f.strict||
(a=a.replace(".","").toLowerCase(),g=e.map(g,function(a){return a.replace(".","").toLowerCase()})),a=e.indexOf(g,a),-1==a)return!1}else a--;n[1]=a;break;case "E":case "e":case "c":g=d["days-"+("c"==k?"standAlone":"format")+"-"+l[g-3]].concat();f.strict||(a=a.toLowerCase(),g=e.map(g,function(a){return a.toLowerCase()}));a=e.indexOf(g,a);if(-1==a)return!1;break;case "D":n[1]=0;case "d":n[2]=a;break;case "a":g=f.am||d["dayPeriods-format-wide-am"];k=f.pm||d["dayPeriods-format-wide-pm"];if(!f.strict){var m=
/\./g;a=a.replace(m,"").toLowerCase();g=g.replace(m,"").toLowerCase();k=k.replace(m,"").toLowerCase()}if(f.strict&&a!=g&&a!=k)return!1;p=a==k?"p":a==g?"a":"";break;case "K":24==a&&(a=0);case "h":case "H":case "k":if(23<a)return!1;n[3]=a;break;case "m":n[4]=a;break;case "s":n[5]=a;break;case "S":n[6]=a}return!0}),k=+n[3];"p"===p&&12>k?n[3]=k+12:"a"===p&&12==k&&(n[3]=0);k=new Date(n[0],n[1],n[2],n[3],n[4],n[5],n[6]);f.strict&&k.setFullYear(n[0]);var h=c.join(""),q=-1!=h.indexOf("d"),h=-1!=h.indexOf("M");
if(!b||h&&k.getMonth()>n[1]||q&&k.getDate()>n[2])return null;if(h&&k.getMonth()<n[1]||q&&k.getDate()<n[2])k=g.add(k,"hour",1);return k};var q=[],r={};m.addCustomFormats=function(a,f){q.push({pkg:a,name:f});r={}};m._getGregorianBundle=function(a){if(r[a])return r[a];var f={};e.forEach(q,function(b){b=c.getLocalization(b.pkg,b.name,a);f=h.mixin(f,b)},this);return r[a]=f};m.addCustomFormats(k.id.replace(/\/date\/locale$/,".cldr"),"gregorian");m.getNames=function(a,f,b,k){var c;k=m._getGregorianBundle(k);
a=[a,b,f];"standAlone"==b&&(b=a.join("-"),c=k[b],1==c[0]&&(c=void 0));a[1]="format";return(c||k[a.join("-")]).concat()};m.isWeekend=function(a,f){var b=d.getWeekend(f),k=(a||new Date).getDay();b.end<b.start&&(b.end+=7,k<b.start&&(k+=7));return k>=b.start&&k<=b.end};m._getDayOfYear=function(a){return g.difference(new Date(a.getFullYear(),0,1,a.getHours()),a)+1};m._getWeekOfYear=function(a,f){1==arguments.length&&(f=0);var b=(new Date(a.getFullYear(),0,1)).getDay(),k=Math.floor((m._getDayOfYear(a)+
(b-f+7)%7-1)/7);b==f&&k++;return k};return m})},"dojo/date":function(){define(["./has","./_base/lang"],function(h,e){var g={getDaysInMonth:function(d){var c=d.getMonth();return 1==c&&g.isLeapYear(d)?29:[31,28,31,30,31,30,31,31,30,31,30,31][c]},isLeapYear:function(d){d=d.getFullYear();return!(d%400)||!(d%4)&&!!(d%100)},getTimezoneName:function(d){var c=d.toString(),b="",a=c.indexOf("(");if(-1<a)b=c.substring(++a,c.indexOf(")"));else if(a=/([A-Z\/]+) \d{4}$/,c=c.match(a))b=c[1];else if(c=d.toLocaleString(),
a=/ ([A-Z\/]+)$/,c=c.match(a))b=c[1];return"AM"==b||"PM"==b?"":b},compare:function(d,c,b){d=new Date(+d);c=new Date(+(c||new Date));"date"==b?(d.setHours(0,0,0,0),c.setHours(0,0,0,0)):"time"==b&&(d.setFullYear(0,0,0),c.setFullYear(0,0,0));return d>c?1:d<c?-1:0},add:function(d,c,b){var a=new Date(+d),f=!1,k="Date";switch(c){case "day":break;case "weekday":var e;(c=b%5)?e=parseInt(b/5):(c=0<b?5:-5,e=0<b?(b-5)/5:(b+5)/5);var g=d.getDay(),p=0;6==g&&0<b?p=1:0==g&&0>b&&(p=-1);g+=c;if(0==g||6==g)p=0<b?2:
-2;b=7*e+c+p;break;case "year":k="FullYear";f=!0;break;case "week":b*=7;break;case "quarter":b*=3;case "month":f=!0;k="Month";break;default:k="UTC"+c.charAt(0).toUpperCase()+c.substring(1)+"s"}if(k)a["set"+k](a["get"+k]()+b);f&&a.getDate()<d.getDate()&&a.setDate(0);return a},difference:function(d,c,b){c=c||new Date;b=b||"day";var a=c.getFullYear()-d.getFullYear(),f=1;switch(b){case "quarter":d=d.getMonth();c=c.getMonth();d=Math.floor(d/3)+1;c=Math.floor(c/3)+1;f=c+4*a-d;break;case "weekday":a=Math.round(g.difference(d,
c,"day"));b=parseInt(g.difference(d,c,"week"));f=a%7;if(0==f)a=5*b;else{var k=0,e=d.getDay();c=c.getDay();b=parseInt(a/7);f=a%7;d=new Date(d);d.setDate(d.getDate()+7*b);d=d.getDay();if(0<a)switch(!0){case 6==e:k=-1;break;case 0==e:k=0;break;case 6==c:k=-1;break;case 0==c:k=-2;break;case 5<d+f:k=-2}else if(0>a)switch(!0){case 6==e:k=0;break;case 0==e:k=1;break;case 6==c:k=2;break;case 0==c:k=1;break;case 0>d+f:k=2}a=a+k-2*b}f=a;break;case "year":f=a;break;case "month":f=c.getMonth()-d.getMonth()+12*
a;break;case "week":f=parseInt(g.difference(d,c,"day")/7);break;case "day":f/=24;case "hour":f/=60;case "minute":f/=60;case "second":f/=1E3;case "millisecond":f*=c.getTime()-d.getTime()}return Math.round(f)}};e.mixin(e.getObject("dojo.date",!0),g);return g})},"dojo/cldr/supplemental":function(){define(["../_base/lang","../i18n"],function(h,e){var g={};h.setObject("dojo.cldr.supplemental",g);g.getFirstDayOfWeek=function(d){d={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,
qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0}[g._region(d)];return void 0===d?1:d};g._region=function(d){d=e.normalizeLocale(d);d=d.split("-");var c=d[1];c?4==c.length&&(c=d[2]):c={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",
as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",
ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",
sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",
bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",
guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",
luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",nds:"de","new":"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",
sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",
yav:"cm",zza:"tr"}[d[0]];return c};g.getWeekend=function(d){var c=g._region(d);d={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[c];c={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6}[c];void 0===d&&(d=6);void 0===c&&(c=0);return{start:d,end:c}};return g})},"dojo/i18n":function(){define("./_base/kernel require ./has ./_base/array ./_base/config ./_base/lang ./_base/xhr ./json module".split(" "),
function(h,e,g,d,c,b,a,f,k){g.add("dojo-preload-i18n-Api",1);var l=h.i18n={},n=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,p=function(a,f,b,k){var c=[b+k];f=f.split("-");for(var d="",e=0;e<f.length;e++)if(d+=(d?"-":"")+f[e],!a||a[d])c.push(b+d+"/"+k),c.specificity=d;return c},m={},q=function(a,f,b){b=b?b.toLowerCase():h.locale;a=a.replace(/\./g,"/");f=f.replace(/\./g,"/");return/root/i.test(b)?a+"/nls/"+f:a+"/nls/"+b+"/"+f},r=h.getL10nName=function(a,f,b){return k.id+"!"+q(a,f,b)},s=function(a,f,k,
c,d,e){a([f],function(g){var l=b.clone(g.root||g.ROOT),n=p(!g._v1x&&g,d,k,c);a(n,function(){for(var a=1;a<n.length;a++)l=b.mixin(b.clone(l),arguments[a]);m[f+"/"+d]=l;l.$locale=n.specificity;e()})})},t=function(a){var f=c.extraLocale||[],f=b.isArray(f)?f:[f];f.push(a);return f},u=function(a,k,c){if(g("dojo-preload-i18n-Api")){var e=a.split("*"),l="preload"==e[1];l&&(m[a]||(m[a]=1,A(e[2],f.parse(e[3]),1,k)),c(1));if(!(e=l))w&&x.push([a,k,c]),e=w;if(e)return}a=n.exec(a);var p=a[1]+"/",q=a[5]||a[4],
r=p+q,e=(a=a[5]&&a[4])||h.locale||"",u=r+"/"+e;a=a?[e]:t(e);var v=a.length,F=function(){--v||c(b.delegate(m[u]))};d.forEach(a,function(a){var f=r+"/"+a;g("dojo-preload-i18n-Api")&&B(f);m[f]?F():s(k,r,p,q,a,F)})};g("dojo-preload-i18n-Api");var v=l.normalizeLocale=function(a){a=a?a.toLowerCase():h.locale;return"root"==a?"ROOT":a},w=0,x=[],A=l._preloadLocalizations=function(a,f,k,c){function g(a,f){c.isXdUrl(e.toUrl(a+".js"))||k?c([a],f):H([a],f,c)}function l(a,f){for(var b=a.split("-");b.length;){if(f(b.join("-")))return;
b.pop()}f("ROOT")}function n(){for(--w;!w&&x.length;)u.apply(null,x.shift())}function p(k){k=v(k);l(k,function(p){if(0<=d.indexOf(f,p)){var h=a.replace(/\./g,"/")+"_"+p;w++;g(h,function(a){for(var f in a){var d=a[f],g=f.match(/(.+)\/([^\/]+)$/),h;if(g&&(h=g[2],g=g[1]+"/",d._localized)){var q;if("ROOT"===p){var r=q=d._localized;delete d._localized;r.root=d;m[e.toAbsMid(f)]=r}else q=d._localized,m[e.toAbsMid(g+h+"/"+p)]=d;p!==k&&function(a,f,d,g){var p=[],h=[];l(k,function(b){g[b]&&(p.push(e.toAbsMid(a+
b+"/"+f)),h.push(e.toAbsMid(a+f+"/"+b)))});p.length?(w++,c(p,function(){for(var c=p.length-1;0<=c;c--)d=b.mixin(b.clone(d),arguments[c]),m[h[c]]=d;m[e.toAbsMid(a+f+"/"+k)]=b.clone(d);n()})):m[e.toAbsMid(a+f+"/"+k)]=d}(g,h,d,q)}}n()});return!0}return!1})}c=c||e;p();d.forEach(h.config.extraLocale,p)},B=function(){},F={},G=new Function("__bundle","__checkForLegacyModules","__mid","__amdValue","var define \x3d function(mid, factory){define.called \x3d 1; __amdValue.result \x3d factory || mid;},\t   require \x3d function(){define.called \x3d 1;};try{define.called \x3d 0;eval(__bundle);if(define.called\x3d\x3d1)return __amdValue;if((__checkForLegacyModules \x3d __checkForLegacyModules(__mid)))return __checkForLegacyModules;}catch(e){}try{return eval('('+__bundle+')');}catch(e){return e;}"),
H=function(f,b,k){var c=[];d.forEach(f,function(f){function b(a){a=G(a,B,f,F);a===F?c.push(m[d]=F.result):(a instanceof Error&&(console.error("failed to evaluate i18n bundle; url\x3d"+d,a),a={}),c.push(m[d]=/nls\/[^\/]+\/[^\/]+$/.test(d)?a:{root:a,_v1x:1}))}var d=k.toUrl(f+".js");if(m[d])c.push(m[d]);else{var e=k.syncLoadNls(f);e||(e=B(f.replace(/nls\/([^\/]*)\/([^\/]*)$/,"nls/$2/$1")));if(e)c.push(e);else if(a)a.get({url:d,sync:!0,load:b,error:function(){c.push(m[d]={})}});else try{k.getText(d,!0,
b)}catch(g){c.push(m[d]={})}}});b&&b.apply(null,c)},B=function(a){for(var f,b=a.split("/"),k=h.global[b[0]],c=1;k&&c<b.length-1;k=k[b[c++]]);k&&((f=k[b[c]])||(f=k[b[c].replace(/-/g,"_")]),f&&(m[a]=f));return f};l.getLocalization=function(a,f,b){var k;a=q(a,f,b);u(a,!e.isXdUrl(e.toUrl(a+".js"))?function(a,f){H(a,f,e)}:e,function(a){k=a});return k};return b.mixin(l,{dynamic:!0,normalize:function(a,f){return/^\./.test(a)?f(a):a},load:u,cache:m,getL10nName:r})})},"dojo/regexp":function(){define(["./_base/kernel",
"./_base/lang"],function(h,e){var g={};e.setObject("dojo.regexp",g);g.escapeString=function(d,c){return d.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(b){return c&&-1!=c.indexOf(b)?b:"\\"+b})};g.buildGroupRE=function(d,c,b){if(!(d instanceof Array))return c(d);for(var a=[],f=0;f<d.length;f++)a.push(c(d[f]));return g.group(a.join("|"),b)};g.group=function(d,c){return"("+(c?"?:":"")+d+")"};return g})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(h,e){var g=/[&<>'"\/]/g,
d={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","/":"\x26#x2F;"},c={};e.setObject("dojo.string",c);c.escape=function(b){return!b?"":b.replace(g,function(a){return d[a]})};c.rep=function(b,a){if(0>=a||!b)return"";for(var f=[];;){a&1&&f.push(b);if(!(a>>=1))break;b+=b}return f.join("")};c.pad=function(b,a,f,k){f||(f="0");b=String(b);a=c.rep(f,Math.ceil((a-b.length)/f.length));return k?b+a:a+b};c.substitute=function(b,a,f,k){k=k||h.global;f=f?e.hitch(k,f):function(a){return a};
return b.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(b,c,d){if(""==c)return"$";b=e.getObject(c,!1,a);d&&(b=e.getObject(d,!1,k).call(k,b,c));return f(b,c).toString()})};c.trim=String.prototype.trim?e.trim:function(b){b=b.replace(/^\s+/,"");for(var a=b.length-1;0<=a;a--)if(/\S/.test(b.charAt(a))){b=b.substring(0,a+1);break}return b};return c})},"MW/rtc/RichTextComponent":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/connect dojo/_base/lang dojo/aspect dojo/dom-construct dojo/dom-style dojo/dom-attr dojo/dom-class dojo/has dojo/keys dojo/on dojo/dom-geometry dijit/layout/ContentPane dijit/layout/_LayoutWidget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/rtePane.html MW/rtc/keyBindingUtils MW/rtc/HasExtensions MW/rtc/core/PluginResolver MW/rtc/core/registry/PluginRegistry MW/rtc/language/Language MW/rtc/language/LanguageConstants MW/rtc/view/ViewEventUtilities MW/layout/BorderContainer mw-actiondataservice/ActionDataService mw-mixins/property/VisualFamilyMixin mw-log/Log".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,B,F,G,H,I,K,C){return h([r,s,t,K],{templateString:u,widgetsInTemplate:!0,baseClass:"rtePane mwRichTextComponent",visualFamily:"default",constructor:function(a){a=a||{};this.dependencies=a.dependencies||{};this.registry=a.registry||[];var f=this.dependencies["rtc.backingstore"],f=f&&f.getStorageData?f.getStorageData():"";this.initialDocumentText=a.initialDocumentText||f;this.readOnly=a.readOnly;this.clientKeyBindings=a.keyBindings||[];this.clipboard=
a.clipboard;this.localActionService=a.actionDataService||new I;a.actionDataService||(this._createdLocalActionDataService=!0);this.features=a.features||{};this._enabledPlugins=this.features.enabled||[];this._disabledPlugins=this.features.disabled||[];this._updateEnabledPlugins(this._enabledPlugins);this.started=!1;this._syncTimer=null;this._language=a.language||F.DEFAULT_SUPPORTED_LANGUAGES.MATLAB},postCreate:function(){this.scrollPane=b.create("div",{"class":"scrollPane mwRichTextComponentDocument dijitInline mwDoNotApplyCustomScrollbarCSS",
tabindex:0});f.set(this.scrollPane,"data-testid","rtc_scrollPane");this.features.fixedSize&&(this.borderContainer=new H({},this.rteWindow));this._loadPlugins();this.own(c.after(this._internalDocument,"onDocumentChanged",d.hitch(this,"documentChanged"),!0));this.features.fixedSize&&(this.view.paddingLeft=4);this.own(c.after(this.cursor,"onChange",d.hitch(this,"onCursorChanged")));this.own(c.after(this._undoRedoController,"onUndoRedoStackUpdated",d.hitch(this,"undoRedoStackUpdated"),!0));this.keyHandler=
this._pluginResolver.getDependency("rtc.keyhandler");this._loadActionsAndKeyBindings();this._focusService=this._pluginResolver.getDependency("rtc.focusservice");this._initializeDocument();l("ff")&&this._focusService.setFocus();this.features.fixedSize||(this.scrollPane.style.paddingRight="2px",this.scrollPane.style.overflow="visible")},startup:function(){if(!this.started){this.started=!0;this.borderContainer?(this._initializeBorderContainer(),this.own(c.after(this.borderContainer,"layout",d.hitch(this.view,
"onResize")))):b.place(this.scrollPane,this.rteWindow);if(0<=this._enabledPlugins.indexOf("margin.linenumber"))this.onEnableLineGutter();this.cursor.initialize()}this.view.onLayoutChange()},_initializeBorderContainer:function(){this.borderContainer.startup();this.borderContainer.design="sidebar";this._scrollPaneContentPane=this._scrollPaneContentPane||this._createContentPaneWrapper(this.scrollPane,"overflow: hidden");this.borderContainer.addWithProperties(this._scrollPaneContentPane,{isResizable:!0,
isProportional:!0,region:"center"})},destroy:function(){this._featureInterface.onClose();this._syncTimer&&clearTimeout(this._syncTimer);this._pluginResolver.destroy();this._createdLocalActionDataService&&this.localActionService.destroy();this.borderContainer&&this.borderContainer.destroyRecursive();this.inherited(arguments)},_onClose:function(){},_loadActionsAndKeyBindings:function(){this.keyHandler.addBindings(this.clientKeyBindings);v.addLabelsForActionService(this.localActionService)},showEditor:function(){a.set(this.scrollPane,
"left","auto")},hideEditor:function(){a.set(this.scrollPane,"left","-10000px")},onEnableLineGutter:function(){this.addLeftMargin();this._featureInterface.onEnableLineGutter()},_createContentPaneWrapper:function(a,f){var b=new q({style:f});b.set("content",a);return b},addLeftMargin:function(){if(this.borderContainer&&!this._gutterContentPane){var a="overflow: hidden; width: "+this.marginProvider.getWidth()+"px";this._gutterContentPane=this._gutterContentPane||this._createContentPaneWrapper(this.marginProvider.marginContainer,
a);this.borderContainer.addWithProperties(this._gutterContentPane,{isProportional:!0,region:"left",layoutOrder:1})}},hideCursor:function(){this.cursor.hide()},showCursor:function(){this.cursor.show()},setCursorToEnd:function(){this.cursor.movePosition(this.cursor.END)},_initializeDocument:function(){this.initialDocumentText?this._internalDocument.openTextDocument(this.initialDocumentText,this.readOnly):this._internalDocument.newDocument(this.readOnly)},getActionDataService:function(){return this.localActionService},
getCursor:function(){return this.cursor},getDocument:function(){return this.document},getView:function(){return this.view},isEditable:function(){return!this._internalDocument.isReadOnly()},getUndoRedoStates:function(){return{isUndoable:this._undoRedoController.canUndo(),isRedoable:this._undoRedoController.canRedo()}},undoRedoStackUpdated:function(a){},undo:function(){this._undoRedoController.undo()},redo:function(){this._undoRedoController.redo()},addDocumentChangeListener:function(a){this.own(c.after(this._internalDocument,
"onDocumentChanged",a,!0))},getId:function(){return this.id},getMatlabCellModeText:function(){return""},focus:function(){this._focusService.setFocus()},blur:function(){this._focusService.setBlur()},resize:function(){this.borderContainer&&(this._updateDimensionsOfBorderContainer(),this.borderContainer.resize());this.view.onResize()},_updateDimensionsOfBorderContainer:function(){var a=this.marginProvider?this.marginProvider.getWidth():0;this.borderContainer.setFreeDimension("left",a)},setCursorInView:function(a,
f,b){!a.rteNode&&a.parentNode.rteNode&&(a=a.parentNode);b?this.cursor.fixAnchor():this.cursor.releaseAnchor();this.cursor.setPosition(this._internalDocument.textNode(a.rteNode,f),f,!1)},documentChanged:function(a){},hasSelection:function(){return this.cursor.hasSelection()},getText:function(){return this.document.getText()},setActive:function(){this._featureInterface.onActivated()},_onActivated:function(){},onCursorChanged:function(){if(this.cursor.isHidden())return!1;this.keyHandler.prepareKeyCapture(this.cursor.hasSelection())},
resetEditor:function(a,f){var b=f&&f.readOnly,k=f&&f.silentUpdate,c=f?f.cursorOffset:null;(!f||!f.preserveUndoStack)&&this._undoRedoController.clear();this.cursor.hide();this._internalDocument.newDocument(b);a?!1===k?(this._internalDocument.openTextDocument("",b),this.cursor.movePosition(this.cursor.START),this.document.insertTextAtCurrentPosition(a)):this._internalDocument.openTextDocument(a,b):this._internalDocument.newDocument(b);null!==a&&c?this.cursor.setPosition(c):this.cursor.movePosition(this.cursor.START);
this.cursor.show();0<this._enabledPlugins.indexOf("margin.linenumber")&&this.marginProvider.update()},selectAll:function(){this.cursor.selectAll()},getFeatureInterface:function(){this._featureInterface||(this._featureInterface={onClose:d.hitch(this,"_onClose"),onActivated:d.hitch(this,"_onActivated"),resize:d.hitch(this,"resize"),onEnableLineGutter:function(){}});return this._featureInterface},_loadPlugins:function(){var a=this._getDefaultDependencies(),f=A.plugins.concat(this.registry);this._pluginResolver=
new x(f,this._enabledPlugins,this._disabledPlugins,a,this.dependencies);this._loadFeatures()},_getDefaultDependencies:function(){var a={"rtc.actionservice":this.localActionService,"rtc.bordercontainer":this.borderContainer,"rtc.domnode":this.domNode,"rtc.fixedsize":this.features.fixedSize,"rtc.fileendselectable":this.features.fileEndSelectable,"rtc.scrollpane":this.scrollPane,"rtc.featureinterface":this.getFeatureInterface(),"rtc.internal.language":this._getLanguage()};this.clipboard&&(a["rtc.clipboard"]=
this.clipboard);return a},_getLanguage:function(){C.assert(this._language,"Language not associated with this Rich Text Component");var a=new B;if(a.isLanguageSupported(this._language))return a.setLanguage(this._language),a},_loadFeatures:function(){this._pluginResolver.resolve();this.marginProvider=this._pluginResolver.getDependency("rtc.margin");this.own(c.after(this.marginProvider,"onResize",d.hitch(this,"_handleMarginResize")));this._internalDocument=this._pluginResolver.getDependency("rtc.internaldocument");
this.document=this._pluginResolver.getDependency("rtc.document");this.cursor=this._pluginResolver.getDependency("rtc.cursor");this.view=this._pluginResolver.getDependency("rtc.view");this._undoRedoController=this._pluginResolver.getDependency("rtc.undoredo.controller")},_handleMarginResize:function(){this.borderContainer&&this._updateDimensionsOfBorderContainer();this.view.onLayoutChange()},_updateEnabledPlugins:function(a){a.push("rtc.margin");a.push("rtc.eventhandler");a.push("rtc.serializers");
0>this._disabledPlugins.indexOf("document")&&a.push("document");0>this._disabledPlugins.indexOf("cursor")&&a.push("cursor");0>this._disabledPlugins.indexOf("rtc.clipboard")&&a.push("rtc.clipboard");0>this._disabledPlugins.indexOf("rtc.code.comment")&&a.push("rtc.code.comment");0>this._disabledPlugins.indexOf("rtc.divcaret")&&a.push("rtc.divcaret");0>this._disabledPlugins.indexOf("rtc.undoredo.action")&&a.push("rtc.undoredo.action");0>this._disabledPlugins.indexOf("rtc.undoredo.cursor")&&a.push("rtc.undoredo.cursor");
0>this._disabledPlugins.indexOf("rtc.tooltip")&&a.push("rtc.tooltip");0>this._disabledPlugins.indexOf("rtc.imeinput")&&a.push("rtc.imeinput");0>this._disabledPlugins.indexOf("rtc.divselection")&&a.push("rtc.divselection");0>this._disabledPlugins.indexOf("rtc.plaintextmimeconverter")&&a.push("rtc.plaintextmimeconverter");0>this._disabledPlugins.indexOf("rtc.plaintextmimeincodeconverter")&&a.push("rtc.plaintextmimeincodeconverter");0>this._disabledPlugins.indexOf("rtc.unicodestringmimeconverter")&&
a.push("rtc.unicodestringmimeconverter");0>this._disabledPlugins.indexOf("rtc.plaintextmimegeneratorprovider")&&a.push("rtc.plaintextmimegeneratorprovider");0>this._disabledPlugins.indexOf("rtc.plugins.cursorgripper")&&a.push("rtc.plugins.cursorgripper");0>this._disabledPlugins.indexOf("rtc.plugins.device.ios.virtualkeyboardshortcutbar")&&a.push("rtc.plugins.device.ios.virtualkeyboardshortcutbar")}})})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s){return k("dijit.layout.ContentPane",[g,d,c],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:h._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",
isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(a,f,b){var k=new b(a,f);return!k.href&&k._contentSetter&&k._contentSetter.parseDeferred&&!k._contentSetter.parseDeferred.isFulfilled()?k._contentSetter.parseDeferred.then(function(){return k}):k},create:function(a,f){if((!a||!a.template)&&f&&!("href"in a)&&!("content"in a)){f=n.byId(f);for(var b=f.ownerDocument.createDocumentFragment();f.firstChild;)b.appendChild(f.firstChild);
a=e.delegate(a,{content:b})}this.inherited(arguments,[a,f])},postMixInProperties:function(){this.inherited(arguments);var a=r.getLocalization("dijit","loading",this.lang);this.loadingMessage=b.substitute(this.loadingMessage,a);this.errorMessage=b.substitute(this.errorMessage,a)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&f.forEach(this._contentSetter.parseResults,
function(a){!a._started&&(!a._destroyed&&e.isFunction(a.startup))&&(a.startup(),a._started=!0)},this)},_startChildren:function(){f.forEach(this.getChildren(),function(a){!a._started&&(!a._destroyed&&e.isFunction(a.startup))&&(a.startup(),a._started=!0)});this._contentSetter&&f.forEach(this._contentSetter.parseResults,function(a){!a._started&&(!a._destroyed&&e.isFunction(a.startup))&&(a.startup(),a._started=!0)},this)},setHref:function(a){h.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.",
"","2.0");return this.set("href",a)},_setHrefAttr:function(a){this.cancel();this.onLoadDeferred=new l(e.hitch(this,"cancel"));this.onLoadDeferred.then(e.hitch(this,"onLoad"));this._set("href",a);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(a){h.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",a)},_setContentAttr:function(a){this._set("href",
"");this.cancel();this.onLoadDeferred=new l(e.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(e.hitch(this,"onLoad"));this._setContent(a||"");this._isDownloaded=!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(a){this._beingDestroyed||
this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){this.cancel();this.onLoadDeferred=new l(e.hitch(this,"cancel"));this.onLoadDeferred.then(e.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var a=this,f={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};
e.isObject(this.ioArgs)&&e.mixin(f,this.ioArgs);var b=this._xhrDfd=(this.ioMethod||q.get)(f),k;b.then(function(f){k=f;try{return a._isDownloaded=!0,a._setContent(f,!1)}catch(b){a._onError("Content",b)}},function(f){b.canceled||a._onError("Download",f);delete a._xhrDfd;return f}).then(function(){a.onDownloadEnd();delete a._xhrDfd;return k});delete this._hrefChanged},_onLoadHandler:function(a){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(a)}catch(f){console.error("Error "+this.widgetId+
" running custom onLoad code: "+f.message)}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(a){console.error("Error "+this.widgetId+" running custom onUnload code: "+a.message)}},destroyDescendants:function(a){this.isLoaded&&this._onUnloadHandler();var b=this._contentSetter;f.forEach(this.getChildren(),function(f){f.destroyRecursive?f.destroyRecursive(a):f.destroy&&f.destroy(a);f._destroyed=!0});b&&(f.forEach(b.parseResults,function(f){f._destroyed||(f.destroyRecursive?
f.destroyRecursive(a):f.destroy&&f.destroy(a),f._destroyed=!0)}),delete b.parseResults);a||m.empty(this.containerNode);delete this._singleChild},_setContent:function(f,b){f=this.preprocessContent(f);this.destroyDescendants();var k=this._contentSetter;k&&k instanceof a._ContentSetter||(k=this._contentSetter=new a._ContentSetter({node:this.containerNode,_onError:e.hitch(this,this._onError),onContentError:e.hitch(this,function(a){a=this.onContentError(a);try{this.containerNode.innerHTML=a}catch(f){console.error("Fatal "+
this.id+" could not change content due to "+f.message,f)}})}));var c=e.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!f.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),c=k.set(e.isObject(f)&&f.domNode?f.domNode:f,c),d=this;return s(c&&c.then?c:k.parseDeferred,function(){delete d._contentSetterParams;b||(d._started&&(d._startChildren(),d._scheduleLayout()),d._onLoadHandler(f))})},
preprocessContent:function(a){return a},_onError:function(a,f,b){this.onLoadDeferred.reject(f);a=this["on"+a+"Error"].call(this,f);b?console.error(b,f):a&&this._setContent(a,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m){function q(){}function r(f){return function(b,k,c,d){return b&&"string"==typeof k&&b[k]==q?b.on(k.substring(2).toLowerCase(),a.hitch(c,d)):f.apply(g,arguments)}}h.around(g,"connect",r);b.connect&&h.around(b,"connect",r);h=d("dijit._Widget",[n,p,m],{onClick:q,onDblClick:q,onKeyDown:q,onKeyPress:q,onKeyUp:q,onMouseDown:q,onMouseMove:q,onMouseOut:q,onMouseOver:q,onMouseLeave:q,onMouseEnter:q,onMouseUp:q,constructor:function(a){this._toConnect={};for(var f in a)this[f]===
q&&(this._toConnect[f.replace(/^on/,"").toLowerCase()]=a[f],delete a[f])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(a,f){return this[this._onMap(a)]===q?g.connect(this.domNode,a.toLowerCase(),this,f):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,f){b.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.",
"","2.0");this.set(a,f)},attr:function(a,f){return 2<=arguments.length||"object"===typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){b.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?f("[widgetId]",this.containerNode).map(l.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});c("dijit-legacy-requires")&&k(0,function(){require(["dijit/_base"])});
return h})},"dijit/registry":function(){define(["dojo/_base/array","dojo/_base/window","./main"],function(h,e,g){var d={},c={},b={length:0,add:function(a){if(c[a.id])throw Error("Tried to register widget with id\x3d\x3d"+a.id+" but that id is already registered");c[a.id]=a;this.length++},remove:function(a){c[a]&&(delete c[a],this.length--)},byId:function(a){return"string"==typeof a?c[a]:a},byNode:function(a){return c[a.getAttribute("widgetId")]},toArray:function(){var a=[],f;for(f in c)a.push(c[f]);
return a},getUniqueId:function(a){var f;do f=a+"_"+(a in d?++d[a]:d[a]=0);while(c[f]);return"dijit"==g._scopeName?f:g._scopeName+"_"+f},findWidgets:function(a,f){function b(a){for(a=a.firstChild;a;a=a.nextSibling)if(1==a.nodeType){var e=a.getAttribute("widgetId");e?(e=c[e])&&d.push(e):a!==f&&b(a)}}var d=[];b(a);return d},_destroyAll:function(){g._curFocus=null;g._prevFocus=null;g._activeStack=[];h.forEach(b.findWidgets(e.body()),function(a){a._destroyed||(a.destroyRecursive?a.destroyRecursive():a.destroy&&
a.destroy())})},getEnclosingWidget:function(a){for(;a;){var f=1==a.nodeType&&a.getAttribute("widgetId");if(f)return c[f];a=a.parentNode}return null},_hash:c};return g.registry=b})},"dijit/main":function(){define(["dojo/_base/kernel"],function(h){return h.dijit})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable require ./registry".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,B){function F(a){return function(b){f[b?"set":"remove"](this.domNode,a,b);this._set(a,b)}}m.add("dijit-legacy-requires",!q.isAsync);m("dijit-legacy-requires")&&t(0,function(){h(["dijit/_base/manager"])});var G={};return b("dijit._WidgetBase",[u,x],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:F("lang"),dir:"",_setDirAttr:F("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",baseClass:"",
srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",a)},attributeMap:{},_blankGif:d.blankGif||h.toUrl("dojo/resources/blank.gif"),textDir:"",_introspect:function(){var a=this.constructor;if(!a._setterAttrs){var f=a.prototype,b=a._setterAttrs=[],a=a._onMap={},k;for(k in f.attributeMap)b.push(k);for(k in f)/^on/.test(k)&&(a[k.substring(2).toLowerCase()]=k),/^_set[A-Z](.*)Attr$/.test(k)&&(k=k.charAt(4).toLowerCase()+k.substr(5,
k.length-9),(!f.attributeMap||!(k in f.attributeMap))&&b.push(k))}},postscript:function(a,f){this.create(a,f)},create:function(f,b){this._introspect();this.srcNodeRef=a.byId(b);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&(this.srcNodeRef.id&&"string"==typeof this.srcNodeRef.id)&&(this.id=this.srcNodeRef.id);f&&(this.params=f,r.mixin(this,f));this.postMixInProperties();this.id||(this.id=B.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);this.ownerDocument=
this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=w.body(this.ownerDocument);B.add(this);this.buildRendering();var k;if(this.domNode){this._applyAttributes();var c=this.srcNodeRef;c&&(c.parentNode&&this.domNode!==c)&&(c.parentNode.replaceChild(this.domNode,c),k=!0);this.domNode.setAttribute("widgetId",this.id)}this.postCreate();k&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a={},f;for(f in this.params||{})a[f]=this._get(f);
e.forEach(this.constructor._setterAttrs,function(f){if(!(f in a)){var b=this._get(f);b&&this.set(f,b)}},this);for(f in a)this.set(f,a[f])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(e.map(a,function(a){return a+"Rtl"})));k.add(this.domNode,a)}},postCreate:function(){},startup:function(){this._started||(this._started=
!0,e.forEach(this.getChildren(),function(a){!a._started&&(!a._destroyed&&r.isFunction(a.startup))&&(a.startup(),a._started=!0)}))},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(a){function f(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a)}this._beingDestroyed=!0;this.uninitialize();e.forEach(this._connects,r.hitch(this,"disconnect"));e.forEach(this._supportingWidgets,f);this.domNode&&e.forEach(B.findWidgets(this.domNode,
this.containerNode),f);this.destroyRendering(a);B.remove(this.id);this._destroyed=!0},destroyRendering:function(a){this.bgIframe&&(this.bgIframe.destroy(a),delete this.bgIframe);this.domNode&&(a?f.remove(this.domNode,"widgetId"):l.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(a||l.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){e.forEach(this.getChildren(),function(f){f.destroyRecursive&&f.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var f=
this.domNode;r.isObject(a)?p.set(f,a):f.style.cssText=f.style.cssText?f.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(a,b,c){c=3<=arguments.length?c:this.attributeMap[a];e.forEach(r.isArray(c)?c:[c],function(c){var d=this[c.node||c||"domNode"];switch(c.type||"attribute"){case "attribute":r.isFunction(b)&&(b=r.hitch(this,b));c=c.attribute?c.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;d.tagName?f.set(d,c,b):d.set(c,b);break;case "innerText":d.innerHTML="";d.appendChild(this.ownerDocument.createTextNode(b));
break;case "textContent":d.textContent=b;break;case "innerHTML":d.innerHTML=b;break;case "class":k.replace(d,b,this[a]);break;case "toggleClass":k.toggle(d,c.className||a,b)}},this)},get:function(a){var f=this._getAttrNames(a);return this[f.g]?this[f.g]():this._get(a)},set:function(a,f){if("object"===typeof a){for(var b in a)this.set(b,a[b]);return this}b=this._getAttrNames(a);var k=this[b.s];if(r.isFunction(k))var c=k.apply(this,Array.prototype.slice.call(arguments,1));else{var k=this.focusNode&&
!r.isFunction(this.focusNode)?"focusNode":"domNode",d=this[k]&&this[k].tagName,e;if(e=d)if(!(e=G[d])){e=this[k];var g={},l;for(l in e)g[l.toLowerCase()]=!0;e=G[d]=g}l=e;b=a in this.attributeMap?this.attributeMap[a]:b.s in this?this[b.s]:l&&b.l in l&&"function"!=typeof f||/^aria-|^data-|^role$/.test(a)?k:null;null!=b&&this._attrToDom(a,f,b);this._set(a,f)}return c||this},_attrPairNames:{},_getAttrNames:function(a){var f=this._attrPairNames;if(f[a])return f[a];var b=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-
1).toUpperCase()});return f[a]={n:a+"Node",s:"_set"+b+"Attr",g:"_get"+b+"Attr",l:b.toLowerCase()}},_set:function(a,f){var b=this[a];this[a]=f;if(this._created&&!(b===f||b!==b&&f!==f))this._watchCallbacks&&this._watchCallbacks(a,b,f),this.emit("attrmodified-"+a,{detail:{prevValue:b,newValue:f}})},_get:function(a){return this[a]},emit:function(a,f,b){f=f||{};void 0===f.bubbles&&(f.bubbles=!0);void 0===f.cancelable&&(f.cancelable=!0);f.detail||(f.detail={});f.detail.widget=this;var k,c=this["on"+a];
c&&(k=c.apply(this,b?b:[f]));this._started&&!this._beingDestroyed&&s.emit(this.domNode,a.toLowerCase(),f);return k},on:function(a,f){var b=this._onMap(a);return b?g.after(this,b,f,!0):this.own(s(this.domNode,a,f))[0]},_onMap:function(a){var f=this.constructor,b=f._onMap;if(!b){var b=f._onMap={},k;for(k in f.prototype)/^on/.test(k)&&(b[k.replace(/^on/,"").toLowerCase()]=k)}return b["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+
"]"},getChildren:function(){return this.containerNode?B.findWidgets(this.containerNode):[]},getParent:function(){return B.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,f,b){return this.own(c.connect(a,f,this,b))[0]},disconnect:function(a){a.remove()},subscribe:function(a,f){return this.own(v.subscribe(a,r.hitch(this,f)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():n.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&
"none"!=p.get(this.domNode,"display")},placeAt:function(f,b){var k=!f.tagName&&B.byId(f);k&&k.addChild&&(!b||"number"===typeof b)?k.addChild(this,b):(k=k&&"domNode"in k?k.containerNode&&!/after|before|replace/.test(b||"")?k.containerNode:k.domNode:a.byId(f,this.ownerDocument),l.place(this.domNode,k,b),!this._started&&(this.getParent()||{})._started&&this.startup());return this},defer:function(a,f){var b=setTimeout(r.hitch(this,function(){b&&(b=null,this._destroyed||r.hitch(this,a)())}),f||0);return{remove:function(){b&&
(clearTimeout(b),b=null);return null}}}})})},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","./when"],function(h,e,g,d){return h("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(c){var b=this._attrPairNames;return b[c]?b[c]:b[c]={s:"_"+c+"Setter",g:"_"+c+"Getter"}},postscript:function(c){c&&this.set(c)},_get:function(c,b){return"function"===typeof this[b.g]?this[b.g]():this[c]},get:function(c){return this._get(c,this._getAttrNames(c))},set:function(c,
b){if("object"===typeof c){for(var a in c)c.hasOwnProperty(a)&&"_watchCallbacks"!=a&&this.set(a,c[a]);return this}a=this._getAttrNames(c);var f=this._get(c,a);a=this[a.s];var k;"function"===typeof a?k=a.apply(this,Array.prototype.slice.call(arguments,1)):this[c]=b;if(this._watchCallbacks){var e=this;d(k,function(){e._watchCallbacks(c,f,b)})}return this},_changeAttrValue:function(c,b){var a=this.get(c);this[c]=b;this._watchCallbacks&&this._watchCallbacks(c,a,b);return this},watch:function(c,b){var a=
this._watchCallbacks;if(!a)var f=this,a=this._watchCallbacks=function(b,k,c,d){var e=function(a){if(a){a=a.slice();for(var d=0,e=a.length;d<e;d++)a[d].call(f,b,k,c)}};e(a["_"+b]);d||e(a["*"])};!b&&"function"===typeof c?(b=c,c="*"):c="_"+c;var k=a[c];"object"!==typeof k&&(k=a[c]=[]);k.push(b);var d={};d.unwatch=d.remove=function(){var a=g.indexOf(k,b);-1<a&&k.splice(a,1)};return d}})})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(h,e,g){return g("dijit.Destroyable",
null,{destroy:function(d){this._destroyed=!0},own:function(){var d=["destroyRecursive","destroy","remove"];h.forEach(arguments,function(c){function b(){f.remove();h.forEach(k,function(a){a.remove()})}var a,f=e.before(this,"destroy",function(f){c[a](f)}),k=[];c.then?(a="cancel",c.then(b,b)):h.forEach(d,function(f){"function"===typeof c[f]&&(a||(a=f),k.push(e.after(c,f,b,!0)))})},this);return arguments}})})},"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),
function(h,e,g,d,c,b){h=d("dijit._OnDijitClickMixin",null,{connect:function(a,f,k){return this.inherited(arguments,[a,"ondijitclick"==f?b:f,k])}});h.a11yclick=b;return h})},"dijit/a11yclick":function(){define(["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(h,e,g,d){function c(a){if((a.keyCode===h.ENTER||a.keyCode===h.SPACE)&&!/input|button|textarea/i.test(a.target.nodeName))for(a=a.target;a;a=a.parentNode)if(a.dojoClick)return!0}var b;g(document,"keydown",function(a){c(a)?(b=a.target,a.preventDefault()):
b=null});g(document,"keyup",function(a){c(a)&&a.target==b&&(b=null,g.emit(a.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:a.ctrlKey,shiftKey:a.shiftKey,metaKey:a.metaKey,altKey:a.altKey,_origType:a.type}))});var a=function(a,b){a.dojoClick=!0;return g(a,"click",b)};a.click=a;a.press=function(a,b){var c=g(a,d.press,function(a){("mousedown"!=a.type||e.isLeft(a))&&b(a)}),n=g(a,"keydown",function(a){(a.keyCode===h.ENTER||a.keyCode===h.SPACE)&&b(a)});return{remove:function(){c.remove();n.remove()}}};
a.release=function(a,b){var c=g(a,d.release,function(a){("mouseup"!=a.type||e.isLeft(a))&&b(a)}),n=g(a,"keyup",function(a){(a.keyCode===h.ENTER||a.keyCode===h.SPACE)&&b(a)});return{remove:function(){c.remove();n.remove()}}};a.move=d.move;return a})},"dojo/touch":function(){define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(h,e,g,d,c,b,a,f,k,l){function n(a,f,k){return r&&k?function(a,f){return b(a,k,f)}:t?function(k,c){var d=
b(k,f,function(a){c.call(this,a);I=(new Date).getTime()}),e=b(k,a,function(a){(!I||(new Date).getTime()>I+1E3)&&c.call(this,a)});return{remove:function(){d.remove();e.remove()}}}:function(f,k){return b(f,a,k)}}function p(a){do if(void 0!==a.dojoClick)return a;while(a=a.parentNode)}function m(a,k,c){if(!f.isRight(a)){var e=p(a.target);if(v=!a.target.disabled&&e&&e.dojoClick)if(x=(w="useTarget"==v)?e:a.target,w&&a.preventDefault(),A=a.changedTouches?a.changedTouches[0].pageX-l.global.pageXOffset:a.clientX,
B=a.changedTouches?a.changedTouches[0].pageY-l.global.pageYOffset:a.clientY,F=("object"==typeof v?v.x:"number"==typeof v?v:0)||4,G=("object"==typeof v?v.y:"number"==typeof v?v:0)||4,!u){u=!0;var n=function(a){v=w?g.isDescendant(l.doc.elementFromPoint(a.changedTouches?a.changedTouches[0].pageX-l.global.pageXOffset:a.clientX,a.changedTouches?a.changedTouches[0].pageY-l.global.pageYOffset:a.clientY),x):v&&(a.changedTouches?a.changedTouches[0].target:a.target)==x&&Math.abs((a.changedTouches?a.changedTouches[0].pageX-
l.global.pageXOffset:a.clientX)-A)<=F&&Math.abs((a.changedTouches?a.changedTouches[0].pageY-l.global.pageYOffset:a.clientY)-B)<=G};l.doc.addEventListener(k,function(a){f.isRight(a)||(n(a),w&&a.preventDefault())},!0);l.doc.addEventListener(c,function(a){if(!f.isRight(a)&&(n(a),v)){H=(new Date).getTime();var k=w?x:a.target;"LABEL"===k.tagName&&(k=g.byId(k.getAttribute("for"))||k);var c=a.changedTouches?a.changedTouches[0]:a,d=function(f){var b=document.createEvent("MouseEvents");b._dojo_click=!0;b.initMouseEvent(f,
!0,!0,a.view,a.detail,c.screenX,c.screenY,c.clientX,c.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null);return b},e=d("mousedown"),l=d("mouseup"),m=d("click");setTimeout(function(){b.emit(k,"mousedown",e);b.emit(k,"mouseup",l);b.emit(k,"click",m);H=(new Date).getTime()},0)}},!0);a=function(a){l.doc.addEventListener(a,function(f){var b=f.target;v&&(!f._dojo_click&&(new Date).getTime()<=H+1E3&&!("INPUT"==b.tagName&&d.contains(b,"dijitOffScreen")))&&(f.stopPropagation(),f.stopImmediatePropagation&&
f.stopImmediatePropagation(),"click"==a&&(("INPUT"!=b.tagName||"radio"==b.type&&(d.contains(b,"dijitCheckBoxInput")||d.contains(b,"mblRadioButton"))||"checkbox"==b.type&&(d.contains(b,"dijitCheckBoxInput")||d.contains(b,"mblCheckBox")))&&"TEXTAREA"!=b.tagName&&"AUDIO"!=b.tagName&&"VIDEO"!=b.tagName)&&f.preventDefault())},!0)};a("click");a("mousedown");a("mouseup")}}}var q=5>a("ios"),r=a("pointer-events")||a("MSPointer"),s=function(){var f={},b;for(b in{down:1,move:1,up:1,cancel:1,over:1,out:1})f[b]=
a("MSPointer")?"MSPointer"+b.charAt(0).toUpperCase()+b.slice(1):"pointer"+b;return f}(),t=a("touch-events"),u,v,w=!1,x,A,B,F,G,H,I,K;a("touch")&&(r?k(function(){l.doc.addEventListener(s.down,function(a){m(a,s.move,s.up)},!0)}):k(function(){function f(b){var k=c.delegate(b,{bubbles:!0});6<=a("ios")&&(k.touches=b.touches,k.altKey=b.altKey,k.changedTouches=b.changedTouches,k.ctrlKey=b.ctrlKey,k.metaKey=b.metaKey,k.shiftKey=b.shiftKey,k.targetTouches=b.targetTouches);return k}K=l.body();l.doc.addEventListener("touchstart",
function(a){I=(new Date).getTime();var f=K;K=a.target;b.emit(f,"dojotouchout",{relatedTarget:K,bubbles:!0});b.emit(K,"dojotouchover",{relatedTarget:f,bubbles:!0});m(a,"touchmove","touchend")},!0);b(l.doc,"touchmove",function(a){I=(new Date).getTime();var k=l.doc.elementFromPoint(a.pageX-(q?0:l.global.pageXOffset),a.pageY-(q?0:l.global.pageYOffset));k&&(K!==k&&(b.emit(K,"dojotouchout",{relatedTarget:k,bubbles:!0}),b.emit(k,"dojotouchover",{relatedTarget:K,bubbles:!0}),K=k),b.emit(k,"dojotouchmove",
f(a))||a.preventDefault())});b(l.doc,"touchend",function(a){I=(new Date).getTime();var k=l.doc.elementFromPoint(a.pageX-(q?0:l.global.pageXOffset),a.pageY-(q?0:l.global.pageYOffset))||l.body();b.emit(k,"dojotouchend",f(a))})}));e={press:n("mousedown","touchstart",s.down),move:n("mousemove","dojotouchmove",s.move),release:n("mouseup","dojotouchend",s.up),cancel:n(f.leave,"touchcancel",r?s.cancel:null),over:n("mouseover","dojotouchover",s.over),out:n("mouseout","dojotouchout",s.out),enter:f._eventHandler(n("mouseover",
"dojotouchover",s.over)),leave:f._eventHandler(n("mouseout","dojotouchout",s.out))};return h.touch=e})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(h,e,g,d){d.extend(e,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return g("dijit._FocusMixin",null,{_focusManager:h})})},"dijit/focus":function(){define("dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/_base/lang dojo/on dojo/domReady dojo/sniff dojo/Stateful dojo/_base/window dojo/window ./a11y ./registry ./main".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t){var u,v,w=new (e([p,a],{curNode:null,activeStack:[],constructor:function(){var a=f.hitch(this,function(a){g.isDescendant(this.curNode,a)&&this.set("curNode",null);g.isDescendant(this.prevNode,a)&&this.set("prevNode",null)});h.before(b,"empty",a);h.before(b,"destroy",a)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(a,f){var b=this,c=a.document&&a.document.body;if(c){var d=n("pointer-events")?"pointerdown":n("MSPointer")?
"MSPointerDown":n("touch-events")?"mousedown, touchstart":"mousedown",e=k(a.document,d,function(a){if(!a||!(a.target&&null==a.target.parentNode))b._onTouchNode(f||a.target,"mouse")}),g=k(c,"focusin",function(a){if(a.target.tagName){var k=a.target.tagName.toLowerCase();"#document"==k||"body"==k||(r.isFocusable(a.target)?b._onFocusNode(f||a.target):b._onTouchNode(f||a.target))}}),l=k(c,"focusout",function(a){b._onBlurNode(f||a.target)});return{remove:function(){e.remove();g.remove();l.remove();c=e=
g=l=null}}}},_onBlurNode:function(a){a=(new Date).getTime();a<u+100||(this._clearFocusTimer&&clearTimeout(this._clearFocusTimer),this._clearFocusTimer=setTimeout(f.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null)}),0),this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),a<v+100||(this._clearActiveWidgetsTimer=setTimeout(f.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0)))},_onTouchNode:function(a,f){v=(new Date).getTime();
this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);c.contains(a,"dijitPopup")&&(a=a.firstChild);var b=[];try{for(;a;){var k=d.get(a,"dijitPopupParent");if(k)a=s.byId(k).domNode;else if(a.tagName&&"body"==a.tagName.toLowerCase()){if(a===m.body())break;a=q.get(a.ownerDocument).frameElement}else{var e=a.getAttribute&&a.getAttribute("widgetId"),g=e&&s.byId(e);g&&!("mouse"==f&&g.get("disabled"))&&b.unshift(e);a=a.parentNode}}}catch(l){}this._setStack(b,
f)},_onFocusNode:function(a){a&&9!=a.nodeType&&(u=(new Date).getTime(),this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(a),a!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",a)))},_setStack:function(a,f){var b=this.activeStack,k=b.length-1,c=a.length-1;if(a[c]!=b[k]){this.set("activeStack",a);var d;for(d=k;0<=d&&b[d]!=a[d];d--)if(k=s.byId(b[d]))k._hasBeenBlurred=!0,k.set("focused",!1),k._focusManager==this&&k._onBlur(f),
this.emit("widget-blur",k,f);for(d++;d<=c;d++)if(k=s.byId(a[d]))k.set("focused",!0),k._focusManager==this&&k._onFocus(f),this.emit("widget-focus",k,f)}},focus:function(a){if(a)try{a.focus()}catch(f){}}}));l(function(){var a=w.registerWin(q.get(document));n("ie")&&k(window,"unload",function(){a&&(a.remove(),a=null)})});t.focus=function(a){w.focus(a)};for(var x in w)/^_/.test(x)||(t.focus[x]="function"==typeof w[x]?f.hitch(w,x):w[x]);w.watch(function(a,f,b){t.focus[a]=b});return w})},"dojo/window":function(){define("./_base/lang ./sniff ./_base/window ./dom ./dom-geometry ./dom-style ./dom-construct".split(" "),
function(h,e,g,d,c,b,a){e.add("rtl-adjust-position-for-verticalScrollBar",function(f,b){var d=g.body(b),e=a.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},d,"last"),m=a.create("div",{style:{overflow:"hidden",direction:"ltr"}},e,"last"),h=0!=c.position(m).x;e.removeChild(m);d.removeChild(e);return h});e.add("position-fixed-support",function(f,b){var d=g.body(b),e=a.create("span",{style:{visibility:"hidden",
position:"fixed",left:"1px",top:"1px"}},d,"last"),m=a.create("span",{style:{position:"fixed",left:"0",top:"0"}},e,"last"),h=c.position(m).x!=c.position(e).x;e.removeChild(m);d.removeChild(e);return h});var f={getBox:function(a){a=a||g.doc;var b="BackCompat"==a.compatMode?g.body(a):a.documentElement,d=c.docScroll(a);if(e("touch")){var p=f.get(a);a=p.innerWidth||b.clientWidth;b=p.innerHeight||b.clientHeight}else a=b.clientWidth,b=b.clientHeight;return{l:d.x,t:d.y,w:a,h:b}},get:function(a){if(e("ie")&&
f!==document.parentWindow){a.parentWindow.execScript("document._parentWindow \x3d window;","Javascript");var b=a._parentWindow;a._parentWindow=null;return b}return a.parentWindow||a.defaultView},scrollIntoView:function(a,f){try{a=d.byId(a);var n=a.ownerDocument||g.doc,p=g.body(n),m=n.documentElement||p.parentNode,h=e("ie")||e("trident"),r=e("webkit");if(!(a==p||a==m))if(!e("mozilla")&&(!h&&!r&&!e("opera")&&!e("trident")&&!e("edge"))&&"scrollIntoView"in a)a.scrollIntoView(!1);else{var s="BackCompat"==
n.compatMode,t=Math.min(p.clientWidth||m.clientWidth,m.clientWidth||p.clientWidth),u=Math.min(p.clientHeight||m.clientHeight,m.clientHeight||p.clientHeight),n=r||s?p:m,v=f||c.position(a),w=a.parentNode,r=function(a){return 6>=h||7==h&&s?!1:e("position-fixed-support")&&"fixed"==b.get(a,"position").toLowerCase()},x=this,A=function(a,f,b){"BODY"==a.tagName||"HTML"==a.tagName?x.get(a.ownerDocument).scrollBy(f,b):(f&&(a.scrollLeft+=f),b&&(a.scrollTop+=b))};if(!r(a))for(;w;){w==p&&(w=n);var B=c.position(w),
F=r(w),G="rtl"==b.getComputedStyle(w).direction.toLowerCase();if(w==n){B.w=t;B.h=u;if(n==m&&(h||e("trident"))&&G)B.x+=n.offsetWidth-B.w;B.x=0;B.y=0}else{var H=c.getPadBorderExtents(w);B.w-=H.w;B.h-=H.h;B.x+=H.l;B.y+=H.t;var I=w.clientWidth,K=B.w-I;0<I&&0<K&&(G&&e("rtl-adjust-position-for-verticalScrollBar")&&(B.x+=K),B.w=I);I=w.clientHeight;K=B.h-I;0<I&&0<K&&(B.h=I)}F&&(0>B.y&&(B.h+=B.y,B.y=0),0>B.x&&(B.w+=B.x,B.x=0),B.y+B.h>u&&(B.h=u-B.y),B.x+B.w>t&&(B.w=t-B.x));var C=v.x-B.x,M=v.y-B.y,Q=C+v.w-B.w,
L=M+v.h-B.h,N,J;if(0<Q*C&&(w.scrollLeft||w==n||w.scrollWidth>w.offsetHeight)){N=Math[0>C?"max":"min"](C,Q);if(G&&(8==h&&!s||5<=e("trident")))N=-N;J=w.scrollLeft;A(w,N,0);N=w.scrollLeft-J;v.x-=N}if(0<L*M&&(w.scrollTop||w==n||w.scrollHeight>w.offsetHeight))N=Math.ceil(Math[0>M?"max":"min"](M,L)),J=w.scrollTop,A(w,0,N),N=w.scrollTop-J,v.y-=N;w=w!=n&&!F&&w.parentNode}}}catch(O){console.error("scrollIntoView: "+O),a.scrollIntoView(!1)}}};h.setObject("dojo.window",f);return f})},"dijit/a11y":function(){define("dojo/_base/array dojo/dom dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/sniff ./main".split(" "),
function(h,e,g,d,c,b,a){var f={_isElementShown:function(a){var f=d.get(a);return"hidden"!=f.visibility&&"collapsed"!=f.visibility&&"none"!=f.display&&"hidden"!=g.get(a,"type")},hasDefaultTabStop:function(a){switch(a.nodeName.toLowerCase()){case "a":return g.has(a,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":var f;try{var b=a.contentDocument;if("designMode"in b&&"on"==b.designMode)return!0;f=b.body}catch(c){try{f=a.contentWindow.document.body}catch(d){return!1}}return f&&
("true"==f.contentEditable||f.firstChild&&"true"==f.firstChild.contentEditable);default:return"true"==a.contentEditable}},effectiveTabIndex:function(a){return g.get(a,"disabled")?void 0:g.has(a,"tabIndex")?+g.get(a,"tabIndex"):f.hasDefaultTabStop(a)?0:void 0},isTabNavigable:function(a){return 0<=f.effectiveTabIndex(a)},isFocusable:function(a){return-1<=f.effectiveTabIndex(a)},_getTabNavigable:function(a){function c(a){return a&&"input"==a.tagName.toLowerCase()&&a.type&&"radio"==a.type.toLowerCase()&&
a.name&&a.name.toLowerCase()}var d,e,m,h,r,s,t={},u=f._isElementShown,v=f.effectiveTabIndex,w=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(!(1!=a.nodeType||9>=b("ie")&&"HTML"!==a.scopeName||!u(a))){var f=v(a);if(0<=f){if(0==f)d||(d=a),e=a;else if(0<f){if(!m||f<h)h=f,m=a;if(!r||f>=s)s=f,r=a}f=c(a);g.get(a,"checked")&&f&&(t[f]=a)}"SELECT"!=a.nodeName.toUpperCase()&&w(a)}};u(a)&&w(a);return{first:t[c(d)]||d,last:t[c(e)]||e,lowest:t[c(m)]||m,highest:t[c(r)]||r}},getFirstInTabbingOrder:function(a,
b){var c=f._getTabNavigable(e.byId(a,b));return c.lowest?c.lowest:c.first},getLastInTabbingOrder:function(a,b){var c=f._getTabNavigable(e.byId(a,b));return c.last?c.last:c.highest}};c.mixin(a,f);return f})},"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./domReady","./sniff","./_base/window"],function(h,e,g,d,c){var b=c.doc.documentElement;c=d("ie");var a=d("trident"),f=d("opera"),k=Math.floor,l=d("ff"),n=h.boxModel.replace(/-/,""),f={dj_quirks:d("quirks"),dj_opera:f,dj_khtml:d("khtml"),
dj_webkit:d("webkit"),dj_safari:d("safari"),dj_chrome:d("chrome"),dj_edge:d("edge"),dj_gecko:d("mozilla"),dj_ios:d("ios"),dj_android:d("android")};c&&(f.dj_ie=!0,f["dj_ie"+k(c)]=!0,f.dj_iequirks=d("quirks"));a&&(f.dj_trident=!0,f["dj_trident"+k(a)]=!0);l&&(f["dj_ff"+k(l)]=!0);f["dj_"+n]=!0;var p="",m;for(m in f)f[m]&&(p+=m+" ");b.className=e.trim(b.className+" "+p);g(function(){if(!h.isBodyLtr()){var a="dj_rtl dijitRtl "+p.replace(/ /g,"-rtl ");b.className=e.trim(b.className+" "+a+"dj_rtl dijitRtl "+
p.replace(/ /g,"-rtl "))}});return d})},"dijit/hccss":function(){define(["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(h,e,g,d){g(function(){e("highcontrast")&&h.add(d.body(),"dijit_a11y")});return e})},"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),function(h,e,g,d,c,b,a){c.add("highcontrast",function(){var f=a.doc.createElement("div");try{f.style.cssText='border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("'+
(e.blankGif||h.toUrl("./resources/blank.gif"))+'");';a.body().appendChild(f);var b=d.getComputedStyle(f),g=b.backgroundImage;return b.borderTopColor==b.borderRightColor||g&&("none"==g||"url(invalid-url:)"==g)}catch(n){return console.warn("hccss: exception detecting high-contrast mode, document is likely hidden: "+n.toString()),!1}finally{8>=c("ie")?f.outerHTML="":a.body().removeChild(f)}});b(function(){c("highcontrast")&&g.add(a.body(),"dj_a11y")});return c})},"dijit/_Container":function(){define(["dojo/_base/array",
"dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(h,e,g,d){return e("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode)},addChild:function(c,b){var a=this.containerNode;if(0<b){for(a=a.firstChild;0<b;)1==a.nodeType&&b--,a=a.nextSibling;a?b="before":(a=this.containerNode,b="last")}g.place(c.domNode,a,b);this._started&&!c._started&&c.startup()},removeChild:function(c){"number"==typeof c&&(c=this.getChildren()[c]);
c&&(c=c.domNode)&&c.parentNode&&c.parentNode.removeChild(c)},hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(c,b){var a=this.getChildren(),f=h.indexOf(a,c);return a[f+b]},getIndexOfChild:function(c){return h.indexOf(this.getChildren(),c)}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),function(h,
e,g,d,c,b,a,f,k,l){return e("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var a=this.getParent();this._childOfLayoutWidget=a&&a.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(k.on("resize",b.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var b=[],k=!1;a("\x3e *",this.containerNode).some(function(a){var c=
f.byNode(a);c&&c.resize?b.push(c):!/script|link|style/i.test(a.nodeName)&&a.offsetHeight&&(k=!0)});this._singleChild=1==b.length&&!k?b[0]:null;g.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(a,f){this._resizeCalled=!0;this._scheduleLayout(a,f)},_scheduleLayout:function(a,f){this._isShown()?this._layout(a,f):(this._needLayout=!0,this._changeSize=a,this._resultSize=f)},_layout:function(a,f){delete this._needLayout;!this._wasShown&&!1!==this.open&&this._onShow();
a&&d.setMarginBox(this.domNode,a);var k=this.containerNode;if(k===this.domNode){var c=f||{};b.mixin(c,a||{});if(!("h"in c)||!("w"in c))c=b.mixin(d.getMarginBox(k),c);this._contentBox=l.marginBox2contentBox(k,c)}else this._contentBox=d.getContentBox(k);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var a=this._contentBox||d.getContentBox(this.containerNode);this._singleChild.resize({w:a.w,h:a.h})}else for(var a=this.getChildren(),
f,b=0;f=a[b++];)f.resize&&f.resize()},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var a=this.domNode,f=this.domNode.parentNode;return"none"!=a.style.display&&"hidden"!=a.style.visibility&&!g.contains(a,"dijitHidden")&&f&&f.style&&"none"!=f.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/Viewport":function(){define(["dojo/Evented",
"dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(h,e,g,d,c){var b=new h,a;g(function(){var f=c.getBox();b._rlh=e(window,"resize",function(){var a=c.getBox();f.h==a.h&&f.w==a.w||(f=a,b.emit("resize"))});if(8==d("ie")){var k=screen.deviceXDPI;setInterval(function(){screen.deviceXDPI!=k&&(k=screen.deviceXDPI,b.emit("resize"))},500)}d("ios")&&(e(document,"focusin",function(f){a=f.target}),e(document,"focusout",function(f){a=null}))});b.getEffectiveBox=function(f){f=c.getBox(f);var b=a&&
a.tagName&&a.tagName.toLowerCase();if(d("ios")&&a&&!a.readOnly&&("textarea"==b||"input"==b&&/^(color|email|number|password|search|tel|text|url)$/.test(a.type)))f.h*=0==orientation||180==orientation?0.66:0.4,b=a.getBoundingClientRect(),f.h=Math.max(f.h,b.top+b.height);return f};return b})},"dijit/layout/utils":function(){define(["dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(h,e,g,d,c){function b(a,b){var d=a.resize?a.resize(b):g.setMarginBox(a.domNode,
b);d?c.mixin(a,d):(c.mixin(a,g.getMarginBox(a.domNode)),c.mixin(a,b))}var a={marginBox2contentBox:function(a,b){var c=d.getComputedStyle(a),e=g.getMarginExtents(a,c),p=g.getPadBorderExtents(a,c);return{l:d.toPixelValue(a,c.paddingLeft),t:d.toPixelValue(a,c.paddingTop),w:b.w-(e.w+p.w),h:b.h-(e.h+p.h)}},layoutChildren:function(a,k,d,g,p){k=c.mixin({},k);e.add(a,"dijitLayoutContainer");d=h.filter(d,function(a){return"center"!=a.region&&"client"!=a.layoutAlign}).concat(h.filter(d,function(a){return"center"==
a.region||"client"==a.layoutAlign}));h.forEach(d,function(a){var f=a.domNode,c=a.region||a.layoutAlign;if(!c)throw Error("No region setting for "+a.id);var d=f.style;d.left=k.l+"px";d.top=k.t+"px";d.position="absolute";e.add(f,"dijitAlign"+(c.substring(0,1).toUpperCase()+c.substring(1)));f={};g&&g==a.id&&(f["top"==a.region||"bottom"==a.region?"h":"w"]=p);"leading"==c&&(c=a.isLeftToRight()?"left":"right");"trailing"==c&&(c=a.isLeftToRight()?"right":"left");"top"==c||"bottom"==c?(f.w=k.w,b(a,f),k.h-=
a.h,"top"==c?k.t+=a.h:d.top=k.t+k.h+"px"):"left"==c||"right"==c?(f.h=k.h,b(a,f),k.w-=a.w,"left"==c?k.l+=a.w:d.left=k.l+k.w+"px"):("client"==c||"center"==c)&&b(a,k)})}};c.setObject("dijit.layout.utils",a);return a})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),function(h,e,g,d,c,b,a){var f=0,k={_secureForInnerHtml:function(a){return a.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")},_emptyNode:b.empty,
_setNodeContent:function(a,f){b.empty(a);if(f)if("number"==typeof f&&(f=f.toString()),"string"==typeof f&&(f=b.toDom(f,a.ownerDocument)),!f.nodeType&&e.isArrayLike(f))for(var k=f.length,c=0;c<f.length;c=k==f.length?c+1:0)b.place(f[c],a,"last");else b.place(f,a,"last");return a},_ContentSetter:d("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:h._scopeName,startup:!0,constructor:function(a,b){e.mixin(this,a||{});b=this.node=c.byId(this.node||
b);this.id||(this.id=["Setter",b?b.id||b.tagName:"",f++].join("_"))},set:function(a,f){void 0!==a&&(this.content=a);f&&this._mixin(f);this.onBegin();this.setContent();var b=this.onEnd();return b&&b.then?b:this.node},setContent:function(){var a=this.node;if(!a)throw Error(this.declaredClass+": setContent given no node");try{a=k._setNodeContent(a,this.content)}catch(f){var b=this.onContentError(f);try{a.innerHTML=b}catch(c){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+
c.message,c)}}this.node=a},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(g.forEach(this.parseResults,function(a){a.destroy&&a.destroy()}),delete this.parseResults);b.empty(this.node)},onBegin:function(){var a=this.content;if(e.isString(a)&&(this.cleanContent&&(a=k._secureForInnerHtml(a)),this.extractContent)){var f=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);f&&(a=f[1])}this.empty();
this.content=a;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(a){return"Error occurred setting content: "+a},onExecError:function(a){return"Error occurred executing scripts: "+a},_mixin:function(a){var f={},b;for(b in a)b in f||(this[b]=a[b])},_parse:function(){var f=this.node;try{var b={};g.forEach(["dir","lang","textDir"],function(a){this[a]&&
(b[a]=this[a])},this);var k=this;this.parseDeferred=a.parse({rootNode:f,noStart:!this.startup,inherited:b,scope:this.parserScope}).then(function(a){return k.parseResults=a},function(a){k._onError("Content",a,"Error parsing in _ContentSetter#"+this.id)})}catch(c){this._onError("Content",c,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(a,f,b){a=this["on"+a+"Error"].call(this,f);b?console.error(b,f):a&&k._setNodeContent(this.node,a,!0)}}),set:function(a,f,b){void 0==f&&(console.warn("dojo.html.set: no cont argument provided, using empty string"),
f="");"number"==typeof f&&(f=f.toString());return b?(new k._ContentSetter(e.mixin(b,{content:f,node:a}))).set():k._setNodeContent(a,f,!0)}};e.setObject("dojo.html",k);return k})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s){function t(a){return eval("("+a+")")}function u(a){var f=a._nameCaseMap,
b=a.prototype;if(!f||f._extendCnt<w){var f=a._nameCaseMap={},k;for(k in b)"_"!==k.charAt(0)&&(f[k.toLowerCase()]=k);f._extendCnt=w}return f}function v(a,f){f||(f=h);var b=f._dojoParserCtorMap||(f._dojoParserCtorMap={}),k=a.join();if(!b[k]){for(var c=[],d=0,e=a.length;d<e;d++){var l=a[d];c[c.length]=b[l]=b[l]||g.getObject(l)||~l.indexOf("/")&&f(l)}d=c.shift();b[k]=c.length?d.createSubclass?d.createSubclass(c):d.extend.apply(d,c):d}return b[k]}new Date("X");var w=0;k.after(g,"extend",function(){w++},
!0);var x={_clearCache:function(){w++;_ctorMap={}},_functionFromScript:function(a,f){var b="",k="",c=a.getAttribute(f+"args")||a.getAttribute("args"),e=a.getAttribute("with"),c=(c||"").split(/\s*,\s*/);e&&e.length&&d.forEach(e.split(/\s*,\s*/),function(a){b+="with("+a+"){";k+="}"});return new Function(c,b+a.innerHTML+k)},instantiate:function(a,f,b){f=f||{};b=b||{};var k=(b.scope||e._scopeName)+"Type",c="data-"+(b.scope||e._scopeName)+"-",g=c+"type",l=c+"mixins",n=[];d.forEach(a,function(a){var b=
k in f?f[k]:a.getAttribute(g)||a.getAttribute(k);if(b){var c=a.getAttribute(l),b=c?[b].concat(c.split(/\s*,\s*/)):[b];n.push({node:a,types:b})}});return this._instantiate(n,f,b)},_instantiate:function(a,f,b,k){function c(a){!f._started&&!b.noStart&&d.forEach(a,function(a){"function"===typeof a.startup&&!a._started&&a.startup()});return a}a=d.map(a,function(a){var k=a.ctor||v(a.types,b.contextRequire);if(!k)throw Error("Unable to resolve constructor for: '"+a.types.join()+"'");return this.construct(k,
a.node,f,b,a.scripts,a.inherited)},this);return k?l(a).then(c):c(a)},construct:function(a,b,c,l,h,p){function s(a){T&&g.setObject(T,a);for(J=0;J<Y.length;J++)k[Y[J].advice||"after"](a,Y[J].method,g.hitch(a,Y[J].func),!0);for(J=0;J<$.length;J++)$[J].call(a);for(J=0;J<da.length;J++)a.watch(da[J].prop,da[J].func);for(J=0;J<ga.length;J++)r(a,ga[J].event,ga[J].func);return a}var v=a&&a.prototype;l=l||{};var w={};l.defaults&&g.mixin(w,l.defaults);p&&g.mixin(w,p);var x;m("dom-attributes-explicit")?x=b.attributes:
m("dom-attributes-specified-flag")?x=d.filter(b.attributes,function(a){return a.specified}):(p=(/^input$|^img$/i.test(b.nodeName)?b:b.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),x=d.map(p.split(/\s+/),function(a){var f=a.toLowerCase();return{name:a,value:"LI"==b.nodeName&&"value"==a||"enctype"==f?b.getAttribute(f):b.getAttributeNode(f).value}}));var L=l.scope||e._scopeName;p="data-"+L+"-";var N={};"dojo"!==L&&(N[p+"props"]=
"data-dojo-props",N[p+"type"]="data-dojo-type",N[p+"mixins"]="data-dojo-mixins",N[L+"type"]="dojotype",N[p+"id"]="data-dojo-id");for(var J=0,O,L=[],T,W;O=x[J++];){var S=O.name,R=S.toLowerCase();O=O.value;switch(N[R]||R){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":W=O;break;case "data-dojo-id":case "jsid":T=O;break;case "data-dojo-attach-point":case "dojoattachpoint":w.dojoAttachPoint=O;break;case "data-dojo-attach-event":case "dojoattachevent":w.dojoAttachEvent=
O;break;case "class":w["class"]=b.className;break;case "style":w.style=b.style&&b.style.cssText;break;default:if(S in v||(S=u(a)[R]||S),S in v)switch(typeof v[S]){case "string":w[S]=O;break;case "number":w[S]=O.length?Number(O):NaN;break;case "boolean":w[S]="false"!=O.toLowerCase();break;case "function":""===O||-1!=O.search(/[^\w\.]+/i)?w[S]=new Function(O):w[S]=g.getObject(O,!1)||new Function(O);L.push(S);break;default:R=v[S],w[S]=R&&"length"in R?O?O.split(/\s*,\s*/):[]:R instanceof Date?""==O?new Date(""):
"now"==O?new Date:n.fromISOString(O):R instanceof f?e.baseUrl+O:t(O)}else w[S]=O}}for(x=0;x<L.length;x++)N=L[x].toLowerCase(),b.removeAttribute(N),b[N]=null;if(W)try{W=t.call(l.propsThis,"{"+W+"}"),g.mixin(w,W)}catch(ea){throw Error(ea.toString()+" in data-dojo-props\x3d'"+W+"'");}g.mixin(w,c);h||(h=a&&(a._noScript||v._noScript)?[]:q("\x3e script[type^\x3d'dojo/']",b));var Y=[],$=[],da=[],ga=[];if(h)for(J=0;J<h.length;J++)N=h[J],b.removeChild(N),c=N.getAttribute(p+"event")||N.getAttribute("event"),
l=N.getAttribute(p+"prop"),W=N.getAttribute(p+"method"),L=N.getAttribute(p+"advice"),x=N.getAttribute("type"),N=this._functionFromScript(N,p),c?"dojo/connect"==x?Y.push({method:c,func:N}):"dojo/on"==x?ga.push({event:c,func:N}):w[c]=N:"dojo/aspect"==x?Y.push({method:W,advice:L,func:N}):"dojo/watch"==x?da.push({prop:l,func:N}):$.push(N);a=(h=a.markupFactory||v.markupFactory)?h(w,b,a):new a(w,b);return a.then?a.then(s):s(a)},scan:function(a,f){function b(a){if(!a.inherited){a.inherited={};var f=a.node,
k=b(a.parent),f={dir:f.getAttribute("dir")||k.dir,lang:f.getAttribute("lang")||k.lang,textDir:f.getAttribute(q)||k.textDir},c;for(c in f)f[c]&&(a.inherited[c]=f[c])}return a.inherited}var k=[],c=[],g={},l=(f.scope||e._scopeName)+"Type",n="data-"+(f.scope||e._scopeName)+"-",m=n+"type",q=n+"textdir",n=n+"mixins",r=a.firstChild,s=f.inherited;if(!s){var t=function(a,f){return a.getAttribute&&a.getAttribute(f)||a.parentNode&&t(a.parentNode,f)},s={dir:t(a,"dir"),lang:t(a,"lang"),textDir:t(a,q)},u;for(u in s)s[u]||
delete s[u]}for(var s={inherited:s},w,x;;)if(r)if(1!=r.nodeType)r=r.nextSibling;else if(w&&"script"==r.nodeName.toLowerCase())(S=r.getAttribute("type"))&&/^dojo\/\w/i.test(S)&&w.push(r),r=r.nextSibling;else if(x)r=r.nextSibling;else{var S=r.getAttribute(m)||r.getAttribute(l);u=r.firstChild;if(!S&&(!u||3==u.nodeType&&!u.nextSibling))r=r.nextSibling;else{x=null;if(S){var R=r.getAttribute(n);w=R?[S].concat(R.split(/\s*,\s*/)):[S];try{x=v(w,f.contextRequire)}catch(ea){}x||d.forEach(w,function(a){~a.indexOf("/")&&
!g[a]&&(g[a]=!0,c[c.length]=a)});R=x&&!x.prototype._noScript?[]:null;s={types:w,ctor:x,parent:s,node:r,scripts:R};s.inherited=b(s);k.push(s)}else s={node:r,scripts:w,parent:s};w=R;x=r.stopParser||x&&x.prototype.stopParser&&!f.template;r=u}}else{if(!s||!s.node)break;r=s.node.nextSibling;x=!1;s=s.parent;w=s.scripts}var Y=new p;c.length?(f.contextRequire||h)(c,function(){Y.resolve(d.filter(k,function(a){if(!a.ctor)try{a.ctor=v(a.types,f.contextRequire)}catch(b){}for(var k=a.parent;k&&!k.types;)k=k.parent;
var c=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(c&&c.stopParser&&!f.template);a.instantiate=!k||k.instantiate&&k.instantiateChildren;return a.instantiate}))}):Y.resolve(k);return Y.promise},_require:function(a,f){var b=t("{"+a.innerHTML+"}"),k=[],c=[],d=new p,e=f&&f.contextRequire||h,l;for(l in b)k.push(l),c.push(b[l]);e(c,function(){for(var a=0;a<k.length;a++)g.setObject(k[a],arguments[a]);d.resolve(arguments)});return d.promise},_scanAmd:function(a,f){var b=new p,k=b.promise;b.resolve(!0);
var c=this;q("script[type\x3d'dojo/require']",a).forEach(function(a){k=k.then(function(){return c._require(a,f)});a.parentNode.removeChild(a)});return k},parse:function(f,k){f&&("string"!=typeof f&&!("nodeType"in f))&&(k=f,f=k.rootNode);var c=f?b.byId(f):a.body();k=k||{};var d=k.template?{template:!0}:{},e=[],l=this,n=this._scanAmd(c,k).then(function(){return l.scan(c,k)}).then(function(a){return l._instantiate(a,d,k,!0)}).then(function(a){return e=e.concat(a)}).otherwise(function(a){console.error("dojo/parser::parse() error",
a);throw a;});g.mixin(e,n);return e}};e.parser=x;c.parseOnLoad&&s(100,x,"parse");return x})},"dojo/_base/url":function(){define(["./kernel"],function(h){var e=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,g=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,d=function(){for(var c=arguments,b=[c[0]],a=1;a<c.length;a++)if(c[a]){var f=new d(c[a]+""),b=new d(b[0]+"");if(""==f.path&&!f.scheme&&!f.authority&&!f.query)null!=f.fragment&&(b.fragment=f.fragment),f=b;else if(!f.scheme&&
(f.scheme=b.scheme,!f.authority&&(f.authority=b.authority,"/"!=f.path.charAt(0)))){for(var b=(b.path.substring(0,b.path.lastIndexOf("/")+1)+f.path).split("/"),k=0;k<b.length;k++)"."==b[k]?k==b.length-1?b[k]="":(b.splice(k,1),k--):0<k&&(!(1==k&&""==b[0])&&".."==b[k]&&".."!=b[k-1])&&(k==b.length-1?(b.splice(k,1),b[k-1]=""):(b.splice(k-1,2),k-=2));f.path=b.join("/")}b=[];f.scheme&&b.push(f.scheme,":");f.authority&&b.push("//",f.authority);b.push(f.path);f.query&&b.push("?",f.query);f.fragment&&b.push("#",
f.fragment)}this.uri=b.join("");c=this.uri.match(e);this.scheme=c[2]||(c[1]?"":null);this.authority=c[4]||(c[3]?"":null);this.path=c[5];this.query=c[7]||(c[6]?"":null);this.fragment=c[9]||(c[8]?"":null);null!=this.authority&&(c=this.authority.match(g),this.user=c[3]||null,this.password=c[4]||null,this.host=c[6]||c[7],this.port=c[9]||null)};d.prototype.toString=function(){return this.uri};return h._Url=d})},"dojo/promise/all":function(){define(["../_base/array","../Deferred","../when"],function(h,
e,g){var d=h.some;return function(c){var b,a;c instanceof Array?a=c:c&&"object"===typeof c&&(b=c);var f,k=[];if(b){a=[];for(var l in b)Object.hasOwnProperty.call(b,l)&&(k.push(l),a.push(b[l]));f={}}else a&&(f=[]);if(!a||!a.length)return(new e).resolve(f);var n=new e;n.promise.always(function(){f=k=null});var h=a.length;d(a,function(a,c){b||k.push(c);g(a,function(a){n.isFulfilled()||(f[k[c]]=a,0===--h&&n.resolve(f))},n.reject);return n.isFulfilled()});return n.promise}})},"dojo/date/stamp":function(){define(["../_base/lang",
"../_base/array"],function(h,e){var g={};h.setObject("dojo.date.stamp",g);g.fromISOString=function(d,c){g._isoRegExp||(g._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var b=g._isoRegExp.exec(d),a=null;if(b){b.shift();b[1]&&b[1]--;b[6]&&(b[6]*=1E3);c&&(c=new Date(c),e.forEach(e.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),function(a){return c["get"+a]()}),function(a,f){b[f]=b[f]||a}));a=new Date(b[0]||
1970,b[1]||0,b[2]||1,b[3]||0,b[4]||0,b[5]||0,b[6]||0);100>b[0]&&a.setFullYear(b[0]||1970);var f=0,k=b[7]&&b[7].charAt(0);"Z"!=k&&(f=60*(b[8]||0)+(Number(b[9])||0),"-"!=k&&(f*=-1));k&&(f-=a.getTimezoneOffset());f&&a.setTime(a.getTime()+6E4*f)}return a};g.toISOString=function(d,c){var b=function(a){return 10>a?"0"+a:a};c=c||{};var a=[],f=c.zulu?"getUTC":"get",k="";"time"!=c.selector&&(k=d[f+"FullYear"](),k=["0000".substr((k+"").length)+k,b(d[f+"Month"]()+1),b(d[f+"Date"]())].join("-"));a.push(k);if("date"!=
c.selector){k=[b(d[f+"Hours"]()),b(d[f+"Minutes"]()),b(d[f+"Seconds"]())].join(":");f=d[f+"Milliseconds"]();c.milliseconds&&(k+="."+(100>f?"0":"")+b(f));if(c.zulu)k+="Z";else if("time"!=c.selector)var f=d.getTimezoneOffset(),e=Math.abs(f),k=k+((0<f?"-":"+")+b(Math.floor(e/60))+":"+b(e%60));a.push(k)}return a.join("T")};return g})},"dijit/layout/_LayoutWidget":function(){define("dojo/_base/lang ../_Widget ../_Container ../_Contained ../Viewport dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style".split(" "),
function(h,e,g,d,c,b,a,f,k){return b("dijit.layout._LayoutWidget",[e,g,d],{baseClass:"dijitLayoutContainer",isLayoutContainer:!0,_setTitleAttr:null,buildRendering:function(){this.inherited(arguments);a.add(this.domNode,"dijitContainer")},startup:function(){if(!this._started){this.inherited(arguments);var a=this.getParent&&this.getParent();if(!a||!a.isLayoutContainer)this.resize(),this.own(c.on("resize",h.hitch(this,"resize")))}},resize:function(a,b){var c=this.domNode;a&&f.setMarginBox(c,a);var d=
b||{};h.mixin(d,a||{});if(!("h"in d)||!("w"in d))d=h.mixin(f.getMarginBox(c),d);var e=k.getComputedStyle(c),g=f.getMarginExtents(c,e),s=f.getBorderExtents(c,e),d=this._borderBox={w:d.w-(g.w+s.w),h:d.h-(g.h+s.h)},g=f.getPadExtents(c,e);this._contentBox={l:k.toPixelValue(c,e.paddingLeft),t:k.toPixelValue(c,e.paddingTop),w:d.w-g.w,h:d.h-g.h};this.layout()},layout:function(){},_setupChild:function(f){a.add(f.domNode,this.baseClass+"-child "+(f.baseClass?this.baseClass+"-"+f.baseClass:""))},addChild:function(a,
f){this.inherited(arguments);this._started&&this._setupChild(a)},removeChild:function(f){a.remove(f.domNode,this.baseClass+"-child"+(f.baseClass?" "+this.baseClass+"-"+f.baseClass:""));this.inherited(arguments)}})})},"dijit/_Contained":function(){define(["dojo/_base/declare","./registry"],function(h,e){return h("dijit._Contained",null,{_getSibling:function(e){var d=this.getParent();return d&&d._getSiblingOfChild&&d._getSiblingOfChild(this,"previous"==e?-1:1)||null},getPreviousSibling:function(){return this._getSibling("previous")},
getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var e=this.getParent();return!e||!e.getIndexOfChild?-1:e.getIndexOfChild(this)}})})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),function(h,e,g,d,c,b,a,f){var k=e("dijit._TemplatedMixin",f,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(f){var b=
this.declaredClass,k=this;return a.substitute(f,this,function(a,f){"!"==f.charAt(0)&&(a=d.getObject(f.substr(1),!1,k));if("undefined"==typeof a)throw Error(b+" template:"+f);return null==a?"":"!"==f.charAt(0)?a:this._escapeValue(""+a)},this)},_escapeValue:function(a){return a.replace(/["'<>&]/g,function(a){return{"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[a]})},buildRendering:function(){if(!this._rendered){this.templateString||(this.templateString=h(this.templatePath,
{sanitize:!0}));var a=k.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),f;if(d.isString(a)){if(f=g.toDom(this._stringRepl(a),this.ownerDocument),1!=f.nodeType)throw Error("Invalid template: "+a);}else f=a.cloneNode(!0);this.domNode=f}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);this._rendered=!0},_fillContent:function(a){var f=this.containerNode;if(a&&f)for(;a.hasChildNodes();)f.appendChild(a.firstChild)}});k._templateCache={};k.getCachedTemplate=
function(f,b,c){var d=k._templateCache,e=f,h=d[e];if(h){try{if(!h.ownerDocument||h.ownerDocument==(c||document))return h}catch(s){}g.destroy(h)}f=a.trim(f);if(b||f.match(/\$\{([^\}]+)\}/g))return d[e]=f;b=g.toDom(f,c);if(1!=b.nodeType)throw Error("Invalid template: "+f);return d[e]=b};b("ie")&&c(window,"unload",function(){var a=k._templateCache,f;for(f in a){var b=a[f];"object"==typeof b&&g.destroy(b);delete a[f]}});return k})},"dojo/cache":function(){define(["./_base/kernel","./text"],function(h){return h.cache})},
"dojo/text":function(){define(["./_base/kernel","require","./has","./request"],function(h,e,g,d){var c;c=function(a,f,b){d(a,{sync:!!f,headers:{"X-Requested-With":null}}).then(b)};var b={},a=function(a){if(a){a=a.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var f=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);f&&(a=f[1])}else a="";return a},f={},k={};h.cache=function(f,k,d){var g;"string"==typeof f?/\//.test(f)?(g=f,d=k):g=e.toUrl(f.replace(/\./g,"/")+(k?"/"+k:"")):(g=f+
"",d=k);f=void 0!=d&&"string"!=typeof d?d.value:d;d=d&&d.sanitize;if("string"==typeof f)return b[g]=f,d?a(f):f;if(null===f)return delete b[g],null;g in b||c(g,!0,function(a){b[g]=a});return d?a(b[g]):b[g]};return{dynamic:!0,normalize:function(a,f){var b=a.split("!"),k=b[0];return(/^\./.test(k)?f(k):k)+(b[1]?"!"+b[1]:"")},load:function(d,e,g){d=d.split("!");var m=1<d.length,h=d[0],r=e.toUrl(d[0]);d="url:"+r;var s=f,t=function(f){g(m?a(f):f)};h in b?s=b[h]:e.cache&&d in e.cache?s=e.cache[d]:r in b&&
(s=b[r]);if(s===f)if(k[r])k[r].push(t);else{var u=k[r]=[t];c(r,!e.async,function(a){b[h]=b[r]=a;for(var f=0;f<u.length;)u[f++](a);delete k[r]})}else t(s)}}})},"dojo/request":function(){define(["./request/default!"],function(h){return h})},"dojo/request/default":function(){define(["exports","require","../has"],function(h,e,g){var d=g("config-requestProvider");d||(d="./xhr");h.getPlatformDefaultId=function(){return"./xhr"};h.load=function(c,b,a,f){e(["platform"==c?"./xhr":d],function(f){a(f)})}})},
"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),function(h,e,g,d,c,b,a,f,k){var l=c.delegate(f,{mouseenter:b.enter,mouseleave:b.leave,keypress:g._keypress}),n;g=d("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);this._beforeFillContent()},
_beforeFillContent:function(){},_attachTemplateNodes:function(a){for(var f=a;;)if(1==f.nodeType&&(this._processTemplateNode(f,function(a,f){return a.getAttribute(f)},this._attach)||this.searchContainerNode)&&f.firstChild)f=f.firstChild;else{if(f==a)break;for(;!f.nextSibling;)if(f=f.parentNode,f==a)return;f=f.nextSibling}},_processTemplateNode:function(a,f,b){var k=!0,d=this.attachScope||this,e=f(a,"dojoAttachPoint")||f(a,"data-dojo-attach-point");if(e)for(var g=e.split(/\s*,\s*/);e=g.shift();)c.isArray(d[e])?
d[e].push(a):d[e]=a,k="containerNode"!=e,this._attachPoints.push(e);if(f=f(a,"dojoAttachEvent")||f(a,"data-dojo-attach-event")){e=f.split(/\s*,\s*/);for(g=c.trim;f=e.shift();)if(f){var l=null;-1!=f.indexOf(":")?(l=f.split(":"),f=g(l[0]),l=g(l[1])):f=g(f);l||(l=f);this._attachEvents.push(b(a,f,c.hitch(d,l)))}}return k},_attach:function(f,b,k){b=b.replace(/^on/,"").toLowerCase();b="dijitclick"==b?n||(n=h("./a11yclick")):l[b]||b;return a(f,b,k)},_detachTemplateNodes:function(){var a=this.attachScope||
this;e.forEach(this._attachPoints,function(f){delete a[f]});this._attachPoints=[];e.forEach(this._attachEvents,function(a){a.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();this.inherited(arguments)}});c.extend(k,{dojoAttachEvent:"",dojoAttachPoint:""});return g})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(h,e,g,d,c){return g("dijit._WidgetsInTemplateMixin",
null,{_earlyTemplatedStartup:!1,contextRequire:null,_beforeFillContent:function(){if(/dojoType|data-dojo-type/i.test(this.domNode.innerHTML)){var b=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);c.parse(b,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(d.hitch(this,function(a){this._startupWidgets=a;for(var f=0;f<a.length;f++)this._processTemplateNode(a[f],
function(a,f){return a[f]},function(a,f,b){return f in a?a.connect(a,f,b):a.on(f,b,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");}},_processTemplateNode:function(b,a,f){return a(b,"dojoType")||a(b,"data-dojo-type")?
!0:this.inherited(arguments)},startup:function(){h.forEach(this._startupWidgets,function(b){b&&(!b._started&&b.startup)&&b.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"MW/rtc/keyBindingUtils":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/sniff","mw-event-utils/platformize"],function(h,e,g,d,c){return{addLabelsForActionService:function(b){this._actionService=b;this._connections=[];this._connections.push(g.after(this._actionService,"addAction",
e.hitch(this,"_addLabelToAction"),!0));this._connections.push(g.after(this._actionService,"destroy",e.hitch(this,"_dispose")));this._actionService.getAllActions().forEach(this._addLabelToAction,this)},_addLabelToAction:function(b){var a=this._createLabel(b);a&&this._actionService.updateAction(b.id,{shortcut:a})},_createLabel:function(b){var a=null,f=!1;if(d("mac")){var k=b.platformShortcut;b=b.platformKey;k&&k.mac?a=k.mac:b&&b.mac&&(a=b.mac,f=!0)}else b.key&&(a=b.key);return this._changeToRequiredCase(a,
f)},_changeToRequiredCase:function(b,a){return b?c.getPlatformSpecificString(b,{dontConvertCtrlToCmd:a}):null},_dispose:function(){this._connections.forEach(function(b){b.remove()})}}})},"mw-event-utils/platformize":function(){define(["dojo/sniff"],function(h){var e=[{regExp:/ctrl|cntrl|control/gi,macString:"\u2303",otherPlatformsString:"Ctrl"},{regExp:/meta/gi,macString:"\u2318",otherPlatformsString:"Ctrl"},{regExp:/shift/gi,macString:"\u21e7",otherPlatformsString:"Shift"},{regExp:/alt/gi,macString:"\u2325",
otherPlatformsString:"Alt"},{regExp:/enter/gi,macString:"\u23ce",otherPlatformsString:"Enter"},{regExp:/delete/gi,macString:"\u2326",otherPlatformsString:"Delete"},{regExp:/del/gi,macString:"\u2326",otherPlatformsString:"Del"},{regExp:/Spacebar/gi,macString:"\u2423",otherPlatformsString:"Spacebar"},{regExp:/space/gi,macString:"\u2423",otherPlatformsString:"Space"},{regExp:/up/gi,macString:"\u2191",otherPlatformsString:"Up"},{regExp:/down/gi,macString:"\u2193",otherPlatformsString:"Down"},{regExp:/left/gi,
macString:"\u2190",otherPlatformsString:"Left"},{regExp:/right/gi,macString:"\u2192",otherPlatformsString:"Right"}];return{getPlatformSpecificString:function(g,d){d=d||{};g=g.replace(/ /g,"");g=g.replace(/_/g,"+");g=g.toUpperCase();e.forEach(function(c){var b;h("mac")?(b=c.macString,!d.dontConvertCtrlToCmd&&"\u2303"===b&&(b="\u2318")):b=c.otherPlatformsString;g=g.replace(c.regExp,b)});return g=h("mac")?g.replace(/\+(?!$)/g,""):g}}})},"MW/rtc/HasExtensions":function(){define(["dojo/has"],function(h){h.add("windows",
function(){return 0<=window.navigator.userAgent.toLowerCase().indexOf("windows")});h.add("matlab",function(){return 0<=window.navigator.userAgent.toLowerCase().indexOf("matlab")})})},"MW/rtc/core/PluginResolver":function(){define("dojo/_base/declare mw-utils/Utils mw-log/Log MW/rtc/core/_dependencyinjector/CachedDependencyInjector MW/rtc/core/_dependencyinjector/LayerableDependencyInjector MW/rtc/core/_dependencyinjector/RegistryBasedDependencyInjector MW/rtc/core/_dependencyinjector/SubsystemDependencyError MW/rtc/core/provider/SubsystemPluginsProviderFactory MW/rtc/core/provider/SubsystemPluginsProviderUtilities".split(" "),
function(h,e,g,d,c,b,a,f,k){return h(null,{_DEFAULT_SUBSYSTEM_ID:"rtc.code.container",constructor:function(a,f,k,c,d){this._subsystemToRequiredPluginIds=this._pluginsBySubsystems=null;this._getOrganizedSubsystemToPlugin(f,k,a);this._resolveSubsystemsWithoutProviders(a);f=this._createBaseInjector(c,d);this._injector=new b({baseInjector:f,registry:a});this._cachedInjector=f},getDependency:function(f){try{return this._injector.getDependency(f)}catch(b){if(!(b instanceof a))throw b;try{var k=b.getSubsystemId();
this._doLateSubsystemLoad(k);this._constructSubsystem(k);return this.getDependency(f)}catch(c){if(!(c instanceof a))throw c;f="RTC PluginResolver: Unable to getDependency for "+f+" because it has a dependency on subsystem "+b.getSubsystemId()+", which is not loaded. Attempting to load that subsystem now failed";c.getSubsystemId()!==b.getSubsystemId()&&(f+="when reaching other subsystem "+c.getSubsystemId()+" which is also not yet loaded");throw Error(f+". It is suggested that you check your RTC enabled feature list.");
}}},resolve:function(){this._createFeaturesUsingInjector()},destroy:function(){this._injector.destroy()},_createPluginsFromSubSystem:function(a){return e.unique(a).map(function(a){return this._injector.getDependency(a)},this).filter(function(a){return!!a})},_resolveSubsystemsWithoutProviders:function(a){var b=this._getSubsystems(a),k=this._getDependencyToProviderPath(a);b.forEach(function(b){k[b]||a.push({id:b,providerClass:f.make(b)})},this)},_createFeaturesUsingInjector:function(){var f=Object.keys(this._pluginsBySubsystems),
b,k=0,c=function(){k++;if(!(k<b.length)){var a="RTC PluginResolver: Failed to construct subsystems after a large number of attempts. Most likely, there is a circular dependency among the following subsystems: "+b.toString()+".";-1<b.indexOf(this._DEFAULT_SUBSYSTEM_ID)&&(a+=" (Note that the subsystem "+this._DEFAULT_SUBSYSTEM_ID+" is the default subsystem, which contains all plugins that are not assigned to another subsystem.)");throw Error(a);}}.bind(this);for(b=f.slice();0<b.length;){var d=b.shift();
try{this._constructSubsystem(d),k=0}catch(e){if(!(e instanceof a))throw e;b.push(d);d=e.getSubsystemId();0>f.indexOf(d)?(this._doLateSubsystemLoad(d),b.unshift(d),k=0):c()}}},_constructSubsystem:function(a){var f=this._createPluginsFromSubSystem(this._pluginsBySubsystems[a]),b=k.getMembersId(a);this._injector.injectDependency(b,f);this._injector.getDependency(a)},_doLateSubsystemLoad:function(a){this._pluginsBySubsystems[a]=this._subsystemToRequiredPluginIds[a]||[]},_getOrganizedSubsystemToPlugin:function(a,
f,b){a=this._removeDisabledElementsFromEnabledPlugins(a,f);var k={},c={},d={};b.forEach(function(a){var f=a.subsystem||this._DEFAULT_SUBSYSTEM_ID,b=a.id;c[b]=f;a.requiredForSubsystem&&(d[f]||(d[f]=[]),d[f].push(b));if(a=a.family)k[a]||(k[a]=[]),k[a].push(b)},this);var e=[];a.forEach(function(a){k[a]?e=e.concat(k[a]):e.push(a)});var e=this._removeDisabledElementsFromEnabledPlugins(e,f),h={};e.forEach(function(a){var f=c[a]||this._DEFAULT_SUBSYSTEM_ID;g.assert(f,'RTC PluginResolver: Invalid registry or feature configuration. After preprocessing, "'+
a+'" was found registered (implicitly or explicitly) under a falsy subsystem ID.');h[f]||(h[f]=[]);h[f].push(a)},this);Object.keys(h).forEach(function(a){var f=d[a];f&&(h[a]=h[a].concat(f))});this._pluginsBySubsystems=h;this._subsystemToRequiredPluginIds=d},_removeDisabledElementsFromEnabledPlugins:function(a,f){return a.filter(function(a){return 0>f.indexOf(a)})},_getDependencyToProviderPath:function(a){var f={};a.forEach(function(a){f[a.id]||(f[a.id]=[]);f[a.id].push(a.path)});return f},_getSubsystems:function(a){var f=
[];a.forEach(function(a){a.subsystem&&0>f.indexOf(a.subsystem)&&f.push(a.subsystem)});return f},_createBaseInjector:function(a,f){var b=new d,k;for(k in a)a.hasOwnProperty(k)&&b.injectDependency(k,a[k]);var e=new c;Object.keys(f).forEach(function(a){e.injectDependency(a,f[a])});e.addInjector(b);return e}})})},"mw-utils/Utils":function(){define(["dojo/_base/lang","dojo/_base/window","mw-utils/deprecation"],function(h,e,g){return{generateUuid:function(){return"xxxxxxxx".replace(/[xy]/g,function(d){var c=
16*Math.random()|0;return("x"===d?c:c&3|8).toString(16)}).toUpperCase()},isImageData:function(d){return!!d&&(e.global.ImageData&&d instanceof e.global.ImageData||d.hasOwnProperty("width")&&d.hasOwnProperty("height")&&d.hasOwnProperty("data"))},isArray:function(d){g.deprecated({deprecated:{module:"MW/utils/Utils",method:"isArray"},geckNumber:1444368});return Array.isArray(d)},getArrayLength:function(d){var c=0;if(!h.isArray(d))return!1;d.forEach(function(b){b&&(c+=1)});return c},isWhitespace:function(d){return/^\s+$/.test(d)},
removeSurroundingNewLines:function(d){for(;"\n"===d.charAt(0);)d=d.substring(1);for(;"\n"===d.charAt(d.length-1);)d=d.substring(0,d.length-1);return d},getFirstUniqueElement:function(d,c){var b=null;c.some(function(a){if(-1===d.indexOf(a))return b=a,!0});return b},unionOfWordSets:function(d,c,b){d=this._stringToArray(d);c=this._stringToArray(c);d=this.unionOfArrays(d,c);return b?d.join(" "):d},intersectionOfWordSets:function(d,c,b){d=this._stringToArray(d);c=this._stringToArray(c);d=this.intersectionOfArrays(d,
c);return b?d.join(" "):d},differenceOfWordSets:function(d,c,b){d=this._stringToArray(d);c=this._stringToArray(c);d=this.unique(this.differenceOfArrays(d,c));return b?d.join(" "):d},unionOfArrays:function(d,c){return this.unique(d.concat(c))},intersectionOfArrays:function(d,c){return this.nonunique(d.concat(c))},differenceOfArrays:function(d,c){if(void 0===window.Map)return this._legacyDifferenceOfArrays(d,c);var b,a,f,k=new Map,e=[];for(f=0;f<c.length;f++)k.set(c[f],null);for(f=0;f<d.length;f++)a=
d[f],(b=k.has(a))||e.push(a);return e},_legacyDifferenceOfArrays:function(d,c){return this.unique(d.filter(function(b){return-1===c.indexOf(b)}))},unique:function(d){return d.filter(function(c,b){return d.indexOf(c)===b})},nonunique:function(d){return this.unique(d.filter(function(c,b){return d.indexOf(c)!==b}))},arrayEquals:function(d,c,b){if(d===c)return!0;if(d.length!==c.length)return!1;b||(b=function(a,f){return a===f});for(var a=0,f=d.length;a<f;a++)if(!b(d[a],c[a]))return!1;return!0},removeEmptyElements:function(d){return d.filter(function(c){return!(""===
c||null===c||void 0===c)})},_stringToArray:function(d){return!this._isString(d)?d:this.removeEmptyElements(d.split(" "))},_isString:function(d){return"string"===typeof d||d instanceof String}}})},"mw-utils/deprecation":function(){var h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};define(["dojo/_base/config","mw-log/Log"],function(e,g){var d=
{deprecated:function(c){var b,a;if((e.isDebug||window.showDeprecationsAsErrors)&&this._isConfigValid(c))a=window.showDeprecationsAsErrors||c.deprecationLevel===this.ERROR?this.ERROR:this.WARN,b="DEPRECATED: ",c.deprecated&&(b+=c.deprecated.module,c.deprecated.method&&(b+="."+c.deprecated.method+"()"),b+="."),c.replacement&&(b+=" Use "+c.replacement.module,c.replacement.method&&(b+="."+c.replacement.method+"()"),b+=" instead."),c.removalVersion&&(b+=" Will be removed in version: "+c.removalVersion+
"."),c.geckNumber&&(b+=" Please use g"+c.geckNumber+" to track latest information regarding this deprecation"),c.additionalInformation&&(b+=" "+c.additionalInformation),g[a](b)},_isConfigValid:function(c){var b=!!c.deprecated&&"object"===h(c.deprecated)&&c.deprecated.hasOwnProperty("module");c.replacement&&(b=b&&"object"===h(c.replacement)&&c.replacement.hasOwnProperty("module"));c.geckNumber&&(b=b&&"number"===typeof c.geckNumber);b||g.error("Supplied deprecationConfig properties are not valid. Please refer to http://inside.mathworks.com/wiki/Web_Widgets_Deprecation_API for right API");
return b}};Object.defineProperties(d,{WARN:{value:"warn",enumerable:!0},ERROR:{value:"error",enumerable:!0}});return d})},"MW/rtc/core/_dependencyinjector/CachedDependencyInjector":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/_dependencyinjector/DependencyInjector"],function(h,e,g){return h(g,{constructor:function(){this._dependencyCache={}},injectDependency:function(d,c){this._dependencyCache[d]=c},getDependency:function(d){return this._dependencyCache[d]},destroy:function(){this._dependencyCache=
{}}})})},"MW/rtc/core/_dependencyinjector/DependencyInjector":function(){define(["dojo/_base/declare"],function(h){return h(null,{getDependency:function(e){throw Error("Unimplemented API: MW.rtc.core._dependencyinjector.DependencyInjector.getDependency");}})})},"MW/rtc/core/_dependencyinjector/LayerableDependencyInjector":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/_dependencyinjector/CachedDependencyInjector","MW/rtc/core/_dependencyinjector/DependencyInjector"],function(h,
e,g,d){return h(d,{constructor:function(c){this._passThroughInjectors=[];c&&this.addInjector(c);this._cachedDependancies=new g;this._passThroughInjectors.push(this._cachedDependancies)},addInjector:function(c){this._verifyInstanceOfInjector(c);this._passThroughInjectors.push(c)},injectDependency:function(c,b){this._cachedDependancies.injectDependency(c,b)},_verifyInstanceOfInjector:function(c){if(!c instanceof d)throw Error("Attempted to add a DependencyInjector that is not an instance of MW.rtc.core/_dependencyinjector.DependencyInjector");
},getDependency:function(c){return this._getCachedDependency(c)},_getCachedDependency:function(c){var b;this._passThroughInjectors.forEach(function(a){!b&&a.getDependency(c)&&(b=a.getDependency(c))});return b},destroy:function(){this._cachedDependancies.destroy();this._cachedDependancies=null;this._passThroughInjectors=[]}})})},"MW/rtc/core/_dependencyinjector/RegistryBasedDependencyInjector":function(){define("dojo/_base/declare dojo/_base/lang mw-log/Log MW/rtc/core/_dependencyinjector/CachedDependencyInjector MW/rtc/core/_dependencyinjector/DependencyInjector MW/rtc/core/_dependencyinjector/utilities/DependencyInjectionUtilities MW/rtc/core/provider/PluginProvider MW/rtc/core/provider/SubsystemPluginsProviderUtilities MW/rtc/core/registry/PluginRegistry ./SubsystemDependencyError".split(" "),
function(h,e,g,d,c,b,a,f,k,l){return h(c,{constructor:function(a){a=a||{};var f=a.baseInjector;this._registry=this._formatRegistry(a.registry||k.plugins);this._cachedInjector=f||new d;this._constructedPlugins=[]},injectDependency:function(a,f){this._cachedInjector.injectDependency(a,f)},getDependency:function(k){var c=this._cachedInjector.getDependency(k);if(!c&&f.isAMembersId(k))throw new l(f.getSubsystemId(k));if(c&&!(c instanceof a))return c;if(c||this._registry[k])try{var d=c||this._getFirstApplicable(this._constructMatchingProviders(k));
if(d){g.assert(d instanceof a,"Injected Dependency should be an instanceof PluginProvider");var e=b.getInstanceDependencies(d),h;h=0===e.length?this._constructPluginGivenNoArguments(d):b.constructPlugin(d,this._buildArgumentListGivenKeys(e));if(!h)throw Error("RTC RegistryBasedDependencyInjector: The provider of "+k+" returned a falsy value from createInstance. This is no longer allowed.");this._constructedPlugins.unshift({provider:d,plugin:h});this._cachedInjector.injectDependency(k,h);return h}}catch(s){if(s instanceof
l)throw s;k="Tried to construct registry based plugin in MW/rtc/core/_dependencyinjector/RegistryBasedDependencyInjector: "+k+" but failed with the following exception: "+s;g.assert(!1,k);g.assert(!1,s);throw Error(k);}},destroy:function(){this._constructedPlugins.forEach(function(a){a.provider.destroyInstance(a.plugin)});this._constructedPlugins=[];this._registry={};this._cachedInjector.destroy()},_formatRegistry:function(a){var f={};a.forEach(function(a){f[a.id]||(f[a.id]=[]);f[a.id].push(a.path||
a.providerClass)});return f},_isProviderApplicable:function(a){var f=!1,k=b.getIsApplicableDependencies(a),k=this._buildArgumentListGivenKeys(k);b.isPluginApplicable(a,k)&&(f=!0);return f},_buildArgumentListGivenKeys:function(a){var f=[];a.forEach(function(a){f.push(this.getDependency(a))},this);return f},_constructPluginGivenNoArguments:function(a){return b.constructPlugin(a,[])},_constructMatchingProviders:function(a){var f=[];this._registry[a].forEach(function(a){f.push(b.constructProvider(a))});
f.sort(function(a,f){return f.priority()-a.priority()});return f},_getFirstApplicable:function(a){for(var f=0;f<a.length;f++){var b=a[f];if(this._isProviderApplicable(b))return b}}})})},"MW/rtc/core/_dependencyinjector/utilities/DependencyInjectionUtilities":function(){define(["mw-log/Log","MW/rtc/core/provider/PluginProvider"],function(h,e){return{getInstanceDependencies:function(e){return this._getDependenciesGivenMethodName(e,"createInstance")},_getDependenciesGivenMethodName:function(g,d){h.assert(g instanceof
e,"Not a ProviderInterface.");var c=g.requires();return(c=c&&c[d])?c:[]},getIsApplicableDependencies:function(e){return this._getDependenciesGivenMethodName(e,"isApplicable")},_constructObjectFromAbsolutePath:function(e){return new (require([e],function(d){return new d})(e))},constructProvider:function(g){g=g instanceof e?g:this._constructObjectFromAbsolutePath(g);h.assert(g instanceof e,"Not a ProviderInterface.");return g},isPluginApplicable:function(g,d){h.assert(g instanceof e,"Not a ProviderInterface.");
return g.isApplicable.apply(g,d)},constructPlugin:function(g,d){h.assert(g instanceof e,"Not a ProviderInterface.");return g.createInstance.apply(g,d)}}})},"MW/rtc/core/provider/PluginProvider":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,e){return h(null,{isApplicable:function(){return!0},requires:function(){},createInstance:function(){throw Error("Unimplemented API: createInstance");},destroyInstance:function(g){g&&(g.isInstanceOf&&g.isInstanceOf(e))&&g.destroy()},
priority:function(){return 1}})})},"MW/rtc/abstract/AbstractPlugin":function(){define(["dojo/_base/declare","dijit/Destroyable"],function(h,e){return h(e,{})})},"MW/rtc/core/provider/SubsystemPluginsProviderUtilities":function(){define([],function(){return{_MEMBERS_ID_PREFIX:"_subsystem_members",isAMembersId:function(h){return h.substring(0,this._MEMBERS_ID_PREFIX.length)===this._MEMBERS_ID_PREFIX},getMembersId:function(h){return this._MEMBERS_ID_PREFIX+h},getSubsystemId:function(h){return h.substring(this._MEMBERS_ID_PREFIX.length)}}})},
"MW/rtc/core/registry/PluginRegistry":function(){define("MW/rtc/clipboardservice/ClipboardProvider MW/rtc/cursor/CursorActionsProvider MW/rtc/cursor/CursorNavigatorProvider MW/rtc/cursor/CursorProvider MW/rtc/cursor/CursorViewProvider MW/rtc/cursor/CursorControllerProvider MW/rtc/datamodel/DefaultBackingStoreProvider MW/rtc/execution/BreakpointlessEvalServiceProvider MW/rtc/execution/ExecutionServiceProvider MW/rtc/model/DocumentActionsProvider MW/rtc/model/DocumentProvider MW/rtc/model/InternalDocumentProvider MW/rtc/nodes/contentconverter/ContentConverterPluginProvider MW/rtc/nodes/contentconverter/inner/LineNodeContentConverterProvider MW/rtc/nodes/contentconverter/inner/RootNodeContentConverterProvider MW/rtc/nodes/contentconverter/leaf/PlainTextNodeContentConverterProvider MW/rtc/nodes/nodeconversionrules/InnerNodeConversionRulesProvider MW/rtc/nodes/nodeconversionrules/NodeConversionRulesProvider MW/rtc/events/KeyHandlerProvider MW/rtc/hyperlinkservice/HyperlinkServiceProvider MW/rtc/plugins/internalhyperlinkservice/InternalHyperlinkServiceProvider MW/rtc/model/io/serializers/providers/containers/TableOfContentsContainerSerializerProvider MW/rtc/model/io/serializers/providers/containers/TableOfContentsHeadingSerializerProvider MW/rtc/model/io/serializers/providers/containers/TableOfContentsListSerializerProvider MW/rtc/plugins/internalhyperlinkservice/AnchorProvider MW/rtc/plugins/tableofcontents/TableOfContentsProvider MW/rtc/plugins/tableofcontents/TableOfContentsContainerInsertionRulesProvider MW/rtc/plugins/tableofcontents/TableOfContentsHeadingNodeConversionRulesProvider MW/rtc/plugins/tableofcontents/TableOfContentsListConversionRulesProvider MW/rtc/plugins/tableofcontents/export/TableOfContentsContainer2HTMLProvider MW/rtc/plugins/tableofcontents/view/TableOfContentsLayouterProvider MW/rtc/plugins/tableofcontents/view/TableOfContentsHeadingNodeLayouterProvider MW/rtc/plugins/tableofcontents/view/TableOfContentsContainerLayouterProvider MW/rtc/plugins/tableofcontents/model/TableOfContentsContainerContentConverterProvider MW/rtc/plugins/tableofcontents/model/TableOfContentsHeadingNodeContentConverterProvider MW/rtc/plugins/tableofcontents/model/TableOfContentsListContentConverterProvider MW/rtc/plugins/tableofcontents/view/TableOfContentsListCoordinateConverterProvider MW/rtc/plugins/tableofcontents/view/TableOfContentsContainerCoordinateConverterProvider MW/rtc/plugins/tableofcontents/view/TableOfContentsHeadingNodeCoordinateConverterProvider MW/rtc/margin/TraditionalLineNumberDecoratorProvider MW/rtc/margin/settings/LineNumberPreferenceProvider MW/rtc/model/io/SerializersProvider MW/rtc/model/io/serializers/providers/containers/CodeContainerSerializerProvider MW/rtc/model/io/serializers/providers/containers/ContainerSerializerProvider MW/rtc/model/io/serializers/providers/containers/HeadingContainerSerializerProvider MW/rtc/model/io/serializers/providers/containers/HyperlinkContainerSerializerProvider MW/rtc/model/io/serializers/providers/containers/ListContainerSerializerProvider MW/rtc/model/io/serializers/providers/containers/ListItemContainerSerializerProvider MW/rtc/model/io/serializers/providers/containers/LiveAppLineContainerSerializerProvider MW/rtc/model/io/serializers/providers/containers/RichTextContainerSerializerProvider MW/rtc/model/io/serializers/providers/containers/SectionBreakContainerSerializerProvider MW/rtc/model/io/serializers/providers/nodes/EquationSerializerProvider MW/rtc/model/io/serializers/providers/nodes/ImageSerializerProvider MW/rtc/model/io/serializers/providers/nodes/LiveControlSerializerProvider MW/rtc/model/io/serializers/providers/nodes/PlainTextSerializerProvider MW/rtc/model/io/serializers/providers/nodes/RichTextSerializerProvider MW/rtc/nodes/insertionrules/LineNodeInsertionRulesProvider MW/rtc/nodes/insertionrules/LiveControlNodeInsertionRulesProvider MW/rtc/nodes/insertionrules/OpaqueNodeInsertionRulesProvider MW/rtc/nodes/insertionrules/PlainTextNodeInsertionRulesProvider MW/rtc/plugins/blockmatching/BlockMatchingPluginProvider MW/rtc/plugins/breakpoint/matlab/executablelines/ExecutableLineDecoratorProvider MW/rtc/plugins/breakpoint/matlab/TraditionalBreakpointStylerProvider MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointContextMenuModelFactoryProvider MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointDataModelProvider MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointFactoryProvider MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointDecoratorProvider MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointActionsProvider MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointDataServiceProvider MW/rtc/plugins/breakpoint/matlab/TraditionalBreakpointDirtyServiceProvider MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointMarginProvider MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointPromiseManagerProvider MW/rtc/plugins/breakpoint/matlab/temporary/TemporaryBreakpointManagerProvider MW/rtc/plugins/breakpoint/DummyBreakpointMarginProvider MW/rtc/plugins/buttonfactory/ButtonFactoryProvider MW/rtc/plugins/caseconverter/CaseConverterProvider MW/rtc/plugins/code/CodeTextServiceProvider MW/rtc/plugins/code/ExecutableLineServiceProvider MW/rtc/plugins/contextmenu/DojoContextMenuGeneratorProvider MW/rtc/plugins/contextmenu/ContextMenuProvider MW/rtc/plugins/contextmenu/DocumentContextMenuModelProvider MW/rtc/plugins/currentlinehighlight/CurrentLineHighlightPreferenceProvider MW/rtc/plugins/currentlinehighlight/CurrentLineHighlightProvider MW/rtc/plugins/cursorgripper/CursorGripperProvider MW/rtc/plugins/cutcopypaste/CutCopyPasteProvider MW/rtc/plugins/cutcopypaste/ClipboardConverterProvider MW/rtc/plugins/cutcopypaste/DefaultMIMEConverterProvider MW/rtc/plugins/cutcopypaste/mime/PlainTextMimeConverterProvider MW/rtc/plugins/cutcopypaste/mime/PlainTextMimeInCodeConverterProvider MW/rtc/plugins/cutcopypaste/mime/CodeExampleMimeInCodeConverterProvider MW/rtc/plugins/cutcopypaste/mime/CodeMimeInCodeExampleConverterProvider MW/rtc/plugins/cutcopypaste/mime/UnicodeStringMimeConverterProvider MW/rtc/plugins/cutcopypaste/mime/PromptlessTextMimeConverterProvider MW/rtc/plugins/cutcopypaste/PlainTextMimeGeneratorProvider MW/rtc/plugins/cutcopypaste/HTMLGeneratorProvider MW/rtc/plugins/cutcopypaste/InternalSerializationGeneratorProvider MW/rtc/plugins/cutcopypaste/PlainTextNodeConverterProvider MW/rtc/plugins/cutcopypaste/RTFGeneratorProvider MW/rtc/plugins/datatip/DataTipProvider MW/rtc/plugins/draganddrop/DragAndDropProvider MW/rtc/plugins/draganddrop/DragAndDropNotifierProvider MW/rtc/plugins/debug/breadcrumbstack/BreadcrumbStackProvider MW/rtc/plugins/debug/executionarrow/ExecutionArrowDecoratorProvider MW/rtc/plugins/debug/executionlines/ExecutionLinesPluginProvider MW/rtc/plugins/debug/DatatipPluginProvider MW/rtc/plugins/debug/DebuggerManagerProvider MW/rtc/plugins/debug/DebugLineAutoScrollPluginProvider MW/rtc/plugins/debug/DebugLineFocusPluginProvider MW/rtc/plugins/debug/DebugStackModelProvider MW/rtc/plugins/debug/DocumentDebugServicesProvider MW/rtc/plugins/debug/DocumentLoadedServiceProvider MW/rtc/plugins/debug/RunToLineServiceProvider MW/rtc/plugins/debug/DocumentDirtyDebugServiceProvider MW/rtc/plugins/debug/contextualbuttons/ContextualButtonFactoryProvider MW/rtc/plugins/debug/contextualbuttons/runtohere/RunToHereViewModelProvider MW/rtc/plugins/debug/contextualbuttons/runtohere/RunToHereViewProvider MW/rtc/plugins/debug/contextualbuttons/runtohere/hoverservice/RunToHereCodeHoverServiceProvider MW/rtc/plugins/debug/contextualbuttons/stepin/FunctionCallsiteFactoryProvider MW/rtc/plugins/debug/contextualbuttons/stepin/StepInManagerProvider MW/rtc/plugins/debug/contextualbuttons/stepin/StepInViewProvider MW/rtc/plugins/device/ios/VirtualKeyboardShortcutBarProvider MW/rtc/plugins/editordataservice/EditorDataServiceProvider MW/rtc/plugins/editordataservice/EditorDataServiceManagerProvider MW/rtc/plugins/embeddedoutputs/EmbeddedOutputsDBQuitSaveReadyProvider MW/rtc/plugins/embeddedoutputs/EvalTextCacheProvider MW/rtc/plugins/embeddedoutputs/ClearOutputsCacheProvider MW/rtc/plugins/embeddedoutputs/CurrentOutputServiceProvider MW/rtc/plugins/embeddedoutputs/EmbeddedOutputsProvider MW/rtc/plugins/embeddedoutputs/ExecutionRequestFactoryProvider MW/rtc/plugins/embeddedoutputs/OutputHandlerProvider MW/rtc/plugins/embeddedoutputs/LineNumberTrackerProvider MW/rtc/plugins/embeddedoutputs/LineContinuationTrackerProvider MW/rtc/plugins/embeddedoutputs/StateHandlerProvider MW/rtc/plugins/embeddedoutputs/SyntaxErrorHandlerProvider MW/rtc/plugins/embeddedoutputs/OutputRemoverProvider MW/rtc/plugins/embeddedoutputs/CopyOutputsProvider MW/rtc/plugins/embeddedoutputs/ExecutionManagerProvider MW/rtc/plugins/embeddedoutputs/ExecutionDataManagerProvider MW/rtc/plugins/embeddedoutputs/view/inline/InlineViewProvider MW/rtc/plugins/embeddedoutputs/view/onright/OnrightViewProvider MW/rtc/plugins/embeddedoutputs/loadinterceptors/DeferredLoadInterceptorProvider MW/rtc/plugins/embeddedoutputs/loadinterceptors/EmbeddedOutputsLoadInterceptorManagerProvider MW/rtc/plugins/embeddedoutputs/model/EmbeddedOutputsModelProvider MW/rtc/plugins/embeddedoutputs/model/SplitterPositionModelProvider MW/rtc/plugins/embeddedoutputs/outputhandlers/error/ErrorOutputHandlerProvider MW/rtc/plugins/embeddedoutputs/codegen/CodeGenFactoryProvider MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseText2HTMLProvider MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureOutputHandlerProvider MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureConnectionManagerProvider MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/export/Figure2HTMLProvider MW/rtc/plugins/embeddedoutputs/outputhandlers/matrix/MatrixOutputHandlerProvider MW/rtc/plugins/embeddedoutputs/outputhandlers/matrix/export/MatrixElement2HTMLProvider MW/rtc/plugins/embeddedoutputs/outputhandlers/symbolic/SymbolicOutputHandlerProvider MW/rtc/plugins/embeddedoutputs/outputhandlers/symbolic/export/Symbolic2HTMLProvider MW/rtc/plugins/embeddedoutputs/outputhandlers/text/TextOutputHandlerProvider MW/rtc/plugins/embeddedoutputs/outputhandlers/variable/VariableOutputHandlerProvider MW/rtc/plugins/embeddedoutputs/outputhandlers/variable/export/VariableElement2HTMLProvider MW/rtc/plugins/embeddedoutputs/outputhandlers/variablestring/VariableStringOutputHandlerProvider MW/rtc/plugins/embeddedoutputs/outputhandlers/warning/WarningOutputHandlerProvider MW/rtc/plugins/embeddedoutputs/view/EmbeddedOutputsAlertProvider MW/rtc/plugins/embeddedoutputs/view/HitLineIndicatorProvider MW/rtc/plugins/embeddedoutputs/ExecutionManagerViewServiceProvider MW/rtc/plugins/embeddedoutputs/triggers/TriggersProvider MW/rtc/plugins/embeddedoutputs/triggers/InterruptActionProvider MW/rtc/plugins/export/ExportNotifierProvider MW/rtc/plugins/folding/FoldingActionsProvider MW/rtc/plugins/folding/FoldingControllerProvider MW/rtc/plugins/folding/FoldingModelProvider MW/rtc/plugins/export/html/HTMLExporterProvider MW/rtc/plugins/export/html/LineNode2HTMLProvider MW/rtc/plugins/export/html/OutputParagraph2HTMLProvider MW/rtc/plugins/export/html/PlainTextNode2HTMLProvider MW/rtc/plugins/folding/view/FoldingMarginProvider MW/rtc/plugins/folding/view/FoldingDecoratorProvider MW/rtc/plugins/folding/view/FoldingEllipsesManagerProvider MW/rtc/plugins/language/matlab/executablecode/ExecutableCodeServiceProvider MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/ExecutableCodeConverterProvider MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/RootNodeExecutableCodeConverterProvider MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/LineNodeExecutableCodeConverterProvider MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/PlainTextNodeExecutableCodeConverterProvider MW/rtc/plugins/language/matlab/folding/MatlabCodeFoldingProvider MW/rtc/plugins/language/matlab/syntax/mtree/MTreeRangeFactoryProvider MW/rtc/plugins/language/matlab/syntax/mtree/MTreeServiceProvider MW/rtc/plugins/language/matlab/syntax/mtree/codeblocks/MTreeCodeBlockServicesProvider MW/rtc/plugins/language/matlab/syntax/mtree/codeblocks/MTreeCodeBlockStructureProvider MW/rtc/plugins/language/matlab/syntaxhighlighter/ServerSideSyntaxHighlighterProvider MW/rtc/plugins/equations/equationcontroller/EquationControllerProvider MW/rtc/plugins/equations/equationcontroller/nodes/EquationNodeContentConverterProvider MW/rtc/plugins/equations/equationcontroller/view/EquationCoordinateConverterProvider MW/rtc/plugins/equations/equationcontroller/view/EquationLayouterProvider MW/rtc/plugins/equations/equationeditor/EquationEditorProvider MW/rtc/plugins/equations/equationeditor/MathMLMimeConverterProvider MW/rtc/plugins/equations/export/Equation2HTMLProvider MW/rtc/plugins/equations/latexeditor/LaTeXEditorProvider MW/rtc/plugins/events/EventHandlerProvider MW/rtc/plugins/execution/ExecutionActionsProvider MW/rtc/plugins/execution/ControlCServiceProvider MW/rtc/plugins/execution/BusyIdleServicesProvider MW/rtc/plugins/execution/margin/DecoratableExecutionMarginProvider MW/rtc/plugins/execution/range/StepRangeProvider MW/rtc/plugins/execution/range/StepOutRangeProvider MW/rtc/plugins/execution/range/RunToHereRangeProvider MW/rtc/plugins/execution/range/RunSectionRangeProvider MW/rtc/plugins/execution/range/RunSectionEndRangeProvider MW/rtc/plugins/execution/range/RunSectionAdvanceRangeProvider MW/rtc/plugins/execution/range/RunAllRangeProvider MW/rtc/plugins/execution/range/ContinueRangeProvider MW/rtc/plugins/execution/range/ExecutionRangeManagerProvider MW/rtc/plugins/execution/range/ExecutionRangeUtilitiesProvider MW/rtc/plugins/find/FindProvider MW/rtc/plugins/find/ReplaceProvider MW/rtc/plugins/formatcode/FormatCodePluginProvider MW/rtc/plugins/goto/GotoProvider MW/rtc/plugins/htmlmime/HTMLMimeConverterProvider MW/rtc/plugins/hyperlink/HyperlinkProvider MW/rtc/plugins/hyperlink/HyperlinkEditorProvider MW/rtc/plugins/hyperlink/HTMLHyperlinkElementHandlerProvider MW/rtc/plugins/hyperlink/HyperlinkMIMEConverterProvider MW/rtc/plugins/hyperlink/HyperlinkTooltipProvider MW/rtc/plugins/hyperlink/export/Hyperlink2HTMLProvider MW/rtc/plugins/hyperlink/model/HyperlinkNodeContentConverterProvider MW/rtc/plugins/hyperlink/view/HyperlinkCoordinateConverterProvider MW/rtc/plugins/hyperlink/view/HyperlinkLayouterProvider MW/rtc/plugins/images/HTMLImageElementHandlerProvider MW/rtc/plugins/images/ImagesProvider MW/rtc/plugins/images/ImageMimeConverterProvider MW/rtc/plugins/images/ImageNodeConverterProvider MW/rtc/plugins/images/InsertImageProvider MW/rtc/plugins/images/InlineResizeImageProvider MW/rtc/plugins/images/export/Image2HTMLProvider MW/rtc/plugins/images/model/ImageNodeContentConverterProvider MW/rtc/plugins/images/view/ImageCoordinateConverterProvider MW/rtc/plugins/images/view/ImageLayouterProvider MW/rtc/plugins/imeinput/IMEInputProvider MW/rtc/plugins/indentation/IndentationProvider MW/rtc/plugins/indentutilities/IndentUtilitiesProvider MW/rtc/plugins/hyperlink/HyperlinkInsertionRulesProvider MW/rtc/plugins/insertionrules/InsertionRuleServiceProvider MW/rtc/plugins/lists/model/ListParagraphContentConverterProvider MW/rtc/plugins/lists/model/ListItemContentConverterProvider MW/rtc/plugins/lists/ListParagraphInsertionRulesProvider MW/rtc/plugins/lists/ListItemInsertionRulesProvider MW/rtc/plugins/codeexample/export/CodeExampleBlock2HTMLProvider MW/rtc/plugins/codeexample/model/CodeExampleBlockNodeContentConverterProvider MW/rtc/plugins/codeexample/model/CodeExampleLineNodeContentConverterProvider MW/rtc/plugins/codeexample/view/CodeExampleBlockLayouterProvider MW/rtc/plugins/codeexample/view/CodeExampleLineLayouterProvider MW/rtc/plugins/codeexample/view/CodeExampleBlockCoordinateConverterProvider MW/rtc/plugins/codeexample/CodeExampleBlockInsertionRulesProvider MW/rtc/plugins/codeexample/CodeExampleLineInsertionRulesProvider MW/rtc/model/io/serializers/providers/containers/CodeExampleBlockContainerSerializerProvider MW/rtc/model/io/serializers/providers/containers/CodeExampleLineContainerSerializerProvider MW/rtc/plugins/codeexample/CodeExampleBlockKeyHandlerProvider MW/rtc/plugins/codeexample/CodeExampleProvider MW/rtc/plugins/codeexample/syntaxhighlighter/matlab/SyntaxHighlighterProvider MW/rtc/plugins/resizer/ResizerProvider MW/rtc/plugins/richtext/RichTextNodeInsertionRulesProvider MW/rtc/plugins/richtext/RichTextParagraphInsertionRulesProvider MW/rtc/plugins/richtext/view/HeadingLayouterProvider MW/rtc/plugins/richtext/view/RichTextLayouterProvider MW/rtc/plugins/richtext/view/RichTextParagraphLayouterProvider MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNodeContentConverterProvider MW/rtc/plugins/richtext/nodes/inner/HeadingNodeContentConverterProvider MW/rtc/plugins/richtext/nodes/leaf/RichTextNodeContentConverterProvider MW/rtc/plugins/save/SaveReadyManagerProvider MW/rtc/plugins/sectionbreak/SectionBreakInsertionRulesProvider MW/rtc/plugins/undoredo/UndoRedoControllerProvider MW/rtc/plugins/undoredo/EditBlockControllerProvider MW/rtc/plugins/undoredo/UndoRedoActionProvider MW/rtc/plugins/undoredo/UndoRedoCursorProvider MW/rtc/plugins/language/matlab/alert/AlertControllerProvider MW/rtc/plugins/language/matlab/alert/AlertModelProvider MW/rtc/plugins/language/matlab/alert/AlertViewProvider MW/rtc/plugins/language/matlab/alert/AlertWidgetFactoryProvider MW/rtc/plugins/language/matlab/diagnosticmessage/DiagnosticMessageFormatterProvider MW/rtc/plugins/language/matlab/autoindent/AutoIndentProvider MW/rtc/plugins/language/matlab/autoindent/preferences/AutoIndentPreferenceProvider MW/rtc/plugins/language/matlab/code/CodeChangeServiceProvider MW/rtc/plugins/language/matlab/codecontent/CodeContentProvider MW/rtc/plugins/language/matlab/codeanalyzer/model/CodeAnalyzerModelProvider MW/rtc/plugins/language/matlab/codeanalyzer/preferences/CodeAnalyzerPreferencesProvider MW/rtc/plugins/language/matlab/codeanalyzer/tooltip/CodeAnalyzerTooltipProvider MW/rtc/plugins/language/matlab/codeanalyzer/view/CodeAnalyzerViewProvider MW/rtc/plugins/language/matlab/codeanalyzer/CodeAnalyzerPluginProvider MW/rtc/plugins/language/matlab/codeanalyzer/CodeAnalyzerAutoFixProvider MW/rtc/plugins/language/matlab/codeanalyzer/messagebar/AlertMessageLayerProvider MW/rtc/plugins/language/matlab/codeanalyzer/messagebar/CodeAnalyzerMessageLayerProvider MW/rtc/plugins/language/matlab/codingui/CodingUIActionHandlerProvider MW/rtc/plugins/language/matlab/codingui/CodingUIContextManagerProvider MW/rtc/plugins/language/matlab/codingui/CodingUIProvider MW/rtc/plugins/language/matlab/codingui/CodingUIRequestHandlerProvider MW/rtc/plugins/language/matlab/codingui/CodingUIViewEventBusProvider MW/rtc/plugins/language/matlab/codingui/preferences/CodingUIPreferenceProvider MW/rtc/plugins/language/matlab/codingui/view/CodingUIViewProvider MW/rtc/plugins/language/matlab/contextualselection/ContextualSelectionUtilityProvider MW/rtc/plugins/language/matlab/contextualselection/EvaluateSelectionProvider MW/rtc/plugins/language/matlab/contextualselection/HelpOnSelectionProvider MW/rtc/plugins/language/matlab/contextualselection/HelpServiceProvider MW/rtc/plugins/language/matlab/contextualselection/OpenSelectionProvider MW/rtc/plugins/language/matlab/commentCode/CommentCodeProvider MW/rtc/plugins/language/matlab/filetype/FileTypeProvider MW/rtc/plugins/language/matlab/functionhints/FunctionHintsProvider MW/rtc/plugins/language/matlab/syntax/functions/FunctionServiceProvider MW/rtc/plugins/functionnotifier/FunctionArgumentNotifierProvider MW/rtc/plugins/functionnotifier/LocalFunctionNotifierProvider MW/rtc/plugins/functionnotifier/AllFunctionNotifierProvider MW/rtc/plugins/functionnotifier/TopLevelFunctionNotifierProvider MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppBackendServiceProvider MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppCodeManagerProvider MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppControllerProvider MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppCursorHandlerProvider MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppDocumentHandlerProvider MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppEditorKeyHandlerProvider MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppExecutionManagerProvider MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppFocusManagerProvider MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppUIFigureHandlerProvider MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppViewModelProvider MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppWidgetKeyHandlerProvider MW/rtc/plugins/language/matlab/codingui/liveapps/nodes/LiveAppInlineNodeContentConverterProvider MW/rtc/plugins/language/matlab/codingui/liveapps/nodes/LiveAppInlineNodeInsertionRulesProvider MW/rtc/plugins/language/matlab/codingui/liveapps/nodes/LiveAppLineNodeContentConverterProvider MW/rtc/plugins/language/matlab/codingui/liveapps/nodes/LiveAppLineNodeConversionRulesProvider MW/rtc/plugins/language/matlab/codingui/liveapps/nodes/LiveAppLineNodeInsertionRulesProvider MW/rtc/plugins/language/matlab/codingui/liveapps/view/LiveAppInlineNodeCoordinateConverterProvider MW/rtc/plugins/language/matlab/codingui/liveapps/view/LiveAppInlineNodeLayouterProvider MW/rtc/plugins/language/matlab/codingui/liveapps/view/LiveAppLineNodeCoordinateConverterProvider MW/rtc/plugins/language/matlab/codingui/liveapps/view/LiveAppLineNodeLayouterProvider MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlActionHandlerProvider MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlContextManagerProvider MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlContextMenuProvider MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlExecutionProvider MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlInsertionProvider MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlToolstripActionsProvider MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlWidgetHandlerProvider MW/rtc/plugins/language/matlab/codingui/livecontrols/export/LiveControl2HTMLProvider MW/rtc/plugins/language/matlab/codingui/livecontrols/nodes/LiveControlNodeContentConverterProvider MW/rtc/plugins/language/matlab/codingui/livecontrols/nodes/LiveControlNodeExecutableCodeConverterProvider MW/rtc/plugins/language/matlab/codingui/livecontrols/view/converters/LiveControlCoordinateConverterProvider MW/rtc/plugins/language/matlab/codingui/livecontrols/view/LiveControlViewModelProvider MW/rtc/plugins/language/matlab/codingui/livecontrols/view/LiveControlLayouterProvider MW/rtc/plugins/language/matlab/functions/LocalFunctionsProvider MW/rtc/plugins/language/matlab/functions/LocalFunctionsSectionAttributeContributorProvider MW/rtc/plugins/language/matlab/functions/TopLevelFunctionProvider MW/rtc/plugins/language/matlab/functions/TopLevelFunctionSectionAttributeContributorProvider MW/rtc/plugins/language/matlab/section/SectionPluginProvider MW/rtc/plugins/language/matlab/sections/CodeRegionSectionContributorProvider MW/rtc/plugins/language/matlab/sections/CurrentSectionViewProvider MW/rtc/plugins/language/matlab/sections/InsertSectionProvider MW/rtc/plugins/language/matlab/sections/NavigateSectionProvider MW/rtc/plugins/language/matlab/sections/SectionBreakSectionContributorProvider MW/rtc/plugins/language/matlab/sections/SectionModelProvider MW/rtc/plugins/language/matlab/sections/SectionContainerUtilityProvider MW/rtc/plugins/language/matlab/sections/StaleSectionModelProvider MW/rtc/plugins/language/matlab/tokenizer/MatlabTokensPluginProvider MW/rtc/plugins/language/matlab/nonlocalvariablehighlighting/NonlocalVariableHighlightingProvider MW/rtc/plugins/language/matlab/variablehighlighting/messagebar/VariableHighlightMessageLayerProvider MW/rtc/plugins/language/matlab/variablehighlighting/view/VariableHighlightViewProvider MW/rtc/plugins/language/matlab/variablehighlighting/VariableHighlightProvider MW/rtc/plugins/language/matlab/variablerenaming/VariableRenamingControllerProvider MW/rtc/plugins/language/matlab/variablerenaming/VariableRenamingModelProvider MW/rtc/plugins/language/matlab/variablerenaming/VariableRenamingModelUtilityProvider MW/rtc/plugins/language/matlab/variablerenaming/view/VariableRenamingViewProvider MW/rtc/plugins/language/matlab/variableservice/VariableServiceProvider MW/rtc/plugins/lists/ListsProvider MW/rtc/plugins/lists/HTMLListElementHandlerProvider MW/rtc/plugins/lists/HTMLWordStyleListHandlerProvider MW/rtc/plugins/lists/export/ListParagraph2HTMLProvider MW/rtc/plugins/lists/export/ListItem2HTMLProvider MW/rtc/plugins/lists/view/ListParagraphCoordinateConverterProvider MW/rtc/plugins/lists/view/ListItemLayouterProvider MW/rtc/plugins/lists/view/ListParagraphLayouterProvider MW/rtc/plugins/smoothscrolling/SmoothScrollingPluginProvider MW/rtc/plugins/margin/TraditionalLineNumberMarginProvider MW/rtc/plugins/margin/EmptyWithSectionBreaksMarginProvider MW/rtc/plugins/margin/MarginContainerProvider MW/rtc/plugins/margin/RightMarginButtonProvider MW/rtc/plugins/margin/RightMarginContainerProvider MW/rtc/plugins/margin/SeverityStatusButtonProvider MW/rtc/plugins/messagebar/MessageBarModelProvider MW/rtc/plugins/messagebar/MessageBarServiceProvider MW/rtc/plugins/messagebar/MessageBarViewProvider MW/rtc/plugins/nodeconversionrules/NodeConversionRulesServiceProvider MW/rtc/plugins/offscreennotification/OffscreenNotificationProvider MW/rtc/plugins/richtext/RichTextProvider MW/rtc/plugins/richtext/CodeTextToggleShortcutsProvider MW/rtc/plugins/richtext/MatlabJSONMimeConverterProvider MW/rtc/plugins/richtext/HTMLRichTextElementHandlerProvider MW/rtc/plugins/richtext/export/RichTextParagraphNode2HTMLProvider MW/rtc/plugins/richtext/export/HeadingNode2HTMLProvider MW/rtc/plugins/richtext/export/RichTextNode2HTMLProvider MW/rtc/plugins/richtext/view/RichTextCoordinateConverterProvider MW/rtc/plugins/richtext/view/RichTextRangeConverterProvider MW/rtc/plugins/saveaspdf/SaveAsPDFProvider MW/rtc/plugins/saveaspdf/document/BaseDocumentWriterProvider MW/rtc/plugins/saveaspdf/document/EquationWriterProvider MW/rtc/plugins/saveaspdf/document/HyperlinkWriterProvider MW/rtc/plugins/saveaspdf/document/ImageWriterProvider MW/rtc/plugins/saveaspdf/document/LiveControlWriterProvider MW/rtc/plugins/saveaspdf/document/ListWriterProvider MW/rtc/plugins/saveaspdf/document/ParagraphWriterProvider MW/rtc/plugins/saveaspdf/document/TableOfContentWriterProvider MW/rtc/plugins/saveaspdf/outputs/FigureWriterProvider MW/rtc/plugins/saveaspdf/outputs/MatrixWriterProvider MW/rtc/plugins/saveaspdf/outputs/TableWriterProvider MW/rtc/plugins/saveaspdf/outputs/OutputWriterProvider MW/rtc/plugins/saveaspdf/outputs/SymEquationWriterProvider MW/rtc/plugins/saveaspdf/outputs/TextWriterProvider MW/rtc/plugins/saveaspdf/outputs/VariableWriterProvider MW/rtc/plugins/service/CodingUIBackendCodeProviderProvider MW/rtc/plugins/service/CodingUIBackendServiceProvider MW/rtc/plugins/service/FocusServiceProvider MW/rtc/plugins/service/LineNumberServiceProvider MW/rtc/plugins/service/OutputHandlerServiceProvider MW/rtc/plugins/service/hover/JavaToolstripHoverServiceProvider MW/rtc/plugins/service/TooltipServiceProvider MW/rtc/plugins/settings/RtcSettingServiceProvider MW/rtc/plugins/shadowtext/ShadowTextServiceProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/AutoWrapCommentSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/SplitCommentSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/RoundParenInsertSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/RoundParenDeleteSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/SquareParenInsertSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/SquareParenDeleteSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/CurlyParenInsertSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/CurlyParenDeleteSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/SingleQuoteInsertSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/SingleQuoteDeleteSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/DoubleQuoteInsertSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/DoubleQuoteDeleteSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/RoundParenOverwritingSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/CurlyParenOverwritingSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/SquareParenOverwritingSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/SingleQuoteOverwritingSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/DoubleQuoteOverwritingSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/SplitDoubleQuoteStringSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/SplitSingleQuoteStringSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndClassDefBlockSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndEnumerationBlockSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndEventsBlockSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndForBlockSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndFunctionBlockSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndIfBlockSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndMethodsBlockSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndParforBlockSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndPropertiesBlockSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndSpmdBlockSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndSwitchBlockSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndTryBlockSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndWhileBlockSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/markdown/paragraph/MarkdownBulletedListSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/markdown/paragraph/MarkdownHeadingSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/markdown/paragraph/MarkdownNumberedListSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/markdown/paragraph/MarkdownTitleSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownBold2SmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownBoldSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownHyperlinkLabelUrlSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownHyperlinkUrlTagSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownItalic2SmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownItalicBold2SmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownItalicBoldSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownItalicSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownMonospaceSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/matlab/MatlabMonospaceSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/matlab/MatlabSectionBreakHeadingSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/matlab/MatlabSectionBreakSeparatorSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/symbol/SymbolTrademarkCopyrightSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/HyperlinkSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/MarkupEquationSmartFormatterProvider MW/rtc/plugins/smartformatting/BackspaceUndoHandlerProvider MW/rtc/plugins/smartformatting/SmartFormattingProvider MW/rtc/plugins/smartformatting/settings/AutoCodingSettingManagerProvider MW/rtc/plugins/smartformatting/settings/AutoFormattingSettingManagerProvider MW/rtc/plugins/smarttab/SmartTabProvider MW/rtc/plugins/statusactionbar/decorators/SectionsDecoratorProvider MW/rtc/plugins/statusactionbar/decorators/StaleSectionsDecoratorProvider MW/rtc/plugins/statusactionbar/decorators/StaleSectionsBackgroundDecoratorProvider MW/rtc/plugins/statusactionbar/evaluation/StatusActionBarEvaluationProvider MW/rtc/plugins/statusactionbar/decorators/SectionBreakLineMarginDecoratorProvider MW/rtc/plugins/statusactionbar/SectionDecoratorUtilitiesProvider MW/rtc/plugins/statusactionbar/SectionRangeMarginExpansionHandlerProvider MW/rtc/plugins/statusbar/StatusBarRequestHandlerProvider MW/rtc/plugins/sections/SectionsRequestHandlerProvider MW/rtc/plugins/functions/FunctionsRequestHandlerProvider MW/rtc/plugins/sectionbreak/SectionBreakProvider MW/rtc/plugins/sectionbreak/SectionBreakNodeConversionRulesProvider MW/rtc/plugins/sectionbreak/model/SectionBreakNodeContentConverterProvider MW/rtc/plugins/sectionbreak/view/SectionBreakCoordinateConverterProvider MW/rtc/plugins/sectionbreak/view/SectionBreakLayouterProvider MW/rtc/plugins/tabcompletion/CompletionHandlerProvider MW/rtc/plugins/tabcompletion/TabCompletionProvider MW/rtc/plugins/templates/TemplateServiceProvider MW/rtc/plugins/text/parenmatch/ParenMatchingPluginProvider MW/rtc/plugins/language/clike/clikeautoindent/CLikeAutoIndentProvider MW/rtc/plugins/language/clike/clikesyntaxhighlighter/CLikeSyntaxHighlighterProvider MW/rtc/plugins/language/clike/cliketokenizer/CLikeTokenizerProvider MW/rtc/plugins/language/matlab/syntaxhighlighter/MatlabSyntaxHighlighterProvider MW/rtc/plugins/language/matlab/syntaxhighlighter/preferences/MatlabSyntaxHighlighterPreferencesProvider MW/rtc/plugins/textnodeservice/TextNodeServiceProvider MW/rtc/plugins/tooltip/TooltipPluginContainerProvider MW/rtc/plugins/typocorrection/TypoSuggestionFeatureProvider MW/rtc/plugins/typocorrection/handler/TypoSuggestionHandlerFactoryProvider MW/rtc/plugins/view/divcaret/DivCaretPluginProvider MW/rtc/plugins/view/divselection/DivSelectionPluginProvider MW/rtc/plugins/view/layoutmanager/LayoutManagerProvider MW/rtc/plugins/view/layoutmanager/LayoutParagraphHostingModelProvider MW/rtc/plugins/view/layoutmanager/layouters/LineLayouterProvider MW/rtc/plugins/view/layoutmanager/layouters/PlainTextLayouterProvider MW/rtc/plugins/view/layoutmanager/layouters/RootLayouterProvider MW/rtc/plugins/view/layoutmanager/rules/BaseGroupingRuleProvider MW/rtc/plugins/view/layoutmanager/rules/ContainmentGroupingRuleProvider MW/rtc/plugins/view/layoutmanager/rules/ContiguousGroupingRuleProvider MW/rtc/plugins/view/layoutmanager/rules/DefaultRuleProvider MW/rtc/plugins/view/layoutmanager/rules/ExpandableRuleProvider MW/rtc/plugins/view/layoutmanager/rules/OutputRuleProvider MW/rtc/plugins/view/layoutmanager/rules/ParagraphHostingRuleProvider MW/rtc/plugins/view/layoutmanager/rules/WrappableRuleProvider MW/rtc/plugins/view/movehiddenkeycapture/MoveHiddenKeyCaptureProvider MW/rtc/preferences/PreferencesServiceProvider MW/rtc/view/PerformanceTestHelper MW/rtc/view/RTCPerformanceTestHelper MW/rtc/view/ViewModelProvider MW/rtc/view/ViewLinesTestHelper MW/rtc/view/ViewSectionsTestHelper MW/rtc/view/ViewportOpenedServiceProvider MW/rtc/view/ViewProvider MW/rtc/view/VisibilityNotifierProvider MW/rtc/view/coordinateconverter/PlainTextCoordinateConverterProvider MW/rtc/view/coordinateconverter/RootCoordinateConverterProvider MW/rtc/view/coordinateconverter/CoordinateConverterProvider MW/rtc/view/decoration/DecorationProvider MW/rtc/view/decoration/LayerDecoratorMarginDecoratorProvider MW/rtc/view/decoration/viewmodel/DecorationDescriptorsStoreProvider MW/rtc/view/decoration/viewmodel/DecorationLayerViewModelProvider MW/rtc/view/decoration/viewmodel/DecorationViewModelProvider MW/rtc/view/hidden/HiddenNodeModelProvider MW/rtc/view/hidden/HiddenNodeServiceProvider MW/rtc/view/rangeconverter/PlainTextRangeConverterProvider MW/rtc/view/rangeconverter/RangeConverterProvider MW/rtc/plugins/matlabmobile/MatlabMobileProvider".split(" "),
function(){return{plugins:[{id:"rtc.matlabmobile",path:"MW/rtc/plugins/matlabmobile/MatlabMobileProvider",family:"matlabmobile"},{id:"rtc.embeddedoutputs.hitlineindicator",path:"MW/rtc/plugins/embeddedoutputs/view/HitLineIndicatorProvider"},{id:"matlab.tokens",path:"MW/rtc/plugins/language/matlab/tokenizer/MatlabTokensPluginProvider"},{id:"rtc.cliketokenizer",path:"MW/rtc/plugins/language/clike/cliketokenizer/CLikeTokenizerProvider"},{id:"debug.margin.matlab.breakpoint",path:"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointDecoratorProvider"},
{id:"debug.breakpoint.temporary",path:"MW/rtc/plugins/breakpoint/matlab/temporary/TemporaryBreakpointManagerProvider"},{id:"debug.breakpoint.promise",path:"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointPromiseManagerProvider"},{id:"debug.breakpointmodel",path:"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointDataModelProvider"},{id:"debug.breakpointfactory",path:"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointFactoryProvider"},{id:"debug.breakpointactions",path:"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointActionsProvider",
family:"debugging"},{id:"debug.breakpoint.dataservice",path:"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointDataServiceProvider",family:"debugging"},{id:"debug.breakpointdirtyservice",path:"MW/rtc/plugins/breakpoint/matlab/TraditionalBreakpointDirtyServiceProvider",family:"debugging"},{id:"debug.margin.matlab.breakpointstyler",path:"MW/rtc/plugins/breakpoint/matlab/TraditionalBreakpointStylerProvider"},{id:"debug.contextmenumodelfactory",path:"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointContextMenuModelFactoryProvider"},
{id:"rtc.debug.breadcrumbstackbanner",path:"MW/rtc/plugins/debug/breadcrumbstack/BreadcrumbStackProvider"},{id:"debug.margin.executionarrow",path:"MW/rtc/plugins/debug/executionarrow/ExecutionArrowDecoratorProvider",subsystem:"rtc.left.margin"},{id:"debug.executionlines",path:"MW/rtc/plugins/debug/executionlines/ExecutionLinesPluginProvider"},{id:"margin.debug",path:"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointMarginProvider",subsystem:"rtc.left.margin",family:"debugging",label:"MATLAB Breakpoint Margin",
description:"The Left Margin contribution of the MATLAB Breakpoint Margin for  creating and viewing MATLAB Breakpoints."},{id:"margin.debug",path:"MW/rtc/plugins/breakpoint/DummyBreakpointMarginProvider",subsystem:"rtc.left.margin"},{id:"margin.linenumber",path:"MW/rtc/plugins/margin/TraditionalLineNumberMarginProvider",subsystem:"rtc.left.margin"},{id:"rtc.code.parenmatch",path:"MW/rtc/plugins/text/parenmatch/ParenMatchingPluginProvider"},{id:"rtc.code.syntaxhighlighter",path:"MW/rtc/plugins/language/matlab/syntaxhighlighter/MatlabSyntaxHighlighterProvider",
family:"syntaxhighlighter"},{id:"rtc.code.clikesyntaxhighlighter",path:"MW/rtc/plugins/language/clike/clikesyntaxhighlighter/CLikeSyntaxHighlighterProvider"},{id:"rtc.code.syntaxhighlighterpreferences",path:"MW/rtc/plugins/language/matlab/syntaxhighlighter/preferences/MatlabSyntaxHighlighterPreferencesProvider",family:"syntaxhighlighter"},{id:"rtc.code.serversidesyntaxhighlighter",path:"MW/rtc/plugins/language/matlab/syntaxhighlighter/ServerSideSyntaxHighlighterProvider"},{id:"rtc.code.formatcode",
path:"MW/rtc/plugins/formatcode/FormatCodePluginProvider"},{id:"rtc.code.codeanalyzermodel",path:"MW/rtc/plugins/language/matlab/codeanalyzer/model/CodeAnalyzerModelProvider",family:"codeanalyzer"},{id:"rtc.code.codeanalyzerpreferences",path:"MW/rtc/plugins/language/matlab/codeanalyzer/preferences/CodeAnalyzerPreferencesProvider"},{id:"rtc.code.codeanalyzerautofix",path:"MW/rtc/plugins/language/matlab/codeanalyzer/CodeAnalyzerAutoFixProvider",family:"codeanalyzer"},{id:"rtc.code.alertmessagelayer",
path:"MW/rtc/plugins/language/matlab/codeanalyzer/messagebar/AlertMessageLayerProvider",subsystem:"messagebarlayer"},{id:"rtc.code.codeanalyzermessagelayer",path:"MW/rtc/plugins/language/matlab/codeanalyzer/messagebar/CodeAnalyzerMessageLayerProvider",family:"codeanalyzer",subsystem:"messagebarlayer"},{id:"rtc.code.codeanalyzerview",path:"MW/rtc/plugins/language/matlab/codeanalyzer/view/CodeAnalyzerViewProvider",family:"codeanalyzer"},{id:"rtc.code.codeanalyzer",path:"MW/rtc/plugins/language/matlab/codeanalyzer/CodeAnalyzerPluginProvider",
family:"codeanalyzer"},{id:"rtc.functionservice",path:"MW/rtc/plugins/language/matlab/syntax/functions/FunctionServiceProvider"},{id:"rtc.functionargumentnotifier",path:"MW/rtc/plugins/functionnotifier/FunctionArgumentNotifierProvider"},{id:"rtc.allfunctionnotifier",path:"MW/rtc/plugins/functionnotifier/AllFunctionNotifierProvider"},{id:"rtc.localfunctionnotifier",path:"MW/rtc/plugins/functionnotifier/LocalFunctionNotifierProvider"},{id:"rtc.toplevelfunctionnotifier",path:"MW/rtc/plugins/functionnotifier/TopLevelFunctionNotifierProvider"},
{id:"rtc.code.functionhints",path:"MW/rtc/plugins/language/matlab/functionhints/FunctionHintsProvider"},{id:"rtc.code.datatip",path:"MW/rtc/plugins/datatip/DataTipProvider",subsystem:"hoverabletooltip"},{id:"rtc.liveapps.backend",path:"MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppBackendServiceProvider",family:"rtc.liveapps"},{id:"rtc.liveapps.codemanager",path:"MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppCodeManagerProvider",family:"rtc.liveapps"},{id:"rtc.liveapps.cursorhandler",
path:"MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppCursorHandlerProvider",family:"rtc.liveapps"},{id:"rtc.liveapps.controller",path:"MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppControllerProvider",family:"rtc.liveapps"},{id:"rtc.liveapps.documenthandler",path:"MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppDocumentHandlerProvider",family:"rtc.liveapps"},{id:"rtc.liveapps.editorkeyhandler",path:"MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppEditorKeyHandlerProvider",
family:"rtc.liveapps"},{id:"rtc.liveapps.executionmanager",path:"MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppExecutionManagerProvider",family:"rtc.liveapps"},{id:"rtc.liveapps.focusmanager",path:"MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppFocusManagerProvider",family:"rtc.liveapps"},{id:"rtc.liveapps.uifigurehandler",path:"MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppUIFigureHandlerProvider",family:"rtc.liveapps"},{id:"rtc.liveapps.viewmodel",path:"MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppViewModelProvider",
family:"rtc.liveapps"},{id:"rtc.liveapps.widgetkeyhandler",path:"MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppWidgetKeyHandlerProvider",family:"rtc.liveapps"},{id:"rtc.liveapps.nodes.inlinenode.contentconverter",path:"MW/rtc/plugins/language/matlab/codingui/liveapps/nodes/LiveAppInlineNodeContentConverterProvider",family:"rtc.liveapps",subsystem:"rtc.nodes.contentconverter.converter"},{id:"rtc.liveapps.nodes.inlinenode.insertionrules",path:"MW/rtc/plugins/language/matlab/codingui/liveapps/nodes/LiveAppInlineNodeInsertionRulesProvider",
family:"rtc.liveapps",subsystem:"rtc.insertionrule"},{id:"rtc.liveapps.nodes.linenode.contentconverter",path:"MW/rtc/plugins/language/matlab/codingui/liveapps/nodes/LiveAppLineNodeContentConverterProvider",family:"rtc.liveapps",subsystem:"rtc.nodes.contentconverter.converter"},{id:"rtc.liveapps.nodes.linenode.nodeconversionrules",path:"MW/rtc/plugins/language/matlab/codingui/liveapps/nodes/LiveAppLineNodeConversionRulesProvider",family:"rtc.liveapps",subsystem:"rtc.nodeconversionrule"},{id:"rtc.liveapps.nodes.linenode.insertionrules",
path:"MW/rtc/plugins/language/matlab/codingui/liveapps/nodes/LiveAppLineNodeInsertionRulesProvider",family:"rtc.liveapps",subsystem:"rtc.insertionrule"},{id:"rtc.liveapps.view.inlinenode.coordinateconverter",path:"MW/rtc/plugins/language/matlab/codingui/liveapps/view/LiveAppInlineNodeCoordinateConverterProvider",family:"rtc.liveapps",subsystem:"rtc.view.coordinateconverter.converter"},{id:"rtc.liveapps.view.inlinenode.layouter",path:"MW/rtc/plugins/language/matlab/codingui/liveapps/view/LiveAppInlineNodeLayouterProvider",
family:"rtc.liveapps",subsystem:"rtc.view.layoutmanager.layouter"},{id:"rtc.liveapps.view.linenode.coordinateconverter",path:"MW/rtc/plugins/language/matlab/codingui/liveapps/view/LiveAppLineNodeCoordinateConverterProvider",family:"rtc.liveapps",subsystem:"rtc.view.coordinateconverter.converter"},{id:"rtc.liveapps.view.linenode.layouter",path:"MW/rtc/plugins/language/matlab/codingui/liveapps/view/LiveAppLineNodeLayouterProvider",family:"rtc.liveapps",subsystem:"rtc.view.layoutmanager.layouter"},{id:"rtc.livecontrols.actionhandler",
path:"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlActionHandlerProvider",family:"rtc.livecontrols"},{id:"rtc.livecontrols.contextmanager",path:"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlContextManagerProvider",family:"rtc.livecontrols"},{id:"rtc.livecontrols.contextmenu",path:"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlContextMenuProvider",family:"rtc.livecontrols"},{id:"rtc.livecontrols.execution",path:"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlExecutionProvider",
family:"rtc.livecontrols"},{id:"rtc.livecontrols.insertion",path:"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlInsertionProvider",family:"rtc.livecontrols"},{id:"rtc.livecontrols.toolstrip",path:"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlToolstripActionsProvider",family:"rtc.livecontrols"},{id:"rtc.livecontrols.widgethandler",path:"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlWidgetHandlerProvider",family:"rtc.livecontrols"},{id:"rtc.livecontrols.contentconverter",
path:"MW/rtc/plugins/language/matlab/codingui/livecontrols/nodes/LiveControlNodeContentConverterProvider",family:"rtc.livecontrols",subsystem:"rtc.nodes.contentconverter.converter"},{id:"rtc.livecontrols.executablecodeconverter",path:"MW/rtc/plugins/language/matlab/codingui/livecontrols/nodes/LiveControlNodeExecutableCodeConverterProvider",family:"rtc.livecontrols",subsystem:"rtc.document.executablecode.executablecodeconverter.converter"},{id:"rtc.livecontrols.coordinateconverter",path:"MW/rtc/plugins/language/matlab/codingui/livecontrols/view/converters/LiveControlCoordinateConverterProvider",
family:"rtc.livecontrols",subsystem:"rtc.view.coordinateconverter.converter"},{id:"rtc.livecontrols.viewmodel",path:"MW/rtc/plugins/language/matlab/codingui/livecontrols/view/LiveControlViewModelProvider",family:"rtc.livecontrols"},{id:"rtc.livecontrols.layouter",path:"MW/rtc/plugins/language/matlab/codingui/livecontrols/view/LiveControlLayouterProvider",family:"rtc.livecontrols",subsystem:"rtc.view.layoutmanager.layouter"},{id:"rtc.livecontrols.insertionrule",path:"MW/rtc/nodes/insertionrules/LiveControlNodeInsertionRulesProvider",
family:"rtc.livecontrols",subsystem:"rtc.insertionrule"},{id:"rtc.code.localfunctions.controller",path:"MW/rtc/plugins/language/matlab/functions/LocalFunctionsProvider",family:"rtc.code.localfunctions"},{id:"rtc.code.sections.attribute.localfunctions",path:"MW/rtc/plugins/language/matlab/functions/LocalFunctionsSectionAttributeContributorProvider",family:"rtc.code.localfunctions"},{id:"rtc.code.functions.controller",path:"MW/rtc/plugins/language/matlab/functions/TopLevelFunctionProvider",family:"rtc.code.localfunctions"},
{id:"rtc.code.sections.attribute.toplevelfunction",path:"MW/rtc/plugins/language/matlab/functions/TopLevelFunctionSectionAttributeContributorProvider",family:"rtc.code.localfunctions"},{id:"matlab.folding",path:"MW/rtc/plugins/language/matlab/folding/MatlabCodeFoldingProvider",family:"folding"},{id:"matlab.code.mtree.rangefactory",path:"MW/rtc/plugins/language/matlab/syntax/mtree/MTreeRangeFactoryProvider"},{id:"matlab.code.mtree",path:"MW/rtc/plugins/language/matlab/syntax/mtree/MTreeServiceProvider"},
{id:"matlab.code.mtree.codeblocks",path:"MW/rtc/plugins/language/matlab/syntax/mtree/codeblocks/MTreeCodeBlockServicesProvider"},{id:"matlab.code.mtree.codeblocks.structure",path:"MW/rtc/plugins/language/matlab/syntax/mtree/codeblocks/MTreeCodeBlockStructureProvider"},{id:"matlab.code.variables.nonlocalhighlighting",path:"MW/rtc/plugins/language/matlab/nonlocalvariablehighlighting/NonlocalVariableHighlightingProvider",family:"matlab.code.variables.highlighting"},{id:"matlab.code.variablehighlightingmessagelayer",
path:"MW/rtc/plugins/language/matlab/variablehighlighting/messagebar/VariableHighlightMessageLayerProvider",subsystem:"messagebarlayer"},{id:"matlab.code.variablehighlightview",path:"MW/rtc/plugins/language/matlab/variablehighlighting/view/VariableHighlightViewProvider",family:"matlab.code.variables.highlighting"},{id:"matlab.code.variables.plugin",path:"MW/rtc/plugins/language/matlab/variablehighlighting/VariableHighlightProvider",family:"matlab.code.variables.highlighting"},{id:"matlab.code.variables.rename.controller",
path:"MW/rtc/plugins/language/matlab/variablerenaming/VariableRenamingControllerProvider",family:"matlab.code.variables.rename"},{id:"matlab.code.variables.rename.model",path:"MW/rtc/plugins/language/matlab/variablerenaming/VariableRenamingModelProvider",family:"matlab.code.variables.rename"},{id:"matlab.code.variables.rename.utility",path:"MW/rtc/plugins/language/matlab/variablerenaming/VariableRenamingModelUtilityProvider",family:"matlab.code.variables.rename"},{id:"matlab.code.variables.rename.view",
path:"MW/rtc/plugins/language/matlab/variablerenaming/view/VariableRenamingViewProvider",family:"matlab.code.variables.rename"},{id:"matlab.code.variables.service",path:"MW/rtc/plugins/language/matlab/variableservice/VariableServiceProvider"},{id:"rtc.backingstore",path:"MW/rtc/datamodel/DefaultBackingStoreProvider"},{id:"matlab.tabcompletion",path:"MW/rtc/plugins/tabcompletion/TabCompletionProvider"},{id:"matlab.tabcompletion.completionhandler",path:"MW/rtc/plugins/tabcompletion/CompletionHandlerProvider"},
{id:"matlab.templateservice",path:"MW/rtc/plugins/templates/TemplateServiceProvider"},{id:"rtc.contextualselection.utility",path:"MW/rtc/plugins/language/matlab/contextualselection/ContextualSelectionUtilityProvider"},{id:"rtc.contextualselection.evaluateselection",path:"MW/rtc/plugins/language/matlab/contextualselection/EvaluateSelectionProvider"},{id:"rtc.helponselection",path:"MW/rtc/plugins/language/matlab/contextualselection/HelpOnSelectionProvider"},{id:"rtc.helpservice",path:"MW/rtc/plugins/language/matlab/contextualselection/HelpServiceProvider"},
{id:"rtc.navigate.find",path:"MW/rtc/plugins/find/FindProvider",family:"rtc.findandreplace"},{id:"rtc.navigate.replace",path:"MW/rtc/plugins/find/ReplaceProvider",family:"rtc.findandreplace"},{id:"rtc.navigate.goto",path:"MW/rtc/plugins/goto/GotoProvider"},{id:"rtc.contextualselection.openselection",path:"MW/rtc/plugins/language/matlab/contextualselection/OpenSelectionProvider"},{id:"rtc.code.sections",path:"MW/rtc/plugins/language/matlab/section/SectionPluginProvider"},{id:"debug.control",path:"MW/rtc/plugins/debug/DebuggerManagerProvider",
family:"debugging"},{id:"debug.lineautoscroll",path:"MW/rtc/plugins/debug/DebugLineAutoScrollPluginProvider",family:"debugging"},{id:"debug.linefocus",path:"MW/rtc/plugins/debug/DebugLineFocusPluginProvider",family:"debugging"},{id:"debug.stack.model",path:"MW/rtc/plugins/debug/DebugStackModelProvider",family:"debugging"},{id:"debug.documentdebugservices",path:"MW/rtc/plugins/debug/DocumentDebugServicesProvider",family:"debugging"},{id:"debug.runtolineservice",path:"MW/rtc/plugins/debug/RunToLineServiceProvider"},
{id:"debug.documentdirtyservice",path:"MW/rtc/plugins/debug/DocumentDirtyDebugServiceProvider"},{id:"debug.contextualbuttons.buttonfactory",path:"MW/rtc/plugins/debug/contextualbuttons/ContextualButtonFactoryProvider",family:"executioncontrols"},{id:"debug.contextualbuttons.runtohere.viewmodel",path:"MW/rtc/plugins/debug/contextualbuttons/runtohere/RunToHereViewModelProvider",family:"executioncontrols"},{id:"debug.contextualbuttons.runtohere.view",path:"MW/rtc/plugins/debug/contextualbuttons/runtohere/RunToHereViewProvider",
family:"executioncontrols"},{id:"debug.contextualbuttons.runtohere.hoverservice",path:"MW/rtc/plugins/debug/contextualbuttons/runtohere/hoverservice/RunToHereCodeHoverServiceProvider"},{id:"debug.contextualbuttons.stepin.functioncallsitefactory",path:"MW/rtc/plugins/debug/contextualbuttons/stepin/FunctionCallsiteFactoryProvider",family:"executioncontrols"},{id:"debug.contextualbuttons.stepin.manager",path:"MW/rtc/plugins/debug/contextualbuttons/stepin/StepInManagerProvider",family:"executioncontrols"},
{id:"debug.contextualbuttons.stepin.view",path:"MW/rtc/plugins/debug/contextualbuttons/stepin/StepInViewProvider",family:"executioncontrols"},{id:"debug.datatips",path:"MW/rtc/plugins/debug/DatatipPluginProvider",subsystem:"hoverabletooltip",family:"debugging"},{id:"rtc.code.codeanalyzer.tooltip",path:"MW/rtc/plugins/language/matlab/codeanalyzer/tooltip/CodeAnalyzerTooltipProvider",subsystem:"hoverabletooltip",family:"codeanalyzer"},{id:"rtc.tooltip",path:"MW/rtc/plugins/tooltip/TooltipPluginContainerProvider"},
{id:"matlab.executable.line",path:"MW/rtc/plugins/breakpoint/matlab/executablelines/ExecutableLineDecoratorProvider",subsystem:"rtc.left.margin"},{id:"rtc.internaldocument",path:"MW/rtc/model/InternalDocumentProvider"},{id:"rtc.linenumberservice",path:"MW/rtc/plugins/service/LineNumberServiceProvider"},{id:"rtc.linenumberpreference",path:"MW/rtc/margin/settings/LineNumberPreferenceProvider"},{id:"rtc.buttonfactory",path:"MW/rtc/plugins/buttonfactoryButtonFactoryProvider"},{id:"rtc.code.codetextservice",
path:"MW/rtc/plugins/code/CodeTextServiceProvider"},{id:"rtc.code.executablelines",path:"MW/rtc/plugins/code/ExecutableLineServiceProvider"},{id:"rtc.nodes.contentconverter",path:"MW/rtc/nodes/contentconverter/ContentConverterPluginProvider"},{id:"rtc.nodes.contentconverter.rootnodeconverter",path:"MW/rtc/nodes/contentconverter/inner/RootNodeContentConverterProvider",subsystem:"rtc.nodes.contentconverter.converter",requiredForSubsystem:!0},{id:"rtc.nodes.contentconverter.linenodeconverter",path:"MW/rtc/nodes/contentconverter/inner/LineNodeContentConverterProvider",
subsystem:"rtc.nodes.contentconverter.converter",requiredForSubsystem:!0},{id:"rtc.nodes.contentconverter.plaintextnodeconverter",path:"MW/rtc/nodes/contentconverter/leaf/PlainTextNodeContentConverterProvider",subsystem:"rtc.nodes.contentconverter.converter",requiredForSubsystem:!0},{id:"rtc.insertionruleservice",path:"MW/rtc/plugins/insertionrules/InsertionRuleServiceProvider"},{id:"rtc.insertionrules.linenode",path:"MW/rtc/nodes/insertionrules/LineNodeInsertionRulesProvider",subsystem:"rtc.insertionrule",
requiredForSubsystem:!0},{id:"rtc.insertionrules.plaintextnode",path:"MW/rtc/nodes/insertionrules/PlainTextNodeInsertionRulesProvider",subsystem:"rtc.insertionrule",requiredForSubsystem:!0},{id:"rtc.insertionrules.opaque",path:"MW/rtc/nodes/insertionrules/OpaqueNodeInsertionRulesProvider",subsystem:"rtc.insertionrule",requiredForSubsystem:!0},{id:"rtc.nodeconversionrulesservice",path:"MW/rtc/plugins/nodeconversionrules/NodeConversionRulesServiceProvider"},{id:"rtc.nodeconversionrules.node",path:"MW/rtc/nodes/nodeconversionrules/NodeConversionRulesProvider",
subsystem:"rtc.nodeconversionrule",requiredForSubsystem:!0},{id:"rtc.nodeconversionrules.innernode",path:"MW/rtc/nodes/nodeconversionrules/InnerNodeConversionRulesProvider",subsystem:"rtc.nodeconversionrule",requiredForSubsystem:!0},{id:"rtc.textnodeservice",path:"MW/rtc/plugins/textnodeservice/TextNodeServiceProvider"},{id:"rtc.actions.document",path:"MW/rtc/model/DocumentActionsProvider",family:"document"},{id:"rtc.document",path:"MW/rtc/model/DocumentProvider",family:"document"},{id:"rtc.actions.cursor",
path:"MW/rtc/cursor/CursorActionsProvider",family:"cursor"},{id:"rtc.cursor",path:"MW/rtc/cursor/CursorProvider",family:"cursor"},{id:"rtc.cursor.view",path:"MW/rtc/cursor/CursorViewProvider"},{id:"rtc.cursorcontroller",path:"MW/rtc/cursor/CursorControllerProvider",family:"cursor"},{id:"rtc.cursor.navigator",path:"MW/rtc/cursor/CursorNavigatorProvider"},{id:"rtc.indentutilities",path:"MW/rtc/plugins/indentutilities/IndentUtilitiesProvider"},{id:"rtc.indent",path:"MW/rtc/plugins/indentation/IndentationProvider"},
{id:"rtc.clipboard",path:"MW/rtc/clipboardservice/ClipboardProvider"},{id:"rtc.cutcopypaste",family:"rtc.cutcopypaste",path:"MW/rtc/plugins/cutcopypaste/CutCopyPasteProvider"},{id:"rtc.code.codingui.actionhandler",path:"MW/rtc/plugins/language/matlab/codingui/CodingUIActionHandlerProvider",family:"rtc.code.codingui"},{id:"rtc.code.codingui.plugin",path:"MW/rtc/plugins/language/matlab/codingui/CodingUIProvider",family:"rtc.code.codingui"},{id:"rtc.code.codingui.contextmanager",path:"MW/rtc/plugins/language/matlab/codingui/CodingUIContextManagerProvider",
family:"rtc.code.codingui"},{id:"rtc.code.codingui.requesthandler",path:"MW/rtc/plugins/language/matlab/codingui/CodingUIRequestHandlerProvider",family:"rtc.code.codingui"},{id:"rtc.code.codingui.eventbus",path:"MW/rtc/plugins/language/matlab/codingui/CodingUIViewEventBusProvider",family:"rtc.code.codingui"},{id:"rtc.code.codingui.preference",path:"MW/rtc/plugins/language/matlab/codingui/preferences/CodingUIPreferenceProvider",family:"rtc.code.codingui"},{id:"rtc.code.codingui.view",path:"MW/rtc/plugins/language/matlab/codingui/view/CodingUIViewProvider",
family:"rtc.code.codingui"},{id:"rtc.cutcopypaste.converter",family:"rtc.cutcopypaste",path:"MW/rtc/plugins/cutcopypaste/ClipboardConverterProvider"},{id:"rtc.cutcopypaste.defaultmimeconverterprovider",family:"rtc.cutcopypaste",path:"MW/rtc/plugins/cutcopypaste/DefaultMIMEConverterProvider"},{id:"rtc.plaintextmimeconverter",path:"MW/rtc/plugins/cutcopypaste/mime/PlainTextMimeConverterProvider",subsystem:"rtc.cutcopypaste.mimeconverters"},{id:"rtc.plaintextmimeincodeconverter",path:"MW/rtc/plugins/cutcopypaste/mime/PlainTextMimeInCodeConverterProvider",
subsystem:"rtc.cutcopypaste.mimeconverters"},{id:"rtc.unicodestringmimeconverter",path:"MW/rtc/plugins/cutcopypaste/mime/UnicodeStringMimeConverterProvider",subsystem:"rtc.cutcopypaste.mimeconverters"},{id:"rtc.cutcopypaste.promptlesstextmimeconverter",family:"rtc.cutcopypaste",path:"MW/rtc/plugins/cutcopypaste/mime/PromptlessTextMimeConverterProvider",subsystem:"rtc.cutcopypaste.mimeconverters"},{id:"rtc.cutcopypaste.htmlmimeconverter",path:"MW/rtc/plugins/htmlmime/HTMLMimeConverterProvider",family:"rtc.cutcopypaste",
subsystem:"rtc.cutcopypaste.mimeconverters"},{id:"rtc.plaintextmimegeneratorprovider",path:"MW/rtc/plugins/cutcopypaste/PlainTextMimeGeneratorProvider"},{id:"rtc.cutcopypaste.htmlgenerator",family:"rtc.cutcopypaste",path:"MW/rtc/plugins/cutcopypaste/HTMLGeneratorProvider"},{id:"rtc.cutcopypaste.plaintextnodeconverter",family:"rtc.cutcopypaste",path:"MW/rtc/plugins/cutcopypaste/PlainTextNodeConverterProvider"},{id:"rtc.cutcopypaste.rtfgenerator",family:"rtc.cutcopypaste",path:"MW/rtc/plugins/cutcopypaste/RTFGeneratorProvider"},
{id:"rtc.cutcopypaste.internalserializationgenerator",family:"rtc.cutcopypaste",path:"MW/rtc/plugins/cutcopypaste/InternalSerializationGeneratorProvider"},{id:"rtc.draganddrop",path:"MW/rtc/plugins/draganddrop/DragAndDropProvider",family:"draganddrop"},{id:"rtc.draganddropnotifier",path:"MW/rtc/plugins/draganddrop/DragAndDropNotifierProvider",family:"draganddrop"},{id:"rtc.alert.controller",path:"MW/rtc/plugins/language/matlab/alert/AlertControllerProvider",family:"rtc.alert"},{id:"rtc.alert.model",
path:"MW/rtc/plugins/language/matlab/alert/AlertModelProvider",family:"rtc.alert"},{id:"rtc.alert.widgetfactory",path:"MW/rtc/plugins/language/matlab/alert/AlertWidgetFactoryProvider",family:"rtc.alert"},{id:"rtc.visual.alert",path:"MW/rtc/plugins/language/matlab/alert/AlertViewProvider",family:"rtc.alert"},{id:"rtc.diagnosticmessage",path:"MW/rtc/plugins/language/matlab/diagnosticmessage/DiagnosticMessageFormatterProvider"},{id:"rtc.code.matlabfiletype",path:"MW/rtc/plugins/language/matlab/filetype/FileTypeProvider"},
{id:"rtc.code.codecontent",path:"MW/rtc/plugins/language/matlab/codecontent/CodeContentProvider"},{id:"rtc.code.autoindent",path:"MW/rtc/plugins/language/matlab/autoindent/AutoIndentProvider"},{id:"rtc.code.autoindentpreference",path:"MW/rtc/plugins/language/matlab/autoindent/preferences/AutoIndentPreferenceProvider"},{id:"rtc.code.clikeautoindent",path:"MW/rtc/plugins/language/clike/clikeautoindent/CLikeAutoIndentProvider"},{id:"rtc.richtext.lists",family:"rtc.richtext.lists",path:"MW/rtc/plugins/lists/ListsProvider"},
{id:"rtc.richtext.lists.htmllisthandler",family:"rtc.richtext.lists",path:"MW/rtc/plugins/lists/HTMLListElementHandlerProvider"},{id:"rtc.richtext.lists.htmlwordstylelist",family:"rtc.richtext.lists",path:"MW/rtc/plugins/lists/HTMLWordStyleListHandlerProvider"},{id:"rtc.richtext.list.coordinateconverter",path:"MW/rtc/plugins/lists/view/ListParagraphCoordinateConverterProvider",family:"rtc.richtext.lists",subsystem:"rtc.view.coordinateconverter.converter"},{id:"rtc.richtext.list.listparagraph.contentconverter",
path:"MW/rtc/plugins/lists/model/ListParagraphContentConverterProvider",family:"rtc.richtext.lists",subsystem:"rtc.nodes.contentconverter.converter"},{id:"rtc.richtext.list.listparagraph.insertionrules",path:"MW/rtc/plugins/lists/ListParagraphInsertionRulesProvider",family:"rtc.richtext.lists",subsystem:"rtc.insertionrule"},{id:"rtc.richtext.list.listparagraph.layouter",path:"MW/rtc/plugins/lists/view/ListParagraphLayouterProvider",family:"rtc.richtext.lists",subsystem:"rtc.view.layoutmanager.layouter"},
{id:"rtc.richtext.list.listitem.contentconverter",path:"MW/rtc/plugins/lists/model/ListItemContentConverterProvider",family:"rtc.richtext.lists",subsystem:"rtc.nodes.contentconverter.converter"},{id:"rtc.richtext.list.listitem.insertionrules",path:"MW/rtc/plugins/lists/ListItemInsertionRulesProvider",family:"rtc.richtext.lists",subsystem:"rtc.insertionrule"},{id:"rtc.richtext.list.listitem.layouter",path:"MW/rtc/plugins/lists/view/ListItemLayouterProvider",family:"rtc.richtext.lists",subsystem:"rtc.view.layoutmanager.layouter"},
{id:"rtc.richtext.codeexample",family:"rtc.richtext.codeexample",path:"MW/rtc/plugins/codeexample/CodeExampleProvider"},{id:"rtc.richtext.codeexample.block.contentconverter",path:"MW/rtc/plugins/codeexample/model/CodeExampleBlockNodeContentConverterProvider",family:"rtc.richtext.codeexample",subsystem:"rtc.nodes.contentconverter.converter"},{id:"rtc.richtext.codeexample.block.layouter",path:"MW/rtc/plugins/codeexample/view/CodeExampleBlockLayouterProvider",family:"rtc.richtext.codeexample",subsystem:"rtc.view.layoutmanager.layouter"},
{id:"rtc.richtext.codeexample.coordinateconverter",path:"MW/rtc/plugins/codeexample/view/CodeExampleBlockCoordinateConverterProvider",family:"rtc.richtext.codeexample",subsystem:"rtc.view.coordinateconverter.converter"},{id:"rtc.richtext.codeexample.block.insertionrules",path:"MW/rtc/plugins/codeexample/CodeExampleBlockInsertionRulesProvider",family:"rtc.richtext.codeexample",subsystem:"rtc.insertionrule"},{id:"rtc.richtext.codeexample.line.contentconverter",path:"MW/rtc/plugins/codeexample/model/CodeExampleLineNodeContentConverterProvider",
family:"rtc.richtext.codeexample",subsystem:"rtc.nodes.contentconverter.converter"},{id:"rtc.richtext.codeexample.line.layouter",path:"MW/rtc/plugins/codeexample/view/CodeExampleLineLayouterProvider",family:"rtc.richtext.codeexample",subsystem:"rtc.view.layoutmanager.layouter"},{id:"rtc.richtext.codeexample.line.insertionrules",path:"MW/rtc/plugins/codeexample/CodeExampleLineInsertionRulesProvider",family:"rtc.richtext.codeexample",subsystem:"rtc.insertionrule"},{id:"rtc.richtext.codeexample.matlab.syntaxhighlighter",
path:"MW/rtc/plugins/codeexample/syntaxhighlighter/matlab/SyntaxHighlighterProvider",family:"rtc.richtext.codeexample"},{id:"rtc.serializers.containers.codeexample.blockcontainer",path:"MW/rtc/model/io/serializers/providers/containers/CodeExampleBlockContainerSerializerProvider",subsystem:"rtc.serializer",family:"rtc.richtext.codeexample"},{id:"rtc.serializers.containers.codeexample.linecontainer",path:"MW/rtc/model/io/serializers/providers/containers/CodeExampleLineContainerSerializerProvider",subsystem:"rtc.serializer",
family:"rtc.richtext.codeexample"},{id:"rtc.richtext.codeexample.block.keyhandler",path:"MW/rtc/plugins/codeexample/CodeExampleBlockKeyHandlerProvider",family:"rtc.richtext.codeexample"},{id:"rtc.codeexamplemimeincodeconverter",path:"MW/rtc/plugins/cutcopypaste/mime/CodeExampleMimeInCodeConverterProvider",subsystem:"rtc.cutcopypaste.mimeconverters",family:"rtc.richtext.codeexample"},{id:"rtc.codemimeincodeexampleconverter",path:"MW/rtc/plugins/cutcopypaste/mime/CodeMimeInCodeExampleConverterProvider",
subsystem:"rtc.cutcopypaste.mimeconverters",family:"rtc.richtext.codeexample"},{id:"rtc.richtext.hyperlink",family:"rtc.richtext.hyperlink",path:"MW/rtc/plugins/hyperlink/HyperlinkProvider"},{id:"rtc.richtext.hyperlinkeditor",family:"rtc.richtext.hyperlink",path:"MW/rtc/plugins/hyperlink/HyperlinkEditorProvider"},{id:"rtc.richtext.hyperlink.htmlhyperlinkhandler",family:"rtc.richtext.hyperlink",path:"MW/rtc/plugins/hyperlink/HTMLHyperlinkElementHandlerProvider"},{id:"rtc.richtext.hyperlink.mimeconverter",
family:"rtc.richtext.hyperlink",path:"MW/rtc/plugins/hyperlink/HyperlinkMIMEConverterProvider"},{id:"rtc.richtext.hyperlink.tooltip",family:"rtc.richtext.hyperlink",path:"MW/rtc/plugins/hyperlink/HyperlinkTooltipProvider"},{id:"rtc.richtext.hyperlink.coordinateconverter",path:"MW/rtc/plugins/hyperlink/view/HyperlinkCoordinateConverterProvider",family:"rtc.richtext.hyperlink",subsystem:"rtc.view.coordinateconverter.converter"},{id:"rtc.richtext.hyperlink.contentconverter",path:"MW/rtc/plugins/hyperlink/model/HyperlinkNodeContentConverterProvider",
family:"rtc.richtext.hyperlink",subsystem:"rtc.nodes.contentconverter.converter"},{id:"rtc.richtext.hyperlink.insertionrules",path:"MW/rtc/plugins/hyperlink/HyperlinkInsertionRulesProvider",family:"rtc.richtext.hyperlink",subsystem:"rtc.insertionrule"},{id:"rtc.richtext.hyperlink.layouter",path:"MW/rtc/plugins/hyperlink/view/HyperlinkLayouterProvider",family:"rtc.richtext.hyperlink",subsystem:"rtc.view.layoutmanager.layouter"},{id:"rtc.richtext.equationcontroller",family:"rtc.richtext.equations",
path:"MW/rtc/plugins/equations/equationcontroller/EquationControllerProvider"},{id:"rtc.richtext.equationeditor",family:"rtc.richtext.equations",path:"MW/rtc/plugins/equations/equationeditor/EquationEditorProvider"},{id:"rtc.richtext.mathmlconverter",family:"rtc.richtext.equations",path:"MW/rtc/plugins/equations/equationeditor/MathMLMimeConverterProvider"},{id:"rtc.richtext.latexeditor",family:"rtc.richtext.equations",path:"MW/rtc/plugins/equations/latexeditor/LaTeXEditorProvider"},{id:"rtc.richtext.equations.contentconverter",
path:"MW/rtc/plugins/equations/equationcontroller/nodes/EquationNodeContentConverterProvider",family:"rtc.richtext.equations",subsystem:"rtc.nodes.contentconverter.converter"},{id:"rtc.richtext.equations.coordinateconverter",path:"MW/rtc/plugins/equations/equationcontroller/view/EquationCoordinateConverterProvider",family:"rtc.richtext.equations",subsystem:"rtc.view.coordinateconverter.converter"},{id:"rtc.richtext.equations.layouter",path:"MW/rtc/plugins/equations/equationcontroller/view/EquationLayouterProvider",
family:"rtc.richtext.equations",subsystem:"rtc.view.layoutmanager.layouter"},{id:"rtc.richtext",path:"MW/rtc/plugins/richtext/RichTextProvider",family:"rtc.richtext"},{id:"rtc.richtext.toggleshortcuts",path:"MW/rtc/plugins/richtext/CodeTextToggleShortcutsProvider",family:"rtc.richtext"},{id:"rtc.richtext.matlabjsonmimeconverter",path:"MW/rtc/plugins/richtext/MatlabJSONMimeConverterProvider",family:"rtc.richtext",subsystem:"rtc.cutcopypaste.mimeconverters"},{id:"rtc.richtext.htmlhandler",path:"MW/rtc/plugins/richtext/HTMLRichTextElementHandlerProvider",
family:"rtc.richtext"},{id:"rtc.richtext.coordinateconverter",path:"MW/rtc/plugins/richtext/view/RichTextCoordinateConverterProvider",family:"rtc.richtext",subsystem:"rtc.view.coordinateconverter.converter"},{id:"rtc.richtext.rangeconverter",path:"MW/rtc/plugins/richtext/view/RichTextRangeConverterProvider",family:"rtc.richtext",subsystem:"rtc.view.rangeconverter.converter"},{id:"rtc.richtext.richtextparagraph.contentconverter",path:"MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNodeContentConverterProvider",
family:"rtc.richtext",subsystem:"rtc.nodes.contentconverter.converter"},{id:"rtc.richtext.richtextparagraph.insertionrules",path:"MW/rtc/plugins/richtext/RichTextParagraphInsertionRulesProvider",family:"rtc.richtext",subsystem:"rtc.insertionrule"},{id:"rtc.richtext.richtextparagraph.layouter",path:"MW/rtc/plugins/richtext/view/RichTextParagraphLayouterProvider",family:"rtc.richtext",subsystem:"rtc.view.layoutmanager.layouter"},{id:"rtc.richtext.heading.contentconverter",path:"MW/rtc/plugins/richtext/nodes/inner/HeadingNodeContentConverterProvider",
family:"rtc.richtext",subsystem:"rtc.nodes.contentconverter.converter"},{id:"rtc.richtext.heading.layouter",path:"MW/rtc/plugins/richtext/view/HeadingLayouterProvider",family:"rtc.richtext",subsystem:"rtc.view.layoutmanager.layouter"},{id:"rtc.richtext.richtextnode.contentconverter",path:"MW/rtc/plugins/richtext/nodes/leaf/RichTextNodeContentConverterProvider",family:"rtc.richtext",subsystem:"rtc.nodes.contentconverter.converter"},{id:"rtc.richtext.richtextnode.insertionrules",path:"MW/rtc/plugins/richtext/RichTextNodeInsertionRulesProvider",
family:"rtc.richtext",subsystem:"rtc.insertionrule"},{id:"rtc.richtext.richtextnode.layouter",path:"MW/rtc/plugins/richtext/view/RichTextLayouterProvider",family:"rtc.richtext",subsystem:"rtc.view.layoutmanager.layouter"},{id:"rtc.code.codingui.codeprovider",path:"MW/rtc/plugins/service/CodingUIBackendCodeProviderProvider"},{id:"rtc.code.codingui.backendservice",path:"MW/rtc/plugins/service/CodingUIBackendServiceProvider"},{id:"rtc.focusservice",path:"MW/rtc/plugins/service/FocusServiceProvider"},
{id:"rtc.outputhandlerservice",path:"MW/rtc/plugins/service/OutputHandlerServiceProvider"},{id:"rtc.tooltipservice",path:"MW/rtc/plugins/service/TooltipServiceProvider"},{id:"toolstrip.hover",path:"MW/rtc/plugins/service/hover/JavaToolstripHoverServiceProvider"},{id:"rtc.settings.service",path:"MW/rtc/plugins/settings/RtcSettingServiceProvider"},{id:"rtc.richtext.images.htmlhandler",path:"MW/rtc/plugins/images/HTMLImageElementHandlerProvider",family:"rtc.richtext.images"},{id:"rtc.richtext.images",
path:"MW/rtc/plugins/images/ImagesProvider",family:"rtc.richtext.images"},{id:"rtc.richtext.images.imagemimeconverter",path:"MW/rtc/plugins/images/ImageMimeConverterProvider",family:"rtc.richtext.images",subsystem:"rtc.cutcopypaste.mimeconverters"},{id:"rtc.richtext.images.imagenodeconverter",family:"rtc.richtext.images",path:"MW/rtc/plugins/images/ImageNodeConverterProvider"},{id:"rtc.richtext.images.contentconverter",path:"MW/rtc/plugins/images/model/ImageNodeContentConverterProvider",family:"rtc.richtext.images",
subsystem:"rtc.nodes.contentconverter.converter"},{id:"rtc.richtext.images.coordinateconverter",path:"MW/rtc/plugins/images/view/ImageCoordinateConverterProvider",family:"rtc.richtext.images",subsystem:"rtc.view.coordinateconverter.converter"},{id:"rtc.richtext.images.layouter",path:"MW/rtc/plugins/images/view/ImageLayouterProvider",family:"rtc.richtext.images",subsystem:"rtc.view.layoutmanager.layouter"},{id:"rtc.richtext.insertimage",path:"MW/rtc/plugins/images/InsertImageProvider"},{id:"rtc.richtext.resizeimage",
path:"MW/rtc/plugins/images/InlineResizeImageProvider"},{id:"rtc.richtext.resizer",path:"MW/rtc/plugins/resizer/ResizerProvider"},{id:"rtc.export.html",path:"MW/rtc/plugins/export/html/HTMLExporterProvider",family:"rtc.richtext"},{id:"rtc.export.html.linenode",path:"MW/rtc/plugins/export/html/LineNode2HTMLProvider",subsystem:"rtc.export.htmlwriters",family:"embeddedoutputs"},{id:"rtc.export.html.paragraphnode",path:"MW/rtc/plugins/richtext/export/RichTextParagraphNode2HTMLProvider",subsystem:"rtc.export.htmlwriters",
family:"rtc.richtext"},{id:"rtc.export.html.headingnode",path:"MW/rtc/plugins/richtext/export/HeadingNode2HTMLProvider",subsystem:"rtc.export.htmlwriters",family:"rtc.richtext"},{id:"rtc.export.html.plaintextnode",path:"MW/rtc/plugins/export/html/PlainTextNode2HTMLProvider",subsystem:"rtc.export.htmlwriters",family:"rtc.richtext"},{id:"rtc.export.html.richtextnode",path:"MW/rtc/plugins/richtext/export/RichTextNode2HTMLProvider",subsystem:"rtc.export.htmlwriters",family:"rtc.richtext"},{id:"rtc.export.html.equation",
path:"MW/rtc/plugins/equations/export/Equation2HTMLProvider",subsystem:"rtc.export.htmlwriters",family:"rtc.richtext.equations"},{id:"rtc.export.html.image",path:"MW/rtc/plugins/images/export/Image2HTMLProvider",subsystem:"rtc.export.htmlwriters",family:"rtc.richtext.images"},{id:"rtc.export.html.hyperlink",path:"MW/rtc/plugins/hyperlink/export/Hyperlink2HTMLProvider",subsystem:"rtc.export.htmlwriters",family:"rtc.richtext.hyperlink"},{id:"rtc.export.html.codeexampleblock",path:"MW/rtc/plugins/codeexample/export/CodeExampleBlock2HTMLProvider",
subsystem:"rtc.export.htmlwriters",family:"rtc.richtext"},{id:"rtc.export.html.tableofcontentscontainer",path:"MW/rtc/plugins/tableofcontents/export/TableOfContentsContainer2HTMLProvider",subsystem:"rtc.export.htmlwriters",family:"rtc.richtext.tableofcontents"},{id:"rtc.export.html.listparagraph",path:"MW/rtc/plugins/lists/export/ListParagraph2HTMLProvider",subsystem:"rtc.export.htmlwriters",family:"rtc.richtext.lists"},{id:"rtc.export.html.listitem",path:"MW/rtc/plugins/lists/export/ListItem2HTMLProvider",
subsystem:"rtc.export.htmlwriters",family:"rtc.richtext.lists"},{id:"rtc.export.html.livecontrol",path:"MW/rtc/plugins/language/matlab/codingui/livecontrols/export/LiveControl2HTMLProvider",subsystem:"rtc.export.htmlwriters",family:"rtc.livecontrols"},{id:"rtc.export.output.html.outputparagraph",path:"MW/rtc/plugins/export/html/OutputParagraph2HTMLProvider",subsystem:"rtc.export.htmloutputwriters",family:"embeddedoutputs"},{id:"rtc.export.output.html.basetext",path:"MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseText2HTMLProvider",
subsystem:"rtc.export.htmloutputwriters",family:"embeddedoutputs"},{id:"rtc.export.output.html.figure",path:"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/export/Figure2HTMLProvider",subsystem:"rtc.export.htmloutputwriters",family:"embeddedoutputs"},{id:"rtc.export.output.html.matrix",path:"MW/rtc/plugins/embeddedoutputs/outputhandlers/matrix/export/MatrixElement2HTMLProvider",subsystem:"rtc.export.htmloutputwriters",family:"embeddedoutputs"},{id:"rtc.export.output.html.symbolic",path:"MW/rtc/plugins/embeddedoutputs/outputhandlers/symbolic/export/Symbolic2HTMLProvider",
subsystem:"rtc.export.htmloutputwriters",family:"embeddedoutputs"},{id:"rtc.export.output.html.variableelement",path:"MW/rtc/plugins/embeddedoutputs/outputhandlers/variable/export/VariableElement2HTMLProvider",subsystem:"rtc.export.htmloutputwriters",family:"embeddedoutputs"},{id:"rtc.export.pdf",path:"MW/rtc/plugins/saveaspdf/SaveAsPDFProvider"},{id:"rtc.richtext.export.pdf.basedocumentwriter",path:"MW/rtc/plugins/saveaspdf/document/BaseDocumentWriterProvider",subsystem:"rtc.pdfwriters",family:"rtc.richtext"},
{id:"rtc.richtext.export.pdf.equationwriter",path:"MW/rtc/plugins/saveaspdf/document/EquationWriterProvider",subsystem:"rtc.pdfwriters",family:"rtc.richtext.equations"},{id:"rtc.richtext.export.pdf.hyperlinkwriter",path:"MW/rtc/plugins/saveaspdf/document/HyperlinkWriterProvider",subsystem:"rtc.pdfwriters",family:"rtc.richtext.hyperlink"},{id:"rtc.richtext.export.pdf.imagewriter",path:"MW/rtc/plugins/saveaspdf/document/ImageWriterProvider",subsystem:"rtc.pdfwriters",family:"rtc.richtext.images"},{id:"rtc.richtext.export.pdf.livecontrolwriter",
path:"MW/rtc/plugins/saveaspdf/document/LiveControlWriterProvider",subsystem:"rtc.pdfwriters",family:"rtc.livecontrols"},{id:"rtc.richtext.export.pdf.listwriter",path:"MW/rtc/plugins/saveaspdf/document/ListWriterProvider",subsystem:"rtc.pdfwriters",family:"rtc.richtext.lists"},{id:"rtc.richtext.export.pdf.paragraphwriter",path:"MW/rtc/plugins/saveaspdf/document/ParagraphWriterProvider",subsystem:"rtc.pdfwriters",family:"rtc.richtext"},{id:"rtc.richtext.export.pdf.tableofcontentswriter",path:"MW/rtc/plugins/saveaspdf/document/TableOfContentWriterProvider",
subsystem:"rtc.pdfwriters",family:"rtc.richtext.tableofcontents"},{id:"rtc.richtext.export.pdf.figurewriter",path:"MW/rtc/plugins/saveaspdf/outputs/FigureWriterProvider",subsystem:"rtc.pdfwriters",family:"embeddedoutputs"},{id:"rtc.richtext.export.pdf.matrixwriter",path:"MW/rtc/plugins/saveaspdf/outputs/MatrixWriterProvider",subsystem:"rtc.pdfwriters",family:"embeddedoutputs"},{id:"rtc.richtext.export.pdf.tablewriter",path:"MW/rtc/plugins/saveaspdf/outputs/TableWriterProvider",subsystem:"rtc.pdfwriters",
family:"embeddedoutputs"},{id:"rtc.richtext.export.pdf.outputwriter",path:"MW/rtc/plugins/saveaspdf/outputs/OutputWriterProvider",subsystem:"rtc.pdfwriters",family:"embeddedoutputs"},{id:"rtc.richtext.export.pdf.symequationwriter",path:"MW/rtc/plugins/saveaspdf/outputs/SymEquationWriterProvider",subsystem:"rtc.pdfwriters",family:"embeddedoutputs"},{id:"rtc.richtext.export.pdf.textwriter",path:"MW/rtc/plugins/saveaspdf/outputs/TextWriterProvider",subsystem:"rtc.pdfwriters",family:"embeddedoutputs"},
{id:"rtc.richtext.export.pdf.variablewriter",path:"MW/rtc/plugins/saveaspdf/outputs/VariableWriterProvider",subsystem:"rtc.pdfwriters",family:"embeddedoutputs"},{id:"rtc.shadowtextservice",path:"MW/rtc/plugins/shadowtext/ShadowTextServiceProvider"},{id:"rtc.smartformatting.formatter.automaticcoding.autowrapcomment",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/AutoWrapCommentSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autocoding"},
{id:"rtc.smartformatting.formatter.automaticcoding.splitcomment",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SplitCommentSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autocoding"},{id:"rtc.smartformatting.formatter.automaticcoding.roundpareninsert",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/RoundParenInsertSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autocoding"},
{id:"rtc.smartformatting.formatter.automaticcoding.roundparendelete",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/RoundParenDeleteSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autocoding"},{id:"rtc.smartformatting.formatter.automaticcoding.squarepareninsert",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SquareParenInsertSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autocoding"},
{id:"rtc.smartformatting.formatter.automaticcoding.squareparendelete",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SquareParenDeleteSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autocoding"},{id:"rtc.smartformatting.formatter.automaticcoding.curlypareninsert",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/CurlyParenInsertSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autocoding"},
{id:"rtc.smartformatting.formatter.automaticcoding.curlyparendelete",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/CurlyParenDeleteSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autocoding"},{id:"rtc.smartformatting.formatter.automaticcoding.singlequoteinsert",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SingleQuoteInsertSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autocoding"},
{id:"rtc.smartformatting.formatter.automaticcoding.singlequotedelete",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SingleQuoteDeleteSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autocoding"},{id:"rtc.smartformatting.formatter.automaticcoding.doublequoteinsert",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/DoubleQuoteInsertSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autocoding"},
{id:"rtc.smartformatting.formatter.automaticcoding.doublequotedelete",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/DoubleQuoteDeleteSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autocoding"},{id:"rtc.smartformatting.formatter.automaticcoding.roundparenoverwrite",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/RoundParenOverwritingSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autocoding"},
{id:"rtc.smartformatting.formatter.automaticcoding.curlyparenoverwrite",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/CurlyParenOverwritingSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autocoding"},{id:"rtc.smartformatting.formatter.automaticcoding.squareparenoverwrite",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SquareParenOverwritingSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autocoding"},
{id:"rtc.smartformatting.formatter.automaticcoding.singlequoteoverwrite",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SingleQuoteOverwritingSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autocoding"},{id:"rtc.smartformatting.formatter.automaticcoding.doublequoteoverwrite",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/DoubleQuoteOverwritingSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autocoding"},
{id:"rtc.smartformatting.formatter.automaticcoding.splitdoublequotestring",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SplitDoubleQuoteStringSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autocoding"},{id:"rtc.smartformatting.formatter.automaticcoding.splitsinglequotestring",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SplitSingleQuoteStringSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autocoding"},
{id:"rtc.smartformatting.formatter.automaticcoding.endclassdefblock",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndClassDefBlockSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autocoding"},{id:"rtc.smartformatting.formatter.automaticcoding.endenumerationblock",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndEnumerationBlockSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autocoding"},
{id:"rtc.smartformatting.formatter.automaticcoding.endeventsblock",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndEventsBlockSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autocoding"},{id:"rtc.smartformatting.formatter.automaticcoding.endforblock",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndForBlockSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autocoding"},{id:"rtc.smartformatting.formatter.automaticcoding.endfunctionblock",
path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndFunctionBlockSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autocoding"},{id:"rtc.smartformatting.formatter.automaticcoding.endifblock",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndIfBlockSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autocoding"},{id:"rtc.smartformatting.formatter.automaticcoding.endmethodsblock",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndMethodsBlockSmartFormatterProvider",
subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autocoding"},{id:"rtc.smartformatting.formatter.automaticcoding.endparforblock",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndParforBlockSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autocoding"},{id:"rtc.smartformatting.formatter.automaticcoding.endpropertiesblock",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndPropertiesBlockSmartFormatterProvider",
subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autocoding"},{id:"rtc.smartformatting.formatter.automaticcoding.endspmdblock",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndSpmdBlockSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autocoding"},{id:"rtc.smartformatting.formatter.automaticcoding.endswitchblock",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndSwitchBlockSmartFormatterProvider",subsystem:"rtc.smartformatter",
family:"rtc.smartformatting.formatters.autocoding"},{id:"rtc.smartformatting.formatter.automaticcoding.endtryblock",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndTryBlockSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autocoding"},{id:"rtc.smartformatting.formatter.automaticcoding.endwhileblock",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndWhileBlockSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autocoding"},
{id:"rtc.smartformatting.formatter.markdown.bulletedlist",path:"MW/rtc/plugins/smartformatting/formatter/markdown/paragraph/MarkdownBulletedListSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autoformatting"},{id:"rtc.smartformatting.formatter.markdown.heading",path:"MW/rtc/plugins/smartformatting/formatter/markdown/paragraph/MarkdownHeadingSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autoformatting"},{id:"rtc.smartformatting.formatter.markdown.numberedlist",
path:"MW/rtc/plugins/smartformatting/formatter/markdown/paragraph/MarkdownNumberedListSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autoformatting"},{id:"rtc.smartformatting.formatter.markdown.title",path:"MW/rtc/plugins/smartformatting/formatter/markdown/paragraph/MarkdownTitleSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autoformatting"},{id:"rtc.smartformatting.formatter.markdown.bold2",path:"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownBold2SmartFormatterProvider",
subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autoformatting"},{id:"rtc.smartformatting.formatter.markdown.bold",path:"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownBoldSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autoformatting"},{id:"rtc.smartformatting.formatter.markdown.hyperlink.labelurl",path:"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownHyperlinkLabelUrlSmartFormatterProvider",subsystem:"rtc.smartformatter",
family:"rtc.smartformatting.formatters.autoformatting"},{id:"rtc.smartformatting.formatter.markdown.hyperlink.urltag",path:"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownHyperlinkUrlTagSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autoformatting"},{id:"rtc.smartformatting.formatter.markdown.italic2",path:"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownItalic2SmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autoformatting"},
{id:"rtc.smartformatting.formatter.markdown.italicbold2",path:"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownItalicBold2SmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autoformatting"},{id:"rtc.smartformatting.formatter.markdown.italicbold",path:"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownItalicBoldSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autoformatting"},{id:"rtc.smartformatting.formatter.markdown.italic",
path:"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownItalicSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autoformatting"},{id:"rtc.smartformatting.formatter.markdown.monospace",path:"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownMonospaceSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autoformatting"},{id:"rtc.smartformatting.formatter.matlab.monospace",path:"MW/rtc/plugins/smartformatting/formatter/matlab/MatlabMonospaceSmartFormatterProvider",
subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autoformatting"},{id:"rtc.smartformatting.formatter.matlab.sectionbreak.heading",path:"MW/rtc/plugins/smartformatting/formatter/matlab/MatlabSectionBreakHeadingSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autoformatting"},{id:"rtc.smartformatting.formatter.matlab.sectionbreak.separator",path:"MW/rtc/plugins/smartformatting/formatter/matlab/MatlabSectionBreakSeparatorSmartFormatterProvider",
subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autoformatting"},{id:"rtc.smartformatting.formatter.symbol.trademarkcopyright",path:"MW/rtc/plugins/smartformatting/formatter/symbol/SymbolTrademarkCopyrightSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autoformatting"},{id:"rtc.smartformatting.formatter.hyperlink",path:"MW/rtc/plugins/smartformatting/formatter/HyperlinkSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autoformatting"},
{id:"rtc.smartformatting.formatter.markup.equation",path:"MW/rtc/plugins/smartformatting/formatter/MarkupEquationSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"rtc.smartformatting.formatters.autoformatting"},{id:"rtc.smartformatting.backspaceundohandler",path:"MW/rtc/plugins/smartformatting/BackspaceUndoHandlerProvider"},{id:"rtc.smartformatting.controller",path:"MW/rtc/plugins/smartformatting/SmartFormattingProvider"},{id:"rtc.smartformatting.settings.autocoding",path:"MW/rtc/plugins/smartformatting/settings/AutoCodingSettingManagerProvider",
family:"rtc.smartformatting.formatters.autocoding"},{id:"rtc.smartformatting.settings.autoformatting",path:"MW/rtc/plugins/smartformatting/settings/AutoFormattingSettingManagerProvider",family:"rtc.smartformatting.formatters.autoformatting"},{id:"rtc.smarttab",path:"MW/rtc/plugins/smarttab/SmartTabProvider"},{id:"rtc.code.codechange",path:"MW/rtc/plugins/language/matlab/code/CodeChangeServiceProvider"},{id:"rtc.serializers.containers.codecontainer",path:"MW/rtc/model/io/serializers/providers/containers/CodeContainerSerializerProvider",
subsystem:"rtc.serializer",family:"rtc.serializers.serialize"},{id:"rtc.serializers.containers.container",path:"MW/rtc/model/io/serializers/providers/containers/ContainerSerializerProvider"},{id:"rtc.serializers.containers.headingcontainer",path:"MW/rtc/model/io/serializers/providers/containers/HeadingContainerSerializerProvider",subsystem:"rtc.serializer",family:"rtc.richtext"},{id:"rtc.serializers.containers.hyperlinkcontainer",path:"MW/rtc/model/io/serializers/providers/containers/HyperlinkContainerSerializerProvider",
subsystem:"rtc.serializer",family:"rtc.richtext.hyperlink"},{id:"rtc.serializers.containers.listcontainer",path:"MW/rtc/model/io/serializers/providers/containers/ListContainerSerializerProvider",subsystem:"rtc.serializer",family:"rtc.richtext.lists"},{id:"rtc.serializers.containers.listitemcontainer",path:"MW/rtc/model/io/serializers/providers/containers/ListItemContainerSerializerProvider",subsystem:"rtc.serializer",family:"rtc.richtext.lists"},{id:"rtc.serializers.containers.liveapplinecontainer",
path:"MW/rtc/model/io/serializers/providers/containers/LiveAppLineContainerSerializerProvider",subsystem:"rtc.serializer",family:"rtc.liveapps"},{id:"rtc.serializers.containers.richtextcontainer",path:"MW/rtc/model/io/serializers/providers/containers/RichTextContainerSerializerProvider",subsystem:"rtc.serializer",family:"rtc.richtext"},{id:"rtc.serializers.containers.sectionbreakcontainer",path:"MW/rtc/model/io/serializers/providers/containers/SectionBreakContainerSerializerProvider",subsystem:"rtc.serializer",
family:"rtc.sectionbreak"},{id:"rtc.serializers.nodes.equation",path:"MW/rtc/model/io/serializers/providers/nodes/EquationSerializerProvider",subsystem:"rtc.serializer",family:"rtc.richtext.equations"},{id:"rtc.serializers.nodes.image",path:"MW/rtc/model/io/serializers/providers/nodes/ImageSerializerProvider",subsystem:"rtc.serializer",family:"rtc.richtext.images"},{id:"rtc.serializers.nodes.livecontrol",path:"MW/rtc/model/io/serializers/providers/nodes/LiveControlSerializerProvider",subsystem:"rtc.serializer",
family:"rtc.livecontrols"},{id:"rtc.serializers.nodes.plaintext",path:"MW/rtc/model/io/serializers/providers/nodes/PlainTextSerializerProvider",subsystem:"rtc.serializer",family:"rtc.serializers.serialize"},{id:"rtc.serializers.nodes.richtext",path:"MW/rtc/model/io/serializers/providers/nodes/RichTextSerializerProvider",subsystem:"rtc.serializer",family:"rtc.richtext"},{id:"rtc.serializers",path:"MW/rtc/model/io/SerializersProvider"},{id:"rtc.view.decoration",path:"MW/rtc/view/decoration/DecorationProvider"},
{id:"rtc.view.decoration.margindecorator",path:"MW/rtc/view/decoration/LayerDecoratorMarginDecoratorProvider"},{id:"rtc.view.decoration.viewmodel",path:"MW/rtc/view/decoration/viewmodel/DecorationViewModelProvider"},{id:"rtc.view.decoration.layerviewmodel",path:"MW/rtc/view/decoration/viewmodel/DecorationLayerViewModelProvider"},{id:"rtc.view.decoration.descriptorsstore",path:"MW/rtc/view/decoration/viewmodel/DecorationDescriptorsStoreProvider"},{id:"rtc.view.hidden.hiddennodemodel",path:"MW/rtc/view/hidden/HiddenNodeModelProvider"},
{id:"rtc.view.hidden.hiddennodeservice",path:"MW/rtc/view/hidden/HiddenNodeServiceProvider"},{id:"rtc.view.layoutmanager",path:"MW/rtc/plugins/view/layoutmanager/LayoutManagerProvider"},{id:"rtc.view.layoutmanager.paragraphhostingmodel",path:"MW/rtc/plugins/view/layoutmanager/LayoutParagraphHostingModelProvider"},{id:"rtc.view.layoutmanager.rules.default",path:"MW/rtc/plugins/view/layoutmanager/rules/DefaultRuleProvider",subsystem:"rtc.view.layoutmanager.rule",family:"layoutrules"},{id:"rtc.view.layoutmanager.rules.containmentgrouping",
path:"MW/rtc/plugins/view/layoutmanager/rules/ContainmentGroupingRuleProvider",subsystem:"rtc.view.layoutmanager.rule",family:"layoutrules"},{id:"rtc.view.layoutmanager.rules.contiguousgrouping",path:"MW/rtc/plugins/view/layoutmanager/rules/ContiguousGroupingRuleProvider",subsystem:"rtc.view.layoutmanager.rule",family:"layoutrules"},{id:"rtc.view.layoutmanager.rules.basegrouping",path:"MW/rtc/plugins/view/layoutmanager/rules/BaseGroupingRuleProvider",subsystem:"rtc.view.layoutmanager.rule",family:"layoutrules"},
{id:"rtc.view.layoutmanager.rules.wrappable",path:"MW/rtc/plugins/view/layoutmanager/rules/WrappableRuleProvider",subsystem:"rtc.view.layoutmanager.rule",family:"layoutrules"},{id:"rtc.view.layoutmanager.rules.output",path:"MW/rtc/plugins/view/layoutmanager/rules/OutputRuleProvider",subsystem:"rtc.view.layoutmanager.rule",family:"layoutrules"},{id:"rtc.view.layoutmanager.rules.paragraphhosting",path:"MW/rtc/plugins/view/layoutmanager/rules/ParagraphHostingRuleProvider",subsystem:"rtc.view.layoutmanager.rule",
family:"layoutrules"},{id:"rtc.view.layoutmanager.rules.expandable",path:"MW/rtc/plugins/view/layoutmanager/rules/ExpandableRuleProvider",subsystem:"rtc.view.layoutmanager.rule",family:"layoutrules"},{id:"rtc.view.layoutmanager.layouters.line",path:"MW/rtc/plugins/view/layoutmanager/layouters/LineLayouterProvider",subsystem:"rtc.view.layoutmanager.layouter",requiredForSubsystem:!0},{id:"rtc.view.layoutmanager.layouters.plaintext",path:"MW/rtc/plugins/view/layoutmanager/layouters/PlainTextLayouterProvider",
subsystem:"rtc.view.layoutmanager.layouter",requiredForSubsystem:!0},{id:"rtc.view.layoutmanager.layouters.root",path:"MW/rtc/plugins/view/layoutmanager/layouters/RootLayouterProvider",subsystem:"rtc.view.layoutmanager.layouter",requiredForSubsystem:!0},{id:"rtc.view.smoothscrolling",path:"MW/rtc/plugins/smoothscrolling/SmoothScrollingPluginProvider"},{id:"rtc.view.testhelper.performance",path:"MW/rtc/view/PerformanceTestHelper",family:"testerhelpers"},{id:"rtc.view.testhelper.rtcperformance",path:"MW/rtc/view/RTCPerformanceTestHelper",
family:"testerhelpers"},{id:"rtc.view.testhelper.lines",path:"MW/rtc/view/ViewLinesTestHelper",family:"testerhelpers"},{id:"rtc.view.testhelper.sections",path:"MW/rtc/view/ViewSectionsTestHelper",family:"testerhelpers"},{id:"rtc.view.viewportopenedservice",path:"MW/rtc/view/ViewportOpenedServiceProvider"},{id:"rtc.view",path:"MW/rtc/view/ViewProvider"},{id:"rtc.view.viewmodel",path:"MW/rtc/view/ViewModelProvider"},{id:"rtc.view.visibility",path:"MW/rtc/view/VisibilityNotifierProvider"},{id:"rtc.preferences.service",
path:"MW/rtc/preferences/PreferencesServiceProvider"},{id:"margin.linenumberdecorator",path:"MW/rtc/margin/TraditionalLineNumberDecoratorProvider"},{id:"rtc.divcaret",path:"MW/rtc/plugins/view/divcaret/DivCaretPluginProvider"},{id:"rtc.divselection",path:"MW/rtc/plugins/view/divselection/DivSelectionPluginProvider"},{id:"rtc.code.comment",path:"MW/rtc/plugins/language/matlab/commentCode/CommentCodeProvider"},{id:"rtc.hyperlinkservice",path:"MW/rtc/hyperlinkservice/HyperlinkServiceProvider"},{id:"rtc.internalhyperlinkservice",
path:"MW/rtc/plugins/internalhyperlinkservice/InternalHyperlinkServiceProvider"},{id:"rtc.richtext.anchor",path:"MW/rtc/plugins/internalhyperlinkservice/AnchorProvider"},{id:"rtc.richtext.tableofcontents",family:"rtc.richtext.tableofcontents",path:"MW/rtc/plugins/tableofcontents/TableOfContentsProvider"},{id:"rtc.richtext.tableofcontents.layouter",path:"MW/rtc/plugins/tableofcontents/view/TableOfContentsLayouterProvider",family:"rtc.richtext.tableofcontents",subsystem:"rtc.view.layoutmanager.layouter"},
{id:"rtc.richtext.tableofcontentsheading.layouter",path:"MW/rtc/plugins/tableofcontents/view/TableOfContentsHeadingNodeLayouterProvider",family:"rtc.richtext.tableofcontents",subsystem:"rtc.view.layoutmanager.layouter"},{id:"rtc.richtext.tableofcontentscontainer.layouter",path:"MW/rtc/plugins/tableofcontents/view/TableOfContentsContainerLayouterProvider",family:"rtc.richtext.tableofcontents",subsystem:"rtc.view.layoutmanager.layouter"},{id:"rtc.richtext.tableofcontents.insertionrules",path:"MW/rtc/plugins/tableofcontents/TableOfContentsContainerInsertionRulesProvider",
family:"rtc.richtext.tableofcontents",subsystem:"rtc.insertionrule"},{id:"rtc.richtext.tableofcontentscontainer.contentconverter",path:"MW/rtc/plugins/tableofcontents/model/TableOfContentsContainerContentConverterProvider",family:"rtc.richtext.tableofcontents",subsystem:"rtc.nodes.contentconverter.converter"},{id:"rtc.richtext.tableofcontentsheading.contentconverter",path:"MW/rtc/plugins/tableofcontents/model/TableOfContentsHeadingNodeContentConverterProvider",family:"rtc.richtext.tableofcontents",
subsystem:"rtc.nodes.contentconverter.converter"},{id:"rtc.richtext.tableofcontentsheading.nodeconversionrules",path:"MW/rtc/plugins/tableofcontents/TableOfContentsHeadingNodeConversionRulesProvider",family:"rtc.richtext.tableofcontents",subsystem:"rtc.nodeconversionrule"},{id:"rtc.richtext.tableofcontentslist.nodeconversionrules",path:"MW/rtc/plugins/tableofcontents/TableOfContentsListConversionRulesProvider",family:"rtc.richtext.tableofcontents",subsystem:"rtc.nodeconversionrule"},{id:"rtc.richtext.tableofcontents.contentconverter",
path:"MW/rtc/plugins/tableofcontents/model/TableOfContentsListContentConverterProvider",family:"rtc.richtext.tableofcontents",subsystem:"rtc.nodes.contentconverter.converter"},{id:"rtc.serializers.containers.tableofcontentscontainer",path:"MW/rtc/model/io/serializers/providers/containers/TableOfContentsContainerSerializerProvider",family:"rtc.richtext.tableofcontents",subsystem:"rtc.serializer"},{id:"rtc.serializers.containers.tableofcontentsheading",path:"MW/rtc/model/io/serializers/providers/containers/TableOfContentsHeadingSerializerProvider",
family:"rtc.richtext.tableofcontents",subsystem:"rtc.serializer"},{id:"rtc.serializers.containers.tableofcontentslist",path:"MW/rtc/model/io/serializers/providers/containers/TableOfContentsListSerializerProvider",family:"rtc.richtext.tableofcontents",subsystem:"rtc.serializer"},{id:"rtc.richtext.tableofcontents.coordinateconverter.heading",path:"MW/rtc/plugins/tableofcontents/view/TableOfContentsHeadingNodeCoordinateConverterProvider",family:"rtc.richtext.tableofcontents",subsystem:"rtc.view.coordinateconverter.converter"},
{id:"rtc.richtext.tableofcontents.coordinateconverter.list",path:"MW/rtc/plugins/tableofcontents/view/TableOfContentsListCoordinateConverterProvider",family:"rtc.richtext.tableofcontents",subsystem:"rtc.view.coordinateconverter.converter"},{id:"rtc.richtext.tableofcontents.coordinateconverter.container",path:"MW/rtc/plugins/tableofcontents/view/TableOfContentsContainerCoordinateConverterProvider",family:"rtc.richtext.tableofcontents",subsystem:"rtc.view.coordinateconverter.converter"},{id:"rtc.code.sections.model",
path:"MW/rtc/plugins/language/matlab/sections/SectionModelProvider",family:"sections"},{id:"rtc.code.sections.view.containerutility",path:"MW/rtc/plugins/language/matlab/sections/SectionContainerUtilityProvider"},{id:"rtc.code.sections.view.currentsection",path:"MW/rtc/plugins/language/matlab/sections/CurrentSectionViewProvider"},{id:"rtc.code.sections.navigate",path:"MW/rtc/plugins/language/matlab/sections/NavigateSectionProvider"},{id:"rtc.code.sections.insert",path:"MW/rtc/plugins/language/matlab/sections/InsertSectionProvider"},
{id:"rtc.code.sections.contributor.coderegion",path:"MW/rtc/plugins/language/matlab/sections/CodeRegionSectionContributorProvider"},{id:"rtc.code.sections.stale.model",path:"MW/rtc/plugins/language/matlab/sections/StaleSectionModelProvider",family:"sections"},{id:"rtc.margin",path:"MW/rtc/plugins/margin/MarginContainerProvider"},{id:"rtc.margin.button",path:"MW/rtc/plugins/margin/RightMarginButtonProvider"},{id:"rtc.messagebar.rightmargincontainer",path:"MW/rtc/plugins/margin/RightMarginContainerProvider",
family:"messagebar"},{id:"rtc.margin.severitystatusbutton",path:"MW/rtc/plugins/margin/SeverityStatusButtonProvider"},{id:"rtc.messagebar.model",path:"MW/rtc/plugins/messagebar/MessageBarModelProvider",family:"messagebar"},{id:"rtc.messagebar.service",path:"MW/rtc/plugins/messagebar/MessageBarServiceProvider",family:"messagebar"},{id:"rtc.messagebar.view",path:"MW/rtc/plugins/messagebar/MessageBarViewProvider",family:"messagebar"},{id:"margin.statusactionbar.sectionsdecorator",path:"MW/rtc/plugins/statusactionbar/decorators/SectionsDecoratorProvider"},
{id:"margin.statusactionbar.stalesectionsdecorator",path:"MW/rtc/plugins/statusactionbar/decorators/StaleSectionsDecoratorProvider"},{id:"margin.statusactionbar.stalesectionsbackgrounddecorator",path:"MW/rtc/plugins/statusactionbar/decorators/StaleSectionsBackgroundDecoratorProvider"},{id:"margin.statusactionbar.evaluation",path:"MW/rtc/plugins/statusactionbar/evaluation/StatusActionBarEvaluationProvider"},{id:"rtc.embeddedoutputs",path:"MW/rtc/plugins/embeddedoutputs/EmbeddedOutputsProvider",family:"embeddedoutputs"},
{id:"rtc.embeddedoutputs.executionrequestfactory",path:"MW/rtc/plugins/embeddedoutputs/ExecutionRequestFactoryProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.outputhandler",path:"MW/rtc/plugins/embeddedoutputs/OutputHandlerProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.saveready",path:"MW/rtc/plugins/embeddedoutputs/EmbeddedOutputsDBQuitSaveReadyProvider",family:"embeddedoutputs",subsystem:"rtc.saveready"},{id:"rtc.embeddedoutputs.linenumbertracker",path:"MW/rtc/plugins/embeddedoutputs/LineNumberTrackerProvider",
family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.linecontinuationtracker",path:"MW/rtc/plugins/embeddedoutputs/LineContinuationTrackerProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.statehandler",path:"MW/rtc/plugins/embeddedoutputs/StateHandlerProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.syntaxerrors",path:"MW/rtc/plugins/embeddedoutputs/SyntaxErrorHandlerProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.outputremover",path:"MW/rtc/plugins/embeddedoutputs/OutputRemoverProvider",
family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.loadinterceptors.manager",path:"MW/rtc/plugins/embeddedoutputs/loadinterceptors/EmbeddedOutputsLoadInterceptorManagerProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.loadinterceptors.deferredloader",path:"MW/rtc/plugins/embeddedoutputs/loadinterceptors/DeferredLoadInterceptorProvider",family:"embeddedoutputs",subsystem:"rtc.embeddedoutputs.loadinterceptors"},{id:"rtc.embeddedoutputs.model",path:"MW/rtc/plugins/embeddedoutputs/model/EmbeddedOutputsModelProvider",
family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.alert",path:"MW/rtc/plugins/embeddedoutputs/view/EmbeddedOutputsAlertProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.viewservice",path:"MW/rtc/plugins/embeddedoutputs/ExecutionManagerViewServiceProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.triggers",path:"MW/rtc/plugins/embeddedoutputs/triggers/TriggersProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.interruptaction",path:"MW/rtc/plugins/embeddedoutputs/triggers/InterruptActionProvider",
family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.copyoutputs",path:"MW/rtc/plugins/embeddedoutputs/CopyOutputsProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.executionmanager",path:"MW/rtc/plugins/embeddedoutputs/ExecutionManagerProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.evaltextcache",path:"MW/rtc/plugins/embeddedoutputs/EvalTextCacheProvider",family:"executioncontrols"},{id:"rtc.embeddedoutputs.clearoutputscache",path:"MW/rtc/plugins/embeddedoutputs/ClearOutputsCacheProvider",
family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.currentoutputservice",path:"MW/rtc/plugins/embeddedoutputs/CurrentOutputServiceProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.figureoutputhandler",path:"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureOutputHandlerProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.figureconnectionmanager",path:"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureConnectionManagerProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.codegen",
path:"MW/rtc/plugins/embeddedoutputs/codegen/CodeGenFactoryProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.matrixoutputhandler",path:"MW/rtc/plugins/embeddedoutputs/outputhandlers/matrix/MatrixOutputHandlerProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.variableoutputhandler",path:"MW/rtc/plugins/embeddedoutputs/outputhandlers/variable/VariableOutputHandlerProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.variablestringoutputhandler",path:"MW/rtc/plugins/embeddedoutputs/outputhandlers/variablestring/VariableStringOutputHandlerProvider",
family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.symbolicoutputhandler",path:"MW/rtc/plugins/embeddedoutputs/outputhandlers/symbolic/SymbolicOutputHandlerProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.textoutputhandler",path:"MW/rtc/plugins/embeddedoutputs/outputhandlers/text/TextOutputHandlerProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.warningoutputhandler",path:"MW/rtc/plugins/embeddedoutputs/outputhandlers/warning/WarningOutputHandlerProvider",family:"embeddedoutputs"},
{id:"rtc.embeddedoutputs.erroroutputhandler",path:"MW/rtc/plugins/embeddedoutputs/outputhandlers/error/ErrorOutputHandlerProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.executiondatamanager",path:"MW/rtc/plugins/embeddedoutputs/ExecutionDataManagerProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.view.onright",path:"MW/rtc/plugins/embeddedoutputs/view/onright/OnrightViewProvider",family:"embeddedoutputs",subsystem:"embeddedoutputsviews",requiredForSubsystem:!0},{id:"rtc.embeddedoutputs.view.inline",
path:"MW/rtc/plugins/embeddedoutputs/view/inline/InlineViewProvider",family:"embeddedoutputs",subsystem:"embeddedoutputsviews",requiredForSubsystem:!0},{id:"rtc.exportnotifier",path:"MW/rtc/plugins/export/ExportNotifierProvider"},{id:"rtc.folding.foldingactions",path:"MW/rtc/plugins/folding/FoldingActionsProvider",family:"folding"},{id:"rtc.folding.foldingcontroller",path:"MW/rtc/plugins/folding/FoldingControllerProvider"},{id:"rtc.folding.foldingmodel",path:"MW/rtc/plugins/folding/FoldingModelProvider"},
{id:"rtc.folding.margin",path:"MW/rtc/plugins/folding/view/FoldingMarginProvider",family:"folding",subsystem:"rtc.left.margin"},{id:"rtc.folding.margin.decorator",path:"MW/rtc/plugins/folding/view/FoldingDecoratorProvider"},{id:"rtc.folding.ellipses",path:"MW/rtc/plugins/folding/view/FoldingEllipsesManagerProvider",family:"folding"},{id:"rtc.document.executablecode.executablecodeservice",path:"MW/rtc/plugins/language/matlab/executablecode/ExecutableCodeServiceProvider",family:"embeddedoutputs"},{id:"rtc.document.executablecode.executablecodeconverter",
path:"MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/ExecutableCodeConverterProvider",family:"embeddedoutputs"},{id:"rtc.document.executablecode.executablecodeconverter.rootnodeconverter",path:"MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/RootNodeExecutableCodeConverterProvider",family:"embeddedoutputs",subsystem:"rtc.document.executablecode.executablecodeconverter.converter"},{id:"rtc.document.executablecode.executablecodeconverter.linenodeconverter",
path:"MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/LineNodeExecutableCodeConverterProvider",family:"embeddedoutputs",subsystem:"rtc.document.executablecode.executablecodeconverter.converter"},{id:"rtc.document.executablecode.executablecodeconverter.plaintextnodeconverter",path:"MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/PlainTextNodeExecutableCodeConverterProvider",family:"embeddedoutputs",subsystem:"rtc.document.executablecode.executablecodeconverter.converter"},
{id:"rtc.typocorrection",path:"MW/rtc/plugins/typocorrection/TypoSuggestionFeatureProvider",family:"typocorrection"},{id:"rtc.typocorrection.typocorrectionhandlerfactory",path:"MW/rtc/plugins/typocorrection/handler/TypoSuggestionHandlerFactoryProvider",family:"typocorrection"},{id:"rtc.eventhandler",path:"MW/rtc/plugins/events/EventHandlerProvider"},{id:"rtc.keyhandler",path:"MW/rtc/events/KeyHandlerProvider"},{id:"rtc.contextmenu",path:"MW/rtc/plugins/contextmenu/ContextMenuProvider",family:"contextmenu"},
{id:"rtc.contextmenu.generator",path:"MW/rtc/plugins/contextmenu/DojoContextMenuGeneratorProvider",family:"contextmenu"},{id:"rtc.contextmenu.model",path:"MW/rtc/plugins/contextmenu/DocumentContextMenuModelProvider",family:"contextmenu"},{id:"rtc.currentlinehighlight",path:"MW/rtc/plugins/currentlinehighlight/CurrentLineHighlightProvider",family:"currentlinehighlight"},{id:"rtc.currentlinehighlight.preference",path:"MW/rtc/plugins/currentlinehighlight/CurrentLineHighlightPreferenceProvider",family:"currentlinehighlight"},
{id:"rtc.code.sections.sectionbreak",path:"MW/rtc/plugins/sectionbreak/SectionBreakProvider",family:"rtc.sectionbreak"},{id:"rtc.code.sections.sectionbreak.nodeconversionrules",path:"MW/rtc/plugins/sectionbreak/SectionBreakNodeConversionRulesProvider",family:"rtc.sectionbreak",subsystem:"rtc.nodeconversionrule"},{id:"rtc.code.sections.sectionbreak.contentconverter",path:"MW/rtc/plugins/sectionbreak/model/SectionBreakNodeContentConverterProvider",family:"rtc.sectionbreak",subsystem:"rtc.nodes.contentconverter.converter"},
{id:"rtc.code.sections.sectionbreak.coordinateconverter",path:"MW/rtc/plugins/sectionbreak/view/SectionBreakCoordinateConverterProvider",family:"rtc.sectionbreak",subsystem:"rtc.view.coordinateconverter.converter"},{id:"rtc.code.sections.sectionbreak.insertionrules",path:"MW/rtc/plugins/sectionbreak/SectionBreakInsertionRulesProvider",family:"rtc.sectionbreak",subsystem:"rtc.insertionrule"},{id:"rtc.code.sections.sectionbreak.layouter",path:"MW/rtc/plugins/sectionbreak/view/SectionBreakLayouterProvider",
family:"rtc.sectionbreak",subsystem:"rtc.view.layoutmanager.layouter"},{id:"rtc.code.sections.contributor.sectionbreak",path:"MW/rtc/plugins/language/matlab/sections/SectionBreakSectionContributorProvider"},{id:"rtc.imeinput",path:"MW/rtc/plugins/imeinput/IMEInputProvider"},{id:"rtc.view.movehiddenkeycapture",path:"MW/rtc/plugins/view/movehiddenkeycapture/MoveHiddenKeyCaptureProvider"},{id:"rtc.editordataservice",path:"MW/rtc/plugins/editordataservice/EditorDataServiceProvider"},{id:"rtc.editordataservicemanager",
path:"MW/rtc/plugins/editordataservice/EditorDataServiceManagerProvider"},{id:"rtc.undoredo.editblock",family:"undoredo",path:"MW/rtc/plugins/undoredo/EditBlockControllerProvider"},{id:"rtc.undoredo.controller",family:"undoredo",path:"MW/rtc/plugins/undoredo/UndoRedoControllerProvider"},{id:"rtc.undoredo.action",family:"undoredo",path:"MW/rtc/plugins/undoredo/UndoRedoActionProvider"},{id:"rtc.undoredo.cursor",family:"undoredo",path:"MW/rtc/plugins/undoredo/UndoRedoCursorProvider"},{id:"rtc.view.coordinateconverter.converter.plaintext",
path:"MW/rtc/view/coordinateconverter/PlainTextCoordinateConverterProvider",subsystem:"rtc.view.coordinateconverter.converter",requiredForSubsystem:!0},{id:"rtc.view.coordinateconverter.converter.root",path:"MW/rtc/view/coordinateconverter/RootCoordinateConverterProvider",subsystem:"rtc.view.coordinateconverter.converter",requiredForSubsystem:!0},{id:"rtc.view.coordinateconverter",path:"MW/rtc/view/coordinateconverter/CoordinateConverterProvider"},{id:"rtc.view.rangeconverter.converter.plaintext",
path:"MW/rtc/view/rangeconverter/PlainTextRangeConverterProvider",subsystem:"rtc.view.rangeconverter.converter",requiredForSubsystem:!0},{id:"rtc.view.rangeconverter",path:"MW/rtc/view/rangeconverter/RangeConverterProvider"},{id:"rtc.plugins.cursorgripper",path:"MW/rtc/plugins/cursorgripper/CursorGripperProvider"},{id:"rtc.plugins.device.ios.virtualkeyboardshortcutbar",path:"MW/rtc/plugins/device/ios/VirtualKeyboardShortcutBarProvider"},{id:"rtc.executionservice",path:"MW/rtc/execution/ExecutionServiceProvider"},
{id:"rtc.breakpointlessevalservice",path:"MW/rtc/execution/BreakpointlessEvalServiceProvider"},{id:"rtc.embeddedoutputs.splitterpositionmodel",path:"MW/rtc/plugins/embeddedoutputs/model/SplitterPositionModelProvider",family:"embeddedoutputs"},{id:"rtc.execution.actions",path:"MW/rtc/plugins/execution/ExecutionActionsProvider"},{id:"rtc.execution.controlc",path:"MW/rtc/plugins/execution/ControlCServiceProvider"},{id:"matlab.services.busyidle",path:"MW/rtc/plugins/execution/BusyIdleServicesProvider"},
{id:"rtc.margin.execution",path:"MW/rtc/plugins/execution/margin/DecoratableExecutionMarginProvider",subsystem:"rtc.left.margin"},{id:"margin.execution.sectionsdecorator.utilities",path:"MW/rtc/plugins/statusactionbar/SectionDecoratorUtilitiesProvider"},{id:"rtc.service.documentloaded",path:"MW/rtc/plugins/debug/DocumentLoadedServiceProvider"},{id:"rtc.caseconverter",path:"MW/rtc/plugins/caseconverter/CaseConverterProvider"},{id:"rtc.statusbar",path:"MW/rtc/plugins/statusbar/StatusBarRequestHandlerProvider"},
{id:"rtc.dataservice.sections",path:"MW/rtc/plugins/sections/SectionsRequestHandlerProvider"},{id:"rtc.dataservice.functions",path:"MW/rtc/plugins/functions/FunctionsRequestHandlerProvider"},{id:"rtc.saveready.manager",path:"MW/rtc/plugins/save/SaveReadyManagerProvider"},{id:"rtc.margin.sectionexpander",path:"MW/rtc/plugins/statusactionbar/SectionRangeMarginExpansionHandlerProvider"},{id:"rtc.margin.sectionbreak",path:"MW/rtc/plugins/statusactionbar/decorators/SectionBreakLineMarginDecoratorProvider"},
{id:"rtc.margin.empty",path:"MW/rtc/plugins/margin/EmptyWithSectionBreaksMarginProvider",subsystem:"rtc.left.margin"},{id:"rtc.offscreennotification",path:"MW/rtc/plugins/offscreennotification/OffscreenNotificationProvider"},{id:"rtc.blockmatching",path:"MW/rtc/plugins/blockmatching/BlockMatchingPluginProvider"},{id:"rtc.execution.range.continue",path:"MW/rtc/plugins/execution/range/ContinueRangeProvider",subsystem:"rtc.execution.range"},{id:"rtc.execution.range.runall",path:"MW/rtc/plugins/execution/range/RunAllRangeProvider",
subsystem:"rtc.execution.range"},{id:"rtc.execution.range.runsectionadvance",path:"MW/rtc/plugins/execution/range/RunSectionAdvanceRangeProvider",subsystem:"rtc.execution.range"},{id:"rtc.execution.range.runsectionend",path:"MW/rtc/plugins/execution/range/RunSectionEndRangeProvider",subsystem:"rtc.execution.range"},{id:"rtc.execution.range.runsection",path:"MW/rtc/plugins/execution/range/RunSectionRangeProvider",subsystem:"rtc.execution.range"},{id:"rtc.execution.range.runtohere",path:"MW/rtc/plugins/execution/range/RunToHereRangeProvider",
subsystem:"rtc.execution.range"},{id:"rtc.execution.range.stepout",path:"MW/rtc/plugins/execution/range/StepOutRangeProvider",subsystem:"rtc.execution.range"},{id:"rtc.execution.range.step",path:"MW/rtc/plugins/execution/range/StepRangeProvider",subsystem:"rtc.execution.range"},{id:"rtc.execution.range.utilities",path:"MW/rtc/plugins/execution/range/ExecutionRangeUtilitiesProvider"},{id:"rtc.execution.range.manager",path:"MW/rtc/plugins/execution/range/ExecutionRangeManagerProvider"}]}})},"MW/rtc/clipboardservice/ClipboardProvider":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/clipboardservice/ClipboardService","MW/rtc/core/provider/PluginProvider"],function(h,e,g,d){return h(d,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:[]}},createInstance:function(){return g.getInternalClipboard()}})})},"MW/rtc/clipboardservice/ClipboardService":function(){define(["mw-messageservice/MessageService","MW/rtc/clipboardservice/InternalClipboard","MW/rtc/clipboardservice/ConnectorClipboard","MW/rtc/clipboardservice/BrowserSyncedClipboard"],
function(h,e,g,d){return{_internalClipboard:null,_browserSyncedClipboard:null,getInternalClipboard:function(){this._internalClipboard||(this._internalClipboard=new e);return this._internalClipboard},getConnectorClipboard:function(){return new g(h)},getBrowserSyncedClipboard:function(){this._browserSyncedClipboard||(this._browserSyncedClipboard=new d);return this._browserSyncedClipboard},createClipboard:function(){return new e}}})},"mw-messageservice/MessageService":function(){define("dojo/_base/lang dojo/aspect ./messageserviceimpl/MessageServiceAsync ./messageserviceimpl/MessageServiceBase ./messageserviceimpl/MessageServiceReqResp mw-remote/Remote".split(" "),
function(h,e,g,d,c,b){var a=new d;d={messageService:a,subscribe:h.hitch(a,"subscribe"),unsubscribe:h.hitch(a,"unsubscribe"),publish:h.hitch(a,"publish"),start:h.hitch(a,"start"),stop:h.hitch(a,"stop"),isRunning:h.hitch(a,"isStarted"),isStarted:h.hitch(a,"isStarted"),isConnected:h.hitch(a,"isConnected"),isFatallyDisconnected:h.hitch(a,"isFatallyDisconnected"),isDisconnected:h.hitch(a,"isDisconnected"),setLatency:h.hitch(a,"setLatency"),setErrorRate:h.hitch(a,"setErrorRate"),onConnected:function(){},
onDisconnected:function(){},onReconnected:function(){},onFatallyDisconnected:function(){},onNotConnected:function(){},handleMessage:h.hitch(a,"handleMessage"),internalMotwDisableStart:function(){this._startFunction=this.start;this.start=function(){}},internalMotwEnableStart:function(){this._startFunction&&(this.start=this._startFunction,this._startFunction=null)}};e.after(a,"onConnected",h.hitch(d,"onConnected"),!0);e.after(a,"onDisconnected",h.hitch(d,"onDisconnected"),!0);e.after(a,"onReconnected",
h.hitch(d,"onReconnected"),!0);e.after(a,"onFatallyDisconnected",h.hitch(d,"onFatallyDisconnected"),!0);e.after(a,"onNotConnected",h.hitch(d,"onNotConnected"),!0);var f=b.enableServerOnWorkerAsync;b.enableServerOnWorkerAsync=function(){f();a.setDelegate(new g(b))};var k=b.disableServerOnWorkerAsync;b.disableServerOnWorkerAsync=function(){k();a.setDelegate(new c(b,a))};b.isServerOnWorkerAsyncEnabled()?b.enableServerOnWorkerAsync():b.disableServerOnWorkerAsync();return d})},"mw-messageservice/messageserviceimpl/MessageServiceAsync":function(){define("dojo/_base/declare dojo/_base/config dojo/aspect dojo/json dojo/Deferred dojox/cometd/cometd dojox/cometd/AckExtension mw-log/Log mw-remote/iframeproxy/IframeProxyClient".split(" "),
function(h,e,g,d,c,b,a,f,k){var l;b.JSON.toJSON=d.stringify;b.JSON.fromJSON=d.parse;var n=0,p=0,m={};setInterval(function(){n+=200;Object.keys(m).forEach(function(a){var f=m[a];f.execTime<=n&&(f.func(),delete m[a])})},200);var q=function(f,c,d){var e=new b.LongPollingTransport,e=b.Transport.derive(e);e.xhrSend=function(a){var f=c.sendMessage(a.body,a.url,{headers:a.headers});f.then(a.onSuccess,function(f){a.onError(f,f)});return{abort:function(){f.cancel()}}};var g=new b.Cometd(f),l=b.Utils.setTimeout;
b.Utils.setTimeout=function(a,f,b){if(0===b)return l(a,f,b);p+=1;m[p]={func:function(){try{f()}catch(a){g._debug("Exception invoking timed function",f,a)}},execTime:n+b};return p};b.Utils.clearTimeout=function(a){delete m[a]};b.WebSocket=k.WebSocket;k.WebSocket.proxyClient=c;g.registerExtension("ack",new a);d.websocket&&g.registerTransport("websocket",new b.WebSocketTransport,0);g.registerTransport("long-polling",e,1);return g};l=h([],{BASE_PREFIX:"/matlab",BASE_END_POINT:"messageservice/async",logCometdLifecycle:!1,
logCometdSubscriptions:!1,constructor:function(a,b,c,d){this.remote=a;this.constructCometD=b||q;this.cometdProperties=d||{connectTimeout:5E3,maxBackoff:1E4,logLevel:"info",maxNetworkDelay:2E4,appendMessageTypeToURL:!1,autoBatch:!0};this._webSocket={"try":!0,connectedAtLeastOnce:!1};a=["maxNetworkDelay","connectTimeout","logLevel"];if(b=e.cometdProperties)for(d=0;d<a.length;d+=1){var l=a[d];void 0!==b[l]&&(this.cometdProperties[l]=b[l])}this.workerProxyAsyncClient=c||new k("remoteWorkerAsyncProducer");
var n=this;g.after(this.workerProxyAsyncClient,"onError",function(a){n.cometd&&(n.logCometdLifecycle&&f.info("MessageServiceAsync disconnecting cometd due to IFrame error."),n.cometd.disconnect());n.onConnectionError(a)},!0);this.subscriptions={};this.recentMessages=[];this._deferredCleanupFunction=function(){n._deferredCleanup=!1;n.recentMessages=[]}},onMessage:function(a){},onConnectionError:function(a){},connect:function(){this.routingHost=l.workerHostOverride||this.remote.getWorkerRoutingHost();
this.routingKey=this.remote.getWorkerRoutingKey();this.computeToken=this.remote.getComputeSessionId();this.workerProxyAsyncClient.setRemotePageHost(this.routingHost,this.routingKey,this.computeToken);var a={};l.enableWebsocket&&this._webSocket.try?a.websocket=!0:(a.websocket=!1,this._webSocket.try=!1);var b=this.constructCometD("messageService",this.workerProxyAsyncClient,a);this.cometd=b;this.logCometdLifecycle&&f.info("MessageServiceAsync constructing new cometd instance.");a=this._createOneShotMessagePromise("/meta/handshake");
this._createListenerForUnknownClient();var k=this,d=new c;a.then(function(a){k.logCometdLifecycle&&f.info("MessageServiceAsync cometd handshake successful.",a,b.getClientId(),b);b.isDisconnected()?(f.error("MessageServiceAsync cometd handshake successful but still disconnected!"),b.disconnect(),d.reject(a)):("websocket"===b.getTransport().getType()&&(k._webSocket.connectedAtLeastOnce=!0),d.resolve(a))},function(a){k.logCometdLifecycle&&f.info("MessageServiceAsync disconnecting cometd due to handshake failure.",
a,b.getClientId(),b);b.disconnect();if(a.request&&a.request.supportedConnectionTypes){var c=a.request.supportedConnectionTypes;1<c.length&&("websocket"===c[0]&&!k._webSocket.connectedAtLeastOnce)&&(k._webSocket.try=!1)}d.reject(a)});this.cometdProperties.url=this._getEndpoint();b.init(this.cometdProperties);return d.promise},disconnect:function(){this.logCometdLifecycle&&f.info("MessageServiceAsync disconnecting cometd due to disconnect call.",this.cometd.getClientId());var a=this._createOneShotMessagePromise("/meta/disconnect");
this.cometd.disconnect();return a},cleanup:function(){this.cometd&&(this.logCometdLifecycle&&f.info("MessageServiceAsync disconnecting cometd due to cleanup call.",this.cometd,this.cometd&&this.cometd.getClientId()),this.cometd.disconnect(),this.cometd=null)},delegateConnected:function(){return this.cometd?!this.cometd.isDisconnected():!1},doPublish:function(a,f){var b=this._createOneShotMessagePromise("/meta/publish");this.cometd.publish(this._getRequestChannel(a),f);return b},doSubscribe:function(a){this.logCometdSubscriptions&&
f.info("MessageServiceAsync subscribing cometd to channel: "+a);var b=this._createOneShotMessagePromise("/meta/subscribe");this.subscriptions[a]=this.cometd.subscribe(this._getRequestChannel(a),this,this._handleCometResponse);return b},doUnsubscribe:function(a){if(this.subscriptions[a]){this.logCometdSubscriptions&&f.info("MessageServiceAsync unsubscribing cometd from channel: "+a);var b=this._createOneShotMessagePromise("/meta/unsubscribe");this.cometd.unsubscribe(this.subscriptions[a]);delete this.subscriptions[a];
return b}return(new c).resolve({successful:!0})},doStartBatch:function(){this.cometd.startBatch()},doEndBatch:function(){this.cometd.endBatch()},doSetLatency:function(a){this.workerProxyAsyncClient.setLatency(a)},doSetErrorRate:function(a){this.workerProxyAsyncClient.setErrorRate(a)},_handleCometResponse:function(a){if(this._shouldHandleMessage(a))this.onMessage(this._stripBasePrefixAndConvertToJson(a))},_shouldHandleMessage:function(a){return!a.id&&0>this.recentMessages.indexOf(a)?(this.recentMessages.push(a),
this._deferRecentMessagesCleanup(),!0):!1},_deferRecentMessagesCleanup:function(){this._deferredCleanup||(this._deferredCleanup=setTimeout(this._deferredCleanupFunction,0))},_createOneShotMessagePromise:function(a){var b=new c;this._addOneShotListener(a,function(a){a.successful?b.resolve(a):(f.warn("Message failed: ",a),b.reject(a))});return b.promise},_addOneShotListener:function(a,f){var b=this,k=this.cometd,c;c=this.cometd.addListener(a,function(a){k.removeListener(c);f.apply(b,arguments)})},_createListenerForUnknownClient:function(){var a=
this.cometd,f=this;a.addListener("/meta/connect",function(b){!b.successful&&(b.advice&&"handshake"===b.advice.reconnect)&&(a.disconnect(),f.onConnectionError(b.error))})},_getEndpoint:function(){return this.routingHost+this.BASE_END_POINT+"?routingkey\x3d"+this.routingKey},_getRequestChannel:function(a){return this.BASE_PREFIX+a},_stripBasePrefixAndConvertToJson:function(a){return{channel:a.channel.substring(this.BASE_PREFIX.length),data:a.data}}});l.enableWebsocket=!1;l.workerHostOverride=!1;0<=
location.search.indexOf("websocket\x3don")&&(l.enableWebsocket=!0);return l})},"dojox/cometd/cometd":function(){define(function(){var h=this.org=this.org||{};h.cometd={};h.cometd.JSON={};h.cometd.JSON.toJSON=h.cometd.JSON.fromJSON=function(e){throw"Abstract";};h.cometd.Utils={};h.cometd.Utils.isString=function(e){return void 0===e||null===e?!1:"string"===typeof e||e instanceof String};h.cometd.Utils.isArray=function(e){return void 0===e||null===e?!1:e instanceof Array};h.cometd.Utils.inArray=function(e,
g){for(var d=0;d<g.length;++d)if(e===g[d])return d;return-1};h.cometd.Utils.setTimeout=function(e,g,d){return window.setTimeout(function(){try{g()}catch(c){e._debug("Exception invoking timed function",g,c)}},d)};h.cometd.Utils.clearTimeout=function(e){window.clearTimeout(e)};h.cometd.TransportRegistry=function(){var e=[],g={};this.getTransportTypes=function(){return e.slice(0)};this.findTransportTypes=function(d,c,b){for(var a=[],f=0;f<e.length;++f){var k=e[f];!0===g[k].accept(d,c,b)&&a.push(k)}return a};
this.negotiateTransport=function(d,c,b,a){for(var f=0;f<e.length;++f)for(var k=e[f],l=0;l<d.length;++l)if(k===d[l]){var n=g[k];if(!0===n.accept(c,b,a))return n}return null};this.add=function(d,c,b){for(var a=!1,f=0;f<e.length;++f)if(e[f]===d){a=!0;break}a||("number"!==typeof b?e.push(d):e.splice(b,0,d),g[d]=c);return!a};this.find=function(d){for(var c=0;c<e.length;++c)if(e[c]===d)return g[d];return null};this.remove=function(d){for(var c=0;c<e.length;++c)if(e[c]===d)return e.splice(c,1),c=g[d],delete g[d],
c;return null};this.clear=function(){e=[];g={}};this.reset=function(){for(var d=0;d<e.length;++d)g[e[d]].reset()}};h.cometd.Transport=function(){var e,g;this.registered=function(d,c){e=d;g=c};this.unregistered=function(){g=e=null};this._debug=function(){g._debug.apply(g,arguments)};this._mixin=function(){return g._mixin.apply(g,arguments)};this.getConfiguration=function(){return g.getConfiguration()};this.getAdvice=function(){return g.getAdvice()};this.setTimeout=function(d,c){return h.cometd.Utils.setTimeout(g,
d,c)};this.clearTimeout=function(d){h.cometd.Utils.clearTimeout(d)};this.convertToMessages=function(d){if(h.cometd.Utils.isString(d))try{return h.cometd.JSON.fromJSON(d)}catch(c){throw this._debug("Could not convert to JSON the following string",'"'+d+'"'),c;}if(h.cometd.Utils.isArray(d))return d;if(void 0===d||null===d)return[];if(d instanceof Object)return[d];throw"Conversion Error "+d+", typeof "+typeof d;};this.accept=function(d,c,b){throw"Abstract";};this.getType=function(){return e};this.send=
function(d,c){throw"Abstract";};this.reset=function(){this._debug("Transport",e,"reset")};this.abort=function(){this._debug("Transport",e,"aborted")};this.toString=function(){return this.getType()}};h.cometd.Transport.derive=function(e){function g(){}g.prototype=e;return new g};h.cometd.RequestTransport=function(){function e(a){for(;0<n.length;){var f=n[0],b=f[0],f=f[1];if(b.url===a.url&&b.sync===a.sync)n.shift(),a.messages=a.messages.concat(b.messages),this._debug("Coalesced",b.messages.length,"messages from request",
f.id);else break}}function g(a,f){this.transportSend(a,f);f.expired=!1;if(!a.sync){var b=this.getConfiguration().maxNetworkDelay,k=b;!0===f.metaConnect&&(k+=this.getAdvice().timeout);this._debug("Transport",this.getType(),"waiting at most",k,"ms for the response, maxNetworkDelay",b);var c=this;f.timeout=this.setTimeout(function(){f.expired=!0;f.xhr&&f.xhr.abort();var b="Request "+f.id+" of transport "+c.getType()+" exceeded "+k+" ms max network delay";c._debug(b);c.complete(f,!1,f.metaConnect);a.onFailure(f.xhr,
a.messages,"timeout",b)},k)}}function d(a){var b=++f,k={id:b,metaConnect:!1};l.length<this.getConfiguration().maxConnections-1?(l.push(k),g.call(this,a,k)):(this._debug("Transport",this.getType(),"queueing request",b,"envelope",a),n.push([a,k]))}function c(a,f){var b=h.cometd.Utils.inArray(a,l);0<=b&&l.splice(b,1);if(0<n.length){var b=n.shift(),k=b[0],c=b[1];this._debug("Transport dequeued request",c.id);if(f)this.getConfiguration().autoBatch&&e.call(this,k),d.call(this,k),this._debug("Transport completed request",
a.id,k);else{var g=this;this.setTimeout(function(){g.complete(c,!1,c.metaConnect);k.onFailure(c.xhr,k.messages,"error","Previous request failed")},0)}}}var b=new h.cometd.Transport,a=h.cometd.Transport.derive(b),f=0,k=null,l=[],n=[];a.complete=function(a,f,b){if(b){a=a.id;this._debug("Transport",this.getType(),"metaConnect complete, request",a);if(null!==k&&k.id!==a)throw"Longpoll request mismatch, completing request "+a;k=null}else c.call(this,a,f)};a.transportSend=function(a,f){throw"Abstract";
};a.transportSuccess=function(a,f,b){if(!f.expired)if(this.clearTimeout(f.timeout),this.complete(f,!0,f.metaConnect),b&&0<b.length)a.onSuccess(b);else a.onFailure(f.xhr,a.messages,"Empty HTTP response")};a.transportFailure=function(a,f,b,k){f.expired||(this.clearTimeout(f.timeout),this.complete(f,!1,f.metaConnect),a.onFailure(f.xhr,a.messages,b,k))};a.send=function(a,b){if(b){if(null!==k)throw"Concurrent metaConnect requests not allowed, request id\x3d"+k.id+" not yet completed";var c=++f;this._debug("Transport",
this.getType(),"metaConnect send, request",c,"envelope",a);c={id:c,metaConnect:!0};g.call(this,a,c);k=c}else d.call(this,a)};a.abort=function(){b.abort();for(var a=0;a<l.length;++a){var f=l[a];this._debug("Aborting request",f);f.xhr&&f.xhr.abort()}k&&(this._debug("Aborting metaConnect request",k),k.xhr&&k.xhr.abort());this.reset()};a.reset=function(){b.reset();k=null;l=[];n=[]};return a};h.cometd.LongPollingTransport=function(){var e=new h.cometd.RequestTransport,g=h.cometd.Transport.derive(e),d=
!0;g.accept=function(c,b,a){return d||!b};g.xhrSend=function(c){throw"Abstract";};g.transportSend=function(c,b){this._debug("Transport",this.getType(),"sending request",b.id,"envelope",c);var a=this;try{var f=!0;b.xhr=this.xhrSend({transport:this,url:c.url,sync:c.sync,headers:this.getConfiguration().requestHeaders,body:h.cometd.JSON.toJSON(c.messages),onSuccess:function(f){a._debug("Transport",a.getType(),"received response",f);var k=!1;try{var e=a.convertToMessages(f);0===e.length?(d=!1,a.transportFailure(c,
b,"no response",null)):(k=!0,a.transportSuccess(c,b,e))}catch(g){a._debug(g),k||(d=!1,a.transportFailure(c,b,"bad response",g))}},onError:function(k,e){d=!1;f?a.setTimeout(function(){a.transportFailure(c,b,k,e)},0):a.transportFailure(c,b,k,e)}});f=!1}catch(k){d=!1,this.setTimeout(function(){a.transportFailure(c,b,"error",k)},0)}};g.reset=function(){e.reset();d=!0};return g};h.cometd.CallbackPollingTransport=function(){var e=new h.cometd.RequestTransport,e=h.cometd.Transport.derive(e);e.accept=function(e,
d,c){return!0};e.jsonpSend=function(e){throw"Abstract";};e.transportSend=function(e,d){for(var c=this,b=0,a=e.messages.length,f=[];0<a;){var k=h.cometd.JSON.toJSON(e.messages.slice(b,b+a)),k=e.url.length+encodeURI(k).length;if(2E3<k){if(1===a){var l="Bayeux message too big ("+k+" bytes, max is 2000) for transport "+this.getType();this.setTimeout(function(){c.transportFailure(e,d,"error",l)},0);return}--a}else f.push(a),b+=a,a=e.messages.length-b}var n=e;if(1<f.length){b=0;a=f[0];this._debug("Transport",
this.getType(),"split",e.messages.length,"messages into",f.join(" + "));n=this._mixin(!1,{},e);n.messages=e.messages.slice(b,a);n.onSuccess=e.onSuccess;n.onFailure=e.onFailure;for(k=1;k<f.length;++k){var p=this._mixin(!1,{},e),b=a,a=a+f[k];p.messages=e.messages.slice(b,a);p.onSuccess=e.onSuccess;p.onFailure=e.onFailure;this.send(p,d.metaConnect)}}this._debug("Transport",this.getType(),"sending request",d.id,"envelope",n);try{var m=!0;this.jsonpSend({transport:this,url:n.url,sync:n.sync,headers:this.getConfiguration().requestHeaders,
body:h.cometd.JSON.toJSON(n.messages),onSuccess:function(a){var f=!1;try{var b=c.convertToMessages(a);0===b.length?c.transportFailure(n,d,"no response"):(f=!0,c.transportSuccess(n,d,b))}catch(k){c._debug(k),f||c.transportFailure(n,d,"bad response",k)}},onError:function(a,f){m?c.setTimeout(function(){c.transportFailure(n,d,a,f)},0):c.transportFailure(n,d,a,f)}});m=!1}catch(q){this.setTimeout(function(){c.transportFailure(n,d,"error",q)},0)}};return e};h.cometd.WebSocketTransport=function(){function e(){var f=
a.getURL().replace(/^http/,"ws");this._debug("Transport",this.getType(),"connecting to URL",f);var b=this,k=null,c=a.getConfiguration().connectTimeout;0<c&&(k=this.setTimeout(function(){k=null;m||(b._debug("Transport",b.getType(),"timed out while connecting to URL",f,":",c,"ms"),b.onClose(1002,"Connect Timeout"))},c));var d=new h.cometd.WebSocket(f),e=function(a){var f=a?a.code:1E3;a=a?a.reason:void 0;b._debug("WebSocket closed",f,"/",a,d);k&&(b.clearTimeout(k),k=null);if(d!==p)b._debug("Ignoring close event, WebSocket",
p);else b.onClose(f,a)};d.onopen=function(){b._debug("WebSocket opened",d);k&&(b.clearTimeout(k),k=null);if(d!==p)b._debug("Ignoring open event, WebSocket",p);else b.onOpen()};d.onclose=e;d.onerror=function(){e({code:1002})};d.onmessage=function(a){b._debug("WebSocket message",a,d);if(d!==p)b._debug("Ignoring message event, WebSocket",p);else b.onMessage(a)};p=d;this._debug("Transport",this.getType(),"configured callbacks on",d)}function g(a,f){var b=h.cometd.JSON.toJSON(a.messages);p.send(b);this._debug("Transport",
this.getType(),"sent",a,"metaConnect \x3d",f);var k=b=this.getConfiguration().maxNetworkDelay;f&&(k+=this.getAdvice().timeout,q=!0);for(var c=[],d=0;d<a.messages.length;++d){var e=a.messages[d];if(e.id){c.push(e.id);var g=p;n[e.id]=this.setTimeout(function(){g&&g.close(1E3,"Timeout")},k)}}this._debug("Transport",this.getType(),"waiting at most",k,"ms for messages",c,"maxNetworkDelay",b,", timeouts:",n)}function d(a,f){try{null===p?e.call(this):m&&g.call(this,a,f)}catch(b){var k=p;this.setTimeout(function(){a.onFailure(k,
a.messages,"error",b)},0)}}var c=new h.cometd.Transport,b=h.cometd.Transport.derive(c),a,f=!0,k=!1,l={},n={},p=null,m=!1,q=!1,r;b.onOpen=function(){this._debug("Transport",this.getType(),"opened",p);k=m=!0;this._debug("Sending pending messages",l);for(var a in l){var f=l[a],b=f[0],f=f[1];r=b.onSuccess;g.call(this,b,f)}};b.onMessage=function(a){this._debug("Transport",this.getType(),"received websocket message",a,p);var f=!1;a=this.convertToMessages(a.data);for(var b=[],k=0;k<a.length;++k){var c=a[k];
if((/^\/meta\//.test(c.channel)||void 0===c.data)&&c.id){b.push(c.id);var d=n[c.id];d&&(this.clearTimeout(d),delete n[c.id],this._debug("Transport",this.getType(),"removed timeout for message",c.id,", timeouts",n))}"/meta/connect"===c.channel&&(q=!1);"/meta/disconnect"===c.channel&&!q&&(f=!0)}k=!1;for(c=0;c<b.length;++c){var e=b[c],g;for(g in l){var d=g.split(","),m=h.cometd.Utils.inArray(e,d);if(0<=m){k=!0;d.splice(m,1);e=l[g][0];m=l[g][1];delete l[g];0<d.length&&(l[d.join(",")]=[e,m]);break}}}k&&
this._debug("Transport",this.getType(),"removed envelope, envelopes",l);r.call(this,a);f&&p.close(1E3,"Disconnect")};b.onClose=function(a,b){this._debug("Transport",this.getType(),"closed",a,b,p);f=k;for(var c in n)this.clearTimeout(n[c]);n={};for(var d in l)c=l[d][0],l[d][1]&&(q=!1),c.onFailure(p,c.messages,"closed "+a+"/"+b);l={};null!==p&&m&&p.close(1E3,"Close");m=!1;p=null};b.registered=function(f,b){c.registered(f,b);a=b};b.accept=function(b,k,c){return f&&!!h.cometd.WebSocket&&!1!==a.websocketEnabled};
b.send=function(a,f){this._debug("Transport",this.getType(),"sending",a,"metaConnect \x3d",f);for(var b=[],k=0;k<a.messages.length;++k){var c=a.messages[k];c.id&&b.push(c.id)}l[b.join(",")]=[a,f];this._debug("Transport",this.getType(),"stored envelope, envelopes",l);d.call(this,a,f)};b.abort=function(){c.abort();if(null!==p)try{p.close(1001)}catch(a){this._debug(a)}this.reset()};b.reset=function(){c.reset();null!==p&&m&&p.close(1E3,"Reset");f=!0;k=!1;n={};l={};p=null;m=!1;r=null};return b};h.cometd.Cometd=
function(e){function g(a){return h.cometd.Utils.isString(a)}function d(a){return void 0===a||null===a?!1:"function"===typeof a}function c(a,f){if(window.console){var b=window.console[a];d(b)&&b.apply(window.console,f)}}function b(){for(var a in V)for(var f=V[a],b=f.length-1;0<=b;--b){var k=f[b];k&&!k.listener&&(f.splice(b,1),J._debug("Removed subscription",k,"for channel",a))}}function a(a){R!==a&&(J._debug("Status",R,"-\x3e",a),R=a)}function f(){return"disconnecting"===R||"disconnected"===R}function k(a,
f,b,k,c){try{return f.call(a,k)}catch(e){J._debug("Exception during execution of extension",b,e);a=J.onExtensionException;if(d(a)){J._debug("Invoking extension exception callback",b,e);try{a.call(J,e,b,c,k)}catch(g){J._info("Exception during execution of exception callback in extension",b,g)}}return k}}function l(a){for(var f=0;f<fa.length&&!(void 0===a||null===a);++f){var b=fa[f],c=b.extension.outgoing;d(c)&&(b=k(b.extension,c,b.name,a,!0),a=void 0===b?a:b)}return a}function n(a,f){var b=V[a];if(b&&
0<b.length)for(var k=b.length-1;0<=k;--k){var c=b[k];try{c.callback.call(c.scope,f)}catch(e){J._debug("Exception during notification",c,f,e);var g=J.onListenerException;if(d(g)){J._debug("Invoking listener exception callback",c,e);try{g.call(J,e,c.handle,c.listener,f)}catch(l){J._info("Exception during execution of listener callback",c,l)}}}}}function p(a,f){n(a,f);for(var b=a.split("/"),k=b.length-1,c=k;0<c;--c){var d=b.slice(0,c).join("/")+"/*";c===k&&n(d,f);d+="*";n(d,f)}}function m(){null!==oa&&
h.cometd.Utils.clearTimeout(oa);oa=null}function q(a){m();var f=z.interval+aa;J._debug("Function scheduled in",f,"ms, interval \x3d",z.interval,"backoff \x3d",aa,a);oa=h.cometd.Utils.setTimeout(J,a,f)}function r(a,f,b,k){for(var c=0;c<f.length;++c){var e=f[c];e.id=""+ ++ea;Y&&(e.clientId=Y);var g=void 0;d(e._callback)&&(g=e._callback,delete e._callback);e=l(e);void 0!==e&&null!==e?(f[c]=e,g&&(D[e.id]=g)):f.splice(c--,1)}0!==f.length&&(c=U.url,U.appendMessageTypeToURL&&(c.match(/\/$/)||(c+="/"),k&&
(c+=k)),a={url:c,sync:a,messages:f,onSuccess:function(a){try{ja.call(J,a)}catch(f){J._debug("Exception during handling of messages",f)}},onFailure:function(a,f,b,k){try{pa.call(J,a,f,b,k)}catch(c){J._debug("Exception during handling of failure",c)}}},J._debug("Send",a),S.send(a,b))}function s(a){0<$||!0===ga?da.push(a):r(!1,[a],!1)}function t(){var a=da;da=[];0<a.length&&r(!1,a,!1)}function u(){a("connecting");q(function(){if(!f()){var b={channel:"/meta/connect",connectionType:S.getType()};la||(b.advice=
{timeout:0});a("connecting");J._debug("Connect sent",b);r(!1,[b],!0,"connect");a("connected")}})}function v(a){a&&(z=J._mixin(!1,{},U.advice,a),J._debug("New advice",z))}function w(f){m();f&&S.abort();Y=null;a("disconnected");aa=$=0;0<da.length&&(pa.call(J,void 0,da,"error","Disconnected"),da=[])}function x(k){Y=null;b();f()?(W.reset(),v(U.advice)):v(J._mixin(!1,z,{reconnect:"retry"}));$=0;ga=!0;X=k;k=W.findTransportTypes("1.0",T,U.url);var c=J._mixin(!1,{},X,{version:"1.0",minimumVersion:"0.9",channel:"/meta/handshake",
supportedConnectionTypes:k,advice:{timeout:z.timeout,interval:z.interval}});S=W.negotiateTransport(k,"1.0",T,U.url);J._debug("Initial transport is",S.getType());a("handshaking");J._debug("Handshake sent",c);r(!1,[c],!1,"handshake")}function A(){a("handshaking");ga=!0;q(function(){x(X)})}function B(a){p("/meta/handshake",a);p("/meta/unsuccessful",a);!f()&&"none"!==z.reconnect?(aa<U.maxBackoff&&(aa+=U.backoffIncrement),A()):w(!1)}function F(a){p("/meta/connect",a);p("/meta/unsuccessful",a);a=f()?"none":
z.reconnect;switch(a){case "retry":u();aa<U.maxBackoff&&(aa+=U.backoffIncrement);break;case "handshake":W.reset();aa=0;A();break;case "none":w(!1);break;default:throw"Unrecognized advice action"+a;}}function G(a){w(!0);p("/meta/disconnect",a);p("/meta/unsuccessful",a)}function H(a){p("/meta/subscribe",a);p("/meta/unsuccessful",a)}function I(a){p("/meta/unsubscribe",a);p("/meta/unsuccessful",a)}function K(a){var f=D[a.id];d(f)&&(delete D[a.id],f.call(J,a))}function C(a){K(a);p("/meta/publish",a);p("/meta/unsuccessful",
a)}function M(a){for(var b=0;b<fa.length&&!(void 0===a||null===a);++b){var c=fa[U.reverseIncomingExtensions?fa.length-1-b:b],e=c.extension.incoming;d(e)&&(c=k(c.extension,e,c.name,a,!1),a=void 0===c?a:c)}if(!(void 0===a||null===a))switch(v(a.advice),a.channel){case "/meta/handshake":if(a.successful){Y=a.clientId;b=W.negotiateTransport(a.supportedConnectionTypes,a.version,T,U.url);if(null===b)throw"Could not negotiate transport with server; client "+W.findTransportTypes(a.version,T,U.url)+", server "+
a.supportedConnectionTypes;S!==b&&(J._debug("Transport",S,"-\x3e",b),S=b);ga=!1;t();a.reestablish=ba;ba=!0;p("/meta/handshake",a);a=f()?"none":z.reconnect;switch(a){case "retry":aa=0;u();break;case "none":w(!1);break;default:throw"Unrecognized advice action "+a;}}else B(a);break;case "/meta/connect":if(la=a.successful)switch(p("/meta/connect",a),a=f()?"none":z.reconnect,a){case "retry":aa=0;u();break;case "none":w(!1);break;default:throw"Unrecognized advice action "+a;}else F(a);break;case "/meta/disconnect":a.successful?
(w(!1),p("/meta/disconnect",a)):G(a);break;case "/meta/subscribe":a.successful?p("/meta/subscribe",a):H(a);break;case "/meta/unsubscribe":a.successful?p("/meta/unsubscribe",a):I(a);break;default:void 0===a.successful?void 0!==a.data&&null!==a.data?p(a.channel,a):J._debug("Unknown message",a):a.successful?(K(a),p("/meta/publish",a)):C(a)}}function Q(a){if(a=V[a])for(var f=0;f<a.length;++f)if(a[f])return!0;return!1}function L(a,f){var b={scope:a,method:f};if(d(a))b.scope=void 0,b.method=a;else if(g(f)){if(!a)throw"Invalid scope "+
a;b.method=a[f];if(!d(b.method))throw"Invalid callback "+f+" for scope "+a;}else if(!d(f))throw"Invalid callback "+f;return b}function N(a,f,b,k){f=L(f,b);J._debug("Adding listener on",a,"with scope",f.scope,"and callback",f.method);k={channel:a,scope:f.scope,callback:f.method,listener:k};f=V[a];f||(f=[],f.subscriptionCounter=0,V[a]=f);f.push(k);b=f.subscriptionCounter;f.subscriptionCounter+=1;k.id=b;k.handle=[a,b];J._debug("Added listener",k,"for channel",a,"having id \x3d",b);return k.handle}var J=
this,O=e||"default",T=!1,W=new h.cometd.TransportRegistry,S,R="disconnected",ea=0,Y=null,$=0,da=[],ga=!1,V={},aa=0,oa=null,fa=[],z={},X,D={},ba=!1,la=!1,U={connectTimeout:0,maxConnections:2,backoffIncrement:1E3,maxBackoff:6E4,logLevel:"info",reverseIncomingExtensions:!0,maxNetworkDelay:1E4,requestHeaders:{},appendMessageTypeToURL:!0,autoBatch:!1,advice:{timeout:6E4,interval:0,reconnect:"retry"}};this._mixin=function(a,f,b){for(var k=f||{},c=2;c<arguments.length;++c){var d=arguments[c];if(!(void 0===
d||null===d))for(var e in d){var g=d[e],l=k[e];g!==f&&void 0!==g&&(k[e]=a&&"object"===typeof g&&null!==g?g instanceof Array?this._mixin(a,l instanceof Array?l:[],g):this._mixin(a,"object"===typeof l&&!(l instanceof Array)?l:{},g):g)}}return k};this._warn=function(){c("warn",arguments)};this._info=function(){"warn"!==U.logLevel&&c("info",arguments)};this._debug=function(){"debug"===U.logLevel&&c("debug",arguments)};this._isCrossDomain=function(a){return a&&a!==window.location.host};var ja,pa;this.send=
s;this.receive=M;ja=function(a){J._debug("Received",a);for(var f=0;f<a.length;++f)M(a[f])};pa=function(a,f,b,k){J._debug("handleFailure",a,f,b,k);for(b=0;b<f.length;++b){var c=f[b];switch(c.channel){case "/meta/handshake":B({successful:!1,failure:!0,channel:"/meta/handshake",request:c,xhr:a,advice:{reconnect:"retry",interval:aa}});break;case "/meta/connect":k=a;la=!1;F({successful:!1,failure:!0,channel:"/meta/connect",request:c,xhr:k,advice:{reconnect:"retry",interval:aa}});break;case "/meta/disconnect":G({successful:!1,
failure:!0,channel:"/meta/disconnect",request:c,xhr:a,advice:{reconnect:"none",interval:0}});break;case "/meta/subscribe":H({successful:!1,failure:!0,channel:"/meta/subscribe",request:c,xhr:a,advice:{reconnect:"none",interval:0}});break;case "/meta/unsubscribe":I({successful:!1,failure:!0,channel:"/meta/unsubscribe",request:c,xhr:a,advice:{reconnect:"none",interval:0}});break;default:C({successful:!1,failure:!0,channel:c.channel,request:c,xhr:a,advice:{reconnect:"none",interval:0}})}}};this.registerTransport=
function(a,f,b){if(b=W.add(a,f,b))this._debug("Registered transport",a),d(f.registered)&&f.registered(a,this);return b};this.getTransportTypes=function(){return W.getTransportTypes()};this.unregisterTransport=function(a){var f=W.remove(a);null!==f&&(this._debug("Unregistered transport",a),d(f.unregistered)&&f.unregistered());return f};this.unregisterTransports=function(){W.clear()};this.findTransport=function(a){return W.find(a)};this.configure=function(a){J._debug("Configuring cometd object with",
a);g(a)&&(a={url:a});a||(a={});U=J._mixin(!1,U,a);if(!U.url)throw"Missing required configuration parameter 'url' specifying the Bayeux server URL";var f=/(^https?:\/\/)?(((\[[^\]]+\])|([^:\/\?#]+))(:(\d+))?)?([^\?#]*)(.*)?/.exec(U.url);a=f[8];var b=f[9];T=J._isCrossDomain(f[2]);U.appendMessageTypeToURL&&(void 0!==b&&0<b.length?(J._info("Appending message type to URI "+a+b+" is not supported, disabling 'appendMessageTypeToURL' configuration"),U.appendMessageTypeToURL=!1):(f=a.split("/"),b=f.length-
1,a.match(/\/$/)&&(b-=1),0<=f[b].indexOf(".")&&(J._info("Appending message type to URI "+a+" is not supported, disabling 'appendMessageTypeToURL' configuration"),U.appendMessageTypeToURL=!1)))};this.init=function(a,f){this.configure(a);this.handshake(f)};this.handshake=function(f){a("disconnected");ba=!1;x(f)};this.disconnect=function(b,k){if(!f()){void 0===k&&"boolean"!==typeof b&&(k=b,b=!1);var c=this._mixin(!1,{},k,{channel:"/meta/disconnect"});a("disconnecting");r(!0===b,[c],!1,"disconnect")}};
this.startBatch=function(){++$};this.endBatch=function(){--$;if(0>$)throw"Calls to startBatch() and endBatch() are not paired";0===$&&(!f()&&!ga)&&t()};this.batch=function(a,f){var b=L(a,f);this.startBatch();try{b.method.call(b.scope),this.endBatch()}catch(k){throw this._debug("Exception during execution of batch",k),this.endBatch(),k;}};this.addListener=function(a,f,b){if(2>arguments.length)throw"Illegal arguments number: required 2, got "+arguments.length;if(!g(a))throw"Illegal argument type: channel must be a string";
return N(a,f,b,!0)};this.removeListener=function(a){if(!h.cometd.Utils.isArray(a))throw"Invalid argument: expected subscription, not "+a;var f=V[a[0]],b;if(0<f.length){b=a[1];a:{for(var k=0;k<f.length;){if(f[k].id===b){b=k;break a}k+=1}b=-1}-1!==b&&(f.splice(b,1),J._debug("Removed listener",a))}};this.clearListeners=function(){V={}};this.subscribe=function(a,b,k,c){if(2>arguments.length)throw"Illegal arguments number: required 2, got "+arguments.length;if(!g(a))throw"Illegal argument type: channel must be a string";
if(f())throw"Illegal state: already disconnected";d(b)&&(c=k,k=b,b=void 0);var e=!Q(a),l=N(a,b,k,!1);e&&(e=this._mixin(!1,{},c,{channel:"/meta/subscribe",subscription:a}),s(e));return l};this.unsubscribe=function(a,b){if(1>arguments.length)throw"Illegal arguments number: required 1, got "+arguments.length;if(f())throw"Illegal state: already disconnected";this.removeListener(a);var k=a[0];Q(k)||(k=this._mixin(!1,{},b,{channel:"/meta/unsubscribe",subscription:k}),s(k))};this.clearSubscriptions=function(){b()};
this.publish=function(a,b,k,c){if(1>arguments.length)throw"Illegal arguments number: required 1, got "+arguments.length;if(!g(a))throw"Illegal argument type: channel must be a string";if(f())throw"Illegal state: already disconnected";d(b)?(c=b,b=k={}):d(k)&&(c=k,k={});var e=this._mixin(!1,{},k,{channel:a,data:b,_callback:c});s(e)};this.getStatus=function(){return R};this.isDisconnected=f;this.setBackoffIncrement=function(a){U.backoffIncrement=a};this.getBackoffIncrement=function(){return U.backoffIncrement};
this.getBackoffPeriod=function(){return aa};this.setLogLevel=function(a){U.logLevel=a};this.registerExtension=function(a,f){if(2>arguments.length)throw"Illegal arguments number: required 2, got "+arguments.length;if(!g(a))throw"Illegal argument type: extension name must be a string";for(var b=!1,k=0;k<fa.length;++k)if(fa[k].name===a){b=!0;break}if(b)return this._info("Could not register extension with name",a,"since another extension with the same name already exists"),!1;fa.push({name:a,extension:f});
this._debug("Registered extension",a);d(f.registered)&&f.registered(a,this);return!0};this.unregisterExtension=function(a){if(!g(a))throw"Illegal argument type: extension name must be a string";for(var f=!1,b=0;b<fa.length;++b){var k=fa[b];if(k.name===a){fa.splice(b,1);f=!0;this._debug("Unregistered extension",a);a=k.extension;d(a.unregistered)&&a.unregistered();break}}return f};this.getExtension=function(a){for(var f=0;f<fa.length;++f){var b=fa[f];if(b.name===a)return b.extension}return null};this.getName=
function(){return O};this.getClientId=function(){return Y};this.getURL=function(){return U.url};this.getTransport=function(){return S};this.getConfiguration=function(){return this._mixin(!0,{},U)};this.getAdvice=function(){return this._mixin(!0,{},z)};h.cometd.WebSocket=window.WebSocket;h.cometd.WebSocket||(h.cometd.WebSocket=window.MozWebSocket)};return h.cometd})},"dojox/cometd/AckExtension":function(){define(["./cometd"],function(h){return h.AckExtension=function(){var e,g=!1,d=-1;this.registered=
function(c,b){e=b;e._debug("AckExtension: executing registration callback",void 0)};this.unregistered=function(){e._debug("AckExtension: executing unregistration callback",void 0);e=null};this.incoming=function(c){var b=c.channel;if("/meta/handshake"==b)g=c.ext&&c.ext.ack,e._debug("AckExtension: server supports acks",g);else if(g&&"/meta/connect"==b&&c.successful&&(b=c.ext)&&"number"===typeof b.ack)d=b.ack,e._debug("AckExtension: server sent ack id",d);return c};this.outgoing=function(c){var b=c.channel;
"/meta/handshake"==b?(c.ext||(c.ext={}),c.ext.ack=e&&!1!==e.ackEnabled,d=-1):g&&"/meta/connect"==b&&(c.ext||(c.ext={}),c.ext.ack=d,e._debug("AckExtension: client sending ack id",d));return c}}})},"mw-remote/iframeproxy/IframeProxyClient":function(){define("dojo/_base/connect dojo/_base/declare dojo/_base/Deferred dojo/_base/json dojo/_base/lang dojo/aspect dojo/dom-construct require mw-log/Log ./CheckUrlService".split(" "),function(h,e,g,d,c,b,a,f,k,l){var n=this,p=e([],{IFRAME_TIMEOUT:2E4,LATEST_VERSION:"1.5",
REMOTE_PROXY:"/remote/proxy/",constructor:function(a){this.iframeId=a||"remoteProducer";this._messageId=0;this._loaded=!1;this._pendingQueue=[];this._transactions={};this._uploadTargetCallbacks={};this._loadTimeoutHandle=this._checkUrl=null;this._errorRate=0},setRemotePageHost:function(a,f,b,k,c){a=this._combineUriPaths(a||"","/");f=f||"";c=c||this.LATEST_VERSION;k=k||"";this.computeToken=b;a===this._host&&f===this._key&&k===this._proxyUrl&&c===this._version||(this._errorLoading=this._loaded=!1,this._host=
a,this._key=f,this._version=c,this._proxyUrl=k,a=this._calculateUrls(a,f,c,k),this._createIframe(a))},_calculateUrls:function(a,f,b,k){var c=this.REMOTE_PROXY+b+"/iframeProxyRelease.html";b=this.REMOTE_PROXY+b+"/CheckJsFile.js";k&&(c=k);c=this._combineUriPaths(a,c).split("?")[0];c+=f?"?routingkey\x3d"+f:"";b=this._combineUriPaths(a,b);b=f?b+("?routingkey\x3d"+f):b+("?time\x3d"+(new Date).getTime());return{fastFailUrl:b,iFrameUrl:c}},_createIframe:function(f){var b=f.fastFailUrl,d=this;this._url=f.iFrameUrl;
this.remoteIframe&&a.destroy(this.remoteIframe);k.info("Creating iframe ["+this.iframeId+"] for "+this._url+" at "+new Date);this.remoteIframe=a.create("iframe",{id:this.iframeId,src:this._url,width:0,height:0,style:"visibility: hidden; display: none;"});this._checkUrl=(new l(b)).then(function(){},c.hitch(d,"_handleLoadTimeoutHitch"));this._loadTimeoutHandle=setTimeout(function(){d._handleLoadTimeoutHitch()},this.IFRAME_TIMEOUT);document.body.appendChild(this.remoteIframe);this._messageConnection||
(this._messageConnection=h.connect(n,"message",this,this._handleMessage))},_handleLoadTimeoutHitch:function(){if(!this._loaded)if("1.0"===this._version)this._handleLoadTimeout();else{clearTimeout(this._loadTimeoutHandle);var a=(parseFloat(this._version)-0.1).toFixed(1).toString();k.info("Unable to load proxy version "+this._version+", trying "+a+".");this.setRemotePageHost(this._host,this._key,this.computeToken,this._proxyUrl,a)}},createUploadIframeTarget:function(a,f,b){this._uploadTargetCallbacks[a]=
c.hitch(b||this,f);this._postMessage("createUploadIframe;"+a)},cancelUpload:function(a){this._postMessage("cancelUpload;"+a)},getUploadIframeProxyUrlPath:function(){return this.REMOTE_PROXY+this._version+"/uploadIframeProxy.html"},sendMessage:function(a,f,b){var c=this,e;this.computeToken&&(b=b||{},b.headers=b.headers||{},b.headers.computeToken=this.computeToken);e=this._getNewMessageId();f="sendMessage;"+e+";"+f+";"+(b?d.toJson(b):"{}");f+=";"+a;a={deferred:new g(function(){"1.0"===c._version?k.warn("Cancelling is not supported by the 1.0 remote proxy."):
c._postMessage("abort;"+e)}),id:e};this._errorLoading?a.deferred.reject("The iFrame did not load properly: "+this._url):(this._transactions[e]=a,this._postMessage(f));return a.deferred},setLatency:function(a){this._latency=a},setErrorRate:function(a){this._errorRate=a},_postMessage:function(a){this._loaded?this._postMessageNow(a):this._pendingQueue.push(a)},_handleMessage:function(a){var f,b;if(a.source===this.remoteIframe.contentWindow){b=a.data.indexOf(";");f=a.data.substring(0,b);if(!f)throw Error("Client unable to parse message, no action specified: "+
a.data);switch(f){case "ready":this._cleanupFailureChecks();this._loaded=!0;this._flushPending();break;case "sendMessageResponse":this._sendMessageResponse(a,b);break;case "uploadIframeMessage":f=a.data.indexOf(";",b+1);b=a.data.substring(b+1,f);a=a.data.substring(f+1,a.data.length);this._uploadTargetCallbacks[b](a);break;case "websocketOpened":this.onWebsocketOpen();break;case "websocketClosed":a=a.data.substring(b+1,a.data.length);a=JSON.parse(a);this.onWebsocketClose(a);break;case "websocketMsg":a=
a.data.substring(b+1,a.data.length);a=JSON.parse(a);this.onWebsocketMsg(a);break;case "websocketError":this.onWebsocketError();break;default:throw Error("Unknown action: "+f+", data: "+a.data);}}},_sendMessageResponse:function(a,f){var b,k,c=a.data.indexOf(";",f+1);b=a.data.indexOf(";",c+1);var e=a.data.substring(f+1,c),g=a.data.substring(c+1,b),c=a.data.substring(b+1,a.data.length);if(!e||!g)throw Error("Invalid message from remote iframe: "+a.data);b=this._transactions[e];if(!b)throw Error("Unknown transaction id: "+
e+", from remote iframe: "+a.data);delete this._transactions[e];if(!b.deferred.isCanceled())if("success"===g){try{k=c&&d.fromJson(c)}catch(l){k=c}k=""===k?{}:k;b.deferred.resolve(k)}else"fault"===g&&c&&(k=c.split(";"),e=k.length-1,1<=e&&(c.statusCode=k[e])),this.onError(c),b.deferred.reject(c)},_cleanupFailureChecks:function(){this._checkUrl&&!this._checkUrl.isFulfilled&&this._checkUrl.cancel("iFrame loaded...cancel URL check",!1);this._loadTimeoutHandle&&clearTimeout(this._loadTimeoutHandle);this._checkUrl=
this._loadTimeoutHandle=null},_handleLoadTimeout:function(){var a,f;this._cleanupFailureChecks();if(!this._loaded)for(f in a={code:"IframeLoadTimeout",description:"Iframe proxy loading failed due to an HTTP error",message:""},this.onError(a),this._errorLoading=!0,a=this._transactions,this._transactions={},a)a.hasOwnProperty(f)&&a[f].deferred.reject("Timeout while loading the iFrame "+this._url+" at "+new Date)},_postMessageNow:function(a){function f(){if(0<b._errorRate&&Math.random()<b._errorRate&&
0===a.indexOf("sendMessage;")){if(c=a.split(";",2)[1],d=b._transactions[c])delete b._transactions[c],k.error("Generating simulated error. Request was: ",a),b.onError("403 Forbidden;403"),d.deferred.reject("403 Forbidden;403")}else b.remoteIframe.contentWindow.postMessage(a,b._url)}var b=this,c,d;this._latency?setTimeout(f,this._latency):f()},_flushPending:function(){this._pendingQueue.forEach(this._postMessageNow,this);this._pendingQueue=[]},_getNewMessageId:function(){this._messageId+=1;return this._messageId.toString()},
onError:function(){},onWebsocketOpen:function(){},onWebsocketMsg:function(){},onWebsocketClose:function(){},onWebsocketError:function(){},_combineUriPaths:function(){return Array.prototype.slice.call(arguments).reduce(function(a,f){if(0===a.length)return f;0<f.length&&("/"===f[0]&&a.lastIndexOf("/")===a.length-1?f=f.substring(1):"/"!==f[0]&&a.lastIndexOf("/")!==a.length-1&&(a+="/"));return a+f})}});p.WebSocket=e([],{constructor:function(a){var f=this;this.proxyClient=p.WebSocket.proxyClient;this.proxyClient.computeToken&&
0<=a.indexOf("?")&&(a=a+"\x26computeToken\x3d"+this.proxyClient.computeToken);this.proxyClient._postMessage("connectWebsocket;"+a);b.after(this.proxyClient,"onWebsocketOpen",function(){f.onopen.apply(f,arguments)},!0);b.after(this.proxyClient,"onWebsocketMsg",function(){f.onmessage.apply(f,arguments)},!0);b.after(this.proxyClient,"onWebsocketClose",function(){f.onclose.apply(f,arguments)},!0);b.after(this.proxyClient,"onWebsocketError",function(){f.onerror.apply(f,arguments)},!0)},onopen:function(){},
onmessage:function(){},onclose:function(){},onerror:function(){},send:function(a){this.proxyClient._postMessage("websocketSend;"+a)},close:function(){this.proxyClient._postMessage("closeWebsocket;")}});return p})},"mw-remote/iframeproxy/CheckUrlService":function(){define(["dojo/_base/declare","dojo/dom","dojo/on","dojo/request/script","mw-log/Log"],function(h,e,g,d,c){return function(b){var a,f,k;if(!b)throw Error("Expected a valid url in urlToEmptyJsFile");a={framedoc:null};f=d.get(b,a,!0);a=e.byId(f.id,
a.frameDoc);k=g(a,"error",function(a){c.info("CheckUrlService detected an error accessing url: "+b);f.handleResponse(null,a);k.remove()});return f.promise}})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),function(h,e,g,d,c,b,a,f,k,l,n){function p(a,f){a.canDelete&&t._remove(a.id,f.options.frameDoc,!0)}function m(a){B&&B.length&&(c.forEach(B,function(a){t._remove(a.id,a.frameDoc);
a.frameDoc=null}),B=[]);return a.options.jsonp?!a.data:!0}function q(a){return!!this.scriptLoaded}function r(a){return(a=a.options.checkString)&&eval("typeof("+a+') !\x3d\x3d "undefined"')}function s(a,f){if(this.canDelete){var b=this.response.options;B.push({id:this.id,frameDoc:b.ioArgs?b.ioArgs.frameDoc:b.frameDoc});b.ioArgs&&(b.ioArgs.frameDoc=null);b.frameDoc=null}f?this.reject(f):this.resolve(a)}function t(f,k,c){var d=g.parseArgs(f,g.deepCopy({},k));f=d.url;k=d.options;var l=g.deferred(d,p,
m,k.jsonp?null:k.checkString?r:q,s);b.mixin(l,{id:u+v++,canDelete:!1});k.jsonp&&(RegExp("[?\x26]"+k.jsonp+"\x3d").test(f)||(f+=(~f.indexOf("?")?"\x26":"?")+k.jsonp+"\x3d"+(k.frameDoc?"parent.":"")+u+"_callbacks."+l.id),l.canDelete=!0,A[l.id]=function(a){d.data=a;l.handleResponse(d)});g.notify&&g.notify.emit("send",d,l.promise.cancel);if(!k.canAttach||k.canAttach(l)){var n=t._attach(l.id,f,k.frameDoc);if(!k.jsonp&&!k.checkString)var h=a(n,w,function(a){if("load"===a.type||x.test(n.readyState))h.remove(),
l.scriptLoaded=a})}a.once(n,"error",function(a){l.reject(a);t._remove(l.id,k.frameDoc,!0)});e(l);return c?l:l.promise}l.add("script-readystatechange",function(a,f){return"undefined"!==typeof f.createElement("script").onreadystatechange&&("undefined"===typeof a.opera||"[object Opera]"!==a.opera.toString())});var u=h.id.replace(/[\/\.\-]/g,"_"),v=0,w=l("script-readystatechange")?"readystatechange":"load",x=/complete|loaded/,A=d.global[u+"_callbacks"]={},B=[];t.get=t;t._attach=function(a,f,b){b=b||n.doc;
var k=b.createElement("script");k.type="text/javascript";k.src=f;k.id=a;k.async=!0;k.charset="utf-8";return b.getElementsByTagName("head")[0].appendChild(k)};t._remove=function(a,b,c){k.destroy(f.byId(a,b));A[a]&&(c?A[a]=function(){delete A[a]}:delete A[a])};t._callbacksProperty=u+"_callbacks";return t})},"mw-messageservice/messageserviceimpl/MessageServiceBase":function(){define("dojo/_base/declare dojo/_base/json dojo/_base/lang dojo/aspect dojo/Deferred mw-statemachine/StateMachine mw-log/Log ./MessageServiceState".split(" "),
function(h,e,g,d,c,b,a,f){return h([f],{logSubscriptions:!1,constructor:function(){this.batching=!0;this.typeSerializers=[];this.typeDeserializers={};this.channelSubscriptions={}},setDelegate:function(a){this.inherited("setDelegate",arguments);d.after(this._delegate,"onMessage",g.hitch(this,this.handleMessage),!0)},publish:function(a,f){if(this.isConnected()||"resubscribing"===this._currentState){var b=this._queuePublish(a,this.serialize(f));this._deferProcessQueue();return b}return this._queuePublish(a,
this.serialize(f))},subscribe:function(f,b,c){this.logSubscriptions&&a.info("MessageService subscribe: "+f,b,c);this._addHandler(this.channelSubscriptions,f,b,c);return this.isConnected()||"resubscribing"===this._currentState?(f=this._queueSubscribe(f,b,c),this._deferProcessQueue(),f):this._queueSubscribe(f,b,c)},unsubscribe:function(f,b,d){this.logSubscriptions&&a.info("MessageService unsubscribe: "+f,b,d);if(this._removeHandler(this.channelSubscriptions,f,b,d))return this.isConnected()||"resubscribing"===
this._currentState?(f=this._queueUnsubscribe(f,b,d),this._deferProcessQueue(),f):(new c).resolve();a.error("Not subscribed to channel: "+f+", can't unsubscribe.");return(new c).reject("Not subscribed to channel: "+f+", can't unsubscribe.")},flush:function(){if(this.isConnected())this._processQueue();else throw Error("Can only manually flush the queue when connected.");},setLatency:function(a){this._delegate&&this._delegate.doSetLatency&&this._delegate.doSetLatency(a)},setErrorRate:function(a){this._delegate&&
this._delegate.doSetErrorRate&&this._delegate.doSetErrorRate(a)},_enterDisconnected:function(){this.inherited("_enterDisconnected",arguments);this._queuedOps=[]},_enterConnecting:function(){this.inherited("_enterConnecting",arguments);Object.keys(this.channelSubscriptions).forEach(function(a){a.subscribed=!1})},_enterConnected:function(){this.inherited("_enterConnected",arguments);this._processQueue()},_enterDisconnecting:function(){this._processQueue();this.inherited("_enterDisconnecting",arguments)},
_queuePublish:function(a,f){var b=new c;this._queuedOps.push({type:"publish",channel:a,data:f,deferred:b});return b.promise},_queueSubscribe:function(a,f,b){var d=new c;this._queuedOps.push({type:"subscribe",channel:a,handler:f,scope:b,deferred:d});return d.promise},_queueUnsubscribe:function(a,f,b){for(var d=new c,e,g=0;g<this._queuedOps.length;g++)if(e=this._queuedOps[g],"subscribe"===e.type&&e.channel===a&&e.handler===f&&e.scope===b)return this._queuedOps.splice(g,1),e.deferred.resolve(),(new c).resolve();
this._queuedOps.push({type:"unsubscribe",channel:a,handler:f,scope:b,deferred:d});return d.promise},_processQueue:function(){var a=this._delegate&&this._delegate.delegateConnected();(!this.isConnected()||!a)&&"disconnecting"!==this._currentState||(this._delegate.doStartBatch(),a=this._queuedOps,this._queuedOps=[],a.forEach(function(a){var f;"publish"===a.type?f=this._delegate.doPublish(a.channel,a.data):"subscribe"===a.type?f=this._doSubscribe(a.channel,a.handler,a.scope):"unsubscribe"===a.type&&
(f=this._doUnsubscribe(a.channel,a.handler,a.scope));f.then(a.deferred.resolve,a.deferred.reject)},this),this._delegate.doEndBatch())},_deferProcessQueue:function(){if(this.batching&&!this._deferredTimeout){var a=this;this._deferredTimeout=setTimeout(function(){a._deferredTimeout=!1;a._processQueue()},0)}else this.batching||this._processQueue()},_doSubscribe:function(a){if(this.channelSubscriptions[a].subscribed)return(new c).resolve();var f=this._delegate.doSubscribe(a);this.channelSubscriptions[a].subscribed=
!0;return f},_doUnsubscribe:function(a){return this.channelSubscriptions[a]?(new c).resolve():this._delegate.doUnsubscribe(a)},handleMessage:function(a){var f;if(a&&a.channel){a.data&&(a.data=this.deserialize(a.data));var b=a.channel.split("/");for(f=1;f<=b.length;f+=1)this._callHandlers(this.channelSubscriptions,b.slice(0,f).concat("**").join("/"),a);this._callHandlers(this.channelSubscriptions,b.slice(0,b.length-1).concat("*").join("/"),a);this._callHandlers(this.channelSubscriptions,b.concat("*").join("/"),
a);this._callHandlers(this.channelSubscriptions,a.channel,a)}},registerMessageHandler:function(f,b,c){a.error("registerMessageHandler is not supported any more.")},deregisterMessageHandler:function(f,b,c){a.error("deregisterMessageHandler is not supported any more.")},registerTypeSerializer:function(a,f,b){this.typeSerializers.push({typeMatcher:a,type:f,serializer:b})},registerTypeDeserializer:function(a,f){this.typeDeserializers[a]=f},serialize:function(a){return g.isArray(a)?this._serializeArray(a):
a instanceof Number||a instanceof Boolean||g.isString(a)?a:this._serializeObject(a)},deserialize:function(a){return g.isArray(a)?this._deserializeArray(a):a instanceof Number||a instanceof Boolean||g.isString(a)?a:this._deserializeObject(a)},_addHandler:function(f,b,c,d){var e;d=d||this;"string"===typeof c&&"function"!==typeof d[c]?a.warn("Not adding invalid handler: "+c):(e=f[b],e||(e=[],f[b]=e),f={channel:b,handler:c,scope:d},e.push(f),e.sort(function(a){return a.exclusive?-1:0}))},_removeHandler:function(a,
f,b,c){var d;d=a[f];b=this._getHandlerIndex(d,{handler:b,scope:c||this});0<=b&&d.splice(b,1);(!d||0===d.length)&&delete a[f];return 0<=b},_callHandlers:function(f,b,c){var d;if(f.hasOwnProperty(b)){f=f[b];for(d=0;d<f.length;d+=1)try{"string"===typeof f[d].handler?f[d].scope[f[d].handler].call(f[d].scope,c):f[d].handler.call(f[d].scope,c)}catch(g){a.error("Error while executing message handler on channel: "+b+", message: "+e.toJson(c)+", error: ",g)}}},_getHandlerIndex:function(a,f){if(!a)return-1;
var b;for(b=0;b<a.length;b+=1)if(f.handler===a[b].handler&&f.scope===a[b].scope)return b;return-1},_serializeObject:function(a){var f,b;for(b=0;b<this.typeSerializers.length;b+=1){var c=this.typeSerializers[b];if(c.typeMatcher(a))return{__type__:c.type,__value__:c.serializer.call(this,a)}}if(a instanceof Image)return a;for(f in a)a.hasOwnProperty(f)&&(a[f]=this.serialize(a[f]));return a},_serializeArray:function(a){var f,b=a.length;for(f=0;f<b;f+=1)a[f]=this.serialize(a[f]);return a},_deserializeObject:function(f){var b;
if(void 0===f||null===f)return null;if(f.hasOwnProperty("__type__")&&f.hasOwnProperty("__value__"))try{return this.typeDeserializers[f.__type__].call(this,f.__value__)}catch(c){a.error("Error while trying to deserialize: ",f,"Error: ",c)}for(b in f)f.hasOwnProperty(b)&&(null!==f[b]&&void 0!==f[b])&&(f[b]=this.deserialize(f[b]));return f},_deserializeArray:function(a){var f,b=a.length;for(f=0;f<b;f+=1)a[f]=this.deserialize(a[f]);return a}})})},"mw-statemachine/StateMachine":function(){define(["dojo/_base/declare",
"./statemachineimpl/State"],function(h,e){return h([],{constructor:function(g){g.stateMachine=this;this.state=new e(g)},start:function(){this.state.enter()},stop:function(){this.state.exit()},_changeState:function(e,d){this.state.enter(e,d)},onEnterState:function(e){},onExitState:function(e){}})})},"mw-statemachine/statemachineimpl/State":function(){define("dojo/_base/declare dojo/_base/lang mw-log/Log ./EventTrigger ./MessageTrigger ./RemoteTrigger ./TimeoutTrigger ./Transition".split(" "),function(h,
e,g,d,c,b,a,f){var k;return k=h([],{constructor:function(a){this.stateMachine=a.stateMachine||{_changeState:function(){},onEnterState:function(){},onExitState:function(){}};this.namespace=a.namespace||"";this.name=a.name||this.getDefaultName();this.context=a.context||{};this.data=a.data||{};this.composition=a.composition||"XOR";this.defaultSubstate=a.defaultSubstate||"";this.constructSubstates(a.substates);this.constructTriggersAndTransitions(a.transitions);this.active=a.active||!1},getDefaultName:function(){var a;
0<this.namespace.length?(a=this.namespace.split("."),a=a.pop()):g.warn("State: state name is not specified.");return a||""},constructSubstates:function(a){var f={},b,c;for(b in a)a.hasOwnProperty(b)&&(c=a[b],c.name&&c.name!==b&&g.error("State: error constructing substate: "+b+", the specified names don't match: "+c.name),c.name=b,c.namespace=c.namespace||[this.namespace,this.name].join("."),c.stateMachine=c.stateMachine||this.stateMachine,c.context=c.context||this.context,f[c.name]=new k(c));this.substates=
f},constructTriggersAndTransitions:function(a){var f,b={},c=[],k;for(f in a)a.hasOwnProperty(f)&&((k=this.constructTrigger(f))&&c.push(k),b[f]=this.constructTransition(f,a[f]));this.transitions=b;this.triggers=c},constructTrigger:function(f){var k,g,m;k=f.split(" ");if(2===k.length)"subscribe"===k[0]?m=c:"response"===k[0]||"fault"===k[0]?m=b:"timeout"===k[0]&&(m=a);else if("onEnterState"!==f||"onExitState"!==f)m=d;m&&(g=new m({name:f,context:this.context,triggerHandler:e.hitch(this,this.handleTrigger)}));
return g},constructTransition:function(a,b){var c;if(e.isFunction(b)||e.isString(b)||e.isArray(b))"onEnterState"===a||"onExitState"===a?(c=b,b={},b.action=c,b.target=""):(c=b,b={},b.target=c);b.state=this;return new f(b)},enter:function(a,f){this.active||(this.active=!0,this.enableTriggers(),this.stateMachine.onEnterState(this.name),this.handleTrigger.apply(this,["onEnterState"].concat(f)));a?this.changeSubstates(a,f):this.changeToDefaultSubstate(f)},exit:function(){var a=this.activeSubstates();this.active=
!1;this.disableTriggers();a.forEach(function(a){a.exit()});this.handleTrigger("onExitState");this.stateMachine.onExitState(this.name)},enableTriggers:function(){this.triggers.forEach(function(a){a.enable()})},disableTriggers:function(){this.triggers.forEach(function(a){a.disable()})},handleTrigger:function(a){var f,b;if(this.transitions[a]&&(b=Array.prototype.slice.call(arguments,1,arguments.length),f=this.transitions[a].handleTrigger(a,b)))e.isString(f)||(b=f.args,f=f.target),this.stateMachine._changeState(f,
b)},changeSubstates:function(a,f){var b=this.activeSubstates();this.substates[a]&&(0<=b.length&&b[0].name!==a&&b.forEach(function(a){a.exit()}),this.substates[a].enter(void 0,f))},changeToDefaultSubstate:function(a){0===this.activeSubstates().length&&this.substates[this.defaultSubstate]&&this.substates[this.defaultSubstate].enter(void 0,a)},activeSubstates:function(){var a=[],f;for(f in this.substates)this.substates.hasOwnProperty(f)&&this.substates[f].active&&a.push(this.substates[f]);return a}})})},
"mw-statemachine/statemachineimpl/EventTrigger":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","mw-log/Log","./Trigger"],function(h,e,g,d,c){return h(c,{constructor:function(){this.connection={}},enable:function(){e.isFunction(this.context[this.name])&&(this.cachedFunction=this.context[this.name]);this.connection=g.after(this.context,this.name,e.hitch(null,this.triggerHandler,this.name),!0)},disable:function(){this.connection.remove();this.cachedFunction&&(this.context[this.name]=
this.cachedFunction)}})})},"mw-statemachine/statemachineimpl/Trigger":function(){define(["dojo/_base/declare"],function(h){return h([],{constructor:function(e){this.name="";this.context={};this.triggerHandler=e.triggerHandler||function(){};h.safeMixin(this,e)},enable:function(){},disable:function(){}})})},"mw-statemachine/statemachineimpl/MessageTrigger":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","mw-log/Log","./Trigger"],function(h,e,g,d,c){return h(c,{constructor:function(){var b=
this.name.split(" ");(2>b.length||"subscribe"!==b[0])&&d.error("Invalid trigger name for a MessageTrigger. Could not parse out the message name.");this.messageId=b[1]||"";this.subscrition={}},enable:function(){this.subscription=g.subscribe(this.messageId,e.hitch(null,this.triggerHandler,this.name))},disable:function(){this.subscription.remove()}})})},"mw-statemachine/statemachineimpl/RemoteTrigger":function(){define(["dojo/_base/declare","dojo/_base/lang","mw-log/Log","mw-remote/Remote","./Trigger"],
function(h,e,g,d,c){return h(c,{constructor:function(){var b=this.name.split(" ");(2>b.length||"response"!==b[0]&&"fault"!==b[0])&&g.error("Invalid trigger name for a RemoteTrigger. Could not parse out the type of handler.");(!d.registerResponseHandler||!d.registerFaultHandler)&&g.error("The remote package is not available, this type of trigger will not work.");this.messageId=b[1]||"";this.handlerType=b[0]},enable:function(){"response"===this.handlerType?d.registerResponseHandler(this.messageId,e.hitch(null,
this.triggerHandler,this.name)):d.registerFaultHandler(this.messageId,e.hitch(null,this.triggerHandler,this.name))},disable:function(){"response"===this.handlerType?d.deregisterResponseHandler(this.messageId):d.deregisterFaultHandler(this.messageId)}})})},"mw-remote/Remote":function(){define("dojo/_base/lang dojo/aspect ./iframeproxy/IframeProxyClient ./iframeproxy/IframeJsonTransaction ./impl/FaultManager ./impl/RequestManager ./impl/ResponseManager ./impl/Transaction ./RemoteEndPointsManager mw-log/Log ./serviceRegistryLookup!".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n){var p=this,m;m={reset:function(){var q=[],r=new c,s=new a({faultManager:r}),t=new b({responseManager:s});m.faultManager=r;m.responseManager=s;m.requestManager=t;m._serviceRegistryLookup=n;m._uploadIframeProxyUrlParameters=["?computeToken\x3d","","\x26routingkey\x3d",""];var u=m.proxyClient=new g;m.createUploadIframeTarget=h.hitch(u,u.createUploadIframeTarget);m.cancelUpload=h.hitch(u,u.cancelUpload);k.setIframeProxyClientForEndPoint(k.getEndPointNames().ROUTER_LEAF_SECURE_ENDPOINT,
u);k.setIframeProxyClientForEndPoint(k.getEndPointNames().ROUTER_LEAF_INSECURE_ENDPOINT,u);f.construct=function(a){a=a||{};k.getRoutingHost(k.getEndPointNames().ROUTER_LEAF_INSECURE_ENDPOINT)||m.setEndpoint();a.allowedMessages=q;a.sendMessage=m.sendMessage;a.computeSessionId=m.getComputeSessionId;return new d(a)};m.registerEndpointLevelFaultHandler=h.hitch(r,r.registerEndpointLevelFaultHandler);m.sendMessage=h.hitch(t,t.sendMessage);m.registerDefaultMessageFactory=h.hitch(t,t.registerDefaultMessageFactory);
m.deregisterDefaultMessageFactory=h.hitch(t,t.deregisterDefaultMessageFactory);m.registerResponseHandler=h.hitch(s,s.registerResponseHandler);m.deregisterResponseHandler=h.hitch(s,s.deregisterResponseHandler);m.registerFaultHandler=h.hitch(r,r.registerFaultHandler);m.deregisterFaultHandler=h.hitch(r,r.deregisterFaultHandler);m.registerTopLevelFaultHandler=h.hitch(r,r.registerTopLevelFaultHandler);m.deregisterTopLevelFaultHandler=h.hitch(r,r.deregisterTopLevelFaultHandler);m.setServiceEndPoint=function(a,
f,b){k.setRoutingHostAndRoutingKey(a,f,b)};m.setServicePathSuffixForEndPoint=function(a,f){k.setPathSuffixForEndPoint(a,f)};m.ignoreTopLevelFault=m.registerTopLevelFaultHandler;m.setComputeToken=function(a){m._uploadIframeProxyUrlParameters[1]=a.computeSessionId;t.computeToken=a};m.setWorkerEndpoint=function(a,f){m._uploadIframeProxyUrlParameters[3]=f;k.setRoutingHostAndRoutingKey(k.getEndPointNames().WORKER_ENDPOINT,a,f)};m.setEndpoint=function(a){a||(a=m._serviceRegistryLookup.getServiceRegistryEndpoint("primary"),
a||(l.info("ServiceRegistryLookup is empty, falling back to localhost"),a="/"));if(!a||"/"===a)a=p.location.protocol+"//"+p.location.host+"/";k.setRoutingHostAndRoutingKey(k.getEndPointNames().ROUTER_LEAF_SECURE_ENDPOINT,a);k.setRoutingHostAndRoutingKey(k.getEndPointNames().ROUTER_LEAF_INSECURE_ENDPOINT,a);u.setRemotePageHost(a)};m.setAllowedMessages=function(a){q=a};m.allowAllMessages=function(){q=[]};m.getEndPoint=function(){return k.getRoutingHost(k.getEndPointNames().ROUTER_LEAF_SECURE_ENDPOINT)};
m.getUploadIframeProxyUrl=function(){var a=m.getWorkerRoutingHost();"/"===a.slice(-1)&&(a=a.slice(0,-1));return a+u.getUploadIframeProxyUrlPath()+m._uploadIframeProxyUrlParameters.join("")};m.getComputeSessionId=function(){return t.computeToken?t.computeToken.computeSessionId:12345};m.getWorkerRoutingHost=function(){var a=k.getRoutingHost(k.getEndPointNames().WORKER_ENDPOINT);return a?a:location.protocol+"//"+location.host+"/"};m.getWorkerRoutingKey=function(){return k.getRoutingKey(k.getEndPointNames().WORKER_ENDPOINT)};
m.getServiceRegistryEndpoint=function(a){return m._serviceRegistryLookup.getServiceRegistryEndpoint(a)};m.enableServerOnWorkerAsync=function(){k.enableEndPoint(k.getEndPointNames().WORKER_ASYNC_ENDPOINT)};m.disableServerOnWorkerAsync=function(){k.disableEndPoint(k.getEndPointNames().WORKER_ASYNC_ENDPOINT)};m.isServerOnWorkerAsyncEnabled=function(){return k.isEndPointEnabled(k.getEndPointNames().WORKER_ASYNC_ENDPOINT)};m.enableServerOnWorker=function(){k.enableEndPoint(k.getEndPointNames().WORKER_ENDPOINT)};
m.disableServerOnWorker=function(){k.disableEndPoint(k.getEndPointNames().WORKER_ENDPOINT)};m.isWorkerEndpointEnabled=function(){return k.isEndPointEnabled(k.getEndPointNames().WORKER_ENDPOINT)};m.setWorkerOnlyMessageTypes=function(a){k.setMessageTypesToEndPoint(k.getEndPointNames().WORKER_ENDPOINT,a)};e.after(u,"onError",function(a){a&&r.handleNonTransactionFault(a)},!0)}};m.reset();return m})},"mw-remote/iframeproxy/IframeJsonTransaction":function(){define(["dojo/_base/declare","mw-remote/impl/JsonTransaction",
"mw-remote/RemoteEndPointsManager"],function(h,e,g){return h([e],{constructor:function(d){d=d||{};this.proxyClient=d.proxyClient;this.workerProxyClient=d.workerProxyClient;this.routingHost=d.routingHost;this.routingKey=d.routingKey;this.computeSessionId=d.computeSessionId},_doSend:function(d){return g.getIframeProxyClientForEndPoint(this.endPointName).sendMessage(d,g.getRemoteUrlForEndPoint(this.endPointName))}})})},"mw-remote/impl/JsonTransaction":function(){define("dojo/_base/declare dojo/_base/xhr dojo/_base/json dojo/_base/lang mw-remote/RemoteEndPointsManager ./Transaction".split(" "),
function(h,e,g,d,c,b){return h(b,{constructor:function(a){a=a||{};this.uuid=a.uuid||this._generateUuid()},_getRequest:function(a){var f=null;c.isEndpointMessageContainerBased(this.endPointName)?(f={uuid:this.uuid,messages:a},this.computeToken&&(f.computeToken=this.computeToken)):Object.keys(a).forEach(function(b){f=a[b]});this._sanitizeForJson(f);return g.toJson(f)},_sanitizeForJson:function(a){var f;if(d.isArray(a))a.forEach(this._sanitizeForJson,this);else if(d.isObject(a))for(f in a)a.hasOwnProperty(f)&&
(void 0===a[f]?delete a[f]:(d.isObject(a[f])||d.isArray(a[f]))&&this._sanitizeForJson(a[f]))},_doSend:function(a){return e.post({url:this._getEndpoint(),contentType:"application/json",handleAs:"json",postData:a})},_processResponse:function(a){this.stopTime=(new Date).getTime();a?(a.fault&&(this.fault=a.fault),this.responseMessages=a.messages?a.messages:a):this.fault={faultCode:"Connection.Fault",message:"Unable to communicate with server, no response."}},_processFault:function(a){this.stopTime=(new Date).getTime();
this.fault={faultCode:"Connection.Fault",message:a}}})})},"mw-remote/RemoteEndPointsManager":function(){define(["./EndPointsManager"],function(h){var e=null;null===e&&(e=new h);return e})},"mw-remote/EndPointsManager":function(){define(["dojo/_base/declare","dojo/_base/array","./iframeproxy/IframeProxyClient"],function(h,e,g){return h([],{constructor:function(){this._initializeEndPointsCollection()},_initializeEndPointsCollection:function(){this.endPointsCollection={ROUTER_LEAF_INSECURE_ENDPOINT:{routingHost:"",
routingKey:"",iframeProxy:null,enabled:!0,iframeProxyUrl:"",pathSuffix:"messageservice/json",messages:"RouterLogin CreateAccount CurrentUser Login UpdateAccount ServiceRegistry ClientType AuthorizationDetails".split(" "),iframeProxyName:"remoteProducer",acceptsMessageContainerMessages:!0},ROUTER_LEAF_SECURE_ENDPOINT:{routingHost:"",routingKey:"",iframeProxy:null,enabled:!0,iframeProxyUrl:"",pathSuffix:"messageservice/json/secure",messages:[],iframeProxyName:"remoteProducer",acceptsMessageContainerMessages:!0},
WORKER_ENDPOINT:{routingHost:"",routingKey:"",iframeProxy:null,enabled:!1,iframeProxyUrl:"",pathSuffix:"messageservice/json/secure",messages:[],iframeProxyName:"remoteWorkerProducer",acceptsMessageContainerMessages:!0},WORKER_ASYNC_ENDPOINT:{routingHost:"",routingKey:"",iframeProxy:null,enabled:!0,iframeProxyUrl:"",pathSuffix:"messageservice/async",messages:[],acceptsMessageContainerMessages:!0},USAGE_DATA_ROUTER_ENDPOINT:{routingHost:"",routingKey:"",iframeProxy:null,enabled:!0,iframeProxyUrl:"",
pathSuffix:"udc/service/v1/events",messages:["UsageDataEventCollection"],iframeProxyName:"remoteUDCProducer",acceptsMessageContainerMessages:!1},HELP_DATA_ROUTER_ENDPOINT:{routingHost:"",routingKey:"",iframeProxy:null,enabled:!0,iframeProxyUrl:"",pathSuffix:"",messages:["HelpDataEventCollection"],iframeProxyName:"doc_center",acceptsMessageContainerMessages:!1}}},reset:function(){this._initializeEndPointsCollection()},setUpNewEndPoint:function(d,c,b,a,f){this.endPointsCollection[d]={routingHost:"",
routingKey:"",pathSuffix:b,enabled:c,messages:[],iframeProxy:null,iframeProxyName:a,acceptsMessageContainerMessages:f}},getPathSuffixForEndPoint:function(d){return this.endPointsCollection[d].pathSuffix},setPathSuffixForEndPoint:function(d,c){this.endPointsCollection[d].pathSuffix=c},getEndPointNames:function(){var d={},c;for(c in this.endPointsCollection)this.endPointsCollection.hasOwnProperty(c)&&(d[c]=c);return d},setRoutingHostAndRoutingKey:function(d,c,b){c&&c.lastIndexOf("/")!==c.length-1&&
(c+="/");this.endPointsCollection[d].routingHost=c;b&&(this.endPointsCollection[d].routingKey=b);c&&this._setIframeRoutingHostAndRoutingkey(d)},_setIframeRoutingHostAndRoutingkey:function(d){var c=this.getIframeProxyClientForEndPoint(d);c&&c.setRemotePageHost(this.endPointsCollection[d].routingHost,this.endPointsCollection[d].routingKey,null,this.endPointsCollection[d].iframeProxyUrl)},getRoutingHost:function(d){return this.endPointsCollection[d].routingHost},getRoutingKey:function(d){return this.endPointsCollection[d].routingKey},
getMessageTypesMappedToEndPoint:function(d){return this.endPointsCollection[d].messages},isEndPointEnabled:function(d){return this.endPointsCollection[d].enabled},setMessageTypesToEndPoint:function(d,c){this.endPointsCollection[d].messages=c},enableEndPoint:function(d){this.endPointsCollection[d].enabled=!0},disableEndPoint:function(d){this.endPointsCollection[d].enabled=!1},getEndPointForMessageType:function(d){var c=null,b;for(b in this.endPointsCollection)if(this.endPointsCollection.hasOwnProperty(b)&&
(c=-1<e.lastIndexOf(this.endPointsCollection[b].messages,d)?b:c))if(this.isEndPointEnabled(c))break;else c=null;return c?c:this.getEndPointNames().ROUTER_LEAF_SECURE_ENDPOINT},getRemoteUrlForEndPoint:function(d){var c=this.endPointsCollection[d].routingHost+this.endPointsCollection[d].pathSuffix;this.endPointsCollection[d].routingKey&&(c=c+"?routingkey\x3d"+this.endPointsCollection[d].routingKey);return c},setIframeProxyClientForEndPoint:function(d,c){this.endPointsCollection[d].iframeProxy=c},getIframeProxyClientForEndPoint:function(d){var c=
this.endPointsCollection[d].iframeProxy;c||(c=new g(this.endPointsCollection[d].iframeProxyName),this.endPointsCollection[d].iframeProxy=c);return c},isEndpointMessageContainerBased:function(d){return d&&this.endPointsCollection[d]?this.endPointsCollection[d].acceptsMessageContainerMessages:!0},addMessagesTypesToEndPoint:function(d,c){this.endPointsCollection[d]&&-1===this.endPointsCollection[d].messages.indexOf(c)&&this.endPointsCollection[d].messages.push(c)},removeMessageTypesFromEndPoint:function(d,
c){if(this.endPointsCollection[d]){var b=this.endPointsCollection[d].messages.indexOf(c);-1<b&&this.endPointsCollection[d].messages.splice(b,1)}}})})},"mw-remote/impl/Transaction":function(){define(["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/lang","mw-remote/RemoteEndPointsManager","mw-utils/Utils"],function(h,e,g,d,c){return h([],{constructor:function(b){b=b||{};this.requestMessages=b.requestMessages||{};this.responseMessages=b.responseMessages||{};this.context=b.context;this.computeToken=
b.computeToken;this.uuidClassifierMap=b.uuidClassifierMap||{};this.endPointName=b.endPointName||null;this.allowedMessages=b.allowedMessages||[];this.ignoreMessageTypes=b.ignoreMessageTypes||[];this.sendMessage=b.sendMessage},addRequestMessage:function(b,a,f){if(a){var c=d.isEndpointMessageContainerBased(this.endPointName);this.requestMessages[b]||(this.requestMessages[b]=[]);g.isArray(a)?a.forEach(function(a){this.addRequestMessage(b,a,f)},this):c?(a.uuid=a.uuid||this._generateUuid(),f&&(this.uuidClassifierMap[a.uuid]=
f),this.requestMessages[b].push(a)):this.requestMessages[b]=a;this.requestMessages=this._filterMessages(this.requestMessages)}},_filterMessages:function(b){var a={};this.getRequestMessageTypes().forEach(function(f){if(0===this.allowedMessages.length||0<=this.allowedMessages.indexOf(f))a[f]=b[f]},this);return a},getResponseMessageTypes:function(){var b,a=[];for(b in this.responseMessages)this.responseMessages.hasOwnProperty(b)&&a.push(b);return a},getRequestMessageTypes:function(){var b,a=[];for(b in this.requestMessages)this.requestMessages.hasOwnProperty(b)&&
a.push(b);return a},getMessageClassifier:function(b){return b&&b.uuid&&this.uuidClassifierMap.hasOwnProperty(b.uuid)?this.uuidClassifierMap[b.uuid]:""},send:function(){this._removeEmptyMessages();this._isEmpty(this.requestMessages)?(this.deferred=new e,this.deferred.callback()):(this.startTime=(new Date).getTime(),this.deferred=this._doSend(this._getRequest(this.requestMessages)),this.deferred.addCallback(this,this._processResponse),this.deferred.addErrback(this,this._processFault))},addIgnoreMessageType:function(b,
a){if(-1<this.getRequestMessageTypes().indexOf(b))if(a)for(var f in this.uuidClassifierMap)this.uuidClassifierMap.hasOwnProperty(f)&&(a&&this.uuidClassifierMap[f]===a)&&this.ignoreMessageTypes.push(b+":"+a);else this.ignoreMessageTypes.push(b)},_removeEmptyMessages:function(){if(!this._isEmpty(this.requestMessages))for(var b in this.requestMessages)this.requestMessages.hasOwnProperty(b)&&g.isArray(this.requestMessages[b])&&0===c.getArrayLength(this.requestMessages[b])&&delete this.requestMessages[b]},
_isEmpty:function(b){for(var a in b)if(b.hasOwnProperty(a))return!1;return!0},_generateUuid:function(){return c.generateUuid()}})})},"mw-remote/impl/FaultManager":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","mw-remote/RemoteEndPointsManager"],function(h,e,g,d){return e([],{constructor:function(c){c=c||{};this.faultHandlers=c.faultHandlers||{};this.topLevelHandlers=c.topLevelHandlers||[];this.endPointLevelHandlers=c.endPointLevelHandlers||{}},registerFaultHandler:function(c,
b,a){a&&(b=g.hitch(a,b));this.faultHandlers[c]=b},deregisterFaultHandler:function(c){delete this.faultHandlers[c]},registerTopLevelFaultHandler:function(c,b,a){a&&(b=g.hitch(a,b));if(g.isString(c)){if("*"===c)return c={matcher:c,handler:b},this.defaultTopLevelHandler=b,c;c=this._constructMatcherFromQuery(c)}c={matcher:c,handler:b};this.topLevelHandlers.push(c);return c},registerEndpointLevelFaultHandler:function(c,b,a,f){f&&(a=g.hitch(f,a));g.isString(b)&&(b=this._constructMatcherFromQuery(b));b=
{matcher:b,handler:a};this.endPointLevelHandlers[c]||(this.endPointLevelHandlers[c]=[]);this.endPointLevelHandlers[c].push(b);return b},deregisterTopLevelFaultHandler:function(c){var b=this.topLevelHandlers.indexOf(c);-1<b?this.topLevelHandlers.splice(b,1):"*"===c.matcher&&delete this.defaultTopLevelHandler},_constructMatcherFromQuery:function(c){var b=[];c.split("||").forEach(function(a){a=g.trim(a);a=a.replace(/([\.])/g,"\\$1");a=a.replace(/\*/g,".*");b.push(RegExp("^"+a+"$"))});return function(a){return h.some(b,
function(f){return f.test(a.faultCode||a.code||"")})}},handleFault:function(c){var b,a=function(a,f){var b;if(b=c.getMessageClassifier(f))if(b=[a,b].join(":"),this.faultHandlers[b])this.faultHandlers[b](c.fault,c.context)};for(b in c.requestMessages)if(c.requestMessages.hasOwnProperty(b)){if(this.faultHandlers[b])this.faultHandlers[b](c.fault,c.context);var f=c.requestMessages[b];Array.isArray(f)&&f.forEach(g.hitch(this,a,b))}if(this.faultHandlers["*"])this.faultHandlers["*"](c.fault,c.context);this.endPointLevelHandlers[c.endPointName]?
this._handleEndpointLevelFault(c):this._handleTopLevelFault(c)},_handleEndpointLevelFault:function(c){var b=!1,a=h.filter(this.endPointLevelHandlers[c.endPointName],function(a){return a.matcher.call(this,c.fault,c.context)},this);0<a.length&&a[0].handler&&(b=!0,a[0].handler.call(this,c.fault,c.context,c));return b},_handleTopLevelFault:function(c){var b=h.filter(this.topLevelHandlers,function(a){return a.matcher.call(this,c.fault,c.context)},this);(b=0<b.length?b[0].handler:this.defaultTopLevelHandler)&&
b.call(this,c.fault,c.context,c)},handleNonTransactionFault:function(c){var b=h.filter(this.topLevelHandlers,function(a){return a.matcher.call(this,c)},this);(b=0<b.length?b[0].handler:this.defaultTopLevelHandler)&&b.call(this,c)}})})},"mw-remote/impl/RequestManager":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/_base/lang mw-remote/RemoteEndPointsManager mw-remote/defaultMessageMapping ./Transaction".split(" "),function(h,e,g,d,c,b,a){return e([],{defaultMapping:b,
constructor:function(a){a=a||{};this.defaultFactories=a.defaultFactories||{};this.mockHandlers=a.mockHandlers||{};this.mapping=a.mapping||this.defaultMapping;this.responseManager=a.responseManager},registerDefaultMessageFactory:function(a,b,c){c&&(b=d.hitch(c,b));this.defaultFactories[a]=b},deregisterDefaultMessageFactory:function(a){delete this.defaultFactories[a]},registerMockResponseGenerator:function(f,b,c){var e=this;b=d.hitch(c||this,b);this.mockHandlers[f]=function(f,c){var d,l=a.construct(c);
d=b(f,l);d||(d=new g,d.callback());d.addCallback(function(){e.responseManager._processResult(l)})}},deregisterMockResponseGenerator:function(a){delete this.mockHandlers[a]},sendMessage:function(a,b,c){var d={},e={};b=b||{};this._createAndFillTransactions(a,b,c,d,e);a=Object.keys(d);for(b=0;b<a.length;b+=1)c=a[b],this._callMocks(e[c]),d[c].send(),this.responseManager.handleTransaction(d[c])},_getTransaction:function(f,b){return a.construct({context:b,computeToken:this.computeToken,endPointName:f})},
_getMockTransaction:function(f,b,c){return a.construct({context:b,computeToken:this.computeToken,endPointName:f,uuid:c})},_createAndFillTransactions:function(a,b,d,e,g){var m,h,r=function(a){var f,d,l,m,h;f=c.getEndPointForMessageType(a);m=e[f];h=g[f];m||(m=this._getTransaction(f,b),h=this._getMockTransaction(f,b,m.uuid),e[f]=m,g[f]=h);if(this.defaultFactories[a]&&(f=this.defaultFactories[a](m.context)))d=a.split(":"),l=d[0],d=d.slice(1,d.length).join(":"),this.mockHandlers[a]||m.addRequestMessage(l,
f,d),h.addRequestMessage(l,f,d)},s,t;for(m in a)a.hasOwnProperty(m)&&(h=c.getEndPointForMessageType(m),s=g[h],t=e[h],e[h]||(t=this._getTransaction(h,b),s=this._getMockTransaction(h,b,t.uuid),e[h]=t,g[h]=s),h=[m,d].join(":"),!this.mockHandlers[m]&&!this.mockHandlers[h]&&t.addRequestMessage(m,a[m],d),s.addRequestMessage(m,a[m],d),this.mapping[h]?this.mapping[h].forEach(r,this):this.mapping[m]&&this.mapping[m].forEach(r,this))},_callMocks:function(a){var b,c,e=a.context;delete a.context;var g=function(a,
f){var c;if(c=b.getMessageClassifier(f))if(c=[a,c].join(":"),this.mockHandlers[c])this.mockHandlers[c]([f],b)};for(c in a.requestMessages)if(a.requestMessages.hasOwnProperty(c)){b=d.mixin({},a);b.context=e;if(this.mockHandlers.hasOwnProperty(c))this.mockHandlers[c](b.requestMessages[c],b);Array.isArray(b.requestMessages[c])?b.requestMessages[c].forEach(d.hitch(this,g,c)):g(c,b.requestMessages[c])}if(this.mockHandlers["*"])this.mockHandlers["*"](c,b.requestMessages[c],b)}})})},"mw-remote/defaultMessageMapping":function(){define([],
function(){return{Eval:["CurrentFolder","ListFolder"],"Eval:Ping":[],"Eval:RunFile":["UpdateFile","CurrentFolder","ListFolder"],"Eval:MlsPublishPre":["UpdateFile"],"FEval:liveEvalInstrumentCode":[],Interrupt:[],"FEval:GetFigures":["CurrentFolder","ListFolder"],"FEval:CloseFigure":["FEval:GetFigures"],"FEval:SelectFigure":["FEval:GetFigures"],"FEval:ResetAxes":["FEval:GetFigures"],"FEval:ResizeFigure":["FEval:GetFigures"],"FEval:AxesInteraction2D":["FEval:GetFigures"],"FEval:AxesInteraction3D":["FEval:GetFigures"],
CurrentUser:["ServiceRegistry"],RouterLogin:["ServiceRegistry"],CurrentFolder:["ListFolder"],MoveFile:["CurrentFolder"],Variable:[],CloseFile:["SaveSession"],UpdateFile:["SaveSession"],SaveSession:["UpdateFile"],Logout:["CloseFile"],UpdateShare:["ListFolder"]}})},"mw-remote/impl/ResponseManager":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/_base/json dojo/_base/lang mw-log/Log mw-remote/RemoteEndPointsManager".split(" "),function(h,e,g,d,c,b,a){return e([],{constructor:function(a){a=
a||{};this.responseHandlers=a.responseHandlers||{};this.faultManager=a.faultManager;this.transactions=a.transactions||[]},registerResponseHandler:function(a,b,d){d&&(b=c.hitch(d,b));this.responseHandlers[a]=b},deregisterResponseHandler:function(a){delete this.responseHandlers[a]},handleTransaction:function(a){this.transactions.push(a);a.deferred.addCallback(c.hitch(this,this._processAll,a));a.deferred.addCallback(c.hitch(this,this._processResult,a));a.deferred.addErrback(c.hitch(this,this._processAll,
a));a.deferred.addErrback(c.hitch(this,this._processFault,a))},_processAll:function(a){a=this.transactions.indexOf(a);0<=a&&this.transactions.splice(a,1)},_processResult:function(a){a.getResponseMessageTypes().forEach(function(c){var e=a.responseMessages[c],g=[];try{if(Array.isArray(e)){e.forEach(function(b){var d,e=a.getMessageClassifier(b);if(e){d=[c,e].join(":");var l=this,h=!1;a.getRequestMessageTypes().forEach(function(c){c=a.requestMessages[c];Array.isArray(c)?c.forEach(function(c){l.responseHandlers[d]&&
c.uuid===b.uuid&&(l.responseHandlers[d]([b],a.context),h=!0)}):l.responseHandlers[d]&&c.uuid===b.uuid&&(l.responseHandlers[d]([b],a.context),h=!0)});h||g.push(b)}else g.push(b)},this);if(0<g.length&&this.responseHandlers[c])this.responseHandlers[c](g,a.context);if(this.responseHandlers["*"])this.responseHandlers["*"](c,a.responseMessages[c],a.context)}}catch(h){b.error("Remote: Fault occurred while processing response.\nMessage: "+h.message+"\nType: "+c+"\nResponse: "+d.toJson(e))}},this);this._processUdcResponses(a);
a.fault&&this.faultManager.handleFault(a)},_processUdcResponses:function(f){if(!a.isEndpointMessageContainerBased(f.endPointName)){var b=Object.keys(f.requestMessages)[0];if(this.responseHandlers[b])this.responseHandlers[b](f.responseMessages)}},_processFault:function(a){this.faultManager.handleFault(a)}})})},"mw-remote/serviceRegistryLookup":function(){define(["dojo/request/xhr","require"],function(h,e){var g=!1,d={_serviceData:{},getServiceRegistryEndpoint:function(c){if(d._serviceData.serviceregistry){var b,
a;b=d._serviceData.serviceregistry.length;for(a=0;a<b;a+=1)if(d._serviceData.serviceregistry[a].name===c)return d._serviceData.serviceregistry[a].endpoint}return""}};return{load:function(c,b,a){g?a(d):h("/serviceregistrylookup/1/service",{handleAs:"json",failOk:!0,method:"GET",timeout:15E3,sync:!b.async}).then(function(f){d._serviceData=f;g=!0;a(d)},function(f){d._serviceData={};g=!0;a(d)})}}})},"mw-statemachine/statemachineimpl/TimeoutTrigger":function(){define(["dojo/_base/declare","dojo/_base/lang",
"mw-log/Log","./Trigger"],function(h,e,g,d){return h(d,{constructor:function(){var c=this.name.split(" ");(2>c.length||"timeout"!==c[0])&&g.error("Invalid trigger name for a TimeoutTrigger. Could not parse out the type of handler.");this.timeoutInSeconds=parseFloat(c[1]);this.handlerType=c[0]},enable:function(){this.disable();this.timeoutHandle=setTimeout(e.hitch(null,this.triggerHandler,this.name),1E3*this.timeoutInSeconds)},disable:function(){this.timeoutHandle&&(clearTimeout(this.timeoutHandle),
this.timeoutHandle=null)}})})},"mw-statemachine/statemachineimpl/Transition":function(){define(["dojo/_base/declare","dojo/_base/lang","mw-log/Log"],function(h,e,g){return h([],{constructor:function(d){this.state={};this.target="";this.action=this.condition=null;h.safeMixin(this,d)},handleTrigger:function(d,c){var b="";this.checkCondition(d,c)&&(this.runAction(d,c),b=this.getTarget(d,this.target,c));return b},checkCondition:function(d,c){return!this.condition?!0:e.hitch(this.state.context,this.condition).apply(null,
[d,this.state.data].concat(c))},runAction:function(d,c){var b;this.action&&(b=e.hitch(this.state.context,this.action),b.apply(null,[d,this.state.data].concat(c)))},getTarget:function(d,c,b){var a,f,k;if(e.isString(c))f=c;else if(e.isFunction(c))c=e.hitch(this.state.context,c),f=c.apply(null,[d,this.state.data].concat(b));else if(e.isArray(c))for(a=0;a<c.length;a+=1){f=this.getTarget(d,c[a],b);if(e.isString(f)){f={target:f};e.mixin(f,k);break}if(f&&f.target){e.mixin(f,k);break}k=f||{}}else g.warn("Transition: improper target: ",
c);return f}})})},"mw-messageservice/messageserviceimpl/MessageServiceState":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred dojo/promise/all mw-statemachine/StateMachine mw-log/Log".split(" "),function(h,e,g,d,c,b,a){return h([],{_MAX_RETRIES:30,logStateChanges:!1,constructor:function(){this._stateOptions={context:this,name:"WraDataService",namespace:"MOTW.wra",defaultSubstate:"disconnected",substates:{disconnected:{transitions:{onEnterState:this._enterDisconnected,
start:"connecting"}},connecting:{transitions:{onEnterState:this._enterConnecting,_connectSuccess:"resubscribing",_connectFailure:"reconnecting",stop:"disconnected"}},reconnecting:{transitions:{onEnterState:this._enterReconnecting,_connectSuccess:"resubscribing",_connectFailure:[this._retryFailure,"retryDelay"],stop:"disconnected"}},retryDelay:{transitions:{"timeout 2":"reconnecting",_reconnect:"reconnecting",stop:"disconnected"}},resubscribing:{transitions:{onEnterState:this._enterResubscribing,_resubscribeSuccess:"connected",
_resubscribeFailure:"reconnecting",stop:"disconnecting"}},connected:{transitions:{onEnterState:this._enterConnected,_reconnect:"reconnecting",stop:"disconnecting"}},disconnecting:{transitions:{onEnterState:this._enterDisconnecting,_disconnectSuccess:"disconnected",_disconnectFailure:"disconnected","timeout 2":"disconnected"}},fatallyDisconnected:{transitions:{onEnterState:this._enterFatallyDisconnected,stop:"disconnected"}}}}},setDelegate:function(f){if(this._delegate!==f){this._delegate=f;var c=
this;g.after(f,"onConnectionError",function(){a.warn("MessageService received connection error, reconnecting");c._reconnect()},!0);this._states=new b(this._stateOptions);g.after(this._states,"onEnterState",e.hitch(this,this._enterState),!0);this._states.start()}},onConnected:function(){},onNewlyConnected:function(){},onDisconnected:function(){},onReconnected:function(){},onFatallyDisconnected:function(){},onNotConnected:function(){},isStarted:function(){return"disconnecting"!==this._currentState&&
"disconnected"!==this._currentState},isConnected:function(){return"connected"===this._currentState},isFatallyDisconnected:function(){return"fatallyDisconnected"===this._currentState},isDisconnected:function(){return"disconnected"===this._currentState},start:function(){},stop:function(){},_enterState:function(f){var b=this._currentState;this._currentState=f;this.logStateChanges&&a.info("MessageService state change: "+b+" -\x3e "+f);if("connected"===b)this.onNotConnected();if("connected"===f&&this._previouslyConnected)this.onReconnected();
else if("connected"===f&&!this._previouslyConnected)this.onNewlyConnected()},_enterDisconnected:function(){this._previouslyConnected=!1;this._delegate.cleanup();this.onDisconnected()},_enterConnecting:function(){this._retryCount=0;this._delegate.connect().then(this._connectSuccess,this._connectFailure)},_enterReconnecting:function(){this._retryCount+=1;a.info("Reconnecting message service. Attempt "+this._retryCount,arguments);this._delegate.cleanup();this._delegate.connect().then(this._connectSuccess,
this._connectFailure)},_reconnect:function(){},_connectSuccess:function(){},_connectFailure:function(){},_timeoutAction:function(){this.logStateChanges&&a.info("MessageService timeout:",arguments)},_retryFailure:function(){var f;this._retryCount>=this._MAX_RETRIES&&(a.error("Message service fatally disconnected."),f="fatallyDisconnected");return f},_enterResubscribing:function(){var a,b,d=[];this._delegate.doStartBatch();for(a in this.channelSubscriptions)this.channelSubscriptions.hasOwnProperty(a)&&
(b=this.channelSubscriptions[a],d.push(this._delegate.doSubscribe(a)),b.subscribed=!0);this._delegate.doEndBatch();c(d).then(this._resubscribeSuccess,this._resubscribeFailure)},_resubscribeSuccess:function(){},_resubscribeFailure:function(){},_enterConnected:function(){this._delegate.delegateConnected()?(this._retryCount=0,this._previouslyConnected&&a.info("Successfully connected."),this._previouslyConnected=!0,this.onConnected()):this._reconnect()},_enterFatallyDisconnected:function(){this.onFatallyDisconnected()},
_enterDisconnecting:function(){this._delegate.disconnect().then(this._disconnectSuccess,this._disconnectFailure)},_disconnectSuccess:function(){},_disconnectFailure:function(){}})})},"mw-messageservice/messageserviceimpl/MessageServiceReqResp":function(){define(["dojo/_base/declare","dojo/Deferred","mw-log/Log"],function(h,e,g){return h([],{pollDelay:50,constructor:function(d,c){this.remote=d;this.messageService=c;this.pending=0;d.registerDefaultMessageFactory("OpaqueMessage",function(){this.pending+=
1;return{opaqueMessageDOs:[]}},this);d.registerResponseHandler("OpaqueMessageResponse",function(b){this.pending-=1;b.forEach(function(a){try{a.opaqueMessageDOs&&a.opaqueMessageDOs.forEach(c.handleMessage,c)}catch(f){g.error("Error while handling message: "+f)}});this.poll()},this)},onMessage:function(d){},onConnectionError:function(d){},connect:function(){this.enabled=!0;this.poll();return(new e).resolve()},disconnect:function(){this.enabled=!1;this.timeout&&(clearTimeout(this.timeout),this.timeout=
null);return(new e).resolve()},cleanup:function(){},poll:function(){if(this.enabled&&0===this.pending){var d=this;this.timeout=setTimeout(function(){d.pending+=1;d.remote.sendMessage({OpaqueMessage:{opaqueMessageDOs:[]}});d.timeout=null},this.pollDelay)}},doPublish:function(d,c){clearTimeout(this.timeout);this.timeout=null;this.pending+=1;this.remote.sendMessage({OpaqueMessage:{opaqueMessageDOs:[{channel:d,data:c}]}})},doSubscribe:function(d){},doUnsubscribe:function(d){},doStartBatch:function(){},
doEndBatch:function(){}})})},"MW/rtc/clipboardservice/InternalClipboard":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/Deferred","MW/rtc/clipboardservice/Clipboard"],function(h,e,g,d){return h(d,{constructor:function(){this._clipboardData={}},setClipboardData:function(c){var b=new g,a=this.getAllFlavors();try{c&&(this._clipboardData={},c.forEach(function(a){this._setData(a.flavor,a.content)},this)),b.resolve(),this.onClipboardDataChange(a,this.getAllFlavors())}catch(f){this._clipboardData=
{},b.reject()}return b.promise},_setData:function(c,b){return c&&b?(this._clipboardData[c]=b,!0):!1},getClipboardData:function(c){var b={},a=new g;c.forEach(e.hitch(this,function(a){b[a]=this._clipboardData[a]}));a.resolve(b);return a.promise},clearClipboardData:function(){var c=this.getAllFlavors();this._clipboardData={};this.onClipboardDataChange(c,this.getAllFlavors())},getAllFlavors:function(){var c=[];this._clipboardData&&(c=Object.keys(this._clipboardData));return c}})})},"MW/rtc/clipboardservice/Clipboard":function(){define(["dojo/_base/declare"],
function(h){return h(null,{setClipboardData:function(e){throw Error("Unimplemented method : setClipboardData");},getClipboardData:function(){throw Error("Unimplemented method : getClipboardData");},clearClipboardData:function(){throw Error("Unimplemented method : clearClipboard");},getAllFlavors:function(){throw Error("Unimplemented method : getAllFlavors");},onClipboardDataChange:function(e,g){}})})},"MW/rtc/clipboardservice/ConnectorClipboard":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/Deferred MW/rtc/clipboardservice/Clipboard MW/rtc/clipboardservice/ClipboardMessageServiceChannels mw-utils/Utils".split(" "),
function(h,e,g,d,c,b,a){return h(c,{REQUEST_ID:"requestId",RESPONSE_ID:"responseId",CONTENTS:"contents",SUCCESS_FLAG:"success",DUMMY_FLAVOR:"dummyFlavor",constructor:function(a){this._getDataPromise={};this._setDataPromise={};this._listOfAvaialableFlavors=[];this._messageService=a;this.installListeners()},installListeners:function(){this._messageService.subscribe(b.RECEIVE_AVAILABLE_DATA_FLAVORS,"_handleAvailableDataFlavors",this);this._messageService.publish(b.REQUEST_AVAILABLE_DATA_FLAVORS,{});
this._messageService.subscribe(b.GET_CLIPBOARD_DATA_RESPONSE,"_handleGetClipboardData",this);this._messageService.subscribe(b.SET_CLIPBOARD_DATA_RESPONSE,"_handleSetClipboardDataResponse",this)},setClipboardData:function(f){var c=new d,e=a.generateUuid();this._setDataPromise[e]=c;this._messageService.publish(b.SET_CLIPBOARD_DATA_REQUEST,{requestId:e,contents:f});return c.promise},_handleSetClipboardDataResponse:function(a){var b=a.data;a=b[this.SUCCESS_FLAG];(b=this._setDataPromise[b[this.RESPONSE_ID]])&&
(a?b.resolve():b.reject())},getClipboardData:function(f){var c=new d,e=a.generateUuid();this._getDataPromise[e]=c;this._messageService.publish(b.GET_CLIPBOARD_DATA_REQUEST,{requestId:e,flavors:f});return c.promise},_handleGetClipboardData:function(a){var b=a.data;a=b[this.CONTENTS];var b=b[this.RESPONSE_ID],c=this._getDataPromise[b];c&&(delete this._getDataPromise[b],a?c.resolve(a):c.reject(" [Clipboard Error] The data could not be retrieved "))},clearClipboardData:function(){var a=this.getAllFlavors();
this._listOfAvaialableFlavors=[];this.onClipboardDataChange(a,[])},getAllFlavors:function(){!g("windows")&&0===this._listOfAvaialableFlavors.length&&(this._listOfAvaialableFlavors=[this.DUMMY_FLAVOR]);return this._listOfAvaialableFlavors},_handleAvailableDataFlavors:function(a){var b=this.getAllFlavors();this._listOfAvaialableFlavors=a.data;this.onClipboardDataChange(b,this.getAllFlavors())}})})},"MW/rtc/clipboardservice/ClipboardMessageServiceChannels":function(){define([],function(){return{SET_CLIPBOARD_DATA_REQUEST:"/clipboardservice/setClipboardDataRequest",
GET_CLIPBOARD_DATA_REQUEST:"/clipboardservice/getClipboardDataRequest",REQUEST_AVAILABLE_DATA_FLAVORS:"/clipboardservice/requestAvailableDataFlavors",SET_CLIPBOARD_DATA_RESPONSE:"/clipboardservice/setClipboardDataResponse",GET_CLIPBOARD_DATA_RESPONSE:"/clipboardservice/getClipboardDataResponse",RECEIVE_AVAILABLE_DATA_FLAVORS:"/clipboardservice/sendAvailableDataFlavors"}})},"MW/rtc/clipboardservice/BrowserSyncedClipboard":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred mw-log/Log MW/rtc/clipboardservice/Clipboard MW/rtc/plugins/cutcopypaste/MIMETypes".split(" "),
function(h,e,g,d,c,b){return h(c,{DUMMY_FLAVOR:"dummyFlavor",IE_TEXT_FLAVOR:"text",constructor:function(){this._availableFlavors=[];this._setDataPromise=this._getDataPromise=null},getCopyPasteHandlers:function(){return{cut:e.hitch(this,this._copyHandler),copy:e.hitch(this,this._copyHandler),paste:e.hitch(this,this._pasteHandler)}},setClipboardData:function(a){var f=new g;this._setDataPromise={object:f,data:a};return f.promise},_copyHandler:function(a){a.preventDefault();if(null!==this._setDataPromise){var f=
this._setDataPromise.data,c=[];if(a.clipboardData&&a.clipboardData.setData)f.forEach(function(f){try{a.clipboardData.setData(f.flavor,f.content),c.push(f.flavor)}catch(b){d.warn("Custom flavors could not be copied")}});else if(window.clipboardData){d.warn(!1,"Non-plaintext flavors could not be copied");var e=this.IE_TEXT_FLAVOR;f.forEach(function(a){a.flavor===b.TEXT&&window.clipboardData.setData(e,a.content)})}this._availableFlavors=c;this._setDataPromise.object.resolve();this._setDataPromise=null}},
getClipboardData:function(a){var f=new g;this._getDataPromise={object:f,data:a};return f.promise},_pasteHandler:function(a){a.preventDefault();var f={};if(a.clipboardData&&a.clipboardData.getData&&a.clipboardData.types)for(var b=a.clipboardData.types,c=this._getDataPromise.data,e=0;e<b.length;e+=1){var g=b[e];-1<c.indexOf(g)&&(f[g]=a.clipboardData.getData(g))}else window.clipboardData&&(d.warn(a.clipboardData&&a.clipboardData.getData,"Non-plaintext flavors could not be accessed"),f={"text/plain":window.clipboardData.getData(this.IE_TEXT_FLAVOR)});
this._availableFlavors=Object.keys(f);this._getDataPromise.object.resolve(f)},clearClipboardData:function(){this._availableFlavors=[]},getAllFlavors:function(){return 0==this._availableFlavors.length?[this.DUMMY_FLAVOR]:this._availableFlavors}})})},"MW/rtc/plugins/cutcopypaste/MIMETypes":function(){define([],function(){return{COPY_FOR_COMMAND_WINDOW:"application/x-java-serialized-object",HTML:"text/html",RTF:"text/rtf",IMAGE:"image/x-java-image",IMAGE_LIST:"application/liveeditor_internal_imagelist",
MATLAB_RICHTEXT:"application/matlab_json",MATHML:"application/mathml+xml",MATHML_PRESENTATION:"application/mathml-presentation+xml",TEXT:"text/plain",UNICODE_STRING:"Unicode String",PROMPTLESS_STRING:"application/x-matlab-promptless-string"}})},"MW/rtc/cursor/CursorActionsProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/cursor/CursorActions"],function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.actionservice",
"rtc.keyhandler","rtc.cursorcontroller"]}},createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/cursor/CursorActions":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(h,e){return h(null,{constructor:function(e,d,c){e.loadActions(this._getActions(c));d.addBindings(this._getAdditionalKeyBindings())},_getActions:function(g){return[{id:"rtc_move_left",enabled:!0,key:"left",callback:e.hitch(g,"movePosition",g.LEFT)},{id:"rtc_move_right",enabled:!0,key:"right",callback:e.hitch(g,
"movePosition",g.RIGHT)},{id:"rtc_move_up",enabled:!0,key:"up",callback:e.hitch(g,"movePosition",g.UP)},{id:"rtc_move_down",enabled:!0,key:"down",callback:e.hitch(g,"movePosition",g.DOWN)},{id:"rtc_move_word_left",enabled:!0,key:"ctrl_left",platformKey:{mac:"alt_left"},callback:e.hitch(g,"movePosition",g.WORD_LEFT)},{id:"rtc_move_word_right",enabled:!0,key:"ctrl_right",platformKey:{mac:"alt_right"},callback:e.hitch(g,"movePosition",g.WORD_RIGHT)},{id:"rtc_move_line_end",enabled:!0,key:"end",platformKey:{mac:"meta_right"},
callback:e.hitch(g,"movePosition",g.LINE_END)},{id:"rtc_move_line_start",enabled:!0,key:"home",platformKey:{mac:"meta_left"},callback:e.hitch(g,"movePosition",g.LINE_START)},{id:"rtc_move_start",enabled:!0,key:"ctrl_home",platformKey:{mac:"home"},callback:e.hitch(g,"movePosition",g.START)},{id:"rtc_move_end",enabled:!0,key:"ctrl_end",platformKey:{mac:"end"},callback:e.hitch(g,"movePosition",g.END)},{id:"rtc_select_left",enabled:!0,key:"shift_left",callback:e.hitch(g,"movePosition",g.LEFT,g.KEEP_ANCHOR)},
{id:"rtc_select_right",enabled:!0,key:"shift_right",callback:e.hitch(g,"movePosition",g.RIGHT,g.KEEP_ANCHOR)},{id:"rtc_select_up",enabled:!0,key:"shift_up",callback:e.hitch(g,"movePosition",g.UP,g.KEEP_ANCHOR)},{id:"rtc_select_down",enabled:!0,key:"shift_down",callback:e.hitch(g,"movePosition",g.DOWN,g.KEEP_ANCHOR)},{id:"rtc_select_word_left",enabled:!0,key:"ctrl_shift_left",platformKey:{mac:"alt_shift_left"},callback:e.hitch(g,"movePosition",g.WORD_LEFT,g.KEEP_ANCHOR)},{id:"rtc_select_word_right",
enabled:!0,key:"ctrl_shift_right",platformKey:{mac:"alt_shift_right"},callback:e.hitch(g,"movePosition",g.WORD_RIGHT,g.KEEP_ANCHOR)},{id:"rtc_select_line_start",enabled:!0,key:"shift_home",platformKey:{mac:"meta_shift_left"},callback:e.hitch(g,"movePosition",g.LINE_START,g.KEEP_ANCHOR)},{id:"rtc_select_line_end",enabled:!0,key:"shift_end",platformKey:{mac:"meta_shift_right"},callback:e.hitch(g,"movePosition",g.LINE_END,g.KEEP_ANCHOR)},{id:"rtc_select_start",enabled:!0,key:"ctrl_shift_home",platformKey:{mac:"alt_shift_home"},
callback:e.hitch(g,"movePosition",g.START,g.KEEP_ANCHOR)},{id:"rtc_select_end",enabled:!0,key:"ctrl_shift_end",platformKey:{mac:"alt_shift_end"},callback:e.hitch(g,"movePosition",g.END,g.KEEP_ANCHOR)},{id:"rtc_move_page_up",enabled:!0,key:"pageup",callback:e.hitch(g,"movePosition",g.PAGE_UP)},{id:"rtc_move_page_down",enabled:!0,key:"pagedown",callback:e.hitch(g,"movePosition",g.PAGE_DOWN)},{id:"rtc_select_page_up",enabled:!0,key:"shift_pageup",callback:e.hitch(g,"movePosition",g.PAGE_UP,g.KEEP_ANCHOR)},
{id:"rtc_select_page_down",enabled:!0,key:"shift_pagedown",callback:e.hitch(g,"movePosition",g.PAGE_DOWN,g.KEEP_ANCHOR)},{id:"rtc_select_all",key:"ctrl_a",platformKey:{mac:"meta_a"},enabled:!0,callback:e.hitch(g,"selectAll")},{id:"rtc_clear_selection",enabled:!0,key:"escape",callback:e.hitch(g,"clearSelection")}]},_getAdditionalKeyBindings:function(){return[{platformKey:{mac:"ctrl_b"},action:"rtc_move_left"},{platformKey:{mac:"ctrl_f"},action:"rtc_move_right"},{platformKey:{mac:"ctrl_p"},action:"rtc_move_up"},
{platformKey:{mac:"ctrl_n"},action:"rtc_move_down"},{platformKey:{mac:"ctrl_a"},action:"rtc_move_line_start"},{platformKey:{mac:"ctrl_e"},action:"rtc_move_line_end"},{platformKey:{mac:"meta_up"},action:"rtc_move_start"},{platformKey:{mac:"meta_down"},action:"rtc_move_end"},{platformKey:{mac:"meta_shift_up"},action:"rtc_select_start"},{platformKey:{mac:"shift_home"},action:"rtc_select_start"},{platformKey:{mac:"meta_shift_down"},action:"rtc_select_end"},{platformKey:{mac:"shift_end"},action:"rtc_select_end"}]}})})},
"MW/rtc/cursor/CursorNavigatorProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/cursor/CursorNavigator"],function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.view","rtc.view.hidden.hiddennodemodel"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/cursor/CursorNavigator":function(){define("dojo/_base/declare MW/rtc/abstract/AbstractPlugin MW/rtc/model/CodeUtilities MW/rtc/model/DocumentUtilities MW/rtc/model/Position MW/rtc/model/PositionUtilities".split(" "),
function(h,e,g,d,c,b){return h(e,{constructor:function(a,f){this._view=a;this._hiddenNodeModel=f},moveLineStart:function(a,f){var b=a.getNode();if(!0!==f&&g.isCodeContainer(b)){var c=b.rootContainer(),d=c.getText().search(/\S|$/);if(0<d&&b.offsetInContainer()+a.getOffset()!==d)return c.getPositionFromOffset(d)}b=b.textContainer();return b.wrappable?(b=this._view.getCoordinateForPosition(a),this._view.getPositionFromCoordinate({x:0,y:b.y+b.height/2})):b.startPosition()},moveLineEnd:function(a){var f=
a.getNode().textContainer();return f.wrappable?(a=this._view.getCoordinateForPosition(a),f=this._view.getDomTargetPosition(),this._view.getPositionFromCoordinate({x:f.scrollWidth,y:a.y+a.height/2})):f.endPosition()},moveLeft:function(a){var f=a.getNode().movePositionLeft(a);if(!a.isAtEdge())return f;for(;f;){a=f.getNode();if(!this._hiddenNodeModel.isHidden(a))break;f=a.movePositionLeft(new c(a,0))}return f},moveRight:function(a){var f=a.getNode().movePositionRight(a);if(!a.isAtEdge())return f;for(;f;){a=
f.getNode();if(!this._hiddenNodeModel.isHidden(a))break;f=a.movePositionRight(new c(a,a.maxOffset()))}return f},moveUp:function(a,f){var b=this._view.getCoordinateForPosition(a).y-1;return this._findPosition(a,f,b,0)},moveDown:function(a,f){var b=this._view.getCoordinateForPosition(a),c=this._view.getDocumentDimension();return this._findPosition(a,f,b.y+b.height,c.height)},_findPosition:function(a,f,c,d){var e=c<=d?1:-1;for(c*=e;c<=d*e;c+=1){var g=this._view.getPositionFromCoordinate({x:f,y:Math.abs(c)});
if(g&&0!==b.comparePositions(g,a))return g}return null}})})},"MW/rtc/model/CodeUtilities":function(){define(["MW/rtc/model/NodeUtilities","MW/rtc/nodes/inner/LineNode"],function(h,e){return{isCodeContainer:function(g,d){if(!g)return!1;if(d)return g.isInstanceOf(e)&&"code"===g.containerType();var c=h.getClosestAncestorOfType(g,e);return c?"code"===c.containerType():!1},extractFunctionName:function(e){var d="";0<=e.indexOf("\x3d")&&(d=e.split("\x3d")[1]);0<=e.indexOf("(")&&(d=d?d.split("(")[0]:e.split("(")[0]);
var c=/(\s\w+)/g;return(e=d?d.match(c):e.match(c))?e[0]:d},isNonExecutableCodeContainer:function(g){return!g?!1:(g=h.getClosestAncestorOfType(g,e))?"code"!==g.containerType():!1},isCodeRange:function(g,d){return h.isRangeNodeType(g,d,e)},isCodeInRange:function(g,d){return h.isNodeTypeInRange(g,d,e)},getCodeLineNodes:function(g){return h.getContainersOfNodeType(e,g)},getAbsoluteCodeOffsetFromPosition:function(e,d){h._assert(this.isCodeContainer(d.getNode()),"Invalid node.  Node must be a code line.");
var c=this.getCodeLineNodes(e),b=this.getCodeLineNumberFromPosition(e,d)-1,a=0;c.some(function(f,c){if(c===b)return a+=d.getOffset(),!0;a+=f.getText().length;a+=1});return a},getCodeLineNumberFromPosition:function(e,d){var c;c=d.getNode();h._assert(this.isCodeContainer(c),"Invalid node.  Node must be a code line.");c=this.getCodeLineNodes(e).indexOf(c)+1;return 0<c?c:-1},getCodeNodesInNodeRange:function(e,d){return h.getParagraphNodesInRange(e,d).filter(function(c){return this.isCodeContainer(c,!0)},
this)},getCodePositionsInNodeRange:function(e,d,c){return this.getCodeNodesInNodeRange(d,c).map(function(b){return e.createLinePosition(b,!1)},this)},getMATLABStringFromCodeText:function(e){e=e.replace(/'/g,"''");return"['"+e.split("\n").join("' 10 '")+"']"}}})},"MW/rtc/model/NodeUtilities":function(){define(["dojo/_base/array","MW/rtc/browsersupport/BrowserSupportUtilities","MW/rtc/nodes/Node"],function(h,e,g){return{getStyleAttributesFromRange:function(d,c){var b={};this.leafNodesInRangeIterator(d,
c,function(a){a=a.getStyleAttributes();for(var f in a)a.hasOwnProperty(f)&&(b.hasOwnProperty(f)?b[f]!==a[f]&&(b[f]=void 0):b[f]=a[f])});return b},getLineage:function(d){for(var c=[];d;)c.unshift(d),d=d.parent;return c},getLineageReverse:function(d){return this.getLineage(d).reverse()},getCommonAncestors:function(d,c){for(var b=this.getLineage(d),a=this.getLineage(c),f=0;f<b.length;f+=1)if(b[f]!==a[f])return b.slice(0,f);return b},getParagraphNodesInRange:function(d,c,b){d=d.rootContainer();c=c.rootContainer();
var a=[];this.siblingNodesInRangeIterator(d,c,function(f){(!b||f instanceof b)&&a.push(f)});return a},getNodesInRange:function(d,c){var b=[];this.leafNodesInRangeIterator(d,c,function(a){b.push(a)});return b},getParagraphNodesInRangeAsSet:function(d,c){d=d.rootContainer();c=c.rootContainer();var b=e.createSet();this.siblingNodesInRangeIterator(d,c,function(a){b.add(a)});return b},getParagraphFormat:function(d){var c=d.startNode.rootContainer();d=d.endNode.rootContainer();var b=c.containerType();if(d.containerType()!==
b)return"none";this.siblingNodesInRangeIterator(c,d,function(a){if(a.isTextContainerNode()&&a.containerType()!==b)return b="none",!0});return b},getLineNumberForNode:function(d,c){return c.getLineNumber(d.rootContainer())},getContainersOfNodeType:function(d,c){var b=[];c.root.children.forEach(function(a){this.isInType(a,d)&&b.push(a)},this);return b},getFullRange:function(d,c){d.isTextContainerNode()&&(d=d.startNode());c.isTextContainerNode()&&(c=c.endNode());var b=c.maxOffset();return{start:{node:d,
offset:0},end:{node:c,offset:b}}},searchNodeById:function(d,c){var b;if(c.uid===d)return c;var a;if(c.children)for(a=0;a<c.children.length&&!(b=this.searchNodeById(d,c.children[a]));a+=1);return b},isContinuousFormat:function(d){return"none"!==this.getParagraphFormat(d)},isInType:function(d,c){return!d?!1:d.isInstanceOf(c)?!0:d.parent?this.isInType(d.parent,c):!1},getClosestAncestorOfType:function(d,c){return!d?null:d.isInstanceOf(c)?d:d.parent?this.getClosestAncestorOfType(d.parent,c):null},isRangeNodeType:function(d,
c,b){c=c.rootContainer();if(!(c instanceof b))return!1;var a=!0;d=d.rootContainer();this.siblingNodesInRangeIterator(d,c,function(f){if(!(f instanceof b))return a=!1,!0});return a},isNodeTypeInRange:function(d,c,b){c=c.rootContainer();if(c instanceof b)return!0;var a=!1;d=d.rootContainer();this.siblingNodesInRangeIterator(d,c,function(f){if(f instanceof b)return a=!0});return a},isFreestandingOpaque:function(d){if(d.getText().trim()!==d.textContainer().getText().trim())return!1;var c=d.textContainer(),
b,a;for(b=0;b<c.children.length;b+=1)if(a=c.children[b],a.containsTextNodes()||!a.isTextNode()&&a.className!==d.className)return!1;return!0},isNode:function(d,c){c=c||g;return d&&d.isInstanceOf(c)},forAllDescendants:function(d,c){d.forEach(function(b){c(b);b.children&&this.forAllDescendants(b.children,c)},this)},siblingNodesInRangeIterator:function(d,c,b){this._assert(d&&c,"Start node or end node not provided");this._assert(d.parent===c.parent,"Start node and end node should be in the same layer");
if(d===c)return!!b(d);for(var a=d.parent.children,f=e.indexOf(a,d);d;){if(b(d))return!0;if(d===c)break;f+=1;d=a[f]}return!1},textContainerNodesInRangeIterator:function(d,c,b){var a=null;this.leafNodesInRangeIterator(d,c,function(f){f=f.textContainer();if(f===a)return!1;if(b(f))return!0;a=f})},leafNodesInRangeIterator:function(d,c,b){this._assert(d&&c,"Start node or end node not provided");var a=d.rootContainer(),f=c.rootContainer();return!a||!f?this._leafNodesInRangeIterator(d,c,b):this.siblingNodesInRangeIterator(a,
f,function(k){if(k.children&&0<k.children.length){var e=d,g=c;k===a&&k!==f?g=a.endNode():k!==a&&k===f?e=f.startNode():a!==f&&(e=k.startNode(),g=k.endNode());return this._leafNodesInRangeIterator(e,g,b)}}.bind(this))},_leafNodesInRangeIterator:function(d,c,b){for(;d;){if(b(d))return!0;if(d===c)break;d=d.nextNode()}return!1},setNodeAttributes:function(d,c){for(var b in c)d.hasOwnProperty(b)&&(d[b]=c[b]);return d},setAttributesForNodes:function(d,c){d.forEach(function(b){return this.setNodeAttributes(b,
c)},this)},prevNode:function(d){return d?d.prevNode():null},nextNode:function(d){return d?d.nextNode():null},prevContainer:function(d){return d?d.rootContainer().previousSibling():null},nextContainer:function(d){return d?d.rootContainer().nextSibling():null},_assert:function(d,c){if(!d)throw Error(c);}}})},"MW/rtc/browsersupport/BrowserSupportUtilities":function(){define(["dojo/_base/array","dojo/has","MW/rtc/browsersupport/PseudoMap","MW/rtc/browsersupport/PseudoSet","MW/rtc/browsersupport/PseudoWeakSet"],
function(h,e,g,d,c){var b;b={createMap:function(){return this.isES6MapSupported()?new Map:new g},isES6MapSupported:function(){return void 0!==window.Map},createSet:function(){return this._isES6SetSupported()?new Set:new d},createWeakSet:function(){return this._isES6WeakSetSupported()?new WeakSet:new c},_isES6SetSupported:function(){return void 0!==window.Set},_isES6WeakSetSupported:function(){return void 0!==window.WeakSet},indexOf:function(a,f){return h.indexOf(a,f)}};52<=e("chrome")&&(b.indexOf=
function(a,f){return a.indexOf(f)});return b})},"MW/rtc/browsersupport/PseudoMap":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(){this._elements=[];this.size=0},set:function(e,g){var d=this._getElement(e);d?d.value=g:(this._elements.push({key:e,value:g}),this.size+=1);return this},get:function(e){if(e=this._getElement(e))return e.value},has:function(e){return!!this._getElement(e)},clear:function(){this._elements=[];this.size=0},"delete":function(e){e=this._findElement(e);
return 0<=e?(this._elements.splice(e,1),this.size-=1,!0):!1},forEach:function(e,g){for(var d,c=0;c<this._elements.length;c++)d=this._elements[c],e.call(g,d.value,d.key,this)},_getElement:function(e){e=this._findElement(e);return 0<=e?this._elements[e]:null},_getElements:function(){return this._elements},_findElement:function(e){for(var g=0;g<this._elements.length;g++)if(this._elements[g].key===e)return g;return-1}})})},"MW/rtc/browsersupport/PseudoSet":function(){define(["dojo/_base/declare","./PseudoMap"],
function(h,e){return h(null,{constructor:function(){this._map=new e;this.size=0},add:function(e){this._map.set(e,e);this.size=this._map.size;return this},has:function(e){return this._map.has(e)},clear:function(){this.size=0;return this._map.clear()},"delete":function(e){e=this._map.delete(e);this.size=this._map.size;return e},forEach:function(e,d){for(var c,b=this._map._getElements(),a=0;a<b.length;a++)c=b[a],e.call(d,c.value,c.key,this)}})})},"MW/rtc/browsersupport/PseudoWeakSet":function(){define(["dojo/_base/declare",
"mw-utils/Utils"],function(h,e){return h(null,{constructor:function(){this._propName="__RTCPseudoWeakSet_"+e.generateUuid()},add:function(e){e[this._propName]=!0;return this},"delete":function(e){return this.has(e)?(delete e[this._propName],!0):!1},has:function(e){return e.hasOwnProperty(this._propName)}})})},"MW/rtc/nodes/Node":function(){define("dojo/_base/declare mw-log/Log MW/rtc/browsersupport/BrowserSupportUtilities MW/rtc/model/Position MW/rtc/plugins/view/layoutmanager/rules/BaseGroupingRule mw-utils/Utils".split(" "),
function(h,e,g,d,c,b){return h(null,{constructor:function(){this.box=this.parent=null;this.readOnly=!1;this.uid=b.generateUuid();this.groupingType=c().groupingType},className:"Node",isRootNode:function(){return!1},isRootContainer:function(){return this.parent&&this.parent.isRootNode()},rootContainer:function(){for(var a=this,f=null;a.parent;)if(f=a,a=a.parent,a.isRootNode())return f;return null},isTextContainerNode:function(){return!1},isOpaqueNode:function(){return!1},isTextNode:function(){return!1},
textContainer:function(){for(var a=this;!a.isTextContainerNode();)if(a.parent)a=a.parent;else break;return a},isEmpty:function(){var a;if(this.children)for(a=0;a<this.children.length;a+=1)if(!this.children[a].isEmpty())return!1;return!0},containsTextNodes:function(){return!1},isReadOnly:function(){for(var a=this.readOnly,f=this;!a;)if(f.parent)f=f.parent,a=f.readOnly;else break;return a},isSameTypeAs:function(a){return this.className===a.className},updateAttributes:function(a){var f,b={};for(f in a)a.hasOwnProperty(f)&&
(b[f]=this[f],this[f]=a[f]);return b},deleteNode:function(){if(this.parent){var a=g.indexOf(this.parent.children,this);this.parent.removeChild(a)}},serialize:function(a){var f={className:this.className};this._serializeAttributes(f);if(a)return f;this.children&&(f.children=this.children.map(function(a){return a.serialize()}));return f},_serializeAttributes:function(a){},nextSibling:function(){var a=this.parent;if(!a)return null;var a=a.children,f=g.indexOf(a,this);return-1===f?null:a[f+1]||null},previousSibling:function(){var a=
this.parent;if(!a)return null;var a=a.children,f=g.indexOf(a,this);return-1===f?null:a[f-1]||null},nextNode:function(){var a=this.nextSibling();return a&&a.startNode()?a.startNode():this.parent?this.parent.nextNode():null},prevNode:function(){var a=this.previousSibling();return a&&a.endNode()?a.endNode():this.parent?this.parent.prevNode():null},depth:function(){return this.parent?this.parent.depth()+1:0},getTop:function(){return this.box?this.box.offsetTop:0},defaultHeight:18,getHeight:function(){if(this.box){var a=
this.box.offsetHeight;return 0<a?a:this.defaultHeight}return 0},getLeft:function(){return this.box?this.box.offsetLeft:0},getWidth:function(){return this.box?this.box.offsetWidth:0},getRight:function(a){a=a||this.getLeft();return this.box?a+this.getWidth():0},getBottom:function(a){a=a||this.getTop();return this.box?a+this.getHeight():0},getPositionFromOffset:function(a){e.assert(0<=a&&a<=this.maxOffset(),"Invalid offset");return new d(this,a)},startPosition:function(){return this.getPositionFromOffset(0)},
endPosition:function(){return this.getPositionFromOffset(this.maxOffset())},getEquivalentChildPositions:function(a){e.error("Unimplemented API: MW.rtc.nodes.Node.getEquivalentChildPositions");return[]},isSplittable:function(a){e.error("Unimplemented API: MW.rtc.nodes.Node.isSplittable");return!1},resetUniqueAttributes:function(){}})})},"MW/rtc/model/Position":function(){define("dojo/_base/declare dojo/_base/lang MW/rtc/browsersupport/BrowserSupportUtilities MW/rtc/model/PositionUtilities MW/rtc/model/events/nodechange/NodeChangeEventTypes mw-log/Log".split(" "),
function(h,e,g,d,c,b){return h(null,{constructor:function(a,f,b){this.node=a||null;this.offset=f||0;this.setRightAligned(b)},destroy:function(){this.isValid()&&this.isLive()&&d.detachPosition(this.node,this);this.node=null},_ignoreOffset:!1,setIgnoreOffset:function(){this._ignoreOffset=!0},isLinePosition:function(){return this._ignoreOffset},onChange:function(a){},getNode:function(){return this.node},getOffset:function(){return this.offset},setPosition:function(a,f){var b=this.isLive();b&&d.detachPosition(this.node,
this);this.node=a;this.offset=f;b&&d.attachPosition(this.node,this)},isAtEdge:function(){return this.isAtLeftEdge()||this.isAtRightEdge()},isAtLeftEdge:function(){return 0===this.offset},isAtRightEdge:function(){return this.offset===this.node.maxOffset()},setRightAligned:function(a){this.align=a?1:0},isRightAligned:function(){return 1===this.align},isValid:function(){return this.node&&this.node.rootContainer()&&0<=this.offset&&this.offset<=this.node.maxOffset()},isEqualTo:function(a){return a&&this.offset===
a.offset&&this.node===a.node},setLive:function(a){this.node&&(!1!==a?this.isLive()||d.attachPosition(this.node,this):d.detachPosition(this.node,this))},isLive:function(){return d.isPositionAttached(this)},print:function(a){var f=this.node.getText(),f=f.substring(0,this.offset)+"|"+f.substring(this.offset);a&&(this.offset<a-1?f=f.substring(0,a)+"...":(a=Math.floor(a/2),f="..."+f.substring(this.offset-a,this.offset+a)+(this.offset+a<f.length?"":"...")));return f},getLineColumn:function(){return{line:this.getLine(),
column:this.getColumn()}},getLine:function(){if(!this.isValid())return-1;var a=this.getNode().rootContainer(),a=this._getLine(a);return 0<=a?a+1:-1},_getLine:function(a){return g.indexOf(a.parent.children,a)},getColumn:function(){if(!this.isValid())return-1;var a=this.getNode(),f=1;a.offsetInContainer&&(f+=a.offsetInContainer()+this.getOffset());return f},handleNodeChange:function(a){if(this.node&&a.node===this.node){var f;switch(a.type){case c.INSERT_TEXT:f=this._handleInsertTextNodeEvent(a);break;
case c.DELETE_TEXT:f=this._handleDeleteTextNodeEvent(a);break;case c.SPLIT_NODE:f=this._handleSplitNodeEvent(a);break;case c.MERGE_NODE:f=this._handleMergeNodeEvent(a);break;case c.DELETE_NODE:f=this._handleDeleteNodeEvent(a);break;case c.UPDATE_ATTRIBUTES:f=this._handleUpdateAttributesEvent(a)}b.assert(this.isValid(),"Position invalid after handleNodeChange("+a.type+")!");f&&this._notifyChange(a.type,f.nodeHasChanged,f.offsetHasChanged);return this.node}},_handleInsertTextNodeEvent:function(a){var f=
!1;a.offset-this.align<this.offset&&(this.offset+=a.length,f=!0);return{nodeHasChanged:!1,offsetHasChanged:f}},_handleDeleteTextNodeEvent:function(a){var f=!1;a.offset<this.offset&&(this.offset=a.offset+a.length>this.offset?a.offset:this.offset-a.length,f=!0);return{nodeHasChanged:!1,offsetHasChanged:f}},_handleSplitNodeEvent:function(a){var f=!1,b=!1;this._ignoreOffset?f=a.nodeChanged&&!(a.lineStartOrEnd<this.align):a.offset-this.align<this.offset?(this.offset-=a.offset,b=!0,f=!a.nodeChanged):f=
a.nodeChanged;f&&(this.node=a.newNode);return{nodeHasChanged:f,offsetHasChanged:b}},_handleMergeNodeEvent:function(a){var f=!1;!this._ignoreOffset&&a.hasOwnProperty("offset")&&(this.offset+=a.offset,f=0<a.offset);b.assert(a.newNode,"New node missing in Position.handleNodeChange(MERGE_NODE).");this.node=a.newNode&&this._ignoreOffset?a.newNode.rootContainer():a.newNode;return{nodeHasChanged:!0,offsetHasChanged:f}},_handleDeleteNodeEvent:function(a){b.assert(a.newNode,"New node missing in Position.handleNodeChange(DELETE_NODE).");
if(this.align&&a.newEndNode)this.node=a.newEndNode,this.offset=a.newEndOffset;else{var f=a.newNode;this.node=f&&f.children&&0<f.children.length?f.children[0]:f;this.offset=a.newOffset}this._ignoreOffset&&(this.node=this.node.rootContainer(),this.offset=0);return{nodeHasChanged:!0,offsetHasChanged:!1}},_handleUpdateAttributesEvent:function(a){a=a.node.maxOffset();var f=!1;this.offset>a&&(f=!0,this.offset=a);return{nodeHasChanged:!1,offsetHasChanged:f}},handleSiblingNodeChange:function(a,f){var b=!1,
c=!1;if(this._ignoreOffset)throw Error("MW.rtc.model.Position.handleSiblingNodeChange does not support Line Positions");if(!f&&this.isAtLeftEdge()&&!this.isRightAligned()){var d=a.newNode.startNode();d&&(this.node=d,b=!0)}else if(f&&(this.isAtRightEdge()&&this.isRightAligned())&&(d=a.newNode.endNode()))this.node=d,this.offset=this.node.maxOffset(),b=c=!0;this._notifyChange(a.type,b,c);return this.node},_notifyChange:function(a,f,b){if(b||f)a=e.hitch(this,"onChange",{type:a,nodeHasChanged:f,offsetHasChanged:b}),
d.queueEvent(a)}})})},"MW/rtc/model/PositionUtilities":function(){define(["MW/rtc/browsersupport/BrowserSupportUtilities","MW/rtc/model/events/nodechange/NodeChangeEventTypes"],function(h,e){var g;return g={pendingEvents:[],updatePositions:function(d){var c=d.node;if(c)if(d.type===e.INSERT_NODE)g._updatePositionsForInsertNodeEvent(d);else{var b=g.getPositions(c),a=b.length;if(a)for(a-=1;0<=a;a-=1){var f=b[a],k=f.handleNodeChange(d);k?c!==k&&(g.detachPosition(c,f),g.attachPosition(k,f)):g.detachPosition(c,
f)}}},_updatePositionsForInsertNodeEvent:function(d){var c=d.newNode.previousSibling(),b=d.newNode.nextSibling(),a=d.newNode.isRootContainer(),f=a&&d.referenceSibling!==c,a=a&&d.referenceSibling!==b;c&&!f&&g._updateAdjacentPositions(c.endNode(),d,!0);b&&!a&&g._updateAdjacentPositions(b.startNode(),d,!1)},_updateAdjacentPositions:function(d,c,b){var a=g.getPositions(d);if(a.length)for(var f=a.length-1;0<=f;f-=1){var k=a[f],e=k.handleSiblingNodeChange(c,b);d!==e&&(g.detachPosition(d,k),g.attachPosition(e,
k))}},queueEvent:function(d){g.pendingEvents.push(d)},firePendingEvents:function(){for(;0<g.pendingEvents.length;){var d=g.pendingEvents;g.pendingEvents=[];for(var c=0;c<d.length;c++)d[c]()}},attachPosition:function(d,c){d.positionsSet||(d.positionsSet=h.createSet());d.positionsSet.add(c)},detachPosition:function(d,c){d.positionsSet.delete(c)},isPositionAttached:function(d){var c=d.getNode();return c&&c.positionsSet&&c.positionsSet.has(d)},getPositions:function(d){var c=[];(d=d&&d.positionsSet)&&
d.forEach(function(b){c.push(b)});return c},isPositionInRange:function(d,c){var b=d.getLineColumn(),a=b.line,b=b.column,f=c.getStartPosition().getLineColumn(),k=f.line,f=f.column,e=c.getEndPosition().getLineColumn(),g=e.line,e=e.column;return(a>k||a===k&&b>=f)&&(a<g||a===g&&b<=e)},comparePositions:function(d,c){var b=d.getLineColumn(),a=c.getLineColumn();return b.line===a.line?b.column-a.column:b.line-a.line}}})},"MW/rtc/model/events/nodechange/NodeChangeEventTypes":function(){define([],function(){return{DELETE_NODE:"deleteNode",
DELETE_TEXT:"deleteText",INSERT_NODE:"insertNode",INSERT_TEXT:"insertText",MERGE_NODE:"mergeNode",SPLIT_NODE:"splitNode",UPDATE_ATTRIBUTES:"updateAttributes"}})},"MW/rtc/plugins/view/layoutmanager/rules/BaseGroupingRule":function(){define(["dojo/_base/declare","MW/rtc/plugins/view/layoutmanager/abstract/BaseRule"],function(h,e){return h(e,{groupingType:"base",constructor:function(){},getOperationsForLayout:function(e,d,c){if(this._isApplicable(d))return{nodeToPlace:e}},getOperationsForRemove:function(e,
d){if(this._isApplicable(e))return{nodeToRemove:this._getDomNode(e)}},_canMergeBlocks:function(e,d){return!1},_canGroupTogether:function(e,d){return!1},_isApplicable:function(e){return e&&e.box&&e.groupingType===this.groupingType},getRefDomNode:function(e,d,c){return!this._isApplicable(d)?null:this.inherited(arguments)},_hasToRedrawNeighboringBlocks:function(e){return!1},_getNodesToRedraw:function(e,d){for(var c=[],b=e,a=d?"unshift":"push",f=d?"previousSibling":"nextSibling";b&&this._canGroupTogether(e,
b);){if(this._getDomNode(b))c[a](b);b=b[f]()}return c},priority:function(){return 0}})})},"MW/rtc/plugins/view/layoutmanager/abstract/BaseRule":function(){define(["dojo/_base/declare","dojo/dom-class","MW/rtc/abstract/AbstractPlugin","MW/rtc/model/DocumentUtilities","MW/rtc/plugins/view/layoutmanager/LayoutConstants"],function(h,e,g,d,c){return h(g,{constructor:function(){},getOperationsForLayout:function(b,a,f,c){return null},getOperationsForRemove:function(b,a){return null},getOperationsForRefresh:function(b){return null},
getOperationsForResize:function(){return null},reset:function(){},getRefDomNode:function(b,a,f){var c=this._getRefPosition(b,a);if(!c)return null;f=this._getDomNode(a);c={domNode:f,position:c,base:!0};f&&this._isParentDetached(f)&&(c=this._getRefDomNodeForDetachedParent(b,a,c)||c);return c},_getRefPosition:function(b,a){var f=this._getDomNode(a);return!f||!f.parentElement?null:1===d.nodesInOrder(b,a)?"before":"after"},_isParentDetached:function(b){return(b=(b=b.parentElement)&&b.rteNode)&&!b.isRootNode()&&
!b.rootContainer()},_getRefDomNodeForDetachedParent:function(b,a,f){var c,d;a=b.parent;"before"===f.position&&b===a.firstChild()?(c=this._getDomNode(a),d="first"):"after"===f.position&&b===a.lastChild()&&(c=this._getDomNode(a),d="last");return c?{domNode:c,position:d,base:!0}:null},_isApplicable:function(b){return!0},_getDomNode:function(b){if(b=b.box){var a=b.parentElement;return a&&e.contains(a,c.LINENODE_WRAPPER_CLASS)?a:b}},priority:function(){throw Error("Unimplemented API: MW.rtc.plugins.view.layoutmanager.BaseRule.priority");
}})})},"MW/rtc/model/DocumentUtilities":function(){define(["dojo/_base/lang","MW/rtc/browsersupport/BrowserSupportUtilities","MW/rtc/model/Position","MW/rtc/model/Range","./UnicodeCategories"],function(h,e,g,d,c){var b;return b={_LINE_COLUMN_GREATER_THAN_ZERO:"Line and column must be greater than zero",_LINE_MUST_EXIST_IN_DOCUMENT:"Line must be a valid line in the document",_COLUMN_MUST_EXIST_ON_LINE:"Column must be valid for the specified line",_SELECTION_START_LESS_THAN_END:"Text replacement start position must not be greater than end position",
_WORD_SEARCH_PATTERN:/\W/,reverseString:function(a){return a.split("").reverse().join("")},isSingleCharOrSpaces:function(a){return 1>=a.trim().length},assert:function(a,f){if(!a)throw Error(f);},checkLineExists:function(a,f){this.assert(0<f,this._LINE_COLUMN_GREATER_THAN_ZERO+", lineNumber \x3d "+f);this.assert(f<=a.getMaxLineNumber(),this._LINE_MUST_EXIST_IN_DOCUMENT)},checkLineColumnExists:function(a,f,b){this.checkLineExists(a,f);this.assert(0<b,this._LINE_COLUMN_GREATER_THAN_ZERO+", lineNumber \x3d "+
f+", column \x3d "+b);a=a.getLineNode(f-1);this.assert(a,this._LINE_MUST_EXIST_IN_DOCUMENT);this.assert(a.getText,this._LINE_MUST_EXIST_IN_DOCUMENT);a=a.getTextForPositioning().length+1;this.assert(b<=a,this._COLUMN_MUST_EXIST_ON_LINE)},checkLineColumnIsValid:function(a,f,b){if(f>a.getMaxLineNumber())return!1;a=a.getLineNode(f);if(!a)return!1;a=a.getTextForPositioning().length;return b>a?!1:!0},checkOneDirectionalSelection:function(a,f,b,c){this.assert(a<=b,this._SELECTION_START_LESS_THAN_END);a===
b&&this.assert(f<=c,this._SELECTION_START_LESS_THAN_END)},isAtStartOfContainer:function(a,f){var b=a.getNode(),c=f||b.textContainer();return 0===a.getOffset()&&b===c.startNode()},isAtStartOfReadOnlyContainer:function(a){return a.getNode().isReadOnly()&&b.isAtStartOfContainer(a)},isAtEndOfContainer:function(a,f){var b=a.getNode(),c=a.getOffset(),d=f||b.textContainer();return c===b.maxOffset()&&b===d.endNode()},isAtEndOfReadOnlyContainer:function(a){return a.getNode().isReadOnly()&&b.isAtEndOfContainer(a)},
isInLastLine:function(a){return!a.getNode().rootContainer().nextSibling()},isAtEndOfFile:function(a){return b.isInLastLine(a)&&b.isAtEndOfContainer(a)},isTextLevelContainer:function(a){return a.isTextNode()&&a.containsTextNodes()},isInTextLevelContainer:function(a){return a.parent&&b.isTextLevelContainer(a.parent)},isEdgeOfTextLevelContainer:function(a,f){if(b.isInTextLevelContainer(a)){var c=a.parent;if(0===f&&a===c.firstChild()||f===a.maxOffset()&&a===c.lastChild())return!0}return b.isTextLevelContainer(a)?
0===f||f===a.maxOffset():!1},isInWord:function(a){var f=a.getNode(),b=a.getOffset();a="";0===b?((a=f.previousSibling())?(a=a.getTextForPositioning(),a=a.substring(a.length-1)):a=" ",a+=f.getTextForPositioning().substring(0,1)):b===a.length?(a=f.getTextForPositioning(),a=a.substring(a.length-1),a=(f=f.nextSibling())?a+f.getTextForPositioning().substring(0,1):a+" "):a=f.getTextForPositioning().substring(b-1,b+1);return a.match(/\w\w/)?!0:a.match(/\w\W/)?-1:a.match(/\W\w/)?0:!1},getWordBoundary:function(a,
f,d,e){if(f.isOpaqueNode()){var g=f.maxOffset();if(d!==g&&0<a)return{node:f,posInNode:g};if(0!==d&&0>a)return{node:f,posInNode:0};f=0<a?f.nextSibling():f.previousSibling();if(!f)return null;d=0<a?0:f.maxOffset()}var h;0<f.offsetInContainer()?(g=f.rootContainer(),h=f.offsetInContainer()+d):(g=f.textContainer(),h=d);var m=g.getTextForPositioning(),m=0>a?b.reverseString(m.substring(0,h)):m.substring(h),q=c.unicodeWordCharacters(),r=RegExp("["+(q+"_")+"]+|\\s+|[!\\(\\)\\[\\]\\{\\}\\-\\+\\*,\x3d\\.\\?\\/\\:;%'\"\x26\x3c\x3e\\|\\^]+|"),
s=/\s*/,t;t=0<a?r.exec(m):s.exec(m);q=0;t&&0<t.index+t[0].length&&(q=t.index+t[0].length,m=m.substring(q));t=null;0<a?e||(t=s.exec(m)):t=r.exec(m);t&&0<t.index+t[0].length&&(q+=t.index+t[0].length);if(1>q)return null;if(1===q)return{node:g,column:h+a};e=h+a*q;if(0>a&&q<=d||0<a&&d+q<=f.maxOffset())return{node:f,posInNode:d+a*q};for(h=0<a?q-f.maxOffset()-d:q-d;0<h&&f;){f=0<a?f.nextSibling():f.previousSibling();if(!f)break;if(f.isOpaqueNode())return{node:f,posInNode:0<a?0:1};h=0<a?q-f.maxOffset()-d:
q-d;if(0>=h)break}return{node:g,column:e}},getCommonParent:function(a,f){if(a===f)return a;var b=a.depth(),c=f.depth();if(b>c)for(;b>c;)a=a.parent,b-=1;else for(;c>b;)f=f.parent,c-=1;for(;a.parent;)if(a.parent!==f.parent)a=a.parent,f=f.parent;else break;return a.parent},nodesInOrder:function(a,f){if(a===f)return 0;var b=a.depth(),c=f.depth();if(b>c){for(;b>c;)a=a.parent,b-=1;if(a===f)return-1}else if(c>b){for(;c>b;)f=f.parent,c-=1;if(a===f)return 1}for(;a.parent&&f.parent&&a.parent!==f.parent;)a=
a.parent,f=f.parent;return e.indexOf(a.parent.children,a)<e.indexOf(a.parent.children,f)?1:-1},getWritableChunksInRange:function(a,f){for(var b=a.getLineNumber(f[0]),c=b,d=b,e=[],b=0;b<f.length;b++){var d=f[b],g=f[b+1];d.isReadOnly()&&(g&&!g.isReadOnly())&&(c=a.getLineNumber(g));if(!d.isReadOnly()&&(!g||g.isReadOnly()))d=a.getLineNumber(d),e.push({startLine:c,endLine:d})}return e},getWhitespaceStringOfLength:function(a){for(var f="",b=0;b<a;b++)f+=" ";return f},getLeadingWhitespace:function(a){return a.match(/^\s*/)[0].length},
textLineArray:function(a){return a.split(b.NewLineRegex)},textToContent:function(a,f){var c,d=[],e=b.textLineArray(a),g,m,q;f?(m=f.textContainer().serialize(),f.textContainer().isRootContainer()||(q=f.rootContainer().serialize()),g=f.isTextNode()?f.serialize():f.textContainer().getDefaultChild()):(g=b.DEFAULT_TEXT_NODE,m=b.DEFAULT_CONTAINER_NODE);for(c=0;c<e.length;c+=1){var r=h.clone(g);r.text=e[c];if(1===e.length)return[r];var s=h.clone(m);s.children=[r];d.push(s)}return q?(c=h.clone(q),c.children=
d,[c]):d},DEFAULT_TEXT_NODE:{className:"PlainTextNode",text:""},DEFAULT_CONTAINER_NODE:{className:"LineNode",children:[]},DEFAULT_TAB_STRING:"    ",getWordAtPosition:function(a,f){return this.getStringAtPosition(a,f,this._WORD_SEARCH_PATTERN)},getStringAtPosition:function(a,f,b){if(!f.isValid())return null;a=this._getLineColumnAtPosition(a,f.getNode(),f.getOffset());f=f.getNode().rootContainer().getTextForPositioning();return this._getStringStartEndPositions(f,a,b)},_getLineColumnAtPosition:function(a,
f,b){var c=f.rootContainer();a=a.getLineNumber(c);f=f.offsetInContainer(c)+b;return{line:a,column:f}},_getStringStartEndPositions:function(a,f,b){this.assert(f&&0<=f.column&&f.column<=a.length);var c=f.column,d=this.reverseString(a.substring(0,c)),e=a.substring(c),g=d.search(b);-1===g&&(g=d.length);d=c-g;b=e.search(b);-1===b&&(b=e.length);c+=b;a=a.substring(d,c);return 0===a.length?null:{text:a,startLineCol:{line:f.line,column:d},endLineCol:{line:f.line,column:c}}},checkOverlapsWithRange:function(a,
f,b){var c,d,e,g;return b.some(function(b){c=a.line===b.startLine;d=a.column===b.startColumn;e=f.line===b.endLine;g=f.column===b.endColumn;return c&&e&&(d||g)})},getTextRangeFromLeftToPosition:function(a){var f=a.getNode();if(!f.isTextNode())return null;for(var b=f,c=a.getOffset(),c=f.getText().slice(0,c),d=f.textContainer(),f=f.prevNode();f&&f.isTextNode()&&f.textContainer()===d;)b=f,c=f.getText()+c,f=f.prevNode();return{startPos:new g(b,0),endPos:a,text:c}},getRangeAndTextOfTargetOnLine:function(a,
f,b){b=RegExp(b);a=a.getLineNode(f-1).getTextForPositioning();return(b=b.exec(a))?{start:b.index+1,end:b.index+b[0].length+1,text:b[0]}:null},isInDocument:function(a){return!a||!a.rootContainer()||!a.rootContainer().parent?!1:!0},createFullFileRange:function(a,f){var b=a.createLinePositionInLine(0,!1),c=f.getMaxLineNumber()-1,c=a.createLinePositionInLine(c,!1);return new d(b,c)},NewLineRegex:/\r\n|\r|\n/}})},"MW/rtc/model/Range":function(){define(["dojo/_base/declare"],function(h){return h(null,{_startPosition:null,
_endPosition:null,constructor:function(e,g){this._startPosition=e;this._endPosition=g},destroy:function(){this._startPosition.destroy();this._endPosition.destroy()},getStartPosition:function(){return this._startPosition},getEndPosition:function(){return this._endPosition},isEqualTo:function(e){return!!e&&this.constructor===e.constructor&&this._startPosition.isEqualTo(e._startPosition)&&this._endPosition.isEqualTo(e._endPosition)}})})},"MW/rtc/model/UnicodeCategories":function(){define([],function(){var h;
return h={unicodeCategories:{Cn:"\u0378\u0379\u037f-\u0383\u038b\u038d\u03a2\u0528-\u0530\u0557\u0558\u0560\u0588\u058b-\u0590\u05c8-\u05cf\u05eb-\u05ef\u05f5-\u05ff\u0604\u0605\u061c\u061d\u070e\u074b\u074c\u07b2-\u07bf\u07fb-\u07ff\u082e\u082f\u083f\u085c\u085d\u085f-\u08ff\u0978\u0980\u0984\u098d\u098e\u0991\u0992\u09a9\u09b1\u09b3-\u09b5\u09ba\u09bb\u09c5\u09c6\u09c9\u09ca\u09cf-\u09d6\u09d8-\u09db\u09de\u09e4\u09e5\u09fc-\u0a00\u0a04\u0a0b-\u0a0e\u0a11\u0a12\u0a29\u0a31\u0a34\u0a37\u0a3a\u0a3b\u0a3d\u0a43-\u0a46\u0a49\u0a4a\u0a4e-\u0a50\u0a52-\u0a58\u0a5d\u0a5f-\u0a65\u0a76-\u0a80\u0a84\u0a8e\u0a92\u0aa9\u0ab1\u0ab4\u0aba\u0abb\u0ac6\u0aca\u0ace\u0acf\u0ad1-\u0adf\u0ae4\u0ae5\u0af0\u0af2-\u0b00\u0b04\u0b0d\u0b0e\u0b11\u0b12\u0b29\u0b31\u0b34\u0b3a\u0b3b\u0b45\u0b46\u0b49\u0b4a\u0b4e-\u0b55\u0b58-\u0b5b\u0b5e\u0b64\u0b65\u0b78-\u0b81\u0b84\u0b8b-\u0b8d\u0b91\u0b96-\u0b98\u0b9b\u0b9d\u0ba0-\u0ba2\u0ba5-\u0ba7\u0bab-\u0bad\u0bba-\u0bbd\u0bc3-\u0bc5\u0bc9\u0bce\u0bcf\u0bd1-\u0bd6\u0bd8-\u0be5\u0bfb-\u0c00\u0c04\u0c0d\u0c11\u0c29\u0c34\u0c3a-\u0c3c\u0c45\u0c49\u0c4e-\u0c54\u0c57\u0c5a-\u0c5f\u0c64\u0c65\u0c70-\u0c77\u0c80\u0c81\u0c84\u0c8d\u0c91\u0ca9\u0cb4\u0cba\u0cbb\u0cc5\u0cc9\u0cce-\u0cd4\u0cd7-\u0cdd\u0cdf\u0ce4\u0ce5\u0cf0\u0cf3-\u0d01\u0d04\u0d0d\u0d11\u0d3b\u0d3c\u0d45\u0d49\u0d4f-\u0d56\u0d58-\u0d5f\u0d64\u0d65\u0d76-\u0d78\u0d80\u0d81\u0d84\u0d97-\u0d99\u0db2\u0dbc\u0dbe\u0dbf\u0dc7-\u0dc9\u0dcb-\u0dce\u0dd5\u0dd7\u0de0-\u0df1\u0df5-\u0e00\u0e3b-\u0e3e\u0e5c-\u0e80\u0e83\u0e85\u0e86\u0e89\u0e8b\u0e8c\u0e8e-\u0e93\u0e98\u0ea0\u0ea4\u0ea6\u0ea8\u0ea9\u0eac\u0eba\u0ebe\u0ebf\u0ec5\u0ec7\u0ece\u0ecf\u0eda\u0edb\u0ede-\u0eff\u0f48\u0f6d-\u0f70\u0f98\u0fbd\u0fcd\u0fdb-\u0fff\u10c6-\u10cf\u10fd-\u10ff\u1249\u124e\u124f\u1257\u1259\u125e\u125f\u1289\u128e\u128f\u12b1\u12b6\u12b7\u12bf\u12c1\u12c6\u12c7\u12d7\u1311\u1316\u1317\u135b\u135c\u137d-\u137f\u139a-\u139f\u13f5-\u13ff\u169d-\u169f\u16f1-\u16ff\u170d\u1715-\u171f\u1737-\u173f\u1754-\u175f\u176d\u1771\u1774-\u177f\u17de\u17df\u17ea-\u17ef\u17fa-\u17ff\u180f\u181a-\u181f\u1878-\u187f\u18ab-\u18af\u18f6-\u18ff\u191d-\u191f\u192c-\u192f\u193c-\u193f\u1941-\u1943\u196e\u196f\u1975-\u197f\u19ac-\u19af\u19ca-\u19cf\u19db-\u19dd\u1a1c\u1a1d\u1a5f\u1a7d\u1a7e\u1a8a-\u1a8f\u1a9a-\u1a9f\u1aae-\u1aff\u1b4c-\u1b4f\u1b7d-\u1b7f\u1bab-\u1bad\u1bba-\u1bbf\u1bf4-\u1bfb\u1c38-\u1c3a\u1c4a-\u1c4c\u1c80-\u1ccf\u1cf3-\u1cff\u1de7-\u1dfb\u1f16\u1f17\u1f1e\u1f1f\u1f46\u1f47\u1f4e\u1f4f\u1f58\u1f5a\u1f5c\u1f5e\u1f7e\u1f7f\u1fb5\u1fc5\u1fd4\u1fd5\u1fdc\u1ff0\u1ff1\u1ff5\u1fff\u2065-\u2069\u2072\u2073\u208f\u209d-\u209f\u20ba-\u20cf\u20f1-\u20ff\u218a-\u218f\u23f4-\u23ff\u2427-\u243f\u244b-\u245f\u2700\u27cb\u27cd\u2b4d-\u2b4f\u2b5a-\u2bff\u2c2f\u2c5f\u2cf2-\u2cf8\u2d26-\u2d2f\u2d66-\u2d6e\u2d71-\u2d7e\u2d97-\u2d9f\u2da7\u2daf\u2db7\u2dbf\u2dc7\u2dcf\u2dd7\u2ddf\u2e32-\u2e7f\u2e9a\u2ef4-\u2eff\u2fd6-\u2fef\u2ffc-\u2fff\u3040\u3097\u3098\u3100-\u3104\u312e-\u3130\u318f\u31bb-\u31bf\u31e4-\u31ef\u321f\u32ff\u4db6-\u4dbf\u9fcc-\u9fff\ua48d-\ua48f\ua4c7-\ua4cf\ua62c-\ua63f\ua674-\ua67b\ua698-\ua69f\ua6f8-\ua6ff\ua78f\ua792-\ua79f\ua7aa-\ua7f9\ua82c-\ua82f\ua83a-\ua83f\ua878-\ua87f\ua8c5-\ua8cd\ua8da-\ua8df\ua8fc-\ua8ff\ua954-\ua95e\ua97d-\ua97f\ua9ce\ua9da-\ua9dd\ua9e0-\ua9ff\uaa37-\uaa3f\uaa4e\uaa4f\uaa5a\uaa5b\uaa7c-\uaa7f\uaac3-\uaada\uaae0-\uab00\uab07\uab08\uab0f\uab10\uab17-\uab1f\uab27\uab2f-\uabbf\uabee\uabef\uabfa-\uabff\ud7a4-\ud7af\ud7c7-\ud7ca\ud7fc-\ud7ff\ufa2e\ufa2f\ufa6e\ufa6f\ufada-\ufaff\ufb07-\ufb12\ufb18-\ufb1c\ufb37\ufb3d\ufb3f\ufb42\ufb45\ufbc2-\ufbd2\ufd40-\ufd4f\ufd90\ufd91\ufdc8-\ufdef\ufdfe\ufdff\ufe1a-\ufe1f\ufe27-\ufe2f\ufe53\ufe67\ufe6c-\ufe6f\ufe75\ufefd\ufefe\uff00\uffbf-\uffc1\uffc8\uffc9\uffd0\uffd1\uffd8\uffd9\uffdd-\uffdf\uffe7\uffef-\ufff8\ufffe\uffff",
Lu:"A-Z\u00c0-\u00d6\u00d8-\u00de\u0100\u0102\u0104\u0106\u0108\u010a\u010c\u010e\u0110\u0112\u0114\u0116\u0118\u011a\u011c\u011e\u0120\u0122\u0124\u0126\u0128\u012a\u012c\u012e\u0130\u0132\u0134\u0136\u0139\u013b\u013d\u013f\u0141\u0143\u0145\u0147\u014a\u014c\u014e\u0150\u0152\u0154\u0156\u0158\u015a\u015c\u015e\u0160\u0162\u0164\u0166\u0168\u016a\u016c\u016e\u0170\u0172\u0174\u0176\u0178\u0179\u017b\u017d\u0181\u0182\u0184\u0186\u0187\u0189-\u018b\u018e-\u0191\u0193\u0194\u0196-\u0198\u019c\u019d\u019f\u01a0\u01a2\u01a4\u01a6\u01a7\u01a9\u01ac\u01ae\u01af\u01b1-\u01b3\u01b5\u01b7\u01b8\u01bc\u01c4\u01c7\u01ca\u01cd\u01cf\u01d1\u01d3\u01d5\u01d7\u01d9\u01db\u01de\u01e0\u01e2\u01e4\u01e6\u01e8\u01ea\u01ec\u01ee\u01f1\u01f4\u01f6-\u01f8\u01fa\u01fc\u01fe\u0200\u0202\u0204\u0206\u0208\u020a\u020c\u020e\u0210\u0212\u0214\u0216\u0218\u021a\u021c\u021e\u0220\u0222\u0224\u0226\u0228\u022a\u022c\u022e\u0230\u0232\u023a\u023b\u023d\u023e\u0241\u0243-\u0246\u0248\u024a\u024c\u024e\u0370\u0372\u0376\u0386\u0388-\u038a\u038c\u038e\u038f\u0391-\u03a1\u03a3-\u03ab\u03cf\u03d2-\u03d4\u03d8\u03da\u03dc\u03de\u03e0\u03e2\u03e4\u03e6\u03e8\u03ea\u03ec\u03ee\u03f4\u03f7\u03f9\u03fa\u03fd-\u042f\u0460\u0462\u0464\u0466\u0468\u046a\u046c\u046e\u0470\u0472\u0474\u0476\u0478\u047a\u047c\u047e\u0480\u048a\u048c\u048e\u0490\u0492\u0494\u0496\u0498\u049a\u049c\u049e\u04a0\u04a2\u04a4\u04a6\u04a8\u04aa\u04ac\u04ae\u04b0\u04b2\u04b4\u04b6\u04b8\u04ba\u04bc\u04be\u04c0\u04c1\u04c3\u04c5\u04c7\u04c9\u04cb\u04cd\u04d0\u04d2\u04d4\u04d6\u04d8\u04da\u04dc\u04de\u04e0\u04e2\u04e4\u04e6\u04e8\u04ea\u04ec\u04ee\u04f0\u04f2\u04f4\u04f6\u04f8\u04fa\u04fc\u04fe\u0500\u0502\u0504\u0506\u0508\u050a\u050c\u050e\u0510\u0512\u0514\u0516\u0518\u051a\u051c\u051e\u0520\u0522\u0524\u0526\u0531-\u0556\u10a0-\u10c5\u1e00\u1e02\u1e04\u1e06\u1e08\u1e0a\u1e0c\u1e0e\u1e10\u1e12\u1e14\u1e16\u1e18\u1e1a\u1e1c\u1e1e\u1e20\u1e22\u1e24\u1e26\u1e28\u1e2a\u1e2c\u1e2e\u1e30\u1e32\u1e34\u1e36\u1e38\u1e3a\u1e3c\u1e3e\u1e40\u1e42\u1e44\u1e46\u1e48\u1e4a\u1e4c\u1e4e\u1e50\u1e52\u1e54\u1e56\u1e58\u1e5a\u1e5c\u1e5e\u1e60\u1e62\u1e64\u1e66\u1e68\u1e6a\u1e6c\u1e6e\u1e70\u1e72\u1e74\u1e76\u1e78\u1e7a\u1e7c\u1e7e\u1e80\u1e82\u1e84\u1e86\u1e88\u1e8a\u1e8c\u1e8e\u1e90\u1e92\u1e94\u1e9e\u1ea0\u1ea2\u1ea4\u1ea6\u1ea8\u1eaa\u1eac\u1eae\u1eb0\u1eb2\u1eb4\u1eb6\u1eb8\u1eba\u1ebc\u1ebe\u1ec0\u1ec2\u1ec4\u1ec6\u1ec8\u1eca\u1ecc\u1ece\u1ed0\u1ed2\u1ed4\u1ed6\u1ed8\u1eda\u1edc\u1ede\u1ee0\u1ee2\u1ee4\u1ee6\u1ee8\u1eea\u1eec\u1eee\u1ef0\u1ef2\u1ef4\u1ef6\u1ef8\u1efa\u1efc\u1efe\u1f08-\u1f0f\u1f18-\u1f1d\u1f28-\u1f2f\u1f38-\u1f3f\u1f48-\u1f4d\u1f59\u1f5b\u1f5d\u1f5f\u1f68-\u1f6f\u1fb8-\u1fbb\u1fc8-\u1fcb\u1fd8-\u1fdb\u1fe8-\u1fec\u1ff8-\u1ffb\u2102\u2107\u210b-\u210d\u2110-\u2112\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u2130-\u2133\u213e\u213f\u2145\u2183\u2c00-\u2c2e\u2c60\u2c62-\u2c64\u2c67\u2c69\u2c6b\u2c6d-\u2c70\u2c72\u2c75\u2c7e-\u2c80\u2c82\u2c84\u2c86\u2c88\u2c8a\u2c8c\u2c8e\u2c90\u2c92\u2c94\u2c96\u2c98\u2c9a\u2c9c\u2c9e\u2ca0\u2ca2\u2ca4\u2ca6\u2ca8\u2caa\u2cac\u2cae\u2cb0\u2cb2\u2cb4\u2cb6\u2cb8\u2cba\u2cbc\u2cbe\u2cc0\u2cc2\u2cc4\u2cc6\u2cc8\u2cca\u2ccc\u2cce\u2cd0\u2cd2\u2cd4\u2cd6\u2cd8\u2cda\u2cdc\u2cde\u2ce0\u2ce2\u2ceb\u2ced\ua640\ua642\ua644\ua646\ua648\ua64a\ua64c\ua64e\ua650\ua652\ua654\ua656\ua658\ua65a\ua65c\ua65e\ua660\ua662\ua664\ua666\ua668\ua66a\ua66c\ua680\ua682\ua684\ua686\ua688\ua68a\ua68c\ua68e\ua690\ua692\ua694\ua696\ua722\ua724\ua726\ua728\ua72a\ua72c\ua72e\ua732\ua734\ua736\ua738\ua73a\ua73c\ua73e\ua740\ua742\ua744\ua746\ua748\ua74a\ua74c\ua74e\ua750\ua752\ua754\ua756\ua758\ua75a\ua75c\ua75e\ua760\ua762\ua764\ua766\ua768\ua76a\ua76c\ua76e\ua779\ua77b\ua77d\ua77e\ua780\ua782\ua784\ua786\ua78b\ua78d\ua790\ua7a0\ua7a2\ua7a4\ua7a6\ua7a8\uff21-\uff3a",
Ll:"a-z\u00aa\u00b5\u00ba\u00df-\u00f6\u00f8-\u00ff\u0101\u0103\u0105\u0107\u0109\u010b\u010d\u010f\u0111\u0113\u0115\u0117\u0119\u011b\u011d\u011f\u0121\u0123\u0125\u0127\u0129\u012b\u012d\u012f\u0131\u0133\u0135\u0137\u0138\u013a\u013c\u013e\u0140\u0142\u0144\u0146\u0148\u0149\u014b\u014d\u014f\u0151\u0153\u0155\u0157\u0159\u015b\u015d\u015f\u0161\u0163\u0165\u0167\u0169\u016b\u016d\u016f\u0171\u0173\u0175\u0177\u017a\u017c\u017e-\u0180\u0183\u0185\u0188\u018c\u018d\u0192\u0195\u0199-\u019b\u019e\u01a1\u01a3\u01a5\u01a8\u01aa\u01ab\u01ad\u01b0\u01b4\u01b6\u01b9\u01ba\u01bd-\u01bf\u01c6\u01c9\u01cc\u01ce\u01d0\u01d2\u01d4\u01d6\u01d8\u01da\u01dc\u01dd\u01df\u01e1\u01e3\u01e5\u01e7\u01e9\u01eb\u01ed\u01ef\u01f0\u01f3\u01f5\u01f9\u01fb\u01fd\u01ff\u0201\u0203\u0205\u0207\u0209\u020b\u020d\u020f\u0211\u0213\u0215\u0217\u0219\u021b\u021d\u021f\u0221\u0223\u0225\u0227\u0229\u022b\u022d\u022f\u0231\u0233-\u0239\u023c\u023f\u0240\u0242\u0247\u0249\u024b\u024d\u024f-\u0293\u0295-\u02af\u0371\u0373\u0377\u037b-\u037d\u0390\u03ac-\u03ce\u03d0\u03d1\u03d5-\u03d7\u03d9\u03db\u03dd\u03df\u03e1\u03e3\u03e5\u03e7\u03e9\u03eb\u03ed\u03ef-\u03f3\u03f5\u03f8\u03fb\u03fc\u0430-\u045f\u0461\u0463\u0465\u0467\u0469\u046b\u046d\u046f\u0471\u0473\u0475\u0477\u0479\u047b\u047d\u047f\u0481\u048b\u048d\u048f\u0491\u0493\u0495\u0497\u0499\u049b\u049d\u049f\u04a1\u04a3\u04a5\u04a7\u04a9\u04ab\u04ad\u04af\u04b1\u04b3\u04b5\u04b7\u04b9\u04bb\u04bd\u04bf\u04c2\u04c4\u04c6\u04c8\u04ca\u04cc\u04ce\u04cf\u04d1\u04d3\u04d5\u04d7\u04d9\u04db\u04dd\u04df\u04e1\u04e3\u04e5\u04e7\u04e9\u04eb\u04ed\u04ef\u04f1\u04f3\u04f5\u04f7\u04f9\u04fb\u04fd\u04ff\u0501\u0503\u0505\u0507\u0509\u050b\u050d\u050f\u0511\u0513\u0515\u0517\u0519\u051b\u051d\u051f\u0521\u0523\u0525\u0527\u0561-\u0587\u1d00-\u1d2b\u1d62-\u1d77\u1d79-\u1d9a\u1e01\u1e03\u1e05\u1e07\u1e09\u1e0b\u1e0d\u1e0f\u1e11\u1e13\u1e15\u1e17\u1e19\u1e1b\u1e1d\u1e1f\u1e21\u1e23\u1e25\u1e27\u1e29\u1e2b\u1e2d\u1e2f\u1e31\u1e33\u1e35\u1e37\u1e39\u1e3b\u1e3d\u1e3f\u1e41\u1e43\u1e45\u1e47\u1e49\u1e4b\u1e4d\u1e4f\u1e51\u1e53\u1e55\u1e57\u1e59\u1e5b\u1e5d\u1e5f\u1e61\u1e63\u1e65\u1e67\u1e69\u1e6b\u1e6d\u1e6f\u1e71\u1e73\u1e75\u1e77\u1e79\u1e7b\u1e7d\u1e7f\u1e81\u1e83\u1e85\u1e87\u1e89\u1e8b\u1e8d\u1e8f\u1e91\u1e93\u1e95-\u1e9d\u1e9f\u1ea1\u1ea3\u1ea5\u1ea7\u1ea9\u1eab\u1ead\u1eaf\u1eb1\u1eb3\u1eb5\u1eb7\u1eb9\u1ebb\u1ebd\u1ebf\u1ec1\u1ec3\u1ec5\u1ec7\u1ec9\u1ecb\u1ecd\u1ecf\u1ed1\u1ed3\u1ed5\u1ed7\u1ed9\u1edb\u1edd\u1edf\u1ee1\u1ee3\u1ee5\u1ee7\u1ee9\u1eeb\u1eed\u1eef\u1ef1\u1ef3\u1ef5\u1ef7\u1ef9\u1efb\u1efd\u1eff-\u1f07\u1f10-\u1f15\u1f20-\u1f27\u1f30-\u1f37\u1f40-\u1f45\u1f50-\u1f57\u1f60-\u1f67\u1f70-\u1f7d\u1f80-\u1f87\u1f90-\u1f97\u1fa0-\u1fa7\u1fb0-\u1fb4\u1fb6\u1fb7\u1fbe\u1fc2-\u1fc4\u1fc6\u1fc7\u1fd0-\u1fd3\u1fd6\u1fd7\u1fe0-\u1fe7\u1ff2-\u1ff4\u1ff6\u1ff7\u210a\u210e\u210f\u2113\u212f\u2134\u2139\u213c\u213d\u2146-\u2149\u214e\u2184\u2c30-\u2c5e\u2c61\u2c65\u2c66\u2c68\u2c6a\u2c6c\u2c71\u2c73\u2c74\u2c76-\u2c7c\u2c81\u2c83\u2c85\u2c87\u2c89\u2c8b\u2c8d\u2c8f\u2c91\u2c93\u2c95\u2c97\u2c99\u2c9b\u2c9d\u2c9f\u2ca1\u2ca3\u2ca5\u2ca7\u2ca9\u2cab\u2cad\u2caf\u2cb1\u2cb3\u2cb5\u2cb7\u2cb9\u2cbb\u2cbd\u2cbf\u2cc1\u2cc3\u2cc5\u2cc7\u2cc9\u2ccb\u2ccd\u2ccf\u2cd1\u2cd3\u2cd5\u2cd7\u2cd9\u2cdb\u2cdd\u2cdf\u2ce1\u2ce3\u2ce4\u2cec\u2cee\u2d00-\u2d25\ua641\ua643\ua645\ua647\ua649\ua64b\ua64d\ua64f\ua651\ua653\ua655\ua657\ua659\ua65b\ua65d\ua65f\ua661\ua663\ua665\ua667\ua669\ua66b\ua66d\ua681\ua683\ua685\ua687\ua689\ua68b\ua68d\ua68f\ua691\ua693\ua695\ua697\ua723\ua725\ua727\ua729\ua72b\ua72d\ua72f-\ua731\ua733\ua735\ua737\ua739\ua73b\ua73d\ua73f\ua741\ua743\ua745\ua747\ua749\ua74b\ua74d\ua74f\ua751\ua753\ua755\ua757\ua759\ua75b\ua75d\ua75f\ua761\ua763\ua765\ua767\ua769\ua76b\ua76d\ua76f\ua771-\ua778\ua77a\ua77c\ua77f\ua781\ua783\ua785\ua787\ua78c\ua78e\ua791\ua7a1\ua7a3\ua7a5\ua7a7\ua7a9\ua7fa\ufb00-\ufb06\ufb13-\ufb17\uff41-\uff5a",
Lt:"\u01c5\u01c8\u01cb\u01f2\u1f88-\u1f8f\u1f98-\u1f9f\u1fa8-\u1faf\u1fbc\u1fcc\u1ffc",Lm:"\u02b0-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0374\u037a\u0559\u0640\u06e5\u06e6\u07f4\u07f5\u07fa\u081a\u0824\u0828\u0971\u0e46\u0ec6\u10fc\u17d7\u1843\u1aa7\u1c78-\u1c7d\u1d2c-\u1d61\u1d78\u1d9b-\u1dbf\u2071\u207f\u2090-\u209c\u2c7d\u2d6f\u2e2f\u3005\u3031-\u3035\u303b\u309d\u309e\u30fc-\u30fe\ua015\ua4f8-\ua4fd\ua60c\ua67f\ua717-\ua71f\ua770\ua788\ua9cf\uaa70\uaadd\uff70\uff9e\uff9f",Lo:"\u01bb\u01c0-\u01c3\u0294\u05d0-\u05ea\u05f0-\u05f2\u0620-\u063f\u0641-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u0800-\u0815\u0840-\u0858\u0904-\u0939\u093d\u0950\u0958-\u0961\u0972-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e45\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0edc\u0edd\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10d0-\u10fa\u1100-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17dc\u1820-\u1842\u1844-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bc0-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c77\u1ce9-\u1cec\u1cee-\u1cf1\u2135-\u2138\u2d30-\u2d65\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3006\u303c\u3041-\u3096\u309f\u30a1-\u30fa\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcb\ua000-\ua014\ua016-\ua48c\ua4d0-\ua4f7\ua500-\ua60b\ua610-\ua61f\ua62a\ua62b\ua66e\ua6a0-\ua6e5\ua7fb-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa6f\uaa71-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb\uaadc\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff66-\uff6f\uff71-\uff9d\uffa0-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",
Mn:"\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u0900-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962\u0963\u0981\u09bc\u09c1-\u09c4\u09cd\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b62\u0b63\u0b82\u0bc0\u0bcd\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc6\u0ccc\u0ccd\u0ce2\u0ce3\u0d41-\u0d44\u0d4d\u0d62\u0d63\u0dca\u0dd2-\u0dd4\u0dd6\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1be6\u1be8\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfc-\u1dff\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe26",
Nd:"0-9\u0660-\u0669\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u1090-\u1099\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\ua620-\ua629\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\uaa50-\uaa59\uabf0-\uabf9\uff10-\uff19",Nl:"\u16ee-\u16f0\u2160-\u2182\u2185-\u2188\u3007\u3021-\u3029\u3038-\u303a\ua6e6-\ua6ef",
No:"\u00b2\u00b3\u00b9\u00bc-\u00be\u09f4-\u09f9\u0b72-\u0b77\u0bf0-\u0bf2\u0c78-\u0c7e\u0d70-\u0d75\u0f2a-\u0f33\u1369-\u137c\u17f0-\u17f9\u19da\u2070\u2074-\u2079\u2080-\u2089\u2150-\u215f\u2189\u2460-\u249b\u24ea-\u24ff\u2776-\u2793\u2cfd\u3192-\u3195\u3220-\u3229\u3251-\u325f\u3280-\u3289\u32b1-\u32bf\ua830-\ua835",Sk:"^`\u00a8\u00af\u00b4\u00b8\u02c2-\u02c5\u02d2-\u02df\u02e5-\u02eb\u02ed\u02ef-\u02ff\u0375\u0384\u0385\u1fbd\u1fbf-\u1fc1\u1fcd-\u1fcf\u1fdd-\u1fdf\u1fed-\u1fef\u1ffd\u1ffe\u309b\u309c\ua700-\ua716\ua720\ua721\ua789\ua78a\ufbb2-\ufbc1\uff3e\uff40\uffe3"},
unicodeWordCharacters:function(){return"Lu Ll Lt Lm Lo Mn Nd Nl No Sk".split(" ").reduce(function(e,g){return e+h.unicodeCategories[g]},"")}}})},"MW/rtc/plugins/view/layoutmanager/LayoutConstants":function(){define([],function(){return{LINENODE_WRAPPER_CLASS:"inlineWrapper",ROOTNODE_CLASS:"rootNode",RIGHT_MARGIN_WIDTH:32}})},"MW/rtc/nodes/inner/LineNode":function(){define(["dojo/_base/declare","MW/rtc/nodes/InnerNode","MW/rtc/plugins/view/layoutmanager/rules/ContiguousGroupingRule"],function(h,e,
g){return h([e],{constructor:function(d,c){this.groupingType=g().groupingType;c&&c.anchorId&&(this.anchorId=c.anchorId)},className:"LineNode",groupingName:"CodeBlock",containerType:function(){return"code"},getDefaultChild:function(){return{className:"PlainTextNode",text:""}},isTextContainerNode:function(){return!0},containsTextNodes:function(){return!0},getCodeText:function(){return this.getCodeTextOfChildren()},_serializeAttributes:function(d){this.anchorId&&(d.anchorId=this.anchorId)}})})},"MW/rtc/nodes/InnerNode":function(){define(["dojo/_base/declare",
"MW/rtc/browsersupport/BrowserSupportUtilities","MW/rtc/model/Position","MW/rtc/nodes/Node","mw-log/Log"],function(h,e,g,d,c){return h(d,{constructor:function(b){this.children=b;this.children.forEach(function(a){a.parent=this},this)},className:"InnerNode",getDefaultChild:function(){c.error("getDefaultChild() has to be overloaded in "+this.className+".")},_childOffset:function(b){var a=this.startNode();if(a){if(b===a)return 0;for(var f=0,c=a.textContainer();a!==b;){f+=a.maxOffset();a=a.nextNode();
if(!a)break;a.textContainer()!==c&&a.textContainer()!==c.textContainer()&&(f+=this.CHILD_TEXT_SEPARATOR.length);c=a.textContainer()}return f}return 0},firstChild:function(){if(0<this.children.length)return this.children[0];c.assert("InnerNode must have at least one child")},lastChild:function(){if(0<this.children.length)return this.children[this.children.length-1];c.assert("InnerNode must have at least one child")},addChild:function(b,a){b&&(1===arguments.length&&(a=this.children.length),b.parent=
this,this.children.splice(a,0,b))},replaceChild:function(b,a){b&&(b.parent=this,this.children.splice(a,1,b))},removeChild:function(b){var a=e.indexOf(this.children,b);b.parent=null;this.children.splice(a,1)},empty:function(){var b=this.children.length,a;for(a=0;a<b;a+=1)this.children[a].parent=null;this.children=[]},startNode:function(){return 0<this.children.length?this.children[0].startNode():null},endNode:function(){return 0<this.children.length?this.children[this.children.length-1].endNode():
null},CHILD_TEXT_SEPARATOR:"",getText:function(){return this._getTextRepresentation(function(b){return b.getText()})},getTextForPositioning:function(){return this._getTextRepresentation(function(b){return b.getTextForPositioning()})},getCodeText:function(){return""},getCodeTextOfChildren:function(){return this._getTextRepresentation(function(b){return b.getCodeText()})},_getTextRepresentation:function(b){for(var a="",f=this.children.length,c=0;c<f;c+=1)a+=b(this.children[c]),c<f-1&&(a+=this.CHILD_TEXT_SEPARATOR);
return a},maxOffset:function(){var b=0;if(this.children&&0<this.children.length){var a=this.CHILD_TEXT_SEPARATOR.length;this.children.forEach(function(f,c){b+=f.maxOffset()+(0<c?a:0)})}return b},childrenAreContainers:!1,getPositionFromOffset:function(b){if(!(this.children&&0<this.children.length))return null;for(var a=this.startNode(),f=this.endNode(),c=a.textContainer();b>a.maxOffset();){if(a===f)return a.endPosition();b-=a.maxOffset();a=a.nextNode();a.textContainer()!==c&&a.textContainer()!==c.textContainer()&&
(b-=a.rootContainer().CHILD_TEXT_SEPARATOR.length);c=a.textContainer()}return a.getPositionFromOffset(b)},startPosition:function(){return this.startNode()&&this.startNode().startPosition()},endPosition:function(){return this.endNode()&&this.endNode().endPosition()},getEquivalentChildPositions:function(b){for(var a,f,c=[],d=f=0,e=0;e<this.children.length;e++)a=this.children[e],f=d,d+=a.maxOffset(),0<e&&(f+=this.CHILD_TEXT_SEPARATOR.length,d+=this.CHILD_TEXT_SEPARATOR.length),f<=b&&b<=d&&(f=b-f,c.push(new g(a,
f)));return c},resetUniqueAttributes:function(){this.inherited(arguments);delete this.anchorId},isSplittable:function(b){if(0===b||b===this.maxOffset())return!1;b=this.getEquivalentChildPositions(b)[0];return b.isAtEdge()?!0:b.getNode().isSplittable(b.getOffset())}})})},"MW/rtc/plugins/view/layoutmanager/rules/ContiguousGroupingRule":function(){define("dojo/_base/declare dojo/dom-class dojo/dom-construct MW/rtc/plugins/view/layoutmanager/LayoutUtilities MW/rtc/plugins/view/layoutmanager/rules/BaseGroupingRule MW/rtc/view/ViewUtilities".split(" "),
function(h,e,g,d,c,b){return h(c,{groupingType:"contiguous",_BLOCK_SUFFIX:"Block",_BLOCK_CLASS:"contiguous",constructor:function(a){this._domTarget=a},getOperationsForLayout:function(a,f,b,d){var e={};e.nodeToPlace=a;if(this._isApplicable(f)){var h=this._getSiblingBlockReference(f,b);if(h)return e.nodeToPlaceRefNode=h.domNode,e.nodeToPlaceRefPos=h.position,e;h=this._createBlock(f);g.place(a,h);e.nodeToPlace=h}if(this._domTarget.contains(b)&&f.isRootContainer()&&(f.groupingType===c().groupingType||
f.groupingType===this.groupingType))a=f.previousSibling(),f=f.nextSibling(),b=this._getBlock(a),h=this._getBlock(f),this._needsToRedrawBlocks(b,h,d)&&(d=this._getNodesToRedraw(a,!0),f=this._getNodesToRedraw(f,!1),e.prevBlock=this._getBlockByNodes(d),e.nextBlock=this._getBlockByNodes(f));return e},_needsToRedrawBlocks:function(a,f,b){return a||f||b&&d.isUpdateOperation(b)&&b.node.groupingType!==this.groupingType?!0:!1},_getSiblingBlockReference:function(a,f){var b={currentNode:a,iterator:"previousSibling"},
c={currentNode:a,iterator:"nextSibling"};do{if((b=b&&this._stepSearchForSiblingBlockReference(a,b))&&b.domNode)return{domNode:b.domNode,position:"after"};if((c=c&&this._stepSearchForSiblingBlockReference(a,c))&&c.domNode)return{domNode:c.domNode,position:"before"};if(!this._domTarget.contains(f))break}while(b||c);return null},_stepSearchForSiblingBlockReference:function(a,f){var b=f.currentNode[f.iterator]();if(!b||b.groupingType!==this.groupingType&&b.box&&b.box.parentElement)return null;var c=this._getBlock(b);
c&&(c.parentElement&&e.contains(c,this._getBlockClass(a)))&&(f.domNode=this._getDomNode(b));f.currentNode=b;return f},_getBlockByNodes:function(a){var f;if(a&&a.length){f=a.map(this._getDomNode,this);var b=f.map(function(a){return a.parentNode}).filter(this._isBlockElement,this);f={container:this._createBlock(a[0]),oldBlockDomNodes:b,childDomNodes:f,childNodes:a}}return f},getOperationsForRemove:function(a,f){return this._isApplicable(a)?this._removeNodeAndBlock(a):this._mergeSiblingBlocks(a)},_removeNodeAndBlock:function(a){var f=
this._getDomNode(a);a={nodeToMerge:[]};a.nodeToRemove=f;var b;if((b=f.parentElement)&&this._isBlockElement(b)&&1===b.childElementCount)a.nodeToRemove=b,f=b.previousElementSibling,b=b.nextElementSibling,this._canMergeBlocks(f,b)&&a.nodeToMerge.push([f,b]);return a},_mergeSiblingBlocks:function(a){var f=this._getDomNode(a);a={nodeToMerge:[]};a.nodeToRemove=f;var b=f.previousElementSibling,f=f.nextElementSibling;b&&(f&&b.childElementCount&&f.childElementCount&&this._canMergeBlocks(b.lastChild,f.firstChild))&&
a.nodeToMerge.push([b.lastChild,f.firstChild]);this._canMergeBlocks(b,f)&&a.nodeToMerge.push([b,f]);return a},getRefDomNode:function(a,f,b){if(!this._isApplicable(f))return null;b=this._getRefPosition(a,f);if(!b)return null;var c=this._getDomNode(f);this._canGroupTogether(a,f)&&(a.nextSibling()===f||a.previousSibling()===f)?f=c:(f=this._getRefDomNodeFromParentElement(f,c),b=this._getRefPositionForParentOfTarget(b,f,a,c));return{domNode:f,position:b}},_getRefDomNodeFromParentElement:function(a,f){for(var c=
b.getLineage(a),d=c.length-1;0<=d;d-=1){var e=this._getBlock(c[d]);if(e)return e}return f.parentElement},_getRefPositionForParentOfTarget:function(a,f,b,c){if(f.firstChild===f.lastChild)return a;"before"===a&&this._shouldPlaceAfterRefDomNode(f,b,c)?a="after":"after"===a&&this._shouldPlaceBeforeRefDomNode(f,b,c)&&(a="before");return a},_shouldPlaceAfterRefDomNode:function(a,f,b){if(b===a.firstChild)return!1;f=this._getNodesToRedraw(f.nextSibling(),!1);if(0===f.length)return!1;f=f[f.length-1];if(this._getDomNode(f)===
a.lastChild)return!0;f=f.nextSibling();return!f||this._getDomNode(f)===a.nextElementSibling?!0:!1},_shouldPlaceBeforeRefDomNode:function(a,f,b){if(b===a.lastChild)return!1;f=f.previousSibling();var c=this._getNodesToRedraw(f,!0);if(0===c.length||b.parentElement!==a||!this._getBlock(f)&&1<c.length)return!1;b=c[0];if(this._getDomNode(b)===a.firstChild)return!0;f=b.previousSibling();return!f||this._getDomNode(f)===a.previousElementSibling?!0:!1},_getBlock:function(a){if(a){var f=this._getDomNode(a);
return(f=f&&f.parentElement)&&e.contains(f,this._getBlockClass(a))?f:null}},_createBlock:function(a){return g.create("div",{"class":this._getBlockClass(a)+" "+this._BLOCK_CLASS})},_getBlockClass:function(a){return a.groupingName?a.groupingName:a.className+this._BLOCK_SUFFIX},_isBlockElement:function(a){return!!a&&e.contains(a,this._BLOCK_CLASS)},_canMergeBlocks:function(a,f){if(!a||!f||!a.className||!f.className)return!1;var b=a.className.split(" "),c=f.className.split(" ");return b[0]===c[0]&&b[1]===
c[1]&&b[1]===this.groupingType},_canGroupTogether:function(a,f){return a.groupingType===this.groupingType&&a.groupingType===f.groupingType&&this._getBlockClass(a)===this._getBlockClass(f)},priority:function(){return 1}})})},"MW/rtc/plugins/view/layoutmanager/LayoutUtilities":function(){define(["MW/rtc/model/events/nodechange/NodeChangeEventTypes"],function(h){return{OPERATION:{LAYOUT:"layout",UPDATE:"update",REMOVE:"remove"},getLayoutOperationsFromNodeChangeEvent:function(e){var g=[];switch(e.type){case h.INSERT_NODE:g=
this._handleInsertNode(e);break;case h.DELETE_NODE:g=this._handleDeleteNode(e);break;case h.UPDATE_ATTRIBUTES:case h.INSERT_TEXT:case h.DELETE_TEXT:g=this._handleUpdateNode(e);break;case h.MERGE_NODE:g=this._handleMergeNode(e);break;case h.SPLIT_NODE:g=this._handleSplitNode(e)}return g},_handleInsertNode:function(e){return[this._createLayoutOperation(e.newNode)]},_handleDeleteNode:function(e){return[this._createRemoveOperation(e.node)]},_handleUpdateNode:function(e){return[this._createUpdateOperation(e.node)]},
_handleMergeNode:function(e){var g=[];e.node!==e.newNode&&(g.push(this._createRemoveOperation(e.node)),g.push(this._createUpdateOperation(e.newNode)));return g},_handleSplitNode:function(e){var g=[];e.node!==e.newNode&&(e.node.box?g.push(this._createUpdateOperation(e.node)):g.push(this._createLayoutOperation(e.node)),e.newNode&&g.push(this._createLayoutOperation(e.newNode)));return g},_createLayoutOperation:function(e){return{type:this.OPERATION.LAYOUT,node:e}},_createUpdateOperation:function(e){return{type:this.OPERATION.UPDATE,
node:e}},_createRemoveOperation:function(e){return{type:this.OPERATION.REMOVE,node:e}},isLayoutOperation:function(e){return e.type===this.OPERATION.LAYOUT},isUpdateOperation:function(e){return e.type===this.OPERATION.UPDATE},isRemoveOperation:function(e){return e.type===this.OPERATION.REMOVE},isInModel:function(e){return!!e.rootContainer()},isInView:function(e,g){return e.box&&g.contains(e.box)}}})},"MW/rtc/view/ViewUtilities":function(){define([],function(){return{assert:function(h,e){if(!h)throw Error(e);
},isDescendant:function(h,e){for(var g=h.parentNode;g;){if(g===e)return!0;g=g.parentNode}return!1},isDomTextNode:function(h){return h&&h.nodeType===Node.TEXT_NODE},hasViewOnlyText:function(h){return h.box.textContent!==h.getText()},getVerticalDimensionsBetweenPositions:function(h,e,g){h=this.getTopOfPositionLine(h,g);e=this.getBottomOfPositionLine(e,g);return{top:h,bottom:e,height:e-h}},getTopOfPositionLine:function(h,e){var g=h.getNode().rootContainer();if(this._isRootContainerVisible(g))return e.getNodeTop(g,
!0);if(d=this._getVisibleRootContainerAbove(g))return e.getNodeBottom(d,!0);var d=this._getVisibleRootContainerBelow(g);return d?e.getNodeTop(d,!0):0},getBottomOfPositionLine:function(h,e){var g=h.getNode().rootContainer();if(this._isRootContainerVisible(g))return e.getNodeBottom(g,!0);if(d=this._getVisibleRootContainerBelow(g))return e.getNodeTop(d,!0);var d=this._getVisibleRootContainerAbove(g);return d?e.getNodeBottom(d,!0):0},getTopOfVisiblePositionLine:function(h,e){var g=h.getNode().rootContainer();
return this._isRootContainerVisible(g)?e.getNodeTop(g,!0):(g=this._getVisibleRootContainerAbove(g))?e.getNodeTop(g,!0):0},_isRootContainerVisible:function(h){return null!=h.box},_getVisibleRootContainerAbove:function(h){for(h=h.previousSibling();h;){if(this._isRootContainerVisible(h))return h;h=h.previousSibling()}return null},_getVisibleRootContainerBelow:function(h){for(h=h.nextSibling();h;){if(this._isRootContainerVisible(h))return h;h=h.nextSibling()}return null},getLineage:function(h){var e=
[];for(h=this.getDomNode(h);h;){var g=h.rteNode;if(g){if(g.isRootNode())break;e.unshift(g)}h=h.parentNode}return e},getZeroBasedVisibleLineNumbers:function(h){return h.getVisibleLineNumbers().map(function(e){return e-1})},getDomNode:function(h){return h.box}}})},"MW/rtc/cursor/CursorProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/cursor/Cursor"],function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],
createInstance:["rtc.internaldocument","rtc.view","rtc.fileendselectable","rtc.cursor.navigator"]}},createInstance:function(d,c,b,a){return new g(d,c,b,a)}})})},"MW/rtc/cursor/Cursor":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/aspect dojo/mouse MW/rtc/abstract/AbstractPlugin MW/rtc/model/DocumentUtilities MW/rtc/model/Position MW/rtc/model/PositionUtilities MW/rtc/model/Range MW/rtc/model/RangeUtilities MW/rtc/model/Selection MW/rtc/model/SelectionUtilities mw-log/Log".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q){return h(b,{_MISSING_SELECTION_ERROR:"Expected a selection when using this API.",NONE:0,LEFT:1,RIGHT:2,UP:3,DOWN:4,START:5,END:6,LINE_START:7,LINE_START_POS1:8,LINE_END:9,WORD_LEFT:10,WORD_RIGHT:11,WORD_RIGHT_EXCL:12,PAGE_UP:13,PAGE_DOWN:14,KEEP_ANCHOR:15,KEYBOARD_SELECT:16,MOUSE_SELECT:20,MOUSE_DSELECT:21,MOUSE_TSELECT:22,DELETE:23,EVENT_OUTSIDE:24,DOUBLE_CLICK_TIME:400,constructor:function(a,b,c,k){this._internalDocument=a;this._view=b;this._cursorNavigator=
k;this.position=new f;this.anchor=new f;this._offsetInLine=null;this._pageYOffset={dir:this.NONE,offset:-1};this._preservedSelection={};this._fileEndSelected=c?!1:null;this._selectionAutoScrollTimer=this._currentAction=null;this._initialized=this._pendingChangeEvent=this._suspendChangeEvent=this._scrollLater=!1;this.own(d.after(this._internalDocument,"onDocumentReset",e.hitch(this,"_reInitializeCursor")))},initialize:function(){this._initialized||this._reInitializeCursor()},_reInitializeCursor:function(){this.movePosition(this.START);
this.position.setLive(!0);this._positionChangeListener||(this._positionChangeListener=d.after(this.position,"onChange",e.hitch(this,"_onPositionChange")),this.own(this._positionChangeListener));this._clearCurrentAction();this._initialized=!0},onChange:function(){},onUpdate:function(a,f){if(!a){if(this.isHidden()){this._scrollLater=!0;return}this._scrollLater=!1}if(this.position.isValid()&&!1!==f&&(this._positionHasChanged||this._selectionHasChanged||f)){if(this._suspendChangeEvent)this._pendingChangeEvent=
!0;else this.onChange();this._selectionHasChanged=this._positionHasChanged=!1}},suspendChangeEvent:function(){this._suspendChangeEvent=!0},activateChangeEvent:function(a){this._suspendChangeEvent=!1;if(this._pendingChangeEvent&&!a)this.onChange();this._pendingChangeEvent=!1},_onPositionChange:function(){this._positionHasChanged=!0},hide:function(){this._clearCurrentAction();this._hidden=!0;this.onUpdate(!0)},show:function(a,f){a=a||!this._scrollLater;this._hidden&&(this._hidden=!1,this._clearCurrentAction(),
this.onUpdate(a,f))},adjustSelection:function(a,b){if(!a.isLocal&&(!0===b||a.startNode.textContainer()===a.endNode.textContainer())){var c;if(0<a.startPos&&a.startPos===a.startNode.maxOffset()&&(c=b||a.startNode.parent.containsTextNodes()?a.startNode.nextNode():a.startNode.nextSibling()))if(c.containsTextNodes()&&(c=c.startNode()),0<a.endPos||c!==a.endNode)a.startNode=c,a.startPos=0;if(0===a.endPos&&!this._fileEndSelected&&(c=b||a.endNode.parent.containsTextNodes()?a.endNode.prevNode():a.endNode.previousSibling()))c.containsTextNodes()&&
(c=c.endNode()),a.endNode=c,a.endPos=c.maxOffset();a.isLocal=a.startNode===a.endNode}a.startPosition=new f(a.startNode,a.startPos);a.endPosition=new f(a.endNode,a.endPos);return a},collapseSelection:function(){this.hasSelection()&&(this.releaseAnchor(),this.onUpdate(!0))},fixAnchor:function(a){if(!0===a||!this.anchor.getNode())this.anchor.setPosition(this.getNode(),this.getOffset()),this.anchor.setLive(!0)},hideSelection:function(){this._hideSelection=!0;this.onUpdate()},internalCollapseSelection:function(a){if(this.hasSelection()){var f=
!this.isReversed();(f&&a===this.LEFT||!f&&a===this.RIGHT)&&this._setPosition(this.anchor)}this.releaseAnchor()},onDoubleClick:function(){this.selectWordUnderCursor()},onTripleClick:function(){this.selectLine(-1,!0)},releaseAnchor:function(){if(this.anchor.node){this.anchor.setLive(!1);var a=this.anchor.node!==this.position.node||this.anchor.offset!==this.position.offset;this._selectionHasChanged=this._selectionHasChanged||a}this.anchor.node=null;this.anchor.offset=0;null!==this._fileEndSelected&&
(this._fileEndSelected&&(this._selectionHasChanged=!0),this._fileEndSelected=!1)},selectAll:function(){var a=this._internalDocument.startNode(),f=this._internalDocument.endNode();if(a&&f){if(null===this._fileEndSelected&&a===f&&a.isEmpty())return!1;this.hasSelection()&&this.internalCollapseSelection(!1);this.setPosition(a,0);this.fixAnchor();null!==this._fileEndSelected&&(this._fileEndSelected||(this._selectionHasChanged=!0),this._fileEndSelected=!0);this.setPosition(f,f.maxOffset(),!0);return!0}return!1},
selectLine:function(a,f){this.suspendChangeEvent();0<a&&this.setLineColumn(a,1);this.movePosition(this.LINE_START_POS1);f?(this._offsetInLine=0,this.movePosition(this.DOWN,this.KEEP_ANCHOR)):this.movePosition(this.LINE_END,this.KEEP_ANCHOR);this.activateChangeEvent()},selectWordUnderCursor:function(){this.suspendChangeEvent();var f=this.getOffset(),b=this.getNode().getText();null!==this._fileEndSelected&&0===f&&a.isAtEndOfFile(this.position)?(this._fileEndSelected||(this._selectionHasChanged=!0),
this._fileEndSelected=!0):(0!==b.trim().length||!this.getNode().isTextNode())&&this._selectWordUnderCursor();this.activateChangeEvent()},setSelection:function(a){var f=a.getStartPosition(),b=a.getEndPosition();if(a.isReversed())var c=f,f=b,b=c;this.setPosition(f.getNode(),f.getOffset(),!1);this.fixAnchor(!0);this._setFileEndSelected(a.fileEndSelected());this.setPosition(b.getNode(),b.getOffset(),!1)},setSelectionFromCoordinates:function(a){var f=this._view.getLineColumnFromCoordinate(a.startCoords);
a=this._view.getLineColumnFromCoordinate(a.endCoords);this.setSelectionLineColumn(f.line,f.column,a.line,a.column)},setSelectionInfo:function(a){this._setSelection({startNode:a.startNode,startOffset:{posInNode:a.startPos},endNode:a.endNode,endOffset:{posInNode:a.endPos},fileEndSelected:a.fileEndSelected})},setSelectionLineColumn:function(f,b,c,d){a.checkLineColumnExists(this._internalDocument,f,b);a.checkLineColumnExists(this._internalDocument,c,d);this._setSelection({startNode:this._internalDocument.root,
startOffset:{line:f-1,column:b-1},endNode:this._internalDocument.root,endOffset:{line:c-1,column:d-1}})},showSelection:function(){this._hideSelection=!1;this.onUpdate()},_isAtNextWord:function(){var a=this.getOffset(),f=this.getNode().getText(),b=0===a,c=this.getNode().previousSibling(),d=this.getNode().isOpaqueNode(),k=this.getNode().textContainer(),e=k.getText(),a=0===f.length?0:a,a=this.getNode().offsetInContainer(k)+a,k=e.substring(a-1,a).match(/\s/),e=e.substring(a,a+1).match(/\S/);return b&&
(!c||d)||!b&&k&&e},_releaseAnchorIfNoSelection:function(){this.hasAnchor()&&this.position.isEqualTo(this.anchor)&&!this._fileEndSelected&&this.releaseAnchor()},_selectWordUnderCursor:function(){this._isAtNextWord()&&this.movePosition(this.WORD_RIGHT);this.movePosition(this.WORD_LEFT);this.movePosition(this.WORD_RIGHT_EXCL,this.KEEP_ANCHOR)},_setAnchor:function(a){q.assert(a.getNode&&a.isLive,"Cursor._setAnchor called without Position!");this.anchor.setPosition(a.getNode(),a.getOffset())},_setFileEndSelected:function(a){null!==
this._fileEndSelected&&(this._selectionHasChanged=this._selectionHasChanged||this._fileEndSelected!==a,this._fileEndSelected=a)},_setSelection:function(a){this.setPosition(a.startNode,a.startOffset,!1);this.fixAnchor(!0);a.hasOwnProperty("fileEndSelected")&&this._setFileEndSelected(a.fileEndSelected);this.setPosition(a.endNode,a.endOffset,!1)},_updateGroupedSelectionBasedOnCurrentPosition:function(f,b){var c,d,k=f.start,e=f.end,g=!1;c=a.nodesInOrder(this.getNode(),f.start.getNode());d=0<c||0===c&&
this.getOffset()<f.start.getOffset();c=a.nodesInOrder(f.end.getNode(),this.getNode());c=0<c||0===c&&this.getOffset()>f.end.getOffset();d?(b?this.movePosition(this.WORD_LEFT,!0):this.movePosition(this.LINE_START_POS1,!0),g=!0,k=this.position):c&&(b?this.movePosition(this.WORD_RIGHT_EXCL,!0):(this.movePosition(this.LINE_END,!0),this.movePosition(this.RIGHT,!0)),e=this.position);this._setAnchor(g?e:k);this._setPosition(g?k:e)},_updateFileEndSelection:function(f){if(null!==this._fileEndSelected){var b=
!1;a.isAtEndOfFile(this.position)&&(b=this.getNode().getBottom()-this._view.getScrollTop(),b=f>b);this._selectionHasChanged=this._selectionHasChanged||this._fileEndSelected!==b;this._fileEndSelected=b}},autoScroll:function(a,f){this._offsetInLine=this._view.getCoordinateForPosition(this.position).x;0>a.y?this.movePosition(this.UP,f):0<a.y&&this.movePosition(this.DOWN,f)},movePosition:function(f,b,c){var d=!1,k;if(c&&1<c){for(k=1;k<=c;k+=1)d=this.movePosition(f,b)||d;return d}if(0===c)return d;c=!1;
b===this.KEEP_ANCHOR||!0===b?this.fixAnchor():this.hasAnchor()&&(this.internalCollapseSelection(f),d=c=!0);k=null;var e=!1,g=!1;switch(f){case this.START:k=this._internalDocument.startNode().startPosition();break;case this.END:k=this._internalDocument.endNode().endPosition();break;case this.PAGE_UP:k=this._movePage(f,b);g=!0;break;case this.PAGE_DOWN:k=this._movePage(f,b);g=!0;break;default:e=!0}if((f===this.UP||f===this.DOWN)&&null===this._offsetInLine)this._offsetInLine=this._view.getCoordinateForPosition(this.position).x;
if(e)switch(f){case this.LEFT:c||(k=this.hasAnchor()&&a.isAtEndOfFile(this.position)&&this._fileEndSelected?this.position:this._cursorNavigator.moveLeft(this.position));break;case this.RIGHT:c||(k=this._cursorNavigator.moveRight(this.position));break;case this.UP:k=this._cursorNavigator.moveUp(this.position,this._offsetInLine);break;case this.DOWN:k=this._cursorNavigator.moveDown(this.position,this._offsetInLine);break;case this.LINE_START:k=this._cursorNavigator.moveLineStart(this.position);break;
case this.LINE_START_POS1:k=this._cursorNavigator.moveLineStart(this.position,!0);break;case this.LINE_END:k=this._cursorNavigator.moveLineEnd(this.position);break;case this.WORD_LEFT:d=this._moveWord(-1,b);break;case this.WORD_RIGHT:d=this._moveWord(1,b);break;case this.WORD_RIGHT_EXCL:d=this._moveWord(1,b,!0)}k?(this._setFileEndSelected(!1),this._setPosition(k),d=!0):null!==this._fileEndSelected&&this.hasAnchor()&&a.isAtEndOfFile(this.position)?((f===this.RIGHT||f===this.DOWN)&&this._setFileEndSelected(!0),
d=!0):f===this.DOWN&&b===this.KEEP_ANCHOR&&(k=this._cursorNavigator.moveLineEnd(this.position),this._setFileEndSelected(!0),this._setPosition(k),this._offsetInLine=null,d=!0);null===this._selectionAutoScrollTimer&&(this.position.isEqualTo(this.anchor)&&!this._fileEndSelected)&&this.releaseAnchor();if(!0===d)this.onUpdate(g);if(f!==this._pageYOffset.dir||f!==this.PAGE_UP&&f!==this.PAGE_DOWN)this._pageYOffset.dir=this.NONE,this._pageYOffset.offset=-1,f!==this.UP&&f!==this.DOWN&&(this._offsetInLine=
null);return d},setCursorToCoordinates:function(a,f){var b=this._view.getPositionFromCoordinate(a);this._setPosition(b);this.onUpdate(!f)},setCursorToEvent:function(a){a=this._view.fixEvent(a);if(a=this._view.getPositionFromEvent(a))a=a.getLineColumn(),this.setLineColumn(a.line,a.column)},setCursorToRange:function(a,f){var b=a.getStartPosition().getLineColumn();if(a.getStartPosition().isEqualTo(a.getEndPosition()))this.setLineColumn(b.line,b.column,f);else{var c=a.getEndPosition().getLineColumn();
this.setSelectionLineColumn(b.line,b.column,c.line,c.column)}},setLineColumn:function(f,b,c){a.checkLineColumnExists(this._internalDocument,f,b);this.setPosition(this._internalDocument.root,{line:f-1,column:b-1,anchor:{}},c)},setPosition:function(a,f,b){if(1===arguments.length)if(a&&a.isTextNode)f={posInNode:0};else if(a&&"object"===typeof a)a.getNode&&a.getOffset?(f=a.getOffset(),a=a.getNode()):(f=a,a=this._internalDocument.root);else return!1;"number"===typeof f&&(f={posInNode:f});var c=this._suspendChangeEvent;
this._suspendChangeEvent=!0;var d=null;if(f.hasOwnProperty("line")||f.hasOwnProperty("column")){d=null;if(f.anchor){var k=f.anchor;this.releaseAnchor();k.hasOwnProperty("line")&&k.hasOwnProperty("column")?this.setPosition(k.node,{line:k.line,column:k.column})&&this.fixAnchor(!0):k.node&&this.setPosition(k.node,{posInNode:k.posInNode||0})&&this.fixAnchor(!0)}f.hasOwnProperty("line")?d=this._internalDocument.getLineNode(f.line,a):a&&(d=a.rootContainer());if(!d)return this._suspendChangeEvent=c,!1;k=
0;f.hasOwnProperty("column")&&(k=f.column);d=d.getPositionFromOffset(k)}else{if(!a)return this._suspendChangeEvent=c,!1;d=a.getPositionFromOffset(f.posInNode)}d&&this._setPosition(d);null!==this._fileEndSelected&&(f.fileEndSelected&&f.anchor)&&(this._fileEndSelected||(this._selectionHasChanged=!0),this._fileEndSelected=!0);this._suspendChangeEvent=c;this._offsetInLine=null;this.onUpdate(!b);return!0},_moveWord:function(f,b,c){var d=this.getNode(),k=this.getOffset();return f===this.WORD_LEFT&&0===
k&&!d.previousSibling()?this.movePosition(this.LEFT,b):f===this.WORD_RIGHT&&k>=d.maxOffset()&&!d.nextSibling()?this.movePosition(this.RIGHT,b):(c=a.getWordBoundary(f,d,k,c))?this.setPosition(c.node,c):this.movePosition(0<f?this.RIGHT:this.LEFT,b)},_movePage:function(a){this.isInVisualBounds(0,100)||this._view.scrollPositionIntoView(this.position);var f=this._view.getCoordinateForPosition(this.position),b=this._view.getDomTargetPosition(),c=b.scrollHeight,b=(a===this.PAGE_UP?-1:1)*b.clientHeight;null===
this._offsetInLine&&(this._offsetInLine=f.x);this._pageYOffset.dir=a;0>this._pageYOffset.offset&&(this._pageYOffset.offset=f.y);this._pageYOffset.offset+=b;this._pageYOffset.offset=Math.min(Math.max(0,this._pageYOffset.offset),c);a=this._view.getPositionFromCoordinate({x:this._offsetInLine,y:this._pageYOffset.offset});f=this._view.getCoordinateForPosition(a).y-f.y;this._view.offsetScrollTop(f);return a},_setNode:function(a){this.position.getNode()&&this.position.setLive(!1);this.position.node=a;this.position.setLive(!0)},
_setPosition:function(a){q.assert(a.getNode&&a.isLive,"Cursor._setPosition called without Position!");if(this.position.getNode()!==a.getNode()||this.position.getOffset()!==a.getOffset()||this.position.isRightAligned()!==a.isRightAligned())this._positionHasChanged=!0;this._setNode(a.getNode());this.position.offset=a.getOffset();this.position.setRightAligned(a.isRightAligned())},_startAutoScroll:function(a,f){var b=this;this._selectionAutoScrollTimer=setInterval(function(){b.autoScroll(a,f)},20)},_stopAutoScroll:function(){this._selectionAutoScrollTimer&&
(clearTimeout(this._selectionAutoScrollTimer),this._selectionAutoScrollTimer=null)},charAtCursor:function(a){if(!this.getNode())return null;var f="";if(this.hasSelection())return this.anchor.getNode()===this.getNode()&&(f=this.selectedText()),1===f.length?f:"";f=this.getNode().getTextForPositioning();a=-1===a?-1:0;var b=this.getOffset();if(-1===a&&0<b||b<f.length)return f.substring(b+a,b+a+1);if(f=-1===a?this.getNode().previousSibling():this.getNode().nextSibling())if(f=f.getTextForPositioning())return-1===
a?f.substring(f.length-1):f.substring(0,1);return null},expandCursorPos:function(a){var f=a.line,b=a.column;a.anchor&&("number"===typeof a.anchor.line&&(f=a.anchor.line),"number"===typeof a.anchor.column&&(b=a.anchor.column));a.isReversed=!1;f&&f>a.line&&(isReversed=!0);!a.isReversed&&f===a.line&&(a.isReversed=b>a.column);a.isNull=f===a.line&&b===a.column;a.isReversed?(a.startLine=a.line,a.startColumn=a.column,a.endLine=f,a.endColumn=b):(a.startLine=f,a.startColumn=b,a.endLine=a.line,a.endColumn=
a.column);return a},getCursorAsLiveRange:function(){var a,b;this.hasSelection()?(a=new f(this.anchor.getNode(),this.anchor.getOffset(),!0),b=new f(this.position.getNode(),this.position.getOffset(),!0)):b=a=new f(this.position.getNode(),this.position.getOffset(),!0);a.setLive();b.setLive();return new l(a,b)},getCursorCoordinates:function(){return this._view.getCoordinateForPosition(this.position)},getCoordinatesOfSelection:function(){var a=this.getSelectionLineColumn(),f=a.start,a=a.end,f=this._view.getCoordinateForLineColumn(f.line,
f.column),a=this._view.getCoordinateForLineColumn(a.line,a.column);return{startCoords:f,endCoords:a}},getLineColumn:function(){var a=this.getPosition();return{line:a.line+1,column:a.column+1}},getNode:function(){return this.position.getNode()},getOffset:function(){return this.position.getOffset()},getCursorPosition:function(){return this.position},getPosition:function(){var a=this.getNode();if(!a)return null;var f=a.rootContainer();q.assert(f,"Cursor.getPosition() called on node without container!");
var b={};b.line=this._internalDocument.getLineNumber(f);b.posInNode=this.getOffset();b.column=a.offsetInContainer()+b.posInNode;a={};if(this.hasSelection()&&(f=this.anchor.getNode().rootContainer()))a.posInNode=this.anchor.getOffset(),a.line=this._internalDocument.getLineNumber(f),a.column=this.anchor.getNode().offsetInContainer()+a.posInNode;b.anchor=a;null!==this._fileEndSelected&&(b.fileEndSelected=this._fileEndSelected);return b},getSelection:function(){if(!this.hasSelection())return null;var a,
b;this.anchor.getNode()?(a=this.anchor.getNode(),b=this.anchor.getOffset()):(a=this.getNode(),b=this.getOffset());var c=this.getNode(),d=this.getOffset(),k=this.isReversed(),e=!!this._fileEndSelected;a=new f(a,b);c=new f(c,d);k&&(d=a,a=c,c=d);k=new p(a,c,k,e);return m.trimSelection(k)},getSelectionLineColumn:function(){a.assert(this.hasSelection(),this._MISSING_SELECTION_ERROR);var f=this.getPosition().anchor,b=this.getPosition();return{start:{line:f.line+1,column:f.column+1},end:{line:b.line+1,column:b.column+
1}}},getSelectionStartContainer:function(){return this.getSelectionStartNode().rootContainer()},getSelectionStartNode:function(){return this.hasSelection()&&!this.isReversed()?this.anchor.getNode():this.getNode()},getSelectionEndContainer:function(){return this.getSelectionEndNode().rootContainer()},getSelectionEndNode:function(){return this.hasSelection()&&this.isReversed()?this.anchor.getNode():this.getNode()},hasAnchor:function(){return this.anchor.isValid()},hasSelection:function(){return this._fileEndSelected?
!0:this.anchor.isValid()?this.anchor.getNode()!==this.getNode()||this.anchor.getOffset()!==this.getOffset():!1},isHidden:function(){return this._hidden},isSelectionHidden:function(){return this._hideSelection},isCursorReadOnly:function(){if(this.hasSelection()){var a=m.trimTrailingLineBreak(this.getSelection());return n.isRangeReadOnly(a)}return(a=this.position.getNode())&&a.isReadOnly()},isEventInSelection:function(a){return this._isEventInSelectionRange(a)},isInRange:function(a,f){if(!this.hasSelection())return!0;
var b=this.getPosition().anchor.line,c=this.getPosition().anchor.column,c=c>=a.column&&c<=f.column;return b>=a.line&&b<=f.line&&c?!0:!1},isInNodeRange:function(a,f){var b=this._internalDocument.getLineNumber(a),c=this._internalDocument.getLineNumber(f),d=f.maxOffset();return this.isInRange({line:b,column:0},{line:c,column:d})},isInVisualBounds:function(f,b){a.assert(f<b,"top must be less than bottom");var c=this.getLineColumn().line;if(!this._view.isLineInView(c))return!1;c=this._view.getLinePercentScrolled(c);
return c>=f&&c<=b},isPositionInSelectionRange:function(a){var f=this.getSelection(),f=f||new l(this.position,this.position);return k.isPositionInRange(a,f)},isFileEndSelected:function(){return this._fileEndSelected},isReversed:function(){return!this.hasSelection()?!1:this.getNode()===this.anchor.getNode()?this.getOffset()<this.anchor.getOffset():0>a.nodesInOrder(this.anchor.getNode(),this.getNode())},selectedText:function(){if(!this.hasSelection())return"";var a=this.anchor.getNode(),f=this.anchor.getOffset(),
b=this.getNode(),c=this.getOffset();this.isReversed()&&(b=a,c=f,a=this.getNode(),f=this.getOffset());return this._internalDocument.getTextInRange(a,f,b,c)},selectionInfo:function(b){q.assert(void 0===b,"The autoAdjustSelection parameter has been removed from Cursor.selectionInfo().");if(this.hasSelection())return b=this.getSelection(),{startNode:b.getStartPosition().getNode(),startPos:b.getStartPosition().getOffset(),endNode:b.getEndPosition().getNode(),endPos:b.getEndPosition().getOffset(),isReversed:b.isReversed(),
isLocal:n.rangeIsInsideOneNode(b),isInTextContainer:n.rangeIsInsideOneTextContainer(b),isInRootContainer:n.rangeIsInsideOneRootContainer(b),fileEndSelected:b.fileEndSelected(),isNull:!1,startPosition:b.getStartPosition(),endPosition:b.getEndPosition()};b={};var c;b.endNode=this.getNode();b.endPos=this.getOffset();if(0===b.endPos&&(c=b.endNode.previousSibling())&&!a.isTextLevelContainer(c))b.endNode=c,b.endPos=c.maxOffset();b.startNode=b.endNode;b.startPos=b.endPos;b.isNull=!0;b.isLocal=!0;b.isInTextContainer=
!0;b.isInRootContainer=!0;b.isReversed=!1;null!==this._fileEndSelected&&(b.fileEndSelected=this._fileEndSelected);b.fileEndSelected&&(b.isLocal=!1);b.startPosition=new f(b.startNode,b.startPos);b.endPosition=new f(b.endNode,b.endPos);return b},selectionInfo2cursorPos:function(a){var f={},b=!a.isNull&&!a.isReversed?a.endNode:a.startNode,c=!a.isNull&&!a.isReversed?a.endPos:a.startPos;f.line=this._internalDocument.getLineNumber(b.rootContainer());f.column=b.offsetInContainer()+c;f.posInNode=c;f.anchor=
{};a.isNull||(b=a.isReversed?a.endNode:a.startNode,c=a.isReversed?a.endPos:a.startPos,f.anchor.line=a.isLocal?f.line:this._internalDocument.getLineNumber(b.rootContainer()),f.anchor.column=b.offsetInContainer()+c,f.anchor.posInNode=c);null!==this._fileEndSelected&&(f.fileEndSelected=a.fileEndSelected);return f},cursorPos2selectionInfo:function(b){var c={isLocal:!1,isNull:!1,isReversed:!1};null!==this._fileEndSelected&&(c.fileEndSelected=b.fileEndSelected);var d=this._internalDocument.getLineNode(b.line),
d=d.getPositionFromOffset(b.column);c.endNode=d.getNode();c.endPos=d.getOffset();b.anchor&&b.anchor.hasOwnProperty("line")&&b.anchor.hasOwnProperty("column")?(d=this._internalDocument.getLineNode(b.anchor.line),d=d.getPositionFromOffset(b.anchor.column),c.startNode=d.getNode(),c.startPos=d.getOffset()):(c.startNode=d.getNode(),c.startPos=b.column,c.isLocal=!0,c.isNull=!0);b=a.nodesInOrder(c.startNode,c.endNode);0>b?(b=c.startNode,c.startNode=c.endNode,c.endNode=b,d=c.startPos,c.startPos=c.endPos,
c.endPos=d,c.isReversed=!0):0===b&&(c.isLocal=!0,c.startPos===c.endPos&&(c.isNull=!0),c.startPos>c.endPos&&(d=c.startPos,c.startPos=c.endPos,c.endPos=d,c.isReversed=!0));c.startPosition=new f(c.startNode,c.startPos);c.endPosition=new f(c.endNode,c.endPos);return c},_isEventInSelectionRange:function(a){if(!this.hasSelection())return!1;a=this._view.fixEvent(a);if(this._view.isFixedEventOutside(a))return!1;a=this._view.getPositionFromEvent(a);return!a?!1:this.isPositionInSelectionRange(a)},_snapshotSelection:function(){return{start:new f(this.anchor.getNode(),
this.anchor.getOffset()),end:new f(this.getNode(),this.getOffset())}},externalMouseDown:function(){this._clearCurrentAction()},resetAction:function(){this._clearCurrentAction()},startDragAction:function(){var a=this,f=this._startNewAction();e.mixin(f,{onUp:function(b){if(!f.isFulfilled()&&(a.hasAnchor()||a._fileEndSelected)&&b&&a.isPositionInSelectionRange(b))a.releaseAnchor(),a._setPosition(b),a.onUpdate()}});return f},startGroupedSelectionAction:function(a,f,b,c){var d=this,k=this._startNewAction();
e.mixin(k,{_preservedSelection:null,onMove:function(a,f,b){k.isFulfilled()||(d._modifyPositionBasedOnMoveEvent(a,f,b),d._updateGroupedSelectionBasedOnCurrentPosition(k._preservedSelection,c),d.onUpdate())}});k.promise.always(e.hitch(this,function(){this._releaseAnchorIfNoSelection();this._stopAutoScroll();this.onUpdate()}));d._modifyPositionBasedOnDownEvent(a,f,b);if(c)d.onDoubleClick();else d.onTripleClick();k._preservedSelection=d._snapshotSelection();return k},startSecondarySelectionAction:function(a,
f,b){var c=this._startNewAction();this._modifyPositionBasedOnSecondaryDownEvent(a,f,b);this.onUpdate();return c},startSelectionAction:function(a,f,b){var c=this,d=this._startNewAction();e.mixin(d,{onMove:function(a,f,b){d.isFulfilled()||(c._modifyPositionBasedOnMoveEvent(a,f,b),c.onUpdate())}});d.promise.always(e.hitch(this,function(){this._releaseAnchorIfNoSelection();this._stopAutoScroll()}));c._modifyPositionBasedOnDownEvent(a,f,b);c.onUpdate();return d},_clearCurrentAction:function(){this._currentAction&&
!this._currentAction.isFulfilled()&&this._currentAction.cancel()},_modifyPositionBasedOnDownEvent:function(a,f,b){var c=(this.hasAnchor()||this._fileEndSelected)&&!f;a?(!this.hasAnchor()&&f&&this.fixAnchor(),this._setPosition(a),c&&this.releaseAnchor(),this.hasAnchor()||this.fixAnchor(),this._offsetInLine=null,this._pageYOffset.dir=this.NONE,this._pageYOffset.offset=-1,f&&this._updateFileEndSelection(b)):c&&this.releaseAnchor()},_modifyPositionBasedOnMoveEvent:function(a,f,b){a&&(this._stopAutoScroll(),
this.hasAnchor()&&(f&&this._startAutoScroll(f,!0),this._setPosition(a),this._updateFileEndSelection(b)))},_modifyPositionBasedOnSecondaryDownEvent:function(a,f,b){if(a){var c=(this.hasAnchor()||this._fileEndSelected)&&!f;!this.hasAnchor()&&f&&this.fixAnchor();this.isPositionInSelectionRange(a)||(this._setPosition(a),c&&this.releaseAnchor());f&&this._updateFileEndSelection(b);this.onUpdate()}},_setCurrentAction:function(a){this._clearCurrentAction();this._currentAction=a;this._currentAction.promise.always(e.hitch(this,
function(){this._currentAction=null}))},_startNewAction:function(){var a=new g;this._setCurrentAction(a);return a}})})},"MW/rtc/model/RangeUtilities":function(){define(["mw-log/Log","./NodeUtilities","./Position","./PositionUtilities","./Range"],function(h,e,g,d,c){return{rangeIsInsideOneNode:function(b){return b.getStartPosition().getNode()===b.getEndPosition().getNode()},rangeIsInsideOneTextContainer:function(b){return b.getStartPosition().getNode().textContainer()===b.getEndPosition().getNode().textContainer()},
nodesInRange:function(b){var a=b.getStartPosition().getNode();b=b.getEndPosition().getNode();return e.getNodesInRange(a,b)},paragraphNodesInRange:function(b){var a=b.getStartPosition().getNode();b=b.getEndPosition().getNode();return e.getParagraphNodesInRange(a,b)},isRangeReadOnly:function(b){var a=b.getStartPosition().getNode();b=b.getEndPosition().getNode();var f=!1;e.leafNodesInRangeIterator(a,b,function(a){if(a.isReadOnly())return f=!0});return f},_hasTrailingLineBreak:function(b){var a=b.getStartPosition();
b=b.getEndPosition();return 0===d.comparePositions(a,b)?!1:1===b.getLineColumn().column},trimTrailingLineBreak:function(b){var a=b,f=b.getStartPosition(),d=b.getEndPosition();this._hasTrailingLineBreak(b)&&(b=d.getNode().rootContainer().previousSibling().endNode(),d=new g(b,b.maxOffset()),a=new c(f,d));return a},rangeIsInsideOneRootContainer:function(b){return b.getStartPosition().getNode().rootContainer()===b.getEndPosition().getNode().rootContainer()},trimRange:function(b){return!this.rangeIsInsideOneTextContainer(b)?
b:this.trimRangeForNodes(b)},trimRangeForNodes:function(b){if(this.rangeIsInsideOneNode(b))return b;b=this._trimStartPosition(b);return this._trimEndPosition(b)},_trimStartPosition:function(b){var a=b.getStartPosition(),f=a.getOffset();if(0===f||f!==a.getNode().maxOffset())return b;a=a.getNode();a=a.parent.containsTextNodes()?a.nextNode():a.nextSibling();if(!a)return b;a=a.containsTextNodes()?a.startNode():a;return a===b.getEndPosition().getNode()&&0===b.getEndPosition().getOffset()?b:new c(new g(a,
0),b.getEndPosition())},_trimEndPosition:function(b){var a=b.getEndPosition();if(0!==a.getOffset())return b;a=a.getNode();a=a.parent.containsTextNodes()?a.prevNode():a.previousSibling();if(!a)return b;a=a.containsTextNodes()?a.endNode():a;return new c(b.getStartPosition(),new g(a,a.maxOffset()))},expandRangeToFullLines:function(b){var a=b.getStartPosition().getNode();b=b.getEndPosition().getNode();return new c(a.rootContainer().startPosition(),b.rootContainer().endPosition())},isNodeTypeInRange:function(b,
a){var f=this._getStartEndNodes(b),c=!1;e.leafNodesInRangeIterator(f.startNode,f.endNode,function(f){if(f instanceof a)return c=!0}.bind(this));return c},isParagraphNodeInRange:function(b,a){var f=a.getStartPosition().getNode().rootContainer(),c=a.getEndPosition().getNode().rootContainer(),d=!1;e.siblingNodesInRangeIterator(f,c,function(a){if(a===b)return d=!0});return d},getNodesInRangeOfNodeType:function(b,a){var f=this._getStartEndNodes(b),c=[];e.leafNodesInRangeIterator(f.startNode,f.endNode,
function(f){f instanceof a&&c.push(f)}.bind(this));return c},_getStartEndNodes:function(b){var a=b.getStartPosition(),f=a.getNode(),c=b.getEndPosition();b=c.getNode();0<d.comparePositions(a,c)?a=b:(a=f,f=b);return{startNode:a,endNode:f}},rangeIterator:function(b,a){var f=b.getStartPosition().getNode(),c=b.getStartPosition().getOffset(),d=b.getEndPosition().getNode(),g=b.getEndPosition().getOffset();if(f===d)return!!a(f,c,g);if(c=a(f,c,f.maxOffset()))return!0;f=f.nextNode();return f!==d&&(c=d.prevNode(),
c=e.leafNodesInRangeIterator(f,c,function(f){return a(f,0,f.maxOffset())}.bind(this)))?!0:!!a(d,0,g)},equivalent:function(b,a){return 0===d.comparePositions(b.getStartPosition(),a.getStartPosition())&&0===d.comparePositions(b.getEndPosition(),a.getEndPosition())},isRangeContainedInRange:function(b,a){var f=a.getStartPosition(),c=a.getEndPosition(),e=b.getStartPosition(),g=b.getEndPosition(),f=0>=d.comparePositions(f,e),c=0<=d.comparePositions(c,g);return f&&c},getTextForRange:function(b,a){var f=
this.nodesInRange(b),c="",d=-1,e=f.splice(0,1)[0];if(!a||e.isTextNode())c=e.getText().slice(b.getStartPosition().getOffset()),d=0;f.forEach(function(f,b){if(!a||f.isTextNode())f.rootContainer()!==f.prevNode().rootContainer()&&(c+="\n"),c+=f.getText(),d=b+1});var e=b.getEndPosition().getNode().maxOffset(),g=b.getEndPosition().getOffset();d===f.length&&g<e&&(c=c.slice(0,g-e));return c}}})},"MW/rtc/model/Selection":function(){define(["dojo/_base/declare","./Range"],function(h,e){return h(e,{_isReversed:!1,
_fileEndSelected:!1,constructor:function(e,d,c,b){this._isReversed=c;this._fileEndSelected=b},isReversed:function(){return this._isReversed},fileEndSelected:function(){return this._fileEndSelected},isEqualTo:function(e){return this.inherited(arguments)&&this._isReversed===e._isReversed&&this._fileEndSelected===e._fileEndSelected}})})},"MW/rtc/model/SelectionUtilities":function(){define(["MW/rtc/model/DocumentUtilities","./RangeUtilities","./Selection"],function(h,e,g){return{trimSelection:function(d){var c=
e.trimRange(d),b=d.fileEndSelected()?d.getEndPosition():c.getEndPosition();return new g(c.getStartPosition(),b,d.isReversed(),d.fileEndSelected())},trimSelectionForMultipleContainer:function(d){var c=e.trimRangeForNodes(d),b=d.fileEndSelected()?d.getEndPosition():c.getEndPosition();return new g(c.getStartPosition(),b,d.isReversed(),d.fileEndSelected())},trimTrailingLineBreak:function(d){var c=e.trimTrailingLineBreak(d);c.isEqualTo(d)||(c=new g(c.getStartPosition(),c.getEndPosition(),d.isReversed,
!1));return c},isInSelection:function(d,c){if(!c)return!1;for(var b=c.getEndPosition().getNode().rootContainer();b;){if(b instanceof d)return b;if(b===c.getStartPosition().getNode().rootContainer())return!1;b=b.prevNode().rootContainer()}},isInFullSelection:function(d,c,b){if(!d.getSelection())return!1;d=d.selectionInfo();var a=c.getLineNumber(b)+1,f=c.getLineNumber(d.startNode.rootContainer())+1;c=c.getLineNumber(d.endNode.rootContainer())+1;return a<c&&a>f?!0:a===c&&a>f&&h.isAtEndOfContainer(d.endPosition,
b)?!0:a<c&&a===f&&h.isAtStartOfContainer(d.startPosition,b)?!0:h.isAtEndOfContainer(d.endPosition,b)&&h.isAtStartOfContainer(d.startPosition,b)?!0:!1},checkFullSelection:function(d,c,b){var a=d.selectionInfo();h.isAtEndOfContainer(a.endPosition,c)&&h.isAtStartOfContainer(a.startPosition,c)&&this.setContainerSelection(d,b,c)},updateSelectionForContainer:function(d,c,b,a){a=d.selectionInfo();d=d.adjustSelection(d.selectionInfo(),!0);h.isAtStartOfContainer(a.startPosition,c)&&h.isAtEndOfContainer(d.endPosition,
c)&&b.updateContainerFullSelection()},updateSelectionForParagraph:function(d,c,b,a){d=d.selectionInfo();h.isAtStartOfContainer(d.startPosition,c)&&h.isAtStartOfContainer(d.endPosition,c.nextSibling())&&b.updateContainerFullSelection()},setContainerSelection:function(d,c,b){c=c.getLineNumber(b)+1;d.selectionInfo();d.suspendChangeEvent();d.collapseSelection();h.isAtEndOfContainer(d.position,b)?d.setSelectionLineColumn(c,1,c+1,1):d.setSelectionLineColumn(c+1,1,c,1);d.activateChangeEvent()}}})},"MW/rtc/cursor/CursorViewProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/cursor/CursorView"],function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.cursor","rtc.view","rtc.cursorcontroller"]}},createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/cursor/CursorView":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin","MW/rtc/view/ViewEventUtilities"],function(h,e,g,d,c){return h(d,{constructor:function(b,
a,f){this._cursor=b;this._view=a;this._cursorController=f;this.own(g.before(b,"onUpdate",e.hitch(this,"_handleCursorUpdate"),!0));this.own(g.after(b,"onChange",e.hitch(this,"_handleCursorChange")));this.own(g.after(a,"onViewUpdated",e.hitch(this,"_handleViewUpdated"),!0));this.own(g.after(f,"onUpdate",e.hitch(this,"_handleCursorUpdate",!0)));this._changeScheduled=this._updateScheduled=this._scrollScheduled=!1},_handleCursorUpdate:function(b){var a=this._view.isLayoutPending();if(!b)if(a)this._scrollScheduled=
!0;else this.onScrollCursorIntoView();if(a)this._updateScheduled=!0;else this.onUpdate()},_handleCursorChange:function(){if(this._view.isLayoutPending())this._changeScheduled=!0;else this.onChange()},_handleViewUpdated:function(b){if(this._cursor.position.isValid()){this._scrollScheduled&&(this._scrollScheduled=!1,this.onScrollCursorIntoView());if(this._updateScheduled||this._needsUpdateFromViewEvents(b))this._updateScheduled=!1,this.onUpdate();this._changeScheduled&&(this._changeScheduled=!1,this.onChange())}},
_needsUpdateFromViewEvents:function(b){return c.hasSizingEvent(b)||c.hasLayoutEvent(b)||c.hasRenderEvent(b)},onScrollCursorIntoView:function(){},onUpdate:function(){},onChange:function(){}})})},"MW/rtc/view/ViewEventUtilities":function(){define(["MW/rtc/model/DocumentConstants","MW/rtc/model/DocumentEventUtilities"],function(h,e){return{EVENTS:{scrollTop:1,scrollLeft:2,scrollHeight:3,scrollWidth:4,clientHeight:5,clientWidth:6,offsetHeight:7,offsetWidth:8,layoutChange:9,renderUpdate:10},_DOCUMENT_EVENTS_TO_PATCH:[h.FORMAT_CHANGE_EVENT],
createEvent:function(e){return{type:e}},hasScrollEvent:function(e){this._assertValidEvents(e);return e.some(function(d){return d.type===this.EVENTS.scrollTop||d.type===this.EVENTS.scrollLeft},this)},hasVerticalScrollEvent:function(e){this._assertValidEvents(e);return e.some(function(d){return d.type===this.EVENTS.scrollTop},this)},isOnlyHorizontalEvents:function(e){this._assertValidEvents(e);return e.every(function(d){return d.type===this.EVENTS.scrollWidth||d.type===this.EVENTS.clientWidth||d.type===
this.EVENTS.offsetWidth||d.type===this.EVENTS.scrollLeft},this)},isOnlyScrollHeightChange:function(e){this._assertValidEvents(e);return e.every(function(d){return d.type===this.EVENTS.scrollHeight},this)},isOnlyClientOrOffsetHeightChange:function(e){this._assertValidEvents(e);return e.some(function(d){return d.type===this.EVENTS.clientHeight||d.type===this.EVENTS.offsetHeight},this)},hasSizingEvent:function(e){this._assertValidEvents(e);return e.some(function(d){return d.type===this.EVENTS.scrollHeight||
d.type===this.EVENTS.scrollWidth||d.type===this.EVENTS.clientHeight||d.type===this.EVENTS.clientWidth||d.type===this.EVENTS.offsetHeight||d.type===this.EVENTS.offsetWidth},this)},hasHeightEvent:function(e){this._assertValidEvents(e);return e.some(function(d){return d.type===this.EVENTS.clientHeight||d.type===this.EVENTS.offsetHeight||d.type===this.EVENTS.scrollHeight},this)},hasOffsetHeightEvent:function(e){this._assertValidEvents(e);return e.some(function(d){return d.type===this.EVENTS.offsetHeight},
this)},hasWidthEvent:function(e){this._assertValidEvents(e);return e.some(function(d){return d.type===this.EVENTS.clientWidth||d.type===this.EVENTS.offsetWidth||d.type===this.EVENTS.scrollWidth},this)},hasLayoutEvent:function(e){this._assertValidEvents(e);return e.some(function(d){return d.type===this.EVENTS.layoutChange},this)},hasRenderEvent:function(e){this._assertValidEvents(e);return e.some(function(d){return d.type===this.EVENTS.renderUpdate},this)},isLayoutChangeEventToPatch:function(g,d){return e.isMultiLineEvent(g,
d)||this._hasDocumentEventToPatch(g)},_assertValidEvents:function(e){if(!(e&&0<e.length))throw Error("View events payload cannot be empty");},_hasDocumentEventToPatch:function(g){return this._DOCUMENT_EVENTS_TO_PATCH.some(function(d){return e.hasEventType(g,d)})}}})},"MW/rtc/model/DocumentConstants":function(){define([],function(){return{INSERT_TEXT:"insertText",INSERT_BREAK_EVENT:"insertBreak",DELETION_EVENT:"deleteSelection",FORMAT_CHANGE_EVENT:"formatChange",NUMBER_OF_LINES_CHANGED:"numberOfLinesChanged",
READONLY_STATE_CHANGE_EVENT:"readOnlyStateChange",FORWARD_DELETE:1,BACKWARD_DELETE:-1}})},"MW/rtc/model/DocumentEventUtilities":function(){define("dojo/_base/lang MW/rtc/browsersupport/BrowserSupportUtilities mw-log/Log MW/rtc/model/DocumentConstants MW/rtc/model/DocumentUtilities MW/rtc/model/events/DocumentEventBase MW/rtc/model/events/UndoableEvent ./Mutation".split(" "),function(h,e,g,d,c,b,a,f){return{_INVALID_START_LINE:"Invalid start line provided for ",_INVALID_END_LINE:"Invalid end line provided for ",
_EVENT_PAYLOAD_SHOULD_BE_ARRAY:"Event payload should be an array",_EVENT_ARRAY_NON_EMPTY:"Event array should be non-empty",_EVENT_NOT_DOCUMENT_EVENT_BASE:"Event object not an instance of DocumentEventBase",hasEventType:function(a,f){return!a||1>a.length||!f?!1:a.some(function(a){return a&&a.type===f})},getEventsOfType:function(a,f){return!a||1>a.length||!f?[]:a.filter(function(a){return a&&a.type===f})},isLengthChangingEvent:function(a){a=a.getMutation().getData();return 0!==this._calculateLineChanges(a)},
isMultiLineEvent:function(a,f){if(!a||1>a.length||!f)return!1;var b=[];return a.some(function(a){if(!a)return!1;if(a.type===d.INSERT_BREAK_EVENT)return!0;if(a.type!==d.INSERT_TEXT)return!1;if(a.startLine!==a.endLine)return!0;if(0===b.length)return b.push(a.startLine),!1;if(0>b.indexOf(a.startLine))return!0})},getLineNodesFromEvents:function(a,f){if(!a||1>a.length||!f)return[];var b=[];this._getCoalescedDocumentMutations(a).forEach(function(a){for(var c=a.to[0];c<=a.to[1];c++){var d=f.getLineNode(c);
d&&b.push(d)}},this);return b},toLengthChangeEvent:function(a){a=this.getNumberOfLinesChanged(a);return 0===a?null:{type:d.NUMBER_OF_LINES_CHANGED,change:a}},getNumberOfLinesChanged:function(a){a=this._getCoalescedDocumentMutations(a);return 0===a.length?0:this._calculateOverallLineChanges(a)},assertValidEventPayload:function(a){c.assert(Array.isArray(a),this._EVENT_PAYLOAD_SHOULD_BE_ARRAY);c.assert(0<a.length,this._EVENT_ARRAY_NON_EMPTY);a.forEach(function(a){c.assert(a.isInstanceOf(b),this._EVENT_NOT_DOCUMENT_EVENT_BASE)},
this)},assertValidLines:function(a,f,b){c.assert(this._isValidLine(a),this._INVALID_START_LINE+b);c.assert(this._isValidLine(f),this._INVALID_END_LINE+b)},_isValidLine:function(a){return"number"===typeof a&&-1<a},finalLineRangeFromEvents:function(a){a=this._getCoalescedDocumentMutations(a);return 0===a.length?null:{startLine:a[0].to[0],endLine:a[a.length-1].to[1]}},translateEventsForUndo:function(a){this.assertValidEventPayload(a);return a.map(this._translateEventForUndo,this)},_translateEventForUndo:function(f){return!f.isInstanceOf(a)?
f:f.getUndoEvent()},allEventsOfSameType:function(a){g.assert(0!==a.length,"Events input array cannot be empty");var f=a[0].type;return a.every(function(a){return a.type===f})},getCoalescedDocumentMutations:function(a){return this._getCoalescedDocumentMutations(a).map(function(a){return f.create(a.from[0],a.from[1],a.to[0],a.to[1])})},_getCoalescedDocumentMutations:function(a){return!a?[]:this._getRawMutations(a).reduce(this._reduceMutation.bind(this),[])},_getRawMutations:function(a){return a.map(function(a){return a.getMutation().getData()},
this)},_reduceMutation:function(a,f){var b=this._partitionOverlappingMutations(a,f),c=b.notOverlapping,b=this._getMergedMutation(b.overlapping,f);c.push(b);c.sort(function(a,f){return a.from[0]-f.from[0]});var d=this._calculateLineChanges(f);return this._accountForNumberOfLinesChanging(c,b,d)},_getMergedMutation:function(a,f){return 0!==a.length?this._mergeOverlappingMutations(a,f):f},_mergeOverlappingMutations:function(a,f){var b={from:[-1,-1],to:[-1,-1]},c=a[0],d=a[a.length-1];b.from[0]=f.from[0]<
c.to[0]?c.from[0]-(c.to[0]-f.from[0]):c.from[0];b.from[1]=f.from[1]>d.to[1]?d.from[1]+(f.from[1]-d.to[1]):d.from[1];b.to[0]=Math.min(c.to[0],f.to[0]);c=this._calculateLineChanges(f);b.to[1]=Math.max(d.to[1]+c,f.to[1]);return b},_calculateLineChanges:function(a){return a.to[1]-a.to[0]-(a.from[1]-a.from[0])},_calculateOverallLineChanges:function(a){if(0===a.length)return 0;var f=a[0];a=a[a.length-1];return a.to[1]-f.to[0]-(a.from[1]-f.from[0])},_accountForNumberOfLinesChanging:function(a,f,b){f=a.indexOf(f);
return this._shiftMutationsBelow(b,f+1,a)},_shiftMutationsBelow:function(a,f,b){if(0==a)return b;b.slice(f).forEach(function(f){f.to[0]+=a;f.to[1]+=a});return b},_partitionOverlappingMutations:function(a,f){var b=[],c=[];a.forEach(function(a){this._isRangeOverlapping(a.to,f.from)?b.push(a):c.push(a)},this);return{overlapping:b,notOverlapping:c}},_isRangeOverlapping:function(a,f){return a[0]<=f[0]&&a[1]>=f[0]||f[0]<=a[0]&&f[1]>=a[0]}}})},"MW/rtc/model/events/DocumentEventBase":function(){define(["dojo/_base/declare",
"MW/rtc/model/Mutation"],function(h,e){return h(null,{constructor:function(e,d){this.startLine=e;this.endLine=d},getMutation:function(){return e.createFromEvent(this,e.MUTATION_TYPE.INPLACE)},destroy:function(){this.endLine=this.startLine=-1}})})},"MW/rtc/model/Mutation":function(){define(["dojo/_base/declare"],function(h){var e=h([],{constructor:function(e,d,c,b){this._mutation={from:[e,d],to:[c,b]}},getToRange:function(){return{start:this._mutation.to[0],end:this._mutation.to[1]}},getFromRange:function(){return{start:this._mutation.from[0],
end:this._mutation.from[1]}},getData:function(){return this._mutation},destroy:function(){}});return{MUTATION_TYPE:{INSERTION:"insertion",DELETION:"deletion",INPLACE:"inplace"},createFromEvent:function(e,d){switch(d){case this.MUTATION_TYPE.INSERTION:return this.create(e.startLine,e.startLine,e.startLine,e.endLine);case this.MUTATION_TYPE.DELETION:return this.create(e.startLine,e.endLine,e.startLine,e.startLine);default:return this.create(e.startLine,e.endLine,e.startLine,e.endLine)}},create:function(g,
d,c,b){return e(g,d,c,b)}}})},"MW/rtc/model/events/UndoableEvent":function(){define(["dojo/_base/declare","./DocumentEventBase"],function(h,e){return h(e,{getUndoEvent:function(){throw Error("Unimplemented API: MW.rtc.model.events.UndoableEvent.getUndoEvent");}})})},"MW/rtc/cursor/CursorControllerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/cursor/CursorController"],function(h,e,g){return h(e,{requires:function(){return{isApplicable:[],createInstance:"rtc.internaldocument rtc.view rtc.fileendselectable rtc.cursor rtc.actionservice rtc.columnselection.enabled rtc.cursor.navigator".split(" ")}},
createInstance:function(d,c,b,a,f,k,e){return new g(d,c,b,a,f,k,e)}})})},"MW/rtc/cursor/CursorController":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred MW/rtc/abstract/AbstractPlugin MW/rtc/browsersupport/BrowserSupportUtilities MW/rtc/cursor/ColumnSelectionDisabledActions MW/rtc/cursor/Cursor MW/rtc/cursor/CursorUtilities MW/rtc/model/CodeUtilities MW/rtc/model/Position MW/rtc/model/Selection".split(" "),function(h,e,g,d,c,b,a,f,k,l,n,p){return h(c,{LEFT:1,RIGHT:2,
UP:3,DOWN:4,START:5,END:6,LINE_START:7,LINE_END:9,WORD_LEFT:10,WORD_RIGHT:11,PAGE_UP:13,PAGE_DOWN:14,KEEP_ANCHOR:15,constructor:function(a,f,b,c,d,k,e){this._internalDocument=a;this._view=f;this._fileEndSelectable=b;this._cursor=c;this._actionService=d;this._columnSelectionEnabled=k;this._cursorNavigator=e;this._currentAction=null;this._suspended=0;this._hidden=!1;this._initializeController();this._initializeOriginalCursor();this._actionServiceListener=this._statesToReenable=null;this.own(g.before(this._internalDocument,
"onDocumentReset",this._reset.bind(this)))},_reset:function(){this._removeExtraCursors()},holdCursors:function(){this._heldCursors?this._holdCount++:(this._holdCount=1,this._heldCursors=[],this._getCursorIDs().forEach(function(a){this._heldCursors[a]=this._cursors[a].getCursorAsLiveRange()},this))},resetCursors:function(a){if(!this._heldCursors||1<this._holdCount)this._holdCount--;else if(this._backupCursors&&(this._cursors=this._backupCursors,this._backupCursors=null,this._cursorListeners=this._backupListeners,
this._backupListeners=null),this._getCursorIDs().forEach(function(f){var b=this._heldCursors[f];!a&&this._cursors[f]&&this._cursors[f].setCursorToRange(b);b.destroy()},this),this._heldCursors=null,0===this._suspended)this.onUpdate()},scrollIntoView:function(){1===this._getCursorIDs().length&&(this._cursor.suspendChangeEvent(),this._cursor.onUpdate(!1),this._cursor.activateChangeEvent(!0))},setTemporaryLineColumn:function(a,f,b){this._backupCursors=this._cursors;this._backupListeners=this._cursorListeners;
this._cursorListeners=[this._cursorListeners[0]];this._cursors={};this._cursors[0]=this._cursor;this._cursor.setLineColumn(a,f,b)},setTemporarySelectionLineColumn:function(a,f,b,c){this._backupCursors=this._cursors;this._backupListeners=this._cursorListeners;this._cursorListeners=[this._cursorListeners[0]];this._cursors={};this._cursors[0]=this._cursor;this._cursor.setSelectionLineColumn(a,f,b,c)},selectLine:function(a,f){this._removeExtraCursors();this._cursor.selectLine(a,f)},isEventInSelection:function(a){return this.getCursors().some(function(f){return f.isEventInSelection(a)})},
areCursorsReadOnly:function(){return this.getCursors().reduce(function(a,f){return a||f.isCursorReadOnly()},!1)},reinitializeCursors:function(){this.suspendUpdates();this._removeExtraCursors();this._cursor.movePosition(this._cursor.START,!1,!1);this.activateUpdates();if(0===this._suspended)this.onUpdate()},selectedText:function(){var a="";this.getCursors(!0).forEach(function(f){a=a+f.selectedText()+"\n"});return a.substring(0,a.length-1)},getCursors:function(a){var f=this._getCursorIDs().map(function(a){return this._cursors[a]},
this);a&&f.sort(e.hitch(k,k.cursorSortFunc));return f},getCursorsWithoutSelection:function(){return this.getCursors(!0).filter(function(a){return!a.hasSelection()})},getPositions:function(a){return this.getCursors(a).map(function(a){return a.hasSelection()?a.getSelection():a.getPosition()})},setPositions:function(a){this.suspendUpdates();this._ensureCorrectNumberOfCursorsAvailable(a.length);var f=this.getCursors();a.forEach(function(a,b){var c=f[b];a.isInstanceOf&&a.isInstanceOf(p)?c.setSelection(a):
(c.collapseSelection(),c.setPosition(a))},this);this.activateUpdates();if(0===this._suspended)this.onUpdate()},hasSelection:function(){return this.getCursors().some(function(a){return a.hasSelection()},this)},getSelection:function(){return!this.hasSelection()?null:this.getCursors().map(function(a){if(a.hasSelection())return a.getSelection();a=new n(a.getNode(),a.getOffset());return new p(a,a)})},setSelection:function(a){this.suspendUpdates();this.clearSelection();a.forEach(function(a,f){(0===f?this._cursor:
this._getCursor(this._addCursor(1,1))).setSelection(a)},this);this.activateUpdates();if(0===this._suspended)this.onUpdate()},getSelectionLineColumn:function(){return this._getCursorsWithSelection().map(function(a){return a.getSelectionLineColumn()})},movePosition:function(a,f,b){this.suspendUpdates();(a===this.PAGE_UP||a===this.PAGE_DOWN)&&this._removeExtraCursors();this._forEachCursor(function(c){if(!this._disallowCursorMovement(a,c))if(this.hasMultipleCursors()&&(a===this.UP||a===this.DOWN)){var d=
c.getLineColumn().line,k=this._getLineNumberForNextCodeLine(d,a);if(-1!==k)for(;d!==k;)c.movePosition(a,f),d=c.getLineColumn().line}else c.movePosition(a,f,b)});this.activateUpdates();if(0===this._suspended)this.onUpdate()},onUpdate:function(a,f){this.hasMultipleCursors()&&(this._mergeCursors(),this._checkForAndClearCursorsFromRichText());this._handleActions();a&&this.scrollIntoView();f&&this.getCursors().forEach(function(a){a.onChange()})},setCursorToEvent:function(a){this.suspendUpdates();this.clearSelection();
this._cursor.setCursorToEvent(a);this.activateUpdates();if(0===this._suspended)this.onUpdate()},clearSelection:function(){if(this.hasSelection()&&(this.suspendUpdates(),this._removeExtraCursors(),this._cursor.collapseSelection(),this.activateUpdates(),0===this._suspended))this.onUpdate()},selectAll:function(){this.suspendUpdates();this._removeExtraCursors();this._cursor.selectAll();this.activateUpdates();if(0===this._suspended)this.onUpdate()},positionsAreValid:function(){return this.getCursors().every(function(a){return a.position.isValid()})},
show:function(a,f){if(this._hidden&&(this._hidden=!1,this.suspendUpdates(),this._forEachCursor(function(b){b.show(a,f)}),this.activateUpdates(),0===this._suspended))this.onUpdate()},hide:function(){if(!this._hidden&&(this._hidden=!0,this.suspendUpdates(),this._forEachCursor(function(a){a.hide()}),this.activateUpdates(),0===this._suspended))this.onUpdate()},isPositionInSelectionRange:function(a){return this.getCursors().some(function(f){return f.isPositionInSelectionRange(a)})},getScrollIntoViewPosition:function(){return this._cursor.position},
suspendUpdates:function(){this._suspended++;this._forEachCursor(function(a){a.suspendChangeEvent()})},activateUpdates:function(){this._suspended--;if(!(0<this._suspended)&&(this._forEachCursor(function(a){a.activateChangeEvent()}),this._queuedUpdate)){var a=this._queuedUpdate.scroll,f=this._queuedUpdate.change;this._queuedUpdate=null;this.onUpdate(a,f)}},emitUpdate:function(a,f){if(0<this._suspended)this._queuedUpdate?(this._queuedUpdate.scroll=this._queuedUpdate.scroll||a,this._queuedUpdate.change=
this._queuedUpdate.change||f):this._queuedUpdate={scroll:a,change:f};else this.onUpdate(a,f)},_checkForAndClearCursorsFromRichText:function(){var a=this._getRemovableCursorIDs().filter(function(a){var f=this._getCursor(a);return f&&!this._isCursorInCodeOnly(f)?(this._removeCursor(a),!1):!0},this);if(0!==a.length&&!this._isCursorInCodeOnly(this._cursor)){var f=this._getCursor(a[0]);this._setCursorToCursor(this._cursor,f);this._removeCursor(a[0])}},_isCursorInCodeOnly:function(a){var f;a.hasSelection()?
(f=a.getSelection(),a=f.getStartPosition(),f=f.getEndPosition()):f=a=a.getCursorPosition();a=l.isCodeContainer(a.getNode(),!1);f=l.isCodeContainer(f.getNode(),!1);return a&&f},_setCursorToCursor:function(a,f){f.hasSelection()?a.setSelection(f.getSelection()):a.setPosition(f.getCursorPosition())},_ensureCorrectNumberOfCursorsAvailable:function(a){var f=this._getCursorIDs(),b=a-f.length;if(0<b)for(a=0;a<b;a+=1)this._addCursor(1,1);else 0>b&&f.slice(a).forEach(function(a){this._removeCursor(a)},this)},
_getLineNumberForNextCodeLine:function(a,f){for(var b=a-1+(f===this.UP?-1:1),c=this._internalDocument.getMaxLineNumber();0<=b&&b<=c;){if(l.isCodeContainer(this._internalDocument.getLineNode(b)))return b+1;b+=f===this.UP?-1:1}return-1},_getRemovableCursorIDs:function(a){a=a||this._getCursorIDs();-1<a.indexOf("0")&&a.splice(a.indexOf("0"),1);return a},_handleActions:function(){1<this._getCursorIDs().length?this._actionServiceListener||this._disableActions():this._actionServiceListener&&this._reenableActions()},
_disableActions:function(){this._statesToReenable=b.createMap();a.actionsToReEnable.forEach(function(a){var f=this._actionService.getAction(a);f&&this._statesToReenable.set(a,f.enabled)},this);a.actions.forEach(function(a){this._actionService.updateAction(a,{enabled:!1})},this);this._actionServiceListener=g.before(this._actionService,"updateAction",e.hitch(this,"_handleActionUpdate"),!0);this.own(this._actionServiceListener)},_reenableActions:function(){this._actionServiceListener.remove();this._actionServiceListener=
null;this._statesToReenable.forEach(function(a,f){var b=this._actionService.getAction(f);b&&a!==b.enabled&&this._actionService.updateAction(f,{enabled:a})},this);this._statesToReenable.clear();this._statesToReenable=null},_handleActionUpdate:function(f,b,c){this._statesToReenable.has(f)&&b.hasOwnProperty("enabled")&&this._statesToReenable.set(f,b.enabled);-1<a.actions.indexOf(f)&&(b.enabled=!1);return[f,b,c]},_getCursor:function(a){return this._cursors[a]},_getCursorsWithSelection:function(){return this.getCursors().filter(function(a){return a.hasSelection()})},
_disallowCursorMovement:function(a,f){var b=1<this._getCursorIDs().length,c=f.getLineColumn(),d=1===c.column,k=a===this.LEFT||a===this.WORD_LEFT,e=this._internalDocument.getLineNode(c.line-1).maxOffset()+1,c=c.column===e,e=a===this.RIGHT||a===this.WORD_RIGHT;return b&&(d&&k||c&&e)},_getCursorIDs:function(){return Object.keys(this._cursors)},_initializeOriginalCursor:function(){var a=this._getNextCursorID();this._cursors[a]=this._cursor;this._addListeners(this._cursor,a)},_addCursor:function(a,f){var b=
this._getNextCursorID(),c=this._createCursorAtLineColumn(a,f);this._cursors[b]=c;this._addListeners(c,b);if(0===this._suspended)this.onUpdate();return b},_removeCursor:function(a){if(!this._cursors[a])return!1;this._cursorListeners[a].forEach(function(a){a.remove()},this);delete this._cursorListeners[a];this._cursors[a]!==this._cursor&&this._cursors[a].destroy();delete this._cursors[a];if(0===this._suspended)this.onUpdate();return!0},_removeExtraCursors:function(){if(1!==this._getCursorIDs().length&&
(this.suspendUpdates(),this._getRemovableCursorIDs().forEach(this._removeCursor,this),this.activateUpdates(),0===this._suspended))this.onUpdate()},_addListeners:function(a,f){var b=g.after(a,"onUpdate",e.hitch(this,function(){if(0===this._suspended)this.onUpdate()}));this.own(b);this._cursorListeners[f]=[b]},_createCursorAtLineColumn:function(a,b){var c=new f(this._internalDocument,this._view,this._fileEndSelectable,this._cursorNavigator);0!==this._suspended&&c.suspendChangeEvent();c.setLineColumn(a,
b);return c},_forEachCursor:function(a){this.getCursors().forEach(a,this)},_getNextCursorID:function(){return this._cursorID++},_initializeController:function(){this._cursors={};this._cursorListeners={};this._cursorID=0},_mergeCursors:function(){this.suspendUpdates();var a=this._getCursorsToMerge().reduce(e.hitch(this,function(a,f){return this._mergeCursorSet(f)||a}),!1);this.activateUpdates();if(a&&0===this._suspended)this.onUpdate()},_getCursorsToMerge:function(){var a=[];this._getCursorIDs().forEach(function(f){var b=
this._getCursor(f),c=this._getLineColPair(b),d=b.isFileEndSelected();a.some(function(a){if(this._cursorMergeableWithSet(c,a))return a.push({id:f,lineColPair:c,fileEndSelected:d}),!0},this)||a.push([{id:f,lineColPair:c,fileEndSelected:d}])},this);return a},_cursorMergeableWithSet:function(a,f){return f.some(function(f){return this._lineColInRange(a.start,f.lineColPair)||this._lineColInRange(f.lineColPair.start,a)||this._lineColInRange(a.end,f.lineColPair)||this._lineColInRange(f.lineColPair.end,a)},
this)},_lineColInRange:function(a,f){var b=a.line,c=a.column,d=f.start.line,k=f.start.column,e=f.end.line,g=f.end.column,l=(b<e||b===e&&c<=g)&&(b>d||b===d&&c>=k);return b===d&&c===k||b===e&&c===g||b>d&&b<e||l},_mergeCursorSet:function(a){if(1===a.length)return!1;var f=this._getRangeFromCursors(a),b=this._getMergedCursorFromCursorIDs(a.map(function(a){return a.id}));if(f.start.line===f.end.line&&f.start.column===f.end.column)b.setLineColumn(f.start.line,f.start.column);else{var c=this._internalDocument.getPositionForLineColumn(f.start.line,
f.start.column),f=this._internalDocument.getPositionForLineColumn(f.end.line,f.end.column);a=new p(c,f,!1,this._isFileEndSelectedInCursorSet(a));b.setSelection(a)}return!0},_getRangeFromCursors:function(a){var f={line:Number.POSITIVE_INFINITY,column:Number.POSITIVE_INFINITY},b={line:Number.NEGATIVE_INFINITY,column:Number.NEGATIVE_INFINITY},c;a.forEach(function(a){c=a.lineColPair;if(c.start.line<f.line||c.start.line===f.line&&c.start.column<f.column)f=c.start;if(c.end.line>b.line||c.end.line===b.line&&
c.end.column>b.column)b=c.end});return{start:f,end:b}},_getMergedCursorFromCursorIDs:function(a){var f;0>a.indexOf("0")?f=this._getCursor(this._addCursor(1,1)):(this._cursor.releaseAnchor(),f=this._cursor);this._getRemovableCursorIDs(a).forEach(this._removeCursor,this);return f},_isFileEndSelectedInCursorSet:function(a){return a.some(function(a){return a.fileEndSelected})},_getLineColPair:function(a){if(a.hasSelection())return this._normalizeSelection(a.getSelectionLineColumn());a=a.getLineColumn();
return{start:a,end:a}},_normalizeSelection:function(a){return a.start.line<a.end.line?a:a.start.line>a.end.line||a.start.column>a.end.column?{start:a.end,end:a.start}:a},startDragAction:function(){var a=this._startNewAction();e.mixin(a,{onUp:e.hitch(this,function(f){if(!a.isFulfilled()&&(this.hasSelection()||this._cursor._fileEndSelected)&&f&&this.isPositionInSelectionRange(f))this._removeExtraCursors(),this._cursor.releaseAnchor(),this._cursor._setPosition(f),this._cursor.onUpdate()})});return a},
startSelectionAction:function(a,f,b){this._removeExtraCursors();var c=this._startNewAction();e.mixin(c,{onMove:e.hitch(this,function(a,f,b){c.isFulfilled()||(this._cursor._modifyPositionBasedOnMoveEvent(a,f,b),this._cursor.onUpdate())})});c.promise.always(e.hitch(this,function(){this._releaseAnchorIfNoSelection();this._stopAutoScroll()}));this._cursor._modifyPositionBasedOnDownEvent(a,f,b);this._cursor.onUpdate();return c},startBlockSelectionAction:function(a,f,b,c){if(!this._columnSelectionEnabled)return this.startSelectionAction(a,
f,b);this._removeExtraCursors();var d=this._startNewAction(),k=a.getLineColumn().line;e.mixin(d,{onMove:e.hitch(this,function(a,f,b,e){if(!d.isFulfilled()){this.suspendUpdates();this._removeExtraCursors();a=a.getLineColumn().line;b=Math.min(a,k);a=Math.max(a,k);for(f=this._getFirstCodeLineInRange(b,a);b<=a;b+=1)if(l.isCodeContainer(this._internalDocument.getLineNode(b-1))){var g=this._view.getCoordinateForLineColumn(b,1).y,n=this._view.getPositionFromCoordinate({x:c,y:g}).getLineColumn().column,g=
this._view.getPositionFromCoordinate({x:e,y:g}).getLineColumn().column,h;b===f?(this._cursor.releaseAnchor(),h=this._cursor):h=this._getCursor(this._addCursor(1,1));n===g?h.setLineColumn(b,n):h.setSelectionLineColumn(b,n,b,g)}this.activateUpdates();if(0===this._suspended)this.onUpdate()}})});d.promise.always(e.hitch(this,function(){this._stopAutoScroll();if(0===this._suspended)this.onUpdate()}));this._cursor._modifyPositionBasedOnDownEvent(a,!1,b);if(0===this._suspended)this.onUpdate();return d},
_getFirstCodeLineInRange:function(a,f){var b=this._internalDocument.getLineNode(a-1),c=this._internalDocument.getLineNode(f-1),b=l.getCodeNodesInNodeRange(b,c);return 0===b.length?-1:this._internalDocument.getLineNumber(b[0])+1},startGroupedSelectionAction:function(a,f,b,c){this.clearSelection();return this._cursor.startGroupedSelectionAction(a,f,b,c)},startSecondarySelectionAction:function(a,f,b){1<this._getCursorIDs().length&&!this.isPositionInSelectionRange(a)&&this.clearSelection();return 1===
this._getCursorIDs().length?this._cursor.startSecondarySelectionAction(a,f,b):this._startNewAction()},isActionInProgress:function(){return null!==this._currentAction},_startNewAction:function(){var a=new d;this._setCurrentAction(a);return a},_stopAutoScroll:function(){this._forEachCursor(function(a){a._stopAutoScroll()})},_releaseAnchorIfNoSelection:function(){this._forEachCursor(function(a){a.hasAnchor()&&a.position.isEqualTo(a.anchor)&&!a._fileEndSelected&&a.releaseAnchor()})},_setCurrentAction:function(a){this._clearCurrentAction();
this._currentAction=a;this._currentAction.promise.always(e.hitch(this,function(){this._currentAction=null}))},_clearCurrentAction:function(){this._currentAction&&!this._currentAction.isFulfilled()&&this._currentAction.cancel()},hasMultipleCursors:function(){return 1<this.getCursors().length},hasMultiplePendingCursors:function(){return this.hasMultipleCursors()||this._heldCursors&&1<this._heldCursors.length}})})},"MW/rtc/cursor/ColumnSelectionDisabledActions":function(){define(["dojo/aspect","MW/rtc/RichTextComponentFeatureEnum"],
function(h,e){return{actions:[e.CODE_EXAMPLE.DEFAULT_ACTION,e.CODE_EXAMPLE.MATLAB_ACTION,e.CODE_EXAMPLE.PLAIN_ACTION,e.COMMENT.COMMENT_ACTION,e.COMMENT.UNCOMMENT_ACTION,e.EQUATIONS.LATEX_EDITOR_ACTION,e.EQUATIONS.WYSIWYG_EDITOR_ACTION,e.EVALUATE_SELECTION.EVALUATE_SELECTION_ACTION,e.FIND_STRING.FIND_ACTION,e.FIND_STRING.FIND_NEXT_ACTION,e.FIND_STRING.FIND_PREVIOUS_ACTION,e.FIND_STRING.FIND_SELECTION_ACTION,e.FIND_STRING.REPLACE_ACTION,e.FORMAT_CODE.SMART_INDENT_ACTION,e.FUNCTION_HINTS.FUNCTION_HINTS_ACTION,
e.GOTO_LINE.GOTO_ACTION,e.HYPERLINK.HYPERLINK_ACTION,e.IMAGES.IMAGE_ACTION,e.INDENT.INDENT_ACTION,e.INDENT.OUTDENT_ACTION,e.MATLAB_BREAKPOINT_MARGIN.TOGGLE_BREAKPOINT_ACTION,e.MATLAB_BREAKPOINT_MARGIN.TOGGLE_ENABLE_BREAKPOINT_ACTION,e.OPEN_SELECTION.OPEN_SELECTION_ACTION,e.PAREN_MATCH,e.RICH_TEXT.TOGGLE_CODE_AND_TEXT_ACTION,e.SECTIONS.INSERT_SECTION_ACTION,e.SMART_TAB,e.TAB_COMPLETION.TAB_COMPLETE_ACTION,e.TABLE_OF_CONTENTS.TABLE_OF_CONTENTS_ACTION,e.VARIABLE_HIGHLIGHTING,"help_on_selection","rtc_configure_live_control",
"rtc_format_code_tab","rtc_general_hyperlink","rtc_insert_code","rtc_insert_combo_box","rtc_insert_sectionbreak","rtc_insert_slider","rtc_insert_text"],actionsToReEnable:[e.CODE_EXAMPLE.DEFAULT_ACTION,e.CODE_EXAMPLE.MATLAB_ACTION,e.CODE_EXAMPLE.PLAIN_ACTION,e.COMMENT.COMMENT_ACTION,e.COMMENT.UNCOMMENT_ACTION,e.EQUATIONS.LATEX_EDITOR_ACTION,e.EQUATIONS.WYSIWYG_EDITOR_ACTION,e.FIND_STRING.FIND_ACTION,e.FIND_STRING.FIND_NEXT_ACTION,e.FIND_STRING.FIND_PREVIOUS_ACTION,e.FIND_STRING.FIND_SELECTION_ACTION,
e.FIND_STRING.REPLACE_ACTION,e.FORMAT_CODE.SMART_INDENT_ACTION,e.GOTO_LINE.GOTO_ACTION,e.HYPERLINK.HYPERLINK_ACTION,e.IMAGES.IMAGE_ACTION,e.INDENT.INDENT_ACTION,e.INDENT.OUTDENT_ACTION,e.MATLAB_BREAKPOINT_MARGIN.TOGGLE_BREAKPOINT_ACTION,e.MATLAB_BREAKPOINT_MARGIN.TOGGLE_ENABLE_BREAKPOINT_ACTION,e.OPEN_SELECTION.OPEN_SELECTION_ACTION,e.RICH_TEXT.TOGGLE_CODE_AND_TEXT_ACTION,e.SMART_TAB,e.TAB_COMPLETION.TAB_COMPLETE_ACTION,e.TABLE_OF_CONTENTS.TABLE_OF_CONTENTS_ACTION,"help_on_selection","rtc_format_code_tab",
"rtc_insert_code","rtc_insert_text","rtc_insert_sectionbreak"]}})},"MW/rtc/RichTextComponentFeatureEnum":function(){define([],function(){return{TAB_COMPLETION:{TAB_COMPLETE_ACTION:"codecompletion.popup"},SYNTAX_HIGHLIGHTING:"rtc_syntax_highlighting",CODE_ANALYZER:"rtc_code_analyzer",SECTIONS:{INSERT_SECTION_ACTION:"rtc_insert_section",RUN_SECTION_ACTION:"rtc_evaluate_section",NEXT_SECTION_ACTION:"rtc_next_section",PREVIOUS_SECTION_ACTION:"rtc_previous_section"},FIND_STRING:{FIND_ACTION:"rtc_find_dialog",
FIND_NEXT_ACTION:"rtc_find_dialog_find_next_key",FIND_PREVIOUS_ACTION:"rtc_find_dialog_find_previous_key",FIND_SELECTION_ACTION:"rtc_find_dialog_find_selection_key",REPLACE_ACTION:"rtc_replace_dialog"},GOTO_LINE:{GOTO_ACTION:"rtc_goTo_dialog"},INDENT_ON_NEWLINE:"rtc_indent_on_newline",SMART_TAB:"rtc_smart_tab",PAREN_MATCH:"rtc_paren_match",GUTTER_LINE_NUMBER:"rtc_gutter_line_number",MATLAB_BREAKPOINT_MARGIN:{CLEAR_ALL_BREAKPOINTS_ACTION:"rtc_clear_all_breakpoints",TOGGLE_BREAKPOINT_ACTION:"rtc_toggle_breakpoint",
TOGGLE_ENABLE_BREAKPOINT_ACTION:"rtc_toggle_enable_breakpoint"},CONTEXT_MENU:"rtc_context_menu",AUTO_INDENT:"rtc_auto_indent",EVALUATE_SELECTION:{EVALUATE_SELECTION_ACTION:"rtc_evaluate_selection"},OPEN_SELECTION:{OPEN_SELECTION_ACTION:"rtc_open_selection"},COMMENT:{COMMENT_ACTION:"rtc_comment",UNCOMMENT_ACTION:"rtc_uncomment"},INDENT:{INDENT_ACTION:"rtc_indent",OUTDENT_ACTION:"rtc_unindent"},FORMAT_CODE:{SMART_INDENT_ACTION:"rtc_smart_indent"},FUNCTION_HINTS:{FUNCTION_HINTS_ACTION:"rtc_function_hints"},
UNDO_REDO:{UNDO_ACTION:"rtc_undo",REDO_ACTION:"rtc_redo",CLEAR_ACTION:"rtc_clear_undo"},CUT_COPY_PASTE:{CUT_ACTION:"rtc_cut",COPY_ACTION:"rtc_copy",PASTE_ACTION:"rtc_paste"},VARIABLE_HIGHLIGHTING:"rtc_variable_highlighting",RICH_TEXT:{TOGGLE_BOLD_ACTION:"rtc_toggle_bold",TOGGLE_ITALIC_ACTION:"rtc_toggle_italic",TOGGLE_UNDERLINE_ACTION:"rtc_toggle_underline",TOGGLE_MONOSPACE_ACTION:"rtc_toggle_monospace",PARAGRAPH_FORMAT_CODE_ACTION:"rtc_paraformat_code",PARAGRAPH_FORMAT_TEXT_ACTION:"rtc_paraformat_text",
PARAGRAPH_FORMAT_HEADING_ACTION:"rtc_paraformat_heading",PARAGRAPH_FORMAT_HEADING1_ACTION:"rtc_paraformat_heading",PARAGRAPH_FORMAT_HEADING2_ACTION:"rtc_paraformat_heading2",PARAGRAPH_FORMAT_HEADING3_ACTION:"rtc_paraformat_heading3",PARAGRAPH_FORMAT_TITLE_ACTION:"rtc_paraformat_title",TOGGLE_CODE_AND_TEXT_ACTION:"rtc_toggle_code_and_text",ALIGNMENT_LEFT_ACTION:"rtc_align_left",ALIGNMENT_CENTER_ACTION:"rtc_align_center",ALIGNMENT_RIGHT_ACTION:"rtc_align_right"},LISTS:{ORDERED_LIST_ACTION:"rtc_ordered_list",
UNORDERED_LIST_ACTION:"rtc_unordered_list"},HYPERLINK:{HYPERLINK_ACTION:"rtc_hyperlink",HYPERLINK_SERVICE_BACKWARD_ACTION:"rtc_hyperlink_service_backward",HYPERLINK_SERVICE_FORWARD_ACTION:"rtc_hyperlink_service_forward"},EQUATIONS:{LATEX_EDITOR_ACTION:"rtc_equation",WYSIWYG_EDITOR_ACTION:"rtc_equation_editor"},IMAGES:{IMAGE_ACTION:"rtc_image"},TABLE_OF_CONTENTS:{TABLE_OF_CONTENTS_ACTION:"rtc_table_of_contents"},CODE_EXAMPLE:{DEFAULT_ACTION:"rtc_codeexample",MATLAB_ACTION:"rtc_codeexample_matlab",
PLAIN_ACTION:"rtc_codeexample_plain"},CODINGUI:"rtc_code_codingui"}})},"MW/rtc/cursor/CursorUtilities":function(){define(["MW/rtc/model/PositionUtilities"],function(h){return{cursorSortFunc:function(e,g){return this._firstCursorBeforeSecond(e,g)?-1:this._firstCursorBeforeSecond(g,e)?1:0},_firstCursorBeforeSecond:function(e,g){var d=e.getLineColumn(),c=g.getLineColumn();return d.line<c.line?!0:d.line>c.line?!1:d.column<c.column?!0:!1},getCursorAtEdgeOfRange:function(e,g){var d=null;e.some(function(c){var b=
c.getCursorPosition();if(0===h.comparePositions(b,g.getStartPosition())||0===h.comparePositions(b,g.getEndPosition()))return d=c,!0});return d}}})},"MW/rtc/datamodel/DefaultBackingStoreProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/datamodel/InMemoryBackingStore","MW/rtc/core/provider/PluginProvider"],function(h,e,g,d){return h(d,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:[]}},createInstance:function(){return new g}})})},
"MW/rtc/datamodel/InMemoryBackingStore":function(){define(["dojo/_base/declare","MW/rtc/datamodel/BackingStore","mw-utils/Utils"],function(h,e,g){return h(e,{constructor:function(){this.uniqueId=g.generateUuid()},getUniqueId:function(){return this.uniqueId}})})},"MW/rtc/datamodel/BackingStore":function(){define(["dojo/_base/declare"],function(h){return h(null,{getStorageData:function(){return""},getUniqueId:function(){throw Error("Unimplemented API: MW.rtc.datamodel.AbstractBackingStore.getUniqueId");
}})})},"MW/rtc/execution/BreakpointlessEvalServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/execution/BreakpointlessEvalService"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.editordataservice"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/execution/BreakpointlessEvalService":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin","mw-messageservice/MessageService","mw-utils/Utils"],
function(h,e,g,d){return h([e],{BREAKPOINTLESS_EVAL_REQUEST:"/debug/breakpointlessEval/",BREAKPOINTLESS_EVAL_FEATURE_ID:"matlab.debug.breakpointlesseval",constructor:function(c,b){this._uniqueId=d.generateUuid();this._messageService=b||g;c.request(this.BREAKPOINTLESS_EVAL_FEATURE_ID,{uniqueId:this._uniqueId}).then(function(){},function(){})},noBreakpointEval:function(c){g.publish(this.BREAKPOINTLESS_EVAL_REQUEST+this._uniqueId,{code:c})}})})},"MW/rtc/execution/ExecutionServiceProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/execution/MatlabExecutionDataService"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(d){}})})},"MW/rtc/execution/MatlabExecutionDataService":function(){define(["dojo/_base/declare","dojo/_base/lang","mw-log/Log","mw-messageservice/MessageService"],function(h,e,g,d){return h([],{constructor:function(c){this._messageService=c||d;this.streamingEval=!1},authoringEval:function(c){this._messageService.publish("/editor/executionservice/authoringEval",
c)},executionEval:function(c){this._messageService.publish("/editor/executionservice/executionEval",c)},isMessageServiceRunning:function(){return this._messageService.isRunning()}})})},"MW/rtc/model/DocumentActionsProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/DocumentActions"],function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.document","rtc.actionservice","rtc.keyhandler"]}},
createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/model/DocumentActions":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/model/DocumentConstants"],function(h,e,g){return h(null,{constructor:function(d,c,b){c.loadActions(this._getActions(d));b.addBindings(this._getAdditionalKeyBindings())},_getActions:function(d){return[{id:"rtc_insert_break",enabled:!0,key:"enter",callback:e.hitch(d,"insertBreak")},{id:"rtc_tab",enabled:!0,key:"tab",callback:e.hitch(d,"insertTab")},
{id:"rtc_delete_backward",enabled:!0,key:"backspace",callback:e.hitch(d,"deleteTextAtCurrentPosition",g.BACKWARD_DELETE)},{id:"rtc_delete_forward",enabled:!0,key:"delete",callback:e.hitch(d,"deleteTextAtCurrentPosition",g.FORWARD_DELETE)},{id:"rtc_delete_previous_word",enabled:!0,key:"ctrl_backspace",platformKey:{mac:"alt_backspace"},callback:e.hitch(d,"deleteWord",-1)},{id:"rtc_delete_next_word",enabled:!0,key:"ctrl_delete",platformKey:{mac:"alt_delete"},callback:e.hitch(d,"deleteWord",1)}]},_getAdditionalKeyBindings:function(){return[{key:"shift_backspace",
action:"rtc_delete_backward"},{key:"shift_enter",action:"rtc_insert_break"}]}})})},"MW/rtc/model/DocumentProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/Document"],function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:"rtc.cursorcontroller rtc.internaldocument rtc.undoredo.editblock rtc.textnodeservice rtc.code.codetextservice rtc.linenumberservice".split(" ")}},createInstance:function(d,
c,b,a,f,k){return new g(d,c,b,a,f,k)}})})},"MW/rtc/model/Document":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/aspect mw-log/Log MW/rtc/abstract/AbstractPlugin MW/rtc/browsersupport/BrowserSupportUtilities MW/rtc/model/ActivePosition MW/rtc/model/CodeUtilities MW/rtc/model/CodeTextGeneratorVisitor MW/rtc/model/DocumentConstants MW/rtc/model/DocumentEventUtilities MW/rtc/model/DocumentUtilities MW/rtc/model/NodeUtilities MW/rtc/model/PositionUtilities MW/rtc/model/Range MW/rtc/model/RangeUtilities MW/rtc/model/SelectionUtilities MW/rtc/model/TreeWalker MW/rtc/model/events/DocumentEvent MW/rtc/model/events/InsertTextEvent MW/rtc/model/events/ReadOnlyChangeEvent MW/rtc/model/events/NumberOfLinesChangedEvent MW/rtc/plugins/undoredo/EditBlockConstants".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,B,F){return h(b,{constructor:function(f,b,c,k,e,l){this._cursorController=f;this._internalDocument=b;this._editBlockController=c;this._textNodeService=k;this._codeTextService=e;this._lineNumberService=l;this._positions=a.createSet();this.own(d.after(this._internalDocument,"onNodeChange",r.updatePositions,!0));this.own(d.after(this._internalDocument,"onDocumentChanged",g.hitch(this,"_handleDocumentChanged"),!0))},onChange:function(){},onPreInsertText:function(a){},
_handleDocumentChanged:function(a){this._updatePositionsAndEmitChangeEvents();r.firePendingEvents();this._emitTranslatedDocumentChangeEvents(a)},_updatePositionsAndEmitChangeEvents:function(){this._positions.forEach(function(a){a.updateLineColumn()},this)},_emitTranslatedDocumentChangeEvents:function(a){a=a||[];var f=[],b=p.toLengthChangeEvent(a);null!==b&&f.push(b);b=p.getEventsOfType(a,n.READONLY_STATE_CHANGE_EVENT);f=f.concat(b);a=p.finalLineRangeFromEvents(a);f.push(w.create(a.startLine,a.endLine));
this.onChange(f)},_emitOnChange:function(a){this._internalDocument.emitDocumentEvents(a)},startBlockEdit:function(a){this._cursorController.suspendUpdates();a=this.startEdit(a);this._internalDocument.startBlockEdit(a);return a},endBlockEdit:function(a){this.endEdit();this._internalDocument.endBlockEdit(a);this._cursorController.activateUpdates()},startEdit:function(a){return this._editBlockController.startEdit(a)},endEdit:function(){this._editBlockController.endEdit()},undoable:function(a,f){try{return a(this.startEdit(f))}finally{this.endEdit()}},
insertText:function(a,f,b){if(this._documentAndLineReadOnly(f))return!1;this._cursorController.holdCursors();a=this._insertTextRespectingReplacement(a,f,b,!1);this._cursorController.resetCursors();return a},insertTextAtCurrentPosition:function(a){if(this._documentAndCursorReadOnly())return!1;var f=this.startBlockEdit(F.TYPING_TEXT),b=!1;this._cursorController.getCursors().forEach(function(f){var c=this._deleteSelectionBeforeInsertText(f),d=f.getLineColumn(),k=f.getCursorAsLiveRange();b=this._insertTextRespectingReplacement(a,
d.line,d.column,c)||b;f.setCursorToRange(k);k.destroy()},this);this.endBlockEdit(f);this._cursorController.emitUpdate(!0);return b},insertBreak:function(){var a=this.startBlockEdit(),f=!1;this._cursorController.getCursors().forEach(function(b){if(b=this._insertBreak(b)){a.appendRedoEvents([B.create(b.startLine,b.endLine,1)]);a.appendUndoEvents([B.create(b.startLine,b.endLine,-1)]);var c=b?[].concat(b):null;this._emitOnChange(c)}f=f||!!b},this);this.endBlockEdit(a);this._cursorController.emitUpdate();
return f},insertBreakAt:function(a,f){this._cursorController.holdCursors();this._cursorController.setTemporaryLineColumn(a,f,!0);var b=this.insertBreak();this._cursorController.resetCursors();return b},insertTab:function(){this.insertTextAtCurrentPosition(m.DEFAULT_TAB_STRING);return!0},insertContent:function(a,f,b){if(this.isReadOnly())return!1;var c=this.startEdit();a=this._internalDocument.insertContent(a,f);a.newPosition&&(b.setPosition(a.newPosition),b.onUpdate(!1,!0));b=a.event;if(0===b.length)return this.endEdit(),
!1;c.appendRedoEvents(b);c.appendUndoEvents(p.translateEventsForUndo(b));this.endEdit();this._emitOnChange(b);return!0},insertContentAtCurrentPosition:function(a){if(0===a.length)return!1;var f=this.startBlockEdit(),b=!1,c=this._cursorController.getCursors(!0);1===c.length||1===a.length?c.forEach(function(f){this._deleteSelectionBeforeInsertText(f);b=this.insertContent(a,f.position,f)||b},this):c.length<=a.length?c.forEach(function(f,c){this._deleteSelectionBeforeInsertText(f);b=this.insertContent([a[c]],
f.position,f)||b},this):a.forEach(function(a,f){this._deleteSelectionBeforeInsertText(c[f]);b=this.insertContent([a],c[f].position,c[f])||b},this);this.endBlockEdit(f);this._cursorController.emitUpdate();return b},_insertBreak:function(a){if(a.hasSelection()){var f=this._deleteText(null,a);if(!1===f)return!1;f=f?[].concat(f):null;this._emitOnChange(f)}var b,f=null;b=a.position;var c=a.getNode(),d=c.rootContainer(),k=m.isAtStartOfContainer(b,d),e=m.isAtEndOfContainer(b,d),g="\n"===d.CHILD_TEXT_SEPARATOR;
if((k||e)&&!g&&!d.isEmpty()){d=this._internalDocument.cloneNodeWithoutChildren(d);g=this._textNodeService.createTextNodeForContainer("",d);c=c.getStyleAttributes();g.updateAttributes(c);d.addChild(g);b=this._internalDocument.insertAtPosition(d,b);if(b.insertionNotAllowed)return!1;e?f=b.insertedRange.getStartPosition():k&&(f=b.insertedRange.getEndPosition());b=b.events[0]}else{f=a.getNode();k=a.getOffset();c.isTextNode()||(f=this._textNodeService.createTextNodeForPosition("",b),b=this._internalDocument.insertAtPosition(f,
b),b=b.insertedRange.getEndPosition(),f=b.getNode(),k=b.getOffset());b=this._internalDocument.insertBreakInTextNode(f,k);if(!b||!b.newNode)return!1;f=b.newNode.startPosition();b=b.event}f&&a.setPosition(f);a.onUpdate(!1,!0);return b},_insertText:function(a,f,b){var c=this.onPreInsertText(a);return c||0<=a.search(m.NewLineRegex)?this._insertMultilineText(a,f,c):this._insertPlainText(a,f,b)},_insertTextRespectingReplacement:function(a,f,b,c){var d=this.startEdit();f=this._internalDocument.getPositionForLineColumn(f,
b);a=this._insertText(a,f,c);if(!a)return this.endEdit(),!1;d.appendUndoEvents(a.event);d.appendRedoEvents(a.event);this.endEdit();this._emitOnChange(a.event);return!0},_insertMultilineText:function(a,f,b){var c={};b||(b=m.textToContent(a,f.getNode()));a=this._internalDocument.insertContent(b,f);c.newPosition=a.newPosition;c.event=a.event?[].concat(a.event):null;return c},_insertPlainText:function(a,f,b){var c={};a=this._textNodeService.createTextNodeForPosition(a,f);f=b?this._internalDocument.insertDuringReplace(a,
f):this._internalDocument.insertAtPosition(a,f);if(f.insertionNotAllowed)return!1;c.newPosition=f.insertedRange.getEndPosition();c.event=f.events;return c},deleteText:function(a,f,b,c){m.checkOneDirectionalSelection(a,f,b,c);this._cursorController.suspendUpdates();this._cursorController.holdCursors();this._cursorController.setTemporarySelectionLineColumn(a,f,b,c);this.deleteTextAtCurrentPosition();this._cursorController.resetCursors();this._cursorController.activateUpdates()},deleteTextAtCurrentPosition:function(a){var f=
this.startBlockEdit(),b=!1;this._cursorController.getCursors().forEach(function(f){(f=this._deleteText(a,f))&&this._emitOnChange([].concat(f));b=b||!!f},this);this.endBlockEdit(f);this._cursorController.emitUpdate();return b},onDirectedDeletion:function(a,f){},onPreDeletion:function(a){},deleteWord:function(a){if(this._documentAndCursorReadOnly())return!0;var f=this.startBlockEdit();f.preventMerge();this._cursorController.holdCursors();this._cursorController.getCursors().forEach(function(f){f.releaseAnchor();
0<a?f.movePosition(f.WORD_RIGHT,!0):f.movePosition(f.WORD_LEFT,!0)},this);this.deleteTextAtCurrentPosition(a);this._cursorController.resetCursors();this.endBlockEdit(f)},_deleteText:function(a,f){if(this.onPreDeletion(a)||!this.prepareCursorSelectionForEditing(f))return!1;var b=this.startEdit(),c=f.selectionInfo(),d=g.mixin({},c),k,e,l,n,h;if(!f.hasSelection()){if(f.getNode().isReadOnly()||!a)return this.endEdit(),!1;l=f.charAtCursor(a);if(0>a){k=f.getNode().movePositionLeft(f.position);if(!k)return this.endEdit(),
!1;e=k}else if(e=f.position,k=f.getNode().movePositionRight(f.position),!k)return this.endEdit(),!1;if(k.getNode().isReadOnly()||c.startPos===k.getOffset()&&c.startNode===k.getNode())return this.endEdit(),!1;c.isReversed=1===a;1===a?(c.endNode=k.getNode(),c.endPos=k.getOffset()):(c.startNode=k.getNode(),c.startPos=k.getOffset());c.isLocal=c.startNode===c.endNode;c.isNull=!1;f.adjustSelection(c)}if(this.onDirectedDeletion(a,c))this.endEdit();else{c.isLocal&&(m.isEdgeOfTextLevelContainer(c.startNode,
c.startPos)&&m.isEdgeOfTextLevelContainer(c.endNode,c.endPos))&&!m.isTextLevelContainer(c.startNode)&&(c.startNode=c.startNode.parent,c.endNode=c.endNode.parent,c.endPos=c.endNode.maxOffset(),c.isLocal=!1);f.hasSelection()&&(l=f.selectedText(),f.internalCollapseSelection(f.LEFT),e=f.position,n=this.createPosition(c.startNode,c.startPos),h=this.createPosition(c.endNode,c.endPos,!0));k=e.getLineColumn();b.setType(d.isNull?l?0>a?F.BACKSPACE:F.DELETE:"":F.DELETE_SELECTION);e=this._internalDocument.deleteSelection(c);
n&&(this.deletePosition(n),this.deletePosition(h));f.setLineColumn(k.line,k.column,!0);if(!(c.startNode===f.getNode()&&c.startPos===f.getOffset())||0>a)f.onUpdate(!1,!0);b.appendRedoEvents([e]);b.appendUndoEvents([x.create(e.startLine,e.endLine,d.startPosition,l)]);this.endEdit();return e}},replaceText:function(a,f,b,c,d){m.checkOneDirectionalSelection(f,b,c,d);if(!this.isReadOnly()){var k=this.startBlockEdit();this.deleteText(f,b,c,d);this.insertText(a,f,b);this.endBlockEdit(k)}},_deleteSelectionBeforeInsertText:function(a){if(a.hasSelection()){a=
this._deleteText(null,a);if(!a)return!1;this._emitOnChange([a]);return!0}return!1},getEndOfDocumentLineColumn:function(){var a=this.getLinePropertiesArray();return{line:a.length,column:a[a.length-1].content.length+1}},getLinePropertiesArray:function(){var a=this.getNumberOfLines(),f=[],b;for(b=0;b<a;b+=1){var c=this._internalDocument.getLineNode(b),c={content:c.getText(),readOnly:this.isReadOnly()||c.isReadOnly()};f.push(c)}return f},getLineText:function(a){m.checkLineExists(this._internalDocument,
a);return(a=this._internalDocument.getLineNode(a-1))?a.getText():""},getLineLength:function(a){return this.getLineText(a).length},getNumberOfLines:function(){return this._internalDocument.getMaxLineNumber()},getState:function(){return this._internalDocument.getState()},getText:function(){var a=this._internalDocument.root;return a&&a.getText?a.getText():""},getTextCharacters:function(a,f,b){c.assert(0<=a,"lineNumber should be a positive integer");c.assert(0<=f,"startColumn should be a positive integer");
c.assert(0<b,"length should be a positive integer");a=this.getLineText(a+1);var d="";a&&f+b<=a.length&&(d=a.substr(f,b));return d},isReadOnly:function(){return this._internalDocument.isReadOnly()},getCodeText:function(){return this._codeTextService.getCodeText()},getCodeTextForRange:function(a){var f=new l;(new v(f)).traverseRange(a);return f.getText()},isLineCode:function(a){a=this._internalDocument.getLineNode(a-1);return k.isCodeContainer(a)},_documentAndCursorReadOnly:function(){return this.isReadOnly()||
this._cursorController.areCursorsReadOnly()},_documentAndLineReadOnly:function(a){a=this._internalDocument.getLineNode(a-1).isReadOnly();return this._internalDocument.isReadOnly()||a},prepareCursorSelectionForEditing:function(a){if(this.isReadOnly())return!1;if(!a.hasSelection())return!a.isCursorReadOnly();var f=a.getSelection();if(!t.isRangeReadOnly(f))return!0;f=u.trimTrailingLineBreak(f);if(t.isRangeReadOnly(f))return!1;a.setSelection(f);return!0},setReadOnly:function(a){this.isReadOnly()!==a&&
(this._internalDocument.setReadOnly(a),this._cursorController.emitUpdate())},setReadOnlyLine:function(a,f){m.checkLineExists(this._internalDocument,a);this._internalDocument.setReadOnlyLine(a-1,f)&&this._emitOnChange([A.create(a-1,a-1)])},setReadOnlyLines:function(a){var f=this.startBlockEdit(F.AUTO);a.forEach(function(a){this.setReadOnlyLine(a,!0)},this);this.endBlockEdit(f)},setText:function(a){this._internalDocument.isReadOnly()||(this._internalDocument.openTextDocument(a,!1),this._cursorController.reinitializeCursors(),
a=this._internalDocument.getMaxLineNumber()-1,this._internalDocument.emitDocumentEvents([w.create(0,a)]))},createPosition:function(a,b,c){a=new f(a,b,c,this._lineNumberService);this._configurePosition(a);return a},_configurePosition:function(a){this._positions.add(a);var f=d.after(a,"destroy",function(){this._positions.delete(a);f.remove()}.bind(this))},deletePosition:function(a){a.destroy()},createPositionAtLineColumn:function(a,f,b){var c=this._internalDocument.getLineNode(a);m.assert(c,"Line "+
a+" does not exist.");c=c.getPositionFromOffset(f);m.assert(c,"Offset "+f+" does not exist in line "+a+".");return this.createPosition(c.getNode(),c.getOffset(),b)},createLinePosition:function(a,b){var c=a.rootContainer(),c=new f(c,0,b,this._lineNumberService);c.setIgnoreOffset();this._configurePosition(c);return c},getPositionsInNodeRange:function(a,f){return q.getParagraphNodesInRange(a,f).map(function(a){return this.createLinePosition(a,!1)},this)},createLinePositionInLine:function(a,f){var b=
this._internalDocument.getLineNode(a);m.assert(b,"Line "+a+" does not exist.");return this.createLinePosition(b,f)}})})},"MW/rtc/model/ActivePosition":function(){define(["dojo/_base/declare","MW/rtc/model/Position"],function(h,e){return h(e,{constructor:function(e,d,c,b){this._lineLookupService=b;this.setLive(!0);this.updateLineColumn()},_getLine:function(e){return this._lineLookupService.getLineNumber(e)},setPosition:function(e,d){this.inherited(arguments);this.updateLineColumn()},updateLineColumn:function(){var e=
this.getLineColumn(),d=e.line-1!==this.line,c=e.column-1!==this.column;if(d||c)this.line=e.line-1,this.column=e.column-1,this.onChange({lineHasChanged:d,columnHasChanged:c})}})})},"MW/rtc/model/CodeTextGeneratorVisitor":function(){define(["dojo/_base/declare","MW/rtc/model/io/PlainTextGeneratorVisitor"],function(h,e){return h(e,{visitLeafNode:function(e,d,c){this._text+=e.getCodeText().slice(d,c)}})})},"MW/rtc/model/io/PlainTextGeneratorVisitor":function(){define(["dojo/_base/declare","MW/rtc/model/io/NodeVisitorInterface"],
function(h,e){return h(e,{constructor:function(){this._text=""},traverseSibling:function(e){e.parent&&e.parent.CHILD_TEXT_SEPARATOR&&(this._text+=e.parent.CHILD_TEXT_SEPARATOR)},visitLeafNode:function(e,d,c){this._text+=e.getPlainText(d,c)},getText:function(){return this._text}})})},"MW/rtc/model/io/NodeVisitorInterface":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(){},enterInnerNode:function(e){},traverseSibling:function(e){},leaveInnerNode:function(e){},
visitLeafNode:function(e,g,d){}})})},"MW/rtc/model/TreeWalker":function(){define(["dojo/_base/declare","MW/rtc/model/NodeUtilities","MW/rtc/model/RangeUtilities","MW/rtc/nodes/InnerNode","MW/rtc/nodes/LeafNode"],function(h,e,g,d,c){return h(null,{constructor:function(b){this._visitor=b;this._enteredNodes=this._commonAncestors=this._range=null},traverseRange:function(b,a){this._range=b;this._buildCommonAncestors(a);this._doTreeWalk()},_buildCommonAncestors:function(b){this._commonAncestors=e.getCommonAncestors(this._range.getStartPosition().getNode(),
this._range.getEndPosition().getNode());if(b||!g.rangeIsInsideOneTextContainer(this._range))this._commonAncestors=this._commonAncestors.slice(0,1)},_doTreeWalk:function(){var b=this._range.getStartPosition().getNode(),a=!1;this._enteredNodes=[];for(this._enterAncestors(b);b;){a=this._enterNode(b);if(b===this._range.getEndPosition().getNode()){this._leaveRemainingNodes();break}if(!a&&b.firstChild&&b.firstChild())b=b.firstChild();else{for(;!b.nextSibling()&&!b.isRootNode();)this._leaveNode(b),b=b.parent;
this._leaveNode(b);(b=b.nextSibling())&&this._visitor.traverseSibling(b)}}},_enterAncestors:function(b){if((b=b.parent)&&0>this._commonAncestors.indexOf(b))this._enterAncestors(b),this._enterNode(b)},_leaveRemainingNodes:function(){for(;0<this._enteredNodes.length;)this._leaveNode(this._enteredNodes[0])},_enterNode:function(b){if(b.isInstanceOf(d))return this._enteredNodes.unshift(b),this._visitor.enterInnerNode(b);if(b.isInstanceOf(c)){var a=0,f,k=!1;b===this._range.getStartPosition().getNode()&&
(k=!0,a=this._range.getStartPosition().getOffset());b===this._range.getEndPosition().getNode()?(k=!0,f=this._range.getEndPosition().getOffset()):f=b.maxOffset();(!k||a!==f)&&this._visitor.visitLeafNode(b,a,f)}},_leaveNode:function(b){b.isInstanceOf(d)&&(this._enteredNodes.shift(),this._visitor.leaveInnerNode(b))}})})},"MW/rtc/nodes/LeafNode":function(){define(["dojo/_base/declare","MW/rtc/nodes/Node"],function(h,e){return h(e,{constructor:function(){},className:"LeafNode",text:"",getText:function(){return this.text},
getCodeText:function(){return""},getPlainText:function(e,d){return this.getText().slice(e,d)},getTextForPositioning:function(){return this.text},isTextNode:function(){return!0},canHaveCursorAtStart:function(){for(var e=this;e&&!e.isTextContainerNode();)e=e.parent;return e.startNode()===this},maxOffset:function(){return 0},isEmpty:function(){return 0===this.maxOffset},startNode:function(){return this},endNode:function(){return this},atParagraphStart:function(){return 0===this.posInNode&&this.textContainer()&&
this.textContainer().startNode()===this.node},offsetInContainer:function(e){e=e||this.rootContainer();return e._childOffset(this)},lineBorderOffset:function(e,d){var c;c=0<e?this.maxOffset():0;return this.getPositionFromOffset(c)},movePositionRight:function(e){e=e.getOffset();if(e<this.maxOffset())return this.getPositionFromOffset(e+1);e=this.nextNode();return!e||!e.canHaveCursorAtStart()&&e.isEmpty()&&(e=e.nextNode(),!e)?null:e.canHaveCursorAtStart()?e.startPosition():e.movePositionRight(e.startPosition())},
movePositionLeft:function(e){e=e.getOffset();if(1<e)return this.getPositionFromOffset(e-1);if(1===e)return this.canHaveCursorAtStart()?this.startPosition():(e=this.prevNode())?e.getPositionFromOffset(e.maxOffset()):null;e=this.prevNode();return!e?null:this.canHaveCursorAtStart()?e.endPosition():e.movePositionLeft(e.endPosition())},isSplittable:function(e){return!1}})})},"MW/rtc/model/events/DocumentEvent":function(){define(["dojo/_base/declare","MW/rtc/model/DocumentEventUtilities","./DocumentEventBase"],
function(h,e,g){return{create:function(d,c){e.assertValidLines(d,c,"DocumentEvent");return new g(d,c)}}})},"MW/rtc/model/events/InsertTextEvent":function(){define("dojo/_base/declare MW/rtc/model/DocumentConstants MW/rtc/model/DocumentEventUtilities MW/rtc/model/Mutation ./DeletionEvent ./UndoableEvent".split(" "),function(h,e,g,d,c,b){var a=h(b,{constructor:function(a,b,c,d){this.type=e.INSERT_TEXT;this.position=c;this.length=(this.text=d)?d.length:0},getMutation:function(){return d.createFromEvent(this,
d.MUTATION_TYPE.INSERTION)},destroy:function(){},getUndoEvent:function(){return c.create(this.startLine,this.endLine,this.position.getLineColumn().column)}});return{create:function(f,b,c,d){g.assertValidLines(f,b,e.INSERT_TEXT);return new a(f,b,c,d)}}})},"MW/rtc/model/events/DeletionEvent":function(){define("dojo/_base/declare MW/rtc/model/DocumentConstants MW/rtc/model/DocumentEventUtilities MW/rtc/model/Mutation ./UndoableEvent ./NumberOfLinesChangedEvent".split(" "),function(h,e,g,d,c,b){var a=
h(c,{constructor:function(a,b,c){this.type=e.DELETION_EVENT;this.endColumn=c},getMutation:function(){return d.createFromEvent(this,d.MUTATION_TYPE.DELETION)},getUndoEvent:function(){return b.create(this.startLine,this.endLine,1)},destroy:function(){}});return{create:function(f,b,c){g.assertValidLines(f,b,e.DELETION_EVENT);return new a(f,b,c)}}})},"MW/rtc/model/events/NumberOfLinesChangedEvent":function(){define(["dojo/_base/declare","MW/rtc/model/DocumentConstants","MW/rtc/model/DocumentEventUtilities",
"MW/rtc/model/Mutation","./UndoableEvent"],function(h,e,g,d,c){var b=h(c,{constructor:function(a,f,b){this.type=e.NUMBER_OF_LINES_CHANGED;this.direction=b},getMutation:function(){return d.createFromEvent(this,this._getMutationType())},_getMutationType:function(){return 0<this.direction?d.MUTATION_TYPE.INSERTION:0>this.direction?d.MUTATION_TYPE.DELETION:d.MUTATION_TYPE.INPLACE},getUndoEvent:function(){return new b(this.startLine,this.endLine,-this.direction)},destroy:function(){}});return{create:function(a,
f,c){g.assertValidLines(a,f,e.NUMBER_OF_LINES_CHANGED);return new b(a,f,c)}}})},"MW/rtc/model/events/ReadOnlyChangeEvent":function(){define(["dojo/_base/declare","MW/rtc/model/DocumentConstants","MW/rtc/model/DocumentEventUtilities","MW/rtc/model/Mutation","./UndoableEvent"],function(h,e,g,d,c){var b=h(c,{constructor:function(a,f){this.type=e.READONLY_STATE_CHANGE_EVENT;this.startLine=a;this.endLine=f},getMutation:function(){return d.createFromEvent(this,d.MUTATION_TYPE.INPLACE)},getUndoEvent:function(){return b(this.startLine,
this.endLine)},destroy:function(){}});return{create:function(a,f){g.assertValidLines(a,f,e.READONLY_STATE_CHANGE_EVENT);return new b(a,f)}}})},"MW/rtc/plugins/undoredo/EditBlockConstants":function(){define([],function(){return{TYPING_TEXT:"TypingText",INDENT:"Indent",UNINDENT:"Unindent",DELETE:"ForwardDelete",BACKSPACE:"Backspace",DELETE_SELECTION:"DeleteSelection",AUTO:"_Auto"}})},"MW/rtc/model/InternalDocumentProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"MW/rtc/model/InternalDocument"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.undoredo.editblock","rtc.textnodeservice","rtc.insertionruleservice","rtc.nodes.contentconverter"]}},createInstance:function(d,c,b,a){return new g(d,c,b,a)}})})},"MW/rtc/model/InternalDocument":function(){define("dojo/_base/declare dojo/_base/lang dojo/json mw-log/Log MW/rtc/browsersupport/BrowserSupportUtilities MW/rtc/model/CodeUtilities MW/rtc/model/DocumentConstants MW/rtc/model/DocumentUtilities MW/rtc/model/DocumentEventUtilities MW/rtc/model/events/DeletionEvent MW/rtc/model/events/InsertBreakEvent MW/rtc/model/events/InsertTextEvent MW/rtc/model/events/nodechange/DeleteNodeEvent MW/rtc/model/events/nodechange/DeleteTextNodeEvent MW/rtc/model/events/nodechange/InsertNodeEvent MW/rtc/model/events/nodechange/InsertTextNodeEvent MW/rtc/model/events/nodechange/MergeNodeEvent MW/rtc/model/events/nodechange/SplitNodeEvent MW/rtc/model/events/nodechange/UpdateAttributesNodeEvent MW/rtc/model/NodeUtilities MW/rtc/model/Position MW/rtc/model/PositionUtilities MW/rtc/model/Range MW/rtc/model/RangeUtilities MW/rtc/nodes/InnerNode MW/rtc/nodes/OpaqueNode MW/rtc/nodes/inner/RootNode MW/rtc/nodes/inner/LineNode MW/rtc/plugins/undoredo/commands/InsertChildrenCommand MW/rtc/plugins/undoredo/commands/NodeChangeEventCommand MW/rtc/plugins/undoredo/commands/RemoveChildrenCommand MW/rtc/plugins/undoredo/commands/ReplaceTextCommand MW/rtc/plugins/undoredo/commands/UpdateAttributesCommand".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,B,F,G,H,I,K,C,M,Q,L,N){return h(null,{MAX_NODE_TEXT_LENGTH:1E4,constructor:function(a,f,b,c){this._editBlockController=a;this._textNodeService=f;this._insertionRuleService=b;this._contentConverter=c;this.root=new I([]);this._documentState=0;this._blockEditsStack=[];this._pendingDocumentEvents=[];this.registerFormatTemplates([{name:"code",method:function(){var a={};a.container=new K([]);return a}}])},onPreDocumentChanged:function(a){},onDocumentChanged:function(a){k.assertValidEventPayload(a);
this._documentState+=1},insertAtPosition:function(a,f){return this._insertAtPositionRespectingReplacement(a,f,!1)},insertDuringReplace:function(a,f){return this._insertAtPositionRespectingReplacement(a,f,!0)},_insertAtPositionRespectingReplacement:function(a,f,b){Array.isArray(a)||(a=[a]);if(0===a.length)throw Error("rtc.model.InternalDocument._insertAtPositionRespectingReplacement: Expected at least one node to insert.");a=this._insertNodesAtPosition(a,f,b);f=[];b=null;a.insertedRange&&(b=this._mergeTextNodesInRange(a.insertedRange),
f=this._buildEventList(b,a.insertedContainerAtEndOfContainer,a.insertedRootContainers,a.containerWasSplit));return{insertionNotAllowed:a.insertionNotAllowed,events:f,insertedRange:b}},_insertNodesAtPosition:function(a,f,b){var c=!1,d=f,k=[],e=null,g=null,l=f=null,n=!1,h=!1;a.forEach(function(f,m){var p=this._insertNodeAtPosition(f,d,b);k=k.concat(p.insertedRootContainers);n=p.insertedContainerAtEndOfContainer;c=c||p.insertionNotAllowed;h=h||p.containerWasSplit;l=p.lastInsertedNode;if(!c){e=e||p.insertedRange.getStartPosition();
p=p.insertedRange.getEndPosition();if(!g||0>A.comparePositions(g,p))g=p;d=(p=a[m+1])&&p.isInstanceOf(G)?g:l.endPosition()}},this);e&&(f=new B(e,g));return{insertionNotAllowed:c,insertedRange:f,insertedRootContainers:k,insertedContainerAtEndOfContainer:n,containerWasSplit:h,lastInsertedNode:l}},_insertNodeAtPosition:function(a,f,b){return this._doesReadOnlyBlockInsertion(f)?{insertedRootContainers:[],insertedRange:null,insertionNotAllowed:!0,lastInsertedNode:null}:(b=this._findInsertionPositionWithinContainer(a,
f,b))?this._insertNodeInCompatiblePosition(a,b):this._insertUsingRule(a,f)},_doesReadOnlyBlockInsertion:function(a){d.assert(!a.getNode().isRootNode(),"This function does not support root");var f=a;for(a=f.getNode();f.isAtEdge()&&!a.isRootContainer();)f=this._createEquivalentPositionInContainer(f,a.parent),a=a.parent;var f=a.isRootContainer()&&f.isAtRightEdge(),b=a.nextSibling();return f&&b&&b.startNode()&&!b.startNode().isReadOnly()?!1:a.isReadOnly()},_findInsertionPositionWithinContainer:function(a,
f,b){var c=f,d=f.getNode();f.getOffset();for(f=this._insertionRuleService.getRulesForNode(a);d;){var k=this._insertionRuleService.getRulesForNode(d),e=f.canInsertInContainer(d),k=k.getReceivingInstruction(c,a);if(b&&e)return c;var g=this._insertionRuleService.RECEIVING_INSTRUCTION;if(this._insertionRuleService.isInstructionOfType(k,g.CONTINUE_AT_POSITION))c=k.getPosition();else{if(this._insertionRuleService.isInstructionOfType(k,g.INSERT_IF_COMPATIBLE)&&e)return c;if(this._insertionRuleService.isInstructionOfType(k,
g.CONTINUE_UP)||this._insertionRuleService.isInstructionOfType(k,g.INSERT_IF_COMPATIBLE)){if(d.isRootContainer())break;c=this._createEquivalentPositionInContainer(c,d.parent)}else throw Error("rtc.model.InternalDocument._findInsertionPositionWithinContainer: Invalid instruction: "+k.getType());}c.getOffset();d=c.getNode()}return null},_insertNodeInCompatiblePosition:function(a,f){var b=f.getNode().getEquivalentChildPositions(f.getOffset())[0];d.assert(b,"MW.rtc.model.InternalDocument: Expected a valid insertion position");
if(!b.isAtEdge()){d.assert(b.getNode().isSplittable(b.getOffset()),"MW.rtc.model.InternalDocument: Insertion was requested at a non-splittable position");var c=this._splitForInsertion(b).firstPart,b=new x(c,c.maxOffset())}b.isAtLeftEdge()&&!b.isAtRightEdge()?this._insertNodeWithEvent(a,b.getNode(),"before"):this._insertNodeWithEvent(a,b.getNode(),"after");var c=a.startPosition(),k=a.endPosition(),b=b.getNode().parent.CHILD_TEXT_SEPARATOR,e=k.getNode().nextNode();0<b.length&&e&&(k=e.startPosition());
b=a.nextSibling();e=a.previousSibling();b&&(b.isEmpty()&&b.isTextNode())&&this.deleteNode(b,{node:a,offset:a.maxOffset()});e&&(e.isEmpty()&&e.isTextNode())&&this.deleteNode(e,{node:a,offset:0});return{insertedRootContainers:[],insertedRange:new B(c,k),insertionNotAllowed:!1,insertedContainerAtEndOfContainer:!1,lastInsertedNode:a}},_insertUsingRule:function(a,f){var b,c,k,e,g,l,n=[];b=f.getNode().isRootContainer()?f:this._createEquivalentPositionInContainer(f);g=b.getNode();e=g.previousSibling();g=
g.nextSibling();var h=this._findNextBreakablePosition(b);g=this._insertionRuleService.getRulesForNode(a).getTopLevelInsertionInstruction(b,e,g,a,h);var m=h=!1;if(g)if(g.insertInRoot){var p,q=g.insertInRoot.insertionPosition||b;e=g.insertInRoot.containerConstructor?new g.insertInRoot.containerConstructor([a]):a;p=g.insertInRoot.relationToPosition;if(g.insertInRoot.siblingConstructor)for(var r=new g.insertInRoot.siblingConstructor([]),s=r;s.getDefaultChild&&s.getDefaultChild();){var t=this.createNode(s.getDefaultChild());
s.addChild(t);s=t}if(p===this._insertionRuleService.RELATION.AFTER){if(g.insertInRoot.siblingConstructor){c=this._insertContainerInRoot(r,b.getNode(),"after");var u=c.getEndPosition(),n=[r];l=r}else l=e;c=this._insertContainerInRoot(e,b.getNode(),"after");h=!0;k=!1;n.unshift(e);m=!1}if(p===this._insertionRuleService.RELATION.BEFORE){if(g.insertInRoot.siblingConstructor){c=this._insertContainerInRoot(r,b.getNode(),"before");var v=c.getStartPosition(),n=[r]}c=this._insertContainerInRoot(e,b.getNode(),
"before");n.push(e);m=h=k=!1;l=e}if(p===this._insertionRuleService.RELATION.AT||g.insertInRoot.insertionPosition)b=this._insertRootContainerInCompatiblePosition(e,q),c=b.insertedRange,h=b.insertedContainerAtEndOfContainer,k=b.insertionNotAllowed,n=b.insertedRootContainers,m=b.containerWasSplit,l=e;k?(d.error("MW.rtc.InternalDocument: Insertion not allowed."),l=c=null):(v=v||c.getStartPosition(),u=u||c.getEndPosition(),c=new B(v,u))}else g.insertAlternateNodes&&(b=this._insertNodesAtPosition(g.insertAlternateNodes,
b),n=b.insertedRootContainers,c=b.insertedRange,h=b.insertedContainerAtEndOfContainer,k=!1,l=b.lastInsertedNode);else d.error("MW.rtc.InternalDocument: No insertion instructions found"),n=[],c=null,k=!0,l=null;return{insertedRootContainers:n,insertedRange:c,insertionNotAllowed:k,insertedContainerAtEndOfContainer:h,containerWasSplit:m,lastInsertedNode:l}},_insertRootContainerInCompatiblePosition:function(a,f){var b,c,k=!1;c=f.getOffset();var e=!1;a.children.forEach(this._ensureMaxTextLength,this);
if(f.isAtLeftEdge())c=this._insertContainerInRoot(a,f.getNode(),"before");else if(f.isAtRightEdge())c=this._insertContainerInRoot(a,f.getNode(),"after"),e=!0;else if(f.getNode().isSplittable(c)){for(k=f.getNode().getEquivalentChildPositions(f.getOffset())[0];k.getNode().children&&0<k.getNode().children.length;)k=k.getNode().getEquivalentChildPositions(k.getOffset())[0];k=this._splitContainerAtPosition(k).first;c=k.endPosition();b=new x(k,k.maxOffset());k=!0;b=this._insertContainerInRoot(a,b.getNode(),
"after");c=new B(c,b.getEndPosition())}else return d.error("MW.rtc.model.InternalDocument: Insertion was requested at a non-splittable position"),{insertedRootContainers:[],insertedRange:null,insertionNotAllowed:!0,insertedContainerAtEndOfContainer:!1,containerWasSplit:!1,lastInsertedNode:null};return{insertedRootContainers:[a],insertedRange:c,insertionNotAllowed:!1,insertedContainerAtEndOfContainer:e,containerWasSplit:k,lastInsertedNode:a}},_insertContainerInRoot:function(a,f,b){a.children.forEach(this._ensureMaxTextLength,
this);this._insertNodeWithEvent(a,f,b);f=a.startPosition();a=(b=a.nextSibling())?b.startPosition():a.endPosition();return new B(f,a)},_findNextBreakablePosition:function(a){var f=a.getNode(),b=a.getOffset();if(!a.isAtEdge())for(;b<f.maxOffset()&&!f.isSplittable(b);)b++;return new x(f,b)},_createEquivalentPositionInContainer:function(a,f){var b=a.getNode();f=f||b.rootContainer();b=b.offsetInContainer(f)+a.getOffset();return new x(f,b)},_insertNode:function(a,f,b){var c=this._convertRelationToIndex(f,
b);b=c.parentNode;var c=c.index,d=m.create(a,f,0);f=r.create(a.parent,a,f);this._insertChildren(b,[a],c);f=new M(this,d,f);this._executeCommand(f);return a},_insertNodeWithEvent:function(a,f,b){var c=this._convertRelationToIndex(f,b),d=c.parentNode,c=c.index;if(d.isRootNode()&&d.children.length){var k=c-1,e=0;c===d.children.length&&(e=d.lastChild().maxOffset());0===c&&(k=0);k=n.create(k,k+1,e,1);this.onPreDocumentChanged(k)}this._insertChildren(d,[a],c);this._notifyInsertNode(a,f,b)},_convertRelationToIndex:function(a,
f){var b,d;"first"===f?(d=a,b=0):"last"===f?(d=a,b=d.children.length):"before"===f?(d=a.parent,b=c.indexOf(d.children,a)):"after"===f&&(d=a.parent,b=c.indexOf(d.children,a)+1);return{parentNode:d,index:b}},deleteNode:function(a,f){if(!f){var b=a.previousSibling(),c=a.nextSibling();f={node:null,offset:0};if(b)f.node=b,f.offset=b.maxOffset();else if(c)f.node=c;else{var k=this._insertDefaultTextNode(a,"after");f.node=k.getNode()}}k=a.parent;d.assert(k,"deleteNode called without parent");this._notifyDeleteNode(a,
f);this._notifyDeleteChildren(a,f);var e=k.children.indexOf(a),k=new Q(this,k,e,1);this._executeCommand(k);return{previousSibling:b,nextSibling:c}},removeChildren:function(a,f,b){a=new Q(this,a,f,b);return this._executeCommand(a)},_insertChildren:function(a,f,b){a=new C(this,a,f,b);this._executeCommand(a)},updateTextInNode:function(a,f,b,c){this._insertTextInNode(a,f,b);f=f.length;this._deleteTextInNode(a,f+b,f+c)},_insertTextInNode:function(a,f,b){var c=q.create(a,b,f.length),c=new M(this,c);this._executeCommand(c);
c=new L(this,a,b,0,f);this._executeCommand(c);a=s.create(a,b,f.length);c=new M(this,null,a);this._executeCommand(c)},deleteText:function(a,f,b){a.isTextNode()&&this._deleteTextInNode(a,f,b)},_deleteTextInNode:function(a,f,b){f=f||0;void 0===b&&(b=a.getText().length);if(0!==b-f){var c=s.create(a,f,b-f),c=new M(this,c);this._executeCommand(c);c=new L(this,a,f,b-f,"");this._executeCommand(c);a=q.create(a,f,b-f);c=new M(this,null,a);this._executeCommand(c)}},changeNodeAttributes:function(a,f){var b;b=
new N(this,a,f);this._executeCommand(b);b=v.create(a);b=new M(this,b,b);this._executeCommand(b)},setReadOnlyLine:function(a,f){var b=this.getLineNode(a);if(b.isReadOnly()===f)return!1;b.readOnly=f;this.onNodeChange(v.create(b));return!0},_executeCommand:function(a){if(!this._editBlockController||!this._editBlockController.getActiveBlock)return a.execute();var f=this._editBlockController.getActiveBlock();return!f?(d.assert("No block active"),a.execute()):f.pushAndExecuteCommand(a)},getNodeById:function(a){return w.searchNodeById(a,
this.root)},startBlockEdit:function(a){a=a||{};this._blockEditsStack.push(a);return a},endBlockEdit:function(a){d.assert(a===this._blockEditsStack[this._blockEditsStack.length-1],"InternalDocument: Start and End block edits' blocks do not match.");this._blockEditsStack.pop();0===this._blockEditsStack.length&&this._emitPendingEvents()},emitDocumentEvents:function(a){this._pendingDocumentEvents=this._pendingDocumentEvents.concat(a);0===this._blockEditsStack.length&&this._emitPendingEvents()},_emitPendingEvents:function(){var a=
this._pendingDocumentEvents;0<a.length&&(this._pendingDocumentEvents=[],this.onDocumentChanged(a))},onDocumentReset:function(){this._documentState+=1},readOnlyChanged:function(a){},onNodeChange:function(a){},newDocument:function(a){this.openTextDocument("",a)},openTextDocument:function(a,f){this._setTextInDocument(a,f);this.onDocumentReset()},_setTextInDocument:function(a,b){this.root=new I([]);var c=[""];a&&(c=f.textLineArray(a));var d;for(d=0;d<c.length;d+=1){var k=f.DEFAULT_TEXT_NODE;k.text=c[d];
var e=f.DEFAULT_CONTAINER_NODE;e.children=[k];k=this.createNode(e);this._insertNode(k,this.root,"last");this._ensureMaxTextLength(k.startNode())}this.setReadOnly(b)},formatTemplates:{},registerFormatTemplates:function(a){var f;for(f=0;f<a.length;f+=1)this.formatTemplates[a[f].name]=a[f].method},createContainerForType:function(a){a=this.formatTemplates[a];return!a?null:a()},serialize:function(a){a=a||this.root;return a.serialize()},deserialize:function(a){this.root=this._deserializeNode(a);this.onDocumentReset()},
_deserializeNode:function(a){return this._contentConverter.unpack(a)},getState:function(){return this._documentState},getTextInRange:function(a,f,b,c){if(a===b)return a.getText().substring(f,c);var d=b.rootContainer(),k=a.rootContainer();if(k===d)return k.getText().substring(a.offsetInContainer()+f,b.offsetInContainer()+c);var e=this.root.CHILD_TEXT_SEPARATOR;a=k.getText().substring(a.offsetInContainer()+f)+e;for(k=k.nextSibling();k&&k!==d;)a+=k.getText(),(k=k.nextSibling())&&(a+=e);return a+d.getText().substring(0,
b.offsetInContainer()+c)},deleteTextRange:function(a,f,b){if(a.isReadOnly())return 0;a=a.startNode();for(var c=a.getText().length,d=a,k=0;0<b&&a;)c=a.getText().length,c<=b?(b-=c,a=a.nextSibling()):(d=a,k=b,b=0);if(!a)return 0;b=f;var e,g;k+b<=c?(e=a,g=k+b):(b-=c-k,a=a.nextSibling());if(!e)for(;0<b&&a;)c=a.getText().length,c<b?(b-=c,a=a.nextSibling()):(e=a,g=b,b=0);if(!e)return 0;e={startPosition:new x(d,k),endPosition:new x(e,g),startNode:d,endNode:e,startPos:k,endPos:g,isLocal:!0,fileEndSelected:!1};
e=this.deleteSelection(e);this.emitDocumentEvents([e]);return f},isReadOnly:function(){return this.root&&this.root.readOnly},setReadOnly:function(a,f){this.root&&this.root.readOnly!==a&&(a=void 0===a?!1:a,this.root.readOnly=a,(void 0===f?0:f)||this.readOnlyChanged(a))},startNode:function(){return this.root.startNode()},endNode:function(){return this.root.endNode()},getChild:function(a,f){f=f||this.root;return 0<=a&&f.children&&f.children.length>=a?f.children[a]:null},_getChildIndex:function(a,f){f=
f||this.root;return c.indexOf(f.children,a)},getLineNode:function(a,f){return this.getChild(a,f)},getLineNumber:function(a,f){return this._getChildIndex(a,f)},getMaxLineNumber:function(a){return(a=a||this.root)&&a.children&&a.children.length},getPositionForLineColumn:function(a,b){var c=this.getLineNode(a-1);f.assert(c,"Caret requested for invalid line!");return c.getPositionFromOffset(b-1)},getRangeForLineColumn:function(a,f,b,c){a=this.getPositionForLineColumn(a,f);b=this.getPositionForLineColumn(b,
c);b=new B(a,b);return F.trimRange(b)},getRangeForLine:function(a){a=this.getLineNode(a-1);return new B(a.startPosition(),a.endPosition())},getFullRange:function(){return new B(this.root.startPosition(),this.root.endPosition())},_getOrCreateEditablePosition:function(a,b){f.isEdgeOfTextLevelContainer(a,b)&&!a.containsTextNodes()&&(b+=a.offsetInContainer(a.parent),a=a.parent);if(a.isTextNode()&&!a.isReadOnly()&&!f.isTextLevelContainer(a))return new x(a,b);if(a.textContainer().isReadOnly())return new x;
var c=0<b?a.nextSibling():a.previousSibling();return c?!c.isTextNode()||c.isReadOnly()||f.isTextLevelContainer(c)?this._insertDefaultTextNode(a,0<b?"after":"before"):new x(c,0<b?0:c.maxOffset()):this._insertDefaultTextNode(a,0<b?"after":"before")},_insertDefaultTextNode:function(a,f){var b=this.createNode(a.textContainer().getDefaultChild());this._insertNode(b,a,f);return new x(b,0)},insertBreakInTextNode:function(a,f){var b=this._getOrCreateEditablePosition(a,f);a=b.getNode();f=b.getOffset();if(!a)return null;
b=a.textContainer();if(b.isReadOnly())return null;var c=this.getLineNumber(b.rootContainer()),d=c;b.isRootContainer()&&(d+=1);var k=a.offsetInContainer()+f,c=n.create(c,d,k,1);this.onPreDocumentChanged(c);d=!(0===f&&!a.previousSibling());b=this._splitContainerInNode(b,a,f,!0,d);d=b.startNode();d.nextSibling()&&d.isEmpty()&&this.mergeTextNodeWithSibling(d.nextSibling());c.line=this.getLineNumber(b.rootContainer());return{newNode:b,event:c}},_ensureMaxTextLength:function(a,f){f=f||0;var b=null;if(a.isTextNode())for(var c=
a.getText();c.length>this.MAX_NODE_TEXT_LENGTH;){if(a.containsTextNodes()){for(c=a.children.length-1;0<=c;c-=1)this._ensureMaxTextLength(a.children[c]);break}a=this._splitTextNodeAt(a,this.MAX_NODE_TEXT_LENGTH);f<this.MAX_NODE_TEXT_LENGTH?b||(b=a):f-=this.MAX_NODE_TEXT_LENGTH;a=a.nextSibling();c=a.getText()}return new x(b||a,f)},deleteSelection:function(a){f.assert(a,"Selection should never be null at this point.");var b=this.getLineNumber(a.startNode.rootContainer()),c=this.getLineNumber(a.endNode.rootContainer()),
d=a.endNode.offsetInContainer()+a.endPos,b=l.create(b,c,d);this.onPreDocumentChanged(b);c=a.startNode;c===a.endNode?c.isTextNode()&&!c.containsTextNodes()?this._deleteRangeInNodeAndMerge(c,a.startPos,a.endPos):0===a.startPos&&a.endPos===c.maxOffset()&&this.deleteNodeAndMerge(c):this._deleteRangeBeyondNodeAndMerge(a);return b},_deleteRangeBeyondNodeAndMerge:function(a){var b=a.startNode,c=a.endNode,d=a.endNode.rootContainer().previousSibling()===a.startNode.rootContainer(),k=f.isAtEndOfContainer(a.startPosition,
a.startNode.rootContainer()),e=f.isAtStartOfContainer(a.endPosition,a.endNode.rootContainer());if(!k||!e||!d)a=this._splitAtSelection(a,!0),b=a.startNode.prevNode(),c=a.endNode.nextNode(),d={node:b,offset:b.maxOffset(),endNode:c,endOffset:0},this.deleteRange(a.startNode,a.endNode,d);a=!b.textContainer().isRootContainer();d=new x(c,0);b.rootContainer()!==c.rootContainer()&&(this._canMergeContainerWithSibling(c.rootContainer())?d=this._mergeContainerWithSibling(c.rootContainer()):c.rootContainer().isEmpty()&&
this.deleteNode(c.rootContainer(),{node:b,offset:b.maxOffset()}));b.rootContainer()&&(a&&b.textContainer()!==c.textContainer()&&this._canMergeContainerWithSibling(c.textContainer())&&(d=this._mergeContainerWithSibling(c.textContainer())),b.textContainer()===d.getNode().textContainer()&&(this.mergeTextNodeWithSibling(b,!0),this.mergeTextNodeWithSibling(c),b.isEmpty()&&(a=b.nextSibling())&&this.mergeTextNodeWithSibling(a),f.isInTextLevelContainer(b)&&this.mergeTextNodeWithSibling(b.parent,!0),f.isInTextLevelContainer(c)&&
this.mergeTextNodeWithSibling(c.parent)))},_deleteRangeInNodeAndMerge:function(a,f,b){var c=a.previousSibling(),d=a.nextSibling();if(0===f&&b===a.maxOffset()&&(c||d))return this.deleteNodeAndMerge(a);this.deleteText(a,f,b)},deleteNodeAndMerge:function(a){a=this.deleteNode(a);a.previousSibling&&a.nextSibling&&this.mergeTextNodeWithSibling(a.nextSibling)},deleteRange:function(a,f,b){if(!f||f===a)this.deleteNode(a,b);else{var c=a?a.textContainer():f.textContainer();a=a||c.children[0];var d=f.textContainer();
c===d&&a.parent===f.parent?(this._deleteRangeInContainer(c,a,f,b),0===c.children.length&&this.deleteNode(c,b)):(c=this.splitContainerAtNode(a.rootContainer(),a,!0,!0),d=this.splitContainerAtNode(f.rootContainer(),f,!1,!0),this._deleteRangeInContainer(this.root,c,d,b))}},_deleteRangeInContainer:function(a,f,b,c){if(!f&&!b)this._emptyNode(a,c);else if(a=f||a.children[0],a===b)this.deleteNode(a,c);else for(f=null;a;){f=a.nextSibling();this.deleteNode(a,c);if(f===b){this.deleteNode(f,c);break}a=f}},createNode:function(a,
f){f=f||{};"string"===typeof a&&(f.className=a,a=f);return this._deserializeNode(a)},cloneNode:function(a,f){return this._deserializeNode(this.serialize(a))},cloneNodeWithoutChildren:function(a){a=this.serialize(a);a.children&&0<a.children.length&&(a.children=[]);a=this._deserializeNode(a);a.resetUniqueAttributes();return a},_notifyInsertNode:function(a,b,c){f.assert(a,"Inserted node does not exist.");var d=a.parent;c="after"===c?{node:b.endNode(),offset:b.endNode().maxOffset()}:{node:b.startNode(),
offset:0};this._generateUndoEventsForInsertNode(a,c);a=r.create(d,a,b);a=new M(this,null,a);this._executeCommand(a)},_generateUndoEventsForInsertNode:function(a,f){var b=m.create(a,f.node,f.offset,f.endNode,f.endOffset),b=new M(this,b,null);this._executeCommand(b);a.children&&a.children.forEach(function(a){this._generateUndoEventsForInsertNode(a,f)},this)},_notifyDeleteNode:function(a,b){f.assert(a,"Node for deletion does not exist.");b=b||{node:null,offset:0};var c=m.create(a,b.node,b.offset,b.endNode,
b.endOffset),d=r.create(a.parent,a),c=new M(this,d,c);this._executeCommand(c)},_notifyDeleteChildren:function(a,f){var b=a.children;if(b&&0<b.length){var c;for(c=0;c<b.length;c+=1)this._notifyDeleteNode(b[c],f),this._notifyDeleteChildren(b[c],f)}},_emptyNode:function(a,f){this._notifyDeleteChildren(a,f);a.empty()},_insertContainerRange:function(a,f){var b=f.getLineColumn().line-1,c=f.node.rootContainer(),d="after",k,e,g=!0,l=!1;if(c.isEmpty())k=c,g=!1;else if(f.node===c.startNode()&&0===f.offset)d=
"before",e=new x(f.node,f.offset),g=!1,l=!0;else if(f.node!==c.endNode()||f.offset!==f.node.maxOffset())this._splitContainerInNode(c,f.node,f.offset),d="before",e=new x(c.startNode(),0),l=!0;var h,m;for(h=0;h<a.length;h+=1){m=this._deserializeNode(a[h]);var q=this._convertRelationToIndex(c,d);this._insertChildren(q.parentNode,[m],q.index);m.isTextContainerNode()&&(m.children.length?m.children.forEach(function(a){a.isTextContainerNode()&&!a.children.length&&this._insertDefaultTextNode(a,"first")},
this):this._insertDefaultTextNode(m,"first"));m.children&&m.children.forEach(this._ensureMaxTextLength,this);this._notifyInsertNode(m,c,d);g&&(0===h&&m.previousSibling()&&this._canSpliceContainers(m,m.previousSibling()))&&(e=this._mergeContainerWithSibling(m),m.parent||(m=e.node.rootContainer()));c=m.parent?m:e.node.rootContainer();d="after"}e=m.endNode();e=new x(e,e.maxOffset());(c=m.nextSibling())&&l&&(e=m.isEmpty()||this._canSpliceContainers(m,c)?this._mergeContainerWithSibling(c):new x(c.startNode(),
0));k&&this.deleteNode(k,{node:m.startNode(),offset:0});k=this.getLineNumber(e.getNode().rootContainer());for(l=[];b<=k;b+=1)m=this.getLineNode(b),c=m.getText(),l.push(p.create(b,b,new x(m,0),c)),b!==k&&l.push(n.create(b,b+1,c.length,1));return{newPosition:e,event:l}},_insertNodeRange:function(a,c){var d=b.isCodeContainer(c.node)||b.isNonExecutableCodeContainer(c.node),k=a.map(function(a){a=this._deserializeNode(a);if(d){var b=this._insertionRuleService.getRulesForNode(a),k=c.getNode().rootContainer();
if(b.canInsertInContainer(k))return a;b=f.DEFAULT_TEXT_NODE;b.text=a.getText().replace(/[\r\n]+$/," ");a=this.createNode(b)}return a},this),k=k.filter(function(a){return!a.isEmpty()});if(0===k.length)return{newPosition:c,event:[]};k=this.insertAtPosition(k,c);return{newPosition:k.insertedRange.getEndPosition(),event:k.events}},insertContent:function(a,f){d.assert(0<a.length);var b=this._deserializeNode(a[0]);return b.isTextContainerNode()?1===a.length&&!b.childrenAreContainers?this._insertNodeRange(a[0].children,
f):this._insertContainerRange(a,f):this._insertNodeRange(a,f)},_splitTextNodeAt:function(a,f,b,c,d,k){var e,g,l;if(!c&&(0===f||f>=a.maxOffset()))return a;c=this.cloneNode(a,d);b?(c.deleteText(f),d="before",g=0,l=f):(c.deleteText(0,f),d="after",g=f,l=a.text.length-f);e=t.create(c,a,g);e=new M(this,e,null);this._executeCommand(e);e=s.create(a,g,l);e=new M(this,e,null);this._executeCommand(e);e=new L(this,a,g,l,"");this._executeCommand(e);d=this._convertRelationToIndex(a,d);this._insertChildren(d.parentNode,
[c],d.index);f=u.create(a,f,c,b,k);e=new M(this,null,f);this._executeCommand(e);return a},_splitNodeAt:function(a,b,c,d,k){if(a.isTextNode()&&!f.isTextLevelContainer(a))return this._splitTextNodeAt(a,b,c,d,!1,k);if(a.isOpaqueNode()){if(!d||d&&a.isReadOnly())return a;k=a.textContainer().getDefaultChild();if(!k)return a;var e=this.createNode(k);0===b?(k=a.previousSibling(),d=a,k||(this._insertNodeAtPosition(e,new x(a,b)),k=e)):(k=a,d=a.nextSibling(),d||(this._insertNodeAtPosition(e,new x(a,b)),d=e));
return c?d:k}if(!a.children||0===b&&c||b>=a.children.length||!c&&b===a.children.length-1)return a;d=this.cloneNodeWithoutChildren(a);c?(d.children=this.removeChildren(a,0,b),this._insertNode(d,a,"before")):(d.children=this.removeChildren(a,b+1,a.children.length-b-1),this._insertNode(d,a,"after"));c=t.create(d,a,b);b=u.create(a,b,d,!0,k);b=new M(this,c,b);this._executeCommand(b);return a},_splitContainerAtPosition:function(a){var f=a.getNode().rootContainer(),b=a.getLineColumn(),c=1===b.column||b.column===
f.maxOffset()+1,d=c?-1:0,k=0===a.getOffset(),e=a.getOffset()===a.getNode().maxOffset();k||e?this.splitContainerAtNode(f,a.getNode(),k,c,d):a.getNode().isInstanceOf(H)?this.splitContainerAtNode(f,a.getNode(),!1,!0,d):this._splitContainerInNode(f,a.getNode(),a.getOffset());return{first:this.getLineNode(b.line-1),second:this.getLineNode(b.line)}},splitContainerAtNode:function(a,f,b,c,d){b&&!f.previousSibling()?f=this._splitNodeAt(f,0,!0,c,d):!b&&!f.nextSibling()&&(f=this._splitNodeAt(f,f.maxOffset(),
!1,c,d));for(c=!0;c;){var k=f.parent;if(k.isRootContainer()||k===a)c=!1;f=this.getLineNumber(f,k);f=this._splitNodeAt(k,f,b,!1,d)}return f},_splitContainerInNode:function(a,b,c,d,k){var e=!1,g=0;if(0<c&&c>=b.maxOffset()){var l=b.nextSibling();l?(b=l,c=0):(e=!0,g=1)}else 0===c&&!b.previousSibling()&&(0===b.maxOffset()&&b.nextSibling()?b=b.nextSibling():(e=!0,g=-1));l=!b.isOpaqueNode();if(!f.isTextLevelContainer(b)&&f.isEdgeOfTextLevelContainer(b,c)){var n=b.parent.previousSibling();0===c&&0<b.maxOffset()&&
n?(f.isTextLevelContainer(n)||(b=b.parent.previousSibling(),c=b.maxOffset()),l=!1):0<c&&b.parent.nextSibling()&&(b=b.parent.nextSibling(),c=0,l=!1)}l&&(b=this._splitTextNodeAt(b,c,!0,e,k,g));c=b.parent;for(b=this._getChildIndex(b,c);c;){b=this._splitNodeAt(c,b,!0,!1,g);if(c===a||!c.parent)break;c=c.parent;b=this._getChildIndex(b,c)}return d?c:c.previousSibling()},_splitAtSelection:function(a,f){var b=a.startNode,c=a.endNode,b=f&&(0===a.endPos&&!c.previousSibling()||a.endPos===c.maxOffset()&&!c.nextSibling());
!b&&(0===a.endPos&&c.previousSibling())&&(c=c.previousSibling(),a.endPos=c.maxOffset());var c=this._splitNodeAt(c,a.endPos,!1,b),d=a.startPos===a.startNode.maxOffset();a.isLocal?(f=f&&(!c.previousSibling()||!c.nextSibling()),c=b=this._splitNodeAt(c,a.startPos,!0,f)):(b=a.startNode,f=f&&(!b.previousSibling()||!b.nextSibling()),b=this._splitNodeAt(b,a.startPos,!0,f));a.startNode=b;d&&!f?(b=b.nextSibling())?(a.startNode=b,a.startPos=0):a.startPosAtEnd=!0:a.startPos=0;a.endNode=c;0<a.endPos?a.endPos=
c.maxOffset():a.endPosAtStart=!0;return a},_splitForInsertion:function(a){var b=a.getNode(),c=a.getOffset();if(a.isAtLeftEdge())return{firstPart:b.previousSibling(),secondPart:b};if(a.isAtRightEdge())return{firstPart:b,secondPart:b.nextSibling()};if(b.isTextNode()&&!f.isTextLevelContainer(b))return a=this._splitTextNodeAt(b,c,!1,!1,!1,!1),{firstPart:a,secondPart:a.nextSibling()};a=b.getEquivalentChildPositions(c)[0];c=(a=this._splitForInsertion(a).firstPart)?this._getChildIndex(a,b):0;a=this.cloneNodeWithoutChildren(b);
a.children=this.removeChildren(b,c+1,b.children.length-c-1);this._insertNode(a,b,"after");c=u.create(b,c,a,!0,!1);c=new M(this,null,c);this._executeCommand(c);return{firstPart:b,secondPart:a}},mergeTextNodeWithSibling:function(a,b){var c=b?a.nextSibling():a.previousSibling(),d=b?a.maxOffset():0;return!c||c.isEmpty()&&(this.deleteNode(c,{node:a,offset:d}),c=b?a.nextSibling():a.previousSibling(),!c)?new x(a,d):!a.isTextNode()||f.isTextLevelContainer(a)||c.className!==a.className||a.readOnly||c.readOnly?
new x(a,d):0===a.getText().length?this._mergeEmptyTextNodeWithSibling(a,b):!0===a.compareStyleAttributes(c)?this._mergeTextNodeWithSibling(a,b):new x(a,d)},_mergeEmptyTextNodeWithSibling:function(a,f){var b=f?a.nextSibling():a.previousSibling(),c=f?a.maxOffset():0;this.changeNodeAttributes(a,{cssClass:null});if(1<a.parent.children.length){this._insertTextInNode(a,b.text,0);this.changeNodeAttributes(a,b.getStyleAttributes());this.onNodeChange(t.create(b,a,0));var d=f?0:a.maxOffset();this.deleteNode(b,
{node:a,offset:d})}return new x(a,c)},_mergeTextNodesInRange:function(a){var f;f=a.getStartPosition().getNode();var b=a.getEndPosition().getNode(),c=f.rootContainer(),d=b.rootContainer(),k=a.getStartPosition().getLineColumn().column-1;a=a.getEndPosition().getLineColumn().column-1;for(var e=f;e;){f=this.mergeTextNodeWithSibling(e);this._ensureMaxTextLength(e);if(e===b){this.mergeTextNodeWithSibling(e,!0);this._ensureMaxTextLength(e);break}e=f.getNode().nextNode()}b=c.getPositionFromOffset(k);d=d.getPositionFromOffset(a);
return new B(b,d)},_mergeTextNodeWithSibling:function(a,f){var b,c,d,k,e=f?a.nextSibling():a.previousSibling(),g=f?a.maxOffset():0;k=a.getText();c=e.getText();if(k.length+c.length>=this.MAX_NODE_TEXT_LENGTH)return new x(a,g);f?(b=new L(this,a,a.text.length,0,c),this._executeCommand(b),b=!1,k=d=k.length):(b=new L(this,a,0,0,c),this._executeCommand(b),d=t.create(a,a,c.length),b=new M(this,null,d),this._executeCommand(b),b=!0,d=0,g=k=c.length);d=t.create(e,a,d);c=u.create(a,k,e,b,void 0);b=new M(this,
c,d);this._executeCommand(b);c=this._getChildIndex(e,e.parent);this.removeChildren(e.parent,c,1);return new x(a,g)},_mergeContainerWithSibling:function(a,f){var b,c;f?(b=a.nextSibling(),c=new x(a.endNode(),a.endNode().maxOffset())):(b=a.previousSibling(),c=new x(a.startNode(),0));if(!b)return c;if(b.isEmpty()){if(a.isEmpty())return c=new x(b.startNode(),0),this.deleteNode(a,c),c;c=f?new x(a.endNode(),a.endNode().maxOffset()):new x(a.startNode(),0);this.deleteNode(b,c)}else{var d=this.containerType(b.textContainer());
if(d!==this.containerType(a)&&(a=this.convertParagraph(d,a),d!==this.containerType(a)))return c;c=f?this.spliceContainers(a,b):this.spliceContainers(b,a)}return c},spliceContainers:function(a,f){var b,c=this.removeChildren(f);b=a.children.length;this._insertChildren(a,c,b);var d=a.children[0<b?b-1:0];w.forAllDescendants(c,e.hitch(this,function(a){a=new M(this,{node:a,newNode:d,offset:0});this._executeCommand(a)}));var c=u.create(a,b,f),k=t.create(f,a,void 0),c=new M(this,c,k);this._executeCommand(c);
this.deleteNode(f,{node:a,offset:0});return this.mergeTextNodeWithSibling(a.children[b])},_canMergeContainerWithSibling:function(a,f){if(a.isReadOnly())return!1;var b=f?a.nextSibling():a.previousSibling();return!b||b.isReadOnly()?!1:a.className===b.className?a.canMergeContainerWithSibling?a.canMergeContainerWithSibling(a,b):!0:b.isEmpty()||a.isEmpty()||a.isTextContainerNode()&&b.isTextContainerNode()?!0:!1},_canSpliceContainers:function(a,f){return a.isReadOnly()||f.isReadOnly()?!1:f.isEmpty()&&!a.childrenAreContainers?
!0:a.className===f.className?a._canSpliceContainers?a._canSpliceContainers(a,f):!0:!1},containerType:function(a){var f="none";a&&a.containerType&&(f=a.containerType());return f},convertParagraph:function(a,f){if(this.containerType(f)===a||!f.isTextContainerNode())return f;var c=null,d=null;if(d=this.createContainerForType(a))c=d.container,d=d.textContainer||c;else return f;if(f.firstChild().isTextContainerNode())return f;if(b.isCodeContainer(f)||b.isCodeContainer(d)){var k=this._textNodeService.createTextNodeForContainer(f.getText().replace(/(\r\n|\n|\r)/gm,
" "),d);d.addChild(k);this._insertNode(c,f,"before");this.deleteNode(f,{node:k,offset:0});this._ensureMaxTextLength(k);return c}this._insertNode(c,f,"before");this.spliceContainers(d,f);return c},createContiguousRange:function(a,f,b){a={startNode:a.getNode(),startPos:a.getOffset(),endNode:f.getNode(),endPos:f.getOffset(),isLocal:a.getNode()===f.getNode()};b=this._splitAtSelection(a,b);return{startNode:b.startNode,endNode:b.endNode}},_buildEventList:function(a,f,b,c){var d=[],k=[],e=[],g=a.getStartPosition(),
l=g.getNode().rootContainer();a=a.getEndPosition();var h=a.getNode().rootContainer(),m=g.getLineColumn().line===a.getLineColumn().line,q=l===b[0],r=h===b[b.length-1];if(m&&0===b.length)return b=this._createTextInsertionEventsForRange(g,a),0===b.length&&(d=this.getLineNumber(g.getNode().rootContainer()),b.push(p.create(d,d,g,""))),b;q||(d=this._createTextInsertionEventsForRange(g,l.endPosition()));r||(e=this._createTextInsertionEventsForRange(h.startPosition(),a));c&&(c=g.getLineColumn().line-1,g=
g.getLineColumn().column-1,k.push(n.create(c,c+1,g,1)));b.forEach(function(a){var b=this.getLineNumber(a),c,d;f?(c=b-1,d=a.previousSibling().maxOffset()):(c=b,d=a.maxOffset());var e=a.startPosition();a=a.endPosition();b=e.getLine()!==b||a.getLine()!==b?[]:this._createTextInsertionEventsForRange(e,a);f||(k=k.concat(b));k.push(n.create(c,c+1,d,1));f&&(k=k.concat(b))},this);return b=d.concat(k).concat(e)},_createTextInsertionEventsForRange:function(a,f){for(var b=[],c=!a.isAtLeftEdge(),d=!f.isAtRightEdge(),
k,e,g=a.getNode(),l=f.getNode().nextNode(),n;g&&g!==l;){n=this.getLineNumber(g.rootContainer());k=g.getText();e=0;d&&g===f.getNode()&&(e=0,k=k.substr(0,f.getOffset()));c&&g===a.getNode()&&(e=a.getOffset(),k=k.substr(e));if(0<k.length||g.isOpaqueNode())e=new x(g,e),b.push(p.create(n,n,e,k));g=g.nextNode()}return b}})})},"MW/rtc/model/events/InsertBreakEvent":function(){define("dojo/_base/declare MW/rtc/model/DocumentConstants MW/rtc/model/DocumentEventUtilities MW/rtc/model/Mutation ./UndoableEvent ./NumberOfLinesChangedEvent".split(" "),
function(h,e,g,d,c,b){var a=h(c,{constructor:function(a,b,c,d){this.type=e.INSERT_BREAK_EVENT;this.line=a;this.column=c;this.numberOfLines=d},getMutation:function(){return d.createFromEvent(this,d.MUTATION_TYPE.INSERTION)},destroy:function(){},getUndoEvent:function(){return b.create(this.startLine,this.endLine,-1)}});return{create:function(f,b,c,d){g.assertValidLines(f,b,e.INSERT_BREAK_EVENT);return new a(f,b,c,d)}}})},"MW/rtc/model/events/nodechange/DeleteNodeEvent":function(){define(["dojo/_base/declare",
"./NodeChangeEventBase","./NodeChangeEventTypes"],function(h,e,g){var d=h(e,{constructor:function(c,b,a,f,d){this.type=g.DELETE_NODE;this.node=c;this.newNode=b;this.newOffset=a;this.newEndNode=f;this.newEndOffset=d},destroy:function(){}});return{create:function(c,b,a,f,k){return new d(c,b,a,f,k)}}})},"MW/rtc/model/events/nodechange/NodeChangeEventBase":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(e){this.node=e},destroy:function(){}})})},"MW/rtc/model/events/nodechange/DeleteTextNodeEvent":function(){define(["dojo/_base/declare",
"./NodeChangeEventBase","./NodeChangeEventTypes"],function(h,e,g){var d=h(e,{constructor:function(c,b,a){this.type=g.DELETE_TEXT;this.node=c;this.offset=b;this.length=a},destroy:function(){}});return{create:function(c,b,a){return new d(c,b,a)}}})},"MW/rtc/model/events/nodechange/InsertNodeEvent":function(){define(["dojo/_base/declare","./NodeChangeEventBase","./NodeChangeEventTypes"],function(h,e,g){var d=h(e,{constructor:function(c,b,a){this.type=g.INSERT_NODE;this.node=c;this.newNode=b;this.referenceSibling=
a},destroy:function(){}});return{create:function(c,b,a){return new d(c,b,a)}}})},"MW/rtc/model/events/nodechange/InsertTextNodeEvent":function(){define(["dojo/_base/declare","./NodeChangeEventBase","./NodeChangeEventTypes"],function(h,e,g){var d=h(e,{constructor:function(c,b,a){this.type=g.INSERT_TEXT;this.node=c;this.offset=b;this.length=a},destroy:function(){}});return{create:function(c,b,a){return new d(c,b,a)}}})},"MW/rtc/model/events/nodechange/MergeNodeEvent":function(){define(["dojo/_base/declare",
"./NodeChangeEventBase","./NodeChangeEventTypes"],function(h,e,g){var d=h(e,{constructor:function(c,b,a){this.type=g.MERGE_NODE;this.node=c;this.newNode=b;this.offset=a},destroy:function(){}});return{create:function(c,b,a){return new d(c,b,a)}}})},"MW/rtc/model/events/nodechange/SplitNodeEvent":function(){define(["dojo/_base/declare","./NodeChangeEventBase","./NodeChangeEventTypes"],function(h,e,g){var d=h(e,{constructor:function(c,b,a,f,d){this.type=g.SPLIT_NODE;this.node=c;this.offset=b;this.newNode=
a;this.nodeChanged=f;this.lineStartOrEnd=d},destroy:function(){}});return{create:function(c,b,a,f,k){return new d(c,b,a,f,k)}}})},"MW/rtc/model/events/nodechange/UpdateAttributesNodeEvent":function(){define(["dojo/_base/declare","./NodeChangeEventBase","./NodeChangeEventTypes"],function(h,e,g){var d=h(e,{constructor:function(c){this.type=g.UPDATE_ATTRIBUTES;this.node=c},destroy:function(){}});return{create:function(c){return new d(c)}}})},"MW/rtc/nodes/OpaqueNode":function(){define(["dojo/_base/declare",
"MW/rtc/nodes/LeafNode"],function(h,e){return h([e],{constructor:function(){},className:"OpaqueNode",text:"",getTextForPositioning:function(){var e,d="";for(e=0;e<this.maxOffset();e+=1)d+="\ufffc";return d},isTextNode:function(){return!1},isOpaqueNode:function(){return!0},maxOffset:function(){return 1},insertText:function(e){},deleteText:function(e,d){},getStyleAttributes:function(){return{}},canSpliceContainers:function(e,d){return!1},canMergeContainerWithSibling:function(e,d){return!1},_serializeAttributes:function(e){e.text=
this.getText()}})})},"MW/rtc/nodes/inner/RootNode":function(){define(["dojo/_base/declare","MW/rtc/nodes/InnerNode"],function(h,e){return h([e],{constructor:function(e){},className:"RootNode",isRootNode:function(){return!0},CHILD_TEXT_SEPARATOR:"\n",getCodeText:function(){return this.getCodeTextOfChildren()}})})},"MW/rtc/plugins/undoredo/commands/InsertChildrenCommand":function(){define(["dojo/_base/declare","mw-log/Log","MW/rtc/plugins/undoredo/commands/CommandInterface"],function(h,e,g){return h(g,
{constructor:function(d,c,b,a){this._model=d;this._targetNode=c;this._children=b;this._offset=a},execute:function(){var d=this._offset;this._children.forEach(function(c,b){this._targetNode.children.splice(d+b,0,c);c.parent=this._targetNode;c.children&&c.children.forEach(function(a){a.parent||(a.parent=c)})},this)},unexecute:function(){this._targetNode.children.splice(this._offset,this._children.length);this._children.forEach(function(d){d.parent=null},this)}})})},"MW/rtc/plugins/undoredo/commands/CommandInterface":function(){define(["dojo/_base/declare",
"mw-log/Log"],function(h,e){return h(null,{_NODE_IN_MODEL_ERROR:"Node must be in the model.",constructor:function(){},execute:function(){e.assert("Subclasses must override execute.")},unexecute:function(){e.assert("Subclasses must override unexecute.")}})})},"MW/rtc/plugins/undoredo/commands/NodeChangeEventCommand":function(){define(["dojo/_base/declare","mw-log/Log","MW/rtc/model/DocumentConstants","MW/rtc/plugins/undoredo/commands/CommandInterface"],function(h,e,g,d){return h(d,{constructor:function(c,
b,a){this._model=c;this._undoEvent=b;this._redoEvent=a},execute:function(){if(this._redoEvent)this._model.onNodeChange(this._redoEvent)},unexecute:function(){if(this._undoEvent)this._model.onNodeChange(this._undoEvent)}})})},"MW/rtc/plugins/undoredo/commands/RemoveChildrenCommand":function(){define(["dojo/_base/declare","mw-log/Log","MW/rtc/plugins/undoredo/commands/CommandInterface"],function(h,e,g){return h(g,{constructor:function(d,c,b,a){this._model=d;this._targetNode=c;this._offset=b||0;this._count=
a;this._removedNodes=[]},execute:function(){this._removedNodes=this._targetNode.children.splice(this._offset,0<this._count?this._count:this._targetNode.children.length);this._removedNodes.forEach(function(d){d.parent=null},this);return this._removedNodes},unexecute:function(){var d=this._offset;this._removedNodes.forEach(function(c,b){this._targetNode.children.splice(d+b,0,c);c.parent=this._targetNode},this)}})})},"MW/rtc/plugins/undoredo/commands/ReplaceTextCommand":function(){define(["dojo/_base/declare",
"mw-log/Log","MW/rtc/plugins/undoredo/commands/CommandInterface"],function(h,e,g){return h(g,{constructor:function(d,c,b,a,f){this._model=d;this._targetNode=c;this._offset=b;this._length=a;this._text=f;this._replacement=""},execute:function(){this._replacement=this._targetNode.text.substr(this._offset,this._length);this._setText(this._targetNode,this._text,this._length)},unexecute:function(){this._setText(this._targetNode,this._replacement,this._text.length)},_setText:function(d,c,b){d.text=d.text.substr(0,
this._offset)+c+d.text.substr(this._offset+b)}})})},"MW/rtc/plugins/undoredo/commands/UpdateAttributesCommand":function(){define(["dojo/_base/declare","mw-log/Log","MW/rtc/plugins/undoredo/commands/CommandInterface"],function(h,e,g){return h(g,{constructor:function(d,c,b){this._model=d;this._targetNode=c;this._newAttributes=b;this._oldAttributes={}},execute:function(){this._oldAttributes=this._targetNode.updateAttributes(this._newAttributes)},unexecute:function(d){this._targetNode.updateAttributes(this._oldAttributes)}})})},
"MW/rtc/nodes/contentconverter/ContentConverterPluginProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./ContentConverterPlugin"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.nodes.contentconverter.converter"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/nodes/contentconverter/ContentConverterPlugin":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractRecursiveConverterPlugin"],function(h,e){return h(e,
{_classNameToConstructor:null,constructor:function(e){this._initializeRecursiveConverter(e);this._classNameToConstructor={};e.forEach(function(d){d=d.getApplicableNodeClass();this._classNameToConstructor[d.prototype.className]=d},this)},pack:function(e){return this._getConverter(e).pack(e)},unpack:function(e){return this._getConverterByConstructor(this._classNameToConstructor[e.className]).unpack(e)}})})},"MW/rtc/abstract/AbstractRecursiveConverterPlugin":function(){define(["dojo/_base/declare","./AbstractConverterPlugin"],
function(h,e){return h(e,{_initializeRecursiveConverter:function(e){this._createConverterMap(e);this._setAsMainConverter(e)},_setAsMainConverter:function(e){e.forEach(function(d){d.setMainConverter(this)},this)}})})},"MW/rtc/abstract/AbstractConverterPlugin":function(){define(["dojo/_base/declare","MW/rtc/core/NodeMap"],function(h,e){return h(null,{_createConverterMap:function(g){this._nodeMap=new e(g)},_getConverter:function(e){return this._nodeMap.get(e)},_getConverterByConstructor:function(e){return this._nodeMap.getByConstructor(e)}})})},
"MW/rtc/core/NodeMap":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/browsersupport/BrowserSupportUtilities","MW/rtc/browsersupport/PseudoMap","mw-log/Log"],function(h,e,g,d,c){return h(null,{_USE_ES6_MAP:!1,constructor:function(b){this._map=this._USE_ES6_MAP?g.createMap():new d;b.forEach(this.register,this)},register:function(b){this._register(b,!1)},registerOverwrite:function(b){this._register(b,!0)},_register:function(b,a){c.assert(b.getApplicableNodeClass,"MW/rtc/core/NodeMap: Must implement getApplicableNodeClass method");
var f=b.getApplicableNodeClass(),d=f.prototype.className;c.assert(a||!this._map.has(f),"MW/rtc/core/NodeMap: Can only have one mapping for "+d+"; Overwriting");this._map.set(f,b)},forEach:function(b,a){this._map.forEach(b,a)},get:function(b){return this.getByConstructor(b.constructor)},getByConstructor:function(b){for(var a=null;b&&!a;)a=this._map.get(b),b=b.superclass?b.superclass.constructor:null;return a}})})},"MW/rtc/nodes/contentconverter/inner/LineNodeContentConverterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./LineNodeContentConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/nodes/contentconverter/inner/LineNodeContentConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/inner/LineNode","../base/InnerNodeContentConverter"],function(h,e,g){return h(g,{getApplicableNodeClass:function(){return e}})})},"MW/rtc/nodes/contentconverter/base/InnerNodeContentConverter":function(){define(["dojo/_base/declare",
"mw-log/Log","MW/rtc/nodes/InnerNode","./NodeContentConverter"],function(h,e,g,d){return h(d,{getApplicableNodeClass:function(){return g},unpack:function(c){var b=this._unpackChildren(c.children);return new (this.getApplicableNodeClass())(b,c)},_unpackChildren:function(c){return!c?(e.warn("InnerNodeContentConverter: children array was falsy, treating as empty"),[]):c.map(function(b){return this._mainConverter.unpack(b)},this)}})})},"MW/rtc/nodes/contentconverter/base/NodeContentConverter":function(){define(["dojo/_base/declare",
"mw-log/Log","MW/rtc/nodes/Node","./AbstractContentConverter"],function(h,e,g,d){return h(d,{getApplicableNodeClass:function(){return g},pack:function(c){c.serialize()},unpack:function(c){e.error("Unimplemented: unpack")}})})},"MW/rtc/nodes/contentconverter/base/AbstractContentConverter":function(){define(["dojo/_base/declare","mw-log/Log","MW/rtc/abstract/AbstractRecursiveConverter"],function(h,e,g){return h(g,{pack:function(d){e.error("Unimplemented: pack")},unpack:function(d){e.error("Unimplemented: unpack")}})})},
"MW/rtc/abstract/AbstractRecursiveConverter":function(){define(["dojo/_base/declare","./AbstractConverter"],function(h,e){return h(e,{_mainConverter:null,setMainConverter:function(e){this._mainConverter=e}})})},"MW/rtc/abstract/AbstractConverter":function(){define(["dojo/_base/declare"],function(h){return h(null,{getApplicableNodeClass:function(){throw Error("Unimplemented: getApplicableNodeClass");}})})},"MW/rtc/nodes/contentconverter/inner/RootNodeContentConverterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./RootNodeContentConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/nodes/contentconverter/inner/RootNodeContentConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/inner/RootNode","../base/InnerNodeContentConverter"],function(h,e,g){return h(g,{getApplicableNodeClass:function(){return e}})})},"MW/rtc/nodes/contentconverter/leaf/PlainTextNodeContentConverterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./PlainTextNodeContentConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/nodes/contentconverter/leaf/PlainTextNodeContentConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/leaf/PlainTextNode","../base/LeafNodeContentConverter"],function(h,e,g){return h(g,{getApplicableNodeClass:function(){return e}})})},"MW/rtc/nodes/leaf/PlainTextNode":function(){define(["dojo/_base/declare",
"MW/rtc/nodes/leaf/TextProportionalFontNode"],function(h,e){return h(e,{className:"PlainTextNode",getCodeText:function(){return this.getText()}})})},"MW/rtc/nodes/leaf/TextProportionalFontNode":function(){define(["dojo/_base/declare","MW/rtc/nodes/leaf/TextNode"],function(h,e){return h(e,{className:"TextProportionalFontNode",parentTop:function(){return 0},parentLeft:function(){return 0},insertText:function(e,d){void 0===d&&(d=this.text.length);0>d&&(d=this.text.length+d);this.text=this.text.substring(0,
d)+e+this.text.substring(d)},deleteText:function(e,d){e=e||0;void 0===d&&(d=this.text.length);0>e&&(e+=d);this.text=this.text.substring(0,e)+this.text.substring(d)},replaceText:function(e,d,c){d=d||0;void 0===c&&(c=this.text.length);this.deleteText(d,c);this.insertText(e,d)}})})},"MW/rtc/nodes/leaf/TextNode":function(){define("dojo/_base/declare dojo/_base/array dojo/dom-class dojo/dom-style MW/rtc/nodes/LeafNode mw-utils/Utils".split(" "),function(h,e,g,d,c,b){return h(c,{constructor:function(a){this.text=
a.text||"";this.color=a.color||null;a.readOnly&&(this.readOnly=a.readOnly)},className:"TextNode",maxOffset:function(){return this.text.length},isEmpty:function(){return null===this.text||""===this.text},_styleAttributes:["color"],hasStyleAttribute:function(a){return 0<=this._styleAttributes.indexOf(a)},getStyleAttribute:function(a){return this[a]},getStyleAttributes:function(){var a={},f;for(f=0;f<this._styleAttributes.length;f+=1){var b=this._styleAttributes[f];a[b]=this.getStyleAttribute(b)}return a},
setStyleAttributes:function(a){for(var f in a)a.hasOwnProperty(f)&&this.setStyleAttribute(f,a[f])},setStyleAttribute:function(a,f){this.hasStyleAttribute(a)&&(this[a]=f)},compareStyleAttributes:function(a){var f;for(f=0;f<this._styleAttributes.length;f+=1){var b=this._styleAttributes[f];if(this[b]!==a[b]&&(this[b]||a[b]))return!1}return!0},addClass:function(a){this.cssClass||(this.cssClass="");this.cssClass=b.unionOfWordSets(this.cssClass,a,!0)},removeClass:function(a){this.cssClass&&(this.cssClass=
b.differenceOfWordSets(this.cssClass,a,!0),0===this.cssClass.length&&delete this.cssClass)},_serializeAttributes:function(a){a.text=this.text;void 0!==this.color&&null!==this.color&&(a.color=this.color);void 0!==this.cssClass&&null!==this.cssClass&&(a.cssClass=this.cssClass)},isSplittable:function(a){return 0===a||a===this.maxOffset()?!1:!0}})})},"MW/rtc/nodes/contentconverter/base/LeafNodeContentConverter":function(){define(["dojo/_base/declare","mw-log/Log","MW/rtc/nodes/LeafNode","./NodeContentConverter"],
function(h,e,g,d){return h(d,{getApplicableNodeClass:function(){return g},unpack:function(c){return new (this.getApplicableNodeClass())(c)}})})},"MW/rtc/nodes/nodeconversionrules/InnerNodeConversionRulesProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./InnerNodeConversionRules"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/nodes/nodeconversionrules/InnerNodeConversionRules":function(){define(["dojo/_base/declare",
"MW/rtc/nodes/InnerNode","./base/AbstractNodeConversionRules"],function(h,e,g){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return e},isConvertibleTo:function(d){return d.prototype.isInstanceOf(e)},isConvertibleFrom:function(d){return d.isInstanceOf(e)}})})},"MW/rtc/nodes/nodeconversionrules/base/AbstractNodeConversionRules":function(){define(["dojo/_base/declare","mw-log/Log","MW/rtc/abstract/AbstractRecursiveConverter"],function(h,e,g){return h(g,{getApplicableNodeClass:function(){e.error("Unimplemented: getApplicableNodeClass")},
isConvertibleTo:function(d){e.error("Unimplemented: isConvertibleTo")},isConvertibleFrom:function(d){e.error("Unimplemented: isConvertibleFrom")}})})},"MW/rtc/nodes/nodeconversionrules/NodeConversionRulesProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./NodeConversionRules"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/nodes/nodeconversionrules/NodeConversionRules":function(){define(["dojo/_base/declare",
"MW/rtc/nodes/Node","./base/AbstractNodeConversionRules"],function(h,e,g){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return e},isConvertibleTo:function(d){return!1},isConvertibleFrom:function(d){return!1}})})},"MW/rtc/events/KeyHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/events/KeyHandler","MW/rtc/events/MobileKeyHandler"],function(h,e,g,d){return h(e,{requires:function(){return{createInstance:["rtc.document","rtc.actionservice",
"rtc.domnode"]}},createInstance:function(c,b,a){return/Android/.test(navigator.userAgent)?new d:new g(c,b,a)}})})},"MW/rtc/events/KeyHandler":function(){define("dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/aspect dojo/dom-construct dojo/dom-class dojo/has dojo/keys dojo/on mw-log/Log".split(" "),function(h,e,g,d,c,b,a,f,k,l,n,p){return g(null,{constructor:function(d,g,l){this._document=d;this._actionService=g;this._browserCutCopyPasteRequired=!1;this.keyMap=
{};this.dojoKeyNames=this._makeDojoKeyNameMap();this.keyCapture=a.create("textarea",{"class":"keyCapture",value:"",autocapitalize:"off",autocomplete:"off",autocorrect:"off",spellcheck:!1});d=this.keyCapture.style;k("webkit")?d.borderColor="#FFFFFF":(d.border="none",d.borderWidth="0px");k("ios")&&f.add(this.keyCapture,"ios");(k("trident")||k("ie")||k("edge"))&&f.add(this.keyCapture,"ie");this._handlers=[];this._handlers.push(e.connect(this.keyCapture,"onkeypress",c.hitch(this,"onKeyPress")));this._handlers.push(n(this.keyCapture,
"input",c.hitch(this,"handleInput")));this._handlers.push(n(this.keyCapture,"focus",c.hitch(this,"onFocus")));this._handlers.push(n(this.keyCapture,"blur",c.hitch(this,"onBlur")));this._handleChromeMacOnKeyPress();this._handleFFWindowsOnKeyPress();this._handleChromeIEOnKeyPress();this.setDefaultInputHandler();this._addBindingsFromActionService();this._handlers.push(b.after(this._actionService,"addAction",c.hitch(this,"_handleAddAction"),!0));this._handlers.push(b.before(this._actionService,"removeAction",
c.hitch(this,"_handleRemoveAction")));this._handlers.push(b.after(this._actionService,"onActionChange",c.hitch(this,"_handleOnActionChange"),!0));this.place(l)},destroy:function(){this._handlers.forEach(function(a){a.remove()});this._handlers=[]},_handleChromeMacOnKeyPress:function(){k("mac")&&k("chrome")&&this._handlers.push(e.connect(this.keyCapture,"onkeydown",c.hitch(this,"onKeyDown")))},_handleFFWindowsOnKeyPress:function(){k("windows")&&k("ff")&&this._handlers.push(n(this.keyCapture,"keydown",
c.hitch(this,"_keyPressSupportForCtrl")))},_handleChromeIEOnKeyPress:function(){!k("mac")&&!k("ff")&&this._handlers.push(n(this.keyCapture,"keydown",c.hitch(this,"_keyPressSupportForChromeIE")))},_keyPressSupportForChromeIE:function(a){if(!this._inputHandlerIsInInteraction()){if(a.altKey||k("chrome")&&a.ctrlKey&&a.shiftKey){var f=!0;switch(a.keyCode){case 13:a.charOrCode=a.keyCode;break;default:f=!1}}f&&(this.onKeyPress(a),a.preventDefault())}},_keyPressSupportForCtrl:function(a){if(!this._inputHandlerIsInInteraction()&&
a.ctrlKey){var f=!0;switch(a.keyCode){case 35:case 36:a.charOrCode=a.keyCode;break;default:f=!1}f&&(this.onKeyPress(a),a.preventDefault())}},place:function(f){a.place(this.keyCapture,f)},prepareKeyCapture:function(a){this._inputHandlerIsInInteraction()||(a?(this.keyCapture.value="##",this._selectKeyCaptureContent()):(this.keyCapture.value="",window.setTimeout(c.hitch(this,function(){this.hasFocus()&&this._selectKeyCaptureContent()}),0)))},hasFocus:function(){return document.activeElement===this.keyCapture},
blur:function(){this.keyCapture.blur()},focus:function(){this.keyCapture.focus()},onFocus:function(a){k("ie")&&this._selectKeyCaptureContent()},enableBrowserCopyPaste:function(a){this._browserCutCopyPasteRequired=!0;var f=this;Object.keys(a).forEach(function(b){f.listenTo(b,a[b])})},listenTo:function(a,f){this._handlers.push(n(this.keyCapture,a,f))},onBlur:function(a){},_selectKeyCaptureContent:function(){if(this.keyCapture.setSelectionRange)try{this.keyCapture.setSelectionRange(0,this.keyCapture.value.length),
this.hasFocus()||this.focus()}catch(a){}else try{this.keyCapture.select()}catch(f){}},_caretPosInTextarea:function(){return this.keyCapture.value.length},setInputHandler:function(a){this._inputHandler=a},setDefaultInputHandler:function(){this.setInputHandler(this._inputHandlerText)},_inputHandlerIsInInteraction:function(){return this._inputHandler!==this._inputHandlerText},_inputHandlerText:function(a){this.keyCapture.value="";this._document.insertTextAtCurrentPosition(a)},handleInput:function(a){a=
this.keyCapture.value;"##"===a.slice(0,2)?a=a.slice(2):"##"===a.slice(1)&&(a=a.slice(0,1));a&&this._inputHandler(a,this._caretPosInTextarea())},_checkForBrowserCcpShortcuts:function(a){if(k("mac"))switch(a){case "meta_x":case "meta_c":case "meta_v":return this._browserCutCopyPasteRequired;default:return!1}switch(a){case "ctrl_x":case "shift_delete":case "ctrl_c":case "ctrl_insert":case "ctrl_v":case "shift_insert":return this._browserCutCopyPasteRequired;default:return!1}},_handleKeyBindingEvent:function(a,
f,b){f=this._checkForBrowserCcpShortcuts(b)&&this._browserCutCopyPasteRequired?1:f;switch(f){case 0:d.stop(a);break;case 1:break;case 2:a.preventDefault();break;default:p.error("Key event is not handled")}},onKeyPress:function(a){if(!this._inputHandlerIsInInteraction()){var f=this._keyEventID(a),b=this.keyMap[f];if(b&&0<b.length){this._handleKeyBindingEvent(a,0,f);a.target!==this.keyCapture&&this.focus();for(a=0;a<b.length;a+=1)if(!0===b[a]())return}this.setInputHandler(this._inputHandlerText)}},
onKeyDown:function(a){if(!this._inputHandlerIsInInteraction()&&a.metaKey&&!a.ctrlKey){var f=!0;switch(a.keyCode){case 37:case 39:case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 79:case 82:case 83:case 84:case 85:case 86:case 88:case 90:a.charOrCode=String.fromCharCode(a.keyCode).toLowerCase();break;case 13:case 190:case 191:case 219:case 221:case 220:a.charOrCode=a.keyCode;break;case 226:a.charOrCode=191;break;default:f=!1}f&&(this.onKeyPress(a),
f=this._keyEventID(a),this._handleKeyBindingEvent(a,2,f))}},_resolvePlatformKey:function(a,f){var b;if(f)for(b in f)if(f.hasOwnProperty(b)&&k(b))return f[b];return a},addBindings:function(a){h.forEach(a,function(a){this.addBinding(a)},this)},_addBindingsFromActionService:function(){this._actionService.getAllActions().forEach(function(a){(a.key||a.platformKey)&&this.addBinding(a)},this)},_handleAddAction:function(a){(a.key||a.platformKey)&&this.addBinding(a)},_handleRemoveAction:function(a){if((a=
this._actionService.getAction(a))&&a.callback&&a.key){var f=this._resolvePlatformKey(a.key,a.platformKey);f&&this.keyMap[f]&&this._removeKeyCallbackEntry(f,a.callback)}},_removeKeyCallbackEntry:function(a,f){var b=this.keyMap[a].indexOf(f);0<=b&&this.keyMap[a].splice(b,1)},_handleOnActionChange:function(a){var f=this._actionService.getAction(a.id);if("key"===a.key||"platformKey"===a.key)this.keyMap[a.oldValue]&&this._removeKeyCallbackEntry(a.oldValue,f.callback),this.addBinding(f);else if("callback"===
a.key){var b=this._resolvePlatformKey(f.key,f.platformKey);b&&this.keyMap[b]&&(this._removeKeyCallbackEntry(b,a.oldValue),this.keyMap[b].push(f.callback))}},addBinding:function(a){var f=this._resolvePlatformKey(a.key,a.platformKey);if(f){var b=this.keyMap[f]||[],c=a.callback;if(!c)var d=a.action,k=a.args,e=this._actionService,c=function(){var a=e.getAction(d),f=!1;a.enabled&&(f=a.callback.apply(a,k));return f};b.push(c);this.keyMap[f]=b}},removeBindings:function(a){this.keyMap[a]=[]},_keyEventID:function(a){var f=
a.charOrCode,b=a.ctrlKey||a.metaKey||a.altKey;if("string"===typeof f&&!b)return f;k("mac")&&k("matlab")&&(b=a.metaKey,a.metaKey=a.ctrlKey,a.ctrlKey=b);var b=a.ctrlKey?"ctrl_":"",c=a.metaKey?"meta_":"",d=a.altKey?"alt_":"";a=a.shiftKey?"shift_":"";f=this._keyName(f);a&&(f=f.toLowerCase());return b+c+d+a+f},_keyName:function(a){return"string"===typeof a?a:this.dojoKeyNames[a]||"unknown"},_makeDojoKeyNameMap:function(){var a=[];a[l.BACKSPACE]="backspace";a[l.DELETE]="delete";a[l.INSERT]="insert";a[l.ENTER]=
"enter";a[10]="enter";a[l.SHIFT]="shift";a[l.TAB]="tab";a[l.LEFT_ARROW]="left";a[l.RIGHT_ARROW]="right";a[l.UP_ARROW]="up";a[l.DOWN_ARROW]="down";a[l.PAGE_UP]="pageup";a[l.PAGE_DOWN]="pagedown";a[l.HOME]="home";a[l.END]="end";a[l.ESCAPE]="escape";a[l.F1]="f1";a[l.F3]="f3";a[l.F5]="f5";a[l.F7]="f7";a[l.F9]="f9";a[l.F10]="f10";a[l.F11]="f11";a[l.F12]="f12";a[190]=".";a[191]="/";a[219]="[";a[221]="]";a[220]="\\";return a}})})},"MW/rtc/events/MobileKeyHandler":function(){define("dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/aspect dojo/dom-construct dojo/dom-class dojo/has dojo/keys dojo/on".split(" "),
function(h,e,g,d,c,b,a,f,k){return h(null,{constructor:function(){this.keyCapture=c.create("textarea",{"class":"keyCapture",value:""});k(this.keyCapture,"focus",g.hitch(this,"onFocus"));k(this.keyCapture,"blur",g.hitch(this,"onBlur"))},focus:function(){},blur:function(){},onFocus:function(a){},prepareKeyCapture:function(){},listenTo:function(a,f){},onBlur:function(a){},enableBrowserCopyPaste:function(a){},addBindings:function(a){},removeBindings:function(a){}})})},"MW/rtc/hyperlinkservice/HyperlinkServiceProvider":function(){define(["dojo/_base/declare",
"MW/rtc/hyperlinkservice/HyperlinkService","MW/rtc/core/provider/PluginProvider"],function(h,e,g){var d=null,c=0;return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.executionservice"]}},createInstance:function(b){null===d&&(d=new e(b));c+=1;return d},destroyInstance:function(){c-=1;1>c&&(d.destroy(),d=null)}})})},"MW/rtc/hyperlinkservice/HyperlinkService":function(){define(["dojo/on","dojo/mouse","dojo/_base/declare","dojo/_base/lang","mw-log/Log"],
function(h,e,g,d,c){return g(null,{_MATLAB_PROTOCOL:"matlab:",_SCHEME_REG_EXPRESSION:"^(http|https|ftp)://$",constructor:function(b){this._executionService=b;this._hyperlinkhandler=this._attachHandlerForAllHyperlinks()},_isMatlabUrl:function(b){return b.substring(0,7)===this._MATLAB_PROTOCOL},_openUrlWithExecutionService:function(b){b=b.replace(/'/g,"''");b="web('"+b+"')";return this._executionService.streamingEval?(this._executionService.executionEval(b,this._executionService.streamingEval),!0):
this._executionService.isMessageServiceRunning&&this._executionService.isMessageServiceRunning()?(this._executionService.executionEval(b),!0):!1},_handleHyperlink:function(b,a){if(e.isMiddle(a)||e.isRight(a))a.stopPropagation(),a.preventDefault();else{var f=a.selectorTarget||a.srcElement||a.originalTarget;"A"===f.tagName&&b.call(this,f.getAttribute("href"))&&(a.stopPropagation(),a.preventDefault())}},_addEventListener:function(b,a){return h(b,".rteWindow a:click, .rteWindow a:auxclick, .rtcTooltip a:click, .rtcTooltip a:auxclick",
d.hitch(this,"_handleHyperlink",a),!0)},_addEventListenerForScope:function(b,a){return h(b,"click",d.hitch(this,"_handleHyperlink",a),!0)},openUrl:function(b){!this._openUrlWithExecutionService(b)&&-1===b.search(RegExp(this._SCHEME_REG_EXPRESSION,"i"))&&window.open(b,"_blank");return!0},_attachHandlerForAllHyperlinks:function(){return this._addEventListener(document,this.openUrl)},destroy:function(){this._hyperlinkhandler&&this._hyperlinkhandler.destroy&&this._hyperlinkhandler.destroy()}})})},"MW/rtc/plugins/internalhyperlinkservice/InternalHyperlinkServiceProvider":function(){define(["dojo/_base/declare",
"./InternalHyperlinkService","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:"rtc.hyperlinkservice rtc.domnode rtc.internaldocument rtc.cursor rtc.view rtc.actionservice".split(" ")}},createInstance:function(d,c,b,a,f,k){return new e(c,b,a,f,k,d)}})})},"MW/rtc/plugins/internalhyperlinkservice/InternalHyperlinkService":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/model/DocumentUtilities",
"MW/rtc/plugins/hyperlink/model/HyperlinkUtilities","MW/rtc/RichTextComponentFeatureEnum"],function(h,e,g,d,c){return h(null,{constructor:function(b,a,f,c,d,e){this._internalDocument=a;this._cursor=f;this._view=c;this._rtcDomNode=b;this._hyperlinkService=e;this._backwardStack=[];this._forwardStack=[];this._currentNode;d.loadActions(this._actions())},_actions:function(){return[{id:c.HYPERLINK.HYPERLINK_SERVICE_BACKWARD_ACTION,key:"alt_left",platformKey:{mac:"ctrl_alt_left"},enabled:!0,callback:e.hitch(this,
this._prefBookmark)},{id:c.HYPERLINK.HYPERLINK_SERVICE_FORWARD_ACTION,key:"alt_right",platformKey:{mac:"ctrl_alt_right"},enabled:!0,callback:e.hitch(this,this._nextBookmark)}]},_nextBookmark:function(){var b=this._forwardStack.pop();g.isInDocument(b)&&b!==this._currentNode&&(this._backwardStack.push(this._currentNode),this._cursor.setPosition(b.lastChild(),0,!0),0<b.maxOffset()&&this._view.scrollNodeToPercent(b.rootContainer(),0),this._currentNode=b)},_prefBookmark:function(){var b=this._backwardStack.pop();
g.isInDocument(b)&&b!==this._currentNode&&(this._forwardStack.push(this._currentNode),this._cursor.setPosition(b.lastChild(),0,!0),0<b.maxOffset()&&this._view.scrollNodeToPercent(b.rootContainer(),0),this._currentNode=b)},_isInternalUrl:function(b){return 0===b.indexOf(d.INTERNAL)},_openInternalHyperlink:function(b){if(b=d.getNodeForInternalUrl(this._internalDocument.root,b))this._currentNode=this._cursor.getNode().textContainer(),this._backwardStack.push(this._currentNode),this._forwardStack=[],
this._cursor.setPosition(b,0),this._view.scrollNodeToPercent(b.rootContainer(),0),this._currentNode=b;return!0},openUrl:function(b){return this._isInternalUrl(b)?this._openInternalHyperlink(b):this._hyperlinkService.openUrl(b)}})})},"MW/rtc/plugins/hyperlink/model/HyperlinkUtilities":function(){define(["MW/rtc/model/CodeUtilities"],function(h){return{INTERNAL:"internal:",URL_EXPRESSION:"(((\\S+):\\/\\/|(\\S+):(?!\\/)+|#)(\\S+).*)|(\\S+\\.\\S+)",_nextContainer:function(e){if(e.isTextContainerNode()||
e.isRootContainer()){var g=e.firstChild();return g&&g.isTextContainerNode()||(g=e.nextSibling())?g:e.parent.isRootNode()?null:(e=e.parent.nextSibling())?e:null}},getNodeForInternalUrl:function(e,g){if(0===g.indexOf(this.INTERNAL))for(var d=g.substring(this.INTERNAL.length),c=e.children[0];c;){if(c.anchorId&&c.anchorId===d)return c;c=this._nextContainer(c)}return null},getPossibleTarget:function(e){if(h.isCodeContainer(e))for(var g=e.previousSibling();h.isCodeContainer(g);)e=g,g=e.previousSibling();
return e},isHyperlinkValid:function(e){return e&&e.match(this.URL_EXPRESSION)?!0:!1}}})},"MW/rtc/model/io/serializers/providers/containers/TableOfContentsContainerSerializerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/containers/TableOfContentsContainerSerializer"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/model/io/serializers/containers/TableOfContentsContainerSerializer":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/model/io/XmlUtils","MW/rtc/model/io/DocumentTag","MW/rtc/model/io/serializers/containers/ContainerSerializer"],function(h,e,g,d,c){return h(c,{_INTRODUCED_VERSION:"R2018a",write:function(b,a,f){var c=document.createElement(this.getNodeType()),e=g.createXMLElement(d.SDT_TAG),n=g.createXMLElement(d.SDT_PROPERTY_TAG),n=g.createSdtPartGalleryPropertyElement(n,this.getXMLType());e.appendChild(n);var h=g.createXMLElement(d.SDT_CONTENT_TAG);e.appendChild(h);b[0].anchorId&&(n=g.createBookmarkStart(d.BOOKMARK_PREFIX+
b[0].anchorId,b[0].anchorId),e.appendChild(n));b[0].children&&b[0].children.forEach(function(b){b=f.getSerializer(b.className).write(b,a,f);h.appendChild(b)},this);b[0].anchorId&&(b=g.createBookmarkEnd(b[0].anchorId),e.appendChild(b));c.appendChild(e);b=g.createTextParagraph("");e=g.createAlternateContent(this._INTRODUCED_VERSION,e,b);c.appendChild(e);return c},read:function(b,a,f){var c=!0,l={className:this.getNodeType(),children:[]},n;2<b.childNodes.length?(n=Array.prototype.slice.call(b.childNodes).reduce(e.partial(this._reduceByNodeType,
f),[]),n=n.map(function(a){return this._combineParagraphs(a)},this)):n=b.childNodes;for(var h=0;h<n.length;h++){var m=n[h].getElementsByTagNameNS(d.NAMESPACE_URL,d.PARAGRAPH_STYLE_TAG_NAME)[0],q=f.getSerializer(g.getClassName(m)),r={};q&&(r=q.read(n[h],a,f),r.readObject.className=g.getClassName(m),l.children.push(r.readObject),r.readStatus||(c=!1));if((m=g.getBookmarkStart(b.parentElement))&&m.id)l.anchorId=m.id}return{readObject:[l],readStatus:c}},_reduceByNodeType:function(b,a,f){b.getSerializer(g.getAttribute(f));
(b=a[a.length-1])&&g.getAttribute(b[0])===g.getAttribute(f)?b.push(f):a.push([f]);return a},_combineParagraphs:function(b){for(var a=b[0],f=1;f<b.length;f++){for(var c=a.lastElementChild;c.lastElementChild;)c=c.lastElementChild;for(c.textContent+="\n";1<b[f].children.length;)a.appendChild(b[f].children[1])}return a},getXMLType:function(){return"Table of Contents"},getNodeType:function(){return"TableOfContentsContainer"}})})},"MW/rtc/model/io/XmlUtils":function(){define(["MW/rtc/model/io/DocumentTag",
"MW/rtc/plugins/saveaspdf/utils/XSLConstants"],function(h,e){return{createDocument:function(e){var d;document.implementation&&document.implementation.createDocument&&(d=e===h.ROOT_TAG_NAME?document.implementation.createDocument(h.NAMESPACE_URL,h.NAMESPACE_TAG+":"+h.ROOT_TAG_NAME,null):document.implementation.createDocument(null,e,null));return d},createAlternateContent:function(e,d,c){var b=this.createAlternateContentXMLElementNS(h.MCNAMESPACE_TAG,h.ALTERNATECONTENT_TAG),a=this.createAlternateContentXMLElementNS(h.MCNAMESPACE_TAG,
h.CHOICE_TAG);a.setAttribute(h.REQUIRES_ATTRIBUTE_NAME,e);a.appendChild(d);b.appendChild(a);e=this.createAlternateContentXMLElementNS(h.MCNAMESPACE_TAG,h.FALLBACK_TAG);c&&e.appendChild(c);b.appendChild(e);return b},createAlternateContentXMLElementNS:function(e,d){return document.createElementNS(h.MARKUP_COMPATIBILITY_NAMESPACE,e+":"+d)},createXMLElement:function(e){e=!e?h.PARAGRAPH_TAG_NAME:e;e=h.NAMESPACE_TAG+":"+e;return document.createElementNS(h.NAMESPACE_URL,e)},createXMLElementNS:function(e,
d){e=e||h.NAMESPACE_TAG;d=!d?h.PARAGRAPH_TAG_NAME:d;return document.createElementNS(h.NAMESPACE_URL,e+":"+d)},createBookmarkStart:function(e,d){var c=this.createXMLElement(h.BOOKMARK_START_TAG_NAME);c.setAttributeNS(h.NAMESPACE_URL,h.NAMESPACE_TAG+":"+h.NAME_TAG,e);c.setAttributeNS(h.NAMESPACE_URL,h.NAMESPACE_TAG+":"+h.TYPE_ID_TAG,d);return c},createBookmarkEnd:function(e){var d=this.createXMLElement(h.BOOKMARK_END_TAG_NAME);d.setAttributeNS(h.NAMESPACE_URL,h.NAMESPACE_TAG+":"+h.TYPE_ID_TAG,e);return d},
createParagraphProperty:function(e){var d=this.createXMLElement(h.PARAGRAPH_PROPERTY_TAG_NAME),c=this.createXMLElement(h.PARAGRAPH_STYLE_TAG_NAME);c.setAttributeNS(h.NAMESPACE_URL,h.NAMESPACE_TAG+":"+h.PROPERTY_TAG,e);d.appendChild(c);return d},addParagraphProperty:function(e,d,c){d=this.createXMLElement(d);d.setAttributeNS(h.NAMESPACE_URL,h.NAMESPACE_TAG+":"+h.PROPERTY_TAG,c);e.appendChild(d);return e},createListType:function(e){var d=this.createXMLElement(h.NUMBER_PROPERTY_TAG),c=this.createXMLElement(h.NUMBER_ID_TAG);
c.setAttributeNS(h.NAMESPACE_URL,h.NAMESPACE_TAG+":"+h.PROPERTY_TAG,e);d.appendChild(c);return d},createTextParagraph:function(e){e=e||"";var d=this.createXMLElement(),c=this.createParagraphProperty(h.TEXT_FORMAT_VALUE);d.appendChild(c);c=this.createXMLElement(h.RUN_OF_TEXT_TAG_NAME);d.appendChild(c);var b=this.createXMLElement(h.TEXT_TAG_NAME);e=document.createTextNode(e);b.appendChild(e);c.appendChild(b);return d},createHyperLinkTag:function(e,d){var c=this.createXMLElement(h.HYPERLINK_TAG);c.setAttributeNS(h.NAMESPACE_URL,
h.NAMESPACE_TAG+":"+d,e);return c},createCustomXMLTag:function(e){var d=this.createXMLElement(h.CUSTOM_XML_TAG);d.setAttributeNS(h.NAMESPACE_URL,h.NAMESPACE_TAG+":"+h.CUSTOM_ELEMENT_TAG,e);return d},createCustomXMLProperty:function(e,d){var c=this.createXMLElement(h.CUSTOM_XML_PROPERTY),b=this.createXMLElement(h.CUSTOM_XML_ATTRIBUTE);b.setAttributeNS(h.NAMESPACE_URL,h.NAMESPACE_TAG+":"+h.NAME_TAG,e);b.setAttributeNS(h.NAMESPACE_URL,h.NAMESPACE_TAG+":"+h.CUSTOM_XML_VALUE_TAG,d);c.appendChild(b);return c},
createCustomXMLAttribute:function(e,d){var c=this.createXMLElement(h.CUSTOM_XML_ATTRIBUTE);c.setAttributeNS(h.NAMESPACE_URL,h.NAMESPACE_TAG+":"+h.NAME_TAG,e);c.setAttributeNS(h.NAMESPACE_URL,h.NAMESPACE_TAG+":"+h.CUSTOM_XML_VALUE_TAG,d);return c},getBookmarkStart:function(e){e=e.getElementsByTagNameNS(h.NAMESPACE_URL,h.BOOKMARK_START_TAG_NAME);if(e[0]&&e[0].attributes[0]){var d={};d.name=e[0].attributes[0].nodeValue;d.id=e[0].attributes[1].nodeValue;return d}},getBookmarkEnd:function(e){e=e.getElementsByTagNameNS(h.NAMESPACE_URL,
h.BOOKMARK_END_TAG_NAME);if(e[0]&&e[0].attributes[0])return e[0].attributes[0].nodeValue},getListType:function(e){return e.getElementsByTagNameNS(h.NAMESPACE_URL,h.NUMBER_PROPERTY_TAG)[0].getElementsByTagNameNS(h.NAMESPACE_URL,h.NUMBER_ID_TAG)[0].attributes[0].nodeValue},getParagraphProperty:function(e,d){var c=e.getElementsByTagNameNS(h.NAMESPACE_URL,d);return c&&c[0]&&c[0].attributes&&c[0].attributes[0]?c[0].attributes[0].nodeValue:""},getAttribute:function(e){var d=e.getElementsByTagNameNS(h.NAMESPACE_URL,
h.PARAGRAPH_PROPERTY_TAG_NAME);return d&&d[0]?(d=d[0].getElementsByTagNameNS(h.NAMESPACE_URL,h.PARAGRAPH_STYLE_TAG_NAME),d[0]?d[0].attributes[0].nodeValue:this.hasSectionBreak(e)?"sectionbreak":!1):!1},createSdtAliasPropertyElement:function(e,d){var c=this.createXMLElement(h.ALIAS_TAG);c.setAttributeNS(h.NAMESPACE_URL,h.NAMESPACE_TAG+":"+h.PROPERTY_TAG,d);e.appendChild(c);return e},createSdtPartGalleryPropertyElement:function(e,d){var c=this.createXMLElement(h.DOC_PART_OBJ),b=this.createXMLElement(h.DOC_PART_GALLERY);
c.appendChild(b);b.setAttributeNS(h.NAMESPACE_URL,h.NAMESPACE_TAG+":"+h.PROPERTY_TAG,d);e.appendChild(c);return e},getSdtAttribute:function(e){if(e=e.getElementsByTagNameNS(h.NAMESPACE_URL,h.SDT_PROPERTY_TAG))for(var d=0;d<e.length;d++){var c=e[d].getElementsByTagNameNS(h.NAMESPACE_URL,h.ALIAS_TAG);if(c&&c[0]&&c[0].attributes&&0<c[0].attributes.length||e[d].getElementsByTagNameNS(h.NAMESPACE_URL,h.DOC_PART_OBJ)&&(c=e[d].getElementsByTagNameNS(h.NAMESPACE_URL,h.DOC_PART_GALLERY))&&c[0]&&c[0].attributes&&
0<c[0].attributes.length)return c[0].attributes[0].nodeValue}return null},hasHyperLink:function(e){return e.hasAttributeNS(h.NAMESPACE_URL,h.DOC_LOCATION)||e.hasAttributeNS(h.NAMESPACE_URL,h.ANCHOR)},hasEquation:function(e){if(e=e.attributes[0])return"equation"===e.textContent},hasImage:function(e){if(e=e.attributes[0])return"image"===e.textContent},hasLiveControl:function(e){if(e=e.attributes[0])return"livecontrol"===e.textContent},hasToCHeading:function(e){if(e.attributes&&e.attributes[0])return"TOCHeading"===
e.attributes[0].textContent},hasToCItems:function(e){if(e.attributes&&e.attributes[0])return"TOC1"===e.attributes[0].textContent},hasSectionBreak:function(e){return 1===e.getElementsByTagNameNS(h.NAMESPACE_URL,h.SECTION_PROPERTY_TAG_NAME).length},getClassName:function(e){if(this.hasHyperLink(e))return"HyperlinkNode";if(this.hasEquation(e))return"EquationNode";if(this.hasText(e))return"RichTextNode";if(this.hasImage(e))return"ImageNode";if(this.hasLiveControl(e))return"LiveControlNode";if(this.hasSectionBreak(e))return"SectionBreak";
if(this.hasToCHeading(e))return"TableOfContentsHeadingNode";if(this.hasToCItems(e))return"TableOfContentsList"},hasText:function(e){return 0===e.getElementsByTagNameNS(h.NAMESPACE_URL,h.TEXT_TAG_NAME).length?!1:!0},getKeyFromValue:function(e,d){for(var c in e)if(e.hasOwnProperty(c))if("[object Array]"===Object.prototype.toString.call(e[c].type)){if(-1!==e[c].type.indexOf(d))return c}else if(e[c].type===d||e[c]===d)return c},getURLExtension:function(e){var d="";e.match(/^(http|https):\/\//)&&(d=e.split(".").pop().split(/\#|\?/)[0].trim());
return d},getImageExtension:function(e){var d=this.getURLExtension(e);d||(d=e.split(";")[0].split("/")[1]);return d},getTextFromRun:function(e){e=e.getElementsByTagNameNS(h.NAMESPACE_URL,h.TEXT_TAG_NAME);var d="";if(0===e.length)return d;for(var c=0;c<e[0].childNodes.length;c++)d+=e[0].childNodes[c].nodeValue;return d},isCode:function(g){return-1<g.className.indexOf(e.LINENODE_CLASS)},serializeToFormattedString:function(e){e=(new window.XMLSerializer).serializeToString(e);return h.XML_HEADER+e}}})},
"MW/rtc/model/io/DocumentTag":function(){define([],function(){return{XML_HEADER:'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e',NAMESPACE_URL:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",RELATIONSHIP_TYPE:"http://schemas.mathworks.com/matlab/code/2013/relationships/document",IMAGE_RELATIONSHIP_TYPE:"http://schemas.mathworks.com/matlab/code/2013/relationships/image",MATHML_RELATIONSHIP_TYPE:"http://www.w3.org/TR/MathML2/",DOCUMENT_TARGET:"/matlab/document.xml",DOCUMENT_CONTENT_TYPE:"application/vnd.mathworks.matlab.code.document+xml",
NAMESPACE_TAG:"w",SCHEMA_TAG:"xmlns",ROOT_TAG_NAME:"document",BODY_TAG_NAME:"body",TYPE_TAG:"Type",TYPE_ID_TAG:"id",NUMBER_TAG:"num",NUMBER_PROPERTY_TAG:"numPr",NUMBER_ID_TAG:"numId",PARAGRAPH_TAG_NAME:"p",PARAGRAPH_PROPERTY_TAG_NAME:"pPr",PROPERTY_TAG:"val",PARAGRAPH_STYLE_TAG_NAME:"pStyle",JUSTIFCATION_TAG_NAME:"jc",RUN_OF_TEXT_TAG_NAME:"r",RUN_OF_TEXT_PROPERTY_TAG_NAME:"rPr",BOOKMARK_PREFIX:"MW_",BOOKMARK_START_TAG_NAME:"bookmarkStart",BOOKMARK_END_TAG_NAME:"bookmarkEnd",TEXT_TAG_NAME:"t",BOLD_TAG_NAME:"b",
ITALIC_TAG_NAME:"i",UNDERLINE_TAG_NAME:"u",RUN_OF_FONT:"rFonts",FONT_TYPE_TAG:"cs",MONOSPACE_TAG:"monospace",CODE_FORMAT_VALUE:"code",TEXT_FORMAT_VALUE:"text",TITLE_FORMAT_VALUE:"title",HEADING_FORMAT_VALUE:"heading",HEADING2_FORMAT_VALUE:"heading2",HEADING3_FORMAT_VALUE:"heading3",LIST_FORMAT_VALUE:"ListParagraph",UNORDERED_LIST_VALUE:"1",ORDERED_LIST_VALUE:"2",RELATIONSHIP_ID_TAG_NAME:"relationshipId",HEIGHT_ATTRIBUTE_NAME:"height",WIDTH_ATTRIBUTE_NAME:"width",SECTION_PROPERTY_TAG_NAME:"sectPr",
HYPERLINK_FORMAT_VALUE:"hyperlink",HYPERLINK_ID:"r:id",HYPERLINK_TAG:"hyperlink",DOC_LOCATION:"docLocation",ANCHOR:"anchor",CUSTOM_XML_TAG:"customXml",CUSTOM_ELEMENT_TAG:"element",NAME_TAG:"name",EQUATION_ELEMENT:"equation",CUSTOM_XML_PROPERTY:"customXmlPr",CUSTOM_XML_ATTRIBUTE:"attr",CUSTOM_XML_VALUE_TAG:"val",EQUATION_DISPLAY_STYLE:"displayStyle",MCNAMESPACE_TAG:"mc",ALTERNATECONTENT_TAG:"AlternateContent",CHOICE_TAG:"Choice",REQUIRES_ATTRIBUTE_NAME:"Requires",FALLBACK_TAG:"Fallback",LIVE_CONTROL_CONTEXT_ATTRIBUTE_NAME:"context",
LIVE_CONTROL_START_OFFSET_LINE_ATTRIBUTE_NAME:"startOffsetLine",LIVE_CONTROL_START_COLUMN_ATTRIBUTE_NAME:"startColumn",LIVE_CONTROL_END_OFFSET_LINE_ATTRIBUTE_NAME:"endOffsetLine",LIVE_CONTROL_END_COLUMN_ATTRIBUTE_NAME:"endColumn",LIVE_CONTROL_TEXT_ATTRIBUTE_NAME:"text",SDT_TAG:"sdt",SDT_CONTENT_TAG:"sdtContent",SDT_PROPERTY_TAG:"sdtPr",DOC_PART_OBJ:"docPartObj",DOC_PART_GALLERY:"docPartGallery",ALIAS_TAG:"alias",MARKUP_COMPATIBILITY_NAMESPACE:"http://schemas.openxmlformats.org/markup-compatibility/2006"}})},
"MW/rtc/plugins/saveaspdf/utils/XSLConstants":function(){define({UNORDERED_LIST:"unordered",ORDERED_LIST:"ordered",PARAGRAPH:"paragraph",LIST:"list",MATRIX:"matrix",VARIABLES:"variables",VARIABLE_STRING:"variablestring",INTERACTIVE_VARIABLE:"interactivevariable",FIGURES:"figures",TEXT:"text",WARNING_ERROR:"warningerror",BASE_DOCUMENT:"basedocument",HYPERLINK:"hyperlink",IMAGE:"image",LIVE_CONTROL:"livecontrol",EQUATION:"equation",TABLEOFCONTENT:"tableOfContent",SYMEQUATION:"symequation",OUTPUT:"output",
BASE_FONT:"Arial,MingLiU,STSong,MS Mincho,AppleGothic,Malgun Gothic,Noto Sans CJK,Droid Sans Fallback,Arial Unicode MS",SQUARE_LIST_LABEL:"\u2022",NBSP:"\u00a0",LINENODE_CLASS:"lineNode",INLINE_WRAPPER_CLASS:"inlineWrapper",TITLE_CLASS:"heading-1",HEADING1_CLASS:"heading-2",HEADING2_CLASS:"heading-3",HEADING3_CLASS:"heading-4",PARAGRAPH_CLASS:"paragraphNode",LIST_CLASS:"RTClistNode",CODE_EXAMPLE_CLASS:"CodeExampleLine",HYPERLINK_CLASS:"hyperlinkNode",IMAGE_CLASS:"imageNode",LIVE_CONTROL_CLASS:"liveControlOuterNode",
EQUATIONNODE_CLASS:"equationNode",TABLEOFCONTENT_CLASS:"ToC",OUTPUT_CLASS:"outputParagraph",MATRIX_CLASS:"embeddedOutputsMatrixElement",INTERACTIVE_MATRIX_CLASS:"embeddedOutputsVariableMatrixElement",VARIABLES_CLASS:"embeddedOutputsVariableElement",VARIABLE_STRING_CLASS:"embeddedOutputsVariableStringElement",FIGURES_CLASS:"embeddedOutputsFigure",SYMEQUATION_CLASS:"embeddedOutputsSymbolicElement",SECTIONBREAK_CLASS:"sectionBreak",SECTIONBLOCK_CLASS:"SectionBlock",TEXT_CLASS:"embeddedOutputsTextElement",
WARNING_CLASS:"embeddedOutputsWarningElement",ERROR_CLASS:"embeddedOutputsErrorElement",UNORDERED_LIST_NODENAME:"UL",ORDERED_LIST_NODENAME:"OL",BLOCK_CLASS_SUFFIX:"Block",TABLE:"table",TABLE_HEADER:"table-header",TABLE_COLUMN:"table-column",TABLE_ROW:"table-row",TABLE_DATA:"table-data",INTERACTIVE_VARIABLE_CLASS:"embeddedOutputsVariableTableElement",EQUATION_CLASS:"MathEquation",INTERNAL_LINK_PREFIX:"internal:",DOTS:"dots",POINT_UNIT:"pt",REGEX_FOR_PX:/px/g,FONT_SCALING_FACTOR:0.75,AVAILABLE_WIDTH:525,
ELLIPSIS_WIDTH:32,CHAR_WIDTH:7.22})},"MW/rtc/model/io/serializers/containers/ContainerSerializer":function(){define(["dojo/_base/declare","dojo/_base/lang","mw-utils/Utils","MW/rtc/model/io/XmlUtils","MW/rtc/model/io/serializers/Serializable"],function(h,e,g,d,c){return h(c,{read:function(b,a,f){var c=!0,d=[],e;Array.isArray(b)?b.forEach(function(b){e=this._readParagraph(b,a,f);d.push(e.readObject)},this):(e=this._readParagraph(b,a,f),d=e.readObject);c=c&&e.readStatus;return{readObject:d,readStatus:c}},
_readParagraph:function(b,a,f){for(var c=!0,e={className:this.getNodeType(),children:[]},g=0;g<b.childNodes.length;g++){var h=f.getSerializer(d.getClassName(b.childNodes[g])),m={};if(h&&(m=h.read(b.childNodes[g],a,f),e.children.push(m.readObject),m.readStatus||(c=!1),(h=d.getBookmarkStart(b))&&h.id))e.anchorId=h.id}return{readObject:e,readStatus:c}},mustMerge:function(){return!1}})})},"MW/rtc/model/io/serializers/Serializable":function(){define(["dojo/_base/declare"],function(h){return h(null,{write:function(e,
g){throw Error("Unimplemented Write Method in the handler for node type: "+this.getNodeType());},read:function(e,g){throw Error("Unimplemented Read Method in the handler for node type: "+this.getNodeType());},getXMLType:function(){throw Error("Unimplemented getXMLType Method: handler.getXMLType()");},getNodeType:function(){throw Error("Unimplemented getNodeType Method: handler.getNodeType()");}})})},"MW/rtc/model/io/serializers/providers/containers/TableOfContentsHeadingSerializerProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/containers/TableOfContentsHeadingSerializer"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/model/io/serializers/containers/TableOfContentsHeadingSerializer":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/model/io/XmlUtils","MW/rtc/model/io/serializers/containers/RichTextContainerSerializer"],function(h,e,g,d){return h(d,{write:function(c,
b,a){return this._writeParagraph(c,b,a)},read:function(c,b,a){return this._readParagraph(c,b,a)},getNodeType:function(){return"TableOfContentsHeadingNode"},getXMLType:function(){return"TOCHeading"}})})},"MW/rtc/model/io/serializers/containers/RichTextContainerSerializer":function(){define("dojo/_base/declare dojo/_base/lang mw-utils/Utils MW/rtc/model/io/DocumentTag MW/rtc/model/io/XmlUtils MW/rtc/model/io/serializers/containers/ContainerSerializer mw-log/Log".split(" "),function(h,e,g,d,c,b,a){return h(b,
{_ALIGN_CENTER:"center",_ALIGN_LEFT:"left",_RICH_TEXT_CLASS:"RichTextNode",write:function(a,b,c){var d=document.createElement(this.getXMLType());if(Array.isArray(a)){var e=this;a.forEach(function(a){e._createAndAppendParagraph(a,d,b,c)},this)}else this._createAndAppendParagraph(a,d);return d},_createAndAppendParagraph:function(a,b,c,d){(a=this._writeParagraph(a,c,d))&&b.appendChild(a)},_writeParagraph:function(f,b,e){var g=c.createXMLElement(),h=c.createParagraphProperty(this.getXMLType()),h=c.addParagraphProperty(h,
d.JUSTIFCATION_TAG_NAME,f.align);g.appendChild(h);f.anchorId&&(h=c.createBookmarkStart(d.BOOKMARK_PREFIX+f.anchorId,f.anchorId),g.appendChild(h));var m=!1;f.children.forEach(function(f){var c=e.getSerializer(f.className);c?g.appendChild(c.write(f,b,e)):(m=!0,a.assert(m,!0,"Unrecognized node type:"+f.className))},this);f.anchorId&&(f=c.createBookmarkEnd(f.anchorId),g.appendChild(f));m&&1===g.children.length&&(g=null);return g},read:function(a,b,e){var g=c.getParagraphProperty(a[0],d.JUSTIFCATION_TAG_NAME),
h=this.inherited(arguments);this._createAlignment(a,h.readObject,g,e);return h},_createAlignment:function(a,b,c,d){b.forEach(function(b){c?b.align=c:this._shouldBeCentered(a,b,d)?b.align=this._ALIGN_CENTER:b.align=this._ALIGN_LEFT},this)},_shouldBeCentered:function(a,b,c){a=!1;for(var d=b.children[0]?b.children[0].className:"",e=0;e<b.children.length;e+=1){var g=b.children[e],h=c.getSerializer(b.children[e].className).AUTO_CENTER_CLASS?!0:!1;if(g.className!==this._RICH_TEXT_CLASS&&d!==g.className&&
d!==this._RICH_TEXT_CLASS)return!1;if(h)a=h;else if(g.text&&0<g.text.trim().length)return!1}return a},getXMLType:function(){return"text"},getNodeType:function(){return"RichTextParagraphNode"},mustMerge:function(a,b){return c.getParagraphProperty(a,d.JUSTIFCATION_TAG_NAME)===c.getParagraphProperty(b,d.JUSTIFCATION_TAG_NAME)}})})},"MW/rtc/model/io/serializers/providers/containers/TableOfContentsListSerializerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/containers/TableOfContentsListSerializer"],
function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/model/io/serializers/containers/TableOfContentsListSerializer":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/model/io/XmlUtils","MW/rtc/model/io/serializers/containers/RichTextContainerSerializer"],function(h,e,g,d){return h(d,{write:function(c,b,a){return this._writeParagraph(c,b,a)},read:function(c,b,a){return this._readParagraph(c,b,a)},getNodeType:function(){return"TableOfContentsList"},
getXMLType:function(){return"TOC1"}})})},"MW/rtc/plugins/internalhyperlinkservice/AnchorProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./Anchor"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/internalhyperlinkservice/Anchor":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin","MW/rtc/plugins/richtext/nodes/inner/HeadingNode",
"./model/AnchorGenerator"],function(h,e,g,d){return h(e,{_HEADER_PREFIX:"H_",_TITLE_PREFIX:"T_",constructor:function(c){this._internalDocument=c;this._tempAnchorIdRegister={}},createAnchor:function(c,b){var a="";!b&&c.isInstanceOf(g)&&(a=1===c.level?this._TITLE_PREFIX:this._HEADER_PREFIX);for(var f=d.createAnchorId(a);this._tempAnchorIdRegister[f];)f=d.createAnchorId(a);this._tempAnchorIdRegister[f]=c;return c.anchorId=f},_updateAnchorIdRegister:function(){this._internalDocument.root.children.forEach(function(c){var b=
c.anchorId;b&&!this._tempAnchorIdRegister[b]&&(this._tempAnchorIdRegister[b]=c)},this)},createHeadingIds:function(){var c=[];this._internalDocument.root.children.forEach(function(b){b.isInstanceOf(g)&&b.level&&(this.createNodeId(b),c[c.length]=b)},this);return c},createNodeId:function(c){var b=!c.isInstanceOf(g);this._updateAnchorIdRegister();c.anchorId&&!this._tempAnchorIdRegister[c.anchorId]&&(this._tempAnchorIdRegister[c.anchorId]=c);return this._tempAnchorIdRegister[c.anchorId]===c?c.anchorId:
this.createAnchor(c,b)}})})},"MW/rtc/plugins/richtext/nodes/inner/HeadingNode":function(){define(["dojo/_base/declare","MW/rtc/plugins/richtext/HeadingUtilities","MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNode"],function(h,e,g){return h([g],{constructor:function(d,c){this.level=c&&c.level?c.level:e.getLevelByHeadingFormat(e.getDefaultHeadingFormat())},className:"HeadingNode",containerType:function(){return e.getHeadingFormatByLevel(this.level)},isSameTypeAs:function(d){return this.className===
d.className&&this.level===d.level},canSpliceContainers:function(d,c){return d.level===c.level},isTextContainerNode:function(){return!0},_serializeAttributes:function(d){this.inherited(arguments);d.level=this.level}})})},"MW/rtc/plugins/richtext/HeadingUtilities":function(){define(["MW/rtc/plugins/richtext/ParagraphFormatsEnum"],function(h){return{_NODE_CLASS:"HeadingNode",_headingLevelLookup:{1:{format:h.TITLE,equationHeight:26},2:{format:h.HEADING1,equationHeight:22},3:{format:h.HEADING2,equationHeight:19},
4:{format:h.HEADING3,equationHeight:17}},_defaultFormat:h.HEADING1,_versionedFormats:{R2016a:[h.TITLE,h.HEADING1],R2018b:[h.HEADING2,h.HEADING3]},getDefaultHeadingFormat:function(){return this._defaultFormat},isHeadingNode:function(e){return e.className===this._NODE_CLASS},isFormatHeading:function(e){return!!this.getLevelByHeadingFormat(e)},getLevelByHeadingFormat:function(e){for(var g in this._headingLevelLookup)if(this._headingLevelLookup.hasOwnProperty(g)&&this._headingLevelLookup[g].format===
e)return Number(g)},getHeadingFormatByLevel:function(e){return this._headingLevelLookup[e]?this._headingLevelLookup[e].format:"none"},isFormatIntroducedInVersion:function(e,g){return!!this._versionedFormats[g]&&-1!==this._versionedFormats[g].indexOf(e)},getEquationHeightByLevel:function(e){return this._headingLevelLookup[e]?this._headingLevelLookup[e].equationHeight:0}}})},"MW/rtc/plugins/richtext/ParagraphFormatsEnum":function(){define([],function(){return{NORMAL:"text",TITLE:"title",HEADING1:"heading",
HEADING2:"heading2",HEADING3:"heading3"}})},"MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNode":function(){define(["dojo/_base/declare","MW/rtc/plugins/richtext/nodes/inner/RichTextContainerNode"],function(h,e){return h([e],{constructor:function(e,d){d&&(this.align=d.align,d.anchorId&&(this.anchorId=d.anchorId));this.align=this.align||"left";this.wrappable=!0},className:"RichTextParagraphNode",containerType:function(){return"text"},isTextContainerNode:function(){return!0},_serializeAttributes:function(e){e.align=
this.align;this.anchorId&&(e.anchorId=this.anchorId)}})})},"MW/rtc/plugins/richtext/nodes/inner/RichTextContainerNode":function(){define(["dojo/_base/declare","MW/rtc/nodes/InnerNode"],function(h,e){return h([e],{constructor:function(e){},className:"RichTextContainerNode",getDefaultChild:function(){return{className:"RichTextNode",text:""}}})})},"MW/rtc/plugins/internalhyperlinkservice/model/AnchorGenerator":function(){define(["mw-utils/Utils"],function(h){return{_createUID:function(){return h.generateUuid()},
createAnchorId:function(e){return e+this._createUID()}}})},"MW/rtc/plugins/tableofcontents/TableOfContentsProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/tableofcontents/TableOfContents","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{isApplicable:function(d){return Boolean(d)},requires:function(){return{isApplicable:["rtc.divselection"],createInstance:"rtc.actionservice rtc.internaldocument rtc.document rtc.cursor rtc.richtext.anchor rtc.undoredo.controller rtc.draganddropnotifier rtc.divselection rtc.cutcopypaste rtc.cutcopypaste.converter rtc.view".split(" ")}},
createInstance:function(d,c,b,a,f,k,g,n,h,m,q){return new e(d,c,b,a,f,k,g,n,h,m,q)}})})},"MW/rtc/plugins/tableofcontents/TableOfContents":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect ./model/TableOfContentsList ./model/TableOfContentsContainer ./model/TableOfContentsHeadingNode MW/rtc/abstract/AbstractPlugin MW/rtc/RichTextComponentFeatureEnum MW/rtc/plugins/richtext/nodes/inner/HeadingNode MW/rtc/plugins/undoredo/EditBlockConstants MW/rtc/model/SelectionUtilities ./TableOfContentsCreator ./TableOfContentsUtilities MW/rtc/model/DocumentUtilities MW/rtc/model/DocumentConstants MW/rtc/model/DocumentEventUtilities MW/rtc/model/Range MW/rtc/model/Position MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNode dojo/i18n!l10n/nls/richtext_actions".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w){return h(a,{_CURSOR_INSIDE_TOC_CSS_TAG:"insideToC",constructor:function(a,f,c,d,k,l,n,h,m,p,q){this._internalDocument=f;this._document=c;this._cursor=d;this._actionService=a;this._anchor=k;this._divSelection=h;this._view=q;this._dirtyToC=!1;a.loadActions(this._actions());this.own(g.before(this._document,"insertContent",e.hitch(this,"_insertContent")));this.own(g.before(n,"onDragOver",e.hitch(this,"_dragOver")));this.own(g.after(this._cursor,"onChange",
e.hitch(this,"_onChange")));this.own(g.after(l,"undo",e.hitch(this,"_onUndoRedo"),!0));this.own(g.after(l,"redo",e.hitch(this,"_onUndoRedo"),!0));this.own(g.after(this._document,"insertContent",e.hitch(this,"_onPasteUpdater")));this.own(g.after(this._document,"onDelete",e.hitch(this,"_updateActions")));this.own(g.after(this._internalDocument,"onDocumentReset",e.hitch(this,"_onDocumentReset"),!0));this.own(g.after(h,"_layout",e.hitch(this,"_checkSelection"),!0));this.own(g.after(this._internalDocument,
"onDocumentChanged",e.hitch(this,"_handleDocumentChanged"),!0));this.own(g.after(this._document,"onPreDeletion",e.hitch(this,"_onDelete"),!0));p.registerPasteHandler(b,e.hitch(this,"_handlePaste"));this._converter=p},createTableOfContents:function(){if(this._actionService.getAction(f.TABLE_OF_CONTENTS.TABLE_OF_CONTENTS_ACTION).enabled&&!this._tableOfContentsContainer){var a=this._anchor.createHeadingIds(),b=this._cursor.getSelection(),c=this._cursor.getPosition(),e;b&&(e=!n.isInSelection(d,b)?b:null);
b=this._document.startEdit();this._tableOfContentsContainer=p.createTableOfContents(a,this._internalDocument,this._cursor,b);this._updateActions();e?this._cursor.setSelection(e):(this._cursor.releaseAnchor(),c.line+=1,this._cursor.setPosition(c));this._document.endEdit();this._cursor.onUpdate()}},_autoUpdate:function(a){if(this._tableOfContentsContainer&&this._tableOfContentsContainer.parent){var f=this._cursor.getNode().rootContainer(),b=this._cursor.selectionInfo(),c=f instanceof d;a||f!==this._lastcursorLineNode&&
this._docWasChanged&&this._lastcursorLineNode&&this._lastcursorLineNode instanceof k&&b.startPosition.isEqualTo(b.endPosition)&&!this._onDrag?(this._lastcursorLineNode=f,this._docWasChanged=!1,c&&(this._cursor.setPosition(f.startPosition()),this._cursor.collapseSelection()),a=this._document.startEdit(l.AUTO),p.updateTableOfContents(this._internalDocument,this._tableOfContentsContainer,this._anchor.createHeadingIds(),this._view,a),this._document.endEdit()):(this._lastcursorLineNode=f,this._onDrag=
!1)}},_handleDocumentChanged:function(a){if(this._tableOfContentsContainer&&a){var f=a[0],f=f||{};f.isUndoRedo||f.startLine===f.endLine&&this._internalDocument.getLineNumber(this._tableOfContentsContainer)===f.endLine?this._docWasChanged=!1:(s.hasEventType(a,r.FORMAT_CHANGE_EVENT)?this._autoUpdate(!0):f.type===r.DELETION_EVENT&&f.startLine!==f.endLine?this._autoUpdate(!0):1<a.length&&(a[0].type===r.DELETION_EVENT&&a[1].type===r.INSERT_TEXT)&&this._autoUpdate(!0),s.hasEventType(a,r.DELETION_EVENT)&&
!this._tableOfContentsContainer.parent&&(this._tableOfContentsContainer=m.findTableOfContentsContainer(this._internalDocument)),this._docWasChanged=!0)}},_onDocumentReset:function(){this._dirtyToC=!0},_onPasteUpdater:function(){this._tableOfContentsContainer=m.findTableOfContentsContainer(this._internalDocument);this._updateActions();this._autoUpdate(!0)},_onUndoRedo:function(){if(this._tableOfContentsContainer=m.findTableOfContentsContainer(this._internalDocument))n.updateSelectionForContainer(this._cursor,
this._tableOfContentsContainer,this._divSelection,this._internalDocument),this._updateReadOnly();this._updateActions();this._cursor.onUpdate()},_insertContent:function(a,f,b){var c;a.forEach(function(a){"TableOfContentsContainer"===a.className&&(c=a)});var d=c&&this._tableOfContentsContainer;c&&(1===a.length&&2===c.children.length?a[1]=new v([]):2!==c.children.length&&(d=!0));if(d){for(var e=[],d=a.indexOf(c),k=0;k<d;k++)e[k]=a[k];c.children.forEach(function(a){a.className="RichTextParagraphNode";
e[e.length]=a});for(k++;k<a.length;k++)e[e.length]=a[k];a=e}else c&&!this._tableOfContentsContainer&&(this._dirtyToC=!0,m.makeReadOnly(c.children[1],!0));return[a,f,b]},_handlePaste:function(a,f,b){a=this._converter.convertContentFromSource(b);this._document.insertTextAtCurrentPosition(m.getTextFromJSON(a));return!0},_dragOver:function(a){a.target.parentElement.rteNode&&a.target.parentElement.rteNode.rootContainer()instanceof c&&(a.dataTransfer.dropEffect="none",a.dataTransfer.effectAllowed="none");
this._onDrag=!0},_actions:function(){return[{id:f.TABLE_OF_CONTENTS.TABLE_OF_CONTENTS_ACTION,key:"ctrl_alt_c",platformKey:{mac:"meta_alt_c"},enabled:!1,callback:e.hitch(this,"createTableOfContents")},{id:"rtc_general_table_of_contents_linebreak",enabled:!0,key:"enter",callback:e.hitch(this,"_handleLineBreak")},{id:"rtc_general_table_of_contents_shift_linebreak",enabled:!0,key:"shift_enter",callback:e.hitch(this,"_handleLineBreak")}]},_updateActions:function(){this._actionService.updateAction(f.TABLE_OF_CONTENTS.TABLE_OF_CONTENTS_ACTION,
{enabled:!this._isReadOnly()&&this._canCreateTableOfContents()})},_handleLineBreak:function(){var a=this._cursor.getNode().rootContainer();if(a instanceof c){if(q.isAtStartOfContainer(this._cursor.position,a)){var f=this._document.startEdit(),b=this._internalDocument.createContainerForType("text").container,d=this._internalDocument.createNode(b.getDefaultChild());b.addChild(d);b=this._internalDocument.insertAtPosition(b,new u(a,0));this._internalDocument.emitDocumentEvents(b.events);this._cursor.setPosition(a);
f.appendRedoEvents(b.events);f.appendUndoEvents(b.events);this._document.endEdit();this._cursor.onUpdate();return!0}this._cursor.setPosition(a.nextSibling());return!0}return!1},_onChange:function(){this._dirtyToC&&(this._tableOfContentsContainer=m.findTableOfContentsContainer(this._internalDocument),this._dirtyToC=!1);this._autoUpdate();this._styleOnCursor();this._updateActions();this._tableOfContentsContainer&&(n.checkFullSelection(this._cursor,this._tableOfContentsContainer,this._internalDocument),
this._updateReadOnly())},_updateReadOnly:function(){var a=this._isReadOnlySet;n.isInFullSelection(this._cursor,this._internalDocument,this._tableOfContentsContainer)?(m.makeReadOnly(this._tableOfContentsContainer.lastChild(),!1),this._isReadOnlySet=!1,this._actionService.updateAction(f.CUT_COPY_PASTE.CUT_ACTION,{enabled:!0}),this._actionService.updateAction(f.CUT_COPY_PASTE.PASTE_ACTION,{enabled:!0}),this._tableOfContentsContainer.childrenAreContainers=!0):this._isReadOnlySet||(this._isReadOnlySet=
!0,m.makeReadOnly(this._tableOfContentsContainer.lastChild(),!0),this._tableOfContentsContainer.childrenAreContainers=!1);if(a!==this._isReadOnlySet)this._cursor.onChange()},_styleOnCursor:function(){if(this._tableOfContentsContainer){var a=this._cursor.getSelection(),a=(a=n.isInSelection(c,a))?a:this._cursor.getNode().rootContainer(),f=this._internalDocument.getLineNumber(this._tableOfContentsContainer);a instanceof c?this._view.applyClassToLine(f,this._CURSOR_INSIDE_TOC_CSS_TAG):this._view.removeClassFromLine(f,
this._CURSOR_INSIDE_TOC_CSS_TAG)}},_onDelete:function(a){if(this._internalDocument.isReadOnly())return!0;a=m.deleteToC(this._cursor,this._document,this._internalDocument,this._tableOfContentsContainer,a);a.dirty&&(this._dirtyToC=!0,this._tableOfContentsContainer=void 0,this._updateActions());if(a.done)return!0},_checkSelection:function(){this._tableOfContentsContainer&&(n.updateSelectionForContainer(this._cursor,this._tableOfContentsContainer,this._divSelection,this._internalDocument),n.updateSelectionForParagraph(this._cursor,
this._tableOfContentsContainer.firstChild(),this._divSelection,this._internalDocument),n.updateSelectionForParagraph(this._cursor,this._tableOfContentsContainer.lastChild(),this._divSelection,this._internalDocument))},_isReadOnly:function(){return this._internalDocument&&this._internalDocument.isReadOnly()||this._cursor&&this._cursor.isCursorReadOnly()?!0:!1},_canCreateTableOfContents:function(){return!(this._tableOfContentsContainer&&this._tableOfContentsContainer.parent)}})})},"MW/rtc/plugins/tableofcontents/model/TableOfContentsList":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNode"],function(h,e){return h([e],{className:"TableOfContentsList",constructor:function(e,d){this.wrappable=!1},isTextContainerNode:function(){return!0},isReadOnly:function(){return!0},containerType:function(){return"toc"},offsetInContainer:function(e){var d,c=0;e=e||this.textContainer();for(var b=0;b<e.children.length;b++){d=e.children[b];if(this===d)return c;c=c+d.maxOffset()+e.CHILD_TEXT_SEPARATOR.length}return 0}})})},"MW/rtc/plugins/tableofcontents/model/TableOfContentsContainer":function(){define(["dojo/_base/declare",
"MW/rtc/nodes/InnerNode"],function(h,e){return h([e],{className:"TableOfContentsContainer",constructor:function(e,d){this.isUnique=this.wrappable=!0;d&&d.anchorId&&(this.anchorId=d.anchorId)},CHILD_TEXT_SEPARATOR:"\n",getDefaultChild:function(){return null},isTextContainerNode:function(){return!0},isReadOnly:function(){return!1},isSplittable:function(e){return!1},containerType:function(){return"toc"},_serializeAttributes:function(e){this.anchorId&&(e.anchorId=this.anchorId)}})})},"MW/rtc/plugins/tableofcontents/model/TableOfContentsHeadingNode":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNode"],function(h,e){return h([e],{constructor:function(e,d){d=d||{};d.align&&(this.align=d.align);this.wrappable=!1},className:"TableOfContentsHeadingNode",containerType:function(){return"ToCHeading"},canSpliceContainers:function(e,d){return!0},isTextContainerNode:function(){return!0},offsetInContainer:function(e){var d,c=0;e=e||this.textContainer();for(var b=0;b<e.children.length;b++){d=e.children[b];if(this===d)return c;c=c+d.maxOffset()+e.CHILD_TEXT_SEPARATOR.length}return 0},
isSplittable:function(e){return!1},canMergeContainerWithSibling:function(e,d){return!0},_serializeAttributes:function(e){this.align&&(e.align=this.align);this.anchorId&&(e.anchorId=this.anchorId)}})})},"MW/rtc/plugins/tableofcontents/TableOfContentsCreator":function(){define("MW/rtc/model/CodeUtilities MW/rtc/model/Position MW/rtc/plugins/richtext/nodes/leaf/RichTextNode MW/rtc/plugins/hyperlink/model/HyperlinkNode MW/rtc/model/events/DeletionEvent ./model/TableOfContentsList ./model/TableOfContentsContainer ./model/TableOfContentsHeadingNode dojo/i18n!l10n/nls/richtext_actions".split(" "),
function(h,e,g,d,c,b,a,f,k){return{_COLON:":",_HYPERLINK_TAG:"internal",_LINE_BREAK:"\n",_SPACE4:"    ",createTableOfContents:function(f,c,d,e){var k=new a([]);d=this._getInsertPosition(d);this._createTableOfContentsHeading(k);var g=new b([]);f=this._stripEmptyHeadingsOut(f);this._createItems(f).forEach(function(a){g.addChild(a)});k.addChild(g);f=c.insertAtPosition(k,d);c.emitDocumentEvents(f.events);e.appendUndoEvents(f.events);e.appendRedoEvents(f.events);return k},updateTableOfContents:function(a,
f,b,d,e){var k=f.lastChild();d=k.children.length;b=this._stripEmptyHeadingsOut(b);var g=[];this._createItems(b).forEach(function(f){f=a.insertAtPosition(f,k.endPosition());g=g.concat(f.events)});a.emitDocumentEvents(g);f=a.getLineNumber(f);for(b=0;b<d;b++)a.deleteNode(k.firstChild());f=[c.create(f,f)];a.emitDocumentEvents(f)},_createItems:function(a){for(var f=a.length,b=this._insertTitle(a),c=[],e=this._getAvailableDepth(a,b),k=0;k<f;k++)if(1!==a[k].level||b){var h=new d([],{hyperlink:this._HYPERLINK_TAG+
this._COLON+a[k].anchorId,readOnly:!0}),t=this._getSpacing(a[k].level,e);""!==t&&(t=new g({text:t,readOnly:!0}),c.push(t));t=new g({text:k!==f-1?a[k].getText()+this._LINE_BREAK:a[k].getText(),readOnly:!0});h.addChild(t);c.push(h)}0===c.length&&(a=new g([]),a.text=" ",a.readOnly=!0,c.push(a));return c},_stripEmptyHeadingsOut:function(a){return a.filter(function(a){return""!==a.getText()})},_insertTitle:function(a){for(var f=0,b=0;b<a.length;b++)1===a[b].level&&f++;return 1<f?!0:!1},_getAvailableDepth:function(a,
f){var b=[];a.forEach(function(a){-1===b.indexOf(a.level)&&(f&&0<a.level||!f&&1<a.level)&&b.push(a.level)});return b.sort()},_getSpacing:function(a,f){for(var b="",c=0;c<f.indexOf(a);c++)b+=this._SPACE4;return b},_getInsertPosition:function(a){a=a.selectionInfo().startNode;if(!h.isCodeContainer(a))return new e(a,0);for(a=a.textContainer();a;){if(!a.prevNode()||!h.isCodeContainer(a.prevNode()))return new e(a,0);a=a.prevNode().textContainer()}},_createTableOfContentsHeading:function(a){var b=new g({text:k.tableOfContentsHeading,
bold:!0}),b=new f([b]);a.addChild(b)}}})},"MW/rtc/plugins/richtext/nodes/leaf/RichTextNode":function(){define(["dojo/_base/declare","MW/rtc/nodes/leaf/TextProportionalFontNode"],function(h,e){return h([e],{constructor:function(e){this.font=e.font||null;this.size=e.size||null;this.bold=void 0!==e.bold?e.bold:null;this.italic=void 0!==e.italic?e.italic:null;this.monospace=void 0!==e.monospace?e.monospace:null;this.underline=void 0!==e.underline?e.underline:null},className:"RichTextNode",_styleAttributes:"font size bold italic monospace underline color".split(" "),
_serializeAttributes:function(e){e.text=this.text;void 0!==this.font&&null!==this.font&&(e.font=this.font);void 0!==this.size&&null!==this.size&&(e.size=this.size);void 0!==this.bold&&null!==this.bold&&(e.bold=this.bold);void 0!==this.italic&&null!==this.italic&&(e.italic=this.italic);void 0!==this.underline&&null!==this.underline&&(e.underline=this.underline);void 0!==this.monospace&&null!==this.monospace&&(e.monospace=this.monospace);void 0!==this.color&&null!==this.color&&(e.color=this.color)},
movePositionRight:function(e){if(e.isRightAligned()&&0<e.getOffset()){var d=this.getPositionFromOffset(e.getOffset()-1);return this.inherited(arguments,[d])}return this.inherited(arguments)}})})},"MW/rtc/plugins/hyperlink/model/HyperlinkNode":function(){define(["dojo/_base/declare","./HyperlinkUtilities","MW/rtc/nodes/InnerNode","MW/rtc/plugins/richtext/nodes/inner/RichTextContainerNode"],function(h,e,g,d){return h([d],{constructor:function(c,b){this.hyperlink="";b&&(e.isHyperlinkValid(b.hyperlink)?
this.hyperlink=b.hyperlink:this.hyperlink="#"+b.hyperlink,b.readOnly&&(this.readOnly=b.readOnly))},className:"HyperlinkNode",isTextNode:function(){return!0},containsTextNodes:function(){return!0},getPositionFromOffset:function(c){c=this.findChildIndexForPosInNode(c);return this.children[c.n].getPositionFromOffset(c.posInNode)},findChildIndexForPosInNode:function(c){if(this.children){0>c&&(c+=this.getTextForPositioning().length+1);for(var b=0;c>this.children[b].maxOffset()&&this.children[b].nextSibling();)c-=
this.children[b].maxOffset(),b+=1;return{n:b,posInNode:c}}return{n:0,posInNode:c}},maxOffset:function(){if(this.children){for(var c=0,b=0;this.children[c];)b+=this.children[c].maxOffset(),c+=1;return b}return 0},lineBorderOffset:function(c,b){var a;if(this.children){var f=this.findChildIndexForPosInNode(b);a=b-f.posInNode;f=this.children[f.n].lineBorderOffset(c,f.posInNode);a+=f.getOffset();return this.getPositionFromOffset(a)}a=this.offsetInContainer();0<=c&&(a+=this.maxOffset());return this.getPositionFromOffset(a)},
offsetInContainer:function(c){return this.children&&this.children[0]?(c=c||this.rootContainer(),c._childOffset(this.children[0])):-1},replaceText:function(c){if(1<this.children.length){var b;for(b=this.children.length-1;0<b;b-=1)this.removeChild(b)}this.children[0].replaceText(c)},_serializeAttributes:function(c){c.hyperlink=this.hyperlink}})})},"MW/rtc/plugins/tableofcontents/TableOfContentsUtilities":function(){define("dojo/_base/lang MW/rtc/model/DocumentUtilities ./model/TableOfContentsContainer ./model/TableOfContentsHeadingNode MW/rtc/model/events/DeletionEvent MW/rtc/model/events/InsertTextEvent MW/rtc/model/Selection MW/rtc/model/SelectionUtilities MW/rtc/model/Position MW/rtc/plugins/sectionbreak/model/SectionBreakNode".split(" "),
function(h,e,g,d,c,b,a,f,k,l){return{deleteToC:function(b,c,h,q,r){var s=b.getNode().rootContainer(),t=b.getSelection(),u=b.selectionInfo(),v=f.isInSelection(g,t);if(s instanceof g||v){if(u.endNode.textContainer()instanceof d&&u.startNode.textContainer()instanceof d){if(e.isAtEndOfContainer(b.position,b.getNode().textContainer())&&0<r&&!t)if(this.coversFullParagraphs(u,b.getNode().textContainer())){if(0===b.getNode().textContainer().getText().length)return{done:!0,dirty:!1}}else return f.setContainerSelection(b,
h,q),{done:!0,dirty:!1};return{done:!1,dirty:!1}}if(v&&!(u.startNode.rootContainer()===q||u.endNode.rootContainer()===q))return{done:!1,dirty:!0};if(this.coversFullParagraphs(b.adjustSelection(u,!0),q))return this._deleteBlock(b,c,h,q),{done:!0,dirty:!0};if(t&&e.isAtStartOfContainer(t.getStartPosition(),q)&&h.getLineNumber(q)<h.getLineNumber(u.endNode.rootContainer()))return r=new k(q.nextSibling().firstChild(),0),this._deleteBlock(b,c,h,q),t=new a(r,t.getEndPosition(),!1,!1),b.setPosition(t.getEndPosition()),
b.setSelection(t),{done:!1,dirty:!0};f.setContainerSelection(b,h,q);return{done:!0,dirty:!1}}return!t&&(s.previousSibling()instanceof g&&e.isAtStartOfContainer(b.position,s)&&0>r||s.nextSibling()instanceof g&&e.isAtEndOfContainer(b.position,s)&&0<r&&!s.isEmpty())?(f.setContainerSelection(b,h,q),{done:!0,dirty:!1}):!t&&0>r&&s.previousSibling()instanceof l&&s.previousSibling().previousSibling()instanceof g&&e.isAtStartOfContainer(b.position,s)?(this._deleteBlock(b,c,h,s.previousSibling()),{done:!0,
dirty:!1}):{done:!1,dirty:!1}},coversFullParagraphs:function(a,f){return e.isAtStartOfContainer(a.startPosition,f)&&e.isAtEndOfContainer(a.endPosition,f)},_deleteBlock:function(a,f,d,e){var g=f.startEdit(),h=new k(e,0),t=e.getText();e.nextSibling()instanceof l&&d.deleteNode(e.nextSibling());a.setPosition(e.nextSibling());a.releaseAnchor();a=d.getLineNumber(e);d.deleteNode(e);e=[c.create(a,a+1)];h=[b.create(a,a+1,h,t)];d.emitDocumentEvents(e);g.appendRedoEvents(e);g.appendUndoEvents(h);f.endEdit()},
findTableOfContentsContainer:function(a){if(a=a.root.children)for(var f=a.length,b=0;b<f;b++)if(a[b]instanceof g)return a[b];return null},makeReadOnly:function(a,f){a&&a.children.forEach(function(a){a.readOnly=f;a.children&&this.makeReadOnly(a,f)},this)},getTextFromJSON:function(a){var f=a.text?a.text:"";a.forEach(function(a){f+=a.text?a.text:"";a.children&&(f+=this.getTextFromJSON(a.children)+" ")},this);return f=f.replace(/[\r\n]+$/," ")}}})},"MW/rtc/plugins/sectionbreak/model/SectionBreakNode":function(){define(["dojo/_base/declare",
"MW/rtc/nodes/InnerNode","MW/rtc/plugins/view/layoutmanager/rules/ContainmentGroupingRule"],function(h,e,g){return h([e],{"-chains-":{constructor:"manual"},constructor:function(){this.inherited(arguments,[[]]);this.groupingType=g().groupingType},className:"SectionBreak",containerType:function(){return""},getDefaultChild:function(){return null},endNode:function(){return this.previousSibling()?this.previousSibling().endNode():null},startNode:function(){return this.nextSibling()?this.nextSibling().startNode():
null},getHeight:function(){return this.box?this.box.offsetHeight:0},getPositionFromOffset:function(d){return this.nextSibling().getPositionFromOffset(d)},startPosition:function(){return this.previousSibling().endPosition()},endPosition:function(){return this.nextSibling().startPosition()}})})},"MW/rtc/plugins/view/layoutmanager/rules/ContainmentGroupingRule":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/dom-construct","MW/rtc/plugins/view/layoutmanager/rules/BaseGroupingRule"],function(h,
e,g,d){return h(d,{groupingType:"containment",_BLOCK_POSTFIX:"Block",_BLOCK_CLASS:"SectionBlock containment",constructor:function(c){this._domTarget=c},getOperationsForLayout:function(c,b,a){return this._isApplicable(b)?this._hasToRedrawNeighboringBlocks(b,a)?this._redrawNeighboringBlocks(c,b):this._drawAroundSiblingBlocks(c,b):this._wrapDomNodeIntoBlock(c,b,a)},_hasToRedrawNeighboringBlocks:function(c,b){if(!this._domTarget.contains(b))return!1;var a=this._getBlock(c.previousSibling()),f=this._getBlock(c.nextSibling());
return this._isBlockElement(a)&&this._isBlockElement(f)&&a.nextElementSibling===f?!1:!0},_redrawNeighboringBlocks:function(c,b){var a={};a.nodeToPlace=c;var f=b.previousSibling(),d=b.nextSibling(),f=this._getNodesToRedraw(f,!0),d=this._getNodesToRedraw(d,!1);if(0===f.length&&0===d.length)return a;a.prevNodes=f;a.nextNodes=d;f=0<f.length&&this._getBlockFromSiblingNodes(f);d=0<d.length&&this._getBlockFromSiblingNodes(d);a.nodeToPlaceRefNode=f||d;a.nodeToPlaceRefPos=f?"after":"before";a.nodesToRemove=
[];f&&a.nodesToRemove.push(f);d&&a.nodesToRemove.push(d);return a},_getBlockFromSiblingNodes:function(c){var b=null;c.some(function(a){if(a=this._getBlock(a))return b=a,!0},this);return b},_drawAroundSiblingBlocks:function(c,b){var a=this._getBlock(b.previousSibling());return a?{nodeToPlace:c,nodeToPlaceRefNode:a,nodeToPlaceRefPos:"after"}:(a=this._getBlock(b.nextSibling()))?{nodeToPlace:c,nodeToPlaceRefNode:a,nodeToPlaceRefPos:"before"}:null},_wrapDomNodeIntoBlock:function(c,b,a){var f={};b.isRootContainer()&&
!this._hasSiblingBlockReference(b,a)&&(b=this._createBlock(),g.place(c,b),f.nodeToPlace=b,f.mergeWithSiblingBlock=!0);return f},_hasSiblingBlockReference:function(c,b){var a={currentNode:c,iterator:"previousSibling"},f={currentNode:c,iterator:"nextSibling"};do{if((a=a&&this._stepSearchForSiblingBlockReference(c,a))&&a.found||(f=f&&this._stepSearchForSiblingBlockReference(c,f))&&f.found)return!0;if(!this._domTarget.contains(b))break}while(a||f);return!1},_stepSearchForSiblingBlockReference:function(c,
b){var a=b.currentNode[b.iterator]();if(!a||a.groupingType===this.groupingType&&a.box&&a.box.parentElement)return null;var f=this._getBlock(a);f&&f.parentElement&&(b.found=!0);b.currentNode=a;return b},getOperationsForRemove:function(c,b){return this._isApplicable(c)?this._removeAndMerge(c):this._removeBlockIfEmpty(c,b)},_removeAndMerge:function(c){c=this._getDomNode(c);var b=this._getSiblingBlocks(c);return{nodeToMerge:b?[b]:null,nodeToRemove:c}},_getSiblingBlocks:function(c){var b=c.previousElementSibling;
c=c.nextElementSibling;return!this._isBlockElement(b)||!this._isBlockElement(c)?null:[b,c]},_removeBlockIfEmpty:function(c,b){var a=this._getBlock(c);return a&&1===a.childElementCount&&this._hasElementInBlock(b,a)?{nodeToRemove:a}:null},_hasElementInBlock:function(c,b){return c.some(function(a){if(a.parentElement===b)return!0},this)},getRefDomNode:function(c,b,a){var f=this._getDomNode(b);return!f||!f.parentElement?null:this._isBlockElement(a)?this._getRefDomNodeForBlockObserver(c,b,f):this._getRefDomNodeForNonBlockObserver(c,
b,f)},_getRefDomNodeForBlockObserver:function(c,b,a){var f,d=this._getBlock(b);d?f=d:this._isApplicable(b)&&(f=a);return f?{domNode:f,position:this._getRefPosition(c,b)}:null},_getRefDomNodeForNonBlockObserver:function(c,b,a){if(!this._isApplicable(b))return null;var f=a.previousElementSibling,d=a.nextElementSibling;if(f||d){var e,g,h=c.nextSibling(),m=c.previousSibling();b===h?this._getBlock(c)?(e=a,g="before"):f&&(g="last",e=this._getBlock(m)||f):b===m&&(this._getBlock(c)?(e=a,g="after"):d&&(g=
"first",e=this._getBlock(h)||d));return e?{domNode:e,position:g}:null}},_createBlock:function(){return g.create("div",{"class":this._getBlockClass()})},_getBlockClass:function(){return this._BLOCK_CLASS},_getBlock:function(c){if(c){for(c=this._getDomNode(c);c;){if(this._isBlockElement(c))return c;c=c.parentElement}return null}},_isBlockElement:function(c){return!!c&&e.contains(c,this._BLOCK_CLASS)},_canMergeBlocks:function(c,b){if(!c||!b)return!1;var a=c.className.split(" "),f=b.className.split(" ");
return c&&b&&a[0]===f[0]},_canGroupTogether:function(c,b){return b.groupingType!==this.groupingType},priority:function(){return 2}})})},"MW/rtc/plugins/tableofcontents/TableOfContentsContainerInsertionRulesProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./TableOfContentsContainerInsertionRules"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/tableofcontents/TableOfContentsContainerInsertionRules":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/insertionrules/BaseInsertionRules","MW/rtc/plugins/insertionrules/InsertionRuleConstants","./model/TableOfContentsContainer"],function(h,e,g,d){return h([e],{_compatibleParents:[],constructor:function(){},destroy:function(){},getApplicableNodeClass:function(){return d},getTopLevelInsertionInstruction:function(c,b,a,f,d){return{insertInRoot:{relationToPosition:g.RELATION.BEFORE}}}})})},"MW/rtc/plugins/insertionrules/BaseInsertionRules":function(){define(["dojo/_base/declare","./receivinginstructions/InsertIfCompatibleInstruction"],
function(h,e){return h(null,{constructor:function(){},destroy:function(){},getApplicableNodeClass:function(){throw Error("Unimplemented API: MW.rtc.insertionrules.getApplicableNodeClass");},_compatibleParents:[],canInsertInContainer:function(e){return this._compatibleParents.some(function(d){return e.isInstanceOf(d)})},getReceivingInstruction:function(g){return new e},getTopLevelInsertionInstruction:function(e,d,c,b,a){throw Error("Unimplemented API: MW.rtc.insertionrules.getTopLevelInsertionInstruction");
}})})},"MW/rtc/plugins/insertionrules/receivinginstructions/InsertIfCompatibleInstruction":function(){define(["dojo/_base/declare","MW/rtc/plugins/insertionrules/BaseInsertionInstruction","MW/rtc/plugins/insertionrules/InsertionRuleConstants"],function(h,e,g){return h([e],{constructor:function(){this._type=g.RECEIVING_INSTRUCTION.INSERT_IF_COMPATIBLE}})})},"MW/rtc/plugins/insertionrules/BaseInsertionInstruction":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(){this._type=
null},getType:function(){if(null===this._type)throw Error("Instruction type not defined: MW.rtc.insertionrules.BaseInsertionInstruction");return this._type}})})},"MW/rtc/plugins/insertionrules/InsertionRuleConstants":function(){define([],function(){return{RECEIVING_INSTRUCTION:{CONTINUE_UP:"continue_up",CONTINUE_AT_POSITION:"continue_at_position",INSERT_IF_COMPATIBLE:"insert_if_compatible"},RELATION:{BEFORE:0,AFTER:1,AT:2}}})},"MW/rtc/plugins/tableofcontents/TableOfContentsHeadingNodeConversionRulesProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./TableOfContentsHeadingNodeConversionRules"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/tableofcontents/TableOfContentsHeadingNodeConversionRules":function(){define(["dojo/_base/declare","MW/rtc/nodes/nodeconversionrules/base/AbstractNodeConversionRules","./model/TableOfContentsHeadingNode"],function(h,e,g){return h(e,{constructor:function(){},getApplicableNodeClass:function(){return g},
isConvertibleTo:function(d){return!1},isConvertibleFrom:function(d){return!1}})})},"MW/rtc/plugins/tableofcontents/TableOfContentsListConversionRulesProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./TableOfContentsListConversionRules"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/tableofcontents/TableOfContentsListConversionRules":function(){define(["dojo/_base/declare",
"MW/rtc/nodes/nodeconversionrules/base/AbstractNodeConversionRules","./model/TableOfContentsList"],function(h,e,g){return h(e,{constructor:function(){},getApplicableNodeClass:function(){return g},isConvertibleTo:function(d){return!1},isConvertibleFrom:function(d){return!1}})})},"MW/rtc/plugins/tableofcontents/export/TableOfContentsContainer2HTMLProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/tableofcontents/export/TableOfContentsContainer2HTML"],
function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/tableofcontents/export/TableOfContentsContainer2HTML":function(){define(["dojo/_base/declare","dojo/dom-class","MW/rtc/plugins/export/html/BaseInnerNode2HTML","MW/rtc/plugins/tableofcontents/model/TableOfContentsContainer"],function(h,e,g,d){return h([g],{_STYLES:["margin-bottom","padding-bottom"],constructor:function(){},getApplicableNodeClass:function(){return d}})})},
"MW/rtc/plugins/export/html/BaseInnerNode2HTML":function(){define(["dojo/_base/declare","MW/rtc/plugins/export/NodeExporterInterface"],function(h,e){return h([e],{constructor:function(){},enter:function(e,d,c){c=e.getAttributesForStyle(d,this._STYLES);d.anchorId&&(c+=" id \x3d '"+d.anchorId+"' ");d="\x3c"+this._getTagName(d);c&&(d+=" "+c);e.addToBody(d+"\x3e");return!1},leave:function(e,d,c){e.addToBody("\x3c/"+this._getTagName(d)+"\x3e")},_getTagName:function(e){return"div"}})})},"MW/rtc/plugins/export/NodeExporterInterface":function(){define(["dojo/_base/declare"],
function(h){return h([],{_STYLES:[],constructor:function(){},getApplicableNodeClass:function(){throw Error("Unimplemented: getApplicableNodeClass");},reset:function(){},finalize:function(){},enter:function(e,g,d){return!1},leave:function(e,g,d){},visit:function(e,g,d,c,b){}})})},"MW/rtc/plugins/tableofcontents/view/TableOfContentsLayouterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./TableOfContentsLayouter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},
createInstance:function(){return new g}})})},"MW/rtc/plugins/tableofcontents/view/TableOfContentsLayouter":function(){define(["dojo/_base/declare","dojo/dom-class","MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter","../model/TableOfContentsList"],function(h,e,g,d){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return d},layout:function(c,b){return c.layoutInto(b,"div",{"class":"paragraphNode ToCItems"})}})})},"MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter":function(){define(["dojo/_base/declare",
"MW/rtc/abstract/AbstractPlugin","mw-log/Log"],function(h,e,g){return h(e,{getApplicableNodeClass:function(){g.error("Unimplemented API: MW.rtc.view.layoutmanager.layouter.getApplicableNodeClass")},canLayoutIndividually:function(d){return!0},layout:function(d,c){g.error("Unimplemented API: MW.rtc.view.layoutmanager.layouter.layout")},refresh:function(d,c,b,a){return b},place:function(d,c){},destroy:function(){}})})},"MW/rtc/plugins/tableofcontents/view/TableOfContentsHeadingNodeLayouterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./TableOfContentsHeadingNodeLayouter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/tableofcontents/view/TableOfContentsHeadingNodeLayouter":function(){define(["dojo/_base/declare","dojo/dom-class","MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter","../model/TableOfContentsHeadingNode"],function(h,e,g,d){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return d},
layout:function(c,b){return c.layoutInto(b,"div",{"class":"paragraphNode ToCHeading"})}})})},"MW/rtc/plugins/tableofcontents/view/TableOfContentsContainerLayouterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./TableOfContentsContainerLayouter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/tableofcontents/view/TableOfContentsContainerLayouter":function(){define(["dojo/_base/declare",
"dojo/dom-class","MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter","../model/TableOfContentsContainer"],function(h,e,g,d){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return d},layout:function(c,b){return c.layoutInto(b,"div",{"class":"ToC"})}})})},"MW/rtc/plugins/tableofcontents/model/TableOfContentsContainerContentConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./TableOfContentsContainerContentConverter"],function(h,
e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/tableofcontents/model/TableOfContentsContainerContentConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/contentconverter/base/InnerNodeContentConverter","./TableOfContentsContainer"],function(h,e,g){return h(e,{getApplicableNodeClass:function(){return g}})})},"MW/rtc/plugins/tableofcontents/model/TableOfContentsHeadingNodeContentConverterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./TableOfContentsHeadingNodeContentConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/tableofcontents/model/TableOfContentsHeadingNodeContentConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/contentconverter/base/InnerNodeContentConverter","./TableOfContentsHeadingNode"],function(h,e,g){return h(e,{getApplicableNodeClass:function(){return g}})})},"MW/rtc/plugins/tableofcontents/model/TableOfContentsListContentConverterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./TableOfContentsListContentConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/tableofcontents/model/TableOfContentsListContentConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/contentconverter/base/InnerNodeContentConverter","./TableOfContentsList"],function(h,e,g){return h(e,{getApplicableNodeClass:function(){return g}})})},"MW/rtc/plugins/tableofcontents/view/TableOfContentsListCoordinateConverterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./TableOfContentsListCoordinateConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/tableofcontents/view/TableOfContentsListCoordinateConverter":function(){define(["dojo/_base/declare","MW/rtc/plugins/tableofcontents/model/TableOfContentsList","MW/rtc/view/coordinateconverter/base/BaseCoordinateConverter"],function(h,e,g){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return e}})})},
"MW/rtc/view/coordinateconverter/base/BaseCoordinateConverter":function(){define(["dojo/_base/declare","MW/rtc/model/Position","../CoordinateConverterUtilities","./AbstractCoordinateConverter"],function(h,e,g,d){return h(d,{constructor:function(){},getPositionFromCoordinate:function(c,b){return new e(b,0)},getCoordinateFromPosition:function(c){return null},getDomNode:function(c){return c.box},_getClientRects:function(c){var b=this.getDomNode(c);c=[];if(b&&(b=b.getBoundingClientRect(),0<b.width||0<
b.height))c=[b];return c},getClosestRect:function(c,b,a){c=this._getSubClientRects(c,b,a);if(0===c.length)return null;a={x:b.x,y:b.y};var f=this._getVerticalRangeOfRects(c);b.y<f.top?a.y=f.top:b.y>f.bottom&&(a.y=f.bottom);return this._upwardSearchClosestRect(a,c,f)||this._downwardSearchClosestRect(a,c,f)},_getSubClientRects:function(c,b,a){c=c.children.map(a);return Array.prototype.concat.apply([],c)},_upwardSearchClosestRect:function(c,b,a){for(var f=c.y;f>=a.top;f-=1){var d=this._getClosestRect({x:c.x,
y:f},b);if(d)return d}return null},_downwardSearchClosestRect:function(c,b,a){for(var f=c.y+1;f<=a.bottom;f+=1){var d=this._getClosestRect({x:c.x,y:f},b);if(d)return d}return null},_getVerticalRangeOfRects:function(c){var b={},a=Infinity,f=-Infinity;c.forEach(function(c){c.top<a&&(a=b.top=c.top);c.bottom>f&&(f=b.bottom=c.bottom)},this);return b},_getClosestRect:function(c,b){var a,f=[];b.some(function(b){if(g.isCoordinateWithinRect(c,b))return a=b,!0;g.isCoordinateYWithinRect(c,b)&&f.push(b)},this);
if(a)return a;if(0===f.length)return null;var d=Infinity,e=-Infinity;f.forEach(function(a){a.top<d&&(d=a.top);a.bottom>e&&(e=a.bottom)},this);var n=b.filter(function(a){if(a.top>=d&&a.top<e||a.bottom>d&&a.bottom<=e||a.top>=d&&a.bottom<=e||a.top<=d&&a.bottom>=e)return!0},this),h=Infinity;n.some(function(f){if(g.isCoordinateXWithinRect(c,f))return a=f,!0;var b=g.getClosestXDistanceToRect(c,f);b<h&&(a=f,h=b)},this);return a}})})},"MW/rtc/view/coordinateconverter/CoordinateConverterUtilities":function(){define([],
function(){return{convertFromClientToOffset:function(h,e){var g=this._getDifferenceBetweenOffsetAndClient(e);return{x:h.x-g.x,y:h.y-g.y}},convertFromOffsetToClient:function(h,e){var g=this._getDifferenceBetweenOffsetAndClient(e);return{x:h.x+g.x,y:h.y+g.y}},_getDifferenceBetweenOffsetAndClient:function(h){var e=h.getDomTargetBoundingClientRect();h=h.getDomTargetDomNode();return{x:e.left-h.scrollLeft,y:e.top-h.scrollTop}},getProjectedCoordinate:function(h,e){var g=h.x,d=h.y;this.isCoordinateXWithinRect(h,
e)||(g>e.right?g=e.right:g<e.left&&(g=e.left));this.isCoordinateYWithinRect(h,e)||(d<e.top?d=e.top:d>e.bottom&&(d=e.bottom));return{x:g,y:d}},getOffsetRectFromDomNode:function(h){var e=h.offsetLeft,g=h.offsetTop,d=h.offsetWidth;h=h.offsetHeight;return{left:e,right:e+d,top:g,bottom:g+h,width:d,height:h}},isCoordinateWithinRect:function(h,e){return e&&this.isCoordinateXWithinRect(h,e)&&this.isCoordinateYWithinRect(h,e)},isCoordinateWithinRects:function(h,e){return e.some(function(e){return this.isCoordinateWithinRect(h,
e)},this)},isCoordinateXWithinRect:function(h,e){return h.x>=e.left&&h.x<=e.right},isCoordinateYWithinRect:function(h,e){return h.y>=e.top&&h.y<=e.bottom},isCoordinateAboveOrLeftOfRect:function(h,e){return this.isCoordinateAboveRect(h,e)||this.isCoordinateYWithinRect(h,e)&&this.isCoordinateLeftOfRect(h,e)},isCoordinateBelowOrRightOfRect:function(h,e){return this.isCoordinateBelowRect(h,e)||this.isCoordinateYWithinRect(h,e)&&this.isCoordinateRightOfRect(h,e)},isCoordinateAboveRect:function(h,e){return h.y<
e.top},isCoordinateBelowRect:function(h,e){return h.y>e.bottom},isCoordinateLeftOfRect:function(h,e){return h.x<e.left},isCoordinateRightOfRect:function(h,e){return h.x>e.right},isCoordinateAtRightHalfOfRect:function(h,e){return h.x>e.left+e.width/2},getClosestXDistanceToRect:function(h,e){return Math.min(Math.abs(e.left-h.x),Math.abs(e.right-h.x))},getClosestYDistanceToRect:function(h,e){return Math.min(Math.abs(e.top-h.y),Math.abs(e.bottom-h.y))},getClientRectsArray:function(h){return 0===h.length?
[]:Object.keys(h).map(function(e){return h[e]})},getClientRectsByRange:function(h){var e=[];h.forEach(function(g){g=g.getClientRects();g=this.getClientRectsArray(g);e=e.concat(g)},this);return e}}})},"MW/rtc/view/coordinateconverter/base/AbstractCoordinateConverter":function(){define(["dojo/_base/declare","mw-log/Log","MW/rtc/abstract/AbstractConverter"],function(h,e,g){return h(g,{getPositionFromCoordinate:function(d,c){e.error("Unimplemented: getPositionFromCoordinate")},getCoordinateFromPosition:function(d){e.error("Unimplemented: getCoordinateFromPosition")},
getDelegatedPositionForCoordinate:function(d){},getDomNode:function(d){e.error("Unimplemented: getDomNode")},getClientRects:function(d){var c=this._getClientRects(d);c.forEach(function(b){b.associatedNode=d},this);return c},_getClientRects:function(d){return[]},getClosestRect:function(d,c,b){e.error("Unimplemented: getClosestRect")}})})},"MW/rtc/plugins/tableofcontents/view/TableOfContentsContainerCoordinateConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"./TableOfContentsContainerCoordinateConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/tableofcontents/view/TableOfContentsContainerCoordinateConverter":function(){define(["dojo/_base/declare","MW/rtc/plugins/tableofcontents/model/TableOfContentsContainer","MW/rtc/view/coordinateconverter/base/VerticalAlignCoordinateConverter"],function(h,e,g){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return e}})})},
"MW/rtc/view/coordinateconverter/base/VerticalAlignCoordinateConverter":function(){define(["dojo/_base/declare","../CoordinateConverterUtilities","./BaseCoordinateConverter"],function(h,e,g){return h(g,{_SEARCH_BIDIRECTION:0,_SEARCH_UPWARD:1,_SEARCH_DOWNWARD:2,getClosestRect:function(d,c,b){for(var a=0,f=d.children.length-1;a<=f;){var k=Math.floor((a+f)/2),g=this._getClosestRectFrom(d,k,b,this._SEARCH_BIDIRECTION);if(!g)return null;if(e.isCoordinateAboveRect(c,g))f=k-1;else if(e.isCoordinateBelowRect(c,
g))a=k+1;else break}a>f&&(f=this._getClosestRectFrom(d,f,b,this._SEARCH_UPWARD),d=this._getClosestRectFrom(d,a,b,this._SEARCH_DOWNWARD),f&&d&&(g=this._chooseUpOrDownRect(c,f,d)));return g},_chooseUpOrDownRect:function(d,c,b){var a=e.getClosestYDistanceToRect(d,c);d=e.getClosestYDistanceToRect(d,b);return a<d?c:b},_getClosestRectFrom:function(d,c,b,a){for(var f=0,e=d.children.length;f<e;){if(0<=[this._SEARCH_UPWARD,this._SEARCH_BIDIRECTION].indexOf(a)){var g=this._getRectForChildNode(d,c-f,b);if(g)return g}if(0<=
[this._SEARCH_DOWNWARD,this._SEARCH_BIDIRECTION].indexOf(a)&&(g=this._getRectForChildNode(d,c+f,b)))return g;var f=f+1,g=0>c-f,n=c+f>d.children.length-1;if(a===this._SEARCH_UPWARD&&g||a===this._SEARCH_DOWNWARD&&n||a===this._SEARCH_BIDIRECTION&&g&&n)break}return null},_getRectForChildNode:function(d,c,b){return(d=d.children[c])?b(d)[0]:null}})})},"MW/rtc/plugins/tableofcontents/view/TableOfContentsHeadingNodeCoordinateConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"./TableOfContentsHeadingNodeCoordinateConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/tableofcontents/view/TableOfContentsHeadingNodeCoordinateConverter":function(){define(["dojo/_base/declare","../model/TableOfContentsHeadingNode","MW/rtc/view/coordinateconverter/base/VerticalAlignCoordinateConverter"],function(h,e,g){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return e}})})},
"MW/rtc/margin/TraditionalLineNumberDecoratorProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/margin/TraditionalLineNumberDecorator"],function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.view","rtc.linenumberservice","rtc.cursorcontroller"]}},createInstance:function(d,c,b){return new g(d,c,b,!0,!0)}})})},"MW/rtc/margin/TraditionalLineNumberDecorator":function(){define(["dojo/_base/declare",
"dojo/dom-class","MW/rtc/margin/LineNumberDecorator"],function(h,e,g){return h(g,{hasLayerForLineNumber:function(d,c){return this.inherited(arguments)&&!c},handleMouseDown:function(d,c){var b=this._view.getCoordinateFromEvent(this._view.fixEvent(d)),b=this._view.getLineColumnFromCoordinate(b);this._cursorController.selectLine(b.line,!0)},_adjustAlignment:function(){}})})},"MW/rtc/margin/LineNumberDecorator":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-class dojo/dom-construct mw-log/Log MW/rtc/margin/AbstractLineMarginDecorator MW/rtc/margin/MarginUtilities MW/rtc/model/CodeUtilities MW/rtc/view/ViewEventUtilities".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n){return h(f,{_CHARACTER_WIDTH:8,_DEFAULT_NUMBER_OF_CHARACTERS_IN_MARGIN:2,_PADDING:8,_DEFAULT_MIN_WIDTH:16,_LINE_NUMBER_HEIGHT:17,constructor:function(a,f,b,c,d){this._lineNumberService=f;this._view=a;this._cursorController=b;this._showLineNumbers=c;this._minWidth=(this._isCollapsible=d)?0:this._DEFAULT_MIN_WIDTH;this._padding=this._isCollapsible?0:this._PADDING;this.own(g.after(this._view,"onViewUpdated",e.hitch(this,"_updateWidthOnHeightChange"),!0))},hasLayerForLineNumber:function(a,
f){return 0<=this._lineNumberService.getCodeLineNumberFromLineNumber(a)&&this._shouldShowLineNumbers()},createDecorationForLineNumber:function(a,f){var c=this._lineNumberService.getCodeLineNumberFromLineNumber(a),d=b.create("div");d.textContent=c;this._applyStyle(d,a,f);return d},_applyStyle:function(a,f,b){b=[];c.add(a,"gutterNumber");this._adjustAlignment(a,f);b.push("lineNumber");this._addTestTag(a,b,f)},_adjustAlignment:function(a,f){var b=k.getTopForMiddleAlignmentWithLineNumber(this._view,f,
this._LINE_NUMBER_HEIGHT);a.style.top=b+"px"},_addTestTag:function(a,f,b){b=f&&0<f.length?b+"_"+f.join("_"):b+"_invalid";d.set(a,"data-testid",b)},_shouldShowLineNumbers:function(){return this._showLineNumbers},_updateWidthOnHeightChange:function(a){(n.hasHeightEvent(a)||n.hasLayoutEvent(a))&&this._updateWidth()},setShowLineNumber:function(a){this._showLineNumbers!==a&&(this._showLineNumbers=a,this._updateWidth(),this.onUpdate())},getWidth:function(){return Math.max(this._width,this._minWidth)+this._padding},
_updateWidth:function(){var a=this._getNumberOfCharactersToPaintMarginAgainst(),a=this._shouldShowLineNumbers()?this._CHARACTER_WIDTH*a:this._minWidth;this._width!==a&&(this._width=a,this.onWidthChange())},onWidthChange:function(){},_getNumberOfCharactersToPaintMarginAgainst:function(){return Math.max(this._calculateGreatestLineNumberCharacters(),this._DEFAULT_NUMBER_OF_CHARACTERS_IN_MARGIN)},_calculateGreatestLineNumberCharacters:function(){var a=this._lineNumberService.getNumberOfCodeLines();return String(a).length}})})},
"MW/rtc/margin/AbstractLineMarginDecorator":function(){define(["dojo/_base/declare","MW/rtc/margin/AbstractMarginDecorator"],function(h,e){return h(e,{hasLayerForLineNumber:function(e,d){throw Error("Unimplemented API: MW.rtc.margin.AbstractLineMarginDecorator.hasLayerForLineNumber");},createDecorationForLineNumber:function(e,d){throw Error("Unimplemented API: MW.rtc.margin.AbstractLineMarginDecorator.createDecorationForLineNumber");}})})},"MW/rtc/margin/AbstractMarginDecorator":function(){define(["dojo/_base/declare",
"MW/rtc/abstract/AbstractPlugin"],function(h,e){return h(e,{handleMouseDown:function(e,d){},handleMouseUp:function(e,d){},handleMouseClick:function(e,d){},handleMouseLeave:function(e,d){},handleMouseMove:function(e,d){},onUpdate:function(){},onWidthChange:function(){},getWidth:function(){throw Error("Unimplemented API: MW.rtc.margin.AbstractMarginDecorator.getWidth");}})})},"MW/rtc/margin/MarginUtilities":function(){define([],function(){return{_getTopForMiddleAlignment:function(h,e){return Math.floor((h-
e)/2)},getTopForMiddleAlignmentWithLineNumber:function(h,e,g){h=h.getPreciseLineHeight(e+1);return this._getTopForMiddleAlignment(h,g)}}})},"MW/rtc/margin/settings/LineNumberPreferenceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/margin/settings/LineNumberPreference"],function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.settings.service","margin.linenumberdecorator"]}},createInstance:function(d,
c){return new g(d,c)},priority:function(){return 2}})})},"MW/rtc/margin/settings/LineNumberPreference":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,e){return h(e,{_SHOW_LINE_NUMBER_ID:"matlab.editor.displaysettings.ShowLineNumbers",constructor:function(e,d){this._settingService=e;this._lineNumberDecorator=d;this.own(this._settingService.listenTo(this._SHOW_LINE_NUMBER_ID,this._onPreferencesChanged.bind(this)))},_onPreferencesChanged:function(){this._lineNumberDecorator.setShowLineNumber(this._settingService.get(this._SHOW_LINE_NUMBER_ID,
!0))}})})},"MW/rtc/model/io/SerializersProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/Serializers"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.serializer"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/model/io/Serializers":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(h,e){return h(null,{constructor:function(e){this._serializersArray=e},getSerializer:function(e){var d=null;
this._serializersArray.some(function(c){if(c.getXMLType(e)===e||c.getNodeType()===e)d=c},this);return d}})})},"MW/rtc/model/io/serializers/providers/containers/CodeContainerSerializerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/containers/CodeContainerSerializer"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[""]}},createInstance:function(){return new g}})})},"MW/rtc/model/io/serializers/containers/CodeContainerSerializer":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/model/io/DocumentTag","MW/rtc/model/io/XmlUtils","MW/rtc/model/io/serializers/containers/ContainerSerializer"],function(h,e,g,d,c){return h(c,{_CHILD_TYPE:"PlainTextNode",constructor:function(){this._nonPlainTextObjects=[]},write:function(b,a,f){a=document.createElement(this.getXMLType());var c=d.createXMLElement(!1),e=d.createParagraphProperty(this.getXMLType());c.appendChild(e);b[0].anchorId&&(e=d.createBookmarkStart(g.BOOKMARK_PREFIX+b[0].anchorId,b[0].anchorId),c.appendChild(e));
var n={text:"",className:""};b.forEach(function(a,f){this._writeCodeAndCacheNonPlainTextObjects(a,n,f)},this);n.text=n.text.slice(0,-1);e=f.getSerializer(this._CHILD_TYPE);c.appendChild(e.write(n));this._writeNonPlainText(f,c);a.appendChild(c);b[0].anchorId&&(b=d.createBookmarkEnd(b[0].anchorId),c.appendChild(b));return a},_writeNonPlainText:function(b,a){this._nonPlainTextObjects.forEach(function(f){var c=b.getSerializer(f.className);a.appendChild(c.write(f))},this);this._nonPlainTextObjects=[]},
read:function(b,a,f){var c=[],e=f.getSerializer(this._CHILD_TYPE).read(b);e.readObject.forEach(function(a){var f={className:this.getNodeType(),children:[]};f.children.push(a);c.push(f)},this);b.forEach(function(b){for(var e=b.getElementsByTagNameNS(g.NAMESPACE_URL,g.CUSTOM_XML_TAG),l=0;l<e.length;l++){var h=d.getClassName(e[l]);c=f.getSerializer(h).read(e[l],a,c)}if((b=d.getBookmarkStart(b))&&b.id)c[0].anchorId=b.id},this);e=e.readStatus;return{readObject:c,readStatus:!0}},_writeCodeAndCacheNonPlainTextObjects:function(b,
a,f){b.children.forEach(function(b){a.text+=b.text;a.className=this._CHILD_TYPE;b.className!==this._CHILD_TYPE&&(b.startOffsetLine=f,b.endOffsetLine=f,this._nonPlainTextObjects.push(b))},this);a.text+="\n"},getXMLType:function(){return"code"},getNodeType:function(){return"LineNode"}})})},"MW/rtc/model/io/serializers/providers/containers/ContainerSerializerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/containers/ContainerSerializer"],
function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/model/io/serializers/providers/containers/HeadingContainerSerializerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/containers/HeadingContainerSerializer"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/model/io/serializers/containers/HeadingContainerSerializer":function(){define("dojo/_base/declare dojo/_base/lang MW/rtc/model/io/DocumentTag MW/rtc/model/io/serializers/containers/ContainerSerializer MW/rtc/model/io/XmlUtils MW/rtc/plugins/richtext/HeadingUtilities mw-log/Log".split(" "),
function(h,e,g,d,c,b,a){return h(d,{_INTRODUCED_VERSION:"R2018b",write:function(a,b,c){for(var d=document.createElement(this.getXMLType()),e=0;e<a.length;e++){var g=this._writeParagraph(a[e],b,c);g&&d.appendChild(g)}return d},_writeParagraph:function(f,d,e){var n=c.createXMLElement(),h=b.getHeadingFormatByLevel(f.level),m=c.createParagraphProperty(h),m=c.addParagraphProperty(m,g.JUSTIFCATION_TAG_NAME,f.align);b.isFormatIntroducedInVersion(h,this._INTRODUCED_VERSION)&&(h=c.createParagraphProperty(g.HEADING_FORMAT_VALUE),
h=c.addParagraphProperty(h,g.JUSTIFCATION_TAG_NAME,f.align),m=c.createAlternateContent(this._INTRODUCED_VERSION,m,h));n.appendChild(m);f.anchorId&&(m=c.createBookmarkStart(g.BOOKMARK_PREFIX+f.anchorId,f.anchorId),n.appendChild(m));var q=!1;f.children.forEach(function(f){var b=e.getSerializer(f.className);b?n.appendChild(b.write(f,d,e)):(q=!0,a.assert(q,!0,"Unrecognized node type:"+f.className))},this);f.anchorId&&(f=c.createBookmarkEnd(f.anchorId),n.appendChild(f));q&&1===n.children.length&&(n=null);
return n},read:function(a,d,e){var n=this.inherited(arguments);a.forEach(function(a,f){var d=c.getParagraphProperty(a,g.JUSTIFCATION_TAG_NAME);d&&(n.readObject[f].align=d);var d=c.getAttribute(a),e=c.getBookmarkStart(a);e&&e.id&&(n.readObject[f].anchorId=e.id);n.readObject[f].level=b.getLevelByHeadingFormat(d)});return n},getXMLType:function(a){return!b.isFormatHeading(a)?b.getDefaultHeadingFormat():a},getNodeType:function(){return"HeadingNode"},mustMerge:function(a,b){return c.getParagraphProperty(a,
g.JUSTIFCATION_TAG_NAME)===c.getParagraphProperty(b,g.JUSTIFCATION_TAG_NAME)}})})},"MW/rtc/model/io/serializers/providers/containers/HyperlinkContainerSerializerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/containers/HyperlinkContainerSerializer"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/model/io/serializers/containers/HyperlinkContainerSerializer":function(){define("dojo/_base/declare dojo/_base/lang mw-utils/Utils MW/rtc/model/io/XmlUtils MW/rtc/model/io/DocumentTag MW/rtc/model/io/serializers/containers/ContainerSerializer".split(" "),
function(h,e,g,d,c,b){return h(b,{write:function(a,f,b){var e=document.createElement(this.getXMLType()),g=0===a.hyperlink.indexOf("internal:")?c.ANCHOR:c.DOC_LOCATION,h=d.createHyperLinkTag(a.hyperlink,g);a.children.forEach(function(a){var c=b.getSerializer(a.className);h.appendChild(c.write(a,f))},this);e.appendChild(h);return e.childNodes[0]},read:function(a){var f=this.inherited(arguments);Array.isArray(a)?a.forEach(function(a,b){f.readObject[b].hyperlink=this._getTarget(a)},this):f.readObject.hyperlink=
this._getTarget(a);return f},_getTarget:function(a){var f=a.getAttributeNS(c.NAMESPACE_URL,c.DOC_LOCATION);f||(f=a.getAttributeNS(c.NAMESPACE_URL,c.ANCHOR));return f},getXMLType:function(){return"hyperlink"},getNodeType:function(){return"HyperlinkNode"}})})},"MW/rtc/model/io/serializers/providers/containers/ListContainerSerializerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/containers/ListContainerSerializer"],function(h,e,g){return h(e,
{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/model/io/serializers/containers/ListContainerSerializer":function(){define("dojo/_base/declare dojo/_base/lang MW/rtc/model/io/DocumentTag MW/rtc/model/io/XmlUtils MW/rtc/model/io/serializers/containers/ContainerSerializer MW/rtc/model/io/serializers/containers/ListItemContainerSerializer".split(" "),function(h,e,g,d,c,b){return h(c,{_lookup:{unordered:1,ordered:2},constructor:function(a){this._listItemHandler=
new b(a);this.inherited(arguments)},write:function(a,f,b){var c=document.createElement(this.getXMLType());a.forEach(function(a){this._writeListParagraph(a,c,f,b)},this);return c},read:function(a,f,b){var c=[],e=d.getListType(a[0]),h,m={className:this.getNodeType(),children:[]};a.forEach(function(a){e!==d.getListType(a)&&(c.push(m),m={className:this.getNodeType(),children:[]},e=d.getListType(a));var r=d.getParagraphProperty(a,g.JUSTIFCATION_TAG_NAME);h=this._readListParagraph(m,a,{type:e,align:r},
f,b);if((a=d.getBookmarkStart(a))&&a.id)c.anchorId=a.id},this);c.push(m);return{readObject:c,readStatus:h}},_readListParagraph:function(a,f,b,c,e){f=this._listItemHandler.read(f,c,e);a.type=d.getKeyFromValue(this._lookup,parseInt(b.type,10));f.readObject.align=b.align;a.children.push(f.readObject);return f.readStatus},_writeListParagraph:function(a,f,b,c){var e=this._lookup[a.type];a.children.forEach(function(h,m){var q=d.createXMLElement(),r=d.createParagraphProperty(this.getNodeType());r.appendChild(d.createListType(e));
r=d.addParagraphProperty(r,g.JUSTIFCATION_TAG_NAME,h.align);q.appendChild(r);0===m&&a.anchorId&&(r=d.createBookmarkStart(g.BOOKMARK_PREFIX+a.anchorId,a.anchorId),q.appendChild(r),r=d.createBookmarkEnd(a.anchorId),q.appendChild(r));for(var r=this._listItemHandler.write(h,b,c),s=r.length;0!==s;)q.appendChild(r[0]),s--;f.appendChild(q)},this)},getXMLType:function(){return"ListParagraph"},getNodeType:function(){return"ListParagraph"},mustMerge:function(){return!0}})})},"MW/rtc/model/io/serializers/containers/ListItemContainerSerializer":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/model/io/serializers/containers/ContainerSerializer"],function(h,e,g){return h(g,{write:function(d,c,b){var a=document.createElement(this.getXMLType());d.children.forEach(function(f){var d=b.getSerializer(f.className);a.appendChild(d.write(f,c,b))},this);return a.childNodes},getXMLType:function(){return"ListItem"},getNodeType:function(){return"ListItem"},mustMerge:function(d,c){return!0}})})},"MW/rtc/model/io/serializers/providers/containers/ListItemContainerSerializerProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/containers/ListItemContainerSerializer"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/model/io/serializers/providers/containers/LiveAppLineContainerSerializerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/containers/LiveAppLineContainerSerializer"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},
createInstance:function(){return new g}})})},"MW/rtc/model/io/serializers/containers/LiveAppLineContainerSerializer":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/model/io/XmlUtils","MW/rtc/model/io/serializers/containers/ContainerSerializer"],function(h,e,g,d){return h(d,{write:function(c,b,a){var f=document.createElement(this.getXMLType());c=this._writeParagraph(c,b,a);f.appendChild(c);return f},_writeParagraph:function(c,b,a){c=g.createXMLElement();var f=g.createParagraphProperty(this.getXMLType());
c.appendChild(f);var f={className:"RichTextNode",text:""},d=a.getSerializer(f.className);c.appendChild(d.write(f,b,a));return c},read:function(c,b,a){},getXMLType:function(){return"text"},getNodeType:function(){return"LiveAppLineNode"}})})},"MW/rtc/model/io/serializers/providers/containers/RichTextContainerSerializerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/containers/RichTextContainerSerializer"],function(h,e,g){return h(e,
{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/model/io/serializers/providers/containers/SectionBreakContainerSerializerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/containers/SectionBreakContainerSerializer"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/model/io/serializers/containers/SectionBreakContainerSerializer":function(){define(["dojo/_base/declare",
"MW/rtc/model/io/XmlUtils","MW/rtc/model/io/DocumentTag","MW/rtc/model/io/serializers/Serializable"],function(h,e,g,d){return h(d,{write:function(c,b,a){c=e.createXMLElement(this.getXMLType());b=e.createXMLElement();a=e.createXMLElement(g.PARAGRAPH_PROPERTY_TAG_NAME);var f=e.createXMLElement(g.SECTION_PROPERTY_TAG_NAME);a.appendChild(f);b.appendChild(a);c.appendChild(b);return c},read:function(c,b,a){return{readObject:[{children:[],className:this.getNodeType()}],readStatus:!0}},getXMLType:function(){return"sectionbreak"},
getNodeType:function(){return"SectionBreak"}})})},"MW/rtc/model/io/serializers/providers/nodes/EquationSerializerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/nodes/EquationSerializer"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/model/io/serializers/nodes/EquationSerializer":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/model/io/XmlUtils",
"MW/rtc/model/io/DocumentTag","MW/rtc/model/io/serializers/Serializable"],function(h,e,g,d,c){return h(c,{_RELATIONSHIP_TARGET:"/mathml/",_PART_NAME:"eqn",_PART_TYPE:"text/xml",_PART_EXTENSION:"mml",AUTO_CENTER_CLASS:!0,write:function(b,a){var f=document.createElement(this.getXMLType()),c=g.createCustomXMLTag(this.getXMLType()),e=g.createXMLElement(d.CUSTOM_XML_PROPERTY),n=g.createCustomXMLAttribute("displayStyle",b.displayStyle);e.appendChild(n);c.appendChild(e);n=b.encoding||"tex";"mathml"===n&&
(n=g.createCustomXMLAttribute("encoding",n),e.appendChild(n),n=this._createRelationship(b,a),e.appendChild(n));e=g.createXMLElement(d.RUN_OF_TEXT_TAG_NAME);n=g.createXMLElement(d.TEXT_TAG_NAME);if(b.texString){var h=document.createTextNode(b.texString);n.appendChild(h)}e.appendChild(n);c.appendChild(e);f.appendChild(c);return f.childNodes[0]},_createRelationship:function(b,a){var f=a.getPartURI(this._RELATIONSHIP_TARGET,this._PART_NAME,this._PART_EXTENSION),c=this._findDuplicates(b,a);c?c=this._getRelationshipIdFromPart(c,
a):(c=this._createPartRelationship(a.getPart(d.DOCUMENT_TARGET),f),this._createPart(f,this._PART_TYPE,a).setContent(b.mathmlString),b.relationshipId=c);return g.createCustomXMLAttribute(d.RELATIONSHIP_ID_TAG_NAME,c)},_findDuplicates:function(b,a){var f=null;a.getParts().forEach(function(a){a.getContent()&&a.getContent()===b.mathmlString&&(f=a)});return f},_getRelationshipIdFromPart:function(b,a){var f=a.getPart(d.DOCUMENT_TARGET).getAllRelationships().getRelationshipCollection(),c;for(c in f)if(f[c].getTarget()===
b.getPartURI())return c},_createPart:function(b,a,f){return f.createPart(b,a)},_createPartRelationship:function(b,a){return b.createRelationship(d.MATHML_RELATIONSHIP_TYPE,a)},_readAttributes:function(b,a,f){b=b.getElementsByTagNameNS(d.NAMESPACE_URL,d.CUSTOM_XML_PROPERTY)[0].getElementsByTagNameNS(d.NAMESPACE_URL,d.CUSTOM_XML_ATTRIBUTE);for(var c=0;c<b.length;c++){var e=b[c].getAttributeNS(d.NAMESPACE_URL,d.NAME_TAG),g=b[c].getAttributeNS(d.NAMESPACE_URL,d.CUSTOM_XML_VALUE_TAG);e===d.RELATIONSHIP_ID_TAG_NAME&&
(e="mathmlString",g=this._readMathMLPart(a,g));f[e]=g}f.encoding=f.encoding||"tex"},_readMathMLPart:function(b,a){var f=b.getPart(d.DOCUMENT_TARGET).getRelationship(a).getTarget();return b.getPart(f).getContent()},read:function(b,a){var f={className:this.getNodeType()};this._readAttributes(b,a,f);var c=b.getElementsByTagNameNS(d.NAMESPACE_URL,d.RUN_OF_TEXT_TAG_NAME),c=g.getTextFromRun(c[0]);f.texString=c;return{readObject:f,readStatus:!0}},getXMLType:function(){return"equation"},getNodeType:function(){return"EquationNode"}})})},
"MW/rtc/model/io/serializers/providers/nodes/ImageSerializerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/nodes/ImageSerializer"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[""]}},createInstance:function(){return new g}})})},"MW/rtc/model/io/serializers/nodes/ImageSerializer":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/model/io/XmlUtils","MW/rtc/model/io/DocumentTag","MW/rtc/model/io/serializers/Serializable"],
function(h,e,g,d,c){return h(c,{_RELATIONSHIP_TARGET:"/media/",_PART_NAME:"image",_PART_TYPE:"image",_IMAGE_SOURCE:"imgSrc",AUTO_CENTER_CLASS:!0,write:function(b,a){var f=document.createElement(this.getXMLType()),c=g.createCustomXMLTag(this.getXMLType()),e=g.createXMLElement(d.CUSTOM_XML_PROPERTY),n=g.createCustomXMLAttribute(d.HEIGHT_ATTRIBUTE_NAME,b.height);e.appendChild(n);n=g.createCustomXMLAttribute(d.WIDTH_ATTRIBUTE_NAME,b.width);e.appendChild(n);n=this._createRelationship(b,a);e.appendChild(n);
c.appendChild(e);f.appendChild(c);return f.childNodes[0]},_createRelationship:function(b,a){var f=g.getImageExtension(b.imgSrc),c=a.getPartURI(this._RELATIONSHIP_TARGET,this._PART_NAME,f),e=this._findDuplicates(b,a);e?e=this._getRelationshipIdFromPart(e,a):(e=this._createPartRelationship(a.getPart(d.DOCUMENT_TARGET),c),this._createPart(c,this._PART_TYPE+"/"+f,a).setContent(b.imgSrc),b.relationshipId=e);return g.createCustomXMLAttribute(d.RELATIONSHIP_ID_TAG_NAME,e)},_findDuplicates:function(b,a){var f=
null;a.getParts().forEach(function(a){a.getContent()&&a.getContent()===b.imgSrc&&(f=a)});return f},_getRelationshipIdFromPart:function(b,a){var f=a.getPart(d.DOCUMENT_TARGET).getAllRelationships().getRelationshipCollection(),c;for(c in f)if(f[c].getTarget()===b.getPartURI())return c},_createPart:function(b,a,f){return f.createPart(b,a)},_createPartRelationship:function(b,a){return b.createRelationship(d.IMAGE_RELATIONSHIP_TYPE,a)},read:function(b,a){for(var f={className:this.getNodeType()},c=b.getElementsByTagNameNS(d.NAMESPACE_URL,
d.CUSTOM_XML_PROPERTY)[0].getElementsByTagNameNS(d.NAMESPACE_URL,d.CUSTOM_XML_ATTRIBUTE),e=0;e<c.length;e++){var g=c[e].getAttributeNS(d.NAMESPACE_URL,d.NAME_TAG),h=c[e].getAttributeNS(d.NAMESPACE_URL,d.CUSTOM_XML_VALUE_TAG);g===d.RELATIONSHIP_ID_TAG_NAME&&(g=this._IMAGE_SOURCE,h=this._readImagePart(a,h));f[g]=h}return{readObject:f,readStatus:!0}},_readImagePart:function(b,a){var f=b.getPart(d.DOCUMENT_TARGET).getRelationship(a).getTarget();return b.getPart(f).getContent()},getXMLType:function(){return"image"},
getNodeType:function(){return"ImageNode"}})})},"MW/rtc/model/io/serializers/providers/nodes/LiveControlSerializerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/nodes/LiveControlSerializer"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/model/io/serializers/nodes/LiveControlSerializer":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/model/io/XmlUtils",
"MW/rtc/model/io/DocumentTag","MW/rtc/model/io/serializers/Serializable"],function(h,e,g,d,c){return h(c,{_INTRODUCED_VERSION:"R2018a",write:function(b){var a=document.createElement(this.getXMLType()),f=g.createCustomXMLTag(this.getXMLType()),c=g.createXMLElement(d.CUSTOM_XML_PROPERTY),c=this._writeAttributes(c,b);f.appendChild(c);b=g.createAlternateContentXMLElementNS(d.MCNAMESPACE_TAG,d.ALTERNATECONTENT_TAG);var c=g.createAlternateContentXMLElementNS(d.MCNAMESPACE_TAG,d.CHOICE_TAG),e=g.createAlternateContentXMLElementNS(d.MCNAMESPACE_TAG,
d.FALLBACK_TAG);c.setAttribute(d.REQUIRES_ATTRIBUTE_NAME,this._INTRODUCED_VERSION);c.appendChild(f);b.appendChild(c);b.appendChild(e);a.appendChild(b);return a.childNodes[0]},_writeAttributes:function(b,a){b=this._writeAttribute(b,d.LIVE_CONTROL_CONTEXT_ATTRIBUTE_NAME,JSON.stringify(a.context));b=this._writeAttribute(b,d.LIVE_CONTROL_TEXT_ATTRIBUTE_NAME,a.text);b=this._writeAttribute(b,d.LIVE_CONTROL_START_OFFSET_LINE_ATTRIBUTE_NAME,a.startOffsetLine);b=this._writeAttribute(b,d.LIVE_CONTROL_START_COLUMN_ATTRIBUTE_NAME,
a.startColumn);b=this._writeAttribute(b,d.LIVE_CONTROL_END_OFFSET_LINE_ATTRIBUTE_NAME,a.endOffsetLine);return b=this._writeAttribute(b,d.LIVE_CONTROL_END_COLUMN_ATTRIBUTE_NAME,a.endColumn)},_writeAttribute:function(b,a,f){a=g.createCustomXMLAttribute(a,f);b.appendChild(a);return b},read:function(b,a,f){a={className:this.getNodeType()};b=b.getElementsByTagNameNS(d.NAMESPACE_URL,d.CUSTOM_XML_PROPERTY)[0].getElementsByTagNameNS(d.NAMESPACE_URL,d.CUSTOM_XML_ATTRIBUTE);for(var c=0;c<b.length;c++){var e=
b[c].getAttributeNS(d.NAMESPACE_URL,d.NAME_TAG);a[e]=b[c].getAttributeNS(d.NAMESPACE_URL,d.CUSTOM_XML_VALUE_TAG);"context"===e&&(a[e]=JSON.parse(a[e]))}return this._modifyLastPlainTextNode(f,a)},_modifyLastPlainTextNode:function(b,a){for(var f=a.startOffsetLine,c=b[f].children,d=c.length,e=c[d-1].text,g="",h=0;h<d-1;h++)g+=c[h].text;b[f].children.splice(-1,1);d=g.length;c=a.endColumn-d;d=e.substring(0,a.startColumn-d);e=e.substring(c,e.length);b=this._appendPlainTextNodeIfValid(d,b,f);b[f].children.push(a);
return this._appendPlainTextNodeIfValid(e,b,f)},_appendPlainTextNodeIfValid:function(b,a,f){b&&a[f].children.push({text:b,className:"PlainTextNode"});return a},getXMLType:function(){return"livecontrol"},getNodeType:function(){return"LiveControlNode"}})})},"MW/rtc/model/io/serializers/providers/nodes/PlainTextSerializerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/nodes/PlainTextSerializer"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},
createInstance:function(){return new g}})})},"MW/rtc/model/io/serializers/nodes/PlainTextSerializer":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/model/io/XmlUtils","MW/rtc/model/io/DocumentTag","MW/rtc/model/io/serializers/Serializable"],function(h,e,g,d,c){return h(c,{write:function(b){var a=g.createXMLElement(d.RUN_OF_TEXT_TAG_NAME),f=g.createXMLElement(d.TEXT_TAG_NAME),c=document.implementation.createDocument(d.NAMESPACE_URL,"textDocument",null);this._hasCDATAEndingSequence(b.text)?
this._modifyTextNodeWithEndingSequence(c,f,b.text):f.appendChild(this._createCDATASection(c,b.text));a.appendChild(f);return a},read:function(b){var a=!0,f=[];b.forEach(function(b){b=this._readCodeParagraph(b);f=b.readObject;a=a&&b.readStatus},this);return{readObject:f,readStatus:a}},_readCodeParagraph:function(b){var a=[];b=b.getElementsByTagNameNS(d.NAMESPACE_URL,d.RUN_OF_TEXT_TAG_NAME);g.getTextFromRun(b[0]).split("\n").forEach(function(f){var b={};b.className=this.getNodeType();b.text=f;a.push(b)},
this);return{readObject:a,readStatus:!0}},_createCDATASection:function(b,a){return b.createCDATASection(a)},_createCDATASectionForEndingCharacter:function(b,a){var f=b.createCDATASection("]]");a.appendChild(f);f=b.createCDATASection("\x3e");a.appendChild(f)},_hasCDATAEndingSequence:function(b){return!!b.match(/]]\x3e/g)},_modifyTextNodeWithEndingSequence:function(b,a,f){for(;f&&-1!==f.indexOf("]]\x3e");){var c=f.indexOf("]]\x3e");if(0!==c){var d=f.slice(0,c);a.appendChild(this._createCDATASection(b,
d))}this._createCDATASectionForEndingCharacter(b,a);f=f.substring(c+3);-1===f.indexOf("]]\x3e")&&""!==f&&a.appendChild(this._createCDATASection(b,f))}},getXMLType:function(){return"PlainTextNode"},getNodeType:function(){return"PlainTextNode"}})})},"MW/rtc/model/io/serializers/providers/nodes/RichTextSerializerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/nodes/RichTextSerializer"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},
createInstance:function(){return new g}})})},"MW/rtc/model/io/serializers/nodes/RichTextSerializer":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/model/io/XmlUtils","MW/rtc/model/io/DocumentTag","MW/rtc/model/io/serializers/Serializable"],function(h,e,g,d,c){return h(c,{write:function(b){var a=g.createXMLElement(d.RUN_OF_TEXT_TAG_NAME),f=g.createXMLElement(d.RUN_OF_TEXT_PROPERTY_TAG_NAME),c=!1,e;for(e in b)if(b.hasOwnProperty(e)&&("className"!==e&&"text"!==e)&&(c=!0,b[e])){var n=
this._createRunProperty(e);f.appendChild(n)}e=g.createXMLElement(d.TEXT_TAG_NAME);b=document.createTextNode(b.text);e.appendChild(b);c&&a.appendChild(f);a.appendChild(e);return a},read:function(b){return this._createObjectFromRun(b)},_createObjectFromRun:function(b){var a=!0,f={},c=g.getTextFromRun(b);b=this._getPropertyFromRun(b);0!==b.length&&b.forEach(function(b){"unrecognized"===b?a=!1:f[b]=!0});f.className=this.getNodeType();f.text=c;return{readObject:f,readStatus:a}},_getPropertyFromRun:function(b){var a=
[];b=b.getElementsByTagNameNS(d.NAMESPACE_URL,d.RUN_OF_TEXT_PROPERTY_TAG_NAME);if(0<b.length){var f;for(f=0;f<b[0].childNodes.length;f+=1){var c=b[0].childNodes[f];c.localName===d.BOLD_TAG_NAME?a.push("bold"):c.localName===d.ITALIC_TAG_NAME?a.push("italic"):c.localName===d.UNDERLINE_TAG_NAME?a.push("underline"):c.localName===d.RUN_OF_FONT?c.attributes[0]&&(c.attributes[0].localName===d.FONT_TYPE_TAG&&c.attributes[0].nodeValue===d.MONOSPACE_TAG)&&a.push("monospace"):a.push("unrecognized")}}return a},
_createRunProperty:function(b){switch(b){case "bold":return g.createXMLElement(d.BOLD_TAG_NAME);case "italic":return g.createXMLElement(d.ITALIC_TAG_NAME);case "underline":return g.createXMLElement(d.UNDERLINE_TAG_NAME);case "monospace":return b=g.createXMLElement(d.RUN_OF_FONT),b.setAttributeNS(d.NAMESPACE_URL,d.NAMESPACE_TAG+":"+d.FONT_TYPE_TAG,d.MONOSPACE_TAG),b;default:return g.createXMLElement()}},getXMLType:function(){return"RichTextNode"},getNodeType:function(){return"RichTextNode"}})})},"MW/rtc/nodes/insertionrules/LineNodeInsertionRulesProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./LineNodeInsertionRules"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/nodes/insertionrules/LineNodeInsertionRules":function(){define(["dojo/_base/declare","MW/rtc/nodes/inner/LineNode","MW/rtc/plugins/insertionrules/BaseInsertionRules","MW/rtc/plugins/insertionrules/InsertionRuleConstants"],function(h,e,g,d){return h([g],{_compatibleParents:[],
constructor:function(){},destroy:function(){},getApplicableNodeClass:function(){return e},getTopLevelInsertionInstruction:function(c,b,a,f,e){return e.isAtLeftEdge()?{insertInRoot:{relationToPosition:d.RELATION.BEFORE}}:e.isAtRightEdge()?{insertInRoot:{relationToPosition:d.RELATION.AFTER}}:{insertInRoot:{insertionPosition:e}}}})})},"MW/rtc/nodes/insertionrules/LiveControlNodeInsertionRulesProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LiveControlNodeInsertionRules"],
function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/nodes/insertionrules/LiveControlNodeInsertionRules":function(){define(["dojo/_base/declare","MW/rtc/nodes/inner/LineNode","MW/rtc/plugins/insertionrules/BaseInsertionRules","MW/rtc/plugins/insertionrules/InsertionRuleConstants","MW/rtc/plugins/language/matlab/codingui/livecontrols/nodes/LiveControlNode"],function(h,e,g,d,c){return h([g],{_compatibleParents:[e],constructor:function(){},
destroy:function(){},getApplicableNodeClass:function(){return c},getTopLevelInsertionInstruction:function(b,a,f,c,g){return{insertInRoot:{relationToPosition:d.RELATION.AFTER,containerConstructor:e}}}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/nodes/LiveControlNode":function(){define(["dojo/_base/declare","MW/rtc/nodes/OpaqueNode"],function(h,e){return h([e],{className:"LiveControlNode",constructor:function(e){var d=e.context.data;this.context={data:d,type:e.context.type};e=" ";d&&
(d=d.value,e=void 0!==d&&""!==d?d:e);this.text=e.toString();this.widget=this.intermediateEvalText=null},getCodeText:function(){return this.getText()},getText:function(){return this.text||" "},maxOffset:function(){return this.getText().length},_serializeAttributes:function(e){e.text=this.text;e.context=this.context;e.startColumn=this.startPosition().getLineColumn().column-1;e.endColumn=this.endPosition().getLineColumn().column-1},setContextData:function(e){this.context.data=e},getContextData:function(){return this.context.data},
getContext:function(){return this.context},setWidget:function(e){this.widget=e},getWidget:function(){return this.widget},getType:function(){return this.context.type},movePositionRight:function(e){return 0===e.getOffset()?this.endPosition():this.inherited(arguments)},movePositionLeft:function(e){return e.getOffset()===this.maxOffset()?this.startPosition():this.inherited(arguments)},isContextEqualTo:function(e){var d=this.getContext();return JSON.stringify(d.data)===JSON.stringify(e.data)&&d.type===
e.type}})})},"MW/rtc/nodes/insertionrules/OpaqueNodeInsertionRulesProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./OpaqueNodeInsertionRules"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/nodes/insertionrules/OpaqueNodeInsertionRules":function(){define("dojo/_base/declare mw-log/Log MW/rtc/model/Position MW/rtc/nodes/OpaqueNode MW/rtc/plugins/insertionrules/BaseInsertionRules MW/rtc/plugins/insertionrules/InsertionRuleConstants MW/rtc/plugins/insertionrules/receivinginstructions/ContinueUpInstruction MW/rtc/plugins/insertionrules/receivinginstructions/ContinueAtPositionInstruction MW/rtc/plugins/richtext/nodes/inner/RichTextContainerNode MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNode".split(" "),
function(h,e,g,d,c,b,a,f,k,l){return h([c],{_compatibleParents:[k],constructor:function(){},destroy:function(){},getApplicableNodeClass:function(){return d},getReceivingInstruction:function(b){if(b.isAtEdge())return new a;b=b.getNode();b=new g(b,b.maxOffset());return new f(b)},getTopLevelInsertionInstruction:function(a,f,c,d,e){return{insertInRoot:{relationToPosition:b.RELATION.AFTER,containerConstructor:l}}}})})},"MW/rtc/plugins/insertionrules/receivinginstructions/ContinueUpInstruction":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/insertionrules/BaseInsertionInstruction","MW/rtc/plugins/insertionrules/InsertionRuleConstants"],function(h,e,g){return h([e],{constructor:function(){this._type=g.RECEIVING_INSTRUCTION.CONTINUE_UP}})})},"MW/rtc/plugins/insertionrules/receivinginstructions/ContinueAtPositionInstruction":function(){define(["dojo/_base/declare","MW/rtc/plugins/insertionrules/BaseInsertionInstruction","MW/rtc/plugins/insertionrules/InsertionRuleConstants"],function(h,e,g){return h([e],{constructor:function(d){if(!d||
!d.isValid())throw Error("MW.rtc.plugins.insertionrules.receivinginstructions.ContinueAtPositionInstruction: Invalid position");this._type=g.RECEIVING_INSTRUCTION.CONTINUE_AT_POSITION;this._position=d},getPosition:function(){return this._position}})})},"MW/rtc/nodes/insertionrules/PlainTextNodeInsertionRulesProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./PlainTextNodeInsertionRules"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},
createInstance:function(){return new g},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/nodes/insertionrules/PlainTextNodeInsertionRules":function(){define("dojo/_base/declare mw-log/Log MW/rtc/nodes/inner/LineNode MW/rtc/nodes/leaf/PlainTextNode MW/rtc/plugins/insertionrules/BaseInsertionRules MW/rtc/plugins/insertionrules/InsertionRuleConstants".split(" "),function(h,e,g,d,c,b){return h([c],{_compatibleParents:[g],constructor:function(){},destroy:function(){},getApplicableNodeClass:function(){return d},
getTopLevelInsertionInstruction:function(a,f,c,d,e){return{insertInRoot:{relationToPosition:b.RELATION.AT,containerConstructor:g}}}})})},"MW/rtc/plugins/blockmatching/BlockMatchingPluginProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./BlockMatchingPlugin"],function(h,e,g){return h(e,{requires:function(){return{createInstance:"rtc.internaldocument rtc.view matlab.tokens rtc.offscreennotification rtc.linenumberservice rtc.actionservice rtc.cursorcontroller".split(" ")}},
createInstance:function(d,c,b,a,f,e,l){return new g(d,c,b,a,f,e,l)}})})},"MW/rtc/plugins/blockmatching/BlockMatchingPlugin":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-construct dojo/on dojo/touch MW/rtc/abstract/AbstractPlugin MW/rtc/model/Range MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenMatcher MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenMatcherRules MW/rtc/plugins/offscreennotification/OffscreenNotificationAlignment MW/rtc/plugins/offscreennotification/OffscreenNotificationUtils MW/rtc/view/ViewEventUtilities ./BlockMatchingUtils".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q){return h(a,{_BLOCK_MATCHING_POPUP:"blockMatchingPopup",_BLOCK_MATCHING_LINE_NUMBER:"blockMatchingPopupLineNumber",_BLOCK_MATCHING_CODE:"blockMatchingPopupCode",_BLOCK_MATCHING_CONTENT:"blockMatchingPopupContent",_BLOCK_MATCHING_ELLIPSES:"blockMatchingPopupEllipses",_BLOCK_MATCHING_LIVE_CONTROL:"blockMatchingLiveControl",_MATCHED_POSITION_HORIZONTAL:{RIGHT:1,RIGHT_SAME_LINE:2,LEFT:3,LEFT_SAME_LINE:4,CENTER:5},_MATCHED_POSITION_VERTICAL:{ABOVE:1,BELOW:2,CENTER:3},
_POPUP_BORDER_WIDTH:1,_POPUP_NUMBER_BORDER_WIDTH:1,_POPUP_NUMBER_PADDING:5,_POPUP_CONTENT_PADDING:5,_POPUP_OFFSET:3,_ELLIPSES:"...",constructor:function(a,f,b,c,d,e,l){this._internalDocument=a;this._view=f;this._cursorController=l;this._offscreenNotification=c;this._lineNumberService=d;this._tokenMatcher=new k(a,b);this._notificationHandles=[];this.own(g.after(f,"onViewUpdated",this._handleViewUpdated.bind(this),!0));this.own(g.after(l,"onUpdate",this._handleUpdate.bind(this)));a=[{id:"rtc_blockmatching_clearnotifications",
key:"escape",enabled:!0,callback:this._removeNotifications.bind(this)}];e.loadActions(a)},_handleViewUpdated:function(a){(m.hasScrollEvent(a)||m.hasSizingEvent(a))&&this._removeNotifications()},_removeNotifications:function(){for(var a=0;a<this._notificationHandles.length;a++){var f=this._notificationHandles[a].id;this._notificationHandles[a].eventHandle.remove();this._offscreenNotification.removeOffscreenNotification(f)}a=0<this._notificationHandles.length;this._notificationHandles=[];return a},
_handleUpdate:function(){this._removeNotifications();this._showNotificationForCursor()},_showNotificationForCursor:function(){var a=this._cursorController.getCursors();if(!(1<a.length||this._cursorController.hasSelection())){var a=a[0].getCursorPosition(),f=this._tokenMatcher.findMatchingTokens(a);if(f)switch(l.getTokenTypeForMatching(f.tokenMatchedFor)){case l.TOKEN_TYPE.START_TOKEN:this._showNotificationForToken(a,f.endToken);break;case l.TOKEN_TYPE.END_TOKEN:this._showNotificationForToken(a,f.startToken);
break;case l.TOKEN_TYPE.MID_TOKEN:this._showNotificationForToken(a,f.startToken),this._showNotificationForToken(a,f.endToken)}}},_showNotificationForToken:function(a,f){if(this._shouldShowNotificationForToken(f)){var d=this._getTokenRange(f.token),e=d.getStartPosition().getLine(),e=this._createNotification(e,a,d),k=this._getNotificationAlignment(a,d);if(k=this._offscreenNotification.displayOffscreenNotificationForDomNode(d,e,k)){var k={id:k,eventHandle:null},g=function(a){this._cursorController.setPositions([a]);
this._view.scrollPositionIntoView(a);this._removeNotifications()}.bind(this,d.getStartPosition());k.eventHandle=c(e,b.press,function(a){a.stopPropagation();g()});this._notificationHandles.push(k)}}},_shouldShowNotificationForToken:function(a){return a&&!a.mismatch},_getTokenRange:function(a){var b=a.getPositionInfo(),c=a.getPositionInfo();c.column+=a.getValue().length;a=this._internalDocument.getPositionForLineColumn(b.line+1,b.column+1);c=this._internalDocument.getPositionForLineColumn(c.line+1,
c.column+1);return new f(a,c)},_createNotification:function(a,f,b){var c=this._getCodeNodeFromLineNum(a),e=this._view.getCharacterWidthForLine(a),k=this._getAvailableWidthInCharacters(e),g=d.create("div",{"class":this._BLOCK_MATCHING_POPUP}),k=this._addLineNumberToNotificationIfNecessary(g,a,k,e);this._truncateNotificationIfNecessary(g,c,b,k,f,a);return g},_getCodeNodeFromLineNum:function(a){a=this._internalDocument.getLineNode(a-1);var f=d.create("div",{"class":this._BLOCK_MATCHING_CODE});a.children.forEach(function(a){var b=
null;a.widget?(b=d.create("div",{"class":this._BLOCK_MATCHING_LIVE_CONTROL}),b.innerHTML=a.getText()):b=a.box.cloneNode(!0);d.place(b,f)},this);return f},_getAvailableWidthInCharacters:function(a){var f=2*(this._POPUP_BORDER_WIDTH+this._POPUP_CONTENT_PADDING)+this._POPUP_OFFSET,b=this._view.getClientWidth();return Math.floor((b-f)/a)},_addLineNumberToNotificationIfNecessary:function(a,f,b,c){if(this._view.isLineInView(f,!0))return b;a=d.create("span",{"class":this._BLOCK_MATCHING_LINE_NUMBER},a);
f=this._lineNumberService.getCodeLineNumberFromLineNumber(f-1);a.innerText=f.toString();return b-Math.ceil((a.innerText.length*c+2*this._POPUP_NUMBER_PADDING+this._POPUP_NUMBER_BORDER_WIDTH)/c)},_truncateNotificationIfNecessary:function(a,f,b,c,e,k){a=d.create("div",{"class":this._BLOCK_MATCHING_CONTENT},a);e=this._getBoundsOfTruncation(e,b,k,f);b=this._getAmountToTruncateAroundRange(f,b,c,e.leftBound,e.rightBound);k=0<b.right;var g=0;0<b.left&&(g=this._addEllipsesToDomNode(a,c,e.leftBound,e.rightBound),
q.removeCharactersFromFrontOfDomNode(f,b.left+g));d.place(f,a);k&&(g=this._addEllipsesToDomNode(a,c,e.leftBound,e.rightBound),q.removeCharactersFromBackOfDomNode(f,b.right+g))},_getBoundsOfTruncation:function(a,f,b,c){var d=a.getLine();a=a.getColumn();var e=f.getStartPosition().getColumn(),k=null,k=d===b&&e>a?Math.min(f.getStartPosition().getColumn(),this._getRightmostVisibleColumnNum(b)):1,g=null,g=d===b&&e<a?Math.max(f.getEndPosition().getColumn(),this._getLeftmostVisibleColumnNum(b)):c.innerText.length+
1;return{leftBound:k,rightBound:g}},_getRightmostVisibleColumnNum:function(a){a=this._view.getCoordinateForLineColumn(a,1);a.x=this._view.getScrollLeft()+this._view.getClientWidth();return this._view.getPositionFromCoordinate(a).getColumn()},_getLeftmostVisibleColumnNum:function(a){a=this._view.getCoordinateForLineColumn(a,1);a.x=this._view.getScrollLeft();a=this._view.getPositionFromCoordinate(a);var f=a.getColumn();return this._view.isPositionInView(a,!0)?f:f+1},_getAmountToTruncateAroundRange:function(a,
f,b,c,d){a=a.innerText.length;c=void 0===c?1:c;d=void 0===d?a+1:d;var e=f.getStartPosition().getColumn();f=f.getEndPosition().getColumn();var k=f-e,g=Math.floor((b-k)/2),l=Math.min(g,e-c);b=b-k-l;d=Math.min(b,d-f);d<b&&l===g&&(l=Math.min(g+(b-d),e-c));return{left:e-l-1,right:a-f-d+1}},_addEllipsesToDomNode:function(a,f,b,c){d.create("span",{"class":this._BLOCK_MATCHING_ELLIPSES},a).innerText=this._ELLIPSES;return Math.max(Math.min(c-b-f+this._ELLIPSES.length,this._ELLIPSES.length),0)},_getNotificationAlignment:function(a,
f){var b=this._getTokenLocation(a,f),c=null,d=null,e=0,k=0,g=0;switch(b.verticalLocation){case this._MATCHED_POSITION_VERTICAL.ABOVE:c=p.VERTICAL_POSITION.TOP;g=this._POPUP_OFFSET;break;case this._MATCHED_POSITION_VERTICAL.BELOW:c=p.VERTICAL_POSITION.BOTTOM;g=-this._POPUP_OFFSET;break;default:c=p.VERTICAL_POSITION.NEAREST}switch(b.horizontalLocation){case this._MATCHED_POSITION_HORIZONTAL.RIGHT_SAME_LINE:d=p.HORIZONTAL_POSITION.RIGHT;e=1;g=this._POPUP_BORDER_WIDTH;k=-this._POPUP_OFFSET;break;case this._MATCHED_POSITION_HORIZONTAL.LEFT_SAME_LINE:d=
p.HORIZONTAL_POSITION.LEFT;e=-1;g=-this._POPUP_BORDER_WIDTH;k=this._POPUP_OFFSET;break;default:d=p.HORIZONTAL_POSITION.LEFT,k=this._POPUP_OFFSET}return new n(d,c,0,0,0,e,k,g)},_getTokenLocation:function(a,f){var b={horizontalLocation:null,verticalLocation:null},c=a.getLine(),d=f.getStartPosition().getLine(),e=this._view.getVisibleLineNumbers(!0);switch(!0){case d<e[0]:b.verticalLocation=this._MATCHED_POSITION_VERTICAL.ABOVE;break;case d>e[e.length-1]:b.verticalLocation=this._MATCHED_POSITION_VERTICAL.BELOW;
break;default:b.verticalLocation=this._MATCHED_POSITION_VERTICAL.CENTER}var c=c===d,d=this._view.getScrollLeft(),e=d+this._view.getClientWidth(),k=this._view.getCoordinateForPosition(f.getStartPosition()).x,g=this._view.getCoordinateForPosition(f.getEndPosition()).x;switch(!0){case c&&g>e:b.horizontalLocation=this._MATCHED_POSITION_HORIZONTAL.RIGHT_SAME_LINE;break;case c&&k<d:b.horizontalLocation=this._MATCHED_POSITION_HORIZONTAL.LEFT_SAME_LINE;break;case g>d:b.horizontalLocation=this._MATCHED_POSITION_HORIZONTAL.RIGHT;
break;case k<d:b.horizontalLocation=this._MATCHED_POSITION_HORIZONTAL.LEFT_SAME_LINE;break;default:b.horizontalLocation=this._MATCHED_POSITION_HORIZONTAL.CENTER}return b},destroy:function(){this.inherited(arguments);this._removeNotifications()}})})},"MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenMatcher":function(){define(["dojo/_base/declare","mw-log/Log","MW/rtc/model/DocumentUtilities","./MatlabTokenConstants","./MatlabTokenMatcherRules"],function(h,e,g,d,c){return h(null,{_SCAN_FORWARD:1,
_SCAN_BACKWARD:2,_SCAN_FORWARD_AND_BACKWARD:3,constructor:function(b,a){this._internalDocument=b;this._matlabTokens=a},findMatchingTokens:function(b){e.assert(b&&b.isValid(),"Invalid position provided");b=this._getTokenAtPosition(b);if(!b||!c.isMatchableToken(b))return null;var a=null;switch(!0){case c.isStartToken(b):a=this._SCAN_FORWARD;break;case c.isEndToken(b):a=this._SCAN_BACKWARD;break;default:a=this._SCAN_FORWARD_AND_BACKWARD}return this._scanForMatches(b,a)},_getTokenAtPosition:function(b){var a=
b.getLine()-1;b=b.getColumn()-1;this._shouldShiftColumn(a,b)&&b--;return this._matlabTokens.getTokenOnLineColumn(a,b)},_shouldShiftColumn:function(b,a){if(this._isLastColumnForLine(b,a)||this._hasNeighboringClosingBracket(b,a))return!0;var f=this._matlabTokens.getTokenOnLineColumn(b,a);return!f?!1:!c.isMatchableToken(f)},_isLastColumnForLine:function(b,a){g.checkLineExists(this._internalDocument,b+1);var f=this._internalDocument.getLineNode(b).getText().length;return a===f},_hasNeighboringClosingBracket:function(b,
a){var f=this._matlabTokens.getTokenOnLineColumn(b,a-1),d=this._matlabTokens.getTokenOnLineColumn(b,a),f=f?c.isClosingBracket(f):!1,d=d?c.isClosingBracket(d):!1;return f||d},_scanForMatches:function(b,a){if(a===this._SCAN_FORWARD_AND_BACKWARD)return this._scanForMatchesBothDirections(b);for(var f=this._getInitialResultsObject(b),d=this._getNextToken(b,a),e=0;d;){switch(c.getTokenTypeForMatching(d)){case c.TOKEN_TYPE.START_TOKEN:if(0===e&&a===this._SCAN_BACKWARD){var g={token:d,mismatch:!c.areMatchingTokens(b,
d)};f.startToken=g;return f}e++;break;case c.TOKEN_TYPE.MID_TOKEN:0===e&&(g={token:d,mismatch:!c.areMatchingTokens(d,b)},a===this._SCAN_FORWARD?f.midTokens.push(g):f.midTokens.unshift(g));break;case c.TOKEN_TYPE.END_TOKEN:if(0===e&&a===this._SCAN_FORWARD)return g={token:d,mismatch:!c.areMatchingTokens(d,b)},f.endToken=g,f;e--}d=this._getNextToken(d,a)}return f},_scanForMatchesBothDirections:function(b){var a=this._scanForMatches(b,this._SCAN_FORWARD),f=this._scanForMatches(b,this._SCAN_BACKWARD);
a.midTokens.shift();var c=f.midTokens.concat(a.midTokens);return{startToken:f.startToken,midTokens:c,endToken:a.endToken,tokenMatchedFor:b}},_getInitialResultsObject:function(b){var a={startToken:null,midTokens:[],endToken:null,tokenMatchedFor:b},f={token:b,mismatch:!1};switch(c.getTokenTypeForMatching(b)){case c.TOKEN_TYPE.START_TOKEN:a.startToken=f;break;case c.TOKEN_TYPE.MID_TOKEN:a.midTokens.push(f);break;case c.TOKEN_TYPE.END_TOKEN:a.endToken=f}return a},_getNextToken:function(b,a){return a===
this._SCAN_FORWARD?this._getNextTokenForward(b):this._matlabTokens.getPreviousTokenOf(b)},_getNextTokenForward:function(b){var a=b.getPositionInfo().line,f=this._internalDocument.getMaxLineNumber()-1;for(b=this._matlabTokens.getNextTokenOf(b);!b;){a++;if(a>f)break;b=this._matlabTokens.getFirstTokenOnLine(a)}return b}})})},"MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenConstants":function(){define([],function(){return{TOKENS:{FUNCTION:1,NESTED:2,IF:3,SWITCH:4,TRY:5,WHILE:6,FOR:7,END:8,ELSE:9,
ELSEIF:10,BREAK:11,RETURN:12,PARFOR:13,GLOBAL:15,PERSISTENT:16,CATCH:20,CONTINUE:21,CASE:22,OTHERWISE:23,CLASSDEF:25,PROPERTIES:28,METHODS:30,EVENTS:31,ENUMERATION:32,SPMD:33,PARSECTION:34,SECTION:35,ID:40,EEND:41,INT:42,FLOAT:43,STRING:44,DUAL:45,BANG:46,QUEST:47,SEMI:50,COMMA:51,LP:52,RP:53,LB:54,RB:55,LC:56,RC:57,FEEND:58,TRANS:60,DOTTRANS:61,NOT:62,AT:63,DOLLAR:64,BACKQUOTE:65,DOUBLEQUOTE:66,SHARP:67,PLUS:70,MINUS:71,MUL:72,DIV:73,LDIV:74,EXP:75,COLON:76,DOT:80,DOTMUL:81,DOTDIV:82,DOTLDIV:83,
DOTEXP:84,AND:85,OR:86,ANDAND:87,OROR:88,LT:89,GT:90,LE:91,GE:92,EQ:93,NE:94,EQUALS:95,CNE:96,EOL:100,SEOL:101,CEOL:102,IEOL:103,COMMENT:105,BLKSTART:106,BLKCOM:107,BLKEND:108,SECTION_TITLE:109,CPAD:109,PRAGMA:110,DOTDOTDOT:111,DOTDOT:112,DEEP_NEST:113,DEEP_STMT:114,WHITE:116,NEGERR:118,SEMERR:119,EOLERR:120,UNTERM:121,BADCHAR:122,DEEP_PAREN:123,FP_ERR:124,RES_ERR:125,DEEP_COM:126,BEGIN_TYPE:127,END_TYPE:128,STRING_LITERAL:129,UNTERM_STRING_LITERAL:130},TOKEN_TO_VALUE:{"0":"NA",1:"function",2:"nested",
3:"if",4:"switch",5:"try",6:"while",7:"for",8:"end",9:"else",10:"elseif",11:"break",12:"return",13:"parfor",14:"NA",15:"global",16:"persistent",17:"NA",18:"NA",19:"NA",20:"catch",21:"continue",22:"case",23:"otherwise",24:"NA",25:"classdef",26:"NA",27:"NA",28:"properties",29:"NA",30:"methods",31:"events",32:"enumeration",33:"spmd",34:"parsection",35:"section",36:"NA",37:"NA",38:"NA",39:"NA",40:"ID",41:"\x3cend\x3e",42:"\x3cint\x3e",43:"\x3cfloat\x3e",44:"\x3cstring\x3e",45:"\x3cdual\x3e",46:"\x3cBANG\x3e",
47:"?",48:"NA",49:"NA",50:";",51:",",52:"(",53:")",54:"[",55:"]",56:"{",57:"}",58:"NA",59:"NA",60:"'",61:".'",62:"~",63:"@",64:"$",65:"`",66:"\\",67:"#",68:"NA",69:"NA",70:"+",71:"-",72:"*",73:"/",74:"\\\\",75:"^",76:":",77:"::",78:"NA",79:"NA",80:".",81:".*",82:"./",83:".\\",84:".^",85:"\x26",86:"|",87:"\x26\x26",88:"||",89:"\x3c",90:"\x3e",91:"\x3c\x3d",92:"\x3e\x3d",93:"\x3d\x3d",94:"~\x3d",95:"\x3d",96:"\x3cCNE\x3e",97:"NA",98:"NA",99:"NA",100:"\x3cEOL\x3e",101:"\x3cSEOL\x3e",102:"\x3cCEOL\x3e",
103:"\x3cIEOL\x3e",104:"NA",105:"\x3ccomment\x3e",106:"\x3cbegin block comment\x3e",107:"\x3cblock comment\x3e",108:"\x3cend block comment\x3e",109:"%%",110:"PRAGMA",111:"...",112:"\x3cDOT DOT\x3e",113:"\x3cDEEP NEST\x3e",114:"\x3cDEEP STMT\x3e",115:"NA",116:"\x3cwhitespace\x3e",117:"NA",118:"\x3cNEG ERROR\x3e",119:"\x3cSEM ERROR\x3e",120:"\x3cEOL ERROR\x3e",121:"\x3cunterm string\x3e",122:"\x3cbadchar\x3e",123:"\x3cDEEP PAREN\x3e",124:"\x3cFP ERROR\x3e",125:"\x3cRES ERROR\x3e",126:"\x3cDEEP COM\x3e",
127:"NA",128:"NA",129:"\x3cstring literal\x3e",130:"\x3cunterm string literal\x3e"},TOKEN_TO_CATEGORY:{"0":339,1:333,2:333,3:333,4:333,5:333,6:333,7:333,8:333,9:333,10:333,11:333,12:333,13:333,14:333,15:333,16:333,17:333,18:333,19:333,20:333,21:333,22:333,23:333,24:333,25:333,26:333,27:333,28:333,29:333,30:333,31:333,32:333,33:333,34:333,35:333,44:44,45:45,46:338,64:122,65:122,66:122,67:122,105:105,106:106,107:107,108:108,109:109,110:110,111:333,121:337,122:122,125:122,129:44,130:337}}})},"MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenMatcherRules":function(){define(["mw-log/Log",
"./MatlabTokenConstants","./MatlabTokenUtilities"],function(h,e,g){return{TOKEN_TYPE:{NON_MATCHABLE_TOKEN:0,START_TOKEN:1,MID_TOKEN:2,END_TOKEN:3},isMatchableToken:function(d){return this.getTokenTypeForMatching(d)!==this.TOKEN_TYPE.NON_MATCHABLE_TOKEN},getTokenTypeForMatching:function(d){switch(!0){case this.isStartToken(d):return this.TOKEN_TYPE.START_TOKEN;case this.isMidToken(d):return this.TOKEN_TYPE.MID_TOKEN;case this.isEndToken(d):return this.TOKEN_TYPE.END_TOKEN;default:return this.TOKEN_TYPE.NON_MATCHABLE_TOKEN}},
isStartToken:function(d){h.assert(d,"Invalid token received");var c=d.getType();return g.isTokenStartOfBlock(d)||c===e.TOKENS.LP||c===e.TOKENS.LB||c===e.TOKENS.LC},isMidToken:function(d){h.assert(d,"Invalid token received");return g.isTokenStartOfMidBlock(d)},isEndToken:function(d){h.assert(d,"Invalid token received");var c=d.getType();return g.isTokenEndOfBlock(d)||c===e.TOKENS.RP||c===e.TOKENS.RB||c===e.TOKENS.RC},isClosingBracket:function(d){h.assert(d,"Invalid token received");return 0<=[e.TOKENS.RP,
e.TOKENS.RB,e.TOKENS.RC].indexOf(d.getType())},areMatchingTokens:function(d,c){h.assert(d,"Expected first parameter to be a valid token, received: "+d);h.assert(c,"Expected second parameter to be a valid token, received: "+c);var b=d.getType(),a=c.getType();a===e.TOKENS.END&&(a=b,b=e.TOKENS.END);switch(b){case e.TOKENS.LP:return a===e.TOKENS.RP;case e.TOKENS.RP:return a===e.TOKENS.LP;case e.TOKENS.LB:return a===e.TOKENS.RB;case e.TOKENS.RB:return a===e.TOKENS.LB;case e.TOKENS.LC:return a===e.TOKENS.RC;
case e.TOKENS.RC:return a===e.TOKENS.LC;case e.TOKENS.IF:return 0<=[e.TOKENS.ELSE,e.TOKENS.ELSEIF].indexOf(a);case e.TOKENS.TRY:return a===e.TOKENS.CATCH;case e.TOKENS.SWITCH:return 0<=[e.TOKENS.CASE,e.TOKENS.OTHERWISE].indexOf(a);case e.TOKENS.ELSEIF:return 0<=[e.TOKENS.IF,e.TOKENS.ELSEIF,e.TOKENS.ELSE].indexOf(a);case e.TOKENS.ELSE:return 0<=[e.TOKENS.IF,e.TOKENS.ELSEIF].indexOf(a);case e.TOKENS.CATCH:return a===e.TOKENS.TRY;case e.TOKENS.CASE:return 0<=[e.TOKENS.SWITCH,e.TOKENS.CASE,e.TOKENS.OTHERWISE].indexOf(a);
case e.TOKENS.OTHERWISE:return 0<=[e.TOKENS.SWITCH,e.TOKENS.CASE].indexOf(a);case e.TOKENS.END:return 0<=[e.TOKENS.FOR,e.TOKENS.WHILE,e.TOKENS.PARFOR,e.TOKENS.SPMD,e.TOKENS.IF,e.TOKENS.TRY,e.TOKENS.SWITCH,e.TOKENS.CLASSDEF,e.TOKENS.METHODS,e.TOKENS.PROPERTIES,e.TOKENS.ENUMERATION,e.TOKENS.EVENTS,e.TOKENS.FUNCTION,e.TOKENS.ELSEIF,e.TOKENS.ELSE,e.TOKENS.CATCH,e.TOKENS.CASE,e.TOKENS.OTHERWISE].indexOf(a)}return!1}}})},"MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenUtilities":function(){define(["./MatlabTokenConstants"],
function(h){return{getTokenValueById:function(e){return h.TOKEN_TO_VALUE[e]},getTokenCategoryById:function(e){return h.TOKEN_TO_CATEGORY[e]},getTokenIdByName:function(e){return h.TOKENS[e]},isTokenStartOfBlock:function(e){e=e.getType();return e===h.TOKENS.FOR||e===h.TOKENS.PARFOR||e===h.TOKENS.IF||e===h.TOKENS.WHILE||e===h.TOKENS.TRY||e===h.TOKENS.SWITCH||e===h.TOKENS.FUNCTION||e===h.TOKENS.NESTED||e===h.TOKENS.CLASSDEF||e===h.TOKENS.PROPERTIES||e===h.TOKENS.ENUMERATION||e===h.TOKENS.SPMD||e===h.TOKENS.EVENTS||
e===h.TOKENS.METHODS},isTokenEndOfBlock:function(e){return e.getType()===h.TOKENS.END},isTokenStartOfMidBlock:function(e){e=e.getType();return e===h.TOKENS.ELSE||e===h.TOKENS.ELSEIF||e===h.TOKENS.CATCH||e===h.TOKENS.OTHERWISE||e===h.TOKENS.CASE},isSectionTitleToken:function(e){return e.getType()===h.TOKENS.SECTION_TITLE},isWhitespaceToken:function(e){return e.getType()===h.TOKENS.WHITE},isTokenStartOfBlockIndent:function(e){return this.isTokenStartOfBlock(e)||this.isTokenStartOfMidBlock(e)},isCommentToken:function(e){e=
e.getType();return h.TOKENS.COMMENT===e||h.TOKENS.SECTION_TITLE===e||h.TOKENS.BLKCOM===e||h.TOKENS.BLKSTART===e||h.TOKENS.BLKEND===e||h.TOKENS.PRAGMA===e},isBlockCommentToken:function(e){e=e.getType();return h.TOKENS.BLKCOM===e||h.TOKENS.BLKSTART===e||h.TOKENS.BLKEND===e},isSwitchToken:function(e){return e.getType()===h.TOKENS.SWITCH},isEndOfLineToken:function(e){return e.getType()===h.TOKENS.EOL||e.getType()===h.TOKENS.SEOL||e.getType()===h.TOKENS.CEOL||e.getType()===h.TOKENS.IEOL},isFunctionToken:function(e){return e.getType()===
h.TOKENS.FUNCTION||e.getType()===h.TOKENS.NESTED},isIndentableFunction:function(e){return e.getType()===h.TOKENS.NESTED},isMatlabStringToken:function(e){e=e.getType();return e===h.TOKENS.STRING||e===h.TOKENS.STRING_LITERAL},isMatlabUntermDoubleQuoteStringToken:function(e){return e.getType()===h.TOKENS.UNTERM_STRING_LITERAL},isMatlabUntermSingleQuoteStringToken:function(e){return e.getType()===h.TOKENS.UNTERM},doesTokenMarkEndOfTypeSection:function(e){e=e.getType();return e===h.TOKENS.DOTDOTDOT||e===
h.TOKENS.COMMENT||e===h.TOKENS.CEOL||e===h.TOKENS.EOL||e===h.TOKENS.IEOL||e===h.TOKENS.SEOL||e===h.TOKENS.END_TYPE},isDotDotDotToken:function(e){return e.getType()===h.TOKENS.DOTDOTDOT},isNestedToken:function(e){return e.getType()===h.TOKENS.NESTED},isBeginTypeToken:function(e){return e.getType()===h.TOKENS.BEGIN_TYPE},getMatchingTokenInLine:function(e,g,d){var c=null;e.some(function(b){var a=b.getColumn(),f=a+b.getValue().length;if(g>=a&&g<=f&&d>=a&&d<=f)return c=b,!0});return c},getTokensFromLineRange:function(e,
g,d,c){for(var b=[];g<=d;g+=1)for(var a=e[g],f=0;f<a.length;f+=1){var k=a[f];(!c||c(k,f,a))&&b.push(k)}return b}}})},"MW/rtc/plugins/offscreennotification/OffscreenNotificationAlignment":function(){define(["dojo/_base/declare","./OffscreenNotificationUtils"],function(h,e){return h(null,{_DEFAULT_HORIZONTAL_ALIGNMENT:e.HORIZONTAL_POSITION.CENTER,_DEFAULT_VERTICAL_ALIGNMENT:e.VERTICAL_POSITION.TOP,_DEFAULT_CUSTOM_X:0,_DEFAULT_CUSTOM_Y:0,_DEFAULT_COLUMN_OFFSET:0,_DEFAULT_LINE_OFFSET:0,_DEFAULT_X_OFFSET:0,
_DEFAULT_Y_OFFSET:0,constructor:function(e,d,c,b,a,f,k,l){this.horizontalAlignment=e||this._DEFAULT_HORIZONTAL_ALIGNMENT;this.verticalAlignment=d||this._DEFAULT_VERTICAL_ALIGNMENT;this.x=c||this._DEFAULT_CUSTOM_X;this.y=b||this._DEFAULT_CUSTOM_Y;this.columnOffset=a||this._DEFAULT_COLUMN_OFFSET;this.lineOffset=f||this._DEFAULT_LINE_OFFSET;this.xOffset=k||this._DEFAULT_X_OFFSET;this.yOffset=l||this._DEFAULT_Y_OFFSET}})})},"MW/rtc/plugins/offscreennotification/OffscreenNotificationUtils":function(){define([],
function(){return{HORIZONTAL_POSITION:{LEFT:1,CENTER:2,RIGHT:3,NEAREST:10,CUSTOM:15},VERTICAL_POSITION:{TOP:1,CENTER:2,BOTTOM:3,NEAREST:10,CUSTOM:15}}})},"MW/rtc/plugins/blockmatching/BlockMatchingUtils":function(){define(["dojo/dom-construct"],function(h){return{removeCharactersFromFrontOfDomNode:function(e,g){if(0<e.childElementCount)for(;0<e.children.length;){var d=e.children[0];if(d.innerText.length<g)g-=d.innerText.length,h.destroy(d);else{this.removeCharactersFromFrontOfDomNode(d,g);break}}else e.innerText.length>
g?e.innerText=e.innerText.substring(g):h.destroy(e)},removeCharactersFromBackOfDomNode:function(e,g){if(0<e.childElementCount)for(var d=e.children.length-1;0<=d;d--){var c=e.children[d];if(c.innerText.length<g)g-=c.innerText.length,h.destroy(c);else{this.removeCharactersFromBackOfDomNode(c,g);break}}else e.innerText.length>g?e.innerText=e.innerText.substring(0,e.innerText.length-g):h.destroy(e)}}})},"MW/rtc/plugins/breakpoint/matlab/executablelines/ExecutableLineDecoratorProvider":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/plugins/breakpoint/matlab/executablelines/ExecutableLineDecorator","MW/rtc/core/provider/PluginProvider"],function(h,e,g,d){return h(d,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.code.executablelines","rtc.linenumberservice"]}},createInstance:function(c,b){return new g(c,b)}})})},"MW/rtc/plugins/breakpoint/matlab/executablelines/ExecutableLineDecorator":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-construct dojo/dom-class MW/rtc/margin/AbstractLineMarginDecorator".split(" "),
function(h,e,g,d,c,b,a){return h(a,{constructor:function(a,b){this._executableLineService=a;this._lineNumberService=b;this.own(g.after(this._executableLineService,"onUpdate",e.hitch(this,"_handleUpdate")))},hasLayerForLineNumber:function(a,b){var c=this._lineNumberService.getCodeLineNumberFromLineNumber(a);if(0>c)return!1;c=this._executableLineService.isCodeLineExecutable(c);return!b&&c},createDecorationForLineNumber:function(a,b){var d=this._lineNumberService.getCodeLineNumberFromLineNumber(a),e=
c.create("div");this._applyStyle(e,d-1,b);return e},_applyStyle:function(a,c,e){e||(b.add(a,"marginExecutableLine"),d.set(a,"data-testid","executableLine_"+c))},getWidth:function(){return 15},_handleUpdate:function(){this.onUpdate()}})})},"MW/rtc/plugins/breakpoint/matlab/TraditionalBreakpointStylerProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/breakpoint/matlab/TraditionalBreakpointStyler"],function(h,e,g,d){return h(g,{requires:function(){return{createInstance:["debug.breakpointmodel",
"debug.breakpointdirtyservice"]}},createInstance:function(c,b){return new d(c,b)}})})},"MW/rtc/plugins/breakpoint/matlab/TraditionalBreakpointStyler":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-class","dojo/i18n!l10n/nls/breakpoints","MW/rtc/plugins/breakpoint/AbstractBreakpointStyler"],function(h,e,g,d,c){return h(c,{constructor:function(b,a){},buildTooltipString:function(b){if(this._breakpointDataModel.wasThereAnErrorSyncingBreakpoints())return d.syntaxErrorTooltip;var a=
"";this._showOutOfSyncBreakpoints()&&(a+="\x3cb\x3e"+d.dirtyFileTooltip+"\x3c/b\x3e\x3cbr\x3e");return a+=b.toString()},allowPartialBreakpoints:function(){return!0},shouldShowBreakpointsErrored:function(){return!0},applyStyle:function(b,a,f){this.inherited(arguments);g.add(b,"traditional");this._addTraditionalTestId(b)},_addTraditionalTestId:function(b){var a=b.getAttribute("data-testid");b.setAttribute("data-testId",a+"_traditional")},_shouldShowPartialBreakpoint:function(b){return b},_showConditionalBreakpoint:function(b){return b&&
b.hasExpression()},_applyDisabledStyle:function(b,a){e.create("div",{"class":"disabledX"},b,"first")}})})},"MW/rtc/plugins/breakpoint/AbstractBreakpointStyler":function(){define(["dojo/dom-class","dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,e,g){return e(g,{constructor:function(d,c){this._breakpointDataModel=d;this._breakpointDirtyService=c},buildTooltipString:function(d){throw Error("Unimplemented API: MW.rtc.plugins.breakpoint.AbstractBreakpointStyler.getTooltipText");},allowPartialBreakpoints:function(){throw Error("Unimplemented API: MW.rtc.plugins.breakpoint.AbstractBreakpointStyler.allowPartialBreakpoints");
},shouldShowBreakpointsErrored:function(){throw Error("Unimplemented API: MW.rtc.plugins.breakpoint.AbstractBreakpointStyler.shouldShowBreakpointsErrored");},applyStyle:function(d,c,b){var a=[];this._shouldShowPartialBreakpoint(b)?(h.add(d,"intermediateBreakpoint"),a.push("intermediateBreakpoint")):(h.add(d,"breakpoint"),a.push("breakpoint"));this._showOutOfSyncBreakpoints()?(h.add(d,"outOfSync"),a.push("outOfSync")):this._showConditionalBreakpoint(c)?(h.add(d,"conditionalBreakpoint"),a.push("conditionalBreakpoint")):
(h.add(d,"regularBreakpoint"),a.push("regularBreakpoint"));c&&!c.isEnabled&&(this._applyDisabledStyle(d,"disabled"),a.push("disabled"));this._adjustAlignment(d,c.zeroBasedLineNumber);this._addTestTag(d,a,c.zeroBasedLineNumber)},_shouldShowPartialBreakpoint:function(d){throw Error("Unimplemented API: MW.rtc.plugins.breakpoint.AbstractBreakpointStyler._shouldShowPartialBreakpoint");},_showOutOfSyncBreakpoints:function(){return this._breakpointDirtyService.areBreakpointsDirty()},_showConditionalBreakpoint:function(d){throw Error("Unimplemented API: MW.rtc.plugins.breakpoint.AbstractBreakpointStyler._showConditionalBreakpoint");
},_applyDisabledStyle:function(d){throw Error("Unimplemented API: MW.rtc.plugins.breakpoint.AbstractBreakpointStyler._applyDisabledStyle");},_adjustAlignment:function(d,c){},_addTestTag:function(d,c,b){b=c&&0<c.length?b+"_"+c.join("_"):b+"_invalid";d.setAttribute("data-testid",b)}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointContextMenuModelFactoryProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointContextMenuModelFactory","MW/rtc/core/provider/PluginProvider"],
function(h,e,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{createInstance:"debug.breakpointmodel rtc.actionservice rtc.internaldocument rtc.backingstore rtc.focusservice rtc.hyperlinkservice rtc.linenumberservice debug.breakpoint.dataservice".split(" ")}},createInstance:function(d,c,b,a,f,k,g,h){return new e(d,c,b,a,f,k,g,h)}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointContextMenuModelFactory":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin",
"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointContextMenuModel"],function(h,e,g){return h(e,{constructor:function(d,c,b,a,f,e,g,h){this._breakpointModel=d;this._actionDataService=c;this._internalDocument=b;this._backingStore=a;this._focusService=f;this._hyperlinkService=e;this._lineNumberService=g;this._matlabBreakpointDataService=h;this._instance=null},getInstance:function(){this._instance||(this._instance=new g(this._breakpointModel,this._actionDataService,this._backingStore,this._focusService,
this._hyperlinkService,this._lineNumberService,this._matlabBreakpointDataService));return this._instance}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointContextMenuModel":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/codeanalyzer/CodeAnalyzerDataService MW/rtc/datamodel/FileBackingStoreUtilities MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointContextMenuActions MW/rtc/plugins/dialog/ConditionalBreakpointDialog MW/rtc/plugins/contextmenu/MarginContextMenuModel dojo/i18n!l10n/nls/actions".split(" "),
function(h,e,g,d,c,b,a,f,k){return h(f,{NO_LINE:-1,constructor:function(a,f,c,h,q,r,s){this._breakpointModel=a;this._actionService=f;this._backingStore=c;this._focusService=h;this._hyperlinkService=q;this._lineNumberService=r;this._matlabBreakpointDataService=s;this._codeAnalyzerService=new d;this._menuLine=this.NO_LINE;this.own(this._matlabBreakpointDataService);this._dialogInstance=null;a=[{id:b.TOGGLE_BREAKPOINT_MENU_ACTION,enabled:!0,text:k.toggleBreakpointLabel,description:k.setBreakpointDescription,
callback:e.hitch(this,"_toggleBreakpointOnLine")},{id:b.TOGGLE_ENABLE_BREAKPOINT_MENU_ACTION,enabled:!0,text:k.enableBreakpointText,description:k.enableBreakpointDescription,callback:e.hitch(this,"_toggleEnableBreakpointOnLine")},{id:b.TOGGLE_CONDITIONAL_BREAKPOINT_MENU_ACTION,enabled:!0,text:k.setConditionalBreakpointText,description:k.setConditionalBreakpointDescription,callback:e.hitch(this,"_createConditionalBreakpointDialog")},{id:b.CLEAR_ALL_BREAKPOINTS_IN_FILE_MENU_ACTION,enabled:!0,text:k.clearAllBreakpointsInFileText,
description:k.clearAllBreakpointsInFileDescription,callback:e.hitch(this,"_clearAllBreakpointsInFile")},{id:b.DISABLE_ALL_BREAKPOINTS_MENU_ACTION,enabled:!0,text:k.disableAllBreakpointsInFileText,description:k.disableAllBreakpointsInFileText,callback:e.hitch(this,"_disableAllBreakpointsInFile")},{id:b.ENABLE_ALL_BREAKPOINTS_MENU_ACTION,enabled:!0,text:k.enableAllBreakpointsInFileText,description:k.enableAllBreakpointsInFileDescription,callback:e.hitch(this,"_enableAllBreakpointsInFile")},{id:b.CLEAR_ALL_BREAKPOINTS_MENU_ACTION,
enabled:!0,text:k.clearAllBreakpointsLabel,description:k.clearAllBreakpointsDescription,callback:e.hitch(this,"_clearAll")}];this._actionService.loadActions(a);this._groupActionsMap={Toggle:[b.TOGGLE_CONDITIONAL_BREAKPOINT_MENU_ACTION,b.TOGGLE_ENABLE_BREAKPOINT_MENU_ACTION,b.TOGGLE_BREAKPOINT_MENU_ACTION],Set:[b.TOGGLE_ENABLE_BREAKPOINT_MENU_ACTION,b.TOGGLE_BREAKPOINT_MENU_ACTION,b.TOGGLE_CONDITIONAL_BREAKPOINT_MENU_ACTION],ToggleAllStatus:[b.ENABLE_ALL_BREAKPOINTS_MENU_ACTION,b.DISABLE_ALL_BREAKPOINTS_MENU_ACTION],
ClearAll:[b.CLEAR_ALL_BREAKPOINTS_MENU_ACTION,b.CLEAR_ALL_BREAKPOINTS_IN_FILE_MENU_ACTION]};this._groupList=["Toggle","ToggleAllStatus","ClearAll"];this._setGroupList=["Set","ToggleAllStatus","ClearAll"];this._dialogInstance=null;this.own(g.after(this._matlabBreakpointDataService,"breakpointsAdded",e.hitch(this,"_handleBreakpointsAdded"),!0));this.own(g.after(this._matlabBreakpointDataService,"breakpointErrored",e.hitch(this,"_handleBreakpointError"),!0))},_updateActionsBasedOnLine:function(){this._breakpointModel.hasBreakpointAtLine(this._menuLine)?
(this._actionService.updateAction(b.TOGGLE_BREAKPOINT_MENU_ACTION,{text:k.clearBreakpointText,description:k.clearBreakpointDescription}),this._actionService.updateAction(b.TOGGLE_CONDITIONAL_BREAKPOINT_MENU_ACTION,{text:k.setModifyConditionalBreakpointText,description:k.setModifyConditionalBreakpointDescription}),this._breakpointModel.hasEnabledBreakpointAtLine(this._menuLine)?this._actionService.updateAction(b.TOGGLE_ENABLE_BREAKPOINT_MENU_ACTION,{text:k.disableBreakpointText,description:k.disableBreakpointDescription}):
this._actionService.updateAction(b.TOGGLE_ENABLE_BREAKPOINT_MENU_ACTION,{text:k.enableBreakpointText,description:k.enableBreakpointDescription})):(this._actionService.updateAction(b.TOGGLE_CONDITIONAL_BREAKPOINT_MENU_ACTION,{text:k.setConditionalBreakpointText,description:k.setConditionalBreakpointDescription}),this._actionService.updateAction(b.TOGGLE_BREAKPOINT_MENU_ACTION,{text:k.setBreakpointText,description:k.setBreakpointDescription}))},_toggleBreakpointOnLine:function(){this._breakpointModel.toggleBreakpoint(this._menuLine);
this._resetMenuLine()},_toggleEnableBreakpointOnLine:function(){this._breakpointModel.toggleEnableState(this._menuLine);this._resetMenuLine()},_clearAllBreakpointsInFile:function(){this._breakpointModel.clearAllBreakpointsInFile();this._resetMenuLine()},_clearAll:function(){this._breakpointModel.clearAllBreakpoints();this._resetMenuLine()},_enableAllBreakpointsInFile:function(){this._breakpointModel.enableAllBreakpointsInFile();this._resetMenuLine()},_disableAllBreakpointsInFile:function(){this._breakpointModel.disableAllBreakpointsInFile();
this._resetMenuLine()},_createConditionalBreakpointDialog:function(){if(this._dialogInstance)return this._dialogInstance;var f=this._menuLine,b=c.getAbsoluteFilePathFromBackingStore(this._backingStore);this._dialogInstance=new a(b,f,e.hitch(this,this._close),this._breakpointModel,this._hyperlinkService,this._codeAnalyzerService);this._resetMenuLine();return this._dialogInstance},_handleBreakpointsAdded:function(){this._dialogInstance&&(this._dialogInstance.close(),this._close())},_handleBreakpointError:function(a){this._dialogInstance&&
this._dialogInstance.delayedSelectTextboxText()},_close:function(){this._focusService.setFocus();this._dialogInstance&&(this._dialogInstance=null)},setMenuLine:function(a){this._menuLine=this._lineNumberService.getCodeLineNumberAtOrBeforeLineNumber(a)-1;this._updateActionsBasedOnLine()},_resetMenuLine:function(){this._menuLine=this.NO_LINE},getGroups:function(){return this._breakpointModel.hasBreakpointAtLine(this._menuLine)?this._groupList:this._setGroupList},getActions:function(a){a=this._groupActionsMap[a];
if(!a)return[];var f=[];a.forEach(function(a){(a=this._getActionInfo(a))&&f.push(a)},this);return f},_getActionInfo:function(a){var f=this._actionService.getAction(a),b=null;if(f){var c=f.text||f.description;if(void 0===c||this._filterActionFromContextMenu(a))return b;b={id:a,label:c,shortcut:f.shortcut,callback:e.hitch(this._actionService,"executeAction",a,{}),enabled:f.enabled}}return b},_filterActionFromContextMenu:function(a){return a===b.TOGGLE_ENABLE_BREAKPOINT_MENU_ACTION&&!this._breakpointModel.hasBreakpointAtLine(this._menuLine)||
a===b.ENABLE_ALL_BREAKPOINTS_MENU_ACTION&&!this._breakpointModel.hasDisabledBreakpointsInFile()||a===b.DISABLE_ALL_BREAKPOINTS_MENU_ACTION&&!this._breakpointModel.hasEnabledBreakpointsInFile()||a===b.CLEAR_ALL_BREAKPOINTS_IN_FILE_MENU_ACTION&&!this._breakpointModel.hasBreakpointsInFile()?!0:!1}})})},"MW/codeanalyzer/CodeAnalyzerDataService":function(){define(["dojo/_base/declare","dojo/_base/array","mw-log/Log","mw-remote/Remote"],function(h,e,g,d){return h(null,{constructor:function(){d.registerResponseHandler("CodeAnalyzerResponse",
this._handleCodeAnalyzerResponse,this);d.registerFaultHandler("CodeAnalyzer",this._handleCodeAnalyzerError,this)},getMessages:function(c,b,a,f){d.sendMessage({CodeAnalyzer:{matlabCode:b,filename:a}},{callback:f,uid:c,matlabCode:b})},_handleCodeAnalyzerResponse:function(c,b){e.forEach(c,function(a){b.callback(a.messages,b.uid,b.matlabCode)},this)},_handleCodeAnalyzerError:function(c){g.assert(!1,"Received the following error: "+c)}})})},"MW/rtc/datamodel/FileBackingStoreUtilities":function(){define(["mw-filename-utils/FileNameUtil",
"MW/rtc/datamodel/FileBackingStore"],function(h,e){return{DEFAULT_FILE_PATH:"untitled.mlx",isPlainCodeFile:function(g){var d;if(d=g instanceof e)g=g.getFileName(),d=h.getFileNameExtension(g),d=h.isMatlabFileName(g)||"mlx"===d.toLowerCase()||"mlapp"===d;return d},getAbsoluteFilePathFromBackingStore:function(e){return e.getAbsoluteFilePath?e.getAbsoluteFilePath():""},hasFileLocation:function(e){return e.file&&e.file.fileInfo.location}}})},"mw-filename-utils/FileNameUtil":function(){define(["dojo/_base/array"],
function(h){return{MATLAB_FILE_PATTERN:/^[a-z][a-z0-9_]*\.m$/i,USER_DIR_PATH:"users/",USERS_DIR_PATH:"/users/",USER_PUBLISHED_DIR:"Published",USER_PUBLISHED_DIR_PATH_PATTERN:"^/MATLAB Drive/Published$",USER_SHARED_DIR_PATH_PATTERN:"^/MATLAB Drive/Shared$",IN_USER_SHARED_DIR_PATTERN:"^/MATLAB Drive/Shared/*",BROWSER_TYPES:"htm html pdf doc docx dot dotx rtf docm dotm xls asv dat exe dll zip".split(" "),LOAD_TYPES:["mat"],MATLAB_OPEN_TYPES:"fig tif png jpg jpeg gif au bmp mlx xlsx".split(" "),LIVE_SCRIPT_EXTENSION:"mlx",
MATLAB_CODE_FILE_EXTENSION:"m",FILENAME_PATTERN:/^[^\"\/\*:><\?\\|]+$/,MATLAB_EXTENSION_PATTERN:/\.(m|mln|mlx)$/i,SUPPORTED_EXTENSION_PATTERN:/\.(pdf|html|htm)$/i,SUPPORTED_FILENAME_PATTERN:/^[a-z][a-z0-9_]*\.(m|mln|mlx|pdf|html|htm)$/i,MATLAB_FILENAME_PATTERN:/^[a-z][a-z0-9_]*\.(m|mln|mlx)$/i,MATLAB_NAME_LENGTH:63,FILE_NAME_LENGTH:128,isMatlabFileInfo:function(e){return this._fileInfoNameMatchesRegExp(e,this.MATLAB_FILE_PATTERN)},isMatlabFileName:function(e){return this._fileNameMatchesRegExp(e,
this.MATLAB_FILE_PATTERN)},isValidFileName:function(e){return this._fileNameMatchesRegExp(e,this.FILENAME_PATTERN)},checkFileInfoExtension:function(e,g){return e&&e.name&&this.checkFileNameExtension(e.name,g)},checkFileNameExtension:function(e,g){g instanceof Array||(g=[g]);return h.some(g,function(d){return this.getFileNameExtension(e).toLocaleLowerCase()===d.toLocaleLowerCase()},this)},constructMatlabFilePath:function(e){return"'"+this.pathFromFileInfo(e).replace(/'/g,"''")+"'"},constructUrlFromFileInfo:function(e,
g){var d="/"+e.location.substring(Math.min(e.location.indexOf("/MATLAB Drive/")+14,e.location.length));return this.USER_DIR_PATH+g+d+e.name},constructPathFromUserName:function(e){if(e)return this.USERS_DIR_PATH+e+"/"},getFileSeparator:function(e){return-1!==e.search(/^[a-z]:/i)||-1!==e.search(/^\\\\/i)?"\\":"/"},getFileNameNoExtension:function(e){if(!e||"string"!==typeof e)return e;var g=-1!==e.lastIndexOf(".")?e.lastIndexOf("."):e.length;return e.slice(0,g)},getFileNameExtension:function(e){if(!e||
"string"!==typeof e)return e;var g=-1!==e.lastIndexOf(".")?e.lastIndexOf(".")+1:e.length;return e.substring(g,e.length)},normalizePath:function(e){var g=this.getFileSeparator(e);return e.replace(/[\/\\]*$/,g)},parseHomeFolderFromPath:function(e,g){var d=e.indexOf(g),c="";0<d&&(c=e.substring(0,d+g.length)+this.getFileSeparator(e));return c},getPackageStartFromLocation:function(e){e=this.normalizeLocation(e);var g=this.getFileSeparator(e);"\\"===g&&(g+=g);return e.search("(\\"+g+"\\+[a-zA-Z][a-zA-Z0-9_]*)+\\"+
g+"$")},getFullyQualifiedMatlabName:function(e){var g=this.convertLocationToPackage(e.location);e=this.getFileNameNoExtension(e.name);return g+e},getPathForPublish:function(e,g){var d;-1<e.location.indexOf("+")?d=this.getFullyQualifiedMatlabName(e):(d=g?e.location.replace("/MATLAB Drive/",g):e.location,d+=e.name);return d},convertToPublishURLFromMATLABDriveURL:function(e,g){if(0===e.indexOf("/MATLAB Drive/"+this.USER_PUBLISHED_DIR))return e.replace("/MATLAB Drive/",g)},areFilesEqual:function(e,g){return this.pathFromFileInfo(e)===
this.pathFromFileInfo(g)},convertPathToRowClass:function(e){return e.replace(/[\/\.]/g,"_")},convertLocationToPackage:function(e){e=this.normalizeLocation(e);var g=this.getPackageStartFromLocation(e);if(0>g)return"";var d=this.getFileSeparator(e);"\\"===d&&(d+=d);return e.substring(g+1,e.length).replace(/\+/g,"").replace(RegExp("\\"+d,"g"),".")},isShareable:function(e){return e.location===this.USERS_DIR_PATH||this.isUserPublishedDirectoryPath(e.path)?!1:e.shareAttributes&&void 0!==e.shareAttributes.canProduceShare?
e.shareAttributes.canProduceShare:e.isDirectory&&!(e.parent&&"ROOT"===e.parent.pathId)},isUserSharedDirectoryPath:function(e){return e.match(this.USER_SHARED_DIR_PATH_PATTERN)},isInUsersSharedDirectory:function(e){return-1!==e.search(this.IN_USER_SHARED_DIR_PATTERN)},isCurrentFolderInPath:function(e,g){return-1!==g.search(e)},isUserPublishedDirectoryPath:function(e){return e.match(this.USER_PUBLISHED_DIR_PATH_PATTERN)},isVersioned:function(e){return!e.isDirectory&&this.isWritable(e)&&this.isMatlabEditorOpenType(e)},
isWritable:function(e){return e&&e.filePermissions&&e.filePermissions.canWrite},isLiveScriptFile:function(e){return this.getFileNameExtension(e)===this.LIVE_SCRIPT_EXTENSION},isPlainCodeFile:function(e){return this.getFileNameExtension(e)===this.MATLAB_CODE_FILE_EXTENSION},canRename:function(e){return!e||e.parent&&"ROOT"===e.parent.pathId||e.parent&&e.name===this.USER_PUBLISHED_DIR&&"ROOT"===e.parent.parent.pathId?!1:this.isWritable(e)},canDelete:function(e){return this.canRename(e)},canDownload:function(e){return!e||
e.name&&"mln"===this.getFileNameExtension(e.name).toLocaleLowerCase()?!1:!e.isDirectory},_fileInfoNameMatchesRegExp:function(e,g){var d=!1;e&&e.name&&(d=this._fileNameMatchesRegExp(e.name,g));return d},_fileNameMatchesRegExp:function(e,g){var d=!1,c=this._getCaseInsensitiveRegExp(g);e&&("string"===typeof e&&-1!==e.search(c))&&(d=!0);return d},_getCaseInsensitiveRegExp:function(e){return e instanceof RegExp?RegExp(e.source,"i"):RegExp(e,"i")},assertIsFile:function(e){if(!this.isFile(e))throw Error("MW.utils.FileNameUtil: the object is not a 'File'. "+
JSON.stringify(e));},isFile:function(e){return e&&e.hasOwnProperty("content")&&e.hasOwnProperty("fileInfo")&&this.isFileInfo(e.fileInfo)},assertIsFileInfo:function(e){if(!this.isFileInfo(e))throw Error("MW.utils.FileNameUtil: the object is not a 'FileInfo'. "+JSON.stringify(e));},isFileInfo:function(e){return e&&e.hasOwnProperty("location")&&e.hasOwnProperty("name")&&e.hasOwnProperty("isDirectory")},normalizeLocation:function(e){if("string"===typeof e&&(0===e.length||e.lastIndexOf(this.getFileSeparator(e))!==
e.length-1))e+=this.getFileSeparator(e);return e},createFilePath:function(e,g){return this.normalizeLocation(e)+g},folderInfoFromPath:function(e){e=this.fileInfoFromPath(e);e.isDirectory=!0;return e},fileInfoFromPath:function(e){return{location:this.locationFromPath(e),name:this.nameFromPath(e),filePermissions:{canWrite:!0},isDirectory:!1,separator:this.getFileSeparator(e)}},pathFromFileInfo:function(e){this.assertIsFileInfo(e);return e.location+e.name},locationFromPath:function(e){var g,d=this.getFileSeparator(e),
c=e.split(d);c[c.length-1]?(g=c[c.length-1],g=e.slice(0,e.length-g.length)):c[c.length-2]&&(g=c[c.length-2],g=e.slice(0,e.length-g.length-1));!g&&e===d&&(g=d);return g},getParentPath:function(e){e=this.locationFromPath(e);return this._getPath(e)},_getPath:function(e){if(0===e.length)return e;var g=this.getFileSeparator(e);return e.charAt(e.length-1)!==g||3===e.length&&e.charAt(0).match(/[a-z]/i)&&":"===e.charAt(1)&&"\\"===e.charAt(2)||"/"===e?e:e.slice(0,e.length-1)},nameFromPath:function(e){var g=
"",d=this.getFileSeparator(e);e=e.replace(d+d,d);e=e.split(d);e[e.length-1]?g=e[e.length-1]:e[e.length-2]&&(g=e[e.length-2]);return g},createEmptyFileObject:function(e,g){return{content:"",fileInfo:this.fileInfoFromPath(this.createFilePath(e,g))}},remoteFile:function(e){var g=e;this.isFile(e)&&this.isFileInfo(e.fileInfo)&&(g={content:e.content,fileInfo:this.remoteFileInfo(e.fileInfo)});return g},remoteFileInfo:function(e){var g=e;this.isFileInfo(e)&&(g={location:e.location,name:e.name,isDirectory:e.isDirectory});
return g},extractSelectedFileName:function(e){if(!e||""===e||1>e.length)return"";var g=this.getFileSeparator(e);return 0>e.lastIndexOf(g)?e:e.substring(e.lastIndexOf(g)+1,e.length)},isBrowserType:function(e){return this.checkFileInfoExtension(e,this.BROWSER_TYPES)?!0:!1},isLoadType:function(e){return this.checkFileInfoExtension(e,this.LOAD_TYPES)?!0:!1},isMatlabOpenType:function(e){return this.checkFileInfoExtension(e,this.MATLAB_OPEN_TYPES)?!0:!1},isMatlabEditorOpenType:function(e){return!(this.checkFileInfoExtension(e,
this.BROWSER_TYPES)||this.checkFileInfoExtension(e,this.LOAD_TYPES)||this.checkFileInfoExtension(e,this.MATLAB_OPEN_TYPES))}}})},"MW/rtc/datamodel/FileBackingStore":function(){define(["dojo/_base/declare","MW/rtc/datamodel/BackingStore","mw-filename-utils/FileNameUtil"],function(h,e,g){return h(e,{constructor:function(d){this.uniqueId=this.absoluteFilePath=d;this.file={fileInfo:g.fileInfoFromPath(d)}},_updateFilePath:function(d){this.absoluteFilePath!==d&&(this.uniqueId=this.absoluteFilePath=d,this.file=
{fileInfo:g.fileInfoFromPath(d)},this.onFilePathUpdated(this.absoluteFilePath))},onFilePathUpdated:function(d){},getAbsoluteFilePath:function(){return this.absoluteFilePath},getFileName:function(){return this.file.fileInfo.name},getFileLocation:function(){return this.file.fileInfo.location},getUniqueId:function(){return this.uniqueId}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointContextMenuActions":function(){define([],function(){return{TOGGLE_BREAKPOINT_MENU_ACTION:"_rtc_menu_toggle_breakpoint",
TOGGLE_ENABLE_BREAKPOINT_MENU_ACTION:"_rtc_menu_toggle_enable_breakpoint",TOGGLE_CONDITIONAL_BREAKPOINT_MENU_ACTION:"_rtc_menu_toggle_conditional_breakpoint",CLEAR_ALL_BREAKPOINTS_IN_FILE_MENU_ACTION:"_rtc_menu_clear_all_breakpoints_in_file",CLEAR_ALL_BREAKPOINTS_MENU_ACTION:"_rtc_menu_clear_all_breakpoints",DISABLE_ALL_BREAKPOINTS_MENU_ACTION:"_rtc_menu_disable_all_breakpoints_in_file",ENABLE_ALL_BREAKPOINTS_MENU_ACTION:"_rtc_menu_enable_all_breakpoints_in_file"}})},"MW/rtc/plugins/dialog/ConditionalBreakpointDialog":function(){define("dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_WidgetBase dojo/keys dojo/on dojo/_base/declare dojo/_base/lang dojo/i18n!l10n/nls/conditionalBreakpointDialog dojo/text!./ConditionalBreakpointTemplate.html mw-dialog-utils/DialogUtils MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointInfo".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n){return b([g,h,e],{templateString:k,constructor:function(a,f,b,c,d,e){this._absoluteFilePath=a;this._filePath=this._getTruncated(a);this._zeroIndexedLineNumber=f;this._oneIndexedLineNumber=f+1;this._breakpointModel=c;this._expression=this._getBreakpointExpressionFromModel();this._hyperlinkService=d;this._codeAnalyzerService=e;this._closeCallBack=b;this._conditionalDialogWidget=null},postCreate:function(){this.inherited(arguments);c(this.okButton,"click",a.hitch(this,
"_okCallback"));c(this.cancelButton,"click",a.hitch(this,"_cancelCallback"));c(this.helpButton,"click",a.hitch(this,"_conditionalBreakpointHelpCallback"));this.okButton.set("label",f.okButtonLabel);this.cancelButton.set("label",f.cancelButtonLabel);this.helpButton.set("label",f.helpButtonLabel);this.fileLabel.innerHTML=this._createFileLabel();this.conditionLabel.innerHTML=this._createConditionLabel();this.noteLabel.innerHTML=f.noteLabel;this.conditionInput.set("value",this._expression);c(this.conditionInput,
"onkeydown",a.hitch(this,"onTextKeydown"));var b={dialogClass:"rteConditionalBreakpointModalDialog","data-testid":"rteConditionalBreakpointDialog",closeCallBack:a.hitch(this,"_closeCallBack")};setTimeout(a.hitch(this,function(){this._conditionalDialogWidget=l.displayModalDialog(this,f.title,[],b);this.delayedSelectTextboxText()}),0)},onTextKeydown:function(a){a.keyCode===d.ENTER?this._okCallback():a.keyCode===d.ESCAPE&&this._cancelCallback()},delayedSelectTextboxText:function(){setTimeout(a.hitch(this,
this._fullySelectTextboxText),0)},_fullySelectTextboxText:function(){var a=this._getExpressionTextboxValue().length;0<=a&&this._setCursorPositionAndSelection(0,a)},_setCursorPositionAndSelection:function(a,f){var b=this.conditionInput.textbox;b.createTextRange?(b=b.createTextRange(),b.collapse(),b.moveStart("character",a),b.moveEnd("character",f),b.select()):null!==b.selectionStart&&(b.focus(),b.setSelectionRange(a,f))},_okCallback:function(){var f=a.trim(this._getExpressionTextboxValue());this._breakpointModel.areBreakpointsLive()?
this._setConditionalBreakpoint(f):this._codeAnalyzerService.getMessages("UID1234",f,"filename.m",a.hitch(this,"_handleCodeAnalyzerMessages",f))},_handleCodeAnalyzerMessages:function(a,f){f.some(function(a){return 1<a.severity})?(this.delayedSelectTextboxText(),this._breakpointModel.showErrorDialog("Syntax",f[0].message)):(this._setConditionalBreakpoint(a),this.close())},_cancelCallback:function(){this.close()},close:function(){this._conditionalDialogWidget.close()},_getTruncated:function(a){var f=
a.length,b=a;46<f&&(b=a.substring(0,23),a=a.substring(f-23),b=b+"..."+a);return b},_conditionalBreakpointHelpCallback:function(){this._hyperlinkService.openUrl("matlab:helpview(fullfile(docroot,'matlab','helptargets.map'),'matlab_env_conditional_breakpoints')")},_setConditionalBreakpoint:function(a){a=new n(this._zeroIndexedLineNumber,"",!0,a);this._breakpointModel.setBreakpoint(a)},_getBreakpointExpressionFromModel:function(){var a=this._breakpointModel.getBreakpoint(this._zeroIndexedLineNumber),
f="";a&&(f=a.expression);return f},_createFileLabel:function(){return f.fileLabel.replace(/\$\{0}/g,this._filePath)},_createConditionLabel:function(){return f.conditionLabel.replace(/\$\{0}/g,this._oneIndexedLineNumber)},_getExpressionTextboxValue:function(){return this.conditionInput.get("value")}})})},"mw-dialog-utils/DialogUtils":function(){define("dijit/_Widget dijit/form/Button dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/on ./DialogDisplayManager mw-log/Log mw-utils/Utils dojo/i18n!./l10n/nls/dialog mw-deprecation-utils/deprecation".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q){q.deprecated({deprecated:{module:"MW/dialog/DialogUtils"},replacement:{module:"mw-dialogs/Dialogs"},geckNumber:1471429});var r={dismiss:function(a,f){f.close()}},s=g(h,{constructor:function(a){a=a||{};a.message=a.message||"This space intentionally left blank";a.buttons=a.buttons||{name:"ok",label:this._getLocalizedName("ok"),buttonHandler:{handler:"dismiss"}};a.options=a.options||{};d.isArray(a.buttons)||(a.buttons=[a.buttons])},buildRendering:function(){this.inherited(arguments);
this._setDialogOptions(this.options);this._addMessage(this.message);this._addButtons(this.buttons)},startup:function(){d.isFunction(this.message.startup)&&this.message.startup();this.buttonWidgets.forEach(function(a){a.startup()})},destroy:function(){k.emit(this.domNode,"restorefocus",{bubbles:!0});this.inherited(arguments);if(this.message&&d.isFunction(this.message.onClose))this.message.onClose()},destroyRecursive:function(){this.inherited(arguments);delete this.message;this.buttonWidgets&&delete this.buttonWidgets},
_setDialogOptions:function(a){b.add(this.domNode,a.dialogClass||"messageDialog");a&&a["data-test-id"]&&c.set(this.domNode,"data-test-id",a["data-test-id"])},_addMessage:function(b){d.isString(b)?(c.set(this.domNode,"innerHTML",b),f.set(this.domNode,"whiteSpace","pre-line")):d.isFunction(b.placeAt)?b.placeAt(this.domNode,"first"):a.place(b,this.domNode,"first")},_addButtons:function(f){this.buttonWidgets=[];"none"!==this.buttons.toString().toLowerCase()&&(this.buttonContainer=this._createButtons(f),
a.place(this.buttonContainer,this.domNode,"last"))},_createButtons:function(f){var b=a.create("div",{"class":"buttonContainer"});f=this._convertButtonsToNewFormat(f);f.forEach(function(a){var f=this._createButton(a);a["data-testid"]&&c.set(f.domNode,"data-testid",a["data-testid"]);f.placeAt(b,"last");this.buttonWidgets.push(f)},this);return b},_convertButtonsToNewFormat:function(a){var f=[],b;a.forEach(function(a){var c;if(!a.name||!a.buttonHandler||!a.buttonHandler.handler){n.warn("buttons format is deprecated: "+
a+' expected format: {name: "ok", label: "OK", buttonHandler: {handler: function(){}, scope:}}');b={};for(c in a)a.hasOwnProperty(c)&&(b.name=c,b.buttonHandler={},b.buttonHandler.handler=a[c]);f.push(b)}else f.push(a)});return f},_createButton:function(a){var f=a.label||this._getLocalizedName(a.name);a=this._getHandlerFunction(a);return new e({label:f,onClick:a})},_getLocalizedName:function(a){return d.getObject(a,!1,m)||a},_getHandlerFunction:function(a){var f=a.buttonHandler.handler,b=a.buttonHandler.scope,
c;if(d.isString(f))if(r.hasOwnProperty(f))c=r[f];else throw Error("Unknown button handler: "+c);else c=f;return c=b?d.hitch(b,c,a,this):d.hitch(this,c,a,this)}}),t=g(h,{constructor:function(a){this.message=a},buildRendering:function(){this.inherited(arguments);this._addMessage(this.message)},_addMessage:function(a){c.set(this.domNode,"innerHTML",a);f.set(this.domNode,"whiteSpace","pre-line")}});h=null;return h=new (g([],{constructor:function(a){this.layoutInstance=null},_getLayoutInstance:function(){this.layoutInstance||
(this.layoutInstance=new l);return this.layoutInstance},setLayout:function(a){this.layoutInstance=a},_displayWidget:function(a,f,b){var c,e,g=this;f={title:f};c=b.layoutId||b.type+p.generateUuid();e=b.layoutId||b.type;d.mixin(f,b);if("string"===typeof a||!a)a=new t(a);b.dismissOnClick&&k(a,"click",function(){a.close()});a.onClose=function(){b.closeCallBack&&"function"===typeof b.closeCallBack&&b.closeCallBack();g._getLayoutInstance().removeWidget(c);return!0};a.onCancel=function(){b.cancelCallBack&&
"function"===typeof b.cancelCallBack&&b.cancelCallBack();a.close()};this._getLayoutInstance().addWidget(c,e,a,f);return a},displayModalDialog:function(a,f,b,c){c=c||{};"fault"===c.dialogType?(c.dialogClass=c.dialogClass||"faultMessage",c.layoutId=c.layoutId||"faultDialog"):"warn"===c.dialogType?(c.dialogClass=c.dialogClass||"warnMessage",c.layoutId=c.layoutId||"warnDialog"):c.dialogType=c.dialogType||"messageDialog";a=new s({message:a,buttons:b,options:c});c.isModal=!0;c.type=c.dialogType;return this._displayWidget(a,
f,c)},displayNonModalDialog:function(a,f,b){b=b||{};b.type="floatingPane";return this._displayWidget(f,a,b,b.type)},_getModalDialogWidget:function(){return s}}))})},"dijit/form/Button":function(){define("require dojo/_base/declare dojo/dom-class dojo/has dojo/_base/kernel dojo/_base/lang dojo/ready ./_FormWidget ./_ButtonMixin dojo/text!./templates/Button.html ../_mw/utils/deprecation ../a11yclick".split(" "),function(h,e,g,d,c,b,a,f,k,l,n){n.deprecated({deprecated:{module:"dijit/form/Button"},replacement:{module:"mw-form/PushButton"},
geckNumber:1352405});d("dijit-legacy-requires")&&a(0,function(){h(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});return e("dijit.form.Button",[f,k],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:l,_setValueAttr:"valueNode",_setNameAttr:function(a){this.valueNode&&this.valueNode.setAttribute("name",a)},postCreate:function(){this.inherited(arguments);this._setLabelFromContainer()},_setLabelFromContainer:function(){this.containerNode&&
!this.label&&(this.label=b.trim(this.containerNode.innerHTML),this.onLabelSet())},_setShowLabelAttr:function(a){this.containerNode&&g.toggle(this.containerNode,"dijitDisplayNone",!a);this._set("showLabel",a)},setLabel:function(a){c.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",a)},onLabelSet:function(){this.inherited(arguments);!this.showLabel&&!("title"in this.params)&&(this.titleNode.title=b.trim(this.containerNode.innerText||
this.containerNode.textContent||""))}})})},"dijit/form/_FormWidget":function(){define("dojo/_base/declare dojo/sniff dojo/_base/kernel dojo/ready ../_Widget ../_CssStateMixin ../_TemplatedMixin ./_FormWidgetMixin".split(" "),function(h,e,g,d,c,b,a,f){e("dijit-legacy-requires")&&d(0,function(){require(["dijit/form/_FormValueWidget"])});return h("dijit.form._FormWidget",[c,a,b,f],{setDisabled:function(a){g.deprecated("setDisabled("+a+") is deprecated. Use set('disabled',"+a+") instead.","","2.0");this.set("disabled",
a)},setValue:function(a){g.deprecated("dijit.form._FormWidget:setValue("+a+") is deprecated.  Use set('value',"+a+") instead.","","2.0");this.set("value",a)},getValue:function(){g.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name&&!e("msapp")?'name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"";this.inherited(arguments)}})})},"dijit/_CssStateMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-class dojo/has dojo/_base/lang dojo/on dojo/domReady dojo/touch dojo/_base/window ./a11yclick ./registry".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p){e=e("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);h.forEach("disabled readOnly checked selected focused state hovering active _opened".split(" "),function(a){this.watch(a,b.hitch(this,"_setStateClass"))},this);for(var a in this.cssStateNodes||{})this._trackMouseState(this[a],this.cssStateNodes[a]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(a){if(!this.disabled)switch(a.type){case "mouseover":case "MSPointerOver":case "pointerover":this._set("hovering",
!0);this._set("active",this._mouseDown);break;case "mouseout":case "MSPointerOut":case "pointerout":this._set("hovering",!1);this._set("active",!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":this._set("active",!0);break;case "mouseup":case "dojotouchend":case "MSPointerUp":case "pointerup":case "keyup":this._set("active",!1)}},_setStateClass:function(){function a(b){f=f.concat(h.map(f,function(a){return a+b}),"dijit"+b)}var f=this.baseClass.split(" ");
this.isLeftToRight()||a("Rtl");var b="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&a(b);this.state&&a(this.state);this.selected&&a("Selected");this._opened&&a("Opened");this.disabled?a("Disabled"):this.readOnly?a("ReadOnly"):this.active?a("Active"):this.hovering&&a("Hover");this.focused&&a("Focused");var b=this.stateNode||this.domNode,c={};h.forEach(b.className.split(" "),function(a){c[a]=!0});"_stateClasses"in this&&h.forEach(this._stateClasses,function(a){delete c[a]});h.forEach(f,
function(a){c[a]=!0});var d=[],e;for(e in c)d.push(e);b.className=d.join(" ");this._stateClasses=f},_subnodeCssMouseEvent:function(a,f,b){function c(b){d.toggle(a,f+"Active",b)}if(!this.disabled&&!this.readOnly)switch(b.type){case "mouseover":case "MSPointerOver":case "pointerover":d.toggle(a,f+"Hover",!0);break;case "mouseout":case "MSPointerOut":case "pointerout":d.toggle(a,f+"Hover",!1);c(!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":c(!0);
break;case "mouseup":case "MSPointerUp":case "pointerup":case "dojotouchend":case "keyup":c(!1);break;case "focus":case "focusin":d.toggle(a,f+"Focused",!0);break;case "blur":case "focusout":d.toggle(a,f+"Focused",!1)}},_trackMouseState:function(a,f){a._cssState=f}});f(function(){function f(a,b,c){if(!c||!g.isDescendant(c,b))for(;b&&b!=c;b=b.parentNode)if(b._cssState){var d=p.getEnclosingWidget(b);d&&(b==d.domNode?d._cssMouseEvent(a):d._subnodeCssMouseEvent(b,b._cssState,a))}}var b=l.body(),c;a(b,
k.over,function(a){f(a,a.target,a.relatedTarget)});a(b,k.out,function(a){f(a,a.target,a.relatedTarget)});a(b,n.press,function(a){c=a.target;f(a,c)});a(b,n.release,function(a){f(a,c);c=null});a(b,"focusin, focusout",function(a){var b=a.target;if(b._cssState&&!b.getAttribute("widgetId")){var f=p.getEnclosingWidget(b);f&&f._subnodeCssMouseEvent(b,b._cssState,a)}})});return e})},"dijit/form/_FormWidgetMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff dojo/window ../a11y".split(" "),
function(h,e,g,d,c,b,a,f,k,l){return e("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(a){this._set("disabled",a);/^(button|input|select|textarea|optgroup|option|fieldset)$/i.test(this.focusNode.tagName)?g.set(this.focusNode,"disabled",a):this.focusNode.setAttribute("aria-disabled",a?"true":"false");this.valueNode&&
g.set(this.valueNode,"disabled",a);a?(this._set("hovering",!1),this._set("active",!1),a="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode",h.forEach(c.isArray(a)?a:[a],function(a){a=this[a];f("webkit")||l.hasDefaultTabStop(a)?a.setAttribute("tabIndex","-1"):a.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(b){if("mouse"==b&&this.isFocusable())var d=this.own(a(this.focusNode,
"focus",function(){g.remove();d.remove()}))[0],e=f("pointer-events")?"pointerup":f("MSPointer")?"MSPointerUp":f("touch-events")?"touchend, mouseup":"mouseup",g=this.own(a(this.ownerDocumentBody,e,c.hitch(this,function(a){g.remove();d.remove();this.focused&&("touchend"==a.type?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){k.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=d.get(this.domNode,
"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(a){}},compare:function(a,b){return"number"==typeof a&&"number"==typeof b?isNaN(a)&&isNaN(b)?0:a-b:a>b?1:a<b?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(a,b){if(void 0==this._lastValueReported&&(null===b||!this._onChangeActive))this._resetValue=this._lastValueReported=a;this._pendingOnChange=this._pendingOnChange||typeof a!=typeof this._lastValueReported||0!=this.compare(a,
this._lastValueReported);if((this.intermediateChanges||b||void 0===b)&&this._pendingOnChange)this._lastValueReported=a,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(a)}))},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));this.inherited(arguments)}})})},
"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/has","../registry"],function(h,e,g,d){return h("dijit.form._ButtonMixin",null,{label:"",type:"button",__onClick:function(c){c.stopPropagation();c.preventDefault();this.disabled||this.valueNode.click(c);return!1},_onClick:function(c){if(this.disabled)return c.stopPropagation(),c.preventDefault(),!1;!1===this.onClick(c)&&c.preventDefault();var b=c.defaultPrevented;if(!b&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var a=
this.domNode;a.parentNode;a=a.parentNode){var f=d.byNode(a);if(f&&"function"==typeof f._onSubmit){f._onSubmit(c);c.preventDefault();b=!0;break}}return!b},postCreate:function(){this.inherited(arguments);e.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(c){this._set("label",c);(this.containerNode||this.focusNode).innerHTML=c;this.onLabelSet()},onLabelSet:function(){}})})},"dijit/_mw/utils/deprecation":function(){define(["dojo/_base/config"],function(h){var e={warn:function(d){console&&
console.warn&&console.warn(d)},error:function(d){console&&console.error&&console.error(d)}},g={deprecated:function(d){var c,b;if((h.isDebug||window.showDeprecationsAsErrors)&&this._isConfigValid(d))b=window.showDeprecationsAsErrors||d.deprecationLevel===this.ERROR?this.ERROR:this.WARN,c="DEPRECATED: ",d.deprecated&&(c+=d.deprecated.module,d.deprecated.method&&(c+="."+d.deprecated.method+"()"),c+="."),d.replacement&&(c+=" Use "+d.replacement.module,d.replacement.method&&(c+="."+d.replacement.method+
"()"),c+=" instead."),d.removalVersion&&(c+=" Will be removed in version: "+d.removalVersion+"."),d.geckNumber&&(c+=" Please use g"+d.geckNumber+" to track latest information regarding this deprecation"),d.additionalInformation&&(c+=" "+d.additionalInformation),e[b](c)},_isConfigValid:function(d){var c=!!d.deprecated&&"object"===typeof d.deprecated&&d.deprecated.hasOwnProperty("module");d.replacement&&(c=c&&"object"===typeof d.replacement&&d.replacement.hasOwnProperty("module"));d.geckNumber&&(c=
c&&"number"===typeof d.geckNumber);c||e.error("Supplied deprecationConfig properties are not valid. Please refer to http://inside.mathworks.com/wiki/Web_Widgets_Deprecation_API for right API");return c}};Object.defineProperties(g,{WARN:{value:"warn",enumerable:!0},ERROR:{value:"error",enumerable:!0}});return g})},"mw-dialog-utils/DialogDisplayManager":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-attr mw-store-utils/InMemoryStore ./DialogDisplayUtilities mw-deprecation-utils/deprecation".split(" "),
function(h,e,g,d,c,b,a){a.deprecated({deprecated:{module:"MW/dialog/DialogDisplayManager"},replacement:{module:"mw-dialogs/Dialogs"},geckNumber:1471429});return e([b],{constructor:function(a){this.dialogWidgetStore=new c},addWidget:function(a,b,c,d){b={};b.widget=c;b.position=d.position;b.closable=!1===d.closable?!1:!0;b.autofocus=!0;b.title=d.title;b.id=a;b.style=d.style;b.dialogClass=d.dialogClass;b.parentDiv=d.parentDiv;b["data-testid"]=d["data-testid"];d.isModal?this._displayModalDialog(b):(b.resizable=
d.resizable,this._displayNonModalDialog(b));this.dialogWidgetStore.newItem(b)},_displayModalDialog:function(a){a.wrapper=this.createModalDialogWrapper(a);a.wrapper.show();a.widget.startup()},_displayNonModalDialog:function(a){a.wrapper=this.createNonModalDialogWrapper(a);a.widget.close||(a.widget.close=function(){a.wrapper.close()});this.startNonModalDialogAndAddResizeHandlers(a.wrapper)},removeWidget:function(a){var b=null;this.dialogWidgetStore.fetch({query:{id:a},onItem:function(a){b=a}});b&&(b.wrapper.destroyRecursive(),
this.dialogWidgetStore.deleteItem(b))},removeWidgetsWithParentId:function(){},removeWidgetsWithLayoutId:function(){},showWidget:function(){},focusWidget:function(){},disableWidget:function(){},enableWidget:function(){},updateWidget:function(){},updateWidgetsWithLayoutId:function(){},ensureParentExistsInStore:function(){}})})},"mw-store-utils/InMemoryStore":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/data/util/filter","dojo/data/util/simpleFetch","mw-utils/Utils"],function(h,e,
g,d,c){h=h([],{_storeRef:"_S",_timestampProp:"_timestamp",constructor:function(b){b=b||{};this.items=[];b.items&&b.items.forEach(function(a){this.newItem(a)},this)},_fetchItems:function(b,a){var f=[],c,d,e,h,m,q,r={};if(b.query){d=b.queryOptions?b.queryOptions.ignoreCase:!1;for(c in b.query)b.query.hasOwnProperty(c)&&(q=b.query[c],"string"===typeof q&&/[\*\?]+/.test(q)?r[c]=g.patternToRegExp(q,d):q instanceof RegExp&&(r[c]=q));m=this.items.length;for(d=0;d<m;d+=1){e=!0;h=this.items[d];if(null===h)e=
!1;else for(c in b.query)b.query.hasOwnProperty(c)&&(q=b.query[c],this._containsValue(h,c,q,r[c])||(e=!1));e&&f.push(h)}}else this.items&&this.items.forEach(function(a){null!==a&&f.push(a)});a(f,b)},getFeatures:function(){return{"dojo.data.api.Read":!0,"dojo.data.api.Write":!0,"dojo.data.api.Notification":!0,"dojo.data.api.Identity":!0}},getAttributes:function(b){this._assertIsItem(b);var a=[],f;for(f in b)b.hasOwnProperty(f)&&(f!==this._storeRefPropName&&f!==this._loadedPropName&&f!==this._filePathPropName)&&
a.push(f);return a},isItem:function(b){return b&&b[this._storeRef]===this},isItemLoaded:function(b){return this.isItem(b)},loadItem:function(){},getValues:function(b,a){this._assertIsItem(b);if(!e.isString(a))throw Error("MW.utils.InMemoryStore: invalid attribute");return b.hasOwnProperty(a)?[b[a]]:[]},getValue:function(b,a){var f=this.getValues(b,a);return 0===f.length?void 0:f[0]},hasAttribute:function(b,a){return 0<this.getValues(b,a).length},containsValue:function(b,a,f){var c;"string"===typeof f&&
(c=g.patternToRegExp(f,!1));return this._containsValue(b,a,f,c)},_containsValue:function(b,a,f,c){var d=this.getValues(b,a),g=d.length;for(b=0;b<g;b+=1)if(a=d[b],c&&!e.isObject(a)&&null!==a&&a.toString().match(c)||f===a)return!0;return!1},setValues:function(b,a,f){var c;this._assertIsItem(b);if(!e.isString(a))throw Error("MW.utils.InMemoryStore: invalid attribute");c=b[a];if(c!==f||"store"===a)b[a]=f,this.onSet(b,a,c,f)},setValue:function(b,a,f){this.setValues(b,a,f)},newItem:function(b){var a={id:c.generateUuid()};
a[this._timestampProp]=new Date;a[this._storeRef]=this;e.mixin(a,b);this.items.push(a);this.onNew(a);return a},deleteItem:function(b){var a;this._assertIsItem(b);a=this.items.indexOf(b);0<=a&&this.items.splice(a,1);this.onDelete(b)},getIdentity:function(b){return b.id},save:function(b){},revert:function(){return!1},isDirty:function(b){return!1},onNew:function(){},onDelete:function(){},onSet:function(){},_assertIsItem:function(b){if(!this.isItem(b))throw Error("MW.utils.InMemoryStore: Invalid argument, item is not in the store.");
}});e.extend(h,d);return h})},"dojo/data/util/filter":function(){define(["../../_base/lang"],function(h){var e={};h.setObject("dojo.data.util.filter",e);e.patternToRegExp=function(e,d){for(var c="^",b=null,a=0;a<e.length;a++)switch(b=e.charAt(a),b){case "\\":c+=b;a++;c+=e.charAt(a);break;case "*":c+=".*";break;case "?":c+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":c+="\\";default:c+=b}c+="$";return d?RegExp(c,"mi"):RegExp(c,
"m")};return e})},"dojo/data/util/simpleFetch":function(){define(["../../_base/lang","../../_base/kernel","./sorter"],function(h,e,g){var d={};h.setObject("dojo.data.util.simpleFetch",d);d.errorHandler=function(c,b){b.onError&&b.onError.call(b.scope||e.global,c,b)};d.fetchHandler=function(c,b){var a=b.abort||null,f=!1,d=b.start?b.start:0,l=b.count&&Infinity!==b.count?d+b.count:c.length;b.abort=function(){f=!0;a&&a.call(b)};var h=b.scope||e.global;b.store||(b.store=this);b.onBegin&&b.onBegin.call(h,
c.length,b);b.sort&&c.sort(g.createSortFunction(b.sort,this));if(b.onItem)for(var p=d;p<c.length&&p<l;++p){var m=c[p];f||b.onItem.call(h,m,b)}b.onComplete&&!f&&(p=null,b.onItem||(p=c.slice(d,l)),b.onComplete.call(h,p,b))};d.fetch=function(c){c=c||{};c.store||(c.store=this);this._fetchItems(c,h.hitch(this,"fetchHandler"),h.hitch(this,"errorHandler"));return c};return d})},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(h){var e={};h.setObject("dojo.data.util.sorter",e);e.basicComparator=
function(e,d){var c=-1;null===e&&(e=void 0);null===d&&(d=void 0);if(e==d)c=0;else if(e>d||null==e)c=1;return c};e.createSortFunction=function(g,d){function c(a,b,f,c){return function(d,e){var k=c.getValue(d,a),g=c.getValue(e,a);return b*f(k,g)}}for(var b=[],a,f=d.comparatorMap,k=e.basicComparator,l=0;l<g.length;l++){a=g[l];var h=a.attribute;if(h){a=a.descending?-1:1;var p=k;f&&("string"!==typeof h&&"toString"in h&&(h=h.toString()),p=f[h]||k);b.push(c(h,a,p,d))}}return function(a,f){for(var c=0;c<
b.length;){var d=b[c++](a,f);if(0!==d)return d}return 0}};return e})},"mw-dialog-utils/DialogDisplayUtilities":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/keys dojo/on dojo/window ./Dialog ./FloatingPane mw-dnd/BoundedMover mw-deprecation-utils/deprecation".split(" "),function(h,e,g,d,c,b,a,f,k,l,n,p,m,q){q.deprecated({deprecated:{module:"MW/dialog/DialogDisplayUtilities"},replacement:{module:"mw-dialogs/Dialogs"},
geckNumber:1471429});return e([],{constructor:function(a){},createModalDialogWrapper:function(b){var f;b.dialogClass&&(b.dialogClass=g.trim(b.dialogClass)+"Box dialog");f=new n({title:b.title||"",id:b.id+"Dialog",style:b.style,"class":(b.dialogClass||"dialog")+(b["class"]?" "+b["class"]:""),closable:b.closable,duration:1,refocus:!1!==b.refocus,autofocus:!1!==b.autofocus});f._onKey=function(){this.inherited("_onKey",arguments)};f.show=function(){var f;b.position&&(0<=b.position.x&&0<=b.position.y)&&
this.placeDialogAt(b.position);a.set(this.domNode,{opacity:0,display:""});f=this.inherited("show",arguments);this.closable||a.set(this.closeButtonNode,{display:"none"});this.dombody=document.body;this.handleBodyKeyPress=k(this.dombody,"click",g.hitch(this,this.handleFocus));this._dialogShowPromise=f;f.then(function(){b.wrapper.closeButtonNode.setAttribute("tabindex","0")});return f};b.widget&&(b.widget.close=function(){f._dialogShowPromise&&!f._dialogShowPromise.isResolved()?f._dialogShowPromise.then(function(){f.hide()}):
f.hide()});this._addWrapperAndWidgetEvents(f,b.widget);f.set("content",b.widget);b["data-testid"]&&c.set(f.domNode,"data-testid",b["data-testid"]);f.onHide=function(){f.onClose()};return f},createNonModalDialogWrapper:function(a,f,e,k){a.parentDiv=f||a.parentDiv||a.id+"floatingParentDiv";d.byId(a.parentDiv)||b.create("div",{id:a.parentDiv},document.body);a.dialogClass&&(a.dialogClass=g.trim(a.dialogClass));f=new p({title:a.title||"","class":a.dialogClass||"",id:k||a.id,resizable:!1!==a.resizable,
dockable:!1,style:e||a.style},d.byId(a.parentDiv));f.duration=500;this._addWrapperAndWidgetEvents(f,a.widget);f.set("content",a.widget);a["data-testid"]&&c.set(f.domNode,"data-testid",a["data-testid"]);return f},startNonModalDialogAndAddResizeHandlers:function(a){var b;a.startup();a.bringToTop();a.show();b=l.getBox();a._moveable.mover=m;a._resizeHandle&&(a._resizeHandle.constrainMax=!0,a._resizeHandle.maxSize=b)},_addWrapperAndWidgetEvents:function(a,b){a.onClose=function(){this.handleBodyKeyPress&&
this.handleBodyKeyPress.remove();return b.onClose&&b.onClose(arguments)};a.onCancel=function(){this.handleBodyKeyPress&&this.handleBodyKeyPress.remove();return b.onCancel&&b.onCancel(arguments)};a.onShow=function(){return b.onShow&&b.onShow(arguments)};a.onFocus=function(){return b.onFocus&&b.onFocus(arguments)};a.onBlur=function(){return b.onBlur&&b.onBlur(arguments)}}})})},"mw-dialog-utils/Dialog":function(){define("dijit/Dialog dijit/focus dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dnd/Moveable dojo/dom-geometry dojo/on dojo/window mw-dnd/BoundedMover dojo/i18n!./l10n/nls/dialog mw-deprecation-utils/deprecation".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p){p.deprecated({deprecated:{module:"MW/dialog/Dialog"},replacement:{module:"mw-dialogs/Dialogs"},geckNumber:1471429});return g([h],{_userPreferredPosition:null,_setTitleAttr:{node:"titleNode",type:"textContent"},postCreate:function(){this.inherited(arguments);this.domNode.setAttribute("data-focus","temporary");this.closeButtonNode.title=n.close},setMover:function(a){this._mover=a},_setup:function(){this.inherited(arguments);this.titleBar&&this.draggable&&(this._moveable.destroy(),
this._moveable=new b(this.domNode,{handle:this.titleNode}),c.after(this._moveable,"onMoveStop",d.hitch(this,"_endDrag"),!0))},show:function(){var a=this.inherited(arguments);this._moveable.mover=this._mover||l;this.own(f(this.domNode,"click",d.hitch(this,this.handleFocus)));return a},isTop:function(){return h._DialogLevelManager.isTop(this)},handleFocus:function(){this.open&&(this.isTop()&&(!this.focused||!e.curNode))&&this.focus()},placeDialogAt:function(a){a&&(this._relativePosition={x:a.x,y:a.y})},
resize:function(){var b,f,c=k.getBox(this.ownerDocument);f=a.position(this.domNode);if(this._userPreferredPosition=this._relativePosition?this._relativePosition:this._userPreferredPosition)b=this._userPreferredPosition.x+f.w,f=this._userPreferredPosition.y+f.h,b>c.w||f>c.h?delete this._relativePosition:this._relativePosition=this._userPreferredPosition;this.inherited("resize",arguments)}})})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,B,F,G,H,I,K,C,M){function Q(){}var L=new c;L.resolve(!0);x=d("dijit._DialogBase",[B,G,H,F],{templateString:M,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:x.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(a){this._set("draggable",a)},maxRatio:0.9,closable:!0,_setClosableAttr:function(a){this.closeButtonNode.style.display=
a?"":"none";this._set("closable",a)},postMixInProperties:function(){var a=n.getLocalization("dijit","common");m.mixin(this,a);this.inherited(arguments)},postCreate:function(){k.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);g.after(this,"onExecute",m.hitch(this,"hide"),!0);g.after(this,"onCancel",m.hitch(this,"hide"),!0);this._modalconnects=[]},onLoad:function(){this.resize();this._position();this.autofocus&&J.isTop(this)&&
(this._getFocusItems(),w.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems();w.focus(this._firstFocusItem)},_endDrag:function(){var a=f.position(this.domNode),b=t.getBox(this.ownerDocument);a.y=Math.min(Math.max(a.y,0),b.h-a.h);a.x=Math.min(Math.max(a.x,0),b.w-a.w);this._relativePosition=a;this._position()},_setup:function(){var b=this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==s("ie")?v:u)(b,{handle:this.titleBar}),g.after(this._moveable,
"onMoveStop",m.hitch(this,"_endDrag"),!0)):a.add(b,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":e.map(this["class"].split(/\s/),function(a){return a+"_underlay"}).join(" "),_onKeyDown:m.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!a.contains(this.ownerDocumentBody,"dojoMove")){var b=this.domNode,c=t.getBox(this.ownerDocument),d=this._relativePosition,e=f.position(b),g=Math.floor(c.l+(d?Math.min(d.x,c.w-e.w):(c.w-
e.w)/2)),c=Math.floor(c.t+(d?Math.min(d.y,c.h-e.h):(c.h-e.h)/2));k.set(b,{left:g+"px",top:c+"px"})}},_onKey:function(a){if(a.keyCode==p.TAB){this._getFocusItems();var b=a.target;this._firstFocusItem==this._lastFocusItem?(a.stopPropagation(),a.preventDefault()):b==this._firstFocusItem&&a.shiftKey?(w.focus(this._lastFocusItem),a.stopPropagation(),a.preventDefault()):b==this._lastFocusItem&&!a.shiftKey&&(w.focus(this._firstFocusItem),a.stopPropagation(),a.preventDefault())}else this.closable&&a.keyCode==
p.ESCAPE&&(this.onCancel(),a.stopPropagation(),a.preventDefault())},show:function(){if(this.open)return L.promise;this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),J.hide(this));var a=t.get(this.ownerDocument);this._modalconnects.push(q(a,"scroll",m.hitch(this,"resize",null)));this._modalconnects.push(q(this.domNode,"keydown",m.hitch(this,"_onKey")));k.set(this.domNode,{opacity:0,display:""});
this._set("open",!0);this._onShow();this.resize();this._position();var b;this._fadeInDeferred=new c(m.hitch(this,function(){b.stop();delete this._fadeInDeferred}));this._fadeInDeferred.then(void 0,Q);a=this._fadeInDeferred.promise;b=l.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:m.hitch(this,function(){J.show(this,this.underlayAttrs)}),onEnd:m.hitch(this,function(){this.autofocus&&J.isTop(this)&&(this._getFocusItems(),w.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);
delete this._fadeInDeferred})}).play();return a},hide:function(){if(!this._alreadyInitialized||!this.open)return L.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();var a;this._fadeOutDeferred=new c(m.hitch(this,function(){a.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(void 0,Q);this._fadeOutDeferred.then(m.hitch(this,"onHide"));var b=this._fadeOutDeferred.promise;a=l.fadeOut({node:this.domNode,duration:this.duration,onEnd:m.hitch(this,function(){this.domNode.style.display=
"none";J.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var f;f=this._modalconnects.pop();)f.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return b},resize:function(a){if("none"!=this.domNode.style.display){this._checkIfSingleChild();if(!a){this._shrunk&&(this._singleChild&&"undefined"!=typeof this._singleChildOriginalStyle&&(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,
delete this._singleChildOriginalStyle),e.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(a){a&&k.set(a,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var b=t.getBox(this.ownerDocument);b.w*=this.maxRatio;b.h*=this.maxRatio;var c=f.position(this.domNode);c.w>=b.w||c.h>=b.h?(a={w:Math.min(c.w,b.w),h:Math.min(c.h,b.h)},this._shrunk=!0):this._shrunk=!1}if(a){f.setMarginBox(this.domNode,a);b=[];this.titleBar&&b.push({domNode:this.titleBar,
region:"top"});this.actionBarNode&&b.push({domNode:this.actionBarNode,region:"bottom"});c={domNode:this.containerNode,region:"center"};b.push(c);var d=C.marginBox2contentBox(this.domNode,a);C.layoutChildren(this.domNode,d,b);this._singleChild?(b=C.marginBox2contentBox(this.containerNode,c),this._singleChild.resize({w:b.w,h:b.h})):(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();!s("touch")&&!a&&this._position()}},_layoutChildren:function(){e.forEach(this.getChildren(),
function(a){a.resize&&a.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();for(var a;a=this._modalconnects.pop();)a.remove();J.hide(this);this.inherited(arguments)}});var N=d("dijit.Dialog",[K,x],{});N._DialogBase=x;var J=N._DialogLevelManager={_beginZIndex:950,show:function(a,b){O[O.length-1].focus=w.curNode;var f=O[O.length-1].dialog?O[O.length-1].zIndex+2:N._DialogLevelManager._beginZIndex;
k.set(a.domNode,"zIndex",f);I.show(b,f-1);O.push({dialog:a,underlayAttrs:b,zIndex:f})},hide:function(a){if(O[O.length-1].dialog==a){O.pop();var f=O[O.length-1];1==O.length?I.hide():I.show(f.underlayAttrs,f.zIndex-1);if(a.refocus){a=f.focus;if(f.dialog&&(!a||!b.isDescendant(a,f.dialog.domNode)))f.dialog._getFocusItems(),a=f.dialog._firstFocusItem;if(a)try{a.focus()}catch(c){}}}else f=e.indexOf(e.map(O,function(a){return a.dialog}),a),-1!=f&&O.splice(f,1)},isTop:function(a){return O[O.length-1].dialog==
a}},O=N._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];w.watch("curNode",function(b,f,c){b=O[O.length-1].dialog;if(c&&b&&!b._fadeOutDeferred&&c.ownerDocument==b.ownerDocument){do if(c==b.domNode||a.contains(c,"dijitPopup"))return;while(c=c.parentNode);b.focus()}});s("dijit-legacy-requires")&&r(0,function(){h(["dijit/TooltipDialog"])});return N})},"dojo/dnd/Moveable":function(){define("../_base/array ../_base/declare ../_base/lang ../dom ../dom-class ../Evented ../on ../topic ../touch ./common ./Mover ../_base/window".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p){return e("dojo.dnd.Moveable",[b],{handle:"",delay:0,skip:!1,constructor:function(b,f){this.node=d.byId(b);f||(f={});this.handle=f.handle?d.byId(f.handle):null;this.handle||(this.handle=this.node);this.delay=0<f.delay?f.delay:0;this.skip=f.skip;this.mover=f.mover?f.mover:n;this.events=[a(this.handle,k.press,g.hitch(this,"onMouseDown")),a(this.handle,"dragstart",g.hitch(this,"onSelectStart")),a(this.handle,"selectstart",g.hitch(this,"onSelectStart"))]},markupFactory:function(a,
b,f){return new f(b,a)},destroy:function(){h.forEach(this.events,function(a){a.remove()});this.events=this.node=this.handle=null},onMouseDown:function(b){if(!this.skip||!l.isFormElement(b)){if(this.delay)this.events.push(a(this.handle,k.move,g.hitch(this,"onMouseMove")),a(this.handle.ownerDocument,k.release,g.hitch(this,"onMouseUp"))),this._lastX=b.pageX,this._lastY=b.pageY;else this.onDragDetected(b);b.preventDefault()}},onMouseMove:function(a){if(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-
this._lastY)>this.delay)this.onMouseUp(a),this.onDragDetected(a);a.stopPropagation();a.preventDefault()},onMouseUp:function(a){for(var b=0;2>b;++b)this.events.pop().remove();a.stopPropagation();a.preventDefault()},onSelectStart:function(a){if(!this.skip||!l.isFormElement(a))a.stopPropagation(),a.preventDefault()},onDragDetected:function(a){new this.mover(this.node,a,this)},onMoveStart:function(a){f.publish("/dnd/move/start",a);c.add(p.body(),"dojoMove");c.add(this.node,"dojoMoveItem")},onMoveStop:function(a){f.publish("/dnd/move/stop",
a);c.remove(p.body(),"dojoMove");c.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(a,b){this.onMoving(a,b);var f=a.node.style;f.left=b.l+"px";f.top=b.t+"px";this.onMoved(a,b)},onMoving:function(){},onMoved:function(){}})})},"dojo/dnd/common":function(){define(["../sniff","../_base/kernel","../_base/lang","../dom"],function(h,e,g,d){var c=g.getObject("dojo.dnd",!0);c.getCopyKeyState=function(b){return b[h("mac")?"metaKey":"ctrlKey"]};c._uniqueId=0;c.getUniqueId=function(){var b;
do b=e._scopeName+"Unique"+ ++c._uniqueId;while(d.byId(b));return b};c._empty={};c.isFormElement=function(b){b=b.target;3==b.nodeType&&(b=b.parentNode);return 0<=" a button textarea input select option ".indexOf(" "+b.tagName.toLowerCase()+" ")};return c})},"dojo/dnd/Mover":function(){define("../_base/array ../_base/declare ../_base/lang ../sniff ../_base/window ../dom ../dom-geometry ../dom-style ../Evented ../on ../touch ./common ./autoscroll".split(" "),function(h,e,g,d,c,b,a,f,k,l,n,p,m){return e("dojo.dnd.Mover",
[k],{constructor:function(a,f,c){function d(a){a.preventDefault();a.stopPropagation()}this.node=b.byId(a);this.marginBox={l:f.pageX,t:f.pageY};this.mouseButton=f.button;f=this.host=c;a=a.ownerDocument;this.events=[l(a,n.move,g.hitch(this,"onFirstMove")),l(a,n.move,g.hitch(this,"onMouseMove")),l(a,n.release,g.hitch(this,"onMouseUp")),l(a,"dragstart",d),l(a.body,"selectstart",d)];m.autoScrollStart(a);if(f&&f.onMoveStart)f.onMoveStart(this)},onMouseMove:function(a){m.autoScroll(a);var b=this.marginBox;
this.host.onMove(this,{l:b.l+a.pageX,t:b.t+a.pageY},a);a.preventDefault();a.stopPropagation()},onMouseUp:function(a){(d("webkit")&&d("mac")&&2==this.mouseButton?0==a.button:this.mouseButton==a.button)&&this.destroy();a.preventDefault();a.stopPropagation()},onFirstMove:function(b){var d=this.node.style,e,k=this.host;switch(d.position){case "relative":case "absolute":e=Math.round(parseFloat(d.left))||0;d=Math.round(parseFloat(d.top))||0;break;default:d.position="absolute";d=a.getMarginBox(this.node);
e=c.doc.body;var g=f.getComputedStyle(e),l=a.getMarginBox(e,g),g=a.getContentBox(e,g);e=d.l-(g.l-l.l);d=d.t-(g.t-l.t)}this.marginBox.l=e-this.marginBox.l;this.marginBox.t=d-this.marginBox.t;if(k&&k.onFirstMove)k.onFirstMove(this,b);this.events.shift().remove()},destroy:function(){h.forEach(this.events,function(a){a.remove()});var a=this.host;if(a&&a.onMoveStop)a.onMoveStop(this);this.events=this.node=this.host=null}})})},"dojo/dnd/autoscroll":function(){define("../_base/lang ../sniff ../_base/window ../dom-geometry ../dom-style ../window".split(" "),
function(h,e,g,d,c,b){var a={};h.setObject("dojo.dnd.autoscroll",a);a.getViewport=b.getBox;a.V_TRIGGER_AUTOSCROLL=32;a.H_TRIGGER_AUTOSCROLL=32;a.V_AUTOSCROLL_VALUE=16;a.H_AUTOSCROLL_VALUE=16;var f,k=g.doc,l=Infinity,n=Infinity;a.autoScrollStart=function(a){k=a;f=b.getBox(k);a=g.body(k).parentNode;l=Math.max(a.scrollHeight-f.h,0);n=Math.max(a.scrollWidth-f.w,0)};a.autoScroll=function(c){var d=f||b.getBox(k),e=g.body(k).parentNode,h=0,s=0;c.clientX<a.H_TRIGGER_AUTOSCROLL?h=-a.H_AUTOSCROLL_VALUE:c.clientX>
d.w-a.H_TRIGGER_AUTOSCROLL&&(h=Math.min(a.H_AUTOSCROLL_VALUE,n-e.scrollLeft));c.clientY<a.V_TRIGGER_AUTOSCROLL?s=-a.V_AUTOSCROLL_VALUE:c.clientY>d.h-a.V_TRIGGER_AUTOSCROLL&&(s=Math.min(a.V_AUTOSCROLL_VALUE,l-e.scrollTop));window.scrollBy(h,s)};a._validNodes={div:1,p:1,td:1};a._validOverflow={auto:1,scroll:1};a.autoScrollNodes=function(b){for(var f,k,l,h,n,u,v=0,w=0,x=b.target;x;){if(1==x.nodeType&&x.tagName.toLowerCase()in a._validNodes){l=c.getComputedStyle(x);h=l.overflow.toLowerCase()in a._validOverflow;
n=l.overflowX.toLowerCase()in a._validOverflow;u=l.overflowY.toLowerCase()in a._validOverflow;if(h||n||u)f=d.getContentBox(x,l),k=d.position(x,!0);if(h||n){l=Math.min(a.H_TRIGGER_AUTOSCROLL,f.w/2);n=b.pageX-k.x;if(e("webkit")||e("opera"))n+=g.body().scrollLeft;v=0;0<n&&n<f.w&&(n<l?v=-l:n>f.w-l&&(v=l),x.scrollLeft+=v)}if(h||u){h=Math.min(a.V_TRIGGER_AUTOSCROLL,f.h/2);u=b.pageY-k.y;if(e("webkit")||e("opera"))u+=g.body().scrollTop;w=0;0<u&&u<f.h&&(u<h?w=-h:u>f.h-h&&(w=h),x.scrollTop+=w)}if(v||w)return}try{x=
x.parentNode}catch(A){x=null}}a.autoScroll(b)};return a})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(h,e){var g=e.prototype.onMove;return h("dojo.dnd.TimedMoveable",e,{timeout:40,constructor:function(d,c){c||(c={});c.timeout&&("number"==typeof c.timeout&&0<=c.timeout)&&(this.timeout=c.timeout)},onMoveStop:function(d){d._timer&&(clearTimeout(d._timer),g.call(this,d,d._leftTop));e.prototype.onMoveStop.apply(this,arguments)},onMove:function(d,c){d._leftTop=
c;if(!d._timer){var b=this;d._timer=setTimeout(function(){d._timer=null;g.call(b,d,d._leftTop)},this.timeout)}}})})},"dijit/_base/manager":function(){define(["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(h,e,g,d,c){var b={};h.forEach("byId getUniqueId findWidgets _destroyAll byNode getEnclosingWidget".split(" "),function(a){b[a]=d[a]});g.mixin(b,{defaultDuration:e.defaultDuration||200});g.mixin(c,b);return c})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),
function(h,e,g,d,c,b){return e("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(a){var b=[];h.forEach(a||this.getChildren(),function(a){"value"in a?b.push(a):b=b.concat(this._getDescendantFormWidgets(a.getChildren()))},this);return b},reset:function(){h.forEach(this._getDescendantFormWidgets(),function(a){a.reset&&a.reset()})},validate:function(){var a=!1;return h.every(h.map(this._getDescendantFormWidgets(),function(f){f._hasBeenBlurred=!0;var c=f.disabled||!f.validate||
f.validate();!c&&!a&&(b.scrollIntoView(f.containerNode||f.domNode),f.focus(),a=!0);return c}),function(a){return a})},setValues:function(a){g.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",a)},_setValueAttr:function(a){var b={};h.forEach(this._getDescendantFormWidgets(),function(a){a.name&&(b[a.name]||(b[a.name]=[])).push(a)});for(var c in b)if(b.hasOwnProperty(c)){var e=b[c],g=d.getObject(c,!1,a);void 0!==g&&(g=[].concat(g),
"boolean"==typeof e[0].checked?h.forEach(e,function(a){a.set("value",-1!=h.indexOf(g,a._get("value")))}):e[0].multiple?e[0].set("value",g):h.forEach(e,function(a,b){a.set("value",g[b])}))}},getValues:function(){g.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var a={};h.forEach(this._getDescendantFormWidgets(),function(b){var c=b.name;if(c&&!b.disabled){var e=b.get("value");"boolean"==typeof b.checked?
/Radio/.test(b.declaredClass)?!1!==e?d.setObject(c,e,a):(e=d.getObject(c,!1,a),void 0===e&&d.setObject(c,null,a)):(b=d.getObject(c,!1,a),b||(b=[],d.setObject(c,b,a)),!1!==e&&b.push(e)):(b=d.getObject(c,!1,a),"undefined"!=typeof b?d.isArray(b)?b.push(e):d.setObject(c,[b,e],a):d.setObject(c,e,a))}});return a},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var a=h.map(this._descendants,function(a){return a.get("state")||""});return 0<=h.indexOf(a,"Error")?
"Error":0<=h.indexOf(a,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(a){this._descendants=this._getDescendantFormWidgets();h.forEach(this._descendants,function(a){a._started||a.startup()});a||this._onChildChange()},_onChildChange:function(a){(!a||"state"==a||"disabled"==a)&&this._set("state",this._getState());if(!a||"value"==a||"disabled"==a||"checked"==a)this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;
this._set("value",this.get("value"))},10)},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var a=this;this.own(c(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(b){b.target!=a.domNode&&a._onChildChange(b.type.replace("attrmodified-",""))}));this.watch("state",function(a,b,c){this.onValidStateChange(""==c)})},destroy:function(){this.inherited(arguments)}})})},
"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(h,e){return h("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var g=e._getTabNavigable(this.domNode);this._firstFocusItem=g.lowest||g.first||this.closeButtonNode||this.domNode;this._lastFocusItem=g.last||g.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p){var m=h("dijit.DialogUnderlay",[f,k],{templateString:"\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(a){d.set(this.node,"id",a+"_underlay");this._set("dialogId",a)},_setClassAttr:function(a){this.node.className="dijitDialogUnderlay "+a;this._set("class",a)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);
this.own(b(this.domNode,"keydown",e.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var b=this.node.style,f=this.domNode.style;f.display="none";var c=a.getBox(this.ownerDocument);f.top=c.t+"px";f.left=c.l+"px";b.width=c.w+"px";b.height=c.h+"px";f.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new l(this.domNode);var f=a.get(this.ownerDocument);this._modalConnects=[n.on("resize",e.hitch(this,"layout")),b(f,"scroll",
e.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();this.inherited(arguments)},_onKeyDown:function(){}});m.show=function(a,b){var f=m._singleton;!f||f._destroyed?f=p._underlay=m._singleton=new m(a):a&&f.set(a);c.set(f.domNode,"zIndex",b);f.open||f.show()};m.hide=function(){var a=
m._singleton;a&&!a._destroyed&&a.hide()};return m})},"dijit/BackgroundIframe":function(){define("require ./main dojo/_base/config dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/on dojo/sniff".split(" "),function(h,e,g,d,c,b,a,f){f.add("config-bgIframe",f("ie")&&!/IEMobile\/10\.0/.test(navigator.userAgent)||f("trident")&&/Windows NT 6.[01]/.test(navigator.userAgent));var k=new function(){var a=[];this.pop=function(){var b;a.length?(b=a.pop(),b.style.display=""):(9>f("ie")?(b="\x3ciframe src\x3d'"+
(g.dojoBlankHtmlUrl||h.toUrl("dojo/resources/blank.html")||'javascript:""')+"' role\x3d'presentation' style\x3d'position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity\x3d\"0\");'\x3e",b=document.createElement(b)):(b=d.create("iframe"),b.src='javascript:""',b.className="dijitBackgroundIframe",b.setAttribute("role","presentation"),c.set(b,"opacity",0.1)),b.tabIndex=-1);return b};this.push=function(b){b.style.display="none";a.push(b)}};e.BackgroundIframe=function(d){if(!d.id)throw Error("no id");
if(f("config-bgIframe")){var e=this.iframe=k.pop();d.appendChild(e);7>f("ie")||f("quirks")?(this.resize(d),this._conn=a(d,"resize",b.hitch(this,"resize",d))):c.set(e,{width:"100%",height:"100%"})}};b.extend(e.BackgroundIframe,{resize:function(a){this.iframe&&c.set(this.iframe,{width:a.offsetWidth+"px",height:a.offsetHeight+"px"})},destroy:function(){this._conn&&(this._conn.remove(),this._conn=null);this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),k.push(this.iframe),delete this.iframe)}});
return e.BackgroundIframe})},"mw-dnd/BoundedMover":function(){define(["dojo/_base/declare","dojo/_base/event","dojo/dnd/Mover","dojo/dom-geometry","dojo/window"],function(h,e,g,d,c){return h([g],{onMouseMove:function(b){var a=this.marginBox,f=d.position(this.host.node),k=c.getBox(),a={l:a.l+b.pageX,t:a.t+b.pageY};a.l=Math.max(0,Math.min(a.l,k.w-f.w));a.t=Math.max(0,Math.min(a.t,k.h-f.h));this.host.onMove(this,a,b);e.stop(b)}})})},"mw-dialog-utils/FloatingPane":function(){define("dojo/_base/declare dojo/_base/fx dojo/_base/lang dojo/dnd/Moveable dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/topic dojo/on dojo/Evented dojo/window dojo/touch dojox/layout/FloatingPane dijit/_Widget mw-dnd/BoundedMover dojo/i18n!./l10n/nls/dialog dojo/text!./floatingPaneTemplate.html".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t){l={isOnTop:!1,attributeMap:g.delegate(q.prototype.attributeMap,{title:{type:"textContent",node:"titleNode"}}),startup:function(){this.inherited(arguments);this._checkResizeConstraints();this.resizable&&this.connect(this._resizeHandle.domNode,p.press,"bringToTop");this.connect(this.focusNode,p.press,function(){this.domNode.focus()});this._resizeHandle&&this.connect(this._resizeHandle.domNode,p.press,function(){this.domNode.focus()});this.domNode.focus()},
postCreate:function(){this.inherited(arguments);this.domNode.setAttribute("data-focus","temporary");this._moveable.destroy();this._moveable=new d(this.domNode,{handle:this.titleNode});this._moveable.mover=r;this.dockable&&(this.own(f.subscribe("/floatingPaneDockUpdate",g.hitch(this,function(a){this.dockTo=a.newWidget}))),this.dockTo.addItem(this));this.closeNode.title=s.close;this.closeNode.setAttribute("tabindex","0");this.maxNode.title=s.maximize;this.dockNode.title=s.minimize},templateString:t,
hide:function(a){var f,c;"function"===typeof a?(f=a,c=g.hitch(this,function(){f();this.onClose();this.emit("onClose")}),this.inherited(arguments,[c])):"boolean"===typeof a?(this.paneOriginalPosition=b.position(this.domNode),e.animateProperty({node:this.domNode,properties:{top:b.position(this.dockTo.domNode).y,left:b.position(this.dockTo.domNode).x,height:0,width:b.position(this.dockTo.domNode).w,opacity:0},onEnd:g.hitch(this,function(){this.domNode.style.visibility="hidden";this.dockTo&&this.dockable&&
this.dockTo._positionDock(null)}),duration:this.duration}).play()):this.inherited(arguments)},close:function(){k.emit(this.domNode,"restorefocus",{bubbles:!0});this.closeAlreadyInvoked||(this.closeAlreadyInvoked=!0,this.inherited(arguments))},show:function(){this.onTop||(this.paneOriginalPosition&&(this.domNode.style.top=this.paneOriginalPosition.y+"px",this.domNode.style.left=this.paneOriginalPosition.x+"px",this.domNode.style.width=this.paneOriginalPosition.w-a.get(this.domNode,"borderLeftWidth")-
a.get(this.domNode,"borderRightWidth")+"px",this.domNode.style.height=this.paneOriginalPosition.h-a.get(this.domNode,"borderLeftWidth")-a.get(this.domNode,"borderRightWidth")+"px"),delete this.closeAlreadyInvoked,this._isMinimized=!1,this.inherited(arguments))},onClose:function(){},resize:function(f){f||(this._naturalState=b.position(this.domNode),this._naturalState.w-=a.get(this.domNode,"borderLeftWidth")+a.get(this.domNode,"borderRightWidth"),this._naturalState.h-=a.get(this.domNode,"borderTopWidth")+
a.get(this.domNode,"borderBottomWidth"));this.inherited(arguments)},minimize:function(){this._isDocked||(this.hide(!0),this.onTop=!1,this.onMinimize())},bringToTop:function(){if(!this._isMinimized){var a=this._allFPs.filter(function(a){return a!==this},this),b=document.getElementsByClassName("mwModelessDialog");0<b.length&&(b=Array.prototype.slice.call(b),b=b.map(function(a){return{domNode:a}}),a=a.concat(b));a.sort(function(a,b){return a.domNode.style.zIndex-b.domNode.style.zIndex});a.push(this);
a.forEach(function(a,f){a.domNode.style.zIndex=this._startZ+2*f;c.remove(a.domNode,"dojoxFloatingPaneFg");0<b.length&&c.remove(a.domNode,"mwModelessDialogFg")},this);c.add(this.domNode,"dojoxFloatingPaneFg");this.onTop=!0;this.onBringToTop()}},onBringToTop:function(){},onMinimize:function(){this._isMinimized=!0},forceClose:function(){this.dockable&&this.dockTo.removeItem(this);this.inherited("close",arguments)},_dock:function(){!this._isDocked&&this.dockable&&(this.dockTo.addItem(this),this._isDocked=
!0)},_checkResizeConstraints:function(){var f;this._resizeHandle&&(f=g.hitch(this._resizeHandle,this._resizeHandle._checkConstraints),this._resizeHandle._checkConstraints=function(c,d){var e,k,g,h={},l,m;e=f(c,d);k=b.position(this.targetDomNode);l=2*(a.get(this.targetDomNode,"borderTopWidth")+a.get(this.targetDomNode,"borderBottomWidth"));m=2*(a.get(this.targetDomNode,"borderLeftWidth")+a.get(this.targetDomNode,"borderRightWidth"));g=n.getBox();h.w=Math.min(e.w,Math.floor(g.w-(k.x+m)));h.h=Math.min(e.h,
Math.floor(g.h-(k.y+l)));return h})}};return h([m],l)})},"dojox/layout/FloatingPane":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/window dojo/_base/declare dojo/_base/fx dojo/_base/connect dojo/_base/array dojo/_base/sniff dojo/window dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-construct dojo/touch dijit/_TemplatedMixin dijit/_Widget dijit/BackgroundIframe dijit/registry dojo/dnd/Moveable ./ContentPane ./ResizeHandle dojo/text!./resources/FloatingPane.html ./Dock".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,B){h.experimental("dojox.layout.FloatingPane");return d("dojox.layout.FloatingPane",[w,r],{closable:!0,dockable:!0,resizable:!1,maxable:!1,resizeAxis:"xy",title:"",dockTo:"",duration:400,contentClass:"dojoxFloatingPaneContent",_showAnim:null,_hideAnim:null,_dockNode:null,_restoreState:{},_allFPs:[],_startZ:100,templateString:A,attributeMap:e.delegate(s.prototype.attributeMap,{title:{type:"innerHTML",node:"titleNode"}}),postCreate:function(){this.inherited(arguments);
this._moveable=new v(this.domNode,{handle:this.focusNode});this.dockable||(this.dockNode.style.display="none");this.closable||(this.closeNode.style.display="none");this.maxable||(this.maxNode.style.display="none",this.restoreNode.style.display="none");this.resizable?this.domNode.style.width=p.getContentBox(this.domNode).w+"px":this.resizeHandle.style.display="none";this._allFPs.push(this);this.domNode.style.position="absolute";this.bgIframe=new t(this.domNode);this._naturalState=p.position(this.domNode)},
startup:function(){if(!this._started){this.inherited(arguments);this.resizable&&(f("ie")?this.canvas.style.overflow="auto":this.containerNode.style.overflow="auto",this._resizeHandle=new x({targetId:this.id,resizeAxis:this.resizeAxis},this.resizeHandle));if(this.dockable){var a=this.dockTo;this.dockTo=this.dockTo?u.byId(this.dockTo):u.byId("dojoxGlobalFloatingDock");if(!this.dockTo){var b;a?(b=a,a=l.byId(a)):(a=m.create("div",null,g.body()),n.add(a,"dojoxFloatingDockDefault"),b="dojoxGlobalFloatingDock");
this.dockTo=new B({id:b,autoPosition:"south"},a);this.dockTo.startup()}("none"==this.domNode.style.display||"hidden"==this.domNode.style.visibility)&&this.minimize()}this.connect(this.focusNode,q.press,"bringToTop");this.connect(this.domNode,q.press,"bringToTop");b=p.getContentBox(this.domNode);this.resize(e.mixin(p.position(this.domNode),{w:b.w,h:b.h}));this._started=!0}},setTitle:function(a){h.deprecated("pane.setTitle","Use pane.set('title', someTitle)","2.0");this.set("title",a)},close:function(){this.closable&&
(b.unsubscribe(this._listener),this.hide(e.hitch(this,function(){this.destroyRecursive()})))},hide:function(a){c.fadeOut({node:this.domNode,duration:this.duration,onEnd:e.hitch(this,function(){this.domNode.style.display="none";this.domNode.style.visibility="hidden";this.dockTo&&this.dockable&&this.dockTo._positionDock(null);a&&a()})}).play()},show:function(a){c.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:e.hitch(this,function(){this.domNode.style.display="";this.domNode.style.visibility=
"visible";this.dockTo&&this.dockable&&this.dockTo._positionDock(null);"function"==typeof a&&a();this._isDocked=!1;this._dockNode&&(this._dockNode.destroy(),this._dockNode=null)})}).play();var b=p.getContentBox(this.domNode);this.resize(e.mixin(p.position(this.domNode),{w:b.w,h:b.h}));this._onShow()},minimize:function(){this._isDocked||this.hide(e.hitch(this,"_dock"))},maximize:function(){this._maximized||(this._naturalState=p.position(this.domNode),this._isDocked&&(this.show(),setTimeout(e.hitch(this,
"maximize"),this.duration)),n.add(this.focusNode,"floatingPaneMaximized"),this.resize(k.getBox()),this._maximized=!0)},_restore:function(){this._maximized&&(this.resize(this._naturalState),n.remove(this.focusNode,"floatingPaneMaximized"),this._maximized=!1)},_dock:function(){!this._isDocked&&this.dockable&&(this._dockNode=this.dockTo.addNode(this),this._isDocked=!0)},resize:function(a){this._naturalState=a=a||this._naturalState;var b=this.domNode.style;"t"in a?b.top=a.t+"px":"y"in a&&(b.top=a.y+"px");
"l"in a?b.left=a.l+"px":"x"in a&&(b.left=a.x+"px");b.width=a.w+"px";b.height=a.h+"px";a={l:0,t:0,w:a.w,h:a.h-this.focusNode.offsetHeight};p.setMarginBox(this.canvas,a);this._checkIfSingleChild();this._singleChild&&this._singleChild.resize&&this._singleChild.resize(a)},bringToTop:function(){var b=a.filter(this._allFPs,function(a){return a!==this},this);b.sort(function(a,b){return a.domNode.style.zIndex-b.domNode.style.zIndex});b.push(this);a.forEach(b,function(a,b){a.domNode.style.zIndex=this._startZ+
2*b;n.remove(a.domNode,"dojoxFloatingPaneFg")},this);n.add(this.domNode,"dojoxFloatingPaneFg")},destroy:function(){this._allFPs.splice(a.indexOf(this._allFPs,this),1);this._resizeHandle&&this._resizeHandle.destroy();this.inherited(arguments)}})})},"dojox/layout/ContentPane":function(){define(["dojo/_base/lang","dojo/_base/xhr","dijit/layout/ContentPane","dojox/html/_base","dojo/_base/declare"],function(h,e,g,d,c){return c("dojox.layout.ContentPane",g,{adjustPaths:!1,cleanContent:!1,renderStyles:!1,
executeScripts:!0,scriptHasHooks:!1,ioMethod:e.get,ioArgs:{},onExecError:function(b){},_setContent:function(b){var a=this._contentSetter;a&&a instanceof d._ContentSetter||(a=this._contentSetter=new d._ContentSetter({node:this.containerNode,_onError:h.hitch(this,this._onError),onContentError:h.hitch(this,function(a){a=this.onContentError(a);try{this.containerNode.innerHTML=a}catch(b){console.error("Fatal "+this.id+" could not change content due to "+b.message,b)}})}));this._contentSetterParams={adjustPaths:Boolean(this.adjustPaths&&
(this.href||this.referencePath)),referencePath:this.href||this.referencePath,renderStyles:this.renderStyles,executeScripts:this.executeScripts,scriptHasHooks:this.scriptHasHooks,scriptHookReplacement:"dijit.byId('"+this.id+"')"};return this.inherited("_setContent",arguments)},destroy:function(){var b=this._contentSetter;b&&b.tearDown();this.inherited(arguments)}})})},"dojox/html/_base":function(){define("dojo/_base/declare dojo/Deferred dojo/dom-construct dojo/html dojo/_base/kernel dojo/_base/lang dojo/ready dojo/_base/sniff dojo/_base/url dojo/_base/xhr dojo/when dojo/_base/window".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p){var m=c.getObject("dojox.html",!0);if(f("ie"))var q=/(AlphaImageLoader\([^)]*?src=(['"]))(?![a-z]+:|\/)([^\r\n;}]+?)(\2[^)]*\)\s*[;}]?)/g;var r=/(?:(?:@import\s*(['"])(?![a-z]+:|\/)([^\r\n;{]+?)\1)|url\(\s*(['"]?)(?![a-z]+:|\/)([^\r\n;]+?)\3\s*\))([a-z, \s]*[;}]?)/g,s=m._adjustCssPaths=function(a,b){if(b&&a)return q&&(b=b.replace(q,function(b,f,c,d,e){return f+(new k(a,"./"+d)).toString()+e})),b.replace(r,function(b,f,c,d,e,g){return c?'@import "'+(new k(a,"./"+c)).toString()+
'"'+g:"url("+(new k(a,"./"+e)).toString()+")"+g})},t=/(<[a-z][a-z0-9]*\s[^>]*)(?:(href|src)=(['"]?)([^>]*?)\3|style=(['"]?)([^>]*?)\5)([^>]*>)/gi,u=m._adjustHtmlPaths=function(a,b){var f=a||"./";return b.replace(t,function(a,b,c,d,e,g,h,l){return b+(c?c+"\x3d"+d+(new k(f,e)).toString()+d:"style\x3d"+g+s(f,h)+g)+l})},v=m._snarfStyles=function(a,b,f){f.attributes=[];b=b.replace(/<[!][-][-](.|\s)*?[-][-]>/g,function(a){return a.replace(/<(\/?)style\b/ig,"\x26lt;$1Style").replace(/<(\/?)link\b/ig,"\x26lt;$1Link").replace(/@import "/ig,
'@ import "')});return b.replace(/(?:<style([^>]*)>([\s\S]*?)<\/style>|<link\s+(?=[^>]*rel=['"]?stylesheet)([^>]*?href=(['"])([^>]*?)\4[^>\/]*)\/?>)/gi,function(b,c,d,e,k,g){b=(c||e||"").replace(/^\s*([\s\S]*?)\s*$/i,"$1");d?d=f.push(a?s(a,d):d):(d=f.push('@import "'+g+'";'),b=b.replace(/\s*(?:rel|href)=(['"])?[^\s]*\1\s*/gi,""));if(b){b=b.split(/\s+/);g={};e=0;for(k=b.length;e<k;e++)c=b[e].split("\x3d"),g[c[0]]=c[1].replace(/^\s*['"]?([\s\S]*?)['"]?\s*$/,"$1");f.attributes[d-1]=g}return""})},w=m._snarfScripts=
function(a,b){function f(a){b.downloadRemote&&(a=a.replace(/&([a-z0-9#]+);/g,function(a,b){switch(b){case "amp":return"\x26";case "gt":return"\x3e";case "lt":return"\x3c";default:return"#"==b.charAt(0)?String.fromCharCode(b.substring(1)):"\x26"+b+";"}}),l.get({url:a,sync:!0,load:function(a){""!==b.code&&(a="\n"+a);b.code+=a+";"},error:b.errBack}))}b.code="";a=a.replace(/<[!][-][-](.|\s)*?[-][-]>/g,function(a){return a.replace(/<(\/?)script\b/ig,"\x26lt;$1Script")});return a.replace(/<script\s*(?![^>]*type=['"]?(?:dojo\/|text\/html\b))[^>]*?(?:src=(['"]?)([^>]*?)\1[^>]*)?>([\s\S]*?)<\/script>/gi,
function(a,c,d,e){d?f(d):(""!==b.code&&(e="\n"+e),b.code+=e+";");return""})},x=m.evalInGlobal=function(a,b){b=b||p.doc.body;var f=b.ownerDocument.createElement("script");f.type="text/javascript";b.appendChild(f);f.text=a};m._ContentSetter=h(d._ContentSetter,{adjustPaths:!1,referencePath:".",renderStyles:!1,executeScripts:!1,scriptHasHooks:!1,scriptHookReplacement:null,_renderStyles:function(a){this._styleNodes=[];for(var b,f,c,d=this.node.ownerDocument,e=d.getElementsByTagName("head")[0],k=0,g=a.length;k<
g;k++){c=a[k];f=a.attributes[k];b=d.createElement("style");b.setAttribute("type","text/css");for(var h in f)b.setAttribute(h,f[h]);this._styleNodes.push(b);e.appendChild(b);b.styleSheet?b.styleSheet.cssText=c:b.appendChild(d.createTextNode(c))}},empty:function(){this.inherited("empty",arguments);this._styles=[]},onBegin:function(){this.inherited("onBegin",arguments);var a=this.content,f=this._styles;this._code=null;if(b.isString(a)){this.adjustPaths&&this.referencePath&&(a=u(this.referencePath,a));
if(this.renderStyles||this.cleanContent)a=v(this.referencePath,a,f);if(this.executeScripts){var c=this,f={downloadRemote:!0,errBack:function(a){c._onError.call(c,"Exec",'Error downloading remote script in "'+c.id+'"',a)}},a=w(a,f);this._code=f.code}}this.content=a},onEnd:function(){var f=this._code,c=this._styles;if(this._styleNodes&&this._styleNodes.length)for(;this._styleNodes.length;)g.destroy(this._styleNodes.pop());this.renderStyles&&(c&&c.length)&&this._renderStyles(c);var d=new e,k=this.getInherited(arguments),
h=arguments,c=b.hitch(this,function(){k.apply(this,h);n(this.parseDeferred,function(){d.resolve()})});if(this.executeScripts&&f){this.cleanContent&&(f=f.replace(/(\x3c!--|(?:\/\/)?--\x3e|<!\[CDATA\[|\]\]>)/g,""));this.scriptHasHooks&&(f=f.replace(/_container_(?!\s*=[^=])/g,this.scriptHookReplacement));try{x(f,this.node)}catch(l){this._onError("Exec","Error eval script in "+this.id+", "+l.message,l)}a(c)}else c();return d.promise},tearDown:function(){this.inherited(arguments);delete this._styles;if(this._styleNodes&&
this._styleNodes.length)for(;this._styleNodes.length;)g.destroy(this._styleNodes.pop());delete this._styleNodes;b.mixin(this,m._ContentSetter.prototype)}});m.set=function(a,f,c){return c?(new m._ContentSetter(b.mixin(c,{content:f,node:a}))).set():d._setNodeContent(a,f,!0)};return m})},"dojox/layout/ResizeHandle":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/connect dojo/_base/array dojo/_base/event dojo/_base/fx dojo/_base/window dojo/fx dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/declare dojo/touch dijit/_base/manager dijit/_Widget dijit/_TemplatedMixin".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t){h.experimental("dojox.layout.ResizeHandle");var u=m("dojox.layout._ResizeHelper",s,{show:function(){p.set(this.domNode,"display","")},hide:function(){p.set(this.domNode,"display","none")},resize:function(a){n.setMarginBox(this.domNode,a)}});return m("dojox.layout.ResizeHandle",[s,t],{targetId:"",targetContainer:null,resizeAxis:"xy",activeResize:!1,activeResizeClass:"dojoxResizeHandleClone",animateSizing:!0,animateMethod:"chain",animateDuration:225,minHeight:100,
minWidth:100,constrainMax:!1,maxHeight:0,maxWidth:0,fixedAspect:!1,intermediateChanges:!1,startTopic:"/dojo/resize/start",endTopic:"/dojo/resize/stop",templateString:'\x3cdiv dojoAttachPoint\x3d"resizeHandle" class\x3d"dojoxResizeHandle"\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/div\x3e',postCreate:function(){this.connect(this.resizeHandle,q.press,"_beginSizing");this.activeResize?this.animateSizing=!1:(this._resizeHelper=r.byId("dojoxGlobalResizeHelper"),this._resizeHelper||(this._resizeHelper=(new u({id:"dojoxGlobalResizeHelper"})).placeAt(a.body()),
l.add(this._resizeHelper.domNode,this.activeResizeClass)));this.minSize||(this.minSize={w:this.minWidth,h:this.minHeight});this.constrainMax&&(this.maxSize={w:this.maxWidth,h:this.maxHeight});this._resizeX=this._resizeY=!1;var b=e.partial(l.add,this.resizeHandle);switch(this.resizeAxis.toLowerCase()){case "xy":this._resizeX=this._resizeY=!0;b("dojoxResizeNW");break;case "x":this._resizeX=!0;b("dojoxResizeW");break;case "y":this._resizeY=!0,b("dojoxResizeN")}},_beginSizing:function(b){if(!this._isSizing&&
(g.publish(this.startTopic,[this]),this.targetDomNode=(this.targetWidget=r.byId(this.targetId))?this.targetWidget.domNode:k.byId(this.targetId),this.targetContainer&&(this.targetDomNode=this.targetContainer),this.targetDomNode)){if(!this.activeResize){var f=n.position(this.targetDomNode,!0);this._resizeHelper.resize({l:f.x,t:f.y,w:f.w,h:f.h});this._resizeHelper.show();this.isLeftToRight()||(this._resizeHelper.startPosition={l:f.x,t:f.y})}this._isSizing=!0;this.startPoint={x:b.clientX,y:b.clientY};
var f=p.getComputedStyle(this.targetDomNode),d="border-model"===n.boxModel?{w:0,h:0}:n.getPadBorderExtents(this.targetDomNode,f),e=n.getMarginExtents(this.targetDomNode,f);this.startSize={w:p.get(this.targetDomNode,"width",f),h:p.get(this.targetDomNode,"height",f),pbw:d.w,pbh:d.h,mw:e.w,mh:e.h};!this.isLeftToRight()&&"absolute"==p.get(this.targetDomNode,"position")&&(f=n.position(this.targetDomNode,!0),this.startPosition={l:f.x,t:f.y});this._pconnects=[g.connect(a.doc,q.move,this,"_updateSizing"),
g.connect(a.doc,q.release,this,"_endSizing")];c.stop(b)}},_updateSizing:function(a){if(this.activeResize)this._changeSizing(a);else{var b=this._getNewCoords(a,"border",this._resizeHelper.startPosition);if(!1===b)return;this._resizeHelper.resize(b)}a.preventDefault()},_getNewCoords:function(a,b,f){try{if(!a.clientX||!a.clientY)return!1}catch(c){return!1}this._activeResizeLastEvent=a;var d=(this.isLeftToRight()?1:-1)*(this.startPoint.x-a.clientX),e=this.startPoint.y-a.clientY;a=this.startSize.w-(this._resizeX?
d:0);e=this._checkConstraints(a,this.startSize.h-(this._resizeY?e:0));if((f=f||this.startPosition)&&this._resizeX)e.l=f.l+d,e.w!=a&&(e.l+=a-e.w),e.t=f.t;switch(b){case "margin":e.w+=this.startSize.mw;e.h+=this.startSize.mh;break;case "border":e.w+=this.startSize.pbw,e.h+=this.startSize.pbh}return e},_checkConstraints:function(a,b){if(this.minSize){var f=this.minSize;a<f.w&&(a=f.w);b<f.h&&(b=f.h)}this.constrainMax&&this.maxSize&&(f=this.maxSize,a>f.w&&(a=f.w),b>f.h&&(b=f.h));if(this.fixedAspect){var f=
this.startSize.w,c=this.startSize.h,d=f*b-c*a;0>d?a=b*f/c:0<d&&(b=a*c/f)}return{w:a,h:b}},_changeSizing:function(a){var c=this.targetWidget&&e.isFunction(this.targetWidget.resize),d=this._getNewCoords(a,c&&"margin");if(!1!==d&&(c?this.targetWidget.resize(d):this.animateSizing?f[this.animateMethod]([b.animateProperty({node:this.targetDomNode,properties:{width:{start:this.startSize.w,end:d.w}},duration:this.animateDuration}),b.animateProperty({node:this.targetDomNode,properties:{height:{start:this.startSize.h,
end:d.h}},duration:this.animateDuration})]).play():p.set(this.targetDomNode,{width:d.w+"px",height:d.h+"px"}),this.intermediateChanges))this.onResize(a)},_endSizing:function(a){d.forEach(this._pconnects,g.disconnect);var b=e.partial(g.publish,this.endTopic,[this]);this.activeResize?b():(this._resizeHelper.hide(),this._changeSizing(a),setTimeout(b,this.animateDuration+15));this._isSizing=!1;this.onResize(a)},onResize:function(a){}})})},"dojo/fx":function(){define("./_base/lang ./Evented ./_base/kernel ./_base/array ./aspect ./_base/fx ./dom ./dom-style ./dom-geometry ./ready require".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n){g.isAsync||l(0,function(){n(["./fx/Toggler"])});g=g.fx={};l={_fire:function(a,b){this[a]&&this[a].apply(this,b||[]);return this}};var p=function(a){this._index=-1;this._animations=a||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;d.forEach(this._animations,function(a){a&&("undefined"!=typeof a.duration&&(this.duration+=a.duration),a.delay&&(this.duration+=a.delay))},this)};p.prototype=new e;h.extend(p,{_onAnimate:function(){this._fire("onAnimate",
arguments)},_onEnd:function(){this._onAnimateCtx.remove();this._onEndCtx.remove();this._onAnimateCtx=this._onEndCtx=null;this._index+1==this._animations.length?this._fire("onEnd"):(this._current=this._animations[++this._index],this._onAnimateCtx=c.after(this._current,"onAnimate",h.hitch(this,"_onAnimate"),!0),this._onEndCtx=c.after(this._current,"onEnd",h.hitch(this,"_onEnd"),!0),this._current.play(0,!0))},play:function(a,b){this._current||(this._current=this._animations[this._index=0]);if(!b&&"playing"==
this._current.status())return this;var f=c.after(this._current,"beforeBegin",h.hitch(this,function(){this._fire("beforeBegin")}),!0),d=c.after(this._current,"onBegin",h.hitch(this,function(a){this._fire("onBegin",arguments)}),!0),e=c.after(this._current,"onPlay",h.hitch(this,function(a){this._fire("onPlay",arguments);f.remove();d.remove();e.remove()}));this._onAnimateCtx&&this._onAnimateCtx.remove();this._onAnimateCtx=c.after(this._current,"onAnimate",h.hitch(this,"_onAnimate"),!0);this._onEndCtx&&
this._onEndCtx.remove();this._onEndCtx=c.after(this._current,"onEnd",h.hitch(this,"_onEnd"),!0);this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var a=c.after(this._current,"onPause",h.hitch(this,function(b){this._fire("onPause",arguments);a.remove()}),!0);this._current.pause()}return this},gotoPercent:function(a,b){this.pause();var f=this.duration*a;this._current=null;d.some(this._animations,function(a,b){if(f<=a.duration)return this._current=a,this._index=
b,!0;f-=a.duration;return!1},this);this._current&&this._current.gotoPercent(f/this._current.duration);b&&this.play();return this},stop:function(a){if(this._current){if(a){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(!0);this._current=this._animations[this._index]}var b=c.after(this._current,"onStop",h.hitch(this,function(a){this._fire("onStop",arguments);b.remove()}),!0);this._current.stop()}return this},status:function(){return this._current?this._current.status():
"stopped"},destroy:function(){this.stop();this._onAnimateCtx&&this._onAnimateCtx.remove();this._onEndCtx&&this._onEndCtx.remove()}});h.extend(p,l);g.chain=function(a){return new p(h.isArray(a)?a:Array.prototype.slice.call(a,0))};var m=function(a){this._animations=a||[];this._connects=[];this.duration=this._finished=0;d.forEach(a,function(a){var b=a.duration;a.delay&&(b+=a.delay);this.duration<b&&(this.duration=b);this._connects.push(c.after(a,"onEnd",h.hitch(this,"_onEnd"),!0))},this);this._pseudoAnimation=
new b.Animation({curve:[0,1],duration:this.duration});var f=this;d.forEach("beforeBegin onBegin onPlay onAnimate onPause onStop onEnd".split(" "),function(a){f._connects.push(c.after(f._pseudoAnimation,a,function(){f._fire(a,arguments)},!0))})};h.extend(m,{_doAction:function(a,b){d.forEach(this._animations,function(f){f[a].apply(f,b)});return this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(a,b){var f=this._pseudoAnimation;f[a].apply(f,b)},play:function(a,
b){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this},gotoPercent:function(a,b){var f=this.duration*a;d.forEach(this._animations,function(a){a.gotoPercent(a.duration<f?1:f/a.duration,b)});this._call("gotoPercent",arguments);return this},stop:function(a){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},
destroy:function(){this.stop();d.forEach(this._connects,function(a){a.remove()})}});h.extend(m,l);g.combine=function(a){return new m(h.isArray(a)?a:Array.prototype.slice.call(a,0))};g.wipeIn=function(d){var e=d.node=a.byId(d.node),k=e.style,g;d=b.animateProperty(h.mixin({properties:{height:{start:function(){g=k.overflow;k.overflow="hidden";if("hidden"==k.visibility||"none"==k.display)return k.height="1px",k.display="",k.visibility="",1;var a=f.get(e,"height");return Math.max(a,1)},end:function(){return e.scrollHeight}}}},
d));var l=function(){k.height="auto";k.overflow=g};c.after(d,"onStop",l,!0);c.after(d,"onEnd",l,!0);return d};g.wipeOut=function(f){var d=(f.node=a.byId(f.node)).style,e;f=b.animateProperty(h.mixin({properties:{height:{end:1}}},f));c.after(f,"beforeBegin",function(){e=d.overflow;d.overflow="hidden";d.display=""},!0);var k=function(){d.overflow=e;d.height="auto";d.display="none"};c.after(f,"onStop",k,!0);c.after(f,"onEnd",k,!0);return f};g.slideTo=function(d){var e=null,g=null,l=function(a){return function(){var b=
f.getComputedStyle(a),c=b.position;e="absolute"==c?a.offsetTop:parseInt(b.top)||0;g="absolute"==c?a.offsetLeft:parseInt(b.left)||0;"absolute"!=c&&"relative"!=c&&(b=k.position(a,!0),e=b.y,g=b.x,a.style.position="absolute",a.style.top=e+"px",a.style.left=g+"px")}}(d.node=a.byId(d.node));l();d=b.animateProperty(h.mixin({properties:{top:d.top||0,left:d.left||0}},d));c.after(d,"beforeBegin",l,!0);return d};return g})},"dojox/layout/Dock":function(){define("dojo/_base/lang dojo/_base/window dojo/_base/declare dojo/_base/fx dojo/on dojo/_base/array dojo/_base/sniff dojo/window dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-construct dijit/_TemplatedMixin dijit/_WidgetBase".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q){e=g("dojox.layout.Dock",[q,m],{templateString:'\x3cdiv class\x3d"dojoxDock"\x3e\x3cul data-dojo-attach-point\x3d"containerNode" class\x3d"dojoxDockList"\x3e\x3c/ul\x3e\x3c/div\x3e',_docked:[],_inPositioning:!1,autoPosition:!1,addNode:function(a){var b=p.create("li",null,this.containerNode);a=new r({title:a.title,paneRef:a},b);a.startup();return a},startup:function(){if("dojoxGlobalFloatingDock"==this.id||this.isFixedDock)this.own(c(window,"resize",h.hitch(this,
"_positionDock")),c(window,"scroll",h.hitch(this,"_positionDock"))),a("ie")&&this.own(c(this.domNode,"resize",h.hitch(this,"_positionDock")));this._positionDock(null);this.inherited(arguments)},_positionDock:function(a){this._inPositioning||"south"==this.autoPosition&&this.defer(function(){this._inPositiononing=!0;var a=f.getBox(),b=this.domNode.style;b.left=a.l+"px";b.width=a.w-2+"px";b.top=a.h+a.t-this.domNode.offsetHeight+"px";this._inPositioning=!1},125)}});var r=g("dojox.layout._DockNode",[q,
m],{title:"",paneRef:null,templateString:'\x3cli data-dojo-attach-event\x3d"onclick: restore" class\x3d"dojoxDockNode"\x3e\x3cspan data-dojo-attach-point\x3d"restoreNode" class\x3d"dojoxDockRestoreButton" data-dojo-attach-event\x3d"onclick: restore"\x3e\x3c/span\x3e\x3cspan class\x3d"dojoxDockTitleNode" data-dojo-attach-point\x3d"titleNode"\x3e${title}\x3c/span\x3e\x3c/li\x3e',restore:function(){this.paneRef.show();this.paneRef.bringToTop();this.destroy()}});return e})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointInfo":function(){define(["dojo/_base/declare",
"dojo/i18n!l10n/nls/breakpoints"],function(h,e){return h(null,{LINE_BREAKPOINT:0,constructor:function(e,d,c,b,a){this.zeroBasedLineNumber=e;this.fileName=d;this.isEnabled=c;this.expression=b||"";this.anonymousIndex=a||this.LINE_BREAKPOINT},equals:function(e){return this.zeroBasedLineNumber===e.zeroBasedLineNumber&&this.fileName===e.fileName&&this.isEnabled===e.isEnabled&&this.expression===e.expression},hasExpression:function(){return 0!==this.expression.length},isAnonymous:function(){return this.anonymousIndex!==
this.LINE_BREAKPOINT},toString:function(){return this._buildLineString()+" "+this._buildEnablementString()+" "+this._buildExpressionString()},_buildLineString:function(){return e.breakpointDescriptorTooltip.LINE+": "+(this.zeroBasedLineNumber+1)+"."},_buildEnablementString:function(){var g=e.breakpointDescriptorTooltip.STATUS+": ",g=this.isEnabled?g+e.breakpointDescriptorTooltip.ENABLED:g+e.breakpointDescriptorTooltip.DISABLED;return g+"."},_buildExpressionString:function(){var g="";this.hasExpression()&&
(g=e.breakpointDescriptorTooltip.CONDITION+": '"+this.expression+"'.");return g}})})},"MW/rtc/plugins/contextmenu/MarginContextMenuModel":function(){define(["dojo/_base/declare","MW/rtc/plugins/contextmenu/ContextMenuModel"],function(h,e){return h(e,{setMenuLine:function(e){throw Error("Unimplemented API: setMenuLine");}})})},"MW/rtc/plugins/contextmenu/ContextMenuModel":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,e){return h(e,{getGroups:function(){throw Error("Unimplemented API: getGroups");
},getActions:function(e){throw Error("Unimplemented API: getActions");}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointDataModelProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointDataModel"],function(h,e,g,d){return h(g,{requires:function(){return{createInstance:"rtc.internaldocument rtc.backingstore debug.breakpointfactory rtc.service.documentloaded debug.breakpoint.dataservice debug.breakpointdirtyservice".split(" ")}},
createInstance:function(c,b,a,f,e,g){return new d(c,b,a,f,e,g)}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointDataModel":function(){define("dojo/aspect dojo/_base/declare dojo/_base/lang dojo/i18n!l10n/nls/breakpoints mw-dialog-utils/DialogUtils mw-log/Log mw-peermodel/PeerModelManager MW/rtc/datamodel/FileBackingStoreUtilities MW/rtc/model/DocumentConstants MW/rtc/plugins/breakpoint/BreakpointDataModel MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointInfo".split(" "),function(h,e,g,d,c,
b,a,f,k,l,n){return e(l,{CLASS_NOT_ON_PATH_STATUS:"CLASS_NOT_ON_PATH",constructor:function(a,b,f,c,d,e){this._internalDocument=a;this._backingStore=b;this._breakpointFactory=f;this._documentLoadedService=c;this._matlabBreakpointDataService=d;this._matlabBreakpointDirtyService=e;this._breakpoints=[];this._breakpointsLive=!0;this._setupListeners();this._setNotLiveIfFileDoesNotHaveLocation()},_setNotLiveIfFileDoesNotHaveLocation:function(){f.hasFileLocation(this._backingStore)||this.setLive(!1)},_setupListeners:function(){this.own(h.after(this._matlabBreakpointDataService,
"breakpointsAdded",g.hitch(this,"_addBreakpointOnServerResponse"),!0));this.own(h.after(this._matlabBreakpointDataService,"breakpointsRemoved",g.hitch(this,"_removeBreakpointOnServerResponse"),!0));this.own(h.after(this._matlabBreakpointDataService,"breakpointsCleared",g.hitch(this,"_clearBreakpointsServerResponse"),!0));this.own(h.after(this._matlabBreakpointDataService,"breakpointsRefreshedForFile",g.hitch(this,"_handleBreakpointsRefreshed"),!0));this.own(h.after(this._matlabBreakpointDataService,
"breakpointErrored",g.hitch(this,"_handleBreakpointErrored"),!0));this.own(h.after(this._internalDocument,"onDocumentChanged",g.hitch(this,"_handleDocumentChange"),!0));this._backingStore.onFilePathUpdated&&this.own(h.after(this._backingStore,"onFilePathUpdated",g.hitch(this,"_handleFilePathUpdated")))},_handleDocumentChange:function(a){0<this._filterEvents(a).length&&(this._removeDuplicates(),this.setLive(!1))},_handleFilePathUpdated:function(){f.hasFileLocation(this._backingStore)&&(this.setLive(!0),
this._matlabBreakpointDataService.triggerBreakpointsRefresh())},_filterEvents:function(a){return a.filter(function(a){return a.type!==k.READONLY_STATE_CHANGE_EVENT})},_updateBreakpointStore:function(){this._matlabBreakpointDataService.synchronizePeerModel(this.getAllBreakpoints())},getBreakpoint:function(a){a=this._indexOfBreakpoint(a);return 0<=a?this._breakpoints[a].getInfo():null},getAllBreakpoints:function(){return this._breakpoints.map(function(a){return a.getInfo()})},setLive:function(a){this._breakpointsLive!==
a&&(this._breakpointsLive=a,this._updateBreakpointStore(),this.onLiveChanged(this._breakpointsLive))},onLiveChanged:function(a){},areBreakpointsLive:function(){return this._breakpointsLive},onDataModelChange:function(){this._updateBreakpointStore()},toggleBreakpoint:function(a){b.assert(0<=a,"Line number to toggle breakpoint must be \x3e\x3d 0");this.hasBreakpointAtLine(a)?this.clearBreakpoint(a):(a=new n(a,this._getFilePathFromBackingStore(),!0,""),this.setBreakpoint(a))},setBreakpoint:function(a){""===
a.fileName&&(a.fileName=this._getFilePathFromBackingStore());this._setViewOrMatlabBreakpoint(a)},clearBreakpoint:function(a){(a=this._getMatlabBreakpoint(a))&&this._removeViewOrMatlabBreakpoint(a)},clearAllBreakpoints:function(){this._matlabBreakpointDataService.clearAllBreakpoints()},clearAllBreakpointsInFile:function(){this._breakpoints.slice().forEach(this._removeViewOrMatlabBreakpoint,this)},hasBreakpointsInFile:function(){return 0!==this._breakpoints.length},disableAllBreakpointsInFile:function(){this._breakpoints.forEach(function(a){a.isEnabled()&&
this.toggleEnableState(a.getZeroBasedLineNumber())},this)},hasEnabledBreakpointsInFile:function(){return this._breakpoints.some(function(a){return a.isEnabled()},this)},enableAllBreakpointsInFile:function(){this._breakpoints.forEach(function(a){a.isEnabled()||this.toggleEnableState(a.getZeroBasedLineNumber())},this)},hasDisabledBreakpointsInFile:function(){return this._breakpoints.some(function(a){return!a.isEnabled()},this)},toggleEnableState:function(a){var b=this._getMatlabBreakpoint(a);b?(a=new n(a,
this._getFilePathFromBackingStore(),!b.isEnabled(),b.getExpression()),this.setBreakpoint(a)):this.toggleBreakpoint(a);this.onDataModelChange()},hasBreakpointAtLine:function(a){return null!==this._getMatlabBreakpoint(a)},hasEnabledBreakpointAtLine:function(a){a=this._getMatlabBreakpoint(a);return null!==a&&a.isEnabled()},hasDisabledBreakpointAtLine:function(a){a=this._getMatlabBreakpoint(a);return null!==a&&!a.isEnabled()},_getMatlabBreakpoint:function(a){a=this._indexOfBreakpoint(a);return 0<=a?this._breakpoints[a]:
null},_createBreakpoint:function(a,b,f,c,d){a=this._breakpointFactory.create(a,b,f,c,d);this.own(h.after(a,"onLineChanged",g.hitch(this,"_handleBreakpointLineChanged",a)));return a},_handleBreakpointLineChanged:function(a){this._matlabBreakpointDirtyService.breakpointPositionUpdated();if(a.isValid())this.onDataModelChange();else this._doRemoveBreakpoint(a)},_removeViewOrMatlabBreakpoint:function(a){this.areBreakpointsLive()?this._matlabBreakpointDataService.clearBreakpoint(a):this._doRemoveBreakpoint(a)},
_setViewOrMatlabBreakpoint:function(a){this.areBreakpointsLive()?this._matlabBreakpointDataService.setBreakpoint(a):(a=this._createMatlabBreakpointFromBreakpointInfo(a),this._doAddOrUpdateBreakpoint(a))},_addBreakpointOnServerResponse:function(a){a.forEach(function(a){this._documentLoadedService.whenDocumentLoadedWithText(g.hitch(this,function(){var b=this._createMatlabBreakpointFromBreakpointInfo(a);this._doAddOrUpdateBreakpoint(b)}))},this)},_removeBreakpointOnServerResponse:function(a){this.areBreakpointsLive()&&
a.forEach(function(a){a=this._createMatlabBreakpointFromBreakpointInfo(a);this._doRemoveBreakpoint(a)},this)},_createMatlabBreakpointFromBreakpointInfo:function(a){return this._createBreakpoint(a.zeroBasedLineNumber,this._getFilePathFromBackingStore(),a.isEnabled,a.expression,a.anonymousIndex)},_clearBreakpointsServerResponse:function(){this._breakpoints.forEach(function(a){a.destroy()});this._breakpoints=[];this.onDataModelChange()},_handleBreakpointsRefreshed:function(){this._errorSyncingBreakpoints=
!1;this.setLive(!0);this._clearBreakpointsServerResponse();this._matlabBreakpointDataService.triggerBreakpointsRefresh()},wasThereAnErrorSyncingBreakpoints:function(){return this._errorSyncingBreakpoints},_handleBreakpointErrored:function(a){this._errorSyncingBreakpoints=!0;this.setLive(!1);this.showErrorDialog(a.fStatus,a.fErrorMessage)},showErrorDialog:function(a,b){var f=this._buildErrorDialogText(a,b);c.displayModalDialog(f,d.breakpointErrorDialogTitle,[{name:d.breakpointErrorDialogButtonText,
buttonHandler:{handler:"dismiss"},"data-testid":"breakpointErrorDialog_ok_button"}],{"data-testid":"breakpointErrorDialog"})},_buildErrorDialogText:function(a,b){var f;f=a===this.CLASS_NOT_ON_PATH_STATUS?d.breakpointErrorDialogClassPathText:d.breakpointErrorDialogSyntaxText;return f+("\n\n"+b)},_doAddOrUpdateBreakpoint:function(a){this._getMatlabBreakpoint(a.getZeroBasedLineNumber())?this._replaceBreakpoint(a):this._breakpoints.push(a);this.onDataModelChange()},_doRemoveBreakpoint:function(a){var b=
this._indexOfBreakpoint(a.getZeroBasedLineNumber());-1<b&&this._destroyBreakpointAtIndex(b);a.destroy()},_replaceBreakpoint:function(a){var f=this._indexOfBreakpoint(a.getZeroBasedLineNumber());b.assert(-1!==f,"MatlabBreakpointDataModel._replaceBreakpoint is expected to be called only when a breakpoint exists in the model.");this._breakpoints[f].destroy();this._breakpoints[f]=a},_removeDuplicates:function(){var a={},b=this._getLineNumbers();b.reverse().forEach(function(f,c){a[f]&&this._destroyBreakpointAtIndex(b.length-
c-1);a[f]=!0},this)},_getLineNumbers:function(){return this._breakpoints.map(function(a){return a.getZeroBasedLineNumber()})},_destroyBreakpointAtIndex:function(a){this._breakpoints[a].destroy();this._breakpoints.splice(a,1);this.onDataModelChange()},_indexOfBreakpoint:function(a){return this._getLineNumbers().indexOf(a)},_getFilePathFromBackingStore:function(){return f.getAbsoluteFilePathFromBackingStore(this._backingStore)},destroy:function(){this.inherited(arguments);this._breakpoints.forEach(function(a){a.destroy()});
this._breakpoints=[]}})})},"mw-peermodel/PeerModelManager":function(){define(["dojo/_base/declare","./PropSetPeerSynchronizer","./PeerNode","./PeerSynchronizer","./Observable"],function(h,e,g,d,c){var b=h([c],{getNamespace:function(){},move:function(a,b,f,c){},setRoot:function(a,b,f){},getRoot:function(){},hasRoot:function(){},hasById:function(a){},getById:function(a){},setSyncEnabled:function(a,b){},isSyncEnabled:function(){},getByType:function(a,b){},getByProperty:function(a,b,f){}}),a=h([b,c.Syncable],
{setRootWithId:function(a,b,f,c){}}),f=h([a,c.Impl],{constructor:function(){this._root=null;this._sync=!1;this._idCache={}},setRootWithId:function(a,b,f,c){if(this.hasRoot())throw Error("Root node already exists.");a=new g.Impl(a,b,f,this._idCache);this._setRoot(a,c);return a},setRoot:function(a,b,f){if(this.hasRoot())throw Error("Root node already exists.");a=g.Impl.createNode(a,b,this._idCache);this._setRoot(a,f);return a},_setRoot:function(a,b){this._root=a;var f=this;this._root.destroy=function(a){f.dispatchEvent("rootDestroyed",
this,void 0,a);g.Impl.prototype.destroy.call(this,a);f._root=null;f.dispatchEvent("rootUnset",this,void 0,a)};this.dispatchEvent("rootSet",this._root,void 0,b);return this._root},getRoot:function(){return this._root},hasRoot:function(){return!!this._root},hasById:function(a){return this._idCache.hasOwnProperty(a)},getById:function(a){if(this._idCache.hasOwnProperty(a))return this._idCache[a];throw Error("No root node exists");},move:function(a,b,f,c){if(a.getRoot()!==b.getRoot())throw Error("Can not move a node to a different peer model");
if(a===b||a.hasDescendant(a.getId()))throw Error("Can not move a node to be a child or descendant of itself");var d,e;if(a.hasParent())d=a.getParent(),e=d.getChildIndex(a);else throw Error("Only un-orphaned nodes can be moved.");if(e!==f||d!==b)d._removeChild(a),f=b._addChild(a,f),this.dispatchEvent("childMoved",a,{oldParent:d,oldIndex:e,newParent:b,newIndex:f},c)},setSyncEnabled:function(a,b){this._sync!==a&&(this._sync=a,this.dispatchEvent("syncChanged",this,{syncEnabled:this._sync},b))},isSyncEnabled:function(){return this._sync},
getByType:function(a,b){var f=[];b||(b=this.getRoot());b&&b.accept(function(b){b.getType()===a&&f.push(b)});return f},getByProperty:function(a,b,f){var c=[];f||(f=this.getRoot());f&&f.accept(function(f){f.hasProperty(a)&&f.getProperty(a)===b&&c.push(f)});return c}});b._clientPropSet=!0;b.setClientPropSetEnabled=function(a){b._clientPropSet=a};b.clearInstances=function(){b._instances={};b._serverInstances={}};b.clearInstances();b.getInstance=b.getClientInstance=function(a,c){if(!this._instances[a]){var g=
new f,h;h=b._clientPropSet?new e(a,g,c):new d(a,g,c);this._instances[a]={manager:g,synchronizer:h}}return this._instances[a].manager};b.getServerInstance=function(a,c){if(!this._serverInstances[a]){var g=new f,h;h=b._clientPropSet?new e(a,g,c,!1):new d(a,g,c,!1);this._serverInstances[a]={manager:g,synchronizer:h}}return this._serverInstances[a].manager};b.cleanup=function(a){b._instances[a]&&(b._instances[a].manager.setSyncEnabled(!1),b._instances[a].manager.hasRoot()&&b._instances[a].manager.getRoot().destroy(),
delete b._instances[a])};b.Impl=f;return b})},"mw-peermodel/PropSetPeerSynchronizer":function(){define("dojo/_base/declare dojo/_base/lang mw-log/Log mw-utils/Utils mw-messageservice/MessageService ./PeerSynchronizer".split(" "),function(h,e,g,d,c,b){return h([b],{propertiesSetObserver:function(a){if(a.originator!==this._originator&&(Object.keys(a.data.newValues).forEach(function(b){this.updateVersionVector(b,a.target)},this),this.shouldSync()&&this.isReady())){var b=this.createNewMessage();b.targetId=
a.target.getId();var c=a.data.newValues,g=a.data.oldValues;Object.keys(c).forEach(function(e){if(d.isImageData(c[e])){var h=g[e];delete a.data.newValues[e];if(!this.isClient&&d.isImageData(h)){var m=this.createNewMessage();m.targetId=a.target.getId();m.key=e;m.newValue=this.imageDifferencer.computeImageDataDifferences(h,c[e]);this.publish(this.getChannel("imageUpdate"),b)}}else(null===c[e]||void 0===c[e])&&delete a.data.newValues[e]},this);0<Object.keys(c).length&&(b.properties=a.data.newValues,b.versionVector=
e.clone(a.target._versionVector),this.publish(this.getChannel(a.type),b))}},propertiesSetSubscriber:function(a){this.log("propertiesSetSubscriber",a);var b=a.data,c=b.targetId;if(this.manager.hasById(c))try{var d=this.manager.getById(c),e;for(e in b.properties)b.properties.hasOwnProperty(e)&&(b.properties[e]instanceof Image?(this.imageDifferencer.updatePropertyWithImage(d,e,b.properties[e]),delete b.properties[e]):this.shouldUpdateProperties(e,d,a.data.versionVector)||delete b.properties[e],a.data.versionVector&&
this.mergeVersionVectors(e,d,a.data.versionVector));d.setProperties(b.properties,this._originator);this._updateNodePagedData(d)}catch(g){this._error("Error while trying set properties.",a,g)}},shouldUpdateProperties:function(a,b,c){return this.isClient?!(b._versionVector&&b._versionVector[a]&&(!c||!c[a])):!c||!c[a]||!b._versionVector||!b._versionVector[a]||b._versionVector[a][this.clientId]<=c[a][this.clientId]},updateVersionVector:function(a,b){this.isClient&&(!b._versionVector||!b._versionVector[a])?
(b._versionVector=b._versionVector||{},b._versionVector[a]={},Object.keys(this.syncEnabled).forEach(function(c){b._versionVector[a][c]=1})):b._versionVector&&b._versionVector[a]&&(b._versionVector[a][this.clientId]+=1)},mergeVersionVectors:function(a,b,c){if(c&&c[a]){if(!b._versionVector||!b._versionVector[a])b._versionVector=b._versionVector||{},b._versionVector[a]={};Object.keys(c[a]).forEach(function(d){b._versionVector[a][d]=Math.max(c[a][d],b._versionVector[a][d]||1)})}},convertNode:function(a){var b=
this.inherited(arguments);b.versionVectors=a._versionVector;return b},updateNodeRecursive:function(a,b){b.versionVectors&&Object.keys(b.versionVectors).forEach(function(c){this.mergeVersionVectors(c,a,b.versionVectors)},this);this.inherited(arguments)}})})},"mw-peermodel/PeerSynchronizer":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect mw-log/Log mw-utils/Utils mw-messageservice/MessageService ./ImageDifferencer ./PagedData ./Serializers".split(" "),function(h,e,g,d,c,b,a,f,k){var l;
l=h(null,{_MAX_RETRIES:3,constructor:function(f,h,l,q,r){this.namespace=f;this.manager=h;this.messageService=l||b.messageService;k.setupSerializers(this.messageService);this._originator={};this.messageCount=0;this.syncEnabled={};this.isClient=void 0===q?!0:!!q;this.clientId="string"===typeof r?r:c.generateUuid();this.imageDifferencer=new a(this._originator);this._queue=[];g.after(this.messageService,"onConnected",e.hitch(this,this._handleConnected));g.after(this.messageService,"onNotConnected",e.hitch(this,
this._handleNotConnected));this.messageService.isConnected()?this._handleConnected():this._handleNotConnected();try{this.addManagerListeners(),this.addMessageSubscriptions()}catch(s){d.error("Not able to create peer synchronizer: "+s)}},remove:function(){this._handleNotConnected();this.removeMessageSubscriptions();this.removeManagerListeners()},_handleNotConnected:function(){this.log("Not connected");this._handshook=this._connected=!1},_handleConnected:function(){this.log("Connected");this._connected=
!0;this._startHandshake()},_startHandshake:function(){this.log("Starting handshake");var a=this.createNewMessage();a.clientId=this.clientId;a.syncEnabled=this.manager.isSyncEnabled();this.publish(this.getChannel("getStatus"),a)},_handshakeComplete:function(){this.log("Handshake complete");this._handshook=!0;this._processQueue()},_processQueue:function(){var a=this._queue;this._queue=[];this.log("Processing queue",a);a.forEach(function(a){this.publish(a.channel,a.message)},this)},shouldSync:function(a){return this.manager.isSyncEnabled()&&
(!a||a.originator!==this._originator)},isReady:function(){return this._connected&&this._handshook},syncChangedObserver:function(){this.syncEnabled[this.clientId]=this.manager.isSyncEnabled();this.manager.isSyncEnabled()?(this.addSyncMessageSubscriptions(),this.addSyncManagerListeners(),this._connected&&this._startHandshake()):(this.removeSyncMessageSubscriptions(),this.removeSyncManagerListeners(),this._handshook=!1)},getStatusSubscriber:function(a){this.log("getStatusSubscriber",a);var b=this.createNewMessage();
b.syncEnabled=this.manager.isSyncEnabled();b.clientId=this.clientId;this.publish(this.getChannel("status"),b);this.statusSubscriber(a)},statusSubscriber:function(a){this.log("Status received",a);this.syncEnabled[a.data.clientId]=a.data.syncEnabled;this.isClient&&this.manager.isSyncEnabled()&&this.publish(this.getChannel("getFullUpdate"),this.createNewMessage())},getFullUpdateSubscriber:function(){this.log("getFullUpdate requested");if(this.manager.isSyncEnabled()){var a=this.createNewMessage();this.manager.hasRoot()&&
(a.root=this.convertNodesRecursive(this.manager.getRoot(),0));this.publish(this.getChannel("fullUpdate"),a);this._handshakeComplete()}},fullUpdateSubscriber:function(a){this.log("fullUpdate received",a);if(this.shouldSync())try{var b=a.data.root;b?(this.manager.hasRoot()&&(b.id!==this.manager.getRoot().getId()||b.type!==this.manager.getRoot().getType())&&this.manager.getRoot().destroy(this._originator),this._handshakeComplete(),this.manager.hasRoot()||this.manager.setRootWithId(b.id,b.type,b.properties,
this._originator),this.updateNodeRecursive(this.manager.getRoot(),b)):(this.manager.hasRoot()&&this.manager.getRoot().destroy(this._originator),this._handshakeComplete())}catch(f){this._error("Error while trying to do a full update.",a,f)}},rootSetObserver:function(a){this.addNodeListeners(a.target);if(this.shouldSync(a)&&this.isReady()){var b=this.createNewMessage();b.target=this.convertNode(a.target);this.publish(this.getChannel(a.type),b)}},rootSetSubscriber:function(a){this.log("rootSetSubscriber",
a);if(this.shouldSync())try{var b=a.data.target;this.manager.hasRoot()&&this.manager.getRoot().destroy(this._originator);var f=this.manager.setRootWithId(b.id,b.type,b.properties,this._originator);this.updateNodeRecursive(f,b)}catch(c){this._error("Error setting new root.",a,c)}},rootDestroyedObserver:function(a){if(this.shouldSync(a)&&this.isReady()){var b=this.createNewMessage();b.targetId=a.target.getId();this.publish(this.getChannel(a.type),b)}},rootDestroyedSubscriber:function(a){this.log("rootDestroyedSubscriber",
a);if(this.shouldSync())try{this.manager.hasRoot()&&this.manager.getRoot().getId()===a.data.targetId?this.manager.getRoot().destroy(this._originator):this._error("Tried to unset the wrong root.",a)}catch(b){this._error("Error destroying root.",a,b)}},childMovedObserver:function(a){if(this.shouldSync(a)&&this.isReady()){var b=this.createNewMessage();b.targetId=a.target.getId();b.oldParentId=a.data.oldParent.getId();b.oldIndex=a.data.oldIndex;b.newParentId=a.data.newParent.getId();b.newIndex=a.data.newIndex;
this.publish(this.getChannel(a.type),b)}},childMovedSubscriber:function(a){this.log("childMovedSubscriber",a);if(this.shouldSync())try{var b=a.data,f=this.manager.getById(b.targetId),c=this.manager.getById(b.newParentId);this.manager.move(f,c,b.newIndex,this._originator)}catch(d){this._error("Error while trying to move.",a,d)}},childAddedObserver:function(a){var b=a.data.child;this.addNodeListeners(b);if(this.shouldSync(a)&&this.isReady()){var f=this.createNewMessage();f.parentId=a.target.getId();
f.child=this.convertNode(b);f.index=a.data.index;this.publish(this.getChannel("subTreeAdded"),f)}},subTreeAddedSubscriber:function(a){this.log("subTreeAddedSubscriber",a);if(this.shouldSync())try{var b=a.data.child,f=this.manager.getById(a.data.parentId).addChildWithId(b.id,b.type,b.properties,a.data.index,this._originator);this.updateNodeRecursive(f,b)}catch(c){this._error("Error while trying to add a subtree of nodes.",a,c)}},childDetachedObserver:function(a){if(this.shouldSync(a)&&this.isReady()){var b=
this.createNewMessage();b.childId=a.data.child.getId();this.publish(this.getChannel(a.type),b)}},childDetachedSubscriber:function(a){this.log("childDetachedSubscriber",a);if(this.shouldSync())try{this.manager.getById(a.data.childId).detach(this._originator)}catch(b){this._error("Error while trying to detach.",a,b)}},childReattachedObserver:function(a){if(this.shouldSync(a)&&this.isReady()){var b=this.createNewMessage();b.childId=a.data.child.getId();b.index=a.data.index;this.publish(this.getChannel(a.type),
b)}},childReattachedSubscriber:function(a){this.log("childReattachedSubscriber",a);if(this.shouldSync())try{var b=a.data;this.manager.getById(b.childId).reattach(b.index,this._originator)}catch(f){this._error("Error while trying to reattach.",a,f)}},subTreeDestroyedObserver:function(a){var b=a.data.child;this.removeNodeListenersRecursive(b);if(this.shouldSync(a)&&this.isReady()){var f=this.createNewMessage();f.childId=b.getId();this.publish(this.getChannel(a.type),f)}},subTreeDestroyedSubscriber:function(a){this.log("subTreeDestroyedSubscriber",
a);if(this.shouldSync())try{this.manager.getById(a.data.childId).destroy(this._originator)}catch(b){this._error("Error while trying to destroy subtree.",a,b)}},propertiesSetObserver:function(a){if(this.shouldSync(a)&&this.isReady()&&!this.isClient){var b=[],f=this.createNewMessage(),d;f.targetId=a.target.getId();var e=a.data.newValues,k=a.data.oldValues;for(d in e)if(e.hasOwnProperty(d)&&c.isImageData(e[d])){var g=k[d];if(g&&c.isImageData(g)){b.push(d);var h=this.createNewMessage();h.targetId=a.target.getId();
h.key=d;h.newValue=this.imageDifferencer.computeImageDataDifferences(g,e[d]);this.publish(this.getChannel("imageUpdate"),f)}}b.forEach(function(b){delete a.data.newValues[b]});f.properties=a.data.newValues;this.publish(this.getChannel(a.type),f)}},propertiesSetSubscriber:function(a){this.log("propertiesSetSubscriber",a);if(this.shouldSync()||this.isClient)try{var b=a.data,f=this.manager.getById(b.targetId),c;for(c in b.properties)b.properties.hasOwnProperty(c)&&(b.properties[c]instanceof Image?this.imageDifferencer.updatePropertyWithImage(f,
c,b.properties[c]):(f.setProperty(c,b.properties[c],this._originator),this._updateNodePagedData(f)))}catch(d){this._error("Error while trying to update properties.",a,d)}},imageUpdateSubscriber:function(a){this.log("imageUpdateSubscriber",a);if(this.shouldSync())try{var b=a.data,f=this.manager.getById(b.targetId);this.imageDifferencer.applyImageDifferences(f,b.key,b.newValue)}catch(c){this._error("Error while trying to update images.",a,c)}},propertiesUnsetObserver:function(a){if(this.shouldSync(a)&&
this.isReady()){var b,f=this.createNewMessage();f.targetId=a.target.getId();f.keys=[];for(b in a.data.oldValues)a.data.oldValues.hasOwnProperty(b)&&f.keys.push(b);this.publish(this.getChannel(a.type),f)}},propertiesUnsetSubscriber:function(a){this.log("propertiesUnsetSubscriber",a);if(this.shouldSync())try{var b=a.data;this.manager.getById(b.targetId).unsetProperties(b.keys,this._originator)}catch(f){this._error("Error while trying to unset properties.",a,f)}},peerEventObserver:function(a){var b=
this.createNewMessage();b.targetId=a.target.getId();b.data=a.data;var f=this.getChannel(a.type);this.shouldSync(a)&&(this.isReady()?this.publish(f,b):this._queue.push({channel:f,message:b}))},peerEventSubscriber:function(a){this.log("peerEventSubscriber",a);if(this.shouldSync())try{var b=a.data,f=this.manager.getById(b.targetId);f.dispatchEvent("peerEvent",f,b.data,this._originator)}catch(c){this._error("Error while trying dispatch a peer event.",a,c)}},publish:function(a,b,f){this.log("Publishing message",
a,b);var c=this.messageService.publish(a,b),e=this;f=void 0===f?this._MAX_RETRIES:f;c.then(void 0,function(){0<f?(d.warn("Error sending message (will retry "+f+"): ",a,b),e.publish(a,b,f-1)):e._error("Error sending message, retry didn't work.",a,b)})},getChannel:function(a){return"/peermodel"+this.namespace+"/"+a},createNewMessage:function(){this.messageCount+=1;return{message:this.messageCount}},log:function(){if(this.namespace===l.debugNamespace){var a=Array.prototype.slice.call(arguments),a=["PeerSynchronizer ("+
this.namespace+")"].concat(a);d.info.apply(d,a)}},convertNodesRecursive:function(a,b){var f=this.convertNode(a,b),c=[],d=a.getChildren(),e;for(e=0;e<d.length;e+=1)c.push(this.convertNodesRecursive(d[e],e));f.children=c;return f},convertNode:function(a,b){b=b||0;return{id:a.getId(),type:a.getType(),index:b,properties:a.getProperties()}},updateNodeRecursive:function(a,b){for(var f,c,d,e,k,g=a?[a]:[],h=b?[b]:[];0<h.length;){a=g.pop();b=h.pop();f=this._getFilteredPropertyKeys(b.properties);if(!a._handled){a._handled=
!0;c=a.getProperties();d=Object.keys(c);k=d.length;for(e=0;e<k;e+=1)f.filtered[d[e]]=c[d[e]]}a.replaceProperties(f.filtered,this._originator);this._updateNodePagedData(a,c);this._updateNodeImageProperties(a,b.properties,f.images);this._destroyOldChildren(a,b);this._addNewChildren(a,b);this._updateChildIndices(a,b);g=g.concat(a.getChildren());b.children&&(h=h.concat(b.children))}},_destroyOldChildren:function(a,b){var f,c=a.getChildren();for(f=0;f<c.length;f+=1)this._dataHasChild(b,c[f])||c[f].destroy(this._originator)},
_addNewChildren:function(a,b){var f,c,d;if(b.children)for(f=0;f<b.children.length;f+=1)c=b.children[f],a.hasChild(c.id)||(d=this._getFilteredPropertyKeys(c.properties),a.addChildWithId(c.id,c.type,d.filtered,f,this._originator))},_updateChildIndices:function(a,b){var f,c;if(b.children)for(f=0;f<b.children.length;f+=1)c=b.children[f],c=a.getChild(c.id),a.getChildIndex(c)!==f&&this.manager.move(c,a,f,this._originator)},_dataHasChild:function(a,b){var f;if(a.children)for(f=0;f<a.children.length;f+=1)if(a.children[f].id===
b.getId()&&a.children[f].type===b.getType())return!0;return!1},_error:function(a,b,f){d.error(a,b,f);this.manager.isSyncEnabled()&&this.isClient&&this.publish(this.getChannel("getFullUpdate"),this.createNewMessage())},_getFilteredPropertyKeys:function(a){var b={},f=[],c;for(c in a)a.hasOwnProperty(c)&&(null!==a[c]&&void 0!==a[c])&&(a[c]instanceof Image?f.push(c):b[c]=a[c]);return{filtered:b,images:f}},_updateNodePagedData:function(a,b){var c;b||(b=a.getProperties());for(c in b)b.hasOwnProperty(c)&&
b[c]instanceof f&&b[c].setPeerNode(a,c)},_updateNodeImageProperties:function(a,b,f){var c;for(c=0;c<f.length;c+=1)this.imageDifferencer.updatePropertyWithImage(a,f[c],b[f[c]])},addMessageSubscriptions:function(){this._messageSubscribed||(this._onConnectedSub=g.after(this.messageService,"onReconnected",e.hitch(this,"syncChangedObserver")),this.messageService.subscribe(this.getChannel("getStatus"),"getStatusSubscriber",this),this._messageSubscribed=!0);this.manager.isSyncEnabled()&&this.addSyncMessageSubscriptions()},
removeMessageSubscriptions:function(){this._messageSubscribed&&(this._onConnectedSub.remove(),this.messageService.unsubscribe(this.getChannel("getStatus"),"getStatusSubscriber",this),this._messageSubscribed=!1);this.removeSyncMessageSubscriptions()},syncMessageChannels:"status getFullUpdate fullUpdate rootSet rootDestroyed childMoved childDetached childReattached subTreeAdded subTreeDestroyed propertiesSet propertiesUnset imageUpdate peerEvent".split(" "),addSyncMessageSubscriptions:function(){this._syncMessageSubscribed||
(this.log("addSyncMessageSubscriptions"),this.syncMessageChannels.forEach(function(a){this.messageService.subscribe(this.getChannel(a),a+"Subscriber",this)},this),this._syncMessageSubscribed=!0)},removeSyncMessageSubscriptions:function(){this._syncMessageSubscribed&&(this.log("removeSyncMessageSubscriptions"),this.syncMessageChannels.forEach(function(a){this.messageService.unsubscribe(this.getChannel(a),a+"Subscriber",this)},this),this._syncMessageSubscribed=!1)},addManagerListeners:function(){this._managerListeners||
(this.manager.addSyncEventListener("syncChanged","syncChangedObserver",this),this._managerListeners=!0);this.manager.isSyncEnabled()&&this.addSyncManagerListeners()},removeManagerListeners:function(){this._managerListeners&&(this.manager.removeSyncEventListener("syncChanged","syncChangedObserver",this),this._managerListeners=!1);this.removeSyncManagerListeners()},addSyncManagerListeners:function(){this._syncManagerListeners||(this.manager.addSyncEventListener("rootSet","rootSetObserver",this),this.manager.addSyncEventListener("rootDestroyed",
"rootDestroyedObserver",this),this.manager.addSyncEventListener("childMoved","childMovedObserver",this),this.manager.hasRoot()&&this.addNodeListenersRecursive(this.manager.getRoot()),this._syncManagerListeners=!0)},removeSyncManagerListeners:function(){this._syncManagerListeners&&(this.manager.removeSyncEventListener("rootSet","rootSetObserver",this),this.manager.removeSyncEventListener("rootDestroyed","rootDestroyedObserver",this),this.manager.removeSyncEventListener("childMoved","childMovedObserver",
this),this.manager.hasRoot()&&this.removeNodeListenersRecursive(this.manager.getRoot()),this._syncManagerListeners=!1)},nodeEvents:"childAdded subTreeDestroyed childDetached childReattached propertiesSet propertiesUnset peerEvent partialUpdate".split(" "),addNodeListeners:function(a){this.nodeEvents.forEach(function(b){a.addSyncEventListener(b,b+"Observer",this)},this)},removeNodeListeners:function(a){this.nodeEvents.forEach(function(b){a.removeSyncEventListener(b,b+"Observer",this)},this)},addNodeListenersRecursive:function(a){this.addNodeListeners(a);
var b=a.getChildren();for(a=0;a<b.length;a+=1)this.addNodeListenersRecursive(b[a])},removeNodeListenersRecursive:function(a){this.removeNodeListeners(a);var b=a.getChildren();for(a=0;a<b.length;a+=1)this.removeNodeListenersRecursive(b[a])}});l.debugNamespace="/change this to debug something";return l})},"mw-peermodel/ImageDifferencer":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct mw-utils/Deferred mw-utils/DeferredList mw-log/Log".split(" "),function(h,e,g,d,c,b){return h([],
{_updateQueue:{},constructor:function(a){this._canvas=g.create("canvas");this._context=this._canvas.getContext("2d");this._originator=a},computeImageDataDifferences:function(a,b){return[{x:0,y:0,image:b}]},applyImageDifferences:function(a,f,d){var e,g=d.length,h=this;if(0!==g){var m=this._createQueuedDeferred(a,f);m.name="applyImageDifferences deferred";var q=[];for(e=0;e<g;e+=1)q.push(this._wrapImageInDeferred(d[e].image));e=new c(q,!1,!0,!1);var r=h._updateQueue[a.getId()+f][h._updateQueue[a.getId()+
f].length-2];e.then(function(){r?r.then(function(){h._applyLoadedImageDifferences(a,f,d,m)}):h._applyLoadedImageDifferences(a,f,d,m)},function(){b.log("rejecting deferred applyImageDifferences");m.reject();h._cancelQueuedDeferreds(a,f)});return m}},updatePropertyWithImage:function(a,b,c){var d=this._wrapImageInDeferred(c),e=this._createQueuedDeferred(a,b);e.name="updateImage deferred";var g=this;d.then(function(){g._canvas.width=c.width;g._canvas.height=c.height;g._context.drawImage(c,0,0,c.width,
c.height);var d=g._context.getImageData(0,0,g._canvas.width,g._canvas.height);a.setProperty(b,d,g._originator);g._cancelQueuedDeferreds(a,b,e);e.isCanceled()||e.resolve()},function(){e.isCanceled()||e.reject()});return e},_applyLoadedImageDifferences:function(a,b,c,d){var e=a.getProperty(b);this._canvas.width=e.width;this._canvas.height=e.height;this._context.putImageData(e,0,0);for(e=0;e<c.length;e+=1)this._context.beginPath(),this._context.clearRect(c[e].x,c[e].y,c[e].image.width,c[e].image.height),
this._context.closePath(),this._context.drawImage(c[e].image,c[e].x,c[e].y);c=this._context.getImageData(0,0,this._canvas.width,this._canvas.height);a.setProperty(b,c,this._originator);d.resolve()},_wrapImageInDeferred:function(a){var f=new d;f.name="wrapImage deferred";var c=function(){setTimeout(function(){a.onload&&(f.resolve(),a.onload=null,a.onerror=null)},0)};a.onload=c;a.onerror=function(){b.log("Error loading image");f.reject();a.onload=null;a.onerror=null};a.complete&&0<a.src.length&&c();
return f},_createQueuedDeferred:function(a,b){var c;c=new d;var g=e.hitch(this,this._removeDeferredFromQueue,a,b,c);c.then(g,g);this._updateQueue[a.getId()+b]=this._updateQueue[a.getId()+b]||[];this._updateQueue[a.getId()+b].push(c);return c},_removeDeferredFromQueue:function(a,b,c){void 0===this._updateQueue[a.getId()+b]?delete this._updateQueue[a.getId()+b]:(c=this._updateQueue[a.getId()+b].indexOf(c),0<=c&&this._updateQueue[a.getId()+b].splice(c,1),0===this._updateQueue[a.getId()+b].length&&(this._updateQueue[a.getId()+
b]=void 0,delete this._updateQueue[a.getId()+b]))},_cancelQueuedDeferreds:function(a,b,c){for(var d=this._updateQueue[a.getId()+b];d&&0<d.length;){var e=d.shift();if(c&&e===c)return;e.cancel("Queued deferreds cancelled")}this._updateQueue[a.getId()+b]=void 0;delete this._updateQueue[a.getId()+b]}})})},"mw-utils/Deferred":function(){define([],function(){var h=function(){this._state=0;this._callbacks=[];this._errbacks=[]};h.prototype.then=function(e,g){1===this._state&&e?e():2===this._state&&g?g():
(e&&this._callbacks.push(e),g&&this._errbacks.push(g));return this};h.prototype.resolve=function(){if(0===this._state){for(this._state=1;this._callbacks.length;)this._callbacks.pop()();this._callbacks=[];this._errbacks=[]}};h.prototype.reject=function(){if(0===this._state){for(this._state=2;this._errbacks.length;)this._errbacks.pop()();this._callbacks=[];this._errbacks=[]}};h.prototype.cancel=function(){0===this._state&&(this._state=3,this._callbacks=[],this._errbacks=[])};h.prototype.isCanceled=
function(){return 3===this._state};return h})},"mw-utils/DeferredList":function(){define(["./Deferred"],function(h){var e=function(e){h.apply(this);this._successes=0;this._total=e.length;var d;for(d=0;d<this._total;d+=1)e[d].then(this._callback.bind(this),this.reject.bind(this))};e.prototype=new h;e.prototype.constructor=e;e.prototype._callback=function(){this._successes+=1;this._successes===this._total&&this.resolve()};return e})},"mw-peermodel/PagedData":function(){define(["dojo/_base/declare"],
function(h){return h([],{constructor:function(e){e=e||{};this._peerNode=e.peerNode;this._propertyKey=e.propertyKey;this._partialData=e.partialData||[];this._rowCount=e.rowCount||0;this._columnCount=e.columnCount||0;this._currentStartRow=e.currentStartRow||0;this._currentEndRow=e.currentEndRow||0;this._currentStartCol=e.currentStartCol||0;this._currentEndCol=e.currentEndCol||0;this._queuedOperations=[]},setPeerNode:function(e,g){this._peerNode=e;this._propertyKey=g;var d;for(d=0;d<this._queuedOperations.length;d+=
1)this._queuedOperations[d].apply(this);this._queuedOperations=[]},getPartialData:function(){return this._partialData},getRowCount:function(){return this._rowCount},getColumnCount:function(){return this._columnCount},getCurrentStartRow:function(){return 0<=this._currentStartRow?this._currentStartRow:0},getCurrentEndRow:function(){return this.getCurrentStartRow()+this._partialData.length},getCurrentStartCol:function(){return 0<=this._currentStartCol?this._currentStartCol:0},getCurrentEndCol:function(){return 0<
this._partialData.length?Array.isArray(this._partialData[0])?this.getCurrentStartCol()+this._partialData[0].length:1:0<=this._currentEndCol?this._currentEndCol:0},changeData:function(e,g,d){if(this._peerNode){var c,b;for(c=0;c<d.length;c+=1){var a=this._partialData[e-this._currentStartRow+c],f=d[c];for(b=0;b<f.length;b+=1)a[g-this._currentStartCol+b]=f[b]}var k=this;setTimeout(function(){k._peerNode.dispatchEvent("peerEvent",k._peerNode,{type:"changeData",key:k._propertyKey,startRow:e,startCol:g,
newData:d})},0)}else this._queuedOperations.push(function(){this.changeData(e,g,d)})},updatePartialData:function(e,g,d,c){if(!(e===this._currentStartRow&&d===this._currentStartCol&&g===this._currentEndRow&&c===this._currentEndCol))if(this._peerNode){if("undefined"===typeof d||"undefined"===typeof c)c=d=-1;this._peerNode.dispatchEvent("peerEvent",this._peerNode,{type:"partialUpdate",key:this._propertyKey,startRow:e,startCol:d,endRow:g,endCol:c})}else this._queuedOperations.push(function(){this.updatePartialData(e,
g,d,c)})}})})},"mw-peermodel/Serializers":function(){define(["mw-utils/Utils","./PagedData"],function(h,e){var g={imageSerializer:function(d){this._serializerCanvas||(this._serializerCanvas=document.createElement("canvas"),this._serializerContext=this._serializerCanvas.getContext("2d"));if(this._serializerCanvas.width!==d.width||this._serializerCanvas.height!==d.height)this._serializerCanvas.width=d.width,this._serializerCanvas.height=d.height;this._serializerContext.putImageData(d,0,0);return this._serializerCanvas.toDataURL()},
imageDeserializer:function(d){var c=new Image;c.src=d;return c},pagedDataSerializer:function(d){return{rowCount:d.getRowCount(),columnCount:d.getColumnCount(),currentStartRow:d.getCurrentStartRow(),currentEndRow:d.getCurrentEndRow(),currentStartCol:d.getCurrentStartCol(),currentEndCol:d.getCurrentEndCol(),partialData:d.getPartialData()}},pagedDataDeserializer:function(d){d=g.messageService.deserialize(d);return new e(d)},setupSerializers:function(d){g.messageService=d;d._peerModelSerializersSetup||
(d.registerTypeSerializer(h.isImageData,"image",g.imageSerializer),d.registerTypeDeserializer("image",g.imageDeserializer),d.registerTypeSerializer(function(c){return c instanceof e},"pagedData",g.pagedDataSerializer),d.registerTypeDeserializer("pagedData",g.pagedDataDeserializer));d._peerModelSerializersSetup=!0}};return g})},"mw-peermodel/PeerNode":function(){define("dojo/_base/declare dojo/_base/lang ./Observable ./PeerEventObservable mw-utils/Utils mw-log/Log".split(" "),function(h,e,g,d,c,b){var a=
h([d],{getId:function(){},getType:function(){},setProperty:function(a,b,f){},getProperty:function(a){},hasProperty:function(a){},unsetProperty:function(a,b){},setProperties:function(a,b){},unsetProperties:function(a,b){},replaceProperties:function(a,b){},getProperties:function(){},addChild:function(a,b,f,c){},hasChild:function(a){},getChild:function(a){},getChildIndex:function(a){},getChildren:function(){},hasDescendant:function(a){},getDescendant:function(a){},getNumberOfChildren:function(){},hasDetachedChildren:function(){},
getDetachedChildren:function(){},detach:function(a){},reattach:function(a,b){},isDetached:function(){},isAncestorDetached:function(){},destroy:function(a){},remove:function(){},hasParent:function(){},getParent:function(){},getRoot:function(){},accept:function(a){}}),f;f=h([a,d.Impl,g.Syncable],{constructor:function(a,b,f,c){if(!e.isString(a)||!e.isString(b))throw Error("Node type and ID must be strings");this._type=b;this._id=a;this._idCache=c||{};this._idCache[a]=this;this._properties={};f&&this._setProperties(f,
void 0,!0);this._children=[];this._detached=[]},getId:function(){return this._id},getType:function(){return this._type},setProperty:function(a,b,f){if(null===b||void 0===b)throw Error("Illegal argument. Value must not be null or undefined.");var c=this._setPropertyAndDispatchPropertySetEvent(a,b,f);this._dispatchSinglePropertiesSetEvent(a,c,b,f)},_setPropertyAndDispatchPropertySetEvent:function(a,b,f,c){var d=this._properties[a];d!==b&&(this._properties[a]=b,c||this.dispatchEvent("propertySet",this,
{key:a,oldValue:d,newValue:b},f));return d},_dispatchSinglePropertiesSetEvent:function(a,b,f,c){if(b!==f){var d={oldValues:{},newValues:{}};d.oldValues[a]=b;d.newValues[a]=f;this.dispatchEvent("propertiesSet",this,d,c)}},unsetProperty:function(a,b){var f=this._unsetPropertyAndDispatchPropertyUnsetEvent(a,b);this._dispatchSinglePropertiesUnsetEvent(a,f,b)},unsetProperties:function(a,b){var f={oldValues:{}};a.forEach(function(a){f.oldValues[a]=this._unsetPropertyAndDispatchPropertyUnsetEvent(a,b)},
this);this.dispatchEvent("propertiesUnset",this,f,b)},_unsetPropertyAndDispatchPropertyUnsetEvent:function(a,b){var f;this.hasProperty(a)&&(f=this._properties[a],delete this._properties[a],this.dispatchEvent("propertyUnset",this,{key:a,oldValue:f},b));return f},_dispatchSinglePropertiesUnsetEvent:function(a,b,f){var c={oldValues:{}};c.oldValues[a]=b;this.dispatchEvent("propertiesUnset",this,c,f)},hasProperty:function(a){return this._properties.hasOwnProperty(a)},getProperty:function(a){return this._properties[a]},
setProperties:function(a,b){this._setProperties(a,b,!1)},_setProperties:function(a,f,c){var d,e,g;for(d in a)a.hasOwnProperty(d)&&(e=a[d],(null===e||void 0===e)&&b.warn("Illegal argument. Property value must not be null or undefined. This will become an exception in the future."));var h=!1,s={oldValues:{},newValues:{}};for(d in a)a.hasOwnProperty(d)&&(e=a[d],g=this._setPropertyAndDispatchPropertySetEvent(d,e,f,c),g!==e&&(h=!0,s.oldValues[d]=g,s.newValues[d]=e));h&&!c&&this.dispatchEvent("propertiesSet",
this,s,f)},replaceProperties:function(a,b){var f;this.setProperties(a,b);for(f in this._properties)this._properties.hasOwnProperty(f)&&!a.hasOwnProperty(f)&&this.unsetProperty(f,b)},getProperties:function(){var a,b={};for(a in this._properties)this._properties.hasOwnProperty(a)&&this.hasProperty(a)&&(b[a]=this.getProperty(a));return b},addChild:function(a,b,c,d){"number"===typeof b&&(c=b,b=null);a=f.createNode(a,b,this._idCache);c=this._addChild(a,c);this.dispatchEvent("childAdded",this,{child:a,
index:c},d);return a},addChildWithId:function(a,b,c,d,e){a=new f(a,b,c,this._idCache);d=this._addChild(a,d);this.dispatchEvent("childAdded",this,{child:a,index:d||0},e);return a},hasChild:function(a){if(e.isString(a)){var b,f,c=this._children.length;for(b=0;b<c;b+=1)if(f=this._children[b],f.getId()===a)return!0;return!1}a=this.getChildIndex(a);return 0<=a&&this._children[a]},getChild:function(a){if(e.isString(a)){var b,f,c=this._children.length;for(b=0;b<c;b+=1)if(f=this._children[b],f.getId()===
a)return f;throw Error("No child found with id: "+a);}return this._children[a]},getChildIndex:function(a){var b,f=this._children.length;for(b=0;b<f;b+=1)if(this._children[b].getId()===a.getId())return b;return-1},getChildren:function(){return this._children.map(function(a){return a})},hasDescendant:function(a){var b,f,c=this._children.length;for(b=0;b<c;b+=1)if(f=this._children[b],f.getId()===a||f.hasDescendant(a))return!0;c=this._detached.length;for(b=0;b<c;b+=1)if(f=this._detached[b],f.getId()===
a||f.hasDescendant(a))return!0;return!1},getDescendant:function(a){var b,f,c=this._children.length;for(b=0;b<c;b+=1){f=this._children[b];if(f._id===a)return f;if(f.hasDescendant(a))return f.getDescendant(a)}c=this._detached.length;for(b=0;b<c;b+=1){f=this._detached[b];if(f._id===a)return f;if(f.hasDescendant(a))return f.getDescendant(a)}throw Error("No descendant found with id: "+a);},getNumberOfChildren:function(){return this._children.length},hasDetachedChildren:function(){return 0<this._detached.length},
getDetachedChildren:function(){return this._detached.map(function(a){return a})},detach:function(a){if(!this.isDetached()){var b={child:this,index:this.getParent().getChildIndex(this)},f=this.getParent();this.getParent()._detachChild(this);f.dispatchEvent("childRemoved",f,b,a);f.dispatchEvent("childDetached",f,b,a)}},_detachChild:function(a){this._removeChild(a);this._detached.push(a)},reattach:function(a,b){this.isDetached()&&(a=0<=a?a:this.getParent().getNumberOfChildren(),a=this.getParent()._reattachChild(this,
a),this.getParent().dispatchEvent("childReattached",this.getParent(),{child:this,index:a},b))},_reattachChild:function(a,b){var f=this._detached.indexOf(a);this._detached.splice(f,1);return this._addChild(a,b)},isDetached:function(){return this.hasParent()&&0<=this.getParent().getDetachedChildren().indexOf(this)},isAncestorDetached:function(){return this.hasParent()&&(this.getParent().isDetached()||this.getParent().isAncestorDetached())},destroy:function(a){this.hasParent()&&this.getParent().dispatchEvent("subTreeDestroyed",
this.getParent(),{child:this},a);this._destroyNodesRecursive(a)},remove:function(){this.destroy()},_destroyNodesRecursive:function(a){try{this.getChildren().forEach(function(b){b._destroyNodesRecursive(a)});var b,f;this.hasParent()&&(f=this.getParent(),b=f.getChildIndex(this),f._removeChild(this),this._setParent(null),f.dispatchEvent("childRemoved",f,{child:this,index:b},a),f.dispatchEvent("childDestroyed",f,{child:this,index:b},a));this.dispatchEvent("destroyed",this,void 0,a)}finally{delete this._idCache[this._id]}},
hasParent:function(){return!!this._parent},getParent:function(){return this._parent},getRoot:function(){return this.hasParent()?this.getParent().getRoot():this},accept:function(a){a(this);this._children.forEach(function(b){b.accept(a)});this._detached.forEach(function(b){b.accept(a)})},_addChild:function(a,b){b=this._checkIndex(b);a._setParent(this);this._children.splice(b,0,a);return b},_removeChild:function(a){var b;"number"===typeof a?(b=a,a=this._children[b]):b=this.getChildIndex(a);b=this._checkIndex(b);
a&&this._children.splice(b,1)},_checkIndex:function(a){if(void 0===a||null===a)a=this._children.length;return Math.max(0,Math.min(a,this._children.length))},_setParent:function(a){this._parent=a},toString:function(a){a=a||0;var b,f,c,d="";for(c=0;c<a;c+=1)d+="    ";d+="{id\x3d'"+this._id+"'";d+=", type\x3d'"+this._type+"'";d+=", properties\x3d{";for(f in this._properties)if(this._properties.hasOwnProperty(f)){try{b=dojo.toJson(this._properties[f])}catch(e){b=this._properties[f].toString()}40<b.length&&
(b=b.slice(0,40)+"...");d+=f+": "+b+", "}d=d.slice(0,d.length-2);d+="}, children\x3d[";for(c=0;c<this._children.length;c+=1)d+="\n"+this._children[c].toString(a+1);d+="], detached\x3d[";for(c=0;c<this._detached.length;c+=1)d+="\n"+this._detached[c].toString(a+1);return d+"]}"},equals:function(a){var b;if(!a)return!1;if(this===a)return!0;if(this._id!==a._id)return!1;if(this._parent&&a._parent){if(this._parent.getId()!==a._parent.getId())return!1}else if(this._parent!==a._parent)return!1;if(!this._propertiesEqual(this,
a)||this._type!==a._type||this._children.length!==a._children.length||this._detached.length!==a._detached.length)return!1;for(b=0;b<this._children.length;b+=1)if(!this._children[b].equals(a._children[b]))return!1;for(b=0;b<this._detached.length;b+=1)if(!this._detached[b].equals(a._detached[b]))return!1;return!0},_propertiesEqual:function(a,b){return a._properties!==b._properties?!1:!0}});a.createNode=f.createNode=function(a,b,d){var e=c.generateUuid();return new f(e,a,b,d)};a.Impl=f;return a})},"mw-peermodel/Observable":function(){define(["dojo/_base/declare",
"dojo/_base/lang","mw-log/Log"],function(h,e,g){var d=h([],{addEventListener:function(c,b,a){},removeEventListener:function(c,b,a){},hasEventListener:function(c,b,a){},dispatchEvent:function(c,b,a,f){}});d.Syncable=h([],{addSyncEventListener:function(c,b,a){},removeSyncEventListener:function(c,b,a){}});d.Impl=h([d,d.Syncable],{constructor:function(){this._listeners={};this._syncListeners={}},addEventListener:function(c,b,a){this._addEventListener(this._listeners,c,b,a)},addSyncEventListener:function(c,
b,a){this._addEventListener(this._syncListeners,c,b,a)},_addEventListener:function(c,b,a,f){f=f||this;c[b]=c[b]||[];var d={scope:f,callback:a};0>this._getEventListenerIndex(c,b,a,f)&&c[b].push(d)},hasEventListener:function(c,b,a){return 0<=this._getEventListenerIndex(this._listeners,c,b,a)},removeEventListener:function(c,b,a){this._removeEventListener(this._listeners,c,b,a)},removeSyncEventListener:function(c,b,a){this._removeEventListener(this._syncListeners,c,b,a)},_removeEventListener:function(c,
b,a,f){a=this._getEventListenerIndex(c,b,a,f||this);if(0<=a)c[b].splice(a,1);else throw Error("Listener does not exist");},_getEventListenerIndex:function(c,b,a,f){f=f||this;if(c=c[b]){var d=c.length;for(b=0;b<d;b+=1)if(c[b].scope===f&&c[b].callback===a)return b}return-1},dispatchEvent:function(c,b,a,f){this._dispatchEvent(this._syncListeners,c,b,a,f);this._dispatchEvent(this._listeners,c,b,a,f)},_dispatchEvent:function(c,b,a,f,d){if(void 0!==f&&(e.isArray(f)||e.isString(f)||null===f||"number"===
typeof f||"boolean"===typeof f))throw Error("Invalid event data, must be object");var h=c[b];if(h){var h=h.slice(0),n=h.length;for(c=0;c<n;c+=1)try{var p={type:b,target:a||this,data:f||{},originator:d};"string"===typeof h[c].callback?h[c].scope[h[c].callback].call(h[c].scope,p):h[c].callback.call(h[c].scope,p)}catch(m){g.error("Error while dispatching event handler of type: "+b+", message: "+m)}}}});return d})},"mw-peermodel/PeerEventObservable":function(){define(["dojo/_base/declare","./Observable"],
function(h,e){var g=h([e],{addPeerEventListener:function(d,c,b){},removePeerEventListener:function(d,c,b){},hasPeerEventListener:function(d,c,b){},dispatchPeerEvent:function(d,c,b,a){}});g.Impl=h([e.Impl],{addPeerEventListener:function(d,c,b){var a=function(a){a.data.type&&a.data.type===d&&c.call(b,a)};a.type=d;a.callback=c;a.scope=b;this.addEventListener("peerEvent",a)},hasPeerEventListener:function(d,c,b){return!!this._getPeerEventObserver(d,c,b)},removePeerEventListener:function(d,c,b){if(d=this._getPeerEventObserver(d,
c,b))this.removeEventListener("peerEvent",d.callback,d.scope);else throw Error("Listener does not exist");},_getPeerEventObserver:function(d,c,b){return this._listeners.peerEvent?this._listeners.peerEvent.filter(function(a){return a.callback.callback&&a.callback.type===d&&a.callback.callback===c&&a.callback.scope===b})[0]:null},dispatchPeerEvent:function(d,c,b,a){b||(b={});b.type=d;this.dispatchEvent("peerEvent",c,b,a)}});return g})},"MW/rtc/plugins/breakpoint/BreakpointDataModel":function(){define(["dojo/_base/declare",
"MW/rtc/abstract/AbstractPlugin"],function(h,e){return h(e,{toggleBreakpoint:function(e){throw Error("Unimplemented API: MW.rtc.plugins.breakpoint.BreakpointDataModel.toggleBreakpoint");},hasBreakpointAtLine:function(e){throw Error("Unimplemented API: MW.rtc.plugins.breakpoint.BreakpointDataModel.hasBreakpointAtLine");},getBreakpoint:function(e){throw Error("Unimplemented API: MW.rtc.plugins.breakpoint.BreakpointDataModel.getBreakpoint");},setLive:function(e){throw Error("Unimplemented API: MW.rtc.plugins.breakpoint.BreakpointDataModel.setLive");
},onDataModelChange:function(){}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointFactoryProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointFactory"],function(h,e,g,d){return h(g,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.linenumberservice"]}},createInstance:function(c,b,a){return new d(c,b,a)}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointFactory":function(){define(["dojo/_base/declare",
"MW/rtc/abstract/AbstractPlugin","MW/rtc/plugins/breakpoint/matlab/MatlabBreakpoint"],function(h,e,g){return h(e,{constructor:function(d,c,b){this._internalDocument=d;this._document=c;this._lineNumberService=b},create:function(d,c,b,a,f){return new g(this._internalDocument,this._document,this._lineNumberService,d,c,b,a,f)}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpoint":function(){define("dojo/aspect dojo/_base/declare dojo/_base/lang MW/rtc/abstract/AbstractPlugin MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointInfo MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointPositionTracker".split(" "),
function(h,e,g,d,c,b){return e(d,{constructor:function(a,f,d,e,n,p,m,q){this._breakpointInfo=new c(e,n,p,m,q);this._positionTracker=new b(a,f,d,e);this.own(h.after(this._positionTracker,"onPositionUpdated",g.hitch(this,"_handlePositionUpdated"),!0))},getInfo:function(){return g.clone(this._breakpointInfo)},hasExpression:function(){return this._breakpointInfo.hasExpression()},getExpression:function(){return this._breakpointInfo.expression},getZeroBasedLineNumber:function(){return this._breakpointInfo.zeroBasedLineNumber},
getFileName:function(){return this._breakpointInfo.fileName},isEnabled:function(){return this._breakpointInfo.isEnabled},isAnonymous:function(){return this._breakpointInfo.isAnonymous()},getAnonymousIndex:function(){return this._breakpointInfo.anonymousIndex},toString:function(){return this._breakpointInfo.toString()},isValid:function(){return 0<=this.getZeroBasedLineNumber()},onLineChanged:function(){},_handlePositionUpdated:function(a){this._breakpointInfo.zeroBasedLineNumber!==a&&(this._breakpointInfo.zeroBasedLineNumber=
a,this.onLineChanged())},destroy:function(){this.inherited(arguments);this._positionTracker.destroy()}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointPositionTracker":function(){define("dojo/aspect dojo/_base/declare dojo/_base/lang MW/rtc/abstract/AbstractPlugin MW/rtc/model/CodeUtilities MW/rtc/model/DocumentConstants".split(" "),function(h,e,g,d,c,b){return e(d,{constructor:function(a,b,c,d){this._internalDocument=a;this._document=b;this._lineNumberService=c;this._trackedLinePosition=[];
this._trackLine(d)},onPositionUpdated:function(a){},_trackLine:function(a){a=c.getCodeLineNodes(this._internalDocument)[a];a=this._document.createLinePosition(a,!1);this.own(h.after(a,"onChange",g.hitch(this,"_handlePositionMoved")));this.own(h.after(this._internalDocument,"onDocumentChanged",g.hitch(this,"_handleDocumentChanged"),!0));this._trackedLinePosition=a},_handlePositionMoved:function(){this._updatePosition()},_handleDocumentChanged:function(a){this._isFormatChangeEvent(a)&&this._updatePosition()},
_updatePosition:function(){var a=this._trackedLinePosition.getLineColumn().line-1,a=this._lineNumberService.getCodeLineNumberFromLineNumber(a);if(!a||0>a)this.onPositionUpdated(-1);else this.onPositionUpdated(a-1)},_isFormatChangeEvent:function(a){return a.some(function(a){return a.type===b.FORMAT_CHANGE_EVENT})},destroy:function(){this.inherited(arguments);this._trackedLinePosition.destroy()}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointDecoratorProvider":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/datamodel/FileBackingStoreUtilities","MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointDecorator","MW/rtc/core/provider/PluginProvider"],function(h,e,g,d,c){return h(c,{isApplicable:function(b){return g.isPlainCodeFile(b)},requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:["debug.breakpointmodel","rtc.linenumberservice","debug.margin.matlab.breakpointstyler","debug.breakpointdirtyservice","debug.breakpoint.temporary"]}},createInstance:function(b,
a,f,c,e){return new d(b,a,f,c,e)},priority:function(){return 10}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointDecorator":function(){define("dijit/Tooltip dojo/aspect dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/mouse dojo/_base/declare dojo/_base/lang dojo/i18n!l10n/nls/breakpoints mw-log/Log MW/rtc/margin/AbstractLineMarginDecorator MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointInfo".split(" "),function(h,e,g,d,c,b,a,f,k,l,n,p,m){return f(p,{NO_LINE:-1,_TOOLTIP_TIMEOUT:800,
_COMMON_BREAKPOINT_CSS:"commonBreakpointStyle",constructor:function(a,b,f,c,d){this._breakpointDataModel=a;this._lineNumberService=b;this._breakpointStyler=f;this._breakpointDirtyService=c;this._temporaryBreakpointManager=d;this.own(e.after(this._breakpointDataModel,"onDataModelChange",k.hitch(this,"_handleDataModelChange")));this.own(e.after(this._breakpointDirtyService,"breakpointDirtyStateChanged",k.hitch(this,"_handleBreakpointDirtyStateChange")));this._intermediateBreakpointLine=this.NO_LINE;
this._tooltipTimer=null},_handleDataModelChange:function(){this._purgePartialBreakpoint();this.onUpdate()},_handleBreakpointDirtyStateChange:function(){this.onUpdate()},_onBreakpointModelLiveChanged:function(){this.onUpdate()},handleMouseDown:function(b,f){this._clearTooltipAndTimer();if(a.isLeft(b)){var c=this._lineNumberService.getCodeLineNumberAtOrBeforeLineNumber(f)-1;this._createPartialBreakpoint(b,c)}},handleMouseUp:function(b,f){this._clearTooltipAndTimer();if(a.isLeft(b)){var c=this._lineNumberService.getCodeLineNumberAtOrBeforeLineNumber(f)-
1;if(this._intermediateBreakpointLine===c){var d=this._breakpointDataModel.getBreakpoint(c);d&&d.hasExpression()&&d.isEnabled?this._toggleEnableState(b,c):this._toggleBreakpoint(b,c)}}},_createPartialBreakpoint:function(a,b){this._intermediateBreakpointLine=b;this.onUpdate()},_purgePartialBreakpoint:function(){this._intermediateBreakpointLine!==this.NO_LINE&&(this._intermediateBreakpointLine=this.NO_LINE)},_toggleBreakpoint:function(a,b){b!==this.NO_LINE&&this._breakpointDataModel.toggleBreakpoint(b)},
_toggleEnableState:function(a,b){b!==this.NO_LINE&&this._breakpointDataModel.toggleEnableState(b)},handleMouseMove:function(a,b){if(!this._lastTooltipShownNode){this._lastTooltipShownNode=a.target;var f=this._lineNumberService.getCodeLineNumberAtOrBeforeLineNumber(b)-1;if(this._breakpointDataModel.wasThereAnErrorSyncingBreakpoints()&&this._breakpointStyler.shouldShowBreakpointsErrored())f=this._breakpointStyler.buildTooltipString(),h.show(f,this._lastTooltipShownNode,["after"]);else if(this._breakpointDataModel.hasBreakpointAtLine(f)&&
this._mouseIsOverBreakpoint(a.target)){var c=this._breakpointDataModel.getBreakpoint(f),d=this._breakpointStyler.buildTooltipString(c);this._tooltipTimer=setTimeout(k.hitch(this,function(a,b,f){b.hasBreakpointAtLine(f)&&h.show(d,a,["below"])},this._lastTooltipShownNode,this._breakpointDataModel,f),this._TOOLTIP_TIMEOUT)}}},_mouseIsOverBreakpoint:function(a){n.assert(a,"Mouse over event target cannot be undefined");return a.classList.contains(this._COMMON_BREAKPOINT_CSS)},handleMouseLeave:function(){this._clearTooltipAndTimer();
this._intermediateBreakpointLine!==this.NO_LINE&&(this._intermediateBreakpointLine=this.NO_LINE,this.onUpdate())},_clearTooltipAndTimer:function(){this._lastTooltipShownNode&&(h.hide(this._lastTooltipShownNode),this._lastTooltipShownNode=void 0);this._tooltipTimer&&(clearTimeout(this._tooltipTimer),this._tooltipTimer=null)},_hasVisibleBreakpointAtLine:function(a){var b=this._breakpointDataModel.hasBreakpointAtLine(a);this._temporaryBreakpointManager&&(a=this._temporaryBreakpointManager.hasOnlyTemporaryBreakpoint(a),
b=b&&!a);return b},_hasPartialBreakpointAtLine:function(a){return this._intermediateBreakpointLine===a&&this._breakpointStyler.allowPartialBreakpoints()},hasLayerForLineNumber:function(a,b){var f=this._lineNumberService.getCodeLineNumberFromLineNumber(a);return 0>f?!1:this._hasVisibleBreakpointAtLine(f-1)||this._hasPartialBreakpointAtLine(f-1)},createDecorationForLineNumber:function(a,b){n.assert(this.hasLayerForLineNumber(a,b),"Unexpected call to MatlabBreakpointDecorator createDecorationForLineNumber - which hasLayerForLineNumber returns false");
var f=this._lineNumberService.getCodeLineNumberFromLineNumber(a),d=c.create("div",{"class":this._COMMON_BREAKPOINT_CSS}),e=this._getBreakpointToDraw(f-1);this._breakpointStyler.applyStyle(d,e,this._hasPartialBreakpointAtLine(f-1));return d},_getBreakpointToDraw:function(a){var b=this._breakpointDataModel.getBreakpoint(a);if(this._temporaryBreakpointManager){var f=this._temporaryBreakpointManager.getBreakpointReplacedByTemporary(a);f&&(b=f)}!b&&this._hasPartialBreakpointAtLine(a)&&(b=new m(a,"",!0));
return b},getWidth:function(){return 17}})})},"dijit/Tooltip":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff ./_base/manager ./place ./_Widget ./_TemplatedMixin ./BackgroundIframe dojo/text!./templates/Tooltip.html ./main".split(" "),function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u){function v(){}var w=e("dijit._MasterTooltip",[q,r],{duration:p.defaultDuration,templateString:t,
postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.bgIframe=new s(this.domNode);this.fadeIn=g.fadeIn({node:this.domNode,duration:this.duration,onEnd:f.hitch(this,"_onShow")});this.fadeOut=g.fadeOut({node:this.domNode,duration:this.duration,onEnd:f.hitch(this,"_onHide")})},show:function(b,c,d,e,k,g,h){if(!this.aroundNode||!(this.aroundNode===c&&this.containerNode.innerHTML==b))if("playing"==this.fadeOut.status())this._onDeck=arguments;else{this.containerNode.innerHTML=b;k&&
this.set("textDir",k);this.containerNode.align=e?"right":"left";var l=m.around(this.domNode,c,d&&d.length?d:x.defaultPosition,!e,f.hitch(this,"orient")),n=l.aroundNodePos;"M"==l.corner.charAt(0)&&"M"==l.aroundCorner.charAt(0)?(this.connectorNode.style.top=n.y+(n.h-this.connectorNode.offsetHeight>>1)-l.y+"px",this.connectorNode.style.left=""):"M"==l.corner.charAt(1)&&"M"==l.aroundCorner.charAt(1)?this.connectorNode.style.left=n.x+(n.w-this.connectorNode.offsetWidth>>1)-l.x+"px":(this.connectorNode.style.left=
"",this.connectorNode.style.top="");a.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=!0;this.aroundNode=c;this.onMouseEnter=g||v;this.onMouseLeave=h||v}},orient:function(a,f,c,d,e){this.connectorNode.style.top="";var k=d.h;d=d.w;a.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight",
"TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[f+"-"+c];this.domNode.style.width="auto";var g=b.position(this.domNode);if(n("ie")||n("trident"))g.w+=2;var h=Math.min(Math.max(d,1),g.w);b.setMarginBox(this.domNode,{w:h});"B"==c.charAt(0)&&"B"==f.charAt(0)?(a=b.position(a),f=this.connectorNode.offsetHeight,a.h>k?(this.connectorNode.style.top=k-(e.h+f>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(e.h/
2-f/2,0),a.h-f)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");return Math.max(0,g.w-d)},_onShow:function(){n("ie")&&(this.domNode.style.filter="")},hide:function(a){this._onDeck&&this._onDeck[1]==a?this._onDeck=null:this.aroundNode===a&&(this.fadeIn.stop(),this.isShowingNow=!1,this.aroundNode=null,this.fadeOut.play());this.onMouseEnter=this.onMouseLeave=v},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";
this._onDeck&&(this.show.apply(this,this._onDeck),this._onDeck=null)}});u.showTooltip=function(a,b,f,c,d,e,k){f&&(f=h.map(f,function(a){return{after:"after-centered",before:"before-centered"}[a]||a}));x._masterTT||(u._masterTT=x._masterTT=new w);return x._masterTT.show(a,b,f,c,d,e,k)};u.hideTooltip=function(a){return x._masterTT&&x._masterTT.hide(a)};var x=e("dijit.Tooltip",q,{label:"",showDelay:400,hideDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(a){h.forEach(this._connections||
[],function(a){h.forEach(a,function(a){a.remove()})},this);this._connectIds=h.filter(f.isArrayLike(a)?a:a?[a]:[],function(a){return d.byId(a,this.ownerDocument)},this);this._connections=h.map(this._connectIds,function(a){a=d.byId(a,this.ownerDocument);var b=this.selector,c=b?function(a){return l.selector(b,a)}:function(a){return a},e=this;return[l(a,c(k.enter),function(){e._onHover(this)}),l(a,c("focusin"),function(){e._onHover(this)}),l(a,c(k.leave),f.hitch(e,"_onUnHover")),l(a,c("focusout"),f.hitch(e,
"set","state","DORMANT"))]},this);this._set("connectId",a)},addTarget:function(a){a=a.id||a;-1==h.indexOf(this._connectIds,a)&&this.set("connectId",this._connectIds.concat(a))},removeTarget:function(a){a=h.indexOf(this._connectIds,a.id||a);0<=a&&(this._connectIds.splice(a,1),this.set("connectId",this._connectIds))},buildRendering:function(){this.inherited(arguments);c.add(this.domNode,"dijitTooltipData")},startup:function(){this.inherited(arguments);var a=this.connectId;h.forEach(f.isArrayLike(a)?
a:[a],this.addTarget,this)},getContent:function(a){return this.label||this.domNode.innerHTML},state:"DORMANT",_setStateAttr:function(a){if(!(this.state==a||"SHOW TIMER"==a&&"SHOWING"==this.state||"HIDE TIMER"==a&&"DORMANT"==this.state)){this._hideTimer&&(this._hideTimer.remove(),delete this._hideTimer);this._showTimer&&(this._showTimer.remove(),delete this._showTimer);switch(a){case "DORMANT":this._connectNode&&(x.hide(this._connectNode),delete this._connectNode,this.onHide());break;case "SHOW TIMER":"SHOWING"!=
this.state&&(this._showTimer=this.defer(function(){this.set("state","SHOWING")},this.showDelay));break;case "SHOWING":var b=this.getContent(this._connectNode);if(!b){this.set("state","DORMANT");return}x.show(b,this._connectNode,this.position,!this.isLeftToRight(),this.textDir,f.hitch(this,"set","state","SHOWING"),f.hitch(this,"set","state","HIDE TIMER"));this.onShow(this._connectNode,this.position);break;case "HIDE TIMER":this._hideTimer=this.defer(function(){this.set("state","DORMANT")},this.hideDelay)}this._set("state",
a)}},_onHover:function(a){this._connectNode&&a!=this._connectNode&&this.set("state","DORMANT");this._connectNode=a;this.set("state","SHOW TIMER")},_onUnHover:function(a){this.set("state","HIDE TIMER")},open:function(a){this.set("state","DORMANT");this._connectNode=a;this.set("state","SHOWING")},close:function(){this.set("state","DORMANT")},onShow:function(){},onHide:function(){},destroy:function(){this.set("state","DORMANT");h.forEach(this._connections||[],function(a){h.forEach(a,function(a){a.remove()})},
this);this.inherited(arguments)}});x._MasterTooltip=w;x.show=u.showTooltip;x.hide=u.hideTooltip;x.defaultPosition=["after-centered","before-centered"];return x})},"dijit/place":function(){define("dojo/_base/array dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/_base/window ./Viewport ./main".split(" "),function(h,e,g,d,c,b,a){function f(a,f,d,k){var q=b.getEffectiveBox(a.ownerDocument);(!a.parentNode||"body"!=String(a.parentNode.tagName).toLowerCase())&&c.body(a.ownerDocument).appendChild(a);
var r=null;h.some(f,function(b){var f=b.corner,c=b.pos,g=0,h={w:{L:q.l+q.w-c.x,R:c.x-q.l,M:q.w}[f.charAt(1)],h:{T:q.t+q.h-c.y,B:c.y-q.t,M:q.h}[f.charAt(0)]},n=a.style;n.left=n.right="auto";d&&(g=d(a,b.aroundCorner,f,h,k),g="undefined"==typeof g?0:g);var s=a.style,t=s.display,H=s.visibility;"none"==s.display&&(s.visibility="hidden",s.display="");n=e.position(a);s.display=t;s.visibility=H;t={L:c.x,R:c.x-n.w,M:Math.max(q.l,Math.min(q.l+q.w,c.x+(n.w>>1))-n.w)}[f.charAt(1)];H={T:c.y,B:c.y-n.h,M:Math.max(q.t,
Math.min(q.t+q.h,c.y+(n.h>>1))-n.h)}[f.charAt(0)];c=Math.max(q.l,t);s=Math.max(q.t,H);t=Math.min(q.l+q.w,t+n.w);H=Math.min(q.t+q.h,H+n.h);t-=c;H-=s;g+=n.w-t+(n.h-H);if(null==r||g<r.overflow)r={corner:f,aroundCorner:b.aroundCorner,x:c,y:s,w:t,h:H,overflow:g,spaceAvailable:h};return!g});r.overflow&&d&&d(a,r.aroundCorner,r.corner,r.spaceAvailable,k);f=r.y;var s=r.x,t=c.body(a.ownerDocument);/relative|absolute/.test(g.get(t,"position"))&&(f-=g.get(t,"marginTop"),s-=g.get(t,"marginLeft"));t=a.style;t.top=
f+"px";t.left=s+"px";t.right="auto";return r}var k={TL:"BR",TR:"BL",BL:"TR",BR:"TL"};return a.place={at:function(a,b,c,d,e){c=h.map(c,function(a){var f={corner:a,aroundCorner:k[a],pos:{x:b.x,y:b.y}};d&&(f.pos.x+="L"==a.charAt(1)?d.x:-d.x,f.pos.y+="T"==a.charAt(0)?d.y:-d.y);return f});return f(a,c,e)},around:function(a,b,c,k,q){function r(a,b){H.push({aroundCorner:a,corner:b,pos:{x:{L:A,R:A+F,M:A+(F>>1)}[a.charAt(1)],y:{T:B,B:B+G,M:B+(G>>1)}[a.charAt(0)]}})}var s;if("string"==typeof b||"offsetWidth"in
b||"ownerSVGElement"in b){if(s=e.position(b,!0),/^(above|below)/.test(c[0])){var t=e.getBorderExtents(b),u=b.firstChild?e.getBorderExtents(b.firstChild):{t:0,l:0,b:0,r:0},v=e.getBorderExtents(a),w=a.firstChild?e.getBorderExtents(a.firstChild):{t:0,l:0,b:0,r:0};s.y+=Math.min(t.t+u.t,v.t+w.t);s.h-=Math.min(t.t+u.t,v.t+w.t)+Math.min(t.b+u.b,v.b+w.b)}}else s=b;if(b.parentNode){t="absolute"==g.getComputedStyle(b).position;for(b=b.parentNode;b&&1==b.nodeType&&"BODY"!=b.nodeName;){u=e.position(b,!0);v=g.getComputedStyle(b);
/relative|absolute/.test(v.position)&&(t=!1);if(!t&&/hidden|auto|scroll/.test(v.overflow)){var w=Math.min(s.y+s.h,u.y+u.h),x=Math.min(s.x+s.w,u.x+u.w);s.x=Math.max(s.x,u.x);s.y=Math.max(s.y,u.y);s.h=w-s.y;s.w=x-s.x}"absolute"==v.position&&(t=!0);b=b.parentNode}}var A=s.x,B=s.y,F="w"in s?s.w:s.w=s.width,G="h"in s?s.h:(d.deprecated("place.around: dijit/place.__Rectangle: { x:"+A+", y:"+B+", height:"+s.height+", width:"+F+" } has been deprecated.  Please use { x:"+A+", y:"+B+", h:"+s.height+", w:"+F+
" }","","2.0"),s.h=s.height),H=[];h.forEach(c,function(a){var b=k;switch(a){case "above-centered":r("TM","BM");break;case "below-centered":r("BM","TM");break;case "after-centered":b=!b;case "before-centered":r(b?"ML":"MR",b?"MR":"ML");break;case "after":b=!b;case "before":r(b?"TL":"TR",b?"TR":"TL");r(b?"BL":"BR",b?"BR":"BL");break;case "below-alt":b=!b;case "below":r(b?"BL":"BR",b?"TL":"TR");r(b?"BR":"BL",b?"TR":"TL");break;case "above-alt":b=!b;case "above":r(b?"TL":"TR",b?"BL":"BR");r(b?"TR":"TL",
b?"BR":"BL");break;default:r(a.aroundCorner,a.corner)}});a=f(a,H,q,{w:F,h:G});a.aroundNodePos=s;return a}}})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointActionsProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointActions"],function(h,e,g,d){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.cursor","rtc.actionservice","debug.breakpointmodel",
"rtc.linenumberservice"]}},createInstance:function(c,b,a,f){return new d(c,b,a,f)}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointActions":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/_base/connect MW/rtc/RichTextComponentFeatureEnum dojo/i18n!l10n/nls/actions".split(" "),function(h,e,g,d,c,b){return h(null,{constructor:function(a,f,d,g){this._cursor=a;this._actionService=f;this._breakpointModel=d;this._lineNumberService=g;a=[{id:c.MATLAB_BREAKPOINT_MARGIN.CLEAR_ALL_BREAKPOINTS_ACTION,
enabled:!0,text:b.clearAllBreakpointsLabel,description:b.clearAllBreakpointsDescription,callback:e.hitch(this,"clearAll")},{id:c.MATLAB_BREAKPOINT_MARGIN.TOGGLE_BREAKPOINT_ACTION,enabled:!0,text:b.toggleBreakpointLabel,description:b.toggleBreakpointDescription,key:"f12",platformKey:{mac:"meta_\\"},callback:e.hitch(this,"_toggleBreakpointCallback")},{id:c.MATLAB_BREAKPOINT_MARGIN.TOGGLE_ENABLE_BREAKPOINT_ACTION,enabled:!0,text:b.toggleEnableBreakpointLabel,description:b.toggleEnableBreakpointDescription,
callback:e.hitch(this,"_toggleEnablementCallback")}];this._actionService.loadActions(a)},clearAll:function(){this._breakpointModel.clearAllBreakpoints()},_toggleBreakpointCallback:function(){if(this._actionService.getAction(c.MATLAB_BREAKPOINT_MARGIN.TOGGLE_BREAKPOINT_ACTION).enabled)return this.toggleBreakpoint()},_toggleEnablementCallback:function(){if(this._actionService.getAction(c.MATLAB_BREAKPOINT_MARGIN.TOGGLE_BREAKPOINT_ACTION).enabled)return this.toggleEnablement()},toggleBreakpoint:function(){var a=
this._getZeroBasedCodeLineNumber();0>a||this._breakpointModel.toggleBreakpoint(a)},toggleEnablement:function(){var a=this._getZeroBasedCodeLineNumber();this._breakpointModel.toggleEnableState(a)},_getZeroBasedCodeLineNumber:function(){var a=this._cursor.getLineColumn().line-1;return this._lineNumberService.getCodeLineNumberAtOrBeforeLineNumber(a)-1}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointDataServiceProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider",
"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointDataService"],function(h,e,g,d){return h(g,{requires:function(){return{createInstance:["rtc.backingstore","debug.breakpointdirtyservice"]}},createInstance:function(c,b){return new d(c,b)}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointDataService":function(){define("dojo/_base/declare dojo/_base/lang mw-log/Log mw-peermodel/PeerModelManager mw-remote/Remote MW/rtc/datamodel/FileBackingStoreUtilities MW/rtc/plugins/breakpoint/MessageServiceFactory MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointInfo MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointDataServiceChannels".split(" "),
function(h,e,g,d,c,b,a,f,k){return h(null,{constructor:function(b,f){this._backingStore=b;this._breakpointDirtyService=f;this.messageService=a.getInstance();this._initializePeerModel();this._initializeListeners();this.triggerBreakpointsRefresh()},_initializePeerModel:function(){this._breakpointsDataStore=d.getInstance("/matlabbreakpointsdatastore");this._breakpointsDataStore.isSyncEnabled()||this._breakpointsDataStore.setSyncEnabled(!0)},_getFilePathFromBackingStore:function(){return b.getAbsoluteFilePathFromBackingStore(this._backingStore)},
triggerBreakpointsRefresh:function(){var a=this._getFilePathFromBackingStore();this.messageService.publish(k.GET_BREAKPOINTS_REQUEST,a)},_initializeListeners:function(){this.messageService.subscribe(k.BREAKPOINT_ADDED,"_breakpointsAddedServerResponse",this);this.messageService.subscribe(k.BREAKPOINT_REMOVED,"_breakpointsRemovedServerResponse",this);this.messageService.subscribe(k.BREAKPOINTS_CLEARED,"_breakpointsClearedServerResponse",this);this.messageService.subscribe(k.BREAKPOINTS_ERRORED,"_handleMatlabBreakpointError",
this);this.messageService.subscribe(k.BREAKPOINTS_FILE_REFRESHED,"_handleMatlabBreakpointsFileRefreshed",this)},_cleanListeners:function(){this.messageService.unsubscribe(k.BREAKPOINT_ADDED,"_breakpointsAddedServerResponse",this);this.messageService.unsubscribe(k.BREAKPOINT_REMOVED,"_breakpointsRemovedServerResponse",this);this.messageService.unsubscribe(k.BREAKPOINTS_CLEARED,"_breakpointsClearedServerResponse",this);this.messageService.unsubscribe(k.BREAKPOINTS_ERRORED,"_handleMatlabBreakpointError",
this);this.messageService.unsubscribe(k.BREAKPOINTS_FILE_REFRESHED,"_handleMatlabBreakpointsFileRefreshed",this)},_breakpointsAddedServerResponse:function(a){this.breakpointsAdded(this._filterBreakpointsByFileName(a.data,this._getFilePathFromBackingStore()))},_filterBreakpointsByFileName:function(a,b){var c=[];a.forEach(function(a){this._areFilesTheSame(b,a.fileName)&&c.push(new f(a.zeroBasedLineNumber,a.fileName,a.isEnabled,a.expression))},this);return c},_areFilesTheSame:function(a,b){return this._convertToLowerCase(a)===
this._convertToLowerCase(b)},_convertToLowerCase:function(a){return(a||"").toLocaleLowerCase()},_breakpointsRemovedServerResponse:function(a){this.breakpointsRemoved(this._filterBreakpointsByFileName(a.data,this._getFilePathFromBackingStore()))},_breakpointsClearedServerResponse:function(){this.breakpointsCleared()},setBreakpoint:function(a){this.messageService.publish(k.BREAKPOINT_ADD_REQUEST,a)},clearBreakpoint:function(a){this.messageService.publish(k.BREAKPOINT_REMOVE_REQUEST,a.getInfo())},clearAllBreakpoints:function(){this.messageService.publish(k.CLEAR_ALL_BREAKPOINTS_REQUEST)},
synchronizePeerModel:function(a){var b=this._breakpointsDataStore.getRoot(),f=this._getFilePathFromBackingStore();b&&f?(a={breakpoints:a,areBreakpointsDirty:this._breakpointDirtyService.areBreakpointsDirty()},b.setProperty(f,a)):this._breakpointsDataStore.hasRoot()||(this._breakpointDataStoreRootSetListener&&this._breakpointsDataStore.removeEventListener("rootSet",this._breakpointDataStoreRootSetListener),this._breakpointDataStoreRootSetListener=function(a){this.synchronizePeerModel(a);this._breakpointsDataStore.removeEventListener("rootSet",
this._breakpointDataStoreRootSetListener)}.bind(this,a),this._breakpointsDataStore.addEventListener("rootSet",this._breakpointDataStoreRootSetListener))},_handleMatlabBreakpointsFileRefreshed:function(a){if((a=a.data)&&this._areFilesTheSame(a.fileName,this._getFilePathFromBackingStore()))this._breakpointDirtyService.breakpointsRefreshed(a.errorOccurred),this.breakpointsRefreshedForFile(a.errorOccurred)},_handleMatlabBreakpointError:function(a){this._areFilesTheSame(a.data.fFile.path,this._getFilePathFromBackingStore())&&
(this._breakpointDirtyService.breakpointsErrored(),this.breakpointErrored(a.data))},destroy:function(){this._cleanListeners()},breakpointsAdded:function(a){},breakpointsRemoved:function(a){},breakpointsRefreshedForFile:function(a){},breakpointsCleared:function(){},breakpointErrored:function(a){}})})},"MW/rtc/plugins/breakpoint/MessageServiceFactory":function(){define(["dojo/_base/lang","MW/rtc/messageservice/MessageServiceFactory"],function(h,e){return new e})},"MW/rtc/messageservice/MessageServiceFactory":function(){define(["dojo/_base/declare",
"mw-messageservice/MessageService"],function(h,e){return h(null,{constructor:function(){this._messageService=e},getInstance:function(){return this._messageService},installInstance:function(e){this._messageService=e},clearCustomMessageServiceInstance:function(){this._messageService=e}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointDataServiceChannels":function(){define([],function(){return{BREAKPOINT_ADD_REQUEST:"/editor/breakpoints/addBreakpointsRequest",BREAKPOINT_REMOVE_REQUEST:"/editor/breakpoints/removeBreakpointsRequest",
GET_BREAKPOINTS_REQUEST:"/editor/breakpoints/getBreakpoints",CLEAR_ALL_BREAKPOINTS_REQUEST:"/editor/breakpoints/clearBreakpoints",BREAKPOINT_ADDED:"/editor/breakpoint/breakpointsAdded",BREAKPOINT_REMOVED:"/editor/breakpoint/breakpointsRemoved",BREAKPOINTS_CLEARED:"/editor/breakpoint/breakpointsCleared",BREAKPOINTS_FILE_REFRESHED:"/editor/breakpoint/breakpointsFileRefreshed",BREAKPOINTS_ERRORED:"/editor/breakpoint/breakpointsErrored"}})},"MW/rtc/plugins/breakpoint/matlab/TraditionalBreakpointDirtyServiceProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/breakpoint/matlab/TraditionalBreakpointDirtyService"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.backingstore"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/plugins/breakpoint/matlab/TraditionalBreakpointDirtyService":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/breakpoint/AbstractBreakpointDirtyService"],function(h,e,g,d){return h(d,
{constructor:function(c,b){this._internalDocument=c;this._backingStore=b;this._areBreakpointsDirty=!1;this.own(g.after(this._internalDocument,"onDocumentChanged",e.hitch(this,"_handleDocumentChanged"),!0))},breakpointsRefreshed:function(c){!c&&this._areBreakpointsDirty&&(this._areBreakpointsDirty=!1,this.breakpointDirtyStateChanged(this._areBreakpointsDirty))},breakpointsErrored:function(){this._areBreakpointsDirty||(this._areBreakpointsDirty=!0,this.breakpointDirtyStateChanged(this._areBreakpointsDirty))},
_handleDocumentChanged:function(c){c=this._filterDocumentEvents(c);!this._areBreakpointsDirty&&0<c.length&&(this._areBreakpointsDirty=!0,this.breakpointDirtyStateChanged(this._areBreakpointsDirty))}})})},"MW/rtc/plugins/breakpoint/AbstractBreakpointDirtyService":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin","MW/rtc/model/DocumentConstants"],function(h,e,g){return h(e,{constructor:function(){this._areBreakpointsDirty=!1},breakpointDirtyStateChanged:function(d){},areBreakpointsDirty:function(){return this._areBreakpointsDirty},
breakpointsRefreshed:function(d){},breakpointsErrored:function(){},breakpointPositionUpdated:function(){},_filterDocumentEvents:function(d){return d.filter(function(c){return c.type!==g.READONLY_STATE_CHANGE_EVENT})}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointMarginProvider":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr MW/codeanalyzer/CodeAnalyzerDataService MW/rtc/core/provider/PluginProvider MW/rtc/datamodel/FileBackingStoreUtilities MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointContextMenuModel MW/rtc/margin/DecoratableLineMargin".split(" "),
function(h,e,g,d,c,b,a,f,k){return h(b,{isApplicable:function(b){return a.isPlainCodeFile(b)},requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:"rtc.view rtc.internaldocument rtc.focusservice debug.margin.matlab.breakpoint debug.margin.executionarrow matlab.executable.line rtc.contextmenu.generator debug.contextmenumodelfactory".split(" ")}},createInstance:function(a,b,f,c,e,g,h,t){c=[c,e,g];t=t.getInstance();a=new k(a,b,f,c,1,t,h);a.own(t);d.set(a.getMarginElement(),"data-testid",
"breakpointMargin");return a}})})},"MW/rtc/margin/DecoratableLineMargin":function(){define("dojo/aspect dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/has dojo/mouse dojo/on dojo/_base/declare dojo/_base/lang MW/rtc/margin/DecoratableMargin MW/rtc/view/ViewUtilities".split(" "),function(h,e,g,d,c,b,a,f,k,l,n){return f(l,{_START_DOM_INDEX:1,_PADDING:4,constructor:function(a,b,f,c,e,k,h){this._topPad=d.create("div",{className:"lineNumberTopPad"});g.add(this._gutter,"lineMargin")},update:function(a,
b){var f=this._copyGutter(),c=d.create("div",{className:"lineNumberTopPad"});f.appendChild(c);b||(b=n.getZeroBasedVisibleLineNumbers(this._view));var e=b[0];this._canIncludeOneLineAboveViewport(e)&&(e-=1,b=[e].concat(b));var e=this._internalDocument.getLineNode(e),k=this._view.getNodeTop(e,!0),g=this._START_DOM_INDEX;b.forEach(function(a,c){var d=this._cloneAndUpdateLine(g,a,b[c+1],k);f.appendChild(d);g++},this);this._replaceGutter(f);this._topPad=c;this._normalizeMarginPosition(k);this._updateWidth()},
getHorizontalPadding:function(){return this._PADDING},_normalizeMarginPosition:function(a){var b=this._view.getDomTargetPosition().scrollTop;this._topPad.style.marginBottom=a-b+"px"},_cloneAndUpdateLine:function(a,b,f,c){var d=this._getElementInMargin(a).cloneNode(!1);this._cleanMarginElement(d);var k=!1;e.set(d,"data-testid","gutterLine_"+b);this._decorators.forEach(function(a){a.hasLayerForLineNumber(b,k)&&(a=a.createDecorationForLineNumber(b,k),d.appendChild(a),k=!0)},this);k||g.add(d,"emptyGutterLine");
a=this._getHeightForLine(b,f,c);d.style.height=a+"px";return d},_getElementInMargin:function(a){return!this._gutter.children[a]?d.create("div",{"class":"gutterLine"}):this._gutter.children[a]},_cleanMarginElement:function(a){a.hasChildNodes()&&d.empty(a);g.remove(a,"emptyGutterLine")},_getHeightForLine:function(a,b,f){a=this._internalDocument.getLineNode(a);b=this._internalDocument.getLineNode(b);var c=this._view.getNodeTop(a,!0)-f;return(b?this._view.getNodeTop(b,!0):this._view.getNodeBottom(a))-
f-c},_canIncludeOneLineAboveViewport:function(a){return 0<a?(a=this._internalDocument.getLineNode(a-1),!!n.getDomNode(a)):!1}})})},"MW/rtc/margin/DecoratableMargin":function(){define("dojo/aspect dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/has dojo/mouse dojo/on dojo/_base/declare dojo/_base/lang MW/rtc/margin/MarginPlugin".split(" "),function(h,e,g,d,c,b,a,f,k,l){return f(l,{constructor:function(a,b,f,c,e,k,g){this._view=a;this._internalDocument=b;this._decorators=c;this._priority=e;this._focusService=
f;this._contextMenuModel=k||null;this._contextMenuGenerator=g||null;this._gutter=d.create("div",{className:"plainText margin"});this._mouseListeners=[];this._configureMargin();this._updateWidth();this._contextMenuModel&&this._contextMenuGenerator&&(this._contextMenu=this._contextMenuGenerator.createContextMenu(this._gutter,this._contextMenuModel))&&this.own(this._contextMenu)},priority:function(){return this._priority},getWidth:function(){return this._width},getHorizontalPadding:function(){return 0},
onWidthChange:function(){},getMarginElement:function(){return this._gutter},_configureMargin:function(){this._width=0;this._gutter.style.width=this._width+"px";this._decorators.forEach(function(a){this.own(h.after(a,"onUpdate",k.hitch(this,"update",a)));this.own(h.after(a,"onWidthChange",k.hitch(this,"_updateWidth")))},this);this._configureMouseEvents()},_clearMouseListeners:function(){this._mouseListeners.forEach(function(a){a.remove()});this._mouseListeners=[]},_configureMouseEvents:function(){this._clearMouseListeners();
this._mouseListeners=[a(this._gutter,"mousemove",k.hitch(this,this._handleMouseMove)),a(this._gutter,"mouseout",k.hitch(this,this._handleMouseLeave)),a(this._gutter,"mousedown",k.hitch(this,this._handleMouseDown)),a(this._gutter,"mouseup",k.hitch(this,this._handleMouseUp)),a(this._gutter,"click",k.hitch(this,this._handleMouseClick))];this._mouseListeners.forEach(function(a){this.own(a)},this)},_getLineNumberFromMousePosition:function(a){a=this._view.getCoordinateFromEvent(this._view.fixEvent(a));
return this._view.getLineFromCoordinate(a)-1},_handleMouseLeave:function(a){this._decorators.forEach(function(b){b.handleMouseLeave(a,this._getLineNumberFromMousePosition(a))},this)},_handleMouseMove:function(a){this._decorators.forEach(function(b){b.handleMouseMove(a,this._getLineNumberFromMousePosition(a))},this)},_handleMouseDown:function(a){this._decorators.forEach(function(b){b.handleMouseDown(a,this._getLineNumberFromMousePosition(a))},this);this._contextMenuModel&&this._contextMenuModel.setMenuLine(this._getLineNumberFromMousePosition(a));
c("edge")&&this._focusService.setBlur()},_handleMouseUp:function(a){(!c("edge")&&!c("trident")&&!c("ie")||!b.isRight(a)||!this._contextMenuModel)&&this._decorators.forEach(function(b){b.handleMouseUp(a,this._getLineNumberFromMousePosition(a))},this)},_handleMouseClick:function(a){this._decorators.forEach(function(b){b.handleMouseClick(a,this._getLineNumberFromMousePosition(a))},this)},_updateWidth:function(){var a=0;this._decorators.forEach(function(b){b=b.getWidth();b>a&&(a=b)},this);this._width!==
a&&(this._width=a,this._gutter.style.width=this._width+"px",this.onWidthChange())},_attachContextMenu:function(){this._contextMenu?this._contextMenu.bindDomNode(this._gutter):this._contextMenuGenerator&&this._contextMenuModel&&(this._contextMenu=this._contextMenuGenerator.createContextMenu(this._gutter,this._contextMenuModel))},_detachContextMenu:function(){this._contextMenu&&this._contextMenu.unBindDomNode(this._gutter)},_copyGutter:function(){this._detachContextMenu();return this._gutter.cloneNode(!1)},
_replaceGutter:function(a){this._gutter.parentElement.replaceChild(a,this._gutter);this._gutter=a;this._configureMouseEvents();this._attachContextMenu()}})})},"MW/rtc/margin/MarginPlugin":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,e){return h(e,{priority:function(){throw Error("Unimplemented API: MW.rtc.margin.MarginPlugin.priority");},getWidth:function(){throw Error("Unimplemented API: MW.rtc.margin.MarginPlugin.getWidth");},getMarginElement:function(){throw Error("Unimplemented API: MW.rtc.margin.MarginPlugin.getMarginElement");
},onUpdate:function(){},update:function(e,d){}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointPromiseManagerProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointPromiseManager"],function(h,e,g,d){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["debug.breakpointmodel","rtc.code.executablelines"]}},createInstance:function(c,b){return new d(c,
b)}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointPromiseManager":function(){define(["dojo/aspect","dojo/Deferred","dojo/_base/declare","dojo/_base/lang","MW/rtc/abstract/AbstractPlugin"],function(h,e,g,d,c){return g(c,{constructor:function(b,a){this._breakpointDataModel=b;this._executableLineService=a;this._promise=new e;this.own(h.after(this._breakpointDataModel,"onDataModelChange",d.hitch(this,"_handleDataModelChange")))},_handleDataModelChange:function(){this._promise.resolve();this._promise=
new e},setBreakpoint:function(b){if(!this._isPossibleToSetBreakpoint(b.zeroBasedLineNumber))return this._createRejectedPromise();var a=this._promise;this._breakpointDataModel.setBreakpoint(b);return a},clearBreakpoint:function(b){if(!this._isPossibleToRemoveBreakpoint(b))return this._createRejectedPromise();var a=this._promise;this._breakpointDataModel.clearBreakpoint(b);return a},_isPossibleToSetBreakpoint:function(b){return this._executableLineService.isCodeLineExecutable(b+1)||this._executableLineService.getNextExecutableCodeLine(b+
1)!==this._executableLineService.NO_LINE},_isPossibleToRemoveBreakpoint:function(b){return this._breakpointDataModel.hasBreakpointAtLine(b)},_createRejectedPromise:function(){var b=new e;b.reject();return b}})})},"MW/rtc/plugins/breakpoint/matlab/temporary/TemporaryBreakpointManagerProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/breakpoint/matlab/temporary/TemporaryBreakpointManager","MW/rtc/plugins/debug/DebugServicesFactory"],
function(h,e,g,d,c){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["debug.breakpointmodel","debug.breakpoint.promise","matlab.services.busyidle"]}},createInstance:function(b,a,f){var e=c.getInstance();return new d(b,a,f,e)}})})},"MW/rtc/plugins/breakpoint/matlab/temporary/TemporaryBreakpointManager":function(){define("dojo/aspect dojo/Deferred dojo/_base/declare dojo/_base/lang MW/rtc/abstract/AbstractPlugin MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointInfo".split(" "),
function(h,e,g,d,c,b){return g(c,{constructor:function(a,b,c,e){this._breakpointDataModel=a;this._breakpointPromiseManager=b;this._busyIdleService=c;this._debugServices=e;this._temporaryBreakpoints=[];this.own(h.after(this._debugServices,"onDBStop",d.hitch(this,"_handleDBStop")));this.own(h.after(this._busyIdleService,"onIdleBusyStatusChange",d.hitch(this,"_handleBusyIdleStateChange"),!0))},getBreakpointReplacedByTemporary:function(a){var b=null;this._temporaryBreakpoints.forEach(function(c){c.temporaryBreakpoint.zeroBasedLineNumber===
a&&(b=c.existingBreakpoint)});return b},hasOnlyTemporaryBreakpoint:function(a){var b=!1;this._temporaryBreakpoints.forEach(function(c){c.temporaryBreakpoint.zeroBasedLineNumber===a&&null===c.existingBreakpoint&&(b=!0)});return b},setBreakpoint:function(a){a={existingBreakpoint:null,temporaryBreakpoint:new b(a,"",!0)};this._temporaryBreakpoints.push(a);return this._applyBreakpoint(a)},_applyBreakpoint:function(a){var b=this._breakpointDataModel.getAllBreakpoints();return this._breakpointPromiseManager.setBreakpoint(a.temporaryBreakpoint).then(d.hitch(this,
"_handleTemporaryBreakpointSet",a,b),d.hitch(this,"_handleBreakpointNotSet",a.zeroBasedLineNumber))},_handleTemporaryBreakpointSet:function(a,b){var c=this._findLineWhereBreakpointFell(a.temporaryBreakpoint.zeroBasedLineNumber);a.temporaryBreakpoint.zeroBasedLineNumber=c;c=this._findBreakpointAtLine(b,c);a.existingBreakpoint=c},_handleBreakpointCleared:function(a){this._temporaryBreakpoints=this._temporaryBreakpoints.filter(function(b){return b.temporaryBreakpoint.zeroBasedLineNumber!==a},this)},
_handleDBStop:function(){this._resetBreakpoints()},_handleBusyIdleStateChange:function(a){a||this._resetBreakpoints()},_resetBreakpoints:function(){this._temporaryBreakpoints.forEach(this._resetBreakpoint,this)},_resetBreakpoint:function(a){(a.existingBreakpoint?this._breakpointPromiseManager.setBreakpoint(a.existingBreakpoint):this._breakpointPromiseManager.clearBreakpoint(a.temporaryBreakpoint.zeroBasedLineNumber)).then(d.hitch(this,"_handleBreakpointCleared",a.temporaryBreakpoint.zeroBasedLineNumber),
function(){})},_findLineWhereBreakpointFell:function(a){var b=this._breakpointDataModel.getAllBreakpoints().map(function(a){return a.zeroBasedLineNumber});b.sort(function(a,b){return a-b});var b=b.filter(function(b){return b>=a}),c=-1;0<b.length&&(c=b[0]);return c},_findBreakpointAtLine:function(a,b){var c=null,d=a.map(function(a){return a.zeroBasedLineNumber}).indexOf(b);0<=d&&(c=a[d]);return c},_handleBreakpointNotSet:function(a){this._handleBreakpointCleared(a);return this._createRejectedPromise()},
_createRejectedPromise:function(){var a=new e;a.reject();return a}})})},"MW/rtc/plugins/debug/DebugServicesFactory":function(){define(["MW/rtc/plugins/debug/DebugServices"],function(h){var e=null;return{getInstance:function(){null===e&&(e=new h);return e}}})},"MW/rtc/plugins/debug/DebugServices":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect mw-messageservice/MessageService MW/rtc/plugins/debug/AbstractDebuggerService MW/rtc/plugins/debug/DebugServicesChannels MW/rtc/plugins/debug/StackFrame".split(" "),
function(h,e,g,d,c,b,a){return h(c,{_STOP_IF_ERROR_FLAG:1,_STOP_IF_WARNING_FLAG:2,_STOP_IF_NAN_INF_FLAG:8,constructor:function(a){this.messageService=a||d;this.messageService.subscribe(b.DEBUGGER_STATE_CHANGED,"_handleDebugModeChanged",this);this.messageService.subscribe(b.DBCONT_EVENT,"_handleDBContEvent",this);this.messageService.subscribe(b.DBSTOP_EVENT,"_handleDBStopEvent",this);this.messageService.subscribe(b.STACK_CHANGE,"_handleStackChanged",this);this.messageService.subscribe(b.DEBUG_STOP_CONDITIONS_EVENT,
"_handleDbStopConditionsEvent",this);this.isPaused=this.isDebugging=!1;this._requestInitialState();this.messageService.start&&(this.connection=g.after(this.messageService,"start",e.hitch(this,"_requestInitialState"),!0))},_requestInitialState:function(){this.messageService.publish(b.DEBUGGER_STATE_REQUEST,{});this.messageService.publish(b.STACK_REQUEST,{});this.messageService.publish(b.DB_STOP_IF_STATUS,{})},_handleDebugModeChanged:function(a){this.isPaused=this.isDebugging=a.data.isDebugging;this.onDebugModeChanged(this.isDebugging)},
_handleStackChanged:function(b){var c=b.data.currentIndex,d=b.data.lineNumbers,e=b.data.fullFileNames;b=b.data.stack.map(function(b,f){return new a(b,e[f],d[f])});this.onStackChanged(b,c)},onStackChanged:function(a,b){},_handleDbStopConditionsEvent:function(a){a=this._createDBStopIfConditionObject(a.data.dbStopConditions);this.onDbStopConditionsEvent(a)},_createDBStopIfConditionObject:function(a){return{stopIfError:(a&this._STOP_IF_ERROR_FLAG)===this._STOP_IF_ERROR_FLAG,stopIfWarning:(a&this._STOP_IF_WARNING_FLAG)===
this._STOP_IF_WARNING_FLAG,stopIfNanInf:(a&this._STOP_IF_NAN_INF_FLAG)===this._STOP_IF_NAN_INF_FLAG}},onDbStopConditionsEvent:function(a){},onDebugModeChanged:function(a){},_handleDBContEvent:function(){this.isPaused=!1;this.onDBCont()},onDBCont:function(){},_handleDBStopEvent:function(a){var b=a.data.fileName;a=a.data.lineNumber;this.isPaused=!0;this.onDBStop(b,a)},onDBStop:function(a,b){},debugContinue:function(){this.messageService.publish(b.DEBUG_CONTINUE,{})},debugPause:function(){this.messageService.publish(b.DEBUG_PAUSE,
{})},debugStep:function(){this.messageService.publish(b.DEBUG_STEP,{})},debugStepIn:function(){this.messageService.publish(b.DEBUG_STEP_IN,{})},debugStepOut:function(){this.messageService.publish(b.DEBUG_STEP_OUT,{})},debugExit:function(){this.messageService.publish(b.DEBUG_EXIT,{})},dbUpDown:function(a){this.messageService.publish(b.STACK_UPDOWN,{deltaValue:a})},requestStackState:function(){this.messageService.publish(b.STACK_REQUEST,{})},setDBStopIfError:function(a){this.messageService.publish(b.DB_STOP_IF_ERROR,
a)},setDBStopIfWarning:function(a){this.messageService.publish(b.DB_STOP_IF_WARNING,a)},setDBStopIfNanInf:function(a){this.messageService.publish(b.DB_STOP_IF_NAN_INF,a)},dispose:function(){this.messageService.unsubscribe(b.DEBUGGER_STATE_CHANGED,"_handleDebugModeChanged",this);this.messageService.unsubscribe(b.STACK_CHANGE,"_handleStackChanged",this);this.messageService.unsubscribe(b.DBCONT_EVENT,"_handleDBContEvent",this);this.messageService.unsubscribe(b.DBSTOP_EVENT,"_handleDBStopEvent",this);
this.messageService.unsubscribe(b.DEBUG_STOP_CONDITIONS_EVENT,"_handleDbStopConditionsEvent",this);this.connection&&this.connection.remove()}})})},"MW/rtc/plugins/debug/AbstractDebuggerService":function(){define(["dojo/_base/declare"],function(h){return h(null,{debugContinue:function(){throw Error("Unimplemented API: MW.rtc.plugins.debug.DebugActions.debugContinue");},debugStep:function(){throw Error("Unimplemented API: MW.rtc.plugins.debug.DebugActions.debugStep");},debugStepIn:function(){throw Error("Unimplemented API: MW.rtc.plugins.debug.DebugActions.debugStepIn");
},debugStepOut:function(){throw Error("Unimplemented API: MW.rtc.plugins.debug.DebugActions.debugStepOut");},debugExit:function(){throw Error("Unimplemented API: MW.rtc.plugins.debug.DebugActions.debugExit");}})})},"MW/rtc/plugins/debug/DebugServicesChannels":function(){define([],function(){return{DEBUGGER_STATE_CHANGED:"/editor/debugger/debugger-state-change",DEBUGGER_STATE_REQUEST:"/editor/debugger/debugger-state-request",DBSTOP_EVENT:"/editor/debugger/dbstop",DBCONT_EVENT:"/editor/debugger/dbcont",
STACK_CHANGE:"/editor/debugger/stack-change",STACK_REQUEST:"/editor/debugger/stack-request",DEBUG_STOP_CONDITIONS_EVENT:"/editor/debugger/debug-stop-if",DEBUG_CONTINUE:"/editor/debugger/debug-continue",DEBUG_PAUSE:"/editor/debugger/debug-pause",DEBUG_STEP:"/editor/debugger/debug-step",DEBUG_STEP_IN:"/editor/debugger/debug-step-in",DEBUG_STEP_OUT:"/editor/debugger/debug-step-out",DEBUG_EXIT:"/editor/debugger/debug-exit",STACK_UPDOWN:"/editor/debugger/stack-up-down",DB_STOP_IF_ERROR:"/editor/debugger/debug-stop-if-error",
DB_STOP_IF_WARNING:"/editor/debugger/debug-stop-if-warning",DB_STOP_IF_NAN_INF:"/editor/debugger/debug-stop-if-nan-inf",DB_STOP_IF_STATUS:"/editor/debugger/debug-stop-if-status-request"}})},"MW/rtc/plugins/debug/StackFrame":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(e,g,d){this._name=e;this._fullPath=g||null;this._lineNumber=d||null},getName:function(){return this._name},getFullPath:function(){return this._fullPath},getLineNumber:function(){return this._lineNumber},
destroy:function(){}})})},"MW/rtc/plugins/breakpoint/DummyBreakpointMarginProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/margin/DecoratableLineMargin","MW/rtc/margin/DummyBreakpointDecorator","MW/rtc/core/provider/PluginProvider"],function(h,e,g,d,c){return h(c,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.view","rtc.internaldocument","rtc.focusservice"]}},createInstance:function(b,a,f){var c=[new d];return new g(b,
a,f,c,1,null,null)}})})},"MW/rtc/margin/DummyBreakpointDecorator":function(){define(["dojo/_base/declare","MW/rtc/margin/AbstractLineMarginDecorator"],function(h,e){return h(e,{hasLayerForLineNumber:function(e,d){return!1},createDecorationForLineNumber:function(e,d){},getWidth:function(){return 17}})})},"MW/rtc/plugins/buttonfactory/ButtonFactoryProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/buttonfactory/ButtonFactory"],function(h,
e,g,d){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:[]}},createInstance:function(){return new d}})})},"MW/rtc/plugins/buttonfactory/ButtonFactory":function(){define(["dojo/_base/declare","dojo/dom-construct"],function(h,e){return h(null,{constructor:function(){},createButton:function(g,d,c){return e.create("div",{"class":g.join(" "),innerHTML:d,onclick:c,onmousedown:this._handleMouseDown.bind(this)})},_handleMouseDown:function(e){e.stopPropagation()},
destroy:function(){}})})},"MW/rtc/plugins/caseconverter/CaseConverterProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","./CaseConverter"],function(h,e,g,d){return h(g,{requires:function(){return{createInstance:["rtc.document","rtc.cursorcontroller","rtc.eventhandler","rtc.actionservice","rtc.internaldocument"]}},createInstance:function(c,b,a,f,e){return new d(c,b,a,f,e)}})})},"MW/rtc/plugins/caseconverter/CaseConverter":function(){define("dojo/_base/declare dojo/aspect dojo/i18n!l10n/nls/actions MW/rtc/abstract/AbstractPlugin MW/rtc/model/DocumentUtilities MW/rtc/model/DocumentEventUtilities MW/rtc/model/RangeUtilities MW/rtc/model/PositionUtilities MW/rtc/model/events/DocumentEvent mw-log/Log".split(" "),
function(h,e,g,d,c,b,a,f,k,l){return h(d,{constructor:function(a,b,f,c,d){this._document=a;this._internalDocument=d;this._cursorController=b;this._actionService=c;this.own(e.after(this._cursorController,"onUpdate",this._updateActionState.bind(this)));this.own(e.after(f,"onMouseDown",this._updateActionState.bind(this)));a=[{id:"rtc_changecase",key:"shift_f3",platformKey:{mac:"shift_f3"},enabled:!1,contextMenuGroup:"Default",text:g.changeCaseLabel,callback:this._changeCase.bind(this)}];this._actionService.loadActions(a)},
_changeCase:function(){if(!this._actionService.getAction("rtc_changecase").enabled)return!1;var b=this._cursorController.getSelection(),f=b.map(function(b){return a.getTextForRange(b,!0)}).join("\n");f!==f.toUpperCase()?this._updateSelectedText(b,f.toUpperCase):this._updateSelectedText(b,f.toLowerCase);return!0},_updateSelectedText:function(a,f){var c=this._document.startBlockEdit(),d={startLine:-1,endLine:-1};a.forEach(function(a){this._updateTextWithChangedCase(a,f);d=this._determineStartEndOfFullSelection(a,
d)},this);(0>d.startLine||0>d.endLine)&&l.error("Error in determining the start and end of selection for changing case");var e=[k.create(d.startLine-1,d.endLine-1)];c.appendRedoEvents(e);c.appendUndoEvents(b.translateEventsForUndo(e));this._document.endBlockEdit(c);this._internalDocument.emitDocumentEvents(e);this._cursorController.setSelection(a)},_updateTextWithChangedCase:function(b,f){a.nodesInRange(b).forEach(function(a){if(a.isTextNode()){var c=0,d=a.text.length;a===b.getStartPosition().getNode()&&
(c=b.getStartPosition().getOffset());a===b.getEndPosition().getNode()&&(d=b.getEndPosition().getOffset());this._doOperation(f,a,c,d)}},this)},_doOperation:function(a,b,f,c){var d=b.text.slice(f,c);""!==d.trim()&&(a=a.bind(d)(),this._internalDocument.updateTextInNode(b,a,f,c))},_determineStartEndOfFullSelection:function(a,b){var c=a.getStartPosition(),d=a.getEndPosition();if(0===f.comparePositions(c,d))return b;0>b.startLine&&(b.startLine=c.getLineColumn().line);b.endLine=d.getLineColumn().line;return b},
_updateActionState:function(){var a=this._cursorController.hasSelection()&&!this._cursorController.areCursorsReadOnly();this._actionService.updateAction("rtc_changecase",{enabled:a})}})})},"MW/rtc/plugins/code/CodeTextServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./CodeTextService"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/code/CodeTextService":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractCachedModelQueryService"],function(h,e,g,d){return h(d,{constructor:function(c){this._codeText=""},getCodeText:function(){this._ensureBuilt();return this._codeText},_build:function(){this._codeText=this._internalDocument.root.getCodeText()}})})},"MW/rtc/abstract/AbstractCachedModelQueryService":function(){define(["dojo/_base/declare","dojo/aspect","mw-log/Log","./AbstractPlugin"],function(h,e,g,d){return h(d,{constructor:function(c){this._internalDocument=
c;this._outOfDate=!0;["onDocumentReset","onNodeChange","onDocumentChanged"].forEach(function(b){this.own(e.after(this._internalDocument,b,function(){this._outOfDate=!0}.bind(this)))},this)},_ensureBuilt:function(){this._outOfDate&&(this._build(),this._outOfDate=!1)},_build:function(){g.error("AbstractCachedModelQueryService._build Unimplemented")}})})},"MW/rtc/plugins/code/ExecutableLineServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/code/ExecutableLineService","MW/rtc/core/provider/PluginProvider"],
function(h,e,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.linenumberservice","matlab.tokens"]}},createInstance:function(d,c){return new e(d,c)}})})},"MW/rtc/plugins/code/ExecutableLineService":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin"],function(h,e,g,d){return h(d,{NO_LINE:-1,constructor:function(c,b){this._lineNumberService=c;this._matlabTokens=b;this._executableLines=
this._matlabTokens.getTokensData().executableLines;this.own(g.after(this._matlabTokens,"onUpdate",e.hitch(this,"_updateTokens"),!0))},isCodeLineExecutable:function(c){c=this._lineNumberService.getLineNumberFromCodeLineNumber(c);return!!this._executableLines[c]},onUpdate:function(){},getFirstExecutableCodeLine:function(){var c=this._executableLines.indexOf(!0);return-1===c?this.NO_LINE:this._lineNumberService.getCodeLineNumberFromLineNumber(c)},getNextExecutableCodeLine:function(c){c=this._lineNumberService.getLineNumberFromCodeLineNumber(c);
c=this._executableLines.indexOf(!0,c+1);return-1===c?this.NO_LINE:this._lineNumberService.getCodeLineNumberFromLineNumber(c)},_updateTokens:function(c){this._executableLines=c.executableLines;this.onUpdate()}})})},"MW/rtc/plugins/contextmenu/DojoContextMenuGeneratorProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/contextmenu/DojoContextMenuGenerator"],function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],
createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/contextmenu/DojoContextMenuGenerator":function(){define("dijit/Menu dijit/MenuItem dijit/MenuSeparator dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/keys dojo/aspect MW/rtc/plugins/contextmenu/ContextMenuGenerator".split(" "),function(h,e,g,d,c,b,a,f,k){return d(k,{createContextMenu:function(a,b){var f=this,d=h({baseClass:"ww-contextMenu",targetNodeIds:[a],onOpen:function(d){this.domNode.parentNode&&c.add(this.domNode.parentNode,
"layeredNode");var e=this.getChildren();e&&e.forEach(this.removeChild);d=document.elementFromPoint(d.x-1,d.y);f.willOpen(a,d);var k=1,h=b.getGroups().length;b.getGroups().forEach(function(a){a=b.getActions(a);a instanceof Array&&0!=a.length&&(a.forEach(function(a){a=f._createMenuItem(a);this.addChild(a)},this),k<h&&(this.addChild(new g),k+=1))},this);f.onOpen(d)},onClose:function(){f.onClose()}});this._setDataTestId(d,a.hasAttribute("data-testid")?"contextMenu_"+a.getAttribute("data-testid"):"contextMenu_"+
a.className);return d},_createMenuItem:function(a){var b=new e({label:a.label,accelKey:a.shortcut,onClick:a.callback,disabled:!a.enabled});this._setDataTestId(b,"contextMenu_"+a.id);return b},_setDataTestId:function(a,b){a.set("data-testid",b)}})})},"dijit/Menu":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/_base/window dojo/window ./popup ./DropDownMenu dojo/ready".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s){n("dijit-legacy-requires")&&s(0,function(){h(["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"])});return g("dijit.Menu",r,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):e.forEach(this.targetNodeIds,this.bindDomNode,this);this.inherited(arguments)},_iframeContentWindow:function(a){return m.get(this._iframeContentDocument(a))||
this._iframeContentDocument(a).__parent__||a.name&&document.frames[a.name]||null},_iframeContentDocument:function(a){return a.contentDocument||a.contentWindow&&a.contentWindow.document||a.name&&document.frames[a.name]&&document.frames[a.name].document||null},bindDomNode:function(a){a=d.byId(a,this.ownerDocument);var b;if("iframe"==a.tagName.toLowerCase()){var e=a;b=this._iframeContentWindow(e);b=p.body(b.document)}else b=a==p.body(this.ownerDocument)?this.ownerDocument.documentElement:a;var g={node:a,
iframe:e};c.set(a,"_dijitMenu"+this.id,this._bindings.push(g));var h=k.hitch(this,function(a){var b=this.selector,c=b?function(a){return l.selector(b,a)}:function(a){return a},d=this;return[l(a,c(this.leftClickToOpen?"click":"contextmenu"),function(a){a.stopPropagation();a.preventDefault();(new Date).getTime()<d._lastKeyDown+500||d._scheduleOpen(this,e,{x:a.pageX,y:a.pageY},a.target)}),l(a,c("keydown"),function(a){if(93==a.keyCode||a.shiftKey&&a.keyCode==f.F10||d.leftClickToOpen&&a.keyCode==f.SPACE)a.stopPropagation(),
a.preventDefault(),d._scheduleOpen(this,e,null,a.target),d._lastKeyDown=(new Date).getTime()})]});g.connects=b?h(b):[];e&&(g.onloadHandler=k.hitch(this,function(){var a=this._iframeContentWindow(e),a=p.body(a.document);g.connects=h(a)}),e.addEventListener?e.addEventListener("load",g.onloadHandler,!1):e.attachEvent("onload",g.onloadHandler))},unBindDomNode:function(a){var b;try{b=d.byId(a,this.ownerDocument)}catch(f){return}a="_dijitMenu"+this.id;if(b&&c.has(b,a)){for(var e=c.get(b,a)-1,k=this._bindings[e],
g;g=k.connects.pop();)g.remove();(g=k.iframe)&&(g.removeEventListener?g.removeEventListener("load",k.onloadHandler,!1):g.detachEvent("onload",k.onloadHandler));c.remove(b,a);delete this._bindings[e]}},_scheduleOpen:function(a,b,f,c){this._openTimer||(this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:c,delegatedTarget:a,iframe:b,coords:f})},1))},_openMyself:function(f){function c(){r.refocus&&s&&s.focus();q.close(r)}var e=f.target,k=f.iframe,g=f.coords,h=!g;this.currentTarget=
f.delegatedTarget;if(g){if(k){f=b.position(k,!0);var e=this._iframeContentWindow(k),e=b.docScroll(e.document),l=a.getComputedStyle(k),m=a.toPixelValue,p=(n("ie")&&n("quirks")?0:m(k,l.paddingLeft))+(n("ie")&&n("quirks")?m(k,l.borderLeftWidth):0),k=(n("ie")&&n("quirks")?0:m(k,l.paddingTop))+(n("ie")&&n("quirks")?m(k,l.borderTopWidth):0);g.x+=f.x+p-e.x;g.y+=f.y+k-e.y}}else g=b.position(e,!0),g.x+=10,g.y+=10;var r=this,k=this._focusManager.get("prevNode");f=this._focusManager.get("curNode");var s=!f||
d.isDescendant(f,this.domNode)?k:f;q.open({popup:this,x:g.x,y:g.y,onExecute:c,onCancel:c,orient:this.isLeftToRight()?"L":"R"});this.focus();h||this.defer(function(){this._cleanUp(!0)});this._onBlur=function(){this.inherited("_onBlur",arguments);q.close(this)}},destroy:function(){e.forEach(this._bindings,function(a){a&&this.unBindDomNode(a.node)},this);this.inherited(arguments)}})})},"dijit/popup":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on ./place ./BackgroundIframe ./Viewport ./main dojo/touch".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s){function t(){this._popupWrapper&&(b.destroy(this._popupWrapper),delete this._popupWrapper)}g=g(null,{_stack:[],_beginZIndex:1E3,_idGen:1,_repositionAll:function(){if(this._firstAroundNode){var b=this._firstAroundPosition,f=a.position(this._firstAroundNode,!0),c=f.x-b.x,b=f.y-b.y;if(c||b){this._firstAroundPosition=f;for(f=0;f<this._stack.length;f++){var d=this._stack[f].wrapper.style;d.top=parseFloat(d.top)+b+"px";"auto"==d.right?d.left=parseFloat(d.left)+
c+"px":d.right=parseFloat(d.right)-c+"px"}}this._aroundMoveListener=setTimeout(n.hitch(this,"_repositionAll"),c||b?10:50)}},_createWrapper:function(a){var f=a._popupWrapper,c=a.domNode;f||(f=b.create("div",{"class":"dijitPopup",style:{display:"none"},role:"region","aria-label":a["aria-label"]||a.label||a.name||a.id},a.ownerDocumentBody),f.appendChild(c),c=c.style,c.display="",c.visibility="",c.position="",c.top="0px",a._popupWrapper=f,e.after(a,"destroy",t,!0),"ontouchend"in document&&p(f,"touchend",
function(a){/^(input|button|textarea)$/i.test(a.target.tagName)||a.preventDefault()}),f.dojoClick=!0);return f},moveOffScreen:function(b){var c=this._createWrapper(b);b=a.isBodyLtr(b.ownerDocument);var d={visibility:"hidden",top:"-9999px",display:""};d[b?"left":"right"]="-9999px";d[b?"right":"left"]="auto";f.set(c,d);return c},hide:function(a){var b=this._createWrapper(a);f.set(b,{display:"none",height:"auto",overflowY:"visible",border:""});a=a.domNode;"_originalStyle"in a&&(a.style.cssText=a._originalStyle)},
getTopPopup:function(){for(var a=this._stack,b=a.length-1;0<b&&a[b].parent===a[b-1].widget;b--);return a[b]},open:function(b){var e=this._stack,g=b.popup,h=g.domNode,s=b.orient||["below","below-alt","above","above-alt"],t=b.parent?b.parent.isLeftToRight():a.isBodyLtr(g.ownerDocument),F=b.around,G=b.around&&b.around.id?b.around.id+"_dropdown":"popup_"+this._idGen++;if(!b.doNotClose)for(;e.length&&(!b.parent||!d.isDescendant(b.parent.domNode,e[e.length-1].widget.domNode));)this.close(e[e.length-1].widget);
var H=this.moveOffScreen(g);g.startup&&!g._started&&g.startup();var I,K=a.position(h);if("maxHeight"in b&&-1!=b.maxHeight)I=b.maxHeight||Infinity;else{I=r.getEffectiveBox(this.ownerDocument);var C=F?a.position(F,!1):{y:b.y-(b.padding||0),h:2*(b.padding||0)};I=Math.floor(Math.max(C.y,I.h-(C.y+C.h)))}K.h>I&&(K=f.getComputedStyle(h),f.set(H,{overflowY:"scroll",height:I+"px",border:K.borderLeftWidth+" "+K.borderLeftStyle+" "+K.borderLeftColor}),h._originalStyle=h.style.cssText,h.style.border="none");
c.set(H,{id:G,style:{zIndex:this._beginZIndex+e.length},"class":"dijitPopup "+(g.baseClass||g["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:b.parent?b.parent.id:""});0==e.length&&F&&(this._firstAroundNode=F,this._firstAroundPosition=a.position(F,!0),this._aroundMoveListener=setTimeout(n.hitch(this,"_repositionAll"),50));k("config-bgIframe")&&!g.bgIframe&&(g.bgIframe=new q(H));G=g.orient?n.hitch(g,"orient"):null;s=F?m.around(H,F,s,t,G):m.at(H,b,"R"==s?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],
b.padding,G);H.style.visibility="visible";h.style.visibility="visible";h=[];h.push(p(H,"keydown",n.hitch(this,function(a){if(a.keyCode==l.ESCAPE&&b.onCancel)a.stopPropagation(),a.preventDefault(),b.onCancel();else if(a.keyCode==l.TAB&&(a.stopPropagation(),a.preventDefault(),(a=this.getTopPopup())&&a.onCancel))a.onCancel()})));g.onCancel&&b.onCancel&&h.push(g.on("cancel",b.onCancel));h.push(g.on(g.onExecute?"execute":"change",n.hitch(this,function(){var a=this.getTopPopup();if(a&&a.onExecute)a.onExecute()})));
e.push({widget:g,wrapper:H,parent:b.parent,onExecute:b.onExecute,onCancel:b.onCancel,onClose:b.onClose,handlers:h});if(g.onOpen)g.onOpen(s);return s},close:function(a){for(var b=this._stack;a&&h.some(b,function(b){return b.widget==a})||!a&&b.length;){var f=b.pop(),c=f.widget,d=f.onClose;c.bgIframe&&(c.bgIframe.destroy(),delete c.bgIframe);if(c.onClose)c.onClose();for(var e;e=f.handlers.pop();)e.remove();c&&c.domNode&&this.hide(c);d&&d()}0==b.length&&this._aroundMoveListener&&(clearTimeout(this._aroundMoveListener),
this._firstAroundNode=this._firstAroundPosition=this._aroundMoveListener=null)}});return s.popup=new g})},"dijit/DropDownMenu":function(){define(["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_MenuBase"],function(h,e,g,d){return h("dijit.DropDownMenu",d,{templateString:g,baseClass:"dijitMenu",_onUpArrow:function(){this.focusPrev()},_onDownArrow:function(){this.focusNext()},_onRightArrow:function(c){this._moveToPopup(c);c.stopPropagation();c.preventDefault()},_onLeftArrow:function(c){if(this.parentMenu)if(this.parentMenu._isMenuBar)this.parentMenu.focusPrev();
else this.onCancel(!1);else c.stopPropagation(),c.preventDefault()}})})},"dijit/_MenuBase":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/lang dojo/mouse dojo/on dojo/window ./a11yclick ./registry ./_Widget ./_CssStateMixin ./_KeyNavContainer ./_TemplatedMixin".split(" "),function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r){return e("dijit._MenuBase",[p,r,q,m],{selected:null,_setSelectedAttr:function(a){this.selected!=a&&(this.selected&&(this.selected._setSelected(!1),
this._onChildDeselect(this.selected)),a&&a._setSelected(!0),this._set("selected",a))},activated:!1,_setActivatedAttr:function(a){c.toggle(this.domNode,"dijitMenuActive",a);c.toggle(this.domNode,"dijitMenuPassive",!a);this._set("activated",a)},parentMenu:null,popupDelay:500,passivePopupDelay:Infinity,autoFocus:!1,childSelector:function(a){var b=n.byNode(a);return a.parentNode==this.containerNode&&b&&b.focus},postCreate:function(){var c=this,d="string"==typeof this.childSelector?this.childSelector:
b.hitch(this,"childSelector");this.own(f(this.containerNode,f.selector(d,a.enter),function(){c.onItemHover(n.byNode(this))}),f(this.containerNode,f.selector(d,a.leave),function(){c.onItemUnhover(n.byNode(this))}),f(this.containerNode,f.selector(d,l),function(a){c.onItemClick(n.byNode(this),a);a.stopPropagation()}),f(this.containerNode,f.selector(d,"focusin"),function(){c._onItemFocus(n.byNode(this))}));this.inherited(arguments)},onKeyboardSearch:function(a,b,f,c){this.inherited(arguments);if(a&&(-1==
c||a.popup&&1==c))this.onItemClick(a,b)},_keyboardSearchCompare:function(a,b){return a.shortcutKey?b==a.shortcutKey.toLowerCase()?-1:0:this.inherited(arguments)?1:0},onExecute:function(){},onCancel:function(){},_moveToPopup:function(a){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,a);else(a=this._getTopMenu())&&a._isMenuBar&&a.focusNext()},_onPopupHover:function(){this.set("selected",this.currentPopupItem);this._stopPendingCloseTimer()},
onItemHover:function(a){this.activated?(this.set("selected",a),a.popup&&(!a.disabled&&!this.hover_timer)&&(this.hover_timer=this.defer(function(){this._openItemPopup(a)},this.popupDelay))):Infinity>this.passivePopupDelay&&(this.passive_hover_timer&&this.passive_hover_timer.remove(),this.passive_hover_timer=this.defer(function(){this.onItemClick(a,{type:"click"})},this.passivePopupDelay));this._hoveredChild=a;a._set("hovering",!0)},_onChildDeselect:function(a){this._stopPopupTimer();this.currentPopupItem==
a&&(this._stopPendingCloseTimer(),this._pendingClose_timer=this.defer(function(){this.currentPopupItem=this._pendingClose_timer=null;a._closePopup()},this.popupDelay))},onItemUnhover:function(a){this._hoveredChild==a&&(this._hoveredChild=null);this.passive_hover_timer&&(this.passive_hover_timer.remove(),this.passive_hover_timer=null);a._set("hovering",!1)},_stopPopupTimer:function(){this.hover_timer&&(this.hover_timer=this.hover_timer.remove())},_stopPendingCloseTimer:function(){this._pendingClose_timer&&
(this._pendingClose_timer=this._pendingClose_timer.remove())},_getTopMenu:function(){for(var a=this;a.parentMenu;a=a.parentMenu);return a},onItemClick:function(a,b){this.passive_hover_timer&&this.passive_hover_timer.remove();this.focusChild(a);if(a.disabled)return!1;if(a.popup){this.set("selected",a);this.set("activated",!0);var f=/^key/.test(b._origType||b.type)||0==b.clientX&&0==b.clientY;this._openItemPopup(a,f)}else this.onExecute(),a._onClick?a._onClick(b):a.onClick(b)},_openItemPopup:function(a,
c){if(a!=this.currentPopupItem){this.currentPopupItem&&(this._stopPendingCloseTimer(),this.currentPopupItem._closePopup());this._stopPopupTimer();var d=a.popup;d.parentMenu=this;this.own(this._mouseoverHandle=f.once(d.domNode,"mouseover",b.hitch(this,"_onPopupHover")));var e=this;a._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){c&&e.focusChild(a);e._cleanUp()},onExecute:b.hitch(this,"_cleanUp",!0),onClose:function(){e._mouseoverHandle&&(e._mouseoverHandle.remove(),
delete e._mouseoverHandle)}},c);this.currentPopupItem=a}},onOpen:function(){this.isShowingNow=!0;this.set("activated",!0)},onClose:function(){this.set("activated",!1);this.set("selected",null);this.isShowingNow=!1;this.parentMenu=null},_closeChild:function(){this._stopPopupTimer();this.currentPopupItem&&(this.focused&&(d.set(this.selected.focusNode,"tabIndex",this.tabIndex),this.selected.focusNode.focus()),this.currentPopupItem._closePopup(),this.currentPopupItem=null)},_onItemFocus:function(a){if(this._hoveredChild&&
this._hoveredChild!=a)this.onItemUnhover(this._hoveredChild);this.set("selected",a)},_onBlur:function(){this._cleanUp(!0);this.inherited(arguments)},_cleanUp:function(a){this._closeChild();"undefined"==typeof this.isShowingNow&&this.set("activated",!1);a&&this.set("selected",null)}})})},"dijit/_KeyNavContainer":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/keys dojo/_base/lang ./registry ./_Container ./_FocusMixin ./_KeyNavMixin".split(" "),function(h,
e,g,d,c,b,a,f,k,l){return e("dijit._KeyNavContainer",[k,l,f],{connectKeyNavHandlers:function(a,f){var d=this._keyNavCodes={},e=b.hitch(this,"focusPrev"),k=b.hitch(this,"focusNext");h.forEach(a,function(a){d[a]=e});h.forEach(f,function(a){d[a]=k});d[c.HOME]=b.hitch(this,"focusFirstChild");d[c.END]=b.hitch(this,"focusLastChild")},startupKeyNavChildren:function(){d.deprecated("startupKeyNavChildren() call no longer needed","","2.0")},startup:function(){this.inherited(arguments);h.forEach(this.getChildren(),
b.hitch(this,"_startupChild"))},addChild:function(a,b){this.inherited(arguments);this._startupChild(a)},_startupChild:function(a){a.set("tabIndex","-1")},_getFirst:function(){var a=this.getChildren();return a.length?a[0]:null},_getLast:function(){var a=this.getChildren();return a.length?a[a.length-1]:null},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1))},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),!0)},childSelector:function(b){return(b=
a.byNode(b))&&b.getParent()==this}})})},"dijit/_KeyNavMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dijit/registry dijit/_FocusMixin".split(" "),function(h,e,g,d,c,b,a,f){return e("dijit._KeyNavMixin",f,{tabIndex:"0",childSelector:null,postCreate:function(){this.inherited(arguments);g.set(this.domNode,"tabIndex",this.tabIndex);if(!this._keyNavCodes){var f=this._keyNavCodes={};f[d.HOME]=c.hitch(this,"focusFirstChild");f[d.END]=c.hitch(this,
"focusLastChild");f[this.isLeftToRight()?d.LEFT_ARROW:d.RIGHT_ARROW]=c.hitch(this,"_onLeftArrow");f[this.isLeftToRight()?d.RIGHT_ARROW:d.LEFT_ARROW]=c.hitch(this,"_onRightArrow");f[d.UP_ARROW]=c.hitch(this,"_onUpArrow");f[d.DOWN_ARROW]=c.hitch(this,"_onDownArrow")}var e=this,f="string"==typeof this.childSelector?this.childSelector:c.hitch(this,"childSelector");this.own(b(this.domNode,"keypress",c.hitch(this,"_onContainerKeypress")),b(this.domNode,"keydown",c.hitch(this,"_onContainerKeydown")),b(this.domNode,
"focus",c.hitch(this,"_onContainerFocus")),b(this.containerNode,b.selector(f,"focusin"),function(b){e._onChildFocus(a.getEnclosingWidget(this),b)}))},_onLeftArrow:function(){},_onRightArrow:function(){},_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild()},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},
focusLastChild:function(){this.focusChild(this._getLastFocusableChild())},focusChild:function(a,b){a&&(this.focusedChild&&a!==this.focusedChild&&this._onChildBlur(this.focusedChild),a.set("tabIndex",this.tabIndex),a.focus(b?"end":"start"))},_onContainerFocus:function(a){a.target!==this.domNode||this.focusedChild||this.focus()},_onFocus:function(){g.set(this.domNode,"tabIndex","-1");this.inherited(arguments)},_onBlur:function(a){g.set(this.domNode,"tabIndex",this.tabIndex);this.focusedChild&&(this.focusedChild.set("tabIndex",
"-1"),this.lastFocusedChild=this.focusedChild,this._set("focusedChild",null));this.inherited(arguments)},_onChildFocus:function(a){a&&a!=this.focusedChild&&(this.focusedChild&&!this.focusedChild._destroyed&&this.focusedChild.set("tabIndex","-1"),a.set("tabIndex",this.tabIndex),this.lastFocused=a,this._set("focusedChild",a))},_searchString:"",multiCharSearchDuration:1E3,onKeyboardSearch:function(a,b,f,c){a&&this.focusChild(a)},_keyboardSearchCompare:function(a,b){var f=a.domNode,f=(a.label||(f.focusNode?
f.focusNode.label:"")||f.innerText||f.textContent||"").replace(/^\s+/,"").substr(0,b.length).toLowerCase();return b.length&&f==b?-1:0},_onContainerKeydown:function(a){var b=this._keyNavCodes[a.keyCode];b?(b(a,this.focusedChild),a.stopPropagation(),a.preventDefault(),this._searchString=""):a.keyCode==d.SPACE&&(this._searchTimer&&!a.ctrlKey&&!a.altKey&&!a.metaKey)&&(a.stopImmediatePropagation(),a.preventDefault(),this._keyboardSearch(a," "))},_onContainerKeypress:function(a){a.charCode<=d.SPACE||(a.ctrlKey||
a.altKey||a.metaKey)||(a.preventDefault(),a.stopPropagation(),this._keyboardSearch(a,String.fromCharCode(a.charCode).toLowerCase()))},_keyboardSearch:function(a,b){var f=null,d,e=0;c.hitch(this,function(){this._searchTimer&&this._searchTimer.remove();this._searchString+=b;var a=/^(.)\1*$/.test(this._searchString)?1:this._searchString.length;d=this._searchString.substr(0,a);this._searchTimer=this.defer(function(){this._searchTimer=null;this._searchString=""},this.multiCharSearchDuration);var c=this.focusedChild||
null;if(1==a||!c)if(c=this._getNextFocusableChild(c,1),!c)return;a=c;do{var k=this._keyboardSearchCompare(c,d);k&&0==e++&&(f=c);if(-1==k){e=-1;break}c=this._getNextFocusableChild(c,1)}while(c&&c!=a)})();this.onKeyboardSearch(f,a,d,e)},_onChildBlur:function(){},_getNextFocusableChild:function(a,b){var f=a;do{if(a)a=this._getNext(a,b);else if(a=this[0<b?"_getFirst":"_getLast"](),!a)break;if(null!=a&&a!=f&&a.isFocusable())return a}while(a!=f);return null},_getFirst:function(){return null},_getLast:function(){return null},
_getNext:function(b,f){if(b)for(b=b.domNode;b;)if((b=b[0>f?"previousSibling":"nextSibling"])&&"getAttribute"in b){var c=a.byNode(b);if(c)return c}return null}})})},"dijit/MenuItem":function(){define("dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/kernel dojo/sniff dojo/_base/lang ./_Widget ./_TemplatedMixin ./_Contained ./_CssStateMixin dojo/text!./templates/MenuItem.html".split(" "),function(h,e,g,d,c,b,a,f,k,l,n,p){return h("dijit.MenuItem",[f,k,l,n],{templateString:p,baseClass:"dijitMenuItem",
label:"",_setLabelAttr:function(a){this._set("label",a);var b="",f,c=a;"object"===typeof c&&(c=c.label||c.value);"string"===typeof c&&(f=c.search(/{\S}/),0<=f?(b=c.charAt(f+1),a=c.substr(0,f),c=c.substr(f+3),f=a+b+c,a=a+'\x3cspan class\x3d"dijitMenuItemShortcutKey"\x3e'+b+"\x3c/span\x3e"+c):f=c,this.domNode.setAttribute("aria-label",f+" "+this.accelKey));this.containerNode.innerHTML=a;this._set("shortcutKey",b)},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",
disabled:!1,_fillContent:function(a){a&&!("label"in this.params)&&this._set("label",a.innerHTML)},buildRendering:function(){this.inherited(arguments);g.set(this.containerNode,"id",this.id+"_text");this.accelKeyNode&&g.set(this.accelKeyNode,"id",this.id+"_accel");e.setSelectable(this.domNode,!1)},onClick:function(){},focus:function(){try{8==b("ie")&&this.containerNode.focus(),this.focusNode.focus()}catch(a){}},_setSelected:function(a){d.toggle(this.domNode,"dijitMenuItemSelected",a)},setLabel:function(a){c.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.",
"","2.0");this.set("label",a)},setDisabled:function(a){c.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",a)},_setDisabledAttr:function(a){this.focusNode.setAttribute("aria-disabled",a?"true":"false");this._set("disabled",a)},_setAccelKeyAttr:function(a){this.accelKeyNode&&(this.accelKeyNode.style.display=a?"":"none",this.accelKeyNode.innerHTML=a,g.set(this.containerNode,"colSpan",a?"1":"2"));this._set("accelKey",a)}})})},"dijit/MenuSeparator":function(){define("dojo/_base/declare dojo/dom ./_WidgetBase ./_TemplatedMixin ./_Contained dojo/text!./templates/MenuSeparator.html".split(" "),
function(h,e,g,d,c,b){return h("dijit.MenuSeparator",[g,d,c],{templateString:b,buildRendering:function(){this.inherited(arguments);e.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"MW/rtc/plugins/contextmenu/ContextMenuGenerator":function(){define(["dojo/_base/declare"],function(h){return h(null,{createContextMenu:function(e,g){throw Error("Unimplemented API: createContextMenu");},willOpen:function(){},onOpen:function(){},onClose:function(){}})})},"MW/rtc/plugins/contextmenu/ContextMenuProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider"],function(h,e){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.contextmenu.generator","rtc.contextmenu.model","rtc.scrollpane"]}},createInstance:function(e,d,c){return e.createContextMenu(c,d)||{}},destroyInstance:function(e){e.destroy&&e.destroy()}})})},"MW/rtc/plugins/contextmenu/DocumentContextMenuModelProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/contextmenu/DocumentContextMenuModel"],
function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.actionservice"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/contextmenu/DocumentContextMenuModel":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/contextmenu/ContextMenuModel"],function(h,e,g,d){return h(d,{_GROUP_ORDER:{Autofix:0,ModeInteraction:1,Selections:2,copyPaste:3,Default:4,Sections:5},constructor:function(c){this._groupActionsMap=
{};this._invalidGroupList=[];this._actionService=c;this._createDefaultContextMap(this._actionService);this.own(g.after(this._actionService,"addAction",e.hitch(this,"_addAction"),!0));this.own(g.after(this._actionService,"onActionChange",e.hitch(this,"_handleOnActionChange"),!0));this.own(g.after(this._actionService,"removeAction",e.hitch(this,"_removeAction"),!0))},getGroups:function(){var c=this._getValidGroupActionsMap(),c=Object.keys(c);c.sort(e.hitch(this,function(a,b){return(a in this._GROUP_ORDER?
this._GROUP_ORDER[a]:1E3)-(b in this._GROUP_ORDER?this._GROUP_ORDER[b]:1E3)}));var b=[];c.forEach(function(a){0<this.getActions(a).length&&b.push(a)},this);return b},getActions:function(c){c=this._getValidGroupActionsMap()[c];if(!c||c===[])return[];var b=[];c.forEach(function(a){(a=this._getActionInfo(a))&&b.push(a)},this);return b},_getValidGroupActionsMap:function(){var c=e.clone(this._groupActionsMap);this._invalidGroupList.forEach(function(b){delete c[b]});return c},_addAction:function(c){c.contextMenuGroup&&
(this._groupActionsMap[c.contextMenuGroup]||(this._groupActionsMap[c.contextMenuGroup]=[]),this._groupActionsMap[c.contextMenuGroup].push(c.id))},_removeAction:function(c){for(var b in this._groupActionsMap){var a=this._groupActionsMap[b];if(a){var f=a.indexOf(c);-1<f&&a.splice(f,1);0===a.length?delete this._groupActionsMap[b]:this._groupActionsMap[b]=a}}},_handleOnActionChange:function(c){"contextMenuGroup"===c.key&&(c.oldValue&&this._removeAction(c.id),c.newValue&&this._addAction(this._actionService.getAction(c.id)))},
_createDefaultContextMap:function(c){c.getAllActions().forEach(this._addAction,this)},_getActionInfo:function(c){var b=this._actionService.getAction(c),a=null;if(b){var f=b.text||b.description;if(void 0===f)return a;a={id:c,label:f,shortcut:b.shortcut,callback:e.hitch(this._actionService,"executeAction",c,{}),enabled:b.enabled}}return a},hideGroup:function(c){this._invalidGroupList.push(c)}})})},"MW/rtc/plugins/currentlinehighlight/CurrentLineHighlightPreferenceProvider":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/core/provider/PluginProvider","./CurrentLineHighlightPreference"],function(h,e,g,d){return h(g,{requires:function(){return{isApplicable:[],createInstance:["rtc.currentlinehighlight","rtc.settings.service"]}},createInstance:function(c,b){return new d(c,b)}})})},"MW/rtc/plugins/currentlinehighlight/CurrentLineHighlightPreference":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/Deferred","MW/rtc/abstract/AbstractPlugin"],function(h,e,g,d,c){return h(c,
{_HIGHLIGHT_PREFERENCE:"matlab.editor.displaysettings.HighlightCurrentLine",_HIGHLIGHT_COLOR_PREFERENCE:"matlab.editor.displaysettings.HighlightCurrentLineColor",_IS_HIGHLIGHT_ON_DEFAULT:!1,constructor:function(b,a){this._currentLineHighlight=b;this._rtcSettingService=a;this._colorsetPromise=new d;var f=this._rtcSettingService.get(this._HIGHLIGHT_PREFERENCE,this._IS_HIGHLIGHT_ON_DEFAULT),c=this._rtcSettingService.get(this._HIGHLIGHT_COLOR_PREFERENCE,null);this._onHighlightSettingChanged(f);c&&this._onHighlightColorSettingChanged(c);
this.own(this._rtcSettingService.listenTo(this._HIGHLIGHT_PREFERENCE,this._onHighlightSettingChanged.bind(this)));this.own(this._rtcSettingService.listenTo(this._HIGHLIGHT_COLOR_PREFERENCE,this._onHighlightColorSettingChanged.bind(this)))},_onHighlightSettingChanged:function(b){this._colorsetPromise.then(function(){b!==this._isHighlightOn&&this._currentLineHighlight.controlLineHighlight(b);this._isHighlightOn=b}.bind(this),function(a){})},_onHighlightColorSettingChanged:function(b){this._currentLineHighlight.setHighlightColor(b);
this._highlightColor=b;this._colorsetPromise.resolve()},destroy:function(){this.inherited(arguments);this._colorsetPromise.reject();this._colorsetPromise=null}})})},"MW/rtc/plugins/currentlinehighlight/CurrentLineHighlightProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","./CurrentLineHighlight"],function(h,e,g,d){return h(g,{requires:function(){return{isApplicable:[],createInstance:["rtc.document","rtc.cursorcontroller","rtc.cursor.view","rtc.view.decoration"]}},
createInstance:function(c,b,a,f){return new d(c,b,a,f)}})})},"MW/rtc/plugins/currentlinehighlight/CurrentLineHighlight":function(){define("dojo/_base/declare dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/model/CodeUtilities MW/rtc/model/Range MW/rtc/plugins/currentlinehighlight/CurrentLineHighlightUtilities mw-log/Log".split(" "),function(h,e,g,d,c,b,a){return h(g,{CURRENT_LINE_HIGHLIGHT_CSS:"currentlinehighlight",CURRENT_LINE_LAYER_CSS:"currentLineHighlightLayer",_LINE_HIGHLIGHT_OPACITY:1,_LINE_NODE_CSS:"executionLineHighlightLine",
constructor:function(a,b,c,d){this._document=a;this._cursorController=b;this._cursorView=c;this._decorator=d.createLayerDecorator(this.CURRENT_LINE_LAYER_CSS,this._LINE_NODE_CSS);this._enabled=!1;this._currentHighlightedRanges=[];this._highlightColor=[];this._highlightListenerHandle=null},controlLineHighlight:function(a){a?(this._enabled=!0,this._handleAttachHighlightListener()):(this._enabled=!1,this._handleRemoveHighlightListener())},_handleRemoveHighlightListener:function(){this._highlightListenerHandle&&
(this._highlightListenerHandle.remove(),this._highlightListenerHandle=null);this._clearCurrentHighlight();this._decorator.applyChanges()},_handleAttachHighlightListener:function(){this._highlightListenerHandle||(this._highlightListenerHandle=e.after(this._cursorView,"onUpdate",function(){this._drawHighlightLine()}.bind(this)),this.own(this._highlightListenerHandle));this._drawHighlightLine()},setHighlightColor:function(b){3!==b.length?a.assert(3===b.length,"Color array is invalid, need to be defined as 3-element RGB array"):
this._checkValidRGBValues(b)?(this._highlightColor=b,this._enabled&&(b=this._findCodeLineCursors(),b=this._getCurrentCursorLines(b),this._drawHighlight(b))):a.assert(this._checkValidRGBValues(b),"Color values are invalid, RGB values need to be integers between 0-255")},_checkValidRGBValues:function(a){var b=!0;a.forEach(function(a){var f=Number.isInteger(a);if(!f||!(0<=a&&255>=a))b=!1});return b},_drawHighlightLine:function(){if(this._enabled){var a=this._findCodeLineCursors(),a=this._getCurrentCursorLines(a);
this._checkIfRedrawing(a)&&this._drawHighlight(a)}},_drawHighlight:function(a){this._clearCurrentHighlight();a.forEach(function(a){a=this._getRangeFromLineNumber(a);d.isCodeContainer(a.getStartPosition().getNode())&&(this._highlightRange(a),this._currentHighlightedRanges.push(a))},this);this._decorator.applyChanges()},_findCodeLineCursors:function(){return this._cursorController.getCursors().filter(function(a){return d.isCodeContainer(a.getCursorPosition().getNode())})},_getCurrentCursorLines:function(a){var b=
[];a.forEach(function(a){a=a.getCursorPosition();b.push(a.getLine()-1)});return b},_checkIfRedrawing:function(a){if(a.length!==this._currentHighlightedRanges.length)return!0;var b=this._currentHighlightedRanges.map(function(a){return a.getStartPosition().getLine()-1}),c=b.every(function(b){return-1!==a.indexOf(b)}),d=a.every(function(a){return-1!==b.indexOf(a)},this);return!c||!d},_clearCurrentHighlight:function(){this._currentHighlightedRanges.forEach(function(a){this._decorator.clearRange(a)},this);
this._currentHighlightedRanges=[]},_getRangeFromLineNumber:function(a){var b=this._document.createPositionAtLineColumn(a,0);a=this._document.createPositionAtLineColumn(a,0,!0);return new c(b,a)},_highlightRange:function(f){a.assert(3===this._highlightColor.length,"The color has to be defined properly before drawing");var c={"background-color":b.generateRgbaCssString(this._highlightColor[0],this._highlightColor[1],this._highlightColor[2],this._LINE_HIGHLIGHT_OPACITY)};this._decorator.setStyle(f,c);
this._decorator.addClass(f,[this.CURRENT_LINE_HIGHLIGHT_CSS])},destroy:function(){this.inherited(arguments);this._handleRemoveHighlightListener()}})})},"MW/rtc/plugins/currentlinehighlight/CurrentLineHighlightUtilities":function(){define([],function(){return{generateRgbaCssString:function(h,e,g,d){return 1===d?"rgb("+[h,e,g].join(", ")+")":"rgba("+[h,e,g,d].join(", ")+")"}}})},"MW/rtc/plugins/cursorgripper/CursorGripperProvider":function(){define(["dojo/_base/declare","dojo/has","MW/rtc/core/provider/PluginProvider",
"./CursorGripper"],function(h,e,g,d){return h([g],{requires:function(){return{isApplicable:[],createInstance:["rtc.view","rtc.cursor","rtc.keyhandler","rtc.view.movehiddenkeycapture"]}},isApplicable:function(){return e("ios")},createInstance:function(c,b,a,f){return new d(c,b,a,f)},destroyInstance:function(c){c.destroy()}})})},"MW/rtc/plugins/cursorgripper/CursorGripper":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom dojo/query dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/aspect dojo/on dojo/touch mw-log/Log ./view/CursorGripperView".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p){return h([],{DEFAULT_RTC_LINE_HEIGHT:18,HIDE_GRIPPER_TIMEOUT:5E3,constructor:function(a,b,c,d){this._view=a;this._keyHandler=c;this._cursor=b;this._moveHiddenKeyCapture=d;this._cursorGripperView=new p(a,b);this._cursorMover=this._cursorGripperView.getCursorMover();this._anchorMover=this._cursorGripperView.getAnchorMover();this._listeners=[];this._addMoverListeners(this._cursorMover);this._addMoverListeners(this._anchorMover);this._listeners.push(k(this._view.getDomtarget(),
l.release,e.hitch(this,"_showMovers")));this._listeners.push(f.after(this._keyHandler,"onKeyPress",e.hitch(this,"_hideMovers")));this._listeners.push(f.after(this._cursor,"hide",e.hitch(this,"_hideMovers")));this._listeners.push(f.after(this._cursor,"onChange",e.hitch(this,function(){this._moveHiddenKeyCapture.moveHiddenKeyCaptureToCaret(!0);this._cursor.hasSelection()&&!this._cursor.isHidden()&&this._cursorGripperView.showMovers()})));this._listeners.push(f.after(this._view,"onLayoutChange",e.hitch(this,
function(a){this._cursorGripperView.updateLayerSizes()})));this._hideMovers();this._startListeningForRtcCursorChanges()},destroy:function(){this._listeners.forEach(function(a){a.remove()});this._stopListeningForRtcCursorChanges();this._cursorGripperView.destroy()},_addMoverListeners:function(a){var b=this;this._listeners.push(f.after(a,"onMoveStart",function(){b._stopListeningForRtcCursorChanges();b._cursorGripperView.updateLayerSizes()}));this._listeners.push(f.after(a,"onMoveStop",function(){b._startListeningForRtcCursorChanges();
b._showMovers();document.activeElement!==b._keyHandler.keyCapture&&b._keyHandler.focus()}));this._listeners.push(f.after(a,"onMove",function(){b._updateRtcCursorBasedOnMovers();b._showMovers()}));this._listeners.push(k(a.node,l.press,this._stopEvent))},_stopEvent:function(a){a.stopPropagation();a.preventDefault()},_showMovers:function(){var a=this;this._cursorHiderTimeout&&window.clearTimeout(this._cursorHiderTimeout);this._cursorHiderTimeout=window.setTimeout(function(){a._cursorHiderTimeout=null;
a._cursor.hasSelection()||a._cursorGripperView.hideMovers()},this.HIDE_GRIPPER_TIMEOUT);a._updateMoversBasedOnRtcCursor();a._cursorGripperView.showMovers()},_hideMovers:function(){this._cursorHiderTimeout&&window.clearTimeout(this._cursorHiderTimeout);this._cursorHiderTimeout=null;this._cursorGripperView.hideMovers()},_startListeningForRtcCursorChanges:function(){this._stopListeningForRtcCursorChanges();this._cursorListener=f.after(this._cursor,"onChange",e.hitch(this,"_updateMoversBasedOnRtcCursor"));
this._updateMoversBasedOnRtcCursor()},_stopListeningForRtcCursorChanges:function(){this._cursorListener&&this._cursorListener.remove()},_updateMoversBasedOnRtcCursor:function(){var a,b,f;try{this._cursor.hasSelection()?(f=this._cursor.getCoordinatesOfSelection(),a=f.startCoords,b=f.endCoords,a.x-=this._anchorMover.node.offsetWidth/2,b.x-=this._cursorMover.node.offsetWidth/2):(b=this._cursor.getCursorCoordinates(),b.x-=this._cursorMover.node.offsetWidth/2,a=b),this._anchorMover.node.style.left=a.x+
"px",this._anchorMover.node.style.top=a.y+this._getEffectiveLineHeight(a)+"px",this._cursorMover.node.style.left=b.x+"px",this._cursorMover.node.style.top=b.y+this._getEffectiveLineHeight(b)+"px"}catch(c){}},_updateRtcCursorBasedOnMovers:function(){var a,b;a={x:this._anchorMover.node.offsetLeft,y:this._anchorMover.node.offsetTop};b={x:this._cursorMover.node.offsetLeft,y:this._cursorMover.node.offsetTop};a.x+=this._anchorMover.node.offsetWidth/2;a.y-=this._getEffectiveLineHeight(a)/3;b.x+=this._cursorMover.node.offsetWidth/
2;b.y-=this._getEffectiveLineHeight(b)/3;this._cursor.setSelectionFromCoordinates({startCoords:a,endCoords:b})},_getEffectiveLineHeight:function(a){a=this._view.getPositionFromCoordinate(a);return(a=this._view.getCoordinateForPosition(a))?a.height:this.DEFAULT_RTC_LINE_HEIGHT}})})},"MW/rtc/plugins/cursorgripper/view/CursorGripperView":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/dom-geometry dojo/aspect ./NoAutoscrollingMover ./RtcConstrainedMoveable".split(" "),
function(h,e,g,d,c,b,a,f){return h(null,{STYLES:{LAYER:"cursorGripperLayer",GRIPPER:"cursorGripper"},constructor:function(a,b){this._view=a;this._cursor=b;this._layer=g.create("div",{"class":this.STYLES.LAYER});a.addLayer(this._layer);this._setUpMovers()},destroy:function(){this._cursorMover.destroy();this._anchorMover.destroy()},_setUpMovers:function(){this._cursorDragger=g.create("div",{"class":this.STYLES.GRIPPER},this._layer);this._anchorDragger=g.create("div",{"class":this.STYLES.GRIPPER},this._layer);
var b={mover:a};this._cursorMover=new f(this._cursorDragger,b);this._anchorMover=new f(this._anchorDragger,b)},getCursorMover:function(){return this._cursorMover},getAnchorMover:function(){return this._anchorMover},hideMovers:function(){this._layer.style.visibility="hidden"},showMovers:function(){this._layer.style.visibility="visible"},updateLayerSizes:function(){var a=this._view.getDocumentDimension();c.setMarginBox(this._layer,{h:a.height,w:a.width})}})})},"MW/rtc/plugins/cursorgripper/view/NoAutoscrollingMover":function(){define(["dojo/_base/declare",
"dojo/dnd/Mover"],function(h,e){return h([e],{onMouseMove:function(e){var d=this.marginBox;this.host.onMove(this,{l:d.l+e.pageX,t:d.t+e.pageY},e);e.preventDefault();e.stopPropagation()}})})},"MW/rtc/plugins/cursorgripper/view/RtcConstrainedMoveable":function(){define(["dojo/_base/declare","dojo/dom-geometry","dojo/dom-style","dojo/dnd/move"],function(h,e,g,d){return h(d.constrainedMoveable,{area:"content",constructor:function(c,b){var a=b&&b.area;this.constraints=function(){var b=this.node.parentNode,
c=g.getComputedStyle(b),d=e.getMarginBox(b,c);if("margin"==a)return d;var h=e.getMarginExtents(b,c);d.l+=h.l;d.t+=h.t;d.w-=h.w;d.h-=h.h;if("border"==a)return d;h=e.getBorderExtents(b,c);d.l+=h.l;d.t+=h.t;d.w-=h.w;d.h-=h.h;if("padding"==a)return d;h=e.getPadExtents(b,c);d.l+=h.l;d.t+=h.t;d.w-=h.w;d.h-=h.h;d.l-=this.node.offsetWidth;d.w+=this.node.offsetWidth;return d}}})})},"dojo/dnd/move":function(){define("../_base/declare ../dom-geometry ../dom-style ./common ./Mover ./Moveable".split(" "),function(h,
e,g,d,c,b){d=h("dojo.dnd.move.constrainedMoveable",b,{constraints:function(){},within:!1,constructor:function(a,b){b||(b={});this.constraints=b.constraints;this.within=b.within},onFirstMove:function(a){var b=this.constraintBox=this.constraints.call(this,a);b.r=b.l+b.w;b.b=b.t+b.h;this.within&&(a=e.getMarginSize(a.node),b.r-=a.w,b.b-=a.h)},onMove:function(a,b){var c=this.constraintBox,d=a.node.style;this.onMoving(a,b);b.l=b.l<c.l?c.l:c.r<b.l?c.r:b.l;b.t=b.t<c.t?c.t:c.b<b.t?c.b:b.t;d.left=b.l+"px";
d.top=b.t+"px";this.onMoved(a,b)}});c=h("dojo.dnd.move.boxConstrainedMoveable",d,{box:{},constructor:function(a,b){var c=b&&b.box;this.constraints=function(){return c}}});h=h("dojo.dnd.move.parentConstrainedMoveable",d,{area:"content",constructor:function(a,b){var c=b&&b.area;this.constraints=function(){var a=this.node.parentNode,b=g.getComputedStyle(a),f=e.getMarginBox(a,b);if("margin"==c)return f;var d=e.getMarginExtents(a,b);f.l+=d.l;f.t+=d.t;f.w-=d.w;f.h-=d.h;if("border"==c)return f;d=e.getBorderExtents(a,
b);f.l+=d.l;f.t+=d.t;f.w-=d.w;f.h-=d.h;if("padding"==c)return f;d=e.getPadExtents(a,b);f.l+=d.l;f.t+=d.t;f.w-=d.w;f.h-=d.h;return f}}});return{constrainedMoveable:d,boxConstrainedMoveable:c,parentConstrainedMoveable:h}})},"MW/rtc/plugins/cutcopypaste/CutCopyPasteProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/cutcopypaste/CutCopyPaste"],function(h,e,g,d,c){return h(d,{isApplicable:function(){return!0},requires:function(){return{createInstance:"rtc.cursor rtc.document rtc.actionservice rtc.clipboard rtc.cutcopypaste.converter rtc.keyhandler rtc.cursorcontroller".split(" ")}},
createInstance:function(b,a,f,d,e,g,h){return new c(b,a,f,d,e,g,h)},destroyInstance:function(b){b.dispose()}})})},"MW/rtc/plugins/cutcopypaste/CutCopyPaste":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on dojo/sniff MW/rtc/model/DocumentConstants MW/rtc/plugins/cutcopypaste/CutCopyPasteService MW/rtc/RichTextComponentFeatureEnum dojo/i18n!l10n/nls/actions".split(" "),function(h,e,g,d,c,b,a,f,k){return h(null,{constructor:function(a,b,c,d,h,r,s){this._cursor=a;this._document=
b;this._actionService=c;this._connections=[];this._clipboard=d;this._connections=[];this._converter=h;this._keyHandler=r;this._cursorController=s;"function"===typeof this._clipboard.getCopyPasteHandlers?(a=this._clipboard.getCopyPasteHandlers(),this._keyHandler.enableBrowserCopyPaste(a)):(this._keyHandler.listenTo("copy",this._preventDefault),this._keyHandler.listenTo("cut",this._preventDefault),this._keyHandler.listenTo("paste",this._preventDefault));a=[{id:f.CUT_COPY_PASTE.CUT_ACTION,enabled:!0,
key:"ctrl_x",platformKey:{mac:"meta_x"},contextMenuGroup:"copyPaste",text:k.cutLabel,callback:e.hitch(this,"_cut")},{id:f.CUT_COPY_PASTE.COPY_ACTION,enabled:!0,key:"ctrl_c",platformKey:{mac:"meta_c"},contextMenuGroup:"copyPaste",text:k.copyLabel,callback:e.hitch(this,"_copy")},{id:f.CUT_COPY_PASTE.PASTE_ACTION,enabled:!0,contextMenuGroup:"copyPaste",key:"ctrl_v",platformKey:{mac:"meta_v"},text:k.pasteLabel,callback:e.hitch(this,"_paste")}];this._actionService.loadActions(a);this._connections.push(g.after(this._cursor,
"onChange",e.hitch(this,this._updateActions)));this._connections.push(g.after(this._cursorController,"onUpdate",e.hitch(this,this._updateActions)));this._connections.push(g.after(this._document,"onChange",e.hitch(this,this._updateActionsOnDocumentChange),!0));this._connections.push(g.after(this._clipboard,"onClipboardDataChange",e.hitch(this,this._updateActions)));this._updateActions();this._addOtherKeyBindings()},_preventDefault:function(a){a.preventDefault()},_copy:function(){if(this._actionService.getAction(f.CUT_COPY_PASTE.COPY_ACTION).enabled)return a.copyFromDocument(this._clipboard,
this._converter,this._cursorController),!0},_cut:function(){if(this._actionService.getAction(f.CUT_COPY_PASTE.CUT_ACTION).enabled)return a.cutFromDocument(this._clipboard,this._cursor,this._converter,this._cursorController,this._document),!0},_paste:function(){var a;if(this._actionService.getAction(f.CUT_COPY_PASTE.PASTE_ACTION).enabled)return a=this._converter.getRegisteredMimeTypes(),a=this._clipboard.getClipboardData(a),a.then(e.hitch(this,function(a){var b=function(b){return a[b]};this._cursor.hasSelection()?
this._converter.insertContentInDocumentAtSelection(this._cursor.getSelection(),b):this._converter.insertContentInDocumentAtPosition(this._cursor.position,b)}),function(a){throw Error("[Unsuccessful Paste] "+a);}),!0},_updateActionsOnDocumentChange:function(a){a&&e.isArray(a)&&a.some(function(a){if(a.type===b.READONLY_STATE_CHANGE_EVENT)return this._updateActions(),!0},this)},_updateActions:function(){var a=!this._isClipboardEmpty(),b=!this._document.isReadOnly()&&!this._cursor.isCursorReadOnly(),
c=this._cursorController.hasSelection();this._actionService.updateAction(f.CUT_COPY_PASTE.PASTE_ACTION,{enabled:a&&b});this._actionService.updateAction(f.CUT_COPY_PASTE.CUT_ACTION,{enabled:b&&c});this._actionService.updateAction(f.CUT_COPY_PASTE.COPY_ACTION,{enabled:c})},_isClipboardEmpty:function(){return 0===this._clipboard.getAllFlavors().length},_addOtherKeyBindings:function(){c("mac")||this._keyHandler.addBindings([{key:"shift_delete",action:f.CUT_COPY_PASTE.CUT_ACTION},{key:"ctrl_insert",action:f.CUT_COPY_PASTE.COPY_ACTION},
{key:"shift_insert",action:f.CUT_COPY_PASTE.PASTE_ACTION}])},dispose:function(){this._connections.forEach(function(a){a.remove()})}})})},"MW/rtc/plugins/cutcopypaste/CutCopyPasteService":function(){define(["dojo/_base/lang","dojo/Deferred","mw-log/Log","MW/rtc/plugins/cutcopypaste/MIMETypes"],function(h,e,g,d){return{copyFromDocument:function(c,b,a){if(!a.hasSelection())return!1;b=b.convertToClipboard(a.getSelection());c=c.setClipboardData(b);c.then(function(){},function(){g.assert(!1,"[Unsuccessful Copy] The data could not be copied successfully")});
return c},copyContent:function(c,b){var a=[];a.push({flavor:d.TEXT,content:b.text});a.push({flavor:d.COPY_FOR_COMMAND_WINDOW,content:b.text});b.serializedObject&&a.push({flavor:d.MATLAB_RICHTEXT,content:b.serializedObject});b.html&&a.push({flavor:d.HTML,content:b.html});b.imageList&&a.push({flavor:d.IMAGE_LIST,content:b.imageList});var a=c.setClipboardData(a),f=new e;a.then(h.hitch(this,function(){f.resolve()}),function(){g.assert(!1,"[Unsuccessful Copy] The data could not be copied successfully");
f.reject()});return f},cutFromDocument:function(c,b,a,f,d){if(!this._prepareCursorsForEditing(f,d))return!1;this.copyFromDocument(c,a,f).then(h.hitch(this,function(){f.hasSelection()&&!b.getNode().isReadOnly()&&(!b.anchor.getNode()||!b.anchor.getNode().isReadOnly())&&d.deleteTextAtCurrentPosition()}),function(){g.assert(!1,"[Unsuccessful Cut] Failure in Cut due to unsuccessful copy")})},_prepareCursorsForEditing:function(c,b){var a=!1;c.getCursors().forEach(function(f){a=b.prepareCursorSelectionForEditing(f)||
a});return a}}})},"MW/rtc/plugins/cutcopypaste/ClipboardConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/cutcopypaste/ClipboardConverter"],function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{createInstance:["rtc.cutcopypaste.mimeconverters"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/cutcopypaste/ClipboardConverter":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/has mw-log/Log MW/rtc/model/NodeUtilities MW/rtc/plugins/cutcopypaste/MIMETypes".split(" "),
function(h,e,g,d,c,b,a){return e(null,{constructor:function(a){this._registeredNodeHandlers=[];this._registeredPasteHandlers=[];this._registeredMimeHandlers=[];a.forEach(function(a){this.registerMimeHandler(a.getType(),g.hitch(a,a.convertFromMimeData),a.priority())},this)},registerMimeHandler:function(a,b,d){c.assert(0<=d&&100>=d,"Priority must be in the range 0..100.");this._registeredMimeHandlers.push({handler:b,mimeType:a,priority:d});this._registeredMimeHandlers=this._registeredMimeHandlers.sort(function(a,
b){return b.priority-a.priority})},getRegisteredMimeTypes:function(){var a=[];this._registeredMimeHandlers.forEach(function(b){"Unicode String"!==b.mimeType&&a.push(b.mimeType)});return a},registerNodeConverter:function(a,b){this._registeredNodeHandlers.push({nodeClass:a,handler:b})},registerPasteHandler:function(a,b){this._registeredPasteHandlers.push({nodeClass:a,handler:b})},insertContentInDocumentAtPosition:function(a,c){var d=b.getLineage(a.getNode());return this._doInsert(d,null,a,c)},insertContentInDocumentAtSelection:function(a,
c){var d=b.getCommonAncestors(a.getStartPosition().getNode(),a.getEndPosition().getNode());return this._doInsert(d,a,null,c)},_doInsert:function(a,b,c,d){return this._getPasteHandlersHelper(a).some(function(a){return a.call(null,b,c,d)},this)},_getPasteHandlersHelper:function(a){for(var b=[],c=a.length-1;0<=c;c-=1)for(var d=a[c];d;)b=this._getPasteHandlersForNode(d,b),d=d.parent;return b},_getPasteHandlersForNode:function(a,b){this._registeredPasteHandlers.forEach(function(c){a.isInstanceOf(c.nodeClass)&&
0>b.indexOf(c.handler)&&b.push(c.handler)});return b},convertToClipboard:function(a){Array.isArray(a)||(a=[a]);a=this._getContentMapForSelectionArray(a);return this._convertContentMapToMIMEData(a)},_getContentMapForSelectionArray:function(b){var c={};b.forEach(function(a){var b=this._getContentMapForSelection(a);Object.keys(b).forEach(function(a){c[a]=this._mergeFlavorContent(a,c[a],b[a])},this)},this);1<b.length&&(b={},b[a.TEXT]=b[a.COPY_FOR_COMMAND_WINDOW]=c[a.TEXT],c=b);return c},_getContentMapForSelection:function(a){return b.getCommonAncestors(a.getStartPosition().getNode(),
a.getEndPosition().getNode()).reduce(g.hitch(this,"_collectContentForNode",a),{})},_mergeFlavorContent:function(b,c,d){if(!c)return d;b===a.TEXT&&(c+="\n"+d);return c},_convertContentMapToMIMEData:function(a){return h.map(Object.keys(a),function(b){return{flavor:b,content:a[b]}})},_collectContentForNode:function(a,b,c){return this._getConverterForNode(c).reduce(g.hitch(this,function(b,c){var d=c.call(null,a);return this._mergeMIMEDataIntoMap(d,b)}),b)},_mergeMIMEDataIntoMap:function(a,b){a.forEach(function(a){"undefined"!==
typeof a.content&&!this._isHtmlOnMac(a.flavor)?b[a.flavor]=a.content:delete b[a.flavor]},this);return b},_isHtmlOnMac:function(a){return d("mac")&&-1!==a.indexOf("html")},_getConverterForNode:function(a){var b=[];this._registeredNodeHandlers.forEach(function(c){a.isInstanceOf(c.nodeClass)&&b.push(c.handler)});return b},convertContentFromSource:function(a){var b;this._registeredMimeHandlers.some(function(c){var d=a(c.mimeType);if(d)return b=c.handler(d)});return b}})})},"MW/rtc/plugins/cutcopypaste/DefaultMIMEConverterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/cutcopypaste/DefaultMIMEConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.cutcopypaste.converter","rtc.document"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/plugins/cutcopypaste/DefaultMIMEConverter":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/nodes/inner/RootNode"],function(h,e,g){return h(null,{constructor:function(d,c){this._converter=d;this._document=c;d.registerPasteHandler(g,
e.hitch(this,"_convertAndPaste"))},_convertAndPaste:function(d,c,b){(d=this._converter.convertContentFromSource(b))&&this._document.insertContentAtCurrentPosition(d);return!0}})})},"MW/rtc/plugins/cutcopypaste/mime/PlainTextMimeConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/cutcopypaste/mime/PlainTextMimeConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.cursor"]}},createInstance:function(d){return new g(d)}})})},
"MW/rtc/plugins/cutcopypaste/mime/PlainTextMimeConverter":function(){define(["dojo/_base/declare","MW/rtc/model/DocumentUtilities","MW/rtc/plugins/cutcopypaste/MIMETypes","MW/rtc/plugins/cutcopypaste/mime/MimeConverter"],function(h,e,g,d){return h(d,{constructor:function(c){this._cursor=c},getType:function(){return g.TEXT},convertFromMimeData:function(c){return e.textToContent(c,this._cursor.getNode())},priority:function(){return 10}})})},"MW/rtc/plugins/cutcopypaste/mime/MimeConverter":function(){define(["dojo/_base/declare"],
function(h){return h(null,{getType:function(){throw Error("Unimplemented API: getType");},convertFromMimeData:function(e){throw Error("Unimplemented API: convert");},priority:function(){throw Error("Unimplemented API: priority");}})})},"MW/rtc/plugins/cutcopypaste/mime/PlainTextMimeInCodeConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/cutcopypaste/mime/PlainTextMimeInCodeConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.cursor"]}},
createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/cutcopypaste/mime/PlainTextMimeInCodeConverter":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","MW/rtc/plugins/cutcopypaste/mime/PlainTextMimeConverter"],function(h,e,g){return h(g,{constructor:function(d){this._cursor=d},convertFromMimeData:function(d){var c=this._cursor.selectionInfo();return e.isCodeRange(c.startNode,c.endNode)?this.inherited(arguments):null},priority:function(){return 60}})})},"MW/rtc/plugins/cutcopypaste/mime/CodeExampleMimeInCodeConverterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/cutcopypaste/mime/CodeExampleMimeInCodeConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.cursor","rtc.nodes.contentconverter"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/plugins/cutcopypaste/mime/CodeExampleMimeInCodeConverter":function(){define("dojo/_base/declare MW/rtc/model/CodeUtilities MW/rtc/model/DocumentUtilities MW/rtc/plugins/codeexample/model/CodeExampleBlockNode MW/rtc/plugins/cutcopypaste/MIMETypes MW/rtc/plugins/cutcopypaste/mime/MimeConverter".split(" "),
function(h,e,g,d,c,b){return h(b,{constructor:function(a,b){this._cursor=a;this._contentConverter=b},getType:function(){return c.MATLAB_RICHTEXT},convertFromMimeData:function(a){var b=this._cursor.selectionInfo();if(e.isCodeRange(b.startNode,b.endNode))try{var c=JSON.parse(a);if(1===c.length){var h=this._contentConverter.unpack(c[0]);if(h instanceof d)return g.textToContent(h.getText(),this._cursor.getNode())}}catch(n){}return null},priority:function(){return 100}})})},"MW/rtc/plugins/codeexample/model/CodeExampleBlockNode":function(){define(["dojo/_base/declare",
"MW/rtc/nodes/InnerNode","MW/rtc/plugins/codeexample/CodeExampleEnum"],function(h,e,g){return h(e,{constructor:function(d,c){c=c||{};this.type=c.type||g.MATLAB;this._isFocused=this.wrappable=!1;c.anchorId&&(this.anchorId=c.anchorId)},className:"CodeExampleBlockNode",CHILD_TEXT_SEPARATOR:"\n",_FOCUSED_CSS_CLASS:"BlockActive",containerType:function(){return this.type},getDefaultChild:function(){return{className:"CodeExampleLineNode"}},isEmpty:function(){return 1<this.children.length?!1:this.inherited(arguments)},
isSameTypeAs:function(d){return this.className===d.className&&this.type===d.type},isTextContainerNode:function(){return!0},_serializeAttributes:function(d){d.type=this.type;this.anchorId&&(d.anchorId=this.anchorId)},focus:function(){this._isFocused=!0},blur:function(){this._isFocused=!1},isFocused:function(){return this._isFocused},getFocusedCssClass:function(){return this._FOCUSED_CSS_CLASS},childrenAreContainers:!0})})},"MW/rtc/plugins/codeexample/CodeExampleEnum":function(){define([],function(){return{MATLAB:"codeexample_matlab",
PLAIN:"codeexample_plain"}})},"MW/rtc/plugins/cutcopypaste/mime/CodeMimeInCodeExampleConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/cutcopypaste/mime/CodeMimeInCodeExampleConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.cursor","rtc.nodes.contentconverter"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/plugins/cutcopypaste/mime/CodeMimeInCodeExampleConverter":function(){define("dojo/_base/declare MW/rtc/model/CodeUtilities MW/rtc/model/DocumentUtilities MW/rtc/plugins/codeexample/model/CodeExampleBlockNode MW/rtc/plugins/cutcopypaste/MIMETypes MW/rtc/plugins/cutcopypaste/mime/MimeConverter".split(" "),
function(h,e,g,d,c,b){return h(b,{_LINE_SEPARATOR:"\n",constructor:function(a,b){this._cursor=a;this._contentConverter=b},getType:function(){return c.MATLAB_RICHTEXT},convertFromMimeData:function(a){var b=this._cursor.selectionInfo();if(b.startNode.rootContainer()instanceof d&&b.startNode.rootContainer()===b.endNode.rootContainer())try{var c=[];if(!JSON.parse(a).some(function(a){a=this._contentConverter.unpack(a);c.push(a.getText());return!e.isCodeContainer(a,!0)},this))return g.textToContent(c.join(this._LINE_SEPARATOR),
this._cursor.getNode())}catch(h){}return null},priority:function(){return 100}})})},"MW/rtc/plugins/cutcopypaste/mime/UnicodeStringMimeConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/cutcopypaste/mime/UnicodeStringMimeConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.cursor"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/cutcopypaste/mime/UnicodeStringMimeConverter":function(){define(["dojo/_base/declare",
"MW/rtc/model/DocumentUtilities","MW/rtc/plugins/cutcopypaste/MIMETypes","MW/rtc/plugins/cutcopypaste/mime/PlainTextMimeConverter"],function(h,e,g,d){return h(d,{getType:function(){return g.UNICODE_STRING},priority:function(){return 11}})})},"MW/rtc/plugins/cutcopypaste/mime/PromptlessTextMimeConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/cutcopypaste/mime/PromptlessTextMimeConverter"],
function(h,e,g,d){return h(g,{isApplicable:function(c){return e.isMatlabCodeFileOrBuffer(c)},requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:["rtc.cursor"]}},createInstance:function(c){return new d(c)}})})},"MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities":function(){define(["MW/rtc/datamodel/InMemoryBackingStore","MW/rtc/datamodel/FileBackingStoreUtilities"],function(h,e){return{isMatlabCodeFileOrBuffer:function(g){return g instanceof h||e.isPlainCodeFile(g)}}})},
"MW/rtc/plugins/cutcopypaste/mime/PromptlessTextMimeConverter":function(){define(["dojo/_base/declare","MW/rtc/model/DocumentUtilities","MW/rtc/plugins/cutcopypaste/MIMETypes","MW/rtc/plugins/cutcopypaste/mime/MimeConverter"],function(h,e,g,d){return h(d,{constructor:function(c){this._cursor=c},getType:function(){return g.PROMPTLESS_STRING},convertFromMimeData:function(c){return e.textToContent(c,this._cursor.getNode())},priority:function(){return 90}})})},"MW/rtc/plugins/cutcopypaste/PlainTextMimeGeneratorProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/cutcopypaste/PlainTextMimeGenerator"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.cutcopypaste.converter","rtc.cursor"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/plugins/cutcopypaste/PlainTextMimeGenerator":function(){define("dojo/_base/declare dojo/_base/lang MW/rtc/model/io/PlainTextGeneratorVisitor MW/rtc/model/SelectionTreeWalker MW/rtc/nodes/inner/RootNode MW/rtc/plugins/cutcopypaste/MIMETypes".split(" "),
function(h,e,g,d,c,b){return h(null,{constructor:function(a,b){this._cursor=b;a.registerNodeConverter(c,e.hitch(this,"_convertToText"))},_convertToText:function(a){var f=new g;(new d(f)).traverseSelection(a);a=f.getText();return[{flavor:b.TEXT,content:a},{flavor:b.COPY_FOR_COMMAND_WINDOW,content:a}]}})})},"MW/rtc/model/SelectionTreeWalker":function(){define(["dojo/_base/declare","MW/rtc/model/TreeWalker"],function(h,e){return h(e,{traverseSelection:function(e){this._range=e;this._buildCommonAncestors();
if(e.fileEndSelected()){for(var d=this._commonAncestors[this._commonAncestors.length-1];d&&!d.isRootNode()&&!d.isRootContainer();)this._commonAncestors.pop(),d=this._commonAncestors[this._commonAncestors.length-1];d.isRootNode()||this._commonAncestors.pop()}this._doTreeWalk();e.fileEndSelected()&&(e=this._range.getEndPosition().getNode().rootContainer(),e.childrenAreContainers||(this._visitor.traverseSibling(e),this._enterNode(e),this._leaveNode(e)))}})})},"MW/rtc/plugins/cutcopypaste/HTMLGeneratorProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/cutcopypaste/HTMLGenerator"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.cutcopypaste.converter","rtc.clipboardtempdirpath","rtc.internaldocument"]}},createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/plugins/cutcopypaste/HTMLGenerator":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/nodes/inner/RootNode","MW/rtc/plugins/cutcopypaste/MIMETypes","MW/rtc/plugins/view/exporters/HTMLWriter"],
function(h,e,g,d,c){return h(null,{constructor:function(b,a,f){this._clipboardTempDirPath=a;this._internalDocument=f;b.registerNodeConverter(g,e.hitch(this,"_convertToHTML"))},_convertToHTML:function(b){var a;this._htmlWriter||(this._htmlWriter=new c);a=this._write(b);b=a.htmlStr;a=a.imageList;var f=[];b&&(f.push({flavor:d.HTML,content:b}),a&&a.length&&f.push({flavor:d.IMAGE_LIST,content:a}));return f},_write:function(b){var a={};this._clipboardTempDirPath?(b=this._htmlWriter.writeWithImageList(this._internalDocument,
b,this._clipboardTempDirPath),a.htmlStr=b.html,a.imageList=b.images):a.htmlStr=this._htmlWriter.write(this._internalDocument,b);return a}})})},"MW/rtc/plugins/view/exporters/HTMLWriter":function(){define("dijit/registry dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-style MW/rtc/misc/ImageURIUtilities MW/rtc/plugins/equations/equationcontroller/view/EquationViewUtilities dojo/text!MW/rtc/plugins/view/exporters/sectionrules.css MW/rtc/model/io/MDocumentWriter MW/rtc/plugins/view/exporters/ViewBaseWriter MW/rtc/plugins/view/exporters/HTMLOutputUtils mw-html-utils/HtmlUtils".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p){return g(l,{DOCTYPE:'\x3c!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"\x3e\n',LOCAL_FILE_PREFIX:"file:///",constructor:function(a){this._tagStack=[]},_reset:function(){this._styles={};this._numOfStyles=0;this._hasOutput=!1;this._pageTitle=null;this.inherited(arguments)},writeWithImageList:function(a,b,f,c){this._imageList=[];this._imageFileDir=f;var d;try{d=this.write(a,b,c)}finally{this._imageFileDir=null}return{html:d,images:this._imageList}},_extendSelectionForNonDocumentNodes:function(a,
b){var f=b?a.previousSibling():a.nextSibling();f&&(b?(this._startNode=f.lastChild()?f.lastChild().box:f.box,this._startPosInNode=this._startNode.length):(this._endNode=f.firstChild()?f.firstChild().box:f.box,this._endPosInNode=0))},_write:function(){this._writeBody();return this._writeOpening()+this._writeMain()+this._writeClosing()},_writeMain:function(){var a=this._writeContent();"clipboard"!==this._target&&(a+=this._writeCode());return a.replace(/(\r\n|\n|\r)/gm,"\x3cbr\x3e")},_writeContent:function(){return'\x3cdiv class \x3d "content"\x3e'+
this._body+"\x3c/div\x3e"},_writeCode:function(){var a="",b=k.write(this._internalDocument);b&&(a+="\n\x3c!-- \n##### SOURCE BEGIN #####\n",a+=b.replace(/--/g,"REPLACE_WITH_DASH_DASH"),a+="\n##### SOURCE END #####\n",a+="--\x3e");return a},_writeOpening:function(){return this.DOCTYPE+"\x3chtml\x3e"+this._writeHeader()+"\x3cbody\x3e"},_writeClosing:function(){return"\x3c/body\x3e\x3c/html\x3e"},_writeHeader:function(){var a;a='\x3chead\x3e\x3cmeta http-equiv\x3d"Content-Type" content\x3d"text/html; charset\x3dutf-8"\x3e\x3cmeta name\x3d"generator" content\x3d"MATLAB R2018b"\x3e';
a+='\x3cmeta http-equiv\x3d"X-UA-Compatible" content\x3d"IE\x3dedge,IE\x3d9,chrome\x3d1"\x3e';"clipboard"!==this._target&&(a+="\x3ctitle\x3e",a+=this._pageTitle||"Untitled",a+="\x3c/title\x3e");a+=this._writeStyles();return a+="\x3c/head\x3e"},_writeStyles:function(){var a,b,d,k,g,h;h='\x3cstyle type\x3d"text/css"\x3e\n* {margin: 0; padding: 0;}\n';a=c.getComputedStyle(this._internalDocument.root.box);b=e.filter(this._inheritedStyles,function(){return!0});d="";for(k=k=0;k<b.length;k+=1)d+=b[k]+": "+
a[b[k]]+"; ";h=h+("body {"+d+"}\n")+"h1, h2 {font-weight: normal;}\n";"clipboard"!==this._target&&(h+=".content { padding: 30px; }\n",h+="\n");for(g in this._styles)this._styles.hasOwnProperty(g)&&(h+="."+g+" { "+this._styles[g]+" }\n");h+="\n";h+=f.replace(/\n/g,"").replace(/}/g,"}\n").replace(/.rtePane /g,"");this._hasOutput&&(h+=n.writeOutputStyles());return h+="\x3c/style\x3e"},_getStyleClass:function(a){for(var b=c.getComputedStyle(a),f=c.getComputedStyle(a.parentNode),k=e.filter(this._inheritedStyles,
function(a){return b[a]!==f[a]}),g="",h=0,l,h=0;h<k.length;h+=1)l=b[k[h]],"text-decoration"===k[h]&&(l=-1<l.indexOf("underline")?"underline":"none"),g+=k[h]+": "+l+"; ";if("clipboard"===this._target){b.marginLeft&&(k=parseInt(b.marginLeft,10),0<k&&4!==k?g+="margin-left:"+b.marginLeft+"; ":d.contains(a,"lineNode")&&(g+="margin-left: 1em; "));for(h=1;h<this._nonInheritedStyles.length;h+=1)0<parseInt(b[this._nonInheritedStyles[h]],10)&&(g+=this._nonInheritedStyles[h]+": "+b[this._nonInheritedStyles[h]]+
"; ")}else for(h=0;h<this._nonInheritedStyles.length;h+=1)g+=this._nonInheritedStyles[h]+": "+b[this._nonInheritedStyles[h]]+"; ";var n,p;for(p in this._styles)this._styles[p]===g&&(n=p);n||(n="S"+this._numOfStyles,this._numOfStyles+=1,this._styles[n]=g);return n},_openTag:function(a,b,f){this._body+="\x3c"+a+(f||"")+"\x3e";this._tagStack.unshift({tag:a,node:b})},_startNodeElement:function(a){var f=this._getStyleClass(a),c="";if(d.contains(a,"SectionBlock")||d.contains(a,"CodeBlock")||d.contains(a,
"inlineWrapper"))return this._openTag("div",a," class \x3d '"+a.className+"'"),!1;d.contains(a,"lineNode")&&"clipboard"!==this._target&&(c+=" lineNode",d.contains(a,"sectionStart")&&(c+=" sectionStart"),d.contains(a,"sectionEnd")&&(c+=" sectionEnd"));d.contains(a,"codeexample_matlab")?c+=" preformatted-matlab":d.contains(a,"codeexample_plain")&&(c+=" preformatted-plain");f=' class \x3d "'+f+c+'"';if(d.contains(a,"outputParagraph"))return this._hasOutput=!0,a=n.processOutput(a,this._embeddedOutputsView),
this._saveImagesToDisk()&&(a=b.convertDataURIsInNode(a,this._imageFileDir,this._imageList)),this._body+=a.outerHTML,!0;if(d.contains(a,"heading-1"))this._pageTitle||(this._pageTitle=this._getNodeText(a)),this._openTag("h1",a,f);else if(d.contains(a,"heading-2"))this._openTag("h2",a,f);else{if(d.contains(a,"textBox"))return this._openTag("span",a,f),this._writeTextNode(a),!0;if(d.contains(a,"equationNode"))return this._body+=this._writeEquationNode(a),!0;if(d.contains(a,"liveControlOuterNode"))return this._body+=
this._writeLiveControlNode(a),!0;if("div"===a.localName)this._openTag("div",a,f);else if("a"===a.localName)this._openTag("a",a,' href \x3d "'+this._normalizeUrl(p.escapeHtml(a.href))+'"');else if("img"===a.localName)if(f=this._processDataURI(a.src))this._openTag("img",a,' src\x3d"'+f+'" width\x3d"'+a.clientWidth+'" height\x3d"'+a.clientHeight+'"');else return this._body+=a.outerHTML,!0;else this._openTag(a.localName,a,f)}return!1},_endNodeElement:function(a){this._tagStack.length&&this._tagStack[0].node===
a&&(this._body+="\x3c/"+this._tagStack[0].tag+"\x3e",this._tagStack.shift())},_writeChildNodeForTextNode:function(a,b){var f=this._getAttributes(b);a=a.replace(/\&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;");this._body+="\x3cspan"+f+"\x3e"+a+"\x3c/span\x3e"},_getAttributes:function(a){var b=this._getStyleClass(a);a=a.parentElement&&a.parentElement.rteNode?a.parentElement.rteNode.textContainer():null;var f="";a&&a.anchorId&&(f=' id\x3d"'+a.anchorId+'" ');return' class\x3d"'+b+'"'+
f},_writeEquationNode:function(b){b=a.exportDomnodeToImageURL(b,2);if(b.simpleEquation)return a.simpleEquationToHTML(b.simpleEquation);var f=this._processDataURI(b.dataURL);f||(f=b.dataURL);b='\x3cspan style\x3d"vertical-align:'+Math.round(b.verticalAlign)+'px"\x3e\x3cimg src\x3d"'+f+'" width\x3d"'+b.width/2+'" height\x3d"'+b.height/2+'" /\x3e';return b+"\x3c/span\x3e"},_writeLiveControlNode:function(a){return a.getElementsByClassName("liveControlTextView")[0].innerHTML},_saveImagesToDisk:function(){return this._imageFileDir&&
this._imageList},_processDataURI:function(a){if(this._saveImagesToDisk())return b.pushImageAndGetPathFromURI(a,this._imageFileDir,this._imageList)},_normalizeUrl:function(a){0===a.indexOf("internal:")&&(a=a.replace("internal:","#"));return a.replace(/"/g,"\x26quot;")}})})},"MW/rtc/misc/ImageURIUtilities":function(){define(["dojo/query","dojo/has","mw-log/Log"],function(h,e,g){return{_IMAGEFILE_PREFIX:"image",splitImageDataURI:function(d){if((d=/data:image\/(\w+);base64,(.*)/.exec(d))&&3===d.length)return{format:d[1],
data:d[2]}},pushImageAndGetPathFromURI:function(d,c,b){if(d=this.splitImageDataURI(d))return c=c+"/"+this._IMAGEFILE_PREFIX+Date.now()+b.length+"."+d.format,b.push({path:c,data:d.data}),"file:///"+c},convertDataURIsInNode:function(d,c,b){var a=d,f=h("img",d);0<f.length&&(a=d.cloneNode(!0),f=h("img",a),f.forEach(function(a){var f=this.pushImageAndGetPathFromURI(a.src,c,b);f&&a.setAttribute("src",f)},this));return a},getHexBinaryFromURI:function(d){if(e("ie"))return g.assert("getHexBinaryFromURI should not be used on IE"),
"";var c="";d=this.splitImageDataURI(d);if(!d)return"";for(var b=atob(d.data.replace(/[ \r\n]+$/,"")),a=0,f="",a=0;a<b.length;a+=1)f=b.charCodeAt(a).toString(16),1===f.length&&(f="0"+f),c+=f;return{format:d.format,hexData:c}}}})},"MW/rtc/plugins/equations/equationcontroller/view/EquationViewUtilities":function(){define("dojo/Deferred dojo/dom-class dojo/dom-construct dojo/dom-style dojo/query mw-html-utils/HtmlUtils MW/equations/EquationRenderer".split(" "),function(h,e,g,d,c,b,a){function f(b,f,
d){if(!b)return null;var g;e.contains(b,"MathEquation")?g=b:(b=c(".MathEquation",b),0<b.length&&(g=b[0]));if(g)return a.exportDomnodeToImageURL(g,f,"gif",d)}return{exportDomnodeToImageURLPromise:function(b,c,d){return a.renderedEquationPromise(b).then(function(a){return f(a,c,d)})},exportDomnodeToImageURL:f,simpleEquationToHTML:function(a){var b=d.getComputedStyle(a);return g.create("span",{style:{fontFamily:b.fontFamily,fontStyle:b.fontStyle,fontWeight:b.fontWeight},textContent:a.textContent}).outerHTML}}})},
"MW/equations/EquationRenderer":function(){define(["dojo/Deferred","./renderer/utils/EquationExportUtilities","./renderer/view/FontsLoaded","./renderer/Renderer"],function(h,e,g,d){var c,b;return{renderMathML:function(a,b){c||(c=new d({equationFormat:"mathml",cacheFontMetrics:!1}));return c.render(a,b)},renderTeX:function(a,f){b||(b=new d({equationFormat:"tex",cacheFontMetrics:!1}));return b.render(a,f)},renderSimpleTeX:function(a,f){b||(b=new d({equationFormat:"simpletex",cacheFontMetrics:!1}));
return b.render(a,f)},loadFonts:function(){g.then()},waitForEquations:function(){var a=new h;g.loading()?g.then(function(){setTimeout(function(){a.resolve(!0)},0)}):a.resolve(!0);return a},renderedEquationPromise:function(a){if(a.renderedEquationPromise)return a.renderedEquationPromise;var b=new h;b.resolve(a.firstElementChild);return b},exportDomnodeToCanvas:e.exportDomnodeToCanvas,exportDomnodeToImageURL:e.exportDomnodeToImageURL}})},"MW/equations/renderer/utils/EquationExportUtilities":function(){define("dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style MW/equations/renderer/view/exporters/CanvasRenderer".split(" "),
function(h,e,g,d,c,b){function a(a,b){return{dataURL:a.toDataURL(b),width:a.width,height:a.height,verticalAlign:parseFloat(e.get(a,"data-eqn-vertical-align"))}}function f(a,f,e){l(a);var g=a,s=null;0===a.clientHeight&&(s=c.getComputedStyle(a),s=k({fontSize:s.fontSize,fontStyle:s.fontStyle,fontWeight:s.fontWeight,fontFamily:s.fontFamily,fontVariant:s.fontVariant,color:s.color}),g=h.clone(a),g["data-eqn-height"]=a["data-eqn-height"],g["data-eqn-vertical-align"]=a["data-eqn-vertical-align"],d.place(g,
s));n||(n=new b);a=n.renderToCanvas(g,f,e);s&&d.destroy(s);return a}function k(a){a={style:h.mixin({display:"inline-block",position:"absolute",right:"-10000px",bottom:"-10000px",fontSize:"14px",whiteSpace:"pre-wrap"},a)};return d.create("span",a,document.body)}function l(a){if(!a||!g.contains(a,"MathEquation"))throw Error("MathEquation expected!");}var n=null;return{getImageObject:a,createOffScreenSpan:k,exportDomnodeToCanvas:f,exportDomnodeToImageURL:function(b,c,e,k){l(b);c=f(b,c,k);e=a(c,e);var h,
n,u;b&&1===b.children.length&&(h=b.children[0]);h&&1===h.children.length&&(n=h.children[0]);n&&1===n.children.length&&(u=n.children[0]);b=u&&g.contains(u,"MathTextBox")?u:void 0;b&&(e.simpleEquation=b);d.destroy(c);return e}}})},"MW/equations/renderer/view/exporters/CanvasRenderer":function(){define("dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has MW/equations/renderer/model/MathConstants ./CanvasRendererUtilities".split(" "),function(h,
e,g,d,c,b,a,f,k){return h(null,{constructor:function(){this._eqRectStack=[]},renderToCanvas:function(a,f,k){f=f||1;k=k||Infinity;var h=c.position(a,!0),q=Math.round(f*h.h),q=Math.min(q,4096),h=Math.round(f*h.w),h=Math.min(h,32767,k);k=d.create("canvas",{width:h,height:q});q=k.getContext("2d");this.renderToContext(a,f,q);a=a["data-eqn-vertical-align"]||0;g.add(k,"MathEquationCanvas");e.set(k,"data-eqn-vertical-align",a);b.set(k,{verticalAlign:a});return k},renderToContext:function(a,b,f){b=b||1;this._eqRect=
c.position(a,!0);this.ctx=f;this.ctx.imageSmoothingEnabled=!1;this.ctx.scale(b,b);this.ctx.textBaseline="top";this._renderElement(a);this.ctx=[]},_saveContext:function(){var a=this._eqRect;this._eqRectStack.push({x:a.x,h:a.h,y:a.y,w:a.w});this.ctx.save()},_restoreContext:function(){this._eqRect=this._eqRectStack.pop();this.ctx.restore()},_renderElement:function(a){var f,c,d,e=b.getComputedStyle(a);this._saveContext();if(f=parseFloat(e.borderTopWidth))this._eqRect.y-=f;var k=this._positionInEquation(a,
e);this._applyElementStyleToCanvas(e,k);f=a.childNodes;for(c=0;c<f.length;c+=1)switch(d=f[c],d.nodeType){case a.ELEMENT_NODE:this._renderElement(d);break;case a.TEXT_NODE:if("hidden"===e.visibility)break;this._renderText(d,k.x,k.y)}this._restoreContext()},_renderText:function(a,b,f){this.ctx.fillText(a.textContent,b,f)},_drawBorderLine:function(a,b,c,d,e){var k=this.ctx;if(d===f.SOLID_LINE||d===f.DASHED_LINE&&0<e)k.save(),k.beginPath(),k.moveTo(a.x,a.y),k.lineTo(b.x,b.y),d===f.DASHED_LINE&&k.setLineDash([2*
e]),k.strokeStyle=c,k.lineWidth=e,k.stroke(),k.restore()},_drawBorders:function(a,b){this._drawBorderLine({x:a.x,y:a.y+a.h},{x:a.x+a.w,y:a.y+a.h},b.borderBottomColor,b.borderBottomStyle,parseFloat(b.borderBottomWidth));this._drawBorderLine({x:a.x,y:a.y},{x:a.x,y:a.y+a.h},b.borderLeftColor,b.borderLeftStyle,parseFloat(b.borderLeftWidth));this._drawBorderLine({x:a.x,y:a.y},{x:a.x+a.w,y:a.y},b.borderTopColor,b.borderTopStyle,parseFloat(b.borderTopWidth));this._drawBorderLine({x:a.x+a.w,y:a.y},{x:a.x+
a.w,y:a.y+a.h},b.borderRightColor,b.borderRightStyle,parseFloat(b.borderRightWidth))},_isSymbol:function(a){return g.contains(a,"MathTextBox")?-1!==a.className.indexOf("extra")||-1!==a.className.indexOf("symbol")||-1!==a.className.indexOf("stixsize")||-1!==a.className.indexOf("stixvariants")||-1!==a.className.indexOf("accent"):!1},_positionInEquation:function(f,d){var e,h,q,r;q=f;r=0;d=d||b.getComputedStyle(f);e=d.paddingLeft||"0px";h=f.innerHTML;this._isSymbol(f)&&(f.innerHTML="\x3cspan\x3e"+f.innerHTML+
"\x3c/span\x3e",q=f.firstElementChild);q=c.position(q,!0);a("ff")&&g.contains(f,"MathTextBox")&&(r=k.getFFGlyphShift(f,q,d));r={x:q.x-this._eqRect.x,h:q.h,y:q.y-this._eqRect.y+r,w:q.w};h!==f.innerHTML?f.innerHTML=h:r.x+=parseFloat(e);return r},_applyElementStyleToCanvas:function(a,b){this.ctx.fillStyle=a.color;this.ctx.font=a.fontStyle+" "+a.fontVariant+" "+a.fontWeight+" "+a.fontSize+" "+a.fontFamily;"visible"===a.visibility&&this._drawBorders(b,a);return b}})})},"MW/equations/renderer/model/MathConstants":function(){define([],
function(){return{SOLID_LINE:"solid",DASHED_LINE:"dashed",NO_LINE:"none"}})},"MW/equations/renderer/view/exporters/CanvasRendererUtilities":function(){define(["dojo/has"],function(h){return{getFFGlyphShift:function(e,g,d){var c=0;d=parseFloat(d.fontSize);c=g.h-d;-1!==e.className.search(/\bextra[1-5]?\b/)?c=e.classList.contains("extra2")?h("mac")||h("win")&&52<=h("ff")?0.4*c:0.75*c:h("win")&&52<=h("ff")?0.28*c:c*(h("mac")?0.3:0.02):-1!==e.className.search(/\bstixsize[0-5]\b/)?(e.classList.contains("stixsize0")&&
(c*=h("linux")?0.78:0.82),c=e.classList.contains("stixsize5")?c*(h("mac"),0.6):h("win")&&52<=h("ff")?0.85*c:c*(h("mac")?0.87:0.91)):c*=0.68;return c}}})},"MW/equations/renderer/view/FontsLoaded":function(){define("./webfonts/webfontloader dojo/aspect dojo/Deferred dojo/dom-class dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/domReady!".split(" "),function(h,e,g,d,c,b,a){function f(){function f(){var a=1;b.set(e,{fontSize:"2px",lineHeight:"normal"});e.innerHTML="M";a=parseFloat(b.getComputedStyle(e)["font-size"]);
b.set(e,{fontSize:"",lineHeight:""});c.destroy(d);return a}if(!k){k=!0;var d=c.create("span",{id:"MathEquationFontLoaderScratch","class":"MathEquation",style:{position:"absolute",right:"-1000px",top:"-1000px",whiteSpace:"pre-wrap"}},document.body),e=c.create("span",{id:"FontLoaderSpan"},d),g={};g.minFontSize=f();var r=this.webfontConfig||{};a.mixin(r,{timeout:1E4});h.load({active:function(){l.resolve(g)},fontinactive:function(a,b){l.reject(a+b)},classes:!1,timeout:r.timeout,custom:{families:"STIXGeneral-webfont:n4,i4,n7,i7 STIXSizeOneSym-webfont STIXSizeTwoSym-webfont STIXSizeThreeSym-webfont STIXSizeFourSym-webfont STIXSizeFiveSym-webfont STIXNonUnicode-webfont STIXVariants-webfont mwmathextregular mwmathext1regular mwmathext2regular mwmathext3regular mwmathext4regular mwmathext5regular".split(" "),
testStrings:{"STIXGeneral-webfont:n4,i4,n7,i7":"ABCXYZuvxyz","STIXSizeOneSym-webfont":"()[]{\u23df","STIXSizeTwoSym-webfont":"()[]{\u23df","STIXSizeThreeSym-webfont":"()[]{\u23df","STIXSizeFourSym-webfont":"()[]{\u23df","STIXSizeFiveSym-webfont":"\u23de\u23df","STIXNonUnicode-webfont":"\ue13b\ue13c\ue13c\ue13d\ue140\ue141","STIXVariants-webfont":"\u2032\u2190\u2192",mwmathextregular:"\uf07f\uf03c\uf049\uf050\uf051\uf05a",mwmathext1regular:"()[]G\uf062",mwmathext2regular:"()[]GG",mwmathext3regular:"()[]GG",
mwmathext4regular:"()[]GG",mwmathext5regular:"()[]GG"}}})}}var k=!1,l=new g;l.loading=function(){return k};l.then(function(){},function(){});e.before(l,"then",f);e.before(l,"isResolved",f);e.before(l,"isRejected",f);e.before(l,"isFulfilled",f);return l})},"MW/equations/renderer/view/webfonts/webfontloader":function(){(function(){function h(a,b,f){return a.call.apply(a.bind,arguments)}function e(a,b,f){if(!a)throw Error();if(2<arguments.length){var c=Array.prototype.slice.call(arguments,2);return function(){var f=
Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(f,c);return a.apply(b,f)}}return function(){return a.apply(b,arguments)}}function g(a,b,f){g=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?h:e;return g.apply(null,arguments)}function d(a,b){this.a=a;this.m=b||a;this.c=this.m.document}function c(a,b,f,c){b=a.c.createElement(b);if(f)for(var d in f)f.hasOwnProperty(d)&&("style"==d?b.style.cssText=f[d]:b.setAttribute(d,f[d]));c&&b.appendChild(a.c.createTextNode(c));
return b}function b(a,b,f){(a=a.c.getElementsByTagName(b)[0])||(a=document.documentElement);a.insertBefore(f,a.lastChild)}function a(a){a.parentNode&&a.parentNode.removeChild(a)}function f(a,b,f){b=b||[];f=f||[];for(var c=a.className.split(/\s+/),d=0;d<b.length;d+=1){for(var e=!1,k=0;k<c.length;k+=1)if(b[d]===c[k]){e=!0;break}e||c.push(b[d])}b=[];for(d=0;d<c.length;d+=1){e=!1;for(k=0;k<f.length;k+=1)if(c[d]===f[k]){e=!0;break}e||b.push(c[d])}a.className=b.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,
"")}function k(a,b){for(var f=a.className.split(/\s+/),c=0,d=f.length;c<d;c++)if(f[c]==b)return!0;return!1}function l(a){if("string"===typeof a.f)return a.f;var b=a.m.location.protocol;"about:"==b&&(b=a.a.location.protocol);return"https:"==b?"https:":"http:"}function n(a,f,d){function e(){l&&k&&g&&(l(h),l=null)}f=c(a,"link",{rel:"stylesheet",href:f,media:"all"});var k=!1,g=!0,h=null,l=d||null;y?(f.onload=function(){k=!0;e()},f.onerror=function(){k=!0;h=Error("Stylesheet failed to load");e()}):setTimeout(function(){k=
!0;e()},0);b(a,"head",f)}function p(a,b,f,d){var e=a.c.getElementsByTagName("head")[0];if(e){var k=c(a,"script",{src:b}),g=!1;k.onload=k.onreadystatechange=function(){g||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(g=!0,f&&f(null),k.onload=k.onreadystatechange=null,"HEAD"==k.parentNode.tagName&&e.removeChild(k))};e.appendChild(k);setTimeout(function(){g||(g=!0,f&&f(Error("Script load timeout")))},d||5E3);return k}return null}function m(){this.a=0;this.c=null}function q(a){a.a++;
return function(){a.a--;s(a)}}function r(a,b){a.c=b;s(a)}function s(a){0==a.a&&a.c&&(a.c(),a.c=null)}function t(a){this.a=a||"-"}function u(a,b){this.c=a;this.f=4;this.a="n";var f=(b||"n4").match(/^([nio])([1-9])$/i);f&&(this.a=f[1],this.f=parseInt(f[2],10))}function v(a){var b=[];a=a.split(/,\s*/);for(var f=0;f<a.length;f++){var c=a[f].replace(/['"]/g,"");-1!=c.indexOf(" ")||/^\d/.test(c)?b.push("'"+c+"'"):b.push(c)}return b.join(",")}function w(a){return a.a+a.f}function x(a){var b="normal";"o"===
a.a?b="oblique":"i"===a.a&&(b="italic");return b}function A(a){var b=4,f="n",c=null;a&&((c=a.match(/(normal|oblique|italic)/i))&&c[1]&&(f=c[1].substr(0,1).toLowerCase()),(c=a.match(/([1-9]00|normal|bold)/i))&&c[1]&&(/bold/i.test(c[1])?b=7:/[1-9]00/.test(c[1])&&(b=parseInt(c[1].substr(0,1),10))));return f+b}function B(a,b){this.c=a;this.f=a.m.document.documentElement;this.h=b;this.a=new t("-");this.j=!1!==b.events;this.g=!1!==b.classes}function F(a){a.g&&f(a.f,[a.a.c("wf","loading")]);H(a,"loading")}
function G(a){if(a.g){var b=k(a.f,a.a.c("wf","active")),c=[],d=[a.a.c("wf","loading")];b||c.push(a.a.c("wf","inactive"));f(a.f,c,d)}H(a,"inactive")}function H(a,b,f){if(a.j&&a.h[b])if(f)a.h[b](f.c,w(f));else a.h[b]()}function I(){this.c={}}function K(a,b,f){var c=[],d;for(d in b)if(b.hasOwnProperty(d)){var e=a.c[d];e&&c.push(e(b[d],f))}return c}function C(a,b){this.c=a;this.f=b;this.a=c(this.c,"span",{"aria-hidden":"true"},this.f)}function M(a){b(a.c,"body",a.a)}function Q(a){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+
v(a.c)+";"+("font-style:"+x(a)+";font-weight:"+(a.f+"00")+";")}function L(a,b,f,c,d,e){this.g=a;this.j=b;this.a=c;this.c=f;this.f=d||3E3;this.h=e||void 0}function N(a,b,f,c,d,e,k){this.v=a;this.B=b;this.c=f;this.a=c;this.s=k||"BESbswy";this.f={};this.w=d||3E3;this.u=e||null;this.o=this.j=this.h=this.g=null;this.g=new C(this.c,this.s);this.h=new C(this.c,this.s);this.j=new C(this.c,this.s);this.o=new C(this.c,this.s);a=new u(this.a.c+",serif",w(this.a));a=Q(a);this.g.a.style.cssText=a;a=new u(this.a.c+
",sans-serif",w(this.a));a=Q(a);this.h.a.style.cssText=a;a=new u("serif",w(this.a));a=Q(a);this.j.a.style.cssText=a;a=new u("sans-serif",w(this.a));a=Q(a);this.o.a.style.cssText=a;M(this.g);M(this.h);M(this.j);M(this.o)}function J(){if(null===Ca){var a=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(ja.navigator.userAgent);Ca=!!a&&(536>parseInt(a[1],10)||536===parseInt(a[1],10)&&11>=parseInt(a[2],10))}return Ca}function O(a,b,f){for(var c in ra)if(ra.hasOwnProperty(c)&&b===a.f[ra[c]]&&f===a.f[ra[c]])return!0;
return!1}function T(a){var b=a.g.a.offsetWidth,f=a.h.a.offsetWidth,c;(c=b===a.f.serif&&f===a.f["sans-serif"])||(c=J()&&O(a,b,f));c?pa()-a.A>=a.w?J()&&O(a,b,f)&&(null===a.u||a.u.hasOwnProperty(a.a.c))?S(a,a.v):S(a,a.B):W(a):S(a,a.v)}function W(a){setTimeout(g(function(){T(this)},a),50)}function S(b,f){setTimeout(g(function(){a(this.g.a);a(this.h.a);a(this.j.a);a(this.o.a);f(this.a)},b),0)}function R(a,b,f){this.c=a;this.a=b;this.f=0;this.o=this.j=!1;this.s=f}function ea(a){0==--a.f&&a.j&&(a.o?(a=a.a,
a.g&&f(a.f,[a.a.c("wf","active")],[a.a.c("wf","loading"),a.a.c("wf","inactive")]),H(a,"active")):G(a.a))}function Y(a){this.j=a;this.a=new I;this.h=0;this.f=this.g=!0}function $(a,b,c,d,e){var k=0==--a.h;(a.f||a.g)&&setTimeout(function(){var a=e||null,h=d||{};if(0===c.length&&k)G(b.a);else{b.f+=c.length;k&&(b.j=k);var l,n=[];for(l=0;l<c.length;l++){var m=c[l],p=h[m.c],q=b.a,r=m;q.g&&f(q.f,[q.a.c("wf",r.c,w(r).toString(),"loading")]);H(q,"fontloading",r);q=null;null===va&&(va=ja.FontFace?(r=/Gecko.*Firefox\/(\d+)/.exec(ja.navigator.userAgent))?
42<parseInt(r[1],10):!0:!1);va?q=new L(g(b.g,b),g(b.h,b),b.c,m,b.s,p):q=new N(g(b.g,b),g(b.h,b),b.c,m,b.s,a,p);n.push(q)}for(l=0;l<n.length;l++)n[l].start()}},0)}function da(a,b,f){var c=[],d=f.timeout;F(b);var c=K(a.a,f,a.c),e=new R(a.c,b,d);a.h=c.length;b=0;for(f=c.length;b<f;b++)c[b].load(function(b,f,c){$(a,e,b,f,c)})}function ga(a,b){this.c=a;this.a=b}function V(a,b,f){var c=l(a.c);a=(a.a.api||"fast.fonts.net/jsapi").replace(/^.*http(s?):(\/\/)?/,"");return c+"//"+a+"/"+b+".js"+(f?"?v\x3d"+f:
"")}function aa(a,b){this.c=a;this.a=b}function oa(a,b,f){a?this.c=a:this.c=b+Pa;this.a=[];this.f=[];this.g=f||""}function fa(a,b){for(var f=b.length,c=0;c<f;c++){var d=b[c].split(":");3==d.length&&a.f.push(d.pop());var e="";2==d.length&&""!=d[1]&&(e=":");a.a.push(d.join(e))}}function z(a){if(0==a.a.length)throw Error("No fonts to load!");if(-1!=a.c.indexOf("kit\x3d"))return a.c;for(var b=a.a.length,f=[],c=0;c<b;c++)f.push(a.a[c].replace(/ /g,"+"));b=a.c+"?family\x3d"+f.join("%7C");0<a.f.length&&
(b+="\x26subset\x3d"+a.f.join(","));0<a.g.length&&(b+="\x26text\x3d"+encodeURIComponent(a.g));return b}function X(a){this.f=a;this.a=[];this.c={}}function D(a){for(var b=a.f.length,f=0;f<b;f++){var c=a.f[f].split(":"),d=c[0].replace(/\+/g," "),e=["n4"];if(2<=c.length){var k,g=c[1];k=[];if(g)for(var g=g.split(","),h=g.length,l=0;l<h;l++){var n;n=g[l];if(n.match(/^[\w-]+$/)){var m=Va.exec(n.toLowerCase());if(null==m)n="";else{n=m[2];n=null==n||""==n?"n":wa[n];m=m[1];if(null==m||""==m)m="4";else var p=
Ua[m],m=p?p:isNaN(m)?"4":m.substr(0,1);n=[n,m].join("")}}else n="";n&&k.push(n)}0<k.length&&(e=k);3==c.length&&(c=c[2],k=[],c=c?c.split(","):k,0<c.length&&(c=sa[c[0]])&&(a.c[d]=c))}a.c[d]||(c=sa[d])&&(a.c[d]=c);for(c=0;c<e.length;c+=1)a.a.push(new u(d,e[c]))}}function ba(a,b){this.c=a;this.a=b}function la(a,b){this.c=a;this.a=b}function U(a,b){this.c=a;this.f=b;this.a=[]}var ja=this,pa=Date.now||function(){return+new Date},y=!!ja.FontFace;t.prototype.c=function(a){for(var b=[],f=0;f<arguments.length;f++)b.push(arguments[f].replace(/[\W_]+/g,
"").toLowerCase());return b.join(this.a)};L.prototype.start=function(){var a=this.c.m.document,b=this,f=pa(),c=new Promise(function(c,d){function e(){pa()-f>=b.f?d():a.fonts.load(x(b.a)+" "+(b.a.f+"00")+" 300px "+v(b.a.c),b.h).then(function(a){1<=a.length?c():setTimeout(e,25)},function(){d()})}e()}),d=new Promise(function(a,f){setTimeout(f,b.f)});Promise.race([d,c]).then(function(){b.g(b.a)},function(){b.j(b.a)})};var ra={D:"serif",C:"sans-serif"},Ca=null;N.prototype.start=function(){this.f.serif=
this.j.a.offsetWidth;this.f["sans-serif"]=this.o.a.offsetWidth;this.A=pa();T(this)};var va=null;R.prototype.g=function(a){var b=this.a;b.g&&f(b.f,[b.a.c("wf",a.c,w(a).toString(),"active")],[b.a.c("wf",a.c,w(a).toString(),"loading"),b.a.c("wf",a.c,w(a).toString(),"inactive")]);H(b,"fontactive",a);this.o=!0;ea(this)};R.prototype.h=function(a){var b=this.a;if(b.g){var c=k(b.f,b.a.c("wf",a.c,w(a).toString(),"active")),d=[],e=[b.a.c("wf",a.c,w(a).toString(),"loading")];c||d.push(b.a.c("wf",a.c,w(a).toString(),
"inactive"));f(b.f,d,e)}H(b,"fontinactive",a);ea(this)};Y.prototype.load=function(a){this.c=new d(this.j,a.context||this.j);this.g=!1!==a.events;this.f=!1!==a.classes;da(this,new B(this.c,a),a)};ga.prototype.load=function(a){function b(){if(e["__mti_fntLst"+c]){var f=e["__mti_fntLst"+c](),d=[],k;if(f)for(var g=0;g<f.length;g++){var h=f[g].fontfamily;void 0!=f[g].fontStyle&&void 0!=f[g].fontWeight?(k=f[g].fontStyle+f[g].fontWeight,d.push(new u(h,k))):d.push(new u(h))}a(d)}else setTimeout(function(){b()},
50)}var f=this,c=f.a.projectId,d=f.a.version;if(c){var e=f.c.m;p(this.c,V(f,c,d),function(d){d?a([]):(e["__MonotypeConfiguration__"+c]=function(){return f.a},b())}).id="__MonotypeAPIScript__"+c}else a([])};aa.prototype.load=function(a){var b,f,c=this.a.urls||[],d=this.a.families||[],e=this.a.testStrings||{},k=new m;b=0;for(f=c.length;b<f;b++)n(this.c,c[b],q(k));var g=[];b=0;for(f=d.length;b<f;b++)if(c=d[b].split(":"),c[1])for(var h=c[1].split(","),l=0;l<h.length;l+=1)g.push(new u(c[0],h[l]));else g.push(new u(c[0]));
r(k,function(){a(g,e)})};var Pa="//fonts.googleapis.com/css",sa={latin:"BESbswy","latin-ext":"\u00e7\u00f6\u00fc\u011f\u015f",cyrillic:"\u0439\u044f\u0416",greek:"\u03b1\u03b2\u03a3",khmer:"\u1780\u1781\u1782",Hanuman:"\u1780\u1781\u1782"},Ua={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",
l:"3",r:"4",b:"7"},wa={i:"i",italic:"i",n:"n",normal:"n"},Va=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/,Qa={Arimo:!0,Cousine:!0,Tinos:!0};ba.prototype.load=function(a){var b=new m,f=this.c,c=new oa(this.a.api,l(f),this.a.text),d=this.a.families;fa(c,d);var e=new X(d);D(e);n(f,z(c),q(b));r(b,function(){a(e.a,e.c,Qa)})};la.prototype.load=function(a){var b=this.a.id,f=this.c.m;b?p(this.c,(this.a.api||
"https://use.typekit.net")+"/"+b+".js",function(b){if(b)a([]);else if(f.Typekit&&f.Typekit.config&&f.Typekit.config.fn){b=f.Typekit.config.fn;for(var c=[],d=0;d<b.length;d+=2)for(var e=b[d],k=b[d+1],g=0;g<k.length;g++)c.push(new u(e,k[g]));try{f.Typekit.load({events:!1,classes:!1,async:!0})}catch(h){}a(c)}},2E3):a([])};U.prototype.load=function(a){var b=this.f.id,f=this.c.m,c=this;b?(f.__webfontfontdeckmodule__||(f.__webfontfontdeckmodule__={}),f.__webfontfontdeckmodule__[b]=function(b,f){for(var d=
0,e=f.fonts.length;d<e;++d){var k=f.fonts[d];c.a.push(new u(k.name,A("font-weight:"+k.weight+";font-style:"+k.style)))}a(c.a)},p(this.c,l(this.c)+(this.f.api||"//f.fontdeck.com/s/css/js/")+(this.c.m.location.hostname||this.c.a.location.hostname)+"/"+b+".js",function(b){b&&a([])})):a([])};var E=new Y(ja);E.a.c.custom=function(a,b){return new aa(b,a)};E.a.c.fontdeck=function(a,b){return new U(b,a)};E.a.c.monotype=function(a,b){return new ga(b,a)};E.a.c.typekit=function(a,b){return new la(b,a)};E.a.c.google=
function(a,b){return new ba(b,a)};var P={load:g(E.load,E)};"function"===typeof define&&define.amd?define(function(){return P}):"undefined"!==typeof module&&module.exports?module.exports=P:(ja.WebFont=P,ja.WebFontConfig&&E.load(ja.WebFontConfig))})()},"MW/equations/renderer/Renderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style ./model/importers/MathML ./model/importers/SimpleTeX ./model/importers/TeX ./utils/EquationExportUtilities ./view/EquationView ./view/FontsLoaded ../utils/HasExtensions".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q){return h(null,{MINIMALFONTSIZE:10,SCRIPTSCALINGFACTOR:0.7,constructor:function(a){a=a||{};this._cacheFontMetrics=!0===a.cacheFontMetrics;this._scriptScalingFactor=a._scriptScalingFactor||this.SCRIPTSCALINGFACTOR;this._minimalFontSize=a._minimalFontSize||this.MINIMALFONTSIZE;this._inputLanguage=(a.equationFormat||"mathml").toLowerCase();this._pxPerEm=Math.round(1.1*(a.pxPerEm||0));"mathml"===this._inputLanguage?(a.flavor=a.flavor||"MathML 2.0",this._importer=new k(a)):
"tex"===this._inputLanguage?(this._importer=new n,a.strictTeX&&this._importer.setStrict(!0)):this._importer=new l},render:function(a,b,f){return q.then(e.hitch(this,function(c){this._adjustMinFontSize(c.minFontSize);return this._render(a,b,f)}))},renderToCanvas:function(a,b){return q.then(e.hitch(this,function(f){this._adjustMinFontSize(f.minFontSize);return this._renderToCanvas(a,b)}))},renderToImageURL:function(a,b,f){return q.then(e.hitch(this,function(c){this._adjustMinFontSize(c.minFontSize);
return this._renderToImageURL(a,b,f)}))},renderToImageURLSynch:function(a,b,f){return this._renderToImageURL(a,b,f)},exportDomnodeToCanvas:function(a,b){return p.exportDomnodeToCanvas(a,b)},exportDomnodeToImageURL:function(a,b,f){return p.exportDomnodeToImageURL(a,b,f)},_adjustMinFontSize:function(a){this._minimalFontSize=Math.max(this._minimalFontSize,a)},_renderEquationOffScreen:function(a,b){var f=p.createOffScreenSpan({fontSize:b});this._render(a,f);return f},_renderToCanvas:function(a,f,c){a=
this._renderEquationOffScreen(a,f);c=this.exportDomnodeToCanvas(a.firstElementChild,c);b.destroy(a);return c},_renderToImageURL:function(a,f,c){a=this._renderToCanvas(a,f,c);f=p.getImageObject(a);b.destroy(a);return f},_addStyleAttributes:function(a,b){var f={},c,d,e;if(b){c=b.split(";");for(d=0;d<c.length;d+=1)e=c[d].split(":"),1<e.length&&(f[e[0].trim()]=e[1].trim());if(f=f.fontSize||f["font-size"])a.pxPerEm=parseFloat(f)}},_render:function(a,b,f){return(a=this.getModel(a))&&!a.foundEncodingIssues?
this._draw(a,b,f):null},setDisplaystyleIfNeeded:function(a,b){function f(a){return b?0===a:-1!==a}var c=a.replace(/(^%|[^\\\\]%).*(\r?\n)?/g,""),c=c.trim(),d=!1;f(c.indexOf("$"))?d=!0:0===c.indexOf("\\[")?d=!0:f(c.indexOf("\\("))&&(d=!0);c&&!d&&(a="$$"+a+"\n$$");return a},getModel:function(a){var b,f=null;try{b=this._importer.parse(a),f=this._importer.makeEquation(b)}catch(c){}return f},draw:function(a,b,f){return q.then(e.hitch(this,function(){return this._draw(a,b,f)}))},_draw:function(a,f,c){c=
c||{};if(!a)return!1;var d=null;try{b.empty(f);var e={domNode:f,pxPerEm:this._pxPerEm,creatorFlavor:a.creatorFlavor,scriptScalingFactor:this._scriptScalingFactor,minimalFontSize:this._minimalFontSize,displaystyle:c.displaystyle};this._addStyleAttributes(e,a.style||"");var k=new m(e),d=k.layoutAndRender(a);this._cacheFontMetrics&&(this._pxPerEm=k.emToPx(1))}catch(g){}return d}})})},"MW/equations/renderer/model/importers/MathML":function(){define("dojo/_base/declare dojo/_base/lang MW/equations/utils/XMLParser ./Base ../Symbols ../utils/MathNodeUtils ../../Utilities".split(" "),
function(h,e,g,d,c,b,a){return h(d,{constructor:function(a){a=a||{};this.identifierSymbolTable=this.identifierTable=this.operatorTable=this._math=null;this._parser=new g;this.flavor=a.flavor||"MathML 2.0";this.rootElementName=a.rootElementName||"math"},initMaps:function(){this.actionMap=this.makeActionMap();this.symbolMap=this.makeSymbolMap();this.operatorTable={"\u2061":"ZeroWidthSpace","\u2062":"InvisibleTimes","\u2063":"InvisibleComma","\u2146":"d","\u222b":"intop","\u222e":"contourintop","\u2a0d":"fpartintop",
"\u2211":"sum","\u220f":"prod","\u200b":"ZeroWidthSpace","|":"verticalbar","\u2016":"dblverticalbar","\u2308":"ceilleft","\u2309":"ceilright","\u230a":"floorleft","\u230b":"floorright","\u2329":"anglebracketleft","\u27e8":"anglebracketleft","\u232a":"anglebracketright","\u27e9":"anglebracketright","\ufe37":"overbrace","\u23de":"overbrace","\ufe38":"underbrace","\u23df":"underbrace","~":"tildeAccent","\u02dc":"smallTildeAccent","\u2032":"prime","\u203e":"macron","\u2147":"exponentiale","\u2148":"imaginaryi",
"\u22c3":"bigcup","\u22c2":"bigcap","\u2a06":"bigsqcup","\u2a04":"biguplus","\u22c0":"bigwedge","\u22c1":"bigvee","\u2a00":"bigodot","\u2a01":"bigoplus","\u2a02":"bigotimes","\u25ef":"bigcirc","\u25bd":"bigtriangledown","\u25b3":"bigtriangleup","\\":"backslash","*":"*"};this.operatorTable["\u2212"]=this.operatorTable["-"];this.identifierSymbolTable={"...":"ldots"};this.identifierTable={"\u2147":"e","\u2148":"i"}},parse:function(a){var b;null===this.actionMap&&this.initMaps();this.initBaseParser();
this.initParser();"string"===typeof a?(a=c.entities.replace(a),b=this._parser.parseString(a)):(b={},b.firstChild=a);return b},makePEG:function(){return null},initParser:function(){this._unexpectedInput=!1;this._stretchySymbolBlacklist={}},makeSymbolMap:function(){return{larr:"leftarrow",rarr:"rightarrow",uarr:"uparrow",darr:"downarrow",harr:"leftrightarrow",lArr:"Leftarrow",rArr:"Rightarrow",uArr:"Uparrow",dArr:"Downarrow",hArr:"Leftrightarrow"}},makeActionMap:function(){var a={mrow:[this.appendMrow],
mfrac:[this.appendMfrac],msub:[this.appendMsub,"script"],msup:[this.appendMsup,"script"],msubsup:[this.appendMsubsup,"script"],munder:[this.appendMsub,"stack"],mover:[this.appendMsup,"stack"],munderover:[this.appendMsubsup,"stack"],mi:[this.appendMi],mo:[this.appendMo],mn:[this.appendMn],mfenced:[this.appendMfenced],msqrt:[this.appendMsqrt],mroot:[this.appendMroot],mtable:[this.appendMtable],malignmark:[this.appendMalignmark],mtext:[this.appendMtext],mstyle:[this.appendMstyle],maction:[this.appendMaction],
mmultiscripts:[this.appendMmultiscripts],parsererror:[this.appendMrow],h3:[this.appendMrow],mspace:[this.appendMspace],mphantom:[this.noAppend],mpadded:[this.noAppend],ms:[this.appendMs],menclose:[this.appendMrow],semantics:[this.appendMrow],maligngroup:[this.noAppend],annotation:[this.noAppend],"annotation-xml":[this.noAppend],"#comment":[this.noAppend]};a[this.rootElementName]=[this.appendMath];return a},_getName:function(a){var b=a.localName;b||(b=a.nodeName);return b.toLowerCase()},append:function(a){if(!a)return null;
var b=this._getName(a),b=this.actionMap[b],c=null;b?1===b.length?c=b[0].call(this,a):2===b.length&&(c=b[0].call(this,a,b[1])):this._unexpectedInput=!0;return c},makeEquation:function(a){var b;a&&a.firstChild&&(b=this.append(a.firstChild),0<Object.keys(this._stretchySymbolBlacklist).length&&(b=this.append(a.firstChild)));b||(b=this.makeRoot({children:[this.makeRow({children:[this.makeText({kind:"code",text:"\ufffd",style:"color: red"})]})]}),this._unexpectedInput=b.foundFatalEncodingIssues=!0);b.foundEncodingIssues=
this._unexpectedInput;b.creator="MathML";b.creatorFlavor=this.flavor;return b},_trim:function(a){return a.replace(/^ +| +$/gm,"")},getText:function(a,b){var c,d;b=b||{};c=!1!==b.trim;return a.firstChild&&(d=a.firstChild.data)?c?this._trim(d):d:""},appendMath:function(a){var b;b=this.attributes(a);var c=b.display;"inline"===c&&(b.inline=!0);"block"===c&&(b.inline=!1);b=this.makeRoot(b);this.fillImplicitRow(a,b.children[0]);return b},fillItemOrRow:function(a,b){a&&"mrow"===this._getName(a)?this.fillRow(a,
b):(this.pushRow(b),this.append(a),this.popRow())},_isTextOrComment:function(a){a=this._getName(a);return"#text"===a||"#comment"===a},_skipTextOrComment:function(a){for(;a&&this._isTextOrComment(a);)a=a.nextSibling;return a},_skipTextOrCommentBack:function(a){for(;a&&this._isTextOrComment(a);)a=a.previousSibling;return a},_firstElementChild:function(a){return this._skipTextOrComment(a.firstChild)},_lastElementChild:function(a){return this._skipTextOrCommentBack(a.lastChild)},_nextElementSibling:function(a){return this._skipTextOrComment(a.nextSibling)},
_childElements:function(a){var b=[];for(a=this._firstElementChild(a);a;)b.push(a),a=this._nextElementSibling(a);return b},fillImplicitRow:function(a,b,c){var d=this._firstElementChild(a);d&&"mrow"===this._getName(d)&&!this._nextElementSibling(d)?this.fillRow(d,b,c):this.fillRow(a,b,c)},_scanChildForDelimiter:function(a,b){var d;a&&((d=a.symbolName)&&c.isDelimiter(d)?(c.isOpeningDelimiter(d)?(b.parens.push(1),b.parencount+=1,b.first||(b.needsSubRows=!0)):c.isClosingDelimiter(d)?(b.parens.push(-1),
b.parencount-=1):b.parens.push(0),0>b.parencount&&(b.balancedParens=!1)):b.parens.push(0),b.first=!1)},_scanRowForDelimiters:function(a,b,c){var d={parens:[],needsSubRows:!1,parencount:0,balancedParens:!0,first:!0};this.pushRow(b);for(b=this._firstElementChild(a);b;)!d.first&&c&&this.pushSymbol(","),a=this.append(b),this._scanChildForDelimiter(a,d),b=this._nextElementSibling(b);0!==d.parencount&&(d.balancedParens=!1);d.needsSubRows=d.needsSubRows&&d.balancedParens&&!c;this.popRow();return{needsSubRows:d.needsSubRows,
parens:d.parens}},fillRow:function(b,c,d){var e;a.copyCommonAttributes(this.attributes(b),c);d=this._scanRowForDelimiters(b,c,d||!1);if("MathType"===this.flavor&&d.needsSubRows){b=c.children;c.children=[];this.pushRow(c);for(c=0;c<b.length;c+=1)1===d.parens[c]&&(e=this.makeRow(),this.push(e),this.pushRow(e)),this.push(b[c]),-1===d.parens[c]&&this.popRow();this.popRow()}},noAppend:function(){return null},appendMrow:function(a){var b=null,b=this.makeRow(this.attributes(a));this.push(b);this.fillRow(a,
b);return b},appendMn:function(a){return this.pushNumber(this.getText(a),this.attributes(a))},appendMspace:function(a){a=this.attributes(a);var b=0;a.hasOwnProperty("width")&&"em"===a.width.slice(-2)&&(b=parseFloat(a.width));return this.pushMspace(b)},appendToPreviousId:function(a){var b=this.row.children;return 0<b.length&&(b=b[b.length-1],"MathText"===b.className&&"id"===b.kind&&1===a.length)?(b.text+=a,!0):!1},appendIdentifier:function(a,b){var c=null;return c=this.pushText(a,1<a.length?"code":
"id",b)},appendMi:function(a){var b;"MathType"===this.flavor?(b=this.getText(a,{trim:!1}),b=" "===b?"\u00a0":e.trim(b)):b=this.getText(a);var d=c.unicodeMap;return(d=this.identifierSymbolTable[b]||(d?d[b]:null))?this.pushSymbol(d,this.attributes(a)):this.appendIdentifier(this.identifierTable[b]||b,this.attributes(a))},attributes:function(a){var b={};a=a.attributes;var c,d;for(d=0;d<a.length;d+=1)c=a[d],"true"===c.value?c.value=!0:"false"===c.value&&(c.value=!1),b[c.name]=c.value;return b},_checkMoInMsubSup:function(a,
b){var d=a.parentNode,e=this._firstElementChild(d),d=this._getName(d);if("msub"===d||"msup"===d||"msubsup"===d)d=c.symbolMap[b],e===a&&d.stretchyDefault&&(this._stretchySymbolBlacklist[b]=!0)},_isStretchyDelim:function(a,b){return!0===a.stretchyDefault&&a.stretchy&&!1!==b.stretchy||!0===a.stretchy&&!0===b.stretchy},_appendSingleOperator:function(a,b,d){var e=c.symbolMap,g=this.operatorTable[d],h=null,q=e&&g?e[g]:null,r=!1,h=null;b.hasOwnProperty("stretchy")&&(b.stretchy="true"===b.stretchy);if(q){if("ZeroWidthSpace"===
g)return null;r=this._isStretchyDelim(q,b);h=g;this._checkMoInMsubSup(a,h);this._stretchySymbolBlacklist[h]&&(r=!1)}else h=(a=c.unicodeMap)?a[d]:d,(q=e?e[h]:null)&&(r=this._isStretchyDelim(q,b));h?h=r?this.pushDelim(h,b):this.pushSymbol(h,b):(g&&(d=g),h=this.pushCode(d,b));h.attributes=b;return h},appendMo:function(a){var b,d="",g=[],h=this.attributes(a),m=this.getText(a),m=this.mapSymbolName(m);m.split("").forEach(e.hitch(this,function(a){c.unicodeMap[a]?(d&&g.push(d),g.push(a),d=""):d+=a}));d&&
g.push(d);g.forEach(e.hitch(this,function(c){b=this._appendSingleOperator(a,h,c)}));return b},appendMs:function(a){return this.pushCode('"'+this.getText(a)+'"',this.attributes(a))},appendMtext:function(a){var b=this.attributes(a);return"MathType"===this.flavor?this.pushMtext(this.getText(a,{trim:!1}).replace(/ /g,"\u00a0").replace(/\u0009/g,"\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0"),b):this.pushMtext(this.getText(a),b)},appendMfrac:function(a){var b=this.attributes(a);a=this._firstElementChild(a);
var c=this._nextElementSibling(a),b=this.makeFraction(b);this.push(b);this.fillItemOrRow(a,b.children[0]);this.fillItemOrRow(c,b.children[1]);return b},appendMfenced:function(a){var b=this.makeFenced(this.attributes(a));this.push(b);this.pushRow(b);this.fillRow(a,b.children[0],!0);this.popRow();return b},appendMstyle:function(a){var b=this.attributes(a);b.hasOwnProperty("displaystyle")&&(b.displaystyle="true"===b.displaystyle);b=this.makeStyle(b);this.push(b);this.fillImplicitRow(a,b.children[0]);
return b},appendMaction:function(a){var b=this.attributes(a);a=this._firstElementChild(a);var c=this._nextElementSibling(a),d;d=this.makeAction(b);this.push(d);this.fillItemOrRow(a,d.children[0]);"tooltip"===b.actiontype?this.fillItemOrRow(c,d.children[1]):d.children[1]=null;return d},appendMsqrt:function(a){var b=this.makeRadical(this.attributes(a));this.push(b);this.fillImplicitRow(a,b.children[0]);return b},appendMroot:function(a){var b=this._firstElementChild(a),c=this._nextElementSibling(b);
a=this.makeRadical(this.attributes(a));this.push(a);this.fillItemOrRow(b,a.children[0]);this.fillItemOrRow(c,a.children[1]);return a},parseAlign:function(a){a=a.split(" ");var b,c="";for(b=0;b<a.length;b+=1)a[b]&&(c+=a[b].charAt(0));return c},parseRowLines:function(a){return a.split(" ")},parseAlignList:function(a){var b,c="";a=e.trim(a);if(2>a.length)return"";if("{"!==a[0]||"}"!==a[-1])return this.parseAlign(a);b=a.slice(1,-2).split("} *{");for(a=0;a<b.length;a+=1)c+=b(a)?this.parseAlign(b[a]).charAt(0):
"a";return c},appendMalignmark:function(a){return this.pushText("","alignmark",this.attributes(a))},appendMtable:function(a){var b=this.attributes(a);a=this._childElements(a);var c=a.length,d,e,g,h=0;for(d=0;d<c;d+=1)a[d]="mtr"!==a[d].localName?[a[d]]:this._childElements(a[d]),h=Math.max(h,a[d].length);b.rows=c;b.cols=h;b.frame&&(b.frame=b.frame);b.columnalign&&(b.colspec=this.parseAlign(b.columnalign));b.groupalign&&(b.colspec=this.parseAlignList(b.groupalign));!b.colspec&&"MathType"===this.flavor&&
(b.colspec="a");b.rowlines&&(b.hlines=this.parseRowLines(b.rowlines));b=this.makeMatrix(b);for(d=0;d<a.length;d+=1){c=a[d];for(e=0;e<h;e+=1)g=this.makeRow(),b.appendChild(g),e<c.length&&this.fillImplicitRow(c[e],g)}return this.push(b)},_setAccentProperties:function(a){if("stack"===a.limitStyle){var c=a.children[0],d=a.children[1],e=b.isNonEmptyRow(d),g=a.children[2],h=b.isNonEmptyRow(g),c=c&&c.getAccent(),g=g&&g.getAccent(),d=d&&d.getAccent();a.accent=!1;a.accentunder=!1;g&&(a.accent=!0,g.accentType=
"topaccent",g.renderAsAccent=!0);if(c&&(e||h))c.renderAsAccent=!0;g&&(a.accent=!0,g.accentType="topaccent",g.renderAsAccent=!0);d&&(a.accentunder=!0,d.accentType="bottomaccent",d.renderAsAccent=!0)}},appendMsub:function(a,b){var c=this.attributes(a),d=this._firstElementChild(a),e=this._nextElementSibling(d);b&&(c.limitStyle=b);c=this.makeScript(c);this.push(c);this.fillItemOrRow(d,c.children[0]);if("MathType"===this.flavor){d=this._lastElementChild(a);for(this.pushRow(c.children[0]);e!==d;)this.append(e),
e=this._nextElementSibling(e);this.popRow()}c.children[2]=null;this.fillItemOrRow(e,c.children[1]);this._setAccentProperties(c);return c},appendMsup:function(a,b){var c=this.attributes(a),d=this._firstElementChild(a),e=this._nextElementSibling(d);b&&(c.limitStyle=b);c=this.makeScript(c);this.push(c);this.fillItemOrRow(d,c.children[0]);if("MathType"===this.flavor){d=this._lastElementChild(a);for(this.pushRow(c.children[0]);e!==d;)this.append(e),e=this._nextElementSibling(e);this.popRow()}c.children[1]=
null;this.fillItemOrRow(e,c.children[2]);this._setAccentProperties(c);return c},appendMsubsup:function(a,b){var c=this.attributes(a),d=this._firstElementChild(a),e=this._nextElementSibling(d),g=this._nextElementSibling(e);b&&(c.limitStyle=b);c=this.makeScript(c);this.push(c);this.fillItemOrRow(d,c.children[0]);"MathType"===this.flavor&&(d=this._lastElementChild(a),g!==d&&console.warn("Broken MathML encoding: msubsup has more than 3 children"));this.fillItemOrRow(e,c.children[1]);this.fillItemOrRow(g,
c.children[2]);this._setAccentProperties(c);return c},_processOneMultiScriptChild:function(a,b){var c=null;b&&"none"!==b.localName&&(c=this.makeRow(),this.fillItemOrRow(b,c));a.appendChild(c)},_processTwoMultiScriptChildren:function(a,b){this._processOneMultiScriptChild(a,b);b=this._nextElementSibling(b);this._processOneMultiScriptChild(a,b);return this._nextElementSibling(b)},appendMmultiscripts:function(a){var b=this._firstElementChild(a);a=this.makeMultiScript(this.attributes(a));var c=0;this.push(a);
this.fillItemOrRow(b,a.children[0]);for(b=this._nextElementSibling(b);b&&"mprescripts"!==b.localName;)b=this._processTwoMultiScriptChildren(a,b),c+=1;a.numPostPairs=c;for(b&&(b=this._nextElementSibling(b));b;)b=this._processTwoMultiScriptChildren(a,b);return a}})})},"MW/equations/utils/XMLParser":function(){define(["dojo/_base/declare","dojo/has","dojo/sniff"],function(h,e,g){return h(null,{constructor:function(){window.DOMParser&&(this._parser=new window.DOMParser);this._IEparser=null;!this._parser&&
e("ie")&&(this._IEparser=new window.ActiveXObject("Microsoft.XMLDOM"),this._IEparser.async=!1)},parseString:function(d){var c;try{this._parser?(c=this._parser.parseFromString(d,"application/xml"))&&0<c.getElementsByTagName("parsererror").length&&(c=null):c=this._parseUsingIE(d)}catch(b){c=null}return c},_parseUsingIE:function(d){var c=null,b=this._IEparser;b&&(b.loadXML(d),c=b);return c}})})},"MW/equations/renderer/model/importers/Base":function(){define(["dojo/_base/declare","dojo/_base/lang","../utils/MathNodeUtils",
"../utils/NodeFactory"],function(h,e,g,d){return h(null,{constructor:function(){this.row=this.symbolMap=this.actionMap=this.peg=null;this.rows=[];this.str=""},initMaps:function(){this.peg=this.makePEG();this.actionMap=this.makeActionMap();this.symbolMap=this.makeSymbolMap()},makePEG:function(){throw"Unimplemented abstract method makePEG";},makeActionMap:function(){throw"Unimplemented abstract method makeActionMap";},makeSymbolMap:function(){throw"Unimplemented abstract method makeSymbolMap";},initParser:function(){throw"Unimplemented abstract method initParser";
},initBaseParser:function(){this.row=null;this.rows=[];this.str=""},parse:function(c){this.peg||this.initMaps();this.initBaseParser();this.initParser();return this.peg.parse(c)},pushRow:function(c){this.rows.push(this.row);this.row=c},popRow:function(){this.row=this.rows.pop()},makeEquation:function(c){var b=this.makeRoot();c&&(this.str=c.str,this.fillRow(c.tree,b.children[0]));return g.sanitizeModel(b)},makeRoot:function(c){c=c||{};c.children=c.children||[this.makeRow()];return d.createNode("MathRoot",
c)},makeRow:function(c){c=c||{};c.children=c.children||[];return d.createNode("MathRow",c)},makeDelim:function(c){c=c||{};return d.createNode("MathDelimiter",c)},makeText:function(c){c=c||{};return d.createNode("MathText",c)},makeSymbol:function(c,b){b=b||{};b.text=" ";b.kind="symbol";b.symbolName=c;return d.createNode("MathText",b)},makeFraction:function(c){c=c||{};c.children=c.children||[this.makeRow(),this.makeRow()];c.bevelled="true"===c.bevelled;return d.createNode("MathFraction",c)},makeRadical:function(c){c=
c||{};c.children=c.children||[this.makeRow(),this.makeRow()];return d.createNode("MathRadical",c)},makeFenced:function(c){c=c||{};c.children=c.children||[this.makeRow()];return d.createNode("MathFenced",c)},makeStyle:function(c){c=c||{};c.children=c.children||[this.makeRow()];return d.createNode("MathStyle",c)},makeAction:function(c){c=c||{};c.children=c.children||[this.makeRow(),this.makeRow()];return d.createNode("MathAction",c)},makeSpace:function(c){c=c||{};return d.createNode("MathSpace",c)},
makeScript:function(c){c=c||{};c.children=c.children||[this.makeRow(),this.makeRow(),this.makeRow()];return d.createNode("MathScript",c)},makeMultiScript:function(c){c=c||{};c.children=c.children||[this.makeRow()];return d.createNode("MathMultiScript",c)},makeMatrix:function(c){c.children=c.children||[];return d.createNode("MathMatrix",c)},name:function(c){return this.peg.names[c.name]},slice:function(c){return this.str.slice(c.start,c.end)},push:function(c){this.row.appendChild(c);return c},pushText:function(c,
b,a){a=a||{};a.text=c;a.kind=b;!c&&"placeholder-atom"===a["data-category"]&&(a.kind="placeholder");c="symbol"===b?this.makeSymbol(c,a):this.makeText(a);return this.push(c)},pushCode:function(c,b){b=b||{};b.text=c;b.kind="code";return this.push(this.makeText(b))},pushMtext:function(c,b){b=b||{};b.text=c;b.kind="mtext";return this.push(this.makeText(b))},pushMspace:function(c,b){b=b||{};b.length=c;return this.push(this.makeSpace(b))},pushNumber:function(c,b){b=b||{};b.text=c;b.kind="number";return this.push(this.makeText(b))},
pushSymbol:function(c,b){return this.push(this.makeSymbol(c,b))},pushDelim:function(c,b){b=b||{};b.symbolName=c;return this.push(this.makeDelim(b))},unknownAction:function(){},fireAction:function(c,b){c?1===c.length?c[0].call(this,b):2===c.length?c[0].call(this,b,c[1]):3===c.length?c[0].call(this,b,c[1],c[2]):c[0].call(this,b,c[1],c[2],c[3]):this.unknownAction(b)},append:function(c){this.fireAction(this.actionMap[this.peg.names[c.name]],c)},mapSymbolName:function(c){var b=this.symbolMap[c];return b?
b:c},consume:function(){},appendSymbol:function(c){c=this.slice(c).trim();this.pushSymbol(this.mapSymbolName(c));this.consume(1)}})})},"MW/equations/renderer/model/utils/MathNodeUtils":function(){define(["dojo/_base/lang","./../MathRow"],function(h,e){return{isNonEmptyRow:function(g){return g&&g instanceof e&&g.children&&0<g.children.length},sanitizeModel:function(e){e.children&&e.children.forEach(function(d){d&&(d.parent=e,this.sanitizeModel(d))},this);return e}}})},"MW/equations/renderer/model/MathRow":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang ./MathInnerNode ./utils/MathMLExportUtils ./utils/TeXUtils".split(" "),
function(h,e,g,d,c,b){return e(d,{constructor:function(a){a=a||{};this.className="MathRow";this.TeXSpacing=a.TeXSpacing},_layoutStretchyDelimiters:function(a,b){var c,d=this.children,e=a.children,g=a.ascent(),h=a.descent(),q=!1,r;for(c=0;c<d.length;c+=1)r=d[c],r.isVerticalDelimiter()&&(q=!0,r=e[c],r.resizeAndCenterDelimiter(b,g,h));return q},_exportMathML:function(a){var b=c.startTag(a,"mrow",this);this.children.forEach(function(c){b+=c._exportMathML(a)});return b+=c.endTag("mrow")},_exportLaTeX:function(a){var f=
a.openParens,c=a.addBraces;a.openParens=0;a.addBraces=b.NEVER_ADD_BRACES;var d,e="";this.children.forEach(function(f){e+=b.exportChild(f,a)});if(0<a.openParens)for(d=0;d<a.openParens;d+=1)e+="\\right.";else if(0>a.openParens)for(d=0;d<-a.openParens;d+=1)e="\\left."+e;a.openParens=f;a.addBraces=c;return e},isItalicText:function(a){var b=this.children&&1===this.children.length&&this.children[0];return b&&b.isItalicText(a)},getAccent:function(){var a=this.children&&1===this.children.length&&this.children[0];
return a?a.getAccent():null},layout:function(a){var b=a.layoutChildren(h.map(this.children,g.hitch(this,function(a){a.baseIsItalic=this.baseIsItalic;a.accentType=this.accentType;if(a.parent!==this)throw Error("Missing or wrong parent in equation node.");return a}))),c=a.parseBoxes("h{*}",b);c.subLeftShift=0;c.supRightShift=0;c.supDownShift=0;c._largeOp=!1;b.forEach(function(a){c.supDownShift=Math.max(a.supDownShift||0,c.supDownShift)});1===b.length&&(b=b[0],c.subLeftShift=Math.max(b.subLeftShift||
0,c.subLeftShift),c.supRightShift=Math.max(b.supRightShift||0,c.supRightShift),c._largeOp=b._largeOp);c.leftShift=this.leftShift||0;c.rightShift=this.rightShift||0;void 0!==this.TeXSpacing&&(c.spacing=this.TeXSpacing);c.computeMetrics();c.computeRowGaps(a.renderer,0<a.scriptlevel);this._layoutStretchyDelimiters(c,a)&&c.computeMetrics();return c}})})},"MW/equations/renderer/model/MathInnerNode":function(){define(["dojo/_base/declare","dojo/_base/lang","./MathBaseNode"],function(h,e,g){return h(g,{constructor:function(d){d=
d||{};d.children=d.children||[];this.setChildren(d.children)},replaceChild:function(d,c){this.children&&(d!==parseInt(d,10)&&(d=this.children.length),this._setParent(this.children[d],null),this._setParent(c,this),this.children[d]=c)},appendChild:function(d){this.children&&(this._setParent(d,this),this.children.push(d))},setChildren:function(d){this.children&&this.children.forEach(e.hitch(this,function(c){this._setParent(c,null)}));d.forEach(e.hitch(this,function(c){this._setParent(c,this)}));this.children=
d},removeChild:function(d){var c=this.children[d];this._setParent(c,null);this.children.splice(d,1);return c}})})},"MW/equations/renderer/model/MathBaseNode":function(){define(["dojo/_base/declare","../Utilities"],function(h,e){return h(null,{constructor:function(g){g=g||{};e.copyCommonAttributes(g,this)},layout:function(){throw"layout method for class '"+this.className+"'' not defined";},isDisplaystyle:function(){return this.hasOwnProperty("displaystyle")?this.displaystyle:this.parent?this.parent.isDisplaystyle():
!1},exportMathML:function(e){var d="";!0===this.inline&&(d=' display\x3d"inline"');!1===this.inline&&(d=' display\x3d"block"');return'\x3cmath xmlns\x3d"http://www.w3.org/1998/Math/MathML"'+d+"\x3e"+this._exportMathML(e)+"\x3c/math\x3e"},exportLaTeX:function(e){return this._exportLaTeX(e)},_exportMathML:function(e){throw"Unimplemented abstract method _exportMathML";},_exportLaTeX:function(e){throw"Unimplemented abstract method _exportLaTeX";},_mathvariantIsItalic:function(e){return-1!==(e||"").indexOf("italic")},
isItalicText:function(){return!1},isVerticalDelimiter:function(){return!1},isIdentifier:function(){return!1},getAccent:function(){return null},_setParent:function(e,d){e&&(e.parent=d)}})})},"MW/equations/renderer/Utilities":function(){define(["dojo/_base/lang","./model/utils/MathMLExportUtils"],function(h,e){var g=e.commonMathMLAttributes,d=RegExp(eval('"[\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1-\\u05c2\\u05c4-\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065e\\u0670\\u06d6-\\u06dc\\u06df-\\u06e4\\u06e7-\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0901-\\u0902\\u093c\\u0941-\\u0948\\u094d\\u0951-\\u0954\\u0962-\\u0963\\u0981\\u09bc\\u09c1-\\u09c4\\u09cd\\u09e2-\\u09e3\\u0a01-\\u0a02\\u0a3c\\u0a41-\\u0a42\\u0a47-\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70-\\u0a71\\u0a75\\u0a81-\\u0a82\\u0abc\\u0ac1-\\u0ac5\\u0ac7-\\u0ac8\\u0acd\\u0ae2-\\u0ae3\\u0b01\\u0b3c\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b62-\\u0b63\\u0b82\\u0bc0\\u0bcd\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55-\\u0c56\\u0c62-\\u0c63\\u0cbc\\u0cbf\\u0cc6\\u0ccc-\\u0ccd\\u0ce2-\\u0ce3\\u0d41-\\u0d44\\u0d4d\\u0d62-\\u0d63\\u0dca\\u0dd2-\\u0dd4\\u0dd6\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb-\\u0ebc\\u0ec8-\\u0ecd\\u0f18-\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86-\\u0f87\\u0f90-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039-\\u103a\\u103d-\\u103e\\u1058-\\u1059\\u105e-\\u1060\\u1071-\\u1074\\u1082\\u1085-\\u1086\\u108d\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752-\\u1753\\u1772-\\u1773\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927-\\u1928\\u1932\\u1939-\\u193b\\u1a17-\\u1a18\\u1b00-\\u1b03\\u1b34\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80-\\u1b81\\u1ba2-\\u1ba5\\u1ba8-\\u1ba9\\u1c2c-\\u1c33\\u1c36-\\u1c37\\u1dc0-\\u1de6\\u1dfe-\\u1dff\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2de0-\\u2dff\\u302a-\\u302f\\u3099-\\u309a\\ua66f\\ua67c-\\ua67d\\ua802\\ua806\\ua80b\\ua825-\\ua826\\ua8c4\\ua926-\\ua92d\\ua947-\\ua951\\uaa29-\\uaa2e\\uaa31-\\uaa32\\uaa35-\\uaa36\\uaa43\\uaa4c\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26]|\\ud800\\uddfd|\\ud802[\\ude01-\\ude03\\ude05-\\ude06\\ude0c-\\ude0f\\ude38-\\ude3a\\ude3f]|\\ud834[\\udd67-\\udd69\\udd7b-\\udd82\\udd85-\\udd8b\\uddaa-\\uddad\\ude42-\\ude44]|\\udb40[\\udd00-\\uddef]"'),
"g");return{isSingleCharIdentString:function(c){return 1===c.replace(d,"").length},copyCommonAttributes:function(c,b){g.forEach(h.hitch(this,function(a){c.hasOwnProperty(a)&&(b[a]=c[a])}))},stringAscentBelowXHeight:function(c){return null!==c.match(/^[acegmnopqrsuvwxyz+\-\u2009\u2212\u03B1\u03B3\u03B5\u03B7\u03B9\u03BA\u03BC\u03BD\u03BF\u03C0\u03C1\u03C3\u03C4\u03C5\u03C7\u03C8\u03C9\u03C6\u03D6\u03F1\u03DB]*$/)}}})},"MW/equations/renderer/model/utils/MathMLExportUtils":function(){define([],function(){var h=
["class","mathvariant","style","id","data-category"];return{commonMathMLAttributes:h.concat([]),startTag:function(e,g,d,c){e.attribBlackList=e.attribBlackList||[];c=c||[];var b="\x3c"+g;h.concat(c).forEach(function(a){d.hasOwnProperty(a)&&(void 0!==d[a]&&-1===e.attribBlackList.indexOf(a))&&(b+=" "+a+'\x3d"'+d[a]+'"')});return b+="\x3e"},maskSpecialCharacters:function(e){var g={"\x26":"\x26amp;","\x3c":"\x26lt;"};return e.replace(/[&<]/g,function(d){return g[d]})},endTag:function(e){return"\x3c/"+
e+"\x3e"},emptyTag:function(e){return"\x3c"+e+"/\x3e"}}})},"MW/equations/renderer/model/utils/TeXUtils":function(){define(["../Symbols","../importers/TeXSymbols"],function(h,e){function g(a,f){var d=b[a];if("string"===typeof d)return d;d=c[a]||a;return e[d]?"\\"+d+(f||""):h.getCharForSymbolName(a)}var d={"int":"intop",oint:"contourintop",intbar:"fpartintop",bot:"uptack",top:"downtack",colon:"colonPunct",owns:"ni",dots:"ldots",ge:"geq",le:"leq",ne:"neq",gets:"leftarrow",to:"rightarrow",iff:"Longleftrightarrow",
gt:"\x3e",lt:"\x3c",asymp:"asympeq",_:"underscore","|":"dblverticalbar","{":"braceleft","}":"braceright","(":"parenleft",")":"parenright",Vert:"dblverticalbar",vert:"verticalbar",langle:"anglebracketleft",rangle:"anglebracketright",lceil:"ceilleft",rceil:"ceilright",lfloor:"floorleft",rfloor:"floorright",lbrace:"braceleft",rbrace:"braceright",lbrack:"bracketleft",rbrack:"bracketright",llbracket:"whitesquarebracketleft",rrbracket:"whitesquarebracketright",vee:"lor",wedge:"land",lnot:"neg","\x26":"ampersand"},
c={};Object.keys(d).forEach(function(a){c[d[a]]=a});c["\x3c"]=null;c["\x3e"]=null;var b={verticalbar:"|",dblverticalbar:"\\|",ampersand:"\\\x26","-":"-","*":"*",InvisibleTimes:"\\,",InvisibleComma:"\\,",ZeroWidthSpace:""};"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split("").forEach(function(a){b[a+"opf"]="\\mathbb{"+a+"}";b[a+"scr"]="\\mathcal{"+a+"}";b[a+"fr"]="\\mathfrak{"+a+"}"});Object.keys(h.notSymbols).forEach(function(a){b[h.notSymbols[a]]="\\not"+(1===a.length?a:"\\"+a)+" "});
var a={omicron:"o",Alpha:"A",Beta:"B",Epsilon:"E",Zeta:"Z",Eta:"H",Iota:"I",Kappa:"K",Mu:"M",Nu:"N",Omicron:"O",Rho:"P",Tau:"T",Chi:"X"};Object.keys(a).forEach(function(f){b[f]=a[f]});var f="arccos arcsin arctan arg cos cosh cot coth csc deg dim exp hom ker lg ln log sec sin sinh tan tanh".split(" "),k="det gcd inf lim liminf limsup max min Pr sup".split(" "),l={ss:"\u00df",O:"\u00d8",o:"\u00f8",L:"\u0141",l:"\u0142",OE:"\u0152",oe:"\u0153",AE:"\u00c6",ae:"\u00e6",AA:"A\u030a",aa:"a\u030a"},n=null,
p=null,m={"`":"\u0300","'":"\u0301","^":"\u0302",'"':"\u0308","~":"\u0303","\x3d":"\u0304",".":"\u0307",u:"\u0306",v:"\u030c",H:"\u030b",c:"\u0327",d:"\u0323",b:"\u0331"},q=null;return{exportLaTeX:function(a,b){b=b||{};b.openParens=0;b.alwaysUseBraces=!1;var f,c="";for(f=0;f<a.length;f+=1)c+=a[f].exportLaTeX(b);return 1<c.length?c.trim():c},ALWAYS_ADD_BRACES:"always",NEVER_ADD_BRACES:"never",ADD_BRACES_WHERE_NEEDED:"standard",exportChild:function(a,b){var f=b.addBraces;b.addBraces="standard";var c=
a?a._exportLaTeX(b):"";b.addBraces=f;c="never"!==b.addBraces&&1<c.length&&"{}"!==c&&!c.match(/^{.}$/)?"{"+c+"}":c;return c=2>c.length&&"always"===b.addBraces?"{"+c+"}":c},functionNames:f,limitsFunctionNames:k,allFunctionNames:f+k,symbolMap:d,specialLetters:l,combiningChars:m,sanitzeLaTeXString:function(a){a=a.replace(/[^\u0000-\u007f]/g,function(a){var b=h.unicodeMap[a];return b?g(b," "):a});return a=a.replace(/\\omicron/g,"o")},replaceUnicodeBySpecialLettersName:function(a){if(!n){var b;n={};p={};
for(b in l)l.hasOwnProperty(b)&&(1<b.length?p[l[b]]=b:n[l[b]]=b)}Object.keys(p).forEach(function(b){a=a.replace(RegExp(b,"g"),"\\"+p[b])});return a.replace(/[^\000-\177]/g,function(a){var b=a;n[a]&&(b="\\"+n[a]);return b})},replaceUnicodeByCombiningCharsName:function(a){if(!q){var b;q={};for(b in m)m.hasOwnProperty(b)&&(q[m[b]]=b)}return a.replace(/[\000-\177][^\000-\177]/g,function(a){var b=a;q[a[1]]&&(b="\\"+q[a[1]]+a[0]);return b})},commandName:g}})},"MW/equations/renderer/model/Symbols":function(){define(["dojo/has",
"./SpacingClasses","./utils/MathMLEntities","../../utils/StringUtils","../../utils/HasExtensions"],function(h,e,g,d){var c={isLargeOpSymbol:function(a){return"symbol"===a.kind&&c._isLargeOp(a.symbolName)},isOpeningDelimiter:function(a){return(a=c.symbolMap[a])&&a.delimiterType&&-1!==a.delimiterType.indexOf("open")},isClosingDelimiter:function(a){return(a=c.symbolMap[a])&&a.delimiterType&&-1!==a.delimiterType.indexOf("close")},isSeparator:function(a){return(a=c.symbolMap[a])&&a.delimiterType&&-1!==
a.delimiterType.indexOf("separator")},hasXHeight:function(a){return(a=c.getSymbol(a))&&a.hasXHeight},isDelimiter:function(a){return(a=c.symbolMap[a])&&a.delimiterType},isAccent:function(a){return(a=c.symbolMap[a||""])&&(a.accentHeight||a.accentStretchy)},isIdentifier:function(a){return(a=c.symbolMap[a||""])&&a.isIdentifier},isOperator:function(a){return(a=c.symbolMap[a||""])&&a.spacing},isStretchyOperatorByDefault:function(a){return(a=c.symbolMap[a]||c.symbolMap[c.unicodeMap[a]])&&a.stretchyDefault},
isStretchyAccent:function(a){return(a=c.symbolMap[a])&&a.accentStretchy},lookupLargeOp:function(a,b){return c.symbolMap[a+(b?"display":"")]},notSymbols:{"\x3d":"neq","\x3c":"notlt","\x3e":"notgt",exists:"notexists",leq:"notleq",geq:"notgeq",equiv:"notequiv",approx:"notapprox",cong:"notcong",sim:"notsim",simeq:"notsimeq",models:"notmodels","in":"notin",ni:"notni",succ:"notsucc",succeq:"notsucceq",prec:"notprec",preceq:"notpreceq",parallel:"notparallel",subset:"notsubset",supset:"notsupset",subseteq:"notsubseteq",
supseteq:"notsupseteq"},lookupNotSymbol:function(a){"\\"===a.charAt(0)&&(a=a.slice(1));return(a=this.notSymbols[a])?a:null},getSymbol:function(a){return c.symbolMap[a]||c.symbolMap[c.unicodeMap[a]]},getSymbolName:function(a){return c.unicodeMap[a]||a},getCharForSymbolName:function(a){var b=c.getSymbol(a);return!b?a:this.getCharForSymbol(b)},getCharForSymbol:function(a){return d.fromCodePoint(a.glyph||a.unicode)},serializeSymbol:function(a){return(a=c.getSymbol(a))&&a.entity?g.replace(a.entity):c.getCharForSymbol(a)},
_isLargeOp:function(a){return(a=c.symbolMap[a])&&a.largeOp},entities:g,initSymbolMap:function(){return{alpha:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:945},beta:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:946},gamma:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:947},delta:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:948},epsilon:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:1013},zeta:{font:"symbol",
fontStyle:"italic",isIdentifier:!0,unicode:950},eta:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:951},theta:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:952},iota:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:953},kappa:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:954},lambda:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:955},mu:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:956},
nu:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:957},xi:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:958},omicron:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:959},pi:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:960},rho:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:961},sigma:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:963},tau:{font:"symbol",fontStyle:"italic",
isIdentifier:!0,hasXHeight:!0,unicode:964},upsilon:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:965},phi:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:981},chi:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:967},psi:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:968},omega:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:969},varepsilon:{font:"symbol",fontStyle:"italic",isIdentifier:!0,
hasXHeight:!0,unicode:949},varbeta:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:976},vartheta:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:977},varphi:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:966},varpi:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:982},varrho:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:1009},varsigma:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:987},
Alpha:{font:"symbol",isIdentifier:!0,unicode:913},Beta:{font:"symbol",isIdentifier:!0,unicode:914},Gamma:{font:"symbol",isIdentifier:!0,unicode:915},Delta:{font:"symbol",isIdentifier:!0,unicode:916},Epsilon:{font:"symbol",isIdentifier:!0,unicode:917},Zeta:{font:"symbol",isIdentifier:!0,unicode:918},Eta:{font:"symbol",isIdentifier:!0,unicode:919},Theta:{font:"symbol",isIdentifier:!0,unicode:920},Iota:{font:"symbol",isIdentifier:!0,unicode:921},Kappa:{font:"symbol",isIdentifier:!0,unicode:922},Lambda:{font:"symbol",
isIdentifier:!0,unicode:923},Mu:{font:"symbol",isIdentifier:!0,unicode:924},Nu:{font:"symbol",isIdentifier:!0,unicode:925},Xi:{font:"symbol",isIdentifier:!0,unicode:926},Omicron:{font:"symbol",isIdentifier:!0,unicode:927},Pi:{font:"symbol",isIdentifier:!0,unicode:928},Rho:{font:"symbol",isIdentifier:!0,unicode:929},Sigma:{font:"symbol",isIdentifier:!0,unicode:931},Tau:{font:"symbol",isIdentifier:!0,unicode:932},Upsilon:{font:"symbol",isIdentifier:!0,unicode:933},Phi:{font:"symbol",isIdentifier:!0,
unicode:934},Chi:{font:"symbol",isIdentifier:!0,unicode:935},Psi:{font:"symbol",isIdentifier:!0,unicode:936},Omega:{font:"symbol",isIdentifier:!0,unicode:937},Aopf:{font:"symbol",isIdentifier:!0,unicode:120120},Bopf:{font:"symbol",isIdentifier:!0,unicode:120121},Copf:{font:"symbol",isIdentifier:!0,unicode:8450},Dopf:{font:"symbol",isIdentifier:!0,unicode:120123},Eopf:{font:"symbol",isIdentifier:!0,unicode:120124},Fopf:{font:"symbol",isIdentifier:!0,unicode:120125},Gopf:{font:"symbol",isIdentifier:!0,
unicode:120126},Hopf:{font:"symbol",isIdentifier:!0,unicode:8461},Iopf:{font:"symbol",isIdentifier:!0,unicode:120128},Jopf:{font:"symbol",isIdentifier:!0,unicode:120129},Kopf:{font:"symbol",isIdentifier:!0,unicode:120130},Lopf:{font:"symbol",isIdentifier:!0,unicode:120131},Mopf:{font:"symbol",isIdentifier:!0,unicode:120132},Nopf:{font:"symbol",isIdentifier:!0,unicode:8469},Oopf:{font:"symbol",isIdentifier:!0,unicode:120134},Popf:{font:"symbol",isIdentifier:!0,unicode:8473},Qopf:{font:"symbol",isIdentifier:!0,
unicode:8474},Ropf:{font:"symbol",isIdentifier:!0,unicode:8477},Sopf:{font:"symbol",isIdentifier:!0,unicode:120138},Topf:{font:"symbol",isIdentifier:!0,unicode:120139},Uopf:{font:"symbol",isIdentifier:!0,unicode:120140},Vopf:{font:"symbol",isIdentifier:!0,unicode:120141},Wopf:{font:"symbol",isIdentifier:!0,unicode:120142},Xopf:{font:"symbol",isIdentifier:!0,unicode:120143},Yopf:{font:"symbol",isIdentifier:!0,unicode:120144},Zopf:{font:"symbol",isIdentifier:!0,unicode:8484},aopf:{font:"symbol",isIdentifier:!0,
unicode:120146},bopf:{font:"symbol",isIdentifier:!0,unicode:120147},copf:{font:"symbol",isIdentifier:!0,unicode:120148},dopf:{font:"symbol",isIdentifier:!0,unicode:120149},eopf:{font:"symbol",isIdentifier:!0,unicode:120150},fopf:{font:"symbol",isIdentifier:!0,unicode:120151},gopf:{font:"symbol",isIdentifier:!0,unicode:120152},hopf:{font:"symbol",isIdentifier:!0,unicode:120153},iopf:{font:"symbol",isIdentifier:!0,unicode:120154},jopf:{font:"symbol",isIdentifier:!0,unicode:120155},kopf:{font:"symbol",
isIdentifier:!0,unicode:120156},lopf:{font:"symbol",isIdentifier:!0,unicode:120157},mopf:{font:"symbol",isIdentifier:!0,unicode:120158},nopf:{font:"symbol",isIdentifier:!0,unicode:120159},oopf:{font:"symbol",isIdentifier:!0,unicode:120160},popf:{font:"symbol",isIdentifier:!0,unicode:120161},qopf:{font:"symbol",isIdentifier:!0,unicode:120162},ropf:{font:"symbol",isIdentifier:!0,unicode:120163},sopf:{font:"symbol",isIdentifier:!0,unicode:120164},topf:{font:"symbol",isIdentifier:!0,unicode:120165},uopf:{font:"symbol",
isIdentifier:!0,unicode:120166},vopf:{font:"symbol",isIdentifier:!0,unicode:120167},wopf:{font:"symbol",isIdentifier:!0,unicode:120168},xopf:{font:"symbol",isIdentifier:!0,unicode:120169},yopf:{font:"symbol",isIdentifier:!0,unicode:120170},zopf:{font:"symbol",isIdentifier:!0,unicode:120171},ascr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:119990},bscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119991},cscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,
hasXHeight:!0,unicode:119992},dscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119993},escr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:8495},fscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119995},gscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:8458},hscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119997},iscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119998},jscr:{font:"symbol",fontStyle:"italic",
isIdentifier:!0,unicode:119999},kscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:12E4},lscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:120001},mscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:120002},nscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:120003},oscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:8500},pscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:120005},
qscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:120006},rscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:120007},sscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:120008},tscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:120009},uscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:120010},vscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:120011},wscr:{font:"symbol",
fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:120012},xscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:120013},yscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:120014},zscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:120015},Ascr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119964},Bscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:8492},Cscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,
unicode:119966},Dscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119967},Escr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:8496},Fscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:8497},Gscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119970},Hscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:8459},Iscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:8464},Jscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119973},
Kscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119974},Lscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:8466},Mscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:8499},Nscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119977},Oscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119978},Pscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119979},Qscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119980},Rscr:{font:"symbol",
fontStyle:"italic",isIdentifier:!0,unicode:8475},Sscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119982},Tscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119983},Uscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119984},Vscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119985},Wscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119986},Xscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119987},Yscr:{font:"symbol",fontStyle:"italic",
isIdentifier:!0,unicode:119988},Zscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119989},afr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,hasXHeight:!0,unicode:120094},bfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120095},cfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,hasXHeight:!0,unicode:120096},dfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120097},efr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,hasXHeight:!0,unicode:120098},ffr:{font:"symbol",
fontStyle:"normal",isIdentifier:!0,unicode:120099},gfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,hasXHeight:!0,unicode:120100},hfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120101},ifr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120102},jfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120103},kfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120104},lfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120105},mfr:{font:"symbol",
fontStyle:"normal",isIdentifier:!0,hasXHeight:!0,unicode:120106},nfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,hasXHeight:!0,unicode:120107},ofr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,hasXHeight:!0,unicode:120108},pfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,hasXHeight:!0,unicode:120109},qfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,hasXHeight:!0,unicode:120110},rfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,hasXHeight:!0,unicode:120111},sfr:{font:"symbol",
fontStyle:"normal",isIdentifier:!0,hasXHeight:!0,unicode:120112},tfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120113},ufr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,hasXHeight:!0,unicode:120114},vfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,hasXHeight:!0,unicode:120115},wfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,hasXHeight:!0,unicode:120116},xfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,hasXHeight:!0,unicode:120117},yfr:{font:"symbol",fontStyle:"normal",
isIdentifier:!0,hasXHeight:!0,unicode:120118},zfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,hasXHeight:!0,unicode:120119},Afr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120068},Bfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120069},Cfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:8493},Dfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120071},Efr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120072},Ffr:{font:"symbol",fontStyle:"normal",
isIdentifier:!0,unicode:120073},Gfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120074},Hfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:8460},Ifr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:8465},Im:{font:"symbol",fontStyle:"normal",unicode:8465},Jfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120077},Kfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120078},Lfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120079},Mfr:{font:"symbol",
fontStyle:"normal",isIdentifier:!0,unicode:120080},Nfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120081},Ofr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120082},Pfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120083},Qfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120084},Rfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:8476},Re:{font:"symbol",fontStyle:"normal",unicode:8476},Sfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,
unicode:120086},Tfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120087},Ufr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120088},Vfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120089},Wfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120090},Xfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120091},Yfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120092},Zfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:8488},
Kelvin:{font:"symbol",isIdentifier:!0,unicode:8490},infty:{font:"symbol",hasXHeight:!0,unicode:8734},partial:{font:"symbol",unicode:8706},aleph:{font:"symbol",unicode:8501},downtack:{font:"symbol",unicode:8868},uptack:{font:"symbol",unicode:8869},angle:{font:"symbol",unicode:8736},ell:{font:"symbol",unicode:8467},hbar:{font:"symbol",unicode:8463},emptyset:{font:"symbol",unicode:8709},exists:{font:"symbol",unicode:8707},notexists:{font:"symbol",unicode:8708},forall:{font:"symbol",unicode:8704},imath:{font:"symbol",
fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:305},jmath:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:567},i:{font:"symbol",fontStyle:"normal",isIdentifier:!0,hasXHeight:!0,unicode:305},j:{font:"symbol",fontStyle:"normal",isIdentifier:!0,hasXHeight:!0,unicode:567},wp:{font:"symbol",unicode:8472},nabla:{font:"symbol",unicode:8711},ordPeriod:{font:"symbol",glyph:46,entity:"\x26period;"},dollar:{font:"symbol",unicode:36},ampersand:{font:"symbol",unicode:38},percent:{font:"symbol",
unicode:37},neg:{font:"symbol",unicode:172},macron:{font:"symbol",unicode:8254,alternateInputName:175,glyphTop:870,glyphBottom:720,accentDownShift:100,accentStretchy:!0,stretchy:!0,stretchyDefault:!0,width:500},macronleft:{font:"symbol",glyph:8254,width:500,glyphTop:870,glyphBottom:720,accentDownShift:100},macronright:{font:"symbol",glyph:8254,width:500},macronex:{font:"symbol",glyph:8254,width:500},underscore:{font:"symbol",unicode:95,glyphTop:-75,glyphBottom:-125,accentStretchy:!0,stretchyDefault:!0},
circumflex:{font:"stixsize1",unicode:710,alternateInputName:94,accentStretchy:!0,stretchyDefault:!1,glyphTop:770,glyphBottom:550,accentDownShift:-300,width:560},circumflexbig:{font:"stixsize2",glyph:710,glyphTop:780,glyphBottom:560,accentDownShift:-500,width:979},circumflexBig:{font:"stixsize3",glyph:710,glyphTop:780,glyphBottom:560,accentDownShift:-750,width:1460},circumflexbigg:{font:"stixsize4",glyph:710,glyphTop:800,glyphBottom:570,accentDownShift:-750,width:1886},circumflexBigg:{font:"stixsize5",
glyph:710,glyphTop:820,glyphBottom:570,accentDownShift:120,width:2328},caron:{font:"symbol",unicode:711,accentHeight:0.3},tildeAccent:{font:"symbol",unicode:126,spacing:e.BIN,accentHeight:0.6},smallTildeAccent:{font:"symbol",unicode:732,spacing:e.BIN,accentHeight:0.3},surd:{font:"symbol",unicode:8730},triangle:{font:"symbol",glyph:9653,entity:"\x26triangle;"},prime:{font:"symbol",unicode:8242,supDownShift:0.25},doubleprime:{font:"symbol",unicode:8243,supDownShift:0.25},sum:{font:"extra",glyph:61520,
largeOp:"sumdisplay",spacing:e.OP,width:1056,movableLimits:!0,entity:"\x26Sum;"},sumdisplay:{font:"extra",glyph:61528,size:1.4,spacing:e.OP,width:1444},prod:{font:"extra",glyph:61521,largeOp:"proddisplay",spacing:e.OP,width:944,movableLimits:!0,entity:"\x26prod;"},proddisplay:{font:"extra",glyph:61529,size:1.4,spacing:e.OP,width:1278},intop:{font:"extra",glyph:61522,size:1.11,largeOp:"intopdisplay",spacing:e.OP,width:609,subLeftShift:0.2,supRightShift:0.1,entity:"\x26Integral;"},intopdisplay:{font:"extra",
glyph:61530,size:2.222,spacing:e.OP,width:943,subLeftShift:0.4,supRightShift:0.1},contourintop:{font:"extra",glyph:61512,size:1.11,largeOp:"contourintopdisplay",spacing:e.OP,width:609,subLeftShift:0.2,supRightShift:0.1,entity:"\x26ContourIntegral;"},contourintopdisplay:{font:"extra",glyph:61513,size:2.222,spacing:e.OP,width:943,subLeftShift:0.4,supRightShift:0.1},fpartintop:{font:"extra",glyph:61567,size:1.11,largeOp:"fpartintopdisplay",spacing:e.OP,width:609,subLeftShift:0.2,supRightShift:0.1,entity:"\x26fpartint;"},
fpartintopdisplay:{font:"extra",glyph:61568,size:2.222,spacing:e.OP,width:943,subLeftShift:0.4,supRightShift:0.1},bigcup:{font:"extra",glyph:61523,largeOp:"bigcupdisplay",spacing:e.OP,width:833,movableLimits:!0,entity:"\x26bigcup;"},bigcupdisplay:{font:"extra",glyph:61647,size:1.4,spacing:e.OP,width:1111},bigcap:{font:"extra",glyph:61524,largeOp:"bigcapdisplay",spacing:e.OP,width:833,movableLimits:!0,entity:"\x26bigcap;"},bigcapdisplay:{font:"extra",glyph:61648,size:1.4,spacing:e.OP,width:1111},bigsqcup:{font:"extra",
glyph:61510,largeOp:"bigsqcupdisplay",spacing:e.OP,width:833,movableLimits:!0,entity:"\x26bigsqcup;"},bigsqcupdisplay:{font:"extra",glyph:61511,size:1.4,spacing:e.OP,width:1111},biguplus:{font:"extra",glyph:61525,largeOp:"bigcapdisplay",spacing:e.OP,width:833,movableLimits:!0,entity:"\x26biguplus;"},biguplusdisplay:{font:"extra",glyph:61651,size:1.4,spacing:e.OP,width:1111},bigwedge:{font:"extra",glyph:61526,largeOp:"bigwedgedisplay",spacing:e.OP,width:833,movableLimits:!0,entity:"\x26bigwedge;"},
bigwedgedisplay:{font:"extra",glyph:61534,size:1.4,spacing:e.OP,width:1111},bigvee:{font:"extra",glyph:61527,largeOp:"bigveedisplay",spacing:e.OP,width:833,movableLimits:!0,entity:"\x26bigvee;"},bigveedisplay:{font:"extra",glyph:61535,size:1.4,spacing:e.OP,width:1111},bigodot:{font:"extra",glyph:61514,largeOp:"bigodotdisplay",spacing:e.OP,width:1111,movableLimits:!0,entity:"\x26bigodot;"},bigodotdisplay:{font:"extra",glyph:61515,size:1.4,spacing:e.OP,width:1511},bigoplus:{font:"extra",glyph:61516,
largeOp:"bigoplusdisplay",spacing:e.OP,width:1111,movableLimits:!0,entity:"\x26bigoplus;"},bigoplusdisplay:{font:"extra",glyph:61517,size:1.4,spacing:e.OP,width:1511},bigotimes:{font:"extra",glyph:61518,largeOp:"bigotimesdisplay",spacing:e.OP,width:1111,movableLimits:!0,entity:"\x26bigotimes;"},bigotimesdisplay:{font:"extra",glyph:61519,size:1.4,spacing:e.OP,width:1511},"+":{font:"symbol",unicode:43,spacing:e.BIN},"-":{font:"symbol",unicode:8722,alternateInputName:45,spacing:e.BIN,entity:"-"},pm:{font:"symbol",
unicode:177,spacing:e.BIN},mp:{font:"symbol",unicode:8723,spacing:e.BIN},times:{font:"symbol",unicode:215,spacing:e.BIN},ast:{font:"symbol",unicode:8727,spacing:e.BIN},"*":{font:"symbol",glyph:8727,spacing:e.BIN,entity:"*"},div:{font:"symbol",unicode:247,spacing:e.BIN},oplus:{font:"symbol",unicode:8853,spacing:e.BIN},ominus:{font:"symbol",unicode:8854,spacing:e.BIN},otimes:{font:"symbol",unicode:8855,spacing:e.BIN},oslash:{font:"symbol",unicode:8856,spacing:e.BIN},odot:{font:"symbol",unicode:8857,
spacing:e.BIN},cup:{font:"symbol",unicode:8746,spacing:e.BIN},cap:{font:"symbol",unicode:8745,spacing:e.BIN},land:{font:"symbol",unicode:8743,spacing:e.BIN},lor:{font:"symbol",unicode:8744,spacing:e.BIN},amalg:{font:"symbol",unicode:10815,spacing:e.BIN},uplus:{font:"symbol",unicode:8846,spacing:e.BIN},bullet:{font:"symbol",unicode:8226,spacing:e.BIN},cdot:{font:"symbol",unicode:8901,spacing:e.BIN},middledot:{font:"symbol",unicode:183,spacing:e.BIN},circ:{font:"symbol",unicode:8728,spacing:e.BIN},
dagger:{font:"symbol",unicode:8224,spacing:e.BIN},ddagger:{font:"symbol",unicode:8225,spacing:e.BIN},diamond:{font:"symbol",unicode:9671,spacing:e.BIN},setminus:{font:"symbol",unicode:8726,spacing:e.BIN},sqcup:{font:"symbol",unicode:8852,spacing:e.BIN},sqcap:{font:"symbol",unicode:8851,spacing:e.BIN},triangleleft:{font:"symbol",unicode:9667,spacing:e.BIN},triangleright:{font:"symbol",unicode:9657,spacing:e.BIN},bigtriangleup:{font:"symbol",unicode:9651,spacing:e.BIN},bigtriangledown:{font:"symbol",
unicode:9661,spacing:e.BIN},bigcirc:{font:"symbol",unicode:9711,spacing:e.BIN},wr:{font:"symbol",unicode:8768,spacing:e.BIN},star:{font:"symbol",unicode:8902,spacing:e.BIN},"\x3c":{font:"symbol",unicode:60,spacing:e.REL,relation:!0},"\x3d":{font:"symbol",unicode:61,spacing:e.REL,relation:!0},"\x3d\x3d":{font:"symbol",spacing:e.REL,relation:!0},"\x3e":{font:"symbol",unicode:62,spacing:e.REL,relation:!0},":":{font:"symbol",unicode:58,spacing:e.REL},mid:{font:"symbol",glyph:124,delimiterType:"separator",
stretchy:!0,stretchyDefault:!0,spacing:e.REL,entity:"\x26vert;"},leq:{font:"symbol",unicode:8804,spacing:e.REL,relation:!0},geq:{font:"symbol",unicode:8805,spacing:e.REL,relation:!0},neq:{font:"symbol",unicode:8800,spacing:e.REL,relation:!0},notleq:{font:"symbol",unicode:8816,spacing:e.REL,relation:!0},notgeq:{font:"symbol",unicode:8817,spacing:e.REL,relation:!0},notlt:{font:"symbol",unicode:8814,spacing:e.REL,relation:!0},notgt:{font:"symbol",unicode:8815,spacing:e.REL,relation:!0},equiv:{font:"symbol",
unicode:8801,spacing:e.REL,relation:!0},notequiv:{font:"symbol",unicode:8802,spacing:e.REL,relation:!0},ll:{font:"symbol",unicode:8810,spacing:e.REL,relation:!0},gg:{font:"symbol",unicode:8811,spacing:e.REL,relation:!0},triangleq:{font:"symbol",unicode:8796,spacing:e.REL,relation:!0},doteq:{font:"symbol",unicode:8784,spacing:e.REL,relation:!0},approx:{font:"symbol",unicode:8776,spacing:e.REL,relation:!0},notapprox:{font:"symbol",unicode:8777,spacing:e.REL,relation:!0},cong:{font:"symbol",unicode:8773,
spacing:e.REL,relation:!0},notcong:{font:"symbol",unicode:8775,spacing:e.REL,relation:!0},sim:{font:"symbol",unicode:8764,spacing:e.REL,relation:!0,accentHeight:0.6},widetilde:{font:"extra",unicode:65374,spacing:e.REL,relation:!0,accentHeight:56<h("ff")?0.7:0.5},notsim:{font:"symbol",unicode:8769,spacing:e.REL,relation:!0},asympeq:{font:"symbol",unicode:8781,spacing:e.REL,relation:!0},simeq:{font:"symbol",unicode:8771,spacing:e.REL,relation:!0},notsimeq:{font:"symbol",unicode:8772,spacing:e.REL,relation:!0},
bowtie:{font:"symbol",unicode:8904,spacing:e.REL,relation:!0},models:{font:"symbol",unicode:8871,spacing:e.REL,relation:!0},notmodels:{font:"symbol",unicode:8877,spacing:e.REL,relation:!0},"in":{font:"symbol",unicode:8712,spacing:e.REL,relation:!0},notin:{font:"symbol",unicode:8713,spacing:e.REL,relation:!0},ni:{font:"symbol",unicode:8715,spacing:e.REL,relation:!0},notni:{font:"symbol",unicode:8716,spacing:e.REL,relation:!0},succ:{font:"symbol",unicode:8827,spacing:e.REL,relation:!0},notsucc:{font:"symbol",
unicode:8833,spacing:e.REL,relation:!0},succeq:{font:"symbol",unicode:8829,spacing:e.REL,relation:!0},notsucceq:{font:"symbol",unicode:8929,spacing:e.REL,relation:!0},prec:{font:"symbol",unicode:8826,spacing:e.REL,relation:!0},notprec:{font:"symbol",unicode:8832,spacing:e.REL,relation:!0},preceq:{font:"symbol",unicode:8828,spacing:e.REL,relation:!0},notpreceq:{font:"symbol",unicode:8928,spacing:e.REL,relation:!0},dashv:{font:"symbol",unicode:8867,spacing:e.REL,relation:!0},vdash:{font:"symbol",unicode:8866,
spacing:e.REL,relation:!0},parallel:{font:"symbol",unicode:8741,spacing:e.REL,relation:!0},notparallel:{font:"symbol",unicode:8742,spacing:e.REL,relation:!0},perp:{font:"symbol",glyph:8869,spacing:e.REL,relation:!0,entity:"\x26perp;"},propto:{font:"symbol",unicode:8733,spacing:e.REL,relation:!0},sqsubseteq:{font:"symbol",unicode:8849,spacing:e.REL,relation:!0},sqsupseteq:{font:"symbol",unicode:8850,spacing:e.REL,relation:!0},subset:{font:"symbol",unicode:8834,spacing:e.REL,relation:!0},supset:{font:"symbol",
unicode:8835,spacing:e.REL,relation:!0},notsubset:{font:"symbol",unicode:8836,spacing:e.REL,relation:!0},notsupset:{font:"symbol",unicode:8837,spacing:e.REL,relation:!0},subseteq:{font:"symbol",unicode:8838,spacing:e.REL,relation:!0},supseteq:{font:"symbol",unicode:8839,spacing:e.REL,relation:!0},notsubseteq:{font:"symbol",unicode:8840,spacing:e.REL,relation:!0},notsupseteq:{font:"symbol",unicode:8841,spacing:e.REL,relation:!0},combiningSlash:{font:"symbol",unicode:824,spacing:e.REL,relation:!0},
therefore:{font:"symbol",unicode:8756,spacing:e.REL,relation:!0},verticalbar:{font:"extra1",unicode:124,glyph:61615,delimiterType:"separator",stretchy:!0,stretchyDefault:!0,width:333,entity:"\x26vert;"},verticalbartp:{font:"extra",glyph:61615,size:0.6,width:333},verticalbarbt:{font:"extra",glyph:61615,size:0.58},verticalbarex:{font:"extra",glyph:61615,size:0.58},dblverticalbar:{font:"extra1",glyph:61612,delimiterType:"separator",stretchy:!0,stretchyDefault:!0,width:578,entity:"\x26Vert;"},dblverticalbartp:{font:"extra",
glyph:61616,size:0.58,width:556},dblverticalbarbt:{font:"extra",glyph:61616,size:0.6},dblverticalbarex:{font:"extra",glyph:61616,size:0.58},leftarrow:{font:"symbol",unicode:8592,spacing:e.REL,accentHeight:0.8,accentStretchy:!0,stretchyDefault:!0},leftarrowleft:{font:"stixvariants",glyph:8592,spacing:e.REL,accentHeight:0.8,width:415},leftarrowright:{font:"symbol",glyph:9135,spacing:e.REL,width:315},leftarrowex:{font:"symbol",glyph:9135,spacing:e.REL,width:315},rightarrow:{font:"symbol",unicode:8594,
spacing:e.REL,accentHeight:0.8,accentStretchy:!0,stretchyDefault:!0,width:926},rightarrowleft:{font:"symbol",glyph:9135,spacing:e.REL,accentHeight:0.8,width:315},rightarrowright:{font:"stixvariants",glyph:8594,spacing:e.REL,width:415},rightarrowex:{font:"symbol",glyph:9135,spacing:e.REL,width:315},leftrightarrow:{font:"symbol",unicode:8596,spacing:e.REL,accentHeight:0.8,accentStretchy:!0,stretchyDefault:!0},leftrightarrowleft:{font:"stixvariants",glyph:8592,spacing:e.REL,accentHeight:0.8,width:415},
leftrightarrowright:{font:"stixvariants",glyph:8594,spacing:e.REL,width:415},leftrightarrowex:{font:"symbol",glyph:9135,spacing:e.REL,width:315},longleftarrow:{font:"symbol",unicode:10229,spacing:e.REL,accentHeight:0.8},longrightarrow:{font:"symbol",unicode:10230,spacing:e.REL,accentHeight:0.8},longleftrightarrow:{font:"symbol",unicode:10231,spacing:e.REL,accentHeight:0.8},Leftarrow:{font:"symbol",unicode:8656,spacing:e.REL,accentHeight:0.8},Rightarrow:{font:"symbol",unicode:8658,spacing:e.REL,accentHeight:0.8},
Leftrightarrow:{font:"symbol",unicode:8660,spacing:e.REL,accentHeight:0.8},Longleftarrow:{font:"symbol",unicode:10232,spacing:e.REL,accentHeight:0.8},Longrightarrow:{font:"symbol",unicode:10233,spacing:e.REL,accentHeight:0.8},Longleftrightarrow:{font:"symbol",unicode:10234,spacing:e.REL,accentHeight:0.8},uparrow:{font:"symbol",unicode:8593,spacing:e.REL},downarrow:{font:"symbol",unicode:8595,spacing:e.REL},updownarrow:{font:"symbol",unicode:8597,spacing:e.REL},nwarrow:{font:"symbol",unicode:8598,
spacing:e.REL},nearrow:{font:"symbol",unicode:8599,spacing:e.REL},searrow:{font:"symbol",unicode:8600,spacing:e.REL},swarrow:{font:"symbol",unicode:8601,spacing:e.REL},leadsto:{font:"symbol",unicode:8605,spacing:e.REL},mapsto:{font:"symbol",unicode:8614,spacing:e.REL},longmapsto:{font:"symbol",unicode:10236,spacing:e.REL},hookleftarrow:{font:"symbol",unicode:8617,spacing:e.REL,accentHeight:0.8},hookrightarrow:{font:"symbol",unicode:8618,spacing:e.REL,accentHeight:0.8},crarr:{font:"symbol",unicode:8629,
spacing:e.REL},leftharpoonup:{font:"symbol",unicode:8636,spacing:e.REL,accentHeight:0.8},leftharpoondown:{font:"symbol",unicode:8637,spacing:e.REL,accentHeight:0.8},rightharpoonup:{font:"symbol",unicode:8640,spacing:e.REL,accentHeight:0.8},rightharpoondown:{font:"symbol",unicode:8641,spacing:e.REL,accentHeight:0.8},rightleftharpoons:{font:"symbol",unicode:8652,spacing:e.REL,accentHeight:0.8},Uparrow:{font:"symbol",unicode:8657,spacing:e.REL},Downarrow:{font:"symbol",unicode:8659,spacing:e.REL},Updownarrow:{font:"symbol",
unicode:8661,spacing:e.REL},parenleft:{font:"extra1",unicode:40,delimiterType:"open",stretchy:!0,stretchyDefault:!0,spacing:e.OPEN},parenleftbig:{font:"extra2",glyph:40,size:1.2,spacing:e.OPEN,width:458},parenleftBig:{font:"extra3",glyph:40,size:1.8,spacing:e.OPEN,width:597},parenleftbigg:{font:"extra4",glyph:40,size:2.4,spacing:e.OPEN,width:736},parenleftBigg:{font:"extra5",glyph:40,size:3,spacing:e.OPEN,width:792},parenlefttp:{font:"extra",glyph:61488,size:1.8,xOffset:291,width:875},parenleftbt:{font:"extra",
glyph:61504,size:1.8},parenleftex:{font:"extra",glyph:61506,size:0.58},parenright:{font:"extra1",unicode:41,delimiterType:"close",stretchy:!0,stretchyDefault:!0,spacing:e.CLOSE},parenrightbig:{font:"extra2",glyph:41,size:1.2,spacing:e.CLOSE,width:458},parenrightBig:{font:"extra3",glyph:41,size:1.8,spacing:e.CLOSE,width:597},parenrightbigg:{font:"extra4",glyph:41,size:2.4,spacing:e.CLOSE,width:736},parenrightBigg:{font:"extra5",glyph:41,size:3,spacing:e.CLOSE,width:792},parenrighttp:{font:"extra",
glyph:61489,size:1.8,xOffset:1095,width:875},parenrightbt:{font:"extra",glyph:61505,size:1.8},parenrightex:{font:"extra",glyph:61507,size:0.58},bracketleft:{font:"extra1",unicode:91,delimiterType:"open",stretchy:!0,stretchyDefault:!0,spacing:e.OPEN},bracketleftbig:{font:"extra2",glyph:91,size:1.2,spacing:e.OPEN,width:417},bracketleftBig:{font:"extra3",glyph:91,size:1.8,spacing:e.OPEN,width:472},bracketleftbigg:{font:"extra4",glyph:91,size:2.4,spacing:e.OPEN,width:528},bracketleftBigg:{font:"extra5",
glyph:91,size:3,spacing:e.OPEN,width:583},bracketlefttp:{font:"extra",glyph:61490,size:1.8,width:667},bracketleftbt:{font:"extra",glyph:61492,size:1.8},bracketleftex:{font:"extra",glyph:61494,size:0.58},bracketright:{font:"extra1",unicode:93,delimiterType:"close",stretchy:!0,stretchyDefault:!0,spacing:e.CLOSE},bracketrightbig:{font:"extra2",glyph:93,size:1.2,spacing:e.CLOSE,width:417},bracketrightBig:{font:"extra3",glyph:93,size:1.8,spacing:e.CLOSE,width:472},bracketrightbigg:{font:"extra4",glyph:93,
size:2.4,spacing:e.CLOSE,width:528},bracketrightBigg:{font:"extra5",glyph:93,size:3,spacing:e.CLOSE,width:583},bracketrighttp:{font:"extra",glyph:61491,size:1.8,width:667},bracketrightbt:{font:"extra",glyph:61493,size:1.8},bracketrightex:{font:"extra",glyph:61495,size:0.58},whitesquarebracketleft:{font:"extra1",unicode:10214,delimiterType:"open",stretchy:!0,stretchyDefault:!0,spacing:e.OPEN},whitesquarebracketleftbig:{font:"extra2",glyph:10214,size:1.2,spacing:e.OPEN,width:416},whitesquarebracketleftBig:{font:"extra3",
glyph:10214,size:1.8,spacing:e.OPEN,width:471},whitesquarebracketleftbigg:{font:"extra4",glyph:10214,size:2.4,spacing:e.OPEN,width:527},whitesquarebracketleftBigg:{font:"extra5",glyph:10214,size:3,spacing:e.OPEN,width:582},whitesquarebracketlefttp:{font:"extra",glyph:61482,size:1.8,width:666},whitesquarebracketleftbt:{font:"extra",glyph:61484,size:1.8},whitesquarebracketleftex:{font:"extra",glyph:61486,size:0.58},whitesquarebracketright:{font:"extra1",unicode:10215,delimiterType:"close",stretchy:!0,
stretchyDefault:!0,spacing:e.CLOSE},whitesquarebracketrightbig:{font:"extra2",glyph:10215,size:1.2,spacing:e.CLOSE,width:416},whitesquarebracketrightBig:{font:"extra3",glyph:10215,size:1.8,spacing:e.CLOSE,width:471},whitesquarebracketrightbigg:{font:"extra4",glyph:10215,size:2.4,spacing:e.CLOSE,width:527},whitesquarebracketrightBigg:{font:"extra5",glyph:10215,size:3,spacing:e.CLOSE,width:582},whitesquarebracketrighttp:{font:"extra",glyph:61483,size:1.8,width:666},whitesquarebracketrightbt:{font:"extra",
glyph:61485,size:1.8},whitesquarebracketrightex:{font:"extra",glyph:61487,size:0.58},braceleft:{font:"extra1",unicode:123,delimiterType:"open",stretchy:!0,stretchyDefault:!0,spacing:e.OPEN,width:500},braceleftbig:{font:"extra2",glyph:123,size:1.2,spacing:e.OPEN,width:583},braceleftBig:{font:"extra3",glyph:123,size:1.8,spacing:e.OPEN,width:667},braceleftbigg:{font:"extra4",glyph:123,size:2.4,spacing:e.OPEN,width:750},braceleftBigg:{font:"extra5",glyph:123,size:3,spacing:e.OPEN,width:806},bracelefttp:{font:"extra",
glyph:61496,size:0.9,xOffset:555,width:889},braceleftbt:{font:"extra",glyph:61498,size:0.9},braceleftmid:{font:"extra",glyph:61500,size:1.8},braceleftex:{font:"extra",glyph:61502,size:0.38},braceright:{font:"extra1",unicode:125,delimiterType:"close",stretchy:!0,stretchyDefault:!0,spacing:e.CLOSE,width:500},bracerightbig:{font:"extra2",glyph:125,size:1.2,spacing:e.CLOSE,width:583},bracerightBig:{font:"extra3",glyph:125,size:1.8,spacing:e.CLOSE,width:667},bracerightbigg:{font:"extra4",glyph:125,size:2.4,
spacing:e.CLOSE,width:750},bracerightBigg:{font:"extra5",glyph:125,size:3,spacing:e.CLOSE,width:806},bracerighttp:{font:"extra",glyph:61497,size:0.9,xOffset:555,width:889},bracerightbt:{font:"extra",glyph:61499,size:0.9},bracerightmid:{font:"extra",glyph:61501,size:1.8},bracerightex:{font:"extra",glyph:61502,size:0.38},overbrace:{font:"stixsize1",unicode:9182,glyphTop:140,glyphBottom:-90,accentDownShift:-950,accentStretchy:!0,stretchyDefault:!0,width:926},overbracebig:{font:"stixsize2",glyph:9182,
glyphTop:150,glyphBottom:-80,accentDownShift:-1200,width:1460},overbraceBig:{font:"stixsize3",glyph:9182,glyphTop:160,glyphBottom:-90,accentDownShift:-1380,width:1886},overbracebigg:{font:"stixsize4",glyph:9182,glyphTop:180,glyphBottom:-90,accentDownShift:-1350,width:2328},overbraceBigg:{font:"stixsize5",glyph:9182,glyphTop:190,glyphBottom:-90,accentDownShift:-550,width:3238},overbraceleft:{font:"stixsize0",glyph:57659,glyphTop:1220,glyphBottom:510,accentDownShift:280,width:897},overbraceright:{font:"stixsize0",
glyph:57660,width:897},overbracemid:{font:"stixsize0",glyph:57664,width:1844},overbraceex:{font:"stixsize0",glyph:57674,width:633},underbrace:{font:"stixsize1",unicode:9183,glyphTop:790,glyphBottom:565,accentDownShift:-250,accentStretchy:!0,stretchyDefault:!0,width:926},underbracebig:{font:"stixsize2",glyph:9183,glyphTop:800,glyphBottom:570,accentDownShift:-480,width:1460},underbraceBig:{font:"stixsize3",glyph:9183,glyphTop:820,glyphBottom:570,accentDownShift:-680,width:1886},underbracebigg:{font:"stixsize4",
glyph:9183,glyphTop:840,glyphBottom:570,accentDownShift:-650,width:2328},underbraceBigg:{font:"stixsize5",glyph:9183,glyphTop:850,glyphBottom:570,accentDownShift:155,width:3238},underbraceleft:{font:"stixsize0",glyph:57661,glyphTop:180,glyphBottom:-530,accentDownShift:-700,width:897},underbraceright:{font:"stixsize0",glyph:57662,width:897},underbracemid:{font:"stixsize0",glyph:57665,width:1844},underbraceex:{font:"stixsize0",glyph:57675,width:633},floorleft:{font:"extra1",glyph:65,delimiterType:"open",
stretchy:!0,stretchyDefault:!0,spacing:e.OPEN,width:444,alternateInputName:8970,entity:"\x26lfloor;"},floorleftbig:{font:"extra2",glyph:65,size:1.2,spacing:e.OPEN,width:472},floorleftBig:{font:"extra3",glyph:65,size:1.8,spacing:e.OPEN,width:528},floorleftbigg:{font:"extra4",glyph:65,size:2.4,spacing:e.OPEN,width:583},floorleftBigg:{font:"extra5",glyph:65,size:3,spacing:e.OPEN,width:639},floorlefttp:{font:"extra",glyph:61494,size:0.6,width:667},floorleftbt:{font:"extra",glyph:61492,size:1.8},floorleftex:{font:"extra",
glyph:61494,size:0.58},floorright:{font:"extra1",glyph:66,delimiterType:"close",stretchy:!0,stretchyDefault:!0,spacing:e.CLOSE,width:444,alternateInputName:8971,entity:"\x26rfloor;"},floorrightbig:{font:"extra2",glyph:66,size:1.2,spacing:e.CLOSE,width:472},floorrightBig:{font:"extra3",glyph:66,size:1.8,spacing:e.CLOSE,width:528},floorrightbigg:{font:"extra4",glyph:66,size:2.4,spacing:e.CLOSE,width:583},floorrightBigg:{font:"extra5",glyph:66,size:3,spacing:e.CLOSE,width:639},floorrighttp:{font:"extra",
glyph:61495,size:0.6,width:667},floorrightbt:{font:"extra",glyph:61493,size:1.8},floorrightex:{font:"extra",glyph:61495,size:0.58},ceilleft:{font:"extra1",glyph:67,delimiterType:"open",stretchy:!0,stretchyDefault:!0,spacing:e.OPEN,width:444,alternateInputName:8968,entity:"\x26lceil;"},ceilleftbig:{font:"extra2",glyph:67,size:1.2,spacing:e.OPEN,width:472},ceilleftBig:{font:"extra3",glyph:67,size:1.8,spacing:e.OPEN,width:528},ceilleftbigg:{font:"extra4",glyph:67,size:2.4,spacing:e.OPEN,width:583},ceilleftBigg:{font:"extra5",
glyph:67,size:3,spacing:e.OPEN,width:639},ceillefttp:{font:"extra",glyph:61490,size:1.8,width:667},ceilleftbt:{font:"extra",glyph:61494,size:0.6},ceilleftex:{font:"extra",glyph:61494,size:0.58},ceilright:{font:"extra1",glyph:68,delimiterType:"close",stretchy:!0,stretchyDefault:!0,spacing:e.CLOSE,width:444,alternateInputName:8969,entity:"\x26rceil;"},ceilrightbig:{font:"extra2",glyph:68,size:1.2,spacing:e.CLOSE,width:472},ceilrightBig:{font:"extra3",glyph:68,size:1.8,spacing:e.CLOSE,width:528},ceilrightbigg:{font:"extra4",
glyph:68,size:2.4,spacing:e.CLOSE,width:583},ceilrightBigg:{font:"extra5",glyph:68,size:3,spacing:e.CLOSE,width:639},ceilrighttp:{font:"extra",glyph:61491,size:1.8,width:667},ceilrightbt:{font:"extra",glyph:61495,size:0.6},ceilrightex:{font:"extra",glyph:61495,size:0.58},anglebracketleft:{font:"extra1",glyph:69,delimiterType:"open",stretchy:!0,stretchyDefault:!0,spacing:e.OPEN,width:389,alternateInputName:9001,entity:"\x26LeftAngleBracket;"},anglebracketleftbig:{font:"extra2",glyph:69,size:1.2,spacing:e.OPEN,
width:472},anglebracketleftBig:{font:"extra3",glyph:69,size:1.8,spacing:e.OPEN,width:611},anglebracketleftbigg:{font:"extra4",glyph:69,size:2.4,spacing:e.OPEN,width:750},anglebracketleftBigg:{font:"extra5",glyph:69,size:3,spacing:e.OPEN,width:806},anglebracketright:{font:"extra1",glyph:70,delimiterType:"close",stretchy:!0,stretchyDefault:!0,spacing:e.CLOSE,width:389,alternateInputName:9002,entity:"\x26RightAngleBracket;"},anglebracketrightbig:{font:"extra2",glyph:70,size:1.2,spacing:e.CLOSE,width:472},
anglebracketrightBig:{font:"extra3",glyph:70,size:1.8,spacing:e.CLOSE,width:611},anglebracketrightbigg:{font:"extra4",glyph:70,size:2.4,spacing:e.CLOSE,width:750},anglebracketrightBigg:{font:"extra5",glyph:70,size:3,spacing:e.CLOSE,width:806},slash:{font:"extra1",unicode:47,stretchy:!0,stretchyDefault:!1,width:500},slashbig:{font:"extra2",glyph:47,size:1.2,width:578},slashBig:{font:"extra3",glyph:47,size:1.8,width:811},slashbigg:{font:"extra4",glyph:47,size:2.4,width:1044},slashBigg:{font:"extra5",
glyph:47,size:3,width:1278},backslash:{font:"extra1",glyph:92,alternateInputName:92,stretchy:!0,stretchyDefault:!1},backslashbig:{font:"extra2",glyph:92,size:1.2,width:578},backslashBig:{font:"extra3",glyph:92,size:1.8,width:811},backslashbigg:{font:"extra4",glyph:92,size:2.4,width:1044},backslashBigg:{font:"extra5",glyph:92,size:3,width:1278},"!":{font:"symbol",unicode:33,spacing:e.CLOSE},"?":{font:"symbol",unicode:63,spacing:e.CLOSE},colonPunct:{font:"symbol",glyph:58,delimiterType:"separator",
spacing:e.PUNCT,entity:":"},",":{font:"symbol",unicode:44,delimiterType:"separator",spacing:e.PUNCT},";":{font:"symbol",unicode:59,delimiterType:"separator",spacing:e.PUNCT},ldotp:{font:"symbol",unicode:46,spacing:e.PUNCT},cdotp:{font:"symbol",glyph:8901,spacing:e.PUNCT,entity:"\x26cdot;"},dotabove:{font:"text",unicode:729,accentHeight:0.3},diaresis:{font:"text",unicode:168,accentHeight:0.3},breve:{font:"text",unicode:728,accentHeight:0.3},grave:{font:"text",unicode:96,accentHeight:0.3},acute:{font:"text",
unicode:180,accentHeight:0.3},ldots:{font:"symbol",unicode:8230,spacing:e.INNER},cdots:{font:"symbol",unicode:8943,spacing:e.INNER},vdots:{font:"symbol",unicode:8942,spacing:e.INNER},ddots:{font:"symbol",unicode:8945,spacing:e.INNER},radical:{font:"extra1",glyph:71,size:1,width:833,entity:"\x26Sqrt;"},radicalbig:{font:"extra2",glyph:71,size:1.2,width:1E3},radicalBig:{font:"extra3",glyph:71,size:1.8,width:1E3},radicalbigg:{font:"extra4",glyph:71,size:2.4,width:1E3},radicalBigg:{font:"extra5",glyph:71,
size:3,width:1E3},radicaltp:{font:"extra",glyph:61558,yOffset:100,size:0.6,xOffset:702,width:1056},radicalbt:{font:"extra",glyph:61556,size:1.8},radicalex:{font:"extra",glyph:61557,size:0.6},imaginaryi:{font:"symbol",fontStyle:"normal",glyph:105,entity:"i"},exponentiale:{font:"symbol",fontStyle:"normal",glyph:101,entity:"e"},InvisibleTimes:{font:"symbol",unicode:8201},InvisibleComma:{font:"symbol",glyph:8201},ZeroWidthSpace:{font:"symbol",unicode:8203}}}},b=c.initSymbolMap(),a,f={},k,l;c.symbolMap=
b;for(a in b)b.hasOwnProperty(a)&&(k=b[a],k.unicode&&(l=d.fromCodePoint(k.unicode),f[l]=a),k.alternateInputName&&(l=d.fromCodePoint(k.alternateInputName),f[l]=a));c.unicodeMap=f;return c})},"MW/equations/renderer/model/SpacingClasses":function(){define([],function(){return{ORD:0,OP:1,BIN:2,REL:3,OPEN:4,CLOSE:5,PUNCT:6,INNER:7,NEST:8}})},"MW/equations/renderer/model/utils/MathMLEntities":function(){define([],function(){var h={"\x26AElig;":"\u00c6","\x26AMP;":"\x26","\x26Aacute;":"\u00c1","\x26Abreve;":"\u0102",
"\x26Acirc;":"\u00c2","\x26Acy;":"\u0410","\x26Afr;":"\ud835\udd04","\x26Agrave;":"\u00c0","\x26Alpha;":"\u0391","\x26Amacr;":"\u0100","\x26And;":"\u2a53","\x26Aogon;":"\u0104","\x26Aopf;":"\ud835\udd38","\x26ApplyFunction;":"\u2061","\x26Aring;":"\u00c5","\x26Ascr;":"\ud835\udc9c","\x26Assign;":"\u2254","\x26Atilde;":"\u00c3","\x26Auml;":"\u00c4","\x26Backslash;":"\u2216","\x26Barv;":"\u2ae7","\x26Barwed;":"\u2306","\x26Bcy;":"\u0411","\x26Because;":"\u2235","\x26Bernoullis;":"\u212c","\x26Beta;":"\u0392",
"\x26Bfr;":"\ud835\udd05","\x26Bopf;":"\ud835\udd39","\x26Breve;":"\u02d8","\x26Bscr;":"\u212c","\x26Bumpeq;":"\u224e","\x26CHcy;":"\u0427","\x26COPY;":"\u00a9","\x26Cacute;":"\u0106","\x26Cap;":"\u22d2","\x26CapitalDifferentialD;":"\u2145","\x26Cayleys;":"\u212d","\x26Ccaron;":"\u010c","\x26Ccedil;":"\u00c7","\x26Ccirc;":"\u0108","\x26Cconint;":"\u2230","\x26Cdot;":"\u010a","\x26Cedilla;":"\u00b8","\x26CenterDot;":"\u00b7","\x26Cfr;":"\u212d","\x26Chi;":"\u03a7","\x26CircleDot;":"\u2299","\x26CircleMinus;":"\u2296",
"\x26CirclePlus;":"\u2295","\x26CircleTimes;":"\u2297","\x26ClockwiseContourIntegral;":"\u2232","\x26CloseCurlyDoubleQuote;":"\u201d","\x26CloseCurlyQuote;":"\u2019","\x26Colon;":"\u2237","\x26Colone;":"\u2a74","\x26Congruent;":"\u2261","\x26Conint;":"\u222f","\x26ContourIntegral;":"\u222e","\x26Copf;":"\u2102","\x26Coproduct;":"\u2210","\x26CounterClockwiseContourIntegral;":"\u2233","\x26Cross;":"\u2a2f","\x26Cscr;":"\ud835\udc9e","\x26Cup;":"\u22d3","\x26CupCap;":"\u224d","\x26DD;":"\u2145","\x26DDotrahd;":"\u2911",
"\x26DJcy;":"\u0402","\x26DScy;":"\u0405","\x26DZcy;":"\u040f","\x26Dagger;":"\u2021","\x26Darr;":"\u21a1","\x26Dashv;":"\u2ae4","\x26Dcaron;":"\u010e","\x26Dcy;":"\u0414","\x26Del;":"\u2207","\x26Delta;":"\u0394","\x26Dfr;":"\ud835\udd07","\x26DiacriticalAcute;":"\u00b4","\x26DiacriticalDot;":"\u02d9","\x26DiacriticalDoubleAcute;":"\u02dd","\x26DiacriticalGrave;":"`","\x26DiacriticalTilde;":"\u02dc","\x26Diamond;":"\u22c4","\x26DifferentialD;":"\u2146","\x26Dopf;":"\ud835\udd3b","\x26Dot;":"\u00a8",
"\x26DotDot;":" \u20dc","\x26DotEqual;":"\u2250","\x26DoubleContourIntegral;":"\u222f","\x26DoubleDot;":"\u00a8","\x26DoubleDownArrow;":"\u21d3","\x26DoubleLeftArrow;":"\u21d0","\x26DoubleLeftRightArrow;":"\u21d4","\x26DoubleLeftTee;":"\u2ae4","\x26DoubleLongLeftArrow;":"\u27f8","\x26DoubleLongLeftRightArrow;":"\u27fa","\x26DoubleLongRightArrow;":"\u27f9","\x26DoubleRightArrow;":"\u21d2","\x26DoubleRightTee;":"\u22a8","\x26DoubleUpArrow;":"\u21d1","\x26DoubleUpDownArrow;":"\u21d5","\x26DoubleVerticalBar;":"\u2225",
"\x26DownArrow;":"\u2193","\x26DownArrowBar;":"\u2913","\x26DownArrowUpArrow;":"\u21f5","\x26DownBreve;":" \u0311","\x26DownLeftRightVector;":"\u2950","\x26DownLeftTeeVector;":"\u295e","\x26DownLeftVector;":"\u21bd","\x26DownLeftVectorBar;":"\u2956","\x26DownRightTeeVector;":"\u295f","\x26DownRightVector;":"\u21c1","\x26DownRightVectorBar;":"\u2957","\x26DownTee;":"\u22a4","\x26DownTeeArrow;":"\u21a7","\x26Downarrow;":"\u21d3","\x26Dscr;":"\ud835\udc9f","\x26Dstrok;":"\u0110","\x26ENG;":"\u014a",
"\x26ETH;":"\u00d0","\x26Eacute;":"\u00c9","\x26Ecaron;":"\u011a","\x26Ecirc;":"\u00ca","\x26Ecy;":"\u042d","\x26Edot;":"\u0116","\x26Efr;":"\ud835\udd08","\x26Egrave;":"\u00c8","\x26Element;":"\u2208","\x26Emacr;":"\u0112","\x26EmptySmallSquare;":"\u25fb","\x26EmptyVerySmallSquare;":"\u25ab","\x26Eogon;":"\u0118","\x26Eopf;":"\ud835\udd3c","\x26Epsilon;":"\u0395","\x26Equal;":"\u2a75","\x26EqualTilde;":"\u2242","\x26Equilibrium;":"\u21cc","\x26Escr;":"\u2130","\x26Esim;":"\u2a73","\x26Eta;":"\u0397",
"\x26Euml;":"\u00cb","\x26Exists;":"\u2203","\x26ExponentialE;":"\u2147","\x26Fcy;":"\u0424","\x26Ffr;":"\ud835\udd09","\x26FilledSmallSquare;":"\u25fc","\x26FilledVerySmallSquare;":"\u25aa","\x26Fopf;":"\ud835\udd3d","\x26ForAll;":"\u2200","\x26Fouriertrf;":"\u2131","\x26Fscr;":"\u2131","\x26GJcy;":"\u0403","\x26GT;":"\x3e","\x26Gamma;":"\u0393","\x26Gammad;":"\u03dc","\x26Gbreve;":"\u011e","\x26Gcedil;":"\u0122","\x26Gcirc;":"\u011c","\x26Gcy;":"\u0413","\x26Gdot;":"\u0120","\x26Gfr;":"\ud835\udd0a",
"\x26Gg;":"\u22d9","\x26Gopf;":"\ud835\udd3e","\x26GreaterEqual;":"\u2265","\x26GreaterEqualLess;":"\u22db","\x26GreaterFullEqual;":"\u2267","\x26GreaterGreater;":"\u2aa2","\x26GreaterLess;":"\u2277","\x26GreaterSlantEqual;":"\u2a7e","\x26GreaterTilde;":"\u2273","\x26Gscr;":"\ud835\udca2","\x26Gt;":"\u226b","\x26HARDcy;":"\u042a","\x26Hacek;":"\u02c7","\x26Hat;":"^","\x26Hcirc;":"\u0124","\x26Hfr;":"\u210c","\x26HilbertSpace;":"\u210b","\x26Hopf;":"\u210d","\x26HorizontalLine;":"\u2500","\x26Hscr;":"\u210b",
"\x26Hstrok;":"\u0126","\x26HumpDownHump;":"\u224e","\x26HumpEqual;":"\u224f","\x26IEcy;":"\u0415","\x26IJlig;":"\u0132","\x26IOcy;":"\u0401","\x26Iacute;":"\u00cd","\x26Icirc;":"\u00ce","\x26Icy;":"\u0418","\x26Idot;":"\u0130","\x26Ifr;":"\u2111","\x26Igrave;":"\u00cc","\x26Im;":"\u2111","\x26Imacr;":"\u012a","\x26ImaginaryI;":"\u2148","\x26Implies;":"\u21d2","\x26Int;":"\u222c","\x26Integral;":"\u222b","\x26Intersection;":"\u22c2","\x26InvisibleComma;":"\u2063","\x26InvisibleTimes;":"\u2062","\x26Iogon;":"\u012e",
"\x26Iopf;":"\ud835\udd40","\x26Iota;":"\u0399","\x26Iscr;":"\u2110","\x26Itilde;":"\u0128","\x26Iukcy;":"\u0406","\x26Iuml;":"\u00cf","\x26Jcirc;":"\u0134","\x26Jcy;":"\u0419","\x26Jfr;":"\ud835\udd0d","\x26Jopf;":"\ud835\udd41","\x26Jscr;":"\ud835\udca5","\x26Jsercy;":"\u0408","\x26Jukcy;":"\u0404","\x26KHcy;":"\u0425","\x26KJcy;":"\u040c","\x26Kappa;":"\u039a","\x26Kcedil;":"\u0136","\x26Kcy;":"\u041a","\x26Kfr;":"\ud835\udd0e","\x26Kopf;":"\ud835\udd42","\x26Kscr;":"\ud835\udca6","\x26LJcy;":"\u0409",
"\x26LT;":"\x3c","\x26Lacute;":"\u0139","\x26Lambda;":"\u039b","\x26Lang;":"\u27ea","\x26Laplacetrf;":"\u2112","\x26Larr;":"\u219e","\x26Lcaron;":"\u013d","\x26Lcedil;":"\u013b","\x26Lcy;":"\u041b","\x26LeftAngleBracket;":"\u27e8","\x26LeftArrow;":"\u2190","\x26LeftArrowBar;":"\u21e4","\x26LeftArrowRightArrow;":"\u21c6","\x26LeftCeiling;":"\u2308","\x26LeftDoubleBracket;":"\u27e6","\x26LeftDownTeeVector;":"\u2961","\x26LeftDownVector;":"\u21c3","\x26LeftDownVectorBar;":"\u2959","\x26LeftFloor;":"\u230a",
"\x26LeftRightArrow;":"\u2194","\x26LeftRightVector;":"\u294e","\x26LeftTee;":"\u22a3","\x26LeftTeeArrow;":"\u21a4","\x26LeftTeeVector;":"\u295a","\x26LeftTriangle;":"\u22b2","\x26LeftTriangleBar;":"\u29cf","\x26LeftTriangleEqual;":"\u22b4","\x26LeftUpDownVector;":"\u2951","\x26LeftUpTeeVector;":"\u2960","\x26LeftUpVector;":"\u21bf","\x26LeftUpVectorBar;":"\u2958","\x26LeftVector;":"\u21bc","\x26LeftVectorBar;":"\u2952","\x26Leftarrow;":"\u21d0","\x26Leftrightarrow;":"\u21d4","\x26LessEqualGreater;":"\u22da",
"\x26LessFullEqual;":"\u2266","\x26LessGreater;":"\u2276","\x26LessLess;":"\u2aa1","\x26LessSlantEqual;":"\u2a7d","\x26LessTilde;":"\u2272","\x26Lfr;":"\ud835\udd0f","\x26Ll;":"\u22d8","\x26Lleftarrow;":"\u21da","\x26Lmidot;":"\u013f","\x26LongLeftArrow;":"\u27f5","\x26LongLeftRightArrow;":"\u27f7","\x26LongRightArrow;":"\u27f6","\x26Longleftarrow;":"\u27f8","\x26Longleftrightarrow;":"\u27fa","\x26Longrightarrow;":"\u27f9","\x26Lopf;":"\ud835\udd43","\x26LowerLeftArrow;":"\u2199","\x26LowerRightArrow;":"\u2198",
"\x26Lscr;":"\u2112","\x26Lsh;":"\u21b0","\x26Lstrok;":"\u0141","\x26Lt;":"\u226a","\x26Map;":"\u2905","\x26Mcy;":"\u041c","\x26MediumSpace;":"\u00a0","\x26Mellintrf;":"\u2133","\x26Mfr;":"\ud835\udd10","\x26MinusPlus;":"\u2213","\x26Mopf;":"\ud835\udd44","\x26Mscr;":"\u2133","\x26Mu;":"\u039c","\x26NJcy;":"\u040a","\x26Nacute;":"\u0143","\x26Ncaron;":"\u0147","\x26Ncedil;":"\u0145","\x26Ncy;":"\u041d","\x26NegativeMediumSpace;":"\u200b","\x26NegativeThickSpace;":"\u200b","\x26NegativeThinSpace;":"\u200b",
"\x26NegativeVeryThinSpace;":"\u200b","\x26NestedGreaterGreater;":"\u226b","\x26NestedLessLess;":"\u226a","\x26NewLine;":"\n","\x26Nfr;":"\ud835\udd11","\x26NoBreak;":"\u2060","\x26NonBreakingSpace;":"\u00a0","\x26Nopf;":"\u2115","\x26Not;":"\u2aec","\x26NotCongruent;":"\u2262","\x26NotCupCap;":"\u226d","\x26NotDoubleVerticalBar;":"\u2226","\x26NotElement;":"\u2209","\x26NotEqual;":"\u2260","\x26NotEqualTilde;":"\u2242\u0338","\x26NotExists;":"\u2204","\x26NotGreater;":"\u226f","\x26NotGreaterEqual;":"\u2271",
"\x26NotGreaterFullEqual;":"\u2267\u0338","\x26NotGreaterGreater;":"\u226b\u0338","\x26NotGreaterLess;":"\u2279","\x26NotGreaterSlantEqual;":"\u2a7e\u0338","\x26NotGreaterTilde;":"\u2275","\x26NotHumpDownHump;":"\u224e\u0338","\x26NotHumpEqual;":"\u224f\u0338","\x26NotLeftTriangle;":"\u22ea","\x26NotLeftTriangleBar;":"\u29cf\u0338","\x26NotLeftTriangleEqual;":"\u22ec","\x26NotLess;":"\u226e","\x26NotLessEqual;":"\u2270","\x26NotLessGreater;":"\u2278","\x26NotLessLess;":"\u226a\u0338","\x26NotLessSlantEqual;":"\u2a7d\u0338",
"\x26NotLessTilde;":"\u2274","\x26NotNestedGreaterGreater;":"\u2aa2\u0338","\x26NotNestedLessLess;":"\u2aa1\u0338","\x26NotPrecedes;":"\u2280","\x26NotPrecedesEqual;":"\u2aaf\u0338","\x26NotPrecedesSlantEqual;":"\u22e0","\x26NotReverseElement;":"\u220c","\x26NotRightTriangle;":"\u22eb","\x26NotRightTriangleBar;":"\u29d0\u0338","\x26NotRightTriangleEqual;":"\u22ed","\x26NotSquareSubset;":"\u228f\u0338","\x26NotSquareSubsetEqual;":"\u22e2","\x26NotSquareSuperset;":"\u2290\u0338","\x26NotSquareSupersetEqual;":"\u22e3",
"\x26NotSubset;":"\u2282\u20d2","\x26NotSubsetEqual;":"\u2288","\x26NotSucceeds;":"\u2281","\x26NotSucceedsEqual;":"\u2ab0\u0338","\x26NotSucceedsSlantEqual;":"\u22e1","\x26NotSucceedsTilde;":"\u227f\u0338","\x26NotSuperset;":"\u2283\u20d2","\x26NotSupersetEqual;":"\u2289","\x26NotTilde;":"\u2241","\x26NotTildeEqual;":"\u2244","\x26NotTildeFullEqual;":"\u2247","\x26NotTildeTilde;":"\u2249","\x26NotVerticalBar;":"\u2224","\x26Nscr;":"\ud835\udca9","\x26Ntilde;":"\u00d1","\x26Nu;":"\u039d","\x26OElig;":"\u0152",
"\x26Oacute;":"\u00d3","\x26Ocirc;":"\u00d4","\x26Ocy;":"\u041e","\x26Odblac;":"\u0150","\x26Ofr;":"\ud835\udd12","\x26Ograve;":"\u00d2","\x26Omacr;":"\u014c","\x26Omega;":"\u03a9","\x26Omicron;":"\u039f","\x26Oopf;":"\ud835\udd46","\x26OpenCurlyDoubleQuote;":"\u201c","\x26OpenCurlyQuote;":"\u2018","\x26Or;":"\u2a54","\x26Oscr;":"\ud835\udcaa","\x26Oslash;":"\u00d8","\x26Otilde;":"\u00d5","\x26Otimes;":"\u2a37","\x26Ouml;":"\u00d6","\x26OverBar;":"\u203e","\x26OverBrace;":"\u23de","\x26OverBracket;":"\u23b4",
"\x26OverParenthesis;":"\u23dc","\x26PartialD;":"\u2202","\x26Pcy;":"\u041f","\x26Pfr;":"\ud835\udd13","\x26Phi;":"\u03a6","\x26Pi;":"\u03a0","\x26PlusMinus;":"\u00b1","\x26Poincareplane;":"\u210c","\x26Popf;":"\u2119","\x26Pr;":"\u2abb","\x26Precedes;":"\u227a","\x26PrecedesEqual;":"\u2aaf","\x26PrecedesSlantEqual;":"\u227c","\x26PrecedesTilde;":"\u227e","\x26Prime;":"\u2033","\x26Product;":"\u220f","\x26Proportion;":"\u2237","\x26Proportional;":"\u221d","\x26Pscr;":"\ud835\udcab","\x26Psi;":"\u03a8",
"\x26QUOT;":'"',"\x26Qfr;":"\ud835\udd14","\x26Qopf;":"\u211a","\x26Qscr;":"\ud835\udcac","\x26RBarr;":"\u2910","\x26REG;":"\u00ae","\x26Racute;":"\u0154","\x26Rang;":"\u27eb","\x26Rarr;":"\u21a0","\x26Rarrtl;":"\u2916","\x26Rcaron;":"\u0158","\x26Rcedil;":"\u0156","\x26Rcy;":"\u0420","\x26Re;":"\u211c","\x26ReverseElement;":"\u220b","\x26ReverseEquilibrium;":"\u21cb","\x26ReverseUpEquilibrium;":"\u296f","\x26Rfr;":"\u211c","\x26Rho;":"\u03a1","\x26RightAngleBracket;":"\u27e9","\x26RightArrow;":"\u2192",
"\x26RightArrowBar;":"\u21e5","\x26RightArrowLeftArrow;":"\u21c4","\x26RightCeiling;":"\u2309","\x26RightDoubleBracket;":"\u27e7","\x26RightDownTeeVector;":"\u295d","\x26RightDownVector;":"\u21c2","\x26RightDownVectorBar;":"\u2955","\x26RightFloor;":"\u230b","\x26RightTee;":"\u22a2","\x26RightTeeArrow;":"\u21a6","\x26RightTeeVector;":"\u295b","\x26RightTriangle;":"\u22b3","\x26RightTriangleBar;":"\u29d0","\x26RightTriangleEqual;":"\u22b5","\x26RightUpDownVector;":"\u294f","\x26RightUpTeeVector;":"\u295c",
"\x26RightUpVector;":"\u21be","\x26RightUpVectorBar;":"\u2954","\x26RightVector;":"\u21c0","\x26RightVectorBar;":"\u2953","\x26Rightarrow;":"\u21d2","\x26Ropf;":"\u211d","\x26RoundImplies;":"\u2970","\x26Rrightarrow;":"\u21db","\x26Rscr;":"\u211b","\x26Rsh;":"\u21b1","\x26RuleDelayed;":"\u29f4","\x26SHCHcy;":"\u0429","\x26SHcy;":"\u0428","\x26SOFTcy;":"\u042c","\x26Sacute;":"\u015a","\x26Sc;":"\u2abc","\x26Scaron;":"\u0160","\x26Scedil;":"\u015e","\x26Scirc;":"\u015c","\x26Scy;":"\u0421","\x26Sfr;":"\ud835\udd16",
"\x26ShortDownArrow;":"\u2193","\x26ShortLeftArrow;":"\u2190","\x26ShortRightArrow;":"\u2192","\x26ShortUpArrow;":"\u2191","\x26Sigma;":"\u03a3","\x26SmallCircle;":"\u2218","\x26Sopf;":"\ud835\udd4a","\x26Sqrt;":"\u221a","\x26Square;":"\u25a1","\x26SquareIntersection;":"\u2293","\x26SquareSubset;":"\u228f","\x26SquareSubsetEqual;":"\u2291","\x26SquareSuperset;":"\u2290","\x26SquareSupersetEqual;":"\u2292","\x26SquareUnion;":"\u2294","\x26Sscr;":"\ud835\udcae","\x26Star;":"\u22c6","\x26Sub;":"\u22d0",
"\x26Subset;":"\u22d0","\x26SubsetEqual;":"\u2286","\x26Succeeds;":"\u227b","\x26SucceedsEqual;":"\u2ab0","\x26SucceedsSlantEqual;":"\u227d","\x26SucceedsTilde;":"\u227f","\x26SuchThat;":"\u220b","\x26Sum;":"\u2211","\x26Sup;":"\u22d1","\x26Superset;":"\u2283","\x26SupersetEqual;":"\u2287","\x26Supset;":"\u22d1","\x26THORN;":"\u00de","\x26TRADE;":"\u2122","\x26TSHcy;":"\u040b","\x26TScy;":"\u0426","\x26Tab;":"\t","\x26Tau;":"\u03a4","\x26Tcaron;":"\u0164","\x26Tcedil;":"\u0162","\x26Tcy;":"\u0422",
"\x26Tfr;":"\ud835\udd17","\x26Therefore;":"\u2234","\x26Theta;":"\u0398","\x26ThickSpace;":"\u205f\u200a","\x26ThinSpace;":"\u2009","\x26Tilde;":"\u223c","\x26TildeEqual;":"\u2243","\x26TildeFullEqual;":"\u2245","\x26TildeTilde;":"\u2248","\x26Topf;":"\ud835\udd4b","\x26TripleDot;":" \u20db","\x26Tscr;":"\ud835\udcaf","\x26Tstrok;":"\u0166","\x26Uacute;":"\u00da","\x26Uarr;":"\u219f","\x26Uarrocir;":"\u2949","\x26Ubrcy;":"\u040e","\x26Ubreve;":"\u016c","\x26Ucirc;":"\u00db","\x26Ucy;":"\u0423","\x26Udblac;":"\u0170",
"\x26Ufr;":"\ud835\udd18","\x26Ugrave;":"\u00d9","\x26Umacr;":"\u016a","\x26UnderBar;":"_","\x26UnderBrace;":"\u23df","\x26UnderBracket;":"\u23b5","\x26UnderParenthesis;":"\u23dd","\x26Union;":"\u22c3","\x26UnionPlus;":"\u228e","\x26Uogon;":"\u0172","\x26Uopf;":"\ud835\udd4c","\x26UpArrow;":"\u2191","\x26UpArrowBar;":"\u2912","\x26UpArrowDownArrow;":"\u21c5","\x26UpDownArrow;":"\u2195","\x26UpEquilibrium;":"\u296e","\x26UpTee;":"\u22a5","\x26UpTeeArrow;":"\u21a5","\x26Uparrow;":"\u21d1","\x26Updownarrow;":"\u21d5",
"\x26UpperLeftArrow;":"\u2196","\x26UpperRightArrow;":"\u2197","\x26Upsi;":"\u03d2","\x26Upsilon;":"\u03a5","\x26Uring;":"\u016e","\x26Uscr;":"\ud835\udcb0","\x26Utilde;":"\u0168","\x26Uuml;":"\u00dc","\x26VDash;":"\u22ab","\x26Vbar;":"\u2aeb","\x26Vcy;":"\u0412","\x26Vdash;":"\u22a9","\x26Vdashl;":"\u2ae6","\x26Vee;":"\u22c1","\x26Verbar;":"\u2016","\x26Vert;":"\u2016","\x26VerticalBar;":"\u2223","\x26VerticalLine;":"|","\x26VerticalSeparator;":"\u2758","\x26VerticalTilde;":"\u2240","\x26VeryThinSpace;":"\u200a",
"\x26Vfr;":"\ud835\udd19","\x26Vopf;":"\ud835\udd4d","\x26Vscr;":"\ud835\udcb1","\x26Vvdash;":"\u22aa","\x26Wcirc;":"\u0174","\x26Wedge;":"\u22c0","\x26Wfr;":"\ud835\udd1a","\x26Wopf;":"\ud835\udd4e","\x26Wscr;":"\ud835\udcb2","\x26Xfr;":"\ud835\udd1b","\x26Xi;":"\u039e","\x26Xopf;":"\ud835\udd4f","\x26Xscr;":"\ud835\udcb3","\x26YAcy;":"\u042f","\x26YIcy;":"\u0407","\x26YUcy;":"\u042e","\x26Yacute;":"\u00dd","\x26Ycirc;":"\u0176","\x26Ycy;":"\u042b","\x26Yfr;":"\ud835\udd1c","\x26Yopf;":"\ud835\udd50",
"\x26Yscr;":"\ud835\udcb4","\x26Yuml;":"\u0178","\x26ZHcy;":"\u0416","\x26Zacute;":"\u0179","\x26Zcaron;":"\u017d","\x26Zcy;":"\u0417","\x26Zdot;":"\u017b","\x26ZeroWidthSpace;":"\u200b","\x26Zeta;":"\u0396","\x26Zfr;":"\u2128","\x26Zopf;":"\u2124","\x26Zscr;":"\ud835\udcb5","\x26aacute;":"\u00e1","\x26abreve;":"\u0103","\x26ac;":"\u223e","\x26acE;":"\u223e\u0333","\x26acd;":"\u223f","\x26acirc;":"\u00e2","\x26acute;":"\u00b4","\x26acy;":"\u0430","\x26aelig;":"\u00e6","\x26af;":"\u2061","\x26afr;":"\ud835\udd1e",
"\x26agrave;":"\u00e0","\x26alefsym;":"\u2135","\x26aleph;":"\u2135","\x26alpha;":"\u03b1","\x26amacr;":"\u0101","\x26amalg;":"\u2a3f","\x26and;":"\u2227","\x26andand;":"\u2a55","\x26andd;":"\u2a5c","\x26andslope;":"\u2a58","\x26andv;":"\u2a5a","\x26ang;":"\u2220","\x26ange;":"\u29a4","\x26angle;":"\u2220","\x26angmsd;":"\u2221","\x26angmsdaa;":"\u29a8","\x26angmsdab;":"\u29a9","\x26angmsdac;":"\u29aa","\x26angmsdad;":"\u29ab","\x26angmsdae;":"\u29ac","\x26angmsdaf;":"\u29ad","\x26angmsdag;":"\u29ae",
"\x26angmsdah;":"\u29af","\x26angrt;":"\u221f","\x26angrtvb;":"\u22be","\x26angrtvbd;":"\u299d","\x26angsph;":"\u2222","\x26angst;":"\u00c5","\x26angzarr;":"\u237c","\x26aogon;":"\u0105","\x26aopf;":"\ud835\udd52","\x26ap;":"\u2248","\x26apE;":"\u2a70","\x26apacir;":"\u2a6f","\x26ape;":"\u224a","\x26apid;":"\u224b","\x26apos;":"'","\x26approx;":"\u2248","\x26approxeq;":"\u224a","\x26aring;":"\u00e5","\x26ascr;":"\ud835\udcb6","\x26ast;":"*","\x26asymp;":"\u2248","\x26asympeq;":"\u224d","\x26atilde;":"\u00e3",
"\x26auml;":"\u00e4","\x26awconint;":"\u2233","\x26awint;":"\u2a11","\x26bNot;":"\u2aed","\x26backcong;":"\u224c","\x26backepsilon;":"\u03f6","\x26backprime;":"\u2035","\x26backsim;":"\u223d","\x26backsimeq;":"\u22cd","\x26barvee;":"\u22bd","\x26barwed;":"\u2305","\x26barwedge;":"\u2305","\x26bbrk;":"\u23b5","\x26bbrktbrk;":"\u23b6","\x26bcong;":"\u224c","\x26bcy;":"\u0431","\x26bdquo;":"\u201e","\x26becaus;":"\u2235","\x26because;":"\u2235","\x26bemptyv;":"\u29b0","\x26bepsi;":"\u03f6","\x26bernou;":"\u212c",
"\x26beta;":"\u03b2","\x26beth;":"\u2136","\x26between;":"\u226c","\x26bfr;":"\ud835\udd1f","\x26bigcap;":"\u22c2","\x26bigcirc;":"\u25ef","\x26bigcup;":"\u22c3","\x26bigodot;":"\u2a00","\x26bigoplus;":"\u2a01","\x26bigotimes;":"\u2a02","\x26bigsqcup;":"\u2a06","\x26bigstar;":"\u2605","\x26bigtriangledown;":"\u25bd","\x26bigtriangleup;":"\u25b3","\x26biguplus;":"\u2a04","\x26bigvee;":"\u22c1","\x26bigwedge;":"\u22c0","\x26bkarow;":"\u290d","\x26blacklozenge;":"\u29eb","\x26blacksquare;":"\u25aa",
"\x26blacktriangle;":"\u25b4","\x26blacktriangledown;":"\u25be","\x26blacktriangleleft;":"\u25c2","\x26blacktriangleright;":"\u25b8","\x26blank;":"\u2423","\x26blk12;":"\u2592","\x26blk14;":"\u2591","\x26blk34;":"\u2593","\x26block;":"\u2588","\x26bne;":"\x3d\u20e5","\x26bnequiv;":"\u2261\u20e5","\x26bnot;":"\u2310","\x26bopf;":"\ud835\udd53","\x26bot;":"\u22a5","\x26bottom;":"\u22a5","\x26bowtie;":"\u22c8","\x26boxDL;":"\u2557","\x26boxDR;":"\u2554","\x26boxDl;":"\u2556","\x26boxDr;":"\u2553","\x26boxH;":"\u2550",
"\x26boxHD;":"\u2566","\x26boxHU;":"\u2569","\x26boxHd;":"\u2564","\x26boxHu;":"\u2567","\x26boxUL;":"\u255d","\x26boxUR;":"\u255a","\x26boxUl;":"\u255c","\x26boxUr;":"\u2559","\x26boxV;":"\u2551","\x26boxVH;":"\u256c","\x26boxVL;":"\u2563","\x26boxVR;":"\u2560","\x26boxVh;":"\u256b","\x26boxVl;":"\u2562","\x26boxVr;":"\u255f","\x26boxbox;":"\u29c9","\x26boxdL;":"\u2555","\x26boxdR;":"\u2552","\x26boxdl;":"\u2510","\x26boxdr;":"\u250c","\x26boxh;":"\u2500","\x26boxhD;":"\u2565","\x26boxhU;":"\u2568",
"\x26boxhd;":"\u252c","\x26boxhu;":"\u2534","\x26boxminus;":"\u229f","\x26boxplus;":"\u229e","\x26boxtimes;":"\u22a0","\x26boxuL;":"\u255b","\x26boxuR;":"\u2558","\x26boxul;":"\u2518","\x26boxur;":"\u2514","\x26boxv;":"\u2502","\x26boxvH;":"\u256a","\x26boxvL;":"\u2561","\x26boxvR;":"\u255e","\x26boxvh;":"\u253c","\x26boxvl;":"\u2524","\x26boxvr;":"\u251c","\x26bprime;":"\u2035","\x26breve;":"\u02d8","\x26brvbar;":"\u00a6","\x26bscr;":"\ud835\udcb7","\x26bsemi;":"\u204f","\x26bsim;":"\u223d","\x26bsime;":"\u22cd",
"\x26bsol;":"\\","\x26bsolb;":"\u29c5","\x26bsolhsub;":"\u27c8","\x26bull;":"\u2022","\x26bullet;":"\u2022","\x26bump;":"\u224e","\x26bumpE;":"\u2aae","\x26bumpe;":"\u224f","\x26bumpeq;":"\u224f","\x26cacute;":"\u0107","\x26cap;":"\u2229","\x26capand;":"\u2a44","\x26capbrcup;":"\u2a49","\x26capcap;":"\u2a4b","\x26capcup;":"\u2a47","\x26capdot;":"\u2a40","\x26caps;":"\u2229\ufe00","\x26caret;":"\u2041","\x26caron;":"\u02c7","\x26ccaps;":"\u2a4d","\x26ccaron;":"\u010d","\x26ccedil;":"\u00e7","\x26ccirc;":"\u0109",
"\x26ccups;":"\u2a4c","\x26ccupssm;":"\u2a50","\x26cdot;":"\u010b","\x26cedil;":"\u00b8","\x26cemptyv;":"\u29b2","\x26cent;":"\u00a2","\x26centerdot;":"\u00b7","\x26cfr;":"\ud835\udd20","\x26chcy;":"\u0447","\x26check;":"\u2713","\x26checkmark;":"\u2713","\x26chi;":"\u03c7","\x26cir;":"\u25cb","\x26cirE;":"\u29c3","\x26circ;":"\u02c6","\x26circeq;":"\u2257","\x26circlearrowleft;":"\u21ba","\x26circlearrowright;":"\u21bb","\x26circledR;":"\u00ae","\x26circledS;":"\u24c8","\x26circledast;":"\u229b",
"\x26circledcirc;":"\u229a","\x26circleddash;":"\u229d","\x26cire;":"\u2257","\x26cirfnint;":"\u2a10","\x26cirmid;":"\u2aef","\x26cirscir;":"\u29c2","\x26clubs;":"\u2663","\x26clubsuit;":"\u2663","\x26colon;":":","\x26colone;":"\u2254","\x26coloneq;":"\u2254","\x26comma;":",","\x26commat;":"@","\x26comp;":"\u2201","\x26compfn;":"\u2218","\x26complement;":"\u2201","\x26complexes;":"\u2102","\x26cong;":"\u2245","\x26congdot;":"\u2a6d","\x26conint;":"\u222e","\x26copf;":"\ud835\udd54","\x26coprod;":"\u2210",
"\x26copy;":"\u00a9","\x26copysr;":"\u2117","\x26crarr;":"\u21b5","\x26cross;":"\u2717","\x26cscr;":"\ud835\udcb8","\x26csub;":"\u2acf","\x26csube;":"\u2ad1","\x26csup;":"\u2ad0","\x26csupe;":"\u2ad2","\x26ctdot;":"\u22ef","\x26cudarrl;":"\u2938","\x26cudarrr;":"\u2935","\x26cuepr;":"\u22de","\x26cuesc;":"\u22df","\x26cularr;":"\u21b6","\x26cularrp;":"\u293d","\x26cup;":"\u222a","\x26cupbrcap;":"\u2a48","\x26cupcap;":"\u2a46","\x26cupcup;":"\u2a4a","\x26cupdot;":"\u228d","\x26cupor;":"\u2a45","\x26cups;":"\u222a\ufe00",
"\x26curarr;":"\u21b7","\x26curarrm;":"\u293c","\x26curlyeqprec;":"\u22de","\x26curlyeqsucc;":"\u22df","\x26curlyvee;":"\u22ce","\x26curlywedge;":"\u22cf","\x26curren;":"\u00a4","\x26curvearrowleft;":"\u21b6","\x26curvearrowright;":"\u21b7","\x26cuvee;":"\u22ce","\x26cuwed;":"\u22cf","\x26cwconint;":"\u2232","\x26cwint;":"\u2231","\x26cylcty;":"\u232d","\x26dArr;":"\u21d3","\x26dHar;":"\u2965","\x26dagger;":"\u2020","\x26daleth;":"\u2138","\x26darr;":"\u2193","\x26dash;":"\u2010","\x26dashv;":"\u22a3",
"\x26dbkarow;":"\u290f","\x26dblac;":"\u02dd","\x26dcaron;":"\u010f","\x26dcy;":"\u0434","\x26dd;":"\u2146","\x26ddagger;":"\u2021","\x26ddarr;":"\u21ca","\x26ddotseq;":"\u2a77","\x26deg;":"\u00b0","\x26delta;":"\u03b4","\x26demptyv;":"\u29b1","\x26dfisht;":"\u297f","\x26dfr;":"\ud835\udd21","\x26dharl;":"\u21c3","\x26dharr;":"\u21c2","\x26diam;":"\u22c4","\x26diamond;":"\u22c4","\x26diamondsuit;":"\u2666","\x26diams;":"\u2666","\x26die;":"\u00a8","\x26digamma;":"\u03dd","\x26disin;":"\u22f2","\x26div;":"\u00f7",
"\x26divide;":"\u00f7","\x26divideontimes;":"\u22c7","\x26divonx;":"\u22c7","\x26djcy;":"\u0452","\x26dlcorn;":"\u231e","\x26dlcrop;":"\u230d","\x26dollar;":"$","\x26dopf;":"\ud835\udd55","\x26dot;":"\u02d9","\x26doteq;":"\u2250","\x26doteqdot;":"\u2251","\x26dotminus;":"\u2238","\x26dotplus;":"\u2214","\x26dotsquare;":"\u22a1","\x26doublebarwedge;":"\u2306","\x26downarrow;":"\u2193","\x26downdownarrows;":"\u21ca","\x26downharpoonleft;":"\u21c3","\x26downharpoonright;":"\u21c2","\x26drbkarow;":"\u2910",
"\x26drcorn;":"\u231f","\x26drcrop;":"\u230c","\x26dscr;":"\ud835\udcb9","\x26dscy;":"\u0455","\x26dsol;":"\u29f6","\x26dstrok;":"\u0111","\x26dtdot;":"\u22f1","\x26dtri;":"\u25bf","\x26dtrif;":"\u25be","\x26duarr;":"\u21f5","\x26duhar;":"\u296f","\x26dwangle;":"\u29a6","\x26dzcy;":"\u045f","\x26dzigrarr;":"\u27ff","\x26eDDot;":"\u2a77","\x26eDot;":"\u2251","\x26eacute;":"\u00e9","\x26easter;":"\u2a6e","\x26ecaron;":"\u011b","\x26ecir;":"\u2256","\x26ecirc;":"\u00ea","\x26ecolon;":"\u2255","\x26ecy;":"\u044d",
"\x26edot;":"\u0117","\x26ee;":"\u2147","\x26efDot;":"\u2252","\x26efr;":"\ud835\udd22","\x26eg;":"\u2a9a","\x26egrave;":"\u00e8","\x26egs;":"\u2a96","\x26egsdot;":"\u2a98","\x26el;":"\u2a99","\x26elinters;":"\u23e7","\x26ell;":"\u2113","\x26els;":"\u2a95","\x26elsdot;":"\u2a97","\x26emacr;":"\u0113","\x26empty;":"\u2205","\x26emptyset;":"\u2205","\x26emptyv;":"\u2205","\x26emsp;":"\u2003","\x26emsp13;":"\u2004","\x26emsp14;":"\u2005","\x26eng;":"\u014b","\x26ensp;":"\u2002","\x26eogon;":"\u0119",
"\x26eopf;":"\ud835\udd56","\x26epar;":"\u22d5","\x26eparsl;":"\u29e3","\x26eplus;":"\u2a71","\x26epsi;":"\u03b5","\x26epsilon;":"\u03b5","\x26epsiv;":"\u03f5","\x26eqcirc;":"\u2256","\x26eqcolon;":"\u2255","\x26eqsim;":"\u2242","\x26eqslantgtr;":"\u2a96","\x26eqslantless;":"\u2a95","\x26equals;":"\x3d","\x26equest;":"\u225f","\x26equiv;":"\u2261","\x26equivDD;":"\u2a78","\x26eqvparsl;":"\u29e5","\x26erDot;":"\u2253","\x26erarr;":"\u2971","\x26escr;":"\u212f","\x26esdot;":"\u2250","\x26esim;":"\u2242",
"\x26eta;":"\u03b7","\x26eth;":"\u00f0","\x26euml;":"\u00eb","\x26euro;":"\u20ac","\x26excl;":"!","\x26exist;":"\u2203","\x26expectation;":"\u2130","\x26exponentiale;":"\u2147","\x26fallingdotseq;":"\u2252","\x26fcy;":"\u0444","\x26female;":"\u2640","\x26ffilig;":"\ufb03","\x26fflig;":"\ufb00","\x26ffllig;":"\ufb04","\x26ffr;":"\ud835\udd23","\x26filig;":"\ufb01","\x26fjlig;":"fj","\x26flat;":"\u266d","\x26fllig;":"\ufb02","\x26fltns;":"\u25b1","\x26fnof;":"\u0192","\x26fopf;":"\ud835\udd57","\x26forall;":"\u2200",
"\x26fork;":"\u22d4","\x26forkv;":"\u2ad9","\x26fpartint;":"\u2a0d","\x26frac12;":"\u00bd","\x26frac13;":"\u2153","\x26frac14;":"\u00bc","\x26frac15;":"\u2155","\x26frac16;":"\u2159","\x26frac18;":"\u215b","\x26frac23;":"\u2154","\x26frac25;":"\u2156","\x26frac34;":"\u00be","\x26frac35;":"\u2157","\x26frac38;":"\u215c","\x26frac45;":"\u2158","\x26frac56;":"\u215a","\x26frac58;":"\u215d","\x26frac78;":"\u215e","\x26frasl;":"\u2044","\x26frown;":"\u2322","\x26fscr;":"\ud835\udcbb","\x26gE;":"\u2267",
"\x26gEl;":"\u2a8c","\x26gacute;":"\u01f5","\x26gamma;":"\u03b3","\x26gammad;":"\u03dd","\x26gap;":"\u2a86","\x26gbreve;":"\u011f","\x26gcirc;":"\u011d","\x26gcy;":"\u0433","\x26gdot;":"\u0121","\x26ge;":"\u2265","\x26gel;":"\u22db","\x26geq;":"\u2265","\x26geqq;":"\u2267","\x26geqslant;":"\u2a7e","\x26ges;":"\u2a7e","\x26gescc;":"\u2aa9","\x26gesdot;":"\u2a80","\x26gesdoto;":"\u2a82","\x26gesdotol;":"\u2a84","\x26gesl;":"\u22db\ufe00","\x26gesles;":"\u2a94","\x26gfr;":"\ud835\udd24","\x26gg;":"\u226b",
"\x26ggg;":"\u22d9","\x26gimel;":"\u2137","\x26gjcy;":"\u0453","\x26gl;":"\u2277","\x26glE;":"\u2a92","\x26gla;":"\u2aa5","\x26glj;":"\u2aa4","\x26gnE;":"\u2269","\x26gnap;":"\u2a8a","\x26gnapprox;":"\u2a8a","\x26gne;":"\u2a88","\x26gneq;":"\u2a88","\x26gneqq;":"\u2269","\x26gnsim;":"\u22e7","\x26gopf;":"\ud835\udd58","\x26grave;":"`","\x26gscr;":"\u210a","\x26gsim;":"\u2273","\x26gsime;":"\u2a8e","\x26gsiml;":"\u2a90","\x26gt;":"\x3e","\x26gtcc;":"\u2aa7","\x26gtcir;":"\u2a7a","\x26gtdot;":"\u22d7",
"\x26gtlPar;":"\u2995","\x26gtquest;":"\u2a7c","\x26gtrapprox;":"\u2a86","\x26gtrarr;":"\u2978","\x26gtrdot;":"\u22d7","\x26gtreqless;":"\u22db","\x26gtreqqless;":"\u2a8c","\x26gtrless;":"\u2277","\x26gtrsim;":"\u2273","\x26gvertneqq;":"\u2269\ufe00","\x26gvnE;":"\u2269\ufe00","\x26hArr;":"\u21d4","\x26hairsp;":"\u200a","\x26half;":"\u00bd","\x26hamilt;":"\u210b","\x26hardcy;":"\u044a","\x26harr;":"\u2194","\x26harrcir;":"\u2948","\x26harrw;":"\u21ad","\x26hbar;":"\u210f","\x26hcirc;":"\u0125","\x26hearts;":"\u2665",
"\x26heartsuit;":"\u2665","\x26hellip;":"\u2026","\x26hercon;":"\u22b9","\x26hfr;":"\ud835\udd25","\x26hksearow;":"\u2925","\x26hkswarow;":"\u2926","\x26hoarr;":"\u21ff","\x26homtht;":"\u223b","\x26hookleftarrow;":"\u21a9","\x26hookrightarrow;":"\u21aa","\x26hopf;":"\ud835\udd59","\x26horbar;":"\u2015","\x26hscr;":"\ud835\udcbd","\x26hslash;":"\u210f","\x26hstrok;":"\u0127","\x26hybull;":"\u2043","\x26hyphen;":"\u2010","\x26iacute;":"\u00ed","\x26ic;":"\u2063","\x26icirc;":"\u00ee","\x26icy;":"\u0438",
"\x26iecy;":"\u0435","\x26iexcl;":"\u00a1","\x26iff;":"\u21d4","\x26ifr;":"\ud835\udd26","\x26igrave;":"\u00ec","\x26ii;":"\u2148","\x26iiiint;":"\u2a0c","\x26iiint;":"\u222d","\x26iinfin;":"\u29dc","\x26iiota;":"\u2129","\x26ijlig;":"\u0133","\x26imacr;":"\u012b","\x26image;":"\u2111","\x26imagline;":"\u2110","\x26imagpart;":"\u2111","\x26imath;":"\u0131","\x26imof;":"\u22b7","\x26imped;":"\u01b5","\x26in;":"\u2208","\x26incare;":"\u2105","\x26infin;":"\u221e","\x26infintie;":"\u29dd","\x26inodot;":"\u0131",
"\x26int;":"\u222b","\x26intcal;":"\u22ba","\x26integers;":"\u2124","\x26intercal;":"\u22ba","\x26intlarhk;":"\u2a17","\x26intprod;":"\u2a3c","\x26iocy;":"\u0451","\x26iogon;":"\u012f","\x26iopf;":"\ud835\udd5a","\x26iota;":"\u03b9","\x26iprod;":"\u2a3c","\x26iquest;":"\u00bf","\x26iscr;":"\ud835\udcbe","\x26isin;":"\u2208","\x26isinE;":"\u22f9","\x26isindot;":"\u22f5","\x26isins;":"\u22f4","\x26isinsv;":"\u22f3","\x26isinv;":"\u2208","\x26it;":"\u2062","\x26itilde;":"\u0129","\x26iukcy;":"\u0456",
"\x26iuml;":"\u00ef","\x26jcirc;":"\u0135","\x26jcy;":"\u0439","\x26jfr;":"\ud835\udd27","\x26jmath;":"\u0237","\x26jopf;":"\ud835\udd5b","\x26jscr;":"\ud835\udcbf","\x26jsercy;":"\u0458","\x26jukcy;":"\u0454","\x26kappa;":"\u03ba","\x26kappav;":"\u03f0","\x26kcedil;":"\u0137","\x26kcy;":"\u043a","\x26kfr;":"\ud835\udd28","\x26kgreen;":"\u0138","\x26khcy;":"\u0445","\x26kjcy;":"\u045c","\x26kopf;":"\ud835\udd5c","\x26kscr;":"\ud835\udcc0","\x26lAarr;":"\u21da","\x26lArr;":"\u21d0","\x26lAtail;":"\u291b",
"\x26lBarr;":"\u290e","\x26lE;":"\u2266","\x26lEg;":"\u2a8b","\x26lHar;":"\u2962","\x26lacute;":"\u013a","\x26laemptyv;":"\u29b4","\x26lagran;":"\u2112","\x26lambda;":"\u03bb","\x26lang;":"\u27e8","\x26langd;":"\u2991","\x26langle;":"\u27e8","\x26lap;":"\u2a85","\x26laquo;":"\u00ab","\x26larr;":"\u2190","\x26larrb;":"\u21e4","\x26larrbfs;":"\u291f","\x26larrfs;":"\u291d","\x26larrhk;":"\u21a9","\x26larrlp;":"\u21ab","\x26larrpl;":"\u2939","\x26larrsim;":"\u2973","\x26larrtl;":"\u21a2","\x26lat;":"\u2aab",
"\x26latail;":"\u2919","\x26late;":"\u2aad","\x26lates;":"\u2aad\ufe00","\x26lbarr;":"\u290c","\x26lbbrk;":"\u2772","\x26lbrace;":"{","\x26lbrack;":"[","\x26lbrke;":"\u298b","\x26lbrksld;":"\u298f","\x26lbrkslu;":"\u298d","\x26lcaron;":"\u013e","\x26lcedil;":"\u013c","\x26lceil;":"\u2308","\x26lcub;":"{","\x26lcy;":"\u043b","\x26ldca;":"\u2936","\x26ldquo;":"\u201c","\x26ldquor;":"\u201e","\x26ldrdhar;":"\u2967","\x26ldrushar;":"\u294b","\x26ldsh;":"\u21b2","\x26le;":"\u2264","\x26leftarrow;":"\u2190",
"\x26leftarrowtail;":"\u21a2","\x26leftharpoondown;":"\u21bd","\x26leftharpoonup;":"\u21bc","\x26leftleftarrows;":"\u21c7","\x26leftrightarrow;":"\u2194","\x26leftrightarrows;":"\u21c6","\x26leftrightharpoons;":"\u21cb","\x26leftrightsquigarrow;":"\u21ad","\x26leftthreetimes;":"\u22cb","\x26leg;":"\u22da","\x26leq;":"\u2264","\x26leqq;":"\u2266","\x26leqslant;":"\u2a7d","\x26les;":"\u2a7d","\x26lescc;":"\u2aa8","\x26lesdot;":"\u2a7f","\x26lesdoto;":"\u2a81","\x26lesdotor;":"\u2a83","\x26lesg;":"\u22da\ufe00",
"\x26lesges;":"\u2a93","\x26lessapprox;":"\u2a85","\x26lessdot;":"\u22d6","\x26lesseqgtr;":"\u22da","\x26lesseqqgtr;":"\u2a8b","\x26lessgtr;":"\u2276","\x26lesssim;":"\u2272","\x26lfisht;":"\u297c","\x26lfloor;":"\u230a","\x26lfr;":"\ud835\udd29","\x26lg;":"\u2276","\x26lgE;":"\u2a91","\x26lhard;":"\u21bd","\x26lharu;":"\u21bc","\x26lharul;":"\u296a","\x26lhblk;":"\u2584","\x26ljcy;":"\u0459","\x26ll;":"\u226a","\x26llarr;":"\u21c7","\x26llcorner;":"\u231e","\x26llhard;":"\u296b","\x26lltri;":"\u25fa",
"\x26lmidot;":"\u0140","\x26lmoust;":"\u23b0","\x26lmoustache;":"\u23b0","\x26lnE;":"\u2268","\x26lnap;":"\u2a89","\x26lnapprox;":"\u2a89","\x26lne;":"\u2a87","\x26lneq;":"\u2a87","\x26lneqq;":"\u2268","\x26lnsim;":"\u22e6","\x26loang;":"\u27ec","\x26loarr;":"\u21fd","\x26lobrk;":"\u27e6","\x26longleftarrow;":"\u27f5","\x26longleftrightarrow;":"\u27f7","\x26longmapsto;":"\u27fc","\x26longrightarrow;":"\u27f6","\x26looparrowleft;":"\u21ab","\x26looparrowright;":"\u21ac","\x26lopar;":"\u2985","\x26lopf;":"\ud835\udd5d",
"\x26loplus;":"\u2a2d","\x26lotimes;":"\u2a34","\x26lowast;":"\u2217","\x26lowbar;":"_","\x26loz;":"\u25ca","\x26lozenge;":"\u25ca","\x26lozf;":"\u29eb","\x26lpar;":"(","\x26lparlt;":"\u2993","\x26lrarr;":"\u21c6","\x26lrcorner;":"\u231f","\x26lrhar;":"\u21cb","\x26lrhard;":"\u296d","\x26lrm;":"\u200e","\x26lrtri;":"\u22bf","\x26lsaquo;":"\u2039","\x26lscr;":"\ud835\udcc1","\x26lsh;":"\u21b0","\x26lsim;":"\u2272","\x26lsime;":"\u2a8d","\x26lsimg;":"\u2a8f","\x26lsqb;":"[","\x26lsquo;":"\u2018","\x26lsquor;":"\u201a",
"\x26lstrok;":"\u0142","\x26ltcc;":"\u2aa6","\x26ltcir;":"\u2a79","\x26ltdot;":"\u22d6","\x26lthree;":"\u22cb","\x26ltimes;":"\u22c9","\x26ltlarr;":"\u2976","\x26ltquest;":"\u2a7b","\x26ltrPar;":"\u2996","\x26ltri;":"\u25c3","\x26ltrie;":"\u22b4","\x26ltrif;":"\u25c2","\x26lurdshar;":"\u294a","\x26luruhar;":"\u2966","\x26lvertneqq;":"\u2268\ufe00","\x26lvnE;":"\u2268\ufe00","\x26mDDot;":"\u223a","\x26macr;":"\u00af","\x26male;":"\u2642","\x26malt;":"\u2720","\x26maltese;":"\u2720","\x26map;":"\u21a6",
"\x26mapsto;":"\u21a6","\x26mapstodown;":"\u21a7","\x26mapstoleft;":"\u21a4","\x26mapstoup;":"\u21a5","\x26marker;":"\u25ae","\x26mcomma;":"\u2a29","\x26mcy;":"\u043c","\x26mdash;":"\u2014","\x26measuredangle;":"\u2221","\x26mfr;":"\ud835\udd2a","\x26mho;":"\u2127","\x26micro;":"\u00b5","\x26mid;":"\u2223","\x26midast;":"*","\x26midcir;":"\u2af0","\x26middot;":"\u00b7","\x26minus;":"\u2212","\x26minusb;":"\u229f","\x26minusd;":"\u2238","\x26minusdu;":"\u2a2a","\x26mlcp;":"\u2adb","\x26mldr;":"\u2026",
"\x26mnplus;":"\u2213","\x26models;":"\u22a7","\x26mopf;":"\ud835\udd5e","\x26mp;":"\u2213","\x26mscr;":"\ud835\udcc2","\x26mstpos;":"\u223e","\x26mu;":"\u03bc","\x26multimap;":"\u22b8","\x26mumap;":"\u22b8","\x26nGg;":"\u22d9\u0338","\x26nGt;":"\u226b\u20d2","\x26nGtv;":"\u226b\u0338","\x26nLeftarrow;":"\u21cd","\x26nLeftrightarrow;":"\u21ce","\x26nLl;":"\u22d8\u0338","\x26nLt;":"\u226a\u20d2","\x26nLtv;":"\u226a\u0338","\x26nRightarrow;":"\u21cf","\x26nVDash;":"\u22af","\x26nVdash;":"\u22ae","\x26nabla;":"\u2207",
"\x26nacute;":"\u0144","\x26nang;":"\u2220\u20d2","\x26nap;":"\u2249","\x26napE;":"\u2a70\u0338","\x26napid;":"\u224b\u0338","\x26napos;":"\u0149","\x26napprox;":"\u2249","\x26natur;":"\u266e","\x26natural;":"\u266e","\x26naturals;":"\u2115","\x26nbsp;":"\u00a0","\x26nbump;":"\u224e\u0338","\x26nbumpe;":"\u224f\u0338","\x26ncap;":"\u2a43","\x26ncaron;":"\u0148","\x26ncedil;":"\u0146","\x26ncong;":"\u2247","\x26ncongdot;":"\u2a6d\u0338","\x26ncup;":"\u2a42","\x26ncy;":"\u043d","\x26ndash;":"\u2013",
"\x26ne;":"\u2260","\x26neArr;":"\u21d7","\x26nearhk;":"\u2924","\x26nearr;":"\u2197","\x26nearrow;":"\u2197","\x26nedot;":"\u2250\u0338","\x26nequiv;":"\u2262","\x26nesear;":"\u2928","\x26nesim;":"\u2242\u0338","\x26nexist;":"\u2204","\x26nexists;":"\u2204","\x26nfr;":"\ud835\udd2b","\x26ngE;":"\u2267\u0338","\x26nge;":"\u2271","\x26ngeq;":"\u2271","\x26ngeqq;":"\u2267\u0338","\x26ngeqslant;":"\u2a7e\u0338","\x26nges;":"\u2a7e\u0338","\x26ngsim;":"\u2275","\x26ngt;":"\u226f","\x26ngtr;":"\u226f",
"\x26nhArr;":"\u21ce","\x26nharr;":"\u21ae","\x26nhpar;":"\u2af2","\x26ni;":"\u220b","\x26nis;":"\u22fc","\x26nisd;":"\u22fa","\x26niv;":"\u220b","\x26njcy;":"\u045a","\x26nlArr;":"\u21cd","\x26nlE;":"\u2266\u0338","\x26nlarr;":"\u219a","\x26nldr;":"\u2025","\x26nle;":"\u2270","\x26nleftarrow;":"\u219a","\x26nleftrightarrow;":"\u21ae","\x26nleq;":"\u2270","\x26nleqq;":"\u2266\u0338","\x26nleqslant;":"\u2a7d\u0338","\x26nles;":"\u2a7d\u0338","\x26nless;":"\u226e","\x26nlsim;":"\u2274","\x26nlt;":"\u226e",
"\x26nltri;":"\u22ea","\x26nltrie;":"\u22ec","\x26nmid;":"\u2224","\x26nopf;":"\ud835\udd5f","\x26not;":"\u00ac","\x26notin;":"\u2209","\x26notinE;":"\u22f9\u0338","\x26notindot;":"\u22f5\u0338","\x26notinva;":"\u2209","\x26notinvb;":"\u22f7","\x26notinvc;":"\u22f6","\x26notni;":"\u220c","\x26notniva;":"\u220c","\x26notnivb;":"\u22fe","\x26notnivc;":"\u22fd","\x26npar;":"\u2226","\x26nparallel;":"\u2226","\x26nparsl;":"\u2afd\u20e5","\x26npart;":"\u2202\u0338","\x26npolint;":"\u2a14","\x26npr;":"\u2280",
"\x26nprcue;":"\u22e0","\x26npre;":"\u2aaf\u0338","\x26nprec;":"\u2280","\x26npreceq;":"\u2aaf\u0338","\x26nrArr;":"\u21cf","\x26nrarr;":"\u219b","\x26nrarrc;":"\u2933\u0338","\x26nrarrw;":"\u219d\u0338","\x26nrightarrow;":"\u219b","\x26nrtri;":"\u22eb","\x26nrtrie;":"\u22ed","\x26nsc;":"\u2281","\x26nsccue;":"\u22e1","\x26nsce;":"\u2ab0\u0338","\x26nscr;":"\ud835\udcc3","\x26nshortmid;":"\u2224","\x26nshortparallel;":"\u2226","\x26nsim;":"\u2241","\x26nsime;":"\u2244","\x26nsimeq;":"\u2244","\x26nsmid;":"\u2224",
"\x26nspar;":"\u2226","\x26nsqsube;":"\u22e2","\x26nsqsupe;":"\u22e3","\x26nsub;":"\u2284","\x26nsubE;":"\u2ac5\u0338","\x26nsube;":"\u2288","\x26nsubset;":"\u2282\u20d2","\x26nsubseteq;":"\u2288","\x26nsubseteqq;":"\u2ac5\u0338","\x26nsucc;":"\u2281","\x26nsucceq;":"\u2ab0\u0338","\x26nsup;":"\u2285","\x26nsupE;":"\u2ac6\u0338","\x26nsupe;":"\u2289","\x26nsupset;":"\u2283\u20d2","\x26nsupseteq;":"\u2289","\x26nsupseteqq;":"\u2ac6\u0338","\x26ntgl;":"\u2279","\x26ntilde;":"\u00f1","\x26ntlg;":"\u2278",
"\x26ntriangleleft;":"\u22ea","\x26ntrianglelefteq;":"\u22ec","\x26ntriangleright;":"\u22eb","\x26ntrianglerighteq;":"\u22ed","\x26nu;":"\u03bd","\x26num;":"#","\x26numero;":"\u2116","\x26numsp;":"\u2007","\x26nvDash;":"\u22ad","\x26nvHarr;":"\u2904","\x26nvap;":"\u224d\u20d2","\x26nvdash;":"\u22ac","\x26nvge;":"\u2265\u20d2","\x26nvgt;":"\x3e\u20d2","\x26nvinfin;":"\u29de","\x26nvlArr;":"\u2902","\x26nvle;":"\u2264\u20d2","\x26nvlt;":"\x3c\u20d2","\x26nvltrie;":"\u22b4\u20d2","\x26nvrArr;":"\u2903",
"\x26nvrtrie;":"\u22b5\u20d2","\x26nvsim;":"\u223c\u20d2","\x26nwArr;":"\u21d6","\x26nwarhk;":"\u2923","\x26nwarr;":"\u2196","\x26nwarrow;":"\u2196","\x26nwnear;":"\u2927","\x26oS;":"\u24c8","\x26oacute;":"\u00f3","\x26oast;":"\u229b","\x26ocir;":"\u229a","\x26ocirc;":"\u00f4","\x26ocy;":"\u043e","\x26odash;":"\u229d","\x26odblac;":"\u0151","\x26odiv;":"\u2a38","\x26odot;":"\u2299","\x26odsold;":"\u29bc","\x26oelig;":"\u0153","\x26ofcir;":"\u29bf","\x26ofr;":"\ud835\udd2c","\x26ogon;":"\u02db","\x26ograve;":"\u00f2",
"\x26ogt;":"\u29c1","\x26ohbar;":"\u29b5","\x26ohm;":"\u03a9","\x26oint;":"\u222e","\x26olarr;":"\u21ba","\x26olcir;":"\u29be","\x26olcross;":"\u29bb","\x26oline;":"\u203e","\x26olt;":"\u29c0","\x26omacr;":"\u014d","\x26omega;":"\u03c9","\x26omicron;":"\u03bf","\x26omid;":"\u29b6","\x26ominus;":"\u2296","\x26oopf;":"\ud835\udd60","\x26opar;":"\u29b7","\x26operp;":"\u29b9","\x26oplus;":"\u2295","\x26or;":"\u2228","\x26orarr;":"\u21bb","\x26ord;":"\u2a5d","\x26order;":"\u2134","\x26orderof;":"\u2134",
"\x26ordf;":"\u00aa","\x26ordm;":"\u00ba","\x26origof;":"\u22b6","\x26oror;":"\u2a56","\x26orslope;":"\u2a57","\x26orv;":"\u2a5b","\x26oscr;":"\u2134","\x26oslash;":"\u00f8","\x26osol;":"\u2298","\x26otilde;":"\u00f5","\x26otimes;":"\u2297","\x26otimesas;":"\u2a36","\x26ouml;":"\u00f6","\x26ovbar;":"\u233d","\x26par;":"\u2225","\x26para;":"\u00b6","\x26parallel;":"\u2225","\x26parsim;":"\u2af3","\x26parsl;":"\u2afd","\x26part;":"\u2202","\x26pcy;":"\u043f","\x26percnt;":"%","\x26period;":".","\x26permil;":"\u2030",
"\x26perp;":"\u22a5","\x26pertenk;":"\u2031","\x26pfr;":"\ud835\udd2d","\x26phi;":"\u03c6","\x26phiv;":"\u03d5","\x26phmmat;":"\u2133","\x26phone;":"\u260e","\x26pi;":"\u03c0","\x26pitchfork;":"\u22d4","\x26piv;":"\u03d6","\x26planck;":"\u210f","\x26planckh;":"\u210e","\x26plankv;":"\u210f","\x26plus;":"+","\x26plusacir;":"\u2a23","\x26plusb;":"\u229e","\x26pluscir;":"\u2a22","\x26plusdo;":"\u2214","\x26plusdu;":"\u2a25","\x26pluse;":"\u2a72","\x26plusmn;":"\u00b1","\x26plussim;":"\u2a26","\x26plustwo;":"\u2a27",
"\x26pm;":"\u00b1","\x26pointint;":"\u2a15","\x26popf;":"\ud835\udd61","\x26pound;":"\u00a3","\x26pr;":"\u227a","\x26prE;":"\u2ab3","\x26prap;":"\u2ab7","\x26prcue;":"\u227c","\x26pre;":"\u2aaf","\x26prec;":"\u227a","\x26precapprox;":"\u2ab7","\x26preccurlyeq;":"\u227c","\x26preceq;":"\u2aaf","\x26precnapprox;":"\u2ab9","\x26precneqq;":"\u2ab5","\x26precnsim;":"\u22e8","\x26precsim;":"\u227e","\x26prime;":"\u2032","\x26primes;":"\u2119","\x26prnE;":"\u2ab5","\x26prnap;":"\u2ab9","\x26prnsim;":"\u22e8",
"\x26prod;":"\u220f","\x26profalar;":"\u232e","\x26profline;":"\u2312","\x26profsurf;":"\u2313","\x26prop;":"\u221d","\x26propto;":"\u221d","\x26prsim;":"\u227e","\x26prurel;":"\u22b0","\x26pscr;":"\ud835\udcc5","\x26psi;":"\u03c8","\x26puncsp;":"\u2008","\x26qfr;":"\ud835\udd2e","\x26qint;":"\u2a0c","\x26qopf;":"\ud835\udd62","\x26qprime;":"\u2057","\x26qscr;":"\ud835\udcc6","\x26quaternions;":"\u210d","\x26quatint;":"\u2a16","\x26quest;":"?","\x26questeq;":"\u225f","\x26quot;":'"',"\x26rAarr;":"\u21db",
"\x26rArr;":"\u21d2","\x26rAtail;":"\u291c","\x26rBarr;":"\u290f","\x26rHar;":"\u2964","\x26race;":"\u223d\u0331","\x26racute;":"\u0155","\x26radic;":"\u221a","\x26raemptyv;":"\u29b3","\x26rang;":"\u27e9","\x26rangd;":"\u2992","\x26range;":"\u29a5","\x26rangle;":"\u27e9","\x26raquo;":"\u00bb","\x26rarr;":"\u2192","\x26rarrap;":"\u2975","\x26rarrb;":"\u21e5","\x26rarrbfs;":"\u2920","\x26rarrc;":"\u2933","\x26rarrfs;":"\u291e","\x26rarrhk;":"\u21aa","\x26rarrlp;":"\u21ac","\x26rarrpl;":"\u2945","\x26rarrsim;":"\u2974",
"\x26rarrtl;":"\u21a3","\x26rarrw;":"\u219d","\x26ratail;":"\u291a","\x26ratio;":"\u2236","\x26rationals;":"\u211a","\x26rbarr;":"\u290d","\x26rbbrk;":"\u2773","\x26rbrace;":"}","\x26rbrack;":"]","\x26rbrke;":"\u298c","\x26rbrksld;":"\u298e","\x26rbrkslu;":"\u2990","\x26rcaron;":"\u0159","\x26rcedil;":"\u0157","\x26rceil;":"\u2309","\x26rcub;":"}","\x26rcy;":"\u0440","\x26rdca;":"\u2937","\x26rdldhar;":"\u2969","\x26rdquo;":"\u201d","\x26rdquor;":"\u201d","\x26rdsh;":"\u21b3","\x26real;":"\u211c",
"\x26realine;":"\u211b","\x26realpart;":"\u211c","\x26reals;":"\u211d","\x26rect;":"\u25ad","\x26reg;":"\u00ae","\x26rfisht;":"\u297d","\x26rfloor;":"\u230b","\x26rfr;":"\ud835\udd2f","\x26rhard;":"\u21c1","\x26rharu;":"\u21c0","\x26rharul;":"\u296c","\x26rho;":"\u03c1","\x26rhov;":"\u03f1","\x26rightarrow;":"\u2192","\x26rightarrowtail;":"\u21a3","\x26rightharpoondown;":"\u21c1","\x26rightharpoonup;":"\u21c0","\x26rightleftarrows;":"\u21c4","\x26rightleftharpoons;":"\u21cc","\x26rightrightarrows;":"\u21c9",
"\x26rightsquigarrow;":"\u219d","\x26rightthreetimes;":"\u22cc","\x26ring;":"\u02da","\x26risingdotseq;":"\u2253","\x26rlarr;":"\u21c4","\x26rlhar;":"\u21cc","\x26rlm;":"\u200f","\x26rmoust;":"\u23b1","\x26rmoustache;":"\u23b1","\x26rnmid;":"\u2aee","\x26roang;":"\u27ed","\x26roarr;":"\u21fe","\x26robrk;":"\u27e7","\x26ropar;":"\u2986","\x26ropf;":"\ud835\udd63","\x26roplus;":"\u2a2e","\x26rotimes;":"\u2a35","\x26rpar;":")","\x26rpargt;":"\u2994","\x26rppolint;":"\u2a12","\x26rrarr;":"\u21c9","\x26rsaquo;":"\u203a",
"\x26rscr;":"\ud835\udcc7","\x26rsh;":"\u21b1","\x26rsqb;":"]","\x26rsquo;":"\u2019","\x26rsquor;":"\u2019","\x26rthree;":"\u22cc","\x26rtimes;":"\u22ca","\x26rtri;":"\u25b9","\x26rtrie;":"\u22b5","\x26rtrif;":"\u25b8","\x26rtriltri;":"\u29ce","\x26ruluhar;":"\u2968","\x26rx;":"\u211e","\x26sacute;":"\u015b","\x26sbquo;":"\u201a","\x26sc;":"\u227b","\x26scE;":"\u2ab4","\x26scap;":"\u2ab8","\x26scaron;":"\u0161","\x26sccue;":"\u227d","\x26sce;":"\u2ab0","\x26scedil;":"\u015f","\x26scirc;":"\u015d",
"\x26scnE;":"\u2ab6","\x26scnap;":"\u2aba","\x26scnsim;":"\u22e9","\x26scpolint;":"\u2a13","\x26scsim;":"\u227f","\x26scy;":"\u0441","\x26sdot;":"\u22c5","\x26sdotb;":"\u22a1","\x26sdote;":"\u2a66","\x26seArr;":"\u21d8","\x26searhk;":"\u2925","\x26searr;":"\u2198","\x26searrow;":"\u2198","\x26sect;":"\u00a7","\x26semi;":";","\x26seswar;":"\u2929","\x26setminus;":"\u2216","\x26setmn;":"\u2216","\x26sext;":"\u2736","\x26sfr;":"\ud835\udd30","\x26sfrown;":"\u2322","\x26sharp;":"\u266f","\x26shchcy;":"\u0449",
"\x26shcy;":"\u0448","\x26shortmid;":"\u2223","\x26shortparallel;":"\u2225","\x26shy;":"\u00ad","\x26sigma;":"\u03c3","\x26sigmaf;":"\u03c2","\x26sigmav;":"\u03c2","\x26sim;":"\u223c","\x26simdot;":"\u2a6a","\x26sime;":"\u2243","\x26simeq;":"\u2243","\x26simg;":"\u2a9e","\x26simgE;":"\u2aa0","\x26siml;":"\u2a9d","\x26simlE;":"\u2a9f","\x26simne;":"\u2246","\x26simplus;":"\u2a24","\x26simrarr;":"\u2972","\x26slarr;":"\u2190","\x26smallsetminus;":"\u2216","\x26smashp;":"\u2a33","\x26smeparsl;":"\u29e4",
"\x26smid;":"\u2223","\x26smile;":"\u2323","\x26smt;":"\u2aaa","\x26smte;":"\u2aac","\x26smtes;":"\u2aac\ufe00","\x26softcy;":"\u044c","\x26sol;":"/","\x26solb;":"\u29c4","\x26solbar;":"\u233f","\x26sopf;":"\ud835\udd64","\x26spades;":"\u2660","\x26spadesuit;":"\u2660","\x26spar;":"\u2225","\x26sqcap;":"\u2293","\x26sqcaps;":"\u2293\ufe00","\x26sqcup;":"\u2294","\x26sqcups;":"\u2294\ufe00","\x26sqsub;":"\u228f","\x26sqsube;":"\u2291","\x26sqsubset;":"\u228f","\x26sqsubseteq;":"\u2291","\x26sqsup;":"\u2290",
"\x26sqsupe;":"\u2292","\x26sqsupset;":"\u2290","\x26sqsupseteq;":"\u2292","\x26squ;":"\u25a1","\x26square;":"\u25a1","\x26squarf;":"\u25aa","\x26squf;":"\u25aa","\x26srarr;":"\u2192","\x26sscr;":"\ud835\udcc8","\x26ssetmn;":"\u2216","\x26ssmile;":"\u2323","\x26sstarf;":"\u22c6","\x26star;":"\u2606","\x26starf;":"\u2605","\x26straightepsilon;":"\u03f5","\x26straightphi;":"\u03d5","\x26strns;":"\u00af","\x26sub;":"\u2282","\x26subE;":"\u2ac5","\x26subdot;":"\u2abd","\x26sube;":"\u2286","\x26subedot;":"\u2ac3",
"\x26submult;":"\u2ac1","\x26subnE;":"\u2acb","\x26subne;":"\u228a","\x26subplus;":"\u2abf","\x26subrarr;":"\u2979","\x26subset;":"\u2282","\x26subseteq;":"\u2286","\x26subseteqq;":"\u2ac5","\x26subsetneq;":"\u228a","\x26subsetneqq;":"\u2acb","\x26subsim;":"\u2ac7","\x26subsub;":"\u2ad5","\x26subsup;":"\u2ad3","\x26succ;":"\u227b","\x26succapprox;":"\u2ab8","\x26succcurlyeq;":"\u227d","\x26succeq;":"\u2ab0","\x26succnapprox;":"\u2aba","\x26succneqq;":"\u2ab6","\x26succnsim;":"\u22e9","\x26succsim;":"\u227f",
"\x26sum;":"\u2211","\x26sung;":"\u266a","\x26sup;":"\u2283","\x26sup1;":"\u00b9","\x26sup2;":"\u00b2","\x26sup3;":"\u00b3","\x26supE;":"\u2ac6","\x26supdot;":"\u2abe","\x26supdsub;":"\u2ad8","\x26supe;":"\u2287","\x26supedot;":"\u2ac4","\x26suphsol;":"\u27c9","\x26suphsub;":"\u2ad7","\x26suplarr;":"\u297b","\x26supmult;":"\u2ac2","\x26supnE;":"\u2acc","\x26supne;":"\u228b","\x26supplus;":"\u2ac0","\x26supset;":"\u2283","\x26supseteq;":"\u2287","\x26supseteqq;":"\u2ac6","\x26supsetneq;":"\u228b",
"\x26supsetneqq;":"\u2acc","\x26supsim;":"\u2ac8","\x26supsub;":"\u2ad4","\x26supsup;":"\u2ad6","\x26swArr;":"\u21d9","\x26swarhk;":"\u2926","\x26swarr;":"\u2199","\x26swarrow;":"\u2199","\x26swnwar;":"\u292a","\x26szlig;":"\u00df","\x26target;":"\u2316","\x26tau;":"\u03c4","\x26tbrk;":"\u23b4","\x26tcaron;":"\u0165","\x26tcedil;":"\u0163","\x26tcy;":"\u0442","\x26tdot;":" \u20db","\x26telrec;":"\u2315","\x26tfr;":"\ud835\udd31","\x26there4;":"\u2234","\x26therefore;":"\u2234","\x26theta;":"\u03b8",
"\x26thetasym;":"\u03d1","\x26thetav;":"\u03d1","\x26thickapprox;":"\u2248","\x26thicksim;":"\u223c","\x26thinsp;":"\u2009","\x26thkap;":"\u2248","\x26thksim;":"\u223c","\x26thorn;":"\u00fe","\x26tilde;":"\u02dc","\x26times;":"\u00d7","\x26timesb;":"\u22a0","\x26timesbar;":"\u2a31","\x26timesd;":"\u2a30","\x26tint;":"\u222d","\x26toea;":"\u2928","\x26top;":"\u22a4","\x26topbot;":"\u2336","\x26topcir;":"\u2af1","\x26topf;":"\ud835\udd65","\x26topfork;":"\u2ada","\x26tosa;":"\u2929","\x26tprime;":"\u2034",
"\x26trade;":"\u2122","\x26triangle;":"\u25b5","\x26triangledown;":"\u25bf","\x26triangleleft;":"\u25c3","\x26trianglelefteq;":"\u22b4","\x26triangleq;":"\u225c","\x26triangleright;":"\u25b9","\x26trianglerighteq;":"\u22b5","\x26tridot;":"\u25ec","\x26trie;":"\u225c","\x26triminus;":"\u2a3a","\x26triplus;":"\u2a39","\x26trisb;":"\u29cd","\x26tritime;":"\u2a3b","\x26trpezium;":"\u23e2","\x26tscr;":"\ud835\udcc9","\x26tscy;":"\u0446","\x26tshcy;":"\u045b","\x26tstrok;":"\u0167","\x26twixt;":"\u226c",
"\x26twoheadleftarrow;":"\u219e","\x26twoheadrightarrow;":"\u21a0","\x26uArr;":"\u21d1","\x26uHar;":"\u2963","\x26uacute;":"\u00fa","\x26uarr;":"\u2191","\x26ubrcy;":"\u045e","\x26ubreve;":"\u016d","\x26ucirc;":"\u00fb","\x26ucy;":"\u0443","\x26udarr;":"\u21c5","\x26udblac;":"\u0171","\x26udhar;":"\u296e","\x26ufisht;":"\u297e","\x26ufr;":"\ud835\udd32","\x26ugrave;":"\u00f9","\x26uharl;":"\u21bf","\x26uharr;":"\u21be","\x26uhblk;":"\u2580","\x26ulcorn;":"\u231c","\x26ulcorner;":"\u231c","\x26ulcrop;":"\u230f",
"\x26ultri;":"\u25f8","\x26umacr;":"\u016b","\x26uml;":"\u00a8","\x26uogon;":"\u0173","\x26uopf;":"\ud835\udd66","\x26uparrow;":"\u2191","\x26updownarrow;":"\u2195","\x26upharpoonleft;":"\u21bf","\x26upharpoonright;":"\u21be","\x26uplus;":"\u228e","\x26upsi;":"\u03c5","\x26upsih;":"\u03d2","\x26upsilon;":"\u03c5","\x26upuparrows;":"\u21c8","\x26urcorn;":"\u231d","\x26urcorner;":"\u231d","\x26urcrop;":"\u230e","\x26uring;":"\u016f","\x26urtri;":"\u25f9","\x26uscr;":"\ud835\udcca","\x26utdot;":"\u22f0",
"\x26utilde;":"\u0169","\x26utri;":"\u25b5","\x26utrif;":"\u25b4","\x26uuarr;":"\u21c8","\x26uuml;":"\u00fc","\x26uwangle;":"\u29a7","\x26vArr;":"\u21d5","\x26vBar;":"\u2ae8","\x26vBarv;":"\u2ae9","\x26vDash;":"\u22a8","\x26vangrt;":"\u299c","\x26varepsilon;":"\u03f5","\x26varkappa;":"\u03f0","\x26varnothing;":"\u2205","\x26varphi;":"\u03d5","\x26varpi;":"\u03d6","\x26varpropto;":"\u221d","\x26varr;":"\u2195","\x26varrho;":"\u03f1","\x26varsigma;":"\u03c2","\x26varsubsetneq;":"\u228a\ufe00","\x26varsubsetneqq;":"\u2acb\ufe00",
"\x26varsupsetneq;":"\u228b\ufe00","\x26varsupsetneqq;":"\u2acc\ufe00","\x26vartheta;":"\u03d1","\x26vartriangleleft;":"\u22b2","\x26vartriangleright;":"\u22b3","\x26vcy;":"\u0432","\x26vdash;":"\u22a2","\x26vee;":"\u2228","\x26veebar;":"\u22bb","\x26veeeq;":"\u225a","\x26vellip;":"\u22ee","\x26verbar;":"|","\x26vert;":"|","\x26vfr;":"\ud835\udd33","\x26vltri;":"\u22b2","\x26vnsub;":"\u2282\u20d2","\x26vnsup;":"\u2283\u20d2","\x26vopf;":"\ud835\udd67","\x26vprop;":"\u221d","\x26vrtri;":"\u22b3","\x26vscr;":"\ud835\udccb",
"\x26vsubnE;":"\u2acb\ufe00","\x26vsubne;":"\u228a\ufe00","\x26vsupnE;":"\u2acc\ufe00","\x26vsupne;":"\u228b\ufe00","\x26vzigzag;":"\u299a","\x26wcirc;":"\u0175","\x26wedbar;":"\u2a5f","\x26wedge;":"\u2227","\x26wedgeq;":"\u2259","\x26weierp;":"\u2118","\x26wfr;":"\ud835\udd34","\x26wopf;":"\ud835\udd68","\x26wp;":"\u2118","\x26wr;":"\u2240","\x26wreath;":"\u2240","\x26wscr;":"\ud835\udccc","\x26xcap;":"\u22c2","\x26xcirc;":"\u25ef","\x26xcup;":"\u22c3","\x26xdtri;":"\u25bd","\x26xfr;":"\ud835\udd35",
"\x26xhArr;":"\u27fa","\x26xharr;":"\u27f7","\x26xi;":"\u03be","\x26xlArr;":"\u27f8","\x26xlarr;":"\u27f5","\x26xmap;":"\u27fc","\x26xnis;":"\u22fb","\x26xodot;":"\u2a00","\x26xopf;":"\ud835\udd69","\x26xoplus;":"\u2a01","\x26xotime;":"\u2a02","\x26xrArr;":"\u27f9","\x26xrarr;":"\u27f6","\x26xscr;":"\ud835\udccd","\x26xsqcup;":"\u2a06","\x26xuplus;":"\u2a04","\x26xutri;":"\u25b3","\x26xvee;":"\u22c1","\x26xwedge;":"\u22c0","\x26yacute;":"\u00fd","\x26yacy;":"\u044f","\x26ycirc;":"\u0177","\x26ycy;":"\u044b",
"\x26yen;":"\u00a5","\x26yfr;":"\ud835\udd36","\x26yicy;":"\u0457","\x26yopf;":"\ud835\udd6a","\x26yscr;":"\ud835\udcce","\x26yucy;":"\u044e","\x26yuml;":"\u00ff","\x26zacute;":"\u017a","\x26zcaron;":"\u017e","\x26zcy;":"\u0437","\x26zdot;":"\u017c","\x26zeetrf;":"\u2128","\x26zeta;":"\u03b6","\x26zfr;":"\ud835\udd37","\x26zhcy;":"\u0436","\x26zigrarr;":"\u21dd","\x26zopf;":"\ud835\udd6b","\x26zscr;":"\ud835\udccf","\x26zwj;":"\u200d","\x26zwnj;":"\u200c"},e=null;return{_entities:function(){return h},
replaceUnicodeByEntityName:function(g){if(!e){var d;e={};for(d in h)h.hasOwnProperty(d)&&(e[h[d]]=d)}return g.replace(/[^\000-\177]/g,function(c){return e[c]||c})},replace:function(e){return e.replace(/(&\w+;)/g,function(d){return h[d]||d})}}})},"MW/equations/utils/StringUtils":function(){define([],function(){return{fromCodePoint:function(h){return String.fromCodePoint?String.fromCodePoint(h):65535<h?(h-=65536,String.fromCharCode(55296+(h>>10),56320+(h&1023))):String.fromCharCode(h)}}})},"MW/equations/utils/HasExtensions":function(){define(["dojo/has"],
function(h){h.add("linux",function(){return window.navigator.platform.match(/linux/i)});h.add("win",function(){return window.navigator.platform.match(/win32|win64/i)})})},"MW/equations/renderer/model/importers/TeXSymbols":function(){define([],function(){var h="aleph alpha amalg angle approx ast asymp backslash beta bigcap bigcup biguplus bigvee bigwedge bigodot bigoplus bigotimes bigsqcup bigtriangleup bigtriangledown bigcirc bot bowtie bullet cap cdot cdotp cdots chi circ colon cong cup dagger ddagger dashv ddots delta Delta diamond div doteq dots downarrow Downarrow ell emptyset equiv epsilon eta exists forall Gamma gamma ge geq gets gg hbar hookleftarrow hookrightarrow i iff Im imath in infty int intbar intop iota j jmath kappa lambda Lambda land langle lbrace lbrack llbracket lceil ldotp ldots le leq leadsto leftarrow Leftarrow leftrightarrow Leftrightarrow leftharpoondown leftharpoonup lfloor ll lnot longleftarrow Longleftarrow longleftrightarrow Longleftrightarrow longmapsto longrightarrow Longrightarrow lor lt mapsto mid models mp mu nabla ne neq neg nearrow nwarrow ni notin nu odot oint omega Omega omicron ominus oplus otimes oslash owns parallel partial perp pi Pi phi Phi psi Psi pm prec preceq prime propto prod rangle rbrace rbrack rrbracket rceil Re rfloor rho rightarrow Rightarrow rightharpoondown rightharpoonup rightleftharpoons sigma searrow setminus Sigma sim simeq sqcap sqcup sqsubseteq sqsupseteq star subset subseteq succ succeq sum supset supseteq surd swarrow tau theta therefore Theta times to top triangle triangleq triangleleft triangleright uplus upsilon Upsilon uparrow Uparrow updownarrow Updownarrow varepsilon varphi varpi varrho varsigma vartheta vdash vdots vee vert Vert wedge wp wr xi Xi zeta".split(" "),
e={};h.forEach(function(g){e[g]=!0},h);return e})},"MW/equations/renderer/model/utils/NodeFactory":function(){define("../MathAction ../MathDelimiter ../MathFenced ../MathFraction ../MathMatrix ../MathMultiScript ../MathRadical ../MathRoot ../MathRow ../MathScript ../MathSpace ../MathStyle ../MathText".split(" "),function(h,e,g,d,c,b,a,f,k,l,n,p,m){return{createNode:function(q,r){r=r||{};switch(q){case "Null":return null;case "MathAction":return r.children=r.children||[],new h(r);case "MathDelimiter":return new e(r);
case "MathFenced":return r.children=r.children||[],new g(r);case "MathFraction":return r.children=r.children||[],new d(r);case "MathMatrix":return r.children=r.children||[],new c(r);case "MathMultiScript":return r.children=r.children||[],new b(r);case "MathRadical":return r.children=r.children||[],new a(r);case "MathRoot":return r.children=r.children||[],new f(r);case "MathRow":return r.children=r.children||[],new k(r);case "MathScript":return r.children=r.children||[],new l(r);case "MathSpace":return new n(r);
case "MathStyle":return r.children=r.children||[],new p(r);case "MathText":return r.text=r.text||"",new m(r)}}}})},"MW/equations/renderer/model/MathAction":function(){define(["dojo/_base/declare","dojo/_base/lang","./MathInnerNode","./utils/MathMLExportUtils","./utils/TeXUtils"],function(h,e,g,d,c){return h(g,{constructor:function(b){b=b||{};this.className="MathAction";this.actiontype=b.actiontype},_exportMathML:function(b){var a=d.startTag(b,"maction",this,["actiontype"]);b=e.mixin({},b);"symunit"===
this.class&&(b.mathvariant="normal");this.children.forEach(function(f){a+=f._exportMathML(b)});return a+=d.endTag("maction")},_exportLaTeX:function(b){var a="";0<this.children.length&&(b=e.mixin({},b),"symunit"===this.class&&(b.mathvariant="normal"),a+=c.exportChild(this.children[0],b));return a},_stripQuotes:function(b){return 2<b.length&&'"'===b.charAt(0)&&'"'===b.charAt(b.length-1)?b.slice(1,-1):b},layout:function(b){var a=b.layoutChildren([this.children[0]]);b=b.parseBoxes("h{1}",a);b.computeMetrics();
"tooltip"===this.actiontype&&(a=this.children[1],"MathRow"===a.className&&1===a.children.length&&(a=a.children[0],"MathText"===a.className&&(b.tooltip=this._stripQuotes(a.text))));return b}})})},"MW/equations/renderer/model/MathDelimiter":function(){define("dojo/_base/declare MW/equations/renderer/model/SpacingClasses ./MathBaseNode ./Symbols ./utils/MathMLExportUtils ./utils/TeXUtils".split(" "),function(h,e,g,d,c,b){return h(g,{constructor:function(a){a=a||{};this.className="MathDelimiter";this.symbolName=
a.symbolName;this.TeXSpacing=a.TeXSpacing;this.minsize=a.minsize;this.maxsize=a.maxsize;a.hasOwnProperty("stretchy")&&(this.stretchy=a.stretchy)},_exportMathML:function(a){var b=["minsize","maxsize"];d.isStretchyAccent(this.symbolName)&&!d.isStretchyOperatorByDefault(this.symbolName)&&b.push("stretchy");a=c.startTag(a,"mo",this,b);a+=c.maskSpecialCharacters(d.serializeSymbol(this.symbolName));return a+=c.endTag("mo")},_exportLaTeX:function(a){var f="",c={"1.2":"big","1.8":"Big","2.4":"bigg",3:"Bigg"};
if(d.isStretchyOperatorByDefault(this.symbolName))if(d.isOpeningDelimiter(this.symbolName)||d.isSeparator(this.symbolName)&&0===a.openParens)f=this.minsize&&this.minsize===this.maxsize&&c[this.minsize]?f+("\\"+c[this.minsize]+(this.TeXSpacing===e.OPEN?"l":"")):f+"\\left",a.openParens+=1;else if(d.isClosingDelimiter(this.symbolName)||d.isSeparator(this.symbolName)&&0<a.openParens)f=this.minsize&&this.minsize===this.maxsize&&c[this.minsize]?f+("\\"+c[this.minsize]+(this.TeXSpacing===e.CLOSE?"r":"")):
f+"\\right",a.openParens-=1;return f+=b.commandName(this.symbolName," ")},_layoutStretchyBox:function(a,b){var c=a.mathAxis();b.setSymbolBoxData(this,c);return b},_layoutHorizontalStretchyBox:function(a,b){b.setSymbolBoxData(this);return b},isVerticalDelimiter:function(){return!d.isStretchyAccent(this.symbolName)},getAccent:function(){return d.isAccent(this.symbolName)?this:null},layout:function(a){return d.isStretchyAccent(this.symbolName)?this._layoutHorizontalStretchyBox(a,a.parseBoxes("a")):this._layoutStretchyBox(a,
a.parseBoxes("s"))}})})},"MW/equations/renderer/model/MathFenced":function(){define(["dojo/_base/declare","./MathInnerNode","./SpacingClasses","./utils/MathMLExportUtils","./utils/TeXUtils"],function(h,e,g,d,c){return h(e,{constructor:function(b){b=b||{};this.className="MathFenced";this.open=b.open||"(";this.close=b.close||")"},_exportMathML:function(b){var a=d.startTag(b,"mfenced",this,["open","close"]);this.children.forEach(function(f){a+=f._exportMathML(b)});return a+=d.endTag("mfenced")},_exportLaTeX:function(b){var a=
this.open?this.open:".",f=this.close?this.close:".",f="}"===f?"\\}":f,d="{\\left"+("{"===a?"\\{":a),a=b.addBraces;b.openParens=0;b.addBraces=c.NEVER_ADD_BRACES;this.children.forEach(function(a){d+=c.exportChild(a,b)});d+="\\right"+f+"}";b.addBraces=a;return d},layout:function(b){var a=b.layoutChildren(this.children),f=a[0],a=b.parseBoxes("h{s1s}",a),c=a.templateParts,d=c[1],e=c[2];d.setSymbolName(this.open);d.resizeAndCenterDelimiter(b,f.ascent(),f.descent());e.setSymbolName(this.close);e.resizeAndCenterDelimiter(b,
f.ascent(),f.descent());b.computeTemplateMetrics(c);a.spacing=g.NEST;d.spacing=g.OPEN;e.spacing=g.CLOSE;return a}})})},"MW/equations/renderer/model/MathFraction":function(){define(["dojo/_base/declare","./MathInnerNode","./SpacingClasses","./utils/MathMLExportUtils","./utils/TeXUtils"],function(h,e,g,d,c){return h(e,{constructor:function(b){b=b||{};this.className="MathFraction";this.bevelled=b.bevelled||!1;this.linethickness=b.hasOwnProperty("linethickness")?b.linethickness:""},_exportMathML:function(b){var a=
[];this.bevelled&&a.push("bevelled");""!==this.linethickness&&a.push("linethickness");var f=d.startTag(b,"mfrac",this,a);this.children.forEach(function(a){f+=a._exportMathML(b)});return f+=d.endTag("mfrac")},_exportLaTeX:function(b){var a=b.addBraces;b.addBraces=c.ALWAYS_ADD_BRACES;var f="",f=c.exportChild(this.children[0],b),d=c.exportChild(this.children[1],b),f=""!==this.linethickness&&0===parseFloat(this.linethickness)?f+"\\atop"+d:"\\frac"+f+d;b.addBraces=a;return f},_layoutRegularFraction:function(b,
a){var f;f=a.mathAxis();var c=a.barHeight(),d=a.parseBoxes("v{1wrw2}",b),e=d.templateParts,h=parseFloat(this.linethickness);isNaN(h)&&(h=c);e[1].length=c;e[3].length=c;e[2].thickness=h;e[0].alignment="c";a.computeTemplateMetrics(e);f=b[0].height()+f-c;d.setAscent(f);d.spacing=g.INNER;return d},_placeFractionBar:function(b,a,f,c,d){var e=f+c,g=2/3;b.setSymbolName("/");b.resizeAndCenterDelimiter(a,f*g,c*g);b.setAscent(b.height()/e*f+d);b.setWidth(a.emToPx(0.1));b.setLeft(-Math.floor((b.precomputedWidth-
b.width())/2))},_layoutBevelledFraction:function(b,a){var f=a.parseBoxes("h{v{1}v{s}v{2}}",b),c=f.templateParts,d=c[1],e=c[2],g=c[3],h=c[4],q=a.mathAxis()/2,r=b[0].height(),s=b[1].height();this._placeFractionBar(c[3],a,r,s,q);d.computeMetrics();d.setDescent(0);e.computeMetrics();e.setAscent(g.ascent()-q);h.computeMetrics();h.setAscent(0);f.computeMetrics();return f},layout:function(b){var a=b.layoutChildren(this.children);return this.bevelled?this._layoutBevelledFraction(a,b):this._layoutRegularFraction(a,
b)}})})},"MW/equations/renderer/model/MathMatrix":function(){define(["dojo/_base/declare","MW/equations/renderer/model/MathConstants","./MathInnerNode","./utils/MathMLExportUtils","./utils/TeXUtils"],function(h,e,g,d,c){return h(g,{constructor:function(b){this.className="MathMatrix";this.rows=b.rows;this.cols=b.cols;this.frame=b.frame;this.colspec=b.colspec||"";this.rowspacing="";this.hlines=b.hlines||null},setHLines:function(b){this.hlines=b},setFrame:function(b){this.frame=b},_exportMathML:function(b){var a=
[],f=this.colspec,c=!1,e,g="";if(""!==f){for(e=0;e<f.length;e+=1)switch(f.charAt(e)){case "a":case "c":g+=" center";break;case "l":g+=" left";break;case "r":g+=" right";break;case "d":g+=" decimalpoint",c=!0}g=g.slice(1);c?(this.groupalign=g,a.push("groupalign")):(this.columnalign=g,a.push("columnalign"))}this.frame&&a.push("frame");this.hlines&&(this.rowlines=this.hlines.join(" "),a.push("rowlines"));a=d.startTag(b,"mtable",this,a);for(c=0;c<this.rows;c+=1){a+=d.startTag(b,"mtr",this);for(f=0;f<
this.cols;f+=1)a+=d.startTag(b,"mtd",this),a+=this.children[c*this.cols+f]._exportMathML(b),a+=d.endTag("mtd");a+=d.endTag("mtr")}return a+=d.endTag("mtable")},_canSplit:function(b,a){var f=-1,c=[b,""];if("d"===a)f=b.indexOf(".");else if("a"===a){var d,e,g;d=b.indexOf("\x3d");e=b.indexOf("\x3c");g=b.indexOf("\x3e");f=Math.max(d,e,g);f=-1<d&&d<f?d:f;f=-1<e&&e<f?e:f;f=-1<g&&g<f?g:f}-1!==f&&(c=[b.slice(0,f),b.slice(f)]);return c},_exportChildrenToLaTeX:function(b){var a,f,d,e=Array(this.rows),g=Array(this.cols),
h=this.colspec||"c";h.length<this.cols&&(h+=Array(this.cols-h.length+1).join(h[h.length-1]));for(a=0;a<this.cols;a+=1)g[a]="a"===h[a]||"d"===h[a];for(f=0;f<this.rows;f+=1){e[f]=Array(this.cols);for(a=0;a<this.cols;a+=1)d=[c.exportChild(this.children[f*this.cols+a],b)],g[a]&&(d=this._canSplit(d[0],h[a]),g[a]&=""!==d[1]),e[f][a]=d}h=h.split("");for(a=0;a<this.cols;a+=1)if("a"===h[a]||"d"===h[a])h[a]=g[a]?"rl":"c";return{entries:e,colNeedsSplit:g,colspec:h.join("")}},_exportLaTeX:function(b){var a,f,
c=b.addBraces;b.addBraces="never";var d=this._exportChildrenToLaTeX(b),g=this.frame===e.SOLID_LINE||this.frame===e.DASHED_LINE;g&&(d.colspec="|"+d.colspec+"|");var h="\\begin{array}{"+d.colspec+"}\n";g&&(h+="\\hline\n");for(f=0;f<this.rows;f+=1){null!==this.hlines&&this.hlines[f]===e.SOLID_LINE&&(h+="\\hline\n");for(a=0;a<this.cols;a+=1)h=d.colNeedsSplit[a]?h+d.entries[f][a].join("\\kern -0.8em\x26"):h+d.entries[f][a].join(""),h+=a<this.cols-1?" \x26 ":"";h+=f<this.rows-1?"\\\\\n":"\n"}g&&(h=h.slice(0,
-1)+"\\\\\n\\hline\n");b.addBraces=c;return h+"\\end{array}"},_initColSpec:function(b){var a=this.colspec||"c",f;a.length<b&&(f=a.charAt(a.length-1),b=b-a.length+1,a+=Array(b).join(f));return a},_initWorkData:function(b,a,f,c){b=c.renderer;a={rowAscent:[],rowDescent:[],columnspacing:Math.ceil(c.emToPx(0.8)),rowspacing:Math.ceil(c.emToPx(0.4))};var d=a.rowspacing/2,e,g;for(e=f-1;0<=e;e-=1)g=0===e?0:d,a.rowAscent[e]=Math.ceil(c.emToPx(b.fontAscent)+g),g=e===f-1?0:d,a.rowDescent[e]=Math.ceil(c.emToPx(b.fontDescent)+
g);return a},_setColumnAlignment:function(b,a,f,c,d){f=this._initColSpec(f);var e;for(e=0;e<a.length;e+=1)a[e]=this._setOneColumnAlignment(b,a[e],c,f.charAt(e),d)},_setOneColumnAlignment:function(b,a,f,c,d){var e=null;if("l"===c||"r"===c||"c"===c)return a.alignment=c,a;if(1===f)return a;if("d"===c||"a"===c||""===c)e=this._splitColumn(b,a,f,c,d);else throw"unknown alignment "+c;if(!e)return a;b=d.parseBoxes("h{*}",e);b.computeMetrics();return b},_getSplitInfo:function(b,a,f){var c=[],d,e;for(d=0;d<
f;d+=1){e=b.children[d];e=e.findAlignmentPoint(a,[]);if(!e)return null;c.push(e)}return c},_newTableEntryBox:function(b,a){return b.parseBoxes("h{v{}1w}",[a])},_splitColumn:function(b,a,f,c,d){var e="d",g=[],h,q;"a"===c&&(e="\x3d");c=this._getSplitInfo(a,e,f);if(!c)return null;for(e=0;e<f;e+=1)h=a.children[e],c[e]&&(q=h.splitAt(c[e]),q=this._newTableEntryBox(d,q.right)),g.push(q);d=d.parseBoxes("v{*}",g);this._setOneColumnEntrySizes(b,0,[d],1,f);d.computeMetrics();a.alignment="r";d.alignment="l";
return[a,d]},_computeEntrySizes:function(b,a,f,c){var d,e,g,h,q=b.rowspacing/2;for(d=f-1;0<=d;d-=1){e=a[d].children;for(f=c-1;0<=f;f-=1)g=e[f].children[1],h=0===f?0:q,b.rowAscent[f]=Math.max(b.rowAscent[f],Math.ceil(g.ascent()+h)),h=f===c-1?0:q,b.rowDescent[f]=Math.max(b.rowDescent[f],Math.ceil(g.descent()+h))}},_setOneColumnEntrySizes:function(b,a,f,c,d){var e,g;f=f[a];for(d-=1;0<=d;d-=1)e=f.children[d],g=e.templateParts,g[1].setMetrics({ascent:b.rowAscent[d],descent:b.rowDescent[d]}),a<c-1&&(g[2].length=
b.columnspacing),g[2].computeMetrics(),e.computeMetrics();f.computeMetrics()},_setEntrySizes:function(b,a,f,c){var d;for(d=0;d<f;d+=1)this._setOneColumnEntrySizes(b,d,a,f,c)},_addFrame:function(b,a){this.frame&&(b.borderStyle=this.frame,b.borderWidth=a.barHeight())},_setTableData:function(b,a){var f=b.children[0].children,c=f.length,d=f[0].children.length,e=this._initWorkData(f,c,d,a);this._computeEntrySizes(e,f,c,d);this._setEntrySizes(e,f,c,d);this._setColumnAlignment(e,f,c,d,a);this._addFrame(b,
a);b.children[0].computeMetrics();b.computeMetrics()},_insertRowLines:function(b,a){var f=b.children[0].children,c,d,g,h;h=a.barHeight();for(d=0;d<this.cols;d+=1)for(c=this.rows-1;0<=c;c-=1)this.hlines[c]===e.SOLID_LINE&&(g=a.parseBoxes("r",null),g.thickness=h,g.computeMetrics(),f[d].children.splice(c,0,g));b.children[0].computeMetrics();b.computeMetrics()},_makeTableBox:function(b,a,f){b=[];var c,d,e,g;for(d=this.cols-1;0<=d;d-=1){e=[];for(c=this.rows-1;0<=c;c-=1)g=c*this.cols+d,g=a[g],e[c]=this._newTableEntryBox(f,
g);b[d]=f.parseBoxes("v{*}",e)}return f.parseBoxes("v{h{*}}",b)},layout:function(b){var a=this.children,f=b.layoutChildren(this.children),a=this._makeTableBox(a,f,b);0<this.children.length&&(this._setTableData(a,b),null!==this.hlines&&this._insertRowLines(a,b),1<this.rows&&a.centerAt(b.mathAxis()));return a}})})},"MW/equations/renderer/model/MathMultiScript":function(){define(["dojo/_base/declare","./MathInnerNode","./utils/MathMLExportUtils","./utils/TeXUtils"],function(h,e,g,d){return h(e,{constructor:function(c){this.className=
"MathMultiScript";c=c||{};this.numPostPairs=c.numPostPairs||0},_exportChildToMathML:function(c,b){return b?b._exportMathML(c):g.emptyTag("none")},_exportMathML:function(c){var b=g.startTag(c,"mmultiscripts",this),a=this.children,f,d=this.numPostPairs,e=Math.floor((a.length-1-2*d)/2),b=b+this._exportChildToMathML(c,a[0]);for(f=1;f<2*d+1;f+=1)b+=this._exportChildToMathML(c,a[f]);if(e){b+=g.emptyTag("mprescripts");for(f=2*d+1;f<a.length;f+=1)b+=this._exportChildToMathML(c,a[f])}return b+=g.endTag("mmultiscripts")},
_exportChildrenToLaTeX:function(c,b,a,f){b=null!==b?d.exportChild(b,c):"{}";a=d.exportChild(a,c);c=d.exportChild(f,c);return b=b+(c?"^"+c:"")+(a?"_"+a:"")},_exportLaTeX:function(c){var b="",a=this.children,f,d=this.numPostPairs;if(Math.floor((a.length-1-2*d)/2))for(f=2*d+1;f<a.length;f+=2)b+=this._exportChildrenToLaTeX(c,null,a[f],a[f+1]);if(d){b+=this._exportChildrenToLaTeX(c,a[0],a[1],a[2]);for(f=3;f<2*d+1;f+=2)b+=this._exportChildrenToLaTeX(c,null,a[f],a[f+1])}else b+=this._exportChildrenToLaTeX(c,
a[0],null,null);return b},_makeOneMultiScriptBox:function(c,b,a,f){c=b&&a?c.parseBoxes("v{2w1}",[b,a]):c.parseBoxes("v{21}",[b,a]);c.alignment=f;return c},_makeMultiScriptBoxes:function(c,b,a,f){var d,e=1,g=[];g[a]=c[0];for(d=0;d<f;d+=1,e+=2)g[a+1+d]=this._makeOneMultiScriptBox(b,c[e],c[e+1],"l");for(d=0;d<a;d+=1,e+=2)g[d]=this._makeOneMultiScriptBox(b,c[e],c[e+1],"r");return b.parseBoxes("h{*}",g)},_fillSizesAndScripts:function(c,b,a,f,d){var e,g=1+2*a,h;for(e=0;e<b+a;e+=1)f.push(-1),f.push(1),e===
b&&(g=1,d.push(0)),h=0,c[g]&&(h=2),c[g+1]&&(h+=1),d.push(h),g+=2},layout:function(c){var b=this.children,a;a=this.numPostPairs;var f=Math.floor((b.length-1-2*a)/2),d=[0],e=[];this._fillSizesAndScripts(b,f,a,d,e);b=c.layoutChildren(b,{sizes:d});a=this._makeMultiScriptBoxes(b,c,f,a);a.setMultiScriptData(c,f,e);return a}})})},"MW/equations/renderer/model/MathRadical":function(){define(["dojo/_base/declare","./MathInnerNode","./SpacingClasses","./utils/MathMLExportUtils","./utils/TeXUtils"],function(h,
e,g,d,c){return h(e,{constructor:function(b){this.className="MathRadical"},_exportMathML:function(b){var a=this.children[1],f=(a=null===a||a.children&&0===a.children.length)?"msqrt":"mroot",c=d.startTag(b,f,this),c=c+this.children[0]._exportMathML(b);a||(c+=this.children[1]._exportMathML(b));return c+=d.endTag(f)},_exportLaTeX:function(b){var a=b.addBraces,f=this.children[1],d="\\sqrt";null===f||f.children&&0===f.children.length||(b.addBraces=c.NEVER_ADD_BRACES,d+="["+c.exportChild(this.children[1],
b)+"]");b.addBraces=c.ALWAYS_ADD_BRACES;d+=c.exportChild(this.children[0],b);b.addBraces=a;return d},_layoutSqrt:function(b,a){var f=b.parseBoxes("h{v{s}v{rw1}}",a),c=f.templateParts,d=b.barHeight(),e=a[0],h,m,q=c[h=1],r=c[h+=1],s=c[h+=1],t=h;c[h+=1].thickness=d;m=e.ascent()+2*d;r.setSymbolName("radical");r.alignment="r";r.resizeStretchBox(b,m,e.descent()-b.emToPx(b.renderer.fontDescent));h=c[h+1];h.length=d;b.computeTemplateMetrics(c,t);s.setAscent(e.ascent()+h.length+d);s.computeMetrics();q.computeMetrics();
q.setAscent(s.ascent());f.computeMetrics();f.spacing=g.INNER;return f},_layoutNthRoot:function(b,a){var f,c=a[0],d=b.emToPx(1);f=b.barHeight();var e=c.ascent()+f+f,h,m,q,r,s,t,u,v,w,x=0;t=0;h=b.parseBoxes("h{v{h{2w}wv{s}}v{rw1}}",a);m=h.templateParts;q=m[t+=1];w=m[t+=1];w.computeMetrics();v=m[t+=1];v.horizontal=!0;v.length=d/4;v.computeMetrics();v=m[t+=1];u=m[t+=1];u.alignment="r";r=m[t+=1];d=m[t+=1];x=t;s=m[t+=1];t=m[t+1];s.thickness=f;r.setSymbolName("radical");r.alignment="r";r.resizeStretchBox(b,
e,c.descent());c=r.height()-f-f-c.height();t.length=f+c/2;b.computeTemplateMetrics(m,x);r.setAscent(d.height()-c/2);u.computeMetrics();u.height();w.height();u.height();f*=-2;v.length=-f;v.computeMetrics();q.computeMetrics();q.setAscent(d.ascent()+w.height()-f);h.computeMetrics();h.spacing=g.INNER;return h},layout:function(b){var a=b.layoutChildren(this.children,{sizes:[0,1]}),f=a[1];return 0===f.ascent()&&0===f.descent()?this._layoutSqrt(b,a):this._layoutNthRoot(b,a)}})})},"MW/equations/renderer/model/MathRoot":function(){define(["dojo/_base/declare",
"./MathInnerNode","./utils/TeXUtils"],function(h,e,g){return h(e,{constructor:function(d){d=d||{};this.className="MathRoot";this.inline=d.inline},_exportMathML:function(d){var c="";this.children.forEach(function(b){c+=b._exportMathML(d)});return c},_exportLaTeX:function(d){var c="";d.addBraces=g.NEVER_ADD_BRACES;this.children.forEach(function(b){c+=g.exportChild(b,d)});return c},isDisplaystyle:function(){var d=!1;if(!0===this.inline||!1===this.inline)d=!this.inline;if(!0===this._displaystyle||!1===
this._displaystyle)d=this._displaystyle;return d},layout:function(d){var c;this._displaystyle=!1;if(!0===this.inline||!1===this.inline)this._displaystyle=!this.inline;if(!0===d.displaystyle||!1===d.displaystyle)this._displaystyle=d.displaystyle;c=d.layoutChildren(this.children);return d.parseBoxes("h{*}",c)}})})},"MW/equations/renderer/model/MathScript":function(){define("dojo/_base/declare ./MathInnerNode ./Symbols ./utils/MathMLExportUtils ./utils/MathNodeUtils ./utils/TeXUtils".split(" "),function(h,
e,g,d,c,b){return h(e,{constructor:function(a){a=a||{};this.className="MathScript";this.limitStyle=a.limitStyle||"auto";var b=a.accent;this.accent=!0===b||!1===b?b:"auto";b=a.accentunder;this.accentunder=!0===b||!1===b?b:"auto"},_exportMathML:function(a){var b="m",c=[],e=this.children[0],g=this.children[1],h=this.children[2];this.isStacked()?(b=b+(g?"under":"")+(h?"over":""),"auto"!==this.accent&&c.push("accent"),"auto"!==this.accentunder&&c.push("accentunder")):(b+=g?"sub":"",b+=h?"sup":"");c=d.startTag(a,
b,this,c);c+=e._exportMathML(a);g&&(c+=g._exportMathML(a));h&&(c+=h._exportMathML(a));return c+=d.endTag(b)},isStacked:function(){var a=this.children[0],b=this.children[1],c=this.children[2],a="auto"===this.limitStyle&&this.isDisplaystyle()&&this._movableLimits(a),a="stack"===this.limitStyle||a,b=c&&c.getAccent()||b&&b.getAccent();return a||b},_exportLaTeX:function(a){var f=a.addBraces,c=this.children[0],d=this.children[1];d&&(d.children&&0===d.children.length)&&(d=null);var e=d&&d.getAccent(),g=
this.children[2];g&&(g.children&&0===g.children.length)&&(g=null);var h=g&&g.getAccent(),q=this.isStacked();a.addBraces=b.ADD_BRACES_WHERE_NEEDED;var c=b.exportChild(c,a),r=c.match(/^{(\\[A-Za-z]+) }$/);r&&(c=r[1]);var s=b.exportChild(d,a),t=b.exportChild(g,a);if(q&&!r)1===c.length&&(c="{"+c+"}"),d&&(1===s.length&&(s="{"+s+"}"),d={macron:"\\underline",underbrace:"\\underbrace"},c=e&&this.accentunder&&d.hasOwnProperty(e.symbolName)?d[e.symbolName]+c:"\\underset"+s+c,c=g?"{"+c+"}":c),g&&(1===t.length&&
(t="{"+t+"}"),e={macron:"\\bar",overbrace:"\\overbrace",circumflex:"\\hat",breve:"\\breve",grave:"\\grave",dotabove:"\\dot",caron:"\\check",acute:"\\acute",sim:"\\tilde",rightarrow:"\\vec",diaresis:"\\ddot"},h&&h.stretchy&&(e.circumflex="\\widehat",e.sim="\\widetilde",e.macron="\\overline",e.leftarrow="\\overleftarrow",e.rightarrow="\\overrightarrow",e.leftrightarrow="\\overleftrightarrow"),c=h&&this.accent&&e.hasOwnProperty(h.symbolName)?e[h.symbolName]+c:"\\overset"+t+c);else{if("'"===t||"\u2032"===
t)t="{"+t+"}";c=c+(s&&"{}"!==s?"_"+s:"")+(t&&"{}"!==t?"^"+t:"")}a.addBraces=f;return c+" "},_makeNoLimitsScriptBoxes:function(a,b){var d;d=c.isNonEmptyRow(this.children[1]);var e=c.isNonEmptyRow(this.children[2]);d=d&&e?b.parseBoxes("h{1v{3w2}}",a):b.parseBoxes("h{1v{23}}",a);d.templateParts[1].alignment="l";return d},_movableLimits:function(a){if(a.movableLimits)return!0;if((a=a.children)&&1===a.length)if(a=a[0],a.movableLimits||a.symbolName&&(a=g.getSymbol(a.symbolName))&&a.movableLimits)return!0;
return!1},isItalicText:function(a){var b=this.children[0];return!0===this.accent&&b.isItalicText(a)},layout:function(a){var b=this.children[0],d,e,g=null,h=!1,m,q=this.accentunder,r=this.accent;d=this.children[1];"auto"===q&&(q=d&&null!==d.getAccent());e=this.children[2];"auto"===r&&(r=e&&null!==e.getAccent());m=[0,q?0:-1,r?0:1];b&&1===b.children.length&&(g=b.children[0],h=g.isItalicText(a.mathvariant));var b=a.layoutChildren(this.children,{length:1,sizes:m}),g=b[0],s=0,t=0;g&&(s=g.subLeftShift+(h?
g.rightItalicCorrection()/2:0),t=g.supRightShift);e&&(e.baseIsItalic=h,e.rightShift=r?0:t,e.accentType=r?"topaccent":"supscript");d&&(d.baseIsItalic=h,d.leftShift=q?0:s,d.accentType=q?"bottomaccent":"subscript");b=a.layoutChildren(this.children,{startIdx:1,sizes:m,boxes:b});d=c.isNonEmptyRow(d);m=c.isNonEmptyRow(e);this.isStacked()?(h=d?m?a.parseBoxes("v{3w1w2}",b):a.parseBoxes("v{1w2}",b):a.parseBoxes("v{3w1}",b),h.setLimitsScriptData(a,b,d,q,m,r)):(h=this._makeNoLimitsScriptBoxes(b,a),h.setNoLimitsScriptData(a,
b));1===b[0].children.length&&(h.spacing=b[0].children[0].spacing);h.setBelowXheight(g&&g.belowXheight()&&!e);return h}})})},"MW/equations/renderer/model/MathSpace":function(){define(["dojo/_base/declare","./MathBaseNode","./utils/MathMLExportUtils"],function(h,e,g){return h(e,{constructor:function(d){d=d||{};this.className="MathSpace";this.length=d.length||0;this.width=this.length+"em"},_exportMathML:function(d){d=g.startTag(d,"mspace",this,["width"]);return d+=g.endTag("mspace")},_exportLaTeX:function(d){var c=
"",b=18*this.length;if(0>b)for(;-3>b;)c+="\\!",b+=3;else[[9,"~"],[5,"\\;"],[4,"\\:"],[3,"\\,"]].forEach(function(a){for(;b>=a[0];)c+=a[1],b-=a[0]});return c},layout:function(d){var c=d.parseBoxes("w",[]);c.length=d.emToPx(this.length);c.horizontal=!0;return c}})})},"MW/equations/renderer/model/MathStyle":function(){define(["dojo/_base/declare","./MathInnerNode","./utils/MathMLExportUtils","./utils/TeXUtils"],function(h,e,g,d){return h(e,{constructor:function(c){c=c||{};this.className="MathStyle";
this.scriptlevel=c.scriptlevel;this.displaystyle=c.displaystyle;c.mathsize&&"pt"===c.mathsize.slice(-2)&&(this.mathsize=c.mathsize)},_exportMathML:function(c){var b=g.startTag(c,"mstyle",this,["scriptlevel","displaystyle","mathsize"]);this.children.forEach(function(a){b+=a._exportMathML(c)});return b+=g.endTag("mstyle")},_exportLaTeX:function(c){var b="{";this.children.forEach(function(a){b+=d.exportChild(a,c)});return b+="}"},isItalicText:function(c){var b;b=this.children&&1===this.children.length&&
this.children[0];c=this.mathvariant||c;return(!c||this._mathvariantIsItalic(c))&&b&&b.isItalicText(c)},layout:function(c){var b=c.applyStyleAttributes(this),a=c.layoutChildren(this.children),a=c.parseBoxes("h{*}",a);a.computeMetrics();c.applyStyleAttributes(b);return a}})})},"MW/equations/renderer/model/MathText":function(){define("dojo/_base/declare dojo/_base/lang ./MathBaseNode ./Symbols ./utils/MathMLExportUtils ./utils/TeXUtils ../Utilities".split(" "),function(h,e,g,d,c,b,a){return h(g,{constructor:function(a){a=
a||{};this.className="MathText";this.text=a.text;this.kind=a.kind;!this.kind&&(a.hasOwnProperty("data-category")&&"placeholder-atom"===a["data-category"])&&(this.kind="placeholder");this.symbolName=a.symbolName;var b=a.hasOwnProperty("stretchy")?a.stretchy:d.isStretchyOperatorByDefault(this.symbolName);"boolean"===typeof b&&(this.stretchy=b);this.TeXSpacing=a.TeXSpacing;this.accentType=a.accentType;this.renderAsAccent=!1;this._replaceSpecialSymbolsByMathvariant()},_replaceSpecialSymbolsByMathvariant:function(){if(this.symbolName){var a=
"";"scr"===this.symbolName.slice(1,4)?a="script":"opf"===this.symbolName.slice(1,4)?a="double-struck":"fr"===this.symbolName.slice(1,3)&&(a="fraktur");a&&(this.text=this.symbolName[0],this.kind="id",this.symbolName=void 0,this.mathvariant=a)}},_exportMathML:function(a){var b="";if(!this.mathvariant&&"code"===this.kind||"normal"===a.mathvariant)this.mathvariant="normal";switch(this.kind){case "unknown":case "id":case "code":b=c.startTag(a,"mi",this);b+=this.text+c.endTag("mi");break;case "number":b=
c.startTag(a,"mn",this);b+=this.text+c.endTag("mn");break;case "mtext":b=c.startTag(a,"mtext",this);b+=this.text+c.endTag("mtext");break;case "symbol":var g=d.isIdentifier(this.symbolName)?"mi":"mo",b=[];this.hasOwnProperty("stretchy")&&this.stretchy!==d.isStretchyOperatorByDefault(this.symbolName)&&b.push("stretchy");b=c.startTag(a,g,this,b);b+=c.maskSpecialCharacters(d.serializeSymbol(this.symbolName));b+=c.endTag(g);break;case "placeholder":a=e.mixin({},a),a.attribBlackList&&(g=a.attribBlackList.indexOf("data-category"))&&
a.attribBlackList.splice(g,1),b=c.startTag(a,"mi",this),b+=this.text+c.endTag("mi")}return b},getContents:function(){var a=["id","parent"],b,c={};for(b in this)-1===a.indexOf(b)&&this.hasOwnProperty(b)&&(c[b]=this[b]);return c},_exportLaTeX:function(a){var c="";switch(this.kind){case "id":var c=c+this.text.replace(/\u00A0/g,"\\ "),d=a=1===this.text.length&&"normal"!==a.mathvariant,e=!1;if(this.mathvariant){if(-1!==this.mathvariant.indexOf("script"))return"\\mathcal{"+c+"}";if(-1!==this.mathvariant.indexOf("fraktur"))return"\\mathfrak{"+
c+"}";if(-1!==this.mathvariant.indexOf("double-struck"))return"\\mathbb{"+c+"}";-1!==this.mathvariant.indexOf("bold")&&(e=!0,d=a=!1);-1!==this.mathvariant.indexOf("italic")&&(a=!0);-1!==this.mathvariant.indexOf("normal")&&(a=e=!1)}e&&(c="\\mathbf{"+c+"}");a?d||(c="\\mathit{"+c+"}"):e||(c="\\mathrm{"+c+"}");break;case "unknown":case "number":c+=this.text;break;case "code":case "mtext":-1!==(","+b.allFunctionNames+",").indexOf(","+this.text+",")?c+="\\"+this.text+" ":(a=this.text.replace(/[\u00A0\u2009]/g,
" "),a=b.replaceUnicodeBySpecialLettersName(a),a=b.replaceUnicodeByCombiningCharsName(a),a=a.split(" ").map(function(a){return a?"\\textrm{"+a+"}":""}),c+=a.join("\\;"));break;case "symbol":c+=b.commandName(this.symbolName," ")}return c},_layoutSimpleMathText:function(a,b){a.text=b.escapeText(this.text);a.fontSizePx=b.emToPx(1);a.setBelowXheight(this._ascentBelowXHeight());a.baseIsItalic=this.baseIsItalic;a.accentType=this.accentType;a.isItalic=!1;a.cls=this.kind;switch(this.kind){case "unknown":case "id":a.cls=
"text";a.isItalic=!0;break;case "symbol":a.setSymbolBoxData(this,b)}a.computeMetrics(b)},_subsCharsFromMathvariantFonts:function(a,b){var c=a.text.split(""),c=c.map(function(a){a+=b;return d.getSymbol(a)?d.getCharForSymbolName(a):""});a.text=c.join("")},_setMathvariant:function(a,b){var c;this.mathvariant?c=this.mathvariant:b.mathvariant&&(c=b.mathvariant);c&&(c.match(/script/)&&this._subsCharsFromMathvariantFonts(a,"scr"),c.match(/fraktur/)&&this._subsCharsFromMathvariantFonts(a,"fr"),c.match(/double-struck/)&&
this._subsCharsFromMathvariantFonts(a,"opf"),c.match(/bold/)?a.fontWeight="bold":a.fontWeight="normal",c.match(/italic/)?(a.fontStyle="italic",a.isItalic=!0):(a.fontStyle="normal",a.isItalic=!1),"monospace"===c&&"symbol"!==this.kind&&(a.cls="string",a.isItalic=!1))},isItalicText:function(b){return"symbol"===this.kind||"id"===this.kind?(b=this.mathvariant||b||this.fontStyle,!b&&"id"===this.kind&&(b=a.isSingleCharIdentString(this.text)?"italic":""),this._mathvariantIsItalic(b)):!1},_ascentBelowXHeight:function(){return"symbol"===
this.kind?d.hasXHeight(this.symbolName):a.stringAscentBelowXHeight(this.text)},isIdentifier:function(){return"id"===this.kind||"symbol"===this.kind&&d.isIdentifier(this.symbolName)},getAccent:function(){return"topaccent"===this.accentType||"bottomaccent"===this.accentType||d.isAccent(this.symbolName)&&"supscript"!==this.accentType&&"subscript"!==this.accentType?this:null},layout:function(a){var b=null,c=this.symbolName;d.isLargeOpSymbol(this)?(b=a.parseBoxes("s",[]),b.makeLargeOp(c,a,this.isDisplaystyle())):
this.renderAsAccent&&!0===this.stretchy&&d.isStretchyAccent(c)?(b=a.parseBoxes("a",[]),b.makeHorizontalStretchyBox(this,a)):(b=a.parseBoxes("t",[]),this.TeXSpacing&&(b.spacing=this.TeXSpacing),this._layoutSimpleMathText(b,a));this._setMathvariant(b,a);return b}})})},"MW/equations/renderer/model/importers/SimpleTeX":function(){define("dojo/_base/declare dojo/_base/lang ./Base ./PEG ./SimpleTeXRules ../SpacingClasses".split(" "),function(h,e,g,d,c,b){return h(g,{constructor:function(){this._input=null;
this._n=0;this._bold=this._italic=!1},initParser:function(){this._input=null;this._n=0;return null},_initState:function(){this._bold=this._italic=!1},makePEG:function(){return new d(c.rulenames,c.rules,0)},makeSymbolMap:function(){return{}},makeActionMap:function(){var a=this.peg.names,b=[this._appendChildren],c,d={Char:[this._appendChar,"number"],SubSup:[this._appendSubSup],Nest:[this._appendNest],Size:[this._appendSize],Color:[this._appendColor],Style:[this._appendStyle],Name:[this._appendName],
Symbol:[this._appendSymbol],EscapedChar:[this._appendChar,"number"]};for(c=0;c<a.length;c+=1)d[a[c]]||(d[a[c]]=b);return d},makeEquation:function(a){var b=this.makeRoot();this._initState();a&&a.tree&&(this.str=a.str,this.fillRow(a.tree,b.children[0]));return b},consume:function(a){this._n+=a},_peek:function(a){return this._input?this._input[this._n+a]:null},_setInput:function(a,b){this._input=a;this._n=b},_appendChildren:function(a){var b=a.children,c;if(0===b.length&&a.start<a.end)this.pushCode(this.slice(a));
else if(0<b.length){a=this._input;c=this._n;for(this._setInput(b,0);this._n<this._input.length;)this._appendChild();this._setInput(a,c)}this.consume(1)},_appendChild:function(){var a=this._peek(0);this.append(a)},fillRow:function(a,b){this.pushRow(b);this.append(a);this.popRow()},_fillArg:function(a){var b=this._peek(0),c;b&&(c=this.peg.names[b.name],"Nest"===c?(this.pushRow(a),0<b.children.length?this._appendChildren(b):this.consume(1),this.popRow()):this.fillRow(b,a))},_isRegularScript:function(a){return"MathScript"===
a.className&&!0!==a.accent},_appendSubSup:function(a){a=e.trim(this.slice(a));var b=null,c=!1,d,g;this.consume(1);g=this.row.children;0<g.length&&this._isRegularScript(g[g.length-1])?b=g.pop():(b=this.makeScript(),c=!0,0<g.length&&(d=g.pop(),"MathRow"===d.className?b.replaceChild(0,d):b.children[0].appendChild(d)));this.row.setChildren(g);"^"===a?(c?b.replaceChild(1,null):b.replaceChild(2,this.makeRow()),this._fillArg(b.children[2])):(c?b.replaceChild(2,null):b.replaceChild(1,this.makeRow()),this._fillArg(b.children[1]));
this.push(b)},_pushTextWithStyle:function(a,b){this.pushText(a,b,{kind:b})},_appendChar:function(a,b){var c=this.slice(a);" "===c?this.push(this.makeSpace({length:0.5})):this._pushTextWithStyle(c,b);this.consume(1)},_appendSymbol:function(a){a=e.trim(this.slice(a));var b={"int":"intop",copyright:"\u00a9","0":"emptyset",circ:"\u00b0",clubsuit:"\u2663",diamondsuit:"\u2666",heartsuit:"\u2665",spadesuit:"\u2660",langle:"anglebracketleft",rangle:"anglebracketright",lceil:"ceilleft",rceil:"ceilright",lfloor:"floorleft",
rfloor:"floorright",vee:"lor",wedge:"land"}[a];b&&(a=b);this.pushSymbol(a);this.consume(1)},_appendStyle:function(a){var b={rm:"normal",it:"italic",sl:"italic",bf:"bold"}[e.trim(this.slice(a))];a=this._italic;"italic"===b&&(this._italic=!0);var c=this._bold;"bold"===b&&(this._bold=!0);this._handleStyle(e.hitch(this,function(a){b&&(this._italic&&"bold"===b&&(b="bold-italic"),this._bold&&"italic"===b&&(b="bold-italic"),a.mathvariant=b)}));this._italic=a;this._bold=c},_appendNest:function(a){var f=this.makeRow({TeXSpacing:b.ORD});
this.row.appendChild(f);this.pushRow(f);0<a.children.length?this._appendChildren(a):this.consume(1);this.popRow()},_splitAndReturnRow:function(){var a=this.row.children;for(this.row.setChildren([]);this._n<this._input.length;)this._appendChild();return a},_handleStyle:function(a){var b={},c,d;this.consume(1);c=this._splitAndReturnRow();d=this.row.children;this.row.setChildren(c);a(b);a=this.makeStyle(b);a.children[0].setChildren(d);this.push(a)},_appendSize:function(a){this._handleStyle(e.hitch(this,
function(b){var c=e.trim(this.slice(a.children[0])),c=parseInt(c)||0;b.mathsize=c+"pt"}))},_numToHex:function(a){255<a&&(a=255);0>a&&(a=0);a=a.toString(16);2>a.length&&(a="0"+a);return a},_namedColorToHTMLColor:function(a){return{red:"#F00",green:"#0F0",blue:"#00F",black:"#000",white:"#FFF",cyan:"#0FF",magenta:"#F0F",yellow:"#FF0",gray:"#808080",orange:"#FF8000",lightBlue:"#60BCFC",darkGreen:"#6B963D"}[a]},_rgbColorToHTMLColor:function(a,b,c){a=Math.round(255*parseFloat(a));b=Math.round(255*parseFloat(b));
c=Math.round(255*parseFloat(c));return"#"+this._numToHex(a)+this._numToHex(b)+this._numToHex(c)},_appendColor:function(a){this._handleStyle(e.hitch(this,function(b){var c=a.children[0],d,g;3===c.children.length?(d=e.trim(this.slice(c.children[0])),g=e.trim(this.slice(c.children[1])),c=e.trim(this.slice(c.children[2])),d=this._rgbColorToHTMLColor(d,g,c)):(d=e.trim(this.slice(c)),d=this._namedColorToHTMLColor(d));d&&(b.style="color: "+d)}))},_appendName:function(a){this._handleStyle(e.hitch(this,function(b){var c=
e.trim(this.slice(a.children[0]));b.style="font-family: "+c}))}})})},"MW/equations/renderer/model/importers/PEG":function(){define(["dojo/_base/declare","../../../utils/StringUtils"],function(h,e){return h(null,{constructor:function(e,d,c){this.rules=d;this.names=e;this.root=c},_myStrcmp:function(g,d,c,b,a){var f="";if(c+a>d)return!1;g=g.substring(c,c+a);for(d=0;d<a;d+=1)f+=e.fromCodePoint(b[d]);return g===f},recordRule:function(e,d,c,b,a,f,k){var h=k.length;e[c-1]=0===d&&1===h?k:[{name:b,start:a,
end:f,children:k}]},joinRecords:function(e,d){var c=e.length,b;b=e.pop();1<c&&(0<b.length&&d)&&(e[c-2]=e[c-2].concat(b))},pretty:function(g,d,c,b){var a,f,k,h;b=b||"long";a=c=c||"";if(g&&g.children)if(f=g.children,k=e.fromCodePoint(10),a+="short"===b?"(":""+this.names[g.name],"long"===b&&(h=d.substring(g.start,g.end).replace(k,"").replace(/^[ ]*/,""),10<h.length&&(h=h.substring(0,10)+"..."),a+=" "+h+k),0===f.length&&"short"===b)a+=" "+g.start.toString()+" "+g.end.toString()+")";else{for(g=0;g<f.length;g+=
1)a="long"===b?a+this.pretty(f[g],d,c+" ",b):a+(" "+this.pretty(f[g],d,c,b));a+="short"===b?")":""}return a},parse:function(g){var d=this.rules,c=this.root,b=g.length,a=0,f=0,k,h=[],n=[],p=[],m=[],q=!0,r=[],s,t=0,u,v,w,x;n.push(0,0,c);m.push(r);c=d[c];for(k=c.length;0<n.length;){t+=1;if(1E6<t)return null;s=n.length;if(f>=k)3<s&&(f=n[s-4],c=d[f],k=c.length,f=n[s-2],s=h.pop(),q||(a=s),this.joinRecords(m,q)),n.pop(),n.pop(),n.pop();else switch(s=c[f],s){case 0:h.push(a);m.push(r);f+=1;break;case 1:s=
h.pop();q||(a=s);this.joinRecords(m,q);f+=1;break;case 2:s=c[f+1]-1;f+=2;c=d[s];k=c.length;h.push(a);m.push(r);n.push(a,f,s);f=0;break;case 3:u=c[f+1];(q=this._myStrcmp(g,b,a,c.slice(f+2),u))&&(a+=u);f+=u+2;break;case 4:s=h.pop();q||(a=s);this.joinRecords(m,q);q=!0;f+=1;break;case 5:q&&0<h[h.length-2]?(f+=c[f+1],h[h.length-1]=a):q?(f+=c[f+1],h[h.length-1]=a,h[h.length-2]=1,this.joinRecords(m,q),m.push(r)):(f+=2,a=h[h.length-1],q=0<h[h.length-2],h.pop(),h.pop(),this.joinRecords(m,q));break;case 6:this.joinRecords(m,
q);q?(f+=c[f+1],h[h.length-1]=a,m.push(r)):(f+=2,a=h.pop(),q=!0);break;case 7:case 8:7===s&&(q=!q);a=h.pop();this.joinRecords(m,!1);f+=1;break;case 9:h.push(0);f+=1;break;case 10:this.joinRecords(m,q);q?(f+=2,m.push(r)):(a=h.pop(),f+=c[f+1]);break;case 11:this.joinRecords(m,q);q?(h.pop(),f+=c[f+1]):(f+=2,m.push(r));break;case 12:case 15:a>=b?q=!1:(q=e.fromCodePoint(c[f+1]),q=g[a]===q);q&&(a+=1);f+=2;break;case 13:q&&(s=c[f+1],u=n[n.length-1],v=0,0<h.length&&(v=h[h.length-1]),w=m.length,x=m[w-1],this.recordRule(m,
s,w,u,v,a,x));f+=2;break;case 14:q=!0;f+=1;break;case 16:case 17:u=c[f+1];v=f+2;f+=2+2*u;if(a>=b)q=!1;else{w=g.charCodeAt(a);for(q=!1;u&&!q;)u-=1,q=c[v],v+=1,x=c[v],v+=1,q=w>=q&&w<=x;17===s&&(q=!q)}q&&(a+=1);break;case 18:q?(p.push(g),b=h[h.length-1],g=g.substring(b),b=a-b,a=0,f+=2):(f+=3+c[f+1],a=h.pop(),this.joinRecords(m,q));break;case 19:s=h.pop();a!==b||!q?(a=s+b,q=!0):(a=s,q=!1);g=p.pop();b=g.length;this.joinRecords(m,!1);f+=1;break;case 21:(q=a<b)&&(a+=1);f+=1;break;case 26:q=a===b,f+=1}}return q&&
0<m.length&&0<m[0].length?{tree:m[0][0],str:g}:{tree:null,str:g}}})})},"MW/equations/renderer/model/importers/SimpleTeXRules":function(){define([],function(){return{rulenames:"Math Char SubSup Nest Cmd EscapedChar Style Name s String Size Number Newline Color ExplicitColor Float NamedColor Symbol".split(" "),rules:[[0,0,2,5,11,13,2,3,11,9,2,4,11,5,2,2,1,6,-16,13,2],[17,1,125,125,13,0],[16,2,95,95,94,94,13,0],[0,3,1,123,10,10,2,1,10,6,3,1,125,1,13,2],[0,3,1,92,10,31,0,2,14,11,25,2,6,11,21,2,7,11,17,
2,8,11,13,2,11,11,9,2,18,11,5,2,13,1,1,13,0],[16,5,123,123,125,125,95,95,94,94,92,92,13,0],[0,3,2,114,109,11,19,3,2,98,102,11,13,3,2,105,116,11,7,3,2,115,108,1,13,0],[0,3,9,102,111,110,116,110,97,109,101,123,10,14,2,9,10,10,2,10,10,6,3,1,125,1,13,2],[0,16,4,32,32,9,9,13,13,10,10,6,-10],[9,0,17,1,125,125,5,-4,13,0],[0,3,9,102,111,110,116,115,105,122,101,123,10,18,2,9,10,14,2,12,10,10,2,9,10,6,3,1,125,1,13,2],[9,0,16,1,48,57,5,-4,13,0],[3,7,110,101,119,108,105,110,101,13,0],[0,3,5,99,111,108,111,114,
10,48,0,0,3,1,123,10,10,2,17,10,6,3,1,125,1,11,30,0,3,6,91,114,103,98,93,123,10,18,2,9,10,14,2,15,10,10,2,9,10,6,3,1,125,1,1,1,13,2],[0,2,16,10,39,2,9,10,35,0,3,1,44,4,10,28,2,9,10,24,2,16,10,20,2,9,10,16,0,3,1,44,4,10,9,2,9,10,5,2,16,1,13,0],[0,0,2,12,10,16,0,0,3,1,46,10,7,0,2,12,4,1,4,1,11,12,0,3,1,46,10,5,2,12,1,1,13,2],[0,3,3,114,101,100,11,109,3,5,103,114,101,101,110,11,100,3,4,98,108,117,101,11,92,3,5,98,108,97,99,107,11,83,3,5,119,104,105,116,101,11,74,3,4,99,121,97,110,11,66,3,7,109,97,103,
101,110,116,97,11,55,3,6,121,101,108,108,111,119,11,45,3,4,103,114,97,121,11,37,3,6,111,114,97,110,103,101,11,27,3,9,108,105,103,104,116,66,108,117,101,11,14,3,9,100,97,114,107,71,114,101,101,110,1,13,0],[0,3,5,97,108,112,104,97,11,949,3,4,98,101,116,97,11,941,3,5,103,97,109,109,97,11,932,3,5,100,101,108,116,97,11,923,3,7,101,112,115,105,108,111,110,11,912,3,4,122,101,116,97,11,904,3,3,101,116,97,11,897,3,5,116,104,101,116,97,11,888,3,8,118,97,114,116,104,101,116,97,11,876,3,4,105,111,116,97,11,868,
3,5,107,97,112,112,97,11,859,3,6,108,97,109,98,100,97,11,849,3,2,109,117,11,843,3,2,110,117,11,837,3,2,120,105,11,831,3,2,112,105,11,825,3,3,114,104,111,11,818,3,5,115,105,103,109,97,11,809,3,8,118,97,114,115,105,103,109,97,11,797,3,3,116,97,117,11,790,3,7,117,112,115,105,108,111,110,11,779,3,3,112,104,105,11,772,3,3,99,104,105,11,765,3,3,112,115,105,11,758,3,5,111,109,101,103,97,11,749,3,5,71,97,109,109,97,11,740,3,5,68,101,108,116,97,11,731,3,5,84,104,101,116,97,11,722,3,6,76,97,109,98,100,97,11,
712,3,2,88,105,11,706,3,2,80,105,11,700,3,5,83,105,103,109,97,11,691,3,7,85,112,115,105,108,111,110,11,680,3,3,80,104,105,11,673,3,3,80,115,105,11,666,3,5,79,109,101,103,97,11,657,3,6,102,111,114,97,108,108,11,647,3,6,101,120,105,115,116,115,11,637,3,2,110,105,11,631,3,3,97,115,116,11,624,3,4,99,111,110,103,11,616,3,3,115,105,109,11,609,3,3,108,101,113,11,602,3,5,105,110,102,116,121,11,593,3,8,99,108,117,98,115,117,105,116,11,581,3,11,100,105,97,109,111,110,100,115,117,105,116,11,566,3,9,104,101,
97,114,116,115,117,105,116,11,553,3,9,115,112,97,100,101,115,117,105,116,11,540,3,14,108,101,102,116,114,105,103,104,116,97,114,114,111,119,11,522,3,9,108,101,102,116,97,114,114,111,119,11,509,3,7,117,112,97,114,114,111,119,11,498,3,10,114,105,103,104,116,97,114,114,111,119,11,484,3,9,100,111,119,110,97,114,114,111,119,11,471,3,4,99,105,114,99,11,463,3,2,112,109,11,457,3,3,103,101,113,11,450,3,6,112,114,111,112,116,111,11,440,3,7,112,97,114,116,105,97,108,11,429,3,6,98,117,108,108,101,116,11,419,
3,3,100,105,118,11,412,3,3,110,101,113,11,405,3,5,101,113,117,105,118,11,396,3,6,97,112,112,114,111,120,11,386,3,5,97,108,101,112,104,11,377,3,2,73,109,11,371,3,2,82,101,11,365,3,2,119,112,11,359,3,6,111,116,105,109,101,115,11,349,3,5,111,112,108,117,115,11,340,3,6,111,115,108,97,115,104,11,330,3,3,99,97,112,11,323,3,3,99,117,112,11,316,3,8,115,117,112,115,101,116,101,113,11,304,3,6,115,117,112,115,101,116,11,294,3,8,115,117,98,115,101,116,101,113,11,282,3,6,115,117,98,115,101,116,11,272,3,3,105,
110,116,11,265,3,2,105,110,11,259,3,1,111,11,254,3,5,108,100,111,116,115,11,245,3,9,99,111,112,121,114,105,103,104,116,11,232,3,1,48,11,227,3,5,118,97,114,112,105,11,218,3,5,116,105,109,101,115,11,209,3,4,99,100,111,116,11,201,3,3,118,101,101,11,194,3,5,119,101,100,103,101,11,185,3,4,112,101,114,112,11,177,3,3,109,105,100,11,170,3,9,76,101,102,116,97,114,114,111,119,11,157,3,10,82,105,103,104,116,97,114,114,111,119,11,143,3,14,76,101,102,116,114,105,103,104,116,97,114,114,111,119,11,125,3,7,85,112,
97,114,114,111,119,11,114,3,9,68,111,119,110,97,114,114,111,119,11,101,3,5,112,114,105,109,101,11,92,3,5,110,97,98,108,97,11,83,3,4,115,117,114,100,11,75,3,5,97,110,103,108,101,11,66,3,3,110,101,103,11,59,3,5,108,99,101,105,108,11,50,3,5,114,99,101,105,108,11,41,3,6,108,102,108,111,111,114,11,31,3,6,114,102,108,111,111,114,11,21,3,6,108,97,110,103,108,101,11,11,3,6,114,97,110,103,108,101,1,13,0]]}})},"MW/equations/renderer/model/importers/TeX":function(){define("dojo/_base/declare dojo/_base/lang MW/equations/renderer/model/MathConstants ./Base ./PEG ./TeXRules ./TeXSymbols ../SpacingClasses ../Symbols ../utils/MathNodeUtils ../utils/TeXUtils".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n){return h(d,{constructor:function(){this._commandMap=this._makeCmdMap();this._lineBreaks=[];this._strict=this._hlineAtBottom=this._hlineOnTop=this._hline=!1},setStrict:function(a){this._strict=a},initParser:function(){this._input=null;this._n=0;return null},makeSymbolMap:function(){return n.symbolMap},makePEG:function(){return new c(b.rulenames,b.rules,0)},makeActionMap:function(){var a=this.peg.names,b=[this._appendChildren],f,c={Letter:[this._appendFatString,"id"],
Dashes:[this._appendDashes],TAccent:[this._appendTextAccent],TSpecialLetter:[this._appendTextSpecialLetter],Digit:[this._appendFatString,"number"],BinOp:[this.appendSymbol],RelOp:[this.appendSymbol],Cmd:[this._appendCmd],Cmd2:[this._appendCmd],SubSupOp:[this._appendSubSup],OpenCloseChars:[this.appendSymbol],Punct:[this._appendPunct],OrdChars:[this._appendOrdChars],Unicode:[this._appendOrdChars],BadTextChar:[this._appendBadTextChar],DelimiterNest:[this._appendDelimNest],MathNest:[this._appendNest],
Array:[this._appendArray],Matrix:[this._appendMatrix],Cases:[this._appendCasesEnvironment],LineBreak:[this._appendLineBreak],SpecialCmd:[this._appendSpecialCmd],KernCmd:[this._appendKernCmd],BoxCmd:[this._appendBoxCmd],Inline:[this._appendInlineCmd],Content:[this._appendContentCmd],Blanks:[this._appendBlanks],Tilde:[this._appendBlanks],MathSpace:[this._appendMathSpace]};for(f=0;f<a.length;f+=1)c[a[f]]||(c[a[f]]=b);return c},_makeCmdMap:function(){var a=[this._appendOverCmd],b=[this._appendBraceCmd],
c=[this._appendFunCmd],d=[this._appendFunCmd,"limits"],e=[this._appendSymbolCmd],g=[this._appendStyleCmd],k=[this._appendSpacingClassCmd],h={frac:[this._appendFracCmd],sqrt:[this._appendSqrtCmd],not:[this._appendNotCmd],over:a,atop:a,overwithdelims:a,atopwithdelims:a,brace:b,brack:b,choose:b,hat:[this._appendAccentCmd,"circumflex"],bar:[this._appendAccentCmd,"macron"],grave:[this._appendAccentCmd,"grave"],acute:[this._appendAccentCmd,"acute"],tilde:[this._appendAccentCmd,"sim"],breve:[this._appendAccentCmd,
"breve"],dot:[this._appendAccentCmd,"dotabove"],ddot:[this._appendAccentCmd,"diaresis"],check:[this._appendAccentCmd,"caron"],vec:[this._appendAccentCmd,"rightarrow"],big:[this._appendBigCmd,"1.2",f.ORD],Big:[this._appendBigCmd,"1.8",f.ORD],bigg:[this._appendBigCmd,"2.4",f.ORD],Bigg:[this._appendBigCmd,"3.0",f.ORD],bigl:[this._appendBigCmd,"1.2",f.OPEN],Bigl:[this._appendBigCmd,"1.8",f.OPEN],biggl:[this._appendBigCmd,"2.4",f.OPEN],Biggl:[this._appendBigCmd,"3.0",f.OPEN],bigm:[this._appendBigCmd,"1.2",
f.REL],Bigm:[this._appendBigCmd,"1.8",f.REL],biggm:[this._appendBigCmd,"2.4",f.REL],Biggm:[this._appendBigCmd,"3.0",f.REL],bigr:[this._appendBigCmd,"1.2",f.CLOSE],Bigr:[this._appendBigCmd,"1.8",f.CLOSE],biggr:[this._appendBigCmd,"2.4",f.CLOSE],Biggr:[this._appendBigCmd,"3.0",f.CLOSE],bigcup:e,bigcap:e,bigsqcup:e,biguplus:e,bigwedge:e,bigvee:e,bigodot:e,bigoplus:e,bigotimes:e,cdotp:e,prod:e,sum:e,intop:e,prime:e,perp:e,mid:e,triangle:e,backslash:e,bmod:[this._appendBModCmd],pmod:[this._appendPModCmd],
enspace:[this._appendQuadCmd,0.5],quad:[this._appendQuadCmd,1],qquad:[this._appendQuadCmd,2],thinspace:[this._appendQuadCmd,0.16667],negthinspace:[this._appendQuadCmd,-0.16667],mathrm:[this._appendVariantCmd,"normal"],mathit:[this._appendVariantCmd,"italic"],mathbf:[this._appendVariantCmd,"bold"],mathtt:[this._appendVariantCmd,"monospace"],mathbb:[this._appendFatStringCmd,"blackboard"],mathcal:[this._appendFatStringCmd,"script"],mathfrak:[this._appendFatStringCmd,"fraktur"],limits:[this._setLimitsMode,
"limits"],nolimits:[this._setLimitsMode,"nolimits"],overbrace:[this._appendUnderOverBraceCmd,"overbrace",!0,!1],underbrace:[this._appendUnderOverBraceCmd,"underbrace",!0,!0],overline:[this._appendUnderOverBraceCmd,"macron",!0,!1],underline:[this._appendUnderOverBraceCmd,"macron",!0,!0],overleftarrow:[this._appendUnderOverBraceCmd,"leftarrow",!0,!1],overrightarrow:[this._appendUnderOverBraceCmd,"rightarrow",!0,!1],overleftrightarrow:[this._appendUnderOverBraceCmd,"leftrightarrow",!0,!1],widehat:[this._appendUnderOverBraceCmd,
"circumflex",!0,!1],widetilde:[this._appendAccentCmd,"widetilde"],mathord:k,mathop:k,mathbin:k,mathrel:k,mathopen:k,mathclose:k,mathpunct:k,mathinner:k,scriptscriptstyle:g,scriptstyle:g,textstyle:g,displaystyle:g,hline:[this._hlineCmd],rm:[this._appendFontCmd,"normal"],it:[this._appendFontCmd,"italic"],bf:[this._appendFontCmd,"bold"],tt:[this._appendFontCmd,"monospace"],cal:[this._appendFontCmd,"script"],stackrel:[this._appendStackrelCmd,!0],overset:[this._appendStackrelCmd,!0],underset:[this._appendStackrelCmd,
!1]};n.functionNames.forEach(function(a){h[a]=c});n.limitsFunctionNames.forEach(function(a){h[a]=d});return h},makeEquation:function(a){var b=this.makeRoot();this._lineBreaks=[];a&&a.tree&&(this.str=a.str,this.fillRow(a.tree,b.children[0]),this._assembleLineBreaks(b),a=this.name(a.tree),b.inline="Math"!==a);return l.sanitizeModel(b)},consume:function(a){this._n+=a},_peek:function(a){return this._input?this._input[this._n+a]:null},unknownAction:function(a){this.pushMtext("\\"+a,{style:"color: rgb(255,0,0);"});
this.consume(1)},_setInput:function(a,b){this._input=a;this._n=b},_fixSpaces:function(a){return a.replace(/ +/g,"\u00a0")},_appendChildren:function(a){var b=a.children,f;if(0===b.length&&a.start<a.end)this.pushMtext(this._fixSpaces(this.slice(a)));else if(0<b.length){a=this._input;f=this._n;for(this._setInput(b,0);this._n<this._input.length;)this._appendChild();this._setInput(a,f)}this.consume(1)},_appendChild:function(){var a=this._peek(0);this.append(a)},_appendCmd:function(a){var b=e.trim(this.slice(a)),
b=b.slice(1);this._appendSlashSymbol(b)?this.consume(1):(a=this._commandMap[b],this.fireAction(a,b))},_fillOptionalArg:function(a){var b,f=!0,c=this._peek(0);if(c&&(b=e.trim(this.slice(c)),"["===b)){this.pushRow(a);for(this.consume(1);f;){c=this._peek(0);if(!c)break;b=e.trim(this.slice(c));"]"===b?(this.consume(1),f=!1):this.append(c)}this.popRow()}},_fillArg:function(a){var b=this._peek(0),f;b&&(f=this.peg.names[b.name],"MathNest"===f?(this.pushRow(a),0<b.children.length?this._appendChildren(b):
this.consume(1),this.popRow()):this.fillRow(b,a))},_appendFracCmd:function(){var a=this.makeFraction();this.push(a);this.consume(1);this._fillArg(a.children[0]);this._fillArg(a.children[1])},_appendStackrelCmd:function(a,b){var f=this.makeScript({limitStyle:"stack"});this.push(f);this.consume(1);b?(f.replaceChild(1,null),this._fillArg(f.children[2])):(this._fillArg(f.children[1]),f.replaceChild(2,null));this._fillArg(f.children[0])},_appendSymbolCmd:function(a){this.pushSymbol(a);this.consume(1)},
_appendBModCmd:function(){this.pushText("mod","text",{TeXSpacing:f.BIN});this.consume(1)},_appendPModCmd:function(){var a=this.makeRow();this.pushRow(a);this.push(this.makeSpace({length:1}));this.pushDelim("parenleft");this.pushText("mod","text");this.consume(1);this.push(this.makeSpace({length:1/3}));this.append(this._peek(0));this.pushDelim("parenright");this.popRow();this.push(a)},_appendBraceCmd:function(a){var b=this.makeFraction({linethickness:"0"});this.consume(1);this.splitRow(b);"brace"===
a?this._appendDelimNestImpl("braceleft","braceright",b):"brack"===a?this._appendDelimNestImpl("bracketleft","bracketright",b):"choose"===a&&this._appendDelimNestImpl("parenleft","parenright",b)},splitRow:function(a){var b=this._splitAndReturnRow(),f=this.row.children;this.row.children=[];a.children[0].setChildren(b);a.children[1].setChildren(f)},_splitAndReturnRow:function(){var a=this.row.children;for(this.row.setChildren([]);this._n<this._input.length;)this._appendChild();return a},_appendOverCmd:function(a){var b=
8<a.length,f={},c=null,d=null;"atop"===a.substring(0,4)&&(f.linethickness="0");a=this.makeFraction(f);this.consume(1);b&&(c=this.getDelim(),d=this.getDelim());this.splitRow(a);b?this._appendDelimNestImpl(c,d,a):this.push(a)},getDelim:function(){var a=this._peek(0),b;this.consume(1);a=e.trim(this.slice(a));if(0===a.length||"."===a)return".";0<a.length&&"\\"===a.charAt(0)&&(a="\\|"===a?"Vert":a.slice(1));(b=k.unicodeMap[a])||(b=this.mapSymbolName(a));b||(b=a);return b},_appendBigCmd:function(a,b,f){this.consume(1);
a=this.getDelim();a=this.pushDelim(a);a.minsize=b;a.maxsize=b;a.TeXSpacing=f},_appendFunCmd:function(a,b){this.pushMtext(a,{TeXSpacing:f.OP});b?this._setLimitsMode("",b):this.consume(1)},_appendSqrtCmd:function(){var a=this.makeRadical();this.push(a);this.consume(1);this._fillOptionalArg(a.children[1]);this._fillArg(a.children[0])},_appendNotCmd:function(){var a;this.consume(1);if(a=this._peek(0))a=e.trim(this.slice(a)),(a=k.lookupNotSymbol(a))?(a=this.makeSymbol(a),this.push(a),this.consume(1)):
(a=this.makeSymbol("combiningSlash"),this.push(a))},_appendAccentCmd:function(a,b){var f=this.makeScript({accent:!0,limitStyle:"stack"}),c;this.consume(1);this._fillArg(f.children[0]);c=this.makeSymbol(b,{stretchy:!1});f.children[2].appendChild(c);this.push(f)},_appendStretchyAccentCmd:function(a,b,f,c,d){d=d||{};d.accent=!0;d.limitStyle="stack";a=this.makeScript(d);this.consume(1);this._fillArg(a.children[0]);b=f?this.makeDelim({symbolName:b}):this.makeSymbol(b);b.stretchy=!0;c?a.children[1].appendChild(b):
a.children[2].appendChild(b);this.push(a)},_appendUnderOverBraceCmd:function(a,b,f,c){this._appendStretchyAccentCmd(a,b,f,c,{limitStyle:"stack"})},_setLimits:function(a,b){var f="auto";"nolimits"===b?f="nostack":"limits"===b&&(f="stack");a.limitStyle=f},_isRegularScript:function(a){return"MathScript"===a.className&&!0!==a.accent},_errorSubSup:function(){var a;a=this.makeStyle({style:"color: rgb(255,0,0);"});this._fillArg(a.children[0]);this.push(a)},_prepareScript:function(){var a,b,c,d;a=this.row.children;
if(0<a.length&&this._isRegularScript(a[a.length-1]))b=a.pop();else if(b=this.makeScript(),b.replaceChild(1,null),b.replaceChild(2,null),0<a.length){c=a.pop();if(c.TeXSpacing===f.CLOSE){var e=[c];for(d=1;a.length&&d;)c=a.pop(),c.TeXSpacing===f.CLOSE&&(d+=1),c.TeXSpacing===f.OPEN&&(d-=1),e.push(c);c=this.makeRow({children:e.reverse()})}"MathRow"===c.className?b.replaceChild(0,c):b.children[0].appendChild(c)}return b},_prepareScriptSlots:function(a,b){var f=!1;null===a.children[b]&&(null===a.children[b]&&
a.replaceChild(b,this.makeRow()),f=!0);return f},_appendSubSup:function(a){a=e.trim(this.slice(a));var b=null,f,c;this.consume(1);c="^"===a||"\\sp"===a?2:1;b=this._prepareScript();this.push(b);f=this._prepareScriptSlots(b,c);var d=this._peek(0),d=d&&e.trim(this.slice(d));!f||"^"===a&&d&&"'"===d?this._errorSubSup():this._fillArg(b.children[c])},fillRow:function(a,b){this.pushRow(b);this.append(a);this.popRow()},_appendNest:function(a){var b={};"Math"!==this.peg.names[a.name]&&(b={TeXSpacing:f.ORD});
b=this.makeRow(b);this.row.appendChild(b);this.pushRow(b);0<a.children.length?this._appendChildren(a):this.consume(1);this.popRow()},makeDelimOrNull:function(a){var b=null;"."!==a&&("\\"===a.charAt(0)&&(a=a.slice(1)),b=this.makeDelim({symbolName:e.trim(a)}));return b},_appendDelimNestImpl:function(a,b,f){var c=this.makeRow();a=this.makeDelimOrNull(a);b=this.makeDelimOrNull(b);a&&c.appendChild(a);f&&(f.className?c.appendChild(f):this.fillRow(f,c));b&&c.appendChild(b);this.push(c)},_appendDelimNest:function(a){var b=
a.children;a=this._input;var f=this._n,c,d;this._setInput(b,0);c=this.getDelim();d=null;2<b.length&&(d=this._peek(0),this.consume(1));b=this.getDelim();this._appendDelimNestImpl(c,b,d);this._setInput(a,f);this.consume(1)},_appendQuadCmd:function(a,b){var f=this.makeSpace({length:b});this.push(f);this.consume(1)},_appendBlanks:function(){var a=this.makeSpace({length:0.5});this.push(a);this.consume(1)},_appendFontCmd:function(a,b){var f={},c,d;this.consume(1);c=this._splitAndReturnRow();d=this.row.children;
this.row.setChildren(c);f.mathvariant=b;f=this.makeStyle(f);f.children[0].setChildren(d);this.push(f)},_appendStyleCmd:function(a){var b={},f,c;this.consume(1);f=this._splitAndReturnRow();c=this.row.children;this.row.setChildren(f);"displaystyle"===a?(b.scriptlevel=0,b.displaystyle=!0):(b.displaystyle=!1,"textstyle"===a?b.scriptlevel=0:"scriptstyle"===a?b.scriptlevel=1:"scriptscriptstyle"===a&&(b.scriptlevel=2));a=this.makeStyle(b);a.children[0].setChildren(c);this.push(a)},_setLimitsMode:function(a,
b){var f=this.row.children,c;0<f.length&&this._isRegularScript(f[f.length-1])?(c=f[f.length-1],this._setLimits(c,b)):(c=this.makeScript(),c.replaceChild(1,null),c.replaceChild(2,null),0<f.length&&(f=f.pop(),c.children[0].appendChild(f)),this._setLimits(c,b),this.push(c));this.consume(1)},_appendVariantCmd:function(a,b){var f={};f.mathvariant=b;f=this.makeStyle(f);this.push(f);this.consume(1);this._fillArg(f.children[0])},_appendSlashSymbol:function(b){var f=k.symbolMap[b],c=null;a[b]&&(f&&f.unicode?
c=this.pushText(b,f.font):(f=this.mapSymbolName(b),f!==b&&(c=this.pushSymbol(f))));return c},_appendFatString:function(a,b){var f=e.trim(this.slice(a)),c;for(c=0;c<f.length;c+=1)this._pushTextWithStyle(f.charAt(c),b);this.consume(1)},_pushTextWithStyle:function(a,b){var f={kind:b};"bold"===b&&(b="text",f.mathvariant="bold");this.pushText(a,b,f)},_appendFatStringCmd:function(a,b){this.consume(1);var f=this.makeRow();this._fillArg(f);var c=this;f.children=f.children.map(function(a){return c._replaceTextWithFontGlyph(a,
b)});this.push(f)},_replaceTextWithFontGlyph:function(a,b){return!a||"MathText"!==a.className||!a.text.match(/^[A-Za-z]$/)?a:"script"===b?this.makeText({text:a.text,kind:"id",mathvariant:"script"}):"blackboard"===b?this.makeText({text:a.text,kind:"id",mathvariant:"double-struck"}):this.makeText({text:a.text,kind:"id",mathvariant:"fraktur"})},_appendSpacingClassCmd:function(a){var b;this.consume(1);b=this.makeRow();this._fillArg(b);1===b.children.length&&"MathText"===b.children[0].className&&(b=b.removeChild(0));
b.TeXSpacing=f[{mathord:"ORD",mathop:"OP",mathbin:"BIN",mathrel:"REL",mathopen:"OPEN",mathclose:"CLOSE",mathpunct:"PUNCT",mathinner:"INNER"}[a]];this.push(b)},_appendOrdChars:function(a){a=this.slice(a);var b={".":"ordPeriod"}[a];b||(b=k.unicodeMap[a]||a);this.pushSymbol(b,{TeXSpacing:f.ORD});this.consume(1)},_appendPunct:function(a){var b=null;for(a=e.trim(this.slice(a));"'"===a;)null===b&&(b=this.makeRow()),a=this.makeSymbol("prime"),b.appendChild(a),this.consume(1),a=(a=this._peek(0))?e.trim(this.slice(a)):
"";null!=b?(a=this._prepareScript(),this._prepareScriptSlots(a,2),a.replaceChild(2,b),this.push(a)):(this.pushSymbol(a,{TeXSpacing:f.PUNCT}),this.consume(1))},_appendMathSpace:function(a){var b={",":1/6,"\x3e":2/9,":":2/9,";":5/18,"!":-1/6," ":0.5};a=this.slice(a);b=this.makeSpace({length:b[a]});this.push(b);this.consume(1)},_getDimenUnits:function(a){var b="",f={pt:1,pc:12,mu:10/18,ex:5,em:10,"in":72,cm:72/2.54,mm:72/25.4};2<a.length&&(b=a.slice(-2));(a=f[b])||(a=0);return a/10},_parseKernAmount:function(a){var b;
b=0;var f=!1;1<a.children.length&&(b=a.children[1],b=e.trim(this.slice(b)),"-"===b&&(f=!0,2<a.children.length&&(b=a.children[2],b=e.trim(this.slice(b)))),b="\\nulldelimiterspace"===b?0.12:parseFloat(b,10)*this._getDimenUnits(b),f&&(b=-b));return b},_appendKernCmd:function(a){a=this._parseKernAmount(a);a=this.makeSpace({length:a});this.push(a);this.consume(1)},_appendSpecialCmd:function(a){a=e.trim(this.slice(a));var b=this.mapSymbolName(a.slice(1)),c={TeXSpacing:f.ORD};"\\^"===a&&this._strict&&(c.style=
"color: rgb(255,0,0);");this.pushSymbol(b,c);this.consume(1)},_appendContentCmd:function(a){a.children.forEach(function(a){this._appendNest(a)},this);a=this.makeMatrix({rows:this.row.children.length,cols:1,children:this.row.children,colspec:"l"});this.row.setChildren([a])},_appendInlineCmd:function(a){var b={};1===this.rows.length?this._appendChildren(a):(b.mathvariant="",b=this.makeStyle(b),this.push(b),this.fillRow(a.children[0],b.children[0]))},_appendBoxCmd:function(a){var b,f={},c=!0;b=e.trim(this.slice(a.children[0]));
"textit"===b?f.mathvariant="italic":"textbf"===b?f.mathvariant="bold":"texttt"===b?f.mathvariant="monospace":"textsf"===b?f.style="font-family: sans-serif":"textnormal"===b?f.mathvariant="normal":c=!1;c?(b=this.makeStyle(f),f=b.children[0]):f=b=this.makeRow();this.push(b);this.fillRow(a.children[1],f)},_appendDashes:function(a){a=e.trim(this.slice(a));"---"===a?a="\u2014":"--"===a&&(a="\u2013");this.pushMtext(a);this.consume(1)},_appendTextSpecialLetter:function(a){a=e.trim(this.slice(a));this.pushMtext(n.specialLetters[a]);
this.consume(1)},_appendBadTextChar:function(a){a=e.trim(this.slice(a));this._strict?this.pushMtext(a,{style:"color: rgb(255,0,0);"}):this.pushMtext(a);this.consume(1)},_appendTextAccent:function(a){var b,f,c={};b=e.trim(this.slice(a));if(f=n.combiningChars[b.charAt(1)])0<a.children.length?b=this.slice(a.children[0]):2<b.length?(b=b.substring(2),"{}"===e.trim(b)&&(b="")):this._strict&&(c.style="color: rgb(255,0,0);"),b=e.trim(b),""===b&&(b="\u00a0"),this.pushMtext(b+f,c);this.consume(1)},_appendLineBreak:function(){var a=
this.makeRow();a.setChildren(this.row.children);this._lineBreaks.push(a);this.row.setChildren([]);this.consume(1)},_assembleLineBreaks:function(a){var b,f;0<this._lineBreaks.length&&(this._lineBreaks.push(a.children[0]),b={rows:this._lineBreaks.length,cols:1,children:this._lineBreaks,colspec:"l"},b=this.makeMatrix(b),f=this.makeRow(),f.appendChild(b),a.replaceChild(0,f))},_convertColSpecToMathML:function(a){var b="",f,c,d,g;for(f=0;f<a.length;f+=1)if(c=a[f],d=this.slice(c),d=d.charAt(0),"l"===d||
"r"===d||"c"===d||"|"===d)b+=d;else if("*"===d){d=e.trim(this.slice(c.children[0]));d=parseInt(d,10);c=this._convertColSpecToMathML(c.children[1].children);for(g=0;g<d;g+=1)b+=c}return b},_isRowSep:function(a){a=this.name(a);return"CrCr"===a||"ArrayRowSep"===a},_parseTableContent:function(a){var b=[],f=[],c=a.length,d=!1,e,g;0<c&&this._isRowSep(a[c-1])&&(c-=1);for(e=0;e<c;e+=1){d=null;g=a[e];"MathBody"===this.name(g)?(d=g,e+=1):"TextContent"===this.name(g)&&(d=g,e+=1);f.push(d);d=!1;if(e===c)break;
this._isRowSep(a[e])?(b.push(f),f=[]):d=!0}d&&f.push(null);0<f.length&&b.push(f);return b},_hlineCmd:function(){this._hline=!0;this.consume(1)},_processHLineInTable:function(a,b){var f;if(this._hline&&0===b)return this._hlineOnTop=!0,null;if(this._hline||null!==a){if(null===a){a=[];for(f=0;f<b;++f)a.push(g.NO_LINE)}this._hline?a.push(g.SOLID_LINE):a.push(g.NO_LINE);this._hline=!1}return a},_appendTable:function(a,b){var f=this._parseTableContent(a),c=f.length,d,e=0,k,h,l,n,A=null,B=this._hline;this._hline=
!1;var F=this._hlineOnTop;this._hlineOnTop=!1;var G=this._hlineAtBottom;this._hlineAtBottom=!1;for(d=0;d<c;d+=1)e=Math.max(e,f[d].length);d={rows:c,cols:e};c=!1;b&&(k=this._convertColSpecToMathML(b.children),"|"===k[0]&&"|"===k[k.length-1]&&(c=!0),d.colspec=k.replace(/\|/g,""));k=this.makeMatrix(d);for(d=0;d<f.length;d+=1){n=f[d];for(l=0;l<e;l+=1)h=this.makeRow(),k.appendChild(h),l<n.length&&n[l]&&(this.fillRow(n[l],h),this.consume(-1));A=this._processHLineInTable(A,d)}this.push(k);null!==A&&(A[A.length-
1]===g.SOLID_LINE&&(A=A.slice(0,-1),this._hlineAtBottom=!0,k.rows-=1),k.setHLines(A));c&&(this._hlineOnTop&&this._hlineAtBottom)&&k.setFrame(g.SOLID_LINE);this._hline=B;this._hlineOnTop=F;this._hlineAtBottom=G},_appendArray:function(a){this._appendTable(a.children[1].children,a.children[0]);this.consume(1)},_appendCasesContent:function(a){var b=this.makeRow();this.pushRow(b);this.pushDelim("braceleft");this._appendTable(a);this.popRow();this.push(b)},_appendMatrix:function(a){var b=a.children[0].children[0].children;
a=this.peg.names[a.children[0].name];"RegMatrix"===a?this._appendTable(b):"CasesMatrix"===a?this._appendCasesContent(b):"PMatrix"===a&&(a=this.makeRow(),this.pushRow(a),this.pushDelim("parenleft"),this._appendTable(b),this.pushDelim("parenright"),this.popRow(),this.push(a));this.consume(1)},_appendCasesEnvironment:function(a){this._appendCasesContent(a.children[0].children);this.consume(1)}})})},"MW/equations/renderer/model/importers/TeXRules":function(){define([],function(){return{rulenames:"Content Math Inline TextContent EOT MathSpace MathBody SubSupOp MathNest s sc s1 sc1 Blanks SpecialCmd Cmd BadCmd Letters Letter Array ArrayPosition ArrayCols ArrayCol ArraySimpleCol ArrayComplexCol ArrayContent ArrayItem ArrayRowSep ArrayColSep Matrix RegMatrix PMatrix CasesMatrix MatrixContent MatrixItem CrCr CasesContent Cases Other OrdChars OpenCloseChars RelOp BinOp Punct Tilde Unicode Digit Number PlusMinus Dimen DimenUnits BoxCmd BoxCmd1 Box KernCmd Kern KernAmount BadCmd2 Cmd2 MathBody3 DelimiterNest Delim DelimSlashChar DelimCmd MissingClose MissingRight Text TextChar TextChars BadTextChar Dashes TEscape TSpecialCmd TSpecialLetter TAccent TCmd BeginDisplayMath EndDisplayMath BeginMath EndMath MathBody2 LineBreak".split(" "),
rules:[[0,0,2,11,10,9,9,0,2,2,5,-2,1,11,21,0,2,11,10,5,2,3,1,11,11,0,2,11,10,5,2,4,1,1,13,0],[0,0,3,2,36,36,10,36,2,11,10,32,0,2,81,4,10,26,0,0,3,1,36,10,9,0,16,1,36,36,4,1,11,5,2,65,1,10,5,2,11,1,11,27,0,2,77,10,21,0,2,81,4,10,15,0,2,78,11,5,2,65,1,10,5,2,11,1,1,13,2],[0,0,3,1,36,10,26,2,11,10,22,0,2,81,4,10,16,0,3,1,36,11,5,2,65,1,10,5,2,11,1,11,27,0,2,79,10,21,0,2,81,4,10,15,0,2,80,11,5,2,65,1,10,5,2,11,1,1,13,2],[9,0,0,2,67,11,9,2,3,11,5,2,14,1,5,-12,13,2],[0,16,2,97,122,65,90,7],[16,6,44,44,
33,33,59,59,58,58,62,62,32,32,13,0],[0,9,0,0,2,11,10,35,0,2,8,11,29,2,9,11,25,2,20,11,21,2,30,11,17,2,38,11,13,2,15,11,9,2,16,11,5,2,39,1,1,5,-38,10,5,2,11,1,13,2],[0,16,2,95,95,94,94,11,21,0,3,2,92,115,10,13,16,2,112,112,98,98,10,5,2,5,1,1,13,0],[0,3,1,123,10,22,2,11,10,18,0,2,7,4,10,12,0,3,1,125,11,5,2,65,1,1,13,2],[0,16,4,32,32,9,9,13,13,10,10,6,-10],[0,2,10,10,26,0,0,3,1,37,10,16,0,17,2,13,13,10,10,6,-6,10,5,2,10,1,6,-20,1],[9,0,16,4,32,32,9,9,13,13,10,10,5,-10],[0,2,12,10,26,0,0,3,1,37,10,16,
0,17,2,13,13,10,10,6,-6,10,5,2,10,1,6,-20,1],[9,0,16,4,32,32,9,9,13,13,10,10,5,-10,13,0],[0,3,1,92,10,41,0,2,6,11,35,16,9,123,123,125,125,124,124,37,37,95,95,94,94,38,38,36,36,35,35,11,13,2,61,11,9,2,52,11,5,2,55,1,1,13,0],[0,3,1,92,10,15,0,2,18,18,2,2,17,19,10,5,2,11,1,13,0],[0,3,3,101,110,100,11,15,3,4,99,114,99,114,11,7,3,2,99,114,1,13,0],[9,0,16,2,97,122,65,90,5,-6,13,2],[16,2,97,122,65,90,13,0],[0,3,13,92,98,101,103,105,110,123,97,114,114,97,121,125,10,60,2,10,10,56,0,2,21,4,10,50,2,10,10,46,
3,1,123,10,41,2,10,10,37,2,22,10,33,3,1,125,10,28,2,11,10,24,2,26,10,20,3,11,92,101,110,100,123,97,114,114,97,121,125,10,5,2,10,1,13,2],[0,3,1,91,10,14,16,2,116,116,98,98,10,6,3,1,93,1,13,0],[9,0,2,23,5,-2,13,0],[0,0,2,24,10,5,2,10,1,11,11,0,2,25,10,5,2,10,1,1,13,2],[16,4,108,108,114,114,99,99,124,124,13,0],[0,0,3,1,64,10,5,2,9,1,11,69,0,3,2,112,123,10,14,2,10,10,10,2,50,10,6,3,1,125,1,11,48,0,3,2,42,123,10,40,2,10,10,36,2,48,10,32,3,1,125,10,27,2,10,10,23,0,0,3,1,123,10,10,2,22,10,6,3,1,125,1,11,
5,2,22,1,1,1,13,0],[0,0,0,3,5,92,101,110,100,123,7,10,9,2,27,10,5,2,11,1,6,-19,13,2],[0,2,7,11,9,2,29,11,5,2,28,1,13,0],[0,3,2,92,92,10,19,0,0,3,1,91,10,10,2,50,10,6,3,1,93,1,4,1,13,2],[3,1,38,13,0],[0,2,31,11,9,2,32,11,5,2,33,1,13,2],[0,3,7,92,109,97,116,114,105,120,10,23,2,11,10,19,3,1,123,10,14,2,34,10,10,3,1,125,10,5,2,10,1,13,2],[0,3,8,92,112,109,97,116,114,105,120,10,23,2,11,10,19,3,1,123,10,14,2,34,10,10,3,1,125,10,5,2,10,1,13,2],[0,3,6,92,99,97,115,101,115,10,23,2,11,10,19,3,1,123,10,14,2,
37,10,10,3,1,125,10,5,2,10,1,13,2],[0,0,0,3,1,125,7,10,9,2,35,10,5,2,11,1,6,-15,13,2],[0,2,7,11,9,2,29,11,5,2,36,1,13,0],[0,3,3,92,99,114,10,9,0,3,2,99,114,4,1,13,0],[0,0,0,3,1,125,7,10,33,2,35,10,29,2,11,10,25,2,29,10,21,2,11,10,17,0,2,4,4,10,11,2,11,10,7,0,2,36,4,1,6,-39,13,2],[0,3,13,92,98,101,103,105,110,123,99,97,115,101,115,125,10,28,2,11,10,24,2,26,10,20,3,11,92,101,110,100,123,99,97,115,101,115,125,10,5,2,10,1,13,2],[0,2,47,11,33,2,40,11,29,2,43,11,25,2,42,11,21,2,44,11,17,2,19,11,13,2,41,
11,9,2,45,11,5,2,46,1],[16,8,33,33,63,63,46,46,124,124,47,47,96,96,64,64,34,34,13,0],[16,4,40,40,41,41,91,91,93,93,13,0],[16,4,61,61,60,60,62,62,58,58,13,0],[16,3,43,43,45,45,42,42,13,0],[16,3,59,59,44,44,39,39,13,0],[16,1,126,126,13,0],[17,1,32,127,13,0],[16,1,48,57,13,0],[0,0,0,2,49,4,10,25,9,0,2,47,5,-2,10,17,0,0,3,1,46,10,8,0,2,47,6,-2,1,4,1,11,22,0,0,2,49,4,10,14,3,1,46,10,9,9,0,2,47,5,-2,1,1,13,0],[16,2,43,43,45,45,13,0],[0,2,48,10,13,2,10,10,9,2,51,10,5,2,10,1,13,0],[0,3,2,112,116,11,43,3,
2,109,109,11,37,3,2,99,109,11,31,3,2,101,109,11,25,3,2,101,120,11,19,3,2,105,110,11,13,3,2,112,99,11,7,3,2,109,117,1,13,0],[0,2,54,10,23,0,0,2,11,10,5,2,53,1,11,11,0,2,13,10,5,2,68,1,1,1,13,2],[0,3,1,123,10,18,0,2,4,4,10,12,0,3,1,125,11,5,2,66,1,1,13,2],[0,3,4,109,98,111,120,11,81,3,4,104,98,111,120,11,73,3,6,116,101,120,116,98,102,11,63,3,6,116,101,120,116,105,116,11,53,3,6,116,101,120,116,114,109,11,43,3,6,116,101,120,116,116,116,11,33,3,6,116,101,120,116,115,102,11,23,3,10,116,101,120,116,110,
111,114,109,97,108,11,9,3,4,116,101,120,116,1,13,0],[0,2,56,10,41,2,11,10,37,0,3,1,123,4,10,30,2,11,10,26,0,2,49,4,10,20,2,11,10,16,2,57,10,12,2,11,10,8,0,3,1,125,4,1,13,2],[0,3,4,107,101,114,110,11,10,3,5,109,107,101,114,110,1,13,0],[0,2,50,11,24,3,19,92,110,117,108,108,100,101,108,105,109,105,116,101,114,115,112,97,99,101,1,13,0],[0,2,17,11,10,3,5,114,105,103,104,116,1,13,0],[0,3,1,92,10,15,0,2,18,18,2,2,58,19,10,5,2,11,1,13,0],[0,9,0,0,2,11,10,35,0,2,8,11,29,2,9,11,25,2,20,11,21,2,30,11,17,2,38,
11,13,2,15,11,9,2,59,11,5,2,39,1,1,5,-38,10,5,2,11,1,13,2],[0,3,4,108,101,102,116,10,45,2,11,10,41,2,62,10,37,2,11,10,33,0,2,60,4,10,27,0,0,3,6,92,114,105,103,104,116,10,9,2,11,10,5,2,62,1,11,5,2,66,1,1,13,2],[0,16,7,40,40,41,41,91,91,93,93,47,47,124,124,46,46,11,9,2,63,11,5,2,64,1,13,0],[0,3,1,92,10,15,16,3,123,123,125,125,124,124,10,5,2,11,1,13,0],[0,3,1,92,10,9,2,18,10,5,2,11,1,13,0],[14,13,2],[14,13,2],[9,0,0,2,70,11,54,2,69,11,50,0,3,1,92,10,5,2,72,1,11,39,2,73,11,35,2,75,11,31,2,76,11,27,0,
3,1,123,10,16,2,67,10,12,0,3,1,125,11,5,2,65,1,1,11,5,2,71,1,5,-57,13,2],[17,5,92,92,123,123,125,125,36,36,45,45,13,0],[9,0,17,9,92,92,123,123,125,125,36,36,45,45,95,95,94,94,37,37,35,35,5,-20,13,0],[16,4,95,95,94,94,37,37,35,35,13,0],[0,3,3,45,45,45,11,12,3,2,45,45,11,6,3,1,45,1,13,0],[16,10,123,123,125,125,124,124,37,37,95,95,38,38,64,64,92,92,36,36,35,35,13,0],[0,3,1,92,10,15,0,2,6,11,5,2,74,1,10,5,2,11,1,13,0],[0,3,2,111,101,11,49,3,2,97,101,11,43,3,2,97,97,11,37,3,2,115,115,11,31,3,2,79,69,11,
25,3,2,65,69,11,19,3,2,65,65,11,13,16,4,111,111,79,79,108,108,76,76,1,13,0],[0,3,1,92,10,72,0,16,7,39,39,96,96,94,94,34,34,126,126,61,61,46,46,11,23,0,16,6,117,117,118,118,72,72,99,99,100,100,98,98,10,5,2,5,1,1,10,30,2,11,10,26,0,0,3,1,123,10,12,0,2,67,4,10,6,3,1,125,1,11,6,0,21,4,1,1,13,2],[0,3,1,92,10,19,0,2,18,18,2,2,17,19,10,9,2,5,10,5,2,11,1,13,0],[3,2,92,91],[3,2,92,93],[3,2,92,40],[3,2,92,41],[0,9,0,0,2,11,10,39,0,2,8,11,33,2,9,11,29,2,20,11,25,2,30,11,21,2,38,11,17,2,15,11,13,2,16,11,9,2,
39,11,5,2,82,1,1,5,-42,10,5,2,11,1,13,2],[3,2,92,92,13,0]]}})},"MW/equations/renderer/view/EquationView":function(){define("dojo/_base/declare dojo/_base/lang ./viewmodel/CSSViewModelRenderer ./viewmodel/HBox ./viewmodel/MathTextBox ./viewmodel/RuleBox ./viewmodel/StretchyBox ./viewmodel/HorizontalStretchyBox ./viewmodel/VBox ./viewmodel/WhiteSpaceBox ../Utilities".split(" "),function(h,e,g,d,c,b,a,f,k,l,n){return h([],{constructor:function(a){this.scriptlevel=0;this.scriptScalingFactor=a.scriptScalingFactor;
this.minimalFontSize=a.minimalFontSize;this.displaystyle=a.displaystyle;this.mathsize=this.mathvariant=null;this.renderer=new g(a);this._pxPerEm=this._basePxPerEm=this.renderer.getBasePxPerEm()},layoutAndRender:function(a){a=this.layoutNode(a);return this.renderer.render(a)},_setPxPerEm:function(){var a=Math.pow(this.scriptScalingFactor,this.scriptlevel);this._pxPerEm=Math.max(this._basePxPerEm*a,this.minimalFontSize)},_setBasePxPerEmFromSize:function(){var a=this.renderer.convertFontSizeToPx(this.mathsize);
this._basePxPerEm=Math.max(a,this.minimalFontSize);this._setPxPerEm()},emToPx:function(a){return Math.floor(this._pxPerEm*a)},mathAxis:function(){return Math.floor(this._pxPerEm*this.renderer.mathAxis)},barHeight:function(){return Math.max(Math.round(this._pxPerEm*this.renderer.barHeight),1)},computeWidth:function(a){return this.renderer.computeWidth(a,this.emToPx(1))},escapeText:function(a){return a.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;")},layoutNode:function(a){var b,
f;if(!a)return null;b=a.className;f=a.layout(this);f.name=b+" "+(f.name?f.name:"");n.copyCommonAttributes(a,f);return f},computeStyle:function(a,b){0!==b&&(this.scriptlevel=a+1)},_mergeMathvariant:function(a,b){if("normal"===b)return b;var f=-1!==a.indexOf("italic"),c=-1!==a.indexOf("bold"),d=-1!==b.indexOf("italic"),e=-1!==b.indexOf("bold"),g="",k="";if(f||d)k="italic";if(c||e)g="bold";f=g;k&&(f+=(f?"-":"")+k);return f||"normal"},applyStyleAttributes:function(a){var b={},f;["mathvariant","scriptlevel",
"mathsize"].forEach(e.hitch(this,function(c){void 0!==a[c]&&(b[c]=this[c],f=a[c],"mathvariant"===c&&(f&&b[c])&&(f=this._mergeMathvariant(this[c],f)),this[c]=f)}));return b},parseBoxes:function(e,g){var h=[],n=[],s,t,u;for(s=0;s<e.length;s+=1)if(t=e.charAt(s),"}"===t)n.pop();else{u=n.length;switch(t){case "v":t=new k;h.push(t);n.push(t);s+=1;break;case "h":t=new d;h.push(t);n.push(t);s+=1;break;case "a":t=new f;h.push(t);break;case "w":t=new l;n[n.length-1]instanceof d&&(t.horizontal=!0);h.push(t);
break;case "s":t=new a;h.push(t);break;case "r":t=new b;n[n.length-1]instanceof d&&(t.horizontal=!1);h.push(t);break;case "t":t=new c;h.push(t);break;case "*":n[u-1].children=g;continue;default:t=t.charCodeAt(0)-49,t=g[t]}0<u&&n[u-1].addChild(t)}h[0].templateParts=h;return h[0]},computeTemplateMetrics:function(a,b){var f;b=b||0;for(f=a.length-1;f>=b;f-=1)a[f].computeMetrics()},layoutChildren:function(a,b){var f,c,d,e,g=this.scriptlevel,k=this._pxPerEm,h=this._basePxPerEm;b=b||{};f=b.startIdx||0;c=
(b.length?b.length+f:a.length)-1;d=b.boxes||[];this.mathsize&&(this._setBasePxPerEmFromSize(),this.mathsize=null);for(;f<=c;f+=1){b.sizes&&(this.computeStyle(g,b.sizes[f]),this._setPxPerEm());e=a[f];if(e=this.layoutNode(e))e.fontSizePx=this.emToPx(1);d.push(e);this.scriptlevel=g;this._pxPerEm=k}this._basePxPerEm=h;return d}})})},"MW/equations/renderer/view/viewmodel/CSSViewModelRenderer":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/has ./HBox ./MathTextBox ./StretchyBox ./WhiteSpaceBox ../../Utilities ../../../utils/StringUtils".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r){return e(null,{constructor:function(b){var f={id:"MathEquationRendererScratch","class":"MathEquation",style:{position:"absolute",right:"-1000px",bottom:"-1000px",whiteSpace:"pre-wrap"}};this._scratch=d.byId("MathEquationRendererScratch");this._scratch||(this._scratch=a.create("span",f,document.body));this._mathroot=a.create("span",{"class":"MathEquation"},b.domNode);this.creatorFlavor=b.creatorFlavor;this.scriptScalingFactor=b.scriptScalingFactor;this.minimalFontSize=
b.minimalFontSize;this._pxPerEm=b.pxPerEm?b.pxPerEm:this.computePxToEms();this._pxPerEm<this.minimalFontSize&&(this._pxPerEm=this.minimalFontSize);this._pxPerEm=Math.ceil(this._pxPerEm);this._setStyle(this._mathroot,{fontSize:this._pxPerEm+"px"});this._setStyle(this._scratch,{fontSize:this._pxPerEm+"px"});this.fontAscent=0.75;this.fontXHeight=0.55;this.fontDescent=0.25;this._italicCorrection=0.1;this.mathAxis=0.38;this.barHeight=0.07},computeWidth:function(a,b){var f;this._setStyle(this._scratch,
{fontSize:b});this.render(a,this._scratch);f=this._scratch.clientWidth;this._scratch.innerHTML="";return f},getBasePxPerEm:function(){return this._pxPerEm},computePxToEms:function(a){a||(a=this._mathroot);a=f.getComputedStyle(a);a=parseFloat(a.fontSize);0===a&&(a=1);return a},convertFontSizeToPx:function(a){this._setStyle(this._scratch,{fontSize:a});a=this.computePxToEms(this._scratch);this._setStyle(this._scratch,{fontSize:this._pxPerEm+"px"});return a},toGrid:function(a){return isNaN(a)?"0px":Math.ceil(a)+
"px"},SPACE_NORMAL:[0,1,2,3,0,0,0,1,1,1,0,3,0,0,0,1,2,2,0,0,2,0,0,2,3,3,0,0,3,0,0,3,0,0,0,0,0,0,0,0,0,1,2,3,0,0,0,1,1,1,0,1,1,1,1,1,1,1,2,3,1,0,1,1],SPACE_SCRIPT:[0,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0],adjustSpacingClasses:function(a,b){var f=a?a.spacing:-1,c=b.spacing;if(2===c&&0!==f&&5!==f&&7!==f&&8!==f)b.spacing=0;else if(2===f&&(3===c||5===c||6===c))a.spacing=0},_setStyle:function(a,b){Object.keys(b).forEach(function(f){a.style[f]=
b[f]})},_resolveNest:function(a,b,f){for(var c;b&&8===a;)a=b.spacing,c=b.children,b=null,c&&c instanceof l&&(b=c[f?0:c.length-1]);return a},_gapForItalicCorrection:function(a,b){var f=0,c=a&&a instanceof n;b instanceof n&&(c&&!0===b.isItalic&&!0===a.isItalic?a.italicCorrectionRight=0:f+=b.leftItalicCorrection(),b.italicCorrectionRight=b.rightItalicCorrection());return f},_gapForCode:function(a,b,f){var c=0;if("MathType"!==this.creatorFlavor)return c;if(a&&(a.needsGapBehind()&&!b.startsWithDelimiter()||
b.needsGapBefore()&&!a.endsWithDelimiter()))c=Math.max(c,4*f);return c},computeGap:function(a,b,f){var c=f?this.SPACE_SCRIPT:this.SPACE_NORMAL;f=0;var d=1/18,e,g;this.adjustSpacingClasses(a,b);if(a)if(e=this._resolveNest(a.spacing,a,!1),g=this._resolveNest(b.spacing,b,!0),c=c[8*e+g],0<c)f=(2+c)*d;else if((1===b.spacing||2===b.spacing||1===a.spacing||2===a.spacing)&&b.cls!==a.cls)f=d;f=Math.max(f,this._gapForCode(a,b,d));f+=this._gapForItalicCorrection(a,b);return b.skip=f},render:function(b,f){var c;
f=f||this._mathroot;if(b){c=b.render(this);a.place(c,f);c=b.cssAscent()+b.cssDescent()+0.2*this.getBasePxPerEm();var d=-b.cssDescent()-0.1*this.getBasePxPerEm()/2;f["data-eqn-height"]=c;f["data-eqn-vertical-align"]=d}return f},makeGlyphTextbox:function(a,b){var f=a.font,c=a.glyph||a.unicode,d=new n;d.initalizeSymbolBoxData(a,b,!0);d.size=a.size||1;d.fontSizePx=b.emToPx(1);d.text=r.fromCodePoint(c);this.computeGlyphTextboxMetrics(d,f,b);return d},_glyphShift:function(a){var b=0,b=k("ff")?-0.05:0.16;
return a.emToPx(b)},computeGlyphTextboxMetrics:function(a,b,f){a.computeMetrics(f);"extra"===b.slice(0,5)&&"extra1"!==b&&(a.setMetrics({ascent:0,descent:f.emToPx(a.size)}),"extra"===b&&(a.glyphShift=this._glyphShift(f)))},_setTooltip:function(a,f){delete a.title;b.add(a,"hasTooltip");a["data-eqn-tooltip"]=f},makeDomNode:function(f){var d=a.create("span");d.MWEQ=f;f.name&&b.add(d,f.name);f.id&&(d.id=f.id);f.tooltip&&this._setTooltip(d,f.tooltip);f.style&&c.set(d,"style",f.style);f["class"]&&b.add(d,
f["class"]);return d},_setMathTextBoxFontAttributes:function(a,b){q.isSingleCharIdentString(a.text||"")||(b.fontStyle="normal");a.fontStyle&&(b.fontStyle=a.fontStyle);a.fontWeight&&(b.fontWeight=a.fontWeight)},_renderMathTextBoxSetStyle:function(a,b){var f=(b.skip||0)+b.xShift,c={position:"relative"};f&&b.applyItalicCorrection&&(c.marginLeft=f+"em");b.italicCorrectionRight&&b.applyItalicCorrection&&(c.marginRight=b.italicCorrectionRight+"em");this._setMathTextBoxFontAttributes(b,c);if(b.accentBox()&&
(c.height=this.toGrid(b.accentHeight()),"topaccent"===b.accentType&&(c.display="block"),f=b.downShift()))c.marginTop=this.toGrid(f),c.marginBottom=this.toGrid(-f);this._setStyle(a,c)},renderMathTextBox:function(a){var f=this.makeDomNode(a);this._renderMathTextBoxSetStyle(f,a);c.set(f,{innerHTML:a.text});b.add(f,a.cls);a.accentBox()&&b.add(f,a.accentType);return f},renderRuleBox:function(a){var b=this.makeDomNode(a),f,d=a.ascent();0<d&&1>d&&(d=1);c.set(b,{"class":"rulebox"});a.horizontal&&(f={display:"block",
borderBottomStyle:"solid",borderBottomWidth:this.toGrid(d),width:"100%",height:"0px",zIndex:1});this._setStyle(b,f);return b},_renderHorizontalStretchyBoxApplyStyle:function(a,b){var f=b.skip||0,c={display:"block",position:"relative"};0!==f&&(c.marginLeft=f+"em");c.height=this.toGrid(b.accentHeight());this._setMathTextBoxFontAttributes(b,c);this._setStyle(a,c)},_renderSingleGlyphHorizontalStretchyBoxChild:function(b,f){var c=f.children[0],d=f.downShift(),c=c.render(this),d={left:this.toGrid(0),top:this.toGrid(d)};
a.place(c,b);this._setStyle(c,d)},_renderSingleGlyphHorizontalStretchyBox:function(a,b){var f={};this._renderSingleGlyphHorizontalStretchyBoxChild(a,b);b.width()&&(f.width=this.toGrid(b.width()));b.left()&&(f.left=this.toGrid(b.left()));this._setStyle(a,f);return a},_renderMultipleGlyphHorizontalStretchyBox:function(b,f){var c=f.downShift()||0;f.traverse(g.hitch(this,function(f){var d;f&&(d=f.render(this),a.place(d,b),f=f.left(),f={top:this.toGrid(c),position:"absolute",left:this.toGrid(f)},this._setStyle(d,
f))}));if(!f.accentType){var d={display:"inline-block",position:"relative",left:"-"+f.width()/2+"px"};this._setStyle(b,d)}return b},renderHorizontalStretchyBox:function(a){var b=this.makeDomNode(a);this._renderHorizontalStretchyBoxApplyStyle(b,a);1===a.children.length?this._renderSingleGlyphHorizontalStretchyBox(b,a):this._renderMultipleGlyphHorizontalStretchyBox(b,a);a.setMetrics({cssAscent:a.ascent(),cssDescent:a.descent()});return b},_renderStretchyBoxApplyStyle:function(a,b){var f=b.skip||0,c=
{display:"inline-block",position:"relative"};f&&(c.marginLeft=f+"em");this._setStyle(a,c)},_applyChromeFix:function(a,b){return 1.4===a.size&&k("webkit")?1.024*b:b},_renderSingleGlyphStretchyBoxChild:function(b,f){var c=f.children[0],d=c.fontSizePx,e=c.render(this),g={display:"inline-block",position:"relative"},h=Math.floor(f.ascent()),l=0,n=Math.round(c.height()),m=0;k("mac")&&k("ff")&&(m=Math.floor(-d*this.barHeight));a.place(e,b);switch(c.cls){case "extra":g.verticalAlign=this.toGrid(h);n=this._applyChromeFix(c,
n);g.lineHeight=this.toGrid(n);0<c.size-1-this.mathAxis?(l=Math.floor(d*((c.size-1-this.mathAxis)/2)),g.marginTop=this.toGrid(-l),g.marginBottom=this.toGrid(l)):k("chrome")&&delete g.display;break;case "extra1":m&&(g.verticalAlign=this.toGrid(m));break;case "symbol":break;default:l=Math.ceil(d*this.mathAxis),g.verticalAlign=this.toGrid(h+m),g.lineHeight=this.toGrid(n),g.marginTop=this.toGrid(-l),g.marginBottom=this.toGrid(l)}this._setStyle(e,g)},_renderSingleGlyphStretchyBox:function(a,b){var f={display:"inline-block",
position:"relative"};this._renderSingleGlyphStretchyBoxChild(a,b);b.width()&&(f.width=this.toGrid(b.width()));b.left()&&(f.left=this.toGrid(b.left()));this._setStyle(a,f);return a},_renderMultipleGlyphStretchyBox:function(b,f){var c=f.children,d=0<c.length?c[c.length-1]:null,e=0;this._setStretchyBoxSpecialWidthHeight(b,f);f.traverse(g.hitch(this,function(f){var c;f&&(c=f.render(this),a.place(c,b),this._setStyle(c,{position:"absolute",display:"block",top:this.toGrid(e+f.glyphShift)}),e+=f.ascent(),
f!==d&&(e+=f.descent()))}));this._setStyle(b,{verticalAlign:this.toGrid(-f.descent())});return b},renderStretchyBox:function(a){var b=this.makeDomNode(a);this._renderStretchyBoxApplyStyle(b,a);this._setBoxTextAlign(b,a);1===a.children.length?this._renderSingleGlyphStretchyBox(b,a):this._renderMultipleGlyphStretchyBox(b,a);a.setMetrics({cssAscent:a.ascent(),cssDescent:a.descent()});return b},_setBoxTextAlign:function(a,b){var f="left";"c"===b.alignment?f="center":"r"===b.alignment&&(f="right");this._setStyle(a,
{textAlign:f})},_setStretchyBoxSpecialWidthHeight:function(a,b){var f=b.precomputedWidth||b.fontSizePx,f={height:this.toGrid(b.height()),width:this.toGrid(f)};b.left()&&(f.left=this.toGrid(b.left()));this._setStyle(a,f)},_renderHBoxApplyStyle:function(a,b){var f=b.skip||0,c={display:"inline-block",position:"relative"};b.fontSizePx&&(c.fontSize=b.fontSizePx+"px");f&&(c.marginLeft=f+"em");if(b.leftShift||b.rightShift)f=b.leftShift?-b.leftShift:0,f+=b.rightShift?b.rightShift:0,c.marginLeft=this.toGrid(f);
b.width()&&(c.width=this.toGrid(b.width()));b.downShift()&&(c.marginTop=this.toGrid(b.downShift()),c.marginBottom=this.toGrid(-b.downShift()),c.display="block");this._setStyle(a,c)},renderHBox:function(b){var f=this.makeDomNode(b),d=b.fontSizePx||0,e=0,k=0;c.set(f,"data-eqn-subscript",!0===b.subscript);c.set(f,"data-eqn-superscript",!0===b.superscript);b.children.length&&!b.accentBox()&&(e=Math.round(d*this.fontAscent),k=Math.round(d*this.fontDescent));b.traverse(g.hitch(this,function(b){var c;b&&
(c=b.render(this),a.place(c,f),e=Math.max(e,b.cssAscent()),k=Math.max(k,b.cssDescent()))}));b.setMetrics({cssAscent:e,cssDescent:k});this._renderHBoxApplyStyle(f,b);return f},_renderVBoxApplyStyle:function(a,b){var f=b.skip||0,c={display:"inline-block",position:"relative"};f&&(c.marginLeft=f+"em");b.borderWidth&&(c.borderWidth=b.borderWidth+"px");b.borderStyle&&(c.borderStyle=b.borderStyle);this._setStyle(a,c)},renderVBox:function(b){var f=this.makeDomNode(b),c=b.children,d=0<c.length?c[c.length-
1]:null,e=0,h=0;this._renderVBoxApplyStyle(f,b);if(0===c.length)return this._setStyle(f,{height:this.toGrid(b.height()),verticalAlign:this.toGrid(-b.descent())}),b.setMetrics({cssAscent:b.ascent(),cssDescent:b.descent()}),f;this._setBoxTextAlign(f,b);var l=!1;b.traverse(g.hitch(this,function(b){var c,g;b&&(c=b.render(this),a.place(c,f),b instanceof m?(e+=b.length,h+=b.ascent()):(g=e+b.ascent()-b.cssAscent(),b.isStretchySymbolBox()?1===b.children.length&&(g=b.children[0],g.ascent()-g.cssAscent()&&
(g=g.ascent()-g.cssAscent(),k("webkit")&&(g=Math.max(Math.ceil(g/1.1),g-1)),this._setStyle(c,{display:"block",marginTop:this.toGrid(g)}))):this._setStyle(c,{display:"block",marginTop:this.toGrid(g)}),e=b.descent()-b.cssDescent(),h+=b.ascent(),b!==d?h+=b.descent():(b=b.accentBox())&&1<b.children.length&&(l=!0)))}));l||this._setVBoxVerticalAlign(f,b,h);b.setMetrics({cssAscent:b.ascent(),cssDescent:b.descent()});return f},_setVBoxVerticalAlign:function(a,b,f){b=b.ascent()-f;this._setStyle(a,{verticalAlign:this.toGrid(b)})}})})},
"MW/equations/renderer/view/viewmodel/HBox":function(){define(["dojo/_base/declare","./ContainerBox"],function(h,e){return h(e,{constructor:function(){this.name="HBox";this._largeOp=!1},render:function(e){return e.renderHBox(this)},accentBox:function(){return 1===this.children.length&&this.children[0]?this.children[0].accentBox():null},hasLargeOpSymbolBox:function(){return this._largeOp},rightItalicCorrection:function(){var e=this.children;return e.length&&e[e.length-1].rightItalicCorrection()},leftItalicCorrection:function(){var e=
this.children;return e.length&&e[0].leftItalicCorrection()},needsGapBefore:function(){var e=this.children;return e.length&&e[0].needsGapBefore()},needsGapBehind:function(){var e=this.children;return e.length&&e[e.length-1].needsGapBehind()},startsWithDelimiter:function(){var e=this.children;return e.length&&e[0].startsWithDelimiter()},endsWithDelimiter:function(){var e=this.children;return e.length&&e[e.length-1].endsWithDelimiter()},computeRowGaps:function(e,d){var c=0,b=this.children;if(0<b.length){e.computeGap(null,
b[0],d);for(c=0;c<b.length-1;c+=1)e.computeGap(b[c],b[c+1],d)}},findAlignmentPoint:function(e,d){var c=this.children,b,a,f;d.push(0);f=d.length-1;for(b=0;b<c.length;b+=1)if(a=c[b])if(d[f]=b,a=a.findAlignmentPoint(e,d),null!==a)return a;d.pop();return null},splitAt:function(e,d){var c,b,a,f;1===arguments.length&&(d=0);c=e.path[d];b=this.children;a=b[c].splitAt(e,d+1);f=new this.constructor(this);f.setMetrics({ascent:this.ascent(),descent:this.descent()});f.children=b.slice(c);f.children[0]=a.right;
b[c]=a.left;this.children=b.slice(0,c+1);a.right=f;a.left=this;return a},computeMetrics:function(){var e=this.children,d=0,c,b,a;if(0<e.length){c=e[0].ascent();b=e[0].descent();for(var f=e[0].belowXheight(),d=1;d<e.length;d+=1)a=e[d],c=Math.max(c,a.ascent()),b=Math.max(b,a.descent()),f&=a.belowXheight();this.setMetrics({ascent:c,descent:b});this.setBelowXheight(f)}},setItalicCorrection:function(e){var d=this.children;0!==d.length&&(d=d[d.length-1])&&d.setItalicCorrection(e)},_setScriptVBox:function(e,
d,c,b,a){var f=e.renderer,k=e.emToPx(1);e=k*f.fontAscent;var h=k*f.fontXHeight,k=k*f.fontDescent,n=!!b,f=!!a,p=d.ascent()||e,m=d.descent()||k,q=d.hasLargeOpSymbolBox();d=0;var r=h,s=0.6*h,t=e-h,u=s,h=0;if(f){a.superscript=!0;if(p>Math.ceil(e)||q)r/=2;d=p-a.descent()-r;d=Math.max(d,t)-(a.supDownShift||0)}if(n){b.subscript=!0;if(m>Math.ceil(k)||q)s=-s/2;h=-m+b.ascent()+s;h=Math.min(h,u)}f&&n&&(h>d&&(h=d),b=c.children[1],b.length=d-h,b.computeMetrics());b=0;b=f?d+a.height():h;c.computeMetrics();c.setAscent(b)},
setNoLimitsScriptData:function(e,d){var c=d[0],b=d[1],a=d[2];this._setScriptVBox(e,c,this.children[1],b,a);c.setItalicCorrection(!b||!!a);this.computeMetrics()},setMultiScriptData:function(e,d,c){var b,a=this.children,f=a[d],k,h,n,p,m;for(b=0;b<a.length;b+=1)if(b!==d){k=a[b];h=k.children;p=n=null;m=c[b];if(1===m||3===m)n=h[0];2===m?p=h[0]:3===m&&(p=h[2]);this._setScriptVBox(e,f,k,p,n)}this.computeMetrics()}})})},"MW/equations/renderer/view/viewmodel/ContainerBox":function(){define(["dojo/_base/declare",
"./AbstractBox"],function(h,e){return h(e,{constructor:function(e){e=e||{};this.children=e.children||[]},addChild:function(e){e&&this.children.push(e)},traverse:function(e){var d=this.children,c,b;for(c=0;c<d.length;c+=1)b=d[c],e(b)}})})},"MW/equations/renderer/view/viewmodel/AbstractBox":function(){define(["dojo/_base/declare","dojo/_base/lang","../../model/SpacingClasses"],function(h,e,g){return h(null,{constructor:function(d){d=d||{};this._accentHeight=this._cssDescent=this._cssAscent=this._descent=
this._ascent=0;this._belowXheight=!1;this._downShift=0;this.spacing=d.spacing||g.ORD;this.skip=0;this.templateParts=null},computeMetrics:function(){},isStretchyAccentBox:function(){return!1},isStretchySymbolBox:function(){return!1},accentBox:function(){return null},hasLargeOpSymbolBox:function(){return!1},setItalicCorrection:function(){},rightItalicCorrection:function(){return 0},leftItalicCorrection:function(){return 0},needsGapBefore:function(){return!1},needsGapBehind:function(){return!1},startsWithDelimiter:function(){return this.isDelimiterBox()},
endsWithDelimiter:function(){return this.isDelimiterBox()},isDelimiterBox:function(){return!1},height:function(){return this._ascent+this._descent},belowXheight:function(){return this._belowXheight},setBelowXheight:function(d){this._belowXheight=d},downShift:function(){return this._downShift},setDownShift:function(d){this._downShift=d},accentHeight:function(){return this._accentHeight},setMetrics:function(d){["ascent","descent","cssAscent","cssDescent"].map(e.hitch(this,function(c){d.hasOwnProperty(c)&&
(this["_"+c]=d[c])}))},setAccentHeight:function(d){this._accentHeight=d},setAscent:function(d){var c=this._ascent+this._descent;this._ascent=d;this._descent=c-d},ascent:function(){return this._ascent},cssAscent:function(){return this._cssAscent},setDescent:function(d){var c=this._ascent+this._descent;this._descent=d;this._ascent=c-d},descent:function(){return this._descent},cssDescent:function(){return this._cssDescent},setWidth:function(d){this._width=d},width:function(){return this._width},setLeft:function(d){this._left=
d},left:function(){return this._left},centerAt:function(d){var c=this.height();this._ascent=c/2+d;this._descent=c/2-d},findAlignmentPoint:function(d,c){return null}})})},"MW/equations/renderer/view/viewmodel/MathTextBox":function(){define("dojo/_base/declare dojo/has ./AbstractBox ../../model/SpacingClasses ../../model/Symbols ../../model/utils/MathMLEntities".split(" "),function(h,e,g,d,c,b){var a={f:0.2,j:0.17,p:0.1,x:0.05,y:0.07,"\u00df":0.2,A:0.1,B:0.05,D:0.05,H:0.05,I:0.05,J:0.05,L:0.05,M:0.05,
N:0.05,R:0.05,U:-0.1,X:0.05,Z:0.05,"\u00c4":0.1,"\u00dc":-0.1,"\u03b2":0.05,"\u03bb":0.05,"\u03bc":0.05,"\u03c1":0.05,"\u03c7":0.1},f={d:0.05,f:0.2,j:0.05,k:0.02,r:0.05,t:0.03,"\u00df":0.02,C:0.1,E:0.1,F:0.1,H:0.1,I:0.1,J:0.1,K:0.1,L:0.05,M:0.1,N:0.1,S:0.05,T:0.1,U:0.1,V:0.1,W:0.1,X:0.05,Y:0.1,Z:0.1,"\u00dc":0.1,"\u03b3":0.05,"\u03b4":0.05,"\u03b6":0.1,"\u03b8":0.05,"\u03ba":0.05,"\u03be":0.05,"\u03c0":0.1,"\u03c3":0.05,"\u03d5":0.05,"\u03d1":0.03,"\u03d6":0.1,"\u03db":0.05,"\u03c7":0.05,"\u03c8":0.09};
a[b.replace("\x26Escr;")]=-0.05;f[b.replace("\x26sscr;")]=-0.05;f[b.replace("\x26zscr;")]=-0.05;f[b.replace("\x26Kscr;")]=0.05;f[b.replace("\x26Xscr;")]=0.05;return h(g,{constructor:function(a){a=a||{};this.name="MathTextBox";this.text=a.text||"";this.yShift=this.xShift=this.glyphShift=0;this.fontSize=a.fontSize||1;this.cls=a.cls||"text";this.applyItalicCorrection=!0;this.isRelation=!1;this.accentType=this.fontStyle=this.fontWeight=null;this.stretchy=!1},isStretchyAccentBox:function(){return!0===
this.symbolAccentStretchy},accentBox:function(){return"topaccent"===this.accentType||"bottomaccent"===this.accentType?this:null},setItalicCorrection:function(a){this.text&&(this.applyItalicCorrection=a)},_getCharAt:function(a,b){if(!a)return"";var f=a.length,c;c=0===b?a[0]:a[f-1];var d=c.charCodeAt(0);1<f&&(55296<=d&&57343>=d)&&(c=0===b?a.slice(0,2):a.slice(f-2));return c},rightItalicCorrection:function(){var a;return("text"===this.cls||"symbol"===this.cls)&&this.applyItalicCorrection?(a=this.text,
(a=this._getCharAt(a,-1))&&this.isItalic&&f[a]?f[a]:0):0},leftItalicCorrection:function(){var b;return("text"===this.cls||"symbol"===this.cls)&&this.applyItalicCorrection?(b=this.text,(b=this._getCharAt(b,0))&&this.isItalic&&a[b]?a[b]:0):0},needsGapBefore:function(){return"code"===this.cls},needsGapBehind:function(){return"code"===this.cls},isDelimiterBox:function(){var a=this.cls;return 5<a.length&&"extra"===a.slice(0,5)||this.symbolDelimiterType},findAlignmentPoint:function(a,b){var f;return"alignmark"===
this.cls?{path:b,pos:0}:"d"===a&&"number"===this.cls?(f=this.text.indexOf("."),-1===f&&(f=this.text.length),{path:b,pos:f}):"\x3d"===a&&this.isRelation?{path:b,pos:0}:null},splitAt:function(a){a=a.pos;var b=null,f=this.text;if(a===f.length)return{left:this,right:null};b=new this.constructor(this);b.text=f.slice(a);this.text=f.slice(0,a);return{left:this,right:b}},setSymbolBoxData:function(a,b){var f=a.symbolName||a.text,f=c.unicodeMap[f]||f;(f=c.symbolMap[f])?this.initalizeSymbolBoxData(f,b,a.stretchy):
(this.cls="text",this.text=a.symbolName.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;"),this.spacing=d.ORD);void 0!==a.TeXSpacing&&(this.spacing=a.TeXSpacing)},initalizeSymbolBoxData:function(a,b,f){this.cls=a.font;this.fontStyle=a.fontStyle;this.isItalic="italic"===a.fontStyle;this.text=c.getCharForSymbol(a);this.spacing=a.spacing||d.ORD;this.subLeftShift=b.emToPx(a.subLeftShift)||0;this.supRightShift=b.emToPx(a.supRightShift)||0;this.supDownShift=b.emToPx(a.supDownShift)||
0;this.symbolDelimiterType=a.delimiterType;this.symbolGlyphTop=b.emToPx(a.glyphTop/1E3)||0;this.symbolGlyphBottom=b.emToPx(a.glyphBottom/1E3)||0;this.symbolAccentDownShift=b.emToPx(a.accentDownShift/1E3)||0;this.symbolAccentHeight=b.emToPx(a.accentHeight);this.symbolGlyphTop!==this.symbolGlyphBottom&&(this.symbolAccentHeight=b.emToPx((a.glyphTop-a.glyphBottom)/1E3)||1);this.symbolAccentStretchy=a.accentStretchy&&(f||a.stretchyDefault);this.isRelation=a.relation||!1},_computeTopAccentMetrics:function(a,
b){this.accentType&&-1!==this.accentType.indexOf("accent")&&(b.accentHeight=this.symbolAccentHeight?this.symbolAccentHeight:b.px*a.fontAscent,b.accentHeight=Math.max(0,b.accentHeight),this.setAccentHeight(b.accentHeight),-1!==this.accentType.indexOf("topaccent")&&(b.ascent=this.accentHeight(),b.descent=0,this.setMetrics({ascent:b.ascent,descent:b.descent})))},computeMetrics:function(a){var b=a.renderer;a=a.emToPx(1);var f=Math.ceil(a*b.fontAscent);a={px:a,ascent:f,descent:a-f,accentHeight:0};"alignmark"===
this.cls?this.setMetrics({ascent:0,descent:0}):(this.setMetrics({ascent:a.ascent,descent:a.descent}),this._computeTopAccentMetrics(b,a));this.setMetrics({cssAscent:a.ascent,cssDescent:a.descent})},render:function(a){return a.renderMathTextBox(this)}})})},"MW/equations/renderer/view/viewmodel/StretchyBox":function(){define(["dojo/_base/declare","dojo/_base/lang","./ContainerBox","../../model/SpacingClasses","../../model/Symbols"],function(h,e,g,d,c){return h(g,{constructor:function(){this.name="StretchyBox";
this.minsize="shortfall";this.maxsize=0;this.alignment="c";this.supRightShift=this.subLeftShift=0;this._largeOp=!1},computeMetrics:function(){},render:function(b){return b.renderStretchyBox(this)},isStretchySymbolBox:function(){return!0},hasLargeOpSymbolBox:function(){return this._largeOp},isDelimiterBox:function(){return"open"===this.delimiterType||"close"===this.delimiterType},makeLargeOp:function(b,a,f){this.symbolData=b=c.lookupLargeOp(b,f);this._makeSingleSymbolBox(a,b);f=this.children[0];this._largeOp=
!0;a.renderer.computeGlyphTextboxMetrics(f,b.font,a);this.setMetrics({ascent:f.ascent(),descent:f.descent()});this.precomputedWidth=a.emToPx(b.width/1E3)||0;this.subLeftShift=a.emToPx(b.subLeftShift)||0;this.supRightShift=a.emToPx(b.supRightShift)||0;this.spacing=b.spacing||d.ORD;this.centerAt(a.mathAxis());return this},setSymbolName:function(b){this.symbolName=b},setSymbolBoxData:function(b,a){var f=b.symbolName,d=c.getSymbol(f);d&&(this.symbolName=f,d.delimiterType&&(this.delimiterType=d.delimiterType),
d.spacing&&(this.spacing=d.spacing),b.TeXSpacing&&(this.spacing=b.TeXSpacing),0<b.minsize&&(this.minsize=b.minsize,this.setMetrics({ascent:this.minsize}),this.centerAt(a)),0<b.maxsize&&(this.maxsize=b.maxsize))},resizeAndCenterDelimiter:function(b,a,f){var c=0,c=(a-f)/2;this.resizeStretchBox(b,a,f,this.minsize,this.maxsize)&&this.centerAt(c)},STRETCHY_SUFFIX:["","big","Big","bigg","Bigg"],_glyphForSymbol:function(b,a,f){var d,e,g=0,h,m=null,q=this.STRETCHY_SUFFIX;for(d=0;d<q.length;d+=1){h=c.symbolMap[a+
q[d]];if(!h)return 1.5*g>=f?m:null;e=h&&h.size?h.size:1;e=b.emToPx(e);if(!this.isDelimiterBox()&&e+1>=f||e>f-1E-4)return m&&2*Math.abs(f-g)<Math.abs(e-f)?m:h;g=e;m=h}return null},_tallestGlyphForSymbol:function(b){var a=this.STRETCHY_SUFFIX;return c.symbolMap[b+a[a.length-1]]},resizeStretchBox:function(b,a,f,d,e){var g=a+f,h=null,m=!0,h=c.symbolMap,q=c.unicodeMap;"shortfall"===d?g=Math.max(0.901*g,g-b.emToPx(0.5)):0<d&&(g=Math.max(g,b.emToPx(d)));0<e&&(g=Math.min(g,b.emToPx(e)));d=q[this.symbolName]||
this.symbolName;h[d]||(d="ZeroWidthSpace");g<=b.emToPx(3)&&!this.isDelimiterBox()&&(f=Math.max(f-b.emToPx(2.25*b.renderer.fontDescent),0));(h=this._glyphForSymbol(b,d,g))?(this._makeSingleSymbolBox(b,h),m=1<h.size):this._makeVariableSymbolBox(b,d,a,f)||(h=this._tallestGlyphForSymbol(d),this._makeSingleSymbolBox(b,h));return m},_makeSingleSymbolBox:function(b,a){var f=b.renderer.makeGlyphTextbox(a,b);this.children=[f];this.setMetrics({ascent:f.ascent(),descent:f.descent()});this.precomputedWidth=b.emToPx(a.width/
1E3)||0},_makeVariableSymbolBox:function(b,a,f,d){function g(a,f){var c=b.renderer.makeGlyphTextbox(a,b);c.xShift=m;c.glyphShift+=q;f||c.setMetrics({descent:c.descent()-A,cssDescent:c.cssDescent()-A});return c}function h(a){for(var b=0,f,b=0;b<a;b+=1)f=g(t),G(f)}f+=d;var p=c.symbolMap;d=p[a+"tp"];if(!d)return!1;var m=0,q=0,r=p[a+"mid"],s=p[a+"bt"],t=p[a+"ex"],p=s.size,u=t.size,v=r?r.size:0;a=b.emToPx(d.size);var p=b.emToPx(p),v=v?b.emToPx(v):0,w=b.emToPx(u),x=Math.max(0,f-(a+p+v)),A=0,B=2,F=u=0,G=
e.hitch(this,function(a){this.children.push(a)});if(!d)return!1;d.yOffset&&(q=b.emToPx(d.yOffset/1E3));d.xOffset&&(m=d.xOffset/1E3,"c"===this.alignment&&(m/=2));r?(u=Math.ceil(x/2/w),B+=1+2*u,F=2*u*w-x):(u=Math.ceil(x/w),B+=u,F=u*w-x);A=(Math.max(0,a+p+v-f)+F)/(B-1);this.children=[g(d)];r&&(h(u),r=g(r),G(r));h(u);s=g(s,!0);G(s);this.setMetrics({ascent:0,descent:f});this.precomputedWidth=b.emToPx(d.width/1E3)||0;return!0}})})},"MW/equations/renderer/view/viewmodel/WhiteSpaceBox":function(){define(["dojo/_base/declare",
"dojo/dom-style","./AbstractBox"],function(h,e,g){return h(g,{constructor:function(d){d=d||{};this.name="WhiteSpaceBox";this.length=d.length||0;this.horizontal=!1},computeMetrics:function(){this.setMetrics({ascent:this.horizontal?0:this.length})},render:function(d){var c=d.makeDomNode(this);this.horizontal?e.set(c,{display:"inline-block",position:"relative",marginLeft:d.toGrid(this.length)}):e.set(c,{display:"none"});return c}})})},"MW/equations/renderer/view/viewmodel/RuleBox":function(){define(["dojo/_base/declare",
"./AbstractBox"],function(h,e){return h(e,{constructor:function(e){e=e||{};this.name="RuleBox";this.thickness=e.thickness||0;this.length=e.length||0;this.horizontal=!0},computeMetrics:function(){var e=this.length;this.horizontal&&(e=this.thickness);this.setMetrics({ascent:e,cssAscent:e})},render:function(e){return e.renderRuleBox(this)}})})},"MW/equations/renderer/view/viewmodel/HorizontalStretchyBox":function(){define(["dojo/_base/declare","dojo/_base/lang","./ContainerBox","../../model/SpacingClasses",
"../../model/Symbols"],function(h,e,g,d,c){return h(g,{constructor:function(b){this.name="HorizontalStretchyBox"},computeMetrics:function(){},render:function(b){return b.renderHorizontalStretchyBox(this)},accentBox:function(){return"topaccent"===this.accentType||"bottomaccent"===this.accentType?this:null},isStretchyAccentBox:function(){return!0},makeHorizontalStretchyBox:function(b,a){var f=c.getSymbol(b.symbolName);this.symbolData=f;this.setSymbolBoxData(b);this._makeSingleSymbolBox(a,f);var d=this.children[0];
d.setSymbolBoxData(b,a);a.renderer.computeGlyphTextboxMetrics(d,f.font,a);this.setMetrics({ascent:d.ascent(),descent:d.descent()});this.setAccentHeight(a.emToPx(f.accentHeight||1));return this},setSymbolBoxData:function(b){this.symbolName=b.symbolName;this.baseIsItalic=b.baseIsItalic;this.accentType=b.accentType},STRETCHY_SUFFIX:["","big","Big","bigg","Bigg"],_glyphForSymbol:function(b,a,f){var d,e,g=0,h,m=null,q=this.STRETCHY_SUFFIX;for(d=0;d<q.length;d+=1){h=c.symbolMap[a+q[d]];if(!h)break;e=h&&
h.width?h.width/1E3:1;e=b.emToPx(e);if(!this.isDelimiterBox()&&e+1>=f||e>f-1E-4)return m&&2*Math.abs(f-g)<Math.abs(e-f)?m:h;g=e;m=h}return null},_widestGlyphForSymbol:function(b){var a=this.STRETCHY_SUFFIX,f;for(f=a.length-1;0<=f;f-=1){var d=c.symbolMap[b+a[f]];if(d)return d}return null},resizeHorizontalStretchyBox:function(b,a){var f=null,d=c.unicodeMap[this.symbolName]||this.symbolName;(f=this._glyphForSymbol(b,d,a))?this._makeSingleSymbolBox(b,f):this._makeVariableSymbolBox(b,d,a)||(f=this._widestGlyphForSymbol(d),
this._makeSingleSymbolBox(b,f))},_setMetrics:function(b,a){var f=b.emToPx(1),c=Math.ceil(f*b.renderer.fontAscent),d=a.symbolAccentHeight||1,e=a.symbolAccentDownShift||0;"topaccent"===this.accentType?this.setMetrics({ascent:d,descent:0}):"bottomaccent"===this.accentType?(f=a.symbolGlyphTop-e-d,this.setMetrics({ascent:d+f,descent:-f})):this.setMetrics({ascent:c,descent:f-c});this.setAccentHeight(d);e&&this.setDownShift(e)},_makeSingleSymbolBox:function(b,a){var f=b.renderer.makeGlyphTextbox(a,b);f.accentType=
this.accentType;f.computeMetrics(b);this.children=[f];this._setMetrics(b,f)},_makeVariableSymbolBox:function(b,a,f){function d(a,f){var c=b.renderer.makeGlyphTextbox(a,b);c.setLeft(Math.round(B));c.setWidth(f);B+=f-w;return c}function g(a){for(var b=0,f,b=0;b<a;b+=1)f=d(r,u),F(f)}var h=c.symbolMap,p=h[a+"left"];if(!p)return!1;var m=h[a+"mid"],q=h[a+"right"],r=h[a+"ex"];a=q.width/1E3;var s=r.width/1E3,t=m?m.width/1E3:0,h=b.emToPx(p.width/1E3);a=b.emToPx(a);var t=t?b.emToPx(t):0,u=b.emToPx(s),v=Math.max(0,
f-(h+a+t)),w=0,x=2,A=s=0,B=0,F=e.hitch(this,function(a){this.children.push(a)});if(!p)return!1;m?(s=Math.ceil(v/2/u),x+=1+2*s,A=2*s*u-v):(s=Math.ceil(v/u),x+=s,A=s*u-v);w=(Math.max(0,h+a+t-f)+A)/(x-1);p=d(p,h);this.children=[p];m&&(g(s),m=d(m,t),F(m));g(s);q=d(q,a);F(q);this._setMetrics(b,p);this.setWidth(f);return!0}})})},"MW/equations/renderer/view/viewmodel/VBox":function(){define("dojo/_base/array dojo/_base/declare ./BoxUtils ./ContainerBox ./MathTextBox ./HorizontalStretchyBox".split(" "),function(h,
e,g,d,c,b){return e(d,{constructor:function(a){a=a||{};this.name="VBox";this.alignment=a.alignment||"c";this.precomputedWidth=0},render:function(a){return a.renderVBox(this)},computeMetrics:function(){var a=this.children,b=0,c;if(0<a.length){for(b=c=0;b<a.length-1;b+=1)a[b]&&(c+=a[b].height());(a=a[a.length-1])&&this.setMetrics({ascent:c+a.ascent(),descent:a.descent()})}this.borderWidth&&(this._ascent+=this.borderWidth,this._descent+=this.borderWidth);return this},needsGapBefore:function(){return h.some(this.children,
function(a){return a.needsGapBefore()})},needsGapBehind:function(){return h.some(this.children,function(a){return a.needsGapBehind()})},_scaleOneStretchyAccent:function(a,f,d,e){var h=g.getAccentBox(e);if(h)return d=d||a.computeWidth(f),h instanceof b?(h.resizeHorizontalStretchyBox(a,d),e.computeMetrics()):h instanceof c&&h.symbolAccentDownShift&&h.setDownShift(h.symbolAccentDownShift),h.baseIsItalic&&"topaccent"===h.accentType&&!f.belowXheight()?h.skip+=f.rightItalicCorrection()/2:h.setItalicCorrection(!1),
d},_scaleStretchyBase:function(a,b,c,d){var e=g.getHorizontalStretchyAccentBox(b);e&&(c=c?a.computeWidth(c):0,d=d?a.computeWidth(d):0,e=b.children[0],e.resizeHorizontalStretchyBox(a,Math.max(c,d)),b.computeMetrics())},_scaleStretchyAccents:function(a,b,c,d){var e;e=this._scaleOneStretchyAccent(a,b,0,c);this._scaleOneStretchyAccent(a,b,e,d);this._scaleStretchyBase(a,b,c,d)},setLimitsScriptData:function(a,b,c,d,e,g){var h=this.templateParts,q=b[0],r=q.ascent(),s=b[2];b=b[1];var t=1,u=a.barHeight(),
v=0;this._scaleStretchyAccents(a,q,s,b);e&&(g?(v=q.belowXheight()?a.emToPx(a.renderer.fontAscent-a.renderer.fontXHeight):0,q.setMetrics({ascent:q.ascent()-v}),s.setDownShift(v)):(h[1].length=u,h[1].computeMetrics(),r+=u),r+=s.height()-v,t+=1);c&&!d&&(h[t].length=u,h[t].computeMetrics());this.computeMetrics();this.setAscent(r)}})})},"MW/equations/renderer/view/viewmodel/BoxUtils":function(){define(["dojo/_base/lang","./HBox","./HorizontalStretchyBox"],function(h,e,g){return{getAccentBox:function(d){return!d||
!(d instanceof e&&d.children&&1===d.children.length)?null:d.children[0]},getHorizontalStretchyAccentBox:function(d){if(!d||!(d instanceof e&&d.children&&1===d.children.length))return null;d=d.children[0];return d instanceof g?d:null}}})},"MW/rtc/model/io/MDocumentWriter":function(){define(["dojo/_base/lang","mw-log/Log","MW/rtc/model/CodeUtilities"],function(h,e,g){return{write:function(d){this._IN_CODE_BLOCK=0;this._IN_TITLE=1;this._IN_PARAGRAPH=2;this._BOLD_DELIMITER="*";this._ITALIC_DELIMITER=
"_";this._MONOSPACE_DELIMITER="|";this._ORDERED_LIST_DELIMITER="# ";this._UNORDERED_LIST_DELIMITER="* ";this._EQUATION_INLINE_DELIMITER="$";this._EQUATION_DISPLAY_DELIMITER="$$";this._HYPERLINK_START_DELIMITER="\x3c";this._HYPERLINK_END_DELIMITER="\x3e";this._insideTextBlock=this._IN_CODE_BLOCK;this._insideHyperlink=this._insideMonospace=this._insideItalic=this._insideBold=0;this._hasSectionBreak=!1;this._WRAPPED_COMMENT_LENGTH=75;var c="",b=null,a=d.getMaxLineNumber(),f;for(f=0;f<a;f+=1){var e=d.getLineNode(f);
b||(b="code"===this._getLineNodeFormat(e)?e:null);c+=this._getMTextForNode(e)}b&&this._checkIfLineNodeContainsFunction(b)&&(c=this._postProcessForFunctions(c));return c.replace(/\s+$/,"")},_checkIfLineNodeContainsFunction:function(d){return d.getText().match(/^(\s+)?function/)},_postProcessForFunctions:function(d){var c=[],b=[],a=!1;d.split("\n").forEach(function(f){0<f.length&&(this._isCommentOrSectionMarkup(f)&&!a?c.push(f):(b.push(f),a=!0))},this);return 0===c.length?d:this._insertTopLevelCommentInsideFunction(b,
c)},_insertTopLevelCommentInsideFunction:function(d,c){var b=g.extractFunctionName(d[0]);2<c[0].trim().length?c[0]=c[0].replace(/%%/,"%%"+b.toUpperCase()):(c[0]=c[0].replace(/%%/,"%"),c[0]+=b.trim().toUpperCase(),c[1]=c[1].replace(/%/,""),c[0]+=c[1],c.splice(1,1));var b=c.join("\n"),a=d[0]+"\n";d.shift();return a=a+(b+"\n")+d.join("\n")},_isCommentOrSectionMarkup:function(d){return d.match(/%/)||d.match(/%%/)},_getMTextForNode:function(d){switch(this._getLineNodeFormat(d)){case "title":return this._visitTitle(d);
case "heading":return this._visitTitle(d);case "text":return this._visitParagraph(d);case "code":return this._visitCode(d);case "ListParagraph":return this._visitListParagraph(d);case "sectionbreak":return this._hasSectionBreak=!0,"";case "tableofcontents":return"";case "codeexample":return this._visitCodeExampleBlock(d)}},_visitListParagraph:function(d){var c=this._continueTextBlock(),b="",a=this._UNORDERED_LIST_DELIMITER;"ordered"===d.type&&(a=this._ORDERED_LIST_DELIMITER);var f=this;d.children.forEach(function(c){c=
"% "+a+f._visitRichParagraph(c)+"\n";b+=f._wrapParagraph(c)});return c+b},_visitTitle:function(d){this._insideTextBlock=this._IN_TITLE;return"%% "+this._visitRichParagraph(d)+"\n"},_visitCode:function(d){var c="";this._insideTextBlock!==this._IN_CODE_BLOCK&&(c="\n");this._insideTextBlock===this._IN_PARAGRAPH&&(this._hasSectionBreak=!1);this._hasSectionBreak&&(c="%%\n",this._hasSectionBreak=!1);this._insideTextBlock=this._IN_CODE_BLOCK;d=d?d.getText():"";return c+d+"\n"},_visitParagraph:function(d){var c=
this._continueTextBlock();d=this._visitRichParagraph(d);return this._wrapParagraph(c+"% "+d+"\n")},_getLineNodeFormat:function(d){return"LineNode"===d.className?"code":d.hasOwnProperty("level")?1===d.level?"title":"heading":"ListParagraph"===d.className?"ListParagraph":"SectionBreak"===d.className?"sectionbreak":"TableOfContentsContainer"===d.className?"tableofcontents":"CodeExampleBlockNode"===d.className?"codeexample":"text"},_visitRichParagraph:function(d){var c=d.children,b="",a;for(a=0;a<c.length;a+=
1){var f=c[a],e="";if(this._isHyperLinkNode(f))var g=f.children[0],e=this._HYPERLINK_START_DELIMITER+f.hyperlink+" "+g.text,e=this._wrapInlineMarkup(e,g),e=e+this._HYPERLINK_END_DELIMITER;else this._isEquationNode(f)?(b=this._terminateMarkup(b),b.replace(/\s/g,"").length||(b=b.trim()),g=f.getDisplayStyle(),"ListItem"===d.className&&(g=!1),e+=this._wrapEquation(g,f.getTeXString())):(e+=f.text,e=this._wrapInlineMarkup(e,f));b+=e}return this._terminateMarkup(b)},_visitCodeExampleBlock:function(d){var c=
"%%\n% \n",b="%  ";"codeexample_matlab"===d.type&&(b="%   ");d.children.forEach(function(a){c+=b+a.getText()+"\n"});return c+"%\n"},_continueTextBlock:function(){return this._insideTextBlock===this._IN_CODE_BLOCK?(this._insideTextBlock=this._IN_PARAGRAPH,"%% \n"):this._insideTextBlock===this._IN_TITLE?(this._insideTextBlock=this._IN_PARAGRAPH,""):"% \n"},_wrapInlineMarkup:function(d,c){d=this._wrapMarkupAroundText(d,c,"bold");d=this._wrapMarkupAroundText(d,c,"italic");return d=this._wrapMarkupAroundText(d,
c,"monospace")},_wrapMarkupAroundText:function(d,c,b){var a,f;if("bold"===b)a="_insideBold",f=this._BOLD_DELIMITER;else if("italic"===b)a="_insideItalic",f=this._ITALIC_DELIMITER;else if("monospace"===b)a="_insideMonospace",f=this._MONOSPACE_DELIMITER;else if("hyperlink"===b)a="_insideHyperlink",f=this._HYPERLINK_START_DELIMITER;else return d;if(void 0!==c[b]&&null!==c[b]&&c[b]){if(0===this[a])return this[a]=1,f+d}else if(1===this[a])return this[a]=0,f+d;return d},_terminateMarkup:function(d){1===
this._insideBold&&(d+=this._BOLD_DELIMITER,this._insideBold=0);1===this._insideItalic&&(d+=this._ITALIC_DELIMITER,this._insideItalic=0);1===this._insideMonospace&&(d+=this._MONOSPACE_DELIMITER,this._insideMonospace=0);return d},_wrapParagraph:function(d){for(var c="",b="";0<d.length;){var a=this._WRAPPED_COMMENT_LENGTH,a=a<d.length?a+d.slice(a).match(/^\S*\s*/)[0].length:d.length,c=c+(b+d.slice(0,a));d=d.slice(a);b="\n% "}return c},_wrapEquation:function(d,c){c=c.split("\n").join("");return d?this._EQUATION_DISPLAY_DELIMITER+
c+this._EQUATION_DISPLAY_DELIMITER:this._EQUATION_INLINE_DELIMITER+c+this._EQUATION_INLINE_DELIMITER},_isHyperLinkNode:function(d){return"HyperlinkNode"===d.className},_isEquationNode:function(d){return"EquationNode"===d.className}}})},"MW/rtc/plugins/view/exporters/ViewBaseWriter":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class mw-log/Log MW/rtc/model/SelectionUtilities MW/rtc/model/PositionUtilities".split(" "),function(h,e,g,d,c,b){return e(null,{constructor:function(a){this._inheritedStyles=
"text-align line-height min-height white-space color font-family font-style font-size font-weight text-decoration white-space".split(" ");this._nonInheritedStyles=["margin-left","margin-top","margin-bottom","margin-right"]},switchToInlineView:function(a){var b=a.getAction("rtc_inline_view_no_animation");return b&&b.enabled?(a.executeAction("rtc_inline_view_no_animation"),!0):!1},write:function(a,b,c){this._internalDocument=a;this._embeddedOutputsView=c;this._reset();return b?this._writeSelection(b):
this._write()},_writeSelection:function(a){this._reset();var f=c.trimSelectionForMultipleContainer(a);this._startNode=f.getStartPosition().getNode().box;this._startPosInNode=f.getStartPosition().getOffset();this._endNode=f.getEndPosition().getNode().box;this._endPosInNode=f.getEndPosition().getOffset();f.fileEndSelected()?this._handleFileEndSelection(f.getEndPosition().getNode()):0!==b.comparePositions(f.getEndPosition(),a.getEndPosition())?this._extendSelectionForNonDocumentNodes(f.getEndPosition().getNode().rootContainer()):
0!==b.comparePositions(f.getStartPosition(),a.getStartPosition())&&this._extendSelectionForNonDocumentNodes(f.getStartPosition().getNode().rootContainer(),!0);this._target="clipboard";return this._write()},_extendSelectionForNonDocumentNodes:function(a,b){if(a.box){var c=b?a.box.previousElementSibling:a.box.nextElementSibling;if(c&&!c.rteNode){for(var d=c;d;)(d=b?c.firstChild:c.lastChild)&&(c=d);c&&(b?(this._startNode=c,this._startPosInNode=0):(this._endNode=c,this._endPosInNode=this._endNode.length))}}},
_handleFileEndSelection:function(a){if(a=a.rootContainer().box.nextElementSibling)this._endNode=a,this._endPosInNode=1},_reset:function(){this._startNode=null;this._startPosInNode=-1;this._endNode=null;this._endPosInNode=-1;this._target=""},_write:function(){this._writeBody();return this._writeOpening()+this._body+this._writeClosing()},_writeOpening:function(){return""},_writeClosing:function(){return""},_startNodeElement:function(a){d.assert("Subclasses must override _startNodeElement.");return!1},
_endNodeElement:function(a){d.assert("Subclasses must override _endNodeElement.")},_writeBody:function(){this._body="";this._parseTree()},_enterNode:function(a){if(this._isRootNode(a))return!1;if(!(a===this._endNode&&0===this._endPosInNode)&&!(a===this._startNode&&this._startPosInNode===a.rteNode.maxOffset()))return this._startNodeElement(a)},_leaveNode:function(a){this._isRootNode(a)||this._endNodeElement(a)},_enterTextNode:function(){},_enterAllParents:function(a){!this._isRootNode(a)&&!this._isRootNode(a.parentNode)&&
(this._enterAllParents(a.parentNode),this._enterNode(a.parentNode))},_leaveAllParents:function(a){this._isRootNode(a)||(this._leaveNode(a),this._leaveAllParents(a.parentNode))},_parseTree:function(){var a=this._startNode||this._internalDocument.root.box;this._enterAllParents(a);for(var b=!1;a;){"#text"===a.nodeName?(this._enterTextNode(a),b=!1):b=this._enterNode(a);if(a===this._endNode){this._leaveAllParents(a);break}if(!b&&a.firstChild)a=a.firstChild;else{if(a.nextSibling)"#text"!==a.nodeName&&this._leaveNode(a);
else{for(;!a.nextSibling&&!g.contains(a,"rootNode");)this._leaveNode(a),a=a.parentNode;if(this._isRootNode(a))break;this._leaveNode(a)}a=a.nextSibling}}},_isRootNode:function(a){return g.contains(a,"rootNode")},_writeTextNode:function(a){var b=0,c=0;h.some(a.childNodes,function(d){b=c;c=b+this._getNodeText(d).length;if(this._startNode===a)if(this._startPosInNode>=b&&this._startPosInNode<=c)b=this._startPosInNode;else if(this._startPosInNode>c)return!1;if(this._endNode===a)if(this._endPosInNode>=b&&
this._endPosInNode<=c)c=this._endPosInNode;else if(c>=this._endPosInNode)return!0;var e=this._getNodeText(a).substring(b,c);this._writeChildNodeForTextNode(e,d)},this)},_getNodeText:function(a){return a.textContent},_writeChildNodeForTextNode:function(a,b){}})})},"MW/rtc/plugins/view/exporters/HTMLOutputUtils":function(){define("dojo/_base/array dojo/dom-construct dojo/dom-style dojo/query MW/rtc/plugins/equations/equationcontroller/view/EquationViewUtilities dojo/text!MW/rtc/plugins/embeddedoutputs/outputhandlers/css/outputhandler.css dojo/text!MW/rtc/plugins/embeddedoutputs/view/css/errorOutput.css dojo/text!MW/rtc/plugins/embeddedoutputs/view/css/matrixOutput.css dojo/text!MW/rtc/plugins/embeddedoutputs/view/css/variableTableOutput.css dojo/text!MW/rtc/plugins/embeddedoutputs/view/css/symbolicOutput.css dojo/text!MW/rtc/plugins/embeddedoutputs/view/css/textOutput.css dojo/text!MW/rtc/plugins/embeddedoutputs/view/css/variableEditor.css dojo/text!MW/rtc/plugins/embeddedoutputs/view/css/variableOutput.css dojo/text!MW/rtc/plugins/embeddedoutputs/view/css/warningOutput.css dojo/text!MW/rtc/plugins/embeddedoutputs/view/inline/css/inlineoutput.css dojo/text!MW/rtc/plugins/language/matlab/alert/css/alertPlugin.css dojo/text!MW/rtc/plugins/language/matlab/diagnosticmessage/css/diagnosticMessage.css dojo/text!MW/rtc/plugins/view/exporters/ellipses.css".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u){return{_ELEMENT_NODE:1,writeOutputStyles:function(){var c;c=""+r;c+=l;c+=".embeddedOutputsSymbolicElement { overflow: initial !important;}\n.embeddedOutputsSymbolicElement { width: 100% !important; }\n";c+=n;c+=".embeddedOutputsTextElement,.embeddedOutputsVariableStringElement { max-height: none !important; overflow: initial !important;}\n";c+=p;c+=m;c+=".variableValue { width: 100% !important; }\n";c+=f;c+=".matrixElement { max-height: none !important; }\n";
c+=k;c+=s;c+=t;c+=q;c+=a;c+=b;c+=u;return c.replace(/\n/g,"").replace(/}/g,"}\n").replace(/.rtePane /g,"").replace(/.*rightPane.*\n/mg,"").replace(/.*alertPluginLayer.*\n/mg,"")},processOutput:function(a,b){var f=a.cloneNode(!0);this._convertToInlineStyles(f,a);b&&this._processInteractiveVariableOutput(f,a,b);this._replaceEquationsInOutput(f,a);f=this._removeDoNotExportsFromOutput(f);f=this._removeMATLABLinksFromOutput(f);this._updateFiguresInOutputs(f);return f=this._removeFigureWidgetsFromOutput(f)},
_processInteractiveVariableOutput:function(a,b,f){var c=a.children;h.forEach(c,function(a,d){var g=f.getOutputFromOutputDiv(b.children[d]);g&&g.getHTMLContent&&(g=g.getHTMLContent(c[d]),e.place(g,c[d].firstElementChild,"replace"))})},_removeDoNotExportsFromOutput:function(a){var b;b=d(".doNotExport",a);0<b.length&&(a=a.cloneNode(!0),b=d(".doNotExport",a),b.forEach(function(a){e.destroy(a)}));return a},_replaceEquationsInOutput:function(a,b){for(var f,g,k=d(".MathEquation",b),h=d(".MathEquation",a),
l=0;l<k.length;l+=1)f=c.exportDomnodeToImageURL(k[l],2),f.simpleEquation?h[l].firstChild.innerHTML=c.simpleEquationToHTML(f.simpleEquation):(g=e.create("span",{style:{verticalAlign:Math.round(f.verticalAlign)+"px"}},h[l].firstChild,"replace"),e.create("img",{src:f.dataURL,width:f.width/2,height:f.height/2},g))},_removeMATLABLinksFromOutput:function(a){var b=0,f,c=d("a",a);if(0<c.length){f=a.cloneNode(!0);c=d("a",f);for(b=0;b<c.length;b+=1)"matlab:"===c[b].href.substring(0,7)&&(a=document.createTextNode(c[b].textContent),
e.place(a,c[b],"replace"));return f}return a},_updateFiguresInOutputs:function(a){(a=d(".ImageView",a))&&0<a.length&&a.forEach(function(a){g.set(a,"height","auto");g.set(a.parentNode,"height","auto")})},_removeFigureWidgetsFromOutput:function(a){var b;b=d(".figureWidget",a);0<b.length&&(a=a.cloneNode(!0),b=d(".figureWidget",a),b.forEach(function(a){e.destroy(a)}));return a},_convertToInlineStyles:function(a,b){if(b.nodeType===this._ELEMENT_NODE){var f=g.getComputedStyle(b);a.style.whiteSpace=f.whiteSpace;
a.style.fontStyle=f.fontStyle;a.style.color=f.color;a.style.fontSize=f.fontSize;for(f=0;f<b.childNodes.length;f++)this._convertToInlineStyles(a.childNodes[f],b.childNodes[f])}}}})},"MW/rtc/plugins/cutcopypaste/InternalSerializationGeneratorProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/cutcopypaste/InternalSerializationGenerator"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.cutcopypaste.converter"]}},createInstance:function(d){return new g(d)}})})},
"MW/rtc/plugins/cutcopypaste/InternalSerializationGenerator":function(){define("dojo/_base/declare dojo/_base/lang MW/rtc/model/io/ContentSerializerVisitor MW/rtc/model/SelectionTreeWalker MW/rtc/nodes/inner/RootNode MW/rtc/plugins/cutcopypaste/MIMETypes".split(" "),function(h,e,g,d,c,b){return h(null,{constructor:function(a){a.registerNodeConverter(c,e.hitch(this,"_serializeSelection"))},_serializeSelection:function(a){var f=new g;(new d(f)).traverseSelection(a);a=f.getSerialized();return[{flavor:b.MATLAB_RICHTEXT,
content:JSON.stringify(a)}]}})})},"MW/rtc/model/io/ContentSerializerVisitor":function(){define(["dojo/_base/declare","MW/rtc/model/DocumentUtilities","MW/rtc/model/io/NodeVisitorInterface"],function(h,e,g){return h(g,{constructor:function(){this._content=[];this._contentStack=[]},enterInnerNode:function(d){this._contentStack.push(this._content);this._content=[]},visitLeafNode:function(d,c,b){d=d.serialize(!0);d.text=d.text.substring(c,b);this._content.push(d)},leaveInnerNode:function(d){var c=d.serialize(!0);
c.children=this._content;this._content=this._contentStack.pop();(0!==c.children.length||!e.isTextLevelContainer(d))&&this._content.push(c)},getSerialized:function(){return this._content}})})},"MW/rtc/plugins/cutcopypaste/PlainTextNodeConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/cutcopypaste/PlainTextNodeConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.cutcopypaste.converter"]}},createInstance:function(d){return new g(d)}})})},
"MW/rtc/plugins/cutcopypaste/PlainTextNodeConverter":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/nodes/leaf/PlainTextNode","MW/rtc/plugins/cutcopypaste/MIMETypes"],function(h,e,g,d){return h(null,{constructor:function(c){c.registerNodeConverter(g,e.hitch(this,"_convertPlainTextNode"))},_convertPlainTextNode:function(c){return!c.fileEndSelected()?[{flavor:d.MATLAB_RICHTEXT,content:void 0},{flavor:d.HTML,content:void 0}]:[]}})})},"MW/rtc/plugins/cutcopypaste/RTFGeneratorProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/cutcopypaste/RTFGenerator"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.cutcopypaste.converter","rtc.internaldocument"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/plugins/cutcopypaste/RTFGenerator":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/nodes/inner/RootNode","MW/rtc/plugins/cutcopypaste/MIMETypes","MW/rtc/plugins/view/exporters/RTFWriter"],function(h,e,g,d,c){return h(null,
{constructor:function(b,a){this._internalDocument=a;b.registerNodeConverter(g,e.hitch(this,"_convertToRTF"))},_convertToRTF:function(b){this._rtfWriter||(this._rtfWriter=new c);b=this._write(b);var a=[];b&&a.push({flavor:d.RTF,content:b});return a},_write:function(b){return this._rtfWriter.write(this._internalDocument,b)}})})},"MW/rtc/plugins/view/exporters/RTFWriter":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-style dojo/dom-class dojo/has dojo/query MW/rtc/misc/ImageURIUtilities MW/rtc/plugins/equations/equationcontroller/view/EquationViewUtilities MW/rtc/plugins/view/exporters/RTFFormatUtils MW/rtc/plugins/view/exporters/ViewBaseWriter".split(" "),
function(h,e,g,d,c,b,a,f,k,l){return e(l,{_PIX_TO_POINT_FACTOR:15,_MATLAB:"matlab:",_VE_SCALING_FACTOR:"10",_MULTIPLIER_SYMBOL:"\\'d7",constructor:function(a){},_reset:function(){this.colors=[];this._listNumber=this.numOfColors=0;this._listoverrides=this._lists="";this.inherited(arguments)},_writeFontTable:function(){return"{\\fonttbl{\\f0\\fswiss Helvetica;}{\\f1\\fmodern Courier;}}"},_handleFileEndSelection:function(a){var b=a.rootContainer();(a=b.box.nextSibling)||(a=b);for(b=a;b;)(b=a.lastChild)&&
(a=b);a&&(this._endNode=a,this._endPosInNode=this._endNode.length)},_writeColorTable:function(){var a="",b;this.colors.forEach(function(f){(b=f.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(,\s*\d?\.?\d+)?\)/))&&(a+="\\red"+parseInt(b[1],10)+"\\green"+parseInt(b[2],10)+"\\blue"+parseInt(b[3],10)+";")});return a?"\n{\\colortbl"+a+"}\n":""},_writeListTable:function(){if(""===this._lists)return"";var a;a="{\\*\\listtable"+this._lists;return a=a+"}\n"+("{\\*\\listoverridetable"+this._listoverrides+"}\n")},_addList:function(a,
b,f){var c;c="{\\list\\listtemplateid"+a+"\\listhybrid";c+="{\\listlevel";b?(c+="\\levelnfc0\\levelnfcn0\\leveljc0\\leveljcn0\\levelfollow0\\levelstartat1\\levelspace360\\levelindent0"+f,c+="{\\*\\levelmarker \\{decimal\\}.}",c+="{\\leveltext\\leveltemplateid"+a,c+="\\'02\\'00.;}",c+="{\\levelnumbers\\'01;}"):(c+="\\levelnfc23\\levelnfcn23\\leveljc0\\leveljcn0\\levelfollow0\\levelstartat1\\levelspace360\\levelindent0"+f,c+="{\\*\\levelmarker \\{disc\\}}",c+="{\\leveltext\\leveltemplateid"+a,c+="\\'01\\uc0\\u8226 ;}",
c+="{\\levelnumbers;}");c+="\\fi-360\\li720\\lin720 ";c+="}";c+="{\\listname ;}";c+="\\listid"+a;c+="}\n";this._lists+=c;this._listoverrides+="{\\listoverride\\listid"+a+"\\listoverridecount0\\ls"+a+"}"},_enterTextNode:function(a){d.contains(a.parentNode,"textWrapper")||this._writeText(a,a.textContent)},_writeOpening:function(){return"{\\rtf1\\ansi"+this._writeFontTable()+this._writeColorTable()+this._writeListTable()},_writeClosing:function(){return"}"},_openParagraph:function(a){a.rteNode&&a.rteNode.anchorId&&
(this._body+="{\\fcs1 {\\*\\bkmkstart internal:"+a.rteNode.anchorId+"}{\\*\\bkmkend internal:"+a.rteNode.anchorId+"}");this._body+="\\pard";this._setAlignment(a);a=g.getComputedStyle(a);this._body+="\\sb"+Math.max(parseInt(a.marginTop,10),0)*this._PIX_TO_POINT_FACTOR;this._body+="\\sa"+Math.max(parseInt(a.marginBottom,10),0)*this._PIX_TO_POINT_FACTOR;this._body+=" "},_setAlignment:function(a){a=g.getComputedStyle(a);this._body="center"===a.textAlign?this._body+"\\qc":"right"===a.textAlign?this._body+
"\\qr":this._body+"\\ql"},_openText:function(a){this._body+="\\plain";a=g.getComputedStyle(a);-1<a.fontFamily.indexOf("monospace")?this._body+="\\f1":this._body+="\\f0";this._body+="\\fs"+Math.round(1.5*parseInt(a.fontSize,10));var b=this.colors.indexOf(a.color);0>b&&(this.colors.push(a.color),b=this.colors.length-1);this._body+="\\cf"+b;"italic"===a.fontStyle&&(this._body+="\\i");if("bold"===a.fontWeight||"700"===a.fontWeight)this._body+="\\b";"underline"===a.textDecoration&&(this._body+="\\ul");
this._body+=" "},_writeText:function(a,b){var f=b?b:this._getNodeTextWithLineBreak(a),c=0,d;a===this._startNode&&this._startPosInNode&&(c=this._startPosInNode);a===this._endNode&&-1!==this._endPosInNode&&(d=this._endPosInNode);this._body+=k.getFormattedChars(f.substring(c,d))},_startNodeElement:function(a){if("div"===a.localName&&a.className&&(-1<a.className.indexOf("ToCHeading")||-1<a.className.indexOf("ToCItems")))return!1;"ul"===a.localName&&(this.listItemNumber=0,this._openList(a));"ol"===a.localName&&
(this._openList(a,!0),this.listItemNumber=1);"li"===a.localName&&(this.listItemNumber?(this._body+="{\\listtext   "+this.listItemNumber+"  }",this.listItemNumber+=1):this._body+="{\\listtext    \\'95    }",this._setAlignment(a));"br"===a.localName&&(this._body+="\\line ");"strong"===a.localName&&(this._body+="\\b ");if("div"===a.localName)return this._checkForOpenParagraph(a);if("h1"===a.localName||"h2"===a.localName)this._openParagraph(a);else if("a"===a.localName&&a.href.substring(0,7)!==this._MATLAB){var b=
0===a.href.indexOf("internal")?" \\\\l ":"";this._body+="{\\field{\\*\\fldinst{HYPERLINK "+b+'"'+a.href+'"}}{\\fldrslt{\\ul\\cf1 ';this._openText(a)}else{if("equationNode"===a.className)return this._writeEquationNode(a),!0;if("img"===a.localName)return this._body+=this._writeImage(a.src,a.clientWidth,a.clientHeight),!0;if(d.contains(a,"textBox"))return this._writeTextNode(a),!0}return!1},_writeChildNodeForTextNode:function(a,b){this._openText(b);this._body+=k.getFormattedChars(a)},_getNodeTextWithLineBreak:function(a){return a.innerText},
_endNodeElement:function(a){if(!("div"===a.localName&&a.className&&-1<a.className.indexOf("ToC"))){if(("div"===a.localName||"h1"===a.localName||"h2"===a.localName)&&!this._checkForCloseParagraph(a))this._body+="\\par\n";"li"===a.localName&&(this._body+=" \\f0\\\n");"a"===a.localName&&a.href.substring(0,7)!==this._MATLAB&&(this._body+="}}}");"strong"===a.localName&&(this._body+="\\b0 ")}},_checkForOpenParagraph:function(a){if(d.contains(a,"outputParagraph"))return!1;if(d.contains(a,"doNotExport"))return!0;
if(d.contains(a,"figureElement"))return this._writeFigureOutputElement(a),!0;if(d.contains(a,"matrixElement"))return this._writeMatrixOutputElement(a),!0;if(d.contains(a,"outputElement")||d.contains(a,"textElement")||d.contains(a,"variableElement")||d.contains(a,"diagnosticMessage-messagePart")||d.contains(a,"diagnosticMessage-stackPart"))return a.innerHTML?(this._openText(a),!1):!0;if(d.contains(a,"symbolicElement"))return this._writeSymbolicOutputElement(a),!0;if(d.contains(a,"lineNode"))return this._writeLineNode(a),
!1;if(d.contains(a,"inlineElement"))return this._body+="\\pard\\li255\\sb150\\sa340 ",!1;if(d.contains(a,"tableElement")&&this._embeddedOutputsView)return this._writeTableOutputElement(a),!0;if(d.contains(a,"diagnosticMessage-wrapper"))return this._writeDiagnosticOutputMessage(a),!1;if(d.contains(a,"MathEquation")||d.contains(a,"render-target"))return!0;if("liveControlOuterNode"===a.className)return this._writeLiveControlNode(a),!0;this._openParagraph(a);return!1},_checkForCloseParagraph:function(a){return d.contains(a,
"inlineWrapper")||d.contains(a,"CodeBlock")||d.contains(a,"symbolicElement")||d.contains(a,"variableElement")||d.contains(a,"matrixElement")||d.contains(a,"outputParagraph")||d.contains(a,"figureElement")||d.contains(a,"diagnosticMessage-wrapper")||d.contains(a,"SectionBlock")||d.contains(a,"textElement")||d.contains(a,"embeddedOutputsWarningElement")||d.contains(a,"tableElement")||d.contains(a,"liveControlOuterNode")||!a.innerHTML},_openList:function(a){var b=g.getComputedStyle(a),f="\\cf"+this._colorIndex(a)+
" ";this._listNumber+=1;this._addList(this._listNumber,"ol"===a.localName,f);this._body+="\\pard\\tx220\\tx720\\pardeftab720\\li720\\fi-720\\sa225\n";this._body+="\\ls"+this._listNumber+"\\ilvl0\\f0\\fs"+Math.round(1.5*parseInt(b.fontSize,10))},_colorIndexBg:function(a){a=g.getComputedStyle(a).backgroundColor;var b=this.colors.indexOf(a);0>b&&(this.colors.push(a),b=this.colors.length-1);return b},_colorIndex:function(a){a=g.getComputedStyle(a).color;var b=this.colors.indexOf(a);0>b&&(this.colors.push(a),
b=this.colors.length-1);return b},_writeDiagnosticOutputMessage:function(a){var b=this._colorIndex(a);this._body+="\\cf"+b+" ";this._openText(a)},_writeLineNode:function(a){a=this._colorIndexBg(a.parentNode.parentNode);this._body+="\\cbpat"+a+" "},_writeSymbolicOutputElement:function(a){var b=a.getElementsByClassName("embeddedOutputsVariableElement"),f="";b[0]&&"div"===b[0].localName&&(f="\\line   ");0<b.length&&(this._openText(b[0]),this._writeText(b[0]),this._body+=f);this._writeEquationNode(a)},
_writeMatrixOutputElement:function(a){var f=a.getElementsByClassName("variableNameElement");if(0<f.length){this._openText(f[0].firstChild);this._writeText(f[0].firstChild);f=this._embeddedOutputsView?this._embeddedOutputsView.getOutputFromOutputDiv(a.parentElement):null;this._writeNodeContent(a,"veVariableValueSummary");if(f&&f.getFocusedView){if(f=b(".veViewportSummary",a),0<f.length&&!d.contains(f[0],"hide")&&(this._body+="{    ",h.forEach(f[0].children,function(a){this._openAndWrite(a)},this),
this._body+="}"),this._body+="\\line ",(f=a.getElementsByClassName("veScalingFactor")[0])&&!d.contains(f,"hide"))this._body+=this._VE_SCALING_FACTOR,f=f.getElementsByClassName("scaleExponent")[0],this._body+="{\\super "+f.textContent+"}\\fs21"+this._MULTIPLIER_SYMBOL+" \\line "}else this._body+="\\line ";this._writeNodeContent(a,"variableValue")}},_writeTableOutputElement:function(a){this._writeNodeContent(a,"summaryBarVarName");this._body+=" ";this._writeNodeContent(a,"summaryBarSize");this._body+=
" ";this._writeNodeContent(a,"summaryBarType");this._body+=" ";this._body+="\\par\n\\pard ";this._openText(a);a=this._embeddedOutputsView.getOutputFromOutputDiv(a.parentElement);this._body+="{"+a.getRTFContent()+"}"},_writeNodeContent:function(a,b){var f=a.getElementsByClassName(b);f&&0<f.length&&this._openAndWrite(f[0])},_openAndWrite:function(a){this._openText(a);this._writeText(a)},_writeFigureOutputElement:function(a){a=a.getElementsByClassName("figureImage");0<a.length&&(this._body+=this._writeImage(a[0].src,
a[0].clientWidth,a[0].clientHeight))},_writeEquationNode:function(a){if(c("ie"))return"";a=f.exportDomnodeToImageURL(a,2);this._body+=this._writeImage(a.dataURL,a.width,a.height,2,a.verticalAlign*this._PIX_TO_POINT_FACTOR)},_writeImage:function(b,f,c,d,e){var g="";b=a.getHexBinaryFromURI(b);if(!b)return g;d||(d=1);var k="pngblip";if("jpg"===b.format||"jpeg"===b.format)k="jpegblip";g=g+("{\\pict\\"+k)+("\\picw"+f);g+="\\pich"+c;g+="\\picwgoal"+Math.round(f*this._PIX_TO_POINT_FACTOR/d);g+="\\pichgoal"+
Math.round(c*this._PIX_TO_POINT_FACTOR/d);0>e&&(g+="\\dn"+Math.round(e/-10));g+="\n";g+=b.hexData;return g+="}"},_writeLiveControlNode:function(a){a=a.getElementsByClassName("liveControlTextView")[0];this._writeTextNode(a)}})})},"MW/rtc/plugins/view/exporters/RTFFormatUtils":function(){define(["dojo/_base/declare"],function(h){return{getFormattedChars:function(e){for(var g="",d=0,c="",b=0,d=0;d<e.length;d+=1){c=e[d];b=e.charCodeAt(d);switch(c){case "\\":c="\\\\";break;case "{":c="\\{";break;case "}":c=
"\\}";break;case "\n":c="\\line "}g=127>b?g+c:g+("\\u"+b+"?")}return g}}})},"MW/rtc/plugins/datatip/DataTipProvider":function(){define(["dojo/_base/declare","MW/rtc/datamodel/FileBackingStoreUtilities","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/datatip/DataTip"],function(h,e,g,d){return h(g,{isApplicable:function(c){return e.isPlainCodeFile(c)},requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:"rtc.internaldocument rtc.view rtc.editordataservice rtc.outputhandlerservice rtc.functionservice rtc.preferences.service rtc.actionservice rtc.document matlab.tokens rtc.domnode matlab.code.mtree.codeblocks debug.documentdebugservices rtc.linenumberservice".split(" ")}},
createInstance:function(c,b,a,f,e,g,h,p,m,q,r,s,t){return new d(c,b,a,f,e,g,h,p,m,q,r,s,t)}})})},"MW/rtc/plugins/datatip/DataTip":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class dojo/on MW/rtc/plugins/datatip/DataTipUtilities MW/rtc/plugins/debug/DebugServicesFactory MW/rtc/plugins/language/matlab/syntax/mtree/codeblocks/BlockType MW/rtc/plugins/tooltip/HoverableTooltipPlugin MW/rtc/preferences/PreferenceKeysEnum".split(" "),function(h,e,g,d,c,b,a,f,k,l){return h(k,
{_MATRIX_MAX_COLUMN:5,_SCROLLABLE_CLASSNAME:"scrollableOutput",_DATATIP_CSS_CLASS:"rtcDataTipElement",_DO_NOT_SHOW_TOOLTIP:void 0,_DATATIP_ACTION_ID:"rtc_datatips",_TIMEOUT_VALUE:11E3,_CANCEL_REASON:"DatatipCancel",_ADDITIONAL_RIGHT_PADDING:"rtcDataTipElementRightPadding",constructor:function(a,b,f,c,d,k,h,l,v,w,x,A,B){this._internalDocument=a;this._view=b;this._editorDataService=f;this._outputHandlerService=c;this._functionService=d;this._preferencesService=k;this._actionService=h;this._document=
l;this._tokenService=v;this._domNode=w;this._codeBlockService=x;this._documentDebugServices=A;this._lineNumberService=B;this._showDataTips=!0;a=[{id:this._DATATIP_ACTION_ID,enabled:!0,selected:!0,callback:e.hitch(this,"_onActionChange")}];this._actionService.loadActions(a);this.own(g.after(this._actionService,"onActionChange",e.hitch(this,"_onActionChange"),!0));this.own(g.after(this._documentDebugServices,"onStackChanged",e.hitch(this,"_handleStackChanged")));this._currentWorkspace=null},_handleStackChanged:function(){this._currentWorkspace=
this._documentDebugServices.getActiveWorkspace()},_onActionChange:function(a){a.id===this._DATATIP_ACTION_ID&&(this._showDataTips=a.newValue)},priority:function(){return 4},getTooltipContent:function(a,f,c){this._latestPromise&&(this._latestPromise.cancel(this._CANCEL_REASON),this._latestPromise=null);if(this._isPreferenceDisabled())c(this._DO_NOT_SHOW_TOOLTIP);else{var d=this._tokenService.getTokensData().tokens,g=b.getValidIdentifierTill(f,this._document,this._internalDocument,d);if(g)if(d=this._isDebugging(),
f=f.getLineColumn().line,d){var k=this._lineNumberService.getCodeLineNumberFromLineNumber(f-1);this._codeBlockService.whenSynchronized(e.hitch(this,function(){this._isHoveringInCurrentWorkspace(k)?this._requestDatatip(g,a,c):c(this._DO_NOT_SHOW_TOOLTIP)}))}else this._isInsideFunction(f)?c(this._DO_NOT_SHOW_TOOLTIP):this._requestDatatip(g,a,c);else c(this._DO_NOT_SHOW_TOOLTIP)}},_requestDatatip:function(a,b,f){this._latestPromise=this._editorDataService.request("rtc.datatip",{variablename:a.trim()},
this._TIMEOUT_VALUE);a=e.hitch(this,"_updateDataTip",b,f);f=e.hitch(this,"_errorCallback",f);this._latestPromise.then(a,f)},_isPreferenceDisabled:function(){return!this._preferencesService.getValue(l.DATATIP,!0)||!this._showDataTips},_updateDataTip:function(a,f,e){if(e=e.result){var g={};"matrix"===e.type&&(g.createPromptController=!1,g.maxColumns=this._MATRIX_MAX_COLUMN);e.outputData.isPreview=!0;(e=this._outputHandlerService.handleRawOutput(e,g))?(e=e.getOutput(),e.isReady()?(g=e.getDomElement(),
e.startup(),a=b.createTooltipDiv(this._view,g,a,this._DATATIP_CSS_CLASS,this._domNode),f(a,!0),a&&(c(a,"mouseover",function(a){a.stopPropagation()}),d.add(a,this._SCROLLABLE_CLASSNAME),a.scrollHeight>a.clientHeight&&d.add(a,this._ADDITIONAL_RIGHT_PADDING))):f(this._DO_NOT_SHOW_TOOLTIP)):f(this._DO_NOT_SHOW_TOOLTIP)}else f(this._DO_NOT_SHOW_TOOLTIP)},_errorCallback:function(a,b){b!==this._CANCEL_REASON&&a(void 0)},_isInsideFunction:function(a){return this._functionService.isLineInFunction(a)},_isDebugging:function(){return a.getInstance().isDebugging},
_isHoveringInCurrentWorkspace:function(a){var b;this._currentWorkspace&&(b=this._codeBlockService.getInnermostBlockOfType(this._currentWorkspace.getLineNumber(),f.FUNCTION_DEFINITION));a=this._codeBlockService.getInnermostBlockOfType(a,f.FUNCTION_DEFINITION);return!b||!a?b===a:b.id===a.id},onTooltipClose:function(){}})})},"MW/rtc/plugins/datatip/DataTipUtilities":function(){define(["dojo/dom-construct","MW/rtc/model/DocumentUtilities","MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenUtilities"],
function(h,e,g){return{_TOOLTIP_PADDING:20,_TOOLTIP_MAX_WIDTH:700,_TOOLTIP_MAX_HEIGHT:500,__DATATIP_TO_VIEWPORT_DIMENSION_RATIO:0.7,getValidIdentifierTill:function(d,c,b,a){c=this._getIdentifierTill(d,c,b);if(!c)return"";d=d.getLineColumn().line-1;b=c.text;return this._isInvalidIdentifier(b,c.startColumn,c.endColumn,d,a)?"":b},_getIdentifierTill:function(d,c,b){d=e.getWordAtPosition(b,d);if(!d||!d.text||this._isInvalidVariableName(d,c))return null;var a=d.text,f=d.startLineCol.column,g=d.endLineCol.column,
h=d.startLineCol.line,n;0!==f&&(n=this._getCharAtLocation(c,h,f-1));if("."===n){if(1>=f)return null;f=b.getPositionForLineColumn(h+1,f-1);c=this._getIdentifierTill(f,c,b);if(!c)return null;c=c.text+"."+a;g=d.endLineCol.column;f=g-c.length}else c=a;return{text:c,startColumn:f,endColumn:g}},_isInvalidVariableName:function(d,c){var b=d.startLineCol.line,a=d.startLineCol.column;return 1>=a?!1:"."===this._getCharAtLocation(c,b,a-1)&&"."===this._getCharAtLocation(c,b,a-2)},_getCharAtLocation:function(d,
c,b){return d.getTextCharacters(c,b,1)},_isInvalidIdentifier:function(d,c,b,a,f){d=g.getMatchingTokenInLine(f[a],c,b);return!d?!1:g.isCommentToken(d)||g.isMatlabStringToken(d)?!0:!1},createTooltipDiv:function(d,c,b,a,f){var e=null,g=d.getDomTargetPosition();if(!d.getDomtarget().contains(b.box))return e;d=d.getCoordinateForNode(b);b=d.y-g.scrollTop;g=Math.min(this._TOOLTIP_MAX_HEIGHT,0.7*Math.max(b,g.clientHeight-(b+d.height)))-this._TOOLTIP_PADDING;f=Math.min(this._TOOLTIP_MAX_WIDTH,0.7*f.clientWidth)-
this._TOOLTIP_PADDING;return e=h.create("div",{innerHTML:c.outerHTML?c.outerHTML:c,className:a,style:{"max-height":g+"px","max-width":f+"px"}})}}})},"MW/rtc/plugins/language/matlab/syntax/mtree/codeblocks/BlockType":function(){define("MW/rtc/plugins/language/matlab/syntax/mtree/nodes/BlockCommentMTreeNode MW/rtc/plugins/language/matlab/syntax/mtree/nodes/ClassdefMTreeNode MW/rtc/plugins/language/matlab/syntax/mtree/nodes/ClassdefSectionMTreeNode MW/rtc/plugins/language/matlab/syntax/mtree/nodes/ForMTreeNode MW/rtc/plugins/language/matlab/syntax/mtree/nodes/FunctionDeclarationMTreeNode MW/rtc/plugins/language/matlab/syntax/mtree/nodes/IfMTreeNode MW/rtc/plugins/language/matlab/syntax/mtree/nodes/StatementMTreeNode MW/rtc/plugins/language/matlab/syntax/mtree/nodes/SwitchMTreeNode MW/rtc/plugins/language/matlab/syntax/mtree/nodes/WhileMTreeNode".split(" "),
function(h,e,g,d,c,b,a,f,k){return{BLOCK_COMMENT:"blockcomment",CLASS_DEFINITION:"class",CLASS_SECTION:"classsection",FOR_LOOP:"for",FUNCTION_DEFINITION:"function",IF_STATEMENT:"if",STATEMENT:"statement",SWITCH:"switch",WHILE_LOOP:"while",getBlockTypeForNode:function(l){var n=null;l instanceof h?n=this.BLOCK_COMMENT:l instanceof e?n=this.CLASS_DEFINITION:l instanceof g?n=this.CLASS_SECTION:l instanceof d?n=this.FOR_LOOP:l instanceof c?n=this.FUNCTION_DEFINITION:l instanceof b?n=this.IF_STATEMENT:
l instanceof a?n=this.STATEMENT:l instanceof f?n=this.SWITCH:l instanceof k&&(n=this.WHILE_LOOP);return n}}})},"MW/rtc/plugins/language/matlab/syntax/mtree/nodes/BlockCommentMTreeNode":function(){define(["dojo/_base/declare","./MTreeNode"],function(h,e){return h(e,{})})},"MW/rtc/plugins/language/matlab/syntax/mtree/nodes/MTreeNode":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(e,g){this._data=e;this._children=g;this._parent=null;this._children&&this._children.forEach(function(d){d._parent=
this},this)},getParent:function(){return this._parent},getChildren:function(){return this._children},getAllChildren:function(){return this.getChildren()},getStartLine:function(){return this._data.startLine},getStartColumn:function(){return this._data.startColumn},getEndLine:function(){return this._data.endLine},getEndColumn:function(){return this._data.endColumn}})})},"MW/rtc/plugins/language/matlab/syntax/mtree/nodes/ClassdefMTreeNode":function(){define(["dojo/_base/declare","./MTreeNode"],function(h,
e){return h(e,{})})},"MW/rtc/plugins/language/matlab/syntax/mtree/nodes/ClassdefSectionMTreeNode":function(){define(["dojo/_base/declare","./MTreeNode"],function(h,e){return h(e,{})})},"MW/rtc/plugins/language/matlab/syntax/mtree/nodes/ForMTreeNode":function(){define(["dojo/_base/declare","./MTreeNode"],function(h,e){return h(e,{})})},"MW/rtc/plugins/language/matlab/syntax/mtree/nodes/FunctionDeclarationMTreeNode":function(){define(["dojo/_base/declare","./MTreeNode","./FunctionIdentifierMTreeNode",
"./VariableMTreeNode"],function(h,e,g,d){return h(e,{constructor:function(c,b){this._functionName=new g(this._data.functionName);this._functionInputArguments=this._convertFunctionArguments(this._data.functionInputArguments);this._functionOutputArguments=this._convertFunctionArguments(this._data.functionOutputArguments)},_convertFunctionArguments:function(c){return c.map(function(b){return new d(b)})},getAllChildren:function(){return[].concat(this.getFunctionName(),this.getFunctionInputArguments(),
this.getFunctionOutputArguments(),this.getChildren())},getFunctionName:function(){return this._functionName},getFunctionInputArguments:function(){return this._functionInputArguments},getFunctionOutputArguments:function(){return this._functionOutputArguments}})})},"MW/rtc/plugins/language/matlab/syntax/mtree/nodes/FunctionIdentifierMTreeNode":function(){define(["dojo/_base/declare","./IdentifierMTreeNode"],function(h,e){return h(e,{isUsedCrossFunctions:function(){return this._data.isUsedCrossFunctions},
isPersistent:function(){return this._data.isPersistent},isGlobal:function(){return this._data.isGlobal}})})},"MW/rtc/plugins/language/matlab/syntax/mtree/nodes/IdentifierMTreeNode":function(){define(["dojo/_base/declare","./MTreeNode"],function(h,e){return h(e,{getText:function(){return this._data.text},getSymbolTableIndex:function(){return this._data.symbolTableIndex}})})},"MW/rtc/plugins/language/matlab/syntax/mtree/nodes/VariableMTreeNode":function(){define(["dojo/_base/declare","./IdentifierMTreeNode"],
function(h,e){return h(e,{isUsedCrossFunctions:function(){return this._data.isUsedCrossFunctions},isPersistent:function(){return this._data.isPersistent},isGlobal:function(){return this._data.isGlobal},isAssignment:function(){return this._data.isAssignment}})})},"MW/rtc/plugins/language/matlab/syntax/mtree/nodes/IfMTreeNode":function(){define(["dojo/_base/declare","./MTreeNode"],function(h,e){return h(e,{})})},"MW/rtc/plugins/language/matlab/syntax/mtree/nodes/StatementMTreeNode":function(){define(["dojo/_base/declare",
"./MTreeNode"],function(h,e){return h(e,{})})},"MW/rtc/plugins/language/matlab/syntax/mtree/nodes/SwitchMTreeNode":function(){define(["dojo/_base/declare","./MTreeNode"],function(h,e){return h(e,{})})},"MW/rtc/plugins/language/matlab/syntax/mtree/nodes/WhileMTreeNode":function(){define(["dojo/_base/declare","./MTreeNode"],function(h,e){return h(e,{})})},"MW/rtc/plugins/tooltip/HoverableTooltipPlugin":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,e){return h(e,
{priority:function(){throw Error("Unimplemented API: MW.rtc.plugins.tooltip.HoverableTooltipPlugin.priority");},getTooltipContent:function(e,d,c){throw Error("Unimplemented API: MW.rtc.plugins.tooltip.HoverableTooltipPlugin.getTooltipContent");}})})},"MW/rtc/preferences/PreferenceKeysEnum":function(){define([],function(){return{CODE_ANALYZER_DISPLAY:"Editormlint-display",CODE_ANALYZER_UNDERLINING:"Editormlint-underlining",DATATIP:"LiveEditorDataTips",INDENTING:"EditorMFunctionIndentType"}})},"MW/rtc/plugins/draganddrop/DragAndDropProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/draganddrop/DragAndDrop"],function(h,e,g){return h(e,{requires:function(){return{createInstance:"rtc.document rtc.cursor rtc.focusservice rtc.cutcopypaste.converter rtc.draganddropnotifier rtc.view rtc.internaldocument rtc.divselection rtc.cursorcontroller".split(" ")}},createInstance:function(d,c,b,a,f,e,h,n,p){return new g(d,c,b,a,f,e,h,n,p)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/draganddrop/DragAndDrop":function(){define("dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/aspect dojo/has dojo/on MW/rtc/model/CodeUtilities MW/rtc/plugins/cutcopypaste/MIMETypes".split(" "),
function(h,e,g,d,c,b,a,f){return h(null,{_COPY_MOVE_EFFECT:"copyMove",_COPY_EFFECT:"copy",_NO_EFFECT:"none",_MOUSE_DOWN:"mouseDown",_TEXT_MIMETYPE_FOR_IE:"text",constructor:function(a,b,f,c,e,h,r,s,t){this._document=a;this._focusService=f;this._cursor=b;this._converter=c;this._view=h;this._internalDocument=r;this._divSelection=s;this._cursorController=t;this._connections=[];this._draggedTextInfo=null;this._connections.push(d.after(e,"onDragEnter",g.hitch(this,"_handleDragEnter"),!0));this._connections.push(d.after(e,
"onDragOver",g.hitch(this,"_handleDragOver"),!0));this._connections.push(d.after(e,"onDragLeave",g.hitch(this,"_handleDragLeave"),!0));this._connections.push(d.after(e,"onDrop",g.hitch(this,"_handleDrop"),!0));this._view.setDraggable(!0);this._connections.push(d.after(e,"onDragStart",g.hitch(this,"_handleDragStart"),!0));this._connections.push(d.after(e,"onDragEnd",g.hitch(this,"_handleDragEnd"),!0))},_handleDragEnter:function(a){this._focusService.setFocus();this._cursorController.clearSelection();
this._handleDragOver(a)},_handleDragOver:function(a){this._cursorController.setCursorToEvent(a);this._cursor.isCursorReadOnly()&&(a.dataTransfer.dropEffect=this._NO_EFFECT)},_handleDragLeave:function(a){this._cursor.isCursorReadOnly()&&(a.dataTransfer.dropEffect=this._NO_EFFECT)},_handleDragStart:function(a){this._cursorController.hasSelection()&&("function"===typeof a.dataTransfer.setDragImage&&a.dataTransfer.setDragImage(this._getDragImage(),0,0),this._draggedTextInfo={coordinates:this._cursorController.getSelectionLineColumn()},
this._draggedTextInfo.selectionInfo=this._cursorController.getSelection(),a.dataTransfer.effectAllowed=this._COPY_MOVE_EFFECT,this._draggedTextInfo.operation=this._COPY_MOVE_EFFECT,c("mac")?a.altKey&&(!a.metaKey&&!a.shiftKey&&!a.ctrlKey)&&(a.dataTransfer.effectAllowed=this._COPY_EFFECT,this._draggedTextInfo.operation=this._COPY_EFFECT):a.ctrlKey&&(!a.altKey&&!a.shiftKey)&&(a.dataTransfer.effectAllowed=this._COPY_EFFECT,this._draggedTextInfo.operation=this._COPY_EFFECT),this._cursor.isCursorReadOnly()&&
(this._draggedTextInfo.operation=this._COPY_EFFECT,a.dataTransfer.effectAllowed=this._COPY_EFFECT),this._divSelection.lockSelection(),this._setDataTransferObject(a))},_setDataTransferObject:function(a){var b=this._converter.convertToClipboard(this._cursorController.getSelection());b.some(function(a){if(a.flavor===f.MATLAB_RICHTEXT)return this._draggedTextInfo.flavor_content=a.content,!0},this);try{b.forEach(function(b){a.dataTransfer.setData(b.flavor,b.content)},this)}catch(c){a.dataTransfer.setData(this._TEXT_MIMETYPE_FOR_IE,
this._cursorController.selectedText())}},_handleDrop:function(a){if(this._cursor.isCursorReadOnly())e.stop(a),a.preventDefault();else{this._document.startEdit();if(this._draggedTextInfo){var b=this._draggedTextInfo.flavor_content;this._divSelection.unlockSelection();this._cursorController.clearSelection();this._draggedTextInfo.operation===this._COPY_MOVE_EFFECT&&this._deleteSelectedText();this._draggedTextInfo=null}var c=g.hitch(this,function(c){try{return c===f.MATLAB_RICHTEXT&&!a.dataTransfer.getData(c)&&
b?b:a.dataTransfer.getData(c)}catch(d){if(b)return b;if(c===f.TEXT)return a.dataTransfer.getData(this._TEXT_MIMETYPE_FOR_IE)}});(c=this._converter.convertContentFromSource(c))&&this._document.insertContentAtCurrentPosition(c);this._document.endEdit()}},_handleDragEnd:function(a){this._draggedTextInfo&&(this._divSelection.unlockSelection(),this._rePaintSelectedText(),this._draggedTextInfo=null)},_deleteSelectedText:function(){this._draggedTextInfo.coordinates.forEach(function(a){var b=a.start;a=a.end;
b.line>a.line?this._document.deleteText(a.line,a.column,b.line,b.column):b.line===a.line&&b.column>a.column?this._document.deleteText(b.line,a.column,a.line,b.column):this._document.deleteText(b.line,b.column,a.line,a.column)},this)},_rePaintSelectedText:function(){this._cursorController.setSelection(this._draggedTextInfo.selectionInfo)},_getDragImage:function(){if(!this._invisibleDragImage){var a=document.createElement("img");a.src="";a.style.display="none";this._invisibleDragImage=a}return this._invisibleDragImage},
destroy:function(){this._view.setDraggable(!1);this._connections.forEach(function(a){a.remove()})}})})},"MW/rtc/plugins/draganddrop/DragAndDropNotifierProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/draganddrop/DragAndDropEventNotifier"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.view"]}},createInstance:function(d){d=d.getDomtarget();return new g(d,d)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/draganddrop/DragAndDropEventNotifier":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/on"],function(h,e,g){return h(null,{constructor:function(d,c){this._isDragging=!1;this._dndEventListeners=[];this._dndEventListeners.push(g(d,"dragenter",e.hitch(this,"_handleDragEnter")));this._dndEventListeners.push(g(d,"dragleave",e.hitch(this,"_handleDragLeave")));this._dndEventListeners.push(g(d,"dragover",e.hitch(this,"_handleDragOver")));this._dndEventListeners.push(g(c,"dragstart",e.hitch(this,"_handleDragStart")));this._dndEventListeners.push(g(c,"dragend",e.hitch(this,
"_handleDragEnd")));this._dndEventListeners.push(g(d,"drop",e.hitch(this,"_handleDrop")))},_handleDragEnter:function(d){this._isDragging||(this._isDragging=!0,this.onDragEnter(d));d.preventDefault()},_handleDragLeave:function(d){d.preventDefault();this.onDragLeave(d)},_handleDragOver:function(d){d.preventDefault();this.onDragOver(d)},_handleDragEnd:function(d){this._isDragging=!1;d.preventDefault();this.onDragEnd(d)},_handleDragStart:function(d){this.onDragStart(d)},_handleDrop:function(d){this._isDragging=
!1;d.preventDefault();this.onDrop(d)},onDragEnter:function(d){},onDragLeave:function(d){},onDragOver:function(d){},onDragStart:function(d){},onDragEnd:function(d){},onDrop:function(d){},destroy:function(){this._dndEventListeners.forEach(function(d){d.remove()})}})})},"MW/rtc/plugins/debug/breadcrumbstack/BreadcrumbStackProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/debug/breadcrumbstack/BreadcrumbStack"],function(h,e,g){return h(e,{requires:function(){return{createInstance:"rtc.featureinterface rtc.view rtc.bordercontainer rtc.focusservice rtc.actionservice debug.control".split(" ")}},
createInstance:function(d,c,b,a,f,e){return new g(d,c,b,a,f,e)}})})},"MW/rtc/plugins/debug/breadcrumbstack/BreadcrumbStack":function(){define("dojo/aspect dojo/_base/declare dojo/_base/lang MW/rtc/abstract/AbstractPlugin MW/rtc/plugins/debug/DebugServicesFactory MW/rtc/plugins/debug/PersistentStackModelFactory ./BreadcrumbStackView".split(" "),function(h,e,g,d,c,b,a){return e(d,{constructor:function(f,d,e,n,p,m){this._featureInterface=f;this._view=d;this._borderContainer=e;this._focusService=n;this._actionService=
p;this._debuggerManager=m;this._aspectHandles=[];this._debugServices=c.getInstance();this._persistentStackModel=b.getInstance();f=g.hitch(this,"_changeWorkspace");d=g.hitch(this,"_stepOut");this._view=new a(this._persistentStackModel,this._featureInterface,this._view,this._borderContainer,this._focusService,this._actionService,this._debuggerManager,f,d);this.own(this._view);this.own(h.after(this._debugServices,"onDebugModeChanged",g.hitch(this,"_handleOnDebugMode"),!0));this.own(h.after(this._debugServices,
"onDBCont",g.hitch(this,"_handleOnDBCont"),!0))},_handleOnDebugMode:function(a){a||this._view.hideStackBar()},_handleOnDBCont:function(){this._view.disable()},_changeWorkspace:function(a){a-=this._persistentStackModel.getActiveWorkspaceIndex();this._debugServices.dbUpDown(a)},_stepOut:function(){this._debugServices.debugStepOut()}})})},"MW/rtc/plugins/debug/PersistentStackModelFactory":function(){define(["MW/rtc/plugins/debug/PersistentStackModel"],function(h){var e=null;return{getInstance:function(){null===
e&&(e=new h);return e}}})},"MW/rtc/plugins/debug/PersistentStackModel":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/plugins/debug/DebugServicesFactory MW/rtc/plugins/debug/DebugStackFrame mw-utils/Utils ./PersistentStackModelUpdateEvent".split(" "),function(h,e,g,d,c,b,a,f){return h(d,{constructor:function(){this._debugServices=c.getInstance();this._stackFrames=[];this.own(g.after(this._debugServices,"onStackChanged",e.hitch(this,"_handleStackChanged"),
!0));this._debugServices.requestStackState()},getStackFrames:function(){return this._stackFrames},getExecutionPoint:function(){for(var a=0;a<this._stackFrames.length;a+=1){var b=this._stackFrames[a];if(b.isExecutionPoint())return b}return null},getActiveWorkspaceIndex:function(){for(var a=0;a<this._stackFrames.length;a+=1)if(this._stackFrames[a].isActiveWorkspace())return a;return-1},hasStack:function(){return 0!==this._stackFrames.length&&-1!==this.getActiveWorkspaceIndex()},getStackDepth:function(){return this._stackFrames.length},
onModelUpdated:function(a){},_handleStackChanged:function(a,f){var c=a.map(function(a,c){var d=0===c,e=c===f,g=a.getLineNumber(),k=0>g;k&&(g*=-1);return new b(a.getName(),a.getFullPath(),g,d,e,k)},this),d=this._createStackUpdatedEvent(c,f);this._stackFrames=c;this.onModelUpdated(d)},_createStackUpdatedEvent:function(b,c){var d=b.map(function(a){return a.getName()}),e=this._stackFrames.map(function(a){return a.getName()}),d=!a.arrayEquals(d,e),e=this.getActiveWorkspaceIndex();return new f(d,c!==e)}})})},
"MW/rtc/plugins/debug/DebugStackFrame":function(){define(["dojo/_base/declare","MW/rtc/plugins/debug/StackFrame"],function(h,e){return h(e,{constructor:function(e,d,c,b,a,f){this._name=e;this._fullPath=d;this._lineNumber=c;this._isExecutionPoint=b;this._isActiveWorkspace=a;this._isLeavingFrame=f},isExecutionPoint:function(){return this._isExecutionPoint},isActiveWorkspace:function(){return this._isActiveWorkspace},isLeavingFrame:function(){return this._isLeavingFrame}})})},"MW/rtc/plugins/debug/PersistentStackModelUpdateEvent":function(){define(["dojo/_base/declare"],
function(h){return h(null,{constructor:function(e,g){this._hasStackChange=e;this._hasWorkspaceChange=g},hasStackChange:function(){return this._hasStackChange},hasWorkspaceChange:function(){return this._hasWorkspaceChange}})})},"MW/rtc/plugins/debug/breadcrumbstack/BreadcrumbStackView":function(){define("dijit/Destroyable dijit/layout/ContentPane dijit/Tooltip dojo/_base/declare dojo/_base/fx dojo/_base/lang dojo/aspect dojo/dom-construct dojo/dom-class dojo/dom-style dojo/fx/easing dojo/i18n!l10n/nls/breadcrumbStack dojo/on dojo/query dojo/string mw-log/Log mw-menu/ContextMenu mw-menu/MenuItem mw-navigationbar/NavigationBar MW/rtc/plugins/descriptivetooltip/DescriptiveTooltip MW/rtc/plugins/descriptivetooltip/DescriptiveTooltipUtilities MW/uiframework/FocusManager".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A){return d(h,{_OVERFLOW_TOLERANCE:2,_TOP_REGION:"top",_BREADCRUMB_BAR_TRAY_ANIM_DURATION:500,_TRAY_MAX_HEIGHT:30,_TRAY_MIN_HEIGHT:1,_TRAY_STATES:{HIDDEN:0,APPEARING:1,VISIBLE:2,DISAPPEARING:3},_FUNCTION_NAME_REGEX:/[A-Za-z0-9_]+$/,_FUNCTION_HANDLE_REGEX:/^@\(/,_BLANK_IMAGE:"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw\x3d\x3d",_BREADCRUMB_BAR_TRAY_CLASS:"breadcrumbBarTray",_BREADCRUMB_BAR_CONTAINER_CLASS:"breadcrumbBarContainer",
_BREADCRUMB_BAR_CLASS:"breadcrumbBar",_STEP_OUT_CONTAINER_CLASS:"stepOutContainer",_STEP_OUT_BUTTON_CLASS:"stepOutButton",_CALL_STACK_CONTAINER_CLASS:"callStackContainer",_CALL_STACK_BUTTON_CLASS:"callStackButton",_CALL_STACK_BUTTON_ACTIVE_CLASS:"dropdownActive",_OVERFLOW_INDICATOR_CLASS:"overflowIndicator",_DISABLEMENT_OVERLAY_CLASS:"disablementOverlay",_DISABLED_CLASS:"disabled",_DROP_DOWN_MENU_CLASS:"rtcStackDropdownMenu",_DROP_DOWN_MENU_ITEM_CLASS:"rtcCallStackDropdownItem",_DROP_DOWN_MENU_OFFSET_Y:2,
_IS_ACTIVE_CLASS:"rtcCallStackDropdownItemIsActive",_CURRENT_FRAME_CLASS:"currentFrame",_TOOLTIP_CLASS:"breadcrumbTooltip",_SPLIT_BUTTON_SELECTOR:".mwSplitButton",_TEXT_NODE_SELECTOR:".mwTextNode",constructor:function(f,c,d,g,k,h,l,n,m){this._model=f;this._featureInterface=c;this._view=d;this._borderContainer=g;this._focusService=k;this._actionService=h;this._debuggerManager=l;this._changeWorkspaceCallback=n;this._stepOutCallback=m;this._breadcrumbBarTray=new e({"class":this._BREADCRUMB_BAR_TRAY_CLASS});
this._trayState=this._TRAY_STATES.HIDDEN;this._currentFrameDiv=this._breadcrumbBar=this._breadcrumbBarContainer=this._currentTrayAnimation=null;this._breadcrumbTooltips=[];this._navigationMaxScrollLeft=0;this._stepOutButton=this._overflowIndicator=null;this._stepOutButtonListeners=[];this._callStackButtonTooltip=this._callStackButton=this._stepOutButtonTooltip=null;this._callStackButtonListeners=[];this._stackContextMenu=null;this._menuItemClickListeners=[];this._isLiveEditorEval=!0;this.own(a.after(this._view,
"onResize",b.hitch(this,"_handleResize"),!0));this.own(a.after(this._model,"onModelUpdated",b.hitch(this,"_handleModelUpdated"),!0));this._initBreadCrumbsModule();this._layout(!0)},destroy:function(){this._hideTray(b.hitch(this,"_removeBreadcrumbBarContainer"));this._breadcrumbBarTray.destroy();this._breadcrumbBarTray=null;this.inherited(arguments)},enable:function(){this._disablementOverlay&&(k.remove(this._disablementOverlay,this._DISABLED_CLASS),k.remove(this._breadcrumbBarContainer,this._DISABLED_CLASS))},
disable:function(){this._stackContextMenu&&this._stackContextMenu.close();this._disablementOverlay&&(k.add(this._disablementOverlay,this._DISABLED_CLASS),k.add(this._breadcrumbBarContainer,this._DISABLED_CLASS))},_initBreadCrumbsModule:function(){this._navigationBar=d([v])({currentLocation:"",metaData:{hasChildren:!1,breadCrumbObjectsArray:[]}});this.own(m(this._navigationBar,"locationChanged",b.hitch(this,"_handleLocationChange")))},_handleLocationChange:function(a){this._changeWorkspaceCallback(parseInt(a,
10))},_handleResize:function(){this._breadcrumbBarContainer&&(this._updateOverflowIndicatorVisibility(),this._updateNavigationBarScrollLeft())},_handleModelUpdated:function(a){a=a.hasStackChange();this._layout(a)},_layout:function(a){!this._model.hasStack()||2>this._getPrunedStackFramesFromModel().length?this._hideTray(b.hitch(this,"_removeBreadcrumbBarContainer")):(this._showTray(),this._breadcrumbBarContainer||this._addBreadcrumbBarContainer(),a&&(this._updateBreadcrumbValues(),this._updateStepOutButton()),
this._updateActiveWorkspace(),this.enable())},_updateActiveWorkspace:function(){this._currentFrameDiv&&k.remove(this._currentFrameDiv,this._CURRENT_FRAME_CLASS);var a=this._model.getActiveWorkspaceIndex(),b=this._breadcrumbBar.querySelectorAll(this._SPLIT_BUTTON_SELECTOR);(this._currentFrameDiv=b[b.length-1-a])&&k.add(this._currentFrameDiv,this._CURRENT_FRAME_CLASS)},_updateBreadcrumbValues:function(){var a=this._getPrunedStackFramesFromModel().map(function(a,b){return{textToDisplay:a.getName(),pathToNavigateOnClick:b.toString()}}).reverse();
this._navigationBar.setCurrentLocation("",{locationIcon:this._BLANK_IMAGE,hasChildren:!1,breadCrumbObjectsArray:a});this._destroyBreadcrumbTooltips();q(this._TEXT_NODE_SELECTOR,this._navigationBar.domNode).forEach(function(a){if(""!==a.innerText){var b=x.styleAsCode(a.innerText),b=r.substitute(p.workspaceLabel,{"0":b}),f=this._buildDescriptionString(a.innerText,p.workspaceDescriptionForFunctions,p.workspaceDescriptionGeneric);this._breadcrumbTooltips.push(new w({targetNode:a,label:b,description:f,
cssClasses:this._TOOLTIP_CLASS}))}},this);this._updateNavigationBarScrollLeft();this._updateOverflowIndicatorVisibility()},_buildDescriptionString:function(a,b,f){if(this._FUNCTION_HANDLE_REGEX.test(a))return b;a=this._buildShortFunctionName(a);return r.substitute(f,{"0":a})},_buildShortFunctionName:function(a){var b=a.match(this._FUNCTION_NAME_REGEX);return null===b?(s.error("Couldn't extract function name from: "+a),""):x.styleAsCode(b[0])},_destroyBreadcrumbTooltips:function(){this._breadcrumbTooltips.forEach(function(a){a.destroy()});
this._breadcrumbTooltips=[]},_addBreadcrumbBarContainer:function(){this._breadcrumbBarContainer=f.create("div",{className:this._BREADCRUMB_BAR_CONTAINER_CLASS});f.place(this._breadcrumbBarContainer,this._breadcrumbBarTray.domNode,"last");A.refuseFocus(this._breadcrumbBarContainer);this._breadcrumbBarContainerMouseListener=m(this._breadcrumbBarContainer,"mousedown",b.hitch(this,function(){this._stackContextMenu&&this._stackContextMenu.close()}));this._addBreadcrumbBar();this._addStepOutButton();this._addCallStackButton();
this._addOverflowIndicator();this._disablementOverlay=f.create("div",{className:this._DISABLEMENT_OVERLAY_CLASS});f.place(this._disablementOverlay,this._breadcrumbBarContainer,"last");this._breadcrumbBarContainer.addEventListener("contextmenu",function(a){a.preventDefault();a.stopPropagation()},!0);this._breadcrumbBar.addEventListener("wheel",function(a){a.preventDefault();a.stopPropagation()},!0)},_addBreadcrumbBar:function(){this._breadcrumbBar=f.create("div",{className:this._BREADCRUMB_BAR_CLASS});
this._navigationBar.placeAt(this._breadcrumbBar,"first");f.place(this._breadcrumbBar,this._breadcrumbBarContainer,"last");this._navigationBar.startup()},_addStepOutButton:function(){var a=f.create("div",{"class":this._STEP_OUT_CONTAINER_CLASS});this._stepOutButton=f.create("div",{"class":this._STEP_OUT_BUTTON_CLASS});f.place(this._stepOutButton,a,"first");f.place(a,this._breadcrumbBarContainer,"last");this._stepOutButtonListeners.push(m(this._stepOutButton,"click",b.hitch(this,function(){this._stepOutCallback()})));
this._stepOutButtonListeners.push(m(this._stepOutButton,"mouseover",b.hitch(this,function(){this.onStepOutHover()})));this._stepOutButtonListeners.push(m(this._stepOutButton,"mouseout",b.hitch(this,function(){this.onStepOutHoverAway()})));this._updateStepOutButton()},_updateStepOutButton:function(){this._stepOutButtonTooltip&&this._stepOutButtonTooltip.destroy();var a=this._getPrunedStackFramesFromModel(),b=x.styleAsCode(a[0].getName()),b=r.substitute(p.stepOutLabel,{"0":b}),a=this._buildDescriptionString(a[0].getName(),
p.stepOutDescriptionForFunctions,p.stepOutDescriptionGeneric),f=this._actionService.getAction(this._debuggerManager.DEBUG_STEP_OUT_ACTION_ID);this._stepOutButtonTooltip=new w({targetNode:this._stepOutButton,label:b,description:a,keyBinding:f.shortcut,cssClasses:this._TOOLTIP_CLASS})},_addCallStackButton:function(){var a=f.create("div",{"class":this._CALL_STACK_CONTAINER_CLASS});this._callStackButton=f.create("div",{"class":this._CALL_STACK_BUTTON_CLASS});f.place(this._callStackButton,a,"first");f.place(a,
this._breadcrumbBarContainer,"last");this._createCallStackDropdown();var c=!1;this._callStackButtonListeners.push(m(this._callStackButton,"mousedown",b.hitch(this,function(){c=this._stackContextMenu.isMenuOpen()})));this._callStackButtonListeners.push(m(this._callStackButton,"mouseup",b.hitch(this,function(){c||this._openStackMenu(this._callStackButton)})));this._callStackButtonTooltip=new w({targetNode:this._callStackButton,label:p.functionCallStackLabel,description:p.functionCallStackDescription,
cssClasses:this._TOOLTIP_CLASS})},_createCallStackDropdown:function(){var a=b.hitch(this,function(){k.add(this._callStackButton,this._CALL_STACK_BUTTON_ACTIVE_CLASS);this._focusService.setBlur()}),f=b.hitch(this,function(){k.remove(this._callStackButton,this._CALL_STACK_BUTTON_ACTIVE_CLASS);this._focusService.setFocus()});this._stackContextMenu=new t({targetNodes:[this._callStackButton],onOpen:function(){this.inherited("onOpen",arguments);a()},onClose:function(){this.inherited("onClose",arguments);
f()}});k.add(this._stackContextMenu.domNode,this._DROP_DOWN_MENU_CLASS)},_addOverflowIndicator:function(){this._overflowIndicator=f.create("div",{"class":this._OVERFLOW_INDICATOR_CLASS});f.place(this._overflowIndicator,this._breadcrumbBarContainer,"last");this._updateOverflowIndicatorVisibility()},_updateNavigationBarScrollLeft:function(){var a=this._breadcrumbBar,b=a.scrollWidth-a.clientWidth;this._navigationMaxScrollLeft!==b&&(this._navigationMaxScrollLeft=a.scrollLeft=b)},_removeBreadcrumbBarContainer:function(){this._breadcrumbBarContainer&&
(this._breadcrumbBarContainerMouseListener.remove(),this._breadcrumbBarContainerMouseListener=null,this._callStackButtonListeners.forEach(function(a){a.remove()}),this._callStackButtonListeners=[],this._callStackButtonTooltip.destroy(),this._callStackButtonTooltip=null,this._stepOutButtonListeners.forEach(function(a){a.remove()}),this._stepOutButtonListeners=[],this._stepOutButtonTooltip.destroy(),this._stepOutButtonTooltip=null,f.destroy(this._stepOutButton),this._stepOutButton=null,this._destroyBreadcrumbTooltips(),
this._destroyStackMenuItems(),this._stackContextMenu.destroy(),this._stackContextMenu=null,this._callStackButton&&(g.hide(this._callStackButton),this._callStackButton=null),f.destroy(this._overflowIndicator),f.destroy(this._disablementOverlay),this._breadcrumbBar.removeChild(this._navigationBar.domNode),f.destroy(this._breadcrumbBar),f.destroy(this._breadcrumbBarContainer),this._currentFrameDiv=this._breadcrumbBarContainer=this._breadcrumbBar=this._disablementOverlay=this._overflowIndicator=null)},
_updateOverflowIndicatorVisibility:function(){var a=this._breadcrumbBar,b=a.scrollLeft;k.toggle(this._overflowIndicator,this._DISABLED_CLASS,!(a.clientWidth<a.scrollWidth&&b>=this._OVERFLOW_TOLERANCE))},_openStackMenu:function(a){this._destroyStackMenuItems();var f=this._model.getActiveWorkspaceIndex();this._getPrunedStackFramesFromModel().forEach(function(a,c){var d=new u({text:a.getName()});this._menuItemClickListeners.push(d.on("click",b.hitch(this,function(){f!==c&&this._changeWorkspaceCallback(c)})));
k.toggle(d.domNode,this._IS_ACTIVE_CLASS,f===c);k.add(d.domNode,this._DROP_DOWN_MENU_ITEM_CLASS);this._stackContextMenu.addChild(d)},this);a=a.getBoundingClientRect();this._stackContextMenu.open({x:a.right,y:a.bottom+this._DROP_DOWN_MENU_OFFSET_Y})},_destroyStackMenuItems:function(){this._menuItemClickListeners.forEach(function(a){a.remove()});this._menuItemClickListeners=[];var a=this._stackContextMenu;a.getChildren().forEach(function(b){b.destroy();a.removeChild(b)})},onStepOutHover:function(){},
onStepOutHoverAway:function(){},_getPrunedStackFramesFromModel:function(){var a=this._model.getStackFrames();return this._isLiveEditorEval?a.slice(0,-1):a},hideStackBar:function(){this._hideTray(b.hitch(this,"_removeBreadcrumbBarContainer"))},_showTray:function(){switch(this._trayState){case this._TRAY_STATES.HIDDEN:this._borderContainer.addWithProperties(this._breadcrumbBarTray,{region:this._TOP_REGION,maxSize:this._TRAY_MAX_HEIGHT,isResizable:!1,layoutOrder:0});this._borderContainer.setFreeDimension("top",
this._TRAY_MIN_HEIGHT);this._breadcrumbBarTray.startup();this._animateShowTray();break;case this._TRAY_STATES.DISAPPEARING:this._currentTrayAnimation.stop(),this._animateShowTray()}},_animateShowTray:function(){this._trayState=this._TRAY_STATES.APPEARING;this._currentTrayAnimation=c.animateProperty({node:this._breadcrumbBarTray.domNode,duration:this._BREADCRUMB_BAR_TRAY_ANIM_DURATION,easing:n.quadInOut,properties:{height:this._TRAY_MAX_HEIGHT},onAnimate:b.hitch(this,"_resizeDuringAnimation"),onEnd:b.hitch(this,
function(){this._trayState=this._TRAY_STATES.VISIBLE;this._currentTrayAnimation=null})}).play()},_hideTray:function(a){switch(this._trayState){case this._TRAY_STATES.VISIBLE:this._animateHideTray(a);break;case this._TRAY_STATES.APPEARING:this._currentTrayAnimation.stop(),this._animateHideTray(a)}},_animateHideTray:function(a){this._trayState=this._TRAY_STATES.DISAPPEARING;this._currentTrayAnimation=c.animateProperty({node:this._breadcrumbBarTray.domNode,duration:this._BREADCRUMB_BAR_TRAY_ANIM_DURATION,
easing:n.quadInOut,properties:{height:this._TRAY_MIN_HEIGHT},onAnimate:b.hitch(this,"_resizeDuringAnimation"),onEnd:b.hitch(this,function(){this._borderContainer.removeChild(this._breadcrumbBarTray);this._featureInterface.resize();this._trayState=this._TRAY_STATES.HIDDEN;this._currentTrayAnimation=null;a()})}).play()},_resizeDuringAnimation:function(a){a=parseInt(a.height,10);this._borderContainer.setFreeDimension("top",a);this._featureInterface.resize()}})})},"dojo/fx/easing":function(){define(["../_base/lang"],
function(h){var e={linear:function(e){return e},quadIn:function(e){return Math.pow(e,2)},quadOut:function(e){return-1*e*(e-2)},quadInOut:function(e){e*=2;return 1>e?Math.pow(e,2)/2:-1*(--e*(e-2)-1)/2},cubicIn:function(e){return Math.pow(e,3)},cubicOut:function(e){return Math.pow(e-1,3)+1},cubicInOut:function(e){e*=2;return 1>e?Math.pow(e,3)/2:(Math.pow(e-2,3)+2)/2},quartIn:function(e){return Math.pow(e,4)},quartOut:function(e){return-1*(Math.pow(e-1,4)-1)},quartInOut:function(e){e*=2;return 1>e?Math.pow(e,
4)/2:-0.5*(Math.pow(e-2,4)-2)},quintIn:function(e){return Math.pow(e,5)},quintOut:function(e){return Math.pow(e-1,5)+1},quintInOut:function(e){e*=2;return 1>e?Math.pow(e,5)/2:(Math.pow(e-2,5)+2)/2},sineIn:function(e){return-1*Math.cos(e*(Math.PI/2))+1},sineOut:function(e){return Math.sin(e*(Math.PI/2))},sineInOut:function(e){return-1*(Math.cos(Math.PI*e)-1)/2},expoIn:function(e){return 0==e?0:Math.pow(2,10*(e-1))},expoOut:function(e){return 1==e?1:-1*Math.pow(2,-10*e)+1},expoInOut:function(e){if(0==
e)return 0;if(1==e)return 1;e*=2;if(1>e)return Math.pow(2,10*(e-1))/2;--e;return(-1*Math.pow(2,-10*e)+2)/2},circIn:function(e){return-1*(Math.sqrt(1-Math.pow(e,2))-1)},circOut:function(e){return Math.sqrt(1-Math.pow(e-1,2))},circInOut:function(e){e*=2;return 1>e?-0.5*(Math.sqrt(1-Math.pow(e,2))-1):0.5*(Math.sqrt(1-Math.pow(e-2,2))+1)},backIn:function(e){return Math.pow(e,2)*(2.70158*e-1.70158)},backOut:function(e){e-=1;return Math.pow(e,2)*(2.70158*e+1.70158)+1},backInOut:function(e){e*=2;if(1>e)return Math.pow(e,
2)*(3.5949095*e-2.5949095)/2;e-=2;return(Math.pow(e,2)*(3.5949095*e+2.5949095)+2)/2},elasticIn:function(e){if(0==e||1==e)return e;e-=1;return-1*Math.pow(2,10*e)*Math.sin((e-0.075)*2*Math.PI/0.3)},elasticOut:function(e){return 0==e||1==e?e:Math.pow(2,-10*e)*Math.sin((e-0.075)*2*Math.PI/0.3)+1},elasticInOut:function(e){if(0==e)return 0;e*=2;if(2==e)return 1;var d=0.3*1.5,c=d/4;if(1>e)return e-=1,-0.5*Math.pow(2,10*e)*Math.sin((e-c)*2*Math.PI/d);e-=1;return 0.5*Math.pow(2,-10*e)*Math.sin((e-c)*2*Math.PI/
d)+1},bounceIn:function(g){return 1-e.bounceOut(1-g)},bounceOut:function(e){e<1/2.75?e=7.5625*Math.pow(e,2):e<2/2.75?e=7.5625*Math.pow(e-1.5/2.75,2)+0.75:e<2.5/2.75?(e-=2.25/2.75,e=7.5625*Math.pow(e,2)+0.9375):(e-=2.625/2.75,e=7.5625*Math.pow(e,2)+0.984375);return e},bounceInOut:function(g){return 0.5>g?e.bounceIn(2*g)/2:e.bounceOut(2*g-1)/2+0.5}};h.setObject("dojo.fx.easing",e);return e})},"mw-menu/ContextMenu":function(){define("dojo/_base/declare dojo/_base/lang dijit/focus dojo/keys dojo/on dojo/query dijit/registry dijit/popup dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Container mw-menu/mixins/KeyNavMixin mw-menu/mixins/OnOpenMixin mw-menu/mixins/OnCloseMixin mw-menu/mixins/ContainerFocusMixin mw-menu/mixins/MenuFocusMixin mw-menu/mixins/property/MaxHeightMixin mw-mixins/property/TagMixin mw-mixins/property/VisualFamilyMixin mw-mixins/mixinDependencyValidator dojo/text!./templates/Menu.html".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x){return h(w.validate([k,p,l,n,m,q,r,s,t,u,v]),{baseClass:"mwWidget mwContextMenu",disabled:!1,templateString:x,postCreate:function(){this.inherited(arguments);this._activeEventListeners=[];this._onOpenEventListenersInfo=[{event:"blur",target:window,callback:e.hitch(this,function(a){a.target===window&&this.closeMenu()}),useCapture:!0},{event:"resize",target:window,callback:e.hitch(this,function(a){(a.target===window||this._shouldCloseMenu(a.target))&&
this.closeMenu()}),useCapture:!0},{event:"wheel",target:document.body,callback:e.hitch(this,"_onWheel")},{event:"mousewheel",target:document.body,callback:e.hitch(this,"_onWheel")},{event:"mousedown",target:document.body,callback:e.hitch(this,function(a){this._shouldCloseMenu(a.target)&&this.closeMenu()}),useCapture:!0},{event:"pointerdown",target:document.body,callback:e.hitch(this,function(a){this._shouldCloseMenu(a.target)&&this.closeMenu()}),useCapture:!0},{event:"mouseenter",target:document.body,
callback:e.hitch(this,this._onMouseMovement),useCapture:!0},{event:"mouseover",target:document.body,callback:e.hitch(this,this._onMouseMovement),useCapture:!0},{event:"contextmenu",target:this.domNode,callback:function(a){a.preventDefault()},useCapture:!0},{event:"keydown",target:this.domNode,callback:e.hitch(this,function(a){a.keyCode===d.ESCAPE&&(this.closeMenu(),document.body.classList.contains("mwHasFocusManager")?this.emit("restorefocus"):g.focus(this._previousFocusNode))})},{event:"change",
target:this.domNode,callback:e.hitch(this,function(b){b=a.getEnclosingWidget(b.target);b.domNode.hasAttribute("data-composite-child")&&(b=a.byNode(document.getElementById(b.domNode.getAttribute("data-composite-primary-id"))));(b.get("closeMenuOnClick")||void 0===b.get("closeMenuOnClick"))&&this.closeMenu()})},{event:"close",target:this.domNode,callback:e.hitch(this,this._cleanupOnClose)}];this.own(c(this.domNode,"open",e.hitch(this,this._handleOpen)));this.set("disabled",this.disabled)},_setDisabledAttr:function(a){if("boolean"===
typeof value)throw Error("Expected 'disabled' property to be a boolean");a?this._removeRightClickEventListener():this._addRightClickEventListener();this._set("disabled",a)},_addRightClickEventListener:function(){this._rightClickListener||(this._rightClickListener=c(document.body,"contextmenu",e.hitch(this,this._createCallback(e.hitch(this,this._onContextMenu),e.hitch(this,this._onDoubleContextMenu),200,!0))),this.own(this._rightClickListener))},_removeRightClickEventListener:function(){this._rightClickListener&&
(this._rightClickListener.remove(),delete this._rightClickListener)},_addOnOpenEventListeners:function(){if(this._activeEventListeners.length<this._onOpenEventListenersInfo.length)for(var a=0;a<this._onOpenEventListenersInfo.length;a++)this._onOpenEventListenersInfo[a].useCapture?(this._onOpenEventListenersInfo[a].target.addEventListener(this._onOpenEventListenersInfo[a].event,this._onOpenEventListenersInfo[a].callback,!0),this._activeEventListeners[a]=[{target:this._onOpenEventListenersInfo[a].target,
event:this._onOpenEventListenersInfo[a].event,callback:this._onOpenEventListenersInfo[a].callback,useCapture:!0}]):this._activeEventListeners[a]=this.own(c(this._onOpenEventListenersInfo[a].target,this._onOpenEventListenersInfo[a].event,this._onOpenEventListenersInfo[a].callback))},_removeOnOpenEventListeners:function(){if(0<this._activeEventListeners.length)for(;0<this._activeEventListeners.length;){var a=this._activeEventListeners.pop()[0];a.useCapture?a.target.removeEventListener(a.event,a.callback,
!0):a.remove()}},_onWheel:function(a){this.isDescendant(a.target)||this.closeMenu()},isMenuOpen:function(){return this.domNode&&this.domNode.parentElement&&"none"!==this.domNode.parentElement.style.display},open:function(a){this.openMenu(a)},openMenu:function(b){if(!this.get("disabled")){this._computeTargetNodes(b);b.doNotClose=this._nodeMatchesSelector(b.target,".galleryPopup, .galleryPopup  *, .mwSectionPopup, .mwSectionPopup *");if(b.target){var f=a.getEnclosingWidget(b.target);f&&f.id&&this.domNode.setAttribute("data-target-id",
f.id)}if("contextmenu"===b.type)this._handleRightClick(b);else if(b.target instanceof HTMLElement&&isNaN(b.x)&&isNaN(b.y))this._handleOpenWithDomNode(b);else if(!b.target&&!isNaN(b.x)&&!isNaN(b.y))this._handleOpenWithXY(b);else throw Error("Invalid parameters passed");}},_onMouseMovement:function(a){this.isDescendant(a.target)||(a.stopImmediatePropagation(),a.preventDefault())},_nodeMatchesSelector:function(a,b){var f=!1;a&&b&&(a.matches?f=a.matches(b):a.matchesSelector?f=a.matchesSelector(b):a.webkitMatchesSelector?
f=a.webkitMatchesSelector(b):a.mozMatchesSelector?f=a.mozMatchesSelector(b):a.msMatchesSelector?f=a.msMatchesSelector(b):a.oMatchesSelector&&(f=a.oMatchesSelector(b)));return f},_handleRightClick:function(a){var b;if(0<=this._contextMenuNodes.indexOf(a.target)){if(this.willOpenCallback&&(b=this.willOpenCallback({target:a.target,x:a.clientX,y:a.clientY})))return;this._previousFocusNode=a.target;1>a.pageX&&1>a.pageY?this._showMenu({around:a.target,popup:this,doNotClose:a.doNotClose}):this._showMenu({x:a.pageX,
y:a.pageY,popup:this,doNotClose:a.doNotClose})}},_handleOpenWithDomNode:function(a){var b;if(0<=this._contextMenuNodes.indexOf(a.target)){if(this.willOpenCallback&&(b=this.willOpenCallback({target:a})))return;this._previousFocusNode=a.target;this._showMenu({around:a.target,popup:this,doNotClose:a.doNotClose})}},_handleOpenWithXY:function(a){var b;if(this.willOpenCallback&&(b=this.willOpenCallback({target:a.target})))return;this._showMenu({x:a.x,y:a.y,popup:this})},_showMenu:function(a){this._closeEventData?
this._closeEventData.mwFocusData?this._closeEventData.mwFocusData.previousFocusNode=document.activeElement:this._closeEventData.mwFocusData={previousFocusNode:document.activeElement}:this._closeEventData={mwFocusData:{previousFocusNode:document.activeElement}};this._lastKnownInvokingNode=a.around||document.elementFromPoint(a.x,a.y);f.open(a)},_handleOpen:function(){this._addOnOpenEventListeners();this._handleEmptyContextMenu()},_handleEmptyContextMenu:function(){0===this.domNode.children.length?this.domNode.parentElement&&
(this.domNode.parentElement.style.display="none"):this.domNode.parentElement&&(this.domNode.parentElement.style.display="")},close:function(){this.closeMenu()},closeMenu:function(){f.close(this)},_cleanupOnClose:function(){this._removeOnOpenEventListeners();this.domNode&&(this.domNode.removeAttribute("data-target-id"),this.domNode.parentNode&&(this.domNode.parentNode.style.overflowX="visible",this.domNode.parentNode.style.overflowY="visible"))},_shouldCloseMenu:function(a){var b=!0;if(!this.isMenuOpen())return!1;
if(a&&(this.isDescendant(a)||this.targetNodes&&0<=this.targetNodes.indexOf(a)))b=!1;return b},_setTargetNodesAttr:function(a){if(null===a||void 0===a)a=[];this._set("targetNodes",a)},_computeTargetNodes:function(a){this._contextMenuNodes=[];this.targetNodes&&this.targetNodes.forEach(function(f){"string"===typeof f?b(f).forEach(function(a){var b=a.querySelectorAll("*");Object.keys(b).forEach(function(a){this._contextMenuNodes.push(b[a])},this);this._contextMenuNodes.push(a)},this):"function"===typeof f?
(f=f(a))&&(1<f.length?f.forEach(function(a){this._contextMenuNodes.push(a)}.bind(this)):this._contextMenuNodes.push(f)):this._contextMenuNodes.push(f)},this);return this._contextMenuNodes},_onContextMenu:function(a){a.preventDefault();this.openMenu(a)},_onDoubleContextMenu:function(a){a.preventDefault()},_getTargetNode:function(a){null!==a&&a.hasAttribute("data-composite-child")&&(a=document.getElementById(a.getAttribute("data-composite-primary-id")));return a},_createCallback:function(a,b,f,c){var d=
0,e;void 0===f&&(f=200);return function(g){!0===c&&-0<=this._computeTargetNodes(g).indexOf(g.target)&&g.preventDefault();d+=1;1===d?e=setTimeout(function(){d=0;a(g)},f):2===d&&(clearTimeout(e),d=0,b(g))}},destroy:function(){this._removeOnOpenEventListeners();this.inherited(arguments)}})})},"mw-menu/mixins/KeyNavMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/on","dojo/keys","mw-menu/mixins/ContainerFocusMixin"],function(h,e,g,d,c){h=h(null,{postCreate:function(){this.inherited(arguments);
this.own(g(this.domNode,"keydown",e.hitch(this,"_onKeyDown")),g(this.domNode,"synkeydown",e.hitch(this,"_onKeyDown")))},_onKeyDown:function(b){b.keyCode===d.DOWN_ARROW?(this._handleFocusNext(b.target),b.preventDefault()):b.keyCode===d.UP_ARROW?(this._handleFocusPrevious(b.target),b.preventDefault()):b.keyCode===d.PAGE_UP||b.keyCode===d.HOME?(this._moveToFirstChild(b.target),b.preventDefault()):b.keyCode===d.PAGE_DOWN||b.keyCode===d.END?(this._moveToLastChild(b.target),b.preventDefault()):b.keyCode===
d.TAB&&(this._handleFocusNext(b.target),b.preventDefault())},_handleFocusNext:function(b){(null===b||this._isActiveElement(b))&&this.focusNext(this._getTargetNode(b))},_handleFocusPrevious:function(b){(null===b||this._isActiveElement(b))&&this.focusPrevious(this._getTargetNode(b))},_moveToFirstChild:function(){this.focusFirst()},_moveToLastChild:function(){this.focusLast()},_getTargetNode:function(b){return b},_isActiveElement:function(b){return b.hasAttribute("data-composite-primary")?b.contains(document.activeElement):
b===document.activeElement}});h._dependencies=[{mixin:c,orderDependent:!1}];return h})},"mw-menu/mixins/ContainerFocusMixin":function(){define(["dojo/_base/declare","mw-dom-utils/domUtils","dijit/focus"],function(h,e,g){return h(null,{isCyclic:!0,_setIsCyclicAttr:function(d){if("boolean"!==typeof d)throw Error("'isCyclic' property expects a boolean value.");this._set("isCyclic",d)},postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwContainerFocusMixin");this.focusNode=this.focusNode||
this.domNode},focus:function(d){this.inherited(arguments);d?this._focusNearestFocusableNode(d,!0,"next"):this.focusNode&&e.isFocusable(this.focusNode)&&g.focus(this.focusNode)},focusNext:function(d){this.inherited(arguments);d||(d=document.activeElement&&e.isDescendant(document.activeElement,this.domNode)?document.activeElement:this.domNode);this._focusNearestFocusableNode(d,!1,"next")},focusPrevious:function(d){this.inherited(arguments);d||(d=document.activeElement&&e.isDescendant(document.activeElement,
this.domNode)?document.activeElement:this.domNode);this._focusNearestFocusableNode(d,!1,"previous")},focusFirst:function(){this.inherited(arguments);this._focusNearestFocusableNode(null,!1,"next")},focusLast:function(){this.inherited(arguments);this._focusNearestFocusableNode(null,!1,"previous")},_focusNearestFocusableNode:function(d,c,b){d=this._getAppropriateNodeFromInput(d);if(0<e.getChildren(this.domNode).length&&(null==d||e.isDescendant(d,this.domNode,!0)))d=this._findFocusableChild(d,c,b),null!==
d&&(e.isElementInViewport(d)||d.scrollIntoView(!0),g.focus(d))},_findFocusableChild:function(d,c,b){var a=!1,f,g=!1;d=this._getAppropriateNodeFromInput(d);null==c&&(c=!0);if(!b||0>["next","previous"].indexOf(b))b="next";if(d===this.domNode)a=!0;else for((f=d)&&!c&&(f=e.getAdjacentElement(f,b));f&&!e.isFocusable(f);){if(f===d){if(g)return null;g=!0}f=e.getAdjacentElement(f,b)}if(a||!f&&this.isCyclic||null==d){switch(b){case "next":f=e.getFirstChild(this.domNode);break;case "previous":f=e.getLastChild(this.domNode)}f=
this._findFocusableChild(f,!0,b)}f&&(d=this._getAppropriateNodeFromInput(f));return d},_getAppropriateNodeFromInput:function(d){if(null==d)return null;d=d.focusNode||d.domNode||d;if(!(d instanceof Element))throw Error("Input argument expects a Widget or DOM node.");return d}})})},"mw-dom-utils/domUtils":function(){define(["dojo/sniff"],function(h){var e={},g={INVALID_ELEMENT:"The input parameter must be an instance of an Element object.",INVALID_STRING:"The input parameter must be of type 'string'.",
INVALID_BOOLEAN:"The input parameter must be of type 'boolean'.",INVALID_OBJECT:"The input parameter must be of type 'object'.",INVALID_FOCUS_EVENT:"The input parameter must be a 'FocusEvent' object.",INVALID_STYLE:"The style specified is invalid.",INVALID_VALUE:"The value specified is invalid.",INTEGER_INDEX:"index argument expects an integer.",STRING_INDEX:"index argument expects an string.",SPOUSE_NODE:"A function which returns a spouse node if it exists must be provided."},d=function(a){if(!(a instanceof
Element))throw Error(g.INVALID_ELEMENT);},c=function(a){if(-1===["String","string"].indexOf(typeof a))throw Error(g.INVALID_STRING);},b=function(a){if(-1===["Boolean","boolean"].indexOf(typeof a))throw Error(g.INVALID_BOOLEAN);},a=function(a){if(-1===["Object","object"].indexOf(typeof a))throw Error(g.INVALID_OBJECT);};e._qeSetup=function(){e._qeTools={};e._qeTools.errorMessages=g;e._qeTools.validateElement=d;e._qeTools.validateString=c;e._qeTools.validateBoolean=b;e._qeTools.validateObject=a;e._qeTools.overrideErrorMessaged=
function(a){g=a};e._qeTools.overrideValidateElement=function(a){d=a};e._qeTools.overrideValidateString=function(a){c=a};e._qeTools.overrideValidateBoolean=function(a){b=a};e._qeTools.overrideValidateObject=function(b){a=b}};e.isLeftMouseButton=function(a){return!0===a.synthetic&&h("trident")?1===a.button:0===a.button};e.parseFocusEvent=function(a){if(!(a instanceof FocusEvent))throw Error(g.INVALID_FOCUS_EVENT);var b={};b.lostFocusNode=a.target;b.gainedFocusNode=h("chrome")||h("safari")?a.relatedTarget:
document.activeElement;b.type=a.type;b.eventdata=a;return b};e.getParent=function(a){d(a);return a.parentNode};e.findParentNode=function(a,b,c){var d=null,e;a.domNode&&(a=a.domNode);for(;a&&a!==window.document;){if(c){if(a.hasAttribute(b)&&a.getAttribute(b)===c){d=a;break}}else{if(a.hasAttribute(b)){d=a;break}if(a.classList.contains(b)){d=a;break}}a=(e=a.getAttribute("dijitpopupparent"))?document.getElementById(e):a.parentNode}return d};e.getNodeType=function(a){d(a);return{1:"Element",3:"Text",7:"Processing Instruction",
8:"Comment",9:"Document",10:"Document Type",11:"Document Fragment"}[a.nodeType]};e.getById=function(a){c(a);return window.document.getElementById(a)};e.getByClass=function(a){c(a);return window.document.getElementsByClassName(a)};e.getByAttr=function(a){c(a);return window.document.querySelectorAll("["+a+"]")};e.getByAttrValue=function(a,b){c(a);c(b);return window.document.querySelectorAll("["+a+"\x3d"+b.replace(/['".\\]/g,"\\$\x26").replace(/[\\]/g,"\\$\x26")+"]")};e.getByName=function(a){c(a);return window.document.getElementById("[name\x3d"+
a+"]")};e.getByTag=function(a){c(a);return window.document.getElementsByTagName(a)};e.matchesSelector=function(a,b){if(!a||!b)return!1;d(a);c(b);return a[a.msMatchesSelector?"msMatchesSelector":"matches"](b)};e.getComputedStyle=function(a,b){d(a);return b?(c(b),window.getComputedStyle(a,null)[b]):window.getComputedStyle(a,null)};e.getStyle=function(a,b){d(a);c(b);if(void 0===a.style[b])throw Error(g.INVALID_STYLE);return a.style[b]};e.setStyle=function(a,b,e){d(a);c(b);c(e);a.style[b]=e;if(a.style[b]!==
e)throw Error(g.INVALID_VALUE);};e.hasAttr=function(a,b){d(a);c(b);return a.hasAttribute(b)};e.hasAttrValue=function(a,b,e){d(a);c(b);c(e);return a.hasAttribute(b)&&a.getAttribute(b)===e};e.getAttr=function(a,b){d(a);c(b);return a.getAttribute(b)};e.setAttr=function(a,b,e){d(a);c(b);c(e);a.setAttribute(b,e)};e.addAttr=function(a,b){d(a);c(b);a.setAttribute(b,"")};e.removeAttr=function(a,b){d(a);c(b);a.removeAttribute(b)};e.getClasses=function(a){d(a);return a.classList?a.classList:{_element:a,_getClassArray:function(){return this._element.className.split(" ")},
_updateClassName:function(a){this._element.className=a.join(" ");this.length=a.length},length:a.className.split(" ").length,item:function(a){return this._getClassArray()[a]},contains:function(a){for(var b=this._getClassArray(),f=0;f<b.length;f++)if(b[f]===a)return!0;return!1},add:function(a){var b=this._getClassArray();b.push(a);this._updateClassName(b)},remove:function(a){var b=this._getClassArray();a=b.indexOf(a);0<=a&&(b.splice(a,1),this._updateClassName(b))},toggle:function(a){if(this.contains(a))return this.remove(a),
!1;this.add(a);return!0}}};e.getClass=function(a,b){if(null==b||"number"!==typeof b||0>b||0!==b%1)throw Error(g.INTEGER_INDEX);return e.getClasses(a).item(b)};e.addClass=function(a,b){if(null==b||"string"!==typeof b)throw Error(g.STRING_INDEX);return e.getClasses(a).add(b)};e.removeClass=function(a,b){if(null==b||"string"!==typeof b)throw Error(g.STRING_INDEX);return e.getClasses(a).remove(b)};e.toggleClass=function(a,b,c){if(null==b||"string"!==typeof b)throw Error(g.STRING_INDEX);return c?e.getClasses(a).toggle(b,
c):e.getClasses(a).toggle(b)};e.containsClass=function(a,b){if(null==b||"string"!==typeof b)throw Error(g.STRING_INDEX);return e.getClasses(a).contains(b)};e.classCount=function(a){return e.getClasses(a).length};e.getChildCount=function(a){d(a);return a.childElementCount};e.getChildren=function(a){d(a);return a.children};e.isDescendant=function(a,b,c){d(a);d(b);if(c&&a===b)return!0;for(;a&&a!==window.document;)if(a=e.getParent(a),a===b)return!0;return!1};e.isDescendantOrInLaw=function(a,b,c,d){var h;
if("function"!==typeof c)throw Error(g.SPOUSE_NODE);h=e.isDescendant(a,b,d);!1===h&&(a=c(a)||a.parentNode)&&a!==window.document&&(h=e.isDescendantOrInLaw(a,b,c,d));return h};e.getFirstChild=function(a){d(a);return!e.isContainer(a)||1>e.getChildCount(a)?null:e.getChildren(a)[0]};e.getLastChild=function(a){var b;d(a);b=e.getChildCount(a);return!e.isContainer(a)||1>b?null:e.getChildren(a)[b-1]};e.isContainer=function(a){d(a);return 0<e.getChildCount(a)};e.getAdjacentElement=function(a,b){d(a);if(!b||
0>["next","previous"].indexOf(b))b="next";return a=a[b+"Sibling"]};e.getElementPositionInViewPort=function(a){d(a);a=a.getBoundingClientRect();return{x:a.left,y:a.top,w:a.right-a.left,h:a.bottom-a.top}};e.getElementPositionOnPage=function(a){d(a);a=e.getElementPositionInViewPort(a);a.x+=window.pageXOffset;a.y+=window.pageYOffset;return a};e.setPositionExtents=function(b,c){a(c);var d={};d.top=c.t?c.t:c.top?c.top:"auto";d.right=c.r?c.r:c.right?c.right:"auto";d.bottom=c.b?c.b:c.bottom?c.bottom:"auto";
d.left=c.l?c.l:c.left?c.left:"auto";["top","right","bottom","left"].forEach(function(a){e.setStyle(b,a,d[a])})};e.isFocusable=function(a){d(a);return a&&!a.hasAttribute("disabled")&&(!a.hasAttribute("aria-disabled")||"true"!==a.getAttribute("aria-disabled"))&&"none"!==a.style.display&&!a.hasAttribute("data-refuse-key-nav")};e.isElementInViewport=function(a,b){var c,e,g,h;d(a);c=a.getBoundingClientRect();e=window.innerWidth||document.documentElement.clientWidth;g=window.innerHeight||document.documentElement.clientHeight;
h=function(a,b){return document.elementFromPoint(a,b)};return 0>=c.width||0>=c.height||0>c.right||0>c.bottom||c.left>e||c.top>g?!1:2>c.width&&2>c.height?(e=c.left+(c.right-c.left)/2,g=c.top+(c.bottom-c.top)/2,a.contains(h(e,g))):2>c.width?(e=c.left+(c.right-c.left)/2,b?a.contains(h(e,c.top+1))&&a.contains(h(e,c.bottom-1)):a.contains(h(e,c.top+1))||a.contains(h(e,c.bottom-1))):2>c.height?(g=c.top+(c.bottom-c.top)/2,b?a.contains(h(c.left+1,g))&&a.contains(h(c.right-1,g)):a.contains(h(c.left+1,g))||
a.contains(h(c.right-1,g))):b?a.contains(h(c.left+1,c.top+1))&&a.contains(h(c.right-1,c.top+1))&&a.contains(h(c.right-1,c.bottom-1))&&a.contains(h(c.left+1,c.bottom-1)):a.contains(h(c.left+1,c.top+1))||a.contains(h(c.right-1,c.top+1))||a.contains(h(c.right-1,c.bottom-1))||a.contains(h(c.left+1,c.bottom-1))};e._obscuredProps={};e._obscuredProps.sawPosAbsolute=!1;e._obscuredProps.elementPosition=null;e.isElementObscuredByParent=function(a,b){var c,g,h,m;d(a);m=!1;if(h=e.getParent(a))if(b||(e._obscuredProps.elementPosition=
e.getElementPositionOnPage(a),e._obscuredProps.sawPosAbsolute="absolute"===window.getComputedStyle(a,null).position),c=e._obscuredProps.elementPosition,g=e._obscuredProps.sawPosAbsolute,h&&"Element"===e.getNodeType(h)&&"BODY"!==h.nodeName){var q=e.getElementPositionOnPage(h);h=window.getComputedStyle(h,null);/relative|absolute/.test(h.position)&&(g=e._sawPosAbsolute=!1);!g&&/hidden|auto|scroll/.test(h.overflow)&&(m=c.y<q.y||c.y+c.h>q.y+q.h||c.x<q.x||c.x+c.w>q.x+q.w)}return m};e.isElementObscuredByAncestor=
function(a){var b,c;d(a);b=!1;e._obscuredProps.elementPosition=e.getElementPositionOnPage(a);for(e._obscuredProps.sawPosAbsolute="absolute"===window.getComputedStyle(a,null).position;(c=e.getParent(a))&&"Element"===e.getNodeType(c)&&"BODY"!==c.nodeName;)b=e.isElementObscuredByParent(a,!0),a=c;return b};return e})},"mw-menu/mixins/OnOpenMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-geometry"],function(h,e,g){return h(null,{_focusOnOpen:!0,_matchMinWidthToInvokingWidget:!0,
onOpen:function(d){this._defaultContextMenuBlocker&&this.domNode.addEventListener("contextmenu",this._defaultContextMenuBlocker,!0);this._correctWrapperBorder();setTimeout(e.hitch(this,function(){if(this._focusOnOpen&&this.focus){var c=window.pageXOffset,b=window.pageYOffset;this.focus();window.scrollTo(c,b)}}),0);this._emitOpenEvent();this._updateLayout()},_correctWrapperBorder:function(){var d=this.domNode.parentElement;d&&(d.style.border="")},_updateLayout:function(d){this._removeAllWidths();this._matchMinWidthToInvokingWidget&&
this._updateWidth();this._updateHeight();this._updatePosition(d)},_removeAllWidths:function(){this.domNode.style.width="";this.getChildren().forEach(function(d){d.domNode.style.width=""})},_updateWidth:function(){if(this._invokingWidget&&this.domNode.offsetWidth<this._invokingWidget.domNode.offsetWidth){var d=0;this.domNode.parentElement&&(d=g.getMarginBox(this.domNode.parentElement).w-g.getMarginBox(this.domNode).w);this.domNode.style.width=this._invokingWidget.domNode.offsetWidth-d+"px"}},_updateHeight:function(){if(this.domNode&&
this.domNode.parentElement&&this.domNode.parentElement.classList&&this.domNode.parentElement.classList.contains("dijitPopup")){var d,c=this.domNode,b=c.parentElement,a=b.getBoundingClientRect().top;d=window.getComputedStyle(c,null);var f=window.getComputedStyle(b,null),f=parseInt(d.borderTopWidth)+parseInt(d.borderBottomWidth)+parseInt(f.borderTopWidth)+parseInt(f.borderBottomWidth);d="ontouchstart"in document||"onpointerdown"in document&&0<navigator.maxTouchPoints||window.navigator.msMaxTouchPoints?
window.innerHeight||document.documentElement.clientHeight:document.documentElement.clientHeight;""!==c.style.height&&(c.style.height="");a+c.clientHeight>d&&(c.style.height=d-a-f+"px",b.style.overflow="hidden",b.style.overflowX="hidden",b.style.overflowY="hidden")}},_updatePosition:function(d){d&&("L"===d.corner.charAt(1)&&"R"===d.aroundCorner.charAt(1)&&d.overflow)&&(d=parseInt(this.domNode.parentElement.style.left)-d.overflow,this.domNode.parentElement.style.left=(0>d?0:d)+"px")},_setFocusOnOpenAttr:function(d){if("boolean"!==
typeof d)throw Error("'focusOnOpen' property expects a boolean value.");this._set("_focusOnOpen",d)},_emitOpenEvent:function(){this.emit("open",{})}})})},"mw-menu/mixins/OnCloseMixin":function(){define(["dojo/_base/declare","mw-menu/mixins/OnOpenMixin"],function(h,e){var g=h(null,{_closeEventData:{},onClose:function(){this._defaultContextMenuBlocker&&this.domNode&&this.domNode.removeEventListener("contextmenu",this._defaultContextMenuBlocker,!0);this._emitCloseEvent();this._closeEventData={}},_emitCloseEvent:function(){this.emit("close",
this._closeEventData)}});g._dependencies=[{mixin:e,orderDependent:!1}];return g})},"mw-menu/mixins/MenuFocusMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/has dojo/touch dojo/keys dijit/popup dijit/registry mw-dom-utils/domUtils mw-utils/widgetUtils mw-menu/mixins/ContainerFocusMixin".split(" "),function(h,e,g,d,c,b,a,f,k,l,n){var p=d("touch")&&!window.PointerEvent;h=h(null,{postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwMenuFocusMixin");this.focusNode=
this.focusNode||this.domNode;this.own(g(this.domNode,"close",e.hitch(this,this._handleClose)))},focus:function(){this.inherited(arguments);this._addFocusListeners()},_focusLost:function(a){setTimeout(e.hitch(this,function(){if(l.isMenuOpen(this)){var b=a instanceof FocusEvent?f.getEnclosingWidget(k.parseFocusEvent(a).gainedFocusNode):f.getEnclosingWidget(a.target),c,d,e;(c=b?b.focusNode&&b.focusNode instanceof Element?b.focusNode:b.domNode?b.domNode:null:null)&&c.hasAttribute("data-composite-child")&&
(b=f.getEnclosingWidget(document.getElementById(c.getAttribute("data-composite-primary-id"))));c=this.isDescendant(b,this);d=b&&b.domNode&&-1<[].slice.call(document.querySelectorAll(".mwToolstripPopupContextMenu, .mwToolstripPopupContextMenu *")).indexOf(b.domNode);e=this._invokingWidget&&b===this._invokingWidget;(!b||!c&&!d&&!e)&&this._focusChange(b)}}),0)},_handleKeydown:function(a){a.keyCode===b.ESCAPE&&this._focusLost(a)},_handleClose:function(){this._removeFocusListeners()},_addFocusListeners:function(){this.focusNode&&
(this._focusNodeBlurListener=g(this.focusNode,"blur",e.hitch(this,"_focusLost")),this.own(this._focusNodeBlurListener),this._windowBlurListener=g(window,"blur",e.hitch(this,"_focusLost")),this.own(this._windowBlurListener),this._documentClickListener=g(document.body,p?c.press:"mousedown",e.hitch(this,"_focusLost")),this.own(this._documentClickListener),this._escapeKeydownListener=g(document.body,"keydown",e.hitch(this,"_handleKeydown")),this.own(this._escapeKeydownListener))},_removeFocusListeners:function(){this._focusNodeBlurListener&&
(this._focusNodeBlurListener.remove(),delete this._focusNodeBlurListener);this._windowBlurListener&&(this._windowBlurListener.remove(),delete this._windowBlurListener);this._documentClickListener&&(this._documentClickListener.remove(),delete this._documentClickListener);this._escapeKeydownListener&&(this._escapeKeydownListener.remove(),delete this._escapeKeydownListener)},_focusChange:function(a){this._closeEventData?this._closeEventData.mwEventData?this._closeEventData.mwEventData.gainedFocusWidget=
a:this._closeEventData.mwEventData={gainedFocusWidget:a}:this._closeEventData={mwEventData:{gainedFocusWidget:a}};null==a?this.closeRequest(!1):!this.isInvokingWidget(a)&&!this.isDescendant(a,this)&&this.closeRequest(!1)},closeRequest:function(b){if(null==b||0>[!0,!1].indexOf(b))b=!0;this.close&&this.close();this._invokingWidget&&this._invokingWidget.isMenuOpen()&&this._invokingWidget.closeMenu(b);l.isMenuOpen(this)&&a.close(this)},isInvokingWidget:function(a){if(null==a)return!1;a instanceof HTMLElement&&
(a=f.getEnclosingWidget(a));return a===this._invokingWidget},isDescendant:function(a,b){if(null==a)return!1;a.domNode&&(a=a.domNode);null==b?b=this.domNode:b.domNode&&(b=b.domNode);return k.isDescendantOrInLaw(a,b,function(a){return a.hasAttribute("dijitpopupparent")?document.getElementById(a.getAttribute("dijitpopupparent")):null},!0)}});h._dependencies=[{mixin:n,orderDependent:!0}];return h})},"mw-utils/widgetUtils":function(){define(["dijit/registry","mw-utils/domUtils"],function(h,e){var g={findParentWidget:function(d,
c){var b=null,a;for(d instanceof HTMLElement&&(d=h.getEnclosingWidget(d));d;){if(d.get("type")===c){b=d;break}if(e.containsClass(d.domNode,c)){b=d;break}d=(a=e.getAttr(d.domNode.parentNode,"dijitpopupparent"))?h.byId(a):d.getParent()}return b},isMenuChild:function(d){return null!=e.findParentNode(d,"dijitPopup")},getParentMenu:function(d){d=e.findParentNode(d,"dijitPopup");return!d?null:h.getEnclosingWidget(d.children[0])},isInvokingWidget:function(d,c){return c?g.getMenuWidget(d)===c:null!=g.getMenuWidget(d)},
getInvokingWidget:function(d){if(d._invokingWidget)return d._invokingWidget;d=e.findParentNode(d,"dijitPopup");return!d?null:h.getEnclosingWidget(document.getElementById(d.getAttribute("dijitpopupparent")))},getMenuWidget:function(d){return d.menu||d.dropDown},isMenuOpen:function(d){if(null==d)return!1;var c=d;d.domNode&&d.domNode.hasAttribute("data-composite-child")&&(d=document.getElementById(d.domNode.getAttribute("data-composite-primary-id")),c=h.getEnclosingWidget(d));return c&&c.dropDown&&(e.containsClass(c.domNode,
"dijitOpened")||e.containsClass(c.domNode,"dijitHasDropDownOpen"))||c&&c.isMenuOpen&&c.isMenuOpen()||c&&c.domNode&&e.findParentNode(c,"dijitPopup")&&(c.getParent&&c.getParent()&&c.getParent().isMenuOpen&&c.getParent().isMenuOpen()||"none"!==e.getStyle(e.findParentNode(c,"dijitPopup"),"display"))},isDescendant:function(d,c){if(null==d)return!1;d.domNode&&(d=d.domNode);if(null==c)return!1;c.domNode&&(c=c.domNode);return e.isDescendantOrInLaw(d,c,function(b){if((b=h.getEnclosingWidget(b))&&g.isMenuChild(b)&&
g.isMenuOpen(b))if((b=g.getInvokingWidget(b))&&b.domNode)return b.domNode;return null},!0)},getPrimaryWidget:function(d){var c;if(d.domNode)c=d.domNode;else if(d instanceof HTMLElement)c=d;else throw Error("The input value must be a widget or HTML Element.");return c&&c.hasAttribute("data-composite-child")?h.getEnclosingWidget(e.getById(c.getAttribute("data-composite-primary-id"))):d}};return g})},"mw-utils/domUtils":function(){define(["dojo/sniff"],function(h){var e={messages:{INVALID_ELEMENT:"The input parameter must be an instance of an Element object.",
INVALID_STRING:"The input parameter must be of type 'string'.",INVALID_FOCUS_EVENT:"The input parameter must be a 'FocusEvent' object.",INVALID_STYLE:"The style specified is invalid.",INVALID_VALUE:"The value specified is invalid.",INTEGER_INDEX:"index argument expects an integer.",STRING_INDEX:"index argument expects an string.",SPOUSE_NODE:"A function which returns a spouse node if it exists must be provided."},_validateElement:function(g){if(!(g instanceof Element))throw Error(e.messages.INVALID_ELEMENT);
},_validateString:function(g){if("String"===typeof g)throw Error(e.messages.INVALID_STRING);},isLeftMouseButton:function(e){return!0===e.synthetic&&h("ie")?1===e.button:0===e.button},parseFocusEvent:function(g){if(!(g instanceof FocusEvent))throw Error(e.messages.INVALID_FOCUS_EVENT);var d={};d.lostFocusNode=g.target;d.gainedFocusNode=h("chrome")||h("safari")?g.relatedTarget:document.activeElement;d.type=g.type;d.eventdata=g;return d},getParent:function(g){e._validateElement(g);return g.parentNode},
findParentNode:function(g,d,c){var b=null,a;g.domNode&&(g=g.domNode);for(;g&&g!==window.document;){if(e.hasAttr(g,d)){b=g;break}if(e.hasAttrValue(g,d,c)){b=g;break}if(e.containsClass(g,d)){b=g;break}g=(a=e.getAttr(g,"dijitpopupparent"))?e.getById(a):g.parentNode}return b},getNodeType:function(g){e._validateElement(g);return{1:"Element",3:"Text",7:"Processing Instruction",8:"Comment",9:"Document",10:"Document Type",11:"Document Fragment"}[g.nodeType]},getById:function(g){e._validateString(g);return window.document.getElementById(g)},
getByClass:function(g){e._validateString(g);return window.document.getElementsByClassName(g)},getByAttr:function(g){e._validateString(g);return window.document.querySelectorAll("["+g+"]")},getByAttrValue:function(g,d){e._validateString(g);e._validateString(d);return window.document.querySelectorAll("["+g+"\x3d"+d.replace(/['".\\]/g,"\\$\x26").replace(/[\\]/g,"\\$\x26")+"]")},getByName:function(g){e._validateString(g);return window.document.getElementById("[name\x3d"+g+"]")},getByTag:function(g){e._validateString(g);
return window.document.getElementsByTagName(g)},getComputedStyle:function(g,d){e._validateElement(g);return d?(e._validateString(d),window.getComputedStyle(g,null)[d]):window.getComputedStyle(g,null)},getStyle:function(g,d){e._validateElement(g);e._validateString(d);if(void 0===g.style[d])throw Error(e.messages.INVALID_STYLE);return g.style[d]},setStyle:function(g,d,c){e._validateElement(g);e._validateString(d);e._validateString(c);g.style[d]=c;if(g.style[d]!==c)throw Error(e.messages.INVALID_VALUE);
},hasAttr:function(g,d){e._validateElement(g);e._validateString(d);return g.hasAttribute(d)},hasAttrValue:function(g,d,c){e._validateElement(g);e._validateString(d);e._validateString(c);return g.hasAttribute(d)&&g.getAttribute(d)===c},getAttr:function(g,d){e._validateElement(g);e._validateString(d);return g.getAttribute(d)},setAttr:function(g,d,c){e._validateElement(g);e._validateString(d);e._validateString(c);g.setAttribute(d,c)},addAttr:function(g,d){e._validateElement(g);e._validateString(d);g.setAttribute(d,
"")},removeAttr:function(g,d){e._validateElement(g);e._validateString(d);g.removeAttribute(d)},getClasses:function(g){e._validateElement(g);return g.classList?g.classList:{_element:g,_getClassArray:function(){return this._element.className.split(" ")},_updateClassName:function(d){this._element.className=d.join(" ");this.length=d.length},length:g.className.split(" ").length,item:function(d){return this._getClassArray()[d]},contains:function(d){for(var c=this._getClassArray(),b=0;b<c.length;b++)if(c[b]===
d)return!0;return!1},add:function(d){var c=this._getClassArray();c.push(d);this._updateClassName(c)},remove:function(d){var c=this._getClassArray();d=c.indexOf(d);0<=d&&(c.splice(d,1),this._updateClassName(c))},toggle:function(d){if(this.contains(d))return this.remove(d),!1;this.add(d);return!0}}},getClass:function(g,d){if(null==d||"number"!==typeof d||0>d||0!==d%1)throw Error(e.messages.INTEGER_INDEX);return e.getClasses(g).item(d)},addClass:function(g,d){if(null==d||"string"!==typeof d)throw Error(e.messages.STRING_INDEX);
return e.getClasses(g).add(d)},removeClass:function(g,d){if(null==d||"string"!==typeof d)throw Error(e.messages.STRING_INDEX);return e.getClasses(g).remove(d)},toggleClass:function(g,d){if(null==d||"string"!==typeof d)throw Error(e.messages.STRING_INDEX);return e.getClasses(g).toggle(d)},containsClass:function(g,d){if(null==d||"string"!==typeof d)throw Error(e.messages.STRING_INDEX);return e.getClasses(g).contains(d)},classCount:function(g){return e.getClasses(g).length},getChildCount:function(g){e._validateElement(g);
return g.childElementCount},getChildren:function(g){e._validateElement(g);return g.children},isDescendant:function(g,d,c){e._validateElement(g);e._validateElement(d);if(c&&g===d)return!0;for(;g&&g!==window.document;)if(g=e.getParent(g),g===d)return!0;return!1},isDescendantOrInLaw:function(g,d,c,b){var a;if("function"!==typeof c)throw Error(e.messages.SPOUSE_NODE);a=e.isDescendant(g,d,b);!1===a&&(g=c(g)||g.parentNode)&&g!==window.document&&(a=e.isDescendantOrInLaw(g,d,c,b));return a},getFirstChild:function(g){e._validateElement(g);
return!e.isContainer(g)||1>e.getChildCount(g)?null:e.getChildren(g)[0]},getLastChild:function(g){var d;e._validateElement(g);d=e.getChildCount(g);return!e.isContainer(g)||1>d?null:e.getChildren(g)[d-1]},isContainer:function(g){e._validateElement(g);return 0<e.getChildCount(g)},getAdjacentElement:function(g,d){e._validateElement(g);if(!d||0>["next","previous"].indexOf(d))d="next";return g=g[d+"Sibling"]},getElementPositionInViewPort:function(g){e._validateElement(g);g=g.getBoundingClientRect();return{x:g.left,
y:g.top,w:g.right-g.left,h:g.bottom-g.top}},getElementPositionOnPage:function(g){e._validateElement(g);g=e.getElementPositionInViewPort(g);g.x+=window.pageXOffset;g.y+=window.pageYOffset;return g},isFocusable:function(g){e._validateElement(g);return g&&!g.hasAttribute("disabled")&&(!g.hasAttribute("aria-disabled")||"true"!==g.getAttribute("aria-disabled"))&&"none"!==g.style.display&&!g.hasAttribute("data-refuse-key-nav")},isElementInViewport:function(g){var d,c,b,a;e._validateElement(g);d=g.getBoundingClientRect();
c=window.innerWidth||doc.documentElement.clientWidth;b=window.innerHeight||doc.documentElement.clientHeight;a=function(a,b){return document.elementFromPoint(a,b)};return 0>d.right||0>d.bottom||d.left>c||d.top>b?!1:g.contains(a(d.left,d.top))||g.contains(a(d.right,d.top))||g.contains(a(d.right,d.bottom))||g.contains(a(d.left,d.bottom))},_obscuredProps:{}};e._obscuredProps.sawPosAbsolute=!1;e._obscuredProps.elementPosition=null;e.isElementObscuredByParent=function(g,d){var c,b,a,f;e._validateElement(g);
f=!1;if(a=e.getParent(g))if(d||(e._obscuredProps.elementPosition=e.getElementPositionOnPage(g),e._obscuredProps.sawPosAbsolute="absolute"===window.getComputedStyle(g,null).position),c=e._obscuredProps.elementPosition,b=e._obscuredProps.sawPosAbsolute,a&&"Element"===e.getNodeType(a)&&"BODY"!==a.nodeName){var k=e.getElementPositionOnPage(a);a=window.getComputedStyle(a,null);/relative|absolute/.test(a.position)&&(b=e._sawPosAbsolute=!1);!b&&/hidden|auto|scroll/.test(a.overflow)&&(f=c.y<k.y||c.y+c.h>
k.y+k.h||c.x<k.x||c.x+c.w>k.x+k.w)}return f};e.isElementObscuredByAncestor=function(g){var d,c;e._validateElement(g);d=!1;e._obscuredProps.elementPosition=e.getElementPositionOnPage(g);for(e._obscuredProps.sawPosAbsolute="absolute"===window.getComputedStyle(g,null).position;(c=e.getParent(g))&&"Element"===e.getNodeType(c)&&"BODY"!==c.nodeName;)d=e.isElementObscuredByParent(g,!0),g=c;return d};return e})},"mw-menu/mixins/property/MaxHeightMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,
{maxHeight:800,_setMaxHeightAttr:function(e){if("number"!==typeof e)throw Error("'MaxHeight' property expects a Number!");this.domNode.style.maxHeight=e+"px";this._set("maxHeight",e)}})})},"mw-mixins/property/TagMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{tag:"",_setTagAttr:function(e){if("string"!==typeof e)throw Error("tag property expects a 'String'");this.domNode.setAttribute("data-tag",e);this._set("tag",e)},postCreate:function(){this.inherited(arguments);this.set("tag",
this.get("tag"))}})})},"mw-mixins/property/VisualFamilyMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{visualFamily:"default",_setVisualFamilyAttr:function(e){if("string"!==typeof e||0===e.length)throw Error("'visualFamily' property expects a literal non-empty string!");var g=this._getClassNameForVisualFamily(this.get("visualFamily"));this.domNode.classList.remove(g);g=this._getClassNameForVisualFamily(e);this.domNode.classList.add(g);this._set("visualFamily",e)},_getClassNameForVisualFamily:function(e){return"mw"+
e.charAt(0).toUpperCase()+e.slice(1)+"VisualFamily"}})})},"mw-mixins/mixinDependencyValidator":function(){define([],function(){return{validate:function(h){return h}}})},"mw-menu/MenuItem":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_CssStateMixin dijit/_Contained dijit/_FocusMixin mw-menu/mixins/MenuItemTextColorMixin mw-mixins/property/TagMixin mw-menu/mixins/property/CloseMenuOnClickMixin mw-mixins/property/DescriptionMixin mw-mixins/property/DisabledMixin mw-mixins/property/IconMixin mw-mixins/property/ShortcutMixin mw-menu/mixins/property/ShowDescriptionMixin mw-menu/mixins/property/ShowIconMixin mw-menu/mixins/property/ShowTextMixin mw-menu/mixins/property/ShowShortcutMixin mw-mixins/property/TextMixin mw-menu/mixins/SingleLineTextMixin mw-mixins/property/VisualFamilyMixin mw-mixins/AccessibilityClickMixin mw-mixins/PreventSelectionMixin mw-menu/mixins/FocusableMenuChildMixin mw-menu/mixins/MenuChildResizeMixin mw-mixins/mixinDependencyValidator dojo/text!./templates/MenuItem.html".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,B,F,G,H){return h(G.validate([e,g,d,c,b,f,k,l,n,p,m,q,r,s,t,u,v,w,a,x,A,B,F]),{baseClass:"mwWidget mwSharedMenuItem mwMenuItem",templateString:H,closeMenuOnClick:!0,_emitClickEvent:function(){this.emit("click",{mwEventData:{value:this.get("text")},_dojo_click:!0})},_qeClick:function(){this._emitClickEvent()}})})},"mw-menu/mixins/MenuItemTextColorMixin":function(){define(["dojo/_base/declare","mw-mixins/property/DescriptionMixin","mw-menu/mixins/property/ShowDescriptionMixin"],
function(h,e,g){h=h(null,{_setDescriptionAttr:function(d){this.inherited(arguments);""!==d?this.textNode.classList.add("mwBlueText"):this.textNode.classList.remove("mwBlueText")},_setShowDescriptionAttr:function(d){this.inherited(arguments);d?this.textNode.classList.add("mwBlueText"):this.textNode.classList.remove("mwBlueText")},postCreate:function(){this.inherited(arguments);(this.get("showDescription")&&""===this.get("description")||!this.get("showDescription")&&""!==this.get("description"))&&this.textNode.classList.remove("mwBlueText")}});
h._dependencies=[{mixin:e,orderDependent:!0},{mixin:g,orderDependent:!0}];return h})},"mw-mixins/property/DescriptionMixin":function(){define(["dojo/_base/declare","mw-event-utils/platformize"],function(h,e){return h(null,{description:"",postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwDescriptionMixin");this.set("description",this.get("description"))},_setDescriptionAttr:function(e){if("string"!==typeof e)throw Error("'description' property expects a literal string!");
this._updateDescription(e);this._set("description",e)},_updateDescription:function(e){this._lastKnownDescription=e;if(this.descriptionNode)this.descriptionNode.textContent=e,!1===this.get("showDescription")?this.domNode.classList.add("mwHideDescription"):""===e?this.domNode.classList.add("mwHideDescription"):this.domNode.classList.remove("mwHideDescription");else{var d=this;setTimeout(function(){d._destroyed||d._updateTitle(e)},200)}},_updateTitle:function(g,d){var c;d?(""!==g&&void 0!==g&&(g=""===
this._lastKnownDescription?g:" ("+g+")"),c=this._lastKnownDescription+g):c=this.get("shortcut")?g?g+" ("+e.getPlatformSpecificString(this.get("shortcut"))+")":e.getPlatformSpecificString(this.get("shortcut")):g;this.domNode.setAttribute("title",c)}})})},"mw-menu/mixins/property/ShowDescriptionMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{showDescription:!0,postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwShowDescriptionMixin")},_setShowDescriptionAttr:function(e){if("boolean"!==
typeof e)throw Error("'showDescription' property expects a Boolean!");!1===e?this.domNode.classList.add("mwHideDescription"):this.descriptionNode&&""===this.descriptionNode.textContent?this.domNode.classList.add("mwHideDescription"):this.domNode.classList.remove("mwHideDescription");this._set("showDescription",e)}})})},"mw-menu/mixins/property/CloseMenuOnClickMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/on","dijit/popup"],function(h,e,g,d){return h(null,{closeMenuOnClick:!1,
postCreate:function(){this.inherited(arguments);this.own(g(this.domNode,"change",e.hitch(this,"_onChange")));this.domNode.classList.add("mwCloseMenuOnClickMixin");this.set("closeMenuOnClick",this.get("closeMenuOnClick"))},_setCloseMenuOnClickAttr:function(c){if("boolean"!==typeof c)throw Error("'closeMenuOnClick' property expects a Boolean!");this._set("closeMenuOnClick",c);c?this.domNode.classList.add("mwClosePopupOnClick"):this.domNode.classList.remove("mwClosePopupOnClick")},_onChange:function(){this.get("closeMenuOnClick")&&
(d.close(),this.emit("closeRequest"))}})})},"mw-mixins/property/DisabledMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{disabled:!1,postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwDisabledMixin");this.set("disabled",this.get("disabled"));this._addDisableListener(this.domNode,this._disableInteractionHandler.bind(this))},startup:function(){this.inherited(arguments);this.get("disabled")&&(this.domNode.dojoClick=!1)},destroy:function(){this.domNode&&
this._removeDisableListener(this.domNode,this._disableInteractionHandler.bind(this));this.inherited(arguments)},_disableInteractionHandler:function(e){this.get("disabled")&&e.stopImmediatePropagation()},_addDisableListener:function(e,g){e.addEventListener("mousedown",g,!0);e.addEventListener("click",g,!0)},_removeDisableListener:function(e,g){e.removeEventListener("mousedown",g,!0);e.removeEventListener("click",g,!0)},_updateDisableNode:function(e){e?(this.domNode.classList.add("mwDisabled"),this.domNode.classList.remove("mwEnabled")):
(this.domNode.classList.add("mwEnabled"),this.domNode.classList.remove("mwDisabled"))},_setDisabledAttr:function(e){if("boolean"!==typeof e)throw Error("'disabled' property expects a boolean!");this._set("disabled",e);this._updateDisableNode(e);this.set("hovering",!1);this.set("active",!1);this._setAriaDisabled();this.baseClass.split(" ").forEach(function(g){e?this.domNode.classList.add(g+"Disabled"):this.domNode.classList.remove(g+"Disabled")}.bind(this));e?this.domNode.classList.add("dijitDisabled"):
this.domNode.classList.remove("dijitDisabled");this._setTabIndexOnNode(this.focusNode)},_setTabIndexOnNode:function(e){this.get("disabled")&&!this.get("dropDownNeverDisabled")?e.removeAttribute("tabIndex"):e.setAttribute("tabIndex","0")},_setAriaDisabled:function(){(this.disabledNode?this.disabledNode:this.domNode).setAttribute("aria-disabled",this.get("disabled")&&!this.get("dropDownNeverDisabled")?"true":"false")}})})},"mw-mixins/property/IconMixin":function(){define(["dojo/_base/declare","dojo/_base/lang",
"dojo/dom-construct","dojo/on"],function(h,e,g,d){return h(null,{_iconTypes:{DATA_URI:"data_uri",CSS_CLASS:"css_class"},icon:"",_lastIconApplied:"",postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwIconMixin");this.set("icon",this.get("icon"))},_setIconAttr:function(c){if("string"!==typeof c)throw Error("'icon' property expects a literal string!");this._set("icon",c);this._updateDOM(c)},_updateDOM:function(c){this._removeOldIcon();this._applyNewIcon(c)},_removeOldIcon:function(){var c=
this._lastIconApplied,b=this._getIconType(c);b===this._iconTypes.DATA_URI?this._removeImageStyles(this.iconNode):b===this._iconTypes.CSS_CLASS&&""!==c&&c.trim().split(" ").forEach(function(a){this.iconNode.classList.remove(a)},this)},_applyNewIcon:function(c){var b=this._getIconType(c);if(b===this._iconTypes.DATA_URI){var a=g.create("img",{src:c});this.own(d.once(a,"load",e.hitch(this,function(){this._applyImageStyles(this.iconNode,c,a);this.emit("iconapplied");this.emit("updatelayout");g.destroy(a)})))}else b===
this._iconTypes.CSS_CLASS&&""!==c&&c.trim().split(" ").forEach(function(a){this.iconNode.classList.add(a)},this);0===c.length?this.domNode.classList.add("mwNoIcon"):this.domNode.classList.remove("mwNoIcon");this._lastIconApplied=c},_getIconType:function(c){var b="";return b=-1<c.indexOf("data:")?this._iconTypes.DATA_URI:this._iconTypes.CSS_CLASS},_applyImageStyles:function(c,b,a){c.style.backgroundImage="url("+b+")";c.style.width=a.width+"px";c.style.height=a.height+"px"},_removeImageStyles:function(c){c.style.backgroundImage=
"";c.style.width="";c.style.height=""}})})},"mw-mixins/property/ShortcutMixin":function(){define(["dojo/_base/declare","mw-event-utils/platformize","mw-mixins/property/DescriptionMixin"],function(h,e,g){h=h(null,{shortcut:"",platformizeShortcut:!0,postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwShortcutMixin");this.set("shortcut",this.get("shortcut"))},_setShortcutAttr:function(d){if("string"!==typeof d)throw Error("'shortcut' property expects a literal string!");this._updateShortcut(d);
this._set("shortcut",d)},_updateShortcut:function(d){this.shortcutKeyNode?(this.shortcutKeyNode.textContent=this._getPlatformizedShortcut(d),!1===this.get("showShortcut")?this.domNode.classList.add("mwHideShortcut"):""===d?this.domNode.classList.add("mwHideShortcut"):this.domNode.classList.remove("mwHideShortcut")):this._updateTitle(this._getPlatformizedShortcut(d),!0)},_getPlatformizedShortcut:function(d){return this.get("platformizeShortcut")?e.getPlatformSpecificString(d):d},_setPlatformizeShortcutAttr:function(d){if("boolean"!==
typeof d)throw Error("'platformizeShortcut' property expects a boolean value!");this._set("platformizeShortcut",d);this._updateShortcut(this.get("shortcut"))}});h._dependencies=[{mixin:g,orderDependent:!0,type:"shortcut"}];return h})},"mw-menu/mixins/property/ShowIconMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{showIcon:!0,postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwShowIconMixin")},_setShowIconAttr:function(e){if("boolean"!==typeof e)throw Error("'showIcon' property expects a Boolean!");
e?this.domNode.classList.remove("mwHideIcon"):this.domNode.classList.add("mwHideIcon");this._set("showIcon",e)}})})},"mw-menu/mixins/property/ShowTextMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{showText:!0,postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwShowTextMixin")},_setShowTextAttr:function(e){if("boolean"!==typeof e)throw Error("'showText' property expects a Boolean!");e?this.domNode.classList.remove("mwHideText"):this.domNode.classList.add("mwHideText");
this._set("showText",e)}})})},"mw-menu/mixins/property/ShowShortcutMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{showShortcut:!0,postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwShowShortcutMixin")},_setShowShortcutAttr:function(e){if("boolean"!==typeof e)throw Error("'showShortcut' property expects a Boolean!");!1===e?this.domNode.classList.add("mwHideShortcut"):this.shortcutNode&&""===this.shortcutNode.textContent?this.domNode.classList.add("mwHideShortcut"):
this.domNode.classList.remove("mwHideShortcut");this._set("showShortcut",e)}})})},"mw-mixins/property/TextMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{text:"",postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwTextMixin");this.set("text",this.get("text"))},_setTextAttr:function(e){if("string"!==typeof e)throw Error("'text' property expects a literal string!");this._updateTextInDOM(e);this._set("text",e)},_updateTextInDOM:function(e){this._placeTextInNode(e);
0===this._getTextForDOM(e).length?this.domNode.classList.add("mwNoText"):this.domNode.classList.remove("mwNoText")},_placeTextInNode:function(e,g){void 0===g&&(g=this.textNode);for(;g.firstChild;)g.removeChild(g.firstChild);var d=this._getTextForDOM(e,g);if(0<d.length){var c=document.createElement("span");c.classList.add("mwTextLine");c.textContent=d;g.appendChild(c);g.classList.remove("mwEmptyNode")}else g.classList.add("mwEmptyNode")},_getTextForDOM:function(e){return e}})})},"mw-menu/mixins/SingleLineTextMixin":function(){define(["dojo/_base/declare",
"mw-mixins/property/TextMixin"],function(h,e){var g=h(null,{_getTextForDOM:function(d){d=this.inherited(arguments);return d=d.replace(/\n/g," ")}});g._dependencies=[{mixin:e,orderDependent:!0}];return g})},"mw-mixins/AccessibilityClickMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/on","dojo/keys"],function(h,e,g,d){return h(null,{postCreate:function(){this.inherited(arguments);this.own(g(this.domNode,"keydown",e.hitch(this,function(c){c.keyCode===d.SPACE&&-1===Array.prototype.slice.call(this.domNode.classList).indexOf("mwComboBox")&&
c.preventDefault();setTimeout(e.hitch(this,function(){if(!0!==this.get("disabled"))switch(c.keyCode){case d.ENTER:this._emitClickEvent(c);break;case d.SPACE:this._emitClickEvent(c)}}),0)})));this.own(g(this.domNode,"keyup",e.hitch(this,function(c){var b=c.keyCode===d.ENTER||c.keyCode===d.SPACE,a=/input|button|textarea/i.test(c.target.nodeName);b&&!a&&c.stopPropagation()})))},_emitClickEvent:function(c){g.emit(c.target,"click",{bubbles:!0,cancelable:!0,mwEventData:{keyCode:c.keyCode},_dojo_click:!0})},
_qeClick:function(){this.emit("click")}})})},"mw-mixins/PreventSelectionMixin":function(){define(["dojo/_base/declare","dojo/on"],function(h,e){return h(null,{postCreate:function(){this.inherited(arguments);this._getNonSelectableNodes().forEach(function(g){e(g,"selectstart",function(d){if((document.documentMode||"Netscape"===navigator.appName&&-1===navigator.appVersion.indexOf("Trident"))&&("INPUT"!==d.target.nodeName||"TEXTAREA"!==d.target.nodeName))return!1;d.preventDefault()})})},_getNonSelectableNodes:function(){return[this.domNode]}})})},
"mw-menu/mixins/FocusableMenuChildMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/dom dojo/on dojo/mouse dojo/touch dijit/focus dijit/registry mw-dom-utils/domUtils".split(" "),function(h,e,g,d,c,b,a,f,k,l){return h(null,{postCreate:function(){this.inherited(arguments);var f=g("touch")&&!window.PointerEvent;this.own(c(this.domNode,"click",e.hitch(this,"_onMouseClick")),c(this.domNode,f?a.release:"mouseup",e.hitch(this,"_onMouseUp")),c(this.domNode,b.enter,e.hitch(this,"_onMouseEnter")),
c(this.domNode,"focusout",e.hitch(this,"_focusLost")));this.domNode.classList.add("mwFocusableMenuChildMixin")},_focusLost:function(a){setTimeout(e.hitch(this,function(){var b,c=l.parseFocusEvent(a).gainedFocusNode,f=k.getEnclosingWidget(c);if(f&&(b=f.focusNode||f.domNode)&&b.hasAttribute("data-composite-child"))if(f=k.getEnclosingWidget(d.byId(b.getAttribute("data-composite-primary-id"))),f===this)return;this!==f&&(b=this.getParentWidget(),(null==f||l.isFocusable(c))&&(b&&b._focusChange)&&b._focusChange(f),
this.focusLost&&this.focusLost(f))}),0)},_onMouseClick:function(a){a.mwEventData?(this.focus(),this.closeMenuOnClick&&this._requestClose(!1)):(a.preventDefault(),a.stopImmediatePropagation())},_onMouseEnter:function(a){this.focusNode&&l.isFocusable(this.focusNode)&&this.focus()},_onMouseUp:function(a){a.preventDefault();a.stopPropagation();!(this.getParentWidget()&&!0===this.getParentWidget()._mouseDownTriggered)&&l.isFocusable(this.focusNode)&&this._emitClickEvent&&(l.isLeftMouseButton(a)||"dojotouchend"===
a.type)&&this._emitClickEvent(a)},_requestClose:function(a){var b=this.getParentWidget();null!=b&&b.closeRequest&&(b._closeEventData?b._closeEventData.mwEventData?b._closeEventData.mwEventData.gainedFocusWidget=null:b._closeEventData.mwEventData={gainedFocusWidget:null}:b._closeEventData={mwEventData:{gainedFocusWidget:null}},b.closeRequest(a?a:!1))},focus:function(){this.inherited(arguments);l.isFocusable(this.focusNode)&&(f.focus(this.focusNode||this.domNode),(this.focusNode||this.domNode).focus())},
getParentWidget:function(a){if(null==a)if(this.domNode)a=this.domNode;else return null;a.domNode&&(a=a.domNode);if(a.parentNode)a=l.getParent(a);else return null;return k.getEnclosingWidget(a)}})})},"mw-menu/mixins/MenuChildResizeMixin":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(h,e){var g="icon text shortcut description showIcon showText showShortcut showDescription".split(" ");return h(null,{postCreate:function(){this.inherited(arguments);this.watch(e.hitch(this,function(d,
c,b){-1<g.indexOf(d)&&("icon"!==d||this._getIconType(b)!==this._iconTypes.DATA_URI)&&this.emit("updatelayout")}));this.domNode.classList.add("mwMenuChildResizeMixin")}})})},"mw-navigationbar/NavigationBar":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom dojo/Evented dojo/on dojo/query dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dijit/_TemplatedMixin dijit/layout/_LayoutWidget dojo/text!./templates/navigationBar.html mw-navigationbar/BreadCrumbsModule mw-navigationbar/ActionToolbar mw-overlay-utils/BusyOverlay ./toolbaractions/BackNavigationAction ./toolbaractions/DataSource ./toolbaractions/ForwardNavigationAction".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v){return h([p,n,d],{templateString:m,constructor:function(a){a=a||{};this.currentLocation=a.currentLocation;this.visitedLocations=[];this._breadCrumbObjectsArray=a.metaData.breadCrumbObjectsArray;this.getChildNodes=a.getChildNodes;this.dataSource=new u;this.metaData=a.metaData;this._userActionsList=a.userActionsList;""!=this.currentLocation&&this.dataSource.addToDataList(this.currentLocation);this.hasChildren=a.metaData&&a.metaData.hasChildren?a.metaData.hasChildren:
!1},postCreate:function(b){this.inherited(arguments);this.currentLocationNode.textContent="";a.set(this.currentLocationNode,"data-tag",this.currentLocation);this._setLocationIcon(this.metaData.locationIcon);this._initializeNavigationActions();this._initializeBreadCrumbsModule();c(this,"rebuildLocationNode",this._rebuildLocationNode);this.busySpinner=new s(s.SIZE.SMALL);c(this.dataSource,"dataSourceMoved",e.hitch(this,function(a){this.navigatingBackOrForward=!0;this.emit("locationChanged",a)}))},startup:function(){this.inherited(arguments);
this.resize()},_setLocationIcon:function(a){this.iconNode.setAttribute("style","background-image: url('"+a+"')");this.iconNode.setAttribute("title",this.currentLocation)},resizeWidget:function(a){this.resize()},_initializeNavigationActions:function(){this._actionsList=[];var a=this._getBackButtonAction(),b=this._getForwardButtonAction();this._actionsList.push(a);this._actionsList.push(b);if(this._userActionsList)for(a=0;a<this._userActionsList.length;a++)this._actionsList.push(this._userActionsList[a]);
this.actionToolbar=new r({actionsList:this._actionsList,navigationBarNode:this.navigationBarNode})},_initializeBreadCrumbsModule:function(){this.breadCrumbsModule=new q({breadCrumbObjectsArray:this._breadCrumbObjectsArray,getChildNodes:this.getChildNodes,hasChildren:this.hasChildren});c(this.breadCrumbsModule,"locationChanged",e.hitch(this,function(a){this.navigatingBackOrForward=!1;this.emit("locationChanged",a)}));k.place(this.breadCrumbsModule.breadCrumbsParentNode,this.currentLocationNode)},_getBackButtonAction:function(){return new t({dataSource:this.dataSource})},
_getForwardButtonAction:function(){return new v({dataSource:this.dataSource})},getCurrentLocation:function(){return this.currentLocation},setCurrentLocation:function(b,f){this.currentLocation=b;this.hasChildren=f.hasChildren;this.metaData.locationIcon=f.locationIcon;var c=this.breadCrumbsModule.buildLocationNode(f.breadCrumbObjectsArray,f.hasChildren);a.set(this.currentLocationNode,"data-tag",this.currentLocation);k.place(c,this.currentLocationNode);this._setLocationIcon(f.locationIcon);this.getChildNodes&&
this.breadCrumbsModule.menu.isMenuOpen()&&this.breadCrumbsModule.closeBreadCrumbMenu();this.navigatingBackOrForward||this.dataSource.addToDataList(b);this.navigatingBackOrForward=!1;this.dataSource.deferred&&!this.dataSource.deferred.isResolved()&&this.dataSource.deferred.resolve(b)},_rebuildLocationNode:function(){var a=this.breadCrumbsModule.rebuildLocationNode(this.hasChildren);k.place(a,this.currentLocationNode);this.isBusy&&this.removeBusyMode()},isNavigatingBackOrForward:function(){return this.navigatingBackOrForward},
reset:function(){this.navigatingBackOrForward=!1;this.dataSource.setOldLocationNode()},showBusyAffordance:function(){this.isBusy=!0;this._showSpinnerInIconNode()},removeBusyMode:function(){this.isBusy=!1;this._removeSpinnerInIconNode()},_showSpinnerInIconNode:function(){this._setLocationIcon("");this.busySpinner.set("target",this.iconNode);this.busySpinner.show()},_removeSpinnerInIconNode:function(){this.busySpinner&&this.busySpinner.hide();this._setLocationIcon(this.metaData.locationIcon)}})})},
"mw-navigationbar/BreadCrumbsModule":function(){define("dojo/_base/declare dojo/_base/Deferred dojo/_base/lang dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-class dojo/Evented dojo/keys dojo/on dojo/dom-style dijit/popup mw-menu/Menu mw-menu/MenuItem mw-form/SplitButton".split(" "),function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r){return h([f],{constructor:function(f){this.breadCrumbObjectsArray=f.breadCrumbObjectsArray;this.breadCrumbsParentNode=b.create("div");a.add(this.breadCrumbsParentNode,"breadCrumbsParentNode");
this.getChildNodes=f.getChildNodes;this._hasDynamicMenu="function"===typeof f.getChildNodes;this.buildLocationNode(this.breadCrumbObjectsArray,f.hasChildren);this.menu=new m({style:"display: none;"})},rebuildLocationNode:function(a){return this.buildLocationNode(this.breadCrumbObjectsArray,a)},buildLocationNode:function(a,f){this.breadCrumbObjectsArray=a;b.empty(this.breadCrumbsParentNode);return this._renderBreadCrumbs(this.breadCrumbObjectsArray,f)},_renderBreadCrumbs:function(a,f){if(0<a.length){for(var c=
0;c<a.length;c++){var d=this._buildBreadCrumbs(a[c]);c===a.length-1&&!f&&b.destroy(d.focusNode);d.startup();d.placeAt(this.breadCrumbsParentNode)}return this.breadCrumbsParentNode}},_buildBreadCrumbs:function(b){var f=new r({hasDynamicMenu:this._hasDynamicMenu});f.set("text",b.textToDisplay);c.set(f.domNode,"data-test-id",b.textToDisplay);f.on("click",g.hitch(this,function(a){a.stopPropagation();a.preventDefault();a=dijit.registry.getEnclosingWidget(a.target).domNode.getAttribute("path");this.emit("locationChanged",
a)}));this._hasDynamicMenu&&this._setArrowNodeListeners(f);a.add(f.arrowIconNode,"arrowIconNode");a.add(f.dropDownNode,"breadCrumbDropDownNode");c.set(f.domNode,"path",b.pathToNavigateOnClick);return f},_setArrowNodeListeners:function(b){b.on("blur",g.hitch(b,function(){a.add(this.arrowIconNode,"arrowIconNode")}));b.on("dropdownclick",g.hitch(this,function(a){a=dijit.registry.getEnclosingWidget(a.target);this._toggleDropdownState(a)}))},_toggleDropdownState:function(a){a.arrowIconNode.classList.contains("arrowIconNode")?
(0<this.menu.getChildren().length&&this.menu.isMenuOpen()&&this.closeBreadCrumbMenu(),this._switchButtonToDropDownState(a)):this._switchButtonToNormalState(a)},closeBreadCrumbMenu:function(){p.close(this.menu)},_switchButtonToNormalState:function(b){b=b.arrowIconNode;a.remove(b,"downArrowIconNode");a.add(b,"arrowIconNode")},_switchButtonToDropDownState:function(b){var f=b.arrowIconNode;a.remove(f,"arrowIconNode");a.add(f,"downArrowIconNode");this._populateMenuItems(b)},_listSub:function(b,f){if(0<
f.length&&!b.arrowIconNode.classList.contains("arrowIconNode")){this.menu.destroyDescendants();for(var c=this,d=0;d<f.length;d++){var e=new q({text:f[d].label,path:f[d].path,icon:"iconMenuDropdown"});n.set(e.iconNode,"background-image","url(' "+f[d].icon+"')");e.set("data-tag",f[d].label);a.add(e.domNode,"navBarDropDownMenu");var k=b.domNode.getAttribute("path");this._highlightMenuItemIfItIsInCurrentLocation(k,e);e.on("click",g.hitch(e,function(a){a=dijit.registry.getEnclosingWidget(a.target);c.emit("locationChanged",
a.path)}));this.menu.addChild(e)}this.menu.on("close",g.hitch(b,function(){a.remove(b.arrowIconNode,"downArrowIconNode");a.add(b.arrowIconNode,"arrowIconNode")}));b.set("menu",this.menu);b.set("aroundNode",b.dropDownNode);b.showMenu()}},_highlightMenuItemIfItIsInCurrentLocation:function(b,f){for(var c=0;c<this.breadCrumbObjectsArray.length;c++)this.breadCrumbObjectsArray[c].pathToNavigateOnClick===b&&this.breadCrumbObjectsArray[c+1]&&this.breadCrumbObjectsArray[c+1].pathToNavigateOnClick===f.path&&
a.add(f.textNode.getElementsByClassName("mwTextLine")[0],"highlightMenuItem")},_populateMenuItems:function(a){var b=this.getChildNodes({path:a.domNode.getAttribute("path")}),f=this;b.path=a.domNode.getAttribute("path");this.context=b;e.when(b.listFolderComplete,function(b){if(a.arrowIconNode.classList.contains("downArrowIconNode"))return f._listSub(a,b.folders),b})}})})},"mw-menu/Menu":function(){define("dojo/_base/declare dijit/focus dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Container mw-menu/mixins/KeyNavMixin mw-menu/mixins/OnOpenMixin mw-menu/mixins/OnCloseMixin mw-menu/mixins/ContainerFocusMixin mw-menu/mixins/MenuFocusMixin mw-menu/mixins/property/MaxHeightMixin mw-mixins/property/TagMixin mw-mixins/property/DestroyedMixin mw-mixins/property/VisualFamilyMixin mw-mixins/mixinDependencyValidator dojo/text!./templates/Menu.html".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s){return h(r.validate([g,b,d,c,p,a,f,k,l,n,m,q]),{baseClass:"mwWidget mwMenu",templateString:s,_defaultContextMenuBlocker:function(a){a.preventDefault()},_getTargetNode:function(a){a.hasAttribute("data-composite-child")&&(a=document.getElementById(a.getAttribute("data-composite-primary-id")));return a},isMenuOpen:function(){return this.domNode&&this.domNode.parentElement?"none"!==this.domNode.parentElement.style.display:!1}})})},"mw-mixins/property/DestroyedMixin":function(){define(["dojo/_base/declare"],
function(h){return h(null,{_destroyed:!1,destroy:function(){this._set("_destroyed",!0);this.inherited(arguments)},isDestroyed:function(){return this.get("_destroyed")}})})},"mw-form/SplitButton":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_Contained dijit/_FocusMixin dijit/_TemplatedMixin mw-mixins/property/TagMixin mw-mixins/property/MenuMixin mw-mixins/property/HasDynamicMenuMixin mw-mixins/property/DescriptionMixin mw-mixins/property/DisabledMixin mw-mixins/property/IconAlignmentMixin mw-mixins/property/IconMixin mw-mixins/property/ArrowModeMixin mw-mixins/property/SizeMixin mw-mixins/property/TabIndexNodesMixin mw-mixins/property/TextMixin mw-mixins/property/VisualFamilyMixin mw-mixins/property/ValidationMixin mw-mixins/AccessibilityClickMixin mw-mixins/PreventSelectionMixin mw-mixins/ResizeMixin mw-form/mixins/property/DropDownButtonIconAlignmentMixin mw-form/mixins/property/DropDownButtonArrowModeMixin mw-form/mixins/property/DropDownButtonTextMixin mw-form/mixins/property/DropDownButtonSizeMixin mw-form/mixins/property/DropDownNeverDisabledMixin mw-form/mixins/SplitButtonToggleSplitButtonMenuMixin mw-form/mixins/SplitButtonToggleSplitButtonFocusMixin mw-mixins/mixinDependencyValidator dojo/text!mw-form/templates/DropDownButton.html".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,B,F,G,H,I,K,C,M){return h(C.validate([e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,B,F,G,H,I,K]),{baseClass:"mwWidget mwSplitButton",templateString:M,cssStateNodes:{buttonNode:"mwButtonNode",dropDownNode:"mwDropDownNode"},_qeClick:function(){this.emit("click")}})})},"mw-mixins/property/MenuMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom dojo/dom-geometry dojo/has dojo/keys dojo/on dojo/touch dijit/focus dijit/popup dijit/Viewport dijit/_WidgetBase mw-ddux/UsageLogger".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q){var r={left:[0],center:[1],right:[2],all:[0,1,2],none:[]},s=function(a){if(!0===a.synthetic&&window.syn&&-1!==a.type.indexOf("mouse"))switch(a.button){case window.syn.mouse.browser.left[a.type].button:return 0;case window.syn.mouse.browser.right[a.type].button:return 2;default:return 1}else return a.button},t={down_arrow:[a.DOWN_ARROW],right_arrow:[a.RIGHT_ARROW],left_arrow:[a.LEFT_ARROW],up_arrow:[a.UP_ARROW],enter:[a.ENTER],space:[a.SPACE],a11y:[a.ENTER,a.SPACE],
down_arrow_a11y:[a.DOWN_ARROW,a.ENTER,a.SPACE],right_arrow_a11y:[a.RIGHT_ARROW,a.ENTER,a.SPACE],left_arrow_a11y:[a.LEFT_ARROW,a.ENTER,a.SPACE],up_arrow_a11y:[a.UP_ARROW,a.ENTER,a.SPACE],none:[]},u={below:["below","below-alt"],vertical:["below","below-alt","above","above-alt"],horizontal:["after","before"]};return h(null,{menu:null,menuNode:null,aroundNode:null,_clickButtons:r.left,_keyPressButtons:t.a11y,_menuOrientation:u.vertical,_setMenuAttr:function(a){this._validateMenuAttr(a);this._set("menu",
a)},_validateMenuAttr:function(a){if(null!==a&&!(a instanceof m))throw Error("'menu' property expects a widget");},_setMenuNodeAttr:function(a){if(!(a instanceof HTMLElement))throw Error("'menuNode' property expects a DOM node.");a?this._set("menuNode",a):this._set("menuNode",this.focusNode||this.domNode)},_setAroundNodeAttr:function(a){if(!(a instanceof HTMLElement))throw Error("'aroundNode' property expects a DOM node.");a?this._set("aroundNode",a):this._set("aroundNode",this.domNode)},_setClickButtonsAttr:function(a){if("string"!==
typeof a||-1===r.hasOwnProperty(a))throw Error("'clickButtons' property expects one of these values: "+Object.keys(r));this._set("_clickButtons",r[a])},_setKeyPressButtonsAttr:function(a){if("string"!==typeof a||-1===t.hasOwnProperty(a))throw Error("'keyPressButtons' property expects one of these values: "+Object.keys(t));this._set("_keyPressButtons",t[a])},_setMenuOrientationAttr:function(a){if("string"!==typeof a||-1===u.hasOwnProperty(a))throw Error("'menuOrientation' property expects one of these values: "+
Object.keys(u));this._set("_menuOrientation",u[a])},postCreate:function(){var a;this.inherited(arguments);this.domNode.classList.add("mwMenuMixin");this.menuNode=this.menuNode||this.focusNode||this.domNode;this.aroundNode=this.aroundNode||this.domNode;a=b("touch")&&!window.PointerEvent;this.own(f(this.menuNode,a?k.press:"mousedown",e.hitch(this,"_onPress")),f(this.menuNode,"mousedown",e.hitch(this,"_onMouseDown")),f(this.menuNode,"keydown",e.hitch(this,"_onKeyDown")),f(this.menuNode,"keyup",e.hitch(this,
"_onKeyUp")),f(this.domNode,"click",e.hitch(this,"_onMouseClick")),this.watch("disabled",e.hitch(this,function(a,b,f){f&&this._handleClosingPopup(!1)})))},_onPress:function(a){var b=-1<this._clickButtons.indexOf(s(a))||"touchstart"===a.type,f=!this.isMenuOpen()||this._closeMenuOnParentClick();this.get("menu")&&(this.get("menu")._lastPressEvent=a);b&&f?(this.get("menu")&&(this.get("menu")._mouseDownTriggered=!0,setTimeout(e.hitch(this,function(){this.get("menu")&&"_mouseDownTriggered"in this.get("menu")&&
delete this.get("menu")._mouseDownTriggered}),300)),this.isMenuOpen()||(b={eventType:a&&a.keyStroke?"keypress":"click",elementId:this.tag,elementType:"drop_down"},a&&a.keyStroke&&(b.keyStroke=a.keyStroke),q.logEvent(b,this.domNode)),this.toggleMenu(a.target)):this.isMenuOpen()&&(a.preventDefault(),a.stopImmediatePropagation())},_onMouseDown:function(a){this.inherited(arguments);var b=this.get("menu")&&"_mouseDownTriggered"in this.get("menu"),f=this.get("menu")&&"_lastPressEvent"in this.get("menu")&&
"touchstart"===this.get("menu")._lastPressEvent.type;if(this.isMenuOpen()||b&&f)a.preventDefault(),a.stopImmediatePropagation()},_onMouseClick:function(a){this.get("menu")&&"_mouseDownTriggered"in this.get("menu")&&delete this.get("menu")._mouseDownTriggered;this.inherited(arguments);d.isDescendant(a.target,this.menuNode)&&a.stopImmediatePropagation()},_onKeyDown:function(b){this.inherited(arguments);if(!this.get("disabled")||this.get("dropDownNeverDisabled"))if(b.keyCode===a.ESCAPE)this.domNode.classList.contains("mwFocusableMenuChildMixin")?
this.closeMenu(!1):this.closeMenu(!0);else if(-1<this._keyPressButtons.indexOf(b.keyCode)&&(!this.isMenuOpen()||this._closeMenuOnParentClick()&&this.isMenuOpen()))this._toggleOnKeyUp=!0},_onKeyUp:function(a){this.inherited(arguments);this._toggleOnKeyUp&&(delete this._toggleOnKeyUp,(!this.isMenuOpen()||this.closeMenuOnClick)&&this.toggleMenu(a.target))},_onBlur:function(){this.isMenuOpen()&&(this.get("menu")._invokingWidget===this&&!this.get("menu").domNode.classList.contains("mwMenu")&&!this.get("menu").domNode.classList.contains("mwSectionPopup")&&
!this.get("menu").domNode.classList.contains("galleryPopup"))&&(d.isDescendant(document.activeElement,this.domNode)?this.closeMenu(!0):this.closeMenu(!1));this.inherited(arguments)},_qeDropDownClick:function(){this.toggleMenu()},toggleMenu:function(a){a=a||this.menuNode;a=a.domNode||a;d.isDescendant(a,this.menuNode)&&(this.isMenuOpen()?this.closeMenu(!0):this.openMenu())},openMenu:function(){this._showMenu()},_showMenu:function(){null!=this.get("menu")&&setTimeout(e.hitch(this,function(){var a,b,
d=this;if(null!=d.get("menu")){null==this.aroundNode&&(b=a=0);"_invokingWidget"in this.get("menu")&&this.get("menu")._invokingWidget&&(this.get("menu")._lastInvokingWidget=this.get("menu")._invokingWidget);this.get("menu")._invokingWidget=this;this.domNode.classList.add("mwHasMenuOpened");this.get("menu")._onPositionListener=g.around(c,"position",function(a){return function(b,f){var c="ontouchstart"in window||navigator.maxTouchPoints,d=document.body.clientWidth>window.innerWidth;return f&&c&&d?a(b,
!1):a(b,f)}});this.get("menu").own(this.get("menu")._onPositionListener);n.open({parent:this,popup:d.get("menu"),x:a,y:b,around:d.aroundNode,orient:d._menuOrientation,maxHeight:d.get("maxHeight"),onCancel:function(){if(d.domNode.classList.contains("mwFocusableMenuChildMixin")){var a=d.getParent();d.closeMenu(!1);a._closeEventData={mwEventData:{gainedFocusWidget:null}};a.closeRequest(!1)}else d.closeMenu(!0)},onClose:function(){d.get("menu")&&"_lastInvokingWidget"in d.get("menu")?(null!=d.get("menu")._lastInvokingWidget&&
d._cleanUpAfterClose(d,!0),delete d.get("menu")._lastInvokingWidget):d._cleanUpAfterClose(d,!1);d.get("menu")&&"_onPositionListener"in d.get("menu")&&(d.get("menu")._onPositionListener.remove(),delete d.get("menu")._onPositionListener)}});var e=d.own(f(p,"resize",function(){d.getParentWidget?d.closeMenu(!1):d.closeMenu(!0);e.length?[].slice.call(e).forEach(function(a){a.remove()}):e.remove()}))}}),0)},closeMenu:function(a){var b=this._handleClosingPopup(a);this._handleFocusOnClose(a,b)},_handleClosingPopup:function(a){if(this.isMenuOpen()){if(this.get("menu")){this.get("menu").getChildren().forEach(function(b){"menu"in
b&&b.isMenuOpen()&&(b.get("menu")._closeEventData=this._closeEventData,b.closeMenu(a))},this);var b=this.get("menu")._closeEventData;n.close(this.get("menu"));return b}}else if(this.get("menu"))return this.get("menu")._closeEventData},_handleFocusOnClose:function(a,b){!0===a?this.focus?this.focus():l.focus(this.focusNode||this.domNode):b&&"mwEventData"in b&&"gainedFocusWidget"in b.mwEventData&&b.mwEventData.gainedFocusWidget?l.focus(b.mwEventData.gainedFocusWidget.focusNode||b.mwEventData.gainedFocusWidget.domNode):
l.focus(document.body)},startup:function(){if(!this._started){if(!this.get("menu")&&this.srcNodeRef){var a=query("[widgetId]",this.srcNodeRef)[0];a&&this.set("menu",registry.byNode(a))}this.get("menu")&&n.hide(this.get("menu"));this.inherited(arguments)}},destroy:function(){this.isMenuOpen()&&this.closeMenu(!0);this.inherited(arguments)},_closeMenuOnParentClick:function(){return!0},_cleanUpAfterClose:function(a,b){!b&&a.get("menu")&&delete a.get("menu")._invokingWidget;a.domNode&&a.domNode.classList.remove("mwHasMenuOpened")},
isMenuOpen:function(){return this.get("menu")&&this.get("menu")._invokingWidget&&this.get("menu")._invokingWidget===this&&this.get("menu").domNode&&this.get("menu").domNode.parentElement&&this.get("menu").domNode.parentElement.classList.contains("dijitPopup")?"none"!==this.get("menu").domNode.parentElement.style.display:!1}})})},"mw-ddux/UsageLogger":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom dojo/on dijit/registry mw-log/Log mw-messageservice/MessageService mw-utils/Utils".split(" "),
function(h,e,g,d,c,b,a,f){var k,l,n,p,m,q={},r,s,t={CheckBox:["change"],ColorPickerButton:["change"],ComboBox:["dropdownclick","change"],DropDownButton:["dropdownclick"],GalleryItem:["click"],HorizontalSlider:["change"],List:["change"],ListItem:["click"],ListItemWithCheckBox:["change"],ListItemWithRadioButton:["change"],ListItemWithTextField:["change","click"],ListItemWithPopup:[],PopupList:[],PushButton:["click"],QABPushButton:["click"],QABDropDownButton:["dropdownclick"],QABSplitButton:["click",
"dropdownclick"],QABToggleButton:["change"],QABToggleSplitButton:["change","dropdownclick"],RadioButton:["change"],Spinner:["change"],SplitButton:["click","dropdownclick"],ToolstripTab:["click"],TextArea:["change"],TextField:["change"],ToggleButton:["change"],ToggleGalleryItem:["change"],ToggleSplitButton:["change","dropdownclick"]},u="mwPushButton mwDropDownButton mwMenuItem mwPopupMenuItem mwSplitButton mwToggleButton mwToggleSplitButton mwComboBox mwCheckBox mwRadioButton mwSpinner mwGalleryItem mwToggleGalleryItem mwTextField mwTextArea mwCheckBoxMenuItem mwRadioButtonMenuItem mwTextFieldMenuItem mwListBox mwColorPickerButton mwGridPickerButton".split(" ");
return{start:function(c,d,e){k||(b.assert(c,"Must specify product"),b.assert(d,"Must specify scope"),k=!0,n=c,p=d,m=e,l="/UsageData/"+f.generateUuid(),a.publish("/UsageSetup",{type:"start",product:c,scope:d,channel:l}))},isRunning:function(){return k},setPrefixesOfElementIdsToRedact:function(a,b,f){q[this._productAndScopeLKey(b||n,f||p)]=a},logEvent:function(f,c){if(k)if(b.assert(f.eventType,"eventType must be defined"),b.assert(f.elementType,"elementType must be defined"),f.elementId){f.elementType=
this._translateElementType(f.elementType);var d=this;setTimeout(function(){var g;try{if(c){g=d._getLoggingAttributes(c);if(g.enabled)delete g.enabled;else return;e.mixin(f,g)}d._filterElementId(f);if(s&&("keypress"===f.eventType||g&&"toolstrip"===g.subscope))f.selected=s;a.publish(l,f)}catch(k){b.warn("Error while logging event: "+k.message)}},0)}else b.warn("Can't log "+f.elementType+" "+f.eventType+" without elementId")},stop:function(){k&&(setTimeout(function(){a.publish("/UsageSetup",{type:"stop",
channel:l})},0),k=!1)},enableLoggingFromNode:function(a,b){this._addLoggingAttributes(a,{subscope:b,enabled:!0});r||(this._addListeners(),r=!0)},disableLoggingFromNode:function(a){this._addLoggingAttributes(a,{enabled:!1})},overrideProductAndScope:function(a,b,f){this._addLoggingAttributes(a,{product:b,scope:f})},setSelectedContext:function(a){s=a},_addListeners:function(){var a=this;d(window,"click",function(b){a._logDomEvent(b,"click")});d(window,"change",function(b){a._logDomEvent(b,"change")});
d(window,"dropdownclick",function(b){a._logDomEvent(b,"dropdownclick")})},_addLoggingAttributes:function(a,b){var f=b,c=a.getAttribute("data-usage-logging");c&&(f=JSON.parse(c),e.mixin(f,b));a.setAttribute("data-usage-logging",JSON.stringify(f))},_getLoggingAttributes:function(a){var b=this._getPopupInvoker(a);b&&(a=b);for(b={};a&&(void 0===b.enabled||m&&(!b.product||!b.scope));){var f=a.getAttribute?a.getAttribute("data-usage-logging"):void 0;f&&(f=JSON.parse(f),!b.product&&f.product&&(b.product=
f.product),!b.scope&&f.scope&&(b.scope=f.scope),!b.subscope&&f.subscope&&(b.subscope=f.subscope),!b.enabled&&void 0!==f.enabled&&(b.enabled=f.enabled));a=a.parentNode}return b},_logDomEvent:function(a,b){var f=this._getNodeInfoFromEvent(a);if(f&&this._isEventOfInterest(f.type,b)){var d={eventType:a.keyStroke?"keypress":"click",elementId:f.tag,elementType:f.type};if("GalleryItem"===d.elementType||"ToggleGalleryItem"===d.elementType){var e=c.getEnclosingWidget(f.node);e&&(d.elementType="icon_view"===
e.displayState?"button":"list_item")}a.keyStroke&&(d.keyStroke=a.keyStroke);this.logEvent(d,f.node)}},_getNodeInfoFromEvent:function(a){a=a.target;for(var b=0;a&&a.getAttribute&&4>b;){var f=a.getAttribute("data-tag");if(f){var c=a.getAttribute("data-type");c||(c=this._getWidgetTypeFromCss(a));if(c)break}a=a.parentNode;b++}return a?{node:a,tag:f,type:c}:null},_getWidgetTypeFromCss:function(a){a=a.classList;if(a.contains("mwWidget"))for(var b=0;b<u.length;b++){var f=u[b];if(a.contains(f))return f.substring(2)}return null},
_isEventOfInterest:function(a,b){var f=t[a];return f&&0<=f.indexOf(b)},_getPopupInvoker:function(a){for(;a&&a.classList;){if(a.classList.contains("dijitPopup")){if(a=a.getAttribute("dijitPopupParent"))return(a=g.byId(a))&&a.classList&&a.classList.contains("mwPopupMenuItem")?this._getPopupInvoker(a):a;break}a=a.parentNode}return null},_productAndScopeLKey:function(a,b){return a+":"+b},_filterElementId:function(a){var b=q[this._productAndScopeLKey(a.product||n,a.scope||p)];if(b){var f,c;for(f=0;f<b.length;f++)if(c=
b[f],a.elementId.startsWith(c)){b=a.elementId.slice(c.length);a.elementId=c+":redacted";0<b.length&&(c=b.charAt(0),":"===c||"."===c?a.redactedHash=this.hashString(b):/\D/.test(b)||(a.redactedHash=b));break}}},_translateElementType:function(a){switch(a){case "ColorPickerButton":case "GridPickerButton":case "PushButton":case "SplitButton":case "ToggleButton":case "RadioButton":case "CheckBox":case "ToggleSplitButton":case "QABPushButton":case "QABSplitButton":case "QABToggleButton":case "QABToggleSplitButton":a=
"button";break;case "DropDownButton":case "QABDropDownButton":a="drop_down";break;case "ListItem":case "ListItemWithCheckBox":case "ListItemWithTextField":case "ListItemWithRadioButton":a="list_item";break;case "ComboBox":a="combo_box";break;case "HorizontalSlider":a="slider";break;case "Spinner":a="spinner";break;case "TextField":a="text_field";break;case "TextArea":a="text_area";break;case "ToolstripTab":a="toolstrip_tab";break}return a},hashString:function(a){for(var b=0,f=0;f<a.length;f++)b+=
Math.pow(31*a.charCodeAt(f),a.length-f),b&=b;return Math.abs(b).toString(16)}}})},"mw-mixins/property/HasDynamicMenuMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","mw-mixins/property/MenuMixin"],function(h,e,g){h=h(null,{hasDynamicMenu:!1,_setHasDynamicMenuAttr:function(d){this._set("hasDynamicMenu",d)},postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwHasDynamicMenuMixin");this.set("hasDynamicMenu",this.get("hasDynamicMenu"))},openMenu:function(){this.get("hasDynamicMenu")?
this.emit("dropdownclick",{}):this._showMenu()},showMenu:function(){this._showMenu();var d=this.menu.on("updatelayout",e.hitch(this.menu,function(){this._updateLayout&&this._updateLayout()})),c=this.menu.on("close",function(){d.remove();c.remove()})}});h._dependencies=[{mixin:g,orderDependent:!0}];return h})},"mw-mixins/property/IconAlignmentMixin":function(){define(["dojo/_base/declare","dojo/dom-construct","mw-mixins/property/TextMixin","mw-mixins/property/IconMixin"],function(h,e,g,d){h=h(null,
{CLASS_NAME_PREFIX:"mwIconAlignment",constructor:function(){this.ICON_ALIGNMENT_CONFIGURATION={top:{className:this.CLASS_NAME_PREFIX+"Top",textNodeLocation:"after"},right:{className:this.CLASS_NAME_PREFIX+"Right",textNodeLocation:"before"},bottom:{className:this.CLASS_NAME_PREFIX+"Bottom",textNodeLocation:"before"},left:{className:this.CLASS_NAME_PREFIX+"Left",textNodeLocation:"after"}}},iconAlignment:"left",_supportedValues:["top","right","bottom","left"],postCreate:function(){this.inherited(arguments);
this.domNode.classList.add("mwIconAlignmentMixin")},_setIconAlignmentAttr:function(c){if(!(this.get("iconAlignment")===c&&this._started)){if(-1===this._supportedValues.indexOf(c))throw Error("'iconAlignment' property expects one of these values: "+this._supportedValues);var b=this.ICON_ALIGNMENT_CONFIGURATION[this.get("iconAlignment")].className;this.domNode.classList.remove(b);this.domNode.classList.add(this.ICON_ALIGNMENT_CONFIGURATION[c].className);e.place(this.textNode,this.iconNode,this.ICON_ALIGNMENT_CONFIGURATION[c].textNodeLocation);
this._set("iconAlignment",c)}}});h._dependencies=[{mixin:g,orderDependent:!1},{mixin:d,orderDependent:!1}];return h})},"mw-mixins/property/ArrowModeMixin":function(){define(["dojo/_base/declare"],function(h){var e=["auto","inline","block"];return h(null,{arrowMode:"auto",postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwArrowModeMixin")},_setArrowModeAttr:function(g){if("string"!==typeof g||-1===e.indexOf(g))throw Error("'arrowMode' property expects one of these values: "+
e);this.domNode.classList.add("mwArrowMode"+this._capitalize(g));e.forEach(function(d){d!==g&&this.domNode.classList.remove("mwArrowMode"+this._capitalize(d))},this);this._set("arrowMode",g)},_capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}})})},"mw-mixins/property/SizeMixin":function(){define(["dojo/_base/lang","dojo/_base/declare"],function(h,e){return e(null,{width:"auto",height:"auto",_allowedValues:["auto","100%"],postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwSizeMixin");
this.on("updatelayout",h.hitch(this,this._updateLayout))},startup:function(){this.inherited(arguments);this._updateLayout()},_updateLayout:function(){this._setWidthAttr(this.get("width"));this._setHeightAttr(this.get("height"))},_setWidthAttr:function(e){this._setSize("width",e)},_setHeightAttr:function(e){this._setSize("height",e)},_validateSizeInput:function(e){if(!("string"===typeof e&&0<=this._allowedValues.indexOf(e)||"number"===typeof e&&0<e))throw Error(" Property should either be 'auto' or a positive integer");
},_setSize:function(e,d){this._validateSizeInput(d);this._set(e,d);if(this._started){var c="",c=0<=this._allowedValues.indexOf(d)?d:this._getAdjustedSize(e,d,this.domNode);this.domNode.style[e]=c}},_getAdjustedSize:function(e,d,c){return d+"px"}})})},"mw-mixins/property/TabIndexNodesMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","mw-mixins/property/DisabledMixin"],function(h,e,g){var d=function(c){if(("object"!==typeof c||c.constructor!==Array)&&0<c.length&&c[0].constructor!==HTMLDivElement)throw Error("'tabIndexNodes' property expects an array of DOM nodes as input.");
};h=h(null,{tabIndexNodes:[],addTabIndexNodes:function(c){d(c);this.set("tabIndexNodes",this.get("tabIndexNodes").concat(c))},removeTabIndexNodes:function(c){d(c);var b,a,f,e=this.get("tabIndexNodes");c.forEach(function(c){f=e.indexOf(c);-1===f?(b=e,a=[]):(b=e.slice(0,f),a=e.slice(f+1,f+1+(e.length-f)));e=b.concat(a);c.removeAttribute("tabIndex")});this.set("tabIndexNodes",e)},_setTabIndexNodesAttr:function(c){d(c);this._set("tabIndexNodes",c);this._updateTabIndices()},_setDisabledAttr:function(c){this.inherited(arguments);
this._updateTabIndices()},_updateTabIndices:function(){this.get("tabIndexNodes").forEach(e.hitch(this,function(c){this._setTabIndexOnNode(c)}))}});h._dependencies=[{mixin:g,orderDependent:!0}];return h})},"mw-mixins/property/ValidationMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/mouse dojo/dom-geometry dojo/dom-construct dojo/on dojo/_base/window dijit/_WidgetBase dijit/_TemplatedMixin".split(" "),function(h,e,g,d,c,b,a,f,k){var l=h([f,k],{templateString:'\x3cdiv class\x3d"mwValidationTooltipDialog"\x3e\x3cdiv class\x3d"mwArrowNode" data-dojo-attach-point\x3d"arrowNode"\x3e\x3c/div\x3e\x3cdiv class\x3d"mwContentsNode" data-dojo-attach-point\x3d"contentsNode"\x3e\x3cdiv data-dojo-attach-point\x3d"iconNode" class\x3d"mwIconNode"\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"textNode" class\x3d"mwTextNode"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
_setTextAttr:function(a){this.textNode.textContent=a;this._set("text",a)}}),n=["error","warning","normal"];return h(null,{warningText:"",errorText:"",validationState:"normal",_setErrorTextAttr:function(a){if("string"!==typeof a)throw Error("errorText property expects a 'string'!");this.validationTooltip&&this.validationTooltip.set("text",a);this._set("errorText",a)},_setWarningTextAttr:function(a){if("string"!==typeof a)throw Error("warningText property expects a 'string'!");this.validationTooltip&&
this.validationTooltip.set("text",a);this._set("warningText",a)},_setValidationStateAttr:function(a){if("string"!==typeof a)throw Error("validationState property expects a 'string'!");if(-1===n.indexOf(a.toLowerCase()))throw Error("validationState property expects the value to be 'normal', 'error' or 'warning'!");this._set("validationState",a);var b=!1,f=!1;"error"===a.toLowerCase()?(f=!0,this._createValidationTooltip(),this.validationTooltip.set("text",this.get("errorText"))):"warning"===a.toLowerCase()&&
(b=!0,this._createValidationTooltip(),this.validationTooltip.set("text",this.get("warningText")));this.validationTooltip&&(this.domNode.classList.contains("mwWidgetFocused")&&(this.validationTooltip.domNode.classList.add("mwValidationFocused"),this._placeTooltip()),f?(this._getDomNodeForValidationClasses().classList.add("mwValidationError"),this.validationTooltip.domNode.classList.add("mwErrorTooltip")):(this._getDomNodeForValidationClasses().classList.remove("mwValidationError"),this.validationTooltip.domNode.classList.remove("mwErrorTooltip")),
b?this.validationTooltip.domNode.classList.add("mwWarningTooltip"):this.validationTooltip.domNode.classList.remove("mwWarningTooltip"),"normal"===a.toLowerCase()&&(this.validationTooltip.domNode.style.visibility="hidden"))},_createValidationTooltip:function(){this.validationTooltip||(this.validationTooltip=new l,this.validationTooltip.startup(),this.own(this.validationTooltip),this._addTooltipEvents())},_flipDomOrder:function(a){var b=a.children[1];c.place(a.children[0],c.place(b,a),"after");c.place(b.children[0],
c.place(b.children[1],b),"after")},_tooltipOrientation:function(){return this.validationTooltip.domNode.classList.contains("mwTooltipLeft")?"left":"right"},_getDomNodeForValidationClasses:function(){return this.domNode},_placeTooltip:function(){if(this.validationTooltip&&("error"===this.validationState||"warning"===this.validationState)){c.place(this.validationTooltip.domNode,a.body());var b=d.position(this.domNode),f,e,g,k,h,l,n,w=!1;f=b.x;e=b.y;g=b.w;"error"===this.validationState?(this._getDomNodeForValidationClasses().classList.add("mwValidationError"),
this.validationTooltip.set("text",this.errorText),this.validationTooltip.domNode.classList.add("mwErrorTooltip")):"warning"===this.validationState&&(this.validationTooltip.set("text",this.warningText),this.validationTooltip.domNode.classList.add("mwWarningTooltip"));this.validationTooltip.domNode.style.visibility="visible";l=d.position(this.validationTooltip.domNode).h/2;h=d.position(this.domNode).h/2;b=this.validationTooltip.domNode;n=d.position(a.body()).w;k=this._calculateTooltipWidth();var x=
(document.documentElement||document.body.parentNode||document.body).scrollTop;f+g+k>n?(w=!0,f=f-k+"px",e=e+h-l+x+"px",b.children[0].classList.contains("mwArrowNode")&&this._flipDomOrder(b)):(f=f+g+"px",e=e+h-l+x+"px");w?(this.validationTooltip.domNode.classList.add("mwTooltipLeft"),this.validationTooltip.domNode.classList.remove("mwTooltipRight")):(this.validationTooltip.domNode.classList.remove("mwTooltipLeft"),this.validationTooltip.domNode.classList.add("mwTooltipRight"));this.validationTooltip.domNode.style.left=
f;this.validationTooltip.domNode.style.top=e}},_calculateTooltipWidth:function(){this.validationTooltip.domNode.classList.add("mwTooltipLeft");var a=d.position(this.validationTooltip.domNode).w;this.validationTooltip.domNode.classList.remove("mwTooltipLeft");return a},_addTooltipEvents:function(){this.own(b(this,g.enter,e.hitch(this,function(){this._placeTooltip()})),b(this,g.leave,e.hitch(this,function(){this.validationTooltip&&(this.validationTooltip.domNode.style.visibility="hidden")})),b(this.focusNode,
"focus",e.hitch(this,function(){this._placeTooltip();this.validationTooltip&&("error"===this.get("validationState")||"warning"===this.get("validationState"))&&this.validationTooltip.domNode.classList.add("mwValidationFocused")})),b(this.focusNode,"blur",e.hitch(this,function(){this.validationTooltip&&(this.validationTooltip.domNode.classList.remove("mwValidationFocused"),this.validationTooltip.domNode.style.visibility="hidden")})))}})})},"mw-mixins/ResizeMixin":function(){define(["dojo/_base/declare"],
function(h){return h(null,{_isResized:!1,startup:function(){this.inherited(arguments);if(!this._isResized){for(var e={parentNode:this.domNode},g=!0;(e=e.parentNode)&&e!==document;)if("none"===e.style.display){g=!1;break}g&&this.resize()}},resize:function(){this.inherited(arguments);this.getChildren&&this.getChildren().forEach(function(e){e.resize&&e.resize()},this);this._isResized=!0}})})},"mw-form/mixins/property/DropDownButtonIconAlignmentMixin":function(){define(["dojo/_base/declare","mw-mixins/property/IconAlignmentMixin",
"mw-mixins/property/ArrowModeMixin","mw-form/mixins/property/DropDownButtonArrowModeMixin"],function(h,e,g,d){h=h(null,{_supportedValues:["left","top"],_setIconAlignmentAttr:function(){this.inherited(arguments);this.set("arrowMode",this.get("arrowMode"))}});h._dependencies=[{mixin:e,orderDependent:!0},{mixin:g,orderDependent:!1},{mixin:d,orderDependent:!1}];return h})},"mw-form/mixins/property/DropDownButtonArrowModeMixin":function(){define(["dojo/_base/declare","mw-mixins/property/ArrowModeMixin",
"mw-mixins/property/TextMixin","mw-form/mixins/property/DropDownButtonTextMixin"],function(h,e,g,d){h=h(null,{_setArrowModeAttr:function(){this.inherited(arguments);this.set("text",this.get("text"))}});h._dependencies=[{mixin:e,orderDependent:!0},{mixin:g,orderDependent:!1},{mixin:d,orderDependent:!1}];return h})},"mw-form/mixins/property/DropDownButtonTextMixin":function(){define(["dojo/_base/declare","dojo/dom-construct","mw-mixins/property/TextMixin","mw-mixins/property/SizeMixin","mw-form/mixins/property/DropDownButtonSizeMixin"],
function(h,e,g,d,c){h=h(null,{_updateTextInDOM:function(b){this.inherited(arguments);this._placeTextAndResize(b)},_placeTextAndResize:function(b){var a=this._getPeerAndPosition();e.place(this.textNode,a.peer,a.position);this._placeTextInNode(b,this.lastTextLineNode);this.set("width",this.get("width"));this.set("height",this.get("height"))},_getPeerAndPosition:function(){var b={};this._isInline()?(b.peer=this.arrowNode,b.position="before"):(b.peer=this.iconNode,b.position="after");return b},_getSplitTextAtLastNewLineCharacter:function(b){var a=
{};if(this._isInline()){var f=b.lastIndexOf("\n");0<=f?(a.mainText=b.substring(0,f),a.lastTextLine=b.substring(f+1,b.length)):"left"===this.get("iconAlignment")?(a.mainText="",a.lastTextLine=b):(a.mainText=b,a.lastTextLine="")}else a.mainText=b,a.lastTextLine="";return a},_isInline:function(){return"inline"===this.get("arrowMode")||"auto"===this.get("arrowMode")&&"top"===this.get("iconAlignment")},_getTextForDOM:function(b,a){b=this.inherited(arguments);var f=this._getSplitTextAtLastNewLineCharacter(b);
return a===this.textNode?f.mainText:a===this.lastTextLineNode?f.lastTextLine:b}});h._dependencies=[{mixin:g,orderDependent:!0},{mixin:d,orderDependent:!1},{mixin:c,orderDependent:!1}];return h})},"mw-form/mixins/property/DropDownButtonSizeMixin":function(){define(["dojo/_base/declare","dojo/dom-geometry","mw-mixins/property/SizeMixin"],function(h,e,g){h=h(null,{minWidth:0,maxWidth:Infinity,minHeight:0,maxHeight:Infinity,doNotSize:!1,_setSize:function(d,c){this.inherited(arguments);if(this._started&&
!this.doNotSize){var b="";if("auto"!==c){var a,f,g;f=e.getMarginBox(this.get("iconNode"));var h=e.getMarginBox(this.get("textNode"));g=e.getMarginBox(this.get("arrowNode"));b=parseFloat(this._getAdjustedSize(d,c,this.domNode));if("width"===d&&"left"===this.get("iconAlignment")&&"inline"===this.get("arrowMode"))a=f.w+g.w,b<a?(a=b/2,b/=2):(f=a/2-f.w,g=a/2-g.w,a=b/2-f,b=b/2-g),this._setDomStyles("width",a,b);else if("height"===d&&"top"===this.get("iconAlignment")&&("inline"===this.get("arrowMode")||
"auto"===this.get("arrowMode")))a=f.h+h.h+g.h+1,0>a&&(a=0),b<a?(a=b/2,b/=2):(f=a/2-f.h,g=a/2-(h.h+g.h),a=b/2-f+1,b=b/2-g-1),this._setDomStyles("height",a,b);else if("width"===d&&"left"===this.get("iconAlignment")&&("block"===this.get("arrowMode")||"auto"===this.get("arrowMode")))a=b-g.w,b=g.w,this._setDomStyles("width",a,b);else if("height"===d&&"top"===this.get("iconAlignment")&&"block"===this.get("arrowMode"))a=b-g.h-3,b=g.h+1,this._setDomStyles("height",a,b);else if("width"===d)b=(b<this.maxWidth?
b:this.maxWidth)>this.minWidth?b:this.minWidth,this._setDomStyles("width",b,b);else if("height"===d)b=(b<this.maxHeight?b:this.maxHeight)>this.minHeight?b:this.minHeight,this._setDomStyles("height",b,b);else throw Error("Invalid property value. The size type property expects one of these values: {'width', 'height', 'auto'}");}else this.domNode.style["min"+this._capitalize(d)]=this["min"+this._capitalize(d)]+"px";this._set(d,c)}},_setDomStyles:function(d,c,b){this.buttonNode.style[d]=c+"px";this.buttonNode.style["max"+
this._capitalize(d)]=c+"px";this.dropDownNode.style[d]=b+"px";this.dropDownNode.style["max"+this._capitalize(d)]=b+"px"},_capitalize:function(d){return d.charAt(0).toUpperCase()+d.slice(1)}});h._dependencies=[{mixin:g,orderDependent:!0}];return h})},"mw-form/mixins/property/DropDownNeverDisabledMixin":function(){define("dojo/_base/declare dojo/dom-geometry mw-mixins/property/DisabledMixin mw-mixins/property/IconMixin mw-mixins/property/TextMixin mw-form/mixins/property/DropDownButtonArrowModeMixin mw-form/mixins/property/DropDownButtonIconAlignmentMixin mw-form/mixins/property/DropDownButtonSizeMixin".split(" "),
function(h,e,g,d,c,b,a,f){h=h(null,{dropDownNeverDisabled:!1,postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwDropDownNeverDisabledMixin");this.set("dropDownNeverDisabled",this.get("dropDownNeverDisabled"));this._addDisableListener(this.buttonNode,this._buttonNodeInteractionHandler.bind(this))},destroy:function(){this.domNode&&this._removeDisableListener(this.domNode,this._buttonNodeInteractionHandler.bind(this));this.inherited(arguments)},_buttonNodeInteractionHandler:function(a){this.get("disabled")&&
this.get("dropDownNeverDisabled")&&a.stopImmediatePropagation()},_disableInteractionHandler:function(a){this.get("disabled")&&(this.get("dropDownNeverDisabled")||a.stopImmediatePropagation())},_setDropDownNeverDisabledAttr:function(a){if("boolean"!==typeof a)throw Error("'dropDownNeverDisabled' property expects a boolean!");this._set("dropDownNeverDisabled",a);a?this.domNode.classList.add("mwDropDownNeverDisabledTrue"):this.domNode.classList.remove("mwDropDownNeverDisabledTrue");this._setAriaDisabled();
this._setTabIndexOnNode(this.focusNode)},_getOverlayPositionExtents:function(){var a=e.getBorderExtents(this.domNode);if(this.get("dropDownNeverDisabled")){var b=e.getMarginBox(this.focusNode);"left"===this.get("iconAlignment")?a.r=-b.w:"top"===this.get("iconAlignment")&&(a.b=-b.h)}return{t:-a.t+"px",r:-a.r+"px",b:-a.b+"px",l:-a.l+"px"}}});h._dependencies=[{mixin:g,orderDependent:!0},{mixin:d,orderDependent:!0},{mixin:c,orderDependent:!0},{mixin:b,orderDependent:!0},{mixin:a,orderDependent:!0},{mixin:f,
orderDependent:!0}];return h})},"mw-form/mixins/SplitButtonToggleSplitButtonMenuMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom dojo/dom-construct dojo/on mw-dom-utils/domUtils mw-utils/widgetUtils mw-mixins/property/MenuMixin".split(" "),function(h,e,g,d,c,b,a,f){h=h(null,{buildRendering:function(){this.inherited(arguments);d.place(this.buttonNode,this.focusNode,"before")},_onMouseClick:function(a){this.inherited(arguments);g.isDescendant(a.target,this.buttonNode)&&this.isMenuOpen()&&
this.closeMenu(!1)}});h._dependencies=[{mixin:f,orderDependent:!0}];return h})},"mw-form/mixins/SplitButtonToggleSplitButtonFocusMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/on","mw-dom-utils/domUtils"],function(h,e,g,d){return h(null,{postCreate:function(){this.inherited(arguments);this.own(g(this.domNode,"mousedown",e.hitch(this,function(c){this.buttonNode.contains(c.target)&&setTimeout(e.hitch(this,function(){this.focusNode.focus()}),0)})),g(this.focusNode,"focus",e.hitch(this,
"_handleFocus")),g(this.focusNode,"blur",e.hitch(this,"_handleBlur")))},_handleFocus:function(){this.baseClass.split(" ").forEach(e.hitch(this,function(c){d.toggleClass(this.domNode,c+"Focused",!0)}))},_handleBlur:function(){this.baseClass.split(" ").forEach(e.hitch(this,function(c){d.toggleClass(this.domNode,c+"Focused",!1)}))}})})},"mw-navigationbar/ActionToolbar":function(){define("dojo/_base/declare dojo/dom dojo/dom-construct dojo/dom-class dojo/on dojo/dom-attr".split(" "),function(h,e,g,d,
c,b){return h([],{constructor:function(a){a=a||{};this._actionsList=a.actionsList;this.navigationBarNode=a.navigationBarNode;this.actionToolbarContainer=g.create("div");d.add(this.actionToolbarContainer,"actionToolbarContainerNode");this.navigationBarNode.appendChild(this.actionToolbarContainer);g.place(this.actionToolbarContainer,this.navigationBarNode,"first");var f=this;this._actionsList.forEach(function(a){var e=g.create("div");f[a.id]=a;c(e,"click",function(b){a.callback(f)});d.add(e,a.actionClass);
b.set(e,"title",a.text);a.disabled?(e.setAttribute("enabled","false"),d.remove(e,"actionEnabled"),d.add(e,"actionDisabled")):(e.setAttribute("enabled","true"),d.add(e,"actionEnabled"),d.remove(e,"actionDisabled"));a.node=e;f.actionToolbarContainer.appendChild(e)})}})})},"mw-overlay-utils/BusyOverlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom dojo/dom-style dojo/dom-attr dojo/query dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/on dijit/registry dijit/_WidgetBase dijit/_TemplatedMixin spinner/spin mw-log/Log dojo/text!./templates/busyOverlayTemplate.html".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s){var t={rotate:0,direction:1,color:"#000",speed:1,trail:60,shadow:!1,hwaccel:!1,zIndex:2E9,top:"50%",left:"50%"},u={lines:11,length:8,width:4,radius:12,corners:0.5,className:"spinner spinnerLarge"},v={lines:11,length:5,width:3,radius:8,corners:1,className:"spinner spinnerMedium"},w={lines:11,length:4,width:2,radius:6,corners:1,className:"spinner spinnerSmall"},x={lines:9,length:2,width:2,radius:4,corners:0,className:"spinner spinnerXSmall"};e.mixin(u,t);e.mixin(v,
t);e.mixin(w,t);e.mixin(x,t);h=h("MW.utils.BusyOverlay",[p,m],{_displayed:!1,_started:!1,_spinner:null,_size:null,target:null,_text:"",_textSpan:null,_spinnerTextNode:null,templateString:s,constructor:function(b){this._textSpan=f.create("span");this._spinnerTextNode=f.create("div");Object.defineProperty(this,"text",{set:function(a){this._text=a;this._text&&"string"===typeof this._text||(this._text="");this._textSpan.textContent=this._text;this._started&&this._updateTitle()},get:function(){return this._text},
enumerable:!0,configurable:!0});this._setSpinnerSize(b);a.add(this._spinnerTextNode,"spinnerText");b&&b.text&&this.set("text",b.text)},_setSpinnerSize:function(a){try{if(null===a||void 0===a||a.text&&!a.size)this._size=e.clone(u);else if("object"===typeof a)this._size=a.size?e.clone(a.size):e.clone(a);else throw Error("Incorrect argument passed to BusyOverlay Object.");}catch(b){r.error(b.message)}},_updateTitle:function(){a.remove(this._textSpan,"spinnerCenter");this._textSpan.offsetWidth>=this._spinnerTextNode.offsetWidth?
c.set(this._spinnerTextNode,"title",this._text):c.set(this._spinnerTextNode,"title","");a.add(this._textSpan,"spinnerCenter")},_updateTextStyle:function(){var a=k.position(this._underlayNode).h/2+2*this._size.radius+15+"px";d.set(this._spinnerTextNode,"top",a)},startup:function(){if(!this._started){this._spinner=new q(this._size);if(this.target){if("string"===typeof this.target){var a=n.byId(this.target);this.target=a?a.domNode:g.byId(this.target)}f.place(this.domNode,this.target);f.place(this._textSpan,
this._spinnerTextNode);f.place(this._spinnerTextNode,this._busyOverlayNode)}this._text&&(this._updateTitle(),this.own(l(window,"resize",this._updateTextStyle.bind(this))));this._started=!0;this.inherited(arguments)}},postCreate:function(){this._underlayNode.style.zIndex=2E9-1;this.inherited(arguments)},show:function(){this._displayed||(this._started||this.startup(),this._displayed=!0,this._busyOverlayNode.style.display="inline",this._busyOverlayNode.className="mw-busyIndicator",this._updateTextStyle(),
d.set(this._spinnerTextNode,"display","block"),this._spinner.spin(this._spinnerNode),this.onShow())},hide:function(){this._displayed&&(this._displayed=!1,this._busyOverlayNode.style.display="none",this._spinner.stop(),this._spinnerTextNode.style.display="none",this.onHide())},uninitialize:function(){this.hide();this._spinner=this.target=null;this._displayed=!1;b(".spinnerText").forEach(f.destroy);this._spinnerTextNode=this._textSpan=null;this.inherited(arguments)},isVisible:function(){return this._displayed},
onShow:function(){},onHide:function(){this.inherited(arguments)}});h.SIZE={LARGE:u,MEDIUM:v,SMALL:w,XSMALL:x};Object.freeze(h.SIZE);Object.freeze(h.SIZE.LARGE);Object.freeze(h.SIZE.MEDIUM);Object.freeze(h.SIZE.SMALL);Object.freeze(h.SIZE.XSMALL);return h})},"spinner/spin":function(){define([],function(){function h(a,b){var f=document.createElement(a||"div"),c;for(c in b)f[c]=b[c];return f}function e(a){for(var b=1,f=arguments.length;b<f;b++)a.appendChild(arguments[b]);return a}function g(a,b,f,c){var d=
["opacity",b,~~(100*a),f,c].join("-");f=0.01+100*(f/c);c=Math.max(1-(1-a)/b*(100-f),a);var e=n.substring(0,n.indexOf("Animation")).toLowerCase();l[d]||(p.insertRule("@"+(e&&"-"+e+"-"||"")+"keyframes "+d+"{0%{opacity:"+c+"}"+f+"%{opacity:"+a+"}"+(f+0.01)+"%{opacity:1}"+(f+b)%100+"%{opacity:"+a+"}100%{opacity:"+c+"}}",p.cssRules.length),l[d]=1);return d}function d(a,b){var f=a.style,c,d;b=b.charAt(0).toUpperCase()+b.slice(1);for(d=0;d<k.length;d++)if(c=k[d]+b,void 0!==f[c])return c;if(void 0!==f[b])return b}
function c(a,b){for(var f in b)a.style[d(a,f)||f]=b[f];return a}function b(a){for(var b=1;b<arguments.length;b++){var f=arguments[b],c;for(c in f)void 0===a[c]&&(a[c]=f[c])}return a}function a(f){this.opts=b(f||{},a.defaults,m)}function f(){function b(a,f){return h("\x3c"+a+' xmlns\x3d"urn:schemas-microsoft.com:vml" class\x3d"spin-vml"\x3e',f)}p.addRule(".spin-vml","behavior:url(#default#VML)");a.prototype.lines=function(a,f){function d(){return c(b("group",{coordsize:h+" "+h,coordorigin:-k+" "+-k}),
{width:h,height:h})}function g(a,h,l){e(n,e(c(d(),{rotation:360/f.lines*a+"deg",left:~~h}),e(c(b("roundrect",{arcsize:f.corners}),{width:k,height:f.width,left:f.radius,top:-f.width>>1,filter:l}),b("fill",{color:"string"==typeof f.color?f.color:f.color[a%f.color.length],opacity:f.opacity}),b("stroke",{opacity:0}))))}var k=f.length+f.width,h=2*k,l=2*-(f.width+f.length)+"px",n=c(d(),{position:"absolute",top:l,left:l});if(f.shadow)for(l=1;l<=f.lines;l++)g(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius\x3d2,makeshadow\x3d1,shadowopacity\x3d.3)");
for(l=1;l<=f.lines;l++)g(l);return e(a,n)};a.prototype.opacity=function(a,b,f,c){a=a.firstChild;c=c.shadow&&c.lines||0;if(a&&b+c<a.childNodes.length&&(a=(a=(a=a.childNodes[b+c])&&a.firstChild)&&a.firstChild))a.opacity=f}}var k=["webkit","Moz","ms","O"],l={},n,p=function(){var a=h("style",{type:"text/css"});e(document.getElementsByTagName("head")[0],a);return a.sheet||a.styleSheet}(),m={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:0.25,fps:20,
zIndex:2E9,className:"spinner",top:"50%",left:"50%",position:"absolute"};a.defaults={};b(a.prototype,{spin:function(a){this.stop();var b=this,f=b.opts,d=b.el=c(h(0,{className:f.className}),{position:f.position,width:0,zIndex:f.zIndex});c(d,{left:f.left,top:f.top});a&&a.insertBefore(d,a.firstChild||null);d.setAttribute("role","progressbar");b.lines(d,b.opts);if(!n){var e=0,g=(f.lines-1)*(1-f.direction)/2,k,l=f.fps,m=l/f.speed,p=(1-f.opacity)/(m*f.trail/100),q=m/f.lines;(function I(){e++;for(var a=
0;a<f.lines;a++)k=Math.max(1-(e+(f.lines-a)*q)%m*p,f.opacity),b.opacity(d,a*f.direction+g,k,f);b.timeout=b.el&&setTimeout(I,~~(1E3/l))})()}return b},stop:function(){var a=this.el;a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0);return this},lines:function(a,b){function f(a,e){return c(h(),{position:"absolute",width:b.length+b.width+"px",height:b.width+"px",background:a,boxShadow:e,transformOrigin:"left",transform:"rotate("+~~(360/b.lines*d+b.rotate)+"deg) translate("+
b.radius+"px,0)",borderRadius:(b.corners*b.width>>1)+"px"})}for(var d=0,k=(b.lines-1)*(1-b.direction)/2,l;d<b.lines;d++)l=c(h(),{position:"absolute",top:1+~(b.width/2)+"px",transform:b.hwaccel?"translate3d(0,0,0)":"",opacity:b.opacity,animation:n&&g(b.opacity,b.trail,k+d*b.direction,b.lines)+" "+1/b.speed+"s linear infinite"}),b.shadow&&e(l,c(f("#000","0 0 4px #000"),{top:"2px"})),e(a,e(l,f("string"==typeof b.color?b.color:b.color[d%b.color.length],"0 0 1px rgba(0,0,0,.1)")));return a},opacity:function(a,
b,f){b<a.childNodes.length&&(a.childNodes[b].style.opacity=f)}});var q=c(h("group"),{behavior:"url(#default#VML)"});!d(q,"transform")&&q.adj?f():n=d(q,"animation");return a})},"mw-navigationbar/toolbaractions/BackNavigationAction":function(){define("dojo/_base/declare dojo/aspect dojo/_base/Deferred dojo/dom-class dojo/on dojo/query dojo/_base/lang ./Action dojo/i18n!../l10n/nls/navigationBar".split(" "),function(h,e,g,d,c,b,a,f,k){return h([f],{constructor:function(b){b=b||{};this.dataSource=b.dataSource;
this.id="backButtonWidget";this.enabled=!1;this.actionClass="navBarBackButton";this.text=k.back;this.callback=a.hitch(this,function(a){this.enabled&&this.dataSource.goBack()});c(this.dataSource,"dataSourceUpdated",a.hitch(this,function(a){this._updateBackButton(a)}))},_updateBackButton:function(a){null!==a.prevNode?(this.enabled=!0,this.node.setAttribute("enabled","true"),d.remove(this.node,"actionDisabled"),d.add(this.node,"actionEnabled")):(this.enabled=!1,this.node.setAttribute("enabled","false"),
d.remove(this.node,"actionEnabled"),d.add(this.node,"actionDisabled"))}})})},"mw-navigationbar/toolbaractions/Action":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(h,e){return h(null,{id:"",text:"",actionClass:"",enabled:function(){return!1},constructor:function(g){e.mixin(this,g)},callback:function(){}})})},"mw-navigationbar/toolbaractions/DataSource":function(){define("dojo/_base/declare dojo/_base/Deferred dojo/when dojo/_base/lang dojo/Evented ./LocationNode".split(" "),
function(h,e,g,d,c,b){return h([c],{constructor:function(a){this.dataList=[];this.locked=!1},addToDataList:function(a){a=new b({val:a});0===this.dataList.length?this.dataList.push(a):(a.prev=this.currentNode,this.currentNode.next=a);this.currentNode=a;this._notify()},goBack:function(){this.oldLocation=this.currentNode;this.emit("dataSourceMoved",this.currentNode.prev.value);this._updateCurrentNode(this.currentNode.prev)},goForward:function(){this.oldLocation=this.currentNode;this.emit("dataSourceMoved",
this.currentNode.next.value);this._updateCurrentNode(this.currentNode.next)},_updateCurrentNode:function(a){this.currentNode=a;this.deferred=new e;this._notify(a);g(this.deferred.promise,function(a){this._notify()}.bind(this))},_notify:function(){this.emit("dataSourceUpdated",{nextNode:this.currentNode.next,prevNode:this.currentNode.prev})},setOldLocationNode:function(){this.currentNode=this.oldLocation;this._notify()}})})},"mw-navigationbar/toolbaractions/LocationNode":function(){define(["dojo/_base/declare"],
function(h){return h([],{constructor:function(e){this.value=e.val;this.next=this.prev=null}})})},"mw-navigationbar/toolbaractions/ForwardNavigationAction":function(){define("dojo/_base/declare dojo/aspect dojo/_base/Deferred dojo/dom-class dojo/on dojo/query dojo/_base/lang ./Action dojo/i18n!../l10n/nls/navigationBar".split(" "),function(h,e,g,d,c,b,a,f,k){return h([f],{constructor:function(b){b=b||{};this.dataSource=b.dataSource;this.id="forwardButtonWidget";this.actionClass="navBarForwardButton";
this.enabled=!1;this.text=k.forward;this.callback=a.hitch(this,function(a){this.enabled&&this.dataSource.goForward()});c(this.dataSource,"dataSourceUpdated",a.hitch(this,function(a){this._updateForwardButton(a)}))},_updateForwardButton:function(a){null!==a.nextNode?(this.enabled=!0,this.node.setAttribute("enabled","true"),d.remove(this.node,"actionDisabled"),d.add(this.node,"actionEnabled")):(this.enabled=!1,this.node.setAttribute("enabled","false"),d.remove(this.node,"actionEnabled"),d.add(this.node,
"actionDisabled"))}})})},"MW/rtc/plugins/descriptivetooltip/DescriptiveTooltip":function(){define("dijit/Destroyable dijit/Tooltip dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/on MW/rtc/plugins/view/tooltip/TooltipUtilities".split(" "),function(h,e,g,d,c,b,a){return g(h,{_TOOLTIP_WRAPPER_CLASS:"rtcDescriptiveTooltip",_TOOLTIP_DESCRIPTION_CLASS:"detailedDescription",_TOOLTIP_SHORTCUT_INFO_CLASS:"shortcutInfo",_TOOLTIP_KEY_BINDING_CLASS:"keyBinding",_TOOLTIP_DELAY:400,constructor:function(a){if(!a.targetNode||
!a.label)throw Error("Required arguments not provided");this._targetNode=a.targetNode;var c=this._buildMessage(a.label,a.description,a.cssClasses,a.keyBinding);this.own(b(this._targetNode,"mouseenter",d.hitch(this,"_showTooltip",c,a.additionalDelay?this._TOOLTIP_DELAY+a.additionalDelay:this._TOOLTIP_DELAY)));this.own(b(this._targetNode,"mouseleave",d.hitch(this,"_hideTooltip")));this.own(b(this._targetNode,"click",d.hitch(this,"_hideTooltip")));this._tooltipTimer=null},_showTooltip:function(a,b){this._tooltipTimer&&
clearTimeout(this._tooltipTimer);this._tooltipTimer=setTimeout(d.hitch(this,function(){e.show(a,this._targetNode,["below","above"])}),b)},_hideTooltip:function(){clearTimeout(this._tooltipTimer);this._tooltipTimer=null;e.hide(this._targetNode)},_buildMessage:function(a,b,d,e){e&&(e=c.create("span",{"class":this._TOOLTIP_KEY_BINDING_CLASS,innerHTML:e}),a=c.create("span",{"class":this._TOOLTIP_SHORTCUT_INFO_CLASS,innerHTML:"("+e.outerHTML+")"}).outerHTML+a);b&&(b=c.create("span",{"class":this._TOOLTIP_DESCRIPTION_CLASS,
innerHTML:b}),a=a+"\x3cbr\x3e"+b.outerHTML);return this._wrapTooltipContent(a,d)},_wrapTooltipContent:function(b,d){var e=this._TOOLTIP_WRAPPER_CLASS;d&&(e=e+" "+d);return c.create("div",{"class":e,innerHTML:a.createUnfocusableTooltipTextHTML(b)}).outerHTML},destroy:function(){this.inherited(arguments);this._hideTooltip()}})})},"MW/rtc/plugins/view/tooltip/TooltipUtilities":function(){define(["dojo/dom-construct","MW/uiframework/FocusManager"],function(h,e){return{createUnfocusableTooltipTextHTML:function(g){g=
h.toDom("\x3cdiv\x3e"+g+"\x3c/div\x3e");e.refuseFocus(g);return g.outerHTML}}})},"MW/uiframework/FocusManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom dojo/dom-attr dojo/dom-class dojo/query dijit/popup dijit/registry".split(" "),function(h,e,g,d,c,b,a,f){var k=function(a){for(;a;){if(a.getAttribute&&"refuse"===a.getAttribute("data-focus")||"refuse"===d.get(a,"data-focus"))return!0;a=a.parentNode}return!1},l=function(a){for(;a;){if("temporary"===d.get(a,"data-focus"))return!0;
a=a.parentNode}return!1},n=function(a){for(var f=b("[data-tag\x3d'motwToolstrip.figureTab.menuAndToolbars.menubarWrapper']"),f=0<f.length?f[0]:null;a&&!("accept"===d.get(a,"data-focus")||f&&g.isDescendant(a,f));){if("refuse"===d.get(a,"data-focus"))return!1;a=a.parentNode}return!0},p=null,m=null,q=null,r=h(null,{_restoreFocusToLastNonRefuseElementHandler:function(){r.restoreToLastNonRefuseElement()},_restoreFocusHandler:function(){r.restoreFocus()},_blurHandler:function(){r._windowBlurred=!0},_mouseDownHandler:function(b){!l(b.target)&&
!n(b.target)&&(k(b.target)?setTimeout(function(){0===a._stack.length&&(f.getEnclosingWidget(m)&&f.getEnclosingWidget(m).set("focused",!0),m&&m.focus())},0):0<a._stack.length?setTimeout(function(){m&&m.focus()},0):m=b.target)},_focusHandler:function(b){if("IFRAME"!==b.target.tagName&&b.target!==document)if(!0===r._windowBlurred)r._windowBlurred=!1,r.restoreFocus();else if(p=b.target,!k(p)&&!l(p)&&(q=b.target),!(p.getAttribute&&"temporary"===p.getAttribute("data-focus")||"temporary"===d.get(p,"data-focus"))&&
!l(p))n(p)?b.target!==document.body&&(m=b.target):k(p)?m?setTimeout(function(){var f;if(!(f=0===a._stack.length&&m))a:{for(f=b.target;f;){if(c.contains(f,"dijitPopup")){f=!0;break a}f=f.parentNode}f=!1}f&&m.focus()},0):document.activeElement.blur():b.target!==document.body&&(m=b.target)},_closeHandler:function(b){b.target.contains(document.activeElement)&&b.target.classList.contains("mwContextMenu")&&b.mwFocusData&&b.mwFocusData.previousFocusNode?b.mwFocusData.previousFocusNode.focus():b.target.contains(document.activeElement)&&
m&&(a.close(),m.focus())},constructor:function(a,b){r._instantiated=!0;b&&r.refuseFocus(b.domNode);document.addEventListener("restorefocustolastnonrefuseelement",this._restoreFocusToLastNonRefuseElementHandler);document.addEventListener("restorefocus",this._restoreFocusHandler);window.addEventListener("blur",this._blurHandler);window.addEventListener("focus",this._focusHandler,!0);document.addEventListener("mousedown",this._mouseDownHandler,!0);document.addEventListener("close",this._closeHandler,
!0);document.body.classList.add("mwHasFocusManager")},destroy:function(){document.removeEventListener("restorefocustolastnonrefuseelement",this._restoreFocusToLastNonRefuseElementHandler);document.removeEventListener("restorefocus",this._restoreFocusHandler);window.removeEventListener("blur",this._blurHandler);window.removeEventListener("focus",this._focusHandler,!0);document.removeEventListener("mousedown",this._mouseDownHandler,!0);document.body.classList.remove("mwHasFocusManager")}});r.refuseFocus=
function(a){a.setAttribute("data-focus","refuse")};r.acceptFocus=function(a){a.setAttribute("data-focus","accept")};r.temporaryFocus=function(a){a.setAttribute("data-focus","temporary")};r.restoreFocus=function(a){a?m&&m.focus():setTimeout(function(){m&&m.focus()},0)};r.restoreToLastNonRefuseElement=function(){setTimeout(e.hitch(this,function(){q&&q.focus()},0))};r.isAvailable=function(){return!0===r._instantiated?!0:!1};return r})},"MW/rtc/plugins/descriptivetooltip/DescriptiveTooltipUtilities":function(){define(["dojo/dom-construct"],
function(h){return{_CODE_FORMAT_CLASS:"codeFormat",styleAsCode:function(e){return h.create("span",{"class":this._CODE_FORMAT_CLASS,textContent:e}).outerHTML}}})},"MW/rtc/plugins/debug/executionarrow/ExecutionArrowDecoratorProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/datamodel/FileBackingStoreUtilities","MW/rtc/margin/ExecutionArrowDecorator","MW/rtc/core/provider/PluginProvider"],function(h,e,g,d,c){return h(c,{isApplicable:function(b){return g.isPlainCodeFile(b)},requires:function(){return{isApplicable:["rtc.backingstore"],
createInstance:"rtc.editordataservice rtc.linenumberservice rtc.view rtc.featureinterface rtc.document rtc.service.documentloaded".split(" ")}},createInstance:function(b,a,f,c,e,g){return new d(b,a,f,c,e,g)}})})},"MW/rtc/margin/ExecutionArrowDecorator":function(){define("dojo/aspect dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/mouse dojo/_base/declare dojo/_base/lang mw-log/Log MW/rtc/margin/AbstractLineMarginDecorator".split(" "),function(h,e,g,d,c,b,a,f,k){return b(k,{EXECUTION_ARROW_FEATURE_ID:"matlab.debug.executionarrow",
NO_LINE:-1,constructor:function(b,f,c,d,e,g){this._editorDataService=b;this._lineNumberService=f;this._view=c;this._document=e;this._documentLoadedService=g;this._topOfStack=[];this._exitingStack=[];this._inStack=[];this._currentMouseClickPosition=this.NO_LINE;this.own(this._editorDataService.listenTo(this.EXECUTION_ARROW_FEATURE_ID,a.hitch(this,"_updateData")))},_updateData:function(a){this._topOfStack=a.TOP_OF_STACK;this._inStack=a.IN_STACK;this._exitingStack=a.EXITING_STACK;this.onUpdate()},handleMouseDown:function(a,
b){c.isLeft(a)&&(this._currentMouseClickPosition=this._lineNumberService.getCodeLineNumberAtOrBeforeLineNumber(b)-1,this.onUpdate())},handleMouseUp:function(a,b){c.isLeft(a)&&(this._currentMouseClickPosition=this.NO_LINE,this.onUpdate())},handleMouseLeave:function(){this._currentMouseClickPosition!==this.NO_LINE&&(this._currentMouseClickPosition=this.NO_LINE,this.onUpdate())},_mouseClickAtLine:function(a){return this._currentMouseClickPosition===a},hasLayerForLineNumber:function(a,b){var f=this._lineNumberService.getCodeLineNumberFromLineNumber(a);
return 0>f?!1:!this._mouseClickAtLine(f)&&(this._isOnTopOfStack(f-1)||this._isInStack(f-1)||this._isExitingStack(f-1))},_isOnTopOfStack:function(a){return this._doesStackDataIncludeLineNumber(this._topOfStack,a)},_isInStack:function(a){return this._doesStackDataIncludeLineNumber(this._inStack,a)},_isExitingStack:function(a){return this._doesStackDataIncludeLineNumber(this._exitingStack,a)},_doesStackDataIncludeLineNumber:function(a,b){return-1!==a.indexOf(b)},createDecorationForLineNumber:function(a,
b){f.assert(this.hasLayerForLineNumber(a,b),"Unexpected call to ExecutionArrowDecorator createDecorationForLineNumber - which hasLayerForLineNumber returns false");var c=this._lineNumberService.getCodeLineNumberFromLineNumber(a),e=d.create("div");this._applyStyle(e,c,b);return e},_applyStyle:function(a,b,f){var c=[];g.add(a,"commonArrow");c.push("debugging");var d;this._isOnTopOfStack(b-1)?d=this._augmentArrowCssClass("topOfStackArrow",f):this._isExitingStack(b-1)?d=this._augmentArrowCssClass("exitingStackArrow",
f):this._isInStack(b-1)&&(d=this._augmentArrowCssClass("inStackArrow",f));c.push(d);g.add(a,d);this._addTestTag(a,c,b)},_augmentArrowCssClass:function(a,b){return a+(b?"OverBreakpoint":"")},_addTestTag:function(a,b,f){f-=1;f=b&&0<b.length?f+"_"+b.join("_"):f+"_invalid";e.set(a,"data-testid",f)},getWidth:function(){return 15}})})},"MW/rtc/plugins/debug/executionlines/ExecutionLinesPluginProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/debug/executionlines/ExecutionLinesPlugin","MW/rtc/core/provider/PluginProvider"],
function(h,e,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:"rtc.document rtc.cursor debug.documentdebugservices rtc.view.decoration rtc.linenumberservice rtc.embeddedoutputs.linenumbertracker rtc.service.documentloaded".split(" ")}},createInstance:function(d,c,b,a,f,g,h){return new e(d,c,b,a,f,g,h)}})})},"MW/rtc/plugins/debug/executionlines/ExecutionLinesPlugin":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/model/PositionUtilities MW/rtc/model/Range".split(" "),
function(h,e,g,d,c,b){return h(d,{EXECUTION_LINE_CSS:"executionLine",EXECUTION_POINT_CSS:"activeLine",STACK_LINE_CSS:"inStack",_EXECUTION_LINE_LAYER_CSS:"executionLineHighlights",_EXECUTION_LINE_NODE_CSS:"executionLineHighlightLine",constructor:function(a,b,c,d,h,p,m){this._document=a;this._cursor=b;this._documentDebugServices=c;this._decorator=d.createLayerDecorator(this._EXECUTION_LINE_LAYER_CSS,this._EXECUTION_LINE_NODE_CSS);this._lineNumberService=h;this._lineNumberTracker=p;this._documentLoadedService=
m;this._currentStackLineRanges=[];this.own(g.after(this._documentDebugServices,"onStackChanged",e.hitch(this,"_handleStackChanged")));this._drawExecutionLinesAfterDocumentReady()},_handleStackChanged:function(){this._drawExecutionLinesAfterDocumentReady()},_drawExecutionLinesAfterDocumentReady:function(){this._documentLoadedService.whenDocumentLoadedWithText(e.hitch(this,function(){this._drawExecutionLines()}))},_drawExecutionLines:function(){var a=this._documentDebugServices.getStackFrames();this._clearView();
this._deleteCurrentStackLineRanges();this._validStackForFile(a)&&(a.forEach(function(a){if(null!=a.getLineNumber()){var c=a.getLineNumber()-1,d=this._getCurrentLineNumberFromPreExecutionLineNumber(c);this._stackLineAlreadyHighlighted(d)||(c=this._document.createPositionAtLineColumn(d,0),d=this._document.createPositionAtLineColumn(d,0,!0),c=new b(c,d),d=[this.EXECUTION_LINE_CSS],a.isExecutionPoint()?d.push(this.EXECUTION_POINT_CSS):d.push(this.STACK_LINE_CSS),this._decorator.addClass(c,d),this._currentStackLineRanges.push(c))}},
this),this._decorator.applyChanges())},_getCurrentLineNumberFromPreExecutionLineNumber:function(a){a=this._lineNumberTracker.createPositionFromOldLineNumber(a);var b=a.getLineColumn().line;a.destroy();return b-1},_stackLineAlreadyHighlighted:function(a){var b=!1;a=this._document.createPositionAtLineColumn(a,0);for(var d=0;d<this._currentStackLineRanges.length;d++){var e=this._currentStackLineRanges[d].getStartPosition();if(0===c.comparePositions(e,a)){b=!0;break}}a.destroy();return b},_deleteCurrentStackLineRanges:function(){this._currentStackLineRanges.forEach(function(a){a.destroy()},
this);this._currentStackLineRanges=[]},_validStackForFile:function(a){var b=this._lineNumberService.getNumberOfCodeLines();return!a.some(function(a){if(a.getLineNumber()>b)return!0},this)},_clearView:function(){this._currentStackLineRanges.forEach(function(a){this._decorator.clearRange(a)},this)},_clearViewAndApplyChanges:function(){this._clearView();this._deleteCurrentStackLineRanges();this._decorator.applyChanges()},destroy:function(){this.inherited(arguments);this._clearView();this._deleteCurrentStackLineRanges()}})})},
"MW/rtc/plugins/debug/DatatipPluginProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/datamodel/FileBackingStoreUtilities","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/debug/DataTipPlugin"],function(h,e,g,d,c){return h(d,{isApplicable:function(b){return g.isPlainCodeFile(b)},requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:"rtc.editordataservice rtc.internaldocument rtc.view rtc.document matlab.tokens rtc.domnode".split(" ")}},createInstance:function(b,
a,f,d,e,g){return new c(b,a,f,d,e,g)}})})},"MW/rtc/plugins/debug/DataTipPlugin":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/model/DocumentUtilities","MW/rtc/plugins/datatip/DataTipUtilities","MW/rtc/plugins/tooltip/HoverableTooltipPlugin"],function(h,e,g,d,c){return h(c,{_TOOLTIP_PADDING:50,_DATATIP_CSS_CLASS:"datatipElement",constructor:function(b,a,f,c,d,e){this._editorDataService=b;this._internalDocument=a;this._view=f;this._document=c;this._tokenService=d;this._domNode=e},
priority:function(){return 10},getTooltipContent:function(b,a,f){var c=this._tokenService.getTokensData().tokens;(a=d.getValidIdentifierTill(a,this._document,this._internalDocument,c))?this._editorDataService.request("matlab.datatip",{variablename:a.trim()}).then(e.hitch(this,function(a){var c=void 0;(a=a.result)&&(c=d.createTooltipDiv(this._view,"\x3cpre\x3e"+a+"\x3c/pre\x3e",b,this._DATATIP_CSS_CLASS,this._domNode));f(c,!0)}),function(){f(void 0)}):f(void 0)}})})},"MW/rtc/plugins/debug/DebuggerManagerProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/debug/DebugServicesFactory","MW/rtc/plugins/debug/DebuggerManager"],function(h,e,g,d){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.actionservice","rtc.keyhandler"]}},createInstance:function(c,b){var a=g.getInstance();return new d(c,a,b)}})})},"MW/rtc/plugins/debug/DebuggerManager":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/i18n!l10n/nls/rtcDebug"],
function(h,e,g,d){return h(null,{DEBUG_CONTINUE_ACTION_ID:"rtc_debug_continue",DEBUG_STEP_ACTION_ID:"rtc_debug_step",DEBUG_STEP_IN_ACTION_ID:"rtc_debug_step_in",DEBUG_STEP_OUT_ACTION_ID:"rtc_debug_step_out",DEBUG_QUIT_ACTION_ID:"rtc_debug_quit",constructor:function(c,b,a){this._actionService=c;this._debuggerActions=b;this._keyHandler=a;this._createActions();this._addAdditionalKeyBindings()},_createActions:function(){var c=[{id:this.DEBUG_CONTINUE_ACTION_ID,enabled:!0,key:"f5",platformKey:{mac:"f5"},
shortcut:d.debugContinueShortcut,text:d.debugContinueLabel,description:d.debugContinueDescription,callback:e.hitch(this,"_debugActionCallback",e.hitch(this._debuggerActions,"debugContinue"))},{id:this.DEBUG_STEP_ACTION_ID,enabled:!0,key:"f10",platformKey:{mac:"f10"},text:d.debugStepLabel,shortcut:d.debugStepShortcut,description:d.debugStepDescription,callback:e.hitch(this,"_debugActionCallback",e.hitch(this._debuggerActions,"debugStep"))},{id:this.DEBUG_STEP_IN_ACTION_ID,enabled:!0,key:"f11",platformKey:{mac:"f11"},
text:d.debugStepInLabel,shortcut:d.debugStepInShortcut,description:d.debugStepInDescription,callback:e.hitch(this,"_debugActionCallback",e.hitch(this._debuggerActions,"debugStepIn"))},{id:this.DEBUG_STEP_OUT_ACTION_ID,enabled:!0,key:"shift_f11",platformKey:{mac:"shift_f11"},text:d.debugStepOutLabel,shortcut:d.debugStepOutShortcut,description:d.debugStepOutDescription,callback:e.hitch(this,"_debugActionCallback",e.hitch(this._debuggerActions,"debugStepOut"))},{id:this.DEBUG_QUIT_ACTION_ID,enabled:!0,
key:"shift_f5",platformKey:{mac:"shift_f5"},text:d.debugExitLabel,shortcut:d.debugExitShortcut,description:d.debugExitDescription,callback:e.hitch(this,"_debugActionCallback",e.hitch(this._debuggerActions,"debugExit"))}];this._actionService.loadActions(c)},_debugActionCallback:function(c){return this._debuggerActions.isDebugging?(c(),!0):!1},_addAdditionalKeyBindings:function(){this._keyHandler.addBindings([{platformKey:{mac:"meta_alt_r"},action:this.DEBUG_CONTINUE_ACTION_ID},{platformKey:{mac:"meta_shift_o"},
action:this.DEBUG_STEP_ACTION_ID},{platformKey:{mac:"meta_shift_i"},action:this.DEBUG_STEP_IN_ACTION_ID},{platformKey:{mac:"meta_shift_u"},action:this.DEBUG_STEP_OUT_ACTION_ID}])}})})},"MW/rtc/plugins/debug/DebugLineAutoScrollPluginProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/debug/DebugLineAutoScrollPlugin","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.view",
"debug.linefocus"]}},createInstance:function(d,c){return new e(d,c)}})})},"MW/rtc/plugins/debug/DebugLineAutoScrollPlugin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin"],function(h,e,g,d){return h(d,{_PERCENT_TO_SCROLL_TO:0.25,_CURSOR_CHANGE_PERIOD:100,constructor:function(c,b){this._view=c;this._debugLineFocus=b;this._layoutListener=this._timeout=null;this.own(g.after(this._debugLineFocus,"onCursorMove",e.hitch(this,"_handleOnCursorMove"),
!0))},_handleOnCursorMove:function(c,b){this._stopForcingScroll();this._scrollToLineColumn(c,b);this._startForcingScroll(c,b);this._timeout=setTimeout(this._stopForcingScroll.bind(this),this._CURSOR_CHANGE_PERIOD)},_startForcingScroll:function(c,b){this._layoutListener=g.after(this._view,"onLayoutChange",e.hitch(this,function(a){this._scrollToLineColumn(c,b)}))},_stopForcingScroll:function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null);this._layoutListener&&(this._layoutListener.remove(),
this._layoutListener=null)},_scrollToLineColumn:function(c,b){var a=this._view.getClientHeight()*this._PERCENT_TO_SCROLL_TO;this._view.scrollLineColumnIntoView(c,b,a)},destroy:function(){this._stopForcingScroll()}})})},"MW/rtc/plugins/debug/DebugLineFocusPluginProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/debug/DebugLineFocusPlugin","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:"rtc.cursor debug.documentdebugservices rtc.embeddedoutputs.linenumbertracker rtc.view.viewportopenedservice rtc.indentutilities rtc.cursorcontroller".split(" ")}},
createInstance:function(d,c,b,a,f,g){return new e(d,c,b,a,f,g)}})})},"MW/rtc/plugins/debug/DebugLineFocusPlugin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin"],function(h,e,g,d){return h(d,{constructor:function(c,b,a,f,d,h){this._cursor=c;this._documentDebugServices=b;this._lineNumberTracker=a;this._viewportOpenedService=f;this._indentUtilities=d;this._cursorController=h;this.own(g.after(this._documentDebugServices,"onStackChanged",e.hitch(this,
"_moveCursorAndScrollToLineOnDocumentReady")));this._moveCursorAndScrollToLineOnDocumentReady()},_moveCursorAndScrollToLineOnDocumentReady:function(){this._viewportOpenedService.whenViewportOpenedWithContent(this._moveCursorAndScrollToLine.bind(this))},_moveCursorAndScrollToLine:function(){var c=this._documentDebugServices.getActiveWorkspace();null===c||null===c.getLineNumber()||(c=c.getLineNumber(),c=this._getLineColumnInfoToGoTo(c),this._cursorController.clearSelection(),this._cursor.setLineColumn(c.line+
1,c.column+1),this.onCursorMove(c.line+1,c.column+1))},onCursorMove:function(c,b){},_getLineColumnInfoToGoTo:function(c){c=this._lineNumberTracker.getNewLineNumberFromOldLineNumber(c-1);var b=this._indentUtilities.findFirstNonWhitespaceTokenInLine(c);return b?b.getPositionInfo():{line:c,column:0}}})})},"MW/rtc/plugins/debug/DebugStackModelProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/debug/DebugStackModel","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{isApplicable:function(){return!0},
requires:function(){return{isApplicable:[],createInstance:["rtc.embeddedoutputs.statehandler"]}},createInstance:function(d){return new e(d)}})})},"MW/rtc/plugins/debug/DebugStackModel":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/plugins/debug/DebugServicesFactory MW/rtc/plugins/debug/DebugStackFrame MW/rtc/plugins/debug/DebugStackUtilities MW/rtc/plugins/debug/PersistentStackModelFactory".split(" "),function(h,e,g,d,c,b,a,f){return h(d,{constructor:function(a){this._debugServices=
c.getInstance();this._persistentStackModel=f.getInstance();this._stateHandler=a;this._stackFrames=[];this.own(g.after(this._persistentStackModel,"onModelUpdated",e.hitch(this,"_handleStackChanged"),!0));this.own(g.after(this._debugServices,"onDBCont",e.hitch(this,"_handleDbCont")));this.own(g.after(this._debugServices,"onDebugModeChanged",e.hitch(this,"_handleDebugMode"),!0));this.own(g.after(this._stateHandler,"stateChanged",e.hitch(this,"_stateChangeListener"),!0))},getStackFrames:function(){return this._stackFrames},
getExecutionPoint:function(){return a.getExecutionPointFrame(this._stackFrames)},onModelUpdated:function(){},_stateChangeListener:function(a){a===this._stateHandler.CHANGE_TYPE_ENUM.EVAL_INITIALIZED&&this._reset()},_handleDebugMode:function(a){a||this._reset()},_handleDbCont:function(){this._reset()},_handleStackChanged:function(){this._clearStackFrames();this._stackFrames=this._persistentStackModel.getStackFrames();this.onModelUpdated()},_reset:function(){this._clearStackFrames();this.onModelUpdated()},
_clearStackFrames:function(){this._stackFrames=[]}})})},"MW/rtc/plugins/debug/DebugStackUtilities":function(){define([],function(){return{getActiveWorkspaceFrame:function(h){for(var e=0;e<h.length;e+=1){var g=h[e];if(g.isActiveWorkspace())return g}return null},getExecutionPointFrame:function(h){for(var e=0;e<h.length;e+=1){var g=h[e];if(g.isExecutionPoint())return g}return null}}})},"MW/rtc/plugins/debug/DocumentDebugServicesProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/debug/DocumentDebugServices",
"MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["debug.stack.model","rtc.backingstore"]}},createInstance:function(d,c){return new e(d,c)}})})},"MW/rtc/plugins/debug/DocumentDebugServices":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/datamodel/FileBackingStore MW/rtc/plugins/debug/DebugServicesFactory MW/rtc/plugins/debug/DebugStackUtilities".split(" "),
function(h,e,g,d,c,b,a){return h(d,{constructor:function(a,c){this._debugServices=b.getInstance();this._debugStackModel=a;this._backingStore=c;this._documentStackFrames=[];this.own(g.after(this._debugStackModel,"onModelUpdated",e.hitch(this,"_handleStackModelUpdate"),!0));this.own(g.after(this._debugServices,"onDBStop",e.hitch(this,"_handleOnDBStop"),!0));this._hasFileBackingStore()&&this.own(g.after(this._backingStore,"onFilePathUpdated",e.hitch(this,"_handleFilePathUpdated")))},getStackFrames:function(){return this._documentStackFrames},
getExecutionPoint:function(){return a.getExecutionPointFrame(this._documentStackFrames)},getActiveWorkspace:function(){return a.getActiveWorkspaceFrame(this._documentStackFrames)},_handleStackModelUpdate:function(){var a=this._debugStackModel.getStackFrames().filter(function(a){if(this._hasFileBackingStore()&&a.getFullPath()===this._backingStore.getAbsoluteFilePath())return a},this);if(0!==a.length||0!==this._documentStackFrames.length)this._documentStackFrames=a,this.onStackChanged(this._documentStackFrames)},
_handleFilePathUpdated:function(){this._handleStackModelUpdate()},onStackChanged:function(a){},_handleOnDBStop:function(a,b){if(this._backingStore.getAbsoluteFilePath()===a)this.onDBStop(a,b)},onDBStop:function(a,b){},_hasFileBackingStore:function(){return this._backingStore instanceof c}})})},"MW/rtc/plugins/debug/DocumentLoadedServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/debug/DocumentLoadedService","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{isApplicable:function(){return!0},
requires:function(){return{isApplicable:[],createInstance:["rtc.internaldocument","rtc.document"]}},createInstance:function(d,c){return new e(d,c)}})})},"MW/rtc/plugins/debug/DocumentLoadedService":function(){define("dojo/aspect dojo/Deferred dojo/_base/declare dojo/has dojo/_base/lang MW/rtc/abstract/AbstractPlugin".split(" "),function(h,e,g,d,c,b){return g(b,{constructor:function(a,b){this._internalDocument=a;this._document=b;this._isLoaded=!1;this._promise=new e;this._listeners=[h.after(this._internalDocument,
"onDocumentChanged",c.hitch(this,"_handleDocumentChanged")),h.after(this._internalDocument,"onDocumentReset",c.hitch(this,"_handleDocumentReset"))]},whenDocumentLoadedWithText:function(a){this._promise.then(a,function(a){})},onDocumentLoadedWithText:function(){},isDocumentLoadedWithText:function(){return this._isLoaded},_handleDocumentChanged:function(){this._document.getText()&&this._flushEvents()},_handleDocumentReset:function(){this._document.getText()&&this._flushEvents()},_flushEvents:function(){this._isLoaded=
!0;this._promise.resolve();this.onDocumentLoadedWithText();this._cleanupListeners()},_cleanupListeners:function(){this._listeners.forEach(function(a){a.remove()});this._listeners=[]},destroy:function(){this.inherited(arguments);this._cleanupListeners();this._promise.reject();this._promise=[]}})})},"MW/rtc/plugins/debug/RunToLineServiceProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/debug/RunToLineService"],function(h,e,g,d){return h(g,
{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.actionservice","matlab.code.mtree.codeblocks","rtc.execution.actions","debug.documentdebugservices","rtc.code.executablelines"]}},createInstance:function(c,b,a,f,e){return new d(c,b,a,f,e)}})})},"MW/rtc/plugins/debug/RunToLineService":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred MW/rtc/abstract/AbstractPlugin MW/rtc/plugins/execution/RunToLineEventData MW/rtc/plugins/language/matlab/syntax/mtree/codeblocks/BlockType".split(" "),
function(h,e,g,d,c,b,a){return h(c,{constructor:function(a,b,c,d,h){this._actionService=a;this._mtreeCodeBlockService=b;this._executionActions=c;this._documentDebugServices=d;this._executableLineService=h;this._currentFileStackFrames=[];this.own(g.after(this._documentDebugServices,"onStackChanged",e.hitch(this,"_handleStackChanged"),!0));this.own(g.after(this._actionService,"onActionChange",e.hitch(this,"_handleActionChange"),!0))},runToLine:function(a,c){var d=new b(a-1);this._actionService.executeAction(c,
d)},onActionEnablementChanged:function(a){},getPossibleAction:function(a){var b=new d;this._mtreeCodeBlockService.whenSynchronized(e.hitch(this,function(){var c=this._getAction(a);b.resolve(c)}));return b},_getAction:function(a){if(!this._executableLineService.isCodeLineExecutable(a))return null;var b=this._actionService.getAction(this._executionActions.RUN_TO_LINE_ACTION_ID);if(b.enabled)return this._mtreeCodeBlockService.isLineInFunction(a)?null:b;b=this._actionService.getAction(this._executionActions.CONTINUE_TO_LINE_ACTION_ID);
return b.enabled&&this._shouldShowContinueForLineNumber(a)?b:null},_shouldShowContinueForLineNumber:function(b){var c=this._mtreeCodeBlockService.getInnermostBlockOfType(b,a.FUNCTION_DEFINITION),c=this._getCurrentStackFrameLineNumbersInSameWorkspace(b,c);return 0<c.length?c.some(function(a){return this._isContinueToLineBelowStackFrameLine(b,a)},this):!1},_getCurrentStackFrameLineNumbersInSameWorkspace:function(a,b){var c=[];this._currentFileStackFrames.forEach(function(a){a=a.getLineNumber();this._isStackFrameInSameWorkspace(a,
b)&&c.push(a)},this);return c},_isStackFrameInSameWorkspace:function(a,b){return null===b?!this._mtreeCodeBlockService.isLineInFunction(a):this._isStackFrameInSameFunctionBlock(a,b)},_isStackFrameInSameFunctionBlock:function(b,c){var d=this._mtreeCodeBlockService.getInnermostBlockOfType(b,a.FUNCTION_DEFINITION);return null===d?!1:d.id===c.id},_isContinueToLineBelowStackFrameLine:function(a,b){return b<a},_handleStackChanged:function(a){this._currentFileStackFrames=a},_handleActionChange:function(a){var b=
"enabled"===a.key;if((a.id===this._executionActions.RUN_TO_LINE_ACTION_ID||a.id===this._executionActions.CONTINUE_TO_LINE_ACTION_ID)&&b)this.onActionEnablementChanged(a.newValue)}})})},"MW/rtc/plugins/execution/RunToLineEventData":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,e){return h(e,{constructor:function(e){this.lineNumber=e}})})},"MW/rtc/plugins/debug/DocumentDirtyDebugServiceProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider",
"MW/rtc/plugins/debug/DebugServicesFactory","MW/rtc/plugins/debug/DocumentDirtyDebugService"],function(h,e,g,d,c){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.document"]}},createInstance:function(b){var a=d.getInstance();return new c(b,a)}})})},"MW/rtc/plugins/debug/DocumentDirtyDebugService":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin"],function(h,e,g,d){return h(d,{constructor:function(c,
b){this._document=c;this._debugServices=b;this._documentDirtiedWhileDebugging=!1;this.own(g.after(this._debugServices,"onDebugModeChanged",e.hitch(this,"_handleDebugModeChanged")));this.own(g.after(this._document,"onChange",e.hitch(this,"_handleDocumentChanged")))},onDocumentDirtiedWhileDebugging:function(){},_handleDebugModeChanged:function(){this._documentDirtiedWhileDebugging=!1},_handleDocumentChanged:function(){this._debugServices.isDebugging&&!this._documentDirtiedWhileDebugging&&(this._documentDirtiedWhileDebugging=
!0,this.onDocumentDirtiedWhileDebugging())}})})},"MW/rtc/plugins/debug/contextualbuttons/ContextualButtonFactoryProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/debug/contextualbuttons/ContextualButtonFactory"],function(h,e,g,d){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:[]}},createInstance:function(){return new d}})})},"MW/rtc/plugins/debug/contextualbuttons/ContextualButtonFactory":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/buttonfactory/ButtonFactory"],function(h,e){return h(e,{_CONTEXTUAL_DEBUG_BUTTON_CSS:"contextualDebugButton",createButton:function(e,d,c){e.push(this._CONTEXTUAL_DEBUG_BUTTON_CSS);return this.inherited(arguments)}})})},"MW/rtc/plugins/debug/contextualbuttons/runtohere/RunToHereViewModelProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/debug/contextualbuttons/runtohere/RunToHereViewModel"],function(h,e,g,d){return h(g,
{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.document","rtc.linenumberservice","debug.contextualbuttons.runtohere.hoverservice","debug.runtolineservice"]}},createInstance:function(c,b,a,f){return new d(c,b,a,f)}})})},"MW/rtc/plugins/debug/contextualbuttons/runtohere/RunToHereViewModel":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-construct MW/rtc/abstract/AbstractPlugin MW/rtc/model/Range MW/rtc/plugins/debug/contextualbuttons/runtohere/RunToHereViewInfo".split(" "),
function(h,e,g,d,c,b,a){return h(c,{constructor:function(a,b,c,d){this._document=a;this._lineNumberService=b;this._codeHoverService=c;this._runToLineService=d;this._promise=null;this.own(g.after(this._codeHoverService,"onMouseEnter",e.hitch(this,"_handleMouseEnteredCode"),!0));this.own(g.after(this._codeHoverService,"onMouseLeave",e.hitch(this,"_handleMouseLeftCode"),!0));this.own(g.after(this._runToLineService,"onActionEnablementChanged",e.hitch(this,"_handleActionEnablementChange"),!0));this.own(g.after(this._document,
"onChange",e.hitch(this,"_cleanup")))},onUpdate:function(a){},onClear:function(){},_handleMouseEnteredCode:function(a){this._promise=this._runToLineService.getPossibleAction(a);this._promise.then(e.hitch(this,"_updateIfActionExists",a),function(){})},_updateIfActionExists:function(b,c){if(c){var d=this._lineNumberService.getLineNumberFromCodeLineNumber(b),g=this._getRangeForLineNumber(d);if(g){var h=e.hitch(this,"_runToHere",b,c.id),d=new a(g,h,c,d);this.onUpdate(d)}}},_getRangeForLineNumber:function(a){var c=
this._document.getLineText(a+1).length;if(0===c)return null;var d=this._document.createPositionAtLineColumn(a,0);a=this._document.createPositionAtLineColumn(a,c);return new b(d,a)},_handleMouseLeftCode:function(a){this._cleanup()},_handleActionEnablementChange:function(a,b){if(!b)this.onClear()},_runToHere:function(a,b){this._runToLineService.runToLine(a,b);this.onClear()},_cleanup:function(){this._promise&&(this._promise.cancel("Destroying"),this._promise=null);this.onClear()},destroy:function(){this.inherited(arguments);
this._cleanup()}})})},"MW/rtc/plugins/debug/contextualbuttons/runtohere/RunToHereViewInfo":function(){define(["dojo/_base/declare","MW/rtc/margin/MarginUtilities"],function(h,e){return h(null,{_CSS_CLASS:"runToHere",_ELEMENT_HEIGHT:18,constructor:function(e,d,c,b){this._range=e;this._callback=d;this._action=c;this._documentLineNumber=b},getRange:function(){return this._range},getCallback:function(){return this._callback},getBasicDescription:function(){return this._action.text||""},getDetailedDescription:function(){return this._action.description||
""},getCSSClasses:function(){return[this._CSS_CLASS]},getPixelsForVerticalAlignment:function(g){return e.getTopForMiddleAlignmentWithLineNumber(g,this._documentLineNumber,this._ELEMENT_HEIGHT)},destroy:function(){this._range&&this._range.destroy()}})})},"MW/rtc/plugins/debug/contextualbuttons/runtohere/RunToHereViewProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/debug/contextualbuttons/runtohere/RunToHereView"],function(h,e,
g,d){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.view","debug.contextualbuttons.runtohere.viewmodel","debug.contextualbuttons.buttonfactory","rtc.view.decoration"]}},createInstance:function(c,b,a,f){return new d(c,b,a,f)}})})},"MW/rtc/plugins/debug/contextualbuttons/runtohere/RunToHereView":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/view/decoration/DecorationUtilities MW/rtc/plugins/descriptivetooltip/DescriptiveTooltip dojo/text!MW/rtc/plugins/debug/css/run_here_14.svg".split(" "),
function(h,e,g,d,c,b,a){return h(d,{_HIDE_DISPLAY_STYLE:"none",_DOM_LOCATION:c.PLACEMENT.BEFORE,_ADDITIONAL_TOOLTIP_DELAY:300,constructor:function(a,b,c,d){this._view=a;this._runToHereViewModel=b;this._contextualButtonFactory=c;this._decorator=d.createDecorator(1);this._currentInfo=this._currentButtonNode=this._tooltip=null;this.own(g.after(this._runToHereViewModel,"onUpdate",e.hitch(this,"_handleUpdate"),!0));this.own(g.after(this._runToHereViewModel,"onClear",e.hitch(this,"_handleClear")))},_handleUpdate:function(a){this._removeCurrentButton();
this._addButton(a);this._currentButtonNode.style.marginTop=a.getPixelsForVerticalAlignment(this._view)+"px";this._decorator.applyChanges()},_handleClear:function(){this._hideCurrentButton()},_addButton:function(f){this._currentInfo=f;this._currentButtonNode=this._contextualButtonFactory.createButton(this._currentInfo.getCSSClasses(),a,null);this._currentButtonNode.addEventListener("animationend",e.hitch(this,"_enableButton",this._currentInfo.getCallback()));this._decorator.addDomNode(this._currentButtonNode,
this._currentInfo.getRange(),this._DOM_LOCATION);this._tooltip=new b({targetNode:this._currentButtonNode,label:this._currentInfo.getBasicDescription(),description:this._currentInfo.getDetailedDescription(),additionalDelay:this._ADDITIONAL_TOOLTIP_DELAY})},_enableButton:function(a){this._currentButtonNode.className+=" enabled";this._currentButtonNode.onclick=a},_removeCurrentButton:function(){this._currentButtonNode&&(this._tooltip&&(this._tooltip.destroy(),this._tooltip=null),this._decorator.removeDomNode(this._currentButtonNode,
this._currentInfo.getRange(),this._DOM_LOCATION),this._currentButtonNode=null,this._currentInfo.destroy(),this._currentInfo=null)},_hideCurrentButton:function(){this._currentButtonNode&&(this._tooltip&&(this._tooltip.destroy(),this._tooltip=null),this._currentButtonNode.style.display=this._HIDE_DISPLAY_STYLE)},destroy:function(){this.inherited(arguments);this._removeCurrentButton()}})})},"MW/rtc/view/decoration/DecorationUtilities":function(){define(["dojo/dom-construct","dojo/_base/lang","MW/rtc/model/CodeUtilities",
"MW/rtc/view/ViewUtilities","MW/rtc/view/decoration/viewmodel/DecorationRangeDescriptor"],function(h,e,g,d,c){return{PLACEMENT:{BEFORE:0,AFTER:1,BETWEEN:2},_FULL_LINE_LAYER_CSS:"decorationLayer",createViewForTextNode:function(b,a,f){var c=document.createDocumentFragment();if(!b)return c.appendChild(f),c;var d=0,e=0;a.forEach(function(a){d=a.start;this._createViewAndAppend(b,e,d,f,c);e=a.end;var g=this._createViewAndAppend(b,d,e,f,c);g&&this._applyDecoration(g,a)},this);this._createViewAndAppend(b,
e,b.length,f,c);return c},_createViewAndAppend:function(b,a,c,d,e){var g=null;c>a&&(g=d.cloneNode(!1),g.textContent=b.substring(a,c),e.appendChild(g));return g},_applyDecoration:function(b,a){var c=a.styles,d;for(d in c)c.hasOwnProperty(d)&&(b.style[d]=c[d]);var c=a.classes,e;for(e in c)c.hasOwnProperty(e)&&b.classList.add(e)},createNewLayerForDecorator:function(b,a,f){var d=h.create("div",{"class":this._FULL_LINE_LAYER_CSS}),e=b.getLayerCssClass();e&&d.classList.add(e);b=a.getDescriptorsForLayerDecorator(b);
if(!b)return d;a=f.getDocumentDimension().width;d.style.width=a+"px";b.forEach(function(a){a instanceof c?this._addRangeDomNodeIntoLayer(a,d,f,e):this._addDomNodeIntoLayer(a,d)},this);this._setLayerToFullWidth(d,f);return d},_addRangeDomNodeIntoLayer:function(b,a,c,g){var l=b.getRange().getStartPosition();c=d.getVerticalDimensionsBetweenPositions(l,l,c);c={top:c.top+"px",height:c.bottom-c.top+"px"};e.mixin(c,b.getStyles());var n=this._FULL_LINE_LAYER_CSS;g&&(n=g);h.create("div",{style:c,"class":b.getClassName(),
"data-testid":n+"_"+l.getLine()},a)},_setLayerToFullWidth:function(b,a){var c=a.getDocumentDimension().width;b.style.width=c+"px"},_addDomNodeIntoLayer:function(b,a){h.create("div",{style:b.getStyles(),"class":b.getClassName()},a)},decorateAllCodeLines:function(b,a,c){for(var d=c.getMaxLineNumber(),e=0;e<d;e+=1){var h=c.getLineNode(e);g.isCodeContainer(h)&&b(e,c.getRangeForLine(e+1))}a.applyChanges()}}})},"MW/rtc/view/decoration/viewmodel/DecorationRangeDescriptor":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/browsersupport/BrowserSupportUtilities MW/rtc/model/Range MW/rtc/view/decoration/viewmodel/DecorationAtomicDescriptor".split(" "),
function(h,e,g,d,c,b){return h(b,{constructor:function(a){this._range=new c(a.startPosition,a.endPosition);this._aspectHandles=[];this._setupDescriptorMap(a.descriptorSettings)},_setupDescriptorMap:function(a){this._descriptorMap=d.createMap();a&&a.forEach(function(a){var c=a.decorator;a=new b(a.settings);this._descriptorMap.set(c,a)},this)},addClass:function(a,b){this._getOrCreateAtomicDescriptor(b).addClass(a);this._recalculateDecoration()},setStyle:function(a,b,c){this._getOrCreateAtomicDescriptor(c).setStyle(a,
b);this._recalculateDecoration()},addDomNode:function(a,b,c,d){this._getOrCreateAtomicDescriptor(d).addDomNode(a,b,c);this._recalculateDecoration()},removeClass:function(a,b){var c=this.getAtomicDescriptor(b);if(!c)return!1;c.removeClass(a);this._recalculateDecoration();return!0},removeStyle:function(a,b){var c=this.getAtomicDescriptor(b);if(!c)return!1;c.removeStyle(a);this._recalculateDecoration();return!0},removeDomNode:function(a,b){var c=this.getAtomicDescriptor(b);if(!c)return!1;c.removeDomNode(a);
this._recalculateDecoration();return!0},clear:function(a){if(!this._descriptorMap["delete"](a))return!1;this._recalculateDecoration();return!0},_getOrCreateAtomicDescriptor:function(a){var c=this.getAtomicDescriptor(a);if(c)return c;c=new b;this._descriptorMap.set(a,c);return c},getAtomicDescriptor:function(a){return this._descriptorMap.get(a)},_recalculateDecoration:function(){var a=this._getSortedAtomicDescriptors(),b={},c={},g=d.createMap();a.forEach(function(a){var d=a.getStyles(),h=a.getClasses();
a=a.getDomNodes();e.mixin(b,d);e.mixin(c,h);a.forEach(function(a,b){g.set(b,a)},this)},this);this._styles=b;this._classes=c;this._domNodes=g},_getSortedAtomicDescriptors:function(){var a=[];this._descriptorMap.forEach(function(b,c){a.push({decorator:c,descriptor:b})},this);return a.sort(function(a,b){return a.decorator.priority()-b.decorator.priority()}).map(function(a){return a.descriptor})},merge:function(a){this.adjust(a.getEndOffset())},adjust:function(a){if(0>a)throw Error("Invalid target offset");
this._range.getEndPosition().setPosition(this.getStartNode(),a)},canMerge:function(a){return this._range.getEndPosition().isEqualTo(a.getRange().getStartPosition())&&this._hasSameDecoratorsWith(a)&&this.inherited(arguments)},_hasSameDecoratorsWith:function(a){var b=a.getDescriptorMap();if(this._descriptorMap.size!==b.size)return!1;var c=!0;this._descriptorMap.forEach(function(a,d){b.has(d)||(c=!1)},this);return c},cloneSettings:function(){var a=this.inherited(arguments),b=[];this._descriptorMap.forEach(function(a,
c){b.push({decorator:c,settings:a.cloneSettings()})},this);a.descriptorSettings=b;return a},getRange:function(){return this._range},getStartNode:function(){return this._range.getStartPosition().getNode()},getStartOffset:function(){return this._range.getStartPosition().getOffset()},getEndNode:function(){return this._range.getEndPosition().getNode()},getEndOffset:function(){return this._range.getEndPosition().getOffset()},getDescriptorMap:function(){return this._descriptorMap},addChangeListener:function(a){this._aspectHandles.push(g.after(this._range.getStartPosition(),
"onChange",a,!0));this._aspectHandles.push(g.after(this._range.getEndPosition(),"onChange",a,!0))},destroy:function(){this._range.getStartPosition().setLive(!1);this._range.getEndPosition().setLive(!1);this._aspectHandles.forEach(function(a){a.remove()},this);this._aspectHandles=[]}})})},"MW/rtc/view/decoration/viewmodel/DecorationAtomicDescriptor":function(){define(["dojo/_base/declare","MW/rtc/browsersupport/BrowserSupportUtilities"],function(h,e){return h(null,{constructor:function(g){g=g||{};
this._styles=g.styles||{};this._classes=g.classes||{};this._domNodes=g.domNodes||e.createMap()},getClasses:function(){return this._classes},getClassName:function(){return Object.keys(this._classes).join(" ")},addClass:function(e){this._classes[e]=!0},removeClass:function(e){delete this._classes[e]},getStyles:function(){return this._styles},setStyle:function(e,d){this._styles[e]=d},removeStyle:function(e){delete this._styles[e]},getDomNodes:function(){return this._domNodes},addDomNode:function(e,d,
c){this._domNodes.set(e,{rtcPosition:d,domPlacement:c})},removeDomNode:function(e){this._domNodes.delete(e)},hasDecoration:function(){return 0<Object.keys(this.getStyles()).length||0<Object.keys(this.getClasses()).length||0<this._domNodes.size},classesEqualTo:function(e){return Object.keys(this._classes).length!==e.length?!1:!e.some(function(d){return!this._classes[d]},this)},canMerge:function(e){return this._objectMatch(this._styles,e.getStyles())&&this._objectMatch(this._classes,e.getClasses())&&
this._mapMatch(this._domNodes,e.getDomNodes())},cloneSettings:function(){return{styles:JSON.parse(JSON.stringify(this._styles)),classes:JSON.parse(JSON.stringify(this._classes))}},_objectMatch:function(e,d){var c=Object.keys(e),b=Object.keys(d);return c.length!==b.length?!1:!c.some(function(a){return e[a]!==d[a]},this)},_mapMatch:function(e,d){if(e.size!==d.size)return!1;var c=!0;e.forEach(function(b,a){d.has(a)||(c=!1);d.get(a)!==b&&(c=!1)},this);return c}})})},"MW/rtc/plugins/debug/contextualbuttons/runtohere/hoverservice/RunToHereCodeHoverServiceProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/debug/contextualbuttons/runtohere/hoverservice/RunToHereCodeHoverService"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.view","rtc.internaldocument","rtc.linenumberservice"]}},createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/plugins/debug/contextualbuttons/runtohere/hoverservice/RunToHereCodeHoverService":function(){define("dojo/aspect dojo/on dojo/_base/declare dojo/_base/lang MW/rtc/abstract/AbstractPlugin MW/rtc/plugins/debug/contextualbuttons/runtohere/hoverservice/LeftMarginCodeHoverUtilities".split(" "),
function(h,e,g,d,c,b){return g(c,{_NO_LINE:-1,constructor:function(a,b,c){this._view=a;this._internalDocument=b;this._lineNumberService=c;this._currentLineNumber=this._NO_LINE;this.own(e(this._view.getDomtarget(),"mousemove",d.hitch(this,"_handleMouseMove")));this.own(e(this._view.getDomtarget(),"mouseleave",d.hitch(this,"_sendMouseLeaveIfNeeded")))},onMouseEnter:function(a){},onMouseLeave:function(a){},_handleMouseMove:function(a){a&&(a=this._view.fixEvent(a),b.shouldHandleMouseMoveEvent(this._view,
this._internalDocument,a)?this._handleHoverOnCodeLine(a):this._sendMouseLeaveIfNeeded())},_handleHoverOnCodeLine:function(a){a=this._view.getPositionFromEvent(a);a=this._lineNumberService.getCodeLineNumberFromLineNumber(a.getLine()-1);a!==this._currentLineNumber&&(this._sendMouseLeaveIfNeeded(),this._currentLineNumber=a,this.onMouseEnter(this._currentLineNumber))},_sendMouseLeaveIfNeeded:function(){this._currentLineNumber!==this._NO_LINE&&(this.onMouseLeave(this._currentLineNumber),this._currentLineNumber=
this._NO_LINE)}})})},"MW/rtc/plugins/debug/contextualbuttons/runtohere/hoverservice/LeftMarginCodeHoverUtilities":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities"],function(h,e){return{_LEFT_BUFFER:0,_RIGHT_OVERLAP:13,shouldHandleMouseMoveEvent:function(g,d,c){c=g.getCoordinateFromEvent(c);var b=g.getLineFromCoordinate(c),b=d.getLineNode(b-1);if(!b||!b.box||!e.isCodeContainer(b))return!1;d=this._isCorrectXPosition(c,b);g=this._isCorrectYPosition(g,c,b);return d&&g},_isCorrectXPosition:function(e,
d){var c=this._LEFT_BUFFER;return e.x<d.box.offsetLeft+this._RIGHT_OVERLAP&&e.x>=c},_isCorrectYPosition:function(e,d,c){var b=e.getNodeTop(c);e=e.getNodeBottom(c);return d.y>=b&&d.y<e}}})},"MW/rtc/plugins/debug/contextualbuttons/stepin/FunctionCallsiteFactoryProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/debug/contextualbuttons/stepin/FunctionCallsiteFactory"],function(h,e,g,d){return h(g,{isApplicable:function(){return!0},
requires:function(){return{isApplicable:[],createInstance:["rtc.editordataservice","rtc.document","rtc.embeddedoutputs.linenumbertracker"]}},createInstance:function(c,b,a){return new d(c,b,a)}})})},"MW/rtc/plugins/debug/contextualbuttons/stepin/FunctionCallsiteFactory":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin","MW/rtc/model/Range","MW/rtc/plugins/debug/contextualbuttons/stepin/FunctionCallsite"],function(h,e,g,d){return h(e,{_STEP_IN_FEATURE_ID:"code.stepinanywhere",
constructor:function(c,b,a){this._editorDataService=c;this._document=b;this._lineNumberTracker=a},_createRange:function(c,b,a){var f=this._lineNumberTracker.getNewLineNumberFromOldLineNumber(b);b=this._document.createPositionAtLineColumn(f,a,!0);if(b.isAtRightEdge()){var d=b.getNode().nextSibling();d&&b.setPosition(d,0)}c=this._document.createPositionAtLineColumn(f,a+c.length,!0);b.setLive(!0);c.setLive(!0);return new g(b,c)},create:function(c,b,a,f){a=this._createRange(c,a,f);return new d(this._editorDataService,
c,b,a)}})})},"MW/rtc/plugins/debug/contextualbuttons/stepin/FunctionCallsite":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,e){return h(e,{_STEP_IN_FEATURE_ID:"code.stepinanywhere",constructor:function(e,d,c,b){this._editorDataService=e;this._functionName=d;this._uniqueId=c;this._range=b;this._performingStepIn=!1},getFunctionName:function(){return this._functionName},getRange:function(){return this._range},getUniqueId:function(){return this._uniqueId},stepIn:function(){this._performingStepIn||
(this._performingStepIn=!0,this._editorDataService.request(this._STEP_IN_FEATURE_ID,{uniqueId:this._uniqueId}))},destroy:function(){this.inherited(arguments);this._range&&this._range.destroy()}})})},"MW/rtc/plugins/debug/contextualbuttons/stepin/StepInManagerProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/debug/DebugServicesFactory","MW/rtc/plugins/debug/contextualbuttons/stepin/StepInManager"],function(h,e,g,d,c){return h(g,
{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.editordataservice","rtc.id","debug.contextualbuttons.stepin.functioncallsitefactory","rtc.service.documentloaded","debug.documentdebugservices"]}},createInstance:function(b,a,f,e,g){var h=d.getInstance();return new c(b,a,f,e,g,h)}})})},"MW/rtc/plugins/debug/contextualbuttons/stepin/StepInManager":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin"],
function(h,e,g,d){return h(d,{_FUNCTION_CALLSITE_QUERY:"code.stepinanywhere.query",constructor:function(c,b,a,f,d,h){this._editorDataService=c;this._editorId=b;this._functionCallsiteFactory=a;this._documentLoadedService=f;this._documentDebugServices=d;this._debugServices=h;this._previousTopOfStack=this._promise=null;this._functionCallsites=[];this.own(g.after(this._documentDebugServices,"onStackChanged",e.hitch(this,"_updateFunctionCallsitesIfAtExecutionPoint")));this.own(g.after(this._debugServices,
"onDBCont",e.hitch(this,"_handleDBCont")))},onFunctionCallsitesUpdated:function(c){},_updateFunctionCallsitesIfAtExecutionPoint:function(){var c=this._documentDebugServices.getExecutionPoint();null!==c&&!this._isSameAsPreviousTopOfStack(c)&&(this._previousTopOfStack=c,c=c.getLineNumber(),this._documentLoadedService.whenDocumentLoadedWithText(e.hitch(this,"_updateFunctionCallsites",c-1)))},_isSameAsPreviousTopOfStack:function(c){return null===this._previousTopOfStack||this._previousTopOfStack.getName()!==
c.getName()||this._previousTopOfStack.getFullPath()!==c.getFullPath()||this._previousTopOfStack.getLineNumber()!==c.getLineNumber()||this._previousTopOfStack.isExecutionPoint()!==c.isExecutionPoint()||this._previousTopOfStack.isLeavingFrame()!==c.isLeavingFrame()?!1:!0},_updateFunctionCallsites:function(c){this._clearFunctionCallsites();0>c||this._addAllNewFunctionCallsites()},_addAllNewFunctionCallsites:function(){this._promise=this._editorDataService.request(this._FUNCTION_CALLSITE_QUERY,{editorId:this._editorId});
this._promise.then(e.hitch(this,function(c){this._promise=null;c.stepInInformation&&(c.stepInInformation.forEach(function(b){this._addFunctionCallsite(b.functionIdentifier,b.uniqueId,b.line,b.column)},this),this.onFunctionCallsitesUpdated(this._functionCallsites))}),e.hitch(this,function(c){}))},_addFunctionCallsite:function(c,b,a,f){c=this._functionCallsiteFactory.create(c,b,a,f);this._functionCallsites.push(c)},_handleDBCont:function(){this._previousTopOfStack=null;this._clearFunctionCallsites()},
_clearFunctionCallsites:function(){this._promise&&(this._promise.cancel("Cancel function callsite query request"),this._promise=null);this._functionCallsites.forEach(function(c){c.destroy()});this._functionCallsites=[];this.onFunctionCallsitesUpdated(this._functionCallsites)},destroy:function(){this.inherited(arguments);this._clearFunctionCallsites()}})})},"MW/rtc/plugins/debug/contextualbuttons/stepin/StepInViewProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider",
"MW/rtc/plugins/debug/contextualbuttons/stepin/StepInView"],function(h,e,g,d){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["debug.contextualbuttons.stepin.manager","debug.contextualbuttons.buttonfactory","rtc.view.decoration"]}},createInstance:function(c,b,a){return new d(c,b,a)}})})},"MW/rtc/plugins/debug/contextualbuttons/stepin/StepInView":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/i18n!l10n/nls/execution dojo/string MW/rtc/abstract/AbstractPlugin MW/rtc/browsersupport/BrowserSupportUtilities MW/rtc/view/decoration/DecorationUtilities MW/rtc/plugins/descriptivetooltip/DescriptiveTooltip MW/rtc/plugins/descriptivetooltip/DescriptiveTooltipUtilities dojo/text!MW/rtc/plugins/debug/css/step_in_14.svg".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p){return h(a,{_CSS_CLASS:"stepIn",_ENABLED_CSS_CLASS:"enabled",_LEFT_IS_NONWHITESPACE_CSS_CLASS:"includeLeftMargin",_DOM_LOCATION:k.PLACEMENT.BETWEEN,constructor:function(a,b,c){this._stepInManager=a;this._contextualButtonFactory=b;this._decorator=c.createDecorator(0,!0);this._buttonsToInfoMap=f.createMap();this.own(g.after(this._stepInManager,"onFunctionCallsitesUpdated",e.hitch(this,"_addButtons"),!0))},_addButtons:function(a){a.forEach(function(a){this._addButton(a)},
this);this._decorator.applyChanges()},_addButton:function(a){var b=a.getRange(),c=a.getFunctionName(),f=[this._CSS_CLASS,this._ENABLED_CSS_CLASS];this._isNonWhitepaceCharacterToLeft(b)&&f.push(this._LEFT_IS_NONWHITESPACE_CSS_CLASS);f=this._contextualButtonFactory.createButton(f,p,e.hitch(a,"stepIn"));d.set(f,"data-testid","stepin_"+c);this._addButtonNode(f,b);a=this._addButtonListener(f,a);c=this._addButtonTooltip(f,c);this._buttonsToInfoMap.set(f,{range:b,destroyListener:a,tooltip:c})},_isNonWhitepaceCharacterToLeft:function(a){a=
a.getStartPosition();var b=a.getColumn()-1;return 0===b?!1:""!==a.getNode().rootContainer().getCodeText().charAt(b-1).trim()},_addButtonNode:function(a,b){this._decorator.addDomNode(a,b,this._DOM_LOCATION)},_addButtonListener:function(a,b){return g.before(b,"destroy",e.hitch(this,"_removeButton",a))},_addButtonTooltip:function(a,f){var d=n.styleAsCode(f);return new l({targetNode:a,label:b.substitute(c.stepInAnywhereLabel,[d]),description:b.substitute(c.stepInAnywhereDescription,[d])})},_removeButton:function(a){var b=
this._buttonsToInfoMap.get(a);b&&(this._removeButtonWithInfo(a,b),this._buttonsToInfoMap.delete(a))},_removeButtonWithInfo:function(a,b){b.destroyListener.remove();b.tooltip.destroy();this._decorator.removeDomNode(a,b.range,this._DOM_LOCATION)},destroy:function(){this.inherited(arguments);this._buttonsToInfoMap.forEach(function(a,b){this._removeButtonWithInfo(b,a)},this);this._buttonsToInfoMap.clear()}})})},"MW/rtc/plugins/device/ios/VirtualKeyboardShortcutBarProvider":function(){define(["dojo/_base/declare",
"dojo/has","MW/rtc/core/provider/PluginProvider","./VirtualKeyboardShortcutBar"],function(h,e,g,d){return h([g],{requires:function(){return{isApplicable:[],createInstance:["rtc.cursor","rtc.keyhandler"]}},isApplicable:function(){return e("ios")},createInstance:function(c,b){return new d(c,b)}})})},"MW/rtc/plugins/device/ios/VirtualKeyboardShortcutBar":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect"],function(h,e,g){return h(null,{REFOCUS_DELAY:0,constructor:function(d,c){this._cursor=
d;this._keyHandler=c;this._handler=g.after(this._cursor,"onUpdate",e.hitch(this,"onCursorUpdate"))},destroy:function(){this._handler.remove();this._timeout&&window.clearTimeout(this._timeout)},onCursorUpdate:function(){var d=this;this._timeout&&window.clearTimeout(this._timeout);this._timeout=window.setTimeout(function(){d._timeout=null;d._doUpdateVirtualKeyboard()},this.REFOCUS_DELAY)},_doUpdateVirtualKeyboard:function(){document.activeElement===this._keyHandler.keyCapture&&this._cursor.hasSelection()!==
this._virtualKeyboardShowsSelection&&this._refocus()},_refocus:function(){this._keyHandler.keyCapture.blur();this._keyHandler.keyCapture.focus();this._virtualKeyboardShowsSelection=0<this._keyHandler.keyCapture.selectionEnd-this._keyHandler.keyCapture.selectionStart}})})},"MW/rtc/plugins/editordataservice/EditorDataServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider"],function(h,e){return h(e,{requires:function(){return{createInstance:"rtc.editordataservicemanager rtc.backingstore rtc.editordataservice.plugincontainer rtc.internaldocument rtc.document rtc.id".split(" ")}},
createInstance:function(e,d,c,b,a,f){this._editorDataSeviceProvider=e.getEditorDataServiceProvider(c?c:[],d,b,a,f);return this._editorDataSeviceProvider.getEditorDataService()},destroyInstance:function(e){this._editorDataSeviceProvider.dispose()}})})},"MW/rtc/plugins/editordataservice/EditorDataServiceManagerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/editordataservice/EditorDataServiceManagerFactory"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},
createInstance:function(){return g.getInstance()},destroyInstance:function(d){}})})},"MW/rtc/editordataservice/EditorDataServiceManagerFactory":function(){define(["MW/rtc/editordataservice/EditorDataServiceManager"],function(h){var e=null;return{getInstance:function(){null===e&&(e=new h);return e}}})},"MW/rtc/editordataservice/EditorDataServiceManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect mw-peermodel/PeerModelManager mw-messageservice/MessageService MW/rtc/editordataservice/EditorDataServiceProvider mw-utils/Utils".split(" "),
function(h,e,g,d,c,b,a){return h(null,{_RETRY_TIME_MILLISECONDS:250,_START_MESSAGE:"/editordataservice/start",_STARTED_MESSAGE:"/editordataservice/started/",constructor:function(a){this._isPeerModelInitialized=!1;this._namespace=a;this._mockFeatureDataServices={};this._mockRequestService={};this._namespaceUID={};this._startedInitialization=!1;this._initializationRetryTimer=null;this._messageService=c},_initializeRoot:function(){this._root=this._peerModel.setRoot("root",{one:1})},start:function(){this._initializePeerModel();
this._peerModel.hasRoot()||this._initializeRoot();this._peerModel.isSyncEnabled()||this._peerModel.setSyncEnabled(!0)},_initializePeerModel:function(){this._startedInitialization||(this._startedInitialization=!0,this._namespaceUID=a.generateUuid(),this._peerModel=d.getServerInstance(this._namespace?this._namespace:"/editordataservice/"+this._namespaceUID),this._namespace||(this._messageService.subscribe(this._STARTED_MESSAGE+this._namespaceUID,this._serverSideEditorDataServiceInitialized,this),this._initializeServerSideEditorDataService()))},
_initializeServerSideEditorDataService:function(){this._isPeerModelInitialized?this._initializationRetryTimer=null:(this._messageService.publish(this._START_MESSAGE,this._namespaceUID),this._initializationRetryTimer=setTimeout(e.hitch(this,this._initializeServerSideEditorDataService),this._RETRY_TIME_MILLISECONDS))},_serverSideEditorDataServiceInitialized:function(){!0!==this._isPeerModelInitialized&&(this._messageService.unsubscribe(this._STARTED_MESSAGE+this._namespaceUID,this._serverSideEditorDataServiceInitialized,
this),this._initializationRetryTimer&&(clearTimeout(this._initializationRetryTimer),this._initializationRetryTimer=null),this._isPeerModelInitialized=!0)},stop:function(){this.isInitialized()&&(this._root.destroy(),this._root=null,this._peerModel.setSyncEnabled(!1),this._mockFeatureDataServices={},this._mockRequestService={},this._isPeerModelInitialized=!1,this._namespace="",this._initializeRoot())},isInitialized:function(){return this._isPeerModelInitialized},installMockDataService:function(a,b){this._mockFeatureDataServices[a]=
b},removeMockDataService:function(a){delete this._mockFeatureDataServices[a]},installMockRequestService:function(a,b){this._mockRequestService[a]=b},removeMockRequestService:function(a,b){delete this._mockRequestService[a]},_getMockDataServices:function(){return e.clone(this._mockFeatureDataServices)},_getMockRequestServices:function(){return e.clone(this._mockRequestService)},getEditorDataServiceProvider:function(a,c,d,e,g){this.start();g=this._addEditorOpenedNode(g);return new b(g,a,this._getMockDataServices(),
d,e,this._getMockRequestServices(),c)},_addEditorOpenedNode:function(a){return this._root.addChild("editor",{uniqueId:a})}})})},"MW/rtc/editordataservice/EditorDataServiceProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/Deferred","mw-utils/Utils"],function(h,e,g,d,c){return h(null,{PROPERTY_SET_ID:"propertySet",DOCUMENT_STATE_ID_SUFFIX:".documentstate",constructor:function(b,a,c,d,e,g,h){this._peerNode=b;this._mockFeatureDataServices=c;this._document=e;this._internalDocument=
d;this._connections=[];this._mockRequestDataServices=g;this._fullyRegisteredFeatures={};this._registeredClientSideDataServices=[];this._backingStore=h;this._clientSidePlugins={};a.forEach(function(a){this._clientSidePlugins[a.getFeatureId()]=a},this);this._clientSideDataTable={};this._clientSideDataListeners={};this._editorDataServiceBroadcast=this._createDataBroadcastDependency();this._registerDocumentListenerWithNode(d);this._registerFilepathListenerWithNode()},_registerDocumentListenerWithNode:function(b){var a=
e.hitch(this,function(){this._dispatchNewText(this._document)});this._connections.push(g.after(b,"onDocumentChanged",a,!0));this._connections.push(g.after(b,"onDocumentReset",a,!0));this._dispatchNewText(this._document)},_registerFilepathListenerWithNode:function(){var b=e.hitch(this,function(){this._dispatchFileUpdate(this._backingStore)});this._connections.push(g.after(this._backingStore,"onFilePathUpdated",b,!0));this._dispatchFileUpdate(this._backingStore)},_hasMockInstalled:function(b){return this._mockFeatureDataServices.hasOwnProperty(b)},
_dispatchNewText:function(b){var a=b.getCodeText(),c=b.getState();clearTimeout(this._textToServerTimerId);this._textToServerTimerId=setTimeout(e.hitch(this,function(){this._dispatchEventToServer("documentChanged",{data:a,documentState:c})}),200);for(var d in this._mockFeatureDataServices)this._mockFeatureDataServices.hasOwnProperty(d)&&(b=(0,this._mockFeatureDataServices[d])(a,this._document.getState()),this._putDataInFeatureTableAndBroadcastUpdate(d,b),this._peerNode.dispatchEvent(this.PROPERTY_SET_ID,
this._peerNode,this._createMockFeatureMessage(d,b)))},_dispatchFileUpdate:function(b){if(!("function"!==typeof b.getFileName||"function"!==typeof b.getFileLocation)){var a=b.getFileName(),c=b.getFileLocation();clearTimeout(this._pathToServerTimerId);this._pathToServerTimerId=setTimeout(e.hitch(this,function(){this._dispatchEventToServer("filepathChanged",{filename:a,location:c})}),200)}},_putDataInFeatureTableAndBroadcastUpdate:function(b,a){this._peerNode.setProperty(b,a);this._peerNode.setProperty(b+
this.DOCUMENT_STATE_ID_SUFFIX,this._document.getState())},_dispatchEventToServer:function(b,a){this._peerNode.dispatchPeerEvent(b,this._peerNode,a)},_createMockFeatureMessage:function(b,a){return{key:b,newValue:a}},getEditorDataService:function(){var b=this._peerNode,a=e.hitch(this,this._registerFeatureWithNode),f=this.PROPERTY_SET_ID,g=e.hitch(this,this._dispatchEventToServer),h=this._mockRequestDataServices,n=this._fullyRegisteredFeatures,p=e.hitch(this,this._isClientSideRegisteredFeature),m=this._clientSideDataListeners,
q=this._clientSideDataTable;return{listenTo:function(c,d){a(c);var e=function(a){a.type===f&&(a=a.data,a.key===c&&(n[c]=!0,d(a.newValue)))};if(p(c))return m[c]||(m[c]=[]),m[c].push(d),{remove:function(){}};b.addEventListener(f,e);return{remove:function(){b.removeEventListener(f,e)}}},get:function(c){a(c);return p(c)?q[c]:b.getProperty(c)},request:function(f,e,n){a(f);var m=c.generateUuid();e={internalRequestId:m,requestData:e};var p=new d;if(h.hasOwnProperty(f))p.resolve((0,h[f])(e));else{var q=function(a){return function(c){c.data.internalRequestId===
a&&(clearTimeout(A),c.error?p.reject(c.error):p.resolve(c.data),p.isFulfilled()&&b.removePeerEventListener(x,q))}}(m),x=f+".RESPONSE";b.addPeerEventListener(x,q);g(f,e);var A=setTimeout(function(){p.reject("EditorDataService timed out for the feature "+f);b.removePeerEventListener(x,q)},n||5E3)}return p.promise}}},_registerFeatureWithNode:function(b){!this._hasMockInstalled(b)&&(!this.hasFeatureBeenRegisteredWithServer(b)&&!this._isDocumentStateId(b)&&!this._isClientSideRegisteredFeature(b))&&(this._clientSidePlugins[b]?
(this._clientSidePlugins[b].beginBroadcasting(this._editorDataServiceBroadcast),this._appendFeatureToClientSideRegisteredList(b)):this._dispatchEventToServer("registerFeature",{featureId:b}))},_createDataBroadcastDependency:function(){var b=e.hitch(this,this._putDataIntoClientSideTable);return{updateFeatureData:function(a,c){b(a,c)}}},_putDataIntoClientSideTable:function(b,a){this._clientSideDataTable[b]=a;var c=this._clientSideDataListeners[b];c&&c.forEach(function(a){a()})},_isClientSideRegisteredFeature:function(b){return 0<=
this._registeredClientSideDataServices.indexOf(b)},_appendFeatureToClientSideRegisteredList:function(b){this._registeredClientSideDataServices.push(b)},_isDocumentStateId:function(b){return b&&-1!==b.indexOf(this.DOCUMENT_STATE_ID_SUFFIX,b.length-this.DOCUMENT_STATE_ID_SUFFIX.length)},hasFeatureBeenRegisteredWithServer:function(b){return!!this._fullyRegisteredFeatures[b]},dispose:function(){this._connections.forEach(function(b){b.remove()});this._peerNode.destroy()}})})},"MW/rtc/plugins/embeddedoutputs/EmbeddedOutputsDBQuitSaveReadyProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/embeddedoutputs/EmbeddedOutputsDBQuitSaveReady"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.embeddedoutputs.statehandler","rtc.embeddedoutputs.model"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/plugins/embeddedoutputs/EmbeddedOutputsDBQuitSaveReady":function(){define(["dojo/aspect","dojo/_base/declare","dojo/_base/lang","MW/rtc/abstract/AbstractPlugin","MW/rtc/abstract/AbstractSynchronizableMixin"],
function(h,e,g,d,c){return e([d,c],{_SAVE_READY_TIMEOUT:1E3,constructor:function(b,a){this._stateHandler=b;this._outputsModel=a;this.markClean();this.own(h.after(this._stateHandler,"onStateChanged",g.hitch(this,"_handleStateChanged"),!0))},_handleStateChanged:function(b){b===this._stateHandler.CHANGE_TYPE_ENUM.EVAL_INITIALIZED?this.markDirty():b===this._stateHandler.CHANGE_TYPE_ENUM.EVAL_COMPLETE&&this._handleEvalEnded()},_handleEvalEnded:function(){this._outputsModel.whenOutputsReady(g.hitch(this,
function(){this.markClean()}));this.setReadyTimeout(this._SAVE_READY_TIMEOUT)}})})},"MW/rtc/abstract/AbstractSynchronizableMixin":function(){define(["dojo/_base/declare","dojo/aspect","dojo/_base/lang","dojo/Deferred"],function(h,e,g,d){return h([],{"-chains-":{destroy:"before"},constructor:function(){this._isReadyState=!1;this._timeout=this._promise=null},whenReady:function(c){this.isReady()?c():(this._promise||(this._promise=new d),this._promise.then(c))},isReady:function(){return this._isReadyState},
markDirty:function(){this._isReadyState=!1},markClean:function(){this._isReadyState=!0;this._promise&&(this._promise.resolve(this),this._promise=null);this._timeout&&(clearTimeout(this._timeout),this._timeout=null)},setReadyTimeout:function(c){this._timeout=setTimeout(g.hitch(this,function(){this._timeout=null;this.markClean()}),c)},destroy:function(){this._promise=null}})})},"MW/rtc/plugins/embeddedoutputs/EvalTextCacheProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/embeddedoutputs/EvalTextCache",
"MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{requires:function(){return{createInstance:["rtc.id","rtc.backingstore","rtc.editordataservice"]}},createInstance:function(d,c,b){return new e(d,c,b)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/embeddedoutputs/EvalTextCache":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin"],function(h,e,g,d){return h(d,{_EVAL_TEXT_CACHE_FEATURE_ID:"matlab.code.evaluationtextcache",
constructor:function(c,b,a){this._backingStore=b;this._editorId=c;this._editorDataService=a;this._editorDataService.request(this._EVAL_TEXT_CACHE_FEATURE_ID,{id:this._editorId,filePath:this._backingStore.getAbsoluteFilePath()}).then(function(){},function(){});this.own(g.after(this._backingStore,"onFilePathUpdated",e.hitch(this,"_handleFilePathUpdated")))},_handleFilePathUpdated:function(){this._editorDataService.request(this._EVAL_TEXT_CACHE_FEATURE_ID,{id:this._editorId,filePath:this._backingStore.getAbsoluteFilePath()}).then(function(){},
function(){})}})})},"MW/rtc/plugins/embeddedoutputs/ClearOutputsCacheProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/embeddedoutputs/ClearOutputsCache","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{requires:function(){return{createInstance:["rtc.actionservice","rtc.id","rtc.embeddedoutputs.model","rtc.code.matlabfiletype"]}},createInstance:function(d,c,b,a){return new e(d,c,b,a)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/embeddedoutputs/ClearOutputsCache":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/i18n!l10n/nls/actions mw-utils/Utils ./MessageServiceFactory".split(" "),
function(h,e,g,d,c,b){return h(null,{_CLEAR_SERVER_OUTPUTS_CACHE_NAMESPACE:"/embeddedOutputs/clearOutputsCacheRequest/",constructor:function(a,c,k,h){this._messageService=b.getInstance();this._clearServerOutputsCacheNamespace=this._CLEAR_SERVER_OUTPUTS_CACHE_NAMESPACE+c;this._actionService=a;this._outputsModel=k;this._editorId=c;this._fileTypeService=h;this._enabled=!1;this._supportedFileTypeChangeListener=g.after(this._fileTypeService,"onSupportedFileTypeChange",e.hitch(this,"_handleSupportedFileTypeChange"),
!0);this._actions=[{id:"rtc_clear_all_output",enabled:!1,contextMenuGroup:"Output",text:d.clearAllOutput,callback:e.hitch(this,"_clearOutputs")}];this._aspectHandles=[];this._enableClearOutputs()},_clearOutputs:function(){var a={requestId:c.generateUuid(),editorId:this._editorId};this._messageService.publish(this._clearServerOutputsCacheNamespace,a);this._outputsModel.clearAllOutputs();this.onOutputsCleared()},onOutputsCleared:function(){},_updateActionState:function(){var a=this._outputsModel.hasOutputs();
this._actionService.updateAction("rtc_clear_all_output",{enabled:a})},_enableClearOutputs:function(){this._enabled||(this._aspectHandles.push(g.after(this._outputsModel,"onModelUpdated",e.hitch(this,this._updateActionState))),this._actionService.loadActions(this._actions),this._enabled=!0)},_disableClearOutputs:function(){this._enabled&&(this._aspectHandles.forEach(function(a){a.remove()}),this._aspectHandles=[],this._actionService.removeAction("rtc_clear_all_output"),this._enabled=!1)},_handleSupportedFileTypeChange:function(a){a?
this._enableClearOutputs():this._disableClearOutputs()},destroy:function(){this._disableClearOutputs();this._supportedFileTypeChangeListener.remove();this._supportedFileTypeChangeListener=null}})})},"MW/rtc/plugins/embeddedoutputs/MessageServiceFactory":function(){define(["dojo/_base/lang","MW/rtc/messageservice/MessageServiceFactory"],function(h,e){return new e})},"MW/rtc/plugins/embeddedoutputs/CurrentOutputServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/embeddedoutputs/CurrentOutputService",
"MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{requires:function(){return{createInstance:"rtc.embeddedoutputs rtc.cursor rtc.cursor.view rtc.embeddedoutputs.model rtc.exportnotifier rtc.embeddedoutputs.view.onright".split(" ")}},createInstance:function(d,c,b,a,f,g){return new e(d,c,b,a,f,g)}})})},"MW/rtc/plugins/embeddedoutputs/CurrentOutputService":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect mw-utils/Utils MW/rtc/abstract/AbstractPlugin MW/rtc/model/Position".split(" "),
function(h,e,g,d,c,b){return h(c,{_cursor:null,constructor:function(a,b,c,d,h,p){this._cursor=b;this._cursorView=c;this._embeddedOutputs=a;this._embeddedOutputsView=a.getEmbeddedOutputsView();this._embeddedOutputsModel=d;this._onRightView=p;this._selectedOutputs=[];this._lastCursorPosition=this._focusedOutput=null;this.own(g.after(this._cursorView,"onChange",e.hitch(this,"_handleCursorViewOnUpdate"),!0));this.own(g.after(this._embeddedOutputsView,"onOutputClick",e.hitch(this,"_handleOutputClick"),
!0));this.own(g.after(this._embeddedOutputsView,"onViewToggled",e.hitch(this,"_handleViewToggled"),!0));this.own(g.after(d,"onModelUpdated",e.hitch(this,"_handleModelUpdated"),!0));this.own(g.after(h,"onExportStart",e.hitch(this,"_handleOnExportStart"),!0));this.own(g.after(this._embeddedOutputs,"onEmbeddedOutputsStateChange",e.hitch(this,"_handleEmbeddedOutputsStateChange"),!0));p.registerCurrentOutputService(this)},_handleEmbeddedOutputsStateChange:function(a){a&&this._onRightView.registerCurrentOutputService(this)},
_handleModelUpdated:function(a){a=this._focusedOutput;var b=this._selectedOutputs;this._focusedOutput&&(this._focusedOutput=this._embeddedOutputsModel.findOutput(e.hitch(this,function(a){return a===this._focusedOutput})));this._selectedOutputs=this._getOutputsAssociatedWithCursor();(this._focusedOutput!==a||!d.arrayEquals(this._selectedOutputs,b))&&this._emitCurrentState()},_handleCursorViewOnUpdate:function(){this._cursor.position.isEqualTo(this._lastCursorPosition)||(this._lastCursorPosition=new b(this._cursor.position.getNode(),
this._cursor.position.getOffset()),this._selectedOutputs=this._getOutputsAssociatedWithCursor(),this._focusedOutput=null,this._emitCurrentState())},_handleOnExportStart:function(){this._focusedOutput=null;this._emitCurrentState()},_handleOutputClick:function(a){this._focusedOutput=a;this._selectedOutputs=[a];this._emitCurrentState()},_handleViewToggled:function(){this._focusedOutput=null;this._selectedOutputs=[];this._emitCurrentState();this._lastCursorPosition=new b(this._cursor.getNode(),this._cursor.getOffset());
this._selectedOutputs=this._getOutputsAssociatedWithCursor();this._emitCurrentState()},_emitCurrentState:function(){this.onOutputSelected({selectedOutputs:this._selectedOutputs,focusedOutput:this._focusedOutput})},_getOutputsAssociatedWithCursor:function(){var a=this._cursor.getNode().rootContainer();return this._embeddedOutputsView.getOutputsAssociatedWithNode(a)},onOutputSelected:function(a){}})})},"MW/rtc/plugins/embeddedoutputs/EmbeddedOutputsProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./EmbeddedOutputs"],function(h,e,g){return h(e,{requires:function(){return{createInstance:"rtc.document rtc.internaldocument rtc.view rtc.cursor rtc.actionservice rtc.id rtc.focusservice rtc.bordercontainer rtc.code.matlabfiletype rtc.embeddedoutputs.statehandler rtc.domnode rtc.margin rtc.margin.execution rtc.embeddedoutputs.linenumbertracker rtc.embeddedoutputs.model rtc.preferences.service rtc.backingstore rtc.embeddedoutputs.syntaxerrors rtc.messagebar.rightmargincontainer rtc.embeddedoutputs.outputhandler rtc.embeddedoutputs.splitterpositionmodel rtc.embeddedoutputs.triggers rtc.embeddedoutputs.executiondatamanager rtc.embeddedoutputs.viewservice debug.documentdebugservices rtc.service.documentloaded rtc.code.codeanalyzermodel rtc.cursorcontroller embeddedoutputsviews rtc.view.viewportopenedservice".split(" ")}},
createInstance:function(d,c,b,a,f,e,h,n,p,m,q,r,s,t,u,v,w,x,A,B,F,G,H,I,K,C,M,Q,L){return new g(d,c,b,a,f,e,h,n,p,m,q,r,s,t,u,v,w,x,A,B,F,G,H,I,K,C,M,Q,L)}})})},"MW/rtc/plugins/embeddedoutputs/EmbeddedOutputs":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/i18n!l10n/nls/actions mw-log/Log mw-utils/Utils MW/rtc/abstract/AbstractPlugin MW/rtc/misc/Synchronizer ./model/EmbeddedOutputsLoad16a ./model/EmbeddedOutputsSave16a ./OutputQueue ./view/EmbeddedOutputsView".split(" "),function(h,
e,g,d,c,b,a,f,k,l,n,p){return h(a,{EMPTY_SAVE_STATE:{metaData:{evaluationState:"manual",layoutState:"code",outputStatus:"ready"},outputArray:[],regionArray:[]},constructor:function(a,b,c,f,d,k,h,l,n,A,B,F,G,H,I,K,C,M,Q,L,N,J,O,T,W,S,R,ea,Y){this._cursor=f;this._internalDocument=b;this._document=a;this._rtcView=c;this._fileTypeService=n;this._stateHandler=A;this._editorId=k;this._outputsModel=I;this._outputHandler=L;this._splitterPositionModel=N;this._triggers=J;this._codeAnalyzerModel=R;this._outputLoadInterceptors=
[];this._embeddedOutputsEnabled=!1;this._synchronizer=null;this.own(g.after(this._fileTypeService,"onFileTypeChange",e.hitch(this,"_handleFileTypeChange"),!0));this._view=new p(this._outputsModel,l,this._cursor,this._rtcView,h,this._stateHandler,d,this._internalDocument,this._document,B,F,G,K,M,Q,this._editorId,O,C,H,T,W,S,ea,Y);this._enableEmbeddedOutputs()},_handleFileTypeChange:function(){this._synchronizer||(this._synchronizer=new f([this._fileTypeService,this._codeAnalyzerModel]),this._synchronizer.whenAllReady(e.hitch(this,
function(){this._synchronizer.destroy();this._synchronizer=null;this._handleValidFileTypeChange()})))},_handleValidFileTypeChange:function(){this._fileTypeService.getFileType()===this._fileTypeService.FILE_TYPE.ClassDefinitionFile||this._fileTypeService.getFileType()===this._fileTypeService.FILE_TYPE.FunctionFile?this._disableEmbeddedOutputs():this._enableEmbeddedOutputs()},_enableEmbeddedOutputs:function(){this._embeddedOutputsEnabled||(this._view.enable(),this._load16a=new k(this._document,this._internalDocument,
this._editorId,this._outputsModel,this._outputHandler,this._view,this._triggers,this._splitterPositionModel),this._saveAs16a=new l(this._internalDocument,this._outputsModel,this._view,this._triggers,this._splitterPositionModel),this._triggers.enableTriggers(),this._embeddedOutputsEnabled=!0,this.onEmbeddedOutputsStateChange(this._embeddedOutputsEnabled))},_disableEmbeddedOutputs:function(){this._embeddedOutputsEnabled&&(this._outputsModel.clear(),this._view.disable(),this._load16a.destroy(),this._load16a=
null,this._saveAs16a.destroy(),this._saveAs16a=null,this._triggers.disableTriggers(),this._embeddedOutputsEnabled=!1,this.onEmbeddedOutputsStateChange(this._embeddedOutputsEnabled))},onEmbeddedOutputsStateChange:function(a){},isEmbeddedOutputsEnabled:function(){return this._embeddedOutputsEnabled},save:function(){if(!this._embeddedOutputsEnabled)return this.EMPTY_SAVE_STATE;try{return this._saveAs16a.get16aSaveObject()}catch(a){return c.assert(!1,"Exception occurred while saving outputs. Outputs will not be saved:"+
a),this.EMPTY_SAVE_STATE}},load:function(a){if(!this._outputLoadInterceptors.some(function(b){return b.interceptLoading(a)})){var b=this._view.getLayoutView(),f=this._triggers.getEvaluationState(),d=this._view.getReadyBusyIndicatorState();try{this._load16a.loadFrom16a(a)}catch(e){c.assert(!1,"Exception occurred while loading outputs. Outputs will not be loaded:"+e),this._splitterPositionModel.setDefaultRightPanelProportion(),this._view.setLayoutState(b),this._outputsModel.clear(),this._triggers.setEvaluationState(f),
this._view.setReadyBusyIndicatorState(d)}}},registerLoadInterceptor:function(a){this._outputLoadInterceptors.push(a)},getEmbeddedOutputsView:function(){return this._view},destroy:function(){this.inherited(arguments);this._outputLoadInterceptors=[];this._stateHandler.destroy();this._disableEmbeddedOutputs()}})})},"MW/rtc/misc/Synchronizer":function(){define(["dojo/_base/declare","dojo/aspect","dojo/_base/lang","dojo/Deferred"],function(h,e,g,d){return h([],{constructor:function(c){this._synchronizables=
c.map(function(b){return{isWaitingForUpdate:!1,synchronizable:b}});this._allReadyPromise=null},whenAllReady:function(c){this._areAllReady()?c():(this._allReadyPromise||(this._allReadyPromise=new d),this._allReadyPromise.then(c),this._addWhenReadyCallbacks())},_areAllReady:function(){return 0===this._getAllDirty().length},_getAllDirty:function(){return this._synchronizables.filter(function(c){return!c.synchronizable.isReady()})},_getAllNeedingUpdate:function(){return this._getAllDirty().filter(function(c){return!c.isWaitingForUpdate})},
_addWhenReadyCallbacks:function(){this._getAllNeedingUpdate().forEach(function(c){c.synchronizable.whenReady(g.hitch(this,this._handleSynchronizableBecomingClean))},this)},_handleSynchronizableBecomingClean:function(){this._areAllReady()?this._allReadyPromise&&(this._allReadyPromise.resolve(),this._allReadyPromise=null):this._addWhenReadyCallbacks()},destroy:function(){this._synchronizables=[];this._allReadyPromise&&this._allReadyPromise.reject();this._allReadyPromise=null}})})},"MW/rtc/plugins/embeddedoutputs/model/EmbeddedOutputsLoad16a":function(){define("dojo/_base/declare dojo/_base/lang mw-log/Log MW/rtc/model/CodeUtilities MW/rtc/model/DocumentUtilities MW/rtc/model/Range MW/rtc/plugins/embeddedoutputs/EmbeddedOutputsUtilities MW/rtc/plugins/embeddedoutputs/model/Region mw-utils/Utils".split(" "),
function(h,e,g,d,c,b,a,f,k){return h(null,{constructor:function(a,b,c,f,d,e,g,k){this._document=a;this._internalDocument=b;this._editorId=c;this._outputsModel=f;this._outputHandler=d;this._eoView=e;this._triggers=g;this._splitterPositionModel=k},destroy:function(){},loadFrom16a:function(a){a.metaData&&(this._eoView.setLayoutState(a.metaData.layoutState),this._splitterPositionModel.loadSplitterPosition(a));a.regionArray&&a.outputArray&&this._loadRegionsAndOutputs(a.regionArray,a.outputArray);a.metaData&&
(this._triggers.setEvaluationState(a.metaData.evaluationState),this._eoView.setReadyBusyIndicatorState(a.metaData.outputStatus))},_loadRegionsAndOutputs:function(a,b){this._cleanData(a,b);this._loadRegionsWithoutOutputs(a);this._loadOutputs(a,b)},_loadRegionsWithoutOutputs:function(a){var b=[],c=this._internalDocument.getLineNode(0);a.forEach(function(a,d){var e=this._internalDocument.getLineNode(a.startLine),h=this._internalDocument.getLineNode(a.endLine);if(!e||!h)g.error("Error loading outputs. Region line doesn't exist:\nRegion number: "+
d+"\nStartLine: "+a.startLine+"\nEndLine:   "+a.endLine+"\nInternalDocument last line number: "+(this._internalDocument.getMaxLineNumber()-1)+"\n"),h=e=c;c=h;e={sectionBreak:a.code.sectionBreak,endOfSection:a.code.endOfSection,regionString:a.code.regionString,regionNumber:a.code.regionNumber,regionPositions:this._document.getPositionsInNodeRange(e,h)};e=new f(e,k.generateUuid());b.push(e)},this);this._outputsModel.setRegions(b)},_loadOutputs:function(b,f){var d=[],e=[],g=[],k=this._outputsModel.getRegions();
b.forEach(function(a){a.outputIndexes.forEach(function(b){d[b]||(d[b]={outputData:f[b],regionNumbers:[]});d[b].regionNumbers.push(a.code.regionNumber)})});b.forEach(function(a,b){a.outputIndexes.forEach(function(a){a=d[a];if(b===a.regionNumbers[a.regionNumbers.length-1]){var c=a.outputData;c.lineNumbers=this._getLineNumbers(c,a.regionNumbers,k);0<c.lineNumbers.length&&e.push(c)}},this);g.push(b)},this);var h=c.createFullFileRange(this._document,this._internalDocument);this._outputHandler.handleStartOfEvaluation(h);
this._outputHandler.handleOutputsData(e,g,a.LOADED_FROM_DISK_EVALUATION_ID,h);this._outputHandler.handleEndOfEvaluation(h,a.LOADED_FROM_DISK_EVALUATION_ID,"");h.destroy()},_getLineNumbers:function(b,c,f){return b.lineNumbers&&0<b.lineNumbers.length?b.lineNumbers:a.getLineNumbersFromRegionNumbers(c,f,this._internalDocument)},_cleanData:function(a,b){this._cleanRegionData(a);this._cleanOutputsRegionData(b);this._cleanOutputsFigureSizeData(b)},_cleanRegionData:function(a){a.forEach(function(a){a.outputIndexes.forEach(function(b,
c){a.outputIndexes[c]=parseInt(b,10)},this);a.code.sectionBreak="true"===a.code.sectionBreak;a.code.endOfSection="true"===a.code.endOfSection;a.code.regionNumber=parseInt(a.code.regionNumber,10);a.startLine=parseInt(a.startLine,10);a.endLine=parseInt(a.endLine,10)},this)},_cleanOutputsRegionData:function(a){a.forEach(function(a){var b=a.outputData;b.regionNumbers&&(b.regionNumbers=b.regionNumbers.map(function(a){return parseInt(a,10)}));if(b.truncationInfo){var c=b.truncationInfo;b.truncationInfo.wasTruncatedMidLine=
"true"===c.wasTruncatedMidLine;b.truncationInfo.wasTruncatedAtLineBreak="true"===c.wasTruncatedAtLineBreak}a.lineNumbers=a.lineNumbers?a.lineNumbers.map(function(a){return parseInt(a,10)}):[]})},_cleanOutputsFigureSizeData:function(a){a.forEach(function(a){a=a.outputData;a.figureSize&&(a.figureSize=a.figureSize.map(function(a){return parseInt(a,10)}))})}})})},"MW/rtc/plugins/embeddedoutputs/EmbeddedOutputsUtilities":function(){define(["dojo/dom-construct","MW/rtc/model/CodeUtilities","MW/rtc/model/PositionUtilities"],
function(h,e,g){return{LOADED_FROM_DISK_EVALUATION_ID:"Load from disk",isLoadedFromDisk:function(d){return d===this.LOADED_FROM_DISK_EVALUATION_ID},convertPositionToRegionNumber:function(d,c){if(0===c.length)throw Error("There should be at least one region.");var b=d.line,a=0;c.some(function(c,d){return c.code.regionPositions[0].line<=b?(a=d,!1):!0},this);return a},getLineNumbersFromRegionNumbers:function(d,c,b){var a=[];d.forEach(function(f){c[f].code.regionPositions.forEach(function(c){e.isCodeContainer(c.getNode(),
!0)&&(c=e.getCodeLineNumberFromPosition(b,c),a.push(c))},this)},this);return a},createPositionsFromRegionNumbers:function(d,c,b){var a=[];d.forEach(function(f){c[f].code.regionPositions.forEach(function(c){c=b.createLinePosition(c.getNode(),!1);a.push(c)},this)},this);return a},isOutputAssociatedWithRegion:function(d,c){var b=c.code.regionPositions[0],a=c.code.regionPositions[c.code.regionPositions.length-1];return d.codeLinePositions.some(function(c){return c.line>=b.line&&c.line<=a.line},this)},
mergeCodeLinePositions:function(d,c){for(var b=0,a=0,f=[];b<d.length&&a<c.length;){var e=d[b],h=c[a],n=g.comparePositions(e,h);0>n?b++:(0<n?e=h:(h.destroy(),b++),a++);f.push(e)}h=[];b<d.length?h=d.slice(b):a<c.length&&(h=c.slice(a));return f=f.concat(h)}}})},"MW/rtc/plugins/embeddedoutputs/model/Region":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(e,g){this.code=e;this.uid=g}})})},"MW/rtc/plugins/embeddedoutputs/model/EmbeddedOutputsSave16a":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/model/CodeUtilities","MW/rtc/plugins/embeddedoutputs/EmbeddedOutputsUtilities"],function(h,e,g,d){return h(null,{constructor:function(c,b,a,f,d){this._internalDocument=c;this._outputsModel=b;this._eoView=a;this._triggers=f;this._splitterPositionModel=d},destroy:function(){},get16aSaveObject:function(){var c=this._outputsModel.getRegions(),b=[],a=[],f={};this._get16aDataStructureFrom18aPlusModel(c).forEach(function(c){var d=c.code.regionPositions[0],e=c.code.regionPositions[c.code.regionPositions.length-
1];if(!d.isValid()||!e.isValid())throw Error("Position not valid.");var d=this._internalDocument.getLineNumber(d.getNode()),e=this._internalDocument.getLineNumber(e.getNode()),h={code:{sectionBreak:c.code.sectionBreak,endOfSection:c.code.endOfSection,regionString:c.code.regionString,regionNumber:c.code.regionNumber},startLine:d,endLine:e,outputIndexes:[]};c.outputs.forEach(function(a){var c=[],d=a.uid,e=f[d];if(void 0===e){a.codeLinePositions.forEach(function(a){g.isCodeContainer(a.getNode())&&(a=
g.getCodeLineNumberFromPosition(this._internalDocument,a),0<a&&c.push(a))},this);if(0===c.length)return;b.push({type:a.type,outputData:a.getSerializableData(),lineNumbers:c});e=b.length-1;f[d]=e}h.outputIndexes.push(e)},this);a.push(h)},this);return{metaData:{evaluationState:this._triggers.getEvaluationState(),layoutState:this._eoView.getLayoutView(),outputStatus:this._eoView.getReadyBusyIndicatorState(),splitterState:{proportion:this._splitterPositionModel.getRightPanelProportion()}},outputArray:b,
regionArray:a}},_get16aDataStructureFrom18aPlusModel:function(c){var b,a=[];b=c.map(function(b){var c=this._outputsModel.getOutputsForRegion(b);a=a.concat(c);return{code:b.code,outputs:[]}},this);a.forEach(function(a){a.codeLinePositions.forEach(function(e){e=d.convertPositionToRegionNumber(e,c);e=b[e].outputs;-1===e.indexOf(a)&&e.push(a)})});return b}})})},"MW/rtc/plugins/embeddedoutputs/OutputQueue":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(h,e){return h(null,{_TIMEOUT_PERIOD:33,
constructor:function(e){this._outputsHandler=e;this._outputQueue=[];this._regionNumberQueue=[];this._queueTimeout=this._currentEvaluationRange=this._currentEvaluationId=null},destroy:function(){clearTimeout(this._queueTimeout);this._queueTimeout=null},addToQueue:function(g,d,c,b){this._outputQueue=this._outputQueue.concat(g);this._regionNumberQueue=this._regionNumberQueue.concat(d);this._currentEvaluationId=c;this._currentEvaluationRange=b;0===this._TIMEOUT_PERIOD?this._flushQueue():this._queueTimeout||
(this._queueTimeout=setTimeout(e.hitch(this,"_flushQueue"),this._TIMEOUT_PERIOD))},flushNow:function(){clearTimeout(this._queueTimeout);this._queueTimeout=null;this._flushQueue()},_flushQueue:function(){var e=this._outputQueue,d=this._regionNumberQueue;this._outputQueue=[];this._regionNumberQueue=[];this._queueTimeout=null;0===e.length&&0===d.length||this._outputsHandler.handleOutputsData(e,d,this._currentEvaluationId,this._currentEvaluationRange)}})})},"MW/rtc/plugins/embeddedoutputs/view/EmbeddedOutputsView":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on dojo/has MW/rtc/plugins/embeddedoutputs/view/EmbeddedOutputsStaleOutput MW/rtc/plugins/embeddedoutputs/view/EmbeddedOutputsViewModel MW/rtc/plugins/embeddedoutputs/view/EmbeddedOutputsViewStateEnum MW/rtc/plugins/embeddedoutputs/view/LineBusyIndicator MW/rtc/plugins/embeddedoutputs/view/ReadyBusyIndicator MW/rtc/plugins/embeddedoutputs/view/ScrollableOutputStyler MW/rtc/plugins/embeddedoutputs/view/ViewToggler".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p){return h(null,{_VIEW_ORDER:[f.ON_RIGHT_VIEW_STATE,f.INLINE_VIEW_STATE],constructor:function(b,c,f,d,g,k,h,l,n,p,B,F,G,H,I,K,C,M,Q,L,N,J,O,T){this._outputsModel=b;this._parentBorderContainer=c;this._cursor=f;this._rtcView=d;this._focusService=g;this._stateHandler=k;this._actionService=h;this._internalDocument=l;this._document=n;this._rtcDomNode=p;this._margin=B;this._executionMargin=F;this._preferences=G;this._syntaxErrorHandler=H;this._rightmargincontainer=I;this._editorId=
K;this._executionDataManager=C;this._backingStore=M;this._lineNumberTracker=Q;this._viewService=L;this._documentDebugServices=N;this._documentLoadedService=J;this._cursorController=O;this._embeddedOutputsViews=T;this._aspectHandles=[];this._savedViewState=null;this._viewModel=new a(b,e.hitch(this,"_createOutputDivsFromOutputs"))},enable:function(){this._staleOutputManager=new b(this._viewModel,this._stateHandler,this._syntaxErrorHandler,this._viewService,this._outputsModel,this._rtcDomNode);this._aspectHandles.push(g.after(this._viewModel,
"onModelUpdated",e.hitch(this,"_layoutView",!1,!1,!1),!0));this._viewToggler=new p(this._rightmargincontainer,this._actionService,this._editorId,this._savedViewState,this._embeddedOutputsViews);this._setupStyler(this._parentBorderContainer,this._viewModel);this._actions=[{id:"_rtc_toggle_outputs_view",enabled:!0,key:"ctrl_alt_i",callback:e.hitch(this,"toggle",!0)}];this._currentView=this._getOnRightView();this._setupViews();this._savedViewState&&(this.setLayoutState(this._savedViewState),this._savedViewState=
null);this._readyBusyIndicator=new l(this._outputsModel,this._cursor,this._stateHandler,this._internalDocument,this._focusService,this._rtcDomNode,this._margin,this._rtcView,this._preferences,this._syntaxErrorHandler,this._document,this._backingStore,this._lineNumberTracker,this._cursorController,this._executionDataManager);this._lineBusyIndicator=new k(this._outputsModel,this._rtcView,this._stateHandler,this._internalDocument,this._margin,this._rtcDomNode,this._executionMargin,this._document,this._preferences,
this._executionDataManager,this._backingStore,this._lineNumberTracker,this._viewService,this._documentDebugServices,this._documentLoadedService);this._aspectHandles.push(g.after(this._parentBorderContainer,"layout",e.hitch(this,"_layoutView",!1,!0,!1),!0));this._actionService.loadActions(this._actions);this._aspectHandles.push(g.after(this._actionService,"onActionChange",e.hitch(this,"_onActionChange"),!0))},_setupViews:function(){this._embeddedOutputsViews.forEach(function(a){a.setup(this._viewModel,
this._scrollableOutputStyler,e.hitch(this,"isInView",a));this._aspectHandles.push(g.after(a,"onOutputClicked",e.hitch(this,"_handleOutputClicked"),!0));a=[{id:a.ACTION_ID,enabled:!0,selected:this._currentView===a,callback:e.hitch(this,"_toggleState",a.getName(),!0)},{id:a.ACTION_ID_NO_ANIMATION,enabled:!0,callback:e.hitch(this,"_toggleState",a.getName(),!1)}];this._actions=this._actions.concat(a)},this)},disable:function(){var a=this;this._actions.forEach(function(b){a._actionService.getAction(b.id)&&
(a._actionService.updateAction(b.id,{enabled:!1}),a._actionService.removeAction(b.id))});this._viewModel.clear();this._staleOutputManager.destroy();this._readyBusyIndicator.destroy();this._lineBusyIndicator.destroy();this._scrollableOutputStyler.destroy();this._viewToggler.destroy();this._savedViewState=this.getLayoutView();this._embeddedOutputsViews.forEach(function(a){a.destroyView()},this);this._currentView=null;this._aspectHandles.forEach(function(a){a.remove()})},onAlign:function(){this._scrollableOutputStyler.layout()},
outputChanged:function(){this._outputStyleChanged()},onViewToggled:function(a){},_setupStyler:function(a,b){this._scrollableOutputStyler=new n(b,this._rtcDomNode);this._aspectHandles.push(g.after(this,"_layoutView",e.hitch(this._scrollableOutputStyler,"layout"),!0));this._aspectHandles.push(g.after(this._scrollableOutputStyler,"scrollableStylesChanged",e.hitch(this,"_outputStyleChanged"),!0))},toggle:function(a,b){if(!this._toggling){this._toggling=!0;this._actionService.updateAction("_rtc_toggle_outputs_view",
{enabled:!1});var c=this._currentView.disable(a);this._updateCurrentViewAndActions(b);this._viewModel.refreshViewModel();if(c&&a)var f=this,e=d(c,"End",function(){e.remove();f._toggleComplete(a)});else this._toggleComplete(a);this._focusService.setFocus()}},_updateCurrentViewAndActions:function(a){a=a||this._getNextViewName();for(var b=0;b<this._embeddedOutputsViews.length;b++){var c=this._embeddedOutputsViews[b],f=!1;a===c.getName()&&(this._currentView=c,f=!0);this._actionService.updateAction(c.ACTION_ID,
{enabled:!0,selected:f})}},_toggleComplete:function(a){this._scrollableOutputStyler.clearListeners();this._redrawCurrentView(a);this._toggling=!1;this._actionService.updateAction("_rtc_toggle_outputs_view",{enabled:!0});this.onViewToggled(this._currentView.getName());if(this._lastToggleRequest){var b=this._lastToggleRequest;this._lastToggleRequest=null;this._toggleState(b,a)}},_getNextViewName:function(){for(var a=this._VIEW_ORDER.length,b=0;b<a;b++)if(this._currentView.getName()===this._VIEW_ORDER[b])return this._VIEW_ORDER[(b+
1)%a]},_redrawCurrentView:function(a){this._currentView.enable(a);this._layoutView(a,!1,!0)},_outputStyleChanged:function(a){this._currentView.outputStyleChanged(a)},isInView:function(a){return this._currentView===a},_getOnRightView:function(){for(var a=0;a<this._embeddedOutputsViews.length;a++){var b=this._embeddedOutputsViews[a];if(b.getName()===f.ON_RIGHT_VIEW_STATE)return b}},_toggleState:function(a,b){this._currentView.getName()!==a&&this.toggle(b,a)},_layoutView:function(a,b,c){this._currentView.layout(this._viewModel,
a,b,c)},_createOutputDivsFromOutputs:function(a){return this._currentView.createOutputDivsFromOutputs(a)},getOutputsAssociatedWithNode:function(a){return this._viewModel.getOutputsAssociatedWithNode(a)},_onActionChange:function(a){var b=a.id;if("selected"===a.key&&a.newValue)for(a=0;a<this._embeddedOutputsViews.length;a++)b===this._embeddedOutputsViews[a].ACTION_ID&&this._toggleOnActionChanged(this._embeddedOutputsViews[a].getName())},_toggleOnActionChanged:function(a){this._toggling?this._lastToggleRequest=
a:this._toggleState(a,!0)},setLayoutState:function(a){this._toggleState(a,!1)},setReadyBusyIndicatorState:function(a){this._readyBusyIndicator.setState(a)},getLayoutView:function(){return this._currentView.getName()},getReadyBusyIndicatorState:function(){return this._readyBusyIndicator.getState()},getOutputFromOutputDiv:function(a){return this._viewModel.getOutputFromOutputDiv(a)},getOutputDivsForRange:function(a,b){return this._viewModel.getOutputDivsForRange(a,b)},getOutputWrapperFromElement:function(a){return this._viewModel.getOutputWrapperFromElement(a)},
_handleOutputClicked:function(a){if(a=this.getOutputWrapperFromElement(a))a=this._viewModel.getOutputFromOutputDiv(a),this.onOutputClick(a)},onOutputClick:function(a){}})})},"MW/rtc/plugins/embeddedoutputs/view/EmbeddedOutputsStaleOutput":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom dojo/query dojo/dom-class".split(" "),function(h,e,g,d,c,b){return h(null,{_STALE_OUTPUT_CLASS:"stale_output",_STALE_OUTPUT_SELECTOR:".stale_output",constructor:function(a,b,c,d,h,p){this._stateHandler=
b;this._viewModel=a;this._syntaxErrorHandler=c;this._viewService=d;this._outputsModel=h;this._rtcDomNode=p;this._aspectHandles=[g.after(this._stateHandler,"stateChanged",e.hitch(this,"_stateChangeListener"),!0),g.after(this._syntaxErrorHandler,"onEvaluationCompletedWithNoSyntaxErrors",e.hitch(this,"_handleEvaluationEnd")),g.after(this._syntaxErrorHandler,"onSyntaxError",e.hitch(this,"_unstaleSyntaxError")),g.after(this._outputsModel,"onOldOutputNotRemovedDuringReplacementRejection",e.hitch(this,"_setOutputStale"),
!0)]},_stateChangeListener:function(a,b){if(a===this._stateHandler.CHANGE_TYPE_ENUM.EVAL_INITIALIZED){var c=b.evaluationRange,d=c.getStartPosition().getNode(),c=c.getEndPosition().getNode(),d=this._viewModel.getOutputDivsForRange(d,c);this._viewService.executeViewAction(e.hitch(this,"_setOutputsInRangeStale",d))}},_handleEvaluationEnd:function(){this._outputsModel.whenOutputsReady(e.hitch(this,function(){this._stateHandler.isRunning()||this._clearAllStale()}))},_unstaleSyntaxError:function(){var a=
this._syntaxErrorHandler.getFirstSyntaxErrorOutput();a&&b.remove(a.getDomElement(),this._STALE_OUTPUT_CLASS)},_clearAllStale:function(){this._viewModel.getOutputDivs().forEach(function(a){b.remove(this._getTargetDiv(a),this._STALE_OUTPUT_CLASS)},this)},_setOutputStale:function(a){b.add(a.getDomElement(),this._STALE_OUTPUT_CLASS)},_setOutputsInRangeStale:function(a){a.forEach(function(a){d.isDescendant(a,this._rtcDomNode)&&b.add(this._getTargetDiv(a),this._STALE_OUTPUT_CLASS)},this)},_getTargetDiv:function(a){return a.children[0]},
destroy:function(){this._aspectHandles.forEach(function(a){a.remove()});this._aspectHandles=[]}})})},"MW/rtc/plugins/embeddedoutputs/view/EmbeddedOutputsViewModel":function(){define("dojo/_base/declare dojo/aspect dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/dom-style mw-log/Log mw-utils/Utils MW/rtc/model/NodeUtilities MW/rtc/model/PositionUtilities".split(" "),function(h,e,g,d,c,b,a,f,k,l){return h(null,{constructor:function(a,b){this._createWrapperCallback=b;this._outputsModel=a;this._aspectHandles=
[];this._regions=[];this._positionToOutputMap=new Map;this._uidToOutputMap={};this._aspectHandles.push(e.after(this._outputsModel,"onModelUpdated",g.hitch(this,"_updateViewModel"),!0));this._updateViewModel()},getOutputsAssociatedWithNode:function(a){return this.getOutputDivsForNode(a.rootContainer()).map(function(a){return this.getOutputFromOutputDiv(a)},this)},getOutputDivs:function(){var a=[];this._forEachOutput(function(b){a.push(b.domElement)});return a},getRegions:function(){return this._regions},
getOutputDivsForNode:function(a){a=l.getPositions(a);for(var b=[],c=0;c<a.length;c++){var d=this._positionToOutputMap.get(a[c]);void 0!==d&&b.push(d)}b=f.unique(b);b.sort(function(a,b){return a._index-b._index});return b.map(function(a){return a.domElement})},getOutputDivsForRange:function(a,b){var c=k.getParagraphNodesInRange(a,b);return this._getOutputDivsForNodes(c)},_getOutputDivsForNodes:function(a){var b=[],c=this;this._forEachOutput(function(f){c._isOutputAssociatedWithNode(f,a)&&b.push(f.domElement)},
this);return b},_forEachOutput:function(a){var b,c,f,d,e;for(b=0;b<this._regions.length;b++){f=this._regions[b];d=f.outputUidArray;for(c=0;c<d.length;c++)e=f.outputsByUid[f.outputUidArray[c]],a(e)}},_isOutputAssociatedWithNode:function(a,b){return a.codeLinePositions.some(function(a){return-1<b.indexOf(a.getNode())})},doesNodeHaveOutputs:function(a){a=l.getPositions(a);for(var b=0;b<a.length;b++)if(void 0!==this._positionToOutputMap.get(a[b]))return!0;return!1},refreshViewModel:function(){this._updateViewModel()},
onModelUpdated:function(){},clear:function(){this._regions=[];this._positionToOutputMap.clear();this._uidToOutputMap={};this.onModelUpdated()},destroy:function(){this.clear();this._uidToOutputMap=this._positionToOutputMap=null;this._aspectHandles.forEach(function(a){a.remove()})},getLineNumbersForOutput:function(a){a=a.getAttribute("uid");return this._uidToOutputMap[a].codeLinePositions.map(function(a){return a.getLineColumn().line-1})},getClosestNodeWithOutputToLineNumber:function(a,b,c){b=b||Number.NEGATIVE_INFINITY;
c=c||Number.POSITIVE_INFINITY;var f=null,d=Number.NEGATIVE_INFINITY;this._forEachOutput(function(e){e.codeLinePositions.forEach(function(e){if(e.isValid()){var g=e.getLineColumn().line-1;if(!(g<b||g>c)){var k=Math.abs(a-g),h=Math.abs(a-d);k<=h&&(f=e.node,d=g)}}})});return f},_updateViewModel:function(a,b){b?this._updateViewRegionsFromChangelist(b):this._updateViewRegions();var c=0;this._forEachOutput(function(a){a._index=c;c++});this.onModelUpdated(a)},_updateViewRegions:function(){this._preserveExistingHeights();
this._positionToOutputMap.clear();this._uidToOutputMap={};this._regions=this._outputsModel.getRegions().map(function(a){var b=a.code.regionPositions;a=this._outputsModel.getOutputsForRegion(a);var c=this._createOutputMap(a);c.outputUidArray.forEach(function(a){var b=c.outputMap[a];this._uidToOutputMap[a]=b;this._addViewModelOutputToPositionMap(b)},this);return{positions:b,outputsByUid:c.outputMap,outputUidArray:c.outputUidArray}},this)},_preserveExistingHeights:function(){var a=[];this._forEachOutput(function(b){var c=
b.domElement.parentElement;c&&a.push({previousWrapper:c,previousClientHeight:b.domElement.clientHeight})});a.forEach(function(a){b.set(a.previousWrapper,"height",a.previousClientHeight+"px")})},_updateViewRegionsFromChangelist:function(b){var c=this._regions;b.forEach(function(b){var f=b.removedOutputId,d=b.outputIndex,e=b.output,g=c[b.regionNumber];switch(b.type){case this._outputsModel.CHANGE_TYPE.ADD:this._addOutput(g,e,d);break;case this._outputsModel.CHANGE_TYPE.REMOVE:d=g.outputUidArray.indexOf(f);
if(0>d){a.error("Invalid output index; skipping output.");break}this._removeOutput(g,f,d);break;case this._outputsModel.CHANGE_TYPE.REPLACE:this._removeOutput(g,f,d);this._addOutput(g,e,d);break;case this._outputsModel.CHANGE_TYPE.UPDATE:this._updateOutput(g,e)}},this);this._regions=c},_createOutputMap:function(a){var b={},c=[];a.forEach(function(a){b[a.uid]=this._createViewModelOutput(a.codeLinePositions,a);c.push(a.uid)},this);return{outputMap:b,outputUidArray:c}},_addOutput:function(a,b,c){var f=
a.outputsByUid;a=a.outputUidArray;var d=this._createViewModelOutput(b.codeLinePositions,b);f[b.uid]=d;a.splice(c,0,b.uid);this._uidToOutputMap[b.uid]=d;this._addViewModelOutputToPositionMap(d)},_createViewModelOutput:function(a,b){return{domElement:this._createOutputWrapper(b),codeLinePositions:a,_modelOutput:b,_index:-1}},_removeOutput:function(a,b,c){var f=a.outputsByUid;a=a.outputUidArray;delete this._uidToOutputMap[b];this._removeViewModelOutputToPositionMap(f[b]);a.splice(c,1);delete f[b]},_updateOutput:function(a,
b){var c=a.outputsByUid;this._removeViewModelOutputToPositionMap(c[b.uid]);var f=this._createViewModelOutput(b.codeLinePositions,b);c[b.uid]=f;this._uidToOutputMap[b.uid]=f;this._addViewModelOutputToPositionMap(f)},_addViewModelOutputToPositionMap:function(a){a.codeLinePositions.forEach(function(b){this._positionToOutputMap.set(b,a)},this)},_removeViewModelOutputToPositionMap:function(a){a.codeLinePositions.forEach(function(a){this._positionToOutputMap["delete"](a)},this)},_createOutputWrapper:function(a){var b=
this._createWrapperCallback(a.codeLinePositions);c.add(b,a.getCssTag());b.setAttribute("uid",a.uid);a=a.getDomElement();var f=a.parentElement;f&&(b.setAttribute("data-scroll-top",f.getAttribute("data-scroll-top")),b.setAttribute("data-scroll-left",f.getAttribute("data-scroll-left")));d.place(a,b,"last");return b},getOutputFromOutputDiv:function(a){a=a.getAttribute("uid");return(a=this._uidToOutputMap[a])?a._modelOutput:null},hasOutputs:function(){return this._regions.some(function(a){return a.outputUidArray&&
0<a.outputUidArray.length})},getOutputWrapperFromElement:function(a){for(var b=c.contains(a,"rightPaneElement"),f=c.contains(a,"inlineElement"),d=c.contains(a,"rtePane");!b&&!f&&!d;){a=a.parentElement;if(!a)return null;b=c.contains(a,"rightPaneElement");f=c.contains(a,"inlineElement");d=c.contains(a,"rtePane")}return c.contains(a,"rtePane")?null:a},startupOutputs:function(){this._outputsModel.getOutputs().forEach(function(a){a.startup()})}})})},"MW/rtc/plugins/embeddedoutputs/view/EmbeddedOutputsViewStateEnum":function(){define([],
function(){return{INLINE_VIEW_STATE:"document",ON_RIGHT_VIEW_STATE:"code"}})},"MW/rtc/plugins/embeddedoutputs/view/LineBusyIndicator":function(){define("dojo/aspect dojo/dom-class dojo/dom-construct dojo/dom-style dojo/_base/declare dojo/_base/lang MW/rtc/model/DocumentConstants MW/rtc/model/DocumentEventUtilities MW/rtc/plugins/debug/DebugServicesFactory MW/rtc/plugins/embeddedoutputs/view/AnimationUtilities MW/rtc/view/ViewEventUtilities MW/rtc/view/ViewUtilities".split(" "),function(h,e,g,d,c,
b,a,f,k,l,n,p){return c(null,{_ANIMATION_LENGTH:1E3,_ONE_SECOND:1E3,_PADDING:0,constructor:function(a,c,f,d,e,l,n,p,x,A,B,F,G,H,I){this._model=a;this._view=c;this._stateManager=f;this._internalDocument=d;this._margin=e;this._rtcDomNode=l;this._executionMargin=n;this._document=p;this._preferences=x;this._executionDataManager=A;this._backingStore=B;this._lineNumberTracker=F;this._viewService=G;this._documentDebugServices=H;this._documentLoadedService=I;this._debugServices=k.getInstance();this._currentEndPosition=
this._currentStartPosition=null;this._positionChangeListeners=[];this._aspectHandles=[];this._aspectHandles.push(h.after(this._stateManager,"stateChanged",b.hitch(this,"_stateChangeListener"),!0));this._aspectHandles.push(h.after(this._internalDocument,"onDocumentChanged",b.hitch(this,"_onFormatChange"),!0));this._aspectHandles.push(h.after(this._view,"onViewUpdated",b.hitch(this,"_viewUpdated"),!0));this._aspectHandles.push(h.after(this._margin,"onResize",b.hitch(this,"_setMarginPositioning")));
this._aspectHandles.push(h.after(this._executionDataManager,"onDataUpdate",b.hitch(this,"_handleDataUpdate"),!0));this._aspectHandles.push(h.after(this._debugServices,"onDBCont",b.hitch(this,"_handleDBCont")));this._aspectHandles.push(h.after(this._documentDebugServices,"onStackChanged",b.hitch(this,"_handleStackChanged"),!0));this._indicator=g.create("div",{className:"busyLineIndicator"});g.place(this._indicator,l,"last");this._convertedCache=[];this._gutterTop=0;this._busyLineAnimationTimer=null;
this._isPaused=!1;this._currentRegion=-1},destroy:function(){this._aspectHandles.forEach(function(a){a.remove()});this._aspectHandles=[];this._removeIndicator();g.destroy(this._indicator)},_stateChangeListener:function(a,b){switch(a){case this._stateManager.CHANGE_TYPE_ENUM.EVAL_COMPLETE:this._removeIndicator(),this._convertedCache=[],this._isPaused=!1}},_handleDataUpdate:function(a){!this._isPaused&&this._shouldUpdateIndicator(a)&&(this._removeIndicator(),this._setCacheOnDataUpdate(a),this._setBusyLine(),
this._startAnimation())},_handleStackChanged:function(a){if(0!==a.length){this._isPaused=!0;var c=a[a.length-1].getLineNumber()-1;0>c&&(c=-c);this._documentLoadedService.whenDocumentLoadedWithText(b.hitch(this,function(){this._currentRegion=-1;var a=this._lineNumberTracker.createPositionFromOldLineNumber(c);this._setAnimationPercent(0);this._setCache([a]);this._setBusyLine();this._stopAnimation();a.destroy()}))}},_handleDBCont:function(){this._isPaused=!1;this._stateManager.isRunning()?this._startAnimation():
this._removeIndicator()},_onFormatChange:function(b){b=f.getEventsOfType(b,a.FORMAT_CHANGE_EVENT);this._isBusy()&&0<b.length&&(b=b[0],"code"===b.oldFormat&&(this._isRangeWithinBusyRegion(b.startLine+1,b.endLine+1)?this._removeIndicator():this._convertedCache.push({start:b.startLine+1,end:b.endLine+1})),this._setPositioning())},_checkCache:function(){return!this._convertedCache.length?!1:this._convertedCache.some(function(a){return this._isRangeWithinBusyRegion(a.start,a.end)},this)},_isRangeWithinBusyRegion:function(a,
b){var c=this._currentStartPosition.getLineColumn().line,f=this._currentEndPosition.getLineColumn().line;return a>=c&&a<=f||b>=c&&b<=f},_isBusy:function(){return e.contains(this._indicator,"busy")},_shouldUpdateIndicator:function(a){return this._currentRegion!==a||-1===a},_setCacheOnDataUpdate:function(a){var b=this._model.getRegions()[a-1];b?(this._currentRegion=a,this._setCache(b.code.regionPositions)):this._currentRegion=-1},_setCache:function(a){this._clearCache();this._currentStartPosition=this._document.createLinePosition(a[0].getNode());
this._positionChangeListeners.push(h.after(this._currentStartPosition,"onChange",b.hitch(this,"_setBusyLine")));this._currentEndPosition=this._document.createLinePosition(a[a.length-1].getNode());this._positionChangeListeners.push(h.after(this._currentEndPosition,"onChange",b.hitch(this,"_setBusyLine")))},_clearCache:function(){this._currentStartPosition&&this._currentEndPosition&&(this._document.deletePosition(this._currentStartPosition),this._document.deletePosition(this._currentEndPosition),this._currentEndPosition=
this._currentStartPosition=null,this._positionChangeListeners.forEach(function(a){a.remove()}),this._positionChangeListeners=[])},_setBusyLine:function(){this._currentStartPosition&&(this._currentEndPosition&&!this._checkCache())&&this._viewService.executeViewAction(b.hitch(this,"_setPositionAndAddIndicator"))},_setPositionAndAddIndicator:function(){this._addIndicator();this._setPositioning()},_setPositioning:function(){if(this._currentStartPosition&&this._currentEndPosition){var a=p.getVerticalDimensionsBetweenPositions(this._currentStartPosition,
this._currentEndPosition,this._view),b=a.bottom-a.top,a=a.top,c=this._view.getDomTargetPosition().scrollTop;this._isBusy()&&d.set(this._indicator,{top:this._gutterTop+a-c+"px",height:b+"px"});this._setMarginPositioning()}},_addIndicator:function(){e.add(this._indicator,"busy")},_removeIndicator:function(){e.remove(this._indicator,"busy");d.set(this._indicator,{top:"0px",height:"0px"});this._stopAnimation();this._clearCache();this._currentRegion=-1},_startAnimation:function(){if(null===this._busyLineAnimationTimer){var a=
l.getAnimationFrameRate(this._preferences),a=this._ONE_SECOND/a,c=this._ANIMATION_LENGTH/a,f=0,d=1;this._busyLineAnimationTimer=setInterval(b.hitch(this,function(){var a=f/c;1<a||0>a?d*=-1:this._setAnimationPercent(a);f+=d}),a)}},_setAnimationPercent:function(a){d.set(this._indicator,{backgroundColor:"rgba(0,0,0,"+(0.5-0.25*a)+")"})},_stopAnimation:function(){null!==this._busyLineAnimationTimer&&(clearInterval(this._busyLineAnimationTimer),this._busyLineAnimationTimer=null)},_setMarginPositioning:function(){var a=
this._getGutter().style,b=parseFloat(a.left)+this._PADDING,a=parseFloat(a.width);d.set(this._indicator,{left:b+"px",width:a+"px"})},_viewUpdated:function(a){if(n.hasOffsetHeightEvent(a)){var b=this._getGutter();if(p.isDescendant(b,this._rtcDomNode)){var b=b.getBoundingClientRect().top,c=this._rtcDomNode.getBoundingClientRect().top;this._gutterTop=b-c}else this._gutterTop=0}(n.hasScrollEvent(a)||n.hasHeightEvent(a)||n.hasLayoutEvent(a))&&this._setPositioning()},_getGutter:function(){return this._executionMargin.getMarginElement()}})})},
"MW/rtc/plugins/embeddedoutputs/view/AnimationUtilities":function(){define([],function(){return{_ANIMATION_FRAMERATE:30,_ANIMATION_FRAMERATE_THROTTLED:10,_SHOULD_THROTTLE_PREFERENCE:"LiveEditorEmbeddedOutputsThrottleFrameRate",constructor:function(){},destroy:function(){},getAnimationFrameRate:function(h){return h.getValue(this._SHOULD_THROTTLE_PREFERENCE,!1)?this._ANIMATION_FRAMERATE_THROTTLED:this._ANIMATION_FRAMERATE}}})},"MW/rtc/plugins/embeddedoutputs/view/ReadyBusyIndicator":function(){define("dijit/Tooltip dojo/aspect dojo/dom-class dojo/dom-construct dojo/dom-style dojo/on dojo/_base/declare dojo/_base/lang dojo/i18n!l10n/nls/actions dojo/text!MW/rtc/plugins/embeddedoutputs/view/templateError.html MW/rtc/plugins/debug/DebugServicesFactory MW/rtc/plugins/embeddedoutputs/outputhandlers/error/ErrorOutput MW/rtc/plugins/embeddedoutputs/view/AnimationUtilities MW/rtc/plugins/embeddedoutputs/view/Spinner MW/rtc/plugins/view/tooltip/TooltipUtilities MW/rtc/view/ViewEventUtilities MW/rtc/view/ViewUtilities".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t){return a(null,{_READY_MESSAGE:"",_BUSY_MESSAGE:k.scriptIsBusy,_BUSY_NO_CLICK_MESSAGE:k.scriptIsBusyNoClick,_PAUSED_MESSAGE:k.scriptIsPaused,_PAUSED_NO_CLICK_MESSAGE:k.scriptIsPausedNoClick,_ERROR_MESSAGE:k.scriptHasError,_INDICATOR_STATES:{READY:"ready",ERROR:"error"},_SCROLL_PERCENT:33,_SPINNER_SIZE:16,_ANIMATION_LENGTH:1E3,_WIDTH_OF_EMPTY_MARGIN:18,constructor:function(a,b,c,g,k,l,p,s,t,I,K,C,M,Q,L){this._model=a;this._cursor=b;this._stateHandler=c;this._internalDocument=
g;this._focusService=k;this._rtcDomNode=l;this._margin=p;this._view=s;this._syntaxErrorHandler=I;this._document=K;this._backingStore=C;this._lineNumberTracker=M;this._cursorController=Q;this._executionDataManager=L;this._debugServices=n.getInstance();this._aspectHandles=[];this._aspectHandles.push(e.after(this._stateHandler,"stateChanged",f.hitch(this,"_stateChangeListener"),!0));this._aspectHandles.push(e.after(g,"onDocumentReset",f.hitch(this,"_resetError")));this._aspectHandles.push(e.after(this._model,
"onModelUpdated",f.hitch(this,"_resetError")));this._aspectHandles.push(e.after(this._margin,"onResize",f.hitch(this,"_setMarginPositioning")));this._aspectHandles.push(e.after(this._view,"onViewUpdated",f.hitch(this,"_handleViewUpdated"),!0));this._aspectHandles.push(e.after(this._syntaxErrorHandler,"onSyntaxError",f.hitch(this,"_handleSyntaxError")));this._aspectHandles.push(e.after(this._executionDataManager,"onDataUpdate",f.hitch(this,"_handleDataUpdate"),!0));this._aspectHandles.push(e.after(this._debugServices,
"onDBStop",f.hitch(this,"_handleDBStop"),!0));this._aspectHandles.push(e.after(this._debugServices,"onDBCont",f.hitch(this,"_handleDBCont")));this._indicator=null;this._isPaused=!1;this._createBusyIndicator();this._setMarginPositioning();this._busySpinner=new q({size:this._SPINNER_SIZE,animationLength:this._ANIMATION_LENGTH,frameRate:m.getAnimationFrameRate(t)});this._tooltip=new h({connectId:[this._indicator],label:r.createUnfocusableTooltipTextHTML(this._READY_MESSAGE)});this._currentIndicator=
this._INDICATOR_STATES.READY;this._clickHandle=null;d.place(this._indicator,l,"last")},_createBusyIndicator:function(){this._indicator=d.create("div",{className:"busyHolder"});this._holder=d.create("div",{className:"progressHolder"});d.place(this._holder,this._indicator)},destroy:function(){this._aspectHandles.forEach(function(a){a.remove()});this._destroyPausePosition();this._tooltip.destroy();this._aspectHandles=[];this._removeClickHandle();d.destroy(this._indicator)},_stateChangeListener:function(a){switch(a){case this._stateHandler.CHANGE_TYPE_ENUM.EVAL_INITIALIZED:this._handleEvalInitialized();
break;case this._stateHandler.CHANGE_TYPE_ENUM.EVAL_COMPLETE:this._handleEvalCompleted()}},_handleEvalInitialized:function(){this._clearStatus();g.add(this._indicator,"busy");this._tooltip.label=r.createUnfocusableTooltipTextHTML(this._BUSY_NO_CLICK_MESSAGE);this._startAnimation()},_handleEvalCompleted:function(){this._busySpinner.remove();this._tooltip.close();this._isPaused=!1;this._destroyPausePosition();this._model.hasError()?this._setError():this._ready()},_clearStatus:function(){this._busySpinner.remove();
g.remove(this._indicator,"error");this._holder.innerHTML=""},_handleSyntaxError:function(){var a=this._syntaxErrorHandler.getFirstSyntaxErrorOutput();a&&this._clickMethod(a.codeLinePositions[0])},_handleDataUpdate:function(a){this._updateBusyRegion(a-1)},_updateBusyRegion:function(a){if(!this._isPaused&&(this._destroyPausePosition(),a=this._model.getRegions()[a])){var b=null===this._clickHandle;this._setClickPosition(a);b&&(this._tooltip.label=r.createUnfocusableTooltipTextHTML(this._BUSY_MESSAGE))}},
_handleDBStop:function(a,b){this._isPaused=!0;this._stateHandler.isRunning()&&(this._busySpinner.pause(),this._tooltip.label=r.createUnfocusableTooltipTextHTML(this._PAUSED_MESSAGE),a===this._backingStore.getAbsoluteFilePath()&&(0===b?(this._tooltip.label=r.createUnfocusableTooltipTextHTML(this._PAUSED_NO_CLICK_MESSAGE),this._destroyPausePosition(),this._removeClickHandle()):(0>b&&(b=-b),b-=1,this._destroyPausePosition(),this._pausePosition=this._lineNumberTracker.createPositionFromOldLineNumber(b),
this._removeClickHandle(),this._createClickHandle(this._pausePosition))))},_handleDBCont:function(){this._isPaused=!1;this._stateHandler.isRunning()&&this._startAnimation()},_destroyPausePosition:function(){this._pausePosition&&(this._pausePosition.destroy(),this._pausePosition=null)},_setClickPosition:function(a){a=a.code.regionPositions[0];this._removeClickHandle();this._createClickHandle(a)},_startAnimation:function(){this._busySpinner.isActive()||(this._busySpinner.placeAt(this._holder),this._busySpinner.startup())},
_ready:function(){this._currentIndicator=this._INDICATOR_STATES.READY;g.remove(this._indicator,"busy");this._tooltip.label=r.createUnfocusableTooltipTextHTML(this._READY_MESSAGE);this._removeClickHandle()},_resetError:function(){this._currentIndicator===this._INDICATOR_STATES.ERROR&&!this._model.hasError()&&(this._clearStatus(),this._currentIndicator=this._INDICATOR_STATES.READY,this._tooltip.label=r.createUnfocusableTooltipTextHTML(this._READY_MESSAGE))},_setError:function(){this._currentIndicator=
this._INDICATOR_STATES.ERROR;g.add(this._indicator,"error");this._holder.innerHTML=l;g.remove(this._indicator,"busy");this._tooltip.label=r.createUnfocusableTooltipTextHTML(this._ERROR_MESSAGE);var a=this._model.findOutput(function(a){return a.isInstanceOf(p)});this._removeClickHandle();this._createClickHandle(a.codeLinePositions[0])},_createClickHandle:function(a){this._clickHandle=b(this._indicator,"click",f.hitch(this,"_clickMethod",a))},_clickMethod:function(a){var b=a.getNode();this._cursorController.clearSelection();
a.getLineColumn().line!==this._cursor.getLineColumn().line&&this._cursor.setPosition(b,0,!1);this._view.scrollNodeToPercent(b,this._SCROLL_PERCENT);this._focusService.setFocus()},_removeClickHandle:function(){this._clickHandle&&(this._clickHandle.remove(),this._clickHandle=null)},setState:function(a){this._resetError();a===this._INDICATOR_STATES.ERROR&&this._setError()},getState:function(){return this._currentIndicator},_setMarginPositioning:function(){var a=parseFloat(this._margin.lineMargin.style.width)-
this._WIDTH_OF_EMPTY_MARGIN;c.set(this._indicator,{width:a+"px",height:this._SPINNER_SIZE+4+"px"});c.set(this._holder,{left:(a-this._SPINNER_SIZE)/2+"px"})},_handleViewUpdated:function(a){if(s.hasOffsetHeightEvent(a)){a=0;if(t.isDescendant(this._margin.lineMargin,this._rtcDomNode)){a=this._margin.lineMargin.getBoundingClientRect().top;var b=this._rtcDomNode.getBoundingClientRect().top;a=Math.max(a-b,0)}this._indicator.style.top=a+"px"}}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/error/ErrorOutput":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/query mw-html-utils/HtmlUtils MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutput MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerUtility ./ErrorOutputProperties".split(" "),
function(h,e,g,d,c,b,a,f){return h([b],{type:f.OUTPUT_TYPE,constructor:function(a){this._data=a.data;this._diagnosticMessageFormatter=a.diagnosticMessageFormatter;this._lineNumberTracker=a.lineNumberTracker;a=c.treatHtmlLikeCommandWindow(this._data.text);this._domElement=this._diagnosticMessageFormatter.createErrorMessageWithStack(a).getDomNode();this._data.stackLineNumber&&(this.stackLineNumber=this._lineNumberTracker.createPositionFromOldLineNumber(this._data.stackLineNumber-1),this.identifier=
this._data.identifier)},getCssTag:function(){return f.CSS_TAG},getDomElement:function(){return this._domElement},getSerializableData:function(){return{text:this._removeScrollToLinks(this._data.text),errorType:this._data.errorType}},getText:function(){return a.getText(this._data.text)},getHTML:function(a,b){var c=this._domElement.cloneNode(!0);d(".doNotExport",c).forEach(function(a){g.destroy(a)});return c.innerHTML},_removeScrollToLinks:function(a){var b=RegExp('\x3ca href\x3d"matlab:opentoline\\(\'(?:[^\\/\\\\]*?\\.mlx)\', (?:[0-9]+), (?:[0-9]+)\\)" style\x3d"font-weight:bold"\x3e([^\x3c]*?)\x3c\\/a\x3e',
"g");a=a.replace(/<a href="matlab:opentoline\('(?:[^\/\\]*?\.mlx)', (?:[0-9]+), (?:[0-9]+)\)">([^<]*?)<\/a>/g,"$1");return a=a.replace(b,"\x3cstrong\x3e$1\x3c/strong\x3e")},getErrorType:function(){return this._data.errorType}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutput":function(){define(["dojo/_base/declare","mw-utils/Utils"],function(h,e){return h(null,{type:null,uid:null,codeLinePositions:null,constructor:function(){this.uid=e.generateUuid()},destroy:function(){},getCodeLinePositions:function(){return this.codeLinePositions},
setCodeLinePositions:function(e){this.codeLinePositions=e},getCssTag:function(){throw Error("Unimplemented API: MW.rtc.plugins.embeddedoutputs.outputhandlers.BaseOutput.getCssTag()");},getDomElement:function(){throw Error("Unimplemented API: MW.rtc.plugins.embeddedoutputs.outputhandlers.BaseOutput.getDomElement()");},startup:function(){},getSerializableData:function(){throw Error("Unimplemented API: MW.rtc.plugins.embeddedoutputs.outputhandlers.BaseOutput.getSerializableData()");},getText:function(){throw Error("Unimplemented API: MW.rtc.plugins.embeddedoutputs.outputhandlers.BaseOutput.getText()");
},getHTML:function(e,d){throw Error("Unimplemented API: MW.rtc.plugins.embeddedoutputs.outputhandlers.BaseOutput.getHTML()");},isReady:function(){return!0},getReadyPromise:function(){throw Error("Unimplemented API: MW.rtc.plugins.embeddedoutputs.outputhandlers.BaseOutput.getReadyPromise()");}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerUtility":function(){define(["dojo/dom-construct"],function(h){return{getText:function(e){e=h.create("div",{innerHTML:e});e.innerHTML=e.innerHTML.replace(/<br>/g,
"\n");var g=e.textContent;h.destroy(e);return g},removeControlCharacters:function(e){return e.replace(/[\x00-\x07\x0B\x0C\x0E-\x1F\x7F-\x9F]/g,"")},processBackspaceCharacters:function(e){for(;-1!==e.indexOf("\b");)e=e.replace(/[\s\S]?\x08/,"");return e}}})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/error/ErrorOutputProperties":function(){define([],function(){return{OUTPUT_TYPE:"error",CSS_TAG:"embeddedOutputsErrorElement",SYNTAX_ERROR_TYPE:"syntax",RUNTIME_ERROR_TYPE:"runtime"}})},"MW/rtc/plugins/embeddedoutputs/view/Spinner":function(){define(["dojo/_base/declare",
"dojo/_base/lang"],function(h,e){return h(null,{_SVG_NAMESPACE:"http://www.w3.org/2000/svg",_ONE_SECOND:1E3,constructor:function(e){e=e||{};this.size=e.size||24;this.frameRate=e.frameRate||30;this.animationLength=e.animationLength||1E3;this._reset();this._initializeSizing();this._createSpinner()},destroy:function(){this.remove();this._reset()},isActive:function(){return null!==this._spinnerTimer},placeAt:function(e){this._attachPoint=e;this._attachPoint.appendChild(this._spinner)},remove:function(){this.stop();
this._attachPoint&&this._spinner.parentNode===this._attachPoint&&(this._attachPoint.removeChild(this._spinner),this._attachPoint=null)},startup:function(){if(this._attachPoint){var g=this._ONE_SECOND/this.frameRate;this._startTime=(new Date).getTime();this._spinnerTimer=setInterval(e.hitch(this,"_processFrame"),g)}},stop:function(){clearInterval(this._spinnerTimer);this._spinnerTimer=null},pause:function(){this.stop();this._renderPercentage(0)},_reset:function(){this._attachPoint=this._spinnerTimer=
this._spinner=null;this._startTime=0},_initializeSizing:function(){this._centerX=this.size/2;this._centerY=this.size/2;this._width=this.size/6;this._radius=(this.size-this._width)/2;this._circumference=2*Math.PI*this._radius;this._rotationalOffset=0.25*this._circumference},_createSpinner:function(){this._spinner=document.createElementNS(this._SVG_NAMESPACE,"svg");this._spinner.setAttribute("height",this.size+"px");this._spinner.setAttribute("width",this.size+"px");var e=this._createCircle();e.setAttribute("class",
"donutGutter");this._spinner.appendChild(e);this._animatedElement=this._createCircle();this._animatedElement.setAttribute("class","donutProgress");this._spinner.appendChild(this._animatedElement)},_createCircle:function(){var e=document.createElementNS(this._SVG_NAMESPACE,"circle");e.setAttribute("r",this._radius);e.setAttribute("cx",this._centerX);e.setAttribute("cy",this._centerY);e.setAttribute("style","stroke-width: "+this._width+"px;");return e},_processFrame:function(){var e=this._getCurrentPercent(this._startTime,
this.animationLength);this._renderPercentage(e)},_renderPercentage:function(e){var d=this._getHeadPercent(e),c=this._getTailPercent(e);e=this._getStrokeLength(d,c,this._circumference);d=this._getStrokeGap(d,c,this._circumference);c=this._getStrokeStart(c,this._circumference);this._animatedElement.style["stroke-dasharray"]=e+", "+d;this._animatedElement.style["stroke-dashoffset"]=this._rotationalOffset-c},_getCurrentPercent:function(e,d){return((new Date).getTime()-e)%d/d},_getHeadPercent:function(e){var d=
1+Math.pow(e/702664100,0.2632525);return 0.75>=e?228.9139+-228.91373830770002/d:1},_getTailPercent:function(e){var d=1+Math.pow(e/0.6602402,7.174857);return 0.25<=e?1.050912+-1.0519016562/d:0},_getStrokeLength:function(e,d,c){return(e-d)*c},_getStrokeGap:function(e,d,c){return(1-(e-d))*c},_getStrokeStart:function(e,d){return e*d}})})},"MW/rtc/plugins/embeddedoutputs/view/ScrollableOutputStyler":function(){define("dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/on mw-gesture/GestureDetector mw-gesture/GestureRegistry MW/rtc/events/MouseEventUtil MW/rtc/plugins/embeddedoutputs/outputhandlers/error/ErrorOutputProperties MW/rtc/plugins/embeddedoutputs/outputhandlers/symbolic/SymbolicOutputProperties MW/rtc/plugins/embeddedoutputs/outputhandlers/text/TextOutputProperties MW/rtc/plugins/embeddedoutputs/outputhandlers/warning/WarningOutputProperties MW/rtc/plugins/embeddedoutputs/outputhandlers/variablestring/VariableStringOutputProperties".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s){return h(null,{MARGIN_PADDING_BUFFER:30,_SCROLLBAR_THICKNESS:11,_MAX_SCROLLABLE_HEIGHT:250,_OVERFLOW_THRESHOLD:3,constructor:function(a,b){this._viewModel=a;this._rtcDomNode=b;this._listeners=new Map},destroy:function(){},layout:function(a,b){this._styleScrollableOutputs(b);this._cleanUpScrollListeners()},scrollableStylesChanged:function(a){},_styleScrollableOutputs:function(a){var b=!1,c=this._viewModel.getOutputDivs(),b=this._styleTextOutputsIfRequired(c)||
b;(b=this._styleOutputs(c)||b)&&this.scrollableStylesChanged(a)},_styleOutputs:function(a){var b=[],b=a.map(function(a){if(a.firstElementChild&&a.firstElementChild.getStyler)return a.firstElementChild.getStyler().getStyleChange(a)});b.forEach(function(a){a&&a.output.firstElementChild.getStyler().applyStyleChange(a)});return 0<b.filter(function(a){return!!a}).length},_styleTextOutputsIfRequired:function(f){f=f.filter(function(a){return c.contains(a,q.CSS_TAG)||c.contains(a,s.CSS_TAG)||c.contains(a,
p.CSS_TAG)||c.contains(a,r.CSS_TAG)||c.contains(a,m.CSS_TAG)}).map(g.hitch(this,"_getTextStyleChange",b),this);f=f.filter(function(a){return!!a});f.forEach(g.hitch(this,"_makeTextStyleChange",c,a),this);var d=f.map(this._isOutputOverflown,this);f.forEach(function(a,b){this._makeScrollPositionChange(a,d[b]);this._setOverflowState(a,d[b])},this);return 0<f.length},_getTextStyleChange:function(a,b){var c=a.getMarginBox(b).w-this.MARGIN_PADDING_BUFFER,f=parseFloat(b.getAttribute("data-width")),d=b.scrollHeight,
e=parseFloat(b.getAttribute("data-height")),g=parseFloat(b.getAttribute("data-scroll-top"))||0,k=parseFloat(b.getAttribute("data-scroll-left"))||0,h=Math.max(0,b.scrollHeight-b.clientHeight),l=Math.max(0,b.scrollWidth-b.clientWidth),g=Math.min(h,g),k=Math.min(l,k);return!this._hasWidthChanged(c,f)&&!this._hasHeightChanged(d,e)&&!this._hasScrollPositionChanged(b.scrollTop,g)&&!this._hasScrollPositionChanged(b.scrollLeft,k)?null:{output:b,availableWidth:c,isElementGrowable:this._isElementGrowable(b),
scrollHeight:b.scrollHeight,scrollTop:g,scrollLeft:k}},_makeTextStyleChange:function(a,b,c){c.output.setAttribute("data-width",c.availableWidth);c.output.setAttribute("data-height",c.scrollHeight);c.output.style.maxHeight=(c.isElementGrowable?c.scrollHeight:this._MAX_SCROLLABLE_HEIGHT)+this._SCROLLBAR_THICKNESS+"px"},_makeScrollPositionChange:function(a,b){b?(a.output.scrollTop=a.scrollTop,a.output.scrollLeft=a.scrollLeft,this._addListeners(a.output)):this._removeListenersForOutput(a.output)},_setOverflowState:function(a,
b){b?c.add(a.output,"scrollableOutput"):c.remove(a.output,"scrollableOutput")},_isElementGrowable:function(a){return a.scrollHeight<2*this._MAX_SCROLLABLE_HEIGHT&&a.scrollHeight>this._MAX_SCROLLABLE_HEIGHT},_hasWidthChanged:function(a,b){return this._hasDimensionChanged(a,b)},_hasHeightChanged:function(a,b){return this._hasDimensionChanged(a,b)},_hasDimensionChanged:function(a,b){return isNaN(b)?!0:a&&0!==a&&Math.abs(a-b)>this._OVERFLOW_THRESHOLD},_hasScrollPositionChanged:function(a,b){return b!==
a},_addListeners:function(a){if(!this._listeners.has(a)){var b=f(a,n.MOUSEWHEEL,g.hitch(this,"_checkScroll",a)),c=f(a,"scroll",g.hitch(this,"_handleScrollEvent",a)),d=new k(a,[l.tapmove({options:{numTaps:0},callbacks:{began:g.hitch(this,"_handleDownEvent")}})]);this._listeners.set(a,{mouseWheelScrollListener:b,scrollListener:c,gestureDetector:d})}},_removeListenersForOutput:function(a){var b=this._listeners.get(a);b&&(this._removeListeners(b),this._listeners["delete"](a))},clearListeners:function(){this._listeners.forEach(this._removeListeners);
this._listeners.clear()},_removeListeners:function(a){a.mouseWheelScrollListener.remove();a.scrollListener.remove();a.gestureDetector.destroy()},_checkScroll:function(a,b){var c=this._checkVerticalScroll(a,b),f=this._checkHorizontalScroll(a,b);(c||f)&&b.stopPropagation()},_handleScrollEvent:function(a,b){this._updateScrollTopAttribute(a);this._updateScrollLeftAttribute(a)},_updateScrollTopAttribute:function(a){a.setAttribute("data-scroll-top",a.scrollTop)},_updateScrollLeftAttribute:function(a){a.setAttribute("data-scroll-left",
a.scrollLeft)},_cleanUpScrollListeners:function(){var a=[];this._listeners.forEach(function(b,c){d.isDescendant(c,this._rtcDomNode)||a.push(c)},this);a.forEach(this._removeListenersForOutput,this)},_checkVerticalScroll:function(a,b){var c=!1,f=a.scrollTop,d=a.scrollHeight-a.clientHeight,e=n.getVerticalScrollDistance(b);0<e?c=0!==f:0>e&&(c=f!==d);return c},_checkHorizontalScroll:function(a,b){var c=!1,f=a.scrollLeft,d=a.scrollWidth-a.clientWidth,e=n.getHorizontalScrollDistance(b);0<e?c=0!==f:0>e&&
(c=f!==d);return c},_handleDownEvent:function(a){a=a.srcEvent;n.isEventInScrollbarTrack(a)&&e.stop(a)},_isOutputOverflown:function(a){var b=a.output;a=b.scrollHeight-b.getBoundingClientRect().height;b=b.scrollWidth-b.getBoundingClientRect().width;return a>this._OVERFLOW_THRESHOLD||b>this._OVERFLOW_THRESHOLD}})})},"mw-gesture/GestureDetector":function(){define(["dojo/_base/declare","./input/PointerInput","./input/WheelInput"],function(h,e,g){return function(d,c){var b=[],a=e.fromNode(d),f=g.fromNode(d),
k=function(c){Array.isArray(c)||(c=[c]);c.forEach(function(b){b.attachInputStream(a);b.attachInputStream(f)});b=b.concat(c)};c&&k(c);return{add:k,remove:function(a){},getAttachedRecognizers:function(){return b},destroy:function(){a.destroy();f.destroy();b.forEach(function(a){return a.destroy()})},preventFocus:function(){a.preventFocus()},allowFocus:function(){a.allowFocus()},stopPropagation:function(){a.stopPropagation();f.stopPropagation()},allowPropagation:function(){a.allowPropagation();f.allowPropagation()},
preventDefault:function(){a.preventDefault();f.preventDefault()},allowDefault:function(){a.allowDefault();f.allowDefault()},addHoverListeners:function(){return a.addHoverListeners()},resetAll:function(){a.clearInput();b&&b.forEach(function(a){return a.reset()})}}}})},"mw-gesture/input/PointerInput":function(){define(["../util/DomUtils","../util/InputDataUtil","../events/Observable","../events/RemovableGroup","./PointerInputUtil"],function(h,e,g,d,c){var b=h.addDomListener,a=h.preventDefault,f=h.stopPropagation;
h=c.getActiveImplementations;var k=c.getImplementationForEvent,l=c.addListenersToRemovable,n=c.updateLastTouch,p=c.isCompatibilityEvent,m=h(),q=null;return{fromNode:function(c,h){var t=d(),u=d(),v=d(),w=d(),x=d(),A=d(),B=c.ownerDocument,F=[],G=[],H=g(),I=function(a){var b=a;q=n(a,q);p(a,q)&&(b=null);return b},K=function(a){H.emit(e.createFromPointers(F,a,c))},C=function(a){if(a=I(a))k(a).addEventToPointers(F,a),K(a)},M=function(a){if(a=I(a)){var b=k(a);b.addEventToPointers(F,a);K(a);b.removeEventFromPointers(F,
a);0===F.length&&u.remove()}},Q=function(a){if(a=I(a)){var b=k(a);b&&b.addEventToPointers(F,a);u.remove();K(a);F=[]}},L=function(a){if((a=I(a))&&0===a.buttons)G=[a],H.emit(e.createFromPointers(G,a,c))},t=l(m,t,c,{down:function(a){if(a=I(a))k(a).addEventToPointers(F,a),u=l(m,u,B,{move:C,up:M,cancel:Q},!0),t.own(b(c,"dragstart",Q,!1)),t.own(b(c,"drag",Q,!1)),t.own(b(c,"dragend",Q,!1)),K(a)}},!1);return{EVENT_SET:"pointers",subscribe:H.subscribe,preventFocus:function(){v.remove();v=l(m,v,c,{down:a},
!1)},allowFocus:function(){v.remove()},stopPropagation:function(){w.remove();w=l(m,w,c,{down:f,move:f,up:f},!1)},allowPropagation:function(){w.remove()},preventDefault:function(){x.remove();x=l(m,x,c,{down:a,move:a,up:a},!1)},allowDefault:function(){x.remove()},clearInput:function(){u.remove();F=[]},addHoverListeners:function(){A.remove();return A=l(m,A,c,{move:L},!1)},destroy:function(){t.remove();u.remove();v.remove();w.remove();x.remove();A.remove()}}}}})},"mw-gesture/util/DomUtils":function(){define([],
function(){return{isAncestorNode:function(h,e){for(var g=!1;e;){if(e===h){g=!0;break}e=e.parentNode}return g},addDomListener:function(h,e,g,d){h.addEventListener(e,g,d);return{remove:function(){h.removeEventListener(e,g,d)}}},preventDefault:function(h){h.preventDefault()},stopPropagation:function(h){h.stopPropagation()}}})},"mw-gesture/util/InputDataUtil":function(){define(["./InputTypes","./PointerUtil","../util/PointerProperties","../input/PointerInputUtil"],function(h,e,g){var d=e.isPrimary,c=
e.getXY,b=g.calculateProperties,a={pointerdown:h.DOWN,pointermove:h.MOVE,pointerup:h.UP,pointercancel:h.CANCEL,touchstart:h.DOWN,touchmove:h.MOVE,touchend:h.UP,touchcancel:h.CANCEL,mousedown:h.DOWN,mousemove:h.MOVE,mouseup:h.UP,"":h.CANCEL},f=function(b){var c=null;b&&b.srcEvent&&(c=a[b.srcEvent.type]);return c};return{createFromPointers:function(a,c,f){c._softTimestamp=Date.now()+(c.detail?c.detail:0);a=a.slice();var d=b(a,c),e=[c],g=c?c.target:null;g||(c.touches&&c.touches[0]?g=c.touches[0].target:
c.changedTouches&&c.changedTouches[0]&&(g=c.changedTouches[0].target));return{type:"inputData",pointers:a,properties:d,changedPointers:e,srcEvent:c,target:g,srcNode:f}},createTimeout:function(){return{type:"inputData",isTimeout:!0}},isSinglePrimary:function(a){return a.pointers&&1===a.pointers.length&&d(a.pointers[0])},isDown:function(a){return f(a)===h.DOWN},isMove:function(a){return f(a)===h.MOVE},isUp:function(a){return f(a)===h.UP},isCancel:function(a){return f(a)===h.CANCEL},isTimeout:function(a){return!!a.isTimeout},
isWheel:function(a){return(a=a.srcEvent)&&"wheel"===a.type},getInputType:f,getCenterPoint:function(a){var b={x:NaN,y:NaN};a&&a.properties&&(b=a.properties.center);return b},getPointerLocations:function(a){return a.pointers.map(c)},getTimestamp:function(a){return a&&a.srcEvent?a.srcEvent._softTimestamp:NaN}}})},"mw-gesture/util/InputTypes":function(){define([],function(){return{DOWN:"down",MOVE:"move",UP:"up",CANCEL:"cancel"}})},"mw-gesture/util/PointerUtil":function(){define([],function(){return{isPrimary:function(h){return h.isPrimary||
1===h.pointerId||0===h.button||"Touch"===h.constructor.name},getXY:function(h){return{x:h.clientX,y:h.clientY}}}})},"mw-gesture/util/PointerProperties":function(){define(["./GeomUtil","./TimeUtils","./PointerUtil"],function(h,e,g){var d=g.getXY,c=e.getTimestamp,b=h.getCenter,a=h.getAngle,f=h.getSpread,k=h.computeDistance,l=h.computeDirection;return{calculateProperties:function(e,g){var h=e.map(d);return{center:b(h),angle:a(h),spread:f(h),timestamp:c(g)}},compareProperties:function(a,b,c){b||(b=a);
c||(c=b);var f=a.timestamp-c.timestamp,d=k(c.center,a.center);return{center:{current:a.center,initial:b.center,previous:c.center,delta:k(b.center,a.center),velocity:{x:d.x/f,y:d.y/f},direction:l(c.center,a.center)},angle:{current:a.angle,initial:b.angle,previous:c.angle,delta:a.angle-b.angle,velocity:(a.angle-c.angle)/f},spread:{current:a.spread,initial:b.spread,previous:c.spread,delta:a.spread-b.spread,velocity:(a.spread-c.spread)/f},timestamp:{current:a.timestamp,initial:b.timestamp,previous:c.timestamp,
delta:a.timestamp-b.timestamp}}}}})},"mw-gesture/util/GeomUtil":function(){define(["./Directions"],function(h){var e=h.DIRECTION_UP,g=h.DIRECTION_RIGHT,d=h.DIRECTION_DOWN,c=h.DIRECTION_LEFT,b=h.DIRECTION_NONE,a=function(a){return a.x},f=function(a){return a.y},k=function(b){return{max:{x:Math.max.apply(null,b.map(a)),y:Math.max.apply(null,b.map(f))},min:{x:Math.min.apply(null,b.map(a)),y:Math.min.apply(null,b.map(f))}}},l=function(a,b){return{x:b.x-a.x,y:b.y-a.y}},n=function(a,b){return p(l(a,b))},
p=function(a){var b=Math.pow(a.x,2);a=Math.pow(a.y,2);return Math.sqrt(b+a)};return{arePointsWithinRadius:function(a,b,c){var f=void 0,d=void 0,f=void 0;if(!a||!b)return!1;f=a.x-b.x;d=a.y-b.y;f=Math.sqrt(f*f+d*d);return f<c},getCenter:function(a){var b=k(a);a=b.max;b=b.min;return{x:(a.x+b.x)/2,y:(a.y+b.y)/2}},getAngle:function(a){var b=k(a);a=b.max;b=b.min;return Math.atan2(a.y-b.y,a.x-b.x)*(180/Math.PI)},getSpread:function(a){a=k(a);return n(a.max,a.min)},computeDistance:l,computeMagnitude:p,computeDistanceMagnitude:n,
computeDirection:function(a,f){var h=b,k=f.x-a.x,l=f.y-a.y;if(0!==k||0!==l)h=Math.abs(k)>Math.abs(l)?0>k?c:g:0>l?e:d;return h}}})},"mw-gesture/util/Directions":function(){define([],function(){return{DIRECTION_UP:"up",DIRECTION_RIGHT:"right",DIRECTION_DOWN:"down",DIRECTION_LEFT:"left",DIRECTION_NONE:"none"}})},"mw-gesture/util/TimeUtils":function(){define([],function(){return{isWithinTimeout:function(h,e,g){return Math.abs(h-e)<g},getTimestamp:function(h){return h._softTimestamp?h._softTimestamp:h.timestamp}}})},
"mw-gesture/input/PointerInputUtil":function(){define(["../util/DomUtils","./impl/pointer","./impl/touch","./impl/mouse"],function(h,e,g,d){var c=h.addDomListener;h=!!window.PointerEvent;var b="ontouchstart"in window,a=h?[e]:b?[g,d]:[d],f=!h&&b,k={mousedown:!0,mousemove:!0,mouseup:!0},l={pointerdown:!0,pointermove:!0,pointerup:!0},n={touchstart:!0,touchmove:!0,touchend:!0,touchcancel:!0},p=function(a){return a&&a.type&&k[a.type]},m=function(a){return a&&a.type&&l[a.type]},q=function(a){return a&&
a.type&&n[a.type]};return{isTouchEvent:q,isPointerEvent:m,isMouseEvent:p,getActiveImplementations:function(){return a},getImplementationForEvent:function(a){var b=null;p(a)&&(b=d);m(a)&&(b=e);q(a)&&(b=g);return b},addListenersToRemovable:function(a,b,f,d,e){a.forEach(function(a){for(var g in d)d.hasOwnProperty(g)&&b.own(c(f,a[g],d[g],e))});return b},updateLastTouch:function(a,b){var c=b;q(a)&&(a._softTimestamp=Date.now(),c=a);return c},isCompatibilityEvent:function(a,b){var c=!1;if(b&&p(a)&&f)a:{var c=
a.clientX,d=a.clientY,e=Date.now();if(!(b._softTimestamp+1E3<=e)){var e=b.changedTouches,g;for(g in e)if(e.hasOwnProperty(g)&&"length"!==g){var h=e[g],k=h.clientY,h=Math.abs(c-h.clientX),k=Math.abs(d-k);if(25>=h&&25>=k){c=!0;break a}}}c=!1}return c}}})},"mw-gesture/input/impl/pointer":function(){define([],function(){var h=function(e,g){for(var d=void 0,c=-1,d=0;d<e.length;d++)e[d].pointerId===g.pointerId&&(c=d);-1===c&&(c=e.length);return c};return{type:"pointer",down:"pointerdown",move:"pointermove",
up:"pointerup",cancel:"pointercancel",addEventToPointers:function(e,g){var d=h(e,g);e[d]=g;g.pointerType||(g.pointerType="mouse")},removeEventFromPointers:function(e,g){var d=h(e,g);e.splice(d,1)}}})},"mw-gesture/input/impl/touch":function(){define([],function(){var h=function(e,g){for(var d=void 0,c=-1,d=0;d<e.length;d++)e[d].identifier===g.identifier&&(c=d);-1===c&&(c=e.length);return c};return{type:"touch",down:"touchstart",move:"touchmove",up:"touchend",cancel:"touchcancel",addEventToPointers:function(e,
g){var d=g.touches,c=g.changedTouches[0],b;for(b in d)if(d.hasOwnProperty(b)&&"length"!==b){var a=h(e,d[b]);d[b].pointerId=a+1;e[a]=d[b]}g.pointerType="touch";"pageX pageY screenX screenY clientX clientY target".split(" ").forEach(function(a){try{a in g||(g[a]=c[a])}catch(b){}})},removeEventFromPointers:function(e,g){e.splice(0,e.length)}}})},"mw-gesture/input/impl/mouse":function(){define([],function(){return{type:"mouse",down:"mousedown",move:"mousemove",up:"mouseup",cancel:"",addEventToPointers:function(h,
e){if(0===e.button||2===e.button)e.pointerId=1,h[0]=e,e.pointerType="mouse"},removeEventFromPointers:function(h,e){for(var g=void 0,d=-1,g=0;g<h.length;g++)h[g].pointerId===e.pointerId&&(d=g);-1===d&&(d=h.length);h.splice(d,1)}}})},"mw-gesture/events/Observable":function(){define(["dojo/aspect"],function(h){return function(){var e={emit:function(e){}};return{subscribe:function(g){var d=h.after(e,"emit",g,!0);return{unsubscribe:function(){d.remove()}}},emit:function(g){e.emit(g)}}}})},"mw-gesture/events/RemovableGroup":function(){define([],
function(){return function(){var h=[];return{own:function(e,g){var d=e;g&&(d={remove:function(){e[g].call(e)}});h.push(d)},remove:function(){h.forEach(function(e){e.remove()});h=[]}}}})},"mw-gesture/input/WheelInput":function(){define(["../util/DomUtils","../util/InputDataUtil","../events/Observable","../events/RemovableGroup"],function(h,e,g,d){var c=h.addDomListener,b=h.preventDefault,a=h.stopPropagation;return{fromNode:function(f,h){var l=d(),n=d(),p=d(),m=g();l.own(c(f,"wheel",function(a){m.emit(e.createFromPointers([],
a,f))},!1));return{EVENT_SET:"wheel",subscribe:m.subscribe,stopPropagation:function(){n.remove();n.own(c(f,"wheel",a,!1))},allowPropagation:function(){n.remove()},preventDefault:function(){p.remove();p.own(c(f,"wheel",b,!1))},allowDefault:function(){p.remove()},destroy:function(){l.remove()}}}}})},"mw-gesture/GestureRegistry":function(){define("./recognizers/GestureRecognizer ./util/ButtonValues ./gestures/tapmove ./gestures/tap ./gestures/click ./gestures/flick ./gestures/pan ./gestures/rotate ./gestures/pinch ./gestures/wheel ./gestures/hover".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n){var p=function(a,b){return function(c){if(b){c.options||(c.options={});for(var f in b)b.hasOwnProperty(f)&&(c.options[f]=b[f])}f=h(a(c.options));if(c.callbacks)for(var d in c.callbacks)if(c.callbacks.hasOwnProperty(d))f.on(d,c.callbacks[d]);c&&(c.options&&c.options.pointerTypes)&&f.setPointerTypes(c.options.pointerTypes);return f}};return{click:p(c),tap:p(d),tapmove:p(g),slide:p(g,{numTaps:0}),flick:p(b),pan:p(a),rotate:p(f),pinch:p(k),doubleTap:p(d,{numTaps:2}),tripleTap:p(d,
{numTaps:3}),leftClick:p(c,{button:e.LEFT}),rightClick:p(c,{button:e.RIGHT}),wheel:p(l),hover:p(n)}})},"mw-gesture/recognizers/GestureRecognizer":function(){define("dojo/aspect ../events/RemovableGroup ../coordination/RecognizerCoordinator ./RecognizerStates ./RecognizerStateUtil ../util/PointerTypes ../util/InputDataUtil".split(" "),function(h,e,g,d,c,b,a){return function(f){var k=d.INACTIVE,l=null,n=e(),p=e(),m=void 0,q=[b.MOUSE,b.TOUCH,b.PEN],r={began:function(a,b){},progress:function(a,b){},recognized:function(a,
b){},cancelled:function(a,b){},after:function(a,b){}},s=function(b){var e=!0;b.srcEvent&&b.srcEvent.pointerType&&(e=-1!==q.indexOf(b.srcEvent.pointerType));a.isCancel(b)&&(e=!0);!m.isPrevented()&&(!c.isWaitingState(k)&&!c.isDisabledState(k)&&e)&&(k=k===d.RECOGNIZED||k===d.CANCELLED?d.INACTIVE:k,k===d.INACTIVE&&p.remove(),b=f.recognize({inputData:b,currentState:k}),t(b.targetState,b.actionData))},t=function(a,b){l=null;c.isActiveState(a)&&m.needsToWait()&&(l={targetState:a,actionData:b},a=d.WAITING);
k=a;c.isActiveState(k)&&(m.resetPrevented(),m.failThoseWaiting());c.isInactiveState(k)&&m.allowThoseWaiting();if(c.isActiveState(k))try{r[k](b,u)}catch(f){console.error("Exception thrown. Message: "+f.message),f.stack&&console.error("Stack: ",f.stack)}if(c.isEndedState(k))try{r.after()}catch(e){console.error("Exception thrown. Message: "+e.message),e.stack&&console.error("Stack: ",e.stack)}};f.subscribe&&n.own(f.subscribe(s),"unsubscribe");var u={attachInputStream:function(a){var b=!1;f.EVENT_SETS.forEach(function(c){c===
a.EVENT_SET&&(b=!0)});if(!b)return{unsubscribe:function(){}};var c=a.subscribe(s);n.own(c,"unsubscribe");return c},on:function(a,b){if("string"===typeof a){var c=h.after(r,a,b,!0);n.own(c);return c}var c=e(),f;for(f in a)if(a.hasOwnProperty(f)){var d=h.after(r,f,a[f],!0);n.own(d);c.own(d)}return c},onTemp:function(a,b){if("string"===typeof a){var c=h.after(r,a,b,!0);p.own(c);return c}var c=e(),f;for(f in a)if(a.hasOwnProperty(f)){var d=h.after(r,f,a[f],!0);p.own(d);c.own(d)}return c},enable:function(){k=
d.INACTIVE},disable:function(){k=d.DISABLED},setPointerTypes:function(a){q=a},setOptions:function(a){f.setOptions&&f.setOptions(a)},reset:function(){t(d.INACTIVE);f.reset()},getCoordinator:function(){return m},destroy:function(){p.remove();n.remove()},attemptProcess:function(a){k===d.WAITING&&l&&t(a?d.INACTIVE:l.targetState,l.actionData)},isActive:function(){return c.isActiveState(k)},isPossible:function(){return c.isPossibleState(k)||c.isWaitingState(k)}},m=g(u);return u}})},"mw-gesture/coordination/RecognizerCoordinator":function(){define([],
function(){return function(h){var e=[],g=[],d=[],c=[];return{prevents:function(b){e.push(b);b.getCoordinator().isPreventedBy(h)},isPreventedBy:function(b){g.push(b)},resetPrevented:function(){e.forEach(function(b){return b.reset()})},isPrevented:function(){return g.some(function(b){return b.isActive()})},waitForFailure:function(b){d.push(b);b.getCoordinator().isWaitingFor(h)},isWaitingFor:function(b){c.push(b)},needsToWait:function(){return d.some(function(b){return b.isPossible()})},failThoseWaiting:function(){c.forEach(function(b){b.reset();
b.attemptProcess(!0)})},allowThoseWaiting:function(){c.forEach(function(b){b.attemptProcess(!1)})}}}})},"mw-gesture/recognizers/RecognizerStates":function(){define([],function(){return{INACTIVE:"inactive",POSSIBLE:"possible",WAITING:"waiting",BEGAN:"began",PROGRESS:"progress",RECOGNIZED:"recognized",CANCELLED:"cancelled",DISABLED:"disabled"}})},"mw-gesture/recognizers/RecognizerStateUtil":function(){define(["./RecognizerStates"],function(h){return{isActiveState:function(e){return e===h.RECOGNIZED||
e===h.CANCELLED||e===h.BEGAN||e===h.PROGRESS},isEndedState:function(e){return e===h.RECOGNIZED||e===h.CANCELLED},isWaitingState:function(e){return e===h.WAITING},isInactiveState:function(e){return e===h.INACTIVE},isPossibleState:function(e){return e===h.POSSIBLE},hasBegun:function(e){return e===h.BEGAN||e===h.PROGRESS},isDisabledState:function(e){return e===h.DISABLED}}})},"mw-gesture/util/PointerTypes":function(){define([],function(){return{TOUCH:"touch",MOUSE:"mouse",PEN:"pen"}})},"mw-gesture/util/ButtonValues":function(){define([],
function(){return{LEFT:0,RIGHT:2}})},"mw-gesture/gestures/tapmove":function(){define("dojo/_base/lang ../timer/Timer ../functional/FunctionalUtils ../events/Observable ../util/ActionDataUtil ../util/InputDataUtil ../util/GeomUtil ../util/TimeUtils ../util/RecognizerDataUtil ../recognizers/RecognizerStates ../recognizers/RecognizerStateUtil ./_state/TapCount ./_state/PositionTracker".split(" "),function(h,e,g,d,c,b,a,f,k,l,n,p,m){var q=g.sequence,r=l.BEGAN,s=l.POSSIBLE,t=l.CANCELLED,u=c.trackUpdate,
v=c.trackFinal;e=c.resetTracker;g=c.setActionData;var w=k.createRecognizerData,x=k.markAsNoChange;d=k.markAsCancelled;var A=k.markAsProgress,B=k.markAsInactive,F=k.markAsRecognized;b=k.applyIfUndetermined;a=k.applyOnTimeout;f=k.applyOnDown;l=k.applyOnMove;var G=k.applyOnUp,H=k.applyIfBegun,I=k.applyIfTargetStateIsComplete,K=k.applyIfActive,C=k.applyIfInactive,M=k.applyIfTargetStateBegun;k=k.applyIfTargetStateIsActive;var Q=n.hasBegun;c=q(c.trackInitial,function(a){a.internalData.tapCount.onDown(a.inputData);
return a},H(d),b(function(a){a.internalData.tapCount.isTap()?a.targetState=r:Q(a)?a.targetState=t:a.targetState=s;return a}),M(function(a){a.internalData.tapCount.resetTimers();return a}));n=q(u,b(H(A)),b(x));var v=q(function(a){a.internalData.tapCount.onUp(a.inputData);return a},b(H(q(v,F))),b(x)),L=q(a(B),b(f(function(a){void 0!==a.inputData.srcEvent.button&&a.inputData.srcEvent.button!==a.internalData.tapMoveOptions.button&&(a=B(a));return a})),b(f(c)),b(l(n)),b(G(v)),b(C(B)),b(K(d)),k(g),I(q(e,
function(a){a.internalData.tapCount.reset();return a})));return function(a){var b=h.mixin({button:0},a?a:{}),c=new p(b),f=new m;return{EVENT_SETS:["pointers"],setOptions:function(a){b=h.mixin(b,a?a:{});c.setOptions(b)},reset:q(c.reset.bind(c),f.reset.bind(f)),subscribe:c.observable.subscribe.bind(c.observable),recognize:function(a){a=L(w("tapmove",a,{positionTracker:f,tapCount:c,tapMoveOptions:b}));return{targetState:a.targetState,actionData:a.actionData}}}}})},"mw-gesture/timer/Timer":function(){define([],
function(){return function(h,e){var g=null,d=function(){g&&window.clearTimeout(g);g=null};return{start:function(){d();g=window.setTimeout(h,e)},clear:d}}})},"mw-gesture/functional/FunctionalUtils":function(){define([],function(){location.href.slice(-1);return{sequence:function(){var h=arguments;return function(e){for(var g=0;g<h.length;g++)e=h[g].call(this,e);return e}}}})},"mw-gesture/util/ActionDataUtil":function(){define([],function(){return{setActionData:function(h){h.actionData={type:h.type,
srcEvent:h.inputData.srcEvent,pointers:h.inputData.pointers,properties:h.internalData.positionTracker.getActionProperties()};return h},trackInitial:function(h){h.internalData.positionTracker.setInitial(h.inputData);return h},trackFinal:function(h){h.internalData.positionTracker.setFinal(h.inputData);return h},trackUpdate:function(h){h.internalData.positionTracker.setUpdated(h.inputData);return h},resetTracker:function(h){h.internalData.positionTracker.reset();return h}}})},"mw-gesture/util/RecognizerDataUtil":function(){define(["../recognizers/RecognizerStates",
"../recognizers/RecognizerStateUtil","../util/InputDataUtil"],function(h,e,g){var d=h.RECOGNIZED,c=h.BEGAN,b=h.PROGRESS,a=h.INACTIVE,f=h.POSSIBLE,k=h.CANCELLED,l=e.isEndedState,n=e.isInactiveState,p={createRecognizerData:function(a,b,c){return{type:a,currentState:b.currentState,inputData:b.inputData,targetState:null,actionData:{},internalData:c}},applyWhen:function(a,b){return function(c){return a(c)?b(c):c}},applyIfUndetermined:function(a){return p.applyWhen(p.isUndetermined,a)},applyIfDetermined:function(a){return p.applyWhen(p.isDetermined,
a)},applyIfActive:function(a){return p.applyWhen(function(a){return e.isActiveState(a.currentState)},a)},applyIfBegun:function(a){return p.applyWhen(function(a){return e.hasBegun(a.currentState)},a)},applyIfPossible:function(a){return p.applyWhen(function(a){return e.isPossibleState(a.currentState)},a)},applyIfTargetStateBegun:function(a){return p.applyWhen(function(a){return e.hasBegun(a.targetState)},a)},applyIfTargetStateIsActive:function(a){return p.applyWhen(function(a){return e.isActiveState(a.targetState)},
a)},applyIfTargetStateIsComplete:function(a){return p.applyWhen(function(a){return n(a.targetState)||l(a.targetState)},a)},applyIfInactive:function(a){return p.applyWhen(function(a){return!e.isActiveState(a.currentState)},a)},applyOnUp:function(a){return p.applyWhen(function(a){return g.isUp(a.inputData)},a)},applyOnDown:function(a){return p.applyWhen(function(a){return g.isDown(a.inputData)},a)},applyOnMove:function(a){return p.applyWhen(function(a){return g.isMove(a.inputData)},a)},applyOnCancel:function(a){return p.applyWhen(function(a){return g.isCancel(a.inputData)},
a)},applyOnTimeout:function(a){return p.applyWhen(function(a){return g.isTimeout(a.inputData)},a)},applyOnWheel:function(a){return p.applyWhen(function(a){return g.isWheel(a.inputData)},a)},applyWhenNotSinglePrimary:function(a){return p.applyWhen(function(a){return!g.isSinglePrimary(a.inputData)},a)},isDetermined:function(a){return!!a.targetState},isUndetermined:function(a){return!a.targetState},markAsNoChange:function(a){a.targetState=a.currentState;return a},markAsPossible:function(a){a.targetState=
f;return a},markAsRecognized:function(a){a.targetState=d;return a},markAsInactive:function(b){b.targetState=a;return b},markAsCancelled:function(a){a.targetState=k;return a},markAsProgress:function(a){a.targetState=b;return a},markAsBegan:function(a){a.targetState=c;return a},resetWhenComplete:function(a){var b=a.targetState,c=a.internalData;(n(b)||l(b))&&c&&c.reset&&c.reset();return a}};return p})},"mw-gesture/gestures/_state/TapCount":function(){var h=function(){function e(e,d){for(var c=0;c<d.length;c++){var b=
d[c];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(e,b.key,b)}}return function(g,d,c){d&&e(g.prototype,d);c&&e(g,c);return g}}();define("dojo/_base/lang ../../timer/Timer ../../functional/FunctionalUtils ../../events/Observable ../../util/InputDataUtil ../../util/GeomUtil ../../util/TimeUtils".split(" "),function(e,g,d,c,b,a,f){var k=a.arePointsWithinRadius,l=f.isWithinTimeout,n=b.getCenterPoint,p=b.getTimestamp,m=b.createTimeout;return function(){function a(b){if(!(this instanceof
a))throw new TypeError("Cannot call a class as a function");this.options=e.mixin({numTaps:1,maxRadius:1,maxTouchRadius:20,maxHold:250,tapDelay:250},b?b:{});this.observable=c();this.reset()}h(a,[{key:"setOptions",value:function(a){this.options=e.mixin(this.options,a?a:{});this.reset()}},{key:"_emitTimeout",value:function(){this.observable.emit(m())}},{key:"onDown",value:function(a){this.resetTimers();this.holdTimer.start();this.latestDown=a;this._checkUpToDownDelay();this._checkUpToDownDistance()}},
{key:"onUp",value:function(a){this.resetTimers();this.eventTimer.start();this.latestUp=a;this._updateTapCount()}},{key:"_isActivePress",value:function(){var a=!!this.latestDown;return this.latestDown&&this.latestUp?p(this.latestUp)>p(this.latestDown):a}},{key:"_checkUpToDownDelay",value:function(){this.validUpToDownDelay=!0;0!==this.tapCount&&!l(p(this.latestUp),p(this.latestDown),this.options.tapDelay)&&(this.validUpToDownDelay=!1)}},{key:"_checkUpToDownDistance",value:function(){this.validUpToDownDistance=
!0;if(0!==this.tapCount&&!k(n(this.latestUp),n(this.latestDown),this.latestDown&&this.latestDown.srcEvent&&"touch"===this.latestDown.srcEvent.pointerType?this.options.maxTouchRadius:this.options.maxRadius))this.validUpToDownDistance=!1}},{key:"_updateTapCount",value:function(){var a=this._isActivePress(),b=k(n(this.latestDown),n(this.latestUp),this.latestDown&&this.latestDown.srcEvent&&"touch"===this.latestDown.srcEvent.pointerType?this.options.maxTouchRadius:this.options.maxRadius),c=l(p(this.latestDown),
p(this.latestUp),this.options.maxHold),f=!1!==this.validUpToDownDelay&&!1!==this.validUpToDownDistance;a&&(b&&c&&f)&&this.tapCount++}},{key:"isTap",value:function(){var a=!1!==this.validUpToDownDelay&&!1!==this.validUpToDownDistance;return this.tapCount===this.options.numTaps&&a}},{key:"isEarlyTap",value:function(){var a=this._isActivePress(),b=this.tapCount<this.options.numTaps;return a&&b}},{key:"getTapCount",value:function(){return this.tapCount}},{key:"resetTimers",value:function(){this.holdTimer&&
this.holdTimer.clear();this.eventTimer&&this.eventTimer.clear()}},{key:"reset",value:function(){this.tapCount=0;this.latestUp=this.latestDown=null;this.resetTimers();this.holdTimer=new g(this._emitTimeout.bind(this),this.options.maxHold);this.eventTimer=new g(this._emitTimeout.bind(this),this.options.tapDelay)}}]);return a}()})},"mw-gesture/gestures/_state/PositionTracker":function(){var h=function(){function e(e,d){for(var c=0;c<d.length;c++){var b=d[c];b.enumerable=b.enumerable||!1;b.configurable=
!0;"value"in b&&(b.writable=!0);Object.defineProperty(e,b.key,b)}}return function(g,d,c){d&&e(g.prototype,d);c&&e(g,c);return g}}();define(["../../util/PointerProperties"],function(e){var g=e.compareProperties;return function(){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.reset()}h(d,[{key:"setInitial",value:function(c){this.currentProperties=this.initialProperties=c.properties;this.finalProperties=this.previousProperties=null;this.updateActionProperties()}},
{key:"setUpdated",value:function(c){this.previousProperties=this.currentProperties;this.currentProperties=c.properties;this.updateActionProperties()}},{key:"setFinal",value:function(c){this.previousProperties=this.currentProperties;this.finalProperties=this.currentProperties=c.properties;this.updateActionProperties()}},{key:"updateActionProperties",value:function(){this.actionProperties=g(this.currentProperties,this.initialProperties,this.previousProperties,this.actionProperties)}},{key:"reset",value:function(){this.actionProperties=
this.previousProperties=this.currentProperties=this.finalProperties=this.initialProperties=null}},{key:"getActionProperties",value:function(){return this.actionProperties}}]);return d}()})},"mw-gesture/gestures/tap":function(){define("dojo/_base/lang ../timer/Timer ../functional/FunctionalUtils ../events/Observable ../util/ActionDataUtil ../util/InputDataUtil ../util/GeomUtil ../util/TimeUtils ../util/RecognizerDataUtil ./_state/TapCount ./_state/PositionTracker".split(" "),function(h,e,g,d,c,b,a,
f,k,l,n){var p=g.sequence,m=c.trackUpdate,q=c.trackFinal;e=c.resetTracker;g=c.setActionData;var r=k.createRecognizerData,s=k.markAsNoChange,t=k.markAsPossible,u=k.markAsInactive,v=k.markAsRecognized,w=k.applyWhen;d=k.applyIfUndetermined;b=k.applyIfTargetStateIsActive;a=k.applyOnTimeout;f=k.applyOnDown;var x=k.applyOnMove,A=k.applyOnUp;k=k.applyIfTargetStateIsComplete;c=p(c.trackInitial,function(a){a.internalData.tapCount.onDown(a.inputData);return a},d(t));var m=p(m,d(s)),q=p(function(a){a.internalData.tapCount.onUp(a.inputData);
return a},d(w(function(a){return a.internalData.tapCount.isTap()},p(q,v))),d(w(function(a){return a.internalData.tapCount.isEarlyTap()},t))),B=p(a(u),d(f(function(a){void 0!==a.inputData.srcEvent.button&&a.inputData.srcEvent.button!==a.internalData.tapOptions.button&&(a=u(a));return a})),d(f(c)),d(x(m)),d(A(q)),d(u),b(g),k(p(e,function(a){a.internalData.tapCount.reset();return a})));return function(a){var b=h.mixin({button:0},a?a:{}),c=new l(b),f=new n;return{EVENT_SETS:["pointers"],setOptions:function(a){b=
h.mixin(b,a?a:{});c.setOptions(b)},reset:p(c.reset.bind(c),f.reset.bind(f)),subscribe:c.observable.subscribe.bind(c.observable),recognize:function(a){a=B(r("tap",a,{positionTracker:f,tapCount:c,tapOptions:b}));return{targetState:a.targetState,actionData:a.actionData}}}}})},"mw-gesture/gestures/click":function(){define("dojo/_base/lang ../events/Observable ../functional/FunctionalUtils ../util/ActionDataUtil ../util/DomUtils ../util/InputDataUtil ../util/RecognizerDataUtil ../recognizers/RecognizerStates ./_state/PositionTracker".split(" "),
function(h,e,g,d,c,b,a,f,k){var l=d.trackFinal;b=d.setActionData;var n=c.isAncestorNode;g=g.sequence;var p=f.RECOGNIZED,m=f.INACTIVE,q=f.POSSIBLE,r=a.createRecognizerData,s=a.applyWhen;f=a.applyWhenNotSinglePrimary;c=a.applyIfUndetermined;var t=a.applyOnDown,u=a.applyOnMove,v=a.applyOnUp,w=a.markAsInactive,x=a.markAsNoChange,A=a.applyIfTargetStateIsActive;d=g(s(function(a){var b=a.internalData.clickOptions;a=a.inputData.srcEvent;var c=!1;void 0!==a.button?c=a.button===b.button:0!==b.button&&(c=!0);
return c},g(a.markAsPossible,d.trackInitial)),c(w));a=g(l,function(a){var b;if(b=a.currentState===q)b=a.inputData,b=n(b.srcNode,b.target);a.targetState=b?p:m;return a});var B=g(f(w),t(d),u(x),v(a),c(w),A(b));return function(a){var b=e(),c=h.mixin({button:0},a?a:{}),f=new k;return{EVENT_SETS:["pointers"],reset:f.reset.bind(f),subscribe:b.subscribe.bind(b),recognize:function(a){a=B(r("click",a,{clickOptions:c,positionTracker:f}));return{targetState:a.targetState,actionData:a.actionData}}}}})},"mw-gesture/gestures/flick":function(){define("dojo/_base/lang ../functional/FunctionalUtils ../events/Observable ../util/RecognizerDataUtil ../util/ActionDataUtil ../util/GeomUtil ../recognizers/RecognizerStates ../util/Directions ./_state/PositionTracker".split(" "),
function(h,e,g,d,c,b,a,f,k){var l=c.trackUpdate;a=c.resetTracker;var n=c.setActionData;e=e.sequence;var p=b.computeMagnitude,m=d.createRecognizerData,q=d.markAsNoChange,r=d.markAsRecognized;b=d.markAsInactive;var s=d.applyIfUndetermined,t=d.applyIfPossible,u=d.applyOnDown,v=d.applyOnMove,w=d.applyWhen,x=d.applyOnUp,A=d.applyIfTargetStateIsActive,B=d.applyIfTargetStateIsComplete,F=f.DIRECTION_NONE;d=e(c.trackInitial,s(d.markAsPossible));c=t(e(l,w(function(a){var b=a.internalData.flickOptions,c=a.internalData.positionTracker.getActionProperties().center.direction;
a=a.inputData.pointers.length===b.pointers;return(b.direction===F||b.direction===c)&&a},q),s(b)));f=t(e(w(function(a){var b=a.internalData.flickOptions,c=a.internalData.positionTracker.getActionProperties();a=p(c.center.delta);c=p(c.center.velocity);return a>=b.minDistance&&c>b.minVelocity},r),s(b)));var G=e(u(d),v(c),x(f),s(b),A(n),B(a));return function(a){var b=g(),c=new k,f=h.mixin({pointers:1,minDistance:20,direction:F,minVelocity:0.3},a?a:{});return{EVENT_SETS:["pointers"],reset:c.reset.bind(c),
subscribe:b.subscribe.bind(b),recognize:function(a){a=G(m("flick",a,{positionTracker:c,flickOptions:f}));return{targetState:a.targetState,actionData:a.actionData}}}}})},"mw-gesture/gestures/pan":function(){define("dojo/_base/lang ../timer/Timer ../functional/FunctionalUtils ../events/Observable ../util/Directions ../util/ActionDataUtil ../util/GeomUtil ../util/RecognizerDataUtil ./_state/PositionTracker".split(" "),function(h,e,g,d,c,b,a,f,k){e=g.sequence;var l=a.computeMagnitude,n=b.trackUpdate,
p=b.trackFinal;a=b.resetTracker;g=b.setActionData;var m=f.createRecognizerData,q=f.markAsNoChange,r=f.markAsCancelled,s=f.markAsInactive,t=f.markAsPossible,u=f.markAsBegan,v=f.markAsProgress,w=f.markAsRecognized,x=f.applyIfUndetermined,A=f.applyOnDown,B=f.applyOnMove,F=f.applyIfTargetStateIsActive,G=f.applyIfTargetStateIsComplete,H=f.applyOnUp,I=f.applyWhen,K=f.applyIfPossible,C=f.applyIfActive,M=f.applyIfInactive;f=f.applyIfBegun;var Q=c.DIRECTION_NONE;c=function(a){return a.inputData.pointers.length!==
a.internalData.panOptions.pointers};b=e(b.trackInitial,I(c,e(f(w),x(s))),x(f(w)),x(t));c=e(n,f(I(c,w)),x(e(K(I(function(a){var b=a.internalData.panOptions;a=a.internalData.positionTracker.getActionProperties();a=l(a.center.delta);return Math.abs(a)>=b.minDistance},u)),f(v))),x(q));var p=e(p,f(w),x(s)),L=e(A(b),B(c),H(p),x(M(s)),x(C(r)),F(g),G(a));return function(a){var b=d(),c=new k,f=h.mixin({pointers:1,minDistance:20,direction:Q},a?a:{});return{EVENT_SETS:["pointers"],reset:c.reset.bind(c),subscribe:b.subscribe.bind(b),
recognize:function(a){a=L(m("pan",a,{positionTracker:c,panOptions:f}));return{targetState:a.targetState,actionData:a.actionData}}}}})},"mw-gesture/gestures/rotate":function(){define("dojo/_base/lang ../functional/FunctionalUtils ../events/Observable ../util/ActionDataUtil ../util/RecognizerDataUtil ./_state/PositionTracker".split(" "),function(h,e,g,d,c,b){e=e.sequence;var a=d.trackUpdate,f=d.trackFinal,k=d.resetTracker,l=d.setActionData,n=c.createRecognizerData,p=c.markAsNoChange,m=c.markAsCancelled,
q=c.markAsInactive,r=c.markAsPossible,s=c.markAsBegan,t=c.markAsProgress,u=c.markAsRecognized,v=c.applyIfUndetermined,w=c.applyOnDown,x=c.applyOnMove,A=c.applyIfTargetStateIsActive,B=c.applyIfTargetStateIsComplete,F=c.applyOnUp,G=c.applyWhen,H=c.applyIfPossible,I=c.applyIfActive,K=c.applyIfInactive;c=c.applyIfBegun;var C=function(a){return a.inputData.pointers.length!==a.internalData.rotateOptions.pointers};d=e(d.trackInitial,G(C,e(c(u),v(q))),v(c(u)),v(r));var a=e(a,c(G(C,u)),v(e(H(G(function(a){var b=
a.internalData.rotateOptions;a=a.internalData.positionTracker.getActionProperties().angle.delta;return Math.abs(a)>=b.minRotation},s)),c(t))),v(p)),f=e(f,c(u),v(q)),M=e(w(d),x(a),F(f),v(K(q)),v(I(m)),A(l),B(k));return function(a){var c=g(),f=new b,d=h.mixin({pointers:2,minRotation:20},a?a:{});return{EVENT_SETS:["pointers"],reset:f.reset.bind(f),subscribe:c.subscribe.bind(c),recognize:function(a){a=M(n("rotate",a,{positionTracker:f,rotateOptions:d}));return{targetState:a.targetState,actionData:a.actionData}}}}})},
"mw-gesture/gestures/pinch":function(){define("dojo/_base/lang ../functional/FunctionalUtils ../events/Observable ../util/ActionDataUtil ../util/RecognizerDataUtil ./_state/PositionTracker".split(" "),function(h,e,g,d,c,b){e=e.sequence;var a=d.trackUpdate,f=d.trackFinal,k=d.resetTracker,l=d.setActionData,n=c.createRecognizerData,p=c.markAsNoChange,m=c.markAsCancelled,q=c.markAsInactive,r=c.markAsPossible,s=c.markAsBegan,t=c.markAsProgress,u=c.markAsRecognized,v=c.applyIfUndetermined,w=c.applyOnDown,
x=c.applyOnMove,A=c.applyIfTargetStateIsActive,B=c.applyIfTargetStateIsComplete,F=c.applyOnUp,G=c.applyWhen,H=c.applyIfPossible,I=c.applyIfActive,K=c.applyIfInactive;c=c.applyIfBegun;var C=function(a){return a.inputData.pointers.length!==a.internalData.pinchOptions.pointers};d=e(d.trackInitial,G(C,e(c(u),v(q))),v(c(u)),v(r));var a=e(a,c(G(C,u)),v(e(H(G(function(a){var b=a.internalData.pinchOptions;a=a.internalData.positionTracker.getActionProperties().spread.delta;return Math.abs(a)>=b.minDistance},
s)),c(t))),v(p)),f=e(f,c(u),v(q)),M=e(w(d),x(a),F(f),v(K(q)),v(I(m)),A(l),B(k));return function(a){var c=g(),f=new b,d=h.mixin({pointers:2,minDistance:3},a?a:{});return{EVENT_SETS:["pointers"],reset:f.reset.bind(f),subscribe:c.subscribe.bind(c),recognize:function(a){a=M(n("pinch",a,{positionTracker:f,pinchOptions:d}));return{targetState:a.targetState,actionData:a.actionData}}}}})},"mw-gesture/gestures/wheel":function(){define(["../events/Observable","../functional/FunctionalUtils","../util/RecognizerDataUtil"],
function(h,e,g){e=e.sequence;var d=g.createRecognizerData,c=g.applyIfUndetermined,b=g.markAsInactive,a=g.applyIfTargetStateIsActive,f=g.applyOnWheel,k=e(f(g.markAsRecognized),c(b),a(function(a){a.actionData={type:a.type,srcEvent:a.inputData.srcEvent};return a}));return function(a){a=h();return{EVENT_SETS:["wheel"],reset:function(){},subscribe:a.subscribe.bind(a),recognize:function(a){a=k(d("wheel",a,{}));return{targetState:a.targetState,actionData:a.actionData}}}}})},"mw-gesture/gestures/hover":function(){define(["../events/Observable",
"../util/ActionDataUtil","../functional/FunctionalUtils","../util/RecognizerDataUtil","./_state/PositionTracker"],function(h,e,g,d,c){g=g.sequence;var b=e.resetTracker,a=e.setActionData,f=d.createRecognizerData,k=d.applyWhen,l=d.applyIfUndetermined,n=d.markAsInactive,p=d.applyIfTargetStateIsActive,m=g(k(function(a){return(a=a.inputData.srcEvent)&&0===a.buttons&&("pointermove"===a.type||"mousemove"===a.type)},g(e.trackInitial,d.markAsRecognized)),l(n),p(a),b);return function(a){a=h();var b=new c;return{EVENT_SETS:["pointers"],
reset:b.reset.bind(b),subscribe:a.subscribe.bind(a),recognize:function(a){a=m(f("hover",a,{positionTracker:b}));return{targetState:a.targetState,actionData:a.actionData}}}}})},"MW/rtc/events/MouseEventUtil":function(){define(["dojo/_base/lang","dojo/has","dojo/on"],function(h,e,g){return{MOUSEWHEEL:!e("mozilla")?"wheel":"DOMMouseScroll",_WHEEL_DELTA:120,_MOZ_PIXEL_DISTANCE:51,_IE_PIXEL_DISTANCE:45,_MAC_PIXEL_DISTANCE:40,_DEFAULT_PIXEL_DISTANCE:100,_WHEEL_MODE_LINE:-40,redirectMouseScroll:function(d,
c){var b=h.hitch(this,function(a){c.setScrollTop(c.getScrollTop()-this.getVerticalScrollDistance(a));c.setScrollLeft(c.getScrollLeft()-this.getHorizontalScrollDistance(a))});g(d,this.MOUSEWHEEL,b)},getVerticalScrollDistance:function(d){if(!this.isVerticalScroll(d))return 0;d=this._normalizeMouseEvent(d).vertical;return this._browserfyScrollDistance(d)},getHorizontalScrollDistance:function(d){if(!this.isHorizontalScroll(d))return 0;d=this._normalizeMouseEvent(d).horizontal;return this._browserfyScrollDistance(d)},
isVerticalScroll:function(d){return 0!==this._normalizeMouseEvent(d).vertical},isHorizontalScroll:function(d){return 0!==this._normalizeMouseEvent(d).horizontal},_normalizeMouseEvent:function(d){var c={vertical:0,horizontal:0};if(e("mozilla"))c.vertical=d.axis===d.VERTICAL_AXIS?d.detail:0,c.horizontal=d.axis===d.HORIZONTAL_AXIS?d.detail:0;else{var b=d.deltaY&&0!==d.deltaY,a=d.wheelDeltaY&&0!==d.wheelDeltaY,f=d.wheelDeltaX&&0!==d.wheelDeltaX,g=d.deltaX&&0!==d.deltaX||f,h=d.shiftKey;if(b||a)h?c.horizontal=
a?d.wheelDeltaY:-d.deltaY:c.vertical=a?d.wheelDeltaY:-d.deltaY;g&&(h&&b?c.vertical=f?d.wheelDeltaX:-d.deltaX:c.horizontal=f?d.wheelDeltaX:c.horizontal||-d.deltaX)}return c},_browserfyScrollDistance:function(d){return(e("mozilla")?this._WHEEL_MODE_LINE*this._MOZ_PIXEL_DISTANCE:e("trident")||e("ie")?this._IE_PIXEL_DISTANCE:e("safari")||e("mac")?this._MAC_PIXEL_DISTANCE:this._DEFAULT_PIXEL_DISTANCE)*d/this._WHEEL_DELTA},isEventInScrollbarTrack:function(d){var c=d.target.getBoundingClientRect(),b=d.clientY>
c.top+d.target.clientHeight;return d.clientX>c.left+d.target.clientWidth||b}}})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/symbolic/SymbolicOutputProperties":function(){define([],function(){return{OUTPUT_TYPE:"symbolic",CSS_TAG:"embeddedOutputsSymbolicElement"}})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/text/TextOutputProperties":function(){define([],function(){return{OUTPUT_TYPE:"text",CSS_TAG:"embeddedOutputsTextElement"}})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/warning/WarningOutputProperties":function(){define([],
function(){return{OUTPUT_TYPE:"warning",CSS_TAG:"embeddedOutputsWarningElement"}})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/variablestring/VariableStringOutputProperties":function(){define([],function(){return{OUTPUT_TYPE:"variableString",CSS_TAG:"embeddedOutputsVariableStringElement"}})},"MW/rtc/plugins/embeddedoutputs/view/ViewToggler":function(){define("dijit/Tooltip dijit/Destroyable dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-construct dojo/on mw-form/ToggleButton MW/rtc/plugins/embeddedoutputs/view/EmbeddedOutputsViewStateEnum MW/rtc/plugins/view/tooltip/TooltipUtilities".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n){return g(e,{_TOGGLE_PANEL:"toggleButtonPanel",_TOGGLE_PANEL_PRIORITY:1,_BUTTON_GROUP:"embeddedOutputsViewToggleGroup",_STATIC_HEIGHT:50,_DEFAULT_VIEW_STATE:l.ON_RIGHT_VIEW_STATE,constructor:function(a,b,f,e,g){this._rightMarginContainer=a;this._actionDataService=b;this._editorId=f;this._embeddedOutputsViews=g;this._viewState=e||this._DEFAULT_VIEW_STATE;this.own(c.after(this._actionDataService,"onActionChange",d.hitch(this,"_handleActionChange"),!0));this._setupButtons()},
_handleActionChange:function(a){"selected"===a.key&&a.newValue&&this._highlightButtonBasedOnAction(a.id)},_highlightButtonBasedOnAction:function(a){this._embeddedOutputsViews.forEach(function(b){var c=b.getName(),f=this._viewButtons[c];a===b.ACTION_ID&&this._highlightViewButton(c,f)},this)},_setupButtons:function(){this._addButtonPanel();this._embeddedOutputsViews.forEach(function(a){var b=a.getName();this.own(this._viewButtons[b].on("change",d.hitch(this,"_switchToView",b,a.ACTION_ID)))},this)},
_addButtonPanel:function(){this._createButtonPanel();this._setupTooltips();this._initializeButtonPanelPosition()},_createButtonPanel:function(){var c=a.create("div",{className:this._TOGGLE_PANEL});this._viewButtons=[];this._embeddedOutputsViews.forEach(function(a){var f=this._createButton(a.BUTTON_CSS_CLASS,this._viewState===a.getName());this._viewButtons[a.getName()]=f;b.set(f.domNode,"data-testid",a.DATATEST_ID);f.placeAt(c);f.startup()},this);this._buttonPanel=c},_createButton:function(a,b){return new k({icon:"toggleButton "+
a,checked:b,buttonGroup:this._BUTTON_GROUP+this._editorId})},_initializeButtonPanelPosition:function(){this._rightMarginContainer.addLayer(this._buttonPanel,this._TOGGLE_PANEL_PRIORITY,this._STATIC_HEIGHT)},_removeButtonPanel:function(){this._rightMarginContainer.removeLayer(this._buttonPanel)},_setupTooltips:function(){this._viewTooltips=[];this._embeddedOutputsViews.forEach(function(a){var b=a.getName();this._viewTooltips[b]=new h({connectId:this._viewButtons[b],label:n.createUnfocusableTooltipTextHTML(a.TOOLTIP_MESSAGE),
position:["below-centered"]})},this)},_switchToView:function(a,b,c){this._viewState!==a&&this._actionDataService.updateAction(b,{selected:c.mwEventData.newValue})},_highlightViewButton:function(a,b){this._viewState=a;b.set("checked",!0);this._closeTooltips()},_closeTooltips:function(){this._embeddedOutputsViews.forEach(function(a){this._viewTooltips[a.getName()].close()},this)},destroy:function(){this._removeButtonPanel();this._embeddedOutputsViews.forEach(function(a){this._viewTooltips[a.getName()].destroy()},
this)}})})},"mw-form/ToggleButton":function(){define("dojo/_base/declare dojo/on dijit/_WidgetBase dijit/_Contained dijit/_CssStateMixin dijit/_FocusMixin dijit/_TemplatedMixin mw-mixins/property/TagMixin mw-mixins/property/DisabledMixin mw-mixins/property/CheckedMixin mw-mixins/property/ButtonGroupMixin mw-mixins/property/DescriptionMixin mw-mixins/property/HorizontalAlignmentMixin mw-mixins/property/IconAlignmentMixin mw-mixins/property/IconMixin mw-mixins/property/SizeMixin mw-mixins/property/TextMixin mw-mixins/property/VisualFamilyMixin mw-mixins/property/VerticalAlignmentMixin mw-mixins/event/ChangeEventMixin mw-mixins/IconAndTextSizingMixin mw-mixins/PreventSelectionMixin mw-mixins/mixinDependencyValidator mw-mixins/AriaLabelledByMixin dojo/text!./templates/ToggleButton.html".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,B,F,G){return h(B.validate([g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,F]),{baseClass:"mwWidget mwToggleButton",templateString:G,postCreate:function(){this.inherited(arguments);this.own(e(this.domNode,"keydown",this._handleKeydown.bind(this)),e(this.domNode,"keyup",this._handleKeyup.bind(this)))},_handleKeydown:function(a){switch(a.keyCode){case 13:this.get("disabled")||a.target.click();break;case 32:a.preventDefault()}},_handleKeyup:function(a){switch(a.keyCode){case 32:this.get("disabled")||
a.target.click()}}})})},"mw-mixins/property/CheckedMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/on","mw-mixins/event/ChangeEventMixin"],function(h,e,g,d){h=h(null,{checked:!1,checkableNode:null,_treatAsUserEvent:!0,postCreate:function(){this.get("checkableNode")||this.set("checkableNode",this.domNode);this.inherited(arguments);this.domNode.classList.add("mwCheckedMixin");this.own(g(this.get("checkableNode"),"click",e.hitch(this,"_onClick")))},_setCheckedAttr:function(c,b){this._treatAsUserEvent=
b;this._set("checked",c);this._setAriaPressed();this._setAriaChecked();this.baseClass.split(" ").forEach(function(a){c?this.domNode.classList.add(a+"Checked"):this.domNode.classList.remove(a+"Checked")},this)},_setCheckableNodeAttr:function(c){this.checkableNode=c||this.domNode},_setAriaPressed:function(){var c=this.focusNode?this.focusNode:this.domNode;c.hasAttribute("aria-pressed")&&c.setAttribute("aria-pressed",this.get("checked"))},_setAriaChecked:function(){var c=this.focusNode?this.focusNode:
this.domNode;c.hasAttribute("aria-checked")&&c.setAttribute("aria-checked",this.get("checked"))},_onClick:function(){var c=this.get("checked"),b=!this.get("checked");this.set("checked",b,!0);this._triggerChangeEvent("checked",c,b)}});h._dependencies=[{mixin:d,orderDependent:!1}];return h})},"mw-mixins/event/ChangeEventMixin":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(h,e){return h(null,{_triggerChangeEvent:function(e,d,c){this.emit("change",{mwEventData:{propertyName:e,oldValue:d,
newValue:c}})},_qeTypeOverWithEnter:function(e){var d=this.get("value");this.set("value",e);this._triggerChangeEvent("value",d,e)},postCreate:function(){this.inherited(arguments);this.own(this.on("change",e.hitch(this,function(e){e.preventDefault();e.mwEventData||(e.stopPropagation(),this._triggerChangeEvent("checked",!this.get("checked"),this.get("checked")))})))}})})},"mw-mixins/property/ButtonGroupMixin":function(){define(["dojo/_base/declare","dojo/query","dijit/registry","mw-mixins/property/CheckedMixin",
"mw-mixins/event/ChangeEventMixin"],function(h,e,g,d,c){h=h(null,{buttonGroup:"",postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwButtonGroupMixin")},_setButtonGroupAttr:function(b){if("string"!==typeof b)throw Error("'buttonGroup' property expects a literal string!");0<b.length?this.domNode.setAttribute("data-mw-buttongroup",b):this.domNode.removeAttribute("data-mw-buttongroup");this._set("buttonGroup",b)},_setCheckedAttr:function(b,a){this.inherited(arguments);b&&this.get("buttonGroup")&&
g.toArray().forEach(function(b){this._shouldUncheckWidget(b)&&(b.set("checked",!1,a),a&&b._triggerChangeEvent("checked",!0,!1))},this)},_shouldUncheckWidget:function(b){return b.get("buttonGroup")===this.get("buttonGroup")&&b!==this&&b.get("checked")},_onClick:function(b){if(this.get("checked")&&this.get("buttonGroup")&&!this.get("allowDeselectionInButtonGroup"))return b.stopPropagation(),b.preventDefault(),!1;this.inherited(arguments)}});h._dependencies=[{mixin:d,orderDependent:!0},{mixin:c,orderDependent:!1}];
return h})},"mw-mixins/property/HorizontalAlignmentMixin":function(){define(["dojo/_base/declare"],function(h){var e=["left","center","right"],g={};Object.keys(e).forEach(function(d){g[e[d]]="mwHorizontalAlignment"+(e[d].charAt(0).toUpperCase()+e[d].slice(1))});return h(null,{horizontalAlignment:"center",postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwHorizontalAlignmentMixin")},_setHorizontalAlignmentAttr:function(d){if(-1===e.indexOf(d))throw Error("'Vertical alignment' property expects '' one of these values: "+
e);this._applyHorizontalAlignmentClass(d);this._set("horizontalAlignment",d)},_applyHorizontalAlignmentClass:function(d){var c;c=this.get("horizontalAlignment");(c=g[c])&&this.domNode.classList.remove(c);this.domNode.classList.add(g[d])}})})},"mw-mixins/property/VerticalAlignmentMixin":function(){define(["dojo/_base/declare","mw-mixins/property/SizeMixin"],function(h,e){var g=["top","middle","bottom"],d={};Object.keys(g).forEach(function(b){d[g[b]]="mwVerticalAlignment"+(g[b].charAt(0).toUpperCase()+
g[b].slice(1))});var c=h(null,{verticalAlignment:"middle",postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwVerticalAlignmentMixin")},_setVerticalAlignmentAttr:function(b){if(-1===g.indexOf(b))throw Error("'Vertical alignment' property expects '' one of these values: "+g[b]);this._applyVerticalAlignmentClass(b);this._set("verticalAlignment",b)},_applyVerticalAlignmentClass:function(b){var a;a=this.get("verticalAlignment");(a=d[a])&&this.domNode.classList.remove(a);this.domNode.classList.add(d[b])}});
c._dependencies=[{mixin:e,orderDependent:!0}];return c})},"mw-mixins/IconAndTextSizingMixin":function(){define(["dojo/_base/declare","dojo/dom-style","mw-mixins/property/SizeMixin"],function(h,e,g){h=h(null,{_paddingAndBorder:6,_setSize:function(d,c){this.inherited(arguments);if(this._started){var b="";"auto"===c||"100%"===c?this._setSpecialSizeOnAdditionalNodes(d,"none"):(b=this._getAdjustedSize(d,c,this.domNode),this._setSpecialSizeOnAdditionalNodes(d,parseInt(b)-this._paddingAndBorder+"px"));this.contentWrapperNode.style[d]=
"100%"}},_setSpecialSizeOnAdditionalNodes:function(d,c){"width"===d?this.iconAndTextContainerNode.style.maxWidth=c:"height"===d&&(this.textNode.style.maxHeight=c)}});h._dependencies=[{mixin:g,orderDependent:!0}];return h})},"mw-mixins/AriaLabelledByMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{postCreate:function(){this.inherited(arguments);var e=this.id+"_label";this.focusNode.setAttribute("aria-labelledby",e);this.textNode.setAttribute("id",e)}})})},"MW/rtc/plugins/embeddedoutputs/ExecutionRequestFactoryProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/embeddedoutputs/ExecutionRequestFactory"],function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.internaldocument","rtc.document","rtc.code.sections.model"]}},createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/plugins/embeddedoutputs/ExecutionRequestFactory":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin","MW/rtc/model/CodeUtilities","MW/rtc/plugins/embeddedoutputs/ExecutionRequest"],
function(h,e,g,d){return h(e,{constructor:function(c,b,a){this._internalDocument=c;this._document=b;this._sectionModel=a},createRequest:function(c,b,a,f,e,g,h,p){return new d(c,b,a,f,e,g,h,p,this._getStartCodeIndexForNode.bind(this),this._getEndCodeIndexForNode.bind(this))},_getStartCodeIndexForNode:function(c){c=this._sectionModel.getSectionNumberForNode(c);return this._getStartCodeIndexForSection(c)},_getEndCodeIndexForNode:function(c){c=this._sectionModel.getSectionNumberForNode(c);return this._getEndCodeIndexForSection(c)},
_getStartCodeIndexForSection:function(c){c=this._getCodeNodesClosestToSection(c,1);return 0===c.length?-1:this._getCodeIndexForCodeNode(c[0])+1},_getEndCodeIndexForSection:function(c){c=this._getCodeNodesClosestToSection(c,-1);if(0===c.length)return-1;c=c[c.length-1];var b=this._getCodeIndexForCodeNode(c),b=b+c.getCodeText().length;return b+1},_getCodeNodesClosestToSection:function(c,b){for(var a=[],f=c;0===a.length;){a=this._sectionModel.getSection(f);if(null===a)return[];a=g.getCodeNodesInNodeRange(a.start.getNode(),
a.end.getNode());f+=b}return a},_getCodeIndexForCodeNode:function(c){c=this._document.createLinePosition(c);var b=g.getAbsoluteCodeOffsetFromPosition(this._internalDocument,c);c.destroy();return b}})})},"MW/rtc/plugins/embeddedoutputs/ExecutionRequest":function(){define(["dojo/_base/declare","mw-utils/Utils","MW/rtc/model/CodeUtilities","MW/rtc/model/Range"],function(h,e,g,d){return h(null,{constructor:function(c,b,a,f,d,g,h,p,m,q){this._fileName=c;this._filePath=b;this._fullCodeText=a;this._documentStateToken=
f;this._startPosition=d;this._endPosition=g;this._executableRegions=h;this._partialEval=p;this._requestId=e.generateUuid();this._evaluationRange=null;this._getStartCodeIndexCallback=m;this._getEndCodeIndexCallback=q},getRequestId:function(){return this._requestId},getDocumentStateToken:function(){return this._documentStateToken},getRegionNumbersToRun:function(){return this._executableRegions.map(function(c){return c.regionNumber})},getEvaluationRange:function(){null===this._evaluationRange&&(this._evaluationRange=
new d(this._startPosition,this._endPosition));return this._evaluationRange},getExecutionMessage:function(){return{requestId:this._requestId,regionArray:this._executableRegions,fullText:this._fullCodeText,partialEval:this._partialEval,documentStateToken:this._documentStateToken,fullFilePath:this._filePath}},getTraditionalExecutionMessage:function(){if(void 0===this._startIndex){var c=this._startPosition.getNode(),b=this._endPosition.getNode();this._startIndex=this._getStartCodeIndexCallback(c);this._endIndex=
this._getEndCodeIndexCallback(b)}0>this._startIndex&&0>this._endIndex&&(this._endIndex=this._startIndex=1);c=this._filePath.substring(0,this._filePath.length-this._fileName.length);return{requestId:this._requestId,fileName:this._fileName,filePath:c,codeText:this._fullCodeText+"\n",startIndex:this._startIndex,executionTextLength:this._endIndex-this._startIndex,documentState:this._documentStateToken}},destroy:function(){this._evaluationRange&&(this._evaluationRange.destroy(),this._evaluationRange=null)}})})},
"MW/rtc/plugins/embeddedoutputs/OutputHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/embeddedoutputs/OutputHandler","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{requires:function(){return{createInstance:["rtc.embeddedoutputs.model","rtc.document","rtc.embeddedoutputs.linenumbertracker","rtc.outputhandlerservice","rtc.embeddedoutputs.linecontinuationtracker"]}},createInstance:function(d,c,b,a,f){return new e(d,c,b,a,f)},destroyInstance:function(d){d.destroy()}})})},
"MW/rtc/plugins/embeddedoutputs/OutputHandler":function(){define("dojo/_base/declare mw-log/Log mw-utils/Utils ./EmbeddedOutputsUtilities ./outputhandlers/error/ErrorOutputProperties MW/rtc/model/CodeUtilities MW/rtc/model/Range MW/rtc/plugins/embeddedoutputs/model/RegionUtilities MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResultInstruction".split(" "),function(h,e,g,d,c,b,a,f,k){return h(null,{constructor:function(a,b,c,f,d){this._embeddedOutputsModel=a;this._document=b;this._lineNumberTracker=
c;this._lineContinuationTracker=d;this._outputHandlerService=f;this._lastOutputAdded=null},_getOutputFromRawOutput:function(a,b,c){var f=this._createOutputMetaData(a,c);a=this._outputHandlerService.handleRawOutput(a,f);if(null===a)return null;f=a.getOutput();f.evaluationId=c;a.getInstruction()===k.REASSOCIATE_AND_UPDATE?f.setCodeLinePositions(d.mergeCodeLinePositions(f.codeLinePositions,b)):f.setCodeLinePositions(b);return a},handleOutputsData:function(b,e,h,m){var q=this._embeddedOutputsModel.getRegions();
this._embeddedOutputsModel.startBatchOperation();b.forEach(function(a){var b,e=g.unique(a.lineNumbers);e.sort(function(a,b){return a-b});a.lineNumbers=e;e=this._getCodeLinePositions(a);if(null!==e){var l=e[e.length-1],n=!1;0<q.length&&(b=d.convertPositionToRegionNumber(l,q),n=q[b],n=f.isPositionWithinRegionRange(l,n,n));b=n?b:this._embeddedOutputsModel.addRegionForPosition(l);a=this._getOutputFromRawOutput(a,e,h);if(null!==a)switch(this._lastOutputAdded=a.getOutput(),a.getInstruction()){case k.ADD_OUTPUT:if("error"===
a.getOutput().type&&a.getOutput().getErrorType()===c.SYNTAX_ERROR_TYPE){this._embeddedOutputsModel.clearReplacementRange();this._embeddedOutputsModel.prependOutput(b,a.getOutput());break}this._embeddedOutputsModel.addOutput(b,a.getOutput());break;case k.REASSOCIATE_AND_UPDATE:this._embeddedOutputsModel.updateOutputAssociations(a.getOutput(),b);break;case k.UPDATE:this._embeddedOutputsModel.updateOutput(a.getOutput())}}},this);0<e.length&&(b=q[e[e.length-1]].code.regionPositions,b=b[b.length-1],m=
m.getStartPosition(),m=new a(m,b),this._embeddedOutputsModel.clearOldOutputsInRange(m,h));this._embeddedOutputsModel.finishBatchOperation()},handleStartOfEvaluation:function(a){this._embeddedOutputsModel.setReplacementRange(a)},handleEndOfEvaluation:function(a,b,f){this._embeddedOutputsModel.clearReplacementRange();f!==c.SYNTAX_ERROR_TYPE&&this._embeddedOutputsModel.clearOldOutputsInRange(a,b)},clearRegionsOutputs:function(a){a instanceof Array||(a=[a]);a.forEach(function(a){this._embeddedOutputsModel.clearOutputsForRegionNumber(a)},
this)},destroy:function(){},_hasLineNumberInformation:function(a){return void 0!=a.lineNumbers&&0<a.lineNumbers.length},_getCodeLinePositions:function(a){if(!this._hasLineNumberInformation(a))return e.error("Output with no line numbers received. Skipping output. Output data: "+JSON.stringify(a)),null;var b=a.lineNumbers.map(function(a){return this._lineContinuationTracker.getAllContinuationLines(a)},this),b=[].concat.apply([],b);b.sort(function(a,b){return a-b});b=g.unique(b);return b.map(function(b){return this._lineNumberTracker.createPositionFromOldLineNumber(b-
1,a)},this)},_createOutputMetaData:function(a,b){var c={};c.evaluationId=b;"matrix"===a.type&&(c.createPromptController=!0);"text"===a.type&&(c.lineNumber=a.lineNumbers[0],c.lastAddedOutput=this._lastOutputAdded);return c}})})},"MW/rtc/plugins/embeddedoutputs/model/RegionUtilities":function(){define([],function(){return{regionStartNodesMatch:function(h,e){this.checkRegionIsValid(h);this.checkRegionIsValid(e);return!h.code.regionPositions.length||!e.code.regionPositions.length?!1:h.code.regionPositions[0].getNode()===
e.code.regionPositions[0].getNode()},codeRegionsMatch:function(h,e){this.checkRegionIsValid(h);this.checkRegionIsValid(e);if(h.regionString!==e.regionString)return!1;var g=h.regionPositions,d=e.regionPositions;if(g.length!==d.length)return!1;var c;for(c=0;c<g.length;c+=1)if(g[c].getNode()!==d[c].getNode())return!1;return!0},isPositionWithinRegionRange:function(h,e,g){this.checkRegionIsValid(e);this.checkRegionIsValid(g);this.checkPositionIsValid(h);g=g.code.regionPositions;g=g[g.length-1].line;h=
h.line;return e.code.regionPositions[0].line<=h&&h<=g},checkRegionIsValid:function(h){this.assert(h,"No region");this.assert(h.code,"No code in region");this.assert(h.code.regionPositions,"No region positions")},checkPositionIsValid:function(h){this.assert(h.isValid(),"Region position is invalid")},assert:function(h,e){if(!h)throw Error(e);}}})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResultInstruction":function(){define([],function(){return{ADD_OUTPUT:0,REASSOCIATE_AND_UPDATE:1,
UPDATE:2}})},"MW/rtc/plugins/embeddedoutputs/LineNumberTrackerProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/embeddedoutputs/LineNumberTracker","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{createInstance:["rtc.document","rtc.internaldocument","rtc.embeddedoutputs.statehandler"]}},createInstance:function(d,c,b){return new e(d,c,b)}})})},"MW/rtc/plugins/embeddedoutputs/LineNumberTracker":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin","MW/rtc/model/CodeUtilities"],function(h,e,g,d,c){return h(d,{constructor:function(b,a,c){this._document=b;this._internalDocument=a;this._stateHandler=c;this._lineNumberMap=[];this._isTracking=!1;this.own(g.after(this._stateHandler,"stateChanged",e.hitch(this,"_stateChangeListener"),!0))},createPositionFromOldLineNumber:function(b,a){var c=this._getNodeFromOldLineNumber(b,a);return this._document.createLinePosition(c,!1)},getNewLineNumberFromOldLineNumber:function(b,
a){var c=this._getNodeFromOldLineNumber(b,a);return this._internalDocument.getLineNumber(c)},_getNodeFromOldLineNumber:function(b,a){var f;f=this._isTracking?this._lineNumberMap[b].node:c.getCodeLineNodes(this._internalDocument)[b];if(!f)throw f=c.getCodeLineNodes(this._internalDocument),Error("Node is null. isTracking: "+this._isTracking+" ;\noldLineNumber: "+b+" ;\nmapping Length: "+this._lineNumberMap.length+" ;\ncodeLinesLength: "+f.length+" ;\nstack: "+Error().stack+" ;\noutputData: "+JSON.stringify(a)+
" ;\ndocumentText:  \n\x3d\x3d\x3d\x3d\x3dSTART OF DOCUMENT\x3d\x3d\x3d\x3d\x3d\n"+this._document.getText()+" ;\n\x3d\x3d\x3d\x3d\x3dEND OF DOCUMENT\x3d\x3d\x3d\x3d\x3d\n");return f},_stateChangeListener:function(b){b===this._stateHandler.CHANGE_TYPE_ENUM.EVAL_INITIALIZED?this._startTracking():b===this._stateHandler.CHANGE_TYPE_ENUM.EVAL_COMPLETE&&this._reset()},_startTracking:function(){this._reset();this._lineNumberMap=c.getCodeLineNodes(this._internalDocument).map(function(b){return this._document.createLinePosition(b,
!1)},this);this._isTracking=!0},_reset:function(){this._lineNumberMap.forEach(this._document.deletePosition);this._lineNumberMap=[];this._isTracking=!1},destroy:function(){this._reset()}})})},"MW/rtc/plugins/embeddedoutputs/LineContinuationTrackerProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/embeddedoutputs/LineContinuationTracker","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{createInstance:["rtc.document",
"rtc.internaldocument","rtc.embeddedoutputs.statehandler","matlab.tokens","rtc.linenumberservice"]}},createInstance:function(d,c,b,a,f){return new e(d,c,b,a,f)}})})},"MW/rtc/plugins/embeddedoutputs/LineContinuationTracker":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin","MW/rtc/model/CodeUtilities"],function(h,e,g,d,c){return h(d,{constructor:function(b,a,c,d,h){this._document=b;this._internalDocument=a;this._stateHandler=c;this._tokenizer=
d;this._lineNumberService=h;this._lineContinuationMap=[];this._isTracking=!1;this.own(g.after(this._stateHandler,"stateChanged",e.hitch(this,"_stateChangeListener"),!0));this.own(g.after(this._internalDocument,"onDocumentReset",e.hitch(this,"_reset")))},getAllContinuationLines:function(b){if(this._isTracking)return this._lineContinuationMap[b-1];this._startTracking();return this.getAllContinuationLines(b)},_stateChangeListener:function(b){b===this._stateHandler.CHANGE_TYPE_ENUM.EVAL_INITIALIZED?this._startTracking():
b===this._stateHandler.CHANGE_TYPE_ENUM.EVAL_COMPLETE&&this._reset()},_startTracking:function(){this._reset();for(var b=[],a=c.getCodeLineNodes(this._internalDocument).length-1;0<=a;a--){var f=a+1;b.push(f);f=this._tokenizer.getLexStateForLine(this._lineNumberService.getLineNumberFromCodeLineNumber(f));this._tokenizer.isLineContinuation(f)||(b.forEach(function(a){this._lineContinuationMap[a-1]=b},this),b=[])}this._isTracking=!0},_reset:function(){this._lineContinuationMap=[];this._isTracking=!1},
destroy:function(){this.inherited(arguments);this._reset()}})})},"MW/rtc/plugins/embeddedoutputs/StateHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/embeddedoutputs/StateHandler","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:[]}},createInstance:function(){return new e}})})},"MW/rtc/plugins/embeddedoutputs/StateHandler":function(){define(["dojo/_base/declare","dojo/_base/lang",
"dojo/aspect"],function(h,e,g){return h(null,{CHANGE_TYPE_ENUM:{EVAL_INITIALIZED:1,EVAL_COMPLETE:2,REGION_EVAL_STARTED:3,SECTION_EVAL_COMPLETE:4},constructor:function(){this._isRunning=!1},stateChanged:function(d,c){switch(d){case this.CHANGE_TYPE_ENUM.EVAL_INITIALIZED:case this.CHANGE_TYPE_ENUM.REGION_EVAL_STARTED:this._isRunning=!0;break;case this.CHANGE_TYPE_ENUM.EVAL_COMPLETE:this._isRunning=!1}this.onStateChanged(d,c)},onStateChanged:function(d,c){},attachListener:function(d,c){var b=e.partial(function(a,
b,c){c===a&&b()},d,c);return g.after(this,"stateChanged",b,!0)},isRunning:function(){return this._isRunning},destroy:function(){}})})},"MW/rtc/plugins/embeddedoutputs/SyntaxErrorHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/embeddedoutputs/SyntaxErrorHandler","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{requires:function(){return{createInstance:["rtc.embeddedoutputs.statehandler","rtc.embeddedoutputs.model"]}},createInstance:function(d,c){return new e(d,
c)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/embeddedoutputs/SyntaxErrorHandler":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/embeddedoutputs/outputhandlers/error/ErrorOutputProperties"],function(h,e,g,d){return h(null,{constructor:function(c,b){this._stateHandler=c;this._eoModel=b;this._hasEvaluatedFirstRegion=!1;this._previousSyntaxError=null;this._evalArgs=[];this._aspectHandles=[];this._aspectHandles.push(g.after(this._stateHandler,
"stateChanged",e.hitch(this,"_stateChangeListener"),!0))},_stateChangeListener:function(c,b){if(c===this._stateHandler.CHANGE_TYPE_ENUM.EVAL_INITIALIZED)this._previousSyntaxError=this.getFirstSyntaxErrorOutput(),this._evalArgs=b;else if(c===this._stateHandler.CHANGE_TYPE_ENUM.REGION_EVAL_STARTED)this._hasEvaluatedFirstRegion||(this._hasEvaluatedFirstRegion=!0,this._clearSyntaxError(this._previousSyntaxError),this.onParseCompletedWithNoSyntaxErrors(this._evalArgs));else if(c===this._stateHandler.CHANGE_TYPE_ENUM.EVAL_COMPLETE)if(this._hasEvaluatedFirstRegion=
!1,this._evalArgs=[],"syntax"===b.errorType){var a=this.getFirstSyntaxErrorOutput();this._syntaxErrorsAreSame(this._previousSyntaxError,a)?this._clearSyntaxError(a):(this._clearSyntaxError(this._previousSyntaxError),this._previousSyntaxError=null);this.onSyntaxError(b)}else this.onEvaluationCompletedWithNoSyntaxErrors(b)},onSyntaxError:function(c){},onParseCompletedWithNoSyntaxErrors:function(c){},onEvaluationCompletedWithNoSyntaxErrors:function(c){},_syntaxErrorsAreSame:function(c,b){if(!c&&!b)return!0;
if(!c||!b||!c.codeLinePositions||!b.codeLinePositions||c.codeLinePositions.length!==b.codeLinePositions.length)return!1;var a=c.codeLinePositions.every(function(a,c){return a.line===b.codeLinePositions[c].line}),f=c.getErrorType()===b.getErrorType()&&c.getText()===b.getText(),d=c.identifier===b.identifier&&!b.identifier;return a&&f&&d},_clearSyntaxError:function(c){c&&this._eoModel.removeOutput(c)},getFirstSyntaxErrorOutput:function(){return this._eoModel.findOutput(this.isSyntaxError)},isSyntaxError:function(c){return c.type===
d.OUTPUT_TYPE&&c.getErrorType()===d.SYNTAX_ERROR_TYPE},hasSyntaxError:function(c){return c.some(this.isSyntaxError)},destroy:function(){this._aspectHandles.forEach(function(c){c.remove()})}})})},"MW/rtc/plugins/embeddedoutputs/OutputRemoverProvider":function(){define(["dojo/_base/declare","./OutputRemover","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.embeddedoutputs","rtc.localfunctionnotifier",
"rtc.internaldocument","rtc.code.sections.model","rtc.embeddedoutputs.syntaxerrors"]}},createInstance:function(d,c,b,a,f){return new e(d._outputsModel,c,b,a,f)}})})},"MW/rtc/plugins/embeddedoutputs/OutputRemover":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/functionnotifier/FunctionStateConstants"],function(h,e,g,d){return h(null,{constructor:function(c,b,a,f,d){this._embeddedOutputsModel=c;this._localFunctionNotifier=b;this._internalDocument=a;this._sectionModel=
f;this._syntaxErrorHandler=d;this._functionInfo=null;this._aspectHandles=[];this._aspectHandles.push(g.after(this._localFunctionNotifier,"onValidFunctionsChange",e.hitch(this,"_functionListener"),!0));this._aspectHandles.push(g.after(this._internalDocument,"onDocumentChanged",e.hitch(this,"_docChangeListener")))},destroy:function(){this._aspectHandles.forEach(function(c){c.remove()});this._aspectHandles=[]},_functionListener:function(c){c.type===d.VALID_FUNCTIONS_ADDED||c.type===d.VALID_FUNCTIONS_CHANGED?
(this._functionInfo={startLine:c.validFunctions[0].startLine-1,endLine:c.validFunctions[c.validFunctions.length-1].endLine-1},this._updateToSectionBounds(),this._clearOutputsFromFunction()):c.type===d.VALID_FUNCTIONS_REMOVED&&(this._functionInfo=null)},_clearOutputsFromFunction:function(){var c=this._functionInfo.endLine,b=this._internalDocument.getLineNode(this._functionInfo.startLine),c=this._internalDocument.getLineNode(c),b=this._embeddedOutputsModel.getSectionRegionsFromNodeRange(b,c);0<b.length&&
this._embeddedOutputsModel.clearOutputsForward(b[0].code.regionNumber,this._syntaxErrorHandler.isSyntaxError)},_docChangeListener:function(){this._updateToSectionBounds()&&this._clearOutputsFromFunction()},_updateToSectionBounds:function(){if(!this._functionInfo)return!1;var c=this._sectionModel.getSections();if(0===c.length)return!1;c=c[c.length-1];if(c.localFunctions){if(c.start.line===this._functionInfo.startLine&&c.end.line===this._functionInfo.endLine)return!1;this._functionInfo.startLine=c.start.line;
this._functionInfo.endLine=c.end.line;return!0}return!1}})})},"MW/rtc/plugins/functionnotifier/FunctionStateConstants":function(){define([],function(){return{FUNCTION_ARGS_NAVIGATE_ENTER:"navigateIntoFunctionArgs",FUNCTION_ARGS_NAVIGATE_EXIT:"navigateOutFunctionArgs",FUNCTION_ARGS_NAVIGATE:"navigateInsideFunctionArgs",FUNCTION_ARGS_NAVIGATE_CHANGE:"navigateBetweenArgs",INNER_NESTED_FUNCTION_CALL:"nestedChildFunctionCall",OUTER_NESTED_FUNCTION_CALL:"ParentFunctionCall",VALID_FUNCTIONS_ADDED:"validFunctionsAdded",
VALID_FUNCTIONS_CHANGED:"validFunctionsChanged",VALID_FUNCTIONS_REMOVED:"validFunctionsRemoved",FUNCTIONS_ON_VALID_DOCUMENT_CHANGE:"functionInfoOnValidDocumentChange"}})},"MW/rtc/plugins/embeddedoutputs/CopyOutputsProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/embeddedoutputs/CopyOutputs","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{requires:function(){return{createInstance:"rtc.embeddedoutputs.model rtc.embeddedoutputs rtc.clipboard rtc.cursor rtc.actionservice rtc.contextmenu.generator rtc.clipboardtempdirpath".split(" ")}},
createInstance:function(d,c,b,a,f,g,h){return new e(d,c,b,a,f,g,h)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/embeddedoutputs/CopyOutputs":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/cutcopypaste/MIMETypes","dojo/i18n!l10n/nls/actions"],function(h,e,g,d,c){return h(null,{RTC_COPY_OUTPUT:"rtc_copy_output",RTC_COPY_ALL_OUTPUT:"rtc_copy_all_output",constructor:function(b,a,f,d,h,n,p){this._outputModel=b;this._outputView=a.getEmbeddedOutputsView();
this._clipboard=f;this._cursor=d;this._actionService=h;this._tempDirPath=p;this._actions=[{id:this.RTC_COPY_OUTPUT,enabled:!1,contextMenuGroup:"copyPaste",description:c.copyOutput,callback:e.hitch(this,this._copyCurrentOutputs)},{id:this.RTC_COPY_ALL_OUTPUT,enabled:!0,contextMenuGroup:"copyPaste",description:c.copyAllOutput,callback:e.hitch(this,this._copyAllOutputs)}];this._selectedOutputs=[];this._handleEmbeddedOutputsStateChange(a.isEmbeddedOutputsEnabled());this._aspectHandles=[];this._aspectHandles.push(g.after(n,
"willOpen",e.hitch(this,"_updateSelectedOutputs"),!0));this._aspectHandles.push(g.after(a,"onEmbeddedOutputsStateChange",e.hitch(this,"_handleEmbeddedOutputsStateChange"),!0))},_updateSelectedOutputs:function(b,a){var c;c=this._outputView.getOutputWrapperFromElement(a);var d=b===this._rightPanel;c?c=[c]:d?c=[]:(c=this._getSelectionRange(),c=this._outputView.getOutputDivsForRange(c.start,c.end));this._selectedOutputs=c.map(function(a){return this._outputView.getOutputFromOutputDiv(a)},this);this._actionService.updateAction("rtc_copy_output",
{enabled:0<this._selectedOutputs.length});c=this._outputModel.hasOutputs();this._actionService.updateAction("rtc_copy_all_output",{enabled:c})},_copyOutputs:function(b){var a="",c="",e=1<b.length,g=this._tempDirPath,h=[],p=[];e&&(c+="\x3cp\x3e");b.forEach(function(d,m){if(e&&0<m){var p=b[m-1];d.codeLinePositions[d.codeLinePositions.length-1].line!==p.codeLinePositions[p.codeLinePositions.length-1].line&&(c+="\x3c/p\x3e\x3cp\x3e")}p=d.getText();a+=(a?"\n":"")+p;c+=d.getHTML(g,h)});e&&(c+="\x3c/p\x3e");
if(1===b.length){var m=b[0];m.getMIMEContent&&(p=p.concat(m.getMIMEContent()))}p=[{flavor:d.HTML,content:c},{flavor:d.TEXT,content:a},{flavor:d.COPY_FOR_COMMAND_WINDOW,content:a}].concat(p);h.length&&p.push({flavor:d.IMAGE_LIST,content:h});for(var m=[],q=p.length-1;0<=q;q-=1){var r=p[q].flavor;(0<=m.indexOf(r)||void 0===p[q].content)&&p.splice(q,1);m.push(r)}this._clipboard.setClipboardData(p)},_getSelectionRange:function(){var b=this._cursor.selectionInfo(),a=b.startNode.rootContainer(),b=b.endNode.rootContainer();
return{start:a,end:b}},_copyCurrentOutputs:function(){this._copyOutputs(this._selectedOutputs)},_copyAllOutputs:function(){var b=this._outputModel.getOutputs();this._copyOutputs(b)},_handleEmbeddedOutputsStateChange:function(b){b?this._actionService.loadActions(this._actions):this._actions.forEach(function(a){this._actionService.getAction(a.id)&&this._actionService.removeAction(a.id)},this)},destroy:function(){var b=this._actionService;this._actions.forEach(function(a){b.getAction(a.id)&&b.removeAction(a.id)});
this._aspectHandles.forEach(function(a){a.remove()})}})})},"MW/rtc/plugins/embeddedoutputs/ExecutionManagerProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/embeddedoutputs/ExecutionManager","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{requires:function(){return{createInstance:"rtc.document rtc.internaldocument rtc.code.sections.model rtc.embeddedoutputs.model rtc.backingstore rtc.document.executablecode.executablecodeservice rtc.id rtc.embeddedoutputs.outputhandler rtc.embeddedoutputs.statehandler rtc.code.matlabfiletype rtc.editordataservice rtc.linenumberservice rtc.embeddedoutputs.executionrequestfactory".split(" ")}},
createInstance:function(d,c,b,a,f,g,h,n,p,m,q,r,s){return new e(d,c,b,a,f,g,h,n,p,m,q,r,s)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/embeddedoutputs/ExecutionManager":function(){define("./ExecutionAndOutputsDataServiceController dojo/_base/declare dojo/_base/lang MW/rtc/model/CodeUtilities MW/rtc/model/Range MW/rtc/plugins/debug/DebugServicesFactory".split(" "),function(h,e,g,d,c,b){return e([],{constructor:function(a,c,d,e,n,p,m,q,r,s,t,u,v){this._document=a;this._internalDocument=
c;this._sectionModel=d;this._outputsModel=e;this._backingStore=n;this._executableCodeService=p;this._editorId=m;this._outputHandler=q;this._stateHandler=r;this._debugServices=b.getInstance();this._filetype=s;this._editorDataService=t;this._lineNumberService=u;this._executionRequestFactory=v;this._executionAndOutputsDataServiceController=new h(this._editorId,this._outputHandler,this._stateHandler,this._editorDataService,this._sectionModel,this._lineNumberService,this._executionRequestFactory,g.hitch(this,
"_getAllUpdatedTextRegions"),g.hitch(this,"_getFullEvaluationRangeCallback"))},interrupt:function(){this._executionAndOutputsDataServiceController.interrupt()},hasPendingRequests:function(){return this._executionAndOutputsDataServiceController.hasPendingRequests()},executeCurrentSection:function(a,b){var c=this._sectionModel.getCurrentSectionNumber();-1!==c&&this.executeSection(c,a,b)},executeSection:function(a,b,c,d){var e;e=b?this._sectionModel.getSections().length-1:a;this._executeSectionRange(a,
e,b,c,d)},executeAllSections:function(){var a=this._sectionModel.getSections().length-1;this._executeSectionRange(0,a,!0,!1)},_executeSectionRange:function(a,b,c,d,e){if(this._isExecutionAllowed()){this._quitDebuggingIfNeeded();var g=this._sectionModel.getSection(a).start,h=this._sectionModel.getSection(b).end,g=this._document.createLinePosition(g.getNode().rootContainer(),!1),h=this._document.createLinePosition(h.getNode().rootContainer(),!1);this._outputsModel.synchronizeRegionsPartial(a,c);var q=
this._getRegionsForSection(a,c).map(this._getTextRegion,this),r=this._executableCodeService.getEvalText(),s=this._document.getState();a=0!==a||!c;d=!d;c=this._backingStore.getFilePath();var t=this._backingStore.getFileName();this._executionAndOutputsDataServiceController.evaluateCode(q,r,s,a,d,g,h,b,c,t,e)}},_getFullEvaluationRangeCallback:function(){var a=this._sectionModel.getSection(0),b=this._sectionModel.getSection(this._sectionModel.getSections().length-1),a=a.start.getNode(),b=b.end.getNode(),
a=this._document.createLinePosition(a.rootContainer(),!1),b=this._document.createLinePosition(b.rootContainer(),!1);return new c(a,b)},_getRegionsForSection:function(a,b){var c=this._sectionModel.getSection(a),d=c.start.getNode();b&&(c=this._sectionModel.getSections(),c=c[c.length-1]);c=c.end.getNode();return this._outputsModel.getSectionRegionsFromNodeRange(d,c)},_getTextRegions:function(a,b){return this._outputsModel.getRegions(a,b).map(this._getTextRegion,this)},_getAllUpdatedTextRegions:function(){this._outputsModel.synchronizeRegions();
return this._getTextRegions()},_getTextRegion:function(a){var b=a.code;return{regionLineNumber:d.getCodeLineNumberFromPosition(this._internalDocument,b.regionPositions[0]),regionString:b.regionString,regionNumber:b.regionNumber,endOfSection:b.endOfSection,sectionNumber:b.sectionNumber,regionUid:a.uid}},_quitDebuggingIfNeeded:function(){this._debugServices.isDebugging&&this._debugServices.debugExit()},_isExecutionAllowed:function(){return this._filetype.isScript()},destroy:function(){this._executionAndOutputsDataServiceController.destroy();
this._executionAndOutputsDataServiceController=null}})})},"MW/rtc/plugins/embeddedoutputs/ExecutionAndOutputsDataServiceController":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect mw-log/Log mw-utils/Utils MW/rtc/plugins/embeddedoutputs/EmbeddedOutputDataService MW/rtc/plugins/embeddedoutputs/ExecutionDataService MW/rtc/plugins/embeddedoutputs/ExecutionRequest MW/rtc/plugins/embeddedoutputs/outputhandlers/error/ErrorOutputProperties".split(" "),function(h,e,g,d,c,b,a,f,k){return h(null,
{_EMBEDDED_OUTPUTS_FEATURE_ID:"matlab.code.embeddedoutputs",_TRADITIONAL_OUTPUTS_FEATURE_ID:"rtc.execution.traditional",constructor:function(c,f,d,h,k,r,s,t,u){this._editorId=c;this._outputsHandler=f;this._stateHandler=d;this._editorDataService=h;this._sectionModel=k;this._lineNumberService=r;this._executionRequestFactory=s;this._editorDataService.request(this._EMBEDDED_OUTPUTS_FEATURE_ID,{id:c}).then(function(){},function(){});this._editorDataService.request(this._TRADITIONAL_OUTPUTS_FEATURE_ID,
{id:c}).then(function(){},function(){});this._executionDataService=new a(this._editorId,t);this._embeddedOutputsDataService=new b(this._editorId,this._outputsHandler,t,u);this._getFullEvaluationRangeCallback=u;this._queuedRequests=[];this._lastQueuedSection=this._lastDocumentState=this._currentlyRunningEvaluationResult=this._currentlyRunningRequest=null;this._isTraditionalExecution=this._regionsEvalFinished=this._outputsFinished=!1;this._aspectHandles=[];this._aspectHandles.push(g.after(this._executionDataService,
"onEvalComplete",e.hitch(this,"_handleEvalComplete"),!0));this._aspectHandles.push(g.after(this._executionDataService,"onSectionEvalComplete",e.hitch(this,"_handleSectionEvalComplete"),!0));this._aspectHandles.push(g.after(this._executionDataService,"onRegionEvalStarted",e.hitch(this,"_handleRegionEvalStarted"),!0));this._aspectHandles.push(g.after(this._embeddedOutputsDataService,"onOutputsStreamingFinished",e.hitch(this,"_handleOutputsStreamingFinished"),!0))},interrupt:function(){this._clearQueuedRequests();
this._doInterrupt()},_clearQueuedRequests:function(){this._queuedRequests.forEach(function(a){a.destroy()});this._queuedRequests=[]},_doInterrupt:function(){this._currentlyRunningRequest&&this._executionDataService.interrupt(this._currentlyRunningRequest)},_handleSectionEvalComplete:function(a){this._embeddedOutputsDataService.flushOutputs();this._notifySectionCompletion(a)},_notifySectionCompletion:function(a){this._stateHandler.stateChanged(this._stateHandler.CHANGE_TYPE_ENUM.SECTION_EVAL_COMPLETE,
a)},_handleRegionEvalStarted:function(a){this._stateHandler.stateChanged(this._stateHandler.CHANGE_TYPE_ENUM.REGION_EVAL_STARTED,a)},_handleEvalComplete:function(a){this._currentlyRunningEvaluationResult={didRunToCompletion:a.data.didRunToCompletion,errorType:a.data.errorType,errorLine:a.data.errorLine};this._regionsEvalFinished=!0;this._finishCurrentRequestIfComplete()},_handleOutputsStreamingFinished:function(){this._outputsFinished=!0;this._finishCurrentRequestIfComplete()},_finishCurrentRequestIfComplete:function(){this._regionsEvalFinished&&
(this._outputsFinished||this._isTraditionalExecution)&&this._finishCurrentRequest()},_finishCurrentRequest:function(){var a,b=this._currentlyRunningEvaluationResult.didRunToCompletion,c=this._currentlyRunningEvaluationResult.errorType,f=this._currentlyRunningEvaluationResult.errorLine;a=this._currentlyRunningRequest?this._currentlyRunningRequest.getEvaluationRange():this._getFullEvaluationRangeCallback();this._isTraditionalExecution&&(c!==k.SYNTAX_ERROR_TYPE&&-1<f)&&this._sendSectionCompletionEvents(a,
f);this._stateHandler.stateChanged(this._stateHandler.CHANGE_TYPE_ENUM.EVAL_COMPLETE,{didRunToCompletion:b,errorType:c,requestedEvaluationRange:a});this._embeddedOutputsDataService.handleEndOfEvaluation(this._currentlyRunningRequest,c);this._executionDataService.handleEndOfEvaluation();this._currentlyRunningRequest&&(this._currentlyRunningRequest.destroy(),this._currentlyRunningRequest=null);this._currentlyRunningEvaluationResult=null;this._regionsEvalFinished=this._outputsFinished=!1;0!==this._queuedRequests.length&&
(a=this._queuedRequests.pop(),this._getOutputsForMessage(a))},_sendSectionCompletionEvents:function(a,b){var c=a.getStartPosition().getNode(),c=this._sectionModel.getSectionNumberForNode(c),f=a.getEndPosition().getNode(),f=this._sectionModel.getSectionNumberForNode(f);0<b&&(f=this._lineNumberService.getLineNumberFromCodeLineNumber(b),f=this._sectionModel.getSectionNumberForLine(f)-1);for(;c<=f;c++)this._notifySectionCompletion(c)},evaluateCode:function(a,b,c,f,d,e,g,h,k,v,w){a=this._executionRequestFactory.createRequest(v,
k,b,c,e,g,a,f);this._lastQueuedSection=h;this._lastDocumentState=c;c=!w&&!this._isOkayToQueue(c,h);this._getOutputsForMessage(a,d||c,w)},_getOutputsForMessage:function(a,b,c){this._currentlyRunningRequest?b?(this.interrupt(),this._queuedRequests=[a]):c?(this._clearQueuedRequests(),this._queuedRequests=[a]):this._queuedRequests.unshift(a):(this._currentlyRunningRequest=a,b={regionNumbersToRun:a.getRegionNumbersToRun(),evaluationRange:a.getEvaluationRange()},this._stateHandler.stateChanged(this._stateHandler.CHANGE_TYPE_ENUM.EVAL_INITIALIZED,
b),this._embeddedOutputsDataService.handleStartOfEvaluation(a),this._isTraditionalExecution?this._executionDataService.executeTraditionalRequest(a):this._executionDataService.executeRequest(a))},_isOkayToQueue:function(a,b){var c=this._lastQueuedSection<b;return a===this._lastDocumentState&&c},hasPendingRequests:function(){return 0<this._queuedRequests.length},destroy:function(){this._executionDataService.destroy();this._executionDataService=null;this._embeddedOutputsDataService.destroy();this._embeddedOutputsDataService=
null;this._currentlyRunningRequest&&(this._currentlyRunningRequest.destroy(),this._currentlyRunningRequest=null);this._currentlyRunningEvaluationResult=null;this._aspectHandles.forEach(function(a){a.remove()});this._aspectHandles=[]}})})},"MW/rtc/plugins/embeddedoutputs/EmbeddedOutputDataService":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect mw-log/Log mw-utils/Utils MW/rtc/plugins/embeddedoutputs/MessageServiceFactory MW/rtc/plugins/embeddedoutputs/OutputQueue".split(" "),function(h,
e,g,d,c,b,a){return h(null,{_CLEAR_REGIONS_OUTPUTS_NAMESPACE:"/embeddedOutputs/clearRegionsOutputsRequest/",_OUTPUT_STREAM_EVENT_NAMESPACE:"/embeddedOutputs/outputStreamEvent/",_OUTPUT_STREAM_STATUS_NAMESPACE:"/embeddedOutputs/outputStreamStatus/",constructor:function(c,d,e,g){this._editorId=c;this._outputsHandler=d;this._outputQueue=new a(this._outputsHandler);this._getRegionsDataCallback=e;this._getFullEvaluationRangeCallback=g;this._currentRequest=null;this._messageService=b.getInstance();this._messageService.subscribe(this._CLEAR_REGIONS_OUTPUTS_NAMESPACE+
this._editorId,"_clearRegionsOutput",this);this._messageService.subscribe(this._OUTPUT_STREAM_EVENT_NAMESPACE+this._editorId,"_outputStreamEvent",this);this._messageService.subscribe(this._OUTPUT_STREAM_STATUS_NAMESPACE+this._editorId,"_handleOutputStreamStatus",this)},handleStartOfEvaluation:function(a){this._outputsHandler.handleStartOfEvaluation(a.getEvaluationRange());this._currentRequest=a},handleEndOfEvaluation:function(a,b){if(!(null===a||null===this._currentRequest)){var c=this._currentRequest.getRequestId();
if(c===a.getRequestId()){var d=this._currentRequest.getEvaluationRange();this._outputsHandler.handleEndOfEvaluation(d,c,b);this._currentRequest=null}}},onOutputsStreamingFinished:function(){},flushOutputs:function(){this._outputQueue.flushNow()},_outputStreamEvent:function(a){var b=a.data.requestId,c=a.data.outputs;a=a.data.completedRegionNumbers||[];if(!(0===c.length&&0===a.length)){var d=null;if(this._currentRequest){if(b!==this._currentRequest.getRequestId())return;d=this._currentRequest.getEvaluationRange()}else d=
this._getFullEvaluationRangeCallback();this._outputQueue.addToQueue(c,a,b,d)}},_clearRegionsOutput:function(a){a=a.data;this._outputQueue.flushNow();this._outputsHandler.clearRegionsOutputs(a)},_handleOutputStreamStatus:function(a){a.data.streamingFinished&&this._handleOutputStreamingFinished()},_handleOutputStreamingFinished:function(){try{this._outputQueue.flushNow()}catch(a){d.error("Exception occurred while flushing outputs: "+a)}this.onOutputsStreamingFinished()},destroy:function(){this._outputQueue.destroy();
this._outputQueue=null;this._messageService.unsubscribe(this._CLEAR_REGIONS_OUTPUTS_NAMESPACE+this._editorId,"_clearRegionsOutput",this);this._messageService.unsubscribe(this._OUTPUT_STREAM_EVENT_NAMESPACE+this._editorId,"_outputStreamEvent",this);this._messageService.unsubscribe(this._OUTPUT_STREAM_STATUS_NAMESPACE+this._editorId,"_handleOutputStreamStatus",this);this._currentRequest=null}})})},"MW/rtc/plugins/embeddedoutputs/ExecutionDataService":function(){define(["dojo/_base/declare","dojo/_base/lang",
"dojo/aspect","./MessageServiceFactory"],function(h,e,g,d){return h(null,{_EVAL_REGIONS_NAMESPACE:"/embeddedOutputs/evalRegions/",_INTERRUPT_EVAL_NAMESPACE:"/embeddedOutputs/interruptRegion/",_EVAL_COMPLETE:"/embeddedOutputs/regionsComplete/",_REGION_EVAL_STARTED_NAMESPACE:"/liveEval/regionEvaluating/",_SECTION_EVAL_COMPLETED_NAMESPACE:"/liveEval/sectionEvaled/",_EVAL_COMPLETED_NAMESPACE:"/liveEval/regionsEvaled/",_GET_REGIONS_DATA_REQUEST_NAMESPACE:"/embeddedOutputs/getRegionsDataRequest/",_GET_REGIONS_DATA_RESPONSE_NAMESPACE:"/embeddedOutputs/getRegionsDataResponse/",
_TRADITIONAL_EXECUTION_REQUEST_PREFIX:"/traditionalexecution/request_",_TRADITIONAL_EXECUTION_EVAL_RESPONSE_PREFIX:"/traditionalexecution/evaluatecode/response_",constructor:function(c,b){this._editorId=c;this._getRegionsDataCallback=b;this._evalRegionsNamespace=this._EVAL_REGIONS_NAMESPACE+this._editorId;this._evalCompleteNamespace=this._EVAL_COMPLETE+this._editorId;this._interruptRegionsNamespace=this._INTERRUPT_EVAL_NAMESPACE+this._editorId;this._getUpdatedTextRegionsNamespace=this._GET_REGIONS_DATA_RESPONSE_NAMESPACE+
this._editorId;this._traditionalExecutionNamespace=this._TRADITIONAL_EXECUTION_REQUEST_PREFIX+this._editorId;this._messageService=d.getInstance();this._messageService.subscribe(this._REGION_EVAL_STARTED_NAMESPACE+this._editorId,"_handleRegionEvalStarted",this);this._messageService.subscribe(this._EVAL_COMPLETED_NAMESPACE+this._editorId,"_handleEvalCompleted",this);this._messageService.subscribe(this._SECTION_EVAL_COMPLETED_NAMESPACE+this._editorId,"_handleSectionEvalCompleted",this);this._messageService.subscribe(this._GET_REGIONS_DATA_REQUEST_NAMESPACE+
this._editorId,"_getRegionsDataRequest",this);this._messageService.subscribe(this._TRADITIONAL_EXECUTION_EVAL_RESPONSE_PREFIX+this._editorId,"_handleTraditionalEvalResponse",this)},executeRequest:function(c){c=c.getExecutionMessage();this._messageService.publish(this._evalRegionsNamespace,c)},executeTraditionalRequest:function(c){c=c.getTraditionalExecutionMessage();this._messageService.publish(this._traditionalExecutionNamespace,c)},interrupt:function(c){this._messageService.publish(this._interruptRegionsNamespace,
c.getRequestId())},handleEndOfEvaluation:function(){this._messageService.publish(this._evalCompleteNamespace)},onEvalComplete:function(c){},onSectionEvalComplete:function(c){},onRegionEvalStarted:function(c){},_handleSectionEvalCompleted:function(c){this.onSectionEvalComplete(c.data)},_handleRegionEvalStarted:function(c){this.onRegionEvalStarted(c.data)},_handleEvalCompleted:function(c){this.onEvalComplete(c)},_handleTraditionalEvalResponse:function(c){this._handleEvalCompleted({data:{didRunToCompletion:c.data.didRunToCompletion,
errorType:c.data.errorType,errorLine:c.data.errorLine}})},_getRegionsDataRequest:function(){var c={status:!0,exception:""};try{c.regionsData=this._getRegionsDataCallback()}catch(b){c.exception=b}this._messageService.publish(this._getUpdatedTextRegionsNamespace,c)},destroy:function(){this._messageService.unsubscribe(this._REGION_EVAL_STARTED_NAMESPACE+this._editorId,"_handleRegionEvalStarted",this);this._messageService.unsubscribe(this._EVAL_COMPLETED_NAMESPACE+this._editorId,"_handleEvalCompleted",
this);this._messageService.unsubscribe(this._SECTION_EVAL_COMPLETED_NAMESPACE+this._editorId,"_handleSectionEvalCompleted",this);this._messageService.unsubscribe(this._GET_REGIONS_DATA_REQUEST_NAMESPACE+this._editorId,"_getRegionsDataRequest",this);this._messageService.unsubscribe(this._TRADITIONAL_EXECUTION_EVAL_RESPONSE_PREFIX+this._editorId,"_handleTraditionalEvalResponse",this)}})})},"MW/rtc/plugins/embeddedoutputs/ExecutionDataManagerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"MW/rtc/plugins/embeddedoutputs/ExecutionDataManager"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.embeddedoutputs.statehandler","rtc.id","rtc.embeddedoutputs.model","rtc.internaldocument","rtc.linenumberservice"]}},createInstance:function(d,c,b,a,f){return new g(d,c,b,a,f)}})})},"MW/rtc/plugins/embeddedoutputs/ExecutionDataManager":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin","mw-messageservice/MessageService"],
function(h,e,g,d,c){return h(d,{_REQUEST_DATA:"/executionData/executionDataRequest/",_RECEIVE_DATA:"/executionData/executionDataResponse/",_MAX_REQUEST_INTERVAL:500,_DEFAULT_REQUEST_INTERVAL:16,constructor:function(b,a,f,d,h){this._stateHandler=b;this._editorId=a;this._requestInterval=null;this._embeddedOutputsModel=f;this._internalDocument=d;this._lineNumberService=h;this._knownExecutionRunning=!1;this.own(g.after(this._stateHandler,"stateChanged",e.hitch(this,"_handleEvalType"),!0));c.subscribe(this._RECEIVE_DATA+
this._editorId,"_handleExecutionData",this)},_handleEvalType:function(b){if(b===this._stateHandler.CHANGE_TYPE_ENUM.EVAL_INITIALIZED){this._requestIntervalTime=this._DEFAULT_REQUEST_INTERVAL;this._previousRegionCall=0;this._lineRunCounters=[];this._knownExecutionRunning=!0;b=this._lineNumberService.getNumberOfCodeLines();for(var a=0;a<b;a++)this._lineRunCounters[a]=0;this._initializeRequests()}else b===this._stateHandler.CHANGE_TYPE_ENUM.EVAL_COMPLETE&&(this._terminateRequests(),this._knownExecutionRunning=
!1)},_initializeRequests:function(){this._requestInterval=setInterval(e.hitch(this,"_requestForData"),this._requestIntervalTime)},_terminateRequests:function(){clearInterval(this._requestInterval);this._requestInterval=null},_requestForData:function(){c.publish(this._REQUEST_DATA+this._editorId,{dataSent:"requestData"})},_handleExecutionData:function(b){if(!this._knownExecutionRunning)return!1;this._currentRegion=b.data.checkPoint;var a=!1,c;for(c in b.data.linesData)b.data.linesData.hasOwnProperty(c)&&
(this._lineRunCounters[c]+=b.data.linesData[c],a=!0);this._updateIntervalTime();this._initializeRequests();if(a)this.onDataUpdate(this._currentRegion,this._lineRunCounters);this._previousRegionCall=this._currentRegion},_updateIntervalTime:function(){this._currentRegion!==this._previousRegionCall?this._requestIntervalTime=this._DEFAULT_REQUEST_INTERVAL:(this._requestIntervalTime*=2,this._requestIntervalTime=Math.min(this._requestIntervalTime,this._MAX_REQUEST_INTERVAL));clearInterval(this._requestInterval)},
onDataUpdate:function(b,a){},destroy:function(){c.unsubscribe(this._RECEIVE_DATA+this._editorId,"_handleExecutionData",this)}})})},"MW/rtc/plugins/embeddedoutputs/view/inline/InlineViewProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./InlineView"],function(h,e,g){return h(e,{requires:function(){return{createInstance:"rtc.view rtc.cursor rtc.internaldocument rtc.embeddedoutputs.syntaxerrors rtc.focusservice rtc.view.decoration.layerviewmodel rtc.view.hidden.hiddennodemodel".split(" ")}},
createInstance:function(d,c,b,a,f,e,h){return new g(d,c,b,a,f,e,h)}})})},"MW/rtc/plugins/embeddedoutputs/view/inline/InlineView":function(){define("dojo/_base/declare dojo/_base/event dojo/_base/fx dojo/_base/lang dojo/aspect dojo/dom-construct dojo/dom-style dojo/fx dojo/i18n!l10n/nls/actions dojo/mouse dojo/on mw-gesture/GestureDetector mw-gesture/GestureRegistry mw-gesture/util/ButtonValues MW/rtc/model/CodeUtilities MW/rtc/model/DocumentConstants MW/rtc/model/DocumentEventUtilities MW/rtc/model/events/nodechange/NodeChangeEventTypes MW/rtc/plugins/embeddedoutputs/view/AbstractView MW/rtc/plugins/embeddedoutputs/view/EmbeddedOutputsViewStateEnum ./LineWithOutputLayouter".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x){return h(v,{_VIEW_STATE_NAME:w.INLINE_VIEW_STATE,ACTION_ID:"rtc_inline_view",ACTION_ID_NO_ANIMATION:"rtc_inline_view_no_animation",BUTTON_CSS_CLASS:"inline",DATATEST_ID:"outputsInlineButton",TOOLTIP_MESSAGE:'\x3cdiv data-testid\x3d"inlineTooltip"\x3e'+k.showInline+"\x3c/div\x3e",constructor:function(a,f,e,g,h,k,l){this._cursor=f;this._view=a;this._internalDocument=e;this._syntaxErrorHandler=g;this._focusService=h;this._view.registerLayouter(new x(k,
l,this));this._enabled=!1;this._outputDivs={};this._animations=[];this._gestureDetector=null;this._deletedNodes=[];this._lineMap={};this._cacheDiv=b.create("div");this.own(c.after(this._internalDocument,"onNodeChange",d.hitch(this,"_onNodeChange"),!0));this.own(c.after(this._internalDocument,"onDocumentChanged",d.hitch(this,"_handleOnDocumentChanged"),!0));this.own(c.after(this._internalDocument,"onDocumentReset",d.hitch(this,"_handleOnDocumentReset")))},setup:function(a){this._viewModel=a},getName:function(){return this._VIEW_STATE_NAME},
createOutputDivsFromOutputs:function(){var a=b.create("div",{className:"inlineElement eoOutputWrapper"});a.addEventListener("click",d.hitch(this,function(a){this.onOutputClicked(a.target)}));a.addEventListener("mouseup",d.hitch(this,"_handleMouseUp"));return a},layout:function(a,b,c,f){this.isEnabled()&&(this._updateLineMap(),this._updateOutputs(b,c),this._view.onLayoutChange(),this.redrawRTCView(f))},cacheOutput:function(a){b.place(a,this._cacheDiv)},_cacheOutputs:function(a){var b;for(b=0;b<a.length;b+=
1)this.cacheOutput(a[b])},isEnabled:function(){return this._enabled},enable:function(){this._enableGestureHandling();this._enabled=!0},disable:function(){this._disableGestureHandling();this._removeOutputs();this._enabled=!1},_enableGestureHandling:function(){this._gestureDetector||(this._gestureDetector=new p(this._internalDocument.root.box),this._addGestureHandlers(this._gestureDetector))},_disableGestureHandling:function(){this._gestureDetector&&(this._gestureDetector.destroy(),this._gestureDetector=
null)},_addGestureHandlers:function(a){a.add([m.tapmove({options:{numTaps:0,button:q.RIGHT},callbacks:{began:d.hitch(this,function(a,b){var c=a.srcEvent;null!==this._viewModel.getOutputWrapperFromElement(c.target)&&e.stop(c)})}}),m.tapmove({options:{numTaps:0,button:q.LEFT},callbacks:{began:d.hitch(this,function(a,b){var c=a.srcEvent;null!==this._viewModel.getOutputWrapperFromElement(c.target)&&"A"===c.target.tagName&&e.stop(c)})}})])},_onNodeChange:function(a){var b;if(a.type===u.MERGE_NODE&&(b=
this.getOutputsForNode(a.node))&&0<b.length){this._cacheOutputs(b);var c=this.getOutputsForNode(a.newNode);c?(c=b.concat(c),this._outputDivs[a.newNode.uid]=c):this._outputDivs[a.newNode.uid]=b;this._outputDivs[a.node.uid]=null}if(a.type===u.SPLIT_NODE&&1===a.lineStartOrEnd&&(b=this.getOutputsForNode(a.node))&&0<b.length)this._outputDivs[a.newNode.uid]=b,this._outputDivs[a.node.uid]=null;a.type===u.DELETE_NODE&&(b=this.getOutputsForNode(a.node))&&0<b.length&&this._deletedNodes.push(a.node)},_handleOnDocumentChanged:function(a){0<
this._deletedNodes.length?(this._deletedNodes=[],this.layout(this._viewModel,!1)):t.hasEventType(a,s.FORMAT_CHANGE_EVENT)&&this.layout(this._viewModel,!1)},_handleOnDocumentReset:function(){this._enabled&&(this._disableGestureHandling(),this._enableGestureHandling())},_removeOutputs:function(){var a=r.getCodeLineNodes(this._internalDocument),b;for(b=0;b<a.length;b+=1){var c=a[b];this.getOutputsForNode(c).length&&this._clearOutput(c)}},_clearOutput:function(a){this._outputDivs[a.uid]=null;this._view.layoutNode(a)},
_updateLineMap:function(){this._lineMap={};this._viewModel.getRegions().forEach(function(a){var b=this._findLastLineNode(a.positions);b&&a.positions.forEach(function(a){a=a.getNode();this._lineMap[a.uid]=b},this)},this)},_updateOutputs:function(a,b){var c={};Object.keys(this._outputDivs).forEach(function(a){c[a]=this._outputDivs[a]},this);this._outputDivs=this._buildOutputMap();var f=r.getCodeLineNodes(this._internalDocument).filter(function(a){return b&&this._hasVisibleOutputs(a)||this._areOutputsForLineDifferent(a,
c,this._outputDivs)},this);f.forEach(function(a){this._view.refreshNode(a)},this);a&&this._fadeInOutputs(f)},_buildOutputMap:function(){var a={},b=0;this._viewModel.getOutputDivs().forEach(function(c){var f=this._findNodeToDisplayOutput(c);f&&(c.setAttribute("data-testid","output_"+b),b++,a[f.uid]||(a[f.uid]=[]),a[f.uid].push(c))},this);return a},_findNodeToDisplayOutput:function(a){var b,c=this._viewModel.getOutputFromOutputDiv(a);if(this._syntaxErrorHandler.isSyntaxError(c))return b=c.codeLinePositions[c.codeLinePositions.length-
1].getNode(),r.isCodeContainer(b,!0)?b:null;for(a=c.codeLinePositions.length-1;0<=a;a--)if(b=c.codeLinePositions[a].getNode(),b=this._lineMap[b.uid])return b;return null},_areOutputsForLineDifferent:function(a,b,c){a=a.uid;b=b[a]||[];var f=c[a]||[];return b.length!==f.length?!0:!b.every(function(a,b){return a===f[b]})},_hasVisibleOutputs:function(a){return 0<(this._outputDivs[a.uid]||[]).length},_fadeInOutputs:function(b){b=this._getOutputsToAnimateByLines(b);b.forEach(function(b){a.set(b,"opacity",
"0")});b=b.map(function(a){return g.fadeIn({node:a})},this);f.combine(b).play()},_getOutputsToAnimateByLines:function(a){var b=[];a.forEach(function(a){a=this.getOutputsForNode(a);b=b.concat(this._getOutputsToAnimateByElements(a))},this);return b},_getOutputsToAnimateByElements:function(a){var b=this._getAnimationBuffer();return a.filter(function(a){return!this._view.isElementOutOfView(a,b)},this)},_getAnimationBuffer:function(){var a=this._view.getDomTargetPosition();return{left:0,right:0,top:a.clientHeight/
2,bottom:a.clientHeight/2}},_findLastLineNode:function(a){var b,c;for(b=a.length-1;0<=b;b--)if(c=a[b].getNode(),r.isCodeContainer(c,!0))return c;return null},startupOutputsForNode:function(a){this.getOutputsForNode(a).forEach(function(a){(a=this._viewModel.getOutputFromOutputDiv(a))&&a.startup()},this)},getOutputsForNode:function(a){return!this.isEnabled()?[]:this._outputDivs[a.uid]||[]},_handleMouseUp:function(a){l.isMiddle(a)&&this._focusService.setFocus()},destroy:function(){this._removeOutputs(!1);
this._view.onLayoutChange(this._cursor.position);this._disableGestureHandling();b.destroy(this._cacheDiv)},destroyView:function(){this.disable()}})})},"MW/rtc/plugins/embeddedoutputs/view/AbstractView":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,e){return h(e,{ACTION_ID:"actionId",ACTION_ID_NO_ANIMATION:"actionIdNoAnimation",BUTTON_CSS_CLASS:"buttonClass",DATATEST_ID:"dataTestId",TOOLTIP_MESSAGE:"tooltipMessage",constructor:function(e,d){this._rtcView=e;this._cursor=
d},setup:function(){},destroy:function(){},enable:function(){throw Error("Unimplemented API: enable");},disable:function(){throw Error("Unimplemented API: disable");},onOutputClicked:function(e){},getName:function(){throw Error("Unimplemented API: getName");},layout:function(){throw Error("Unimplemented API: layout");},outputStyleChanged:function(e){this.redrawRTCView(!1)},redrawRTCView:function(e){this._rtcView.onLayoutChange(e?this._cursor.position:null)},destroyView:function(){}})})},"MW/rtc/plugins/embeddedoutputs/view/inline/LineWithOutputLayouter":function(){define(["dojo/_base/declare",
"dojo/dom-class","dojo/dom-construct","MW/rtc/nodes/inner/LineNode","MW/rtc/plugins/view/layoutmanager/layouters/LineLayouter"],function(h,e,g,d,c){return h(c,{constructor:function(b,a,c){this._inlineView=c},getApplicableNodeClass:function(){return d},layout:function(b,a){this._cacheOutput(a);var c=this.inherited(arguments);if(!c)return null;var d=g.create("div",{"class":"inlineWrapper"});g.place(c,d,"last");if((c=this._getOutputDivs(a))&&0<c.length)c=this._getOutputBox(c),d=this._updateOutputs(d,
c);return d},refresh:function(b,a,c){this._cacheOutput(a);this.inherited(arguments);var d=c.parentElement,g=this._getOutputDivs(a);if(g&&0<g.length){var g=this._getOutputBox(g),h=this._isElementOutputParagraph(d.lastChild);this._updateOutputs(d,g,h);this._inlineView.startupOutputsForNode(a)}else e.remove(d,"outputs");return null},_cacheOutput:function(b){if((b=b.box)&&b.lastChild)b=this._getLastChildOfParent(b),this._isElementOutputParagraph(b)&&this._inlineView.cacheOutput(b)},_getLastChildOfParent:function(b){return b.parentElement.lastChild},
_isElementOutputParagraph:function(b){return 0<=b.className.indexOf("outputParagraph")},_getOutputDivs:function(b){return this._inlineView.getOutputsForNode(b)},_getOutputBox:function(b){var a=g.create("div",{"class":"outputParagraph"}),c;for(c=0;c<b.length;c+=1)g.place(b[c],a,"last");return a},_updateOutputs:function(b,a,c){e.add(b,"outputs");c?b.replaceChild(b.lastChild,a):g.place(a,b,"last");return b}})})},"MW/rtc/plugins/view/layoutmanager/layouters/LineLayouter":function(){define(["dojo/_base/declare",
"MW/rtc/model/Range","MW/rtc/nodes/inner/LineNode","MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter"],function(h,e,g,d){return h(d,{constructor:function(c,b){this._layerViewModel=c;this._hiddenNodeModel=b},getApplicableNodeClass:function(){return g},layout:function(c,b){return this._hiddenNodeModel.isHidden(b)?(c.removeAndDisconnectNode(b),null):c.layoutInto(b,"div",{"class":this._getCSSStyle(c,b)})},refresh:function(c,b,a){a.className=this._getCSSStyle(c,b);return null},_getCSSStyle:function(c,
b){var a="lineNode mwRichTextComponentLine",f=new e(b.startPosition(),b.endPosition()),f=this._layerViewModel.getLayerDecoratorsLineNodeCSSForRange(f);0<f.length&&(a+=" "+f);c.fixedSize&&(a+=" plainTextFixedSize");b.readOnly&&(a+=" readonly");b.cssClass&&(a+=" "+b.cssClass);return a}})})},"MW/rtc/plugins/embeddedoutputs/view/onright/OnrightViewProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./OnrightView"],function(h,e,g){return h(e,{requires:function(){return{createInstance:"rtc.view rtc.cursor rtc.cursor.view rtc.focusservice rtc.actionservice rtc.contextmenu.generator rtc.embeddedoutputs.statehandler rtc.internaldocument rtc.cursorcontroller rtc.embeddedoutputs.splitterpositionmodel rtc.bordercontainer".split(" ")}},
createInstance:function(d,c,b,a,f,e,h,n,p,m,q){return new g(d,c,b,a,f,e,h,n,p,m,q)}})})},"MW/rtc/plugins/embeddedoutputs/view/onright/OnrightView":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-construct dojo/dom-class dojo/i18n!l10n/nls/actions dojo/mouse MW/rtc/plugins/embeddedoutputs/EmbeddedOutputsContextMenuModel MW/rtc/plugins/embeddedoutputs/view/AbstractView MW/rtc/plugins/embeddedoutputs/view/EmbeddedOutputsViewStateEnum MW/rtc/plugins/embeddedoutputs/view/RightPanel ./AlignmentDisabler ./AlignmentManager ./CurrentElementManager ./SplitterPositionController".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r){return h(k,{_VIEW_STATE_NAME:l.ON_RIGHT_VIEW_STATE,ACTION_ID:"rtc_on_right_view",ACTION_ID_NO_ANIMATION:"_rtc_on_right_view_no_animation",_MIN_THRESHOLD:5,_MAX_THRESHOLD:95,BUTTON_CSS_CLASS:"onright",DATATEST_ID:"outputsOnRightButton",TOOLTIP_MESSAGE:'\x3cdiv data-testid\x3d"onRightTooltip"\x3e'+b.showOnRight+"\x3c/div\x3e",constructor:function(a,b,c,f,d,h,k,l,n,m,p){this._rtcView=a;this._cursor=b;this._cursorView=c;this._focusService=f;this._actionService=
d;this._contextMenuGenerator=h;this._stateHandler=k;this._internalDocument=l;this._cursorController=n;this._splitterPositionModel=m;this._parentBorderContainer=p;this._rightClickedOutput=null;this.own(g.after(h,"onOpen",e.hitch(this,"_handleContextMenuOpen"),!0));this.own(g.after(h,"onClose",e.hitch(this,"_handleContextMenuClose")))},setup:function(a,b,c){this._viewModel=a;this._scrollableOutputStyler=b;this._splitterPositionController=new r(this._splitterPositionModel,this._parentBorderContainer,
c);this._rightPanel=new n(this._parentBorderContainer,this._splitterPositionController,this._splitterPositionModel);this._outputScrollPane=this._rightPanel.getScrollPane();this._outputScrollPane.addEventListener("click",e.hitch(this,"_setFocus"));this._outputScrollPane.addEventListener("mouseup",e.hitch(this,"_handleMouseUp"));this._currentElementManager=new q(this._rtcView,this._viewModel,this._cursor,this._cursorView,this._actionService);this.own(this._currentElementManager);this._alignmentManager=
new m(this._rtcView,this._viewModel,this._cursor,this._cursorView,this._rightPanel,this._actionService,this._internalDocument);this.own(this._alignmentManager);this._alignmentDisabler=new p(this._stateHandler,this._alignmentManager);this.own(this._alignmentDisabler);this.own(g.after(this._alignmentManager,"onAlign",e.hitch(this,"onAlign")));this._embeddedOutputsContextModel=new f(this._actionService);this._contextMenuGenerator.createContextMenu(this._outputScrollPane,this._embeddedOutputsContextModel)},
_setFocus:function(){this._focusService.setFocus()},outputStyleChanged:function(a){this.align(a)},registerCurrentOutputService:function(a){this._currentElementManager.registerCurrentOutputService(a)},onAlign:function(){this._scrollableOutputStyler.layout()},enable:function(a){this._currentElementManager.enable();a=this._rightPanel.show(a);this._alignmentManager.enable();return a},disable:function(a){this._currentElementManager.disable();this._alignmentManager.disable();return this._rightPanel.hide(a)},
getName:function(){return this._VIEW_STATE_NAME},createOutputDivsFromOutputs:function(a){var b=d.create("div",{className:"rightPaneElement eoOutputWrapper"});a=e.hitch(this,"_handleClick",a[a.length-1]);b.addEventListener("click",a);return b},_handleClick:function(b,c){!a.isRight(c)&&!(c.target&&"A"===c.target.tagName)&&(this._cursor.hasSelection()&&this._cursor.releaseAnchor(),this._alignmentManager.isEnabled()?(this._alignmentManager.disable(),this._cursorController.clearSelection(),this._cursor.setPosition(b.getNode(),
0,!1),this.onOutputClicked(c.target),this._scrollPositionToOutput(b,c.currentTarget)||this._alignmentManager.enable()):(this._cursor.setPosition(b.getNode(),0,!1),this.onOutputClicked(c.target)))},_handleMouseUp:function(b){a.isMiddle(b)&&this._focusService.setFocus()},_scrollPositionToOutput:function(a,b){if(this._rtcView.isNodeInView(a.getNode()))return!1;this._clickAspect&&(this._clickAspect.remove(),this._clickAspect=null);this._clickAspect=g.after(this._rtcView,"onScroll",e.hitch(this,function(){this._alignmentManager.enable();
this._clickAspect.remove();this._clickAspect=null}));var c=Math.max(Math.min(this._getOutputsPercent(b),this._MAX_THRESHOLD),this._MIN_THRESHOLD);this._rtcView.scrollNodeToPercent(a.getNode(),c);return!0},_getOutputsPercent:function(a){var b=this._rightPanel.getScrollPane().getBoundingClientRect();return 100*(a.getBoundingClientRect().top/b.height)},_handleContextMenuOpen:function(a){if(a=this._viewModel.getOutputWrapperFromElement(a))this._rightClickedOutput=a,c.add(a,"rightClicked")},_handleContextMenuClose:function(){this._rightClickedOutput&&
(c.remove(this._rightClickedOutput,"rightClicked"),this._rightClickedOutput=null)},layout:function(a,b,c,f){if(!c){var e=d.create("span",{className:"outputContentPane"});a.getOutputDivs().forEach(function(a,b){a.setAttribute("data-testid","output_"+b);d.place(a,e,"last")},this);this._rightPanel.replaceContent(e);a.startupOutputs();this._alignmentManager.layout();this.redrawRTCView(f)}},align:function(a){a?this._alignmentManager.checkExtraWhiteSpace():this._alignmentManager.layout()},destroy:function(){this._splitterPositionController.destroy();
this._rightPanel.destroy();this._embeddedOutputsContextModel=this._outputScrollPane=null},destroyView:function(){this.destroy()}})})},"MW/rtc/plugins/embeddedoutputs/EmbeddedOutputsContextMenuModel":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/contextmenu/ContextMenuModel"],function(h,e,g,d){return h(d,{constructor:function(c){this._groupActionsMap={CopyOutput:["rtc_copy_output","rtc_copy_all_output"],ClearOutput:["rtc_clear_all_output"],Align:["rtc_alignment_toggle"],
ModeInteraction:"figure_zoom_in figure_zoom_out figure_reset_mode figure_rotate_xy figure_rotate_xz figure_rotate_yz figure_reset_rotatemode".split(" ")};this._groupList=["ModeInteraction","CopyOutput","ClearOutput","Align"];this._actionService=c},getGroups:function(){return this._groupList},getActions:function(c){c=this._groupActionsMap[c];if(!c)return[];var b=[];c.forEach(function(a){(a=this._getActionInfo(a))&&b.push(a)},this);return b},_getActionInfo:function(c){var b=this._actionService.getAction(c),
a=null;if(b){var f=b.text||b.description;if(void 0===f)return a;a={id:c,label:f,shortcut:b.shortcut,callback:e.hitch(this._actionService,"executeAction",c,{}),enabled:b.enabled}}return a}})})},"MW/rtc/plugins/embeddedoutputs/view/RightPanel":function(){define("dojo/_base/declare dojo/_base/fx dojo/dom-construct dojo/dom-style dojo/on dijit/layout/ContentPane mw-log/Log ./SplitterMixin".split(" "),function(h,e,g,d,c,b,a,f){return h(null,{_PLACEMENT_CONFIG:{hasSplitter:!0,isResizable:!0,isProportional:!0,
isCollapsible:!1,region:"right",minSize:10,proportion:null},constructor:function(a,c,f){this._aspectHandles=[];this._hidden=!1;this._outputScrollPane=g.create("div",{className:"outputScrollPane mwDoNotApplyCustomScrollbarCSS"});this._setDataTestId(this._outputScrollPane,"rtc_outputScrollPane");this._parentBorderContainer=a;this._splitterPositionModel=f;this._splitterPositionController=c;this._contentPanel=new b({className:"outputsOnRight",content:this._outputScrollPane});this._initializeAndSetupBorderContainer()},
_initializeAndSetupBorderContainer:function(){f.setup(this._parentBorderContainer);a.assert(this._parentBorderContainer,"BorderContainer should have been constructed");a.assert(!this._parentBorderContainer.getChildInRegion(this._PLACEMENT_CONFIG.region),"There should have been no child placed here");this._parentBorderContainer.getChildInRegion(this._PLACEMENT_CONFIG.region)||(this._parentBorderContainer.installConnections(),this._parentBorderContainer.hoverOverSplitter(this._PLACEMENT_CONFIG.region),
this._splitterPositionController.addContentPanel(this._PLACEMENT_CONFIG,this._contentPanel))},getScrollPane:function(){return this._outputScrollPane},getContentPane:function(){return this._contentPanel.domNode},canScroll:function(){return this._outputScrollPane.scrollHeight>this._outputScrollPane.clientHeight},replaceContent:function(a){g.place(a,this._outputScrollPane,"only");this.contentChanged()},contentChanged:function(){},onShow:function(){},onHide:function(){},show:function(a){var b=this._splitterPositionModel.getRightPanelProportion();
if(a)return d.set(this.getContentPane(),"opacity","0"),b=this._parentBorderContainer.getDerivedRightProportion(),this._parentBorderContainer.addWithProperties(this._contentPanel,this._PLACEMENT_CONFIG),this._parentBorderContainer.setProportion("right",b),this.onShow(),e.fadeIn({node:this.getContentPane()}).play();d.set(this.getContentPane(),"opacity","1");b=this._parentBorderContainer.getDerivedRightProportion();this._parentBorderContainer.addWithProperties(this._contentPanel,this._PLACEMENT_CONFIG);
this._parentBorderContainer.setProportion("right",b);this.onShow();return[]},hide:function(a){if(a){var b=this;this._fadeAnim=e.fadeOut({node:this.getContentPane()}).play();c(this._fadeAnim,"End",function(){g.empty(b._outputScrollPane)});this._parentBorderContainer.removeChild(this._contentPanel);this.onHide();return this._fadeAnim}d.set(this.getContentPane(),"opacity","0");g.empty(this._outputScrollPane);this._parentBorderContainer.removeChild(this._contentPanel);this.onHide();return[]},destroy:function(){a.assert(this._parentBorderContainer,
"BorderContainer should have been constructed");this._parentBorderContainer.uninstallConnections();this._contentPanel&&this._contentPanel.content.parentElement&&this._parentBorderContainer.removeChild(this._contentPanel);g.destroy(this._outputScrollPane);this._contentPanel=null;this._aspectHandles.forEach(function(a){a.remove()})},_setDataTestId:function(a,b){a.setAttribute("data-testid",b)}})})},"MW/rtc/plugins/embeddedoutputs/view/SplitterMixin":function(){define(["dojo/_base/lang","dojo/aspect",
"dojo/dom-class","dojo/dom-style","dojo/mouse"],function(h,e,g,d,c){return{_MIN_RIGHT_WIDTH:50,installConnections:function(){this._aspectHandles.push(e.after(this,"_setupChild",h.hitch(this,this._setupSplitterLayout)));this._aspectHandles.push(e.before(this,"_beginSplitterDrag",h.hitch(this,this._makeSplitterVisible)));this._aspectHandles.push(e.before(this,"_endSplitterDrag",h.hitch(this,this._updateAfterSplitterDrag)));this._aspectHandles.push(e.after(this,"setFreeDimension",h.hitch(this,this.setDims)));
this._aspectHandles.push(e.after(this,"addChild",h.hitch(this,this._updateAfterChildAdded),!0))},_updateAfterChildAdded:function(b){b=b.region;this._initializedRegions[b]||(this._updateMaxWidthAndCache(),this._initializedRegions[b]=!0)},uninstallConnections:function(){this._aspectHandles.forEach(function(b){b.remove()})},setup:function(b){this._aspectHandles=[];this._maxCenterWidth=null;this._initializedRegions={};h.mixin(b,this);g.add(b.domNode,"borderContainerWithSplitter")},hoverOverSplitter:function(b){this._splitterToMakeInvisible=
b},_setupSplitterLayout:function(){this.splitter=this._borderInfo[this._splitterToMakeInvisible]},_makeSplitterVisible:function(b,a){(c.isLeft(a)||c.isRight(a))&&g.add(this.splitter.splitterNode,"visibleSplitter")},_updateAfterSplitterDrag:function(){this._makeSplitterInvisible();this._updateMaxWidthAndCache()},_makeSplitterInvisible:function(){g.remove(this.splitter.splitterNode,"visibleSplitter")},cache:function(){var b=this.getChildInRegion("center"),a=this.getChildInRegion("right");b&&(this._centerWidth=
d.get(b.domNode,"width"));a&&(this._rightWidth=d.get(a.domNode,"width"))},setDims:function(){if(!this._centerWidth||!this._rightWidth)return this.cache(),null;var b=this.getChildInRegion("center"),a=this.getChildInRegion("right");if(!b||!a)return null;b=d.get(b.domNode,"width");a=d.get(a.domNode,"width");a=b+a;b=this._centerWidth+this._rightWidth-a;if(0===b)return null;if(0<b)b=Math.max(this._MIN_RIGHT_WIDTH,this._rightWidth-b);else{if(!this._maxCenterWidth)return;b=Math.min(this._maxCenterWidth,
this._centerWidth+-1*b);b=a-b}var c=d.get(this.domNode,"width");this.setProportion("right",b/c);this.cache();return{center:a-b,right:b}},_updateMaxWidthAndCache:function(){var b=this.getChildInRegion("center"),a=this.getChildInRegion("right");b&&a&&(b=d.get(b.domNode,"width"),a=d.get(a.domNode,"width"),b&&a&&(this._maxCenterWidth=b,this.cache()))},getDerivedRightProportion:function(){var b=this.getChildInRegion("left"),a=b?d.get(b.domNode,"width"):0,b=d.get(this.domNode,"width"),a=b-(a+this._centerWidth);
a<this._MIN_RIGHT_WIDTH&&(a=this._MIN_RIGHT_WIDTH);return a/b}}})},"MW/rtc/plugins/embeddedoutputs/view/onright/AlignmentDisabler":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/debug/DebugServicesFactory"],function(h,e,g,d){return h(null,{constructor:function(c,b){this._stateHandler=c;this._alignmentManager=b;this._debugServices=d.getInstance();this._aspectHandles=[];this._aspectHandles.push(g.after(this._stateHandler,"stateChanged",e.hitch(this,"_handleStateChange"),
!0));this._aspectHandles.push(g.after(this._debugServices,"onDBStop",e.hitch(this,"_handleDBStop"),!0));this._aspectHandles.push(g.after(this._debugServices,"onDBCont",e.hitch(this,"_handleDBCont"),!0));this._isBeingDisabled=!1},destroy:function(){this._aspectHandles.forEach(function(c){c.remove()});this._aspectHandles=[]},_handleDBStop:function(){this._isBeingDisabled&&this._enableAlignment()},_handleDBCont:function(){this._isBeingDisabled&&this._disableAlignment()},_handleStateChange:function(c){c===
this._stateHandler.CHANGE_TYPE_ENUM.EVAL_INITIALIZED?this._handleEvaluationStarted():c===this._stateHandler.CHANGE_TYPE_ENUM.EVAL_COMPLETE&&this._handleEvaluationCompleted()},_handleEvaluationStarted:function(){this._isBeingDisabled=!0;this._disableAlignment()},_disableAlignment:function(){this._alignmentManager.setEnablement({alignOnScroll:!1,autoScroll:!1})},_handleEvaluationCompleted:function(){this._isBeingDisabled=!1;this._enableAlignment()},_enableAlignment:function(){this._isBeingDisabled=
!0;this._alignmentManager.setEnablement({alignOnScroll:!0,autoScroll:!0});this._alignmentManager.isEnabled()&&this._alignmentManager.layout()}})})},"MW/rtc/plugins/embeddedoutputs/view/onright/AlignmentManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-construct dojo/dom-style dojo/i18n!l10n/nls/actions dojo/on dojo/touch MW/rtc/events/MouseEventUtil MW/rtc/view/ViewEventUtilities mw-utils/Utils ./AlignmentUtils".split(" "),function(h,e,g,d,c,b,a,f,k,l,n,p){return h(null,
{_TOP_BOUND:0,_BOTTOM_BOUND:100,_ACTION_ID:"rtc_alignment_toggle",constructor:function(c,d,h,l,n,p,v){this._rtcView=c;this._viewModel=d;this._cursor=h;this._cursorView=l;this._outputScrollPane=n.getScrollPane();this._aspectHandles=[];this._actionService=p;this._internalDocument=v;this._userEnabledState=this._allowed=!0;this._enablement={alignOnLayout:!0,alignOnViewChange:!0,alignOnScroll:!0,autoScroll:!0};this._bottomPad=this._topPad=null;this._initializePadding();this._lastAlignedPercentage=0;this._alignStack=
[];this._scrollPercent=0;this._updateScrollData();this._resetEquation();this._overScrollListener=a(this._rtcView.getDomtarget(),k.MOUSEWHEEL,e.hitch(this,"_scroll"),!0);this._lastCursorLine=-1;this._aspectHandles.push(g.after(this._cursorView,"onChange",e.hitch(this,"_updateOnLineChange")));this._aspectHandles.push(a(this._rtcView.getDomtarget(),f.release,e.hitch(this,"_updateOnMouseUp")));this._aspectHandles.push(g.after(this._rtcView,"onViewUpdated",e.hitch(this,"_updateOnViewChange"),!0));c=[{id:this._ACTION_ID,
enabled:!0,text:b.disableAlignment,callback:e.hitch(this,"_toggle")}];this._actionService.loadActions(c)},_updateScrollData:function(){var a=this._rtcView.getDomTargetPosition();this._scrollPercent=100*a.scrollTop/(a.scrollHeight-a.clientHeight)||0},_toggle:function(){this._userEnabledState=!this._userEnabledState;this._updateEnabledState()},_updateEnabledState:function(){var a;this._userEnabledState?(a=b.disableAlignment,this.layout()):(a=b.enableAlignment,p.removeAllAlignment(this._viewModel.getOutputDivs(),
this._getAlignmentData()));this._actionService.updateAction(this._ACTION_ID,{text:a})},destroy:function(){this._aspectHandles.forEach(function(a){a.remove()});this._aspectHandles=[];this._actionService.removeAction(this._ACTION_ID);this._overScrollListener.remove();this._equation=this._overScrollListener=null;this._alignStack=[]},disable:function(){this._allowed=!1},enable:function(){this._allowed=!0},isEnabled:function(){return this._allowed&&this._userEnabledState},setEnablement:function(a){e.mixin(this._enablement,
a)},_scroll:function(a){if(!this._dontAlign()&&this._enablement.alignOnScroll&&k.isVerticalScroll(a)){var b=k.getVerticalScrollDistance(a),c=0!==this._alignStack.length,f=this._rtcView.getDomTargetPosition(),d=100===this._scrollPercent||f.clientHeight===f.scrollHeight,f=d&&0>b,e=0===this._scrollPercent&&0<b,g=0===this._scrollPercent&&0>b||d&&0<b,h=f||e;if(c||h)d=!0,c&&g&&!h?d=b=this._reverseOverscroll():b=this._overscroll(b,f,e),d&&(this._stopScrollEvent(a),this._scrollHorizontal(a)),b&&(this._lastAlignedPercentage=
this._alignStack[this._alignStack.length-1],this.updateAlignment(this._rtcView.getPositionAtPercent(this._lastAlignedPercentage)))}},_reverseOverscroll:function(){this._alignStack.pop();return 0!==this._alignStack.length},_overscroll:function(a,b,c){var f=this._rtcView.getDomTargetPosition();a=Math.min(Math.max(this._lastAlignedPercentage+-100*a/(f.scrollHeight-f.clientHeight),0),100);var d;if(b){d=this._getNextUnalignedBelow(this._lastAlignedPercentage);if(!d)return!1;d=Math.max(a,d)}if(c){d=this._getNextUnalignedAbove(this._lastAlignedPercentage);
if(!d)return!1;d=Math.min(a,d)}if(this._alignStack[this._alignStack.length-1]===d)return!1;0===this._alignStack.length&&this._alignStack.push(this._lastAlignedPercentage);this._alignStack.push(d);return!0},_stopScrollEvent:function(a){a.stopPropagation();a.preventDefault()},_scrollHorizontal:function(a){a=k.getHorizontalScrollDistance(a);0!==a&&this._rtcView.setScrollLeft(this._rtcView.getDomTargetPosition().scrollLeft-a)},_getNextUnalignedAbove:function(a){for(a=this._rtcView.getPositionAtPercent(a).getNode().rootContainer().previousSibling();a;){if(!this._nodeIsAligned(a))return this._rtcView.getNodePercentScrolled(a,
!0);a=a.previousSibling()}},_getNextUnalignedBelow:function(a){for(a=this._rtcView.getPositionAtPercent(a).getNode().rootContainer().nextSibling();a;){if(!this._nodeIsAligned(a))return this._rtcView.getNodePercentScrolled(a,!0);a=a.nextSibling()}},_nodeIsAligned:function(a){var b=this._viewModel.getOutputDivsForNode(a);if(0===b.length)return!0;var c=this._getAlignmentData().rtcDomTargetData.scrollTop;a={top:a.getTop()-c,bottom:a.getBottom()-c};return p.areOutputsAligned(a,b,this._outputScrollPane,
!0)},_resetEquation:function(){this._equation=p.generateLinearStepwiseFunction(this._scrollPercent,this._lastAlignedPercentage,this._rtcView.getDomTargetPosition());this._alignStack=[]},layout:function(){this._restorePadding();if(!this._dontAlign()&&this._enablement.alignOnLayout){var a=this._outputScrollPane.scrollTop;this.updateAlignment(this._rtcView.getPositionAtPercent(this._lastAlignedPercentage));this._enablement.autoScroll||(this._outputScrollPane.scrollTop=a)}},_updateOnLineChange:function(){var a=
this._cursor.getLineColumn().line;this._lastCursorLine!==a&&(this._lastCursorLine=a,!this._dontAlign()&&this._viewModel.doesNodeHaveOutputs(this._cursor.getNode().rootContainer())&&(this._updateScrollData(),this._lastAlignedPercentage=this._rtcView.getLinePercentScrolled(this._lastCursorLine,!0),this._resetEquation(),this.updateAlignment(this._cursor)))},_updateOnMouseUp:function(){this._dontAlign()||(this._lastCursorLine=this._cursor.getLineColumn().line,this._updateScrollData(),this._lastAlignedPercentage=
this._rtcView.getLinePercentScrolled(this._lastCursorLine,!0),this._resetEquation(),this.updateAlignment(this._cursor))},_updateOnViewChange:function(a){this._updateScrollData();if(!this._dontAlign()&&this._enablement.alignOnViewChange&&(!l.hasSizingEvent(a)||l.isOnlyScrollHeightChange(a)))if(!l.isOnlyHorizontalEvents(a)&&(l.hasVerticalScrollEvent(a)||l.hasHeightEvent(a)||l.hasLayoutEvent(a))){var b=null;l.hasVerticalScrollEvent(a)?(this._lastAlignedPercentage=this._equation(this._scrollPercent),
b=this._rtcView.getPositionAtPercent(this._lastAlignedPercentage)):(this._cursor.isInVisualBounds(this._TOP_BOUND,this._BOTTOM_BOUND)?(b=this._cursor,a=this._rtcView.getLinePercentScrolled(this._cursor.getLineColumn().line,!0)):(b=this._rtcView.getPositionAtPercent(this._lastAlignedPercentage),a=this._lastAlignedPercentage),this._lastAlignedPercentage=a,this._resetEquation());a=this._outputScrollPane.scrollTop;this.updateAlignment(b);this._enablement.autoScroll||(this._outputScrollPane.scrollTop=
a)}},_dontAlign:function(){return!this.isEnabled()||!this._viewModel.hasOutputs()},_initializePadding:function(){this._topPad=d.create("div",{className:"outputTopPad"});this._bottomPad=d.create("div",{className:"outputBottomPad"})},_restorePadding:function(){this._outputScrollPane.children[0]&&(d.place(this._topPad,this._outputScrollPane.children[0],"first"),d.place(this._bottomPad,this._outputScrollPane.children[0],"last"))},updateAlignment:function(a){a=a.getLineColumn().line-1;var b=this._getNodeWithOutputToAlign(a);
if(b){a=this._internalDocument.getLineNumber(b);var c=p.getOutputs(b,a,this._viewModel,this._outputScrollPane);c.outputsAbove=c.outputsAbove.reverse();p.clearMargins(c.comingledOutputs);p.clearInnerMargins(c.currentOutputs);var f=this._getAlignmentData(),d=f.rtcDomTargetData.scrollTop,b={top:b.getTop()-d,bottom:b.getBottom()-d};p.alignCurrentTarget(b,c,!1,f);this._updateAlignment(a,c);this.checkExtraWhiteSpace();this.onAlign()}},_getNodeWithOutputToAlign:function(a){var b=this._getOnscreenNodeWithOutput(a);
b||(b=this._viewModel.getClosestNodeWithOutputToLineNumber(a));return b},_getOnscreenNodeWithOutput:function(a){var b=this._rtcView.getFirstVisibleLineNumber()-1,c=this._rtcView.getLastVisibleLineNumber()-1;return this._viewModel.getClosestNodeWithOutputToLineNumber(a,b,c)},checkExtraWhiteSpace:function(){var a,b=this._outputScrollPane.scrollTop;a=b+this._outputScrollPane.clientHeight;var c=this._bottomPad.clientHeight,f=this._bottomPad.offsetTop+c;f>a&&(a=Math.max(0,c-(f-a)),this._setBottomPadHeight(a));
c=this._topPad.clientHeight;a=this._topPad.offsetTop;a<b&&(a=Math.max(0,c-(b-a)),c-=a,this._setTopPadHeight(a),this._outputScrollPane.scrollTop=b-c)},_setTopPadHeight:function(a){c.set(this._topPad,"height",a+"px")},_setBottomPadHeight:function(a){c.set(this._bottomPad,"height",a+"px")},onAlign:function(){},_updateAlignment:function(a,b){var c=this._outputScrollPane.scrollTop,f=this._getAlignmentsAboveAndBelowCurrent(a),d=f.alignmentsAbove,f=f.alignmentsBelow,e=b.currentOutputs.concat(b.comingledOutputs,
b.dontAlign),e=p.alignTargetsBelow(f,b.outputsBelow,e,this._getAlignmentData());p.alignTargetsAbove(d,b.outputsAbove,e,this._getAlignmentData());this._outputScrollPane.scrollTop=c},_getAlignmentsAboveAndBelowCurrent:function(a){var b=this._getAlignmentData().rtcDomTargetData.scrollTop,c=[],f=[];this._internalDocument.root.children.forEach(function(d,e){var g=this._viewModel.getOutputDivsForNode(d),h={target:{top:d.getTop()-b,bottom:d.getBottom()-b},associatedOutputs:g};0!==g.length&&(e<a?c.push(h):
e>a&&f.push(h))},this);return{alignmentsAbove:c,alignmentsBelow:f}},_getAlignmentData:function(){return{topPad:this._topPad,bottomPad:this._bottomPad,outputScrollPane:this._outputScrollPane,rtcDomTargetData:this._rtcView.getDomTargetPosition()}}})})},"MW/rtc/plugins/embeddedoutputs/view/onright/AlignmentUtils":function(){define(["dojo/dom-class","dojo/dom-style","dojo/fx/easing","MW/rtc/plugins/embeddedoutputs/view/ViewModelUtilities","mw-utils/Utils"],function(h,e,g,d,c){return{getOutputs:function(b,
a,f,d){var e=f.getOutputDivsForNode(b),g=this._getViewableOutputs(d),h=e.map(function(a){return g.indexOf(a)}).sort(function(a,b){return a-b});d=g.slice(h[0],h[h.length-1]+1);b=d.filter(function(a){return 0>e.indexOf(a)});d=d.filter(function(a){return 0<=e.indexOf(a)});var m=g.slice(0,h[0]),h=g.slice(h[h.length-1]+1),m=this._removeOutputsBelongingToLineNumber(m,a,f,this._isOnlyAbove),h=this._removeOutputsBelongingToLineNumber(h,a,f,this._isOnlyBelow);a=d.concat(b,m,h);a=c.differenceOfArrays(g,a);
return{outputsAbove:m,outputsBelow:h,comingledOutputs:b,currentOutputs:d,dontAlign:a}},_removeOutputsBelongingToLineNumber:function(b,a,c,d){return b.filter(function(b){b=c.getLineNumbersForOutput(b);return d(b,a)},this)},_isOnlyAbove:function(b,a){b=b.sort(function(a,b){return a-b});return b[b.length-1]<a},_isOnlyBelow:function(b,a){b=b.sort(function(a,b){return a-b});return b[0]>a},_getViewableOutputs:function(b){b=b.children[0].children;b=[].slice.call(b);var a=h.contains(b[0],"outputTopPad"),
c=h.contains(b[b.length-1],"outputBottomPad");a&&(b=b.slice(1));c&&(b=b.slice(0,b.length-1));return b},clearMargins:function(b){b.forEach(function(a){a.style.removeProperty("margin-top");a.style.removeProperty("margin-bottom")})},clearInnerMargins:function(b){if(!(2>b.length)){b[0].style.removeProperty("margin-bottom");b[b.length-1].style.removeProperty("margin-top");for(var a=1;a<b.length-1;a+=1)b[a].style.removeProperty("margin-bottom"),b[a].style.removeProperty("margin-top")}},generateLinearStepwiseFunction:function(b,
a,c){c=100/(100*(c.clientHeight/c.scrollHeight)||0);var d=Math.min(a/b||0,c),e=a-d*b,g=Math.min((100-a)/(100-b)||0,c),h=a-g*b;return function(c){var f,r;if(c<b)f=d,r=e;else if(c>b)f=g,r=h;else return a;return Math.max(Math.min(f*c+r,100),0)}},areOutputsAligned:function(b,a,c,d){b=this._areOutputsAlignedToCode(b,a,c);a=d?this._areOutputsOnScreen(a,c):!0;return b&&a},removeAllAlignment:function(b,a){var c=a.bottomPad;a.topPad.style.height="0px";c.style.height="0px";b.forEach(function(a){a.style.removeProperty("margin-top");
a.style.removeProperty("margin-bottom")})},alignCurrentTarget:function(b,a,c,d){var g=d.outputScrollPane,h=d.rtcDomTargetData,p=d.topPad;d=d.bottomPad;var m=a.currentOutputs,q=a.outputsAbove;a=a.outputsBelow;this._moveMarginUp(m,q,p);this._moveMarginDown(m,a,d);if(this._needToAlign(b,m,g)){var r=g.scrollTop,s=b.bottom-b.top,t=this._getTopAndBottomOfDivList(m);if(t){var u=t.top,v=t.bottom,w=v-u;if(a.length)var x=a[a.length-1];v=Math.max(0,g.offsetHeight-(t.bottom-r)-((x?x.offsetTop+x.offsetHeight:
v)-v));d.style.height=v+"px";t=this._getTopAndBottomOfDivList(m);u=t.top;v=t.bottom;if(v-u>=g.offsetHeight)s=r-u,0!==s&&(0<s?s=this._moveOutputDown(s,m,q,a,g,p,d,!0,!1):0>s&&(s=Math.abs(s),s=this._moveOutputUp(s,m,q,a,g,p,d,!0,!1)),0<s&&this._setScrollTop(u,g,c));else{if(u<r&&(this._moveOutputDown(r-u,m,q,a,g,p,d,!0,!1),this._areOutputsAlignedToCode(b,m,g)))return;r+=g.offsetHeight;h=b.top>h.clientHeight;if(v>r&&!h&&(this._moveOutputUp(v-r,m,q,a,g,p,d,!0,!1),this._areOutputsAlignedToCode(b,m,g)))return;
t=this._getTopAndBottomOfDivList(m);u=t.top;v=t.bottom;w=v-u;r=g.scrollTop;h=b.top;u-=r;x=b.bottom;v-=r;h>u?(s=this._moveOutputDown(s>w?h-u:x-v,m,q,a,g,p,d,!1,!1),this._areOutputsAlignedToCode(b,m,g)||(b=r-s,b=0<b?b:0,this._setScrollTop(b,g,c),m=s-(r-b),0<m&&(q=e.get(p,"height"),p.style.height=m+q+"px"))):(s=Math.abs(s<w?h-u:x-v),s=this._moveOutputUp(s,m,q,a,g,p,d,!1,!1),this._areOutputsAlignedToCode(b,m,g)||(b=r+s,b!==r&&this._setScrollTop(b,g,c),r=g.scrollTop,m=b-r,0<m&&(q=e.get(d,"height"),d.style.height=
m+q+"px",this._setScrollTop(b,g,c))))}}}},alignTargetsBelow:function(b,a,c,d){for(var e,g,h=d.outputScrollPane,m=d.bottomPad,q=0;q<b.length;q++)if(e=b[q].target,d=b[q].associatedOutputs,g=d.length,a=a.slice(g,a.length),0===g){if(0===a.length)break}else c=this._alignTargetBelow(e,d,a,c,m,h);return c},alignTargetsAbove:function(b,a,c,d){for(var e,g,h=d.outputScrollPane,m=d.topPad,q=b.length-1;0<=q;q--)if(e=b[q].target,d=b[q].associatedOutputs,g=d.length,a=a.slice(g,a.length),0===g){if(0===a.length)break}else c=
this._alignTargetAbove(e,d,a,c,m,h)},_alignTargetBelow:function(b,a,f,g,h,n){this._moveMarginDown(a,f,h);if(a.some(function(a){return 0<=g.indexOf(a)})||this._areOutputsAlignedToCode(b,a,n))return g=g.concat(a);var p=d.getHeightOfNodes(a),m=b.top;b=b.bottom;var q=b-m;n=a[0].offsetTop-n.scrollTop;var r=n+p,s=r-n,p=e.get(a[0],"margin-top"),t;m>n?(t=0,t=q>s?m-n:b-r,a[0].style["margin-top"]=p+t+"px",g=g.concat(a),this._removeMarginFromBelow(t,f,a,h)):(t=0,b=Math.max(0,p-(q>s?r-b:n-m)),m=p-b,a[0].style["margin-top"]=
b+"px",(f=c.getFirstUniqueElement(a,f))?(h=e.get(f,"margin-top"),f.style["margin-top"]=h+m+"px"):(f=e.get(h,"height"),h.style.height=f+m+"px"),g=g.concat(a));return g},_alignTargetAbove:function(b,a,f,g,h,n){this._moveMarginUp(a,f,h);if(a.some(function(a){return 0<=g.indexOf(a)})||this._areOutputsAlignedToCode(b,a,n))return g=g.concat(a);var p=d.getHeightOfNodes(a),m=b.top;b=b.bottom;var q=b-m,r=a[0].offsetTop-n.scrollTop,s=r+p;n=e.get(a[0],"margin-bottom");var t;m>r?(t=0,m=Math.max(0,n-(q>p?m-r:
b-s)),p=n-m,a[0].style["margin-bottom"]=m+"px",(f=c.getFirstUniqueElement(a,f))?(h=e.get(f,"margin-bottom"),f.style["margin-bottom"]=h+p+"px"):(f=e.get(h,"height"),h.style.height=f+p+"px"),g=g.concat(a)):(t=0,t=Math.min(q>p?s-b:r-m,this._getAvailableSpaceAbove(f,a,h)),a[0].style["margin-bottom"]=n+t+"px",g=g.concat(a),this._removeMarginFromAbove(t,f,a,h));return g},_moveMarginUp:function(b,a,f){var d=e.get(b[0],"margin-top");0!==d&&(b[0].style.removeProperty("margin-top"),(b=c.getFirstUniqueElement(b,
a))?(f=e.get(b,"margin-bottom"),b.style["margin-bottom"]=f+d+"px"):(b=e.get(f,"height"),f.style.height=b+d+"px"))},_moveMarginDown:function(b,a,f){var d=e.get(b[b.length-1],"margin-bottom");0!==d&&(b[b.length-1].style.removeProperty("margin-bottom"),(b=c.getFirstUniqueElement(b,a))?(f=e.get(b,"margin-top"),b.style["margin-top"]=f+d+"px"):(b=e.get(f,"height"),f.style.height=b+d+"px"))},_moveOutputUp:function(b,a,f,d,g,h,p,m,q){m?this._setScrollTop(g.scrollTop+b,g,q):(d=c.getFirstUniqueElement(a,d))?
(p=e.get(d,"margin-top"),d.style["margin-top"]=p+b+"px"):(d=e.get(p,"height"),p.style.height=d+b+"px");return this._removeMarginFromAbove(b,f,a,h)},_moveOutputDown:function(b,a,f,d,g,h,p,m,q){if(m){h=this._getTopAndBottomOfDivList(a);if(!h)return;this._setScrollTop(h.top-5,g,q)}else(g=c.getFirstUniqueElement(a,f))?(h=e.get(g,"margin-bottom"),g.style["margin-bottom"]=h+b+"px"):(g=e.get(h,"height"),h.style.height=g+b+"px");return this._removeMarginFromBelow(b,d,a,p)},_removeMarginFromAbove:function(b,
a,c,d){return this._removeMarginFrom(b,a,c,d,"margin-bottom","margin-top")},_removeMarginFromBelow:function(b,a,c,d){return this._removeMarginFrom(b,a,c,d,"margin-top","margin-bottom")},_removeMarginFrom:function(b,a,c,d,g,h){for(var p=[],m=0;m<a.length;m++){if(0>=b)return this._setMargins(p,g,h),0;var q=a[m];if(!(0<=c.indexOf(q))){var r=e.get(q,g),s=Math.max(r-b,0);b-=r-s;var t=e.get(q,h),r=Math.max(t-b,0);b-=t-r;q={domNode:q};q[g]=s;q[h]=r;p.push(q)}}this._setMargins(p,g,h);if(0>=b)return 0;a=e.get(d,
"height");c=Math.max(a-b,0);d.style.height=c+"px";return b-(a-c)},_setMargins:function(b,a,c){b.forEach(function(b){b.domNode.style[a]=b[a]+"px";b.domNode.style[c]=b[c]+"px"},this)},_areOutputsAlignedToCode:function(b,a,c){a=this._getTopAndBottomOfDivList(a);if(!a)return!1;var d=c.scrollTop;c=a.top-d;a=a.bottom-d;d=c>=b.top&&a<=b.bottom;return b.top>=c&&b.bottom<=a||d},_getTopAndBottomOfDivList:function(b){return!b||0===b.length?null:{top:b[0].offsetTop,bottom:b[b.length-1].offsetTop+b[b.length-1].offsetHeight}},
_getAvailableSpaceAbove:function(b,a,c){var d=0;c&&(d+=e.get(c,"height"));b.forEach(function(b){-1===a.indexOf(b)&&(d+=e.get(b,"margin-top"),d+=e.get(b,"margin-bottom"))});return d},_needToAlign:function(b,a,c){return!(this._areOutputsAlignedToCode(b,a,c)&&this._areOutputsOnScreen(a,c))},_areOutputsOnScreen:function(b,a){var c=a.scrollTop,d=this._getTopAndBottomOfDivList(b);if(!d)return!1;var e=d.bottom<=c+a.offsetHeight;return d.top>=c&&e},_setScrollTop:function(b,a,c){c?this._animateScrollTop(b,
a):a.scrollTop=b},_animateScrollTop:function(b,a){(new dojo.Animation({curve:[a.scrollTop,b],onAnimate:function(b){a.scrollTop=b},duration:250,easing:g.quadInOut})).play()}}})},"MW/rtc/plugins/embeddedoutputs/view/ViewModelUtilities":function(){define(["dojo/dom-class","MW/rtc/plugins/embeddedoutputs/model/RegionUtilities","MW/rtc/plugins/embeddedoutputs/outputhandlers/error/ErrorOutputProperties","MW/rtc/plugins/embeddedoutputs/outputhandlers/warning/WarningOutputProperties"],function(h,e,g,d){return{filterErrorsAndWarnings:function(c){var b=
{clean:[],errors:[],warnings:[],errorsAndWarnings:[]};if(!c)return b;c.forEach(function(a){this.isErrorOutputDiv(a)?b.errors.push(a):this.isWarningOutputDiv(a)?b.warnings.push(a):b.clean.push(a)},this);b.errorsAndWarnings=b.errors.concat(b.warnings);return b},isErrorOutputDiv:function(c){return h.contains(c,g.CSS_TAG)},isWarningOutputDiv:function(c){return h.contains(c,d.CSS_TAG)},getHeightOfNodes:function(c){if(0===c.length)return 0;var b=c[c.length-1];return b.offsetTop+b.offsetHeight-c[0].offsetTop},
doNodeSetsIntersect:function(c,b){return 0<c.filter(function(a){return-1!=b.indexOf(a)}).length}}})},"MW/rtc/plugins/embeddedoutputs/view/onright/CurrentElementManager":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/aspect dojo/dom-class dojo/query mw-utils/Utils MW/rtc/model/CodeUtilities".split(" "),function(h,e,g,d,c,b,a,f){return h(null,{_LINE_CLASS:"selectedLine",_OUTPUT_CLASS:"selectedOutput",_FOCUSED_CLASS:"focusedOutput",_OUTPUT_START_CLASS:"selectionStart",_OUTPUT_END_CLASS:"selectionEnd",
_OOR_OUTPUT_SELECTOR:".outputsOnRight .selectedOutput",_OOR_FOCUSED_OUTPUT_SELECTOR:".outputsOnRight .focusedOutput",_OOR_ALL_OUTPUTS_SELECTOR:".outputsOnRight .rightPaneElement",_RTC_LINE_SELECTOR:".rtePane .selectedLine",_HIGHLIGHT_ON_HOVER_CLASS:"highlightOnHover",_ACTION_ID:"rtc_current_element_manager_hover_highlighting_toggle",constructor:function(a,b,c,f,d){this._rtcView=a;this._viewModel=b;this._cursor=c;this._cursorView=f;this._actionService=d;this._currentOutputService=null;this._highlightCodeEnabled=
this._highlightOnHoverEnabled=!1;this._currentCursorLineNode=null;this._currentOutputs=[];this._focusedOutput=null;this._isEnabled=!1;this._aspectHandles=[];this._currentOutputServiceHandle=null;this.enable()},registerCurrentOutputService:function(a){this._currentOutputService||(this._currentOutputService=a,this._currentOutputServiceHandle=d.after(this._currentOutputService,"onOutputSelected",g.hitch(this,"_handleOnOutputSelected"),!0))},enable:function(){this._aspectHandles.push(d.after(this._viewModel,
"onModelUpdated",g.hitch(this,"_handleOnModelUpdated")));this._aspectHandles.push(d.after(this._cursorView,"onChange",g.hitch(this,"_handleCursorChange")));this._aspectHandles.push(d.after(this._rtcView,"onVisitNode",g.hitch(this,"_updateCurrentElementOnNodeChange"),!0));this._updateCurrentElementFromCursorPosition();this._isEnabled=!0},disable:function(){this._aspectHandles.forEach(function(a){a.remove()});this._clearAllStyles();this._currentOutputs=[];this._isEnabled=!1},_handleOnOutputSelected:function(a){this._isEnabled&&
((a=a.focusedOutput)&&a.getDomElement().parentElement?this._focusOutput(a.getDomElement().parentElement):this._blurOutput())},_focusOutput:function(a){this._clearAllStyles();this._currentOutputs=[];this._focusedOutput=a;c.add(this._focusedOutput,this._FOCUSED_CLASS)},_blurOutput:function(){this._clearFocusStyles();this._focusedOutput=null;this._updateCurrentElementFromCursorPosition()},_handleOnModelUpdated:function(){this._addSingleOutputHighlightingClass();this._updateCurrentElementFromCursorPosition()},
_handleCursorChange:function(){var a=this._getCursorLineNode();a&&a!==this._currentCursorLineNode&&(this._currentCursorLineNode=a,this._updateCurrentItemSelection())},_updateCurrentElementOnNodeChange:function(a){var b=this._getCursorLineNode();b&&a.some(function(a){if((a=a.rootContainer())&&b.uid===a.uid)return this._currentCursorLineNode=b,!0},this)&&this._updateCurrentItemSelection()},_updateCurrentElementFromCursorPosition:function(){var a=this._getCursorLineNode();a&&(this._currentCursorLineNode=
a,this._updateCurrentItemSelection())},_getCursorLineNode:function(){return!this._cursor.position.isValid()?null:this._cursor.getNode().rootContainer()},destroy:function(){this.disable();this._currentOutputServiceHandle&&(this._currentOutputServiceHandle.remove(),this._currentOutputServiceHandle=null)},_updateCurrentItemSelection:function(){if(f.isCodeContainer(this._currentCursorLineNode)){this._clearCodeStyles();var b=this._viewModel.getOutputDivsForNode(this._currentCursorLineNode),c=a.differenceOfArrays(this._currentOutputs,
b);this._clearOutputStyles(c);if((this._currentOutputs=b)&&0!==b.length)this._setCurrentLineBackground(this._currentCursorLineNode.box),b.forEach(this._setCurrentOutputsBackground,this)}else this._clearAllStyles()},_setCurrentLineBackground:function(a){this._highlightCodeEnabled&&c.add(a,this._LINE_CLASS)},_setCurrentOutputsBackground:function(a,b,f){var d=f[b-1];b=f[b+1];c.toggle(a,this._OUTPUT_START_CLASS,!d||d!==a.previousSibling);c.toggle(a,this._OUTPUT_END_CLASS,!b||b!==a.nextSibling);c.add(a,
this._OUTPUT_CLASS)},_clearAllStyles:function(){this._clearCodeStyles();var a=b(this._OOR_OUTPUT_SELECTOR);a.removeClass(this._OUTPUT_CLASS);a.removeClass(this._OUTPUT_START_CLASS);a.removeClass(this._OUTPUT_END_CLASS);this._clearFocusStyles()},_clearOutputStyles:function(a){a.forEach(function(a){c.remove(a,[this._OUTPUT_CLASS,this._OUTPUT_START_CLASS,this._OUTPUT_END_CLASS])},this);this._clearFocusStyles()},_clearFocusStyles:function(){this._focusedOutput&&c.remove(this._focusedOutput,this._FOCUSED_CLASS)},
_clearCodeStyles:function(){this._highlightCodeEnabled&&b(this._RTC_LINE_SELECTOR).removeClass(this._LINE_CLASS)},_toggleHighlightOnHover:function(){this._highlightOnHoverEnabled?(this._highlightOnHoverEnabled=!1,b(this._OOR_ALL_OUTPUTS_SELECTOR).removeClass(this._HIGHLIGHT_ON_HOVER_CLASS)):(this._highlightOnHoverEnabled=!0,this._addSingleOutputHighlightingClass())},_addSingleOutputHighlightingClass:function(){this._highlightOnHoverEnabled&&b(this._OOR_ALL_OUTPUTS_SELECTOR).addClass(this._HIGHLIGHT_ON_HOVER_CLASS)}})})},
"MW/rtc/plugins/embeddedoutputs/view/onright/SplitterPositionController":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred mw-log/Log ../../../../../layout/LayoutContainerEvent".split(" "),function(h,e,g,d,c,b){return h(null,{constructor:function(a,c,d){this._aspectHandles=[];this._splitterPositionModel=a;this._parentBorderContainer=c;this._isOnRightView=d;this._splitterDeferred=null;this._aspectHandles.push(g.after(this._splitterPositionModel,"onLoaded",e.hitch(this,
"_resolveSplitterDeferred")));this._evtListener=this._parentBorderContainer.on(b.SPLITTER_DRAG_ENDED,e.hitch(this,"_updateModel"))},addContentPanel:function(a,b){this._splitterDeferred=new d;if(this._splitterPositionModel.hasSplitterPosition()){var g=this._splitterPositionModel.getRightPanelProportion();this._splitterDeferred.resolve(g)}this._splitterDeferred.then(e.hitch(this,function(c){a.proportion=c;this._parentBorderContainer.addWithProperties(b,a)}),function(a){c.assert("The Deferred that gets the Splitter Position is cancelled: "+
a)})},_resolveSplitterDeferred:function(){if(this._isOnRightView()){var a=this._splitterPositionModel.getRightPanelProportion();this._splitterDeferred.resolve(a)}else this._splitterDeferred.cancel("opening a file with InLine view")},_updateModel:function(){var a=this._parentBorderContainer.getDerivedRightProportion();this._splitterPositionModel.setRightPanelProportion(a)},destroy:function(){this._aspectHandles.forEach(function(a){a.remove()});this._evtListener.remove()}})})},"MW/layout/LayoutContainerEvent":function(){define([],
function(){return{STATE_CHANGED:"state_changed",CHILD_ADDED:"child_added",CHILD_REMOVED:"child_removed",DRAG_OUT_INITIATED:"drag_out_initiated",DRAG_OUT:"drag_out",EXPAND_ALL:"expand",COLLAPSE_ALL:"collapse",SPLITTER_DRAG_STARTED:"splitterDragStarted",SPLITTER_DRAG_ENDED:"splitterDragEnded",CLOSE:"close"}})},"MW/rtc/plugins/embeddedoutputs/loadinterceptors/DeferredLoadInterceptorProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./DeferredLoadInterceptor"],function(h,
e,g){return h(e,{requires:function(){return{createInstance:["rtc.document","rtc.embeddedoutputs"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/plugins/embeddedoutputs/loadinterceptors/DeferredLoadInterceptor":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/Deferred","MW/rtc/plugins/embeddedoutputs/loadinterceptors/AbstractOutputLoadInterceptor"],function(h,e,g,d,c){return h(c,{constructor:function(b,a){this._document=b;this._embeddedOutputs=a;this.own(g.after(this._embeddedOutputs,
"onEmbeddedOutputsStateChange",this._handleStateChange.bind(this),!0))},interceptLoading:function(b){if(this._embeddedOutputs.isEmbeddedOutputsEnabled())return!1;this._deferred&&this._deferred.reject();var a=this._document.getState();this._deferred=new d;this._deferred.promise.then(e.hitch(this,function(a,b){this._document.getState()===b&&this._embeddedOutputs.load(a)},b,a),function(a){});return!0},_handleStateChange:function(b){this._deferred&&(b?this._deferred.resolve():this._deferred.reject(),
this._deferred=null)},destroy:function(){this.inherited(arguments);this._deferred&&(this._deferred.reject(),this._deferred=null)}})})},"MW/rtc/plugins/embeddedoutputs/loadinterceptors/AbstractOutputLoadInterceptor":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,e){return h(e,{interceptLoading:function(e){throw Error("Unimplemented API: MW.rtc.plugins.embeddedoutputs.loadinterceptors.AbstractOutputLoadInterceptor.interceptLoading");}})})},"MW/rtc/plugins/embeddedoutputs/loadinterceptors/EmbeddedOutputsLoadInterceptorManagerProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./EmbeddedOutputsLoadInterceptorManager"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.embeddedoutputs","rtc.embeddedoutputs.loadinterceptors"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/plugins/embeddedoutputs/loadinterceptors/EmbeddedOutputsLoadInterceptorManager":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,e){return h(e,{constructor:function(e,d){this._embeddedOutputs=
e;this._registerInterceptors(d)},_registerInterceptors:function(e){e.forEach(function(d){this._embeddedOutputs.registerLoadInterceptor(d)},this)}})})},"MW/rtc/plugins/embeddedoutputs/model/EmbeddedOutputsModelProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/embeddedoutputs/model/EmbeddedOutputsModel","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.code.sections.model","rtc.document.executablecode.executablecodeconverter",
"rtc.embeddedoutputs.statehandler"]}},createInstance:function(d,c,b,a,f){return new e(d,c,b,a,f)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/embeddedoutputs/model/EmbeddedOutputsModel":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred mw-log/Log MW/rtc/model/CodeUtilities MW/rtc/model/DocumentUtilities MW/rtc/model/NodeUtilities MW/rtc/model/PositionUtilities MW/rtc/model/Range mw-utils/Utils ./OutputContainer ./Region ./RegionParser ./RegionUtilities ../outputhandlers/error/ErrorOutputProperties".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s){return h(null,{CHANGE_TYPE:{ADD:0,REMOVE:1,REPLACE:2,UPDATE:3},_RELATION:{BEFORE:0,AFTER:1},_COMPARISON:{BEFORE:-1,WITHIN:0,AFTER:1},_CANCEL_REASONS:{EVALUATION_START:"eval start",OTHER:"other"},constructor:function(a,b,c,f,d){this._internalDocument=a;this._document=b;this._sectionModel=c;this._stateHandler=d;this._regionParser=new q(this._document,f);this._regions=[];this._HEAD=new p(null,{});this._TAIL=new p(null,{});this._HEAD.setNext(this._TAIL);this._TAIL.setPrevious(this._HEAD);
this._allOutputsReadyPromise=this._replacementRange=null;this._unresolvedOutputCount=0;this._isBatchOperationInProgress=!1;this._changes=[];this._aspectHandles=[];this._aspectHandles.push(g.after(this._internalDocument,"onDocumentReset",e.hitch(this,"clear")));this._aspectHandles.push(g.after(this._stateHandler,"onStateChanged",e.hitch(this,"_stateChangeListener"),!0));this.synchronizeRegions()},_stateChangeListener:function(a,b){if(a===this._stateHandler.CHANGE_TYPE_ENUM.EVAL_INITIALIZED){var c=
b.evaluationRange,f=this._sectionModel.getSectionNumberForNode(c.getStartPosition().node),c=this._sectionModel.getSectionNumberForNode(c.getEndPosition().node);this._clearDeferredOutputsForSections(f,c)}},destroy:function(){this.clear();this._aspectHandles.forEach(function(a){a.remove()})},startBatchOperation:function(){this._isBatchOperationInProgress=!0},finishBatchOperation:function(){0<this._changes.length&&(this.onModelUpdated(!0,this._changes),this._changes=[]);this._isBatchOperationInProgress=
!1},_batchAwareModelUpdate:function(a){if(this._isBatchOperationInProgress)this._changes.push(a);else this.onModelUpdated(!0,[a])},synchronizeRegions:function(){this.synchronizeRegionsPartial(0,!0)},synchronizeRegionsPartial:function(a,b){var c=this._getUpdatedCodeRegions(a,b),f=[],d=[],g=this._getEndSectionNumber(a,b);c.forEach(function(b,c){b.regionNumber=c;b.sectionBreak||(b.sectionBreak=!1);b.endOfSection||(b.endOfSection=!1);var e=b.regionPositions[0].getNode();if(!d.some(function(a){return e===
a},this)){var h=this._mergeAllOutputsInCollapsedRegionsForStartNode(this._regions,e);d.push(e)}var k;if(h){var l=b.sectionNumber;l>=a&&l<=g&&this._clearRegionPositions(h);k=new m(b,h.uid);this._getOutputContainersForRegion(h,!0).forEach(function(a){a.setRegion(k)})}else k=new m(b,n.generateUuid());f[b.regionNumber]=k},this);this._blockEvents(e.hitch(this,"_clearStaleRegions",f));this._regions=f;this.onModelUpdated()},_clearDeferredOutputsForSections:function(a,b){this._clearOutputsIf(function(c){var f=
c.getRegion().code.sectionNumber,f=f>=a&&f<=b;c=!c.getOutput().isReady();return f&&c},this._CANCEL_REASONS.EVALUATION_START)},_mergeAllOutputsInCollapsedRegionsForStartNode:function(a,b){var c=null,f=[];a.forEach(function(a){r.checkRegionIsValid(a);if(a.code.regionPositions.length&&a.code.regionPositions[0].getNode()===b){var d=this._getOutputContainersForRegion(a,!0);d&&0<d.length&&(f=f.concat(d));c=a;f.forEach(function(a){a.setRegion(c)},this)}},this);return c},_getEndSectionNumber:function(a,b){var c=
this._sectionModel.getSections();return b?c.length-1:a},_getUpdatedCodeRegions:function(a,b){var c=this._getEndSectionNumber(a,b),f=[],d=[];0===a&&b||(this._updateOldRegions(),f=this._getRegionsBeforeSection(a),b||(d=this._getRegionsAfterSection(c)));c=this._sectionModel.getSections().slice(a,c+1);c=this._getNewRegions(c,a);return[].concat(f,c,d)},_getRegionsBeforeSection:function(a){return this._regions.filter(function(b){return b.code.sectionNumber<a}).map(function(a){return a.code})},_getRegionsAfterSection:function(a){return this._regions.filter(function(b){return b.code.sectionNumber>
a}).map(function(a){return a.code})},_updateOldRegions:function(){var a=-1;this._regions.forEach(function(b,c,f){b=b.code;if(-1!==b.sectionNumber){var d=this._sectionModel.getSectionNumberForNode(b.regionPositions[0].node);b.sectionNumber=d;b.endOfSection=!1;d!=a?(b.sectionBreak=!0,0!==c&&(f[c-1].code.endOfSection=!0)):b.sectionBreak=!1;a=d}},this);0<this._regions.length&&(this._regions[this._regions.length-1].code.endOfSection=!0)},_getNewRegions:function(a,b){var c=[];a=a||this._sectionModel.getSections();
b=b||0;a.forEach(function(a,f){var d=a.start.getNode(),e=a.end.getNode(),d=this._regionParser.getCodeRegionsInRange(d,e);0<d.executableRegions.length&&(d.executableRegions[0].sectionBreak=!0,d.executableRegions[d.executableRegions.length-1].endOfSection=!0,d.executableRegions.forEach(function(a){a.sectionNumber=b+f}),c=c.concat(d.executableRegions))},this);return c},prependOutput:function(a,b){if(!b.isReady())throw Error("prependOutput API expects a resolved output");if(this._replacementRange)throw Error("prependOutput should not be used while a replacement is in progress.");
var c=this._findFirstOutputContainerIf(function(b){return b.getRegion().code.regionNumber>=a},this._HEAD,this._TAIL),f=new p(b,this._regions[a]);this._spliceInOutputContainer(f,c,this._RELATION.BEFORE);this._handleDeferredInsertResolved(f)},setReplacementRange:function(a){a=this._getOutputContainerListForDocumentRange(a);this._replacementRange={head:a.head,insertionPoint:a.head.next(),tail:a.tail}},clearReplacementRange:function(){this._replacementRange=null},_setInsertionPoint:function(a){if(a===
this._HEAD||null===a.next()&&null===a.previous())throw Error("Invalid output container");if(a!==this._TAIL&&!a.getOutput().isReady())throw Error("There shouldn't be any non ready outputs after the execution point.");this._replacementRange.insertionPoint=a},addOutput:function(b,c){this._replacementRange||this.setReplacementRange(a.createFullFileRange(this._document,this._internalDocument));this._insertWithReplacement(b,c)},_insertWithReplacement:function(a,b){var c=new p(b,this._regions[a]);this._insertContainerWithReplacement(a,
c)},_insertContainerWithReplacement:function(a,b){var c=b.getOutput(),f=this._calculateInsertionPoint(c.evaluationId,a);this._setInsertionPoint(f);if(f!==this._replacementRange.tail&&this._isOutputReplaceable(f,c))return this._replaceOutput(b,f),b;this._insertOutput(b,f,this._RELATION.BEFORE)},_replaceOutput:function(a,b){b.setBeingReplacedBy(a);a.setContainerToReplace(b);var c;c=b.getRegion().code.regionNumber;c=a.getRegion().code.regionNumber<c?this._RELATION.BEFORE:this._RELATION.AFTER;this._spliceInOutputContainer(a,
b,c);c===this._RELATION.AFTER?this._setInsertionPoint(a.next()):this._setInsertionPoint(b.next());this._unresolvedOutputCount++;a.then(e.hitch(this,"_handleDeferredReplacementResolved",a,b),e.hitch(this,"_handleDeferredReplacementCancelled",b),e.hitch(this,"_handleOutputPromiseRejection",[a,b]))},_handleDeferredReplacementResolved:function(a,b){this._ensureBatched(e.hitch(this,function(){this._destroyOutputContainer(b);a.setContainerToReplace(null);this._unresolvedOutputCount--;var c=this._getIndexInRegion(a);
this._batchAwareModelUpdate({type:this.CHANGE_TYPE.ADD,regionNumber:a.getRegion().code.regionNumber,output:a.getOutput(),outputIndex:c})}))},_handleDeferredReplacementCancelled:function(a){this._unresolvedOutputCount--;a.getBeingReplacedBy().setContainerToReplace(null);a.setBeingReplacedBy(null);this._updateAllOutputsReadyPromise()},_insertOutput:function(a,b,c){this._spliceInOutputContainer(a,b,c);this._setInsertionPoint(a.next());this._unresolvedOutputCount++;a.then(e.hitch(this,"_handleDeferredInsertResolved",
a),e.hitch(this,"_handleDeferredInsertCancelled"),e.hitch(this,"_handleOutputPromiseRejection",[a]))},_handleDeferredInsertResolved:function(a){this._unresolvedOutputCount--;var b=this._getIndexInRegion(a);this._batchAwareModelUpdate({type:this.CHANGE_TYPE.ADD,regionNumber:a.getRegion().code.regionNumber,output:a.getOutput(),outputIndex:b})},_handleDeferredInsertCancelled:function(){this._unresolvedOutputCount--;this._updateAllOutputsReadyPromise()},_handleOutputPromiseRejection:function(a,b){var c=
a[1];this._destroyOutputContainer(a[0]);if(c)if(b===this._CANCEL_REASONS.EVALUATION_START&&this._stateHandler.isRunning())this.onOldOutputNotRemovedDuringReplacementRejection(c.getOutput());else this._destroyOutputContainer(c);this._updateAllOutputsReadyPromise()},onOldOutputNotRemovedDuringReplacementRejection:function(a){},_calculateInsertionPoint:function(a,b){return this._findFirstOutputContainerIf(e.hitch(this,function(a){return this._isInOrAdjacentToRegionNumber(a,b)}),this._replacementRange.insertionPoint.previous(),
this._replacementRange.tail)},_isInOrAdjacentToRegionNumber:function(a,b){var c=a.getRegion().code.regionNumber;if(c<b){var f=a.next();if(f!==this._TAIL&&f.getRegion().code.regionNumber<b)return!1}return c>b&&(c=a.previous(),c!==this._HEAD&&c.getRegion().code.regionNumber>b)?!1:!0},_spliceInOutputContainer:function(a,b,c){c===this._RELATION.BEFORE?(a.setNext(b),a.setPrevious(b.previous()),b.previous().setNext(a),b.setPrevious(a)):(a.setNext(b.next()),a.setPrevious(b),b.next().setPrevious(a),b.setNext(a))},
_spliceOutOutputContainer:function(a){a.previous().setNext(a.next());a.next().setPrevious(a.previous());a.setPrevious(null);a.setNext(null)},_removeReplacementReferences:function(a){var b=a.getBeingReplacedBy();b&&b.setContainerToReplace(null);a.setBeingReplacedBy(null);(b=a.getContainerToReplace())&&b.setBeingReplacedBy(null);a.setContainerToReplace(null)},_destroyOutputContainer:function(a){this._isContainerInModel(a)?(a.isResolved()||a.cancel(),this._removeContainerAndEmitChangeEvent(a),a.destroy(),
this._destroyOutput(a.getOutput())):c.error("Tried to remove a container that wasn't in the model.")},_removeContainerAndEmitChangeEvent:function(a){this._replacementRange&&a===this._replacementRange.insertionPoint&&(this._replacementRange.insertionPoint=a.next());this._spliceOutOutputContainer(a);this._removeReplacementReferences(a);a.getOutput().isReady()&&this._batchAwareModelUpdate({type:this.CHANGE_TYPE.REMOVE,regionNumber:a.getRegion().code.regionNumber,removedOutputId:a.getOutput().uid})},
_isOutputReplaceable:function(a,b){var c=this._findFirstReadyOutputContainerIf(function(b){return b===a},this._replacementRange.head,this._replacementRange.tail),f=!this._isOutputUsedByCurrentEvaluation(b.evaluationId,a),d=a.getOutput().type===b.type;return c&&f&&d},clear:function(){this.clearAllOutputs();this._clearAllRegions();this.onModelUpdated();this._isBatchOperationInProgress=!1;this._changes=[]},clearOldOutputsInRange:function(a,b){var c=this._getOutputContainerListForDocumentRange(a),f=e.hitch(this,
function(a){return!this._isOutputUsedByCurrentEvaluation(b,a)});this._clearOutputsIf(f,this._CANCEL_REASONS.OTHER,c.head,c.tail)},clearOutputsForward:function(a,b){b=b||function(){return!1};this._ensureBatched(e.hitch(this,function(){this._clearOutputsIf(function(c){var f=c.getRegion().code.regionNumber>=a;c=b(c.getOutput());return f&&!c})}))},clearAllOutputs:function(){this._clearOutputsIf();this._HEAD.next()!==this._TAIL&&(c.error("Some outputs remained after clearing outputs. This might be because an output was rejected, but no one cleaned it up. Removing all remaining outputs."),
this._HEAD.setNext(this._TAIL),this._TAIL.setPrevious(this._HEAD))},clearOutputsForRegionNumber:function(a){this._ensureBatched(e.hitch(this,function(){this._clearOutputsIf(function(b){return b.getRegion().code.regionNumber===a})}))},removeOutput:function(a){(a=this._findOutputContainerForOutput(a))&&this._destroyOutputContainer(a)},_clearOutputsIf:function(a,b,c,f){b=b||this._CANCEL_REASONS.OTHER;c=c||this._HEAD;f=f||this._TAIL;var d=this._findOutputContainersIf(a||function(){return!0},c,f);this._ensureBatched(e.hitch(this,
function(){d=d.filter(function(a){a=a.getOutput();return!a.isReady()?(a.getReadyPromise().cancel(b),!1):!0},this);d.forEach(function(a){this._isContainerInModel(a)&&this._destroyOutputContainer(a)},this)}))},updateOutput:function(a){var b=this._findOutputContainerForOutput(a);if(!b)throw Error("Output not found");a.isReady()&&this._batchAwareModelUpdate({type:this.CHANGE_TYPE.UPDATE,regionNumber:b.getRegion().code.regionNumber,output:b.getOutput()})},updateOutputAssociations:function(a,b){var c=this._findOutputContainerForOutput(a);
if(!c)throw Error("Output not found");if(!this._replacementRange)throw Error("No active replacement range");this._ensureBatched(e.hitch(this,function(){var a=c.getContainerToReplace();a&&(c.next()===this._replacementRange.insertionPoint||a.next()===this._replacementRange.insertionPoint?this._setInsertionPoint(a):this._destroyOutputContainer(a));this._removeContainerAndEmitChangeEvent(c);this._resetContainerForReuse(c,b);this._insertContainerWithReplacement(b,c)}))},_resetContainerForReuse:function(a,
b){a.setRegion(this._regions[b]);if(!a.isResolved()){var c=a.getContainerToReplace();c&&(c.setBeingReplacedBy(null),a.setContainerToReplace(null));this._unresolvedOutputCount--;this._updateAllOutputsReadyPromise()}},_ensureBatched:function(a){if(this._isBatchOperationInProgress)return a();this.startBatchOperation();a=a();this.finishBatchOperation();return a},_blockEvents:function(a){var b=!1;this._isBatchOperationInProgress&&(this.finishBatchOperation(),b=!0);this.startBatchOperation();a=a();this._changes=
[];this.finishBatchOperation();b&&this.startBatchOperation();return a},_isOutputUsedByCurrentEvaluation:function(a,b){if(b.getOutput().evaluationId===a)return!0;var c=b.getBeingReplacedBy();return c&&c.getOutput().evaluationId===a},_destroyOutput:function(a){a.destroy();a.codeLinePositions.forEach(function(a){this._document.deletePosition(a)},this);a.codeLinePositions=[]},_clearRegionPositions:function(a){a.code.regionPositions.forEach(this._document.deletePosition);a.code.regionPositions=[]},_clearAllRegions:function(){this._regions.forEach(this._clearRegionPositions,
this);this._regions=[]},_clearStaleRegions:function(a){var b=[];this._regions.forEach(function(c){c.code.regionPositions&&c.code.regionPositions.length&&!a.some(e.hitch(r,"regionStartNodesMatch",c))&&(b.push(c),this._clearRegionPositions(c))},this);this._clearOutputsIf(function(a){return-1<b.indexOf(a.getRegion())})},getRegions:function(a,b){return void 0===a||null===a?this._regions:this._regions.slice(a,b)},getOutputs:function(){var a=this._getOutputContainers(!1,!0);return this._getOutputsFromContainers(a)},
_getOutputContainers:function(a,b){return a&&!b?this._findOutputContainersIf(function(a){return!a.getOutput().isReady()},this._HEAD,this._TAIL):b&&!a?this._findReadyOutputContainersIf(function(){return!0},this._HEAD,this._TAIL):this._findOutputContainersIf(function(){return!0},this._HEAD,this._TAIL)},_getOutputsFromContainers:function(a){return a.map(function(a){return a.getOutput()})},getOutputsForRegion:function(a){a=this._getOutputContainersForRegion(a,!1);return this._getOutputsFromContainers(a)},
_getOutputContainersForRegion:function(a,b){var c=function(b){return a===b.getRegion()};return b?this._findOutputContainersIf(c,this._HEAD,this._TAIL):this._findReadyOutputContainersIf(c,this._HEAD,this._TAIL)},setRegions:function(a){this.clearAllOutputs();this._clearAllRegions();this._regions=a;this.onModelUpdated()},hasOutputs:function(){return this._findFirstReadyOutputContainerIf(function(){return!0},this._HEAD,this._TAIL)!==this._TAIL},getSectionRegionsFromNodeRange:function(a,b){var c=f.getLineNumberForNode(a,
this._internalDocument),d=f.getLineNumberForNode(b,this._internalDocument),e=[];this._regions.some(function(a){var b=a.code.regionPositions,f=b[b.length-1].line;b[0].line>=c&&f<=d&&e.push(a);if(f>d)return!0},this);return e},onModelUpdated:function(){this._changes=[];this._updateAllOutputsReadyPromise()},hasError:function(){return this._findFirstReadyOutputContainerIf(function(a){return a.getOutput().type===s.OUTPUT_TYPE},this._HEAD,this._TAIL)!==this._TAIL},findOutput:function(a){var b=this._findFirstReadyOutputContainerIf(function(b){return a(b.getOutput())},
this._HEAD,this._TAIL);return b!==this._TAIL?b.getOutput():null},whenOutputsReady:function(a){this._hasUnresolvedOutputs()?(this._allOutputsReadyPromise||(this._allOutputsReadyPromise=new d),this._allOutputsReadyPromise.then(a)):a()},_updateAllOutputsReadyPromise:function(){this._allOutputsReadyPromise&&!this._hasUnresolvedOutputs()&&(this._allOutputsReadyPromise.resolve(),this._allOutputsReadyPromise=null)},_hasUnresolvedOutputs:function(){return 0<this._unresolvedOutputCount},getOutputsForPosition:function(a){var b=
this._findReadyOutputContainersIf(function(b){b=b.getOutput().getCodeLinePositions();return a.line===b[b.length-1].line},this._HEAD,this._TAIL);return this._getOutputsFromContainers(b)},_findFirstReadyOutputContainerIf:function(a,b,c){this._assertHeadNotEqualToTail(b,c);for(b=b.next();b!==c;){if(b.getOutput().isReady()&&a(b))return b;b=b.next()}return c},_findFirstOutputContainerIf:function(a,b,c){this._assertHeadNotEqualToTail(b,c);for(b=b.next();b!==c;){if(a(b))return b;b=b.next()}return c},_findReadyOutputContainersIf:function(a,
b,c){this._assertHeadNotEqualToTail(b,c);var f=[];for(b=b.next();b!==c;)b.getOutput().isReady()&&a(b)&&f.push(b),b=b.next();return f},_findOutputContainersIf:function(a,b,c){this._assertHeadNotEqualToTail(b,c);var f=[];for(b=b.next();b!==c;)a(b)&&f.push(b),b=b.next();return f},_findOutputContainerForOutput:function(a){var b=this._findFirstOutputContainerIf(function(b){return a===b.getOutput()},this._HEAD,this._TAIL);return b===this._TAIL?null:b},_getOutputContainerListForDocumentRange:function(a){var b=
{head:null,tail:null},c=a.getStartPosition().getLine(),f=this._findFirstOutputContainerIf(e.hitch(this,function(a){return this._getPrimaryLineForContainer(a)>=c}),this._HEAD,this._TAIL);b.head=f.previous();var d=a.getEndPosition().getLine();b.tail=this._findFirstOutputContainerIf(e.hitch(this,function(a){return this._getPrimaryLineForContainer(a)>d}),b.head,this._TAIL);return b},_getPrimaryLineForContainer:function(a){a=a.getOutput().codeLinePositions;return a[a.length-1].getLine()},addRegionForPosition:function(a){var b=
this._createNewRegionTemplate(),c=this._document.createLinePosition(a.node,!1);b.code.regionPositions=[c];b.code.regionString=a.node.getText();a=this._getNewRegionNumberForPosition(a);this._regions.splice(a,0,b);this._regions.forEach(function(a,b){a.code.regionNumber=b});this._updateOldRegions();this.onModelUpdated();return a},_getNewRegionNumberForPosition:function(a){for(var b=0;b<this._regions.length;b++)if(a.line<this._regions[b].code.regionPositions[0].line)return b;return this._regions.length},
_createNewRegionTemplate:function(){return new m({regionNumber:null,regionPositions:null,regionString:null,sectionBreak:null,endOfSection:null,sectionNumber:null},n.generateUuid())},_getIndexInRegion:function(a){var b=0,c=a.getRegion();for(a=a.previous();a!==this._HEAD&&a.getRegion()===c;)b+=a.getOutput().isReady()?1:0,a=a.previous();return b},_assertHeadNotEqualToTail:function(a,b){if(a===b)throw Error("Head should not be equal to tail.");},_isContainerInModel:function(a){var b=a.previous();a=a.next();
(null===b&&null!==a||null!==b&&null===a)&&c.error("Unexpected previous/next value: previous: "+b+" next: "+a);return null!==b&&null!==a}})})},"MW/rtc/plugins/embeddedoutputs/model/OutputContainer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/Deferred"],function(h,e,g){return h(null,{constructor:function(d,c){this._output=d;this._containerToReplace=this._beingReplacedBy=this._deferredModelChange=null;this._region=c;this._outputErrorCallback=this._cancelCallback=this._thenCallback=
this._previous=this._next=null;if(!c)throw Error("Tried to set an undefined region");d&&!d.isReady()&&(this._deferredModelChange=new g,this._deferredModelChange.then(e.hitch(this,"_handleResolve"),e.hitch(this,"_handleCancel")),d.getReadyPromise().then(e.hitch(this,"resolve"),e.hitch(this,"_handleOutputError")))},destroy:function(){this.cancel();this._deferredModelChange=null},_handleResolve:function(){this._thenCallback&&(this._thenCallback(),this._deferredModelChange=null)},_handleCancel:function(){this._cancelCallback&&
(this._cancelCallback(),this._deferredModelChange=null)},_handleOutputError:function(d){this._outputErrorCallback&&(this._outputErrorCallback(d),this._deferredModelChange=null)},getOutput:function(){return this._output},getRegion:function(){return this._region},setRegion:function(d){if(!d)throw Error("Tried to set an undefined region");this._region=d},next:function(){return this._next},setNext:function(d){this._next=d},previous:function(){return this._previous},setPrevious:function(d){this._previous=
d},getBeingReplacedBy:function(){return this._beingReplacedBy},setBeingReplacedBy:function(d){this._beingReplacedBy=d},getContainerToReplace:function(){return this._containerToReplace},setContainerToReplace:function(d){this._containerToReplace=d},cancel:function(d){this._deferredModelChange&&(this._outputErrorCallback=null,this._deferredModelChange.cancel(d),this._deferredModelChange=null)},isResolved:function(){return this._deferredModelChange?this._deferredModelChange.isResolved():!0},then:function(d,
c,b){this._deferredModelChange?(this._thenCallback=d,this._cancelCallback=c,this._outputErrorCallback=b):d()},resolve:function(d){this._deferredModelChange&&this._deferredModelChange.resolve(d)}})})},"MW/rtc/plugins/embeddedoutputs/model/RegionParser":function(){define(["dojo/_base/declare","MW/rtc/model/importers/MATLAB_PEG","MW/rtc/model/CodeUtilities","MW/rtc/model/NodeUtilities"],function(h,e,g,d){return h(null,{constructor:function(c,b){this._document=c;this._executableCodeConverter=b;this._parser=
new e},getCodeRegionsInRange:function(c,b){var a=[],f="",e=null,h=null,n="",p=!1;d.getParagraphNodesInRange(c,b).forEach(function(b){var c=this._executableCodeConverter.getEvalTextFromNode(b);if(null!==c){var d="";try{d=this._parser.classifyCode(n+c)}catch(m){}if(!p){if(d===this._parser.BLANK_OR_COMMENT&&!this._isAfterLineContinuation(f)){n="";return}if(d===this._parser.IN_BLOCK_COMMENT){n=n+c+"\n";return}}n="";0<f.length?f=f+"\n"+c:(f=c,e=b);h=b;b="";try{b=this._parser.classifyCode(f)}catch(u){}c=
b===this._parser.FUNCTION;b===this._parser.COMPLETE_NONTRIVIAL_COMMAND||c?(b=g.getCodePositionsInNodeRange(this._document,e,h),a.push({regionString:f,regionPositions:b}),f="",p=!1):p=!0}},this);if(0<f.length){var m=g.getCodePositionsInNodeRange(this._document,e,h);a.push({regionString:f,regionPositions:m})}return{executableRegions:a}},_isAfterLineContinuation:function(c){if(0===c.length)return!1;var b=c.lastIndexOf("\n");return-1!==c.indexOf("...",b+1)}})})},"MW/rtc/model/importers/MATLAB_PEG":function(){define(["dojo/_base/declare",
"MW/rtc/model/importers/Base","MW/rtc/model/importers/MatlabRules","MW/rtc/model/importers/PEG"],function(h,e,g,d){return h(e,{constructor:function(){this._inScript=!1},makeSymbolMap:function(){var c={},b="alpha beta gamma delta epsilon zeta eta theta iota kappa lambda mu nu xi omicron pi rho sigma tau upsilon phi chi psi omega varepsilon vartheta varomega Gamma Delta Theta Lambda Eta Pi Sigma Phi Psi Omega".split(" "),a;for(a=0;a<b.length;a+=1)c[b[a]]=b[a];return c},makePEG:function(){return new d(g.rulenames,
g.rules,0)},makeActionMap:function(){var c={},b=this.peg.names,a=[this.appendChildren],f;for(f=0;f<b.length;f+=1)c[b[f]]=a;c.S14=[this.appendAssignment];c.S14=[this.appendCmd,"if"];c.S15=[this.appendCmd,"elseif"];c.S16=[this.appendCmd,"else"];c.S17=[this.appendCmd,"switch"];c.S18=[this.appendCmd,"case"];c.S19=[this.appendCmd,"otherwise"];c.S20=[this.appendCmd,"for"];c.S21=[this.appendCmd,"parfor"];c.S22=[this.appendCmd,"while"];c.S26=[this.appendCmd,"try"];c.S27=[this.appendCmd,"catch"];c.S33=[this.appendCmd,
"!"];c.S28=[this.appendRawString,"code"];c.x5=[this.appendSymbol];c.x6=[this.appendSymbol];c.x7=[this.appendSymbol];c.x8=[this.appendSymbol];c.X10=[this.appendSymbol];c.x11=[this.appendSymbol];c.X13=[this.appendSymbol];c.X14=[this.appendProd];c.X15=[this.appendProdOp];c.X17=[this.appendSymbol];c.X18=[this.appendPostfix];c.X19=c.X17;c.X20=c.X17;c.X21=[this.appendSymbol];c.x23=[this.appendParenExpr];c.X25=[this.appendRawString,"number"];c.X28=[this.appendVariable];c.X29=[this.appendExprList];c.X39=
[this.appendMatrix];c.X44=c.X39;c.X45=[this.appendRawString,"code"];c.X46=[this.appendID];c.SO2=[this.appendSymMatrix];return c},parseSymOutput:function(c){this.peg||this.initMaps();var b=this.peg,a=b.root;b.root=1;c=b.parse(c);b.root=a;return c},COMPLETE_NONTRIVIAL_COMMAND:1,BLANK_OR_COMMENT:2,IN_BLOCK_COMMENT:3,SYNTAX_ERROR:4,FUNCTION:5,classifyCode:function(c){this.peg||this.initMaps();c=c.trim();c=this.peg.parse(c);if(!c.tree)return this.SYNTAX_ERROR;c=c.tree;var b=this.peg.names;return this._hasOpenBlockComment(c,
b)?this.IN_BLOCK_COMMENT:this._hasFunctions(c,b)?this.FUNCTION:this._hasBadEnds(c,b)?this.SYNTAX_ERROR:this._trivialStmts(c,b)?this.BLANK_OR_COMMENT:this.COMPLETE_NONTRIVIAL_COMMAND},isIncompleteCommand:function(c){return this.classifyCode(c)>this.BLANK_OR_COMMENT},_hasOpenBlockComment:function(c,b){if(0<c.children.length){var a=c.children[0];if("BC1"===b[a.name]&&1<a.children.length&&(a=a.children,"B1"===b[a[a.length-2].name]))return!0}return!1},_hasBadEnds:function(c,b){return this._hasNodes(c,
b,["B1","B2","B4"])},_hasFunctions:function(c,b){return this._hasNodes(c,b,["FN1","FN2"])},_hasNodes:function(c,b,a){var f;f=function(c){var d=b[c.name],e=!1;a.forEach(function(a){a===d&&(e=!0)});if(e)return!0;c=c.children;var g;for(g=0;g<c.length;g+=1)if(f(c[g]))return!0;return!1};return f(c)},_trivialStmts:function(c,b){var a=c.children;if(2>a.length)return!1;for(var f=1,d=a[f];f<a.length-1&&"LineC"===b[d.name];)f+=1,d=a[f];return"S1"===b[d.name]&&(a=d.children,0===a.length)?!0:!1},bubbleWraps:function(c){var b=
!1;if(c){"LW"===this.peg.names[c.name]&&(b=!0);var a=c.children,f;for(f=0;f<a.length;f+=1)b=b||this.bubbleWraps(a[f]);c.wrap=b}return b},appendCmd:function(c,b){this.startSubRow();this.pushText(b,"code");this.appendChildren(c);this.endSubRow()},appendAssignment:function(c){this.startSubRow();this.append(c.children[0]);this.pushText("\x3d","symbol");this.append(c.children[1]);this.endSubRow()},fillLineWrap:function(c,b){alert("line wrap not done")},appendSep:function(c){var b=this.slice(c);if(0<b.length){var a=
b.charAt(0);if(", "===a||";"===a)this.pushText(b,"code");else if(a===String.fromCharCode(10)||a===String.fromCharCode(13)||"%"===a){c=c.children;var f=function(a){return this.makeRow()};"%"!==a&&(this.row=f(this.row));if(0<c.length){for(a=0;a<c.length;a+=1)b=this.slice(c[a]),this.pushText(b,"code"),a<c.length-1&&(this.row=f(this.row));this.row=f(this.row)}}else alert(a+" not done")}},appendExprList:function(c){c=c.children;var b;for(b=0;b<c.length;b+=1){this.append(c[b]);var a=this.name(c[b]);b!==
c.length-1&&"LW"!==a&&this.pushText(", ","code")}},appendParenExpr:function(c){var b=this.makeFenced();this.push(b);this.fillRow(c.children[0],b.children[0])},fillRowNoFence:function(c,b){"x23"===this.name(c)?this.fillRow(c.children[0],b):this.fillRow(c,b)},appendProd:function(c){var b=c.children;3!==b.length?this.appendChildren(c):"/"===this.slice(b[1])&&!this._inScript?(c=this.makeFraction(),this.push(c),this.fillRowNoFence(b[0],c.children[0]),this.fillRowNoFence(b[2],c.children[1])):this.appendChildren(c)},
appendPostfix:function(c){var b=c.children;if(3!==b.length)this.appendChildren(c);else if("^"===this.slice(b[1])||this._inScript){c=this.makeScript();this.push(c);this.fillRow(b[0],c.children[0]);var a=this._inScript;this._inScript=!0;this.fillRowNoFence(b[2],c.children[2]);this._inScript=a}else this.appendChildren(c)},appendSymMatrix:function(c){1===c.children.length&&1===c.children[0].children.length?this.append(c.children[0].children[0]):this.appendMatrix(c)},appendMatrix:function(c){c="SO2"===
this.name(c)?c.children:c.children[0].children;var b=(c.length+1)/2,a=0,f;for(f=0;f<c.length;f+=2)a=Math.max(a,c[f].children.length);b=this.makeMatrix(b,a);for(f=0;f<c.length;f+=2){var d=c[f].children,e;for(e=0;e<a;e+=1){var g=this.makeRow();b.children.push(g);this.pushRow(g);e<d.length&&(this.append(d[e]),this.validateRow());this.popRow()}}this.push(b)},lookupSymbol:function(c){return this.symbolMap[c]?(this.pushText(c,"symbol"),!0):!1},appendID:function(c){c=this.slice(c);this.lookupSymbol(c)||
this.pushText(c,"id")},appendSqrt:function(c){var b=this.makeRadical();this.push(b);this.fillRow(c.children[2],b.children[0])},appendSpecialFunctionCall:function(c){var b=c.children;return 3===b.length&&"X33"===this.name(b[1])&&"sqrt"===this.slice(b[0])?(this.appendSqrt(c),!0):!1},appendVariable:function(c){this.appendSpecialFunctionCall(c)||(1<c.children.length?(this.startSubRow(),this.appendVariableRow(c),this.endSubRow()):this.appendVariableRow(c))},appendVariableRow:function(c){c=c.children;this.append(c[0]);
var b;for(b=1;b<c.length;){var a=c[b];b+=1;switch(this.name(a)){case "X33":this.pushDelim("(");b<c.length&&this.append(c[b]);this.pushDelim(")");b+=1;break;case "X36":this.pushDelim("{");this.append(c[b]);this.pushDelim("}");b+=1;break;case "X37":this.pushText(".","code");this.append(c[b]);b+=1;break;case "X35":alert("DotLRB not done");break;case "X38":alert("At not done")}}},appendProdOp:function(c){c=this.slice(c);"*"===c?this.pushText("ImplicitMult","symbol"):this.pushText(c,"code")},fillMulti:function(c,
b,a){}})})},"MW/rtc/model/importers/Base":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(){this.row=this.symbolMap=this.actionMap=this.peg=null;this.rows=[];this.str=""},initMaps:function(){this.peg=this.makePEG();this.actionMap=this.makeActionMap();this.symbolMap=this.makeSymbolMap()},parse:function(e){this.peg||this.initMaps();return this.peg.parse(e)},pushRow:function(e){this.rows.push(this.row);this.row=e},popRow:function(){this.validateRow();this.row=
this.rows.pop()},fillRow:function(e,g){this.pushRow(g);this.append(e);this.popRow()},startSubRow:function(){var e=this.row;this.pushRow(this.makeRow());e.children.push(this.row)},endSubRow:function(){this.popRow()},makeEquation:function(e){var g=this.makeRoot();e&&(this.str=e.str,this.fillRow(e.tree,g.children[0]));return g},makeRoot:function(){return{className:"MathRoot",children:[this.makeRow()]}},makeRow:function(){return{className:"MathRow",children:[]}},makeDelim:function(e){return{className:"MathDelimiter",
symbol:e}},makeText:function(e,g){return"symbol"===g?{className:"MathText",text:" ",symbolName:e,kind:g}:{className:"MathText",text:e,kind:g}},makeSymbol:function(e){return{className:"MathText",text:" ",symbolName:e,kind:"symbol"}},makeFraction:function(e){var g={className:"MathFraction",children:[this.makeRow(),this.makeRow()]};!0===e&&(g.bevelled=e);return g},makeIntegral:function(){return{className:"MathIntegral",children:[this.makeRow(),this.makeRow(),this.makeRow(),this.makeRow()]}},makeRadical:function(){return{className:"MathRadical",
children:[this.makeRow(),this.makeRow()]}},makeFenced:function(e,g){return{className:"MathFenced",open:e,close:g,children:[this.makeRow()]}},makeScript:function(){return{className:"MathScript",children:[this.makeRow(),this.makeRow(),this.makeRow()]}},makeMatrix:function(e,g){return{className:"MathMatrix",rows:e,cols:g,children:[]}},name:function(e){return this.peg.names[e.name]},slice:function(e){return this.str.slice(e.start,e.end)},push:function(e){this.row.children.push(e);return e},pushText:function(e,
g){var d=this.makeText(e,g);return this.push(d)},pushDelim:function(e){return this.push(this.makeDelim(e))},notLeafNode:function(e){return void 0===e||"MathText"!==e.className&&"MathDelimiter"!==e.className&&"MathRow"!==e.className},validateRow:function(){},append:function(e){var g=this.actionMap[this.peg.names[e.name]];1===g.length?g[0].call(this,e):2===g.length?g[0].call(this,e,g[1]):g[0].call(this,e,g[1],g[2])},mapSymbolName:function(e){var g=this.symbolMap[e];return g?g:e},appendSymbol:function(e){e=
this.slice(e).trim();this.pushText(this.mapSymbolName(e),"symbol")},appendRawString:function(e,g){this.pushText(this.slice(e),g)},simplifyLastItem:function(e){e=e.children;if(0!==e.length){var g=e[e.length-1];"MathRow"===g.className&&(g=g.children,1===g.length?(e.pop(),e.push(g.pop())):0===g.length&&e.pop())}},appendChildren:function(e){var g=e.children;if(0===g.length&&e.start<e.end)this.pushText(this.slice(e),"code");else if(1===g.length)this.append(g[0]);else if(0<g.length){this.startSubRow();
for(e=0;e<g.length;e+=1)this.append(g[e]);this.endSubRow();this.simplifyLastItem(this.row)}}})})},"MW/rtc/model/importers/MatlabRules":function(){define([],function(){return{rulenames:"F SO1 SO2 SO3 B1 B2 B3 B4 B5 B6 w ws s LW E1 E2 E3 E4 E5 E6 E7 C1 C2 C3 C4 BC1 BC2 BC3 BC4 LineC WhiteLine FN1 FN2 FN3 FN4 FN5 FN6 FN7 FN8 FN9 S1 SC S4 S5 S7 S8 S9 S10 S11 S12 S13 IG S14 S15 S16 S17 S18 S19 S20 s20 S21 s21 S22 S23 S24 S25 S26 S27 S28 D1 D2 D3 D3a D4 D5 D6 D7 D6a D8 D9 S29 S30 S31 S32 S33 S34 X1 X2 X3 X4 X5 x5 X6 x6 X7 x7 X8 x8 X9 X10 X11 x11 X12 X13 X14 X15 X16 XX1 X17 X18 X19 X20 X21 X22 X23 x23 X24 X25 X26 X27 X28 X29 X30 X31 X32 X33 X34 X35 X36 X37 X38 X39 X40 X41 X42 X43 X44 X45 X45a X45b X46 X47 X48 E0 Y1 Y2 Y3 Y4 Y5 Y6 Y7 Y8 Y9 Y10 Y11 Y12 YY1 Y13 Y14 Y15 Y16 T1 T2 T3 T4 T5 T6 T7 T8 T9 T10 T11 T12 T13 T14 T15 T16 T17 T18 T19 T20 T21 T22 T23 T24 T25 T26 T27".split(" "),
rules:[[0,2,22,10,35,0,2,32,11,21,0,2,162,10,11,2,24,10,7,0,2,32,4,1,11,5,2,41,1,10,9,2,24,10,5,2,19,1,13,0],[0,2,12,10,16,2,3,10,12,2,24,10,8,2,12,10,4,26,1,13,0],[9,0,0,2,12,10,18,2,4,10,14,2,12,10,10,0,2,136,11,4,26,1,1,5,-21,13,2],[0,0,3,1,91,10,24,2,88,10,20,0,0,3,1,44,10,5,2,88,1,6,-9,10,6,3,1,93,1,11,5,2,88,1,13,2],[14,13,2],[14,13,2],[14,13,2],[14,13,2],[14,13,2],[14,13,2],[16,2,32,32,9,9],[0,2,11,6,-2],[0,0,16,2,32,32,9,9,6,-6,10,8,0,2,14,6,-2,1],[0,3,3,46,46,46,10,19,2,15,10,15,0,2,16,11,
5,2,6,1,10,5,2,12,1,13,2],[0,17,1,10,13,6,-4,13,0],[0,0,16,1,10,12,11,17,0,16,1,13,13,10,9,0,16,1,10,10,4,1,1,10,5,2,23,1,13,0],[0,2,16,11,4,26,1,13,0],[0,2,15,10,5,2,17,1,13,0],[26,13,0],[0,16,1,10,12,11,17,0,16,1,13,13,10,9,0,16,1,10,10,4,1,1,13,0],[0,16,1,26,26,10,7,0,21,6,-1,1,13,0],[0,2,12,10,32,0,0,0,2,26,11,13,2,30,11,9,2,16,11,5,2,21,1,10,5,2,12,1,6,-22,10,5,2,12,1,13,0],[0,0,0,2,12,10,5,2,26,1,6,-8,10,5,2,12,1,13,0],[0,2,12,10,19,0,0,0,2,30,11,5,2,17,1,10,5,2,22,1,4,1,13,0],[0,0,2,30,11,
5,2,16,1,10,5,2,22,1,13,0],[0,2,28,10,36,2,31,10,32,0,0,2,12,10,5,2,27,1,6,-8,10,19,2,12,10,15,0,2,29,11,5,2,5,1,10,5,2,18,1,13,0],[0,2,26,11,19,0,0,2,29,7,10,11,0,2,19,7,10,5,2,18,1,1,13,0],[3,2,37,123,13,0],[3,2,37,125,13,0],[0,3,1,37,10,5,2,18,1,13,2],[0,0,16,2,32,32,9,9,6,-6,10,5,2,17,1,13,0],[0,2,33,10,14,0,0,2,24,10,5,2,33,1,6,-8,1,13,0],[0,3,8,102,117,110,99,116,105,111,110,10,31,2,144,10,27,2,13,10,23,2,35,10,19,2,39,10,15,2,12,10,11,0,2,34,11,5,2,5,1,1,13,0],[2,117,13,2],[0,0,2,36,4,10,39,
0,2,125,11,5,2,117,1,10,29,2,13,10,25,0,2,38,4,10,19,2,12,10,15,0,16,2,44,44,59,59,4,10,5,2,24,1,13,0],[0,0,2,37,11,5,2,141,1,10,14,2,13,10,10,3,1,61,10,5,2,13,1,13,2],[0,3,1,91,10,50,2,13,10,46,0,2,141,4,10,40,2,13,10,36,0,0,0,3,1,44,4,10,13,2,13,10,9,2,141,10,5,2,13,1,6,-19,10,12,0,3,1,93,11,5,2,5,1,1,13,2],[0,3,1,40,10,60,2,13,10,56,0,0,2,141,11,5,2,52,1,4,10,44,2,13,10,40,0,0,3,1,44,10,19,2,13,10,15,0,2,141,11,5,2,52,1,10,5,2,13,1,6,-23,10,12,0,3,1,41,11,5,2,5,1,1,13,2],[2,40,13,2],[0,2,13,10,
24,0,0,0,2,33,11,9,2,45,11,5,2,30,1,10,5,2,13,1,6,-18,1,13,0],[0,2,13,10,14,0,0,2,42,10,5,2,13,1,6,-8,1,13,0],[0,2,45,11,5,2,30,1,13,0],[0,0,16,2,44,44,59,59,10,5,2,24,1,11,5,2,25,1,13,2],[0,2,43,11,4,26,1],[0,2,43,11,5,2,46,1,13,0],[0,2,69,11,5,2,47,1],[0,0,2,51,10,9,2,13,10,5,2,44,1,11,40,0,2,48,10,5,2,44,1,11,30,0,0,0,3,3,101,110,100,10,5,2,144,1,7,10,13,2,88,10,9,2,13,10,5,2,44,1,1],[0,2,49,10,22,2,13,10,18,3,1,61,10,13,2,13,10,9,2,87,10,5,2,13,1,13,0],[0,2,121,11,5,2,50,1,13,0],[0,2,127,10,76,
2,13,10,72,0,2,121,11,5,2,52,1,10,62,0,0,2,13,10,22,0,3,1,44,4,10,15,2,13,10,11,0,2,121,11,5,2,52,1,1,6,-25,10,32,2,13,10,28,0,3,1,93,11,21,0,3,1,44,10,10,2,13,10,6,3,1,93,1,11,5,2,5,1,1,13,0],[0,2,53,11,45,2,56,11,41,2,59,11,37,2,63,11,33,2,83,11,29,2,84,11,25,2,64,11,21,2,85,11,17,2,67,11,13,2,86,11,9,2,81,11,5,2,60,1,13,0],[3,1,126,13,0],[0,3,2,105,102,10,36,2,144,10,32,2,87,10,28,2,41,10,24,0,2,54,6,-2,10,17,0,2,55,4,10,11,0,2,117,11,5,2,5,1,1,13,0],[0,3,6,101,108,115,101,105,102,10,13,2,144,
10,9,2,87,10,5,2,41,1,13,0],[0,3,4,101,108,115,101,10,9,2,144,10,5,2,41,1,13,0],[0,3,6,115,119,105,116,99,104,10,47,2,144,10,43,2,87,10,39,0,2,43,6,-2,10,32,2,24,10,28,2,12,10,24,0,2,57,6,-2,10,17,0,2,58,4,10,11,0,2,117,11,5,2,5,1,1,13,0],[0,3,4,99,97,115,101,10,17,2,144,10,13,2,87,10,9,2,43,10,5,2,41,1,13,0],[0,3,9,111,116,104,101,114,119,105,115,101,10,9,2,144,10,5,2,41,1,13,0],[0,3,3,102,111,114,10,27,2,144,10,23,2,13,10,19,2,61,10,15,2,41,10,11,0,2,117,11,5,2,5,1,1,13,0],[0,3,6,112,97,114,102,
111,114,10,27,2,144,10,23,2,13,10,19,2,62,10,15,2,41,10,11,0,2,117,11,5,2,5,1,1,13,0],[0,0,2,141,10,14,2,13,10,10,3,1,61,10,5,2,87,1,11,34,0,3,1,40,10,27,2,13,10,23,2,141,10,19,2,13,10,15,3,1,61,10,10,2,87,10,6,3,1,41,1,1,13,0],[0,0,2,141,10,14,2,13,10,10,3,1,61,10,5,2,87,1,11,51,0,3,1,40,10,44,2,13,10,40,2,141,10,36,2,13,10,32,3,1,61,10,27,2,87,10,23,0,0,3,1,44,10,9,2,13,10,5,2,122,1,4,10,6,3,1,41,1,1,13,0],[0,3,5,119,104,105,108,101,10,23,2,144,10,19,2,87,10,15,2,41,10,11,0,2,117,11,5,2,5,1,1,13,
0],[0,0,2,65,11,5,2,66,1,10,15,9,0,0,2,13,10,5,2,141,1,5,-8,1,13,0],[0,3,6,103,108,111,98,97,108,10,5,2,144,1,13,0],[0,3,10,112,101,114,115,105,115,116,101,110,116,10,5,2,144,1,13,0],[0,3,3,116,114,121,10,25,2,144,10,21,2,41,10,17,0,2,68,4,10,11,0,2,117,11,5,2,5,1,1,13,0],[0,3,5,99,97,116,99,104,10,29,2,144,10,25,0,0,2,12,10,13,2,141,10,9,2,13,10,5,2,43,1,4,10,5,2,41,1,13,0],[0,2,79,10,17,2,70,10,13,2,75,10,9,2,13,10,5,2,44,1,13,0],[0,9,0,2,11,5,-2,10,7,0,2,71,7,1,13,0],[0,16,7,40,40,41,41,44,44,
59,59,37,37,123,123,125,125,11,36,0,16,1,61,61,10,9,0,16,1,61,61,7,1,11,20,2,20,11,16,3,3,46,46,46,11,9,2,72,11,5,2,73,1,13,0],[0,0,3,1,46,4,10,25,16,8,43,43,45,45,42,42,47,47,92,92,39,39,40,40,94,94,10,5,2,74,1,13,0],[0,0,2,100,11,27,3,2,38,38,11,21,3,2,124,124,11,15,16,5,38,38,124,124,94,94,64,64,58,58,1,10,5,2,74,1,13,0],[0,9,0,2,11,5,-2,10,37,0,3,3,46,46,46,11,28,0,3,1,46,10,7,16,1,48,57,1,11,15,16,5,97,122,65,90,48,57,95,95,39,39,1,1,13,0],[9,0,0,0,2,138,10,5,2,13,1,11,11,0,2,76,10,5,2,13,1,
1,5,-20,13,0],[9,0,0,2,77,11,13,17,4,44,44,59,59,32,32,10,13,1,5,-16,13,0],[0,16,3,40,40,123,123,91,91,10,17,2,78,10,13,0,16,3,41,41,125,125,93,93,4,1,13,2],[9,0,0,2,77,11,30,0,3,3,46,46,46,10,5,2,18,1,11,17,17,6,41,41,125,125,93,93,59,59,37,37,10,13,1,5,-33,13,0],[0,2,143,18,2,2,80,19,13,2],[0,3,2,105,102,11,244,3,3,102,111,114,11,237,3,3,101,110,100,11,230,3,3,116,114,121,11,223,3,4,99,97,115,101,11,215,3,6,101,108,115,101,105,102,11,205,3,4,115,112,109,100,11,197,3,5,99,97,116,99,104,11,188,3,
5,119,104,105,108,101,11,179,3,5,98,114,101,97,107,11,170,3,4,101,108,115,101,11,162,3,6,115,119,105,116,99,104,11,152,3,6,103,108,111,98,97,108,11,142,3,6,114,101,116,117,114,110,11,132,3,6,112,97,114,102,111,114,11,122,3,8,102,117,110,99,116,105,111,110,11,110,3,8,99,111,110,116,105,110,117,101,11,98,3,8,99,108,97,115,115,100,101,102,11,86,3,9,111,116,104,101,114,119,105,115,101,11,73,3,10,112,101,114,115,105,115,116,101,110,116,11,59,3,2,112,105,11,53,3,3,101,112,115,11,46,3,3,110,97,110,11,39,
3,3,78,97,78,11,32,3,3,105,110,102,11,25,3,3,73,110,102,11,18,3,1,105,11,13,3,1,106,11,8,3,3,97,110,115,1,13,0],[0,2,82,10,30,2,13,10,26,0,0,2,126,10,10,2,122,10,6,3,1,41,1,4,10,9,2,41,10,5,2,117,1,13,0],[0,3,4,115,112,109,100,10,5,2,144,1,13,0],[0,3,5,98,114,101,97,107,10,5,2,144,1,13,0],[0,3,6,114,101,116,117,114,110,10,5,2,144,1,13,0],[0,3,1,33,10,5,2,15,1,13,0],[0,3,8,99,111,110,116,105,110,117,101,10,5,2,144,1,13,0],[0,2,13,10,11,0,2,89,4,10,5,2,13,1,13,0],[0,2,13,10,9,2,89,10,5,2,13,1,13,0],
[0,0,2,131,10,31,2,13,10,27,3,1,40,10,22,2,13,10,18,2,90,10,14,3,1,41,10,9,2,13,10,5,2,87,1,11,5,2,91,1,13,0],[0,0,0,2,141,11,5,2,52,1,4,10,37,2,13,10,33,0,0,3,1,44,10,23,2,13,10,19,0,2,141,11,9,2,52,11,5,2,9,1,10,5,2,13,1,6,-27,1,13,0],[0,2,93,10,24,0,0,2,92,10,15,2,13,10,11,0,2,93,11,5,2,8,1,1,6,-18,1,13,0],[3,2,124,124,13,0],[0,2,95,10,24,0,0,2,94,10,15,2,13,10,11,0,2,95,11,5,2,8,1,1,6,-18,1,13,0],[3,2,38,38,13,0],[0,2,97,10,24,0,0,2,96,10,15,2,13,10,11,0,2,97,11,5,2,8,1,1,6,-18,1,13,0],[0,3,1,
124,10,8,0,3,1,124,7,1,13,0],[0,2,99,10,24,0,0,2,98,10,15,2,13,10,11,0,2,99,11,5,2,8,1,1,6,-18,1,13,0],[0,3,1,38,10,8,0,3,1,38,7,1,13,0],[0,2,101,10,18,0,0,2,100,10,9,2,13,10,5,2,101,1,6,-12,1,13,0],[0,0,16,4,61,61,62,62,60,60,126,126,10,7,16,1,61,61,1,11,9,16,2,60,60,62,62,1,13,0],[0,2,103,10,24,0,0,2,102,10,15,2,13,10,11,0,2,103,11,5,2,8,1,1,6,-18,1,13,0],[3,1,58,13,0],[0,2,105,10,32,2,13,10,28,0,0,2,104,10,19,2,13,10,15,0,2,105,11,5,2,8,1,10,5,2,13,1,6,-22,1,13,0],[16,2,43,43,45,45,13,0],[0,2,
107,10,22,0,0,2,13,10,13,2,106,10,9,2,13,10,5,2,107,1,6,-16,1,13,0],[0,0,3,1,46,4,10,11,16,3,42,42,47,47,92,92,1,13,0],[0,0,0,0,2,109,10,5,2,13,1,6,-8,10,5,2,110,1,11,5,2,108,1,13,0],[0,2,131,10,39,2,13,10,35,0,0,3,1,40,10,22,2,13,10,18,2,90,10,14,3,1,41,10,9,2,13,10,5,2,87,1,11,5,2,125,1,1,13,0],[16,3,126,126,43,43,45,45,13,0],[0,2,114,10,44,0,0,2,111,11,35,0,2,13,10,5,2,112,1,11,25,0,2,13,10,19,2,113,10,15,2,13,10,11,0,2,107,11,5,2,8,1,1,1,6,-38,1,13,0],[16,1,39,39,13,0],[3,2,46,39,13,0],[0,0,3,
1,46,4,10,6,3,1,94,1,13,0],[0,2,115,11,13,0,16,1,63,63,10,5,2,125,1,1,13,0],[0,2,118,11,25,2,116,11,21,2,121,11,17,2,132,11,13,2,137,11,9,2,138,11,5,2,117,1,13,0],[0,3,1,40,10,16,2,88,10,12,0,3,1,41,11,5,2,5,1,1,13,2],[0,3,3,101,110,100,10,5,2,144,1,13,0],[0,0,9,0,16,1,48,57,5,-4,10,48,0,0,16,1,46,46,10,26,0,16,5,42,42,47,47,92,92,94,94,39,39,7,10,10,0,16,1,48,57,6,-4,1,4,10,13,0,2,119,4,10,7,0,2,120,4,1,11,47,0,16,1,46,46,10,39,0,16,5,42,42,47,47,92,92,94,94,39,39,7,10,23,9,0,16,1,48,57,5,-4,10,
13,0,2,119,4,10,7,0,2,120,4,1,1,13,2],[0,16,4,101,101,69,69,100,100,68,68,10,21,0,16,2,43,43,45,45,4,10,11,9,0,16,1,48,57,5,-4,1,13,0],[0,16,2,105,105,106,106,10,5,2,144,1,13,0],[0,2,141,10,145,2,13,10,141,0,0,0,2,130,10,13,2,13,10,9,2,143,10,5,2,13,1,11,118,0,2,129,10,20,2,122,10,16,0,3,1,125,11,5,2,5,1,10,5,2,13,1,11,93,0,2,126,10,20,2,124,10,16,0,3,1,41,11,5,2,5,1,10,5,2,13,1,11,68,0,2,128,10,20,2,88,10,16,0,3,1,41,11,5,2,5,1,10,5,2,13,1,11,43,0,2,131,10,37,2,13,10,33,2,125,10,29,0,0,3,1,40,10,
16,2,124,10,12,0,3,1,41,11,5,2,5,1,1,4,10,5,2,13,1,1,6,-135,1,13,0],[0,2,13,10,47,0,2,123,11,5,2,88,1,10,37,2,13,10,33,0,0,3,1,44,10,23,2,13,10,19,0,2,123,11,9,2,88,11,5,2,8,1,10,5,2,13,1,6,-27,1,13,2],[3,1,58,13,0],[0,2,122,11,5,2,13,1,13,0],[0,2,141,10,14,0,0,2,130,10,5,2,141,1,6,-8,1,13,0],[3,1,40,13,0],[3,1,91,13,0],[3,2,46,40,13,0],[3,1,123,13,0],[3,1,46,13,0],[3,1,64,13,0],[0,3,1,91,10,24,2,13,10,20,2,133,10,16,2,13,10,12,0,3,1,93,11,5,2,5,1,1,13,2],[0,2,134,10,32,0,0,2,13,10,6,3,1,44,1,6,-9,
10,18,0,0,2,13,10,9,2,135,10,5,2,134,1,6,-12,1,13,2],[0,0,0,2,13,10,6,3,1,44,1,6,-9,10,52,2,13,10,48,0,2,145,4,10,42,0,0,0,0,2,13,10,6,3,1,44,1,6,-9,10,9,2,13,10,5,2,145,1,6,-22,10,15,0,0,2,13,10,6,3,1,44,1,6,-9,1,13,2],[9,0,0,2,13,10,5,2,136,1,5,-8,13,2],[0,3,1,59,11,9,2,16,11,5,2,30,1,13,0],[0,3,1,123,10,18,2,13,10,14,2,133,10,10,2,13,10,6,3,1,125,1,13,2],[0,2,139,11,5,2,140,1,13,0],[0,3,1,39,10,31,0,0,3,2,39,39,11,9,17,2,10,13,39,39,1,6,-14,10,12,0,3,1,39,11,5,2,10,1,1,13,2],[0,3,1,34,10,31,0,
0,3,2,34,34,11,9,17,2,10,13,34,34,1,6,-14,10,12,0,3,1,34,11,5,2,10,1,1,13,2],[0,2,143,18,2,2,142,19,13,2],[0,3,2,105,102,11,186,3,3,102,111,114,11,179,3,3,101,110,100,11,172,3,3,116,114,121,11,165,3,4,99,97,115,101,11,157,3,6,101,108,115,101,105,102,11,147,3,4,115,112,109,100,11,139,3,5,99,97,116,99,104,11,130,3,5,119,104,105,108,101,11,121,3,5,98,114,101,97,107,11,112,3,4,101,108,115,101,11,104,3,6,115,119,105,116,99,104,11,94,3,6,103,108,111,98,97,108,11,84,3,6,114,101,116,117,114,110,11,74,3,6,
112,97,114,102,111,114,11,64,3,8,102,117,110,99,116,105,111,110,11,52,3,8,99,111,110,116,105,110,117,101,11,40,3,8,99,108,97,115,115,100,101,102,11,28,3,9,111,116,104,101,114,119,105,115,101,11,15,3,10,112,101,114,115,105,115,116,101,110,116,1,13,0],[0,16,2,97,122,65,90,10,16,0,16,4,97,122,65,90,95,95,48,57,6,-10,1,13,0],[0,16,4,97,122,65,90,95,95,48,57,7],[2,146,13,0],[0,0,2,131,10,31,2,13,10,27,3,1,40,10,22,2,13,10,18,2,90,10,14,3,1,41,10,9,2,13,10,5,2,145,1,11,5,2,147,1,13,0],[0,2,148,10,22,0,
0,2,13,10,13,2,92,10,9,2,13,10,5,2,148,1,6,-16,1,13,0],[0,2,149,10,22,0,0,2,13,10,13,2,94,10,9,2,13,10,5,2,149,1,6,-16,1,13,0],[0,2,150,10,22,0,0,2,13,10,13,2,96,10,9,2,13,10,5,2,150,1,6,-16,1,13,0],[0,2,151,10,22,0,0,2,13,10,13,2,98,10,9,2,13,10,5,2,151,1,6,-16,1,13,0],[0,2,152,10,22,0,0,2,13,10,13,2,100,10,9,2,13,10,5,2,152,1,6,-16,1,13,0],[0,2,153,10,22,0,0,2,13,10,13,2,102,10,9,2,13,10,5,2,153,1,6,-16,1,13,0],[0,2,155,10,18,0,0,2,154,10,9,2,13,10,5,2,155,1,6,-12,1,13,0],[0,0,2,11,10,17,2,13,10,
13,2,104,10,9,2,11,10,5,2,13,1,11,5,2,104,1,13,0],[0,2,156,10,22,0,0,2,13,10,13,2,106,10,9,2,13,10,5,2,156,1,6,-16,1,13,0],[0,0,0,0,2,109,10,5,2,13,1,6,-8,10,5,2,158,1,11,5,2,157,1,13,0],[0,2,131,10,39,2,13,10,35,0,0,3,1,40,10,22,2,13,10,18,2,90,10,14,3,1,41,10,9,2,13,10,5,2,145,1,11,5,2,125,1,1,13,0],[0,2,159,10,44,0,0,2,111,11,35,0,2,13,10,5,2,112,1,11,25,0,2,13,10,19,2,113,10,15,2,13,10,11,0,2,156,11,5,2,8,1,1,1,6,-38,1,13,0],[0,2,160,11,13,0,16,1,63,63,10,5,2,125,1,1,13,0],[0,2,118,11,25,2,116,
11,21,2,161,11,17,2,132,11,13,2,137,11,9,2,138,11,5,2,117,1,13,0],[0,2,141,10,137,0,0,0,2,13,10,13,2,130,10,9,2,13,10,5,2,143,1,11,114,0,2,129,10,16,2,122,10,12,0,3,1,125,11,5,2,5,1,1,11,93,0,2,126,10,16,2,124,10,12,0,3,1,41,11,5,2,5,1,1,11,72,0,2,13,10,20,2,128,10,16,2,88,10,12,0,3,1,41,11,5,2,5,1,1,11,47,0,2,13,10,41,2,131,10,37,2,13,10,33,2,125,10,29,0,0,2,13,10,21,3,1,40,10,16,2,124,10,12,0,3,1,41,11,5,2,5,1,1,4,1,1,6,-131,1,13,0],[0,2,163,10,29,2,24,10,25,2,12,10,21,0,2,169,4,10,15,2,117,10,
11,2,24,10,7,0,2,32,4,1,13,0],[0,3,8,99,108,97,115,115,100,101,102,10,23,2,144,10,19,2,13,10,15,0,2,166,4,10,9,2,164,10,5,2,43,1,13,0],[0,2,125,10,26,2,13,10,22,0,0,3,1,60,10,13,2,13,10,9,2,165,10,5,2,13,1,4,1,13,0],[0,2,125,10,27,2,13,10,23,0,0,3,1,38,10,13,2,13,10,9,2,125,10,5,2,13,1,6,-17,1,13,0],[0,3,1,40,10,36,2,13,10,32,2,167,10,28,0,0,3,1,44,10,9,2,13,10,5,2,167,1,6,-13,10,10,3,1,41,10,5,2,13,1,13,0],[0,0,0,2,168,10,5,2,13,1,4,10,30,2,141,10,26,0,0,2,13,10,14,3,1,61,10,9,2,13,10,5,2,88,1,4,
10,5,2,13,1,13,0],[3,1,126,13,0],[0,0,0,2,170,11,17,2,178,11,13,2,181,11,9,2,174,11,5,2,43,1,10,9,2,24,10,5,2,12,1,6,-30,13,0],[0,3,10,112,114,111,112,101,114,116,105,101,115,10,23,2,144,10,19,2,13,10,15,0,2,166,4,10,9,2,171,10,5,2,117,1,13,0],[0,0,2,172,10,5,2,13,1,6,-8,13,0],[0,2,43,11,24,0,2,173,10,18,0,0,2,13,10,10,3,1,61,10,5,2,88,1,4,1,1,13,0],[0,2,141,10,30,0,0,2,13,10,22,2,131,10,18,2,13,10,14,0,0,2,125,10,5,2,13,1,6,-8,1,4,1,13,0],[0,3,11,101,110,117,109,101,114,97,116,105,111,110,10,23,
2,144,10,19,2,13,10,15,0,2,166,4,10,9,2,175,10,5,2,117,1,13,0],[0,0,2,176,10,5,2,13,1,6,-8,13,0],[0,2,43,11,29,0,2,141,10,23,2,13,10,19,0,0,3,1,40,10,10,2,177,10,6,3,1,41,1,4,1,1,13,0],[0,2,88,10,15,0,0,3,1,44,10,5,2,88,1,6,-9,1,13,0],[0,3,7,109,101,116,104,111,100,115,10,23,2,144,10,19,2,13,10,15,0,2,166,4,10,9,2,179,10,5,2,117,1,13,0],[0,0,2,180,10,5,2,13,1,6,-8,13,0],[0,2,43,11,32,0,2,184,10,5,2,24,1,11,22,0,0,0,3,3,101,110,100,10,5,2,144,1,7,10,5,2,35,1,1,13,0],[0,3,6,101,118,101,110,116,115,
10,23,2,144,10,19,2,13,10,15,0,2,166,4,10,9,2,182,10,5,2,117,1,13,0],[0,0,2,183,10,5,2,13,1,6,-8,13,0],[0,0,0,2,141,10,31,2,13,10,27,0,0,3,1,40,10,18,2,13,10,14,2,125,10,10,2,13,10,6,3,1,41,1,4,1,4,10,5,2,43,1,13,0],[0,3,8,102,117,110,99,116,105,111,110,10,25,2,144,10,21,2,13,10,17,2,35,10,13,2,185,10,9,2,24,10,5,2,34,1,13,0],[0,0,2,12,10,23,0,2,186,11,17,2,184,11,13,0,0,2,188,7,10,5,2,187,1,1,1,6,-26,13,0],[0,2,13,10,15,9,0,0,2,42,10,5,2,13,1,5,-8,1,13,0],[0,2,12,10,15,0,2,30,11,5,2,17,1,10,5,2,
22,1,13,0],[26,13,0]]}})},"MW/rtc/model/importers/PEG":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(e,g,d){this.rules=g;this.names=e;this.root=d},my_strcmp:function(e,g,d,c,b){if(d+b>g)return!1;e=e.substring(d,d+b);g="";for(d=0;d<b;d+=1)g+=String.fromCharCode(c[d]);return e===g},recordRule:function(e,g,d,c,b,a,f,h,l){h=f.length;e[d-1]=0===g&&1===h?f:[{name:c,start:b,end:a,children:f}]},joinRecords:function(e,g){var d=e.length,c=e.pop();1<d&&(0<c.length&&
g)&&(e[d-2]=e[d-2].concat(c))},pretty:function(e,g,d,c){4>arguments.length&&(c="long");3>arguments.length&&(d="");var b=d;if(e){var a=e.children;if(a){var f=String.fromCharCode(10);"short"===c&&(b+="(");b+=this.names[e.name];if("long"===c){var h=g.substring(e.start,e.end),h=h.replace(f,""),h=h.replace(/^[ ]*/,"");10<h.length&&(h=h.substring(0,10)+"...");b=b+" "+h+f}if(0===a.length&&"short"===c)b+=" "+e.start.toString()+" "+e.end.toString()+")";else{for(f=0;f<a.length;f+=1)b="long"===c?b+this.pretty(a[f],
g,d+" ",c):b+(" "+this.pretty(a[f],g,d,c));"short"===c&&(b+=")")}}}return b},parse:function(e){var g=this.rules,d=this.root,c=e.length,b=0,a=0,f=[],h=0,l=[],n=[],p=[],m=[],q=!0;n.push(0,0,d);var r=[];m.push(r);f=g[d];for(h=f.length;0<n.length;)if(d=n.length,a>=h)3<d&&(f=g[n[d-4]],h=f.length,a=n[d-2],d=l.pop(),q||(b=d),this.joinRecords(m,q)),n.pop(),n.pop(),n.pop();else{var d=f[a],s;switch(d){case 0:l.push(b);m.push(r);a+=1;break;case 1:d=l.pop();q||(b=d);this.joinRecords(m,q);a+=1;break;case 2:d=
f[a+1]-1;a+=2;f=g[d];h=f.length;l.push(b);m.push(r);n.push(b,a,d);a=0;break;case 3:s=f[a+1];(q=this.my_strcmp(e,c,b,f.slice(a+2),s))&&(b+=s);a+=s+2;break;case 4:d=l.pop();q||(b=d);this.joinRecords(m,q);q=!0;a+=1;break;case 5:q&&0<l[l.length-2]?(a+=f[a+1],l[l.length-1]=b):q?(a+=f[a+1],l[l.length-1]=b,l[l.length-2]=1,this.joinRecords(m,q),m.push(r)):(a+=2,b=l[l.length-1],q=0<l[l.length-2],l.pop(),l.pop(),this.joinRecords(m,q));break;case 6:this.joinRecords(m,q);q?(a+=f[a+1],l[l.length-1]=b,m.push(r)):
(a+=2,b=l.pop(),q=!0);break;case 7:case 8:7===d&&(q=!q);b=l.pop();this.joinRecords(m,!1);a+=1;break;case 9:l.push(0);a+=1;break;case 10:this.joinRecords(m,q);q?(a+=2,m.push(r)):(b=l.pop(),a+=f[a+1]);break;case 11:this.joinRecords(m,q);q?(l.pop(),a+=f[a+1]):(a+=2,m.push(r));break;case 12:case 15:b>=c?q=!1:(q=String.fromCharCode(f[a+1]),q=e[b]===q);q&&(b+=1);a+=2;break;case 13:if(q){d=f[a+1];s=n[n.length-1];var t=0;0<l.length&&(t=l[l.length-1]);var u=m.length,v=m[u-1],w=[];1<u&&(w=m[u-2]);this.recordRule(m,
d,u,s,t,b,v,w,r)}a+=2;break;case 14:q=!0;a+=1;break;case 16:case 17:s=f[a+1];t=a+2;a+=2+2*s;if(b>=c)q=!1;else{for(u=e.charCodeAt(b);s&&!(s-=1,q=f[t],t+=1,v=f[t],t+=1,q=u>=q&&u<=v););17===d&&(q=!q)}q&&(b+=1);break;case 18:q?(p.push(e),c=l[l.length-1],e=e.substring(c),c=b-c,b=0,a+=2):(a+=3+f[a+1],b=l.pop(),this.joinRecords(m,q));break;case 19:d=l.pop();b!==c||!q?(b=d+c,q=!0):(b=d,q=!1);e=p.pop();c=e.length;this.joinRecords(m,!1);a+=1;break;case 21:(q=b<c)&&(b+=1);a+=1;break;case 26:q=b===c,a+=1}}return q&&
0<m.length&&0<m[0].length?{tree:m[0][0],str:e}:{tree:null,str:e}}})})},"MW/rtc/plugins/embeddedoutputs/model/SplitterPositionModelProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./SplitterPositionModel"],function(h,e,g){return h(e,{requires:function(){return{isApplicable:[],createInstance:["rtc.backingstore"]}},createInstance:function(d){return new g(d)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/embeddedoutputs/model/SplitterPositionModel":function(){define(["dojo/_base/declare",
"dojo/_base/lang","mw-filename-utils/FileNameUtil","MW/rtc/datamodel/FileBackingStoreUtilities"],function(h,e,g,d){return h(null,{_DEFAULT_RIGHT_PANEL_PROPORTION:0.4,constructor:function(c){this._backingStore=c;this._updatedRightPanelProportion=null;this._handleNewScript()},_handleNewScript:function(){g.locationFromPath(d.getAbsoluteFilePathFromBackingStore(this._backingStore))||(this._updatedRightPanelProportion=this._DEFAULT_RIGHT_PANEL_PROPORTION)},loadSplitterPosition:function(c){c.metaData.splitterState?
this.setRightPanelProportion(parseFloat(c.metaData.splitterState.proportion)):this.setDefaultRightPanelProportion();this.onLoaded()},setDefaultRightPanelProportion:function(){this.setRightPanelProportion(this._DEFAULT_RIGHT_PANEL_PROPORTION)},onLoaded:function(){},setRightPanelProportion:function(c){this._updatedRightPanelProportion=c},getRightPanelProportion:function(){return null!==this._updatedRightPanelProportion?this._updatedRightPanelProportion:this._DEFAULT_RIGHT_PANEL_PROPORTION},hasSplitterPosition:function(){return null!==
this._updatedRightPanelProportion},destroy:function(){}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/error/ErrorOutputHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./ErrorOutputHandler"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.outputhandlerservice","rtc.diagnosticmessage","rtc.embeddedoutputs.linenumbertracker"]}},createInstance:function(d,c,b){c=new g(c,b);d.registerOutputPlugin(c);return c},destroyInstance:function(d){d.destroy()}})})},
"MW/rtc/plugins/embeddedoutputs/outputhandlers/error/ErrorOutputHandler":function(){define("dojo/_base/declare dojo/_base/lang MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutputHandler MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResult MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResultInstruction MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerUtility ./ErrorOutput ./ErrorOutputProperties".split(" "),function(h,e,g,d,c,b,a,f){return h([g],{OUTPUT_TYPE:f.OUTPUT_TYPE,
constructor:function(a,b){this._diagnosticMessageFormatter=a;this._lineNumberTracker=b},getOutputFromData:function(b,f){b=e.clone(b);this._cleanData(b);var g=new a({data:b,diagnosticMessageFormatter:this._diagnosticMessageFormatter,lineNumberTracker:this._lineNumberTracker});return new d(c.ADD_OUTPUT,g)},_cleanData:function(a){var c=b.removeControlCharacters(a.text);a.text=b.processBackspaceCharacters(c)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutputHandler":function(){define(["dojo/_base/declare",
"MW/rtc/abstract/AbstractPlugin"],function(h,e){return h(e,{OUTPUT_TYPE:null,constructor:function(){},getOutputFromData:function(e,d){throw Error("Unimplemented API: MW.rtc.plugins.embeddedoutputs.outputhandlers.BaseOutputHandler.getOutputFromData()");}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResult":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(e,g){this._output=g;this._instruction=e},getOutput:function(){return this._output},getInstruction:function(){return this._instruction}})})},
"MW/rtc/plugins/embeddedoutputs/codegen/CodeGenFactoryProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/embeddedoutputs/codegen/CodeGenFactory"],function(h,e,g){return h(e,{requires:function(){return{createInstance:"rtc.embeddedoutputs.model rtc.code.sections.model rtc.code.sections.stale.model rtc.document rtc.internaldocument rtc.clipboard rtc.focusservice rtc.cursor rtc.embeddedoutputs.statehandler rtc.embeddedoutputs rtc.cursorcontroller".split(" ")}},
createInstance:function(d,c,b,a,f,e,h,n,p,m,q){var r={};r.embeddedOutputsModel=d;r.sectionModel=c;r.staleSectionModel=b;r.document=a;r.internalDocument=f;r.clipboard=e;r.focusService=h;r.cursor=n;r.stateHandler=p;r.embeddedOutputsView=m.getEmbeddedOutputsView();r.cursorController=q;return new g(r)}})})},"MW/rtc/plugins/embeddedoutputs/codegen/CodeGenFactory":function(){define(["dojo/_base/declare","MW/rtc/plugins/embeddedoutputs/codegen/EditorCodeGenerator","MW/rtc/plugins/embeddedoutputs/codegen/EditorDocumentProxy"],
function(h,e,g){return h(null,{_editorDocumentProxy:null,constructor:function(d){this._editorDocumentProxy=new g({_sectionModel:d.sectionModel,_staleSectionModel:d.staleSectionModel,_clipboard:d.clipboard,_document:d.document,_internalDocument:d.internalDocument,_embeddedOutputsModel:d.embeddedOutputsModel,_focusService:d.focusService,_cursor:d.cursor,_cursorController:d.cursorController,_embeddedOutputsView:d.embeddedOutputsView});this._embeddedOutputsDependencies={stateHandler:d.stateHandler,embeddedOutputsModel:d.embeddedOutputsModel,
embeddedOutputsView:d.embeddedOutputsView}},createEditorCodeGenerator:function(){var d=new e;d.setEditorDocumentProxy(this._editorDocumentProxy);d.setEmbeddedOutputsDependencies(this._embeddedOutputsDependencies);return d}})})},"MW/rtc/plugins/embeddedoutputs/codegen/EditorCodeGenerator":function(){define("dojo/_base/declare dojo/on dojo/_base/lang dojo/i18n!l10n/nls/actions dojo/dom-style MW/rtc/plugins/embeddedoutputs/codegen/CodeGenWidget dojo/dom-geometry dojo/dom-class dojo/Evented dojo/aspect MW/rtc/plugins/undoredo/commands/CodeGenInteractionCommand".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n){return h([b,k],{_clipboard:null,_output:null,_generatedCode:null,_insertedCode:null,_editorDocumentProxy:null,_stalenessChangeListener:null,_outputPositions:null,_shouldForceDisablement:!1,_stateHandler:null,_embeddedOutputsModel:null,_embeddedOutputsView:null,_enablementConditionCallback:null,_wasDestroyed:!1,_stateHandlerAspects:null,_documentEditedTooltip:d.disableWhenDocumentEdited,_DISABLED_WHILE_RUNNING_TOOLTIP:d.disabledDuringExecution,_CODEGEN_INTERACTION:"CodeGenInteraction",
_MIN_TOP:3,_MAX_TOP:13,_IMAGE_PATH:require.toUrl("images/"),_overrideInlinePosition:!1,_DISABLED_WHILE_READONLY_TOOLTIP:d.disableWhenReadOnly,constructor:function(){this._stateHandlerAspects=[]},postCreate:function(){this.inherited(arguments);this.disableUpdateCodeBtn(this._DISABLED_WHILE_RUNNING_TOOLTIP)},setEditorDocumentProxy:function(a){this._editorDocumentProxy=a;a=this._editorDocumentProxy.getInternalDocument();void 0!==a&&null!==a&&this.own(l.after(a,"readOnlyChanged",g.hitch(this,"_readOnlyStateChangedHandler"),
!0));this._stalenessChangeListener=e(this._editorDocumentProxy,"stalenessChange",g.hitch(this,"_documentEdited"))},_readOnlyStateChangedHandler:function(a){a?this._updateButtonTooltip.label||(this.disableUpdateCodeBtn(this._DISABLED_WHILE_READONLY_TOOLTIP),this.disableCopyBtn()):!this._wasDestroyed&&this._updateButtonTooltip.label===this._DISABLED_WHILE_READONLY_TOOLTIP&&(this.enableUpdateCodeBtn(),this.enableCopyBtn())},setCodeGenDependencies:function(a){this._output=a.output;this._outputPositions=
a.outputPositions;a.overrideInlinePosition&&(this._overrideInlinePosition=a.overrideInlinePosition)},updateCodeArea:function(){this.setText(this.combineCodeLines(this._generatedCode))},setGeneratedCode:function(a){this._generatedCode=a},combineCodeLines:function(a){for(var b=a[0],c=1;c<a.length;c++)b=b+"\n"+a[c];return b},_canEnableCodeBtn:function(){return!this._shouldForceDisablement},_documentEdited:function(a){if(!this._isUpdateCodeButtonDisabled()&&(this._output.codeLinePositions&&0!==this._output.codeLinePositions.length)&&
a){var b=this._editorDocumentProxy.getSectionNumberForNode(this._output.codeLinePositions[this._output.codeLinePositions.length-1].node);a.forEach(function(a){b===this._editorDocumentProxy.getSectionNumberForNode(a)&&(this.disableUpdateCodeBtn(this._documentEditedTooltip),this._shouldForceDisablement=!0)},this)}},_insertGeneratedCode:function(){var a=this._generatedCode;if(a&&0!==a.length){var b=this._output.codeLinePositions[this._output.codeLinePositions.length-1].line+1;a.unshift("");var c=this.combineCodeLines(a);
if(this._insertedCode){var f=this._insertedCode[this._insertedCode.length-1].length,b=b-this._insertedCode.length;this._editorDocumentProxy.replaceCode(c,b+1,b+this._insertedCode.length,f+1)}else this._editorDocumentProxy.insertCode("\n"+c,b);this._insertedCode=this._generatedCode;this._editorDocumentProxy.remapInjectedCodeLinesToOutputs(this._output,this._generatedCode.length,b);this._editorDocumentProxy.setCursor(b+a.length,a[a.length-1].length+1,!0)}},_updateBtnClick:function(a){var b=this._editorDocumentProxy.getDocument();
b.startEdit();this._insertGeneratedCode();this._addInteractionsToUndoRedo(b);b.endEdit();this.detach();a.stopPropagation();this._editorDocumentProxy.setDocumentFocus();this._embeddedOutputsView.outputChanged()},_addInteractionsToUndoRedo:function(a){var b={interactionType:this._CODEGEN_INTERACTION,imgNode:this._previousDomNode},c=this;a.undoable(function(a){a.appendCommand(new n(c,b))})},copyBtnClick:function(){var a=this.inherited(arguments);this._editorDocumentProxy.copyCode(a);event.stopPropagation()},
destroy:function(){this.inherited(arguments);this._stalenessChangeListener&&this._stalenessChangeListener.remove();this._stateHandlerAspects.forEach(function(a){a.remove()});this._stateHandlerAspects=[];this._wasDestroyed=!0},attach:function(a){this.inherited(arguments);this.containerNode&&this.containerNode.parentNode&&(this._setCodeGenLayout(a),this._setCodeGenTopMargin(a));return this._deferredObj.promise},_setCodeGenTopMargin:function(a){0===this._getBottomRef(a)?(f.add(this.containerNode,"noTopMargin"),
f.remove(this.containerNode,"addTopMargin")):(f.add(this.containerNode,"addTopMargin"),f.remove(this.containerNode,"noTopMargin"))},_setCodeGenLayout:function(b){b=a.position(b).w;this._overrideInlinePosition||this.changeCodeGenLayout(b)},changeCodeGenLayout:function(a){this.containerNode&&(void 0!==a&&(null!==a&&"number"===typeof a)&&this._setCodeGenWidgetWidth(a),this._doInlineElementResize())},_setCodeGenWidgetWidth:function(a){this.containerNode.parentNode&&this.isInline(this.containerNode.parentNode)&&
c.set(this.containerNode,"width","calc(100% - "+(a+10)+"px)")},resizeCodeGen:function(){this.inherited(arguments);this._setCodeGenPosition()},_getRefPosition:function(){var a=this._outputPositions,b;if(Array.isArray(a))b=Array.isArray(a[0])?a[0]:a;else if(!a||0===a.length)b=[0,0,1,1],a=[b];a.forEach(function(a){a[1]>=b[1]&&(b=a)});return this._getRefPlotBox(b)},_setCodeGenPosition:function(){var a=this._getTopForElement(this.arrowImgNode);c.set(this.containerNode,{top:a+"px"})},_getElementBounds:function(b){b=
a.position(b);return{width:b.w,height:b.h,left:b.x,top:b.y}},_getTopRef:function(){var a=this._getRefPosition(),b=this._getElementBounds(this._previousDomNode);return a.yLow-b.top},_getBottomRef:function(a){var b=this._getRefPosition();a=this._getElementBounds(a);return b.yHigh-(a.top+a.height)},_getRefPlotBox:function(b){var c=a.position(this._previousDomNode);return{xLow:b[0]*c.w+c.x,xHigh:(b[0]+b[2])*c.w+c.x,yLow:c.h-(b[1]+b[3])*c.h+c.y,yHigh:c.h-b[1]*c.h+c.y}},_getTopForElement:function(a){var b=
this._getTopRef();a=this._getElementBounds(a).height+this._MAX_TOP;b-=a;b<this._MIN_TOP+2?b=this._MIN_TOP+2:b>this._MAX_TOP&&(b=this._MAX_TOP);return b},setEnablementCondition:function(a,b){this._enablementConditionCallback=a;this._disableUpdateCodeBtnTooltipMessage=b},setEmbeddedOutputsDependencies:function(a){this._stateHandler=a.stateHandler;this._embeddedOutputsModel=a.embeddedOutputsModel;this._embeddedOutputsView=a.embeddedOutputsView;this._stateHandlerAspects.push(this._stateHandler.attachListener(this._stateHandler.CHANGE_TYPE_ENUM.EVAL_INITIALIZED,
g.hitch(this,"_handleEvaluationStart")));this._stateHandlerAspects.push(this._stateHandler.attachListener(this._stateHandler.CHANGE_TYPE_ENUM.EVAL_COMPLETE,g.hitch(this,"_handleEvaluationEnd")));this.own(e(this.containerNode,this._eventName,g.hitch(this,function(a){this._embeddedOutputsView.outputChanged()})))},_handleEvaluationStart:function(){this._updateButtonTooltip.label||(this.disableUpdateCodeBtn(this._DISABLED_WHILE_RUNNING_TOOLTIP),this.disableCopyBtn())},_handleEvaluationEnd:function(){var a=
g.hitch(this,function(){!this._wasDestroyed&&this._updateButtonTooltip.label===this._DISABLED_WHILE_RUNNING_TOOLTIP&&(!this._enablementConditionCallback||this._enablementConditionCallback()?this.enableUpdateCodeBtn():this.disableUpdateCodeBtn(this._disableUpdateCodeBtnTooltipMessage),this.enableCopyBtn())});this._embeddedOutputsModel.whenOutputsReady(a)}})})},"MW/rtc/plugins/embeddedoutputs/codegen/CodeGenWidget":function(){define("dojo/dom-style dojo/_base/declare dojo/dom-class dojo/dom-attr dojo/window dojo/on dojo/touch dojo/_base/lang dojo/dom-construct dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/CodeGenWidget.html dojo/i18n!l10n/nls/actions dijit/Tooltip dojo/fx dojo/fx/easing dojo/Deferred dojo/has mw-html-utils/HtmlUtils dojo/NodeList-traverse".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v){var w=!0;return e([l,n],{baseClass:"codeGen",templateString:p,_MAX_TEXT_SIZE:6,_MIN_TEXT_SIZE:1,_TOOLTIP_SHOW_DELAY:0,_TOOLTIP_HIDE_DELAY:100,_MIN_CODE_WIDTH:10,_updateCodeHandler:null,_copyLabel:m.copyLabel,_codeLabel:m.codeLabel,_updateCodeLabel:m.updateCodeLabel,_isCodeExpanded:!1,_updateButtonTooltip:null,_codeGenAreaSlideAnim:null,_codeDivMinWidth:0,_animationDuration:300,_windowMouseMoveListener:null,_windowMouseUpListener:null,_arrowImgPath:require.toUrl("images/"),
_previousDomNode:null,_animationCompleteEvent:document.createEvent("CustomEvent"),_eventName:"AnimationDone",_deferredObj:null,_HAS_POINTER_EVENTS:window.PointerEvent,postCreate:function(a){this.inherited(arguments);this.setArrowImagePath(this._getImageUrl());this._addEventHandlers();this._setupTooltip();this._animationCompleteEvent.initEvent(this._eventName,!0,!0)},_getImageUrl:function(){var a=v.parseUrl(this._IMAGE_PATH);return a.protocol+"//"+a.hostname+":"+a.port+a.pathname},attach:function(a){if(this.containerNode&&
this.containerNode.parentNode&&this._previousDomNode===a)return null;this._deferredObj=new t;this._previousDomNode=a;k.place(this.containerNode,this._previousDomNode,"after");0===this._codeDivMinWidth&&(this._codeDivMinWidth=h.get(this.codeDiv,"min-width"));this._setBusyIndicator();this.toggleCode();return this._deferredObj.promise},detach:function(){this.containerNode&&this.containerNode.parentNode&&this.containerNode.parentNode.removeChild(this.containerNode)},destroy:function(){this.inherited(arguments);
this._updateCodeHandler&&this._updateCodeHandler.remove();this._windowMouseMoveListener&&this._windowMouseMoveListener.remove()},setArrowImagePath:function(a){this._arrowImgPath=a;this._updateArrowImageSrc()},_updateArrowImageSrc:function(){d.set(this.arrowImgNode,"src",this._arrowImgPath+"BlueArrow.png")},_WindowButtonMouseMove:function(a){d.set(this.textarea,"readOnly",!1);a.stopPropagation()},_WindowButtonMouseUp:function(a){d.set(this.textarea,"readOnly",!0);this._windowMouseMoveListener.pause();
window.removeEventListener(this._HAS_POINTER_EVENTS?"pointerup":"mouseup",this._windowMouseUpListener,!0);a.stopPropagation()},_addEventHandlers:function(){this.own(b(this.codeDiv,"click",f.hitch(this,"_setToggleAction")));this._updateCodeHandler=b.pausable(this.updateBtn,"click",f.hitch(this,"_updateBtnClick"));this.own(b(this.copyBtn,"click",f.hitch(this,"copyBtnClick")));this.own(b(this.containerNode,a.press,f.hitch(this,function(a){a.stopPropagation()})));this.own(b(this.textarea,"click",f.hitch(this,
function(a){a.stopPropagation()})));this.own(b(this.textarea,"dragstart",function(a){dojo.stopEvent(a)}));this.own(b(this.textarea,"dragend",function(a){dojo.stopEvent(a)}));this.own(b(this.textarea,a.press,f.hitch(this,function(c){this._windowMouseMoveListener||(this._windowMouseMoveListener=b.pausable(window,a.move,f.hitch(this,"_WindowButtonMouseMove")));this._windowMouseMoveListener.resume();this._windowMouseUpListener=f.hitch(this,"_WindowButtonMouseUp");window.addEventListener(this._HAS_POINTER_EVENTS?
"pointerup":"mouseup",this._windowMouseUpListener,!0);c.stopPropagation()})));this.own(b(this.textarea,"keydown",f.hitch(this,function(a){this._isCopyKeyDownEvent(a)||a.preventDefault()})));this.own(b(this.containerNode,"mousewheel",f.hitch(this,function(a){a.stopPropagation()})));this.own(b(this.containerNode,a.release,f.hitch(this,function(a){a.stopPropagation()})));this.own(b(this.updateBtn,a.leave,f.hitch(this,function(a){this.isValidLeaveEvent(a)&&q.hide(this.updateBtn)})));(u("trident")||u("ie")||
u("edge"))&&this.own(b(this.textarea,"selectstart",function(a){a.stopPropagation()}))},_isCopyKeyDownEvent:function(a){if("keydown"===a.type){var b=this._getKeyCode(a);return b&&67===b&&(a.ctrlKey||a.metaKey)}},_getKeyCode:function(a){return a.which?a.which:a.keyCode?a.keyCode:a.charCode?a.charCode:a.key?a.key:null},isValidLeaveEvent:function(a){return!(a.relatedTarget&&g.contains(a.relatedTarget,"dijitTooltipConnector"))},_setupTooltip:function(){this._updateButtonTooltip=new q({connectId:this.updateBtn,
position:["below","before","after","above"],showDelay:this._TOOLTIP_SHOW_DELAY,hideDelay:this._TOOLTIP_HIDE_DELAY})},_setCodeGenSlideInTransition:function(){h.set(this.codeGenArea,"display","none");var a=this;this._codeGenAreaSlideAnim=r.wipeIn({node:this.codeGenArea,duration:this._animationDuration,easing:s.linear,beforeBegin:function(){d.set(a.arrowImgNode,"src",a._arrowImgPath+"BlueArrowUp.png");g.add(a.codeGenArea,"expanded")}});b(this._codeGenAreaSlideAnim,"End",function(){a.containerNode&&(a._doInlineElementResize(),
a.containerNode.dispatchEvent(a._animationCompleteEvent),a._scrollCodeGenToView(),void 0!==a._deferredObj&&null!==a._deferredObj&&a._deferredObj.resolve("success"))},!0);this._codeGenAreaSlideAnim.play()},_setCodeGenSlideOutTransition:function(){var a=this;h.set(this.codeGenArea,"display","block");this._codeGenAreaSlideAnim=r.wipeOut({node:this.codeGenArea,duration:this._animationDuration,easing:s.linear});b(this._codeGenAreaSlideAnim,"End",function(){a.containerNode&&(d.set(a.arrowImgNode,"src",
a._arrowImgPath+"BlueArrow.png"),g.remove(a.codeGenArea,"expanded"),a._doInlineElementResize(),a.containerNode.dispatchEvent(a._animationCompleteEvent),void 0!==a._deferredObj&&null!==a._deferredObj&&a._deferredObj.resolve("success"))},!0);this._codeGenAreaSlideAnim.play()},toggleCode:function(){w?this._showCode():this._hideCode()},_setToggleAction:function(){this._isCodeExpanded?this._hideCode():this._showCode()},_hideCode:function(){this._isCodeExpanded=w=!1;this._setCodeGenSlideOutTransition()},
_showCode:function(){this._isCodeExpanded=w=!0;this._setCodeGenSlideInTransition()},_updateLayout:function(){var a=0,b=this._MIN_TEXT_SIZE,c=this.textarea.value.split("\n"),a=c.length,f=0;a>this._MAX_TEXT_SIZE?(b=this._MAX_TEXT_SIZE,f=parseInt(h.get(this.textarea,"font-size"))/2):a>this._MIN_TEXT_SIZE&&(b=a);this.textarea.rows=b;this.textarea.scrollTop=f;this._setCodeAreaWidth(c);h.set(this.codeGenArea,"height",b+2.7+"rem")},_setCodeAreaWidth:function(a){a=a.sort(function(a,b){return b.length-a.length})[0].length/
2+2;a>this._MIN_CODE_WIDTH&&h.set(this.codeGenArea,"min-width",a+"rem");this._doInlineElementResize()},copyBtnClick:function(){return this.getSelectedText()},getSelectedText:function(){var a={text:"",html:""};if("selectionStart"in this.textarea)this.textarea.selectionStart!=this.textarea.selectionEnd&&(a.text=this.textarea.value.substring(this.textarea.selectionStart,this.textarea.selectionEnd));else{var b=document.selection.createRange();b.parentElement()===this.textarea&&(a.text=b.text)}""===a.text&&
(a.text=this.textarea.value);this.textarea.selectionStart=this.textarea.selectionEnd;return a},setText:function(a){g.remove(this.textarea,"codegenprogressbar");void 0!==a&&(null!==a&&"string"===typeof a)&&(this.textarea.value=a,this._updateLayout())},_updateBtnClick:function(a){},_setBusyIndicator:function(){""===this.textarea.value&&g.add(this.textarea,"codegenprogressbar")},disableUpdateCodeBtn:function(a){g.add(this.updateBtn,"disabled");this._updateCodeHandler.pause();this._updateButtonTooltip.label=
a},enableUpdateCodeBtn:function(){this._canEnableCodeBtn()&&(this._updateButtonTooltip.label="",g.remove(this.updateBtn,"disabled"),this._updateCodeHandler.resume())},disableCopyBtn:function(){this.copyBtn.disabled=!0},enableCopyBtn:function(){this.copyBtn.disabled=!1},_canEnableCodeBtn:function(){return!0},_isUpdateCodeButtonDisabled:function(){return g.contains(this.updateBtn,"disabled")},_scrollCodeGenToView:function(){c.scrollIntoView(this.containerNode)},disable:function(){g.add(this.containerNode,
"disabled")},enable:function(){g.remove(this.containerNode,"disabled")},_doInlineElementResize:function(){this.containerNode.parentNode&&this.isInline(this.containerNode.parentNode)&&this.resizeCodeGen()},resizeCodeGen:function(){var a=h.get(this.containerNode,"width");this._codeDivMinWidth>a?(g.add(this.codeLabel,"hideLabel"),g.add(this.codeDiv,"diminishCode")):(g.remove(this.codeLabel,"hideLabel"),g.remove(this.codeDiv,"diminishCode"));h.get(this.codeGenArea,"width")>a&&this._isCodeExpanded?(g.add(this.codeDiv,
"outlineBorder"),g.add(this.codeGenArea,"outerBorder")):(g.remove(this.codeDiv,"outlineBorder"),g.remove(this.codeGenArea,"outerBorder"))},isInline:function(a){for(a=a.parentNode;a&&a!==document;){if(g.contains(a,"inlineElement"))return!0;a=a.parentNode}return!1},isCodeGenAttached:function(){return this.containerNode&&this.containerNode.parentNode}})})},"dojo/NodeList-traverse":function(){define(["./query","./_base/lang","./_base/array"],function(h,e,g){var d=h.NodeList;e.extend(d,{_buildArrayFromCallback:function(c){for(var b=
[],a=0;a<this.length;a++){var f=c.call(this[a],this[a],b);f&&(b=b.concat(f))}return b},_getUniqueAsNodeList:function(c){for(var b=[],a=0,f;f=c[a];a++)1==f.nodeType&&-1==g.indexOf(b,f)&&b.push(f);return this._wrap(b,null,this._NodeListCtor)},_getUniqueNodeListWithParent:function(c,b){var a=this._getUniqueAsNodeList(c),a=b?h._filterResult(a,b):a;return a._stash(this)},_getRelatedUniqueNodes:function(c,b){return this._getUniqueNodeListWithParent(this._buildArrayFromCallback(b),c)},children:function(c){return this._getRelatedUniqueNodes(c,
function(b,a){return e._toArray(b.childNodes)})},closest:function(c,b){return this._getRelatedUniqueNodes(null,function(a,f){do if(h._filterResult([a],c,b).length)return a;while(a!=b&&(a=a.parentNode)&&1==a.nodeType);return null})},parent:function(c){return this._getRelatedUniqueNodes(c,function(b,a){return b.parentNode})},parents:function(c){return this._getRelatedUniqueNodes(c,function(b,a){for(var c=[];b.parentNode;)b=b.parentNode,c.push(b);return c})},siblings:function(c){return this._getRelatedUniqueNodes(c,
function(b,a){for(var c=[],d=b.parentNode&&b.parentNode.childNodes,e=0;e<d.length;e++)d[e]!=b&&c.push(d[e]);return c})},next:function(c){return this._getRelatedUniqueNodes(c,function(b,a){for(var c=b.nextSibling;c&&1!=c.nodeType;)c=c.nextSibling;return c})},nextAll:function(c){return this._getRelatedUniqueNodes(c,function(b,a){for(var c=[],d=b;d=d.nextSibling;)1==d.nodeType&&c.push(d);return c})},prev:function(c){return this._getRelatedUniqueNodes(c,function(b,a){for(var c=b.previousSibling;c&&1!=
c.nodeType;)c=c.previousSibling;return c})},prevAll:function(c){return this._getRelatedUniqueNodes(c,function(b,a){for(var c=[],d=b;d=d.previousSibling;)1==d.nodeType&&c.push(d);return c})},andSelf:function(){return this.concat(this._parent)},first:function(){return this._wrap(this[0]&&[this[0]]||[],this)},last:function(){return this._wrap(this.length?[this[this.length-1]]:[],this)},even:function(){return this.filter(function(c,b){return 0!=b%2})},odd:function(){return this.filter(function(c,b){return 0==
b%2})}});return d})},"MW/rtc/plugins/undoredo/commands/CodeGenInteractionCommand":function(){define(["dojo/_base/declare","mw-log/Log","MW/rtc/plugins/undoredo/commands/CommandInterface"],function(h,e,g){return h(g,{_codeGen:null,_clientEventArgs:null,constructor:function(d,c){this._codeGen=d;this._clientEventArgs=c},execute:function(){this._codeGen.detach()},unexecute:function(){this._codeGen.containerNode&&this._codeGen.attach(this._clientEventArgs.imgNode)}})})},"MW/rtc/plugins/embeddedoutputs/codegen/EditorDocumentProxy":function(){define("dojo/_base/declare dojo/_base/lang dojo/Evented dojo/aspect MW/rtc/model/DocumentUtilities MW/rtc/plugins/cutcopypaste/CutCopyPasteService".split(" "),
function(h,e,g,d,c,b){return h(g,{_sectionModel:null,_staleSectionModel:null,_clipboard:null,_document:null,_internalDocument:null,_embeddedOutputsModel:null,_focusService:null,_documentStaleEditAspect:null,_cursor:null,_cursorController:null,constructor:function(a){e.mixin(this,a);this._staleSectionModel&&(this._documentStaleEditAspect=d.after(this._staleSectionModel,"onModelUpdated",e.hitch(this,"_documentEdited"),!0))},setDocumentFocus:function(){this._focusService.setFocus()},getInternalDocument:function(){return this._internalDocument},
_documentEdited:function(a){this.emit("stalenessChange",a)},getDocument:function(){return this._document},insertCode:function(a,b){this._staleSectionModel&&this._documentStaleEditAspect.remove();var c=this._document.getLineText(b);this._document.insertText(a,b,c.length+1);this._staleSectionModel&&(this._documentStaleEditAspect=d.after(this._staleSectionModel,"onModelUpdated",e.hitch(this,"_documentEdited"),!0))},setCursor:function(a,b,c){this._cursorController.clearSelection();this._cursor.setLineColumn(a,
b,c)},replaceCode:function(a,b,c,g){this._staleSectionModel&&this._documentStaleEditAspect.remove();this._document.replaceText(a,b,1,c,g);this._staleSectionModel&&(this._documentStaleEditAspect=d.after(this._staleSectionModel,"onModelUpdated",e.hitch(this,"_documentEdited"),!0))},copyCode:function(a){b.copyContent(this._clipboard,a)},getSectionNumberForNode:function(a){return this._sectionModel.getSectionNumberForNode(a)},remapInjectedCodeLinesToOutputs:function(a,b,c){a.codeLinePositions=this._addGeneratedCodeLinePositions(a.codeLinePositions,
c,b);this._moveOutputToRegionByLineNumber(a,c+b)},_addGeneratedCodeLinePositions:function(a,b,c){var d=[];a.forEach(function(a){a.line>b-1?a.destroy():d.push(a)});a=d;for(var e=0;e<c;e++){var g=this._internalDocument.getLineNode(b+e);0<g.getText().length&&(g=this._document.createLinePosition(g,!1),a.push(g))}return a},_moveOutputToRegionByLineNumber:function(a,b){this._embeddedOutputsModel.synchronizeRegions();var d=null,e=null;this._embeddedOutputsModel.getRegions().forEach(function(c,g){var h=c.code.regionPositions,
q=h[0].line,h=h[h.length-1].line,r=this._embeddedOutputsModel.getOutputsForRegion(c);1===r.length&&r[0]===a&&(d=c);b-1>=q&&b-1<=h&&(e=g)},this);d&&null!==e&&(this._embeddedOutputsModel.setReplacementRange(c.createFullFileRange(this._document,this._internalDocument)),this._embeddedOutputsModel.updateOutputAssociations(a,e),this._embeddedOutputsModel.clearReplacementRange())}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseText2HTMLProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseText2HTML"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseText2HTML":function(){define("dojo/_base/declare dojo/dom-construct dojo/query MW/rtc/plugins/export/html/HTMLOutputUtilities MW/rtc/plugins/export/OutputNodeExporterInterface dojo/text!MW/rtc/plugins/embeddedoutputs/view/css/errorOutput.css dojo/text!MW/rtc/plugins/embeddedoutputs/view/css/textOutput.css dojo/text!MW/rtc/plugins/embeddedoutputs/view/css/warningOutput.css dojo/text!MW/rtc/plugins/language/matlab/diagnosticmessage/css/diagnosticMessage.css".split(" "),
function(h,e,g,d,c,b,a,f,k){return h([c],{constructor:function(){this._firstVisit=!0},getApplicableDomNodeClasses:function(){return["embeddedOutputsWarningElement","embeddedOutputsVariableStringElement","embeddedOutputsTextElement","embeddedOutputsErrorElement"]},reset:function(){this._firstVisit=!0},enter:function(c,e,g){this._firstVisit&&(c.addCSSToStyle(d.cleanUpCSS(b+f+k+a)),this._firstVisit=!1);e=d.removeElementsWithClass(e,".doNotExport");e=this._removeMATLABLinks(e);c.addToBody(e.outerHTML);
return!0},_removeMATLABLinks:function(a){var b=g("a",a);if(0===b.length)return a;for(var c=0,f=a.cloneNode(!0),b=g("a",f),c=0;c<b.length;c+=1)"matlab:"===b[c].href.substring(0,7)&&(a=document.createTextNode(b[c].textContent),e.place(a,b[c],"replace"));return f}})})},"MW/rtc/plugins/export/html/HTMLOutputUtilities":function(){define(["dojo/dom-construct","dojo/dom-style","dojo/query"],function(h,e,g){return{_ELEMENT_NODE:1,cleanUpCSS:function(d){return d.replace(/\n|.rtePane /g,"").replace(/}/g,"}\n")},
removeElementsWithClass:function(d,c){var b,a;b=g(c,d);return 0<b.length?(a=d.cloneNode(!0),b=g(c,a),b.forEach(function(a){h.destroy(a)}),a):d},convertToInlineStyles:function(d,c){if(c.nodeType===this._ELEMENT_NODE){var b=e.getComputedStyle(c);d.style.whiteSpace=b.whiteSpace;d.style.fontStyle=b.fontStyle;d.style.color=b.color;d.style.fontSize=b.fontSize;for(b=0;b<c.childNodes.length;b++)this.convertToInlineStyles(d.childNodes[b],c.childNodes[b])}}}})},"MW/rtc/plugins/export/OutputNodeExporterInterface":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/export/html/HTMLExportUtilities"],function(h,e){return h([],{_STYLES:[],constructor:function(){},getApplicableDomNodeClasses:function(){throw Error("Unimplemented: getApplicableNodeClass");},reset:function(){},enter:function(e,d,c){return!1},leave:function(e,d,c){}})})},"MW/rtc/plugins/export/html/HTMLExportUtilities":function(){define(["dojo/dom-style"],function(h){return{getStyleValuesForNode:function(e,g){return this.getStyleValuesForDomNode(this.getDomNode(e),g)},getStyleValuesForDomNode:function(e,
g){for(var d="",c=h.getComputedStyle(e),b=0;b<g.length;b+=1)d+=g[b]+": "+c[g[b]]+"; ";return d},getDomNode:function(e){return e.box}}})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureOutputHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./FigureOutputHandler"],function(h,e,g){return h(e,{requires:function(){return{createInstance:"rtc.embeddedoutputs rtc.embeddedoutputs.currentoutputservice rtc.id rtc.embeddedoutputs.model rtc.contextmenu.generator rtc.actionservice rtc.code.sections.model rtc.code.sections.stale.model rtc.clipboard rtc.document rtc.embeddedoutputs.codegen rtc.view rtc.focusservice rtc.outputhandlerservice rtc.embeddedoutputs.statehandler rtc.embeddedoutputs.figureconnectionmanager".split(" ")}},
createInstance:function(d,c,b,a,f,e,h,n,p,m,q,r,s,t,u,v){d=new g(d.getEmbeddedOutputsView(),c,b,a,r,e,f,h,n,p,m,q,s,u,v);t.registerOutputPlugin(d);return d}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureOutputHandler":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/event dojo/aspect dojo/dom-class dojo/dom-construct dojo/Deferred dojo/on MW/rtc/plugins/embeddedoutputs/EmbeddedOutputsUtilities MW/rtc/plugins/embeddedoutputs/MessageServiceFactory MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutputHandler MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResult MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResultInstruction MW/rtc/plugins/embeddedoutputs/codegen/CodeGenFactoryProvider MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureOutput MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureProxy MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureOutputProperties MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FocusedFigure MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/ToolstripActionController MW/rtc/plugins/embeddedoutputs/model/RegionUtilities MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureSnapshotManager".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x){return h([n],{OUTPUT_TYPE:t.OUTPUT_TYPE,_MISSING_FIGURE_URI_ERROR:"A figure image or figureURI is required.",_snapshotManager:null,_FIGURE_SNAPSHOT_DELETE_CHANNEL:"/liveeditor/figuresnapshots",constructor:function(a,b,c,f,g,h,k,l,n,m,p,q,r,s,t){this._aspectHandles=[];this._currentouputservice=b;this._editorId=c;this._outputsModel=f;this._view=g;this._actionService=h;this._contextMenuGenerator=k;this._sectionModel=l;this._staleSectionModel=n;this._clipboard=
m;this._document=p;this._codeGenFactory=q;this._focusService=r;this._embeddedOutputsView=a;this._stateHandler=s;this._figureConnectionManager=t;this._outputsInProgressMap={};this._numberOfSectionsRemaining=0;this._toolstripActionController=new v(c,this._actionService);this._aspectHandles.push(d.after(this._currentouputservice,"onOutputSelected",e.hitch(this,"_handleOutputSelectionAndModelChanges"),!0));this._aspectHandles.push(d.after(this._stateHandler,"stateChanged",e.hitch(this,"_handleStateChanged"),
!0));this._snapshotManager=new x(c,this._FIGURE_SNAPSHOT_DELETE_CHANNEL);this._focusedFigure=new u},getOutputFromData:function(a,b){var c,f=a.lineNumbers,d=a.figurePlaceHolderId||a.figureId,g=this._outputsInProgressMap[d],h=!!g,k=a.figurePlaceHolderId,l=a.isPending,n=!k&&!l;c=h&&this._isPending(g);var q=m.REASSOCIATE_AND_UPDATE;g||(g=new r({figureId:d,onOutputDestroyedCallback:e.hitch(this,"onOutputDestroyed")}),this._outputsInProgressMap[d]=g,q=m.ADD_OUTPUT);if(k)return g.getState()!==t.STATE.PENDING&&
g.setState(t.STATE.PLACEHOLDER),new p(q,g);l?g.setState(t.STATE.PENDING):g.setState(t.STATE.FINAL_SNAPSHOT);q=h?m.UPDATE:m.ADD_OUTPUT;n&&delete this._outputsInProgressMap[d];var s={lineNumbers:f,figureUri:""};a.figureSize&&(s.figureSize=a.figureSize);d={editorId:this._editorId,figureId:a.figureId,lineNumbers:f,snapshotManager:this._snapshotManager};h=a.hasOwnProperty("figureUri");a.hasOwnProperty("figureImage")?(c=this.createFigureProxyForURI(d,a.figureImage.src,a.figureSize),s.figureUri=a.figureImage.src,
g.initializeFigure({figureProxy:c,parsedData:s,lineNumbers:f,getRegionNumbersFromPositions:e.hitch(this,"_convertPositionsToRegionNumbers")}),g.getReadyPromise().resolve()):h?(c=this.createFigureProxyForURI(d,a.figureUri,a.figureSize),c.showRunCodePrompt(),s.figureUri=a.figureUri,g.initializeFigure({figureProxy:c,parsedData:s,lineNumbers:f,getRegionNumbersFromPositions:e.hitch(this,"_convertPositionsToRegionNumbers")}),g.getReadyPromise().resolve()):(c=c?this.createFigureProxyForWebCanvas(a,d,g.getContentPane()):
this.createFigureProxyForWebCanvas(a,d),c.addFigureURIChangedListener(e.hitch(this,function(a){s.figureUri=a.uri;g.getReadyPromise().resolve()})),c.addFigureStateChangedListener(e.hitch(this,function(a){this.onOutputFocused(a.figureProperties)})),c.addUpdateLayoutListener(e.hitch(this,function(a){this._embeddedOutputsView.onAlign()})),g.initializeFigure({figureProxy:c,parsedData:s,lineNumbers:f,getRegionNumbersFromPositions:e.hitch(this,"_convertPositionsToRegionNumbers")}),c.setOutput(g),c.setDocumentView(this._view),
c.setFigureUndoRedo(this._document),c.setContextMenuService(this._actionService,this._contextMenuGenerator),c.setCodeGenFactory(this._codeGenFactory),c.setFocusService(this._focusService),c.addInteractionFeatures(),c.setFocusedFigure(this._focusedFigure),c.setGetNumberOfOutputsOnLineCallback(e.hitch(this,function(){return this._outputsModel.getOutputsForPosition(g.codeLinePositions[g.codeLinePositions.length-1]).filter(function(a){return a.type===t.OUTPUT_TYPE}).length})),g.getState()!==t.STATE.FINAL_SNAPSHOT?
this._figureConnectionManager.registerOutput(a.figureId,g):this._figureConnectionManager.removeOutput(a.figureId));c&&c.addCustomEventListener("startEditing",e.hitch(this,function(a){this._focusService.setBlur()}));return new p(q,g)},_convertPositionsToRegionNumbers:function(a){var b=[],c=this._outputsModel.getRegions();if(!a)return[];a.forEach(function(a){var f=k.convertPositionToRegionNumber(a,c),d=c[f];w.isPositionWithinRegionRange(a,d,d)&&b.push(f)},this);return b},createFigureProxyForURI:function(a,
b,c){var f=new s(a);f.createViewForURI(a,b,c);return f},createFigureProxyForWebCanvas:function(a,b,c){var f=s(b);f.createViewForWebCanvas(b,a.serverID,c,a.figureSize,a.figureData.iFigureMetaData);return f},onOutputFocused:function(a){a&&(this._focusedFigure.figureId=a.figureId)},onOutputsSelected:function(a){},onOutputDestroyed:function(a){this._figureConnectionManager.removeOutput(a);delete this._outputsInProgressMap[a]},_handleOutputSelectionAndModelChanges:function(a){var b=this.OUTPUT_TYPE,c=
a.selectedOutputs.filter(function(a){return a.type===b}).map(function(a){return a.getFigureProperties()});this.onOutputsSelected(c);if(a.focusedOutput&&a.focusedOutput.type===this.OUTPUT_TYPE)this.onOutputFocused(a.focusedOutput.getFigureProperties())},_handleStateChanged:function(a,b){a===this._stateHandler.CHANGE_TYPE_ENUM.EVAL_INITIALIZED?(this._clearIncompleteFigures(),this._numberOfSectionsRemaining=this._sectionModel.getSections().length):a===this._stateHandler.CHANGE_TYPE_ENUM.SECTION_EVAL_COMPLETE?
(this._numberOfSectionsRemaining--,0!==this._numberOfSectionsRemaining&&this._clearIncompleteFigures()):a===this._stateHandler.CHANGE_TYPE_ENUM.EVAL_COMPLETE?(this._clearIncompleteFigures(),this._snapshotManager.evalComplete()):a===this._stateHandler.CHANGE_TYPE_ENUM.REGION_EVAL_STARTED&&this._snapshotManager.evalStarted()},_clearIncompleteFigures:function(){Object.keys(this._outputsInProgressMap).forEach(function(a){a=this._outputsInProgressMap[a];a.isReady()?a.setState(t.STATE.FINAL_PENDING_SNAPSHOT):
a.getReadyPromise().reject()},this);this._outputsInProgressMap={}},_isPending:function(a){return a.getState()===t.STATE.PENDING},_isFinalSnapshot:function(a){return a.getState()===t.STATE.FINAL_SNAPSHOT||a.getState()===t.STATE.FINAL_PENDING_SNAPSHOT},destroy:function(){this._aspectHandles.forEach(function(a){a.remove()});this._aspectHandles=[];this._toolstripActionController.destroy();this._snapshotManager.destroy()}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureOutput":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred MW/rtc/misc/ImageURIUtilities MW/rtc/plugins/cutcopypaste/MIMETypes MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutput MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureProxy MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureOutputProperties".split(" "),
function(h,e,g,d,c,b,a,f){return h([b],{_IMG_URI_DATA_ATTRIBUTE:"data-imguri",type:f.OUTPUT_TYPE,constructor:function(a){this._isReadyPromise=new g;this._state=f.STATE.NOT_INITIALIZED;this._figureId=a.figureId;this._onOutputDestroyedCallback=a.onOutputDestroyedCallback},initializeFigure:function(a){this._figureProxy&&this._figureProxy.destroy();this._figureProxy=a.figureProxy;this._parsedData=a.parsedData;this._getRegionNumbersFromPositions=a.getRegionNumbersFromPositions},destroy:function(){this._isReadyPromise.reject();
this._isReadyPromise=null;this._figureProxy&&this._figureProxy.destroy();this._onOutputDestroyedCallback(this._figureId)},getCssTag:function(){return f.CSS_TAG},getDomElement:function(){return this._figureProxy.getFigureView().getWrapperNode()},getSerializableData:function(){var a=this._getRegionNumbersFromPositions(this.getCodeLinePositions()),b=e.clone(this._parsedData);b.figureId=this._figureId;b.regionNumbers=a;b.originalRegionNumber=a[0];return b},getText:function(){return""},getHTML:function(a,
b){var c="\x3cdiv\x3e\x3cimg ";if(a)var f=d.pushImageAndGetPathFromURI(this._parsedData.figureUri,a,b),c=c+('src\x3d"'+f+'"')+(this._IMG_URI_DATA_ATTRIBUTE+'\x3d"'+this._parsedData.figureUri+'"');else c+='src\x3d"'+this._parsedData.figureUri+'"';return c+="\x3e\x3c/div\x3e"},getMIMEContent:function(){return[{flavor:c.IMAGE,content:this._parsedData.figureUri}]},isReady:function(){return this._isReadyPromise.isResolved()},getReadyPromise:function(){return this._isReadyPromise},printToFile:function(a,
b,c){return this._figureProxy.printToFile(["-d"+a,"-r"+b,c])},canPrintToFile:function(){return null!=this._figureProxy.figureModel.getFigureProperties()},getFigureProperties:function(){return this._figureProxy.getFigureProperties()},getContentPane:function(){return this._figureProxy.getFigureContentPane()},getFigureId:function(){return this._figureId},getFigureUri:function(){return this._parsedData.figureUri},getFigureSize:function(){return this._parsedData.figureSize},getState:function(){return this._state},
setState:function(a){this._state=a},reconnect:function(){this._figureProxy.reconnectView()},disconnect:function(){this._figureProxy.disconnectView()}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureProxy":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/event dojo/dom-class dojo/dom-construct dojo/dom-style dojo/query dojo/on dojo/Deferred dojo/Evented dijit/Destroyable dijit/focus dojo/i18n!l10n/nls/actions MW/rtc/plugins/embeddedoutputs/MessageServiceFactory MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureModel MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureView MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/ModelessManager MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/ModeManager MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/controllers/PaletteController MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/controllers/PromptController MW/rtc/plugins/embeddedoutputs/codegen/EditorCodeGenerator MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/ActionManager MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureUndoRedoManager MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureOutputProperties mw-html-utils/HtmlUtils MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/EventHandler".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,B,F,G,H){return h([l,n],{figureModel:null,figureView:null,_paletteController:null,_promptController:null,_modeManager:null,_modelessManager:null,_layoutManager:null,_windowMouseMoveListener:null,_windowMouseUpListener:null,_enableInteraction:!1,_enableModelessInteraction:!1,_output:null,_dependencies:null,_codeGenFactory:null,_codeGenerator:null,_actionService:null,_contextMenuGenerator:null,_paletteDisabled:!1,_actionManager:null,_figureUndoRedoManager:null,
_focusService:null,_IMAGE_PATH:require.toUrl("images/"),_eventHandler:null,_figureViewInteractionListeners:null,_cannotidentifyFigureTooltip:m.disabledWhenCannotIdentifyFigure,_getNumberOfOutputsOnLineCallback:null,_snapshotManager:null,constructor:function(a){this.figureModel=new r(a);this._IMAGE_PATH=this._getImageUrl();this._snapshotManager=a.snapshotManager},createViewForURI:function(a,b,c){this.figureView=new s(c);this.own(this.figureView);this.figureView.createImageNode(b,a.editorId,a.figureId)},
createViewForWebCanvas:function(a,b,c,d,g){this.figureView=new s(d);this.own(this.figureView);g&&this._setFigureMetaData(g);this.figureView.createWebGraphicsNode(b,c);this.own(f(this.figureView,"refreshURI",e.hitch(this,function(){this._setupFigureViewListeners();this.emit("FigureURIChanged",{uri:this.getFigureURI()})})))},_replaceWebCanvas:function(a){this.figureView.createWebGraphicsNode(a,this.figureView.getGraphicsViewContainerNode())},getFigureContentPane:function(){return this.figureView.getGraphicsViewContainerNode()},
setOutput:function(a){this._output=a;this.figureModel&&this.figureModel.setFigureToolstripEnablementCallback(e.hitch(this,"_shouldFigureToolstripBeEnabled"))},_shouldFigureToolstripBeEnabled:function(){if(!this._output)return!1;var a=this._output.getState();return this._isEnabledFigure()&&(a===F.STATE.FINAL_SNAPSHOT||a===F.STATE.FINAL_PENDING_SNAPSHOT)},setContextMenuService:function(a,b){this._actionService=a;this._contextMenuGenerator=b},setFocusService:function(a){this._focusService=a},setCodeGenFactory:function(a){this._codeGenFactory=
a},setDocumentView:function(a){this.figureView.setDocumentView(a)},setGetNumberOfOutputsOnLineCallback:function(a){this._getNumberOfOutputsOnLineCallback=a},showRunCodePrompt:function(){this.figureView.showRunCodePrompt()},_getImageUrl:function(){var a=G.parseUrl(this._IMAGE_PATH);return a.protocol+"//"+a.hostname+":"+a.port+a.pathname},_getMouseEventData:function(a){return this.getFigureModel().getMouseEventData(a,this.figureView,this._modeManager._cursorHotSpot)},notify:function(a,b){this.emit(a,
b)},_setupFigureViewListeners:function(){this._enableModelessInteraction||q.getInstance().subscribe(this.figureModel.getModelessChannel(),"_modelessDataUpdate",this);this._enableModelessInteraction=!0;this._figureViewInteractionListeners||(this._figureViewInteractionListeners=[f(this.figureView,"WindowButtonMouseDown",e.hitch(this,"notify","WindowButtonMouseDown")),f(this.figureView,"WindowButtonMouseMove",e.hitch(this,"notify","WindowButtonMouseMove")),f(this.figureView,"WindowButtonMouseEnter",
e.hitch(this,"notify","WindowButtonMouseEnter")),f(this.figureView,"WindowButtonMouseLeave",e.hitch(this,"notify","WindowButtonMouseLeave")),f(this.figureView,"WrapperElementMouseLeave",e.hitch(this,"notify","_WrapperElementMouseLeave")),f(this.figureView,"dblclick",e.hitch(this,"_WindowDblClickHandler")),f(this.figureView,"contextmenu",e.hitch(this,"_WindowContextMenuEventHandler")),f(this.figureView,"mousewheel",e.hitch(this,"notify","WindowButtonMouseWheel")),f(this.figureView,"LayoutResize",e.hitch(this,
"notify","LayoutResize")),f(this.figureView,"InlineViewLayout",e.hitch(this,"notify","InlineViewLayout")),f(this.figureView,"click",e.hitch(this,"_WindowClickHandler")),f(this.figureView,"WrapperElementMouseMove",e.hitch(this,"_WrapperMouseMoveHandler"))],this.own.apply(this,this._figureViewInteractionListeners))},getFigureProperties:function(){return this.figureModel.getFigureProperties()},destroy:function(){this._destroyed||(this._enableModelessInteraction&&q.getInstance().unsubscribe(this.figureModel.getModelessChannel(),
"_modelessDataUpdate",this),this._enableInteraction&&q.getInstance().unsubscribe(this.figureModel.getRefreshChannel(),"_refreshFromServer",this),this._paletteController&&this._paletteController.destroyView(),this._promptController&&this._promptController.destroyView(),this._modeManager&&this._modeManager.destroy(),this._modelessManager&&this._modelessManager.destroy(),this._codeGenerator&&this._codeGenerator.destroy(),this._eventHandler&&this._eventHandler.destroy(),this._snapshotManager&&this._snapshotManager.removeSnapshot(this.figureModel.figureId));
this.inherited(arguments)},getFigureModel:function(){return this.figureModel},getFigureView:function(){return this.figureView},getFigureURI:function(){return this.getFigureView().getFigureURI()},feval:function(a,b){q.getInstance().publish(this.figureModel.getInteractionChannel(),JSON.stringify({method:a,args:b}))},printToFile:function(a){var b=new k,c=e.hitch(this,function(a){q.getInstance().unsubscribe(this.figureModel.getInteractionChannel()+"/printed",c,this);b.resolve(a)});q.getInstance().subscribe(this.figureModel.getInteractionChannel()+
"/printed",c,this);q.getInstance().publish(this.figureModel.getInteractionChannel(),JSON.stringify({method:"printToFile",args:a}));return b},_modelessDataUpdate:function(a){a.data.iFigureInteractionData&&this._modelessManager.handleModelessEvent(a.data.iFigureInteractionData);this._setDocumentFocusIfNeeded()},_refreshFromServer:function(a){this._refresh(a.data.iFigureInteractionData,a.data.iFigureMetaData,a.data.iFigureUndoRedoData,a.data.iServerID)},_refresh:function(a,b,c,f){"string"===typeof f&&
""!==f&&this.figureView.getServerID()!==f?this._replaceWebCanvas(f):c?(this._setFigureUndoRedoData(b,c,a),this.emit("FigureStateChanged",{figureProperties:this.figureModel.getFigureProperties()}),this.emit("InteractionEventProcessed",{})):(b&&(this._setFigureMetaData(b),this._setFigureInteractionData(null),this._updateFigureState()),a&&(this._setFigureInteractionData(a),"subplot"===a.iAtomicActionID?this.emit("FigureStateChanged",{figureProperties:this.figureModel.getFigureProperties()}):this.emit("InteractionEventProcessed",
{})),this._modelessManager&&this._modelessManager.forceCommit(),this._setDocumentFocusIfNeeded())},_setFigureUndoRedoData:function(a,b,c){this._setFigureMetaData(a);this.figureModel.setUndoRedoData(b);this._setFigureInteractionData(c);this._updateFigureState();this._modelessManager&&this._modelessManager.forceRollback();this._setDocumentFocusIfNeeded()},_setFigureMetaData:function(a){this.figureView.deleteRunCodePrompt();this.figureModel.setFigureModelState(a)},_updateFigureState:function(){this._paletteController.setState(this.figureModel);
this._promptController.setState(this.figureModel);this._modeManager.isInSpringLoadedMode()?(this._paletteController.disablePalette(),this._paletteDisabled=!0):(this._paletteController.enablePalette(),this._paletteDisabled=!1)},_setDocumentFocusIfNeeded:function(){null===p.curNode&&this._focusService.setFocus()},_setupInteractionEvents:function(a){var b=this;this.own(a.on("interaction",function(a){b.feval(a.fcn,a.args);a.args&&(void 0!==a.args.mode&&!b._modeManager.isSpringLoadedMode(a.args.mode))&&
b._modeManager.setModeFromClient(a.args.mode)}))},_WindowClickHandler:function(a){this._isValidFigure()&&this._modelessManager&&this._modelessManager.WindowMouseClick(this._getMouseEventData(a))},_WrapperMouseMoveHandler:function(a){this._isValidFigure()&&this._modelessManager&&this._modelessManager.WindowButtonMouseMove(this._getMouseEventData(a))},_WindowDblClickHandler:function(a){this.figureModel.getMode()&&""!==this.figureModel.getMode()&&(this._isValidFigure()&&this._modeManager.WindowMouseDblClick(this._getMouseEventData(a)),
g.stop(a))},_WindowContextMenuEventHandler:function(a){this.figureModel.getMode()&&""!==this.figureModel.getMode()&&this._isValidFigure()&&this._modeManager.updateContextMenuEventData(this._getMouseEventData(a))},undockFigure:function(){q.getInstance().publish(this.figureModel.getInteractionChannel(),JSON.stringify({method:"launchFigure",args:{editorId:this.figureModel.editorId}}))},addInteractionEventProcessedListener:function(a){this.own(f(this,"InteractionEventProcessed",a))},addFigureStateChangedListener:function(a){this.own(f(this,
"FigureStateChanged",a))},addFigureURIChangedListener:function(a){this.own(f(this,"FigureURIChanged",a))},addUpdateLayoutListener:function(a){this.own(f(this,"updateLayout",a))},addWindowMouseListener:function(a,b){this.addCustomEventListener(a,b)},addCustomEventListener:function(a,b){this.own(f(this,a,b))},_isValidFigure:function(){return this._isEnabledFigure()&&(this._isInlineFigure()||this._isRHSSelectedFigure())},_isEnabledFigure:function(){var a=this.figureView.getWrapperNode();return a.parentElement&&
!d.contains(a,"stale_output")},_isInlineFigure:function(){var a=this.figureView.getWrapperNode();return a.parentElement&&d.contains(a.parentElement,"inlineElement")},_isRHSSelectedFigure:function(){var a=this.figureView.getWrapperNode();return a.parentElement&&d.contains(a.parentElement,"focusedOutput")},_isInsideAxes:function(a,b){return this.figureView.isInsideAxes(a,b,this._modeManager._cursorHotSpot)},toggleFigureComponents:function(){this.figureView.hasRenderingSize()?(this._codeGenerator.enable(),
this._paletteDisabled||this._paletteController.enablePalette()):(this._isValidFigure()&&this._codeGenerator.disable(),this._paletteController.disablePalette())},addInteractionFeatures:function(){this._createCodeGenWidget();this._eventHandler=new H;this._actionManager=new A({figureView:this.figureView,figureModel:this.figureModel,codeGenerator:this._codeGenerator});this._actionManager.setUndoRedoManager(this._figureUndoRedoManager);this._modelessManager=new t({figureView:this.figureView,figureModel:this.figureModel,
codeGenerator:this._codeGenerator});this._modelessManager.setUndoRedoManager(this._figureUndoRedoManager);this._modelessManager.setEventHandler(this._eventHandler);this._modeManager=new u({figureView:this.figureView,figureModel:this.figureModel,codeGenerator:this._codeGenerator,actionService:this._actionService,contextMenuGenerator:this._contextMenuGenerator});this._modeManager.setUndoRedoManager(this._figureUndoRedoManager);this._modeManager.setCursorImagePath(this._IMAGE_PATH);this._modeManager.setEventHandler(this._eventHandler);
this._modelessManager.setCursorImagePath(this._IMAGE_PATH);this._setupInteractionEvents(this._modeManager);this._setupInteractionEvents(this._modelessManager);this.own(f(this._modeManager,"startEditing",e.hitch(this,function(a){this.emit("startEditing",a)})));this.own(f(this._modelessManager,"startEditing",e.hitch(this,function(a){this.emit("startEditing",a)})));this.addInteractionEventProcessedListener(e.hitch(this,function(){this._eventHandler.processNextPendingEvent()}));this._paletteController=
new v({figureView:this.figureView,figureModel:this.figureModel});this._setupInteractionEvents(this._paletteController);this._promptController=new w({figureView:this.figureView,figureModel:this.figureModel});this._setupInteractionEvents(this._promptController);this.addWindowMouseListener("LayoutResize",e.hitch(this,"_handleLayoutResizeEvent"));this.addWindowMouseListener("InlineViewLayout",e.hitch(this,"_inlineViewLayoutEventHandler"));this.addWindowMouseListener("WindowButtonMouseDown",e.hitch(this,
function(a){this._isEnabledFigure()&&(this._modeManager.WindowButtonMouseDown(this._getMouseEventData(a)),this._paletteController._handleMouseClick(this._getMouseEventData(a)),this._promptController._handleMouseClick(a),this._modelessManager.WindowButtonMouseDown(this._getMouseEventData(a)))}));this.addWindowMouseListener("WindowButtonMouseWheel",e.hitch(this,"handleWheelEvent"));this.addWindowMouseListener("WindowButtonMouseEnter",e.hitch(this,function(a){this.toggleFigureComponents();this._codeGenerator.changeCodeGenLayout(this.figureView.getFigureWidth());
this._isValidFigure()&&(a=this._getMouseEventData(a),this._paletteController._handleMouseEnter(a),this._promptController._handleMouseEnter(a))}));this.addWindowMouseListener("WindowButtonMouseLeave",e.hitch(this,function(a){a=this._getMouseEventData(a);this._modelessManager._handleMouseLeave(a)}));this.addWindowMouseListener("_WrapperElementMouseLeave",e.hitch(this,function(a){this._paletteController._handleMouseLeave(a);this._promptController._handleMouseLeave(a)}));this.addWindowMouseListener("WindowButtonMouseMove",
function(a){this._isValidFigure()&&(a=this._getMouseEventData(a),this._modelessManager._handleMouseMove(a),this._modeManager.WindowButtonMouseMove(a),this._paletteController._handleMouseMove(a),this._promptController._handleMouseMove(a))});q.getInstance().subscribe(this.figureModel.getRefreshChannel(),"_refreshFromServer",this);this._enableInteraction=!0},handleWheelEvent:function(a){a=this._getMouseEventData(a);this._isValidFigure()&&(a.MouseOverAxes&&a.MouseOverAxes.isInside)&&(this._modeManager.WindowButtonMouseWheel(a),
this._modelessManager.WindowButtonMouseWheel(a))},_handleLayoutResizeEvent:function(a){this.toggleFigureComponents();this._codeGenerator.changeCodeGenLayout(this.figureView.getFigureWidth());this._modeManager.switchLayouts();this._modelessManager.forceCommit()},_inlineViewLayoutEventHandler:function(){var a=this.figureView.getWrapperNode();a.parentElement&&d.contains(a.parentElement,"inlineElement")&&this._codeGenerator.changeCodeGenLayout(this.figureView.getFigureWidth())},setFigureUndoRedo:function(a){this._figureUndoRedoManager=
new B({document:a})},_createCodeGenWidget:function(){this._codeGenFactory&&(this._codeGenerator=this._codeGenFactory.createEditorCodeGenerator(),this._codeGenerator.setCodeGenDependencies({output:this._output,outputPositions:this.figureModel.getVisibleAxesPositions()}),this._codeGenerator.setEnablementCondition(e.hitch(this,function(){return 1===this._getNumberOfOutputsOnLineCallback()}),this._cannotidentifyFigureTooltip))},_setFigureInteractionData:function(a){this.figureModel.setInteractionData(a);
a&&""!==a.iAtomicActionID?this._actionManager.setState(this.figureModel):this._modeManager.setState(this.figureModel);a&&a.isFakeCode&&this._codeGenerator.disableUpdateCodeBtn(this._cannotidentifyFigureTooltip)},reconnectView:function(){this.figureView&&this.figureView.reconnectView()},disconnectView:function(){this.figureView&&this.figureView.disconnectView()},setFocusedFigure:function(a){this._modelessManager&&this._modelessManager.setFocusedFigure(a)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureModel":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/Evented"],function(h,e,g){return h([g],{editorId:null,figureId:null,lineNumbers:null,_CHANNEL_PREFIX:"/liveeditor/figure/",_is2D:null,_axesPositions:null,_chartType:null,_mode:null,_modeStateData:null,_zoomDirection:null,_currentTarget:null,_interactionData:null,_backgroundColor:null,_isPZREnabled:null,_isSubplotCase:null,_isSubplot3D:null,_titles:null,_xlabels:null,_ylabels:null,_yLabelPositions:null,_xLabelPositions:null,_titlePositions:null,_legendPositions:null,_isXlabelSupported:null,
_isYlabelSupported:null,_isXGridSupported:null,_isYGridSupported:null,_isGridSupported:null,_isTitleSupported:null,_isColorbarSupported:null,_isLegendSupported:null,_annotationPositions:null,_annotationTextPositions:null,_enableToolstrip:null,_enableMOLToolstrip:null,_figureToolstripEnablementCallback:null,_undoRedoData:null,constructor:function(d){e.mixin(this,d)},setEnableToolstrip:function(d){this._enableToolstrip=new Boolean(d)},getEnableToolstrip:function(){var d=!this._figureToolstripEnablementCallback||
this._figureToolstripEnablementCallback();return this._enableToolstrip.valueOf()&&d},setFigureToolstripEnablementCallback:function(d){this._figureToolstripEnablementCallback=d},getUndoRedoData:function(){return this._undoRedoData},setUndoRedoData:function(d){this._undoRedoData=d},setEnableMOLToolstrip:function(d){this._enableMOLToolstrip=new Boolean(d)},getEnableMOLToolstrip:function(){var d=!this._figureToolstripEnablementCallback||this._figureToolstripEnablementCallback();return this._enableMOLToolstrip.valueOf()&&
d},getIsSubplotCase:function(){return new Boolean(this._isSubplotCase)},getIsPZREnabled:function(){return this._isPZREnabled},getInteractionChannel:function(){return this._CHANNEL_PREFIX+this.figureId},getRefreshChannel:function(){return this._CHANNEL_PREFIX+this.figureId+"/refresh"},getModelessChannel:function(){return this._CHANNEL_PREFIX+this.figureId+"/modeless"},getMode:function(){return this._mode},getModeStateData:function(){return this._modeStateData},getZoomDirection:function(){return this._zoomDirection},
getIs2D:function(){return this._is2D},getIsSubplot3D:function(){return this._isSubplot3D},getAxesPositions:function(){return this._axesPositions},getChartType:function(){return this._chartType},getVisibleAxesPositions:function(){var d=[];this._axesPositions&&this._axesPositions.forEach(function(c,b){this.isAxesObscuredByEarlierChild(b)||d.push(c)},this);return d},isAxesObscuredByEarlierChild:function(d){var c=this._axesPositions[d];if(0==d)return!1;for(var b=0;b<d;b++){var a=[Math.max(this._axesPositions[b][0],
c[0]),Math.max(this._axesPositions[b][1],c[1])],f=[Math.min(this._axesPositions[b][0]+this._axesPositions[b][2],c[0]+c[2]),Math.min(this._axesPositions[b][1]+this._axesPositions[b][3],c[1]+c[3])],e=f[0]-a[0],a=f[1]-a[1];if(0<e&&0<a&&0<c[2]&&0<c[3]&&0.9<e*a/(c[2]*c[3]))return!0}return!1},getTitles:function(){return this._titles},getXLabels:function(){return this._xlabels},getYLabels:function(){return this._ylabels},getBackgroundColor:function(){return this._backgroundColor},setMode:function(d){this._mode=
d},setModeStateData:function(d){this._modeStateData=d},setZoomDirection:function(d){this._zoomDirection=d},setIs2D:function(d){this._is2D=d;this._updateIsSubplot3D(d)},_updateIsSubplot3D:function(d){this.getIsSubplot3D()||Array.isArray(d)&&d.forEach(function(c){c||(this._isSubplot3D=!0)},this)},setBackgroundColor:function(d){this._backgroundColor=d},setInteractionData:function(d){this._interactionData=d},getInteractionData:function(){return this._interactionData},setAxesPositions:function(d){var c=
this._axesPositions;this._axesPositions=d;this.emit("AxesPositionUpdated",{originalAxesPositions:c,newAxesPositions:this._axesPositions})},setTitles:function(d){this._titles=d},setXLabels:function(d){this._xlabels=d},setYLabels:function(d){this._ylabels=d},setIsPZREnabled:function(d){this._isPZREnabled=d},setIsSubplotCase:function(d){this._isSubplotCase=d},getXLabelPositions:function(){return this._xLabelPositions},getYLabelPositions:function(){return this._yLabelPositions},getTitlePositions:function(){return this._titlePositions},
setXLabelPositions:function(d){this._xLabelPositions=d},setYLabelPositions:function(d){this._yLabelPositions=d},setTitlePositions:function(d){this._titlePositions=d},getAnnotationPositions:function(){return this._annotationPositions},setAnnotationPositions:function(d){this._annotationPositions=d},getAnnotationTextPositions:function(){return this._annotationTextPositions},setAnnotationTextPositions:function(d){this._annotationTextPositions=d},setChartType:function(d){this._chartType=d},setFigureModelState:function(d){this.setMode(d.iMode);
this.setModeStateData(d.iModeStateData);this.setZoomDirection(d.iZoomDirection);this.setIs2D(d.iIs2D);this.setAxesPositions(d.iAxesPositions);this.setChartType(d.iChartType);this.setLegendPositions(d.iLegendPositions);this.setBackgroundColor(d.iBackgroundColor);this.setIsSubplotCase(d.iIsSubplotCase);this.setIsPZREnabled(d.iIsPZREnabled);this.setTitles(d.iTitles);this.setXLabels(d.iXLabels);this.setYLabels(d.iYLabels);this.setTitlePositions(d.iTitlePositions);this.setXLabelPositions(d.iXLabelPositions);
this.setYLabelPositions(d.iYLabelPositions);this.setAnnotationPositions(d.iAnnotationPositions);this.setAnnotationTextPositions(d.iAnnotationTextPositions);this.setEnableToolstrip(d.iEnableFigureToolstrip);this.setEnableMOLToolstrip(d.iEnableMOLFigureToolstrip);this.setUndoRedoData(null);this._isColorbarSupported=new Boolean(d.iIsColorbarSupported);this._isTitleSupported=new Boolean(d.iIsTitleSupported);this._isLegendSupported=new Boolean(d.iIsLegendSupported);this._isXGridSupported=new Boolean(d.iIsXGridSupported);
this._isGridSupported=new Boolean(d.iIsGridSupported);this._isYGridSupported=new Boolean(d.iIsYGridSupported);this._isYlabelSupported=new Boolean(d.iIsYlabelSupported);this._isXlabelSupported=new Boolean(d.iIsXlabelSupported)},getLegendPositions:function(){return this._legendPositions},setLegendPositions:function(d){this._legendPositions=d},getMouseEventData:function(d,c,b){var a=this,f=a.getAnnotationTextPositions();Array.isArray(f)&&f.forEach(function(a){a=c.isInsideLabel(d,c,a);a.isInside&&(d.isInsideTextAnnotation=
a.isInside)});d.isInsideTextAnnotation||(f=a.getAnnotationPositions(),Array.isArray(f)&&f.forEach(function(a){a=c.isInsideAnnotations(d,a);a.isInside&&(d.isInsideAnnotation=a.isInside)}));this.getAxesPositions()&&this.getAxesPositions().some(function(f,e){if(!d.isInsideTextAnnotation&&!d.isInsideAnnotation){var g=c.isInsideLabel(d,c,a.getTitlePositions()[e]);g.isInside&&(d.isInsideTitle=g.isInside,d.labelAxesIndex=e);g=c.isInsideLabel(d,c,a.getXLabelPositions()[e]);g.isInside&&(d.isInsideXLabel=g.isInside,
d.labelAxesIndex=e);g=c.isInsideLabel(d,c,a.getYLabelPositions()[e]);g.isInside&&(d.isInsideYLabel=g.isInside,d.labelAxesIndex=e);g=c.isInsideLabel(d,c,a.getLegendPositions()[e]);g.isInside&&(d.isInsideLegend=g.isInside,d.labelAxesIndex=e)}g=c.isInsideAxes(f,d,b);d.MouseOverAxes=g;d.MouseOverAxes.Index=-1;if(g.isInside)return d.MouseOverAxes.Index=e,void 0!==a.getChartType()&&(null!==a.getChartType()&&Array.isArray(a.getChartType()))&&(d.isMouseOverChart="axes"!==a.getChartType()[d.MouseOverAxes.Index].toLowerCase()),
d});return d},getFigureProperties:function(){return!this._axesPositions?null:{editorId:this.editorId,figureId:this.figureId,lineNumbers:this.lineNumbers,axesPositions:this.getVisibleAxesPositions(),enableToolstrip:this.getEnableToolstrip(),enableMOLToolstrip:this.getEnableMOLToolstrip(),supportedActions:{xlabel:this._isXlabelSupported,ylabel:this._isYlabelSupported,grid:this._isGridSupported,xgrid:this._isXGridSupported,ygrid:this._isYGridSupported,legend:this._isLegendSupported,colorbar:this._isColorbarSupported,
title:this._isTitleSupported,subplot:this.getIsSubplotCase()}}}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureView":function(){define("dojo/_base/declare dojo/dom dojo/dom-construct dojo/dom-class dojo/Evented dojo/mouse dijit/Destroyable dojo/on dojo/touch dojo/_base/lang dojo/dom-geometry dojo/dom-style dojo/query dojo/aspect mw-log/Log MW/rtc/events/MouseEventUtil MW/rtc/plugins/embeddedoutputs/MessageServiceFactory MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/EventUtils MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/controllers/RunScriptPromptController".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v){return h([c,a,u],{_figureUri:null,_imgElement:null,_wrapperElement:null,_runInfoElement:null,_figureSize:null,_sceneWidgetAttachedHandler:null,_serverID:"",_isDisconnected:!1,_figureContainerPane:null,_graphicsView:null,_documentView:null,_viewThreshold:{Width:200,Height:100},_isFirstOutput:null,_TOLERANCE:200,_MAXWIDTH:800,_cachedBlankImageSrc:null,_figureViewInteractionListeners:null,constructor:function(a){this._wrapperElement=g.create("div",{className:"figureElement"});
if(void 0!==a&&null!==a&&"number"===typeof a[0]){var b=Math.max(window.innerWidth,this._MAXWIDTH);this._figureSize=this._scaleFigureWidth(a,b)}},reconnectView:function(){this._graphicsView.setSceneChannel(this._serverID);this._isDisconnected=!1},disconnectView:function(){this._graphicsView.setSceneChannel("");this._isDisconnected=!0},_attachInteractionListeners:function(){if(!this._figureViewInteractionListeners){var a=this;this._figureViewInteractionListeners=[];this._figureViewInteractionListeners.push(f(this._imgElement,
k.move,function(b){a.emit("WindowButtonMouseMove",b)}));this._figureViewInteractionListeners.push(f(this._imgElement,k.press,function(c){b.isLeft(c)&&a.emit("WindowButtonMouseDown",c)}));this._figureViewInteractionListeners.push(f(this._imgElement,k.release,function(c){b.isLeft(c)&&a.emit("WindowButtonMouseUp",c)}));this._figureViewInteractionListeners.push(f(this._imgElement,k.enter,function(b){a.emit("WindowButtonMouseEnter",b)}));this._figureViewInteractionListeners.push(f(this._wrapperElement,
k.leave,function(b){a.emit("WrapperElementMouseLeave",b)}));this._figureViewInteractionListeners.push(f(this._imgElement,k.leave,function(b){a.emit("WindowButtonMouseLeave",b)}));this._figureViewInteractionListeners.push(f(this._imgElement,"dblclick",function(c){b.isLeft(c)&&a.emit("dblclick",c)}));this._figureViewInteractionListeners.push(f(this._wrapperElement,"click",function(c){b.isLeft(c)&&a.emit("click",c)}));this._figureViewInteractionListeners.push(f(this._wrapperElement,k.move,function(b){a.emit("WrapperElementMouseMove",
b)}));this._figureViewInteractionListeners.push(f(this._imgElement,"contextmenu",function(b){a.emit("contextmenu",b)}));this._figureViewInteractionListeners.push(f(this._imgElement,s.MOUSEWHEEL,function(b){a.emit("mousewheel",b)},!0));this._figureViewInteractionListeners.push(f(this._imgElement,"dragstart",function(a){dojo.stopEvent(a)},!0));this._figureViewInteractionListeners.push(f(this._imgElement,"dragend",function(a){dojo.stopEvent(a)},!0));this.own.apply(this,this._figureViewInteractionListeners)}},
createImageNode:function(a,b,c){this._imgElement=g.create("img",{className:"figureImage figureContainingNode",src:a},this._wrapperElement);this.figureSize&&0<this.figureSize.length&&p.set(this._imgElement,"width",this.figureSize[0]+"px");this._figureContainerPane=this._imgElement;this._attachInteractionListeners();t.getInstance().publish("/graphics/guiclientready",{Event:"NewClient",EditorID:b,FigureID:c})},createWebGraphicsNode:function(a,b){this._figureViewInteractionListeners=null;var c=g.create("div",
null);if(b)this._replaceFigureContainingDOMNode(b);else{if(this._cachedBlankImageSrc&&this._cachedBlankImageSrc.width===this._figureSize[0]&&this._cachedBlankImageSrc.height===this._figureSize[1])var f=g.create("img",{src:this._cachedBlankImageData.src},this._wrapperElement);else f=document.createElement("canvas"),f.width=this._figureSize[0],f.height=this._figureSize[1],this._cachedBlankImageData={src:f.toDataURL("image/png"),width:this._figureSize[0],height:this._figureSize[1]},f=g.create("img",
{src:this._cachedBlankImageData.src},this._wrapperElement);d.add(f,"figureContainingNode");p.set(f,"max-width","100%")}d.add(c,"figureContainingNode");p.set(c,{width:this._figureSize[0]+"px",height:"","max-width":"100%",display:"inline-block"});if("string"===typeof a){this._serverID=a;var e=this;require(["graphics/SceneWidgets/GraphicsView"],function(b){b=new b({Container:c});b.startup();e._createSceneWidgetAttachedHandler(b);b.set("ServerId",a);e._graphicsView=b;this._isDisconnected&&this.disconnectView();
e._addGraphicsCompleteHandler(this._figureSize,b,c)})}else g.place(a.domNode,c,"only"),this._addGraphicsCompleteHandler(this._figureSize,a,c)},_createSceneWidgetAttachedHandler:function(a){this._sceneWidgetAttachedHandler=a.on("attached",function(b){var c="/graphics/"+a.get("ServerId")+"/event";if(this._imgElement)t.getInstance().publish(c,{Event:"NewClient"});else var f=a.onEvent("graphicscomplete",l.hitch(this,function(){t.getInstance().publish(c,{Event:"NewClient"});f.remove()}))})},_addGraphicsCompleteHandler:function(a,
b,c){b.onEvent("graphicscomplete",l.hitch(this,function(){b.setInteractionEnabled(!1);e.isDescendant(c,this._wrapperElement)||this._replaceFigureContainingDOMNode(c);this._figureContainerPane=c;this._imgElement=m("img",b.domNode)[0];d.add(this._imgElement,"figureImage");this._attachInteractionListeners();this._serverID=b.get("ServerId");this.emit("refreshURI",{})}))},getServerID:function(){return this._serverID},destroy:function(){this.inherited(arguments);this._runInfoElement&&this._runInfoElement.destroyView()},
showRunCodePrompt:function(){this._runInfoElement||(this._runInfoElement=new v,this._runInfoElement.setTarget(this._wrapperElement))},deleteRunCodePrompt:function(){this._runInfoElement&&(this._runInfoElement.destroy(),this._runInfoElement=null)},getWrapperNode:function(){this._isFirstOutput=null;return this._wrapperElement},getDomNode:function(){return this._imgElement},getGraphicsViewContainerNode:function(){return this._figureContainerPane?this._figureContainerPane:null},getFigureURI:function(){return this._imgElement.src},
getPosition:function(){return n.position(this.getDomNode())},getFigureWidth:function(){return this._figureSize[0]},_scaleFigureWidth:function(a,b){a[0]>b&&0<a[0]&&(a[1]*=b/a[0],a[0]=b);return a},getFigureSize:function(){return this._figureSize},setDocumentView:function(a){this._documentView=a;this.setupResizeAspect();this._setupLayoutChangeAspect()},setupResizeAspect:function(){this.own(q.after(this._documentView,"onResize",l.hitch(this,function(a){this.emit("LayoutResize",{})})))},_setupLayoutChangeAspect:function(){this.own(q.after(this._documentView,
"onLayoutChange",l.hitch(this,function(a){this.emit("InlineViewLayout",{})})))},hasRenderingSize:function(){var a=!1;this._wrapperElement&&e.isDescendant(this._wrapperElement,document.body)&&(a=n.position(this._wrapperElement),a=this._viewThreshold.Width<a.w&&this._viewThreshold.Height<a.h);return a},getAxesPlotBox:function(a){var b=this.getPosition();return{xLow:a[0]*b.w+b.x,xHigh:(a[0]+a[2])*b.w+b.x,yLow:b.h-(a[1]+a[3])*b.h+b.y,yHigh:b.h-a[1]*b.h+b.y}},isInsideAxes:function(a,b,c){a=this.getAxesPlotBox(a);
var f=null;void 0!==b.clientX&&null!==b.clientX?f={x:b.clientX,y:b.clientY}:void 0!==b.x&&null!==b.x&&(f={x:b.x,y:b.y});b=f.x+c[0];c=f.y+c[1];c=c>a.yLow&&c<a.yHigh&&b>a.xLow&&b<a.xHigh;return{isInside:c,axesPlotBox:c?a:{}}},isInsideLabel:function(a,b,c){b=this.getAxesPlotBox(c);a=this.getEventPosition(a);return{isInside:a.y>b.yLow&&a.y<b.yHigh&&a.x>b.xLow&&a.x<b.xHigh}},isInsideAnnotations:function(a,b){var c=this.getPosition(),f=[b[0]*c.w,b[1]*c.h,b[2]*c.w,b[3]*c.h],d=this.getEventPosition(a);d.x-=
c.x;d.y-=c.y;return{isInside:Math.abs(f[0]*(f[3]-d.y)+f[2]*(d.y-f[1])+d.x*(f[1]-f[3]))/2<this._TOLERANCE}},_replaceFigureContainingDOMNode:function(a){var b=m(".figureContainingNode",this._wrapperElement);0<b.length?g.place(a,b[0],"replace"):g.place(a,this._wrapperElement,"only")},isFigureInline:function(){var a=this.getWrapperNode();return a.parentElement&&d.contains(a.parentElement,"inlineElement")}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/EventUtils":function(){define(["dojo/_base/declare",
"dojo/dom-geometry"],function(h,e){return h(null,{_HAS_POINTER_EVENTS:window.PointerEvent,getEventPosition:function(e){if(e){if(void 0!==e.clientX&&null!==e.clientX)return{x:e.clientX,y:e.clientY};if(void 0!==e.x&&null!==e.x)return{x:e.x,y:e.y}}return null},convertEventToMatlabRelativeCoords:function(g,d){var c=e.position(d,!1);return this.convertEventToMatlabRelativeToFigureCoords(g,c)},convertEventToMatlabRelativeToFigureCoords:function(e,d){return{x:(e.x-d.x+1)/d.w,y:(d.h-(e.y-d.y)+1)/d.h}},isEventInsideAxes:function(e,
d){return e.MouseOverAxes&&e.MouseOverAxes.isInside&&e.target===d},addCursorOffset:function(e,d){var c=this.getEventPosition(e);return{x:c.x+d[0],y:c.y+d[1]}},hasMouseClicked:function(e,d){if(!d)return!1;var c=this.getEventPosition(e);return d.x===c.x&&d.y===c.y?!0:!1},addEventListener:function(e,d,c){switch(d){case "mousedown":this._HAS_POINTER_EVENTS&&(d="pointerdown");break;case "mouseup":this._HAS_POINTER_EVENTS&&(d="pointerup");break;case "mousemove":this._HAS_POINTER_EVENTS&&(d="pointermove")}e.addEventListener(d,
c,!0)},removeEventListener:function(e,d,c){switch(d){case "mousedown":this._HAS_POINTER_EVENTS&&(d="pointerdown");break;case "mouseup":this._HAS_POINTER_EVENTS&&(d="pointerup");break;case "mousemove":this._HAS_POINTER_EVENTS&&(d="pointermove")}e.removeEventListener(d,c,!0)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/controllers/RunScriptPromptController":function(){define("dojo/_base/declare dojo/Evented dojo/dom-construct dojo/query dojo/dom-style MW/rtc/plugins/embeddedoutputs/outputhandlers/floatingpalette/controllers/SimpleFloatingElement".split(" "),
function(h,e,g,d,c,b){return h([b,e],{constructor:function(){this.paletteRegistryId="RunScriptPalette"},getPreferredLeftPosition:function(){var a=d(".figureImage",this._outputDomNode);return a[0].offsetLeft+a[0].offsetWidth},_setupPaletteListeners:function(){}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/floatingpalette/controllers/SimpleFloatingElement":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-style dojo/dom-class MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/PaletteRegistry MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/ElementFactory dojo/on dojo/dom-geometry dijit/Destroyable MW/rtc/plugins/embeddedoutputs/outputhandlers/floatingpalette/controllers/BasePaletteController".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n){return h([l,n],{_outputDomNode:null,_mouseEnterListener:null,_mouseLeaveListener:null,paletteRegistryId:"",paletteWidth:null,setTarget:function(a){this._outputDomNode!==a&&(this._mouseEnterListener&&this._mouseEnterListener.remove(),this._outputDomNode=a,this._mouseEnterListener=f(this._outputDomNode,"mouseenter",e.hitch(this,function(a){this._handleMouseEnter(a)})),this._mouseLeaveListener=f(this._outputDomNode,"mouseleave",e.hitch(this,function(a){this._handleMouseLeave(a)})),
this.own(this._mouseEnterListener),this.own(this._mouseLeaveListener))},getView:function(){if(!this._palette){var c=b.getPalette(this.paletteRegistryId);a.getPalette(c,e.hitch(this,function(a){this._palette=a;this._palette.startup();this._setupPaletteListeners()}))}return this._palette},_setupPaletteListeners:function(){this._paletteListener||(this._paletteListener=this._palette.on("elementClicked",e.hitch(this,function(a){this.notify("interaction",{})})))},addInteractionListener:function(a){this.own(f(this,
"interaction",a))},getPreferredLeftPosition:function(){throw Error("getPreferredLeftPosition must be overridden");},_handleMouseEnter:function(a){this.updatePalettePosition()},updatePalettePosition:function(){if(this._palette=this.getView()){g.place(this._palette.domNode,this._outputDomNode);if(this.isInline(this._outputDomNode)){var a=this.getPreferredLeftPosition();null===this.paletteWidth&&(this.paletteWidth=this._palette.domNode.offsetWidth);a+this._palette.domNode.offsetWidth>this._outputDomNode.offsetWidth?
d.set(this._palette.domNode,{right:"1px",left:"",top:"0px"}):d.set(this._palette.domNode,{left:a+"px",right:"",top:"0px"})}else d.set(this._palette.domNode,{right:"1px",left:"",top:"5px"});this.setVisible(!0)}},destroy:function(){this.inherited(arguments);this.destroyView()}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/PaletteRegistry":function(){define(["dojo/i18n!l10n/nls/actions"],function(h){function e(){null===g&&(g={},g.FigurePalette={configName:"FigurePalette",
configElements:[{iconClass:"datacursorButton",mode:"Exploration.Datacursor",elementType:"ModeButtonElement",tooltip:h.dataCursorLabel},{iconClass:"rotateButton",mode:"Exploration.Rotate3d",elementType:"3DModeButtonElement",tooltip:h.rotateLabel},{iconClass:"panButton",mode:"Exploration.Pan",elementType:"ModeButtonElement",tooltip:h.panLabel},{iconClass:"zoomInButton",mode:"Exploration.Zoom",elementType:"ZoomModeButtonElement",direction:"in",tooltip:h.zoomInLabel},{iconClass:"zoomOutButton",mode:"Exploration.Zoom",
elementType:"ZoomModeButtonElement",direction:"out",tooltip:h.zoomOutLabel},{iconClass:"restoreViewButton",action:"Action.RestoreView",elementType:"ActionButtonElement",tooltip:h.restoreViewLabel}]},g.OutputPopoutPalette={configName:"OutputPopoutPalette",configElements:[{iconClass:"figurePopoutButton",elementType:"ActionButtonElement",tooltip:h.figurePopOutPrompt}]},g.MatrixPopoutPalette={configName:"MatrixPopoutPalette",configElements:[{iconClass:"figurePopoutButton",elementType:"ActionButtonElement",
tooltip:h.variableEditorPopOutPrompt}]},g.InteractiveVariablePopoutPalette={configName:"InteractiveVariablePopoutPalette",configElements:[{iconClass:"figurePopoutButton",elementType:"ActionButtonElement",tooltip:h.variableEditorPopOutPrompt}]},g.RunScriptPalette={configName:"RunScriptPalette",configElements:[{iconClass:"runScriptInfoButton",elementType:"ActionButtonElement",tooltip:h.figureRunPrompt}]},g.ActionPalette={configName:"ActionPalette",configElements:[{iconClass:"zInButton",action:"Action.Zoom",
elementType:"ActionButtonElement",direction:"in",tooltip:h.zoomInActionLabel},{iconClass:"zOutButton",action:"Action.Zoom",elementType:"ActionButtonElement",direction:"out",tooltip:h.zoomOutActionLabel},{iconClass:"restoreViewButton",action:"Action.RestoreView",elementType:"ActionButtonElement",tooltip:h.restoreViewLabel}]},g.GeoAxesPalette={configName:"GeoAxesPalette",configElements:[{iconClass:"datacursorButton",mode:"Exploration.Datacursor",elementType:"ModeButtonElement",tooltip:h.dataCursorLabel},
{iconClass:"zInButton",action:"Action.Zoom",elementType:"ActionButtonElement",direction:"in",tooltip:h.zoomInActionLabel},{iconClass:"zOutButton",action:"Action.Zoom",elementType:"ActionButtonElement",direction:"out",tooltip:h.zoomOutActionLabel},{iconClass:"restoreViewButton",action:"Action.RestoreView",elementType:"ActionButtonElement",tooltip:h.restoreViewLabel}]})}var g=null;return{getPalette:function(d){e();return g[d]},registerPalette:function(d,c){e();g[d]=c},getRegistry:function(){e();return g}}})},
"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/ElementFactory":function(){define("dojo/_base/declare dojo/_base/lang dijit/registry MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/Palette MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/PaletteRegistry MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/ModuleManifest mw-log/Log".split(" "),function(h,e,g,d,c,b,a){function f(b,c,f){var d=null;try{if(b="MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/"+
b)require([b],function(a){d=new a(c);f&&"function"===typeof f&&f(d)});else return null}catch(e){a.error(e)}return d}return{getPalette:function(a,b){var c=null;if(a&&a.configName&&a.configElements&&Array.isArray(a.configElements)){var e=a.configElements,c=new d({dataTag:a.configName,numElements:e.length});e.forEach(function(a,d,e){f(a.elementType,a,function(a){c.addElementAtIndex(a,d);c.isComplete()&&b&&"function"===typeof b&&b(c)})})}return c}}})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/Palette":function(){define("dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/Evented dojo/on dojo/mouse dijit/_WidgetBase dijit/_TemplatedMixin dojo/dom-construct dojo/text!./templates/Palette.html".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p){return h([k,b,l],{baseClass:"figurefloatingpalette",templateString:p,elements:null,_mouseEnterListener:null,_mouseLeaveListener:null,constructor:function(a){this.inherited(arguments);if(!a||!a.dataTag)throw Error("dataTag must be passed to the Palette constructor");this.dataTag=a.dataTag;a.numElements?this.createDefaultElements(a.numElements):this.elements=[]},createDefaultElements:function(a){null===this.elements&&(this.elements=[]);for(var b=0;b<a;b+=1)this.elements[b]=
void 0},isComplete:function(){var a=!0;this.elements.forEach(function(b){a=a&&void 0!==b},this);return a},addElement:function(a){this.addElementAtIndex(a,this.elements.length)},addElementAtIndex:function(a,b){null===this.elements&&(this.elements=[]);this.elements[b]=a;this._setupElementListener(a)},postCreate:function(){this.inherited(arguments);this._initMouseListeners()},startup:function(){this.inherited(arguments);this.elements.forEach(function(a){void 0!==a&&(a.startup(),n.place(a.domNode,this.containerNode))},
this)},_setupElementListener:function(a){var b=a.getElementEvents(),f;for(f in b)a.on(f,c.hitch(this,"notify"))},_initMouseListeners:function(){this._mouseEnterListener=a.pausable(this.containerNode,f.enter,c.hitch(this,function(a){this.fadeIn()}));this._mouseLeaveListener=a.pausable(this.containerNode,f.leave,c.hitch(this,function(a){this.isValidLeaveEvent(a)&&this.fadeOut()}))},fadeIn:function(){e.remove(this.containerNode,"fadeout");e.add(this.containerNode,"fadein")},fadeOut:function(){this.elements.forEach(function(a){a.hideTooltip()});
e.remove(this.containerNode,"fadein");e.add(this.containerNode,"fadeout")},disable:function(){e.add(this.containerNode,"disabled")},enable:function(){e.remove(this.containerNode,"disabled")},setStyles:function(a){a&&void 0!==a.backgroundColor?d.set(this.containerNode,"background-color",a.backgroundColor):d.set(this.containerNode,"background-color","white")},setState:function(a){this.setStyles(a);this.elements.forEach(function(b){b.setState(a)},this)},notify:function(a){this.emit(a.elementEvent,a)},
destroy:function(){this.inherited(arguments);this.elements.forEach(function(a){a.destroy()},this);this.elements=[]},isValidLeaveEvent:function(a){var b=!0;this.elements.forEach(function(c){c.isValidLeaveEvent(a)||(b=!1)});return b}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/ModuleManifest":function(){define(["dojo/_base/declare","MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/ModeButtonElement","MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/ZoomModeButtonElement",
"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/3DModeButtonElement","MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/ActionButtonElement"],function(h){return h([],{constructor:function(e){}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/ModeButtonElement":function(){define("dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/mouse dijit/form/Button MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/AbstractPaletteElement MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/ElementToolTipMixin".split(" "),
function(h,e,g,d,c,b,a,f,k){return h([a,f,k],{isStyleSet:!1,isStateSet:!1,_mode:null,_elementEvents:{elementClicked:"elementClicked"},constructor:function(a){a&&this._init(a)},_init:function(a){a.iconClass&&(this.baseClass=a.iconClass);a.mode&&(this._mode=a.mode);a.tooltip?this.setToolTipText(a.tooltip):this.setToolTipText(this._mode.replace("Exploration.",""))},startup:function(){this.inherited(arguments);this.createToolTip(this.domNode);this.createMouseListeners(this.domNode);e.add(this.domNode,
"palettebutton")},onClick:function(a){this.isStyleSet===this.isStateSet&&(this.isStateSet=!this.isStateSet,this.setStyle(this.isStateSet),this.notify(this._elementEvents.elementClicked,{mode:!1===this.isStateSet?"":this._mode}))},setStyle:function(a){a?(e.add(this.domNode,this.baseClass+"Pressed"),this.isStyleSet=!0):(e.remove(this.domNode,this.baseClass+"Pressed"),this.isStyleSet=!1)},setState:function(a){void 0!==a.mode&&(this.isStateSet=a.mode!==this._mode?!1:!0,this.setStyle(this.isStateSet))}})})},
"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/AbstractPaletteElement":function(){define(["dojo/_base/declare","dojo/Evented","dojo/on","dojo/touch","dojo/_base/event"],function(h,e,g,d,c){return h([e],{_elementEvents:{elementClicked:"elementClicked"},_mouseDownListener_I:null,_mouseUpListener_I:null,_mouseClickListener_I:null,setState:function(b){},notify:function(b,a,c){a.elementEvent=b;a.mode=a.mode;a.direction=c;this.emit(b,a)},getElementEvents:function(){return this._elementEvents},
createMouseListeners:function(b){this._mouseUpListener_I=g(b,d.release,function(a){c.stop(a)});this._mouseDownListener_I=g(b,d.press,function(a){c.stop(a)});this._mouseClickListener_I=g(b,"click",function(a){c.stop(a)})}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/ElementToolTipMixin":function(){define(["dojo/_base/declare","dojo/dom-class","dijit/Tooltip"],function(h,e,g){return h([],{_tooltipWidget:null,_toolTipLabel:null,setToolTipText:function(d){this._toolTipLabel=
d;this._tooltipWidget&&(this._tooltipWidget.label=this._toolTipLabel)},createToolTip:function(d){this._tooltipWidget=new g({connectId:[d],label:this._toolTipLabel,hideDelay:100,position:["below","after","before","above"]})},hideTooltip:function(){g.hide(this.domNode)},setPosition:function(d){this._tooltipWidget.position=d},isValidLeaveEvent:function(d){return!(d.relatedTarget&&e.contains(d.relatedTarget,"dijitTooltipConnector"))}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/ZoomModeButtonElement":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/ModeButtonElement"],function(h,e){return h([e],{_zoomDirection:null,_init:function(e){this.inherited(arguments);e.direction&&(this._zoomDirection=e.direction)},notify:function(e,d){d.elementEvent=e;d.mode=d.mode;d.direction=this._zoomDirection;this.emit(e,d)},setState:function(e){void 0!==e.mode&&void 0!==e.direction&&(this.isStateSet=e.mode!==this._mode?!1:e.direction!==this._zoomDirection?!1:!0,this.setStyle(this.isStateSet))}})})},
"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/3DModeButtonElement":function(){define(["dojo/_base/declare","dojo/dom-class","MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/ModeButtonElement"],function(h,e,g){return h([g],{setState:function(d){this.inherited(arguments);if(void 0!==d.is2D){var c=0===d.is2D;!0===c?e.add(this.domNode,"showButton"):!1===c&&e.remove(this.domNode,"showButton")}}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/ActionButtonElement":function(){define("dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dijit/form/Button MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/AbstractPaletteElement MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/ElementToolTipMixin".split(" "),
function(h,e,g,d,c,b,a,f,k,l){return h([f,k,l],{constructor:function(a){a&&this._init(a)},_init:function(a){a.iconClass&&(this.baseClass=a.iconClass);a.action&&(this._action=a.action);a.tooltip?this.setToolTipText(a.tooltip):this.setToolTipText(this._action.replace("Action.",""))},startup:function(){this.inherited(arguments);this.createToolTip(this.domNode);this.createMouseListeners(this.domNode);e.add(this.domNode,"palettebutton")},onClick:function(){this.notify(this._elementEvents.elementClicked,
{action:this._action},this.direction)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/floatingpalette/controllers/BasePaletteController":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/Evented"],function(h,e,g){return h([g],{_palette:null,_paletteListener:null,getView:function(){},notify:function(d,c){this.emit(d,c)},_handleMouseLeave:function(d){this._palette&&this._palette.isValidLeaveEvent(d)&&this.setVisible(!1)},_handleMouseEnter:function(d){},_handleMouseClick:function(d){},
_handleMouseMove:function(d){},setVisible:function(d){this._palette&&(d?this._palette.fadeIn():this._palette.fadeOut())},disablePalette:function(){this._palette&&this._palette.disable()},enablePalette:function(){this._palette&&this._palette.enable()},isInline:function(d){for(d=d.parentNode;d&&d!==document;){if(e.contains(d,"inlineWrapper"))return!0;d=d.parentNode}return!1},destroyView:function(){this._palette&&(this._palette.destroy(),this._palette=null)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/ModelessManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/Evented dijit/Destroyable dojo/dom-geometry dojo/dom-style dojo/on dojo/_base/event MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/EventUtils MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/TextInputElement MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/EditedAnnotationController MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/ChartHandler".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p){return h([g,d,k],{_figureView:null,_figureModel:null,_textInputElement:null,_editedLegendEntryIndex:null,_labelAxesIndex:null,_editType:null,_undoRedoManager:null,_editedAnnotation:null,_codeGen:null,_chartHandler:null,_eventHandler:null,_cursorImagePath:null,_chartClicked:!1,_TITLE_EDITED:"TITLE_EDITED",_XLABEL_EDITED:"XLABEL_EDITED",_YLABEL_EDITED:"YLABEL_EDITED",_LEGEND_EDITED:"LEGEND_EDITED",_ANNOTATION_EDITED:"ANNOTATION_EDITED",_MODELESS_INTERACTION:"modeLessInteractionCallback",
_textFieldBeingEdited:!1,_MATLAB_returned:!0,_annotationMouseDownEvent:null,_focusedFigure:null,constructor:function(a){this._figureView=a.figureView;this._figureModel=a.figureModel;this._codeGen=a.codeGenerator},setEventHandler:function(a){this._eventHandler=a},handleModelessEvent:function(a){this._MATLAB_returned=!0;a.ilegendTextPosition&&(a.iLegendEntryString&&a.iLegendEntryIndex)&&this.showTextEditBoxForLegend(a.iLegendEntryIndex,a.ilegendTextPosition,a.iLegendEntryString);a.editedAnnotationType&&
""!==a.editedAnnotationType&&this._initAnnotation(a.editedAnnotationType,a.editedAnnotationPosition,a.editedAnnotationText)},WindowButtonMouseMove:function(a){this._updateMouseCursor(a)},_isValidMouseEvent:function(a){return a.MouseOverAxes&&(a.MouseOverAxes.isInside||a.isMouseOverChart)&&""===this._figureModel.getMode()},_handleMouseMove:function(a){if(!this._figureView.isFigureInline()||this._isFigureFocused())this._isValidMouseEvent(a)&&!a.isInsideAnnotation&&!a.isInsideTextAnnotation?(this._initChartHandlerIfNeeded(),
this._chartHandler.WindowMouseMoveHandler(a)):this._handleMouseLeave(a)},_handleMouseLeave:function(a){this._initChartHandlerIfNeeded();this._chartHandler.WindowMouseLeaveHandler(a)},_initChartHandlerIfNeeded:function(){null===this._chartHandler&&(this._chartHandler=new p(this._figureView,this._figureModel,this._eventHandler,this._cursorImagePath),this.own(this._chartHandler.on("CHART_INTERACTION",e.hitch(this,function(a){this.emit("interaction",a);"heatmap"===a.args.chartType&&this._insertFigureInteractionsToUndoRedo({type:a.args.type,
interactionType:this._MODELESS_INTERACTION})}))))},WindowButtonMouseDown:function(a){a.isInsideAnnotation&&""===this._figureModel.getMode()?this._MATLAB_returned&&!(this._editedAnnotation&&null!==this._editedAnnotation._annotationElement)&&(a.editedAnnotation=!0,this.notify("AnnotationSelection",a),this._MATLAB_returned=this._textFieldBeingEdited=!1,this._annotationMouseDownEvent=a,f.stop(a)):this._isValidMouseEvent(a)&&!a.isInsideAnnotation&&(this._initChartHandlerIfNeeded(),this._chartHandler.WindowMouseDownHandler(a))},
WindowButtonMouseWheel:function(a){if(this._isValidMouseEvent(a)&&(!this._figureView.isFigureInline()||this._isFigureFocused()))this._initChartHandlerIfNeeded(),this._chartHandler.WindowMouseWheelHandler(a)},WindowMouseClick:function(a){if(""===this._figureModel.getMode())if(a.isInsideLegend&&this._MATLAB_returned&&(this._labelAxesIndex=a.labelAxesIndex,this._MATLAB_returned=!1,this.notify("WindowMouseClick",a),f.stop(a)),a.isInsideTextAnnotation)this._MATLAB_returned&&!(this._editedAnnotation&&null!==
this._editedAnnotation._annotationElement)&&(a.editedAnnotation=!0,this.notify("AnnotationSelection",a),f.stop(a),this._MATLAB_returned=!1,this._textFieldBeingEdited=!0,this.emit("startEditing",a));else if((a.isInsideTitle||a.isInsideXLabel||a.isInsideYLabel)&&null===this._textInputElement){this._labelAxesIndex=a.labelAxesIndex;var b="",c="",d="";a.isInsideTitle?(b=this._TITLE_EDITED,c=this._figureModel.getTitlePositions()[a.labelAxesIndex],d=this._figureModel.getTitles()[a.labelAxesIndex]):a.isInsideXLabel?
(b=this._XLABEL_EDITED,c=this._figureModel.getXLabelPositions()[a.labelAxesIndex],d=this._figureModel.getXLabels()[a.labelAxesIndex]):a.isInsideYLabel&&(b=this._YLABEL_EDITED,c=this._figureModel.getYLabelPositions()[a.labelAxesIndex],d=this._figureModel.getYLabels()[a.labelAxesIndex]);this._showTextBoxForLabel(c,d,b);f.stop(a)}},forceCommit:function(a){this._textInputElement&&this._textInputElement.isVisible()&&(this._doCommit(this._textInputElement.get("value")),this._doReset());this.commitPendingAnnotation()},
forceRollback:function(){this._textInputElement&&this._textInputElement.isVisible()&&this._doReset()},showTextEditBoxForLegend:function(a,b,c){a&&(this._editedLegendEntryIndex=a);this._showTextBoxForLabel(b,c,this._LEGEND_EDITED)},setCursorImagePath:function(a){this._cursorImagePath=a},_updateMouseCursor:function(a){""===this._figureModel.getMode()?a.isInsideTextAnnotation||null===this._textInputElement&&(a.isInsideLegend||a.isInsideTitle||a.isInsideXLabel||a.isInsideYLabel)?b.set(this._figureView._wrapperElement,
"cursor","text"):a.isInsideAnnotation?b.set(this._figureView._wrapperElement,"cursor","pointer"):b.set(this._figureView._wrapperElement,"cursor","default"):b.set(this._figureView._wrapperElement,"cursor","default")},_showTextBoxForLabel:function(a,b,c){this._editType=c;this._initTextBox();this._positionTextBox(a);this._textInputElement.show();this._textInputElement.setText(b);this._textInputElement.focus();this._textInputElement.startEditing();this.emit("startEditing",{})},_initTextBox:function(){this._textInputElement=
new l({widgetClass:"legendEdit"});this.own(a(this._textInputElement,"startEditing",e.hitch(this,function(a){this.emit("startEditing",a)})));this._textInputElement.placeAt(this._figureView.getWrapperNode());this._textInputElement.setTextAlignement("left");this._addCommitListener(this._textInputElement.domNode);this._textInputElement.START_WIDTH=10;this._textInputElement.setPromptingState(!1)},_addCommitListener:function(b){this.own(a(b,"textcommit",e.hitch(this,function(a){this._doCommit(a.textValue);
this._insertFigureInteractionsToUndoRedo({type:this._editType,newText:a.textValue,entryIndex:this._editedLegendEntryIndex,legendAxesIndex:this._labelAxesIndex,interactionType:this._MODELESS_INTERACTION})})))},_addAnnotationInteractionListener:function(b){this.own(a(b,"annotationInteraction",e.hitch(this,function(a){this.emit("interaction",a);this._insertFigureInteractionsToUndoRedo({type:a.type,interactionType:this._MODELESS_INTERACTION})})))},_doCommit:function(a){this.emit("interaction",{fcn:this._MODELESS_INTERACTION,
args:{type:this._editType,newText:a,entryIndex:this._editedLegendEntryIndex,legendAxesIndex:this._labelAxesIndex}});this._editedLegendEntryIndex=null},_doReset:function(){this._editedLegendEntryIndex=null;this._textInputElement.stopEditing();this._removeEditedElement()},_positionTextBox:function(a){a=this._figureView.getAxesPlotBox(a);var f=c.position(this._figureView.getWrapperNode(),!1),d=a.yLow-f.y,e=a.xHigh-f.x-(a.xHigh-a.xLow);a.yHigh-a.yLow>a.xHigh-a.xLow&&(d=(a.yHigh+a.yLow)/2-f.y);b.set(this._textInputElement.domNode,
{position:"absolute",left:e+"px",top:d+"px",height:"20px"})},notify:function(a,b){var c=this.getEventPosition(b),c={x:c.x,y:c.y,type:b.type},c=this.convertEventToMatlabRelativeCoords(c,this._figureView.getDomNode());this.emit("interaction",{fcn:this._MODELESS_INTERACTION,args:{type:a,x:c.x,y:c.y,isInsideLegend:b.isInsideLegend,isInsideAnnotation:b.isInsideAnnotation||b.isInsideTextAnnotation}});this._editType=null},destroy:function(){this._removeEditedElement();this._chartHandler&&this._chartHandler.destroy()},
_removeEditedElement:function(){this._textInputElement&&(this._textInputElement.destroy(),this._textInputElement=null);this._editedAnnotation&&(this._editedAnnotation.destroy(),this._editedAnnotation=null)},setUndoRedoManager:function(a){this._undoRedoManager=a},_insertFigureInteractionsToUndoRedo:function(a){this._figureModel.getMode();a.codeGenState={attachCodeGenOnUndo:!1,attachCodeGenOnRedo:!0};this._codeGen&&this._codeGen.isCodeGenAttached()&&(a.codeGenState.attachCodeGenOnUndo=!0);this._undoRedoManager.insertInteractionsForUndoRedo(this._figureModel,
a)},_initAnnotation:function(a,b,c){this._editedAnnotation=new n({figureView:this._figureView,figureModel:this._figureModel,type:a,text:c,position:b});this._addAnnotationInteractionListener(this._editedAnnotation);this._textFieldBeingEdited?this._editedAnnotation.focusTextField():this._editedAnnotation.performMouseDown(this._annotationMouseDownEvent)},commitPendingAnnotation:function(){this._editedAnnotation&&this._editedAnnotation.commitAnnotation()},setFocusedFigure:function(a){this._focusedFigure=
a},_isFigureFocused:function(){return this._focusedFigure&&this._focusedFigure.figureId===this._figureModel.figureId}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/TextInputElement":function(){define("dojo/_base/declare dojo/dom-class dojo/on dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/mouse dojo/keys dojo/query dojo/_base/event dijit/form/TextBox MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/EventUtils dojo/has".split(" "),function(h,e,g,d,c,b,a,f,k,l,n,p,m){return h([n,
p],{_keyboardListener:null,_isExpander:!0,START_WIDTH:128,documentMouseDownHandler:null,documentMouseUpHandler:null,eraseWhileEditing:!0,originalPosition:null,_textAlignment:"center",_MIN_WIDTH:20,_MAX_IMG_WIDTH:560,_isEditing:!1,_mouseDownTarget:null,_elementEvents:{textCommit:"textCommit",textRollback:"textRollback",textClicked:"textClicked"},constructor:function(a){a&&this._init(a)},_init:function(a){a.widgetClass&&(this.baseClass=a.widgetClass);a.placeHolderText&&(this.placeHolderText=a.placeHolderText);
a.fieldType&&(this.fieldType=a.fieldType);a.customClass&&(this.customClass=a.customClass)},startup:function(){this.inherited(arguments);e.add(this.domNode,"placeholder");c.set(this.domNode,"width",this.START_WIDTH+"px");c.set(this.focusNode,"width",this.START_WIDTH+"px");this.customClass&&e.add(this.domNode,this.customClass);this.createMouseListeners(this.domNode);this.createKeyboardListeners(this.domNode);this.documentMouseDownHandler=b.hitch(this,"_handleMouseDown")},setTextAlignement:function(a){this._textAlignment=
a},createKeyboardListeners:function(a){this.own(g(a,"keydown",b.hitch(this,"_handleKeyboardEvent")))},isEditing:function(){return this._isEditing},createMouseListeners:function(a){this.own(g(a,"click",b.hitch(this,"_handleClickEvent")));this.own(g(a,"input",b.hitch(this,function(){this._isEditing||this.startEditing()})));this.own(g(a,"contextmenu",function(a){dojo.stopEvent(a)}));this.own(g(a,"dragstart",function(a){dojo.stopEvent(a)}));this.own(g(a,"dragend",function(a){dojo.stopEvent(a)}));(m("trident")||
m("ie")||m("edge"))&&this.own(g(a,"selectstart",function(a){a.stopPropagation()}))},_handleClickEvent:function(a){this.focus();this.startEditing();this.notify("textClicked",{titleWidget:this});a.stopPropagation()},_handleKeyboardEvent:function(a){switch(this._getKeyCode(a)){case f.ENTER:this.commit();break;case f.TAB:this._focusNextNode(a);break;case f.ESCAPE:this.rollback();break;default:this._doResize()}},_focusNextNode:function(a){a.stopPropagation();a={textValue:this.get("value"),fieldType:this.fieldType,
eventKeyCode:a.shiftKey?"SHIFTTAB":"TAB"};this.stopEditing();this.notify("textCommit",a)},_getParentDomNodePosition:function(){return d.position(this.domNode.parentNode)},_getDomNodePosition:function(){return d.position(this.domNode)},_getFocusDomNodePosition:function(){return d.position(this.focusNode)},_setDomNodeLeftPosition:function(a){c.set(this.domNode,"left",a+"px")},_setFocusDomNodeLeftPosition:function(a){c.set(this.focusNode,"left",a+"px")},_setDomNodesWidth:function(a){c.set(this.domNode,
"width",a+"px")},_setFocusDomNodesWidth:function(a){c.set(this.focusNode,"width",a+"px")},_doResize:function(){var a=this.get("value"),b=this._getStringDimsInPixels(a).width,b=Math.max(b,this._MIN_WIDTH),a=1.2*b,f=this._getParentDomNodePosition(),d=this._getWidthInFigureBounds(a);b>this.START_WIDTH&&(a<f.w?(b=this._getDomNodePosition(),this.originalPosition||(this.originalPosition=b),this._setDomNodesWidth(a),this._setFocusDomNodesWidth(a),"center"===this._textAlignment?(this._setDomNodeLeftPosition(this.originalPosition.x-
f.x-(a-this.originalPosition.w)/2),this._setFocusDomNodeLeftPosition(this.originalPosition.x-f.x-(a-this.originalPosition.w)/2)):(f=c.get(this.domNode,"left")-(a-d),a=c.get(this.focusNode,"left")-(a-d),this._setDomNodeLeftPosition(0>f?0:f),this._setFocusDomNodeLeftPosition(0>a?0:a))):(a=Math.min(f.w,this._MAX_IMG_WIDTH),d=k("input",this.domNode),d[0]&&d[0].setSelectionRange&&d[0].setSelectionRange(0,0),this._setDomNodesWidth(a),this._setFocusDomNodesWidth(a),this._setDomNodeLeftPosition(0),this._setFocusDomNodeLeftPosition(0)))},
_getWidthInFigureBounds:function(a){var b=this._getDomNodePosition(),c=this._getParentDomNodePosition();return b.x+a>c.x+c.w?c.x+c.w-b.x:a},_getStringDimsInPixels:function(a){var b=document.createElement("canvas").getContext("2d"),f=c.get(this.domNode,"fontSize"),d=c.get(this.domNode,"fontFamily"),e=c.get(this.domNode,"fontWeight");b.font=e+" "+f+" "+d;a=b.measureText(a).width;b=parseInt(b.font);return{width:a,height:b}},commit:function(a){a={textValue:this.get("value"),fieldType:this.fieldType,focusedWidget:a};
this.stopEditing();this.notify("textCommit",a)},rollback:function(){this.set("value","");this.notify("textRollback",{textValue:""})},startEditing:function(){this.setPromptingState(!1);this.addEventListener(window,"mousedown",this.documentMouseDownHandler);this._isEditing=!0},isEditing:function(){return this._isEditing},setPromptingState:function(a){a?(e.remove(this.domNode,"editing"),e.add(this.domNode,"placeholder"),this.setText(this.placeHolderText)):(this.isPromptingState()&&this.eraseWhileEditing&&
this.setText(""),e.remove(this.domNode,"placeholder"),e.add(this.domNode,"editing"));this.eraseWhileEditing=a},isPromptingState:function(){return e.contains(this.domNode,"placeholder")},stopEditing:function(){this.removeEventListener(window,"mousedown",this.documentMouseDownHandler);this._isEditing=!1},notify:function(a,b){b.elementEvent=a;b.textValue=b.textValue;this.emit(a,b)},_getKeyCode:function(a){return a.which?a.which:a.keyCode?a.keyCode:a.charCode?a.charCode:a.key?a.key:null},setState:function(a){},
isVisible:function(){return"none"!==c.get(this.domNode,"display")},hide:function(){c.set(this.domNode,"display","none")},show:function(){c.set(this.domNode,"display","inline-block")},_handleMouseDown:function(a){a.stopPropagation();a=dijit.getEnclosingWidget(a.target);this!==a&&this._callOnMouseUp(b.hitch(this,"commit",a))},_callOnMouseUp:function(a){var c=b.hitch(this,function(b){this.removeEventListener(window,"mouseup",c);b.stopPropagation();a()});this.addEventListener(window,"mouseup",c)},setText:function(a){this.set("value",
a.trim());this._doResize();this.START_WIDTH=c.get(this.domNode,"width")},destroy:function(){this.stopEditing();this.inherited(arguments)}})})},"dijit/form/TextBox":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-style dojo/_base/kernel dojo/_base/lang dojo/on dojo/sniff ./_FormValueWidget ./_TextBoxMixin dojo/text!./templates/TextBox.html ../main ../_mw/utils/deprecation".split(" "),function(h,e,g,d,c,b,a,f,k,l,n,p){p.deprecated({deprecated:{module:"dijit/form/TextBox"},replacement:{module:"mw-form/TextField"},
geckNumber:1352405});h=h("dijit.form.TextBox",[f,k],{templateString:l,_singleNodeTemplate:'\x3cinput class\x3d"dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point\x3d"textbox,focusNode" autocomplete\x3d"off" type\x3d"${type}" ${!nameAttrSetting} /\x3e',_buttonInputDisabled:a("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var a=this.type.toLowerCase();if(this.templateString&&"input"==this.templateString.toLowerCase()||("hidden"==a||"file"==a)&&this.templateString==
this.constructor.prototype.templateString)this.templateString=this._singleNodeTemplate;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);9>a("ie")&&this.defer(function(){try{var a=g.getComputedStyle(this.domNode);if(a){var b=a.fontFamily;if(b){var c=this.domNode.getElementsByTagName("INPUT");if(c)for(a=0;a<c.length;a++)c[a].style.fontFamily=b}}}catch(f){}})},_setPlaceHolderAttr:function(a){this._set("placeHolder",a);this._phspan||(this._attachPoints.push("_phspan"),this._phspan=
e.create("span",{className:"dijitPlaceHolder dijitInputField"},this.textbox,"after"),this.own(b(this._phspan,"mousedown",function(a){a.preventDefault()}),b(this._phspan,"touchend, pointerup, MSPointerUp",c.hitch(this,function(){this.focus()}))));this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(a));this._updatePlaceHolder()},_onInput:function(a){this.inherited(arguments);this._updatePlaceHolder()},_updatePlaceHolder:function(){this._phspan&&(this._phspan.style.display=
this.placeHolder&&!this.textbox.value?"":"none")},_setValueAttr:function(a,b,c){this.inherited(arguments);this._updatePlaceHolder()},getDisplayedValue:function(){d.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue")},setDisplayedValue:function(a){d.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",a)},_onBlur:function(b){this.disabled||
(this.inherited(arguments),this._updatePlaceHolder(),a("mozilla")&&this.selectOnClick&&(this.textbox.selectionStart=this.textbox.selectionEnd=void 0))},_onFocus:function(a){!this.disabled&&!this.readOnly&&(this.inherited(arguments),this._updatePlaceHolder())}});9>a("ie")&&(h.prototype._isTextSelected=function(){var a=this.ownerDocument.selection.createRange();return a.parentElement()==this.textbox&&0<a.text.length},n._setSelectionRange=k._setSelectionRange=function(a,b,c){a.createTextRange&&(a=a.createTextRange(),
a.collapse(!0),a.moveStart("character",-99999),a.moveStart("character",b),a.moveEnd("character",c-b),a.select())});return h})},"dijit/form/_FormValueWidget":function(){define(["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(h,e,g,d){return h("dijit.form._FormValueWidget",[g,d],{_layoutHackIE7:function(){if(7==e("ie"))for(var c=this.domNode,b=c.parentNode,a=c.firstChild||c,f=a.style.filter,d=this;b&&0==b.clientHeight;)(function(){var c=d.connect(b,"onscroll",function(){d.disconnect(c);
a.style.filter=(new Date).getMilliseconds();d.defer(function(){a.style.filter=f})})})(),b=b.parentNode}})})},"dijit/form/_FormValueMixin":function(){define("dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on ./_FormWidgetMixin".split(" "),function(h,e,g,d,c,b){return h("dijit.form._FormValueMixin",b,{readOnly:!1,_setReadOnlyAttr:function(a){e.set(this.focusNode,"readOnly",a);this._set("readOnly",a)},postCreate:function(){this.inherited(arguments);void 0===this._resetValue&&(this._lastValueReported=
this._resetValue=this.value)},_setValueAttr:function(a,b){this._handleOnChange(a,b)},_handleOnChange:function(a,b){this._set("value",a);this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,!1)},reset:function(){this._hasBeenBlurred=!1;this._setValueAttr(this._resetValue,!0)}})})},"dijit/form/_TextBoxMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/sniff dojo/keys dojo/_base/lang dojo/on ../main".split(" "),function(h,e,g,d,c,b,a,f){var k=
e("dijit.form._TextBoxMixin",null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(a,b,c){var f;void 0!==a&&(f=this.filter(a),"string"!=typeof c&&(c=null!==f&&("number"!=typeof f||!isNaN(f))?this.filter(this.format(f,this.constraints)):"",0!=this.compare(f,this.filter(this.parse(c,this.constraints)))&&(c=null)));if(null!=c&&("number"!=typeof c||
!isNaN(c))&&this.textbox.value!=c)this.textbox.value=c,this._set("displayedValue",this.get("displayedValue"));this.inherited(arguments,[f,b])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},_setDisplayedValueAttr:function(a){null==a?a="":"string"!=typeof a&&(a=String(a));this.textbox.value=a;this._setValueAttr(this.get("value"),void 0);this._set("displayedValue",this.get("displayedValue"))},format:function(a){return null==a?"":a.toString?a.toString():a},
parse:function(a){return a},_refreshState:function(){},onInput:function(){},_onInput:function(a){this._lastInputEventValue=this.textbox.value;this._processInput(this._lastInputProducingEvent||a);delete this._lastInputProducingEvent;this.intermediateChanges&&this._handleOnChange(this.get("value"),!1)},_processInput:function(){this._refreshState();this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);
this.own(a(this.textbox,"keydown, keypress, paste, cut, compositionend",b.hitch(this,function(f){var e;if("keydown"==f.type&&229!=f.keyCode){e=f.keyCode;switch(e){case c.SHIFT:case c.ALT:case c.CTRL:case c.META:case c.CAPS_LOCK:case c.NUM_LOCK:case c.SCROLL_LOCK:return}if(!f.ctrlKey&&!f.metaKey&&!f.altKey){switch(e){case c.NUMPAD_0:case c.NUMPAD_1:case c.NUMPAD_2:case c.NUMPAD_3:case c.NUMPAD_4:case c.NUMPAD_5:case c.NUMPAD_6:case c.NUMPAD_7:case c.NUMPAD_8:case c.NUMPAD_9:case c.NUMPAD_MULTIPLY:case c.NUMPAD_PLUS:case c.NUMPAD_ENTER:case c.NUMPAD_MINUS:case c.NUMPAD_PERIOD:case c.NUMPAD_DIVIDE:return}if(65<=
e&&90>=e||48<=e&&57>=e||e==c.SPACE)return;e=!1;for(var g in c)if(c[g]===f.keyCode){e=!0;break}if(!e)return}}(e=32<=f.charCode?String.fromCharCode(f.charCode):f.charCode)||(e=65<=f.keyCode&&90>=f.keyCode||48<=f.keyCode&&57>=f.keyCode||f.keyCode==c.SPACE?String.fromCharCode(f.keyCode):f.keyCode);e||(e=229);if("keypress"==f.type){if("string"!=typeof e)return;if("a"<=e&&"z">=e||"A"<=e&&"Z">=e||"0"<=e&&"9">=e||" "===e)if(f.ctrlKey||f.metaKey||f.altKey)return}var h={faux:!0},k;for(k in f)/^(layer[XY]|returnValue|keyLocation)$/.test(k)||
(g=f[k],"function"!=typeof g&&"undefined"!=typeof g&&(h[k]=g));b.mixin(h,{charOrCode:e,_wasConsumed:!1,preventDefault:function(){h._wasConsumed=!0;f.preventDefault()},stopPropagation:function(){f.stopPropagation()}});this._lastInputProducingEvent=h;!1===this.onInput(h)&&(h.preventDefault(),h.stopPropagation());if(!h._wasConsumed&&9>=d("ie"))switch(f.keyCode){case c.TAB:case c.ESCAPE:case c.DOWN_ARROW:case c.UP_ARROW:case c.LEFT_ARROW:case c.RIGHT_ARROW:break;default:if(f.keyCode==c.ENTER&&"textarea"!=
this.textbox.tagName.toLowerCase())break;this.defer(function(){this.textbox.value!==this._lastInputEventValue&&a.emit(this.textbox,"input",{bubbles:!0})})}})),a(this.textbox,"input",b.hitch(this,"_onInput")),a(this.domNode,"keypress",function(a){a.stopPropagation()}))},_blankValue:"",filter:function(a){if(null===a)return this._blankValue;if("string"!=typeof a)return a;this.trim&&(a=b.trim(a));this.uppercase&&(a=a.toUpperCase());this.lowercase&&(a=a.toLowerCase());this.propercase&&(a=a.replace(/[^\s]+/g,
function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}));return a},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(a){this.disabled||(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},_onFocus:function(c){!this.disabled&&!this.readOnly&&(this.selectOnClick&&"mouse"==c&&(this._selectOnClickHandle=a.once(this.domNode,"mouseup, touchend",b.hitch(this,function(a){this._isTextSelected()||
k.selectInputText(this.textbox)})),this.own(this._selectOnClickHandle),this.defer(function(){this._selectOnClickHandle&&(this._selectOnClickHandle.remove(),this._selectOnClickHandle=null)},500)),this.inherited(arguments),this._refreshState())},reset:function(){this.textbox.value="";this.inherited(arguments)}});k._setSelectionRange=f._setSelectionRange=function(a,b,c){a.setSelectionRange&&a.setSelectionRange(b,c)};k.selectInputText=f.selectInputText=function(a,b,c){a=g.byId(a);isNaN(b)&&(b=0);isNaN(c)&&
(c=a.value?a.value.length:0);try{a.focus(),k._setSelectionRange(a,b,c)}catch(f){}};return k})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/EditedAnnotationController":function(){define("dojo/_base/declare dojo/_base/lang dojo/Evented dijit/Destroyable dojo/on dojo/_base/event MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/EventUtils MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/TextInputElement MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/LineAnnotation MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/ArrowAnnotation MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/DoubleArrowAnnotation MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/TextArrowAnnotation".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p){return h([g,d,a],{_ANNOTATION_EDITED:"ANNOTATION_EDITED",_ANNOTATION_CLEARED:"ANNOTATION_CLEARED",_annotationElement:null,_MODELESS_INTERACTION:"modeLessInteractionCallback",constructor:function(a){var b=a.figureModel,c=a.figureView;switch(a.type){case "lineshape":this._annotationElement=new k(b,c);break;case "arrowshape":this._annotationElement=new l(b,c);break;case "doubleendarrowshape":this._annotationElement=new n(b,c);break;case "textarrowshape":this._annotationElement=
new p(b,c)}this._annotationElement.showAffordances(b.getAxesPositions(),c.getWrapperNode(),c.getDomNode());this._setAnnotationProperties(a.position,a.text)},_setAnnotationProperties:function(a,b){this._addInteractionListener();var c=[a[0]*this._annotationElement._imageNodePosition.w,a[1]*this._annotationElement._imageNodePosition.h,a[2]*this._annotationElement._imageNodePosition.w,a[3]*this._annotationElement._imageNodePosition.h];this._annotationElement.setAnnotationEndPoints([c[0],c[1]],[c[2],c[3]]);
this._annotationElement.show();this._annotationElement.draw(this._annotationElement._anchorPoint,this._annotationElement._endPoint);this._annotationElement._textField&&(this._annotationElement._textField.value=b,this._annotationElement.removeTextFocusListener(),this._annotationElement.doResize());this._annotationElement._canvas.focus()},performMouseDown:function(a){this._annotationElement.addMouseMoveForExistingAnnotation(a)},focusTextField:function(){this._annotationElement._textField.focus();this._annotationElement.createFocusTextListener()},
_addInteractionListener:function(){this.own(this._annotationElement.on("interaction",e.hitch(this,function(a){this._emitAnnotationCommit(a)})))},_emitAnnotationCommit:function(a){if("clearMode"===a.args.type)a.args.editType&&(this._annotationElement.clearWait(),this._annotationElement.destroy(),a={fcn:this._MODELESS_INTERACTION,args:{type:this._ANNOTATION_CLEARED,editType:a.args.editType}},this.emit("annotationInteraction",a));else{var b=a.args.configurationData;a={fcn:this._MODELESS_INTERACTION,
args:{type:this._ANNOTATION_EDITED,editType:a.args.type,relativePosition:b.relativePosition,editedText:b.text?b.text:""}};this.emit("annotationInteraction",a)}},commitAnnotation:function(){this._annotationElement&&(this._annotationElement.clearWait(),this._annotationElement.hide(!1),this.destroy())},destroy:function(){this._annotationElement&&(this._annotationElement.destroy(),this._annotationElement=null);this.inherited(arguments)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/LineAnnotation":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-style dojo/dom-construct dojo/dom-geometry dojo/on dojo/keys MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/Annotation".split(" "),
function(h,e,g,d,c,b,a,f,k){return h([k],{matlabInteractionFunction:"line",mode:"placedLineMode",draw:function(a,b){var c=this._canvas.getContext("2d");c.clearRect(0,0,this._canvas.width,this._canvas.height);c.lineWidth=1;c.beginPath();var f=[a[0],a[1]],d=[b[0],b[1]];c.moveTo(f[0],f[1]);c.lineTo(d[0],d[1]);c.rect(f[0]-2,f[1]-2,4,4);c.rect(d[0]-2,d[1]-2,4,4);c.stroke()}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/Annotation":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom dojo/dom-class dojo/dom-style dojo/dom-construct dojo/dom-geometry dojo/on dojo/keys MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/EventUtils MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/SpringLoadedModePreview".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n){return h([n,l],{_anchorPoint:null,_endPoint:null,_mouseDownPoint:null,_pivotPoint:"end",_canvas:null,_mouseDownHandlerFcn:null,_mouseMoveHandlerFcn:null,_mouseUpHandlerFcn:null,_keyHandlerFcn:null,_isMouseMove:!1,_imageNodePosition:null,_imageNode:null,_cursorOffset:5,_Z_KEY:90,createDomNodes:function(a,c){this._imageNode=c;var e=b.create("div");b.place(e,a);this.previewDomNodes=[e];this._canvas=b.create("canvas");b.place(this._canvas,e);d.add(this._canvas,"scribe");
d.add(e,"scribe");this.own(f(e,"dragstart",function(a){dojo.stopEvent(a)}));this.own(f(e,"dragend",function(a){dojo.stopEvent(a)}));return e},setAnnotationEndPoints:function(a,b){this._anchorPoint=a;this._endPoint=b},addClickListener:function(a,b){this.matlabInteractionFunction=b;this._mouseMoveHandlerFcn=e.hitch(this,"_mouseMoveListener");this._mouseUpHandlerFcn=e.hitch(this,"_mouseUpListener");this._addMouseupWindowListener();this._mouseDownHandlerFcn=e.hitch(this,"_mouseDownHandler");this._addMousedownWindowListener()},
_addKeyListener:function(){this._keyHandlerFcn||(this._keyHandlerFcn=e.hitch(this,"_keyHandler"));this._removeKeyListener();document.body.addEventListener("keydown",this._keyHandlerFcn,!0)},_removeKeyListener:function(){document.body.removeEventListener("keydown",this._keyHandlerFcn,!0)},_getKeyCode:function(a){return a.which?a.which:a.keyCode?a.keyCode:a.charCode?a.charCode:a.key?a.key:null},_keyHandler:function(a){var b=this._getKeyCode(a);if(this._isPositioned())switch(b){case k.UP_ARROW:a.stopPropagation();
this._anchorPoint[1]--;this._endPoint[1]--;this.draw(this._anchorPoint,this._endPoint);break;case k.DOWN_ARROW:a.stopPropagation();this._anchorPoint[1]++;this._endPoint[1]++;this.draw(this._anchorPoint,this._endPoint);break;case k.RIGHT_ARROW:a.stopPropagation();this._anchorPoint[0]++;this._endPoint[0]++;this.draw(this._anchorPoint,this._endPoint);break;case k.LEFT_ARROW:a.stopPropagation();this._anchorPoint[0]--;this._endPoint[0]--;this.draw(this._anchorPoint,this._endPoint);break;case k.ENTER:this.commit();
a.stopPropagation();a.preventDefault();break;case k.ESCAPE:this.commit();a.stopPropagation();break;case k.DELETE:this._resetAnnotation("delete");a.stopPropagation();break;case this._Z_KEY:if(a.ctrlKey||a.metaKey)this._resetAnnotation("undo"),a.stopPropagation()}else b===k.ESCAPE&&(this._resetAnnotation(),a.stopPropagation())},_resetAnnotation:function(a){this._removeMouseupWindowListener();this._removeMousedownWindowListener();this._reset();this.clearMode(a);document.body.removeEventListener("keydown",
this._keyHandlerFcn,!0)},positionAffordance:function(b,f,d,e,g,h,k,l){this._imageNodePosition={w:b.w,h:b.h,x:f,y:d};f=this.previewDomNodes[0];this._canvas.width=b.w;this._canvas.height=b.h;c.set(f,{width:b.w+"px",height:b.h+"px"});c.set(this._canvas,{width:b.w+"px",height:b.h+"px"});b=a.getPadExtents(e);c.set(f,{top:b.t+"px",left:b.l+"px"});this.parentNode=e},showAffordances:function(b,c,f){if(!this.previewDomNodes||0===this.previewDomNodes.length)b=this.createDomNodes(c,f),this.addClickListener(b,
this.matlabInteractionFunction);f=a.position(f);this.positionAffordance(f,f.x,f.y,c);this._canvas.getContext("2d").clearRect(0,0,this._canvas.width,this._canvas.height);this._endPoint=this._anchorPoint=null;this.show();document.body.removeEventListener("keydown",this._keyHandlerFcn,!0);this._addKeyListener()},_getEventPositionRelativeToCanvas:function(a){a=this.getEventPosition(a);a.x-=this._imageNodePosition.x;a.y-=this._imageNodePosition.y;return a},_updateImageNodePosition:function(){var b=a.position(this._imageNode);
this._imageNodePosition.y=b.y;this._imageNodePosition.x=b.x},addMouseMoveForExistingAnnotation:function(a){a=this._getEventPositionRelativeToCanvas(a);this._mouseDownPoint=[a.x,a.y];this._isMouseMove=!1;this._addMousemoveWindowListener();this._pivotPoint="translate"},_mouseDownHandler:function(a){dojo.stopEvent(a);this._updateImageNodePosition();var b=this._getEventPositionRelativeToCanvas(a);0>b.x||0>b.y||b.x>this._imageNodePosition.w||b.y>this._imageNodePosition.h?this._pivotPoint="":(this._isMouseMove=
!1,this._anchorPoint||(this._anchorPoint=[b.x+this._cursorOffset,b.y+this._cursorOffset]),this._pivotPoint="",this._mouseDownPoint=[b.x,b.y],this._endPoint?(b=this._getClosestVertex(a),10>b.distance?(this._pivotPoint=b.vertex,this._addMousemoveWindowListener()):this._isAlignedWithLine(a)?(this._addMousemoveWindowListener(),this._pivotPoint="translate"):this.commit()):this._addMousemoveWindowListener())},_addMouseupWindowListener:function(){this.addEventListener(window,"mouseup",this._mouseUpHandlerFcn)},
_removeMouseupWindowListener:function(){this.removeEventListener(window,"mouseup",this._mouseUpHandlerFcn)},_addMousedownWindowListener:function(){this.addEventListener(document,"mousedown",this._mouseDownHandlerFcn)},_removeMousedownWindowListener:function(){this.removeEventListener(document,"mousedown",this._mouseDownHandlerFcn)},_addMousemoveWindowListener:function(){this.addEventListener(window,"mousemove",this._mouseMoveHandlerFcn)},_removeMousemoveWindowListener:function(){this.removeEventListener(window,
"mousemove",this._mouseMoveHandlerFcn)},_mouseMoveListener:function(a){this._isMouseMove=!0;var b=this._getEventPositionRelativeToCanvas(a);this._anchorPoint&&2<=this._anchorPoint.length&&(!this._endPoint||"end"===this._pivotPoint)?this.draw(this._anchorPoint,[b.x+this._cursorOffset,b.y+this._cursorOffset]):this._endPoint&&2<=this._endPoint.length&&"anchor"===this._pivotPoint?this.draw([b.x+this._cursorOffset,b.y+this._cursorOffset],this._endPoint):"translate"===this._pivotPoint&&this._isPositioned()&&
(b=[b.x+this._cursorOffset-this._mouseDownPoint[0],b.y+this._cursorOffset-this._mouseDownPoint[1]],this.draw([this._anchorPoint[0]+b[0],this._anchorPoint[1]+b[1]],[this._endPoint[0]+b[0],this._endPoint[1]+b[1]]));a.stopPropagation()},_mouseUpListener:function(a){this._removeMousemoveWindowListener();var b=this._getEventPositionRelativeToCanvas(a);if(!this._isMouseMove)if(this._endPoint)this._pivotPoint="";else{this._rollback();a.stopPropagation();return}if(!this._endPoint||"end"===this._pivotPoint)this._endPoint=
[b.x+this._cursorOffset,b.y+this._cursorOffset];else if("anchor"===this._pivotPoint)this._anchorPoint=[b.x+this._cursorOffset,b.y+this._cursorOffset];else if("translate"===this._pivotPoint){var c=[b.x+this._cursorOffset-this._mouseDownPoint[0],b.y+this._cursorOffset-this._mouseDownPoint[1]];this._anchorPoint=[this._anchorPoint[0]+c[0],this._anchorPoint[1]+c[1]];this._endPoint=[this._endPoint[0]+c[0],this._endPoint[1]+c[1]]}(b.x>this._imageNodePosition.w||0>b.x||b.y>this._imageNodePosition.h||0>b.y)&&
this.commit();dojo.stopEvent(a)},_getAngleFromLine:function(a){a=this._getEventPositionRelativeToCanvas(a);var b=[a.x+this._cursorOffset,a.y+this._cursorOffset];a=[this._endPoint[0]-this._anchorPoint[0],this._endPoint[1]-this._anchorPoint[1]];var c=[b[0]-this._anchorPoint[0],b[1]-this._anchorPoint[1]],b=[b[0]-this._endPoint[0],b[1]-this._endPoint[1]],f=-b[0]*a[1]+b[1]*a[0],d=360/(2*Math.PI)*Math.asin((c[0]*a[1]-c[1]*a[0])/(Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2))*Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],
2))));0>c[0]*a[0]+c[1]*a[1]&&(d+=180);c=360/(2*Math.PI)*Math.asin(f/(Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2))*Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2))));0>b[0]*-a[0]+b[1]*-a[1]&&(c+=180);return[d,c]},_isAlignedWithLine:function(a){a=this._getAngleFromLine(a);return 10>Math.abs(a[0])&&90>Math.abs(a[1])||90>Math.abs(a[0])&&10>Math.abs(a[1])},_getClosestVertex:function(a){var b=this._getEventPositionRelativeToCanvas(a);a=Math.sqrt(Math.pow(b.x+this._cursorOffset-this._anchorPoint[0],2)+Math.pow(b.y+
this._cursorOffset-this._anchorPoint[1],2));b=Math.sqrt(Math.pow(b.x+this._cursorOffset-this._endPoint[0],2)+Math.pow(b.y+this._cursorOffset-this._endPoint[1],2));return a<=b?{distance:a,vertex:"anchor"}:{distance:b,vertex:"end"}},commit:function(){this._removeMouseupWindowListener();this._removeMousedownWindowListener();if(this._isPositioned()){var a=[this._anchorPoint[0]/this._imageNodePosition.w,this._anchorPoint[1]/this._imageNodePosition.h,this._endPoint[0]/this._imageNodePosition.w,this._endPoint[1]/
this._imageNodePosition.h],b=(0>a[1]||1<a[1])&&(0>a[3]||1<a[3]);(0>a[0]||1<a[0])&&(0>a[2]||1<a[2])||b?this._resetAnnotation("delete"):(this.emit("interaction",{fcn:"springLoadedModeAction",args:{type:this.matlabInteractionFunction,axesIndex:-1,configurationData:{relativePosition:a},mode:this.mode}}),document.body.removeEventListener("keydown",this._keyHandlerFcn,!0),this._reset())}else this._rollback()},_isPositioned:function(){return this._anchorPoint&&this._endPoint&&2==this._anchorPoint.length&&
2==this._endPoint.length&&!this._anchorPoint.some(function(a){return isNaN(a)})&&!this._endPoint.some(function(a){return isNaN(a)})},draw:function(a,b){throw Error("Subclasses should implement this method");},show:function(){this.previewDomNodes.forEach(function(a){c.set(a,"display","block")})},_isVisible:function(){return this.previewDomNodes&&0<this.previewDomNodes.length&&this.previewDomNodes[0]&&"block"===c.get(this.previewDomNodes[0],"display")},_reset:function(){this._anchorPoint=[];this._endPoint=
[]},_rollback:function(){this._removeMouseupWindowListener();this._removeMousedownWindowListener();this._reset();this.clearMode();document.body.removeEventListener("keydown",this._keyHandlerFcn,!0)},hide:function(a){!a&&this._isVisible()?this.commit():this._rollback();this._removeKeyListener();this._removeMouseupWindowListener();this._removeMousedownWindowListener();this._removeMousemoveWindowListener();this.inherited(arguments)},destroy:function(){this.inherited(arguments);this._removeKeyListener();
this._removeMouseupWindowListener();this._removeMousedownWindowListener()}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/SpringLoadedModePreview":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/dom-class dojo/dom-attr dojo/on dojo/Evented dijit/Destroyable".split(" "),function(h,e,g,d,c,b,a,f,k,l){return h([k,l],{previewDomNodes:null,parentNode:null,figureModel:null,figureView:null,mode:"",constructor:function(a,b){this.figureModel=
a;this.figureView=b},createDomNodes:function(a,c,f){a=g.create("div",{title:c},a);b.add(a,f);return a},addClickListener:function(a,b,d){f(a,"click",e.hitch(this,function(a){var f=0;this.previewDomNodes.forEach(function(a){a&&"block"==c.get(a,"display")&&f++});var e={fcn:"springLoadedModeAction",args:{type:b,axesIndex:d,configurationData:"",mode:this.mode,retainMode:2<=f}};1>=f&&this.hide();this.wait();dojo.stopEvent(a);this.emit("interaction",e)}))},showAffordances:function(a,b,c){throw Error("Subclasses should implement this method");
},positionAffordance:function(b,f,d,e,g,h,k,l){this.parentNode=e;this.previewDomNodes||(this.previewDomNodes=[]);this.previewDomNodes[h]||(this.previewDomNodes[h]=this.createDomNodes(e,l,k),this.addClickListener(this.previewDomNodes[h],g,h));b?c.set(this.previewDomNodes[h],{position:"absolute",top:d+"px",left:f+"px",width:b.w+"px",height:b.h+"px"}):c.set(this.previewDomNodes[h],{position:"absolute",top:d+"px",left:f+"px"});a.set(this.previewDomNodes[h],"data-tag",k+"."+g+"."+h)},show:function(){var a=
this.figureModel.getModeStateData();this.previewDomNodes.forEach(function(b,f){!a||0<a[f]?c.set(b,"display","block"):c.set(b,"display","none")});this.clearWait()},clearMode:function(a){var b={fcn:"springLoadedModeAction",args:{type:"clearMode",clearedMode:this.mode}};a&&(b.args.editType=a);this.emit("interaction",b)},isShowing:function(){return 0<this.previewDomNodes.length&&this.previewDomNodes.some(function(a){return"none"!==c.get(a,"display")})},hide:function(a){a=this.isShowing();this.previewDomNodes.forEach(function(a){g.destroy(a)});
this.previewDomNodes=[];a&&this.clearMode()},wait:function(){this.isShowing()&&(c.set(this.parentNode,"cursor","wait"),this.previewDomNodes.forEach(function(a){c.set(a,"cursor","wait")}))},clearWait:function(){this.isShowing()&&(c.set(this.parentNode,"cursor",""),this.previewDomNodes.forEach(function(a){c.set(a,"cursor","")}))},_getStringWidthInPixels:function(a,b){var f=document.createElement("canvas").getContext("2d"),d=c.get(b,"fontSize"),e=c.get(b,"fontFamily"),g=c.get(b,"fontWeight");f.font=
g+" "+d+" "+e;return f.measureText(a).width},destroy:function(){this.previewDomNodes.forEach(function(a){g.destroy(a)})}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/ArrowAnnotation":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-style dojo/dom-construct dojo/dom-geometry dojo/on dojo/keys MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/Annotation".split(" "),function(h,e,g,d,c,b,a,f,k){return h([k],{matlabInteractionFunction:"arrow",mode:"placedArrowMode",
draw:function(a,b){var c=this._canvas.getContext("2d");c.clearRect(0,0,this._canvas.width,this._canvas.height);c.lineWidth=1;c.beginPath();var f=[a[0],a[1]],d=[b[0],b[1]],e=[b[0],b[1]],g=[e[0]-f[0],e[1]-f[1]],h=Math.sqrt(Math.pow(g[0],2)+Math.pow(g[1],2));g[0]/=h;g[1]/=h;var h=0==e[1]-f[1]?[0,1]:[1,-(e[0]-f[0])/(e[1]-f[1])],k=Math.sqrt(h[0]*h[0]+h[1]*h[1]);h[0]/=k;h[1]/=k;d[0]-=10*g[0];d[1]-=10*g[1];c.moveTo(f[0],f[1]);c.lineTo(d[0],d[1]);c.moveTo(d[0]+5*h[0],d[1]+5*h[1]);c.lineTo(d[0]+10*g[0],d[1]+
10*g[1]);c.lineTo(d[0]-5*h[0],d[1]-5*h[1]);c.fill();c.rect(f[0]-2,f[1]-2,4,4);c.rect(e[0]-2,e[1]-2,4,4);c.stroke()}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/DoubleArrowAnnotation":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-style dojo/dom-construct dojo/dom-geometry dojo/on dojo/keys MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/Annotation".split(" "),function(h,e,g,d,c,b,a,f,k){return h([k],{matlabInteractionFunction:"doublearrow",
mode:"placedDoubleArrowMode",draw:function(a,b){var c=this._canvas.getContext("2d");c.clearRect(0,0,this._canvas.width,this._canvas.height);c.lineWidth=1;c.beginPath();var f=[a[0],a[1]],d=[b[0],b[1]],e=[b[0],b[1]],g=[a[0],a[1]],h=[e[0]-f[0],e[1]-f[1]],k=Math.sqrt(Math.pow(h[0],2)+Math.pow(h[1],2));h[0]/=k;h[1]/=k;var k=0==e[1]-f[1]?[0,1]:[1,-(e[0]-f[0])/(e[1]-f[1])],v=Math.sqrt(k[0]*k[0]+k[1]*k[1]);k[0]/=v;k[1]/=v;d[0]-=10*h[0];d[1]-=10*h[1];f[0]+=10*h[0];f[1]+=10*h[1];c.moveTo(f[0],f[1]);c.lineTo(d[0],
d[1]);c.moveTo(d[0]+5*k[0],d[1]+5*k[1]);c.lineTo(d[0]+10*h[0],d[1]+10*h[1]);c.lineTo(d[0]-5*k[0],d[1]-5*k[1]);c.fill();c.moveTo(f[0]+5*k[0],f[1]+5*k[1]);c.lineTo(f[0]-10*h[0],f[1]-10*h[1]);c.lineTo(f[0]-5*k[0],f[1]-5*k[1]);c.fill();c.rect(g[0]-2,g[1]-2,4,4);c.rect(e[0]-2,e[1]-2,4,4);c.stroke()}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/TextArrowAnnotation":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-style dojo/dom-construct dojo/dom-geometry dojo/on dojo/touch dojo/keys dijit/focus MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/ArrowAnnotation".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n){return h([n],{matlabInteractionFunction:"textarrow",mode:"placedTextArrowMode",_textField:null,_textFocusListener:null,_mouseDownOnText:!1,_VERTICAL_GAP:3,createDomNodes:function(b,h){var k=this.inherited(arguments);this._textField=c.create("input");d.set(this._textField,"visibility","hidden");c.place(this._textField,k);g.add(this._textField,"textArrowText");this.own(a(this._textField,f.press,function(a){a.stopPropagation()}));this.own(a(this._textField,f.release,function(a){a.stopPropagation()}));
this.own(a(this._textField,"click",function(a){a.stopPropagation()}));this.own(a(this._textField,"keydown",e.hitch(this,"doResize")));this.own(a(this._textField,"contextmenu",function(a){dojo.stopEvent(a)}));this.createFocusTextListener();return k},createFocusTextListener:function(){this._textFocusListener=e.hitch(this,"_documentMouseClickHandler");document.body.addEventListener("click",this._textFocusListener,!0)},_mouseUpListener:function(a){this._mouseDownOnText?this._mouseDownOnText=!1:this.inherited(arguments)},
_mouseMoveListener:function(a){this._mouseDownOnText||this.inherited(arguments)},_mouseDownHandler:function(a){a.target===this._textField?this._mouseDownOnText=!0:this.inherited(arguments)},_keyHandler:function(a){l.curNode===this._textField?k.ENTER===this._getKeyCode(a)&&(this.commit(),a.stopPropagation(),a.preventDefault()):this.inherited(arguments)},_documentMouseClickHandler:function(a){this._textField.focus();this.removeTextFocusListener();a.stopPropagation();this.emit("startEditing",a)},showAffordances:function(a,
b,c){this.inherited(arguments);this._textField.value="";d.set(this._textField,"visibility","hidden");d.set(this._textField,"width","")},draw:function(a,b){this.inherited(arguments);if(!a||!(2<=a.length&&b&&2<=b.length))d.set(this._textField,"visibility","hidden");else{var c=this._imageNodePosition;a[1]>b[1]?(d.set(this._textField,"top",a[1]+this._VERTICAL_GAP+"px"),d.set(this._textField,"bottom","")):(d.set(this._textField,"bottom",c.h-a[1]+this._VERTICAL_GAP+"px"),d.set(this._textField,"top",""));
d.set(this._textField,"right",c.w-a[0]+"px");d.set(this._textField,"visibility","visible")}},commit:function(){if(this._isPositioned()){var a=[this._anchorPoint[0]/this._imageNodePosition.w,this._anchorPoint[1]/this._imageNodePosition.h,this._endPoint[0]/this._imageNodePosition.w,this._endPoint[1]/this._imageNodePosition.h],b=(0>a[1]||1<a[1])&&(0>a[3]||1<a[3]);(0>a[0]||1<a[0])&&(0>a[2]||1<a[2])||b?this._resetAnnotation("delete"):(a={fcn:"springLoadedModeAction",args:{type:this.matlabInteractionFunction,
axesIndex:-1,configurationData:{relativePosition:a,text:this._textField.value},mode:this.mode}},this._textField.blur(),this.emit("interaction",a),document.body.removeEventListener("keydown",this._keyHandlerFcn,!0),this._reset())}else this._rollback()},doResize:function(a){a=1.2*this._getStringWidthInPixels(this._textField.value,this._textField);var c=b.position(this._textField);a>c.w&&c.x-(a-c.w)>this._imageNodePosition.x&&d.set(this._textField,"width",a+"px")},hide:function(a){this.removeTextFocusListener();
this.inherited(arguments)},destroy:function(){this.removeTextFocusListener();this.inherited(arguments)},removeTextFocusListener:function(){document.body.removeEventListener("click",this._textFocusListener,!0)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/ChartHandler":function(){define("dojo/_base/declare dojo/Evented dijit/Destroyable dojo/touch dojo/on dojo/dom-style dojo/_base/lang dojo/_base/event MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/EventUtils".split(" "),function(h,
e,g,d,c,b,a,f,k){return h([e,g,k],{_figureView:null,_figureModel:null,_eventHandler:null,_cursorHotSpot:null,_windowMouseUpListener:null,_windowMouseMoveListener:null,_lastMouseDownLocation:null,_currentAxesIndex:null,_cursorImagePath:null,_overChartOrAxes:!1,_MODELESS_INTERACTION:"modeLessInteractionCallback",_CHART_INTERACTION:"CHART_INTERACTION",constructor:function(a,b,c,f){this._figureView=a;this._figureModel=b;this._eventHandler=c;this._cursorImagePath=f;this._cursorHotSpot=[0,0]},_getMouseEventData:function(a){return this._figureModel.getMouseEventData(a,
this._figureView,this._cursorHotSpot)},_checkIfMouseOverInteractiveChart:function(a){a=this._figureModel.getChartType()[a.MouseOverAxes.Index];return"geobubble"===a||"heatmap"===a||"axes"===a},WindowMouseDownHandler:function(b){if(this._checkIfMouseOverInteractiveChart(b)){this._windowMouseMoveListener||(this._windowMouseMoveListener=c.pausable(window,d.move,a.hitch(this,"WindowMouseMoveHandler")));this._windowMouseMoveListener.resume();this.removeEventListener(window,"mouseup",this._windowMouseUpListener);
this._windowMouseUpListener=a.hitch(this,"WindowMouseUpHandler");this.addEventListener(window,"mouseup",this._windowMouseUpListener);var e=this;e._eventHandler.processEvent(function(a){e._emitChartInteraction("WindowMousePress",a)},b);this._currentAxesIndex=b.MouseOverAxes.Index;f.stop(b)}this._lastMouseDownLocation=this.getEventPosition(b)},WindowMouseMoveHandler:function(a){a=this._getMouseEventData(a);this._overChartOrAxes=a.isMouseOverChart||a.MouseOverAxes.isInside;if(!this.hasMouseClicked(a,
this._lastMouseDownLocation)&&(null!=this._currentAxesIndex||-1<a.MouseOverAxes.Index)){var b=this;b._eventHandler.processEvent(function(a){b._emitChartInteraction("WindowMouseMotion",a)},a)}},WindowMouseLeaveHandler:function(a){if(this._overChartOrAxes){this._overChartOrAxes=!1;a=this._getMouseEventData(a);var b=this;b._eventHandler.processEvent(function(a){b._emitChartInteraction("WindowMouseLeave",a)},a)}},WindowMouseUpHandler:function(a){a=this._getMouseEventData(a);var b=this;b._eventHandler.processEvent(function(a){b._emitChartInteraction("WindowMouseRelease",
a);b._currentAxesIndex=null},a);this._windowMouseMoveListener&&this._windowMouseMoveListener.pause();this._lastMouseDownLocation=null;this.removeEventListener(window,"mouseup",this._windowMouseUpListener);f.stop(a)},WindowMouseWheelHandler:function(a){if(this._checkIfMouseOverInteractiveChart(a)){var b=this;b._eventHandler.processEvent(function(a){b._emitChartInteraction("WindowScrollWheel",a)},a);f.stop(a)}},_isDragEvent:function(a){return!this.hasMouseClicked(a,this._lastMouseDownLocation)&&null!=
this._lastMouseDownLocation},_emitChartInteraction:function(a,b){var c=this.getEventPosition(b),c={x:c.x,y:c.y},c=this.addCursorOffset(c,this._cursorHotSpot),c=this.convertEventToMatlabRelativeCoords(c,this._figureView.getDomNode()),c={type:this._CHART_INTERACTION,interaction:a,x:c.x,y:c.y,isDragEvent:this._isDragEvent(b)};this.isEventInsideAxes(b,this._figureView.getDomNode())?c.axesIndex=b.MouseOverAxes.Index:c.axesIndex=this._currentAxesIndex;c.chartType=this._figureModel._chartType[c.axesIndex];
"WindowScrollWheel"===a&&(c.wheelDelta=b.deltaY/120||b.detail/3);this.emit(this._CHART_INTERACTION,{fcn:this._MODELESS_INTERACTION,args:c})},destroy:function(){this.removeEventListener(window,"mouseup",this._windowMouseUpListener);this._windowMouseMoveListener&&this._windowMouseMoveListener.pause()}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/ModeManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/event dojo/dom-class dojo/dom-construct dojo/dom-style dojo/dom-geometry dojo/on dojo/touch dojo/Evented dijit/Destroyable dojo/has MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/ROI MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/InteractionsContextMenu MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostLegend MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostColorbar MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostGrid MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostXGrid MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostYGrid MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostTitle MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostXLabel MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostYLabel MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/LineAnnotation MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/ArrowAnnotation MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/DoubleArrowAnnotation MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/TextArrowAnnotation MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/EventUtils".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,B,F,G,H,I){return h([l,n,I],{_figureView:null,_figureModel:null,_windowMouseMoveListener:null,_windowMouseUpListener:null,_ROI:null,_codeGen:null,_eventHandler:null,_maintainROI:!1,_lastMouseDownLocation:null,_currentAxesPosition:null,_cursorTimeout:null,_deferredCodeGen:null,_cursorHotSpot:null,_interactionContextMenu:null,_lastMouseMoveEvent:null,_isIEBrowser:!1,_springLoadedAffordanceObjects:null,_springLoadedAffordanceModules:null,_undoRedoManager:null,
_MODE_INTERACTION:"modeInteraction",_cursorImagePath:null,constructor:function(a){this._figureView=a.figureView;this._figureModel=a.figureModel;this._codeGen=a.codeGenerator;a.actionService&&a.contextMenuGenerator&&this._addInteractionsContextMenu(a.actionService,a.contextMenuGenerator);this._cursorHotSpot=[0,0];this._isIEBrowser=this._checkIfIEBrowser();this._springLoadedAffordanceObjects={placedLegendMode:null,placedColorbarMode:null,placedGridMode:null,placedXGridMode:null,placedYGridMode:null,
placedTitleMode:null,placedXLabelMode:null,placedYLabelMode:null,placedLineMode:null,placedArrowMode:null,placedDoubleArrowMode:null,placedTextArrowMode:null};this._springLoadedAffordanceModules={placedLegendMode:r,placedColorbarMode:s,placedGridMode:t,placedXGridMode:u,placedYGridMode:v,placedTitleMode:w,placedXLabelMode:x,placedYLabelMode:A,placedLineMode:B,placedArrowMode:F,placedDoubleArrowMode:G,placedTextArrowMode:H}},setCursorImagePath:function(a){this._cursorImagePath=a},setEventHandler:function(a){this._eventHandler=
a},_addInteractionsContextMenu:function(a,b){this._interactionContextMenu=new q(a,b,this._figureView,this._figureModel);f(this._interactionContextMenu,"ModeContextMenuAction",e.hitch(this,"_WindowMouseRightClick"))},WindowButtonMouseDown:function(b){if(this._springLoadedAffordanceModules.hasOwnProperty(this._figureModel.getMode()))this.notify("ModeWindowButtonMouseDown",b),this.removeEventListener(window,"mouseup",this._windowMouseUpListener),this._windowMouseUpListener=e.hitch(this,function(a){this.notify("ModeWindowButtonMouseUp",
a);this.removeEventListener(window,"mouseup",this._windowMouseUpListener)}),this.addEventListener(window,"mouseup",this._windowMouseUpListener);else{if(""!==this._figureModel.getMode()&&this.isEventInsideAxes(b,this._figureView.getDomNode())||"Exploration.Datacursor"===this._figureModel.getMode()){if(this._isPZRenabled(b)){this._windowMouseMoveListener||(this._windowMouseMoveListener=f.pausable(window,k.move,e.hitch(this,"ModeWindowButtonMouseMove")));this._windowMouseMoveListener.resume();this.removeEventListener(window,
"mouseup",this._windowMouseUpListener);this._windowMouseUpListener=e.hitch(this,"ModeWindowButtonMouseUp");this.addEventListener(window,"mouseup",this._windowMouseUpListener);var c=this;c._eventHandler.processEvent(function(a){c.notify("WindowButtonMouseDown",a)},b);if("Exploration.Zoom"===this._figureModel.getMode()&&"in"===this._figureModel.getZoomDirection()){this._ROI||(this._ROI=new m(this._figureView._wrapperElement));var d=a.position(this._figureView._wrapperElement);this._ROI.setTopLeft(d.y,
d.x);d=this.addCursorOffset(b,this._cursorHotSpot);this._ROI.setAnchorPoint(d.x,d.y);this._currentAxesPosition=b.MouseOverAxes.axesPlotBox}}g.stop(b)}this._lastMouseDownLocation=this.getEventPosition(b)}},WindowButtonMouseMove:function(a){var b=this._figureModel.getMode(),c=this._figureModel.getZoomDirection();this._lastMouseMoveEvent=a;this.removeCursorStyle();this.isEventInsideAxes(a,this._figureView.getDomNode())&&this._isPZRenabled(a)&&this.applyCursorStyle(b,c,a)},_isPZRenabled:function(a){var b=
!0,c=this._figureModel.getIsPZREnabled();this.isEventInsideAxes(a,this._figureView.getDomNode())&&(c&&c.length>=a.MouseOverAxes.Index)&&(b=0!==c[a.MouseOverAxes.Index]);return b},WindowMouseDblClick:function(a){if(""!==this._figureModel.getMode()&&this.isEventInsideAxes(a,this._figureView.getDomNode())){var b=this;b._eventHandler.processEvent(function(a){b.notify("WindowMouseDblClick",a);b._insertFigureInteractions({type:"WindowMouseDblClick",interactionType:b._MODE_INTERACTION})},a)}},_WindowMouseRightClick:function(a){this._eventHandler.clearEventQueue();
""!==this._figureModel.getMode()&&this.isEventInsideAxes(a,this._figureView.getDomNode())&&(this.notify("WindowMouseRightClick",a),this._insertFigureInteractions({type:"WindowMouseRightClick",interactionType:this._MODE_INTERACTION,tag:a.Tag}),"ResetView"!==a.Tag&&"Reset"!==a.Tag&&this._codeGen&&(this._deferredCodeGen=this._codeGen.attach(this._figureView.getGraphicsViewContainerNode())));g.stop(a)},updateContextMenuEventData:function(a){this._interactionContextMenu.updateContextMenuEventData(a)},
WindowButtonMouseWheel:function(a){if("Exploration.Zoom"===this._figureModel.getMode()&&!a.isMouseOverChart){var b=this;b._eventHandler.processEvent(function(a){b.notify("WindowButtonMouseWheel",a);b._insertFigureInteractions({type:"WindowButtonMouseWheel",interactionType:b._MODE_INTERACTION})},a);g.stop(a)}},ModeWindowButtonMouseMove:function(a){a=this._getMouseEventData(a);if("Exploration.Zoom"===this._figureModel.getMode()&&"in"===this._figureModel.getZoomDirection()){var b=null;this.isEventInsideAxes(a,
this._figureView.getDomNode())&&this._isEventOverTheSameAxes(a)&&this._isCurrentAxes2D(a)?(b=this.addCursorOffset(a,this._cursorHotSpot),b=this._clipXYbyAxesPlotBox(a.MouseOverAxes.axesPlotBox,b.x,b.y),this._maintainROI=!0):this._maintainROI&&(b=this.getEventPosition(a),b=this._clipXYbyAxesPlotBox(this._currentAxesPosition,b.x,b.y));if(b){this._ROI.drawROI(b.x,b.y);return}}if(!this.hasMouseClicked(a,this._lastMouseDownLocation)){var c=this;c._eventHandler.processEvent(function(a){c.notify("ModeWindowButtonMouseMove",
a)},a)}g.stop(a)},ModeWindowButtonMouseUp:function(a){var b="Exploration.Datacursor"==this._figureModel.getMode();this._windowMouseMoveListener.pause();this.removeEventListener(window,"mouseup",this._windowMouseUpListener);a=this._getMouseEventData(a);this._ROI&&(this._ROI.hide(),this._ROI.resetAnchorPoint());this._maintainROI=!1;var c=this;c._eventHandler.processEvent(function(a){c.notify("ModeWindowButtonMouseUp",a);if(!b){var f=c.getEventPosition(a);c._insertFigureInteractions({type:"ModeWindowButtonMouseUp",
x:f.x,y:f.y,interactionType:c._MODE_INTERACTION});f="Exploration.Pan"===c._figureModel.getMode()||"Exploration.Rotate3d"===c._figureModel.getMode();c._codeGen&&(f&&!c.hasMouseClicked(a,c._lastMouseDownLocation)?c._deferredCodeGen=c._codeGen.attach(c._figureView.getGraphicsViewContainerNode()):f||(c._deferredCodeGen=c._codeGen.attach(c._figureView.getGraphicsViewContainerNode())))}},a);this._currentAxesPosition=null;g.stop(a)},removeCursorStyle:function(){var a=this._figureView.getDomNode();this._checkIfIEBrowser()?
b.set(a,"cursor",""):(d.remove(a,"panCursor"),d.remove(a,"rotateCursor"),d.remove(a,"zoomCursor"),d.remove(a,"zoom3DCursor"),d.remove(a,"zoomOutCursor"),d.remove(a,"datatipCursor"))},applyCursorStyle:function(a,b,c){if(!c||!c.isMouseOverChart){var f=this._figureView.getDomNode();this._setCursorStyle(a,b,c,f);this._cursorHotSpot=this._isIEBrowser?[0,0]:[7,7]}},_setCursorStyle:function(a,b,c,f){switch(a){case "Exploration.Pan":this._isIEBrowser?this._setCursorImageStyleForIE(f,"pan_cursor.cur"):d.add(f,
"panCursor");break;case "Exploration.Rotate3d":this._isIEBrowser?this._setCursorImageStyleForIE(f,"rotate_cursor.cur"):d.add(f,"rotateCursor");break;case "Exploration.Zoom":"in"===b?c&&this._isCurrentAxes2D(c)?this._isIEBrowser?this._setCursorImageStyleForIE(f,"zoomin_cursor.cur"):d.add(f,"zoomCursor"):this._isIEBrowser?this._setCursorImageStyleForIE(f,"zoomin_cursor3D.cur"):d.add(f,"zoom3DCursor"):"out"===b&&(this._isIEBrowser?this._setCursorImageStyleForIE(f,"zoomout_cursor.cur"):d.add(f,"zoomOutCursor"));
break;case "Exploration.Datacursor":this._isIEBrowser?this._setCursorImageStyleForIE(f,"datatip_cursor.cur"):d.add(f,"datatipCursor")}},_setCursorImageStyleForIE:function(a,c){b.set(a,"cursor","url("+this._cursorImagePath+"figurefloatingpalette/"+c+"), default")},_isEventOverTheSameAxes:function(a){return this._currentAxesPosition&&this._currentAxesPosition.xLow===a.MouseOverAxes.axesPlotBox.xLow&&this._currentAxesPosition.xHigh===a.MouseOverAxes.axesPlotBox.xHigh&&this._currentAxesPosition.yLow===
a.MouseOverAxes.axesPlotBox.yLow&&this._currentAxesPosition.yHigh===a.MouseOverAxes.axesPlotBox.yHigh},_isCurrentAxes2D:function(a){return 1===this._figureModel.getIs2D()[a.MouseOverAxes.Index]},_setupInteractionEvents:function(a){this.own(a.on("interaction",e.hitch(this,function(a){this.emit("interaction",a)})))},isInSpringLoadedMode:function(){return this._springLoadedAffordanceObjects.hasOwnProperty(this._figureModel.getMode())},setState:function(a){this._figureModel=a;this.removeCursorStyle();
this.applyCursorStyle(this._figureModel.getMode(),this._figureModel.getZoomDirection(),this._lastMouseMoveEvent);this._cursorTimeout&&clearTimeout(this._cursorTimeout);var b=this._figureView.getDomNode();b&&d.remove(b,"waitCursor");b=!1;null!==a.getUndoRedoData()&&a.getUndoRedoData().isUndoRedo&&(b=!0);for(var c in this._springLoadedAffordanceObjects)this._figureModel.getMode()!==c&&this._springLoadedAffordanceObjects[c]?(this._springLoadedAffordanceObjects[c].clearWait(),this._springLoadedAffordanceObjects[c].hide(b)):
this._figureModel.getMode()===c&&(this._springLoadedAffordanceObjects[c]?this._springLoadedAffordanceObjects[c].showAffordances(this._figureModel.getAxesPositions(),this._figureView.getWrapperNode(),this._figureView.getDomNode()):(this._springLoadedAffordanceObjects[c]=new this._springLoadedAffordanceModules[c](this._figureModel,this._figureView),this.own(f(this._springLoadedAffordanceObjects[c],"WindowButtonMouseDown",e.hitch(this,function(a){this.WindowButtonMouseDown(a)}))),this.own(f(this._springLoadedAffordanceObjects[c],
"startEditing",e.hitch(this,function(a){this.emit("startEditing",a)}))),this._springLoadedAffordanceObjects[c].showAffordances(this._figureModel.getAxesPositions(),this._figureView.getWrapperNode(),this._figureView.getDomNode()),this._setupInteractionEvents(this._springLoadedAffordanceObjects[c])));if(this._codeGen&&a._interactionData&&a._interactionData.iClearCode)this._codeGen.detach();else if(this._codeGen&&a._interactionData&&a._interactionData.iCode){a=a._interactionData;a.iShowCode&&(this._deferredCodeGen=
this._codeGen.attach(this._figureView.getGraphicsViewContainerNode()));var g=this._codeGen;g.setGeneratedCode(a.iCode);this._deferredCodeGen&&!this._deferredCodeGen.isResolved()?this._deferredCodeGen.then(function(a){g.updateCodeArea()}):g.updateCodeArea()}},setUndoRedoManager:function(a){this._undoRedoManager=a},notify:function(a,b){var c=this.getEventPosition(b),c={x:c.x,y:c.y},c=this.addCursorOffset(c,this._cursorHotSpot),c=this.convertEventToMatlabRelativeCoords(c,this._figureView.getDomNode()),
c={type:a,x:c.x,y:c.y};this.isEventInsideAxes(b,this._figureView.getDomNode())&&(c.axesIndex=b.MouseOverAxes.Index);"WindowButtonMouseWheel"===a&&(c.wheelDelta=b.deltaY/120||b.detail/3);"WindowMouseRightClick"===a&&(c.Tag=b.Tag);this.emit("interaction",{fcn:"modeInteractionCallback",args:c})},destroy:function(){this._ROI&&this._ROI.destroy();this._codeGen&&this._codeGen.destroy();this._windowMouseMoveListener&&this._windowMouseMoveListener.pause();for(var a in this._springLoadedAffordanceObjects)this._springLoadedAffordanceObjects[a]&&
this._springLoadedAffordanceObjects[a].destroy();this.removeEventListener(window,"mouseup",this._windowMouseUpListener)},_clipXYbyAxesPlotBox:function(a,b,c){var f=a.yHigh,d=a.yLow,e=a.xHigh;a=a.xLow;var g={};g.y=c>f?f:c<d?d:c;g.x=b<a?a:b>e?e:b;return g},switchLayouts:function(){this._springLoadedAffordanceObjects[this._figureModel.getMode()]&&this._springLoadedAffordanceObjects[this._figureModel.getMode()].hide()},setModeFromClient:function(a){this._cursorTimeout&&clearTimeout(this._cursorTimeout);
a&&a!==this._figureModel.getMode()&&(this._cursorTimeout=setTimeout(e.hitch(this,function(){d.add(this._figureView.getDomNode(),"waitCursor")}),300));this._figureModel.setMode(a);this._figureModel.setIsPZREnabled("Exploration.Pan"===a||"Exploration.Zoom"===a||"Exploration.Rotate3d"===a)},isSpringLoadedMode:function(a){return this._springLoadedAffordanceModules.hasOwnProperty(a)},_getMouseEventData:function(a){return this._figureModel.getMouseEventData(a,this._figureView,this._cursorHotSpot)},_checkIfIEBrowser:function(){return p("trident")||
p("ie")||p("edge")},_insertFigureInteractions:function(a){a.codeGenState={attachCodeGenOnUndo:!1,attachCodeGenOnRedo:!0};this._codeGen&&this._codeGen.isCodeGenAttached()&&(a.codeGenState.attachCodeGenOnUndo=!0);this._undoRedoManager.insertInteractionsForUndoRedo(this._figureModel,a)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/ROI":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/dom-style","dojo/dom-construct"],function(h,e,g,d){return h(null,{_domNode:null,_anchorPoint:null,
_parentNode:null,_constraintLine:null,_top:0,_left:0,useConstraint:!0,color:"#0099ff",_CONSTRAINT_VIEW_THRESHOLD:15,_CENTER_OF_ROI:6,constructor:function(c){this._domNode=d.create("div");e.add(this._domNode,"figuremoderoi");e.add(this._domNode,"figureWidget");this._setParentNode(c);this._createConstraintLine();this.setColor(this.color)},_createConstraintLine:function(){this._constraintLine=d.create("div");e.add(this._constraintLine,"constraintLine constraintLineHorizontal constraintLineVertical");
d.place(this._constraintLine,this._domNode)},setAnchorPoint:function(c,b){this._anchorPoint=[c,b]},resetAnchorPoint:function(){this._anchorPoint=null},hide:function(){e.remove(this._domNode,"roiShow");e.add(this._domNode,"roiHidden")},setUseConstraint:function(c){this.useConstraint=c},drawROI:function(c,b){if(this._anchorPoint){var a=c-this._anchorPoint[0],f=this._anchorPoint[0]-this._left,d=b-this._anchorPoint[1],e=this._anchorPoint[1]-this._top,h=Math.abs(d),p=Math.abs(a),m=this.useConstraint&&
this._isRectangleShortAndFat(h,p),q=this.useConstraint&&this._isRectangleThinAndTall(h,p);0>d&&!m&&(e+=d);0>a&&!q&&(f+=a);a=g.get(this._domNode,"border-width");g.set(this._domNode,{height:h+"px",width:p+"px",left:f-a+"px",top:e-a+"px"});this.useConstraint&&(this._clearConstraintClasses(),this._drawConstraintROI(h,p));this._show()}},_isRectangleShortAndFat:function(c,b){return c<this._CONSTRAINT_VIEW_THRESHOLD&&b>this._CONSTRAINT_VIEW_THRESHOLD},_isRectangleThinAndTall:function(c,b){return b<this._CONSTRAINT_VIEW_THRESHOLD&&
c>this._CONSTRAINT_VIEW_THRESHOLD},_drawConstraintROI:function(c,b){if(this._isRectangleShortAndFat(c,b)){var a=g.get(this._domNode,"top");g.set(this._domNode,{height:this._CONSTRAINT_VIEW_THRESHOLD+"px",top:a-this._CENTER_OF_ROI+"px"});e.add(this._domNode,"roiHorizontal")}else this._isRectangleThinAndTall(c,b)&&(a=g.get(this._domNode,"left"),g.set(this._domNode,{width:this._CONSTRAINT_VIEW_THRESHOLD+"px",left:a-this._CENTER_OF_ROI+"px"}),e.add(this._domNode,"roiVertical"))},setColor:function(c){g.set(this._domNode,
{borderColor:c})},setTopLeft:function(c,b){this._top=c;this._left=b},_setParentNode:function(c){d.place(this._domNode,c);this._parentNode=c},_clearConstraintClasses:function(){e.remove(this._domNode,"roiHorizontal");e.remove(this._domNode,"roiVertical")},_show:function(){e.remove(this._domNode,"roiHidden");e.add(this._domNode,"roiShow")},destroy:function(){this._domNode&&d.destroy(this._domNode)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/InteractionsContextMenu":function(){define("dojo/_base/declare dojo/dom-style dojo/Evented dojo/_base/lang mw-actiondataservice/ActionDataService dojo/i18n!l10n/nls/actions dojo/aspect".split(" "),
function(h,e,g,d,c,b,a){return h([g],{_actionService:null,_modeActions:null,_contextMenuEvent:{},_contextMenuGenerator:null,_figureView:null,_figureModel:null,_ZOOM_IN_INDEX:0,_ZOOM_OUT_INDEX:1,_RESET_VIEW_INDEX:2,_RESET_INDEX:3,_ROTATEXY_INDEX:4,_ROTATEXZ_INDEX:5,_ROTATEYZ_INDEX:6,constructor:function(a,b,c,d){this._actionService=a;this._contextMenuGenerator=b;this._figureView=c;this._figureModel=d;this._setModeActions();this._setAspectHandles()},_setAspectHandles:function(){this._aspectHandles=
[];this._aspectHandles.push(a.before(this._contextMenuGenerator,"willOpen",d.hitch(this,"_removeModeMenuActions"),!0));this._aspectHandles.push(a.after(this._contextMenuGenerator,"willOpen",d.hitch(this,"_updateContextMenu"),!0));this._aspectHandles.push(a.after(this._contextMenuGenerator,"onClose",d.hitch(this,"_enableActions"),!0))},destroy:function(){this._removeModeActions(this._modeActions);this._aspectHandles.forEach(function(a){a.remove()});this._aspectHandles=[]},updateContextMenuEventData:function(a){this._contextMenuEvent=
a},_setModeActions:function(){this._modeActions=[];this._modeActions[this._ZOOM_IN_INDEX]={id:"figure_zoom_in",enabled:!0,contextMenuGroup:"ModeInteraction",text:b.zoomInLabel,callback:d.hitch(this,this._modeEventData,"ZoomInOut")};this._modeActions[this._ZOOM_OUT_INDEX]={id:"figure_zoom_out",enabled:!0,contextMenuGroup:"ModeInteraction",text:b.zoomOutLabel,callback:d.hitch(this,this._modeEventData,"ZoomInOut")};this._modeActions[this._RESET_VIEW_INDEX]={id:"figure_reset_mode",enabled:!0,contextMenuGroup:"ModeInteraction",
text:b.resetFigure,callback:d.hitch(this,this._modeEventData,"ResetView")};this._modeActions[this._ROTATEXY_INDEX]={id:"figure_rotate_xy",enabled:!0,contextMenuGroup:"ModeInteraction",text:b.XYRotate,callback:d.hitch(this,this._modeEventData,"SnapToXY")};this._modeActions[this._ROTATEXZ_INDEX]={id:"figure_rotate_xz",enabled:!0,contextMenuGroup:"ModeInteraction",text:b.XZRotate,callback:d.hitch(this,this._modeEventData,"SnapToXZ")};this._modeActions[this._ROTATEYZ_INDEX]={id:"figure_rotate_yz",enabled:!0,
contextMenuGroup:"ModeInteraction",text:b.YZRotate,callback:d.hitch(this,this._modeEventData,"SnapToYZ")};this._modeActions[this._RESET_INDEX]={id:"figure_reset_rotatemode",enabled:!0,contextMenuGroup:"ModeInteraction",text:b.resetFigure,callback:d.hitch(this,this._modeEventData,"Reset")}},_removeModeMenuActions:function(a,b){this._removeModeActions(this._modeActions)},_updateContextMenu:function(a,b){if(b===this._figureView._imgElement){var c=this._actionService,d=e.get(b,"cursor");if(0<=d.indexOf("pan_cursor"))this._setPanModeAction(),
c.disableAction("rtc_clear_all_output");else if(0<=d.indexOf("zoomout_cursor"))this._setZoomOutAction(),c.disableAction("rtc_clear_all_output");else if(0<=d.indexOf("rotate_cursor"))this._setRotateAction(),c.disableAction("rtc_clear_all_output");else if(0<=d.indexOf("zoomin_cursor")||0<=d.indexOf("zoomin_cursor3D"))this._setZoomInAction(),c.disableAction("rtc_clear_all_output")}},_setZoomInAction:function(){this._addModeActions([this._modeActions[this._ZOOM_OUT_INDEX],this._modeActions[this._RESET_VIEW_INDEX]]);
this._removeModeActions([this._modeActions[this._ZOOM_IN_INDEX],this._modeActions[this._RESET_INDEX],this._modeActions[this._ROTATEXY_INDEX],this._modeActions[this._ROTATEXZ_INDEX],this._modeActions[this._ROTATEYZ_INDEX]])},_setPanModeAction:function(){this._addModeActions([this._modeActions[this._RESET_VIEW_INDEX]]);this._removeModeActions([this._modeActions[this._ZOOM_OUT_INDEX],this._modeActions[this._ZOOM_IN_INDEX],this._modeActions[this._RESET_INDEX],this._modeActions[this._ROTATEXY_INDEX],this._modeActions[this._ROTATEXZ_INDEX],
this._modeActions[this._ROTATEYZ_INDEX]])},_setZoomOutAction:function(){this._addModeActions([this._modeActions[this._ZOOM_IN_INDEX],this._modeActions[this._RESET_VIEW_INDEX]]);this._removeModeActions([this._modeActions[this._ZOOM_OUT_INDEX],this._modeActions[this._RESET_INDEX],this._modeActions[this._ROTATEXY_INDEX],this._modeActions[this._ROTATEXZ_INDEX],this._modeActions[this._ROTATEYZ_INDEX]])},_setRotateAction:function(){this._addModeActions([this._modeActions[this._RESET_INDEX],this._modeActions[this._ROTATEXY_INDEX],
this._modeActions[this._ROTATEXZ_INDEX],this._modeActions[this._ROTATEYZ_INDEX]]);this._removeModeActions([this._modeActions[this._ZOOM_IN_INDEX],this._modeActions[this._ZOOM_OUT_INDEX],this._modeActions[this._RESET_VIEW_INDEX]])},_addModeActions:function(a){var b=this._actionService;a.forEach(function(a){b.getAction(a.id)||b.addAction(a)})},_removeModeActions:function(a){var b=this._actionService;a.forEach(function(a){b.getAction(a.id)&&b.removeAction(a.id)})},_enableActions:function(){this._actionService.enableAction("rtc_clear_all_output")},
_modeEventData:function(a){var b=this._contextMenuEvent;b.Tag=a;this.emit("ModeContextMenuAction",b)}})})},"mw-actiondataservice/ActionDataService":function(){define(["dojo/_base/declare","mw-peermodel/PeerModelManager","mw-peermodel/_PeerModelListenerMixin","mw-peermodel/_PropertyIndexerMixin","mw-utils/Utils"],function(h,e,g,d,c){return h([g,d],{constructor:function(b){b=b||{};this._mode=b.mode||"StandAlone";this._nameSpace=b.nameSpace||"/actions/"+c.generateUuid();this._setupPeerModel();this._callbacks=
{};this._actionChangeCallbacks={};this._propertyToIndex="id"},_setupPeerModel:function(){switch(this._mode){case "StandAlone":this._peerModelManager=e.getClientInstance(this._nameSpace);this.addManagerListeners(this._peerModelManager);this._peerModelManager.setRoot("Root");break;case "ActAsServer":this._peerModelManager=e.getServerInstance(this._nameSpace);this.addManagerListeners(this._peerModelManager);this.start(this._peerModelManager);this._peerModelManager.setRoot("Root");break;case "ActAsClient":this._peerModelManager=
e.getClientInstance(this._nameSpace);this.addManagerListeners(this._peerModelManager);this.start(this._peerModelManager);break;default:throw Error("The mode provided is not valid! Please use one of the following: StandAlone, ActAsServer or ActAsClient");}},onPropertySet:function(b){this.onActionChange({id:b.target.getProperty("id"),key:b.data.key,oldValue:b.data.oldValue,newValue:b.data.newValue,originator:b.originator})},onChildAdd:function(b){b.data.child.getProperty("id")||b.data.child.setProperty("id",
b.data.child.getId());this.onActionAdd({id:b.data.child.getProperty("id")})},loadActions:function(b){Array.isArray(b)&&b.forEach(function(a){this.addAction(a)},this)},addAction:function(b){if("ActAsClient"===this._mode)throw Error("Actions cannot be added while in ActAsClient Mode!");var a;b=b||{};if(b.id&&this._getPeerNodeIdForIndexedProperty(b.id))throw Error("Action id must be unique!");a=this._peerModelManager.getRoot().addChild("Action",b);b.id||a.setProperty("id",a.getId());b.callback&&this.addActionCallback(a.getProperty("id"),
b.callback);return a.getId()},getAction:function(b){return(b=this._actionById(b))?b.getProperties():null},getAllActions:function(){return this._peerModelManager.getRoot().getChildren().map(function(b){return b.getProperties()})},removeAction:function(b){if("ActAsClient"===this._mode)throw Error("Actions cannot be removed while in ActAsClient Mode!");var a=this._getPeerNodeIdForIndexedProperty(b);if(a&&this._peerModelManager.hasById(a))this._peerModelManager.getById(a).destroy(),delete this._callbacks[b];
else throw Error("This is not a valid action id!");},enableAction:function(b){this.updateAction(b,{enabled:!0})},disableAction:function(b){this.updateAction(b,{enabled:!1})},updateAction:function(b,a,c){var d=this._actionById(b);d&&(a.callback&&this.addActionCallback(b,a.callback),d.setProperties(a,c))},actionHasProperty:function(b,a){return this._actionById(b).hasProperty(a)},executeAction:function(b,a){var c;a=a||{};c=this._actionById(b);!0===c.getProperty("enabled")&&c.dispatchEvent("peerEvent",
c,a)},addActionCallback:function(b,a,c){var d=this._actionById(b),e;this.removeActionCallback(b);e=function(b){delete b.data.type;a.call(c||d.getProperties(),b.data)};this._callbacks[b]={callback:e,scope:c};d.addEventListener("peerEvent",e,c)},removeActionCallback:function(b){var a=this._actionById(b),c;if(c=this._callbacks[b])a.removeEventListener("peerEvent",c.callback,c.scope),delete this._callbacks[b]},addActionChangeCallback:function(b,a,c){var d=this._actionById(b),e;this.removeActionChangeCallback(b);
e=function(b){a.call(c,{property:b.data.key,oldValue:b.data.oldValue,newValue:b.data.newValue},b.originator)};this._actionChangeCallbacks[b]={callback:e,scope:c};d.addEventListener("propertySet",e,c)},removeActionChangeCallback:function(b){var a=this._actionById(b);this._actionChangeCallbacks[b]&&(a.removeEventListener("propertySet",this._actionChangeCallbacks[b].callback,this._actionChangeCallbacks[b].scope),delete this._actionChangeCallbacks[b])},onActionChange:function(b){},onActionAdd:function(b){},
_actionById:function(b){var a;(b=this._getPeerNodeIdForIndexedProperty(b))&&this._peerModelManager.hasById(b)&&(a=this._peerModelManager.getById(b));return a},destroy:function(){e.cleanup(this._nameSpace)}})})},"mw-peermodel/_PeerModelListenerMixin":function(){define(["dojo/_base/declare"],function(h){return h([],{start:function(e){e=e||this.manager;e.setSyncEnabled(!0)},stop:function(e){e=e||this.manager;e.setSyncEnabled(!1)},addManagerListeners:function(e){e=e||this.manager;e.addEventListener("rootSet",
this.rootSetObserver,this);e.addEventListener("rootUnset",this.rootUnsetObserver,this);e.addEventListener("childMoved",this.childMovedObserver,this)},removeManagerListeners:function(e){e=e||this.manager;e.removeEventListener("rootSet",this.rootSetObserver,this);e.removeEventListener("rootUnset",this.rootUnsetObserver,this);e.removeEventListener("childMoved",this.childMovedObserver,this)},addNodeListeners:function(e){e.addEventListener("childAdded",this.childAddedObserver,this);e.addEventListener("childDestroyed",
this.childDestroyedObserver,this);e.addEventListener("propertySet",this.propertySetObserver,this);e.addEventListener("peerEvent",this.peerEventObserver,this)},removeNodeListeners:function(e){e.removeEventListener("childAdded",this.childAddedObserver,this);e.removeEventListener("childDestroyed",this.childDestroyedObserver,this);e.removeEventListener("propertySet",this.propertySetObserver,this);e.removeEventListener("peerEvent",this.peerEventObserver,this)},rootSetObserver:function(e){this.addNodeListeners(e.target)},
rootUnsetObserver:function(e){this.removeNodeListeners(e.target)},childMovedObserver:function(e){this.onChildMove(e)},childAddedObserver:function(e){this.addNodeListeners(e.data.child);this.onChildAdd(e)},childDestroyedObserver:function(e){this.removeNodeListeners(e.data.child);this.onChildDestroy(e)},propertySetObserver:function(e){this.onPropertySet(e)},peerEventObserver:function(e){this.onPeerEvent(e)},onPeerEvent:function(e){},onChildAdd:function(e){},onChildDestroy:function(e){},onPropertySet:function(e){},
onChildMove:function(e){}})})},"mw-peermodel/_PropertyIndexerMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect"],function(h,e,g){return h([],{constructor:function(){this._propertyIndexMap={};g.before(this,"onChildAdd",e.hitch(this,function(d){var c=d.data.child.getProperty(this._propertyToIndex);c&&(this._propertyIndexMap[c]=d.data.child.getId())}));g.before(this,"onPropertySet",e.hitch(this,function(d){d.data.key===this._propertyToIndex&&d.data.newValue&&(this._propertyIndexMap[d.data.newValue]=
d.target.getId())}));g.before(this,"onChildDestroy",e.hitch(this,function(d){delete this._propertyIndexMap[d.data.child.getProperty(this._propertyToIndex)]}))},_getPeerNodeIdForIndexedProperty:function(d){return this._propertyIndexMap[d]}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostLegend":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/dom-class dojo/on MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/AxesDecorationModePreview dojo/i18n!l10n/nls/figureToolStrip".split(" "),
function(h,e,g,d,c,b,a,f,k){return h([f],{mode:"placedLegendMode",addLegendText:k.addLegendText,legendTooltipText:k.addLegendTooltipText,showAffordances:function(a,b,c){var f=d.position(c),e=d.position(b);a.forEach(function(a,c){this.figureModel.isAxesObscuredByEarlierChild(c)||this.positionAffordance(null,(a[0]+a[2])*f.w+f.x-e.x-0.02*a[2]*f.w,(1-a[1]-a[3])*f.h+f.y-e.y+0.05*a[3]*f.h,b,"legend",c,"placeableGhostLegend",this.legendTooltipText)},this);this.show()},createDomNodes:function(a,c,f){a=g.create("div",
{title:c,innerHTML:"\x3cdiv class\x3d'legendIcon'\x3e\x3c/div\x3e\x3cspan\x3e"+this.addLegendText+"\x3c/span\x3e"},a);b.add(a,f);return a}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/AxesDecorationModePreview":function(){define("dojo/_base/declare dojo/_base/lang dojo/keys dojo/on dojo/touch MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/SpringLoadedModePreview".split(" "),function(h,e,g,d,c,b){return h([b],{_modeClearListener:null,constructor:function(a){this._modeClearListener=
d.pausable(document.body,"click",e.hitch(this,"clearMode"));this._modeClearListener.pause();this.own(this._modeClearListener)},addClickListener:function(a,b,e){this.inherited(arguments);d(a,c.press,function(a){a.stopPropagation()})},_keyHandler:function(a){a.keyCode===g.ESCAPE&&(this.clearMode(),a.stopPropagation())},_addKeyListener:function(){this._keyHandlerFcn||(this._keyHandlerFcn=e.hitch(this,"_keyHandler"));this._removeKeyListener();document.body.addEventListener("keydown",this._keyHandlerFcn,
!0)},_removeKeyListener:function(){document.body.removeEventListener("keydown",this._keyHandlerFcn,!0)},clearMode:function(){this.inherited(arguments);this._modeClearListener.pause();this._removeKeyListener()},show:function(){this.inherited(arguments);this._modeClearListener.resume();this._addKeyListener()},hide:function(a){this.inherited(arguments);this._modeClearListener.pause();this._removeKeyListener()},destroy:function(){this.inherited(arguments);this._keyHandlerFcn&&document.body.removeEventListener("keydown",
this._keyHandlerFcn,!0)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostColorbar":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/dom-class dojo/on dojo/query MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/AxesDecorationModePreview dojo/i18n!l10n/nls/figureToolStrip".split(" "),function(h,e,g,d,c,b,a,f,k,l){return h([k],{mode:"placedColorbarMode",promptText:l.addColorBarText,colorbarTooltipText:l.addColorBarTooltipText,
showAffordances:function(a,b,e){var g=d.position(e),h=d.position(b);a.forEach(function(a,d){if(!this.figureModel.isAxesObscuredByEarlierChild(d)){var e=0.06*a[2]*g.w,k=0.9*a[3]*g.h,e=20>e?20:e;this.positionAffordance({w:k,h:e},(a[0]+a[2])*g.w+g.x-h.x+1.2*e,(1-a[1]-a[3])*g.h+g.y-h.y+0.05*a[3]*g.h,b,"colorbar",d,"placeableGhostColorbar",this.colorbarTooltipText);c.set(this.previewDomNodes[d],"font-size",0.5*e+"px");var l=this._getStringWidthInPixels(this.promptText,this.previewDomNodes[d])<k;f("p",
this.previewDomNodes[d]).forEach(function(a){l?c.set(a,"visibility","visible"):c.set(a,"visibility","hidden")})}},this);this.show()},createDomNodes:function(a,c,f){a=g.create("div",{title:c,innerHTML:"\x3cp\x3e"+this.promptText+"\x3c/p\x3e"},a);b.add(a,f);return a}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostGrid":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/dom-class dojo/on MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/AxesDecorationModePreview dojo/i18n!l10n/nls/figureToolStrip".split(" "),
function(h,e,g,d,c,b,a,f,k){return h([f],{matlabInteractionFunction:"grid",mode:"placedGridMode",text:k.addGridText,gridIconClass:"gridIcon",tooltipText:k.addGridTooltipText,createDomNodes:function(a,c,f){a=g.create("div",{title:c,innerHTML:"\x3cdiv class\x3d'"+this.gridIconClass+"'\x3e\x3c/div\x3e\x3cspan\x3e"+this.text+"\x3c/span\x3e"},a);b.add(a,f);return a},showAffordances:function(a,b,c){var f=d.position(c),e=d.position(b);a.forEach(function(a,c){this.figureModel.isAxesObscuredByEarlierChild(c)||
this.positionAffordance(null,(a[0]+a[2]/2)*f.w+f.x-e.x,(1-a[1]-a[3]/2)*f.h+f.y-e.y,b,this.matlabInteractionFunction,c,"placeableGhostGrid",this.tooltipText)},this);this.show()}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostXGrid":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostGrid dojo/i18n!l10n/nls/figureToolStrip".split(" "),function(h,
e,g,d,c,b,a,f){return h([a],{matlabInteractionFunction:"xgrid",mode:"placedXGridMode",text:f.addXGridText,gridIconClass:"xgridIcon",tooltipText:f.addXGridTextTooltipText})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostYGrid":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostGrid dojo/i18n!l10n/nls/figureToolStrip".split(" "),function(h,e,g,d,
c,b,a,f){return h([a],{matlabInteractionFunction:"ygrid",mode:"placedYGridMode",text:f.addYGridText,gridIconClass:"ygridIcon",tooltipText:f.addYGridTooltipText})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostTitle":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-geometry dojo/dom-style dojo/dom-construct MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostLabel dojo/i18n!l10n/nls/figureToolStrip".split(" "),function(h,e,g,d,c,b,a,f){return h([a],
{promptText:f.addTitleText,mode:"placedTitleMode",positionMatrix:[[0,1,0.5],[0,1,1]],actionId:"title",getLabels:function(){return this.figureModel.getTitles()},positionAffordance:function(a,b,f,e,h,q,r,s){this.previewDomNodes||(this.previewDomNodes=[]);this.previewDomNodes[q]||(this.previewDomNodes[q]=this.createDomNodes(e,s,r,h,q),this.addClickListener(this.previewDomNodes[q],h,q));e=d.position(e);a=100*c.get(this.previewDomNodes[q],"width")/e.w;e=100*c.get(this.previewDomNodes[q],"height")/e.h;
100<f+e&&(f=100-e);c.set(this.previewDomNodes[q],{position:"absolute",bottom:f+"%",left:b-a/2+"%"});this._textInputElements[q].originalPosition=null;g.set(this.previewDomNodes[q],"data-tag",h+"."+q)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostLabel":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/dom-class dojo/dom dojo/on dijit/focus dijit/registry MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/SpringLoadedModePreview MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/TextInputElement".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p){return h([n],{_textInputElements:null,promptText:"",textInputElementCSSClass:"ghostLabel",_textCommitListener:null,_matlabInteractionFunction:"",createDomNodes:function(a,b,c,d,g){this._matlabInteractionFunction=d;null===this._textInputElements&&(this._textInputElements=[]);this._textInputElements[g]=new p({widgetClass:this.textInputElementCSSClass,placeHolderText:this.promptText});this._textInputElements[g].placeAt(a);this.own(f(this._textInputElements[g],"startEditing",
e.hitch(this,function(a){this.emit("startEditing",a)})));return this._textInputElements[g].domNode},_emitTextEditEvent:function(a,b,c,f){this.emit("interaction",{fcn:"springLoadedModeAction",args:{type:a,axesIndex:b,configurationData:c,mode:this.mode,retainMode:f}})},addClickListener:function(a,b,c){null===this._textCommitListener&&(this._textCommitListener=[]);this._textCommitListener[c]=f(l.getEnclosingWidget(a),"textcommit",e.hitch(this,function(a){var f=!1;this._textInputElements.forEach(function(b){b===
a.focusedWidget&&(f=!0,b.stopEditing())});a.eventKeyCode&&(this._focusNextInputField(c,a.eventKeyCode),1<this._textInputElements.length&&(this._textInputElements[c].stopEditing(),f=!0));2<=this._textInputElements.length&&""===a.textValue&&this._textInputElements[c].setPromptingState(!0);this._emitTextEditEvent(b,c,a.textValue,f)}))},_focusNextInputField:function(a,b){var c=a,f=null;switch(b){case "TAB":0===c&&(c=this._textInputElements.length);f=this._textInputElements[c-1];break;case "SHIFTTAB":c===
this._textInputElements.length-1&&(c=-1),f=this._textInputElements[c+1]}null!==f&&void 0!==f&&(f.startEditing(),f.focus(),this.emit("startEditing",{}))},showAffordances:function(a,b,f){null===this._textCommitListener&&(this._textCommitListener=[]);var d=this.getLabels(),e=this.parentNode&&"block"===c.get(this.parentNode,"display");this.parentNode||(this.parentNode=g.create("div",null,b));c.set(this.parentNode,{display:"block",position:"absolute",top:"0px",left:"0px",width:c.get(f,"width")+"px",height:c.get(f,
"height")+"px"});a.forEach(function(a,b){this.figureModel.isAxesObscuredByEarlierChild(b)||(this.positionAffordance(null,100*(this.positionMatrix[0][0]+this.positionMatrix[0][1]*a[0]+this.positionMatrix[0][2]*a[2]),100*(this.positionMatrix[1][0]+this.positionMatrix[1][1]*a[1]+this.positionMatrix[1][2]*a[3]),this.parentNode,this.actionId,b),this.updateTextField(this._textInputElements[b],d[b]))},this);this.show();!e&&0<this._textInputElements.length&&(a=this._textInputElements[this._textInputElements.length-
1],a.setPromptingState(!1),a.startEditing(),a.focus(),this.emit("startEditing",{}))},updateTextField:function(b,c){a.isDescendant(k.curNode,b.domNode)||b.isEditing()?b.focus():c?(b.setPromptingState(!1),b.setText(c)):b.setPromptingState(!0)},hide:function(a){var b=this._textInputElements.filter(function(a){return a.isEditing()});a?b.forEach(function(a){a.rollback()},this):b.forEach(function(a){a.commit()},this);this._textInputElements.forEach(function(a){a.destroy()});this._textInputElements=[];g.destroy(this.parentNode);
this.parentNode=null;this.inherited(arguments)},show:function(){c.set(this.parentNode,"display","block");this.previewDomNodes.forEach(function(a,b){c.set(a,"display","block")})},destroy:function(){null!==this._textCommitListener&&this._textCommitListener.forEach(function(a){a.remove()});this._textInputElements.forEach(function(a){a.destroy()});this.inherited(arguments)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostXLabel":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-geometry dojo/dom-style dojo/dom-construct MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostLabel dojo/i18n!l10n/nls/figureToolStrip".split(" "),
function(h,e,g,d,c,b,a,f){return h([a],{promptText:f.addXLabelText,mode:"placedXLabelMode",positionMatrix:[[0,1,0.5],[1,-1,0]],actionId:"xlabel",getLabels:function(){return this.figureModel.getXLabels()},positionAffordance:function(a,b,f,e,h,q,r,s){this.parentNode=e;this.previewDomNodes||(this.previewDomNodes=[]);this.previewDomNodes[q]||(this.previewDomNodes[q]=this.createDomNodes(e,s,r,h,q),this.addClickListener(this.previewDomNodes[q],h,q));a=d.position(e);e=100*c.get(this.previewDomNodes[q],"width")/
a.w;f+=6/(2>=this.previewDomNodes.length?1:this.previewDomNodes.length);this.figureModel.getIs2D()[q]?c.set(this.previewDomNodes[q],{position:"absolute",top:f+"%",left:b-e/2+"%"}):(b=this.figureModel.getXLabelPositions()[q],0<Math.abs(b[0])&&0<Math.abs(b[1])?(b=this.figureView.getAxesPlotBox(b),c.set(this.previewDomNodes[q],{position:"absolute",top:b.yLow-a.y+"px",left:b.xLow-a.x+"px"})):(f=this.figureView.getAxesPlotBox(this.figureModel.getAxesPositions()[q]),b=f.xLow+Math.abs(f.xHigh-f.xLow)/2,
c.set(this.previewDomNodes[q],{position:"absolute",top:f.yHigh-a.y+"px",left:b-a.x+"px"})));g.set(this.previewDomNodes[q],"data-tag",h+"."+q)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostYLabel":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-geometry dojo/dom-style dojo/dom-construct MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostLabel dojo/i18n!l10n/nls/figureToolStrip".split(" "),function(h,e,g,d,c,b,a,f){return h([a],{promptText:f.addYLabelText,
textInputElementCSSClass:"ghostYLabel",mode:"placedYLabelMode",positionMatrix:[[0,1,0],[1,-1,-0.5]],actionId:"ylabel",getLabels:function(){return this.figureModel.getYLabels()},positionAffordance:function(a,b,f,e,h,q,r,s){this.parentNode=e;this.previewDomNodes||(this.previewDomNodes=[]);this.previewDomNodes[q]||(this.previewDomNodes[q]=this.createDomNodes(e,s,r,h,q),this.addClickListener(this.previewDomNodes[q],h,q),this._textInputElements[q].setTextAlignement("left"));c.set(this.previewDomNodes[q],
{position:"absolute",top:f+"%",left:b+"%"});a=d.position(this.figureView.getDomNode(),!1);b=this.figureModel.getYLabelPositions()[q];0<Math.abs(b[0])&&0<Math.abs(b[1])?(f=this.figureView.getAxesPlotBox(b),b=c.get(this.previewDomNodes[q],"width"),f.xLow+b>a.x+a.w&&(b=f.xHigh-a.x-b,c.set(this.previewDomNodes[q],{position:"absolute",left:b+"px"})),this.figureModel.getIs2D()[q]||c.set(this.previewDomNodes[q],{position:"absolute",top:f.yLow-a.y+"px",left:f.xLow-a.x+"px"})):this.figureModel.getIs2D()[q]||
(f=this.figureView.getAxesPlotBox(this.figureModel.getAxesPositions()[q]),this.figureModel.isAxesObscuredByEarlierChild(q)?c.set(this.previewDomNodes[q],{visibility:"hidden"}):(b=f.xLow+Math.abs(f.xHigh-f.xLow)/8,c.set(this.previewDomNodes[q],{position:"absolute",top:f.yHigh-a.y+"px",left:b-a.x+"px"})));this._textInputElements[q].originalPosition=null;g.set(this.previewDomNodes[q],"data-tag",h+"."+q)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/controllers/PaletteController":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-style MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/Palette MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/PaletteRegistry MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/ElementFactory MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/controllers/BaseFigurePaletteController dojo/on dojo/mouse dojo/dom-class dojo/dom".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p){return h([f],{_leftMaxForFirstElement:370,_leftPadForFirstElement:35,_suspendAllListeners:!1,getView:function(c,f,d){!this._palette||this._palette.dataTag!==c?(c=b.getPalette(c),void 0===c&&(this._palette=null),null!==this._palette&&g.destroy(this._palette.domNode),a.getPalette(c,e.hitch(this,function(a){this._palette=a;this._palette.startup();this._setupPaletteListeners();this.setViewState(this.getState(this._figureModel));d&&"function"===typeof d&&d(a)}))):(this.setViewState({is2D:this.getCurrentTarget().is2D,
backgroundColor:this._figureModel.getBackgroundColor()}),d&&"function"===typeof d&&d(this._palette));return this._palette},_setupPaletteListeners:function(){this._paletteListener||(this._paletteListener=this._palette.on("elementClicked",e.hitch(this,function(a){var b={};if(a.action)b={fcn:"paletteActionInteractionCallback",args:{action:a.action,axesIndex:this.getCurrentTarget().targetIndex,direction:a.direction||""}};else if(null!==a.mode||void 0!==a.mode)b={fcn:"setMode",args:{mode:a.mode,direction:a.direction||
""}},a={mode:a.mode,backgroundColor:this._figureModel.getBackgroundColor(),direction:a.direction||""},this.setViewState(a);this._paletteListener=null;this.notify("interaction",b)})));this._paletteListener=null},setViewState:function(a){this._palette&&this._palette.setState(a)},getState:function(a){return{mode:a.getMode(),is2D:this.getCurrentTarget()?this.getCurrentTarget().is2D:0,backgroundColor:a.getBackgroundColor(),direction:a.getZoomDirection()}},_handleMouseClick:function(a){this._doSetPalettePosition=
!0;this._handleClickOrMove(a)},_handleMouseMove:function(a){this._handleClickOrMove(a)},_handleMouseEnter:function(a){this._doSetPalettePosition=!0;this._handleClickOrMove(a)},setCurrentTarget:function(a){this._currentTarget=a},getCurrentTarget:function(){return null===this._currentTarget?null:{targetIndex:this._currentTarget,is2D:this._figureModel.getIsSubplot3D()?0:this._figureModel.getIs2D()[this._currentTarget],axesPosition:this._figureModel.getAxesPositions()[this._currentTarget],chartType:this._figureModel.getChartType()[this._currentTarget]}},
_handleClickOrMove:function(a){if(!this._suspendAllListeners){var b=this,c=!1;if(a.MouseOverAxes&&a.MouseOverAxes.isInside){var c=!0,f=b.getCurrentTarget();if(f&&a.MouseOverAxes.Index===f.targetIndex)this._palette&&this._doSetPalettePosition&&(b._setPalettePosition(a.MouseOverAxes.axesPlotBox),this._doSetPalettePosition=!1);else{b.setCurrentTarget(a.MouseOverAxes.Index);var f=1===b.getCurrentTarget().is2D?"2DAxes":"3DAxes",d=b.getCurrentTarget().chartType,e="";"axes"===d?e="FigurePalette":"geobubble"===
d?e="ActionPalette":"geoaxes"===d&&(e="GeoAxesPalette");b.getView(e,f,function(c){b._figureView.hasRenderingSize()?b.enablePalette():b.disablePalette();g.place(c.domNode,b._figureView.getWrapperNode());b._setPalettePosition(a.MouseOverAxes.axesPlotBox)})}}this.setVisible(c)}},_handleAxesPositionUpdate:function(a){this._palette&&!n.contains(this._palette.domNode,"disabled")&&(this._currentTarget>a.newAxesPositions.length-1&&this.setCurrentTarget(a.newAxesPositions.length-1),a=this.getCurrentTarget(),
a=this._figureView.getAxesPlotBox(a.axesPosition),this._setPalettePosition(a))},getTopForElement:function(a,b){var c=this.getTopForAxesRef(a),f=this.getElementBounds(b).height;return c-f<this._MIN_TOP?this._MIN_TOP:c-f},getLeftForElement:function(a,b){var c=this.getRightForAxesRef(a),f=this.getElementBounds(b);return c-f.width},enablePalette:function(){this.inherited(arguments);this._suspendAllListeners=!1},disablePalette:function(){this.inherited(arguments);this._suspendAllListeners=!0},_setPalettePosition:function(a){var b=
this.getTopForElement(a,this._palette.domNode);a=this.getRightForAxesRef(a);var c=this.getElementBounds(this._figureView.getWrapperNode());d.set(this._palette.domNode,{position:"absolute",right:c.width-a+"px",top:b+"px"})}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/controllers/BaseFigurePaletteController":function(){define("dojo/_base/declare dojo/_base/lang dojo/Evented dojo/on dijit/Destroyable MW/rtc/plugins/embeddedoutputs/outputhandlers/floatingpalette/controllers/BasePaletteController MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/AxesPositionMixin".split(" "),
function(h,e,g,d,c,b,a){return h([b,g,c,a],{_currentTarget:null,constructor:function(a){this._setFigureProperties(a);this._figureModel&&this.own(d(this._figureModel,"AxesPositionUpdated",e.hitch(this,function(a){this._handleAxesPositionUpdate(a)})))},setState:function(a){this._figureModel=a;a=this.getState(a);this._palette&&this._palette.setState(a)},getState:function(a){return a},_setupPaletteListeners:function(){},_setPalettePosition:function(a){},_handleAxesPositionUpdate:function(a){}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/AxesPositionMixin":function(){define(["dojo/_base/declare",
"dojo/dom-geometry"],function(h,e){return h([],{_figureModel:null,_figureView:null,_MIN_TOP:3,_MAX_TOP:13,_setFigureProperties:function(e){e&&(e.figureView&&e.figureModel)&&(this._figureView=e.figureView,this._figureModel=e.figureModel)},_getAxesPlotBox:function(e){return this._figureView.getAxesPlotBox(e)},_getTopAxesPlotBox:function(){var e=this._figureModel.getVisibleAxesPositions(),d;!e||0===e.length?(d=[0,0,1,1],e=[d]):d=e[0];e.forEach(function(c){c[1]>=d[1]&&(d=c)});return this._getAxesPlotBox(d)},
getElementBounds:function(g){g=e.position(g);return{width:g.w,height:g.h,left:g.x,top:g.y}},getTopForAxesRef:function(e){if(void 0===e||null===e)e=this._getTopAxesPlotBox();var d=this.getElementBounds(this._figureView.getDomNode());return e.yLow-d.top},getRightForAxesRef:function(e){if(void 0===e||null===e)e=this._getTopAxesPlotBox();var d=this.getElementBounds(this._figureView.getDomNode()),c=d.left+d.width,b=c-e.xHigh,d=e.xHigh-d.left;16>b&&(d-=16,0>b&&(d-=e.xHigh-c));return d},getBottomForAxesRef:function(e){if(void 0===
e||null===e)e=this._getTopAxesPlotBox();var d=this.getElementBounds(this._figureView.getDomNode());return e.yHigh-(d.top+d.height)},getTopForElement:function(e,d){},getLeftForElement:function(e,d){}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/controllers/PromptController":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-style dojo/dom-class MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/PaletteRegistry MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/ElementFactory dojo/on dojo/Evented MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/controllers/BaseFigurePaletteController".split(" "),
function(h,e,g,d,c,b,a,f,k,l){return h([l,k],{getView:function(){if(!this._palette){var c=b.getPalette("OutputPopoutPalette");a.getPalette(c,e.hitch(this,function(a){this._palette=a;this._palette.startup();this._setupPaletteListeners()}))}return this._palette},_setupPaletteListeners:function(){this._paletteListener||(this._paletteListener=this._palette.on("elementClicked",e.hitch(this,function(a){this.notify("interaction",{fcn:"launchFigure",args:{editorId:this._figureModel.editorId}})})))},_handleMouseMove:function(a){},
_handleMouseClick:function(a){this._handleMouseEnter(a)},_handleMouseEnter:function(a){this._palette||(this._palette=this.getView(),g.place(this._palette.domNode,this._figureView.getWrapperNode()));this._setPalettePosition();this.setVisible(!0)},getTopForElement:function(a,b){var c=this.getTopForAxesRef(a),f=this.getElementBounds(b).height;return c-f<this._MIN_TOP?this._MIN_TOP:c-f},getLeftForElement:function(a,b){var c=this.getElementBounds(b);return this._figureView.getDomNode().offsetLeft+this.getElementBounds(this._figureView.getDomNode()).width-
c.width},_setPalettePosition:function(a){var b=this.getTopForElement(a,this._palette.domNode);a=this.getLeftForElement(a,this._palette.domNode);this.isInline(this._figureView.getWrapperNode())?d.set(this._palette.domNode,{position:"absolute",left:a+"px",right:"",top:b+"px"}):d.set(this._palette.domNode,{position:"absolute",left:"",right:"1px",top:b+"px"})}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/ActionManager":function(){define(["dojo/_base/declare"],function(h){return h(null,{_figureModel:null,
_figureView:null,_codeGen:null,_deferredCodeGen:null,_undoRedoManager:null,_TOOLSTRIP_INTERACTION:"ToolstripInteraction",constructor:function(e){this._figureView=e.figureView;this._figureModel=e.figureModel;this._codeGen=e.codeGenerator},setUndoRedoManager:function(e){this._undoRedoManager=e},setState:function(e){this._figureModel=e;this._updateFigureForToolStripAction()},_updateFigureForToolStripAction:function(){var e=this._figureModel.getInteractionData().iAtomicActionID;this._addToolStripActionToUndoRedo(e);
this._codeGen&&this._figureModel._interactionData&&this._updateCodeGen()},_updateCodeGen:function(){var e=this._codeGen,g=this._figureModel._interactionData.iClearCode,d=this._figureModel._interactionData.iCode;this._deferredCodeGen=e.attach(this._figureView.getGraphicsViewContainerNode());g?e.detach():""!==d&&(e.setGeneratedCode(d),this._deferredCodeGen&&!this._deferredCodeGen.isResolved()?this._deferredCodeGen.then(function(c){e.updateCodeArea()}):e.updateCodeArea())},_addToolStripActionToUndoRedo:function(e){e=
{actionID:e,interactionType:this._TOOLSTRIP_INTERACTION,codeGenState:{attachCodeGenOnUndo:!1,attachCodeGenOnRedo:!1}};this._codeGen&&this._codeGen.isCodeGenAttached()&&(e.codeGenState.attachCodeGenOnUndo=!0);""!==this._figureModel._interactionData.iCode&&(e.codeGenState.attachCodeGenOnRedo=!0);this._undoRedoManager.insertInteractionsForUndoRedo(this._figureModel,e)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureUndoRedoManager":function(){define(["dojo/_base/declare","MW/rtc/plugins/undoredo/commands/FigureInteractionCommand",
"MW/rtc/plugins/undoredo/commands/CodeGenInteractionCommand"],function(h,e,g){return h(null,{_document:null,_UNDOREDO_CALLBACK:"undoRedoInteractionCallback",_FIGURE_INTERACTION_EVENT:"FigureInteractionEvent",_CODEGEN_INTERACTION:"CodeGenInteraction",constructor:function(d){this._document=d.document},insertInteractionsForUndoRedo:function(d,c){var b=this;this._document.undoable(function(a){c.interactionType===b._CODEGEN_INTERACTION?a.appendCommand(new g(d,b._UNDOREDO_CALLBACK,c)):a.appendCommand(new e(d,
b._UNDOREDO_CALLBACK,c))})}})})},"MW/rtc/plugins/undoredo/commands/FigureInteractionCommand":function(){define(["dojo/_base/declare","mw-log/Log","MW/rtc/plugins/embeddedoutputs/MessageServiceFactory","MW/rtc/plugins/undoredo/commands/CommandInterface"],function(h,e,g,d){return h(d,{_figureModel:null,_clientEventArgs:null,_eventCallBack:null,_UNDO_EVENT_TYPE:"Undo",_REDO_EVENT_TYPE:"Redo",constructor:function(c,b,a){this._figureModel=c;this._eventCallBack=b;this._clientEventArgs=a},execute:function(){this._setInteractionEventType(this._REDO_EVENT_TYPE);
this._feval(this._eventCallBack,this._clientEventArgs)},unexecute:function(){this._setInteractionEventType(this._UNDO_EVENT_TYPE);this._feval(this._eventCallBack,this._clientEventArgs)},_setInteractionEventType:function(c){this._clientEventArgs.type=c},_feval:function(c,b){g.getInstance().publish(this._figureModel.getInteractionChannel(),JSON.stringify({method:c,args:b}))}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureOutputProperties":function(){define([],function(){return{OUTPUT_TYPE:"figure",
CSS_TAG:"embeddedOutputsFigure",STATE:{NOT_INITIALIZED:0,PLACEHOLDER:1,PENDING:2,FINAL_SNAPSHOT:3,FINAL_PENDING_SNAPSHOT:4}}})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/EventHandler":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(h,e){return h(null,{_isServerBusy:!1,_eventQueue:null,constructor:function(){this._eventQueue=[]},destroy:function(){this.clearEventQueue()},setIsServerBusy:function(e){this._isServerBusy=e},getIsServerBusy:function(){return this._isServerBusy},
_processPendingEvent:function(){if(0<this._eventQueue.length){var e=this._eventQueue.shift();this.setIsServerBusy(!0);e.callback(e.event)}},_addEventToQueue:function(e,d){var c=this._eventQueue.length;if(0<c)switch(c=this._eventQueue[c-1].event,d.type){case "pointermove":case "mousemove":("pointermove"===c.type||"mousemove"===c.type)&&this._eventQueue.pop();break;case "pointerup":case "mouseup":break;default:this.clearEventQueue()}this._eventQueue.push({event:d,callback:e})},clearEventQueue:function(){0<
this._eventQueue.length&&(this._eventQueue.length=0)},processEvent:function(e,d){this._addEventToQueue(e,d);this.getIsServerBusy()||this._processPendingEvent()},processNextPendingEvent:function(){this.setIsServerBusy(!1);this._processPendingEvent()}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FocusedFigure":function(){define(["dojo/_base/declare"],function(h){return h(null,{figureId:""})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/ToolstripActionController":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/aspect","MW/rtc/plugins/embeddedoutputs/MessageServiceFactory"],function(h,e,g,d){return h(null,{channel:null,pendingActions:null,_actionService:null,_aspectHandles:null,_FIGURE_TOOLSTRIP_ACTION_IDS:"figure.grid figure.colorbar figure.legend figure.cleargrid figure.clearcolorbar figure.clearlegend figure.xlabel figure.ylabel figure.title figure.xgrid figure.ygrid figure.line figure.arrow figure.doublearrow figure.textarrow".split(" "),constructor:function(c,b){this._actionService=
b;this.channel="/toolstrip/toolstripactionevent/"+c;d.getInstance().subscribe(this.channel,"_actionCallback",this);this.pendingActions=[];this._aspectHandles=[];this._loadActions()},_loadActions:function(){var c=[];this._FIGURE_TOOLSTRIP_ACTION_IDS.forEach(function(b){c.push({id:b,enabled:!0,selected:!1,callback:function(){}})});this._actionService.loadActions(c);this._aspectHandles.push(g.after(this._actionService,"onActionChange",e.hitch(this,"_handleActionChange"),!0))},_handleActionChange:function(c){"selected"===
c.key&&(c.newValue&&!c.oldValue&&this._FIGURE_TOOLSTRIP_ACTION_IDS.some(function(b){return b===c.id}))&&this._feval(c)},_feval:function(c){this.pendingActions.push(c);d.getInstance().publish(this.channel,{actionId:c.id})},_actionCallback:function(c){var b=-1,a=this;this.pendingActions.some(function(f,d){f.id===c.data.id&&(a._actionService.updateAction(f.id,{selected:!1}),b=d)});0<=b&&this.pendingActions.splice(b,1)},destroy:function(){d.getInstance().unsubscribe(this.channel,"_actionCallback",this);
this._aspectHandles.forEach(function(c){c.remove()});this._aspectHandles=[]}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureSnapshotManager":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/plugins/embeddedoutputs/MessageServiceFactory"],function(h,e,g){return h(null,{_REMOVE_DELAY:100,_isEvalRunning:!1,constructor:function(d,c){this._editorId=d;this._idsPendingRemoval=[];this._deletionChannel=c},destroy:function(){this._flushSnapshotsToRemoveQueue()},removeSnapshot:function(d){this._idsPendingRemoval.push(d);
1===this._idsPendingRemoval.length&&setTimeout(e.hitch(this,"_flushSnapshotsToRemoveQueue"),this._REMOVE_DELAY)},_flushSnapshotsToRemoveQueue:function(){if(!(this._isEvalRunning||0===this._idsPendingRemoval.length)){var d="{'"+this._idsPendingRemoval.join("', '")+"'}",d={editorId:this._editorId,figureIds:d};g.getInstance().publish(this._deletionChannel,d);this._idsPendingRemoval=[]}},evalComplete:function(){this._isEvalRunning=!1;this._flushSnapshotsToRemoveQueue()},evalStarted:function(){this._isEvalRunning=
!0}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureConnectionManagerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./FigureConnectionManager"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.id"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureConnectionManager":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/embeddedoutputs/MessageServiceFactory"],
function(h,e,g,d){return h(null,{CONNECTION_STATE:{CONNECTED:1,DISCONNECTED:0},constructor:function(c){this._editorId=c;this._connections={};d.getInstance().subscribe("/liveeditor/figure/disconnect/*","_diconnectionHandler",this);d.getInstance().subscribe("/liveeditor/figure/reconnect/*","_reconnectionHandler",this)},_diconnectionHandler:function(c){c=c.data;var b=this._connections[c];b||(b=this._createEmptyConnection());b.state=this.CONNECTION_STATE.DISCONNECTED;this._connections[c]=b;b.output&&
b.output.disconnect()},_reconnectionHandler:function(c){c=c.data;var b=this._connections[c];b||(b=this._createEmptyConnection());b.state=this.CONNECTION_STATE.CONNECTED;this._connections[c]=b;b.output&&b.output.reconnect()},registerOutput:function(c,b){this._connections[c]||(this._connections[c]=this._createEmptyConnection());this._connections[c].output=b;!this._connections[c].state===this.CONNECTION_STATE.CONNECTED?b.disconnect():b.reconnect()},getConnectionStatus:function(c){return this._connections[c].state},
removeOutput:function(c){delete this._connections[c]},_createEmptyConnection:function(){return{output:null,state:this.CONNECTION_STATE.CONNECTED}},destroy:function(){d.getInstance().subscribe("/liveeditor/figure/disconnect/*","_diconnectionHandler",this);d.getInstance().subscribe("/liveeditor/figure/reconnect/*","_reconnectionHandler",this)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/export/Figure2HTMLProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/export/Figure2HTML"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/export/Figure2HTML":function(){define(["dojo/_base/declare","dojo/dom-style","dojo/query","MW/rtc/plugins/export/html/HTMLOutputUtilities","MW/rtc/plugins/export/OutputNodeExporterInterface"],function(h,e,g,d,c){return h([c],{constructor:function(){},getApplicableDomNodeClasses:function(){return["embeddedOutputsFigure"]},
enter:function(b,a,c){a=d.removeElementsWithClass(a,".figureWidget");this._updateFiguresInOutputs(a);b.addToBody(a.outerHTML);return!0},_updateFiguresInOutputs:function(b){g(".ImageView",b).forEach(function(a){e.set(a,"height","auto");e.set(a.parentNode,"height","auto")})}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/matrix/MatrixOutputHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./MatrixOutputHandler"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.id",
"rtc.outputhandlerservice","rtc.executionservice"]}},createInstance:function(d,c,b){d=new g(d,b);c.registerOutputPlugin(d);return d}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/matrix/MatrixOutputHandler":function(){define("dojo/_base/declare MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutputHandler MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResult MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResultInstruction ./MatrixOutput ./MatrixOutputProperties ./SnapshotManager".split(" "),
function(h,e,g,d,c,b,a){return h([e],{OUTPUT_TYPE:b.OUTPUT_TYPE,constructor:function(b,c){this._snapshotManager=new a(b,c)},getOutputFromData:function(a,b){var e=new c({data:a,outputMetaData:b,executionService:this._executionService,snapshotManager:this._snapshotManager});return new g(d.ADD_OUTPUT,e)},destroy:function(){this._snapshotManager.destroy()}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/matrix/MatrixOutput":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct MW/rtc/plugins/embeddedoutputs/EmbeddedOutputsUtilities MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutput MW/rtc/plugins/embeddedoutputs/outputhandlers/floatingpalette/controllers/matrix/MatrixPromptController MW/rtc/plugins/embeddedoutputs/outputhandlers/floatingpalette/controllers/matrix/RunScriptPromptController MW/rtc/plugins/embeddedoutputs/outputhandlers/matrix/MatrixStyler MW/rtc/plugins/embeddedoutputs/outputhandlers/VariableUtilities MW/rtc/plugins/embeddedoutputs/view/EllipsisUtilities mw-html-utils/HtmlUtils mw-utils/Utils ./CharacterWidthUtility ./MatrixOutput ./MatrixOutputProperties ./MatrixOutputUtility".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t){return h([b],{_REGEX_FOR_EXPONENT:/1.0e\+\d+ \*/,type:s.OUTPUT_TYPE,constructor:function(a){this._data=e.clone(a.data);this._outputMetaData=a.outputMetaData;this._snapshotManager=a.snapshotManager;this._promptController=this._outputMetaData.createPromptController?this._createPromptController():null;this._domElement=this._createDomElement()},destroy:function(){this._data.id&&this._snapshotManager.removeVariableSnapshot(this._data.id);this._promptController&&
this._promptController.destroy()},getCssTag:function(){return s.CSS_TAG},getDomElement:function(){return this._domElement},getSerializableData:function(){return this._data},getText:function(){return t.createName(this._data.name)+"\n"+this._data.value},getHTML:function(a,b){var c=p.treatHtmlLikeCommandWindow(t.createName(this._data.name)),f=p.treatHtmlLikeCommandWindow(this._data.value),d="";this._data.header&&(d=t.createHeader(this._data.header).textContent);return"\x3cpre\x3e"+c+d+"\n"+f+"\x3c/pre\x3e"},
_createPromptController:function(){if(c.isLoadedFromDisk(this._outputMetaData.evaluationId))return new f;var b=new a;b.addInteractionListener(e.hitch(this._snapshotManager,"openVariableSnapshot",this._data.id));return b},_createDomElement:function(){var a=d.create("div",{className:"matrixElement veSpecifier"});this._styler=new k(this);a.getStyler=e.hitch(this,function(){return this._styler});var b=t.createNameAndSummary(this._data.name,this._data.rows,this._data.columns,this._data.type,this._data.header);
a.appendChild(b.summary);b=t.createMatrixValue(this._data,this._REGEX_FOR_EXPONENT,this._outputMetaData).container;a.appendChild(b);this._promptController&&this._promptController.setTarget(a);return a}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/floatingpalette/controllers/matrix/MatrixPromptController":function(){define(["dojo/_base/declare","dojo/query","dijit/Destroyable","MW/rtc/plugins/embeddedoutputs/outputhandlers/floatingpalette/controllers/SimpleFloatingElement"],function(h,e,g,d){return h([d,
g],{constructor:function(){this.paletteRegistryId="MatrixPopoutPalette"},getPreferredLeftPosition:function(){var c=e(".variableValue",this._outputDomNode),b=0;c&&1<=c.length&&(b=c[0].offsetLeft+c[0].offsetWidth);var c=e(".veVariableName",this._outputDomNode),a=0;c&&1<=c.length&&(a=c[0].offsetLeft+c[0].offsetWidth);return Math.max(b,a)+10}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/floatingpalette/controllers/matrix/RunScriptPromptController":function(){define(["dojo/_base/declare","MW/rtc/plugins/embeddedoutputs/outputhandlers/floatingpalette/controllers/matrix/MatrixPromptController"],
function(h,e){return h([e],{constructor:function(){this.paletteRegistryId="RunScriptPalette"},_setupPaletteListeners:function(){}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/matrix/MatrixStyler":function(){define("dojo/dom-class dojo/_base/declare dojo/dom-geometry dojo/query dojo/dom-style MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutputStyler MW/rtc/plugins/embeddedoutputs/view/EllipsisUtilities".split(" "),function(h,e,g,d,c,b,a){return e([b],{MARGIN_PADDING_BUFFER:30,LEFT_MARGIN_BUFFER:14,
ELLIPSIS_WIDTH:32,BUFFER_SPACE_FOR_COLUMN:2,MAX_ROWS_TO_SHOW:10,_SUMMARYBAR_VIEWPORT_SPAN:"veViewportSummary",getStyleChange:function(a){var b=d(".valueContainer",a)[0],c=this.getAvailableWidth(a),e=parseFloat(a.getAttribute("data-width"));if(b){var g=this.getMatrixInfo(b),h=this.getTotalColumnsThatFit(c,g,b);this.updateViewportInfo(a,this.MAX_ROWS_TO_SHOW,h,g.totalRows,g.totalColumns);if(!this._hasWidthChanged(c,e))return null;var e=d(".variableValue",b)[0],q=d(".veVariableName",a)[0],h=Math.min(h,
g.totalColumns);return{output:a,availableWidth:c,totalWidth:h*g.columnWidth+this.BUFFER_SPACE_FOR_COLUMN,valueContainer:b,variableValue:e,matrixInfo:g,numOfColumnsToShow:h,veVariableName:q}}},applyStyleChange:function(b){b&&(b.output.setAttribute("data-width",b.availableWidth),c.set(b.variableValue,"width",b.totalWidth+"px"),c.set(b.veVariableName,"width",b.availableWidth+"px"),a.displayEllipsisIfRequired(b.valueContainer,b.matrixInfo.totalColumns,b.matrixInfo.totalRows,b.numOfColumnsToShow,this.MAX_ROWS_TO_SHOW))},
_hasWidthChanged:function(a,b){return this._hasDimensionChanged(a,b)},_hasDimensionChanged:function(a,b){return a&&0!==a&&a!==b},updateViewportInfo:function(a,b,c,d,e){if(a=a.getElementsByClassName(this._SUMMARYBAR_VIEWPORT_SPAN)[0]){if(1<d){var g=a.getElementsByClassName("startRow")[0];a.getElementsByClassName("endRow")[0].innerText=Math.min(parseInt(g.innerText)+(b-1),d)}1<e&&(b=a.getElementsByClassName("startColumn")[0],a.getElementsByClassName("endColumn")[0].innerText=Math.min(parseInt(b.innerText)+
(c-1),e))}},getMatrixInfo:function(a){if(a)try{return JSON.parse(a.getAttribute("data-layout"))}catch(b){}return null},getAvailableWidth:function(a){return g.getMarginBox(a).w-this.MARGIN_PADDING_BUFFER},getTotalColumnsThatFit:function(a,b,c){return h.contains(c,"hideEllipses")||0!=c.getElementsByClassName("horizontalEllipsis hide").length?Math.floor(a/b.columnWidth):Math.floor((a-(this.ELLIPSIS_WIDTH+this.LEFT_MARGIN_BUFFER))/b.columnWidth)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutputStyler":function(){define(["dojo/_base/declare"],
function(h){return h(null,{constructor:function(){},getStyleChange:function(e){},setStyleChange:function(e){}})})},"MW/rtc/plugins/embeddedoutputs/view/EllipsisUtilities":function(){define(["dojo/query","dojo/dom-class"],function(h,e){return{displayEllipsisIfRequired:function(e,d,c,b,a){var f=h(".horizontalEllipsis",e)[0];this._showHideEllipsis(f,d,b);e=h(".verticalEllipsis",e)[0];this._showHideEllipsis(e,c,a)},_showHideEllipsis:function(e,d,c){d>c?this._show(e):this._hide(e)},_show:function(g){e.remove(g,
"hide")},_hide:function(g){e.add(g,"hide")}}})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/VariableUtilities":function(){define(["dojo/dom-construct"],function(h){return{createHeader:function(e){return""==e?e:this._createHeaderSpanElement(e)},_createHeaderSpanElement:function(e){e=h.create("span",{className:"headerElement",innerHTML:e}).innerText;var g=h.create("span",{className:"headerElement"});g.innerText=e;return g}}})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/matrix/CharacterWidthUtility":function(){define(["dojo/_base/declare",
"dojo/dom-construct"],function(h,e){return{_singleCharWidth:null,getNumericCharacterWidth:function(){if(null===this._singleCharWidth){var g=e.create("span",{className:"rtePane"}),d=e.create("span",{innerHTML:"1234567890",className:"eoOutputWrapper"});e.place(d,g);e.place(g,document.body);this._singleCharWidth=d.getBoundingClientRect().width/10;e.destroy(g)}return this._singleCharWidth}}})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/matrix/MatrixOutputProperties":function(){define([],function(){return{OUTPUT_TYPE:"matrix",
CSS_TAG:"embeddedOutputsMatrixElement"}})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/matrix/MatrixOutputUtility":function(){define("dojo/dom-class dojo/dom-construct MW/rtc/plugins/embeddedoutputs/outputhandlers/VariableUtilities MW/rtc/plugins/embeddedoutputs/view/EllipsisUtilities mw-html-utils/HtmlUtils mw-utils/Utils ./CharacterWidthUtility".split(" "),function(h,e,g,d,c,b,a){return{_DEFAULT_MAX_COLUMNS:50,_MAX_ROWS:10,_REGEX_FOR_FIRST_ELEMENT:/^\s*\S*/,_REGEX_FOR_FIRST_COMPLEX_ELEMENT:/^[\s\d\.+-]+[ij]/i,
createHeader:function(a){a=c.treatHtmlLikeCommandWindow(a);if(""===a)return a;a=e.create("span",{className:"headerElement",innerHTML:a}).innerText;var b=e.create("span",{className:"headerElement"});b.innerText=a;return b},createMatrixValue:function(a,b,c){var d=a.value;b=d.match(b);return this.createValueElement({value:d,id:a.id,rows:a.rows,columns:a.columns,exponent:b,isComplex:a.subtype&&"complex"===a.subtype,columnWidth:a.columnWidth},c)},createName:function(a){return a+" \x3d "},createNameAndSummary:function(a,
b,c,d,g){var m=e.create("div",{className:"veVariableName variableNameElement"}),q=e.create("span");q.textContent=this.createName(a);a=e.create("span",{className:"veVariableValueSummary"});(g=this.createHeader(g))?(a.innerText=g.innerText,h.add(a,"headerElement")):"double"!==d&&(a.textContent=b+"\u00d7"+c+" "+d,h.add(a,"veMetaSummary"));m.appendChild(q);m.appendChild(a);return{summary:m,metaSummary:a}},createValueElement:function(a,b){var c=e.create("div",{className:"valueContainer"}),g=e.create("div",
{className:"variableValue"}),h=a.value,m=b.maxColumns||this._DEFAULT_MAX_COLUMNS;a.columns>m&&(h=this._chopColumns(h,m));g.textContent=h;c.appendChild(g);this._addEllipsis(c);b.createPromptController||d.displayEllipsisIfRequired(c,a.columns,a.rows,m,this._MAX_ROWS);m=a.columnWidth?a.columnWidth:this._getColumnWidth(h,a.exponent);h=this._getCharsPerElement(h,a.exponent,a.isComplex);this.updateLayoutInfo(m,a.columns,a.rows,h,c);return{value:g,container:c}},updateLayoutInfo:function(a,b,c,d,e){e.setAttribute("data-layout",
JSON.stringify({columnWidth:a,totalColumns:b,totalRows:c,charsPerColumn:d}))},_addEllipsis:function(a){var b=e.create("div",{className:"horizontalEllipsis hide"});a.appendChild(b);b=e.create("div",{className:"verticalEllipsis hide"});a.appendChild(b)},_getColumnWidth:function(b,c){return this._getCharsPerElement(b,c)*a.getNumericCharacterWidth()},_chopColumns:function(a,b){if(!a)return null;var c="",d,e,g=a.split("\n"),h=g.length,r=this._getCharsPerElement(a)*b;for(d=0;d<h-1;d+=1)e=g[d].substr(0,
r),c+=e+"\n";return c+=g[d].substr(0,r)},_getCharsPerElement:function(a,b,c){c=c?this._REGEX_FOR_FIRST_COMPLEX_ELEMENT:this._REGEX_FOR_FIRST_ELEMENT;b&&((b=a.split("\n\n")[1])||(b=a.substring(a.indexOf("\n")+1)),a=b);a=c.exec(a);a=a[0];return a.length}}})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/matrix/SnapshotManager":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/string"],function(h,e,g){return h(null,{_OPEN_VARIABLE_COMMAND:"matlab.internal.editor.VariableManager.openVariableEditor('${editorId}', '${variableId}');",
_REMOVE_VARIABLE_COMMAND:"matlab.internal.editor.VariableManager.removeVariables('${editorId}', ${variableIds});",_REMOVE_VARIABLE_DELAY:500,constructor:function(d,c){this._editorId=d;this._executionService=c;this._idsPendingRemoval=[]},destroy:function(){this._flushVariablesToRemoveQueue()},openVariableSnapshot:function(d){d=g.substitute(this._OPEN_VARIABLE_COMMAND,{editorId:this._editorId,variableId:d});this._executionService.executionEval(d,!0)},removeVariableSnapshot:function(d){this._idsPendingRemoval.push(d);
1===this._idsPendingRemoval.length&&setTimeout(e.hitch(this,"_flushVariablesToRemoveQueue"),this._REMOVE_VARIABLE_DELAY)},_flushVariablesToRemoveQueue:function(){if(0!==this._idsPendingRemoval.length){var d="{'"+this._idsPendingRemoval.join("', '")+"'}",d=g.substitute(this._REMOVE_VARIABLE_COMMAND,{editorId:this._editorId,variableIds:d});this._executionService.executionEval(d,!0);this._idsPendingRemoval=[]}}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/matrix/export/MatrixElement2HTMLProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/embeddedoutputs/outputhandlers/matrix/export/MatrixElement2HTML"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/matrix/export/MatrixElement2HTML":function(){define("dojo/_base/declare MW/rtc/plugins/embeddedoutputs/outputhandlers/matrix/MatrixOutputProperties MW/rtc/plugins/export/html/HTMLOutputUtilities MW/rtc/plugins/export/OutputNodeExporterInterface dojo/text!MW/rtc/plugins/embeddedoutputs/view/css/matrixOutput.css dojo/text!MW/rtc/plugins/view/exporters/ellipses.css".split(" "),
function(h,e,g,d,c,b){return h([d],{constructor:function(){this._firstVisit=!0},getApplicableDomNodeClasses:function(){return[e.CSS_TAG]},reset:function(){this._firstVisit=!0},enter:function(a,f,d){this._firstVisit&&(a.addCSSToStyle(".variableValue { width: 100% !important; }\n"),a.addCSSToStyle(g.cleanUpCSS(c)),a.addCSSToStyle(g.cleanUpCSS(b)),this._firstVisit=!1);f=g.removeElementsWithClass(f,".figureWidget");a.addToBody(f.outerHTML);return!0}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/symbolic/SymbolicOutputHandlerProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./SymbolicOutputHandler"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.outputhandlerservice"]}},createInstance:function(d){var c=new g;d.registerOutputPlugin(c);return c}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/symbolic/SymbolicOutputHandler":function(){define("dojo/_base/declare dojo/_base/lang MW/equations/renderer/Renderer MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutputHandler MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResult MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResultInstruction ./SymbolicOutput ./SymbolicOutputProperties".split(" "),
function(h,e,g,d,c,b,a,f){return h([d],{OUTPUT_TYPE:f.OUTPUT_TYPE,_PX_PER_EM:14,constructor:function(){this._renderer=new g({equationFormat:"mathml",pxPerEm:this._PX_PER_EM})},getOutputFromData:function(f){f=new a({data:f,renderer:this._renderer,pxPerEm:this._PX_PER_EM});return new c(b.ADD_OUTPUT,f)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/symbolic/SymbolicOutput":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct MW/equations/renderer/model/utils/MathMLUtils MW/rtc/misc/ImageURIUtilities MW/rtc/plugins/cutcopypaste/MIMETypes MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutput MW/rtc/plugins/embeddedoutputs/view/EquationTooltip ./SymbolicOutputProperties".split(" "),
function(h,e,g,d,c,b,a,f,k,l){return h([f],{_IMG_URI_DATA_ATTRIBUTE:"data-imguri",type:l.OUTPUT_TYPE,constructor:function(a){this._data=a.data;this._renderer=a.renderer;this._pxPerEm=a.pxPerEm;this._domElement=this._createDomElement()},getCssTag:function(){return l.CSS_TAG},getDomElement:function(){return this._domElement},getSerializableData:function(){return this._data},getText:function(){return""},getHTML:function(a,b){var c=this._renderer.renderToImageURLSynch(this._data.value,this._pxPerEm),
f="\x3cp class\x3d'symbolicElement'\x3e";this._data.name&&(f=f+"\x3cpre\x3e"+(this._data.name+"\u00a0\x3d\u00a0\n"),f+="\x3c/pre\x3e",f+="\u00a0\u00a0\u00a0");f+=this._equationImageToHTML(c,a,b);return f+="\x3c/p\x3e"},_isTall:function(a){return a>2*this._pxPerEm},_equationImageToHTML:function(a,c,f){var d='\x3cspan style\x3d"vertical-align: '+Math.round(a.verticalAlign)+'px;"\x3e',d=d+"\x3cimg ";c?(c=b.pushImageAndGetPathFromURI(a.dataURL,c,f),d=d+('src\x3d"'+c+'"')+(" "+this._IMG_URI_DATA_ATTRIBUTE+
'\x3d"'+a.dataURL+'"')):d+='src\x3d"'+a.dataURL+'"';d+=' width\x3d"'+a.width+'" height\x3d"'+a.height+'"';return d+="\x3e\x3c/span\x3e"},_createDomElement:function(){var a=d.create("div");g.add(a,"symbolicElement");this._renderer.render(this._data.value,a).then(e.hitch(this,function(){var b=this._isTall(a.lastChild["data-eqn-height"]),c;this._tooltip=new k;this._data.name&&(c=d.create(b?"div":"span"),c.textContent=this._data.name+" \x3d\u00a0",g.add(c,"embeddedOutputsVariableElement"),d.place(c,a,
"first"),g.add(a.lastChild,b?"displaySymbolicElement":"inlineSymbolicElement"))}));return a},getMIMEContent:function(){var b=this._renderer.renderToImageURLSynch(this._data.value,this._pxPerEm),f=this._renderer.getModel(this._data.value),f=c.exportMathML([f]);return[{flavor:a.MATHML_PRESENTATION,content:f},{flavor:a.IMAGE,content:b.dataURL}]},getName:function(){return this._data.name},getValue:function(){return this._data.value}})})},"MW/equations/renderer/model/utils/MathMLUtils":function(){define(["./NodeFactory"],
function(h){return{exportMathML:function(e,g){g=g||{};g.attribBlackList=g.attribBlackList||["data-category"];var d,c;if(1===e.length)c=e[0];else{c=h.createNode("MathRoot",{inline:g.inline});for(d=0;d<e.length;d+=1)c.children.push(e[d])}return c.exportMathML(g)}}})},"MW/rtc/plugins/embeddedoutputs/view/EquationTooltip":function(){define("dijit/popup dijit/registry dijit/TooltipDialog dojo/_base/declare dojo/_base/lang dojo/dom dojo/dom-class dojo/on dojo/query".split(" "),function(h,e,g,d,c,b,a,f){return d(null,
{constructor:function(){this._tooltip=e.byId("MathEquationRendererTooltip");this._tooltip||(this._tooltip=new g({"class":"rtcTooltip",id:"MathEquationRendererTooltip",content:"none",onMouseLeave:c.hitch(this,"_closeTooltip")}));this._localHandlers=[];this._handlers=[];this._handlers.push(f(document.body,".hasTooltip:mouseover",c.hitch(this,"_handleTooltipMouseover")))},destroy:function(){this._handlers.forEach(function(a){a.remove()});this._handlers=[]},_handleTooltipMouseover:function(b){for(b=b.target;b&&
b.parentNode&&!a.contains(b,"hasTooltip");)b=b.parentNode;delete b.title;this._tooltip.set("content",b["data-eqn-tooltip"]);h.open({popup:this._tooltip,around:b});this._localHandlers.push(f(b,"DOMNodeRemoved, DOMNodeRemovedFromDocument",c.hitch(this,"_closeTooltip")));this._timeout&&window.clearTimeout(this._timeout);this._timeout=setTimeout(c.hitch(this,"_closeTooltip"),3E3)},_closeTooltip:function(){h.close(this._tooltip);this._localHandlers.forEach(function(a){a.remove()});this._localHandlers=
[]}})})},"dijit/TooltipDialog":function(){define("dojo/_base/declare dojo/dom-class dojo/has dojo/keys dojo/_base/lang dojo/on ./focus ./layout/ContentPane ./_DialogMixin ./form/_FormMixin ./_TemplatedMixin dojo/text!./templates/TooltipDialog.html ./main".split(" "),function(h,e,g,d,c,b,a,f,k,l,n,p,m){return h("dijit.TooltipDialog",[f,n,l,k],{title:"",doLayout:!1,autofocus:!0,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:p,_setTitleAttr:"containerNode",postCreate:function(){this.inherited(arguments);
this.own(b(this.domNode,"keydown",c.hitch(this,"_onKey")))},orient:function(a,b,c){a={"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft","BR-TL":"dijitTooltipBelow dijitTooltipABLeft","BL-TR":"dijitTooltipBelow dijitTooltipABRight",
"TL-BR":"dijitTooltipAbove dijitTooltipABRight","TR-BL":"dijitTooltipAbove dijitTooltipABLeft"}[b+"-"+c];e.replace(this.domNode,a,this._currentOrientClass||"");this._currentOrientClass=a},focus:function(){this._getFocusItems();a.focus(this._firstFocusItem)},onOpen:function(a){this.orient(this.domNode,a.aroundCorner,a.corner);var b=a.aroundNodePos;"M"==a.corner.charAt(0)&&"M"==a.aroundCorner.charAt(0)?(this.connectorNode.style.top=b.y+(b.h-this.connectorNode.offsetHeight>>1)-a.y+"px",this.connectorNode.style.left=
""):"M"==a.corner.charAt(1)&&"M"==a.aroundCorner.charAt(1)&&(this.connectorNode.style.left=b.x+(b.w-this.connectorNode.offsetWidth>>1)-a.x+"px");this._onShow()},onClose:function(){this.onHide()},_onKey:function(b){if(b.keyCode==d.ESCAPE)this.defer("onCancel"),b.stopPropagation(),b.preventDefault();else if(b.keyCode==d.TAB){var c=b.target;this._getFocusItems();this._firstFocusItem==this._lastFocusItem?(b.stopPropagation(),b.preventDefault()):c==this._firstFocusItem&&b.shiftKey?(a.focus(this._lastFocusItem),
b.stopPropagation(),b.preventDefault()):c==this._lastFocusItem&&!b.shiftKey?(a.focus(this._firstFocusItem),b.stopPropagation(),b.preventDefault()):b.stopPropagation()}}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/symbolic/export/Symbolic2HTMLProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/embeddedoutputs/outputhandlers/symbolic/export/Symbolic2HTML"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},
"MW/rtc/plugins/embeddedoutputs/outputhandlers/symbolic/export/Symbolic2HTML":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/query","MW/rtc/plugins/equations/equationcontroller/view/EquationViewUtilities","MW/rtc/plugins/export/OutputNodeExporterInterface"],function(h,e,g,d,c){return h([c],{constructor:function(){},getApplicableDomNodeClasses:function(){return["embeddedOutputsSymbolicElement"]},enter:function(b,a,c){0<g(".MathEquation",a).length?(c=a.cloneNode(!0),this._replaceEquations(c,
a),b.addToBody(c.outerHTML)):b.addToBody(a.outerHTML);return!0},_replaceEquations:function(b,a){var c,h,l=g(".MathEquation",a),n=g(".MathEquation",b);l.forEach(function(a,b){c=d.exportDomnodeToImageURL(a,2);c.simpleEquation?n[b].firstChild.innerHTML=d.simpleEquationToHTML(c.simpleEquation):(h=e.create("span",{style:{verticalAlign:Math.round(c.verticalAlign)+"px"}},n[b].firstChild,"replace"),e.create("img",{src:c.dataURL,width:c.width/2,height:c.height/2},h))})}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/text/TextOutputHandlerProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./TextOutputHandler"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.outputhandlerservice"]}},createInstance:function(d){var c=new g;d.registerOutputPlugin(c);return c}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/text/TextOutputHandler":function(){define("dojo/_base/declare MW/rtc/plugins/embeddedoutputs/EmbeddedOutputsUtilities MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutputHandler MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResult MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResultInstruction MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerUtility ./TextOutput ./TextOutputProperties".split(" "),
function(h,e,g,d,c,b,a,f){return h([g],{OUTPUT_TYPE:f.OUTPUT_TYPE,constructor:function(){},getOutputFromData:function(b,f){var e=f.lineNumber,g=f.evaluationId;this._cleanData(b);var h=f.lastAddedOutput;if(this._shouldUpdateLastOutput(h,e,g))return h.updateDomElement(b),new d(c.UPDATE,h);e=new a({text:b.text,truncationInfo:b.truncationInfo,lineNumber:e});return new d(c.ADD_OUTPUT,e)},_shouldUpdateLastOutput:function(a,b,c){return e.isLoadedFromDisk(c)||(!a||a.type!==f.OUTPUT_TYPE||a.getWasDestroyed())||
!(a.evaluationId===c&&a.getServerLineNumber()===b)?!1:!0},_cleanData:function(a){a.text=b.removeControlCharacters(a.text)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/text/TextOutput":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct mw-html-utils/HtmlUtils mw-string-utils/StringUtils mw-utils/Utils MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutput MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerUtility ./TextOutputProperties".split(" "),function(h,
e,g,d,c,b,a,f,k){return h([a],{_ELLIPSIS:"...",_MAX_LENGTH:6E4,type:k.OUTPUT_TYPE,constructor:function(a){this._text=a.text;this._truncationInfo=a.truncationInfo;this._domElement=this._createDomElement();this._serverLineNumber=a.lineNumber;this._destroyed=!1},destroy:function(){this._destroyed=!0},getCssTag:function(){return k.CSS_TAG},getDomElement:function(){return this._domElement},getSerializableData:function(){return{text:this._text,truncationInfo:this._truncationInfo}},getText:function(){var a=
this._createDomElement();a.innerHTML=a.innerHTML.replace(/<br>/g,"\n");var b=a.textContent;g.destroy(a);return b},getHTML:function(a,b){return"\x3cpre\x3e"+this._cleanupText(this._text)+"\x3c/pre\x3e"},_createDomElement:function(){this._text=f.processBackspaceCharacters(this._text);var a=this._cleanupText(this._text),a={innerHTML:this._showTruncationIfNeeded(a,this._truncationInfo),className:"textElement"};return g.create("div",a)},_cleanupText:function(a){a=c.normalizeNewlines(a);a=b.removeSurroundingNewLines(a);
return a=d.treatHtmlLikeCommandWindow(a)},updateDomElement:function(a){if(!this._truncationInfo||!this._truncationInfo.wasTruncatedMidLine){this._text+=a.text;this._reapplyTruncation(a);this._text=f.processBackspaceCharacters(this._text);a=this.getDomElement();var b=this._cleanupText(this._text);a.innerHTML=this._showTruncationIfNeeded(b,this._truncationInfo)}},_reapplyTruncation:function(a){var b=!1;this._text.length>this._MAX_LENGTH&&(this._text=this._text.slice(0,this._MAX_LENGTH),b=!0);b|=a.truncationInfo&&
a.truncationInfo.wasTruncatedMidLine;this._truncationInfo={wasTruncatedMidLine:!!b}},_showTruncationIfNeeded:function(a,b){return b&&b.wasTruncatedMidLine?a+this._ELLIPSIS:a},getServerLineNumber:function(){return this._serverLineNumber},getWasDestroyed:function(){return this._destroyed}})})},"mw-string-utils/StringUtils":function(){define([],function(){return{_LEFT_TRIM_REGEXP:/^\s+/,_NEWLINE_REXEXP:/(\r\n|\n|\r)/g,leftTrim:function(h){return h.replace(this._LEFT_TRIM_REGEXP,"")},normalizeNewlines:function(h){return h.replace(this._NEWLINE_REXEXP,
"\n")}}})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/variable/VariableOutputHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./VariableOutputHandler"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.outputhandlerservice"]}},createInstance:function(d){var c=new g;d.registerOutputPlugin(c);return c}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/variable/VariableOutputHandler":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutputHandler","MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResult","MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResultInstruction","./VariableOutput"],function(h,e,g,d,c){return h([e],{OUTPUT_TYPE:"variable",CSS_TAG:"embeddedOutputsVariableElement",constructor:function(){},getOutputFromData:function(b){b=new c({data:b});return new g(d.ADD_OUTPUT,b)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/variable/VariableOutput":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutput MW/rtc/plugins/embeddedoutputs/outputhandlers/VariableUtilities mw-html-utils/HtmlUtils".split(" "),
function(h,e,g,d,c,b){return h([d],{_CSS_TAG:"embeddedOutputsVariableElement",type:"variable",constructor:function(a){this._data=a.data;this._domElement=this._createDomElement()},getCssTag:function(){return this._CSS_TAG},getDomElement:function(){return this._domElement},getSerializableData:function(){return this._data},getText:function(){return this._createNameAndValue()},getHTML:function(a,c){var d=b.treatHtmlLikeCommandWindow(this._data.name),e="";this._data.header&&(e=this._createHeader(this._data.header).textContent);
return"\x3cpre\x3e"+d+" \x3d "+e+(e?"\n":"")+this._data.value+"\x3c/pre\x3e"},_createDomElement:function(){var a={innerHTML:this._createNameValueAndHeader(this._data),className:"variableElement"};return g.create("div",a)},_createNameAndValue:function(){return b.treatHtmlLikeCommandWindow(this._data.name)+" \x3d "+this._data.value},_createNameValueAndHeader:function(){var a=b.treatHtmlLikeCommandWindow(this._data.name);if(this._data.header){var c=this._createHeader(this._data.header);return g.create("span",
{innerHTML:a+" \x3d "+c.outerHTML,className:"variableNameElement"}).outerHTML+"\n    "+this._data.value}return a+" \x3d "+this._data.value},_createHeader:function(a){return c.createHeader(b.treatHtmlLikeCommandWindow(a))}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/variable/export/VariableElement2HTMLProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/embeddedoutputs/outputhandlers/variable/export/VariableElement2HTML"],function(h,e,g){return h(e,
{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/variable/export/VariableElement2HTML":function(){define(["dojo/_base/declare","MW/rtc/plugins/export/html/HTMLExportUtilities","MW/rtc/plugins/export/OutputNodeExporterInterface"],function(h,e,g){return h([g],{_STYLES:["font-family","font-size"],constructor:function(){},getApplicableDomNodeClasses:function(){return["embeddedOutputsVariableElement"]},enter:function(d,
c,b){c="\x3cdiv class\x3d'variableElement' style\x3d'"+e.getStyleValuesForDomNode(c,this._STYLES)+"''\x3e"+c.textContent+"\x3c/div\x3e";d.addToBody(c);return!0}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/variablestring/VariableStringOutputHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./VariableStringOutputHandler"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.outputhandlerservice"]}},createInstance:function(d){var c=
new g;d.registerOutputPlugin(c);return c}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/variablestring/VariableStringOutputHandler":function(){define("dojo/_base/declare dojo/_base/lang MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerUtility MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutputHandler MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResult MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResultInstruction ./VariableStringOutput ./VariableStringOutputProperties".split(" "),
function(h,e,g,d,c,b,a,f){return h([d],{OUTPUT_TYPE:f.OUTPUT_TYPE,constructor:function(){},getOutputFromData:function(f){f=e.clone(f);this._cleanData(f);f=new a({data:f});return new c(b.ADD_OUTPUT,f)},_cleanData:function(a){var b=g.removeControlCharacters(a.value);a.value=g.processBackspaceCharacters(b)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/variablestring/VariableStringOutput":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutput MW/rtc/plugins/embeddedoutputs/outputhandlers/VariableUtilities MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerUtility mw-html-utils/HtmlUtils mw-string-utils/StringUtils mw-utils/Utils ./VariableStringOutputProperties".split(" "),
function(h,e,g,d,c,b,a,f,k,l){return h([d],{_ELLIPSIS:"...",type:l.OUTPUT_TYPE,constructor:function(a){this._data=a.data;this._domElement=this._createDomElement()},getCssTag:function(){return l.CSS_TAG},getDomElement:function(){return this._domElement},getSerializableData:function(){return this._data},getText:function(){var a=this._createText(this._data.value),b=-1!==a.search("\n")?"\n":"",a=g.create("div",{innerHTML:a});return this._createName(this._data.name)+b+a.textContent},getHTML:function(a,
b){var c="";this._data.header&&(c=this._createHeader(this._data.header).textContent);var d=f.normalizeNewlines(this._data.value),d=c||-1!==d.search("\n")?"\n":"";return"\x3cpre\x3e"+this._createName(this._data.name)+c+d+this._createText(this._data.value)+"\x3c/pre\x3e"},_createHeader:function(b){return c.createHeader(a.treatHtmlLikeCommandWindow(b))},_createName:function(b){return a.treatHtmlLikeCommandWindow(b)+" \x3d "},_createText:function(b){b=f.normalizeNewlines(b);return b=a.treatHtmlLikeCommandWindow(b)},
_createDomElement:function(){var a,b=g.create("div",{className:"textElement"}),c=this._createText(this._data.value),f;this._data.header?(f=this._createHeader(this._data.header),f=g.create("span",{innerHTML:this._data.name+" \x3d "+f.outerHTML,className:"variableNameElement"})):f=g.create("span",{innerHTML:this._data.name+" \x3d ",className:"variableNameElement"});f=g.create("div",{innerHTML:f.outerHTML},b,"last");var d=this._data.truncationInfo&&this._data.truncationInfo.wasTruncatedAtLineBreak;-1===
this._data.value.search("\n")&&!d?(this._data.header&&(f.innerHTML+="\n"),f.innerHTML+=c):a=g.create("div",{innerHTML:c},b,"last");this._addTruncationEllipses(this._data.truncationInfo,f,a);return b},_addTruncationEllipses:function(a,b,c){b&&(a&&a.wasTruncatedMidLine)&&(b.innerHTML+=this._ELLIPSIS);c&&(a&&a.wasTruncatedAtLineBreak)&&(a=g.create("div",{className:"verticalEllipsis"}),c.appendChild(a))}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/warning/WarningOutputHandlerProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./WarningOutputHandler"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.outputhandlerservice","rtc.diagnosticmessage"]}},createInstance:function(d,c){var b=new g(c);d.registerOutputPlugin(b);return b}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/warning/WarningOutputHandler":function(){define("dojo/_base/declare dojo/_base/lang MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutputHandler MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResult MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResultInstruction MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerUtility ./WarningOutput ./WarningOutputProperties".split(" "),
function(h,e,g,d,c,b,a,f){return h([g],{OUTPUT_TYPE:f.OUTPUT_TYPE,constructor:function(a){this._diagnosticMessageFormatter=a},getOutputFromData:function(b,f){b=e.clone(b);this._cleanData(b);var g=new a({text:b.text,truncationInfo:b.truncationInfo,diagnosticMessageFormatter:this._diagnosticMessageFormatter});return new d(c.ADD_OUTPUT,g)},_cleanData:function(a){var c=b.removeControlCharacters(a.text);a.text=b.processBackspaceCharacters(c)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/warning/WarningOutput":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/query mw-html-utils/HtmlUtils MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutput MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerUtility ./WarningOutputProperties".split(" "),
function(h,e,g,d,c,b,a,f){return h([b],{type:f.OUTPUT_TYPE,constructor:function(a){this._text=a.text;this._truncationInfo=a.truncationInfo;this._diagnosticMessageFormatter=a.diagnosticMessageFormatter;a=c.treatHtmlLikeCommandWindow(this._text);this._domElement=this._diagnosticMessageFormatter.createWarningMessageWithStack(a).getDomNode()},getCssTag:function(){return f.CSS_TAG},getDomElement:function(){return this._domElement},getSerializableData:function(){return{text:this._text,truncationInfo:this._truncationInfo}},
getText:function(){return a.getText(this._text)},getHTML:function(a,b){return this._domElement.innerHTML}})})},"MW/rtc/plugins/embeddedoutputs/view/EmbeddedOutputsAlertProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/embeddedoutputs/view/EmbeddedOutputsAlert","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{requires:function(){return{createInstance:["rtc.embeddedoutputs","rtc.alert.model","rtc.diagnosticmessage","rtc.embeddedoutputs.syntaxerrors"]}},createInstance:function(d,
c,b,a){return new e(d._outputsModel,c,b,a)}})})},"MW/rtc/plugins/embeddedoutputs/view/EmbeddedOutputsAlert":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class dojo/query MW/rtc/plugins/embeddedoutputs/model/RegionUtilities MW/rtc/plugins/language/matlab/alert/AlertTypeEnum mw-utils/Utils".split(" "),function(h,e,g,d,c,b,a,f){return h(null,{constructor:function(a,b,c,f){this._embeddedOutputsModel=a;this._alertModel=b;this._diagnosticMessageFormatter=c;this._syntaxErrorHandler=
f;this._aspectHandles=[g.after(this._embeddedOutputsModel,"onModelUpdated",e.hitch(this,"_updateAlerts")),g.after(this._syntaxErrorHandler,"onParseCompletedWithNoSyntaxErrors",e.hitch(this,"_handleEvaluationHasNoSyntaxErrors"),!0)];this._updateAlerts()},destroy:function(){this._aspectHandles.forEach(function(a){a.remove()});this._aspectHandles=[];this._alertModel.removeAllAlerts()},_updateAlerts:function(){var b=[],c=[],f=this._getAlertOutputsFromModel();f.forEach(function(d){var e=this._shouldBeStale(d,
f),g={type:"error"===d.type?a.ERROR:a.WARNING,line:d.codeLinePositions[0].getLineColumn().line,payload:{isStale:e},output:d};if(this._enableTooltips)if("error"===d.type){var h=this._diagnosticMessageFormatter.createErrorMessageWithStack(d.getHTML());g.payload.message=h.getDomNode().outerHTML;g.payload.isActive=!0}else h=this._diagnosticMessageFormatter.createWarningMessageWithStack(d.getHTML()),g.payload.message=h.getDomNode().outerHTML;(d=this._findMatchingAlert(d))&&!e?c.push(d):b.push(g)},this);
this._removeAllAlertsExceptFor(c);b.forEach(function(a){var b=this._alertModel.addAlert(a.type,a.line,a.payload);a.output.associatedAlertUid=b},this)},_shouldBeStale:function(a,b){var c=a.getDomElement(),c=d.contains(c,"typoFixApplied"),f=this._syntaxErrorHandler.isSyntaxError(a),e=this._syntaxErrorHandler.hasSyntaxError(b);return c||e&&!f},_getAlertOutputsFromModel:function(){return this._embeddedOutputsModel.getOutputs().filter(function(a){return"error"===a.type||"warning"===a.type})},_findMatchingAlert:function(a){var b=
null;this._alertModel.getAlerts().some(function(c){var f=a.associatedAlertUid===c.id;b=f?c:null;return f});return b},_removeAllAlertsExceptFor:function(a){var b=this._alertModel.getAlerts();a=f.differenceOfArrays(b,a).map(function(a){return a.id});0<a.length&&this._alertModel.removeAlerts(a)},_handleEvaluationHasNoSyntaxErrors:function(a){var b=a.regionNumbersToRun;if(void 0!==b&&0<b.length){a=b[0];var b=b[b.length-1],c=this._embeddedOutputsModel.getRegions();a=c[a];b=c[b];this._clearAllStale();this._setAlertsInRegionsAsStale(a,
b)}},_setAlertsInRegionsAsStale:function(a,c){this._alertModel.getAlerts().forEach(function(f){b.isPositionWithinRegionRange(f.position,a,c)&&this._alertModel.updateAlert(f.id,{payload:{isStale:!0}})},this)},_clearAllStale:function(){this._alertModel.getAlerts().forEach(function(a){var b={payload:{isStale:this._isAlertTypoFixed(a)}};this._alertModel.updateAlert(a.id,b)},this)},_isAlertTypoFixed:function(a){var b=!1;this._getAlertOutputsFromModel().some(function(c){if(c.codeLinePositions[0].line===
a.position.line)return c=c.getDomElement(),d.contains(c,"typoFixApplied")&&(b=!0),!0});return b},enableTooltips:function(a){this._enableTooltips=a}})})},"MW/rtc/plugins/language/matlab/alert/AlertTypeEnum":function(){define([],function(){return{ERROR:1,WARNING:2}})},"MW/rtc/plugins/embeddedoutputs/view/HitLineIndicatorProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/embeddedoutputs/view/HitLineIndicator"],function(h,e,g){return h(e,{requires:function(){return{createInstance:"rtc.embeddedoutputs.statehandler rtc.view.decoration rtc.internaldocument matlab.tokens rtc.embeddedoutputs.model rtc.embeddedoutputs.executiondatamanager rtc.linenumberservice".split(" ")}},
createInstance:function(d,c,b,a,f,e,h){return new g(d,c,b,a,f,e,h)}})})},"MW/rtc/plugins/embeddedoutputs/view/HitLineIndicator":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin","MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenUtilities"],function(h,e,g,d,c){return h(d,{_NON_HIT_CODE_CLASS:"notHitCode",constructor:function(b,a,c,d,h,n,p){this._stateHandler=b;this._decorator=a.createDecorator();this._internalDocument=c;this._tokenizerService=
d;this._embeddedOutputsModel=h;this._executionDataManager=n;this._lineNumberService=p;this.own(g.after(this._stateHandler,"stateChanged",e.hitch(this,"_handleEvalType"),!0));this._ignoreOpacityLines={};this._continuationLines={};this._functionFirstLines={}},_handleEvalType:function(b,a){b===this._stateHandler.CHANGE_TYPE_ENUM.EVAL_INITIALIZED?(this._preProcessTokens(),this._setCodeOpacity(),this._addExecutionDataListener(),this._documentListener||this._addDocumentListener()):b===this._stateHandler.CHANGE_TYPE_ENUM.EVAL_COMPLETE&&
(this._executionDataListener&&(a.didRunToCompletion&&this._postProcessColoring(),this._removeExecutionDataListener()),this._ignoreOpacityLines={},this._continuationLines={},this._functionFirstLines={})},_setCodeOpacity:function(){for(var b=this._lineNumberService.getNumberOfCodeLines(),a=1;a<=b;a++){var c=this._lineNumberService.getLineNumberFromCodeLineNumber(a)+1,c=this._internalDocument.getRangeForLine(c);this._decorator.addClass(c,[this._NON_HIT_CODE_CLASS])}this._decorator.applyChanges()},_handleDocumentChange:function(){this._executionDataListener&&
this._removeExecutionDataListener();this._removeDocumentListener();for(var b=this._lineNumberService.getNumberOfCodeLines(),a=1;a<=b;a++){var c=this._lineNumberService.getLineNumberFromCodeLineNumber(a)+1,c=this._internalDocument.getRangeForLine(c);this._decorator.clearRange(c)}this._decorator.applyChanges()},_preProcessTokens:function(){this._mostRecentContinuationStart=1;var b=this._tokenizerService.getTokensData().tokens,a;for(a in b)b.hasOwnProperty(a)&&(b[a].forEach(function(b){var c=parseInt(a)+
1;this._locateEndsAndFunctions(b,c);this._locateFunctionFirstLines(b,c);this._locateContinuations(c)},this),this._locateStandaloneComments(b,a))},_locateEndsAndFunctions:function(b,a){if(c.isTokenEndOfBlock(b)||c.isFunctionToken(b))this._ignoreOpacityLines[a]=!0},_locateFunctionFirstLines:function(b,a){c.isFunctionToken(b)&&(this._functionFirstLines[this._lineNumberService.getLineNumberFromCodeLineNumber(a+1)]=a)},_locateContinuations:function(b){var a=this._tokenizerService.getLexStateForLine(b);
this._tokenizerService.isLineContinuation(a)&&(this._continuationLines.hasOwnProperty(b)||(this._mostRecentContinuationStart=b),this._continuationLines[b+1]=this._mostRecentContinuationStart)},_locateStandaloneComments:function(b,a){var c=b[a][0];"%"===c.getValue().trim().substring(0,1)&&(this._ignoreOpacityLines[c.getPositionInfo().line+1]=!0)},_handleLineData:function(b,a){for(var c=0;c<a.length;c++){var d=this._lineNumberService.getLineNumberFromCodeLineNumber(c+1)+1,e=this._internalDocument.getRangeForLine(d);
0<a[c]?(this._decorator.clearRange(e),this._handleFunctionHeaders(d)):(this._handleContinuations(e,a,d),this._handleEndsAndComments(e,a,d,b))}this._decorator.applyChanges()},_handleContinuations:function(b,a,c){this._continuationLines.hasOwnProperty(c)&&0<a[this._lineNumberService.getCodeLineNumberFromLineNumber(this._continuationLines[c]-1)-1]&&this._decorator.clearRange(b)},_handleFunctionHeaders:function(b){this._functionFirstLines.hasOwnProperty(b)&&(b=this._internalDocument.getRangeForLine(this._functionFirstLines[b]),
this._decorator.clearRange(b))},_handleEndsAndComments:function(b,a,c,d){(a=this._embeddedOutputsModel.getRegions()[d])&&c<=a.code.regionPositions[0].line&&this._ignoreOpacityLines.hasOwnProperty(c)&&this._decorator.clearRange(b)},_postProcessColoring:function(){Object.keys(this._ignoreOpacityLines).forEach(function(b){b=this._internalDocument.getRangeForLine(parseInt(b));this._decorator.clearRange(b)},this);this._decorator.applyChanges()},_addDocumentListener:function(){this._documentListener=g.after(this._internalDocument,
"onDocumentChanged",e.hitch(this,"_handleDocumentChange"),!0)},_removeDocumentListener:function(){this._documentListener.remove();this._documentListener=null},_addExecutionDataListener:function(){this._executionDataListener=g.after(this._executionDataManager,"onDataUpdate",e.hitch(this,"_handleLineData"),!0)},_removeExecutionDataListener:function(){this._executionDataListener.remove();this._executionDataListener=null},destroy:function(){this._removeExecutionDataListener();this._removeDocumentListener()}})})},
"MW/rtc/plugins/embeddedoutputs/ExecutionManagerViewServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./ExecutionManagerViewService"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.embeddedoutputs.executionmanager","rtc.embeddedoutputs.syntaxerrors","rtc.embeddedoutputs.statehandler"]}},createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/plugins/embeddedoutputs/ExecutionManagerViewService":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin","MW/rtc/plugins/debug/DebugServicesFactory"],function(h,e,g,d,c){return h(d,{_NEXT_REQUEST_TIMEOUT:500,constructor:function(b,a,f){this._executionManager=b;this._stateHandler=f;b=c.getInstance();this.own(g.after(b,"onDBStop",e.hitch(this,"_handleImmediateActions")));this.own(g.after(a,"onSyntaxError",e.hitch(this,"_handleImmediateActions")));this._isSilentExecution=!1;this._callbackQueue=[]},executeViewAction:function(b){this._isSilentExecution?
this._callbackQueue.push(b):b()},executeSectionWithVisualDelay:function(b,a,c,d,e){this._setTimeOuts(d);this._executionManager.executeSection(b,a,c,e)},executeAllSectionsWithVisualDelay:function(b,a,c){this._setTimeOuts(a);this._executionManager.executeAllSections(b,c)},_setTimeOuts:function(b){this._setNextRequestTimeout();this._setLiveEvalTimeout(b)},_setNextRequestTimeout:function(){this._nextRequestTimeout&&(window.clearTimeout(this._nextRequestTimeout),this._nextRequestTimeout=null);this._nextRequestTimeout=
window.setTimeout(e.hitch(this,function(){this._executeCallbacksAndClearTimer()}),this._NEXT_REQUEST_TIMEOUT)},_executeCallbacksAndClearTimer:function(){this._executeCallbacksIfRunning();this._clearTimer()},_clearTimer:function(){this._liveEvalTimeout&&(window.clearTimeout(this._liveEvalTimeout),this._liveEvalTimeout=null)},_setLiveEvalTimeout:function(b){this._isSilentExecution=!0;this._clearTimer();this._liveEvalTimeout=window.setTimeout(e.hitch(this,function(){this._executeCallbacksIfRunning()}),
b)},_handleImmediateActions:function(){this._executeCallbacks();this._clearState()},_executeCallbacksIfRunning:function(){this._stateHandler.isRunning()&&this._executeCallbacks();this._clearState()},_executeCallbacks:function(){this._isSilentExecution&&this._callbackQueue.forEach(function(b){b()},this)},_clearState:function(){this._isSilentExecution=!1;this._callbackQueue=[]},hasPendingRequests:function(){return this._executionManager.hasPendingRequests()}})})},"MW/rtc/plugins/embeddedoutputs/triggers/TriggersProvider":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/embeddedoutputs/triggers/Triggers","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{requires:function(){return{createInstance:"rtc.actionservice rtc.embeddedoutputs.statehandler rtc.cursor rtc.embeddedoutputs.executionmanager rtc.code.codechange rtc.keyhandler rtc.code.sections.model".split(" ")}},createInstance:function(d,c,b,a,f,g,h){return new e(d,c,b,a,f,g,h)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/embeddedoutputs/triggers/Triggers":function(){define("dojo/_base/declare dojo/_base/lang MW/rtc/plugins/debug/DebugServicesFactory ./EvalOnLineChangeTrigger ./LiveEvalTrigger ./ManualTrigger".split(" "),
function(h,e,g,d,c,b){return h(null,{_ACTION_STATES:{AUTO:"auto",MANUAL:"manual"},constructor:function(a,b,c,d,e,g,h){this._actionService=a;this._stateHandler=b;this._cursor=c;this._executionManager=d;this._codeChangeService=e;this._keyHandler=g;this._sectionModel=h;this.enableTriggers()},enableTriggers:function(){if(!this._enabled){var a=[{id:"rtc_embedded_outputs_auto",enabled:!0,selected:!1,callback:e.hitch(this,"setEvaluationState",this._ACTION_STATES.AUTO),isEvalOnLineChange:e.hitch(this,"_isEvalOnLineChange")},
{id:"rtc_embedded_outputs_manual",enabled:!0,selected:!1,callback:e.hitch(this,"setEvaluationState",this._ACTION_STATES.MANUAL)}];this._actionService.loadActions(a);this._liveEvalTrigger=new c(this._codeChangeService,this._executionManager);this._autoTrigger=this._evalOnLineChangeTrigger=new d(this._cursor,this._stateHandler,this._codeChangeService,this._executionManager);this.setEvaluationState(this._ACTION_STATES.MANUAL);this._manualTrigger=new b(this._cursor,this._actionService,this._keyHandler,
this._sectionModel,this._executionManager,g.getInstance());this._enabled=!0}},disableTriggers:function(){this._enabled&&(this._manualTrigger.destroy(),this._manualTrigger=null,this._liveEvalTrigger.destroy(),this._liveEvalTrigger=null,this._evalOnLineChangeTrigger.destroy(),this._evalOnLineChangeTrigger=null,this._actionService.removeAction("rtc_embedded_outputs_auto"),this._actionService.removeAction("rtc_embedded_outputs_manual"),this._enabled=!1)},_switchAutoEval:function(){this._autoTrigger.disable();
this._isEvalOnLineChange()?this._autoTrigger=this._liveEvalTrigger:this._autoTrigger=this._evalOnLineChangeTrigger;this._autoTrigger.enable()},_isEvalOnLineChange:function(){return this._autoTrigger===this._evalOnLineChangeTrigger},_updateActionStates:function(a){this._actionService.updateAction("rtc_embedded_outputs_auto",{selected:a});this._actionService.updateAction("rtc_embedded_outputs_manual",{selected:!a})},setEvaluationState:function(a){this._currentActionState=a;(a=a===this._ACTION_STATES.AUTO)?
this._autoTrigger.enable():this._autoTrigger.disable();this._updateActionStates(a)},getEvaluationState:function(){return this._currentActionState},destroy:function(){this.disableTriggers()}})})},"MW/rtc/plugins/embeddedoutputs/triggers/EvalOnLineChangeTrigger":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect"],function(h,e,g){return h(null,{constructor:function(d,c,b,a){this._cursor=d;this._stateHandler=c;this._codeChangeService=b;this._executionManager=a;this._aspectHandles=
[];this._onCodeRegionChangeHandle=null;this._priorCursorLine=1;this._isDirty=!1;this._stateHandler.attachListener(this._stateHandler.CHANGE_TYPE_ENUM.EVAL_INITIALIZED,e.hitch(this,"_clean"));this.disable()},destroy:function(){this.disable()},enable:function(){this._onCodeRegionChangeHandle||(this._onCodeRegionChangeHandle=g.after(this._codeChangeService,"onCodeChanged",e.hitch(this,"_setDirty")));this._onCursorChangeHandle||(this._onCursorChangeHandle=g.after(this._cursor,"onChange",e.hitch(this,
"_runIfDirtyAndLineChange")))},_clean:function(){this._isDirty=!1},_runIfDirtyAndLineChange:function(){var d=this._cursor.getLineColumn().line,c=d!==this._priorCursorLine;this._priorCursorLine=d;this._isDirty&&c&&this._evalNow()},disable:function(){this._onCodeRegionChangeHandle&&(this._onCodeRegionChangeHandle.remove(),this._onCodeRegionChangeHandle=null);this._onCursorChangeHandle&&(this._onCursorChangeHandle.remove(),this._onCursorChangeHandle=null);this._executionManager.interrupt()},_setDirty:function(){this._isDirty=
!0},_evalNow:function(){this._isDirty=!1;this._executionManager.executeAllSections()}})})},"MW/rtc/plugins/embeddedoutputs/triggers/LiveEvalTrigger":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect"],function(h,e,g){return h(null,{_LIVE_EVAL_DELAY:200,constructor:function(d,c){this._codeChangeService=d;this._executionManager=c;this._aspectHandles=[];this._fullEval=!1;this._liveAspectHandle=null},destroy:function(){this.disable()},enable:function(){this._liveAspectHandle||(this._liveAspectHandle=
g.after(this._codeChangeService,"onCodeChanged",e.hitch(this,"_resetTimer")));this._executionManager.executeAllSections()},disable:function(){this._liveAspectHandle&&(this._liveAspectHandle.remove(),this._liveAspectHandle=null);clearTimeout(this._updateTimer);this._executionManager.interrupt()},_resetTimer:function(){this._updateTimer&&(clearTimeout(this._updateTimer),this._updateTimer=null);this._updateTimer=setTimeout(e.hitch(this,"_evalNow"),this._LIVE_EVAL_DELAY)},_evalNow:function(){clearTimeout(this._updateTimer);
this._updateTimer=null;this._executionManager.executeAllSections()}})})},"MW/rtc/plugins/embeddedoutputs/triggers/ManualTrigger":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/i18n!l10n/nls/actions dojo/sniff dijit/Destroyable MW/rtc/plugins/language/matlab/functions/FunctionAttributeConstants".split(" "),function(h,e,g,d,c,b,a){return h(b,{constructor:function(a,b,c,h,p,m){this._actionService=b;this._cursor=a;this._keyHandler=c;this._sectionModel=h;this._executionManager=
p;this._debugServices=m;this._actions=[{id:"rtc_refresh_outputs",enabled:!0,callback:e.hitch(p,"executeAllSections")},{id:"rtc_refresh_all_outputs",enabled:!0,key:"f5",platformKey:{mac:"meta_alt_r"},callback:e.hitch(this,"_runAll")},{id:"rtc_run_section",enabled:!0,contextMenuGroup:"CodeSections",text:d.runSectionLabel,key:"ctrl_enter",platformKey:{mac:"meta_enter"},callback:e.hitch(this,"_runSection")},{id:"rtc_run_section_advance",enabled:!0,text:d.runSectionAndAdvanceLabel,key:"ctrl_shift_enter",
platformKey:{mac:"meta_shift_enter"},callback:e.hitch(this,"_runSectionAdvance")},{id:"rtc_run_section_end",enabled:!0,text:d.runSectionToEndLabel,callback:e.hitch(this,"_runSectionEnd")}];b.loadActions(this._actions);this._addOtherKeyBindings();this.own(g.after(this._sectionModel,"currentSectionChanged",e.hitch(this,"_updateActionState")));this.own(g.after(this._sectionModel,"onAttributesUpdated",e.hitch(this,"_updateActionState")));this.own(g.after(this._actionService,"onActionChange",e.hitch(this,
function(a){"rtc_embedded_outputs_manual"===a.id&&"selected"===a.key&&this._updateActionState()}),!0));this.own(g.after(this._debugServices,"onDebugModeChanged",e.hitch(this,"_updateActionState")));this._updateActionState()},_runSectionEnd:function(){var a=this._actionService.getAction("rtc_run_section_end");a&&a.enabled&&this._executionManager.executeCurrentSection(!0,!1)},_runSection:function(){var a=this._actionService.getAction("rtc_run_section");a&&a.enabled&&this._executionManager.executeCurrentSection(!1,
!1)},_runSectionAdvance:function(){var a=this._actionService.getAction("rtc_run_section");a&&a.enabled&&(this._executionManager.executeCurrentSection(!1,!0),this._actionService.executeAction("rtc_navigate_next_section"))},_runAll:function(){var a=this._actionService.getAction("rtc_refresh_all_outputs");a&&a.enabled&&this._executionManager.executeAllSections()},_updateActionState:function(){var a=this._actionService.getAction("rtc_embedded_outputs_manual"),a=a&&a.selected;this._isInLocalFunctionSection()&&
(a=!1);this._actionService.updateAction("rtc_run_section",{enabled:a});this._actionService.updateAction("rtc_run_section_advance",{enabled:a});this._actionService.updateAction("rtc_run_section_end",{enabled:a});this._actionService.updateAction("rtc_refresh_all_outputs",{enabled:!this._debugServices.isDebugging})},_isInLocalFunctionSection:function(){var b=this._sectionModel.getCurrentSection();return b&&b[a.LOCAL_FUNCTION_ATTRIBUTE]&&0<b[a.LOCAL_FUNCTION_ATTRIBUTE].length},_addOtherKeyBindings:function(){c("mac")&&
this._keyHandler.addBindings([{key:"f5",action:"rtc_refresh_all_outputs"}])},_removeOtherKeyBindings:function(){c("mac")&&this._keyHandler.removeBindings("f5")},destroy:function(){this.inherited(arguments);this._removeOtherKeyBindings();this._actions.forEach(function(a){this._actionService.updateAction(a.id,{enabled:!1});this._actionService.removeAction(a.id)},this)}})})},"MW/rtc/plugins/language/matlab/functions/FunctionAttributeConstants":function(){define([],function(){return{LOCAL_FUNCTION_ATTRIBUTE:"localFunctions",
TOP_LEVEL_FUNCTION_ATTRIBUTE:"topLevelFunctions",FUNCTION_ATTRIBUTE:"functions"}})},"MW/rtc/plugins/embeddedoutputs/triggers/InterruptActionProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/embeddedoutputs/triggers/InterruptAction","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{requires:function(){return{createInstance:["rtc.actionservice","rtc.cursorcontroller","rtc.embeddedoutputs.executionmanager"]}},createInstance:function(d,c,b){return new e(d,c,b)},destroyInstance:function(d){d.destroy()}})})},
"MW/rtc/plugins/embeddedoutputs/triggers/InterruptAction":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(h,e){return h(null,{constructor:function(g,d,c){this._actionService=g;this._cursorController=d;this._executionManager=c;this._actions=[{id:"rtc_interrupt_embedded_outputs",enabled:!0,key:"ctrl_c",callback:e.hitch(this,"_interruptCallback")}];this._actionService.loadActions(this._actions)},_interruptCallback:function(){if(this._cursorController.hasSelection())return!1;this._executionManager.interrupt();
return!0},destroy:function(){this._actionService.removeAction("rtc_interrupt_embedded_outputs")}})})},"MW/rtc/plugins/export/ExportNotifierProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/export/ExportNotifier","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{requires:function(){return{createInstance:[]}},createInstance:function(){return new e}})})},"MW/rtc/plugins/export/ExportNotifier":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,
e){return h(e,{notifyExportStart:function(){this.onExportStart()},onExportStart:function(){}})})},"MW/rtc/plugins/folding/FoldingActionsProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./FoldingActions"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.actionservice","rtc.cursorcontroller","rtc.folding.foldingcontroller","rtc.folding.foldingmodel"]}},createInstance:function(d,c,b,a){return new g(d,c,b,a)}})})},"MW/rtc/plugins/folding/FoldingActions":function(){define(["dojo/_base/declare",
"dojo/aspect","MW/rtc/abstract/AbstractPlugin"],function(h,e,g){return h(g,{_FOLD_CURRENT_BLOCK:"rtc_fold_current_block",_UNFOLD_CURRENT_BLOCK:"rtc_unfold_current_block",_FOLD_ALL:"rtc_fold_all",_UNFOLD_ALL:"rtc_unfold_all",constructor:function(d,c,b,a){this._actionService=d;this._cursorController=c;this._foldingController=b;this._foldingModel=a;this._actionService.loadActions(this._getActions());this.own(e.after(this._cursorController,"onUpdate",this._updateActions.bind(this)))},_getActions:function(){return[{id:this._FOLD_CURRENT_BLOCK,
enabled:!0,key:"ctrl_.",callback:this._actionEnabledWrapper.bind(this,this._FOLD_CURRENT_BLOCK,this._collapseCurrentBlock.bind(this))},{id:this._UNFOLD_CURRENT_BLOCK,enabled:!0,key:"ctrl_shift_.",callback:this._actionEnabledWrapper.bind(this,this._UNFOLD_CURRENT_BLOCK,this._expandCurrentBlock.bind(this))},{id:this._FOLD_ALL,enabled:!0,key:"ctrl_,",callback:this._actionEnabledWrapper.bind(this,this._FOLD_ALL,this._collapseAll.bind(this))},{id:this._UNFOLD_ALL,enabled:!0,key:"ctrl_shift_,",callback:this._actionEnabledWrapper.bind(this,
this._UNFOLD_ALL,this._expandAll.bind(this))}]},_actionEnabledWrapper:function(d,c){return!this._actionService.getAction(d).enabled?!1:c()},_updateActions:function(){var d=this._cursorController.hasMultipleCursors();this._actionService.updateAction(this._FOLD_CURRENT_BLOCK,{enabled:!d});this._actionService.updateAction(this._UNFOLD_CURRENT_BLOCK,{enabled:!d})},_collapseCurrentBlock:function(){var d=this._getCandidateAtCursor();if(!d)return!1;this._foldingController.fold(d);return!0},_expandCurrentBlock:function(){var d=
this._getCandidateAtCursor();if(!d)return!1;this._foldingController.unfold(d);return!0},_getCandidateAtCursor:function(){var d=this._cursorController.getCursors()[0].getCursorPosition();return this._foldingModel.getFoldCandidateForDocumentLine(d.getLine()-1)},_collapseAll:function(){return this._foldingController.foldAll()},_expandAll:function(){return this._foldingController.unfoldAll()}})})},"MW/rtc/plugins/folding/FoldingControllerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"./FoldingController"],function(h,e,g){return h(e,{requires:function(){return{createInstance:"rtc.cursorcontroller rtc.internaldocument rtc.view rtc.folding.foldingmodel rtc.view.hidden.hiddennodeservice rtc.document".split(" ")}},createInstance:function(d,c,b,a,f,e){return new g(d,c,b,a,f,e)}})})},"MW/rtc/plugins/folding/FoldingController":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/browsersupport/BrowserSupportUtilities MW/rtc/model/events/nodechange/NodeChangeEventTypes MW/rtc/model/PositionUtilities".split(" "),
function(h,e,g,d,c,b,a){return h(d,{_ONSCREEN_LOWER_BOUND:5,_ONSCREEN_UPPER_BOUND:50,_SCROLL_TO_PERCENT:10,constructor:function(a,b,c,d,e,h){this._cursorController=a;this._internalDocument=b;this._view=c;this._foldingModel=d;this._hiddenNodeService=e;this.own(g.after(this._cursorController,"onUpdate",this._handleCursorChanged.bind(this)));this.own(g.after(this._internalDocument,"onNodeChange",this._queueInsertedNodes.bind(this),!0));this.own(g.after(this._internalDocument,"onDocumentChanged",this._flushInsertedNodes.bind(this),
!0));this.own(g.after(h,"onDirectedDeletion",this._handleDeletion.bind(this),!0));this.own(g.after(this._foldingModel,"onCandidatesRemoved",this._handleCandidatesRemoved.bind(this),!0));this._currentlyFolded=[];this._queuedInsertedNodes=[]},fold:function(a){this._foldCandidates([a])},foldAll:function(){var a=this._foldingModel.getAllFoldCandidates();return this._foldCandidates(a)},_foldCandidates:function(a){var b=!1,d=c.createSet(),e;a.forEach(function(a){a.isFolded()||(this._setFolded(a),b=!0,this._addNodesForCandidate(a,
d),!e&&this._isCursorInsideFoldCandidate(a)&&(e=a.getRange().getStartPosition()))},this);0<d.size&&this._hiddenNodeService.hideAll(d);e&&this._setPositionAndScrollIntoView(e);this.onCandidatesFolded(a);return b},_setPositionAndScrollIntoView:function(a){this._cursorController.suspendUpdates();this._cursorController.setPositions([a]);this._cursorController.emitUpdate(!0,!1);this._cursorController.activateUpdates()},onCandidatesFolded:function(a){},unfold:function(a){a=this._foldingModel.getCandidateLineage(a);
this._unfoldCandidates(a,!1)},unfoldAll:function(){var a=this._foldingModel.getAllFoldCandidates();return this._unfoldCandidates(a,!0)},_unfoldCandidates:function(a,b){var d=!1,e=c.createSet();a.forEach(function(a){a.isFolded()&&(this._setUnfolded(a),d=!0,this._addNodesForCandidate(a,e),b||this._getChildCandidates(a,this._isCandidateFolded).forEach(function(a){this._removeNodesForCandidate(a,e)},this))},this);0<e.size&&this._hiddenNodeService.showAll(e);this.onCandidatesUnfolded(a);return d},onCandidatesUnfolded:function(a){},
_isCandidateFolded:function(a){return a.isFolded()},_setUnfolded:function(a){a.setUnfolded();this._currentlyFolded.splice(this._currentlyFolded.indexOf(a),1)},_setFolded:function(a){a.setFolded();this._currentlyFolded.push(a)},_addNodesForCandidate:function(a,b){for(var c=a.getFoldableNodes(),d=0;d<c.length;d+=1)b.add(c[d])},_removeNodesForCandidate:function(a,b){for(var c=a.getFoldableNodes(),d=0;d<c.length;d+=1)b.delete(c[d])},toggle:function(a){a.isFolded()?this.unfold(a):this.fold(a)},_handleCandidatesRemoved:function(a){a.forEach(function(a){a.isFolded()&&
this._setUnfolded(a)},this)},_handleCursorChanged:function(){var a=null;this._currentlyFolded.some(function(b){return this._isCursorInsideFoldCandidate(b)?(a=b,!0):!1},this);a&&(this.unfold(a),this._scrollCandidateIntoView(a))},_handleDeletion:function(a,b){var c=[];0<a&&b?c=this._currentlyFolded.filter(function(a){return b.endPosition.isEqualTo(a.getHiddenRange().getStartPosition())},this):0>a&&b&&(c=this._currentlyFolded.filter(function(a){return b.startPosition.isEqualTo(a.getHiddenRange().getEndPosition())},
this));if(0<c.length)return this.unfold(c[0]),!0},_queueInsertedNodes:function(a){a.type===b.INSERT_NODE&&this._queuedInsertedNodes.push(a.newNode)},_flushInsertedNodes:function(a){a.some(function(a){return a.isUndoRedo})?this._handleUndoRedoInsertion():this._handleInsertion();this._queuedInsertedNodes=[]},_handleInsertion:function(){var a=this._currentlyFolded.filter(function(a){return this._queuedInsertedNodes.some(function(b){return a.containsNode(b)})},this);0<a.length&&this._refoldCandidates(a)},
_handleUndoRedoInsertion:function(){var a=this._queuedInsertedNodes.filter(function(a){return!this._currentlyFolded.some(function(b){return b.containsNode(a)})},this);this._hiddenNodeService.showAll(a)},_refoldCandidates:function(a){var b=c.createSet();a.forEach(function(a){this._addNodesForCandidate(a,b)},this);0<b.size&&this._hiddenNodeService.hideAll(b)},_isCursorInsideFoldCandidate:function(b){var c=b.getHiddenRange();return this._cursorController.getCursors().some(function(b){return a.isPositionInRange(b.getCursorPosition(),
c)},this)},_getChildCandidates:function(a,b){var c=a.getStartLine(),d=a.getEndLine();return this._foldingModel.getAllFoldCandidates().filter(function(e){if(a!==e&&(!b||b(e)))return e.getStartLine()>=c&&e.getEndLine()<=d})},_scrollCandidateIntoView:function(a){a=a.getStartLine();!this._isLineInVisualBounds(a)&&!this._cursorController.isActionInProgress()&&this._view.scrollLineToPercent(a+1,this._SCROLL_TO_PERCENT)},_isLineInVisualBounds:function(a){a=this._view.getLinePercentScrolled(a+1,!0);return a>
this._ONSCREEN_LOWER_BOUND&&a<this._ONSCREEN_UPPER_BOUND}})})},"MW/rtc/plugins/folding/FoldingModelProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./FoldingModel"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/folding/FoldingModel":function(){define(["dojo/_base/declare","mw-utils/Utils","MW/rtc/abstract/AbstractCachedModelQueryService"],function(h,
e,g){return h(g,{constructor:function(d){this._foldCandidates=[];this._lookupCache=null},addFoldCandidates:function(d){d.forEach(function(c){this._foldCandidates.push(c)},this);this._lookupCache=null;this.onCandidatesAdded(d)},removeFoldCandidates:function(d){d.forEach(function(c){c.destroy();this._foldCandidates.splice(this._foldCandidates.indexOf(c),1)},this);this._lookupCache=null;this.onCandidatesRemoved(d)},onCandidatesAdded:function(d){},onCandidatesRemoved:function(d){},getFoldCandidateForDocumentLine:function(d){this._ensureBuilt();
for(var c=null,b=d;!c&&-1!==b;){var a=this._lookupCache[b];this._isLineNumberInFoldCandidate(d,a)&&(c=a);b-=1}return c},getFoldCandidatesForDocumentLines:function(d){var c=[];d.forEach(function(b){c.push(this.getFoldCandidateForDocumentLine(b))},this);c=c.filter(function(b){return null!==b});return e.unique(c)},getAllFoldCandidates:function(){return this._foldCandidates},getCandidateLineage:function(d){for(var c=[];d;)c.push(d),d=this.getOuterFoldCandidate(d);return c},getOuterFoldCandidate:function(d){d=
d.getStartLine();for(var c=null,b=d-1;0<=b;b--){var a=this.getFoldCandidateForDocumentLine(b);if(this._isLineNumberInFoldCandidate(d,a)){c=a;break}a&&(b=a.getStartLine())}return c},_ensureBuilt:function(){this.inherited(arguments);this._lookupCache||this._build()},_build:function(){this._lookupCache=[];this._foldCandidates.forEach(function(d){var c=d.getStartLine();this._lookupCache[c]||(this._lookupCache[c]=d)},this)},_isLineNumberInFoldCandidate:function(d,c){return!c?!1:d>=c.getStartLine()&&d<=
c.getEndLine()}})})},"MW/rtc/plugins/export/html/HTMLExporterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/export/html/HTMLExporter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.export.htmlwriters","rtc.internaldocument"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/plugins/export/html/HTMLExporter":function(){define("dojo/_base/declare dojo/_base/lang dojo/promise/all MW/rtc/model/io/MDocumentWriter MW/rtc/nodes/Node MW/rtc/plugins/export/AbstractExporter ./HTMLExportUtilities".split(" "),
function(h,e,g,d,c,b,a){return h([b],{_DOCTYPE:'\x3c!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"\x3e\n',_CONTENTDIV_CLASS:"rtcContent",constructor:function(a,b){this._internalDocument=b},_defineExportDocument:function(){return{addToBody:e.hitch(this,"_addToBody"),addToHead:e.hitch(this,"_addToHead"),addCSSToStyle:e.hitch(this,"_addStyleToCss"),getAttributesForStyle:e.hitch(this,"_getAttributesForStyle")}},reset:function(){this._contentParts=[];this._headParts=[];this._styleParts=
[];this._contentFragment="";this._numOfStyles=0;this._styles={}},_addToBody:function(a){"string"===typeof a?this._contentFragment+=a:(this._contentParts.push(this._contentFragment),this._contentFragment="",this._contentParts.push(a))},_addToHead:function(a){this._headParts.push(a)},_addStyleToCss:function(a){this._styleParts.push(a.trim())},_getAttributesForStyle:function(b,d){var e=b instanceof c?a.getDomNode(b):b,e=a.getStyleValuesForDomNode(e,d);return" class \x3d '"+this._getClassForStyle(e)+
"'"},_processResults:function(a){this._contentParts.push(this._contentFragment);var b=g(this._contentParts).then(function(a){return"\x3cdiv class \x3d "+this._CONTENTDIV_CLASS+"\x3e"+a.join("")+"\x3c/div\x3e"}.bind(this));this._addToHead(this._buildStyle(this._styleParts));var c=g(this._headParts).then(function(b){return this._buildHead(b,a)}.bind(this));return g({head:c,content:b}).then(function(b){return this._buildFullHTML(b,a)}.bind(this))},_buildStyle:function(a,b){return'\x3cstyle type\x3d"text/css"\x3e.'+
this._CONTENTDIV_CLASS+" { padding: 30px; } "+this._styleParts.join("\n")+"\x3c/style\x3e"},_buildHead:function(a,b){var c;c='\x3chead\x3e\x3cmeta http-equiv\x3d"Content-Type" content\x3d"text/html; charset\x3dutf-8"\x3e\x3cmeta http-equiv\x3d"X-UA-Compatible" content\x3d"IE\x3dedge,IE\x3d9,chrome\x3d1"\x3e';c+='\x3cmeta name\x3d"generator" content\x3d"MATLAB';b.MATLABRelease&&(c+=" "+b.MATLABRelease);c+='"\x3e';c+=a.join("");return c+="\x3c/head\x3e"},_buildFullHTML:function(a,b){return this._DOCTYPE+
"\x3chtml\x3e"+a.head+"\x3cbody\x3e"+a.content+this._getMATLABCodeAsComment()},_getClassForStyle:function(a){var b,c;for(c in this._styles)this._styles[c]===a&&(b=c);b||(b="S"+this._numOfStyles,this._numOfStyles+=1,this._styles[b]=a,this._addStyleToCss("."+b+" { "+a+" }\n"));return b},_getMATLABCodeAsComment:function(){var a="\x3cbr\x3e",b=d.write(this._internalDocument);b&&(a+="\n\x3c!-- \n##### SOURCE BEGIN #####\n",a+=b.replace(/--/g,"REPLACE_WITH_DASH_DASH"),a+="\n##### SOURCE END #####\n",a+=
"--\x3e");return a}})})},"MW/rtc/plugins/export/AbstractExporter":function(){define(["dojo/_base/declare","mw-log/Log","MW/rtc/core/NodeMap","MW/rtc/model/io/NodeVisitorInterface","MW/rtc/model/SelectionTreeWalker"],function(h,e,g,d,c){return h([d],{constructor:function(b){this._nodeExporters=new g(b);this._treeWalker=new c(this);this._exportDocument=this._defineExportDocument();this._results=[];this._context={}},_defineExportDocument:function(){e.assert(!1,"Subclasses must define an exportDocument.")},
_reset:function(){this.reset();this._nodeExporters.forEach(function(b){b.reset()})},reset:function(){},_finalize:function(){this._nodeExporters.forEach(function(b){b.finalize(this._exportDocument)},this);this.finalize()},finalize:function(){},_processResults:function(b){e.assert(!1,"Subclasses must overwrite _processResults.")},"export":function(b){this._context=b;this._reset();this._treeWalker.traverseRange(b.range,!0);this._finalize();return this._processResults(this._context)},enterInnerNode:function(b){var a=
this._nodeExporters.get(b);return!a?!1:a.enter(this._exportDocument,b,this._context)},leaveInnerNode:function(b){var a=this._nodeExporters.get(b);a&&a.leave(this._exportDocument,b,this._context)},visitLeafNode:function(b,a,c){var d=this._nodeExporters.get(b);d&&d.visit(this._exportDocument,b,a,c,this._context)}})})},"MW/rtc/plugins/export/html/LineNode2HTMLProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/export/html/LineNode2HTML"],function(h,
e,g){return h(e,{requires:function(){return{createInstance:["rtc.embeddedoutputs","rtc.export.htmloutputwriters"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/plugins/export/html/LineNode2HTML":function(){define("dojo/_base/declare dojo/dom-class MW/rtc/nodes/inner/LineNode MW/rtc/plugins/export/html/BaseInnerNode2HTML MW/rtc/plugins/export/html/HTMLExportUtilities MW/rtc/plugins/export/OutputExporter".split(" "),function(h,e,g,d,c,b){return h([d],{_STYLES:"border-left border-right border-top border-bottom border-radius padding line-height min-height white-space color font-family font-size".split(" "),
_CODEBLOCK_CSS:".CodeBlock { background-color: #F7F7F7; margin: 10px 0 10px 0;}",constructor:function(a,c){this._embeddedOutputsView=a.getEmbeddedOutputsView();this._outputexporter=new b(c)},getApplicableNodeClass:function(){return g},reset:function(){this._outputexporter.reset();this._firstVisit=!0},enter:function(a,b,c){var d=this._getOutputParagraph(b);if(b.groupingType){var e=b.previousSibling();e&&e instanceof g||(a.addToBody('\x3cdiv class\x3d"CodeBlock"\x3e'),this._firstVisit&&(a.addCSSToStyle(this._CODEBLOCK_CSS),
this._firstVisit=!1));d?a.addToBody('\x3cdiv class\x3d"inlineWrapper outputs"\x3e'):a.addToBody('\x3cdiv class\x3d"inlineWrapper"\x3e')}this.inherited(arguments)},leave:function(a,b,c){this.inherited(arguments);var d=this._getOutputParagraph(b);d&&this._outputexporter.export(d,a,c);b.groupingType&&(a.addToBody("\x3c/div\x3e"),(d=b.nextSibling())&&d instanceof g||a.addToBody("\x3c/div\x3e"))},_getOutputParagraph:function(a){return(a=a.box.nextSibling)&&e.contains(a,"outputParagraph")?a:null}})})},
"MW/rtc/plugins/export/OutputExporter":function(){define(["dojo/_base/array","dojo/_base/declare","mw-log/Log"],function(h,e,g){return e([],{_TEXTNODE_NAME:"#text",constructor:function(d){this._nodeExporters={};d.forEach(function(c){this._registerExportPlugin(c)},this)},_registerExportPlugin:function(d){d.getApplicableDomNodeClasses().forEach(function(c){g.assert(!this._nodeExporters[c],"Writer for type '"+c+"'' already exists.");this._nodeExporters[c]=d},this)},_getWriterForNode:function(d){var c=
null;h.some(d.classList,function(b){return c=this._nodeExporters[b]},this);return c},reset:function(){for(var d in this._nodeExporters)this._nodeExporters.hasOwnProperty(d)&&this._nodeExporters[d].reset()},"export":function(d,c,b){this._traverseElement(d,c,b)},_traverseElement:function(d,c,b){for(var a=d,f=!1;a;){a.nodeName===this._TEXTNODE_NAME?(this._enterTextNode(c,a,b),f=!1):f=this._enterNode(c,a,b);if(a===this._endNode)break;if(!f&&a.firstChild)a=a.firstChild;else{if(a.nextSibling)a.nodeName!==
this._TEXTNODE_NAME&&this._leaveNode(c,a,b);else{for(;!a.nextSibling&&!(this._leaveNode(c,a,b),a=a.parentNode,null===a||a===d););this._leaveNode(c,a,b)}a=a.nextSibling}}},_enterNode:function(d,c,b){var a=this._getWriterForNode(c);return!a?!1:a.enter(d,c,b)},_leaveNode:function(d,c,b){var a=this._getWriterForNode(c);a&&a.leave(d,c,b)},_enterTextNode:function(){}})})},"MW/rtc/plugins/export/html/OutputParagraph2HTMLProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"MW/rtc/plugins/export/html/OutputParagraph2HTML"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/export/html/OutputParagraph2HTML":function(){define(["dojo/_base/declare","MW/rtc/plugins/export/OutputNodeExporterInterface"],function(h,e){return h([e],{_STYLES:"color padding background font-family font-size overflow-x line-height".split(" "),constructor:function(){},getApplicableDomNodeClasses:function(){return["outputParagraph"]},
enter:function(e,d,c){d=e.getAttributesForStyle(d,this._STYLES);c="\x3cdiv ";d&&(c+=d);e.addToBody(c+"\x3e")},leave:function(e,d,c){e.addToBody("\x3c/div\x3e")}})})},"MW/rtc/plugins/export/html/PlainTextNode2HTMLProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/export/html/PlainTextNode2HTML"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.view.decoration.viewmodel"]}},createInstance:function(d){return new g(d)}})})},
"MW/rtc/plugins/export/html/PlainTextNode2HTML":function(){define(["dojo/_base/declare","dojo/dom-construct","MW/rtc/nodes/leaf/PlainTextNode","MW/rtc/plugins/export/NodeExporterInterface","MW/rtc/view/decoration/DecorationUtilities"],function(h,e,g,d,c){return h([d],{constructor:function(b){this._decorationviewmodel=b},getApplicableNodeClass:function(){return g},visit:function(b,a,f,d,g){f=e.create("span");d=this._decorationviewmodel.getDecoration(a);if(a=a.getText())a=c.createViewForTextNode(a,
d,f),f.appendChild(a),f.style["white-space"]="pre",b.addToBody(f.outerHTML)}})})},"MW/rtc/plugins/folding/view/FoldingMarginProvider":function(){define(["dojo/_base/declare","dojo/aspect","dojo/dom-class","MW/rtc/core/provider/PluginProvider","MW/rtc/margin/DecoratableRangeMargin"],function(h,e,g,d,c){return h(d,{requires:function(){return{createInstance:["rtc.view","rtc.internaldocument","rtc.focusservice","rtc.folding.margin.decorator"]}},createInstance:function(b,a,f,d){b=new c(b,a,f,[d],0);g.add(b.getMarginElement(),
"foldMargin");return b}})})},"MW/rtc/margin/DecoratableRangeMargin":function(){define("dojo/aspect dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/_base/declare dojo/_base/lang mw-log/Log MW/rtc/margin/DecoratableMargin MW/rtc/view/ViewUtilities".split(" "),function(h,e,g,d,c,b,a,f,k){return c(f,{constructor:function(a,b,c,f,d,e,h){g.add(this._gutter,"rangeMargin");this._populateContainersMap();this._expansionHandler=null},_populateContainersMap:function(){this._containersMap={};this._decorators.forEach(function(a){var b=
d.create("div",{"class":"rangeDecoratorContainer"});e.set(b,"data-test-id",a.getId());this._gutter.appendChild(b);this._updateZIndex(a.getPriority(),b);this._containersMap[a.getId()]=b},this)},setExpansionHandler:function(a){this._expansionHandler=a},removeExpansionHandler:function(){this._expansionHandler=null},destroy:function(){this.inherited(arguments);this._containersMap={}},update:function(a,b){a?this._updateForDecorator(a,b):this._decorators.forEach(function(a){this._updateForDecorator(a,b)},
this)},_updateForDecorator:function(a,b){var c=this._containersMap[a.getId()];if(c){var f=c.cloneNode(!1);a.getRangeDescriptions(b).forEach(function(a){this._isValidDescription(a)&&this._placeDivForDescription(f,a)},this);this._gutter.replaceChild(f,c);this._containersMap[a.getId()]=f}},_isValidDescription:function(a){var b=this._internalDocument.getMaxLineNumber();return 0<a.startLine&&a.startLine<=b&&0<a.endLine&&a.endLine<=b},_updateZIndex:function(a,b){b.style["z-index"]=a},_placeDivForDescription:function(a,
b){this._updateDivDimensions(b);a.appendChild(b.div)},_updateDivDimensions:function(a){var b=a.startLine,c=a.endLine,f=a.div;a=a.shouldExpand;var d=this._calculateDivDimensions(b,c);a&&this._expansionHandler&&(d=this._expansionHandler.calculateUpdatedDivDimensions(d,b,c));this._setDimensionsForDiv(f,d)},_calculateDivDimensions:function(a,b){var c=this._internalDocument.getPositionForLineColumn(a,1),f=this._internalDocument.getPositionForLineColumn(b,1),f=k.getVerticalDimensionsBetweenPositions(c,
f,this._view),c=f.height,f=f.top,d=this._view.getScrollTop();return{top:f-d,height:c}},_setDimensionsForDiv:function(a,b){a.style.top=b.top+"px";a.style.height=b.height+"px"}})})},"MW/rtc/plugins/folding/view/FoldingDecoratorProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./FoldingDecorator"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.view","rtc.folding.foldingcontroller","rtc.folding.foldingmodel"]}},createInstance:function(d,
c,b){return new g(d,c,b)}})})},"MW/rtc/plugins/folding/view/FoldingDecorator":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-construct dojo/on MW/rtc/margin/AbstractRangeMarginDecorator MW/rtc/margin/MarginRangeDescription MW/rtc/view/ViewUtilities".split(" "),function(h,e,g,d,c,b,a,f,k){return h(a,{_WIDTH:20,constructor:function(a,b,c){this._view=a;this._foldingController=b;this._foldingModel=c;this.own(g.after(this._foldingModel,"onCandidatesAdded",e.hitch(this,
"onUpdate")));this.own(g.after(this._foldingModel,"onCandidatesRemoved",e.hitch(this,"onUpdate")))},getRangeDescriptions:function(a){return this._getFoldCandidatesInView(a).map(this._getDescriptionForFoldCandidate,this)},_getFoldCandidatesInView:function(a){a||(a=k.getZeroBasedVisibleLineNumbers(this._view));return this._foldingModel.getFoldCandidatesForDocumentLines(a)},_getDescriptionForFoldCandidate:function(a){var b=this._createDomStructureForCandidate(a),c=a.getRange();a=c.getStartPosition().getLine();
c=c.getEndPosition().getLine();return new f(b,a,c,this,!1)},_createDomStructureForCandidate:function(a){var b=c.create("div");b.classList.add("foldContainer");this._addToggleElement(a,b);this._addExtensionElementIfNeeded(a,b);return b},_addToggleElement:function(a,f){var g=c.create("div");g.classList.add("foldToggle");var h=a.getRange().getStartPosition().getLine()-1;d.set(g,"data-testid","gutterLine_"+h);h=c.create("div");h.classList.add("foldMinus");g.appendChild(h);a.isFolded()?(g.classList.add("foldClose"),
h=c.create("div"),h.classList.add("foldPlus"),g.appendChild(h)):g.classList.add("foldOpen");b(g,"click",e.hitch(this._foldingController,"toggle",a));f.appendChild(g)},_addExtensionElementIfNeeded:function(a,b){if(!a.isFolded()){var f=c.create("div");f.classList.add("foldExtension");b.appendChild(f)}},getWidth:function(){return this._WIDTH},getPriority:function(){return 1},getId:function(){return"Folds"}})})},"MW/rtc/margin/AbstractRangeMarginDecorator":function(){define(["dojo/_base/declare","MW/rtc/margin/AbstractMarginDecorator"],
function(h,e){return h(e,{getRangeDescriptions:function(e){throw Error("Unimplemented API: MW.rtc.margin.AbstractRangeMarginDecorator.createDecorationForLineNumber");},getPriority:function(){throw Error("Unimplemented API: MW.rtc.margin.AbstractRangeMarginDecorator.getPriority");},getId:function(){throw Error("Unimplemented API: MW.rtc.margin.AbstractRangeMarginDecorator.getId");}})})},"MW/rtc/margin/MarginRangeDescription":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(e,
g,d,c,b){this.div=e;this.startLine=g;this.endLine=d;this.decorator=c;this.shouldExpand=b}})})},"MW/rtc/plugins/folding/view/FoldingEllipsesManagerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./FoldingEllipsesManager"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.view.decoration","rtc.folding.foldingcontroller","rtc.folding.foldingmodel"]}},createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/plugins/folding/view/FoldingEllipsesManager":function(){define("dojo/_base/declare dojo/aspect dojo/dom-construct dojo/on MW/rtc/abstract/AbstractPlugin MW/rtc/browsersupport/BrowserSupportUtilities MW/rtc/model/Range MW/rtc/view/decoration/DecorationUtilities".split(" "),
function(h,e,g,d,c,b,a,f){return h(c,{constructor:function(a,c,f){this._decorator=a.createDecorator(1);this._foldingController=c;this._foldingModel=f;this.own(e.after(this._foldingController,"onCandidatesFolded",this._addEllipsisForFoldCandidates.bind(this),!0));this.own(e.after(this._foldingController,"onCandidatesUnfolded",this._removeEllipsisForFoldCandidates.bind(this),!0));this.own(e.after(this._foldingModel,"onCandidatesRemoved",this._handleCandidatesRemoved.bind(this),!0));this._candidateToEllipsisMap=
b.createMap()},_addEllipsisForFoldCandidates:function(a){a.forEach(function(a){if(!this._foldCandidateHasEllipsis(a)){var b=this._createEllipsisForFoldCandidate(a);this._attachEllipsisNodeToFoldCandidate(b,a)}},this);this._decorator.applyChanges()},_removeEllipsisForFoldCandidates:function(a){a.forEach(function(a){var b=this._candidateToEllipsisMap.get(a);b&&(this._decorator.removeDomNode(b.ellipsis,b.range,f.PLACEMENT.AFTER),this._candidateToEllipsisMap.delete(a),b.onClick.remove(),b.range.destroy())},
this);this._decorator.applyChanges()},_createEllipsisForFoldCandidate:function(a){var b=this._getInsertionRangeForFoldCandidate(a),c=this._createEllipsisDomNode();a=d(c,"click",this._foldingController.unfold.bind(this._foldingController,a));return{ellipsis:c,range:b,onClick:a}},_attachEllipsisNodeToFoldCandidate:function(a,b){this._decorator.addDomNode(a.ellipsis,a.range,f.PLACEMENT.AFTER);this._candidateToEllipsisMap.set(b,a)},_createEllipsisDomNode:function(){var a=g.create("span");a.classList.add("foldEllipsis");
for(var b=0;3>b;b+=1){var c=g.create("div");c.classList.add("ellipseDot");g.place(c,a,"last")}return a},_getInsertionRangeForFoldCandidate:function(b){b=b.getRange().getStartPosition().getNode().rootContainer();var c=b.endPosition();c.setRightAligned(!0);b=new a(b.startPosition(),c);b.getStartPosition().setLive();b.getEndPosition().setLive();return b},_foldCandidateHasEllipsis:function(a){return this._candidateToEllipsisMap.has(a)},_handleCandidatesRemoved:function(a){this._removeEllipsisForFoldCandidates(a)}})})},
"MW/rtc/plugins/language/matlab/executablecode/ExecutableCodeServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./ExecutableCodeService"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document.executablecode.executablecodeconverter"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/plugins/language/matlab/executablecode/ExecutableCodeService":function(){define(["dojo/_base/declare"],function(h){return h(null,
{_internalDocument:null,_executableCodeConverter:null,constructor:function(e,g){this._internalDocument=e;this._executableCodeConverter=g},getEvalText:function(){return this._executableCodeConverter.getEvalTextFromNode(this._internalDocument.root)}})})},"MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/ExecutableCodeConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./ExecutableCodeConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.document.executablecode.executablecodeconverter.converter"]}},
createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/ExecutableCodeConverter":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractRecursiveConverterPlugin"],function(h,e){return h(e,{CONVERTER_PLUGIN_NAME:"ExecutableCodeConverter",constructor:function(e){this._initializeRecursiveConverter(e)},getEvalTextFromNode:function(e){var d=this._getConverter(e);return d?d.getEvalTextFromNode(e):null}})})},"MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/RootNodeExecutableCodeConverterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./RootNodeExecutableCodeConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/RootNodeExecutableCodeConverter":function(){define(["dojo/_base/declare","./base/InnerNodeExecutableCodeConverter","MW/rtc/nodes/inner/RootNode"],function(h,e,g){return h(e,{getApplicableNodeClass:function(){return g}})})},"MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/base/InnerNodeExecutableCodeConverter":function(){define(["dojo/_base/declare",
"./AbstractExecutableCodeConverter"],function(h,e){return h(e,{constructor:function(){},getEvalTextFromNode:function(e){var d=this;return e.children.map(function(c){return d._mainConverter.getEvalTextFromNode(c)}).filter(function(c){return null!==c}).join(e.CHILD_TEXT_SEPARATOR)}})})},"MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/base/AbstractExecutableCodeConverter":function(){define(["dojo/_base/declare","mw-log/Log","MW/rtc/abstract/AbstractRecursiveConverter"],function(h,
e,g){return h(g,{getEvalTextFromNode:function(d){e.error("Unimplemented: getEvalTextFromNode")}})})},"MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/LineNodeExecutableCodeConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LineNodeExecutableCodeConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/LineNodeExecutableCodeConverter":function(){define(["dojo/_base/declare",
"./base/InnerNodeExecutableCodeConverter","MW/rtc/nodes/inner/LineNode"],function(h,e,g){return h(e,{getApplicableNodeClass:function(){return g}})})},"MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/PlainTextNodeExecutableCodeConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./PlainTextNodeExecutableCodeConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},
"MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/PlainTextNodeExecutableCodeConverter":function(){define(["dojo/_base/declare","./base/LeafNodeExecutableCodeConverter","MW/rtc/nodes/leaf/PlainTextNode"],function(h,e,g){return h(e,{getApplicableNodeClass:function(){return g}})})},"MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/base/LeafNodeExecutableCodeConverter":function(){define(["dojo/_base/declare","./AbstractExecutableCodeConverter"],function(h,e){return h(e,
{constructor:function(){},getEvalTextFromNode:function(e){return e.getCodeText()}})})},"MW/rtc/plugins/language/matlab/folding/MatlabCodeFoldingProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./MatlabMTreeFoldCandidateContributor"],function(h,e,g){return h(e,{requires:function(){return{createInstance:"rtc.folding.foldingcontroller rtc.folding.foldingmodel matlab.code.mtree matlab.code.mtree.codeblocks.structure matlab.code.mtree.rangefactory rtc.document".split(" ")}},
createInstance:function(d,c,b,a,f,e){return new g(d,c,b,a,f,e)}})})},"MW/rtc/plugins/language/matlab/folding/MatlabMTreeFoldCandidateContributor":function(){define("dojo/_base/declare dojo/aspect MW/rtc/model/Range MW/rtc/model/RangeUtilities MW/rtc/plugins/folding/AbstractFoldCandidateContributor MW/rtc/plugins/folding/FoldCandidate MW/rtc/plugins/language/matlab/folding/FoldableMTreeNodeTypes".split(" "),function(h,e,g,d,c,b,a){return h(c,{constructor:function(a,b,c,d,g,h){this._codeBlockStructure=
d;this._mTreeRangeFactory=g;this._document=h;this.own(e.after(c,"onUpdate",this._handleMTreeUpdated.bind(this)));this.own(e.after(h,"onDirectedDeletion",this._handleDeletion.bind(this),!0))},_handleMTreeUpdated:function(){this._codeBlockStructure.whenSynchronized(this._updateFoldCandidates.bind(this))},_updateFoldCandidates:function(){var a=this._calculateFoldCandidatesToAddAndRemove();0<a.foldCandidatesToRemove.length&&this._removeFoldCandidates(a.foldCandidatesToRemove);0<a.foldCandidatesToAdd.length&&
this._addFoldCandidates(a.foldCandidatesToAdd)},_handleDeletion:function(a,b){var c=new g(b.startPosition,b.endPosition),c=this._getCandidatesInRange(c);0<c.length&&this._removeFoldCandidates(c)},_calculateFoldCandidatesToAddAndRemove:function(){var a=this._getFoldableRanges(),b=this._foldCandidates.slice();return{foldCandidatesToAdd:a.filter(function(a){var c=-1,f=b.some(function(b,f){c=f;return d.equivalent(b.getRange(),a)});f&&b.splice(c,1);return!f}).map(this._createFoldCandidateForRange),foldCandidatesToRemove:b}},
_getFoldableRanges:function(){var a=this._getFoldableMTreeNodes();return this._getFoldableRangesFromMTreeNodes(a)},_getFoldableMTreeNodes:function(){return this._getCodeBlockMTreeNodes().filter(function(b){return a.isMTreeNodeFoldable(b)&&b.getStartLine()!==b.getEndLine()},a)},_getCodeBlockMTreeNodes:function(){return this._codeBlockStructure.getCodeBlocks().map(function(a){return a.mTreeNode})},_getFoldableRangesFromMTreeNodes:function(a){return a.map(this._mTreeRangeFactory.getRangeForMTreeNode,
this._mTreeRangeFactory)},_createFoldCandidateForRange:function(a){return new b(a)},_getCandidatesInRange:function(a){return this._foldCandidates.filter(function(b){return d.isRangeContainedInRange(b.getRange(),a)})}})})},"MW/rtc/plugins/folding/AbstractFoldCandidateContributor":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,e){return h(e,{constructor:function(e,d){this._foldingController=e;this._foldingModel=d;this._foldCandidates=[]},_addFoldCandidates:function(e){e.forEach(function(d){this._foldCandidates.push(d)},
this);this._foldingModel.addFoldCandidates(e)},_removeFoldCandidates:function(e){e.forEach(function(d){this._foldCandidates.splice(this._foldCandidates.indexOf(d),1)},this);this._foldingModel.removeFoldCandidates(e)}})})},"MW/rtc/plugins/folding/FoldCandidate":function(){define(["dojo/_base/declare","MW/rtc/model/NodeUtilities","MW/rtc/model/Range","MW/rtc/model/RangeUtilities"],function(h,e,g,d){return h(null,{constructor:function(c){this._range=c;this._folded=!1;this._setRangeAttributes()},destroy:function(){this._range.destroy()},
getRange:function(){return this._range},getStartLine:function(){return this._range.getStartPosition().getLine()-1},getEndLine:function(){return this._range.getEndPosition().getLine()-1},isFolded:function(){return this._folded},setFolded:function(){this._folded=!0},setUnfolded:function(){this._folded=!1},getFoldableNodes:function(){var c=this._range.getStartPosition().getNode().rootContainer().nextSibling(),b=this._range.getEndPosition().getNode().rootContainer();return e.getParagraphNodesInRange(c,
b)},getHiddenRange:function(){var c=this._range.getStartPosition().getNode().rootContainer().nextSibling().startPosition(),b=this._range.getEndPosition().getNode().rootContainer().endPosition();return new g(c,b)},_setRangeAttributes:function(){this._range.getStartPosition().setRightAligned(!0);this._range.getStartPosition().setLive();this._range.getEndPosition().setLive()},containsNode:function(c){c=c.rootContainer();return 0<=d.paragraphNodesInRange(this._range).indexOf(c)}})})},"MW/rtc/plugins/language/matlab/folding/FoldableMTreeNodeTypes":function(){define("MW/rtc/plugins/language/matlab/syntax/mtree/nodes/BlockCommentMTreeNode MW/rtc/plugins/language/matlab/syntax/mtree/nodes/ClassdefMTreeNode MW/rtc/plugins/language/matlab/syntax/mtree/nodes/ClassdefSectionMTreeNode MW/rtc/plugins/language/matlab/syntax/mtree/nodes/ForMTreeNode MW/rtc/plugins/language/matlab/syntax/mtree/nodes/FunctionDeclarationMTreeNode MW/rtc/plugins/language/matlab/syntax/mtree/nodes/IfMTreeNode MW/rtc/plugins/language/matlab/syntax/mtree/nodes/StatementMTreeNode MW/rtc/plugins/language/matlab/syntax/mtree/nodes/SwitchMTreeNode MW/rtc/plugins/language/matlab/syntax/mtree/nodes/WhileMTreeNode".split(" "),
function(h,e,g,d,c,b,a,f,k){return{_FOLDABLE_MTREE_NODE_TYPES:[h,e,g,d,c,a,k],isMTreeNodeFoldable:function(a){return this._FOLDABLE_MTREE_NODE_TYPES.some(function(b){return a.isInstanceOf(b)})}}})},"MW/rtc/plugins/language/matlab/syntax/mtree/MTreeRangeFactoryProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./MTreeRangeFactory"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.document"]}},createInstance:function(d){return new g(d)}})})},
"MW/rtc/plugins/language/matlab/syntax/mtree/MTreeRangeFactory":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin","MW/rtc/model/Range"],function(h,e,g){return h(e,{constructor:function(d){this._document=d},getRangeForMTreeNode:function(d){var c=this._makePosition(d.getStartLine(),d.getStartColumn());d=this._makePosition(d.getEndLine(),d.getEndColumn());return new g(c,d)},_makePosition:function(d,c){return this._document.createPositionAtLineColumn(d-1,c-1)}})})},"MW/rtc/plugins/language/matlab/syntax/mtree/MTreeServiceProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./MTreeService"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.editordataservice","rtc.document"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/plugins/language/matlab/syntax/mtree/MTreeService":function(){define(["./MTreeNodeFactory","dojo/Deferred","dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,e,g,d){return g(d,{_EDS_FEATURE_ID:"matlab.code.mtree",constructor:function(c,b){this._edsHandle=c.listenTo(this._EDS_FEATURE_ID,
this._handleEDSCallback.bind(this));this._document=b;this._fileType=this._tree=this._data=null;this._lastDocumentState=-1},destroy:function(){this.inherited(arguments);this._edsHandle.remove()},_handleEDSCallback:function(c){this._data=c;this._lastDocumentState=c.documentState;this._build();this._deferred&&this._document.getState()===this._lastDocumentState&&(this._deferred.resolve(this._tree),this._deferred=null);this.onUpdate()},_build:function(){this._tree=this._data.mTree?this._data.mTree.map(function(c){return h.create(c)}):
null;this._fileType=this._data.fileType||null},getMTree:function(){if(this._document.getState()===this._lastDocumentState)return this._tree;this._deferred||(this._deferred=new e);return this._deferred},getFileType:function(){return this._fileType},onUpdate:function(){}})})},"MW/rtc/plugins/language/matlab/syntax/mtree/MTreeNodeFactory":function(){define("./nodes/BlockCommentMTreeNode ./nodes/CellTitleMTreeNode ./nodes/ClassdefMTreeNode ./nodes/ClassdefSectionMTreeNode ./nodes/EqualsMTreeNode ./nodes/ForMTreeNode ./nodes/FunctionCallMTreeNode ./nodes/FunctionDeclarationMTreeNode ./nodes/FunctionIdentifierMTreeNode ./nodes/IfMTreeNode ./nodes/StatementMTreeNode ./nodes/SwitchMTreeNode ./nodes/VariableMTreeNode ./nodes/WhileMTreeNode".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q){return{_REGISTRY:{FunctionCallNode:a,FunctionDeclarationNode:f,ClassdefNode:g,EnumerationNode:d,PropertiesNode:d,MethodsNode:d,ProtoNode:d,EventsNode:d,FunctionIdentifierNode:k,VariableNode:m,ForNode:b,ParForNode:b,WhileNode:q,SPMDNode:n,TryNode:n,SwitchNode:p,IfNode:l,EqualsNode:c,BlockCommentNode:h,CellTitleNode:e},create:function(a){var b=this._REGISTRY[a.type],c=a.children?this.createMultiple(a.children):null;return new b(a,c)},createMultiple:function(a){return a.map(this.create,
this)}}})},"MW/rtc/plugins/language/matlab/syntax/mtree/nodes/CellTitleMTreeNode":function(){define(["dojo/_base/declare","./MTreeNode"],function(h,e){return h(e,{})})},"MW/rtc/plugins/language/matlab/syntax/mtree/nodes/EqualsMTreeNode":function(){define(["dojo/_base/declare","./MTreeNode","../MTreeUtils"],function(h,e,g){return h(e,{getLHSChildren:function(){return this._partitionChildren(!0)},getRHSChildren:function(){return this._partitionChildren(!1)},_partitionChildren:function(d){return this.getChildren().filter(function(c){c=
g.compareByPosition(c,this);return d?0>c:0<c},this)}})})},"MW/rtc/plugins/language/matlab/syntax/mtree/MTreeUtils":function(){define([],function(){return{compareByPosition:function(h,e){return this._xBeforeY(h,e)?-1:this._xBeforeY(e,h)?1:0},_xBeforeY:function(h,e){var g=h.getEndLine(),d=e.getStartLine();return g<d||g===d&&h.getEndColumn()<e.getStartColumn()?!0:!1}}})},"MW/rtc/plugins/language/matlab/syntax/mtree/nodes/FunctionCallMTreeNode":function(){define(["dojo/_base/declare","./MTreeNode","./FunctionIdentifierMTreeNode"],
function(h,e,g){return h(e,{constructor:function(d,c){this._functionName=new g(this._data.functionName)},getFunctionName:function(){return this._functionName}})})},"MW/rtc/plugins/language/matlab/syntax/mtree/codeblocks/MTreeCodeBlockServicesProvider":function(){define(["./MTreeCodeBlockServices","./MTreeCodeBlockStructure","dojo/_base/declare","MW/rtc/core/provider/PluginProvider"],function(h,e,g,d){return g(d,{requires:function(){return{createInstance:["matlab.code.mtree.codeblocks.structure"]}},
createInstance:function(c){return new h(c)}})})},"MW/rtc/plugins/language/matlab/syntax/mtree/codeblocks/MTreeCodeBlockServices":function(){define(["dojo/aspect","dojo/_base/declare","dojo/_base/lang","MW/rtc/abstract/AbstractPlugin","MW/rtc/plugins/language/matlab/syntax/mtree/codeblocks/BlockType"],function(h,e,g,d,c){return e(d,{constructor:function(b){this._codeBlockStructure=b},whenSynchronized:function(b){this._codeBlockStructure.whenSynchronized(b)},isLineInFunction:function(b){return this._isLineInBlockOfType(b,
c.FUNCTION_DEFINITION)},isLineInLoop:function(b){return this._isLineInBlockOfType(b,c.FOR_LOOP)||this._isLineInBlockOfType(b,c.WHILE_LOOP)},isLineInIfStatement:function(b){return this._isLineInBlockOfType(b,c.IF_STATEMENT)},getOutermostBlockOfType:function(b,a){return this._getEdgeBlockOfType(b,a?[a]:[],!0)},getInnermostBlockOfType:function(b,a){return this._getEdgeBlockOfType(b,a?[a]:[],!1)},getOutermostLoop:function(b){return this._getEdgeBlockOfType(b,[c.FOR_LOOP,c.WHILE_LOOP],!0)},getInnermostLoop:function(b){return this._getEdgeBlockOfType(b,
[c.FOR_LOOP,c.WHILE_LOOP],!1)},_getEdgeBlockOfType:function(b,a,c){b=this._codeBlockStructure.getBlocksForLine(b);if(!b)return null;c&&(b=b.reverse());return this._getLastBlockOfType(b,a)},_isLineInBlockOfType:function(b,a){var c=!1,d=this._codeBlockStructure.getBlocksForLine(b);d&&(c=d.some(function(b){return b.type===a},this));return c},_getLastBlockOfType:function(b,a){if(0===a.length)return b[b.length-1];var c=null;b.forEach(function(b){a.some(function(a){return b.type===a})&&(c=b)},this);return c}})})},
"MW/rtc/plugins/language/matlab/syntax/mtree/codeblocks/MTreeCodeBlockStructure":function(){define("dojo/aspect dojo/when dojo/Deferred dojo/_base/declare dojo/_base/lang MW/rtc/abstract/AbstractPlugin MW/rtc/plugins/language/matlab/syntax/mtree/codeblocks/BlockType".split(" "),function(h,e,g,d,c,b,a){return d(b,{constructor:function(a,b,d){this._mTreeService=a;this._lineNumberService=b;this._isDirty=!0;this.own(h.after(d,"onDocumentChanged",c.hitch(this,"_handleDocumentChange")));this._reset()},
_handleDocumentChange:function(){this._isDirty=!0},whenSynchronized:function(a){this._isDirty?this._build().then(a):a()},getBlocksForLine:function(a){return(a=this._lineBlockTypes[a])?a.slice():[]},getCodeBlocks:function(){return this._codeBlocks.slice()},_build:function(){var a=new g;e(this._mTreeService.getMTree(),c.hitch(this,function(b){this._reset();b&&b.forEach(function(a){this._visitNodeAndItsChildren(a)},this);this._isDirty=!1;a.resolve()}));return a},_visitNodeAndItsChildren:function(a){this._visitNode(a);
a.getChildren()&&a.getChildren().forEach(function(a){this._visitNodeAndItsChildren(a)},this)},_visitNode:function(b){this._currentBlockId++;var c=this._lineNumberService.getCodeLineNumberFromLineNumber(b.getStartLine()-1),d=this._lineNumberService.getCodeLineNumberFromLineNumber(b.getEndLine()-1),e=a.getBlockTypeForNode(b);this._markLinesAsType(e,c,d,b)},_markLinesAsType:function(a,b,c,d){if(a){for(a=this._packageBlockData(a,b,c,d);b<=c;b++)this._addBlockDataToLine(b,a);this._codeBlocks.push(a)}},
_packageBlockData:function(a,b,c,d){return{id:a+"_"+this._currentBlockId,type:a,startLine:b,endLine:c,mTreeNode:d}},_addBlockDataToLine:function(a,b){this._lineBlockTypes[a]?this._lineBlockTypes[a].push(b):this._lineBlockTypes[a]=[b]},_reset:function(){this._currentBlockId=0;this._lineBlockTypes={};this._codeBlocks=[]}})})},"MW/rtc/plugins/language/matlab/syntax/mtree/codeblocks/MTreeCodeBlockStructureProvider":function(){define(["./MTreeCodeBlockStructure","dojo/_base/declare","MW/rtc/core/provider/PluginProvider"],
function(h,e,g){return e(g,{requires:function(){return{createInstance:["matlab.code.mtree","rtc.linenumberservice","rtc.internaldocument"]}},createInstance:function(d,c,b){return new h(d,c,b)}})})},"MW/rtc/plugins/language/matlab/syntaxhighlighter/ServerSideSyntaxHighlighterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./ServerSideSyntaxHighlighterPlugin"],function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],
createInstance:["rtc.document","rtc.internaldocument","rtc.view","rtc.view.decoration"]}},createInstance:function(d,c,b,a){return new g(d,c,b,a)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/language/matlab/syntaxhighlighter/ServerSideSyntaxHighlighterPlugin":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/model/CodeUtilities MW/syntaxhighlighting/SyntaxHighlightingDataServiceFactory mw-utils/Utils mw-log/Log".split(" "),function(h,
e,g,d,c,b,a,f){return h(d,{constructor:function(a,c,f,d){this._document=a;this._internalDocument=c;this._view=f;this._decorator=d.createDecorator();this._dataService=b.getInstance();this._model={};this._requestID=null;this.own(g.after(this._dataService,"onTokenUpdate",e.hitch(this,this._onServerResponse),!0));this.own(g.after(this._internalDocument,"onDocumentChanged",e.hitch(this,"_updateSyntaxHighlighting"),!0));this.own(g.after(this._internalDocument,"onDocumentReset",e.hitch(this,"_updateSyntaxHighlighting")))},
_updateSyntaxHighlighting:function(){var a=this;clearTimeout(this._idleTimerID);this._idleTimerID=setTimeout(function(){a._serverRequest()},200)},_serverRequest:function(){this._requestID=a.generateUuid();var b=this._document.getCodeText();this._dataService.updateData(b,this._requestID,!0)},_onServerResponse:function(a,b,f,d){f=this._document.getCodeText();if(!(this._requestID!==a||0!==f.localeCompare(d))){a=this._processTokens(b,d);this._updateModel(a);a=this._internalDocument.getMaxLineNumber();
for(b=0;b<a;b+=1)d=this._internalDocument.getLineNode(b),c.isCodeContainer(d)&&(d=this._internalDocument.getRangeForLine(b+1),this._decorator.clearRange(d),this._decorateForTokens(this._model[b]));this._decorator.applyChanges()}},_decorateForTokens:function(a){a.forEach(function(a){var b=a.range.start,c=a.range.end,b=this._internalDocument.getRangeForLineColumn(b.row+1,b.column+1,c.row+1,c.column+1);this._decorator.setStyle(b,"color",a.color)},this)},_updateModel:function(a){this._model=a},_appendTokenToMap:function(a,
b,c){a.value&&void 0!==c&&b[c].push(a)},_convertTokenColor:function(a){return a=a.r||a.g||a.b?"rgb("+a.r+", "+a.g+", "+a.b+")":""},_createNewToken:function(a,b,c,f){return{value:a?a:"",color:b?b:"",range:{start:c?c:{row:0,column:0},end:f?f:{row:0,column:0}}}},_createRangeOfToken:function(a,b,c,f){return{start:{row:a,column:c-b},end:{row:a,column:f-b}}},_isValidToken:function(a){return 0<a.value.length&&!(0===a.color.r&&0===a.color.g&&0===a.color.b)},_processTokens:function(a,b){var c={},d=0,e=b.split("\n");
c[0]=[];var g=0,h,s,t,u,v;for(v=0;v<a.length;v+=1)u=a[v],"\n"===u.value?(d+=e[g].length+1,g+=1,c[g]=[]):this._isValidToken(u)&&(t=this._convertTokenColor(u.color),s=this._createRangeOfToken(g,d,u.startPosition,u.startPosition+u.value.length),h=s.start,s=s.end,f.assert(h.row===s.row,"Tokens should not span multiple lines"),t=this._createNewToken(u.value,t,h,s),this._appendTokenToMap(t,c,h.row));return c}})})},"MW/syntaxhighlighting/SyntaxHighlightingDataServiceFactory":function(){define(["dojo/_base/declare",
"dojo/aspect","mw-remote/Remote","MW/syntaxhighlighting/SyntaxHighlightingDataService"],function(h,e,g,d){var c;e.after(g,"reset",function(){c=null});return{getInstance:function(){return c=c||new d}}})},"MW/syntaxhighlighting/SyntaxHighlightingDataService":function(){define(["dojo/_base/declare","mw-remote/Remote","MW/rtc/plugins/language/matlab/syntaxhighlighter/MatlabTokenColorUtilities","mw-log/Log"],function(h,e,g,d){return h(null,{constructor:function(){e.registerResponseHandler("SyntaxHighlightingResponse",
this._handleSyntaxHighlightingResponse,this);e.registerFaultHandler("SyntaxHighlighting",this._handleSyntaxHighlightingError,this)},updateData:function(c,b,a,f){this._assertNotNullOrUndefined(c);this._rteMode=a||!1;0<c.length?e.sendMessage({SyntaxHighlighting:{matlabCode:c}},{uuid:b,matlabCode:c,contextID:f}):this._propagateResponse(b,[],[],[],!0,c)},onTokenUpdate:function(c,b,a,f){},onSectionLocationUpdate:function(c,b,a,f){},_assertNotNullOrUndefined:function(c){if(null===c||void 0===c)throw Error("MW.syntaxhighlighting.SyntaxHighlightingDataService: input parameter must not be null or undefined.");
},_handleSyntaxHighlightingResponse:function(c,b){dojo.forEach(c,function(a){this._propagateResponse(b.uuid,a.tokens,a.offsets,a.cellLocations,a.validTree,b.matlabCode,b.contextID)},this)},_getTokensFromArrays:function(c,b,a){var f,d,e=[];for(f=0;f<b.length;f+=1){var h=f+1>=b.length?c.length:a[f+1],p=b[f],m=g.getTokenTypeColor(p);this._rteMode&&(p=g.getTokenType(p));m=m||{r:0,g:0,b:0};d=c.substring(a[f],h);h=a[f];if(this._rteMode){var q=d.split("\n");if(1<d.length&&1<q.length)for(d=0;d<q.length;d+=
1)e.push({value:0<q[d].length?q[d]:"\n",color:m,type:String(p),startPosition:h}),h+=0<q[d].length?q[d].length:1;else e.push({value:d,color:m,type:String(p),startPosition:h})}else e.push({value:d,color:m,type:String(p),startPosition:h})}return e},_propagateResponse:function(c,b,a,f,e,g,h){d.assert(c,"No uuid property found in context.");b=this._getTokensFromArrays(g,b,a);this.onTokenUpdate(c,b,h,g);this.onSectionLocationUpdate(c,f,e,g)},_handleSyntaxHighlightingError:function(c){d.error("Error received while trying to receive syntax highlighting tokens.");
d.dir(c)}})})},"MW/rtc/plugins/language/matlab/syntaxhighlighter/MatlabTokenColorUtilities":function(){define(["mw-log/Log","MW/rtc/plugins/language/matlab/syntaxhighlighter/MatlabSyntaxHighlighterColorMap","MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenConstants","MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenUtilities","MW/syntaxhighlighting/ColorMapDefaults"],function(h,e,g,d,c){return{NULL_CATEGORY_COLOR:339,BEGIN_TYPE_INDEX:127,_inTypeSection:!1,getTokenTypeColor:function(b){b=e.getColorFromCategory(g.TOKEN_TO_CATEGORY[b]);
return!b?e.getColorFromCategory(this.NULL_CATEGORY_COLOR):b},getBeginTypeColor:function(){return e.getColorFromCategory(this.BEGIN_TYPE_INDEX)},getTokenTypeHTMLColor:function(b){b=e.getHTMLColorFromCategory(g.TOKEN_TO_CATEGORY[b]);return!b?e.getHTMLColorFromCategory(this.NULL_CATEGORY_COLOR):b},getTokenType:function(b){b=c.typeMapDefaults[g.TOKEN_TO_CATEGORY[b]];return!b?c.typeMapDefaults[this.NULL_CATEGORY_COLOR]:b},processTokens:function(b,a,c){for(var d={};a<=c;a++){this._inTypeSection=!1;var e=
b[a];if(e){d[a]=[];for(var g={valueBuffer:"",colorString:"",start:-1,end:-1},p=0;p<e.length;p++){var m=e[p],q=this._determineColorForToken(m),r=this._convertTokenColorToRgbString(q),s=this._createRangeOfToken(a,m.getColumn(),m.getColumn()+m.getLength()),t=s.start,s=s.end;h.assert(t.row===s.row,"Tokens should not span multiple lines");this._isValidToken(m,q)?r===g.colorString?(g.end=s,g.valueBuffer+=m.getValue()):(d=this._createNewTokenAndAppendToMap(g,d),g.start=t,g.end=s,g.colorString=r,g.valueBuffer=
m.getValue()):" "===m.getValue()?(g.end=s,g.valueBuffer+=m.getValue()):(d=this._createNewTokenAndAppendToMap(g,d),g={valueBuffer:"",colorString:"",start:-1,end:-1})}d=this._createNewTokenAndAppendToMap(g,d)}}return d},_createRangeOfToken:function(b,a,c){return{start:{row:b,column:a},end:{row:b,column:c}}},_isValidToken:function(b,a){return 0<b.getLength()&&!(0===a.r&&0===a.g&&0===a.b)},_createNewToken:function(b,a,c,d){return{value:b?b:"",color:a?a:"",range:{start:c?c:{row:0,column:0},end:d?d:{row:0,
column:0}}}},_createNewTokenAndAppendToMap:function(b,a){if(b.valueBuffer){var c=this._createNewToken(b.valueBuffer,b.colorString,b.start,b.end);this._appendTokenToMap(c,a,b.start.row)}return a},_appendTokenToMap:function(b,a,c){b.value&&void 0!==c&&a[c].push(b)},_isInTypeSection:function(){return this._inTypeSection},_determineColorForToken:function(b){this._isInTypeSection()?d.doesTokenMarkEndOfTypeSection(b)?(this._inTypeSection=!1,b=this.getTokenTypeColor(b.getType())):b=this.getBeginTypeColor():
(d.isBeginTypeToken(b)&&(this._inTypeSection=!0),b=this.getTokenTypeColor(b.getType()));return b},_convertTokenColorToRgbString:function(b){return b=b.r||b.g||b.b?"rgb("+b.r+", "+b.g+", "+b.b+")":""}}})},"MW/rtc/plugins/language/matlab/syntaxhighlighter/MatlabSyntaxHighlighterColorMap":function(){define(["MW/syntaxhighlighting/ColorMapDefaults"],function(h){var e={ERRORS:"ERRORS",COMMENTS:"COMMENTS",STRINGS:"STRINGS",TYPE_SECTION:"TYPE_SECTION",KEYWORDS:"KEYWORDS",UNTERMINATED_STRINGS:"UNTERMINATED_STRINGS",
SYSTEM_COMMANDS:"SYSTEM_COMMANDS",TEXT:"TEXT"},g={ERRORS:[122],COMMENTS:[105,106,107,108,109,110],STRINGS:[44,45],TYPE_SECTION:[127],KEYWORDS:[333],UNTERMINATED_STRINGS:[337],SYSTEM_COMMANDS:[338],TEXT:[339]},d=function(){return{ERRORS:c(e.ERRORS),COMMENTS:c(e.COMMENTS),STRINGS:c(e.STRINGS),TYPE_SECTION:c(e.TYPE_SECTION),KEYWORDS:c(e.KEYWORDS),UNTERMINATED_STRINGS:c(e.UNTERMINATED_STRINGS),SYSTEM_COMMANDS:c(e.SYSTEM_COMMANDS),TEXT:c(e.TEXT)}},c=function(b){return h.colorMapDefaults[g[b][0]]};return{_colorMap:d(),
SYNTAX_TYPE:e,_SYNTAX_TYPE_TO_CATEGORY:g,getDefaultColors:d,getDefaultColor:c,getColorFromCategory:function(b){return this.getColor(this._getSyntaxTypeFromCategory(b))},getHTMLColorFromCategory:function(b){return this.getHTMLColor(this._getSyntaxTypeFromCategory(b))},getColor:function(b){return this._colorMap[b]},getHTMLColor:function(b){return this._rgbToHex(this.getColor(b))},setColors:function(b){for(var a in b)b.hasOwnProperty(a)&&this.setColor(a,b[a])},setHTMLColors:function(b){for(var a in b)b.hasOwnProperty(a)&&
this.setHTMLColor(a,b[a])},getColors:function(){return this._colorMap},getHTMLColors:function(){for(var b={},a=Object.keys(this._colorMap),c=0;c<a.length;c++){var d=a[c];b[d]=this._rgbToHex(this._colorMap[d])}return b},setColor:function(b,a){this._colorMap[b]=a},setHTMLColor:function(b,a){"#"===a.charAt(0)&&(a=a.slice(1));this.setColor(b,this._hexToRgb(a))},_rgbToHex:function(b){return"#"+(16777216+(b.b|b.g<<8|b.r<<16)).toString(16).slice(1)},_hexToRgb:function(b){"#"===b.charAt(0)&&(b=b.slice(1));
b=parseInt(b,16);return{r:b>>16&255,g:b>>8&255,b:b&255}},_getSyntaxTypeFromCategory:function(b){for(var a=Object.keys(this._SYNTAX_TYPE_TO_CATEGORY),c=0;c<a.length;c++){var d=a[c];if(-1<this._SYNTAX_TYPE_TO_CATEGORY[d].indexOf(b))return d}return this.SYNTAX_TYPE.TEXT}}})},"MW/syntaxhighlighting/ColorMapDefaults":function(){define(["dojo/_base/declare"],function(h){return{typeMapDefaults:{122:"error",105:"comment",106:"comment",107:"comment",108:"comment",109:"comment",110:"comment",44:"string",45:"string",
127:"type sections",333:"keyword",337:"invalid",338:"system",339:"plain"},colorMapDefaults:{122:{r:255,g:0,b:0},105:{r:34,g:139,b:34},106:{r:34,g:139,b:34},107:{r:34,g:139,b:34},108:{r:34,g:139,b:34},109:{r:34,g:139,b:34},110:{r:34,g:139,b:34},44:{r:160,g:32,b:240},45:{r:160,g:32,b:240},127:{r:162,g:82,b:45},333:{r:0,g:0,b:255},337:{r:179,g:0,b:0},338:{r:179,g:140,b:0},339:{r:0,g:0,b:0}},HTMLColorMapDefaults:{122:"#ff0000",105:"#228b22",106:"#228b22",107:"#228b22",108:"#228b22",109:"#228b22",110:"#228b22",
44:"#a020f0",45:"#a020f0",127:"#a2522d",333:"#0000ff",337:"#b30000",338:"#b38c00",339:"#000000"}}})},"MW/rtc/plugins/equations/equationcontroller/EquationControllerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./EquationController"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.view","rtc.internaldocument","rtc.cursor","rtc.document"]}},createInstance:function(d,c,b,a){return new g(d,c,b,a)}})})},"MW/rtc/plugins/equations/equationcontroller/EquationController":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/equations/EquationRenderer MW/rtc/abstract/AbstractPlugin MW/rtc/model/DocumentConstants MW/rtc/model/DocumentUtilities MW/rtc/model/events/DeletionEvent MW/rtc/model/events/DocumentEvent MW/rtc/model/events/InsertBreakEvent MW/rtc/model/events/NumberOfLinesChangedEvent ./nodes/EquationNode ../tools/AutoDisplayStyle".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m){return h(c,{constructor:function(a,b,c,f){this._view=a;this._internalDocument=b;this._cursor=c;this._document=f;d.loadFonts();this.own(g.after(this._document,"onDirectedDeletion",e.hitch(this,"_onDelete"),!0));this.own(g.after(this._internalDocument,"onDocumentChanged",e.hitch(this,"_handleDocumentChanged"),!0))},_handleDocumentChanged:function(a){m.autoStyle(a,this._view,this._internalDocument,this._cursor)},_isEquationNode:function(a){return a instanceof p},_isEquationOfType:function(a,
b){return this._isEquationNode(a)&&a.getEncoding()===b},_onDelete:function(a,b){if(!this._cursor.hasSelection()&&b.isLocal){var c=b.startNode;if(this._isEquationOfType(c,"tex")){if(-1===a&&this.onDelete(c))return!0;this._cursor.setPosition(this._cursor.selectionInfo2cursorPos(b));return!0}}},onDelete:function(a){},onActionsNeedUpdate:function(){},equationUnderCursor:function(a,c){var f=this._cursor.selectionInfo(),d=f.isLocal&&this._isEquationNode(f.startNode)&&f.startNode.getEncoding()===a?f.startNode:
null;if((!d||c===b.FORWARD_DELETE)&&f.isNull&&f.endPos===f.endNode.maxOffset())d=(f=f.endNode.nextSibling())&&this._isEquationNode(f)&&f.getEncoding()===a?f:null;return d},_canEditEquation:function(b){if(this._cursor.isCursorReadOnly())return!1;b=this.equationUnderCursor(b);if(this._cursor.hasSelection()&&!b)return!1;b=this._cursor.getNode();var c=this._cursor.getOffset();return a.isInTextLevelContainer(b)&&!a.isEdgeOfTextLevelContainer(b,c)||this._isEquationOfType(b,"mathml")&&0<c&&c<b.maxOffset()?
!1:!0},canEditMathMLEquation:function(){return this._canEditEquation("mathml")},canEditLaTeXEquation:function(){return this._canEditEquation("tex")},updateEquationNode:function(a,b){this._internalDocument.changeNodeAttributes(a,{encoding:b.encoding,displayStyle:b.displayStyle,mathmlString:b.mathmlString||"",texString:b.texString||""});"tex"===b.encoding&&this._cursor.setPosition(a,1)},_insertEquation:function(a){var b=this._internalDocument;a=new p(a);b=b.insertAtPosition(a,this._cursor.position);
this._cursor.setPosition(a,1);return b.events},convertRangeToEquation:function(a,b,c,f,d){this._document.deleteText(b,c,f,d);this.updateDocument({texString:a})},deleteEquation:function(a){var b=a.rootContainer(),c=this._cursor.getPosition(),d;d=this._internalDocument.getLineNumber(b);b=this._document.startEdit();this._internalDocument.deleteNodeAndMerge(a);this._cursor.setLineColumn(d+1,c.column);a=[k.create(d,d)];c=[f.create(d,d,c.column)];b.appendUndoEvents(a);b.appendRedoEvents(c);this._document.endEdit();
this._internalDocument.emitDocumentEvents(c);this.onActionsNeedUpdate()},updateDocument:function(a){var b=this._cursor.getNode().rootContainer(),b=this._internalDocument.getLineNumber(b),c=this._document.startEdit();a.currentNode?(this.updateEquationNode(a.currentNode,a),a.currentNode=null,a=[k.create(b,b)],c.appendUndoEvents(a)):(a=this._insertEquation(a),c.appendUndoEvents([n.create(b,b+1,-1)]));c.appendRedoEvents(a);this._document.endEdit();this._internalDocument.emitDocumentEvents(a)}})})},"MW/rtc/plugins/equations/equationcontroller/nodes/EquationNode":function(){define(["dojo/_base/declare",
"dojo/dom-class","MW/equations/renderer/model/utils/TeXUtils","MW/rtc/nodes/OpaqueNode","MW/rtc/plugins/equations/tools/EquationUtilities"],function(h,e,g,d,c){return h([d],{constructor:function(b){b=b||{};this._encoding=b.encoding||"tex";this._displayStyle=b.displayStyle;this._mathmlString=b.mathmlString||"";this._texString=b.texString||""},className:"EquationNode",maxOffset:function(){return"mathml"===this.getEncoding()?this._editorBridge?this._editorBridge.maxOffset()+2:c.isEmptyEquationEncoding(this._mathmlString)?
2:4:this.inherited(arguments)},posRightOfEquation:function(){return this.maxOffset()},posRightmostInsideEquation:function(){return this.maxOffset()-1},posLeftOfEquation:function(){return 0},posInsideOfEquation:function(){return this.maxOffset()/2},lineBorderOffset:function(b,a){return this.getPositionFromOffset(a)},getMathRootBox:function(){return this.box&&this.box.children&&this.box.children[0]&&this.box.children[0].children?e.contains(this.box.children[0],"mwEquationEditor")?this.box.children[0]:
this.box.children[0].children[0]:null},getEditor:function(){return this._editor},setEditor:function(b){this._editor=b},setEditorBridge:function(b){this._editorBridge=b},getEditorBridge:function(){return this._editorBridge},updateAttributes:function(b){var a={};b.hasOwnProperty("encoding")&&(a.encoding=this._encoding,this._encoding=b.encoding);b.hasOwnProperty("displayStyle")&&(a.displayStyle=this._displayStyle,this._displayStyle=b.displayStyle);b.hasOwnProperty("mathmlString")&&(a.mathmlString=this._mathmlString,
this._mathmlString=b.mathmlString);b.hasOwnProperty("texString")&&(a.texString=this._texString,this._texString=b.texString);return a},_sanitizeTeXString:function(){return this._texString=g.sanitzeLaTeXString(this._texString)},getTeXString:function(){return this._texString?this._sanitizeTeXString():this._editor&&this._editor.getEquation().toTeX()||""},getMathMLString:function(){return this._mathmlString?this._mathmlString:this._editor&&this._editor.getEquation().toMathML()||""},getEncoding:function(){return this._encoding},
setDisplayStyle:function(b){this._displayStyle=b;this._editor&&this._editor.getEquation().setDisplayStyle(b)},getDisplayStyle:function(){return this._displayStyle},getTop:function(){var b=this.getMathRootBox()||this.box;return b?b.offsetTop:0},getHeight:function(){var b=this.getMathRootBox()||this.box;return b?b.offsetHeight:0},getLeft:function(){var b=this.getMathRootBox()||this.box;return b?b.offsetLeft:0},getWidth:function(){var b=this.getMathRootBox()||this.box;return b?b.offsetWidth:0},getStyleAttributes:function(){return{}},
compareStyleAttributes:function(){return!1},getPlainText:function(b,a){var c=this.text;this._editorBridge&&(c=this._editorBridge.convertToText());return c},_serializeAttributes:function(b){b.text=this.getText();b.encoding=this._encoding;b.mathmlString=this.getMathMLString();b.displayStyle=this._displayStyle;b.texString=this.getTeXString()}})})},"MW/rtc/plugins/equations/tools/EquationUtilities":function(){define(["dojo/i18n!l10n/nls/equationEditor"],function(h){return{emptyEquationEncoding:'\x3cspan class\x3d"MathEquation emptyEquation"\x3e\x3cspan class\x3d"MathRoot"\x3e'+
h.emptyEquation+"\x3c/span\x3e\x3c/span\x3e",isEmptyEquationEncoding:function(e){return e.match(/<math[^<]+<mrow[^<]+<mi [^<>]+placeholder[^<]+<\/mi><\/mrow><\/math>/)}}})},"MW/rtc/plugins/equations/tools/AutoDisplayStyle":function(){define("dojo/_base/lang dojo/aspect MW/rtc/model/DocumentConstants MW/rtc/model/DocumentEventUtilities MW/rtc/model/DocumentUtilities MW/rtc/model/NodeUtilities MW/rtc/plugins/equations/equationcontroller/nodes/EquationNode".split(" "),function(h,e,g,d,c,b,a){function f(a){return a.type?
!0:!1}function k(a,b){var c;c=a.children?a.children.filter(l):[];return 0<c.length?(c.forEach(b.layoutNode,b),!0):!1}function l(c){return c instanceof a&&(c.getDisplayStyle()||b.isFreestandingOpaque(c))}return{autoStyle:function(a,b,e,h){var l=h.getNode().textContainer(),s=d.getEventsOfType(a,g.DELETION_EVENT),t=d.getEventsOfType(a,g.INSERT_TEXT),u=t.some(function(a){return a.endLine&&a.endLine>a.startLine});if(a.some(f)){var v=k(l,b),w={};a.forEach(function(a){var c;if(!a.hasOwnProperty("startLine")||
!a.hasOwnProperty("endLine"))return!1;var f=Math.min(a.endLine,e.getMaxLineNumber()-1);for(a=a.startLine;a<=f;a+=1)if(!w[a]){w[a]=!0;var d=e.getLineNode(a);d.childrenAreContainers?d.children.forEach(function(a){c=a.textContainer();v=k(c,b)||v}):(c=d.textContainer(),v=k(c,b)||v)}});if(0<s.length||u)c.isAtStartOfContainer(h.getCursorPosition())&&l.previousSibling()?v=k(l.previousSibling(),b)||v:c.isAtEndOfContainer(h.getCursorPosition())&&l.nextSibling()&&(v=k(l.nextSibling(),b)||v);if(1<t.length){var x=
t[0].position.getNode().rootContainer(),A=t[t.length-1].position.getNode().rootContainer();x&&(A&&x!==A)&&(b.layoutNode(x),b.layoutNode(A))}a=h.getCursorPosition().getNode().rootContainer();if(v&&(a===x||a===A))h.onUpdate(),b.onLayoutChange()}}}})},"MW/rtc/plugins/equations/equationcontroller/nodes/EquationNodeContentConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./EquationNodeContentConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},
createInstance:function(){return new g}})})},"MW/rtc/plugins/equations/equationcontroller/nodes/EquationNodeContentConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/contentconverter/base/LeafNodeContentConverter","./EquationNode"],function(h,e,g){return h(e,{getApplicableNodeClass:function(){return g}})})},"MW/rtc/plugins/equations/equationcontroller/view/EquationCoordinateConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./EquationCoordinateConverter"],
function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.view.viewmodel"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/equations/equationcontroller/view/EquationCoordinateConverter":function(){define(["dojo/_base/declare","MW/rtc/model/Position","MW/rtc/plugins/equations/equationcontroller/nodes/EquationNode","MW/rtc/view/coordinateconverter/CoordinateConverterUtilities","MW/rtc/view/coordinateconverter/base/OpaqueBoxCoordinateConverter"],function(h,e,g,d,
c){return h(c,{constructor:function(b){this._viewModel=b},getApplicableNodeClass:function(){return g},getPositionFromCoordinate:function(b,a){var c=this._getClientRects(a)[0];if(!d.isCoordinateWithinRect(b,c))return null;if(a.getEditorBridge())return this._getPositionFromBridge(a,b);var g;"mathml"===a.getEncoding()?(g=b.x<=c.left?a.posLeftOfEquation():b.x>=c.right?a.posRightOfEquation():a.posInsideOfEquation(),a.lastClickCoordinates=d.convertFromClientToOffset(b,this._viewModel)):b.x>=c.left+c.width/
2&&(g=1);return new e(a,g)},_getPositionFromBridge:function(b,a){var c=this.getDomNode(b).getBoundingClientRect();a.x<=c.left?c=0:a.x>=c.right?c=b.maxOffset():(c=b.getEditorBridge().cursorOffsetFromXY(a.x-c.left,a.y-c.top)||0,c+=1);return new e(b,c)},getCoordinateFromPosition:function(b){var a=b.getNode(),c=b.getOffset(),d=a.getEditorBridge();return d&&0<c&&c<a.maxOffset()?d.caretCoordinatesFor(c-1):this.inherited(arguments)},getDomNode:function(b){return b.getMathRootBox()||b.box}})})},"MW/rtc/view/coordinateconverter/base/OpaqueBoxCoordinateConverter":function(){define(["dojo/_base/declare",
"dojo/dom-geometry","MW/rtc/model/Position","../CoordinateConverterUtilities","./BaseCoordinateConverter"],function(h,e,g,d,c){return h(c,{getPositionFromCoordinate:function(b,a){var c=this._getClientRects(a)[0];if(!d.isCoordinateWithinRect(b,c))return null;var e=0;b.x>=c.left+c.width/2&&(e=1);return new g(a,e)},getCoordinateFromPosition:function(b){var a=b.getNode();b=b.getOffset();var c=this.getDomNode(a),a=c?e.position(c):{x:0,w:0},c=c?d.getOffsetRectFromDomNode(c):{top:0,left:0,width:0,height:0};
return{x:b?c.right:c.left,y:c.top,width:c.width,height:c.height,pageX:a.x+(b?a.w:0)}},_getSubClientRects:function(b){return this.getClientRects(b)}})})},"MW/rtc/plugins/equations/equationcontroller/view/EquationLayouterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./EquationLayouter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/equations/equationcontroller/view/EquationLayouter":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct MW/equations/renderer/Renderer MW/rtc/model/NodeUtilities MW/rtc/plugins/equations/tools/EquationUtilities MW/rtc/plugins/richtext/HeadingUtilities MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter ../nodes/EquationNode".split(" "),
function(h,e,g,d,c,b,a,f,k){function l(b,c){var f=r;b.parent&&a.isHeadingNode(b.parent)&&(f=a.getEquationHeightByLevel(b.parent.level));var f=e.mixin({},c,{pxPerEm:f}),g=JSON.stringify(f);u[g]||(u[g]=new d(f));return u[g]}function n(a,b,c,f){c=c.layoutInto(f,"span",{"class":"equationNode"});if(!b)return c;c.renderedEquationPromise=a.render(b,c,{displaystyle:f.getDisplayStyle()});return c}function p(b,c,f){c=c.layoutInto(f,"span",{"class":"equationNode"});var d=r;f.parent&&a.isHeadingNode(f.parent)&&
(d=a.getEquationHeightByLevel(f.parent.level));b.set("pxPerEm",d);g.empty(c);b.placeAt(c);window.setTimeout(function(){b.get("disabled")||b.focus()},0);return c}function m(a,b){b.setDisplayStyle(c.isFreestandingOpaque(b));var f=l(b,s),d=f.setDisplaystyleIfNeeded(b.getTeXString(),!0);b.getDisplayStyle()&&(b.textContainer().tempAlign=!0);f=n(f,d,a,b);f.setAttribute("data-test-source","tex");return f}function q(a,f){f.setDisplayStyle(c.isFreestandingOpaque(f));f.getDisplayStyle()&&(f.textContainer().tempAlign=
!0);var d=f.getEditor();if(d)return p(d,a,f);d=f.getMathMLString();if(b.isEmptyEquationEncoding(d))return d=a.layoutInto(f,"span",{"class":"equationNode"}),d.innerHTML=b.emptyEquationEncoding,d;var e=l(f,t);return n(e,d,a,f)}var r=14,s={cacheFontMetrics:!1,strictTeX:!0,equationFormat:"tex"},t={cacheFontMetrics:!1,equationFormat:"mathml"},u={};return h(f,{constructor:function(){},getApplicableNodeClass:function(){return k},layout:function(a,b){return("tex"===b.getEncoding()?m:q)(a,b)}})})},"MW/rtc/plugins/equations/equationeditor/EquationEditorProvider":function(){define(["dojo/_base/declare",
"dojo/_base/lang","./EquationEditor","MW/rtc/core/provider/PluginProvider"],function(h,e,g,d){return h(d,{requires:function(){return{createInstance:"rtc.focusservice rtc.cursor rtc.actionservice rtc.hyperlinkservice rtc.richtext.equationcontroller rtc.internaldocument rtc.eventhandler rtc.keyhandler rtc.clipboard rtc.contextmenu.generator rtc.document rtc.clipboardtempdirpath rtc.divcaret rtc.undoredo.controller rtc.undoredo.editblock rtc.view rtc.scrollpane".split(" ")}},createInstance:function(c,
b,a,f,d,e,h,p,m,q,r,s,t,u,v,w,x){var A={};A.focusService=c;A.cursor=b;A.actionService=a;A.hyperlinkService=f;A.equationController=d;A.internalDocument=e;A.eventHandler=h;A.keyHandler=p;A.clipboard=m;A.contextMenuGenerator=q;A.document=r;A.clipboardTempDirpath=s;A.divCaret=t;A.undoredoController=u;A.editBlockController=v;A.view=w;A.scrollpane=x;return new g(A)}})})},"MW/rtc/plugins/equations/equationeditor/EquationEditor":function(){define("dijit/focus dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class MW/equations/editor/utils/ActionDataServiceProxy MW/equations/EquationEditor MW/rtc/model/DocumentConstants MW/rtc/model/DocumentUtilities MW/rtc/model/events/DocumentEvent MW/rtc/model/NodeUtilities MW/rtc/plugins/equations/equationcontroller/nodes/EquationNode MW/rtc/plugins/equations/equationeditor/EquationEditorBridge MW/rtc/plugins/equations/tools/EquationUtilities MW/rtc/RichTextComponentFeatureEnum".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r){return e(null,{constructor:function(a){a=a||{};this._focusService=a.focusService;this._cursor=a.cursor;this._actionService=a.actionService;this._hyperlinkService=a.hyperlinkService;this._equationController=a.equationController;this._internalDocument=a.internalDocument;this._eventHandler=a.eventHandler;this._keyHandler=a.keyHandler;this._clipboard=a.clipboard;this._contextMenuGenerator=a.contextMenuGenerator;this._document=a.document;this._clipboardTempDirpath=
a.clipboardTempDirpath;this._divCaret=a.divCaret;this._undoredoController=a.undoredoController;this._editBlockController=a.editBlockController;this._view=a.view;this._scrollpane=a.scrollpane;this._handles=[];this._handles.push(d.around(a.document,"deleteTextAtCurrentPosition",g.hitch(this,"_handleDelete")));this._actionService.addAction({id:r.EQUATIONS.WYSIWYG_EDITOR_ACTION,enabled:!0,key:"ctrl_shift_e",platformKey:{mac:"meta_shift_e"},callback:g.hitch(this,"_insertEquationCallback")});this._connections=
[];this._connections.push(d.after(this._cursor,"onChange",g.hitch(this,this._handleCursorChanges)));this._connections.push(d.after(this._equationController,"onActionsNeedUpdate",g.hitch(this,this._handleCursorChanges)))},_handleDelete:function(a){return g.hitch(this,function(b){var c=this._equationController.equationUnderCursor("mathml",b);if(this._cursor.hasSelection()||!c)return a.apply(this._document,arguments);var d=this._cursor.getPosition(),e=this._cursor.getNode();if(b===f.BACKWARD_DELETE&&
e===c&&d.posInNode===c.maxOffset())this._cursor.movePosition(this._cursor.LEFT);else if(b===f.FORWARD_DELETE&&(e===c.previousSibling()||e instanceof p&&0===d.posInNode))this._cursor.movePosition(this._cursor.RIGHT);else return a.apply(this._document,arguments)})},_handleCursorChanges:function(){this._cursor.hasSelection()&&this._expandSelectionOverEquations();var a=this._equationController.equationUnderCursor("mathml");this._actionService.updateAction(r.EQUATIONS.WYSIWYG_EDITOR_ACTION,{enabled:this._equationController.canEditMathMLEquation()});
a?this._handleCursorInsideEquation(a):this._handleCursorOutsideEquation()},_expandSelectionOverEquations:function(){var a=this._cursor.position,b=this._cursor.anchor,c=!1,f=!1,d=this._cursor.isReversed(),e=a.node;e.isInstanceOf(p)&&(0<a.offset&&a.offset<e.maxOffset())&&(c=!0);b.node&&(b.node.isInstanceOf(p)&&0<b.offset&&b.offset<b.node.maxOffset())&&(f=!0);if(!b||!(b.node===a.node&&c&&f)){if(c){if(!1===d&&a.offset===e.maxOffset()-1){this._cursor.setPosition(e,0);return}if(!0===d&&1===a.offset){this._cursor.setPosition(e,
e.maxOffset());return}this._cursor.setPosition(e,d?0:e.maxOffset())}f&&(this._cursor.anchor.offset=d?b.node.maxOffset():0,this._cursor.onUpdate())}},_handleCursorInsideEquation:function(a){var b=this._cursor.getPosition(),c=a.getEditor();if(!c){var f=a.posRightOfEquation(),d=a.posRightmostInsideEquation(),e=a.posInsideOfEquation(),c=this._createEditorInstance(a);b.posInNode===f?(f=a.endPosition(),b.posInNode=f.offset,this._cursor.releaseAnchor(),this._cursor.setPosition(a,b.posInNode)):b.posInNode===
d?(f=a.getPositionFromOffset(a.posRightmostInsideEquation()),b.posInNode=f.offset,this._cursor.releaseAnchor(),this._cursor.setPosition(a,b.posInNode)):b.posInNode===e&&a.lastClickCoordinates&&(f=this._view.getPositionFromCoordinate(a.lastClickCoordinates),b.posInNode=f.offset,this._cursor.releaseAnchor(),this._cursor.setPosition(a,b.posInNode),a.lastClickCoordinates=null)}0===b.posInNode||b.posInNode===a.maxOffset()||this._cursor.getNode()!==a?this._handleCursorOutsideEquation():(f=a.isReadOnly(),
c.get("readonly")!==f&&c.set("readonly",f),f?this._equationEditorActive&&this._disableActiveEditor():this._equationEditorActive!==c&&this._enableEditor(c),a.getEditorBridge().setCursor(b.posInNode-1,b.anchor&&b.anchor.posInNode?b.anchor.posInNode-1:void 0))},_handleCursorOutsideEquation:function(){this._equationEditorActive&&this._disableActiveEditor()},_enableEditor:function(a){this._equationEditorActive&&this._disableActiveEditor();this._equationEditorActive=a;this._triggerFocus(a);this._focusThief=
d.after(this._keyHandler,"onFocus",g.hitch(this,"_triggerFocus",a));this._cursor.resetAction();this._cursor.releaseAnchor();this._cursor.externalMouseDown()},_triggerFocus:function(a){this._focusTriggered!==a&&(this._focusTriggered=a,setTimeout(g.hitch(this,function(){if(this._equationEditorActive===a){var b=a.get("disabled");a.set("disabled",!1);(b||this._isRTC(h.curNode))&&a.focus()}this._focusTriggered=!1}),0))},_isRTC:function(a){for(;a&&a.parentNode;){if(c.contains(a,"mwRichTextComponent"))return!0;
a=a.parentNode}},_disableActiveEditor:function(){this._equationEditorActive.set("disabled",!0);this._equationEditorActive=null;this._focusThief.remove();this._focusService.setFocus()},_createEditorInstance:function(c){var f=new b(this._actionService);f.filterProperties(["contextMenuGroup"]);f.detach();f.addAction({id:"rtc.equationeditor-active",enabled:!0});f=new a({enable:["equationeditor.rtc-bridge"],disable:["action.undoredo","view.movekeycaptureonfocus"],inject:{"external.actionservice":f,"external.clipboard":this._clipboard,
"external.clipboardtempdirpath":this._clipboardTempDirpath,"external.contextmenugenerator":this._contextMenuGenerator,"controller.undoredo":{canUndo:function(){return!1},undo:function(){this._undoredoController.undo()}.bind(this),redo:function(){},canRedo:function(){return!1}},"rtc.divcaret":this._divCaret,"rtc.keyhandler":this._keyHandler,"rtc.cursor":this._cursor,"rtc.document":this._document,"rtc.equationnode":c,"rtc.undoredo.editblock":this._editBlockController,"rtc.updatenode":g.hitch(this,function(){var a=
this._document.startEdit();this._internalDocument.changeNodeAttributes(c,{mathmlString:"",texString:""});var b=c.rootContainer(),b=this._internalDocument.getLineNumber(b),b=[l.create(b,b)];a.appendRedoEvents(b);a.appendUndoEvents(b);this._document.endEdit();this._internalDocument.emitDocumentEvents(b)}),"rtc.deletenode":g.hitch(this,function(){this._equationController.deleteEquation(c)}),"rtc.scrollpane":this._scrollpane},registry:[m]});f.getEquation().fromMathML(c.getMathMLString());f.getCursor().hide();
f.set("disabled",!0);f.set("cacheFontMetrics",!1);f.set("pxPerEm",14);f.set("emptyEquation",q.emptyEquationEncoding);f.getEquation().setDisplayStyle(c.getDisplayStyle());c.setEditor(f);this._view.layoutNode(c);return f},_insertEquationCallback:function(){if(this._actionService.getAction(r.EQUATIONS.WYSIWYG_EDITOR_ACTION).enabled)return this._insertEquation()},_insertEquation:function(){if(this._equationController.canEditMathMLEquation()){var a=this._equationController.equationUnderCursor("mathml");
if(a){var b=this._cursor.position;if(b.node===a&&0<b.offset&&b.offset<a.maxOffset())return}this._equationController.updateDocument({encoding:"mathml",mathmlString:'\x3cmath\x3e\x3cmrow\x3e\x3cmi data-category\x3d"placeholder-atom"\x3e\x26nbsp;\x3c/mi\x3e\x3c/mrow\x3e\x3c/math\x3e'})}},dispose:function(){this._connections.forEach(function(a){a.remove()})}})})},"MW/equations/editor/utils/ActionDataServiceProxy":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/aspect"],
function(h,e,g,d){return e(null,{constructor:function(c){this._actionService=c;this._localActions={};this._attached=!0;this._handles=[];this._handles.push(d.after(this._actionService,"onActionChange",g.hitch(this,"_handleActionChange"),!0));this._previousActions={};this._filterProperties=[]},filterProperties:function(c){this._filterProperties=c},_handleActionChange:function(c){this._attached&&this._localActions[c.id]&&this._localActions[c.id][c.key]!==c.newValue&&(this._localActions[c.id][c.key]=
c.newValue,this.onRemoteActionChange(c))},onRemoteActionChange:function(c){},addAction:function(c){this._localActions[c.id]=c;this._attached&&this._actionService.addAction(this._filter(c))},_filter:function(c){var b=g.mixin({},c);this._filterProperties.forEach(function(a){delete b[a]});return b},executeAction:function(c,b){if(this._attached)return this._actionService.executeAction(c,b)},getAction:function(c){return this._localActions[c]?this._localActions[c]:this._actionService.getAction(c)},updateAction:function(c,
b){this._localActions[c]=g.mixin(this._localActions[c],b);this._attached&&this._actionService.updateAction(c,this._filter(b))},getAllActions:function(){return h.map(Object.keys(this._localActions),g.hitch(this,"getAction"))},loadActions:function(c){c.forEach(this.addAction,this)},attach:function(){this._attached||(this._attached=!0,Object.keys(this._localActions).forEach(function(c){var b=this._actionService.getAction(c);b?(this._previousActions[c]=g.mixin({},b),this._actionService.updateAction(c,
this._filter(this._localActions[c]))):this._actionService.addAction(this._filter(this._localActions[c]))},this))},detach:function(){this._attached&&(this._attached=!1,Object.keys(this._localActions).forEach(function(c){this._previousActions[c]?(this._actionService.updateAction(c,this._previousActions[c]),delete this._previousActions[c]):this._actionService.removeAction(c)},this))},destroy:function(){this._attached&&this.detach();this._handles.forEach(function(c){c.remove()});this._handles=[]}})})},
"MW/equations/EquationEditor":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-construct mw-actiondataservice/ActionDataService MW/equations/editor/PluginRegistry MW/equations/utils/PluginService MW/rtc/clipboardservice/ClipboardService MW/rtc/plugins/contextmenu/DojoContextMenuGenerator".split(" "),function(h,e,g,d,c,b,a,f,k){return e(null,{constructor:function(d){d=d||{};var e=g.mixin({"external.clipboardtempdirpath":void 0},d.inject);e["external.actionservice"]=e["external.actionservice"]?
e["external.actionservice"]:new c;e["external.contextmenugenerator"]=e["external.contextmenugenerator"]||new k;e["external.clipboard"]=e["external.clipboard"]||f.getInternalClipboard();var p=b;d.registry&&(p=p.concat(d.registry));var m="api actions action.cursor action.delete action.undoredo controller.editmanager controller.caret controller.focus controller.contextmenu controller.mouse copypaste model.equation view.highlightactiverow view.movekeycaptureonfocus view.renderer view.keyhandler view.rootnode".split(" ");
d.enable&&(m=m.concat(d.enable));d.disable&&(m=h.filter(m,function(a){return 0>d.disable.indexOf(a)}));this._pluginService=new a({registry:p,inject:e,enable:m,disable:d.disable})},placeAt:function(a,b){var c=this._pluginService.get("view.rootnode");d.place(c,a,b);this._pluginService.get("view.renderer").redraw()},focus:function(){this._pluginService.get("controller.focus").focus()},get:function(a){return this._pluginService.get("api.attributes").get(a)},getEquation:function(){return this._pluginService.get("api.equation")},
getCursor:function(){return this._pluginService.get("api.cursor")},set:function(a,b){return this._pluginService.get("api.attributes").set(a,b)},destroy:function(){this._pluginService.destroy()}})})},"MW/equations/editor/PluginRegistry":function(){define("MW/equations/editor/actions/CaretAction MW/equations/editor/actions/CursorAction MW/equations/editor/actions/CutCopyPasteAction MW/equations/editor/actions/DeleteAction MW/equations/editor/actions/DragAndDropAction MW/equations/editor/actions/InsertTemplateAction MW/equations/editor/actions/InsertTextAction MW/equations/editor/actions/LaTeXCommandsAction MW/equations/editor/actions/LaTeXCompletionAction MW/equations/editor/actions/LineBreakAction MW/equations/editor/actions/MathMLFormattingAction MW/equations/editor/actions/MatrixAction MW/equations/editor/actions/MouseAction MW/equations/editor/actions/SmartEditingAction MW/equations/editor/actions/SmartParensAction MW/equations/editor/actions/SmartSymbolsAction MW/equations/editor/actions/TabAction MW/equations/editor/actions/TabLeavesStructureAction MW/equations/editor/actions/TextFormattingAction MW/equations/editor/actions/UndoRedoAction MW/equations/editor/actions/VisualCursorAction MW/equations/editor/api/AttributesAPI MW/equations/editor/api/CursorAPI MW/equations/editor/api/EquationAPI MW/equations/editor/controller/CaretController MW/equations/editor/controller/ContextMenuController MW/equations/editor/controller/CursorController MW/equations/editor/controller/EditManager MW/equations/editor/controller/FocusController MW/equations/editor/controller/KeyHandlerController MW/equations/editor/controller/LiveCursorController MW/equations/editor/controller/MouseController MW/equations/editor/controller/PlaceholderAtomController MW/equations/editor/controller/SelectionController MW/equations/editor/controller/UndoRedoController MW/equations/editor/helper/BackspaceToUndoHelper MW/equations/editor/helper/DeleteHelper MW/equations/editor/helper/ExportHTMLImage MW/equations/editor/helper/ExportImage MW/equations/editor/helper/ExportMathML MW/equations/editor/helper/ExportPlainText MW/equations/editor/helper/ImportHelper MW/equations/editor/helper/InsertHelper MW/equations/editor/helper/InsertTemplateHelper MW/equations/editor/helper/MimeTypeHelper MW/equations/editor/helper/PlainTextGenerator MW/equations/editor/model/Cursor MW/equations/editor/model/Equation MW/equations/editor/view/Caret MW/equations/editor/view/Helper MW/equations/editor/view/HighlightActiveRow MW/equations/editor/view/KeyHandler MW/equations/editor/view/MoveKeyCaptureOnFocus MW/equations/editor/view/RootNode MW/equations/editor/view/Renderer MW/equations/editor/view/Selection".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,B,F,G,H,I,K,C,M,Q,L,N,J,O,T,W,S,R,ea,Y,$,da,ga,V,aa,oa,fa,z,X,D,ba,la,U,ja,pa){return Array.prototype.slice.call(arguments)})},"MW/equations/editor/actions/CaretAction":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/equations/editor/utils/CursorUtils","MW/equations/editor/utils/DirectedSearch","MW/equations/editor/utils/NodeUtils"],function(h,e,g,d,c){return h(null,{pluginId:"action.caret",pluginFamily:"actions",pluginDependencies:"controller.caret controller.cursor external.actionservice model.equation view.caret view.helper".split(" "),
constructor:function(b,a,c,d,g,h){this._caretController=b;this._cursorController=a;this._equation=d;this._caret=g;this._viewHelper=h;b=[{id:"equationeditor.up",enabled:!0,key:"up",callback:e.hitch(this,"_handleUp",!1)},{id:"equationeditor.selectup",enabled:!0,key:"shift_up",callback:e.hitch(this,"_handleUp",!0)},{id:"equationeditor.down",enabled:!0,key:"down",callback:e.hitch(this,"_handleDown",!1)},{id:"equationeditor.selectdown",enabled:!0,key:"shift_down",callback:e.hitch(this,"_handleDown",!0)}];
c.loadActions(b)},_handleUp:function(b){var a=this._caret.getGeometry(),f=this._cursorController.getPosition(),h=this._equation.getById(f.id);if(h=c.findStructure(h)){var l=this["_handleUp"+h.structure.className];if(l&&(h=l.call(this,h.structure,h.path)))return this._cursorController.setPosition(h,b),!0}(h=d.search(1,Math.floor(a.y),e.hitch(this,function(b){return(b=this._caretController.getPositionFromXY(a.x,a.y-b))&&!g.positionsEqual(b,f)&&b})))&&this._cursorController.setPosition(h.value,b);return!!h},
_handleUpMathScript:function(b,a){if(b.children[2]){var f=c.categorizeNode(b.children[2]);if(0===a[0]&&f===c.CATEGORY.PLACEHOLDER_ROW)return{id:b.children[2].id,offset:0}}},_handleUpMathFraction:function(b,a){if(1===a[0]&&c.categorizeNode(b.children[0])===c.CATEGORY.PLACEHOLDER_ROW){var f=this._caret.getGeometry(),d=this._viewHelper.getNodeGeometry(b.children[1]);if(f.x>d.relativeX+d.w-4)return{id:b.children[0].id,offset:b.children[0].children.length};if(f.x<d.relativeX+4)return{id:b.children[0].id,
offset:0}}},_handleDown:function(b){var a=this._caret.getGeometry(),f=this._cursorController.getPosition(),h=this._equation.getById(f.id);if(h=c.findStructure(h)){var l=this["_handleDown"+h.structure.className];if(l&&(h=l.call(this,h.structure,h.path)))return this._cursorController.setPosition(h,b),!0}(h=d.search(Math.ceil(a.y+a.h+1),this._viewHelper.getRootGeometry().h,e.hitch(this,function(b){return(b=this._caretController.getPositionFromXY(a.x,b))&&!g.positionsEqual(b,f)&&b})))&&this._cursorController.setPosition(h.value,
b);return!!h},_handleDownMathFraction:function(b,a){if(0===a[0]&&c.categorizeNode(b.children[1])===c.CATEGORY.PLACEHOLDER_ROW){var f=this._caret.getGeometry(),d=this._viewHelper.getNodeGeometry(b.children[0]);if(f.x>d.relativeX+d.w-4)return{id:b.children[1].id,offset:b.children[1].children.length};if(f.x<d.relativeX+4)return{id:b.children[1].id,offset:0}}},_handleDownMathScript:function(b,a){var f=c.categorizeNode(b.children[0]);if(2===a[0]&&f===c.CATEGORY.PLACEHOLDER_ROW){var f=this._caret.getGeometry(),
d=this._viewHelper.getNodeGeometry(b.children[2]);if(f.x<d.relativeX+d.w/2)return{id:b.children[0].id,offset:-1};f=this._equation.getParentAndIndex(b);return{id:f.parent.id,offset:f.index+1}}}})})},"MW/equations/editor/utils/CursorUtils":function(){define(["MW/equations/editor/utils/CursorPositionVisitor","MW/equations/editor/utils/NodeUtils"],function(h,e){function g(a,c){return"MathText"===a.className&&e.categorizeNode(c)===e.CATEGORY.ATOM&&(b[c.kind]||0)>(b[a.kind]||0)?!1:!0}function d(a){return"placeholder-atom"===
a["data-category"]?0:a.children?a.children.length:"MathText"===a.className?a.text.length:1}var c=new h,b={symbol:-1,mtext:-2};return{adaptPositionToAtoms:function(a,b,c){if(b){var d=e.categorizeNode(b);"atom"===d?(a.id=b.id,a.offset=b.text.length):"placeholder-atom"===d?(a.id=b.id,a.offset=0):b=null}c&&(d=e.categorizeNode(c),"atom"===d&&(!b||!g(b,c))?(a.id=c.id,a.offset=0):"placeholder-atom"===d&&(a.id=c.id,a.offset=0));return a},availableCursorPosition:function(a){c.visit(a);return c.visitedCounter()},
positionsEqual:function(a,b){return a.id===b.id&&a.offset===b.offset},logicalFromPosition:function(a,b){return c.visit(b,{atom:function(b){if(a.id===b.id)return c.visitedCounter()+a.offset},row:function(b,f){if(a.id===b.id&&f===a.offset)return c.visitedCounter()}})},nodeLength:d,positionFromLogical:function(a,b){return c.visit(b,{atom:function(b){var f=a-c.visitedCounter();if(f<d(b))return{id:b.id,offset:f};if(f===d(b)){var e=c.getNextSibling();if("placeholder"!==c.parentCategory()||!e||g(b,e))return{id:b.id,
offset:f}}},placeholder:function(b,f){if(a===c.visitedCounter())return{id:b.id,offset:f}}})},shouldCursorMergeToLeft:g}})},"MW/equations/editor/utils/CursorPositionVisitor":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/equations/editor/utils/NodeUtils"],function(h,e,g){return h(null,{constructur:function(){},visit:function(d,c){this._callbacks=e.mixin({atom:function(){},placeholder:function(){},row:function(){}},c);this._visitedCounter=0;return this._recurseTree(d)},visitedCounter:function(){return this._visitedCounter},
parentCategory:function(){return this._parentCategory},getNextSibling:function(){return this._currentParent.children[this._currentParentIndex+1]},_recurseTree:function(d){var c,b,a=g.categorizeNode(d);for(b=0;d.children&&b<d.children.length;b+=1){this._currentParent=d;this._currentParentIndex=b;this._parentCategory=a;var f=d.children[b];if(null!==f){if("placeholder"===this._parentCategory&&(c=this._callbacks.row(d,b),void 0===c&&this._placeHolderCanContainCursorAt(d,b)&&(c=this._callbacks.placeholder(d,
b),this._visitedCounter+=1),void 0!==c))return c;var e=g.categorizeNode(f);if("atom"===e){c=this._callbacks.atom(f);if(void 0!==c)return c;this._visitedCounter+=this._atomLength(f);this._visitedCounter+=1;b<d.children.length-1&&(f=this.getNextSibling(),"atom"===g.categorizeNode(f)&&(this._visitedCounter-=1))}else if("placeholder-atom"===e){c=this._callbacks.atom(f);if(void 0!==c)return c;this._visitedCounter+=1}else if("static"!==e&&(c=this._recurseTree(f),void 0!==c))return c}}if("placeholder"===
a){c=this._callbacks.row(d,d.children.length);if(void 0!==c)return c;0===d.children.length?(c=this._callbacks.placeholder(d,0),this._visitedCounter+=1):this._placeHolderCanContainCursorAt(d,d.children.length)&&(c=this._callbacks.placeholder(d,d.children.length),this._visitedCounter+=1)}return c},_atomLength:function(d){return"symbol"===d.kind?1:d.text.length},_placeHolderCanContainCursorAt:function(d,c){var b;if(c===d.children.length)return b=d.children[c-1],b=g.categorizeNode(b),"structure"===b;
b=d.children[c];b=g.categorizeNode(b);return"structure"!==b?!1:0===c?!0:"structure"===g.categorizeNode(d.children[c-1])}})})},"MW/equations/editor/utils/NodeUtils":function(){define("dojo/_base/array dojo/_base/lang MW/equations/editor/utils/MathVariant MW/equations/renderer/model/Symbols MW/equations/renderer/model/utils/NodeFactory mw-utils/Utils".split(" "),function(h,e,g,d,c,b){function a(a){if(a["data-category"])return a["data-category"];switch(a.className){case "MathRoot":return"structure-part";
case "MathAction":case "MathStyle":return"shallow";case "MathRow":return u.PLACEHOLDER_ROW;case "MathText":return u.ATOM}return"structure"}function f(a,b){a["data-category"]=b[0];for(var c=0;c<a.children.length&&c<b.length-1;c+=1)a.children[c]&&(a.children[c]["data-category"]=b[c+1])}function k(a,b,c,f){"undefined"!==typeof c?(b.children=a.children.slice(c,f),a.children.splice(c,f-c)):(b.children=a.children,a.children=[]);b.children.forEach(function(a){a&&(a.parent=b)})}function l(a,b){return h.every(Object.keys(b),
function(c){var f=b[c];return e.isArray(f)?f.length!==a[c].length?!1:h.every(f,function(b,c){var f=a.children[c];return!b?!f:l(f,b)}):f===a[c]})}function n(a,b){"MathText"===a.className&&(0<=r.indexOf(a.kind)&&!a.mathvariant&&""!==b)&&(a.mathvariant=b);if(!a.children)return a;for(var c=0;c<a.children.length;c+=1)if(a.children[c])if("MathStyle"===a.children[c].className){var f=g.add(b,a.children[c].mathvariant);a.children[c].children.forEach(function(b){b&&(b.parent=a,n(b,f))});var d=a.children[c].children.length;
a.children.splice.apply(a.children,[c,1].concat(a.children[c].children));c+=d-1}else a.children[c]=n(a.children[c],b);return a}function p(a){for(var b=0;b<H.length;){var c=(0,H[b])(a);c?(a=c,b=0):b+=1}return a}function m(f){if(!f)return f;f["data-category"]?"placeholder-atom"===f["data-category"]&&"placeholder"!==f.kind&&(f.kind="placeholder"):h.some(v,function(d){if(d=d(f)){if(d["data-category"]===u.STRUCTURE){var e=d,g=d.parent;if(!g||a(g)!==u.PLACEHOLDER_ROW){e=c.createNode("MathRow",{id:b.generateUuid()});
if(g){var h=e,k=g.children.indexOf(d);-1!==k&&(g.children[k]=h,h.parent=g)}e.children=[d];d.parent=e;e["data-category"]=u.PLACEHOLDER_ROW}d=e}f=d;return!0}return!1});f.children&&(f.children=h.map(f.children,m));return f=p(f)}function q(a){return"MathMatrix"===a.className&&a["data-category"]===u.STRUCTURE_PART}var r=["text","number","id"],s=["prod","contourintop","fpartintop","sum","intop"],t={SYMBOL:"symbol",DELIMITER:"delimiter",NUMBER:"number",IDENTIFIER:"id",TEXT:"mtext",WHITESPACE:"whitespace"},
u={ATOM:"atom",PLACEHOLDER_ATOM:"placeholder-atom",PLACEHOLDER_ROW:"placeholder",SHALLOW:"shallow",STATIC:"static",STRUCTURE:"structure",STRUCTURE_PART:"structure-part"},v=[],w={className:"MathScript"};v.push(function(a){if(l(a,w)){var b=!0===a.accent;"auto"===a.accent&&a.children[2]&&(b=null!==a.children[2].getAccent());if(b)return f(a,[u.STRUCTURE,u.PLACEHOLDER_ROW,u.STATIC,u.STATIC]),a}});var x={className:"MathRow",children:[{className:"MathDelimiter"},{},{className:"MathDelimiter"}]};v.push(function(a){if(l(a,
x)){var b=a.children[1];if("MathRow"===b.className&&1===b.children.length){b=b.children[0];if("MathMatrix"!==b.className)return;a.children.splice(1,1,b);b.parent=a}else if("MathMatrix"!==b.className)return;f(a,[u.STRUCTURE,u.STATIC,u.STRUCTURE_PART,u.STATIC]);return a}});v.push(function(a){if(!("MathRow"!==a.className||!a.children||3>a.children.length)){var f=a.children[0],d=a.children[a.children.length-1];if(!("MathDelimiter"!==f.className||"MathDelimiter"!==d.className))return a["data-category"]=
u.STRUCTURE,f["data-category"]=u.STATIC,d["data-category"]=u.STATIC,3<a.children.length||"MathRow"!==a.children[1].className?(f=c.createNode("MathRow",{id:b.generateUuid(),"data-category":u.PLACEHOLDER_ROW}),k(a,f,1,a.children.length-1),f.parent=a,a.children.splice(1,0,f)):(f=a.children[1],f["data-category"]=u.PLACEHOLDER_ROW),a}});v.push(function(a){if("MathRadical"===a.className&&a.children&&2===a.children.length)return f(a,[u.STRUCTURE,u.PLACEHOLDER_ROW,u.PLACEHOLDER_ROW]),a.children[1]&&("MathRow"===
a.children[1].className&&a.children[1].children&&0===a.children[1].children.length)&&(a.children[1]["data-category"]=u.STATIC),a});v.push(function(a){if("MathAction"===a.className&&a.children&&2===a.children.length)return f(a,[u.STRUCTURE,u.PLACEHOLDER_ROW,u.STATIC]),a});v.push(function(a){if("MathScript"===a.className&&a.children&&3===a.children.length&&a.children[1]&&a.children[1].children&&1===a.children[1].children.length&&"MathDelimiter"===a.children[1].children[0].className&&a.children[1].children[0].getAccent())return f(a,
[u.STRUCTURE,u.STRUCTURE_PART,u.STATIC]),a});var A={className:"MathRow",children:[{className:"MathScript",children:[{className:"MathRow",children:[{className:"MathText",kind:"symbol"}]},{},{}]},{className:"MathRow"}]},B={className:"MathScript",children:[{className:"MathRow",children:[{className:"MathText",kind:"symbol"}]},{},{}]};v.push(function(a){var b;if(l(a,A))b=a.children[0];else if(l(a,B))b=a;else return!1;var c;c=b.children[0];c="MathRow"===c.className&&c.children&&1===c.children.length?d.isLargeOpSymbol(c.children[0]):
c&&"MathText"===c.className&&"symbol"===c.kind&&0<=s.indexOf(c.symbolName);if(!c)return!1;f(b,[u.STRUCTURE_PART,u.STATIC,u.PLACEHOLDER_ROW,u.PLACEHOLDER_ROW]);a!==b?f(a,[u.STRUCTURE,u.STRUCTURE_PART,u.PLACEHOLDER_ROW]):f(a,[u.STRUCTURE]);return a});v.push(function(b){if(b.children&&("MathFraction"===b.className||"MathMultiScript"===b.className||"MathScript"===b.className)){b["data-category"]=u.STRUCTURE;var c;for(c=0;c<b.children.length;c+=1)b.children[c]&&a(b.children[c])===u.PLACEHOLDER_ROW&&(b.children[c]["data-category"]=
u.PLACEHOLDER_ROW);return b}});var F={className:"MathRow",children:[{className:"MathRow"},{},{className:"MathRow"}]};v.push(function(a){if(l(a,F)){var b=a.children[1],b=b&&"MathRow"===b.className&&1===b.children.length?b.children[0]:b;if("MathText"===b.className&&"symbol"===b.kind&&"slash"===b.symbolName)return f(a,[u.STRUCTURE,u.PLACEHOLDER_ROW,u.STATIC,u.PLACEHOLDER_ROW]),a}});var G=["contourintop","fpartintop","intop"];v.push(function(b){if(!b.parent||a(b.parent)!==u.PLACEHOLDER_ROW)return!1;if("MathRow"===
b.className&&b.children&&2===b.children.length){var c=b.children[0],c=c&&"MathRow"===c.className&&1===c.children.length?c.children[0]:c;if("MathText"===c.className&&"symbol"===c.kind&&0<=G.indexOf(c.symbolName))return f(b,[u.STRUCTURE,u.STATIC,u.PLACEHOLDER_ROW]),b}});var H=[];H.push(function(b){if(a(b)===u.PLACEHOLDER_ROW)for(var c=0;c<b.children.length;c+=1)if(b.children[c]&&a(b.children[c])===u.PLACEHOLDER_ROW)return b.children[c].children.forEach(function(a){a&&(a.parent=b)}),b.children.splice.apply(b.children,
[c,1].concat(b.children[c].children)),b});H.push(function(a){if(!("MathScript"!==a.className||!a.children||3!==a.children.length))if((!a.children[1]||"MathRow"===a.children[1].className&&0===a.children[1].children.length)&&(!a.children[2]||"MathRow"===a.children[2].className&&0===a.children[2].children.length))return a.children[0]});var I=["id","code","number"];return{CATEGORY:u,TEXT_KIND:t,isMatrix:q,categorizeNode:a,findStructure:function(b){for(var c=[],f,d;b;){if(a(b)===u.STRUCTURE)return{structure:b,
path:c};f=b.parent;if(!f)break;d=f.children.indexOf(b);b=f;c.unshift(d)}},qualifiesAsIdentifier:function(a){return a&&a.isIdentifier()},qualifiesAsOperator:function(a){return d.isOperator(a.symbolName)||d.isOperator(a.text)},isMultiLineEquation:function(a){a=a.children[0];return 1!==a.children.length?!1:"MathMatrix"===a.children[0].className},kindOfText:function(a){return a.match(/^\s+$/)?t.WHITESPACE:0<="~!+*\x3c\x3d\x3e/-,'".indexOf(a)?t.SYMBOL:0<="[](){}".indexOf(a)?t.DELIMITER:d.unicodeMap[a]?
t.SYMBOL:a.match(/^[0-9]+$/)?t.NUMBER:t.IDENTIFIER},categorizeTree:function(a){a=n(a,"");a=m(a);if(!("MathRoot"!==a.className||!a.children||1!==a.children.length)){var b=a.children[0];if(!("MathRow"!==b.className||!b.children||1!==b.children.length)&&"MathMatrix"===b.children[0].className)b["data-category"]=u.STRUCTURE_PART}"MathRoot"!==a.className||(!a.children||1!==a.children.length)||(b=a.children[0],"MathRow"===b.className&&b.children&&!b["data-category"]&&(b["data-category"]=u.PLACEHOLDER_ROW));
return a},isNonEmptyRow:function(a){return a&&"MathRow"===a.className&&a.children&&0<a.children.length},isMatrixWithDelimiters:function(a,b){if(!q(a))return!1;var c=a.parent;if(c&&c.children&&3===c.children.length){var f=c.children[0],c=c.children[2];if(d.isOpeningDelimiter(f.symbolName)&&f.symbolName===b+"left"&&d.isClosingDelimiter(c.symbolName)&&c.symbolName===b+"right")return!0}return!1},matchTemplate:l,isEmptyEquation:function(b){return"MathRoot"!==b.className||1!==b.children.length||1!==b.children[0].children.length||
a(b.children[0].children[0])!==u.PLACEHOLDER_ATOM?!1:!0},mergeIfCompatible:function(b,c,f){"atom"!==a(c)||"atom"!==a(f)||0>I.indexOf(c.kind)||0>I.indexOf(f.kind)||c.kind!==f.kind&&"number"===c.kind||b.mergeNodes(c.id,f.id)}}})},"MW/equations/editor/utils/MathVariant":function(){define([],function(){function h(e,d){var c=e.indexOf(d);0<=c&&e.splice(c,1);return e}function e(e){if(!e)return[];e=e.split("-");return h(e,"normal")}return{add:function(g,d){var c=e(g);0>c.indexOf(d)&&c.push(d);return 0===
c.length?"normal":c.sort().join("-")},remove:function(g,d){var c=e(g),c=h(c,d);return 0===c.length?"normal":c.sort().join("-")}}})},"MW/equations/editor/utils/DirectedSearch":function(){define([],function(){return{search:function(h,e,g){if(h>e){var d=this.search(-h,-e,function(a){return g(-a)});d&&(d.index=-d.index);return d}for(var d={},c=h,b=2,a=!1;h<c-1||!a;){var f=a?Math.round((h+c)/2):c,k=g(f);k?(d.index=f,d.value=k,c=f,a=!0):h=f;if(!a){if(c===e)break;b*=2;c=h+b;c>e&&(c=e)}}return a?d:void 0}}})},
"MW/equations/editor/actions/CursorAction":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","MW/equations/editor/utils/CursorUtils","MW/equations/editor/utils/NodeUtils"],function(h,e,g,d,c){return e(null,{pluginId:"action.cursor",pluginDependencies:["controller.cursor","controller.selection","external.actionservice","model.equation"],constructor:function(b,a,c,d){this._cursorController=b;this._selectionController=a;this._equation=d;b=[{id:"equationeditor.left",enabled:!0,
key:"left",callback:g.hitch(this,"_handleLinearMove",-1)},{id:"equationeditor.selectleft",enabled:!0,key:"shift_left",callback:g.hitch(this,"_handleLinearMove",-1,!0)},{id:"equationeditor.jumpleft",enabled:!0,key:"ctrl_left",callback:g.hitch(this,"_handleJump",-1)},{id:"equationeditor.selectjumpleft",enabled:!0,key:"ctrl_shift_left",callback:g.hitch(this,"_handleJump",-1,!0)},{id:"equationeditor.right",enabled:!0,key:"right",callback:g.hitch(this,"_handleLinearMove",1)},{id:"equationeditor.selectright",
enabled:!0,key:"shift_right",callback:g.hitch(this,"_handleLinearMove",1,!0)},{id:"equationeditor.jumpright",enabled:!0,key:"ctrl_right",callback:g.hitch(this,"_handleJump",1)},{id:"equationeditor.selectjumpright",enabled:!0,key:"ctrl_shift_right",callback:g.hitch(this,"_handleJump",1,!0)},{id:"equationeditor.home",enabled:!0,key:"home",platformKey:{mac:"meta_left"},callback:g.hitch(this,"_searchRowSide",-1,!1)},{id:"equationeditor.selefthome",enabled:!0,key:"shift_home",platformKey:{mac:"meta__shift_left"},
callback:g.hitch(this,"_searchRowSide",-1,!0)},{id:"equationeditor.end",enabled:!0,key:"end",platformKey:{mac:"meta_right"},callback:g.hitch(this,"_searchRowSide",1,!1)},{id:"equationeditor.selectend",enabled:!0,key:"shift_end",platformKey:{mac:"meta_shift_right"},callback:g.hitch(this,"_searchRowSide",1,!0)},{id:"equationeditor.selectall",enabled:!0,key:"ctrl_a",platformKey:{mac:"meta_a"},callback:g.hitch(this,"_selectAll")}];c.loadActions(b)},_handleJump:function(b,a){for(var f=this._cursorController.getPosition(),
d=this._equation.getById(f.id),f=f.offset;d;){var e=c.categorizeNode(d);if("placeholder"===e){var g=f+b;if(0<=g&&g<=d.children.length)return this._cursorController.setPosition({id:d.id,offset:g},a),!0}g="atom"===e&&d.text.length===f;e="atom"===e&&0===f;f=this._equation.getParentAndIndex(d);if(!f)break;d=f.parent;f=f.index;g?f+=1:!e&&-1===b&&(f+=1)}},_selectAll:function(){var b;this._cursorController.hasSelection()&&(b=this._selectionController.getSelectionSpan());this._cursorController.setLogical(0);
var a=this._cursorController.availableCursorPositions()-1;this._cursorController.setLogical(a,!0);return b?(a=this._selectionController.getSelectionSpan(),a.node!==b.node||a.left!==b.left||a.right!==b.right):!0},_handleLinearMove:function(b,a){if(this._cursorController.hasSelection()){var c=this._selectionController.getSelectionSpan();if(a){if(1===b===c.reversed)return c=this._selectionController.getSelectionShrinkPosition(),this._cursorController.setPosition(c,a),!0}else return this._cursorController.setPosition({id:c.id,
offset:-1===b?c.left:c.right}),!0}c=this._cursorController.getLogical();this._cursorController.setLogical(c+b,a);return-1===b?0<c:c<this._cursorController.availableCursorPositions()-1},_searchRowSide:function(b,a){for(var f=this._cursorController.getPosition(),e=f.node,g=-1===b?0:d.nodeLength(e),f=f.offset===g;e;){if("placeholder"===c.categorizeNode(e)){if(!f)return this._cursorController.setPosition({id:e.id,offset:-1===b?0:-1},a),!0;f=!1}e=this._equation.getParentAndIndex(e);if(!e)break;f&&(g=-1===
b?0:e.parent.children.length-1,f=f&&e.index===g);e=e.parent}this._cursorController.setLogical(-1===b?0:this._cursorController.availableCursorPositions()-1)}})})},"MW/equations/editor/actions/CutCopyPasteAction":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/NodeUtils MW/equations/editor/utils/Serializer MW/equations/renderer/model/utils/MathMLUtils MW/equations/renderer/model/utils/NodeFactory MW/equations/renderer/model/utils/TeXUtils mw-log/Log MW/rtc/plugins/cutcopypaste/MIMETypes dojo/i18n!l10n/nls/actions dojo/i18n!l10n/nls/equationEditorActions".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q){return e(c,{pluginId:"action.cutcopypaste",pluginFamily:"actions",pluginDependencies:"api.attributes controller.cursor controller.editmanager controller.selection external.actionservice external.clipboard helper.delete helper.import helper.inserttemplate helper.mimetype model.cursor model.equation view.keyhandler".split(" "),constructor:function(a,b,c,f,e,h,k,l,n,p,G,H,I){this._attributes=a;this._importHelper=l;this._insertTemplateHelper=n;this._mimeTypeHelper=
p;this._deleteHelper=k;this._cursorController=b;this._editmanager=c;this._selectionController=f;this._actionService=e;this._clipboard=h;this._equation=H;this._keyHandler=I;"function"===typeof this._clipboard.getCopyPasteHandlers?(b=this._clipboard.getCopyPasteHandlers(),this._keyHandler.enableBrowserCopyPaste(b)):(this._keyHandler.listenTo("copy",this._preventDefault),this._keyHandler.listenTo("cut",this._preventDefault),this._keyHandler.listenTo("paste",this._preventDefault));b=[{id:"equationeditor.cut",
enabled:!1,key:"ctrl_x",platformKey:{mac:"meta_x"},contextMenuGroup:"copyPaste",text:m.cutLabel,callback:g.hitch(this,"_handleCut")},{id:"equationeditor.copy",enabled:!1,key:"ctrl_c",platformKey:{mac:"meta_c"},contextMenuGroup:"copyPaste",text:m.copyLabel,callback:g.hitch(this,"_handleCopy")},{id:"equationeditor.copy.latex",enabled:!1,text:q.copyLaTeX,contextMenuGroup:"copyPaste",callback:g.hitch(this,"_handleCopyLaTeX")},{id:"equationeditor.copy.mathml",enabled:!1,text:q.copyMathML,contextMenuGroup:"copyPaste",
callback:g.hitch(this,"_handleCopyMathML")},{id:"equationeditor.paste",enabled:!0,key:"ctrl_v",platformKey:{mac:"meta_v"},contextMenuGroup:"copyPaste",text:m.pasteLabel,callback:g.hitch(this,"_handlePaste")},{id:"equationeditor.paste.latex",enabled:!0,contextMenuGroup:"copyPaste",text:q.pasteLaTeX,callback:g.hitch(this,"_handlePasteAs","tex")},{id:"equationeditor.paste.mathml",enabled:!0,contextMenuGroup:"copyPaste",text:q.pasteMathML,callback:g.hitch(this,"_handlePasteAs","mathml")}];e.loadActions(b);
this.own(a.observe("readonly",g.hitch(this,"_updateActions")));this.own(d.after(G,"onChange",g.hitch(this,"_updateActions")))},_updateActions:function(){var a=this._attributes.get("readonly"),c=this._cursorController.hasSelection(),f=b.isEmptyEquation(this._equation.getRoot());this._actionService.updateAction("equationeditor.cut",{enabled:c&&!a});this._actionService.updateAction("equationeditor.copy",{enabled:c});this._actionService.updateAction("equationeditor.copy.latex",{enabled:!f});this._actionService.updateAction("equationeditor.copy.mathml",
{enabled:!f});this._actionService.updateAction("equationeditor.paste",{enabled:!a});this._actionService.updateAction("equationeditor.paste.latex",{enabled:!a})},_preventDefault:function(a){a.preventDefault()},_handleCut:function(){n.assert(this._cursorController.hasSelection(),"Equation should have selection");this._handleCopy();this._editmanager.createBlock(g.hitch(this,function(a){this._deleteHelper.deleteSelection(a)}));return!0},_handleCopy:function(){var a=this._mimeTypeHelper.convertSelection();
this._clipboard.setClipboardData(a).then(function(){},function(){});return!0},_getSelectedNodes:function(){n.assert(!b.isEmptyEquation(this._equation.getRoot()),"Equation should not be empty");if(!this._cursorController.hasSelection())return[this._equation.getRoot()];var a=this._selectionController.getSelectionSpan();if("MathRow"===a.node.className)var c=a.node.children.slice(a.left,a.right);else"MathText"===a.node.className&&(c=[k.createNode("MathText",g.mixin(a.node.getContents(),{text:a.node.text.substring(a.left,
a.right)}))]);return c},_handleCopyLaTeX:function(){var a=l.exportLaTeX(this._getSelectedNodes(),{attribBlackList:["id","data-category"]});this._clipboard.setClipboardData([{flavor:p.TEXT,content:a}])},_handleCopyMathML:function(){var a=f.exportMathML(this._getSelectedNodes(),{attribBlackList:["id","data-category"]});this._clipboard.setClipboardData([{flavor:p.TEXT,content:a}])},_handlePaste:function(){if(!this._attributes.get("readonly")){var a=this._mimeTypeHelper.acceptedMimeTypes();this._clipboard.getClipboardData(a).then(g.hitch(this,
function(a){0!==h.filter(Object.keys(a),function(b){return a[b]}).length&&this._editmanager.createBlock(g.hitch(this,function(b){this._cursorController.hasSelection()&&this._deleteHelper.deleteSelection(b);this._mimeTypeHelper.insertContent(b,a)}))}));return!0}},_handlePasteAs:function(c){this._attributes.get("readonly")||this._clipboard.getClipboardData(["text/plain"]).then(g.hitch(this,function(f){if(f=this._importHelper.importModel(f["text/plain"],c)){f=b.categorizeTree(f);var d=a.serializeRange(f.children[0]);
this._editmanager.createBlock(g.hitch(this,function(a){this._insertTemplateHelper.insertTemplate(a,d)}))}}))}})})},"MW/equations/editor/utils/EquationPlugin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect"],function(h,e,g){return h(null,{constructor:function(){},own:function(d){this._ownHandles||(this._ownHandles=[g.after(this,"destroy",e.hitch(this,function(){this._ownHandles.forEach(function(c){c.remove()})}))]);this._ownHandles.push(d)},destroy:function(){}})})},"MW/equations/editor/utils/Serializer":function(){define(["dojo/_base/array",
"dojo/_base/lang","MW/equations/editor/utils/NodeUtils"],function(h,e,g){function d(a){var c={};b.forEach(function(b){a.hasOwnProperty(b)&&(c[b]=a[b])});return c}function c(a){if(!a)return["Null"];var b=a.className,e=d(a),l=[];a.children&&(l=h.filter(a.children,function(a){return!a||g.categorizeNode(a)!==g.CATEGORY.PLACEHOLDER_ATOM}),l=h.map(l,function(a){return c(a)}));return[b,e,l]}var b="accent accentunder actiontype bevelled class close cols colspec data-category displaystyle inline kind length limitStyle linethickness mathsize mathvariant numPostPairs open rows style stretchy symbolName text".split(" ");
return{INTERESTING_ATTRIBUTES:b,serializeRange:function(a,b,h){var l=[],n=g.categorizeNode(a);b=b||0;if("atom"===n)"undefined"===typeof h&&(h=a.text.length),l.push(["MathText",e.mixin(d(a),{text:a.text.substr(b,h-b)})]);else if("placeholder"===n||"structure-part"===n){"undefined"===typeof h&&(h=a.children.length);for(;b<h;b+=1)n=g.categorizeNode(a.children[b]),n!==g.CATEGORY.PLACEHOLDER_ATOM&&l.push(c(a.children[b]))}return l}}})},"MW/equations/editor/actions/DeleteAction":function(){define("dojo/_base/declare dojo/_base/lang MW/equations/editor/utils/CursorUtils MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/IteratorConstants MW/equations/editor/utils/NodeUtils".split(" "),
function(h,e,g,d,c,b){return h(d,{pluginId:"action.delete",pluginDependencies:"api.attributes controller.editmanager controller.cursor controller.keyhandler external.actionservice helper.delete model.cursor model.equation".split(" "),constructor:function(a,b,c,d,g,h,m,q){this._attributes=a;this._deleteHelper=h;this._editmanager=b;this._cursor=m;this._equation=q;this._cursorController=c;a=[{id:"equationeditor.backspace",key:"backspace",keyPriority:-1,enabled:!0,callback:e.hitch(this,"_handleDelete",
-1)},{id:"equationeditor.delete",enabled:!0,key:"delete",callback:e.hitch(this,"_handleDelete",1)}];g.loadActions(a)},_handleDelete:function(a){if(!this._attributes.get("readonly")){if(!this._cursor.hasSelection()&&this._deleteHelper.handleDelete(a))return!0;this._editmanager.createBlock(e.hitch(this,function(b){if(this._cursor.hasSelection())return this._deleteHelper.deleteSelection(b);var c=this._cursor.getPosition(),d=this._equation.getById(c.id);this._delete(b,a,d,c.offset)}));return!0}},_delete:function(a,
c,d,e){var h=b.categorizeNode(d);e=-1===c?e-1:e;"atom"===h?0<=e&&e<d.text.length?this._deleteHelper.deleteInAtom(a,d,e,1):(h=-1===c?this._equation.getPreviousSibling(d):this._equation.getNextSibling(d))?(e=-1===c?g.nodeLength(h):0,this._delete(a,c,h,e)):this._findAndSelectStructure(d):"placeholder"===h&&0<=e&&e<d.children.length?this._delete(a,c,d.children[e],0):"structure"===h?this._shouldSelectStructure(d)?this._selectStructure(d):a.deleteNode(d.id):this._findAndSelectStructure(d)},_shouldSelectStructure:function(a){return"MathDelimiter"!==
a.className&&"MathText"!==a.className&&"MathSpace"!==a.className},_selectStructure:function(a){a=this._equation.getParentAndIndex(a);this._cursorController.setPosition({id:a.parent.id,offset:a.index});this._cursorController.setPosition({id:a.parent.id,offset:a.index+1},!0)},_findAndSelectStructure:function(a){(a=this._findStructure(a))&&this._selectStructure(a)},_findStructure:function(a){return this._equation.iterate({start:a,direction:c.UP,structure:function(a,b){b.stop(a)}})}})})},"MW/equations/editor/utils/IteratorConstants":function(){define([],
function(){return{UP:"up*",DOWN:"children",DOWN_RIGHT_UP:"children ((right + children)* up)*",RIGHT_LEFT_DOWN_UP:"((right + children)* (left + children)* up)*"}})},"MW/equations/editor/actions/DragAndDropAction":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-geometry","dojo/on","MW/equations/editor/utils/EquationPlugin"],function(h,e,g,d,c){return h(c,{pluginId:"action.draganddrop",pluginFamily:"actions",pluginDependencies:"controller.caret controller.cursor controller.editmanager controller.mouse controller.selection helper.delete helper.mimetype view.selection view.keyhandler view.rootnode".split(" "),
constructor:function(b,a,c,g,h,n,p,m,q,r){this._deleteHelper=n;this._caretController=b;this._cursorController=a;this._editmanager=c;this._selectionController=h;this._mimeTypeHelper=p;this._rootNode=r;this._selectionView=m;this._keyHandler=q;this._selectionView.getNode().draggable="true";this._mouseController=g;this.own(this._mouseController.addMouseDown(e.hitch(this,"_handleMouseDown"),1));this.own(this._mouseController.addMouseMove(e.hitch(this,"_handleMouseMove"),1));this.own(d(r,"mouseup",e.hitch(this,
"_handleMouseUp")));this.own(d(r,"dragstart",e.hitch(this,"_handleDragStart")));this.own(d(r,"dragover",e.hitch(this,"_handleDragOver")));this.own(d(r,"drop",e.hitch(this,"_handleDrop")));this.own(d(r,"dragend",e.hitch(this,"_handleDragEnd")))},_handleDragStart:function(b){this._dragging?this._mimeTypeHelper.convertSelection().forEach(function(a){b.dataTransfer.setData(a.flavor,a.content)}):b.preventDefault()},_handleDragOver:function(b){var a=this._caretController.getPositionFromAbsoluteXY(b.pageX,
b.pageY);a&&(this._dragPosition=a,this._caretController.drawCaretAt(a),b.preventDefault())},_handleDrop:function(b){this._dragging=!1;b.stopPropagation();b.preventDefault();this._editmanager.createBlock(e.hitch(this,function(a){var c=this._cursorController.hasSelection()&&this._selectionController.getSelectionSpan();this._cursorController.setPosition(this._dragPosition);c&&!b.ctrlKey&&this._deleteHelper.deleteRange(a,c);var d={};this._mimeTypeHelper.acceptedMimeTypes().forEach(function(a){var c=b.dataTransfer.getData(a);
c&&(d[a]=c)});this._mimeTypeHelper.insertContent(a,d)}));window.setTimeout(e.hitch(this._keyHandler,"focus"),0)},_handleDragEnd:function(){this._dragging=!1;this._caretController.redraw()},_handleMouseDown:function(b){if(b.target&&"selection"===b.target.className&&0===b.button)return this._dragging=!0},_handleMouseMove:function(b){return this._dragging},_handleMouseUp:function(b){if(this._dragging){this._dragging=!1;var a=g.position(this._rootNode,!0);this._caretController.fromXY(b.pageX-a.x,b.pageY-
a.y,b.shiftKey);this._lastX=b.pageX;this._lastY=b.pageY}}})})},"MW/equations/editor/actions/InsertTemplateAction":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","MW/equations/editor/utils/Serializer","MW/equations/editor/utils/Templates"],function(h,e,g,d,c){return e(null,{pluginId:"action.inserttemplate",pluginFamily:"actions",pluginDependencies:["controller.editmanager","external.actionservice","helper.inserttemplate"],constructor:function(b,a,f){this._editmanager=
b;this._insertTemplateHelper=f;var d=c.getById();b=h.map(Object.keys(d),function(a){a=d[a];return g.mixin({enabled:!0,callback:g.hitch(this,"_insertTemplate",a.template)},a.attributes,{id:"equationeditor.insert."+a.attributes.id})},this);a.loadActions(b)},_insertTemplate:function(b){this._editmanager.createBlock(g.hitch(this,function(a){this._insertTemplateHelper.insertTemplate(a,b)}))}})})},"MW/equations/editor/utils/Templates":function(){define(["dojo/_base/array","MW/equations/utils/XMLParser",
"dojo/text!./Templates.xml"],function(h,e,g){function d(a){var b={};h.forEach(a.attributes,function(a){0<=p.indexOf(a.nodeName)?b[a.nodeName]=parseInt(a.nodeValue,10):0<=m.indexOf(a.nodeName)?b[a.nodeName]="true"===a.nodeValue:b[a.nodeName]=a.nodeValue});return b}function c(a){var b=h.filter(a.childNodes,function(a){return"#text"!==a.nodeName}),b=h.map(b,c);return[a.nodeName,d(a),b]}function b(a,b,c){c=c||[];return[a,b,c]}function a(){q.forEach(function(a){var c=a;a instanceof Array&&(c=a[0],a=a[1]);
c={id:c};a=b("MathText",{kind:"symbol",symbolName:a,"data-category":"structure"});r.push({attributes:c,template:a})})}function f(){if(!r){for(var f=[],h=(new e).parseString(g).documentElement.firstElementChild;h;){var k=d(h),m=c(h.firstElementChild);f.push({attributes:k,template:m});h=h.nextElementSibling}r=f;a();f=l;h=n;for(k=0;k<f;k+=1)for(m=0;m<h;m+=1){for(var p=k+1,q=m+1,s=void 0,u=void 0,t=[],s=0;s<p;s+=1)for(u=0;u<q;u+=1)t.push(b("MathRow",{"data-cursor":u+s*p,"data-category":"placeholder"}));
s=b("MathMatrix",{"data-category":"structure-part",rows:p,cols:q},t);u=b("MathDelimiter",{symbolName:"bracketleft","data-category":"static"});t=b("MathDelimiter",{symbolName:"bracketright","data-category":"static"});s=b("MathRow",{"data-category":"structure"},[u,s,t]);u={id:"matrix"+p+"x"+q};1===p&&1===q&&(u["command-id"]="matrix,matrix1x1");r.push({attributes:u,template:s})}}return r}function k(){t||(t={},u=[],f().forEach(function(a){a.attributes.hasOwnProperty("command-id")?a.attributes["command-id"].split(",").forEach(function(b){t[b]=
a;u.push(b)}):(t[a.attributes.id]=a,u.push(a.attributes.id))}));return t}var l=10,n=10,p=["data-cursor","cols","rows"],m=["accent","accentunder","bevelled","stretchy"],q=["alpha","beta","gamma","delta","epsilon","varepsilon","zeta","eta","theta","vartheta","iota","kappa","lambda","mu","nu","xi","omicron","pi","varpi","rho","varrho","sigma","varsigma","tau","upsilon","phi","varphi","chi","psi","omega","Alpha","Beta","Gamma","Delta","Epsilon","Zeta","Eta","Theta","Iota","Kappa","Lambda","Mu","Nu","Xi",
"Omicron","Pi","Rho","Sigma","Tau","Upsilon","Phi","Chi","Psi","Omega","pm","mp","times","div","cdot","ast","star","dagger","ddagger","amalg","cap","cup","uplus","sqcap","sqcup",["vee","lor"],["wedge","land"],"setminus","wr","circ","bullet","oslash","odot","bigcirc","bigtriangleup","bigtriangledown","triangleleft","triangleright","oplus","ominus","otimes",["bot","uptack"],["top","downtack"],["sumop","sum"],["prodop","prod"],"intop",["ointop","contourintop"],"biguplus","bigoplus","bigvee","bigcap",
"bigotimes","bigwedge","bigcup","bigodot","bigsqcup",["lt","\x3c"],["gt","\x3e"],"leq","geq","ll","gg","neq","noteq","doteq","sim","simeq","approx",["asymp","asympeq"],"cong","equiv","subset","supset","subseteq","supseteq","sqsubseteq","sqsupseteq","in","ni","notin","models","vdash","dashv","perp","mid","parallel","propto","bowtie","prec","preceq","succ","succeq","notlt","notgt","notleq","notgeq","notequiv","notapprox","notcong","notsim","notsimeq","notmodels","notni","notsucc","notsucceq","notprec",
"notpreceq","notparallel","notsubset","notsupset","notsubseteq","notsupseteq","leftarrow","rightarrow","uparrow","Leftarrow","Rightarrow","Uparrow","longleftarrow","longrightarrow","downarrow","Longleftarrow","Longrightarrow","Downarrow","hookleftarrow","hookrightarrow","updownarrow","leftharpoondown","rightharpoondown","Updownarrow","leftharpoonup","rightharpoonup","leftrightarrow","swarrow","nearrow","Leftrightarrow","nwarrow","searrow","longleftrightarrow","mapsto","longmapsto","Longleftrightarrow",
["lbrace","braceleft"],["rbrace","braceright"],["vert","verticalbar"],["lbrack","bracketleft"],["rbrack","bracketright"],["Vert","dblverticalbar"],["langle","anglebracketleft"],["rangle","anglebracketright"],"backslash",["lceil","ceilleft"],["rceil","ceilright"],["lfloor","floorleft"],["rfloor","floorright"],"aleph","infty","forall","wp","nabla","exists","angle","partial","emptyset","triangle","Im","imath","hbar","Re","jmath","prime","ldots","ell",["colon","colonPunct"],"cdots","neg","ddots","surd",
"ldotp","vdots",["to","rightarrow"],["gets","leftarrow"]],r,s,t,u;return{getById:function(){s||(s={},f().forEach(function(a){a.attributes.id&&(s[a.attributes.id]=a)}));return s},getByCommandId:k,getCommands:function(){t||k();return u}}})},"MW/equations/editor/actions/InsertTextAction":function(){define("dojo/_base/declare dojo/_base/lang MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/MathVariant MW/equations/editor/utils/NodeUtils MW/equations/renderer/model/Symbols".split(" "),
function(h,e,g,d,c,b){return h(g,{pluginId:"action.inserttext",pluginDependencies:"api.attributes controller.cursor controller.editmanager controller.keyhandler helper.delete helper.insert model.equation".split(" "),constructor:function(a,b,c,d,g,h,m){this._attributes=a;this._deleteHelper=g;this._insertHelper=h;this._editmanager=c;this._cursorController=b;this._equation=m;this.own(d.addTypeHandler(e.hitch(this,"insert")))},insert:function(a){if(!this._attributes.get("readonly")){var f;this._editmanager.createBlock(e.hitch(this,
function(d){this._cursorController.hasSelection()&&this._deleteHelper.deleteSelection(d);var e=this._cursorController.getPosition(),g=e.node,h=c.kindOfText(a);if(h===c.TEXT_KIND.WHITESPACE)h=c.TEXT_KIND.TEXT,a="\u2009";else if(h===c.TEXT_KIND.DELIMITER){e=this._insertHelper.getInsertPosition(d);f=d.insertNode(e.id,e.offset,"MathDelimiter",{symbolName:b.getSymbolName(a)});return}var m={kind:h,text:a},m=this._insertHelper.prepareTextAttributes(m,g,e.offset);"symbol"===m.kind&&(m.symbolName=b.getSymbolName(a));
this._nodeMatches(g,m)?(f=g,d.replaceText(e.id,e.offset,0,a)):("placeholder"===c.categorizeNode(g)&&(g=g.children[e.offset-1]),"mtext"!==h&&this._insertHelper.autoRemoveSpace(d,g,m),e=this._insertHelper.getInsertPosition(d),f=d.insertNode(e.id,e.offset,"MathText",m))}));this.onTextInserted(a,f)}},onTextInserted:function(a,b){},_nodeMatches:function(a,b){return"placeholder-atom"===a["data-category"]||"MathText"!==a.className||"symbol"===a.kind?!1:a.kind===b.kind||"code"===a.kind&&"id"===b.kind||"id"===
a.kind&&"code"===b.kind}})})},"MW/equations/editor/actions/LaTeXCommandsAction":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/NodeUtils MW/equations/editor/utils/Templates".split(" "),function(h,e,g,d,c,b,a){return e(c,{pluginId:"action.latexcommands",pluginFamily:"actions",pluginDependencies:"action.inserttext controller.cursor controller.editmanager controller.keyhandler external.actionservice helper.insert model.equation".split(" "),
constructor:function(b,c,e,h,p,m,q){this._insertHelper=m;this._insertTextAction=b;this._cursorController=c;this._actionService=p;this._editManager=e;this._equation=q;this.own(d.after(b,"onTextInserted",g.hitch(this,"_handleTextInserted"),!0));b=[{id:"equationeditor.enter",keyPriority:10,enabled:!0,key:"enter",callback:g.hitch(this,"_handleEnter")}];p.loadActions(b);this.own(h.add("{",g.hitch(this,"_handleCurlyBrace")),10);this._templates=a.getByCommandId()},_handleCurlyBrace:function(){return this._detectAndExecuteCommand()},
_handleEnter:function(){return this._detectAndExecuteCommand()},_handleTextInserted:function(a,c){var d=this._equation.getPreviousSibling(c);d&&"atom"===b.categorizeNode(d)&&this._executeCommand(d,c)},_detectAndExecuteCommand:function(){var a=this._cursorController.getPosition(),c=a.node;if("atom"===b.categorizeNode(c)&&a.offset===c.text.length)return this._executeCommand(c)},_executeCommand:function(a,b){var c=this._equation.getPreviousSibling(a);if(c&&"MathText"===c.className&&"backslash"===c.symbolName)return this.handleLaTeXCommand(a,
a.text,b),!0},getLaTeXCommands:function(){var a=Object.keys(this._templates);return h.filter(a,function(a){return a.match(/^[a-z]/i)}).sort(function(a,b){return a.toLowerCase()===b.toLowerCase()?a.localeCompare(b):a.toLowerCase().localeCompare(b.toLowerCase())})},handleLaTeXCommand:function(a,b,c){this._templates[b]&&this._editManager.createBlock(g.hitch(this,function(d){var e=this._templates[b].template;if("MathText"===a.className&&"backslash"!==a.symbolName){var g=this._equation.getPreviousSibling(a);
g&&d.deleteNode(g.id)}g=this._equation.getParentAndIndex(a);d.deleteNode(a.id);e=this._insertHelper.insertTemplate(d,e,g.parent,g.index);0<e.length&&c&&(g=this._equation.getParentAndIndex(c),d.moveChildren(e[0].id,0,g.parent.id,g.index,g.index+1))}))}})})},"MW/equations/editor/actions/LaTeXCompletionAction":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred MW/equations/editor/utils/EquationPlugin MW/rtc/plugins/completionpopup/CompletionPopup".split(" "),function(h,e,
g,d,c,b){return h(c,{pluginId:"action.latexcompletion",pluginFamily:"actions",pluginDependencies:"action.inserttext action.latexcommands controller.focus external.actionservice model.equation view.caret view.keyhandler".split(" "),constructor:function(a,b,c,d,h,p,m){this._equation=h;this._latexCommandsActions=b;this._focusController=c;this._insertTextAction=a;this._actionService=d;this._caret=p;this.own(g.after(a,"onTextInserted",e.hitch(this,"_handleTextInserted"),!0));this._keyHandler=m},_handleTextInserted:function(a,
b){"\\"===a&&this._showCompletion(b)},_getCompletions:function(a){var b=this._latexCommandsActions.getLaTeXCommands(),b=b.filter(function(b){return b.slice(0,a.length)===a});return b.map(function(a){return{popupCompletion:a}})},_showCompletion:function(a){var c="",d=e.hitch(this,function(){t.removePopup();var a=this._getCompletions(c);0===a.length?r():t.showPopup(a,g,c)}),g=e.hitch(this,function(b){var d=a;""!==c&&(d=this._equation.getNextSibling(a)||a);this._latexCommandsActions.handleLaTeXCommand(d,
b.popupCompletion);this._keyHandler.focus()}),h=e.hitch(this,function(){this._actionService.executeAction("equationeditor.backspace");""===c?r():(c=c.substr(0,c.length-1),d())}),p=e.hitch(this,function(a){c+=a;this._insertTextAction.insert(a);d()}),m,q=e.hitch(this,function(){m=m||this._focusController.add("popup")}),r=e.hitch(this,function(){m&&(m.remove(),m=null)}),s=this._caret.getNode(),t=new b(s,q,r,p,h);t.showPopup(this._getCompletions(""),g)}})})},"MW/rtc/plugins/completionpopup/CompletionPopup":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/dom-class dojo/i18n!l10n/nls/tabcompletion dojo/keys dojo/on mw-log/Log ./CompletionPopupMenu".split(" "),
function(h,e,g,d,c,b,a,f,k,l){return e(null,{_TAB_COMPLETION_POPUP_ID:"tabCompletionDijitPopup",STATUS_ENUM:{STATUS_TOO_MANY_MATCHES:"TOO_MANY_MATCHES",STATUS_NO_MATCHES:"NO_MATCHES"},_isMenuCreated:!1,DISMISSAL_CHARS:" (.'",constructor:function(a,b,c,f,d){this._charKeyTypedCallback=f;this._backspaceTypedCallback=d;this._popupArguments={around:a,openCallback:b,closeCallback:c,orient:["below","above"]}},showStatusPopup:function(a){this._isMenuCreated||(this._popup=this._buildPopupMenu(),a===this.STATUS_ENUM.STATUS_NO_MATCHES?
this._popup=this._addStatusMessage(this._popup,"noCompletionsFound"):a===this.STATUS_ENUM.STATUS_TOO_MANY_MATCHES&&(this._popup=this._addStatusMessage(this._popup,"tooManyCompletionsFound")),this._displayPopup())},showPopup:function(a,b,c){this._isMenuCreated||(this._popup=this._buildPopupMenu(c),this._popup=this._addCompletionEntries(this._popup,a,b),this._displayPopup())},removePopup:function(){this._isMenuCreated&&this._popup&&(this._isMenuCreated=!1,this.suffix=null,this._popup.closePopup(),this._popup.destroyRecursive())},
_displayPopup:function(){this._popup.openPopup(this._popupArguments);this._popup.reorient();this._popup.domNode.parentElement&&(this._popup.domNode.parentElement.setAttribute("data-popupID","tabCompletionPopup"),c.add(this._popup.domNode.parentElement,"layeredNode"))},_addStatusMessage:function(c,e){var h=b[e],k=c.createPopupItem(h,"popupItem message");c.addChild(h,k);c.own(f(k,"keydown, click",d.hitch(this,function(b){this.removePopup();(b.keyCode===a.TAB||!b.ctrlKey&&b.keyCode===a.ENTER)&&g.stop(b)})));
return c},_handleKeyDown:function(b,c,f){if(f.keyCode===a.TAB||!f.ctrlKey&&f.keyCode===a.ENTER)this.removePopup(),c.getSelectedChild()&&b(),g.stop(f)},_addCompletionEntries:function(a,b,c){b.forEach(function(b){var e=a.createPopupItem(b.popupCompletion,"popupItem code"),g=d.hitch(this,c,b);a.own(f(e,"keydown",d.hitch(this,"_handleKeyDown",g,a)));a.own(f(e,"click",g));a.addChild(b.popupCompletion,e)},this);return a},_ignoreTabs:function(b){b.keyCode===a.TAB&&g.stop(b)},_handleCharTyped:function(a,
b,c){this.suffix=this.suffix?this.suffix+c:c;this._updateSelection(a,b,this.suffix);this._charKeyTypedCallback&&this._charKeyTypedCallback(c)},_handleBackspace:function(a,b){if(!this.suffix||0===this.suffix.length)a.onExecute();else this.suffix=this.suffix.substring(0,this.suffix.length-1),this._updateSelection(a,b,this.suffix);this._backspaceTypedCallback&&this._backspaceTypedCallback()},_buildPopupMenu:function(b){var c=b||"";this.suffix=null;this._isMenuCreated=!0;var e=new l({popupId:this._TAB_COMPLETION_POPUP_ID,
focusCallBack:this._popupArguments.closeCallback,positionArgs:this._popupArguments});e.startup();f(e,"keypress",d.hitch(this,function(a){this._isKeyCharPrintable(a.keyChar)&&(this._handleCharTyped(e,c,a.keyChar),g.stop(a))}));f(e.domNode,"keydown",d.hitch(this,function(b){var f=b.keyCode;this._isKeyNotPrintable(b)?g.stop(b):this._isKeyBackspace(f)?(this._handleBackspace(e,c),g.stop(b)):this._isKeySpace(f)?(this._handleCharTyped(e,c," "),g.stop(b)):f===a.ENTER&&g.stop(b)}));f(e,"keyup",d.hitch(this,
function(b){var c=b.keyCode;c===a.LEFT_ARROW||c===a.RIGHT_ARROW?this.removePopup():this._isKeyNotPrintable(b)&&g.stop(b)}));e.connect(e,"closePopup",d.hitch(this,function(){this.removePopup()}));return e},_updateSelection:function(a,b,c){var f=(b+c).toLowerCase();b=!1;-1!==this.DISMISSAL_CHARS.indexOf(f.charAt(f.length-1))&&(f=f.substring(0,f.length-1),b=!0);var d;h.forEach(a.getChildren(),function(b){!d&&b.label.toLowerCase().substring(0,f.length)===f&&(a.focusChild(b),d=b)},this);if(d&&d.label.length===
f.length&&b)a.onExecute();(b||!d)&&a.closePopup()},_isKeyBackspace:function(b){return b===a.BACKSPACE},_isKeySpace:function(b){return b===a.SPACE},_isKeyCharPrintable:function(a){return void 0!==a&&""!==a},_isShiftPressAndInvalidKey:function(a){return a.shiftKey&&void 0===a.keyCode},_isKeyNotPrintable:function(b){return b.ctrlKey||b.altKey||b.metaKey||b.keyCode===a.DELETE&&""===b.keyChar||this._isShiftPressAndInvalidKey(b)}})})},"MW/rtc/plugins/completionpopup/CompletionPopupMenu":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/_base/window dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/i18n!l10n/nls/tabcompletion dojo/keys dojo/window dojo/query dojo/on dojo/text!./CompletionPopupMenu.html dijit/_TemplatedMixin dijit/layout/ContentPane dijit/popup dijit/registry mw-log/Log".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A){return e([v,u],{_savedFocusNode:null,_focusCallback:null,_popupMenuClosed:!1,_selectedItem:null,_positionArgs:null,_NUMBER_OF_ELEMENTS_IN_MENU:9,_ELEMENT_HEIGHT_IN_MENU:21,constructor:function(a){this._setTemplate(a);this._cleanupOldPopups();this.id="tabCompletionPopupMenu";this._popupId=a&&a.popupId||null;this._dijitPopup=w;this._items=[];this._positionArgs=a&&a.positionArgs;this._focusCallback=a&&a.closeCallback},_setTemplate:function(a){this._maxHeight=
a&&a.maxHeight||this._NUMBER_OF_ELEMENTS_IN_MENU*this._ELEMENT_HEIGHT_IN_MENU;this.tabIndex=0;this.templateString="\x3cdiv\x3e"+t+"\x3c/div\x3e"},_cleanupOldPopups:function(){var a=r('[widgetid^\x3d"tabCompletionPopupMenu"]');h.forEach(a,function(a){x.byNode(a).destroyRecursive()},this)},_injectPopup:function(a){this._dijitPopup=a},postCreate:function(){this.inherited(arguments);this.connect(this,"onClose",d.hitch(this,function(){this._popupMenuClosed=!0}));this.own(s(this.domNode,"keydown",d.hitch(this,
function(a){var b;if(a.keyCode===m.UP_ARROW)b=this._getNextItemByOffset(-1);else if(a.keyCode===m.DOWN_ARROW)b=this._getNextItemByOffset(1);else if(a.keyCode===m.PAGE_UP)b=this._getNextItemByOffset(-this._NUMBER_OF_ELEMENTS_IN_MENU);else if(a.keyCode===m.PAGE_DOWN)b=this._getNextItemByOffset(this._NUMBER_OF_ELEMENTS_IN_MENU);else if(a.keyCode===m.ESCAPE){g.stop(a);this.closePopup();return}b&&(this.focusChild(b),a.preventDefault())})));f.add(this.domNode,"dijit dijitMenu dijitMenuPassive dijitReset tabCompletionPopupMenu");
n.set(this.domNode,{maxHeight:this._maxHeight+"px"});a.set(this.domNode,"tabindex",0)},openPopup:function(a){A.assert(a,"Please specify the 'around' and 'orient' arguments");a.around?a.orient||A.error("'Orient' parameter not specified, default will be used"):A.error("Specify the 'around' parameter for positioning the popup.");this._popupMenuClosed=!1;this._openCallback=(this._positionArgs=a)&&a.openCallback;this._closeCallback=a&&a.closeCallback;this._scheduleOpen(a);this.focusFirstChild()},reorient:function(){this._popupMenuClosed||
(this._closeAndRestoreFocus(),this._openMyself(this._positionArgs),this._popupMenuClosed=!1,this.focusFirstChild())},_ignoreTabs:function(a){a.keyCode===m.TAB&&g.stop(a)},_lookup:function(a){this._localization||(this._localization=p);return this._localization[a]},_scheduleOpen:function(a){this._openTimer||(this._openTimer=setTimeout(d.hitch(this,function(){delete this._openTimer;this._openMyself(a)}),1))},_getRelativePopupPosition:function(a){var b=q.getBox(),c=l.position(a.around);a.orient=a.orient||
["below","above"];c.y+this._maxHeight<b.h||(a.orient=["above","below"]);return a},onExecute:function(){this.closePopup()},onCancel:function(){this.closePopup()},_openMyself:function(a){if(this.domNode){var c=this._focusManager.get("prevNode"),e=this._focusManager.get("curNode");this._savedFocusNode=!e||b.isDescendant(e,this.domNode)?c:e;a=this._getRelativePopupPosition(a);this._dijitPopup.open({popup:this,around:a.around,onExecute:d.hitch(this,"closePopup"),onCancel:d.hitch(this,"closePopup"),orient:a.orient});
this._popupId&&this._dijitPopup.getTopPopup().wrapper&&f.add(this._dijitPopup.getTopPopup().wrapper,this._popupId);this.focus();this._openCallback&&this._openCallback()}},_onBlur:function(){this.inherited("_onBlur",arguments);this.closePopup()},_closeAndRestoreFocus:function(){this._savedFocusNode&&this._savedFocusNode.focus&&this._savedFocusNode.focus();this._dijitPopup&&this._dijitPopup.close(this);this._closeCallback&&this._closeCallback()},closePopup:function(){this._closeAndRestoreFocus()},focus:function(){this._selectedItem?
this.focusChild(this._selectedItem):this.focusFirstChild()},focusChild:function(a){a&&!(0>this._items.indexOf(a))&&(a.domNode.focus(),this.unSelectChild(this._selectedItem),this.selectChild(a))},focusFirstChild:function(){this._items.length&&this.focusChild(this._items[0])},blurChild:function(a){a&&!(0>this._items.indexOf(a))&&(a.domNode.blur(),this.unSelectChild(a))},unSelectChild:function(a){a&&(f.remove(a.domNode,"selected"),this._selectedItem=null,this._backupItem=a)},selectChild:function(a){a&&
(f.add(a.domNode,"selected"),this._selectedItem=a)},addChild:function(a,b){this._items.push({label:a,domNode:b});k.place(b,this.containerNode,"last")},_getIndexByOffset:function(a,b,c){a+=b;return a>c-1?c-1:0>a?0:a},_getNextItemByOffset:function(a){var b=this._items.length,c=this._items.indexOf(this._selectedItem||this._backupItem);a=this._getIndexByOffset(c,a,b);return this._items[a]},getChildren:function(){return this._items},getSelectedChild:function(){return this._selectedItem},createPopupItem:function(a,
b){return k.toDom('\x3ctr class\x3d"'+b+'" tabindex\x3d"-1"\x3e\x3ctd\x3e'+a+"\x3c/td\x3e\x3c/tr\x3e")}})})},"MW/equations/editor/actions/LineBreakAction":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/NodeUtils MW/equations/editor/utils/Serializer MW/equations/editor/utils/Templates MW/equations/renderer/model/Symbols".split(" "),function(h,e,g,d,c,b,a,f){return h(d,{pluginId:"action.linebreak",pluginFamily:"actions",
pluginDependencies:"api.attributes controller.cursor controller.editmanager external.actionservice helper.delete helper.insert model.equation".split(" "),constructor:function(a,b,c,f,d,g,h){this._attributes=a;this._cursorController=b;this._editmanager=c;this._equation=h;this._deleteHelper=d;this._insertHelper=g;a=[{id:"equationeditor.linebreak",enabled:!0,key:"enter",callback:e.hitch(this,"_handleLineBreak",!1)},{id:"equationeditor.linebreak_alt",enabled:!0,key:"shift_enter",callback:e.hitch(this,
"_handleLineBreak",!1)}];f.loadActions(a);this.own(d.addDeleteHandler(e.hitch(this,"_handleDelete")))},_handleDelete:function(a){var b=this._detectLine();if(b&&-1===a&&b.left)return this._mergeLines(b.left,b.line),!0;if(b&&1===a&&b.right)return this._mergeLines(b.line,b.right),!0},_mergeLines:function(a,b){var f=a.parent;this._editmanager.createBlock(e.hitch(this,function(d){d.moveChildren(a.id,a.children.length,b.id);d.deleteNode(b.id);var e=f.rows,e=e-1;1===e?(e=this._equation.getParentAndIndex(f),
d.moveChildren(e.parent.id,e.index,a.id),d.updateAttributes(e.parent.id,{"data-category":c.CATEGORY.PLACEHOLDER_ROW}),d.deleteNode(f.id)):d.updateAttributes(f.id,{rows:e})}))},_detectLine:function(){var a=this._cursorController.getPosition(),b={},f=!0,d=!0,e=a.node;c.categorizeNode(e)===c.CATEGORY.ATOM||c.categorizeNode(e)===c.CATEGORY.PLACEHOLDER_ATOM?(f=0===a.offset,d=a.offset===e.text.length,a=this._equation.getParentAndIndex(e),e=a.parent,f=f&&0===a.index,d=d&&a.index===e.children.length-1):(f=
0===a.offset,d=a.offset===e.children.length);a=this._equation.getParentAndIndex(e);e=a.parent;if(!("MathMatrix"!==e.className||1!==e.cols))if(f=f&&0<a.index,d=d&&a.index<e.children.length,f||d){var g=e.parent;"MathRow"===g.className&&(g=g.parent);if("MathRoot"===g.className)return b.line=e.children[a.index],f&&(b.left=e.children[a.index-1]),d&&(b.right=e.children[a.index+1]),b}},_handleLineBreak:function(){if(!this._attributes.get("readonly")){var a=this._cursorController.getPosition(),f=a.node;c.categorizeNode(f)===
c.CATEGORY.ATOM&&(f=this._equation.getParent(f));var d=this._equation.getParentAndIndex(f),g=d.parent;if("MathMatrix"===g.className){var h=g,g=g.parent;"MathRow"===g.className&&(g=g.parent);"MathRoot"===g.className&&this._insertAdditionalNewline(h,d.index);return!0}if("MathRoot"===g.className)return this._editmanager.createBlock(e.hitch(this,function(c){var d=this._insertHelper.getInsertPosition(c,a),e=b.serializeRange(d.node,0,d.offset),g=b.serializeRange(d.node,d.offset);this._deleteHelper.deleteRange(c,
{node:d.node,left:0,right:d.node.children.length});c.updateAttributes(f.id,{"data-category":"structure-part"});var h=c.insertNode(f.id,0,"MathMatrix",{cols:1,rows:2,colspec:"l"}),d=c.insertNode(h.id,0,"MathRow",{"data-category":"placeholder"}),h=c.insertNode(h.id,1,"MathRow",{"data-category":"placeholder"});this._insertHelper.insertTemplate(c,e,d,0);this._insertHelper.insertTemplate(c,g,h,0);this._cursorController.setPosition({id:h.id,offset:0})})),!0}},_insertAdditionalNewline:function(a,b){var c=
this._cursorController.getPosition();this._editmanager.createBlock(e.hitch(this,function(f){var d=this._insertHelper.getInsertPosition(f,c);f.updateAttributes(a.id,{rows:a.rows+1});var e=f.insertNode(a.id,b+1,"MathRow",{"data-category":"placeholder"});f.moveChildren(e.id,0,d.node.id,d.offset)}))}})})},"MW/equations/editor/actions/MathMLFormattingAction":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/MathVariant MW/equations/editor/utils/NodeUtils".split(" "),
function(h,e,g,d,c,b){return h(d,{pluginId:"action.mathmlformatting",pluginFamily:"actions",pluginDependencies:["helper.insert","model.equation"],constructor:function(a,b){this._insertHelper=a;this._equation=b;this.own(g.after(a,"prepareTextAttributes",e.hitch(this,"_handlePrepareTextAttributes")));this.own(g.after(b,"beforeUpdateAttributes",e.hitch(this,"_handleUpdateAttributes"),!0));this.own(g.after(b,"beforeReplaceText",e.hitch(this,"_handleReplaceText"),!0))},_handlePrepareTextAttributes:function(a,
b){if("id"!==a.kind)return a;if(!b||!b.mathvariant)a.mathvariant=1===a.text.length?c.add(a.mathvariant,"italic"):c.remove(a.mathvariant,"italic");return a},_handleReplaceText:function(a,b,c,d,e){b=this._equation.getById(b);this._isAutoUpdateNode(b)&&this._handleTextChange(a,b,b.text.length,b.text.length-d+e.length)},_handleUpdateAttributes:function(a,b,c){c.hasOwnProperty("text")&&(b=this._equation.getById(b),this._isAutoUpdateNode(b)&&this._handleTextChange(a,b,b.text.length,c.text.length))},_isAutoUpdateNode:function(a){return"id"===
a.kind},_handleTextChange:function(a,b,d,e){e=1===e;1===d!==e&&(d=e?c.add(b.mathvariant,"italic"):c.remove(b.mathvariant,"italic"),a.updateAttributes(b.id,{mathvariant:d}))}})})},"MW/equations/editor/actions/MatrixAction":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/IteratorConstants MW/equations/editor/utils/NodeUtils dojo/i18n!l10n/nls/equationEditorActions".split(" "),function(h,e,g,d,c,b,a){return h(d,{pluginId:"action.matrix",
pluginFamily:"actions",pluginDependencies:"action.inserttext api.attributes controller.cursor controller.editmanager external.actionservice model.cursor model.equation".split(" "),constructor:function(b,c,d,h,p,m,q){this._insertTextAction=b;this._attributes=c;this._cursorController=d;this._actionService=p;this._editManager=h;this._equation=q;this.own(c.observe("readonly",e.hitch(this,"_updateActions")));this.own(g.after(b,"onTextInserted",e.hitch(this,"_handleTextInserted"),!0));b=[{id:"equationeditor.matrix.insertcolumnleft",
enabled:!1,contextMenuGroup:"matrix",text:a.matrixInsertColumnLeft,callback:e.hitch(this,"_handleInsertColumn",-1)},{id:"equationeditor.matrix.insertcolumnright",enabled:!1,contextMenuGroup:"matrix",text:a.matrixInsertColumnRight,callback:e.hitch(this,"_handleInsertColumn",1)},{id:"equationeditor.matrix.deletecolumn",enabled:!1,contextMenuGroup:"matrix",text:a.matrixDeleteColumn,callback:e.hitch(this,"_handleDeleteColumn")},{id:"equationeditor.matrix.insertrowabove",enabled:!1,contextMenuGroup:"matrix",
text:a.matrixInsertRowAbove,callback:e.hitch(this,"_handleInsertRow",-1)},{id:"equationeditor.matrix.insertrowbelow",enabled:!1,contextMenuGroup:"matrix",text:a.matrixInsertRowBelow,callback:e.hitch(this,"_handleInsertRow",1)},{id:"equationeditor.matrix.deleterow",enabled:!1,contextMenuGroup:"matrix",text:a.matrixDeleteRow,callback:e.hitch(this,"_handleDeleteRow")},{id:"equationeditor.matrix.removerdelimiters",enabled:!1,contextMenuGroup:"matrix",text:a.matrixRemoveDelimiters,callback:e.hitch(this,
"_handleRemoveDelimiters")},{id:"equationeditor.matrix.usebrackets",enabled:!1,contextMenuGroup:"matrix",text:a.matrixUseBrackets,callback:e.hitch(this,"_handleDelimiters","bracket")},{id:"equationeditor.matrix.useparentheses",enabled:!1,contextMenuGroup:"matrix",text:a.matrixUseParentheses,callback:e.hitch(this,"_handleDelimiters","paren")}];p.loadActions(b);this.own(g.after(m,"onChange",e.hitch(this,"_updateActions")));this._updateActions()},_updateActions:function(){var a=!this._attributes.get("readonly")&&
this._equation.iterate({start:this._cursorController.getPosition().node,direction:c.UP,MathMatrix:function(a,c){b.isMatrix(a)&&c.stop(a)}}),d=!!a;"equationeditor.matrix.deletecolumn equationeditor.matrix.insertcolumnleft equationeditor.matrix.insertcolumnright equationeditor.matrix.insertrowbelow equationeditor.matrix.insertrowabove equationeditor.matrix.deleterow".split(" ").forEach(function(a){this._actionService.updateAction(a,{enabled:d,hideInContextMenu:!d})},this);var e=d&&b.isMatrixWithDelimiters(a,
"bracket"),a=d&&b.isMatrixWithDelimiters(a,"paren"),g=e||a;this._actionService.updateAction("equationeditor.matrix.removerdelimiters",{enabled:g,hideInContextMenu:!g});this._actionService.updateAction("equationeditor.matrix.useparentheses",{enabled:d&&!a,hideInContextMenu:!d||a});this._actionService.updateAction("equationeditor.matrix.usebrackets",{enabled:d&&!e,hideInContextMenu:!d||e})},_handleDeleteColumn:function(){var a=this._findMatrix();this._editManager.createBlock(e.hitch(this,function(b){var c=
a.matrix,d=a.row,e=a.column;if(1===c.cols)b.deleteNode(a.fullStructure.id);else{b.updateAttributes(c.id,{cols:c.cols-1});for(var g=0;g<c.rows;g+=1)b.deleteNode(c.children[c.cols*g+e].id);this._cursorController.setPosition({id:c.children[d*c.cols+Math.min(e,c.cols-1)].id,offset:0})}}))},_handleDeleteRow:function(){var a=this._findMatrix();this._editManager.createBlock(e.hitch(this,function(b){var c=a.matrix,d=a.row,e=a.column;if(1===c.rows)b.deleteNode(a.fullStructure.id);else{b.updateAttributes(c.id,
{rows:c.rows-1});for(var g=c.cols-1;0<=g;g-=1)b.deleteNode(c.children[c.cols*d+g].id);this._cursorController.setPosition({id:c.children[Math.min(d,c.rows-1)*c.cols+e].id,offset:0})}}))},_handleInsertColumn:function(a){var b=this._findMatrix();this._editManager.createBlock(e.hitch(this,function(c){var d=b.matrix,e=b.row,g=b.column+(-1===a?0:1);this._insertColumn(c,d,g,e);this._cursorController.setPosition({id:d.children[e*d.cols+g].id,offset:0})}))},_handleInsertRow:function(a){var b=this._findMatrix();
this._editManager.createBlock(e.hitch(this,function(c){var d=b.matrix,e=b.column,g=b.row+(-1===a?0:1);this._insertRow(c,d,e,g);this._cursorController.setPosition({id:d.children[g*d.cols+e].id,offset:0})}))},_findMatrix:function(){return this._equation.iterate({start:this._cursorController.getPosition().node,direction:c.UP,MathRow:e.hitch(this,function(a,b){var c=b.getParent();if("MathMatrix"===c.className){var d=b.getParentIndex(),e=d%c.cols,g=(d-e)/c.cols,h=this._equation.getParent(c);b.stop({fullStructure:h,
matrix:c,index:d,row:g,column:e})}})})},_handleTextInserted:function(a,c){if(!(","!==a&&";"!==a)){var d=this._equation.getParentAndIndex(c);if(!("MathRow"!==d.parent.className||d.parent.children.length!==d.index+1))if(d=this._equation.getParentAndIndex(d.parent),"MathMatrix"===d.parent.className){var g=d.parent;if(b.isMatrix(g)){var h=d.index%g.cols,m=(d.index-h)/g.cols;this._editManager.createBlock(e.hitch(this,function(b){b.deleteNode(c.id);","===a?(h===g.cols-1&&this._insertColumn(b,g,h+1,m),this._cursorController.setPosition({id:g.children[m*
g.cols+h+1].id,offset:0})):";"===a&&m===g.rows-1&&(this._insertRow(b,g,h,m+1),this._cursorController.setPosition({id:g.children[(m+1)*g.cols].id,offset:0}))}))}}}},_insertColumn:function(a,b,c,d){a.updateAttributes(b.id,{cols:b.cols+1});for(d=0;d<b.rows;d+=1)a.insertNode(b.id,b.cols*d+c,"MathRow",{"data-category":"placeholder"})},_insertRow:function(a,b,c,d){a.updateAttributes(b.id,{rows:b.rows+1});for(c=0;c<b.cols;c+=1)a.insertNode(b.id,b.cols*d+c,"MathRow",{"data-category":"placeholder"})},_maybeRemoveDelimiters:function(a,
b){var c=b.fullStructure;3===c.children.length&&(a.deleteNode(c.children[2].id),a.deleteNode(c.children[0].id))},_handleRemoveDelimiters:function(){var a=this._findMatrix();this._editManager.createBlock(e.hitch(this,function(b){this._maybeRemoveDelimiters(b,a)}))},_handleDelimiters:function(a){var b=this._findMatrix();this._editManager.createBlock(e.hitch(this,function(c){this._maybeRemoveDelimiters(c,b);var d=b.fullStructure;c.insertNode(d.id,0,"MathDelimiter",{"data-category":"static",symbolName:a+
"left"});c.insertNode(d.id,2,"MathDelimiter",{"data-category":"static",symbolName:a+"right"})}))}})})},"MW/equations/editor/actions/MouseAction":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-geometry dojo/has dojo/on MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/NodeUtils MW/equations/editor/utils/PriorityHandlerChain".split(" "),function(h,e,g,d,c,b,a,f){return h(b,{pluginId:"action.mouse",pluginFamily:"actions",pluginDependencies:"controller.caret controller.cursor controller.mouse model.equation view.keyhandler view.rootnode".split(" "),
constructor:function(a,b,c,f,d,g){this._caretController=a;this._cursorController=b;this._equation=f;this._rootNode=g;this._keyHandler=d;c.addMouseDown(e.hitch(this,"_handleMouseDown"),-1);c.addMouseUp(e.hitch(this,"_handleMouseUp"),10);c.addMouseMove(e.hitch(this,"_handleMouseMove"),-1);c.addMouseDoubleClick(e.hitch(this,"_handleDoubleClick"),-1)},_handleDoubleClick:function(b){b=this._cursorController.getPosition();if("atom"===a.categorizeNode(b.node)){if(0===b.offset){var c=this._equation.getPreviousSibling(b.node);
if(c)return this._makeSelection(c,b.node)}else if(b.offset===b.node.text.length&&(c=this._equation.getNextSibling(b.node)))return this._makeSelection(b.node,c);this._cursorController.setPosition({id:b.id,offset:0});this._cursorController.setPosition({id:b.id,offset:b.node.text.length},!0)}},_makeSelection:function(b,c){var f=this._equation.getParentAndIndex(b),d=f.index,e=f.index+1;0<d&&a.qualifiesAsOperator(b)&&(d-=1);e<f.parent.children.length-1&&a.qualifiesAsOperator(c)&&(e+=1);this._cursorController.setPosition({id:f.parent.id,
offset:d});this._cursorController.setPosition({id:f.parent.id,offset:e+1},!0)},_handleMouseDown:function(a){var b=g.position(this._rootNode,!0);this._caretController.fromXY(a.pageX-b.x,a.pageY-b.y,a.shiftKey);0===a.button&&(this._primaryButtonPressed=d("safari"))},_handleMouseMove:function(a){if(this._primaryButtonPressed||1===(a.buttons&1))a.preventDefault(),(a=this._caretController.getPositionFromAbsoluteXY(a.pageX,a.pageY))&&this._cursorController.setPosition(a,!0)},_handleMouseUp:function(a){window.setTimeout(e.hitch(this._keyHandler,
"focus"),0);0===a.button&&(this._primaryButtonPressed=!1)}})})},"MW/equations/editor/utils/PriorityHandlerChain":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang"],function(h,e,g){return e(null,{constructor:function(){this._handlers=[]},add:function(d,c){var b={handler:d,priority:c||0};this._handlers.push(b);this._handlers.sort(function(a,b){return b.priority-a.priority});return{remove:g.hitch(this,function(){var a=this._handlers.indexOf(b);0<=a&&this._handlers.splice(a,
1)})}},fire:function(){var d=arguments;return h.some(this._handlers,function(c){return c.handler.apply(void 0,d)})}})})},"MW/equations/editor/actions/SmartEditingAction":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/NodeUtils MW/equations/editor/utils/Templates".split(" "),function(h,e,g,d,c,b){var a={"^":{templateName:"superscript"},_:{templateName:"subscript"},"/":{templateName:"frac"},"'":{templateName:"derivativePrime",
needsTransferPart:!0}};return h(d,{pluginId:"action.smartediting",pluginFamily:"actions",pluginDependencies:"action.inserttext api.attributes controller.cursor controller.editmanager controller.keyhandler helper.backspacetoundo helper.inserttemplate model.equation".split(" "),constructor:function(c,d,h,n,p,m,q,r){this._attributes=d;this._insertTemplateHelper=q;this._cursorController=h;this._editmanager=n;this._equation=r;this._backspaceToUndoHelper=m;Object.keys(a).forEach(function(a){this.own(p.add(a,
e.hitch(this,"_handleSmartEdit",a)))},this);this.own(g.after(c,"onTextInserted",e.hitch(this,"_handleTextInserted"),!0));this._templates=b.getById()},_handleSmartEdit:function(b){if(!this._cursorController.hasSelection()||this._attributes.get("readonly"))return!1;var c=a[b];this._editmanager.createBlock(e.hitch(this,function(a){1===this._insertTemplateHelper.insertTemplate(a,this._templates[c.templateName].template).length&&this._cursorController.setLogical(this._cursorController.getLogical()+1)}));
return!0},_handleTextInserted:function(b,d){var g=a[b];g&&(this._editmanager.createBlock(e.hitch(this,function(e){var h=g.templateName,m=this._findTransferPart(d);if(m||!a[b].needsTransferPart){if(m&&m.left===m.right-1){var q=m.node.children[m.left];if("MathScript"===q.className){var r={subscript:1,superscript:2}[h];if(r&&!q.children[r]){e.updateAttributes(q.id,{children:q.children.slice(0,r).concat(q.children.slice(r+1))});m=e.insertNode(q.id,r,"MathRow",{"data-category":c.CATEGORY.PLACEHOLDER_ROW});
this._cursorController.setPosition({id:m.id,offset:0});e.deleteNode(d.id);return}}}h=this._templates[h].template;e.deleteNode(d.id);1===this._insertTemplateHelper.insertTemplate(e,h,m).length&&this._cursorController.setLogical(this._cursorController.getLogical()+1)}})),this._backspaceToUndoHelper.start())},_findTransferPart:function(a){var b=this._equation.getParentAndIndex(a),d=this._equation.getPreviousSibling(a);if(d)return a=b.index-1,this._isParenthesis(d)&&(d=this._equation.getPreviousSibling(d),
c.qualifiesAsIdentifier(d)&&(a-=1)),{node:b.parent,left:a,right:b.index}},_isParenthesis:function(a){return"MathRow"===a.className&&2<a.children.length&&"MathDelimiter"===a.children[0].className&&"parenleft"===a.children[0].symbolName&&"MathDelimiter"===a.children[a.children.length-1].className&&"parenright"===a.children[a.children.length-1].symbolName}})})},"MW/equations/editor/actions/SmartParensAction":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/IteratorConstants MW/equations/editor/utils/NodeUtils MW/equations/editor/utils/Templates".split(" "),
function(h,e,g,d,c,b,a){var f={"(":["parenleft","parenright"],"[":["bracketleft","bracketright"],"{":["braceleft","braceright"]};return h(d,{pluginId:"action.smartparens",pluginFamily:"actions",pluginDependencies:"action.inserttext api.attributes controller.cursor controller.editmanager controller.keyhandler helper.backspacetoundo helper.insert helper.inserttemplate model.cursor model.equation".split(" "),constructor:function(b,c,f,d,h,q,r,s,t,u){this._attributes=c;this._insertTextAction=b;this._insertTemplateHelper=
s;this._backspaceToUndoHelper=q;this._insertHelper=r;this._cursorController=f;this._editmanager=d;this._equation=u;this.own(g.after(b,"onTextInserted",e.hitch(this,"_handleTextInserted"),!0));this.own(g.after(t,"onChange",e.hitch(this,"_handleCursorMove")));this._templates=a.getById();this.own(h.add("(",e.hitch(this,"_handleParen","(")));this.own(h.add("[",e.hitch(this,"_handleParen","[")));this.own(h.add("{",e.hitch(this,"_handleParen","{")));this._smartLeave=[]},_handleParen:function(a){if(!this._cursorController.hasSelection()||
this._attributes.get("readonly"))return!1;var b={"(":"parentheses","[":"brackets","{":"braces"}[a];this._editmanager.createBlock(e.hitch(this,function(a){a=this._insertTemplateHelper.insertTemplate(a,this._templates[b].template);a=this._findStructure(this._equation.getById(a[0].id));this._enableSmartLeave(a)}));return!0},_handleTextInserted:function(a,b){var c=f[a];if(c)return this._insertAutoCompleteParen(c,b);"MathDelimiter"===b.className&&this._checkAutoSkipParen(b)},_handleCursorMove:function(){if(0!==
this._smartLeave.length){var a=this._cursorController.getPosition();this._equation.iterate({from:a.node,direction:c.UP,structure:e.hitch(this,function(a,b){var c=this._smartLeave.indexOf(a.id);0<=c&&(this._smartLeave.splice(c+1),b.stop())}),MathRoot:e.hitch(this,function(){this._smartLeave=[]})})}},_enableSmartLeave:function(a){this._smartLeave.push(a.id)},_checkAutoSkipParen:function(a){if(0!==this._smartLeave.length){var b=this._equation.getParentAndIndex(a);if(b.index===b.parent.children.length-
1){var c=b.parent.parent;this._smartLeave[this._smartLeave.length-1]===c.id&&(this._smartLeave.pop(),this._editmanager.createBlock(e.hitch(this,function(f){f.deleteNode(a.id);b=this._equation.getParentAndIndex(c);this._cursorController.setPosition({id:b.parent.id,offset:b.index+1})})))}}},_insertAutoCompleteParen:function(a,b){this._editmanager.createBlock(e.hitch(this,function(c){var f=this._equation.getParentAndIndex(b),f=this._insertHelper.insertTemplate(c,["MathRow",{"data-category":"structure"},
[["MathDelimiter",{symbolName:a[0],"data-category":"static"}],["MathRow",{"data-category":"placeholder","data-cursor":0}],["MathDelimiter",{symbolName:a[1],"data-category":"static"}]]],f.parent,f.index),f=this._findStructure(this._equation.getById(f[0].id));this._enableSmartLeave(f);c.deleteNode(b.id)}));this._backspaceToUndoHelper.start()},_findStructure:function(a){return this._equation.iterate({from:a,direction:c.UP,structure:function(a,b){b.stop(a)}})}})})},"MW/equations/editor/actions/SmartSymbolsAction":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/Templates MW/equations/renderer/model/Symbols".split(" "),
function(h,e,g,d,c,b){var a={mid:{mid:"parallel","\x3d":"models","-":"vdash"},"~":{"\x3d":"neq"},"-":{"\x3e":"rightarrow",mid:"dashv"},"\x3c":{"\x3d":"leq","\x3e":"neq","-":"leftarrow"},"\x3d":{"\x3e":"Rightarrow"},"\x3e":{"\x3d":"geq"},leq:{"\x3e":"Leftrightarrow"},"!":{"\x3d":"neq","\x3c":"notlt","\x3e":"notgt"},notlt:{"\x3d":"notleq"},notgt:{"\x3d":"notgeq"},leftarrow:{"-":"longleftarrow","\x3e":"leftrightarrow"},longleftarrow:{"\x3e":"longleftrightarrow"}};return h(d,{pluginId:"action.smartsymbols",
pluginFamily:"actions",pluginDependencies:["action.inserttext","controller.editmanager","model.equation"],constructor:function(a,b,d){this._editmanager=b;this._equation=d;this.own(g.after(a,"onTextInserted",e.hitch(this,"_handleTextInserted"),!0));this._templates=c.getById()},_handleTextInserted:function(b,c){if("symbol"===c.kind){var d=this._equation.getPreviousSibling(c);if(d&&"symbol"===d.kind){var g=d.symbolName||d.text,h=a[g],g=c.symbolName||c.text;(h=h&&h[g])&&this._editmanager.createBlock(e.hitch(this,
function(a){a.deleteNode(c.id);a.updateAttributes(d.id,{symbolName:h})}))}}}})})},"MW/equations/editor/actions/TabAction":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","MW/equations/editor/utils/EquationPlugin","MW/equations/editor/utils/NodeUtils"],function(h,e,g,d,c){return e(d,{pluginId:"action.tab",pluginFamily:"actions",pluginDependencies:["controller.cursor","controller.keyhandler","external.actionservice","model.equation"],constructor:function(b,a,c,d){this._cursorController=
b;this._equation=d;b=[{id:"equationeditor.jumptoplaceholder",key:"tab",keyPriority:-1,enabled:!0,callback:g.hitch(this,"_handleTab",!0)},{id:"equationeditor.jumptopreviousplaceholder",key:"shift_tab",keyPriority:-1,enabled:!0,callback:g.hitch(this,"_handleTab",!1)}];c.loadActions(b)},_handleTab:function(b){if(b=this._searchPlaceholderAtom(b))return this._cursorController.setPosition({id:b.id,offset:0}),!0},_searchPlaceholderAtom:function(b){var a,c,d=this._cursorController.getPosition();this._equation.iterate({"placeholder-atom":function(e,
g){if(d.id!==e.id){if(c||!b)a=e;c&&b?g.stop():a||(a=e)}},all:function(e,g){d.id===e.id&&(c=!0,a&&!b&&g.stop())}});return a}})})},"MW/equations/editor/actions/TabLeavesStructureAction":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/IteratorConstants MW/equations/editor/utils/NodeUtils".split(" "),function(h,e,g,d,c,b){return e(d,{pluginId:"action.tableavesstructure",pluginFamily:"actions",pluginDependencies:["controller.cursor",
"controller.keyhandler","external.actionservice","model.equation"],constructor:function(a,b,c,d){this._cursorController=a;this._equation=d;a=[{id:"equationeditor.leavestructure",enabled:!0,callback:g.hitch(this,"_leaveStructure")}];c.loadActions(a);this.own(b.add("tab",g.hitch(this,"_leaveStructure"),-5))},_leaveStructure:function(){var a=this._cursorController.getPosition();this._equation.iterate({start:a.node,direction:c.UP,structure:g.hitch(this,function(a,b){this._cursorController.setPosition({id:b.getParent().id,
offset:b.getParentIndex()+1});b.stop()})});return!0}})})},"MW/equations/editor/actions/TextFormattingAction":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/MathVariant MW/equations/editor/utils/NodeUtils".split(" "),function(h,e,g,d,c,b){return h(d,{pluginId:"action.textformatting",pluginFamily:"actions",pluginDependencies:"action.inserttext controller.cursor controller.editmanager controller.selection external.actionservice helper.insert model.cursor model.equation".split(" "),
constructor:function(a,b,c,d,h,p,m,q){this._insertHelper=p;this._cursorController=b;this._editmanager=c;this._selectionController=d;this._actionService=h;this._equation=q;a=[{id:"equationeditor.format.bold",enabled:!1,key:"ctrl_b",platformKey:{mac:"meta_b"},callback:e.hitch(this,"_handleBold")},{id:"equationeditor.format.italic",enabled:!1,key:"ctrl_i",platformKey:{mac:"meta_i"},callback:e.hitch(this,"_handleItalic")}];h.loadActions(a);this.own(g.after(p,"prepareTextAttributes",e.hitch(this,"_handlePrepareTextAttributes")));
this.own(g.after(m,"onChange",e.hitch(this,"_handleCursorMove")));this.own(g.after(h,"onRemoteActionChange",e.hitch(this,"_handleActionChange"),!0))},_handleActionChange:function(a){if("selected"===a.key)switch(a.id){case "equationeditor.format.bold":this._applyStyle("bold",!a.newValue);break;case "equationeditor.format.italic":this._applyStyle("italic",!a.newValue)}},_handleCursorMove:function(){var a=!1,c=!1,d=!1,e=!1,g=!1;if(this._cursorController.hasSelection())this._selectionController.iterateSelection({atom:function(b,
h){if("id"===b.kind){var p=b.mathvariant?b.mathvariant.split("-"):[];c=(a=a||0<=p.indexOf("bold"))||0<=p.indexOf("italic");d=d||0>p.indexOf("bold");e=e||0>p.indexOf("italic");a&&d&&(c&&e)&&h.stop();g=!0}}}),a=!d,c=!e;else{var h=this._cursorController.getPosition().node;"atom"===b.categorizeNode(h)&&"id"===h.kind&&(h=h.mathvariant?h.mathvariant.split("-"):[],a=0<=h.indexOf("bold"),c=0<=h.indexOf("italic"),g=!0)}this._actionService.updateAction("equationeditor.format.bold",{enabled:g,selected:a&&g});
this._actionService.updateAction("equationeditor.format.italic",{enabled:g,selected:c&&g})},_handlePrepareTextAttributes:function(a,b){if("id"!==a.kind)return a;a.mathvariant=a.mathvariant||b&&b.mathvariant||"italic";return a},_handleBold:function(){this._applyStyleFromAction("equationeditor.format.bold","bold");return!0},_handleItalic:function(){this._applyStyleFromAction("equationeditor.format.italic","italic");return!0},_applyStyleFromAction:function(a,b){var c=this._actionService.getAction(a),
d=c.selected;this._actionService.updateAction(a,{selected:!c.selected});this._applyStyle(b,d)},_applyStyle:function(a,b){var c=this._cursorController.hasSelection();this._editmanager.createBlock(e.hitch(this,function(d){if(c)this._applyStyleToSelection(d,a,b);else{var e=this._cursorController.getPosition();this._applyStyleToAtom(d,a,b,e.node)}}))},_applyStyleToSelection:function(a,b,c){this._selectionController.iterateSelection({atom:e.hitch(this,"_applyStyleToAtom",a,b,c)})},_applyStyleToAtom:function(a,
b,d,e){if("id"===e.kind){var g=e.mathvariant,g=d?c.remove(g,b):c.add(g,b);a.updateAttributes(e.id,{mathvariant:g})}}})})},"MW/equations/editor/actions/UndoRedoAction":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/equations/editor/utils/EquationPlugin"],function(h,e,g,d){return h(d,{pluginId:"action.undoredo",pluginDependencies:["controller.undoredo","external.actionservice"],constructor:function(c,b){this._undoRedoController=c;this._actionService=b;var a=[{id:"equationeditor.undo",
enabled:c.canUndo(),key:"ctrl_z",platformKey:{mac:"meta_z"},callback:function(){c.undo();return!0}},{id:"equationeditor.redo",enabled:c.canRedo(),key:"ctrl_y",platformKey:{mac:"meta_shift_z"},callback:function(){c.redo();return!0}}];b.loadActions(a);this.own(g.after(c,"onChange",e.hitch(this,"_updateAttributes")))},_updateAttributes:function(){this._actionService.updateAction("equationeditor.undo",{enabled:this._undoRedoController.canUndo()});this._actionService.updateAction("equationeditor.redo",
{enabled:this._undoRedoController.canRedo()})}})})},"MW/equations/editor/actions/VisualCursorAction":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","MW/equations/editor/utils/CursorUtils","MW/equations/editor/utils/NodeUtils"],function(h,e,g,d,c){return e(null,{pluginId:"action.visualcursor",pluginFamily:"actions",pluginDependencies:["controller.cursor","controller.selection","external.actionservice","model.equation"],constructor:function(b,a,c,d){this._cursorController=
b;this._selectionController=a;this._equation=d;b=[{id:"equationeditor.left.visual",enabled:!0,keyPriority:1,key:"left",callback:g.hitch(this,"_handleLinearMove",-1)},{id:"equationeditor.selectleft.visual",enabled:!0,keyPriority:1,key:"shift_left",callback:g.hitch(this,"_handleLinearMove",-1,!0)},{id:"equationeditor.right.visual",enabled:!0,keyPriority:1,key:"right",callback:g.hitch(this,"_handleLinearMove",1)},{id:"equationeditor.selectright.visual",enabled:!0,keyPriority:1,key:"shift_right",callback:g.hitch(this,
"_handleLinearMove",1,!0)}];c.loadActions(b)},_handleLinearMove:function(b,a){if(this._cursorController.hasSelection())return!1;var f,d=this._cursorController.getPosition(),e;f=d.node;d=d.offset;c.categorizeNode(f)===c.CATEGORY.ATOM?-1===b&&0===d?(f=this._equation.getParentAndIndex(f),e=f.parent,d=f.index):1===b&&d===f.text.length&&(f=this._equation.getParentAndIndex(f),e=f.parent,d=f.index+1):c.categorizeNode(f)===c.CATEGORY.PLACEHOLDER_ATOM?(f=this._equation.getParentAndIndex(f),e=f.parent,d=-1===
b?0:1):c.categorizeNode(f)===c.CATEGORY.PLACEHOLDER_ROW&&(e=f);var g;e&&(g=this._moveInRow(e,d,b));if(g)this._cursorController.setPosition(g,a);else return!1;return!0},_moveInRow:function(b,a,f){var d;if(-1===f&&0===a||1===f&&a===b.children.length){a=this._equation.getParentAndIndex(b);b=a.parent;var e=a.index;b&&(a="_leaveRowIn"+b.className,this[a]&&(d=this[a].call(this,b,f,e)));return d}a+=-1===f?-1:0;d=b.children[a];if(c.categorizeNode(d)===c.CATEGORY.STATIC)return 1===f&&(a+=1),this._moveInRow(b,
a,f);a="_enter"+d.className;if(this[a])return this[a].call(this,d,f)},_enterMathRow:function(b,a){return c.categorizeNode(b)===c.CATEGORY.PLACEHOLDER_ROW?{id:b.id,offset:1===a?0:-1}:this._moveInRow(b,-1===a?b.children.length:0,a)},_leaveRowInMathRow:function(b,a,f){1===a&&(f+=1);return c.categorizeNode(b)===c.CATEGORY.PLACEHOLDER_ROW?{id:b.id,offset:f}:this._moveInRow(b,f,a)},_enterMathFraction:function(b,a){return this._tryChildren(b,a,[0,1])},_leaveRowInMathFraction:function(b,a,c){return b.bevelled&&
(1===a&&0===c||-1===a&&1===c)?this._tryChildren(b,a,[1-c]):this._leaveNode(b,a)},_enterMathScript:function(b,a){return b.isStacked()||1===a?this._tryChildren(b,a,[0,2,1]):this._tryChildren(b,a,[2,1,0])},_leaveRowInMathScript:function(b,a,c){if(b.isStacked())return this._leaveNode(b,a);if(1===a)return 0===c?this._tryChildren(b,a,[2,1]):this._leaveNode(b,a);if(-1===a)return 0!==c?this._tryChildren(b,a,[0]):this._leaveNode(b,a)},_enterMathRadical:function(b,a){return-1===a?this._tryChildren(b,a,[0,1]):
this._tryChildren(b,a,[1,0])},_leaveRowInMathRadical:function(b,a,c){return 1===a?1===c?this._tryChildren(b,a,[0]):this._leaveNode(b,a):0===c?this._tryChildren(b,a,[1]):this._leaveNode(b,a)},_enterMathMultiScript:function(b,a){var c=this._getMultiScriptPositions(b,a);return this._tryChildren(b,a,c)},_leaveRowInMathMultiScript:function(b,a,c){var d=this._getMultiScriptPositions(b,a);c=d.lastIndexOf(c);return this._tryChildren(b,a,d.slice(c+2))},_getMultiScriptPositions:function(b,a){for(var c=[],d=
2*b.numPostPairs+1;d<b.children.length;d+=2)c.push(d+1),c.push(d);c.push(0);c.push(0);for(d=1;d<2*b.numPostPairs;d+=2)c.push(d),c.push(d+1);-1===a&&c.reverse();return c},_leaveNode:function(b,a){var f=this._equation.getParentAndIndex(b),d=f.index+(-1===a?0:1),f=f.parent;return c.categorizeNode(f)!==c.CATEGORY.PLACEHOLDER_ROW?this._moveInRow(f,d,a):{id:f.id,offset:d}},_tryChildren:function(b,a,f){for(var d=0;d<=f.length;d+=1){var e=b.children[f[d]];if(e&&c.categorizeNode(e)!==c.CATEGORY.STATIC)return this._enterMathRow(e,
a)}return this._leaveNode(b,a)}})})},"MW/equations/editor/api/AttributesAPI":function(){define(["dojo/_base/declare","dojo/aspect"],function(h,e){return h(null,{pluginId:"api.attributes",pluginFamily:"api",pluginDependencies:[],constructor:function(){this._values={}},set:function(e,d){this._values[e]!==d&&this._set(e,d)},get:function(e){return this._values[e]},_set:function(e,d){this._values[e]=d},observe:function(g,d){return e.after(this,"_set",function(c,b){c===g&&d.call(null,b)},!0)}})})},"MW/equations/editor/api/CursorAPI":function(){define(["dojo/_base/declare",
"dojo/aspect"],function(h,e){return h(null,{pluginId:"api.cursor",pluginFamily:"api",pluginDependencies:["view.caret"],constructor:function(e){this._caret=e},hide:function(){this._caret.hide("api")},show:function(e){this._caret.show("api")}})})},"MW/equations/editor/api/EquationAPI":function(){define(["dojo/_base/declare"],function(h){return h(null,{pluginId:"api.equation",pluginFamily:"api",pluginDependencies:["controller.editmanager","model.equation"],constructor:function(e,g){this._editController=
e;this._equation=g},fromMathML:function(e){this._editController.setEquation(e)},fromTeX:function(e){this._editController.setEquation(e,"tex")},toMathML:function(){return this._equation.serializeToMathMl()},toTeX:function(){return this._equation.serializeToTeX()},setDisplayStyle:function(e){this._equation.getRoot().inline!==!e&&(this._equation.getRoot().inline=!e,this._equation.changed())},getDisplayStyle:function(){return!this._equation.getRoot().inline}})})},"MW/equations/editor/controller/CaretController":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/query MW/equations/editor/utils/CaretUtilities MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/IteratorConstants MW/equations/editor/utils/NodeUtils".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p){return e(l,{pluginId:"controller.caret",pluginDependencies:"api.attributes controller.cursor controller.selection model.cursor model.equation view.caret view.helper view.renderer view.rootnode view.selection".split(" "),constructor:function(a,b,c,f,e,h,k,l,n,p){this._attributes=a;this.own(a.observe("active",g.hitch(this,"_handleActiveChange")));this.own(a.observe("disabled",g.hitch(this,"_handleDisabledChange")));this.own(a.observe("readonly",g.hitch(this,"_handleReadonlyChange")));
this._cursorController=b;this._selectionController=c;this._cursor=f;this._equation=e;this._caret=h;this._rootNode=n;this._viewHelper=k;this._selection=p;this.own(d.after(this._cursor,"onChange",g.hitch(this,"redraw")));this.own(d.after(l,"onRedraw",g.hitch(this,"redraw")))},_handleActiveChange:function(a){a?this._caret.show("blurred"):this._caret.hide("blurred")},_handleDisabledChange:function(a){a?(this._caret.hide("disabled"),this._selection.hide()):(this._caret.show("disabled"),this.redraw())},
_handleReadonlyChange:function(a){this._caret.setReadonly(a)},beforeCaretRedraw:function(){},fromXY:function(a,b,c){(a=this.getPositionFromXY(a,b))&&this._cursorController.setPosition(a,c)},getPositionFromXY:function(b,c){var f=a.position(this._rootNode,!0);return this.getPositionFromAbsoluteXY(b+f.x,c+f.y)},_getScrollOffset:function(){return{x:window.hasOwnProperty("scrollX")?window.scrollX:document.documentElement.scrollLeft,y:window.hasOwnProperty("scrollY")?window.scrollY:document.documentElement.scrollTop}},
getPositionFromAbsoluteXY:function(a,b){var f=this._viewHelper.getRootGeometry();a<f.x?a=f.x:a>f.x+f.w-1&&(a=f.x+f.w-1);b<f.y?b=f.y:b>f.y+f.h-1&&(b=f.y+f.h-1);f=this._getScrollOffset();if(f=document.elementFromPoint(a-f.x,b-f.y)){if(c.contains(f,"selection")||c.contains(f,"cursor")){var d=f.style.display;f.style.display="none";var e=this.getPositionFromAbsoluteXY(a,b);f.style.display=d;return e}if(this._rootNode.contains(f)){if(p.isEmptyEquation(this._equation.getRoot()))return{id:this._equation.getRoot().children[0].children[0].id,
offset:0};this._searched=[];f=this._searchFromNode(f,a,b);this._searched=void 0;return f&&this._cursorController.fixPosition(f)}}},drawCaretAt:function(a){if(this._viewHelper.isAttachedToDocument())return a=this._getCoordinatesFromPosition(a),this._caret.setXY(a.x,a.y,a.height),a},_searchFromNode:function(b,c,f){for(var d=[];b&&b!==this._rootNode;){d=d.concat(this._searchChildren(b,c,f));if(0<d.length){var e=a.position(b,!0);if(c>e.x&&f>e.y&&c<e.x+e.w&&f<e.y+e.h)break}this._searched.push(b);b=b.parentNode}if(0<
d.length)return b.id&&(b=this._equation.getById(b.id),"placeholder"!==p.categorizeNode(b)&&(b=this._equation.iterate({from:b,direction:n.UP,placeholder:function(a,b){b.stop(a)}}))&&d.push(this._findCursorPositionInRow(b,c,f))),d=d.sort(function(a,b){return a.distance-b.distance}),{id:d[0].id,offset:d[0].offset}},_searchChildren:function(a,b,c){var f,d,e=[];if(a.id){d=this._equation.getById(a.id);if(!this._nodeClickable(d))return[];f=p.categorizeNode(d);if("atom"===f)return[this._findCursorPositionInAtom(d,
b,c)];"placeholder"===f&&e.push(this._findCursorPositionInRow(d,b,c))}0<=a.children.length&&(a=this._getSearchableChildren(a),a=this._sortByDistance(a,b,c),h.forEach(a,function(a){e=e.concat(this._searchChildren(a.node,b,c))},this));return e},_getSearchableChildren:function(a){return h.filter(a.children,function(a){if(0<=this._searched.indexOf(a))return!1;if(!a.id)return!0;a=this._equation.getById(a.id);return this._nodeClickable(a)},this)},_sortByDistance:function(b,c,f){return h.map(b,function(b){var d=
a.position(b,!0);return{node:b,distance:this._distanceTo(d,c,f)}},this).sort(function(a,b){return a.distance-b.distance})},_distanceTo:function(a,b,c){var f=0,d=0;b<=a.x?f=a.x-b:b>=a.x+a.w&&(f=b-(a.x+a.w));c<=a.y?d=a.y-c:c>=a.y+a.h&&(d=c-(a.y+a.h));return f+d},_nodeClickable:function(a){for(;a;){if("static"===p.categorizeNode(a))return!1;a=this._equation.getParent(a)}return!0},_findCursorPositionInRow:function(a,b,c){if(0===a.children.length){var f=this._viewHelper.getNodeGeometry(a);return{id:a.id,
offset:0,distance:this._distanceTo(g.mixin(f,{w:1}),b,c)}}var d;for(d=0;d<a.children.length&&!(f=this._viewHelper.getNodeGeometry(a.children[d]),b<f.x+f.w/2);d+=1);return{id:a.id,offset:d,distance:this._distanceTo(g.mixin(f,{w:1,x:d<a.children.length?f.x:f.x+f.w}),b,c)}},_findCursorPositionInAtom:function(a,b,c){var f=this._viewHelper.getNodeGeometry(a),d=b-f.x,d=Math.min(Math.max(0,0<f.w?d/f.w:0),1),e=Math.max(0,Math.floor((a.text.length+1)*d));e>a.text.length&&(e=a.text.length);return{id:a.id,offset:e,
distance:this._distanceTo(g.mixin(f,{w:1,x:f.x+f.w*d}),b,c)}},redraw:function(){if(!this._attributes.get("disabled")){this.beforeCaretRedraw();var a=this._cursor.getPosition();if((a=this.drawCaretAt(a))&&this._cursor.hasSelection()){var b=this._selectionController.getSelectionSpan(),c=k.coordinatesFromSelection(b,this._rootNode);b.reversed?(c.w=c.w+c.x-(a.x-1),c.x=a.x+1):c.w=a.x-c.x;this._selection.show();this._selection.set(c.x,c.y,c.w,c.h)}else this._selection.hide()}},_getCoordinatesFromPosition:function(a){return k.coordinatesFromPosition(a,
this._rootNode)||{x:0,y:0,height:0}}})})},"MW/equations/editor/utils/CaretUtilities":function(){define(["dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/query","MW/equations/editor/utils/NodeUtils"],function(h,e,g,d,c){function b(a,b){var c=d("*[id\x3d'"+a.id+"']",b);if(0!==c.length){var c=c[0],g=a.offset;if(0<c.children.length||0===c.childNodes.length)0===g?c=0===c.childNodes.length?f(c):f(c.firstElementChild):(c=c.childNodes[g-1])?(c=h.place("\x3cspan\x3e\x26#x200b;\x3c/span\x3e",
c,"after"),g=f(c),h.destroy(c),c=g):c=void 0;else if(0===g)c=f(c);else{var m=c,c=m.cloneNode();m.parentNode.replaceChild(c,m);c.innerHTML="";var q=h.create("span",{textContent:m.textContent.substr(0,g)},c);h.create("span",{textContent:m.textContent.substr(g)},c);g=f(q,!0);c.parentNode.replaceChild(m,c);c=g}c&&(g=e.position(b,!0),c.x-=g.x,c.y-=g.y);return c}}function a(a,b){var c=d("*[id\x3d'"+a.id+"']",b);if(0!==c.length){var c=f(c[0]),g=e.position(b,!0);c.x-=g.x;c.y-=g.y;return c}}function f(a,b){var c=
a;a=c;var f=!1;0===a.childNodes.length&&(f=!0,a=c.cloneNode(),c.parentNode.replaceChild(a,c),a.innerHTML="\x26nbsp;");var d=e.position(a,!0);f&&(a.parentNode.replaceChild(c,a),a=c);c=g.getComputedStyle(a);d.x+=parseInt(c.paddingLeft,10);d.w-=parseInt(c.paddingLeft,10);f&&(d.w=0);d.w+=parseInt(c.marginLeft,10);d.x-=parseInt(c.marginLeft,10);return{x:d.x+(b?d.w:0),y:d.y,w:d.w,h:d.h,height:d.h}}return{coordinatesFromNode:a,coordinatesFromPosition:b,coordinatesFromSelection:function(f,d){var e=f.node;
if("atom"===c.categorizeNode(e)){var g=b({id:f.id,offset:f.left},d)||{x:0,y:0,height:0},h=b({id:f.id,offset:f.right},d)||{x:0,y:0,height:0},e=Math.min(g.x,h.x),q=Math.min(g.y,h.y),r=Math.max(g.height,h.height),g=Math.max(g.x,h.x)-e;return{x:e,y:q,w:g,h:r}}for(var e=e.children,r=[],g=[],h=[],s=[],t=f.left;t<f.right&&t<e.length;t+=1)q=a(e[t],d),r.push(q.x),h.push(q.x+q.w),g.push(q.y),s.push(q.y+q.h);q={x:Math.min.apply(void 0,r),y:Math.min.apply(void 0,g)};q.w=Math.max.apply(void 0,h)-q.x;q.h=Math.max.apply(void 0,
s)-q.y;return q}}})},"MW/equations/editor/controller/ContextMenuController":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class MW/equations/editor/utils/CursorUtils MW/equations/editor/utils/EquationContextMenuModel MW/equations/editor/utils/EquationPlugin".split(" "),function(h,e,g,d,c,b,a){return h(a,{pluginId:"controller.contextmenu",pluginDependencies:"controller.caret controller.focus controller.mouse controller.selection external.actionservice external.contextmenugenerator model.equation view.rootnode".split(" "),
constructor:function(a,c,d,h,p,m,q,r){this._caretController=a;this._focusController=c;this._actionService=p;this._selectionController=h;this._equation=q;this._rootNode=r;d.addMouseDown(e.hitch(this,"_handleMouseDown"),1);if(this._contextMenu=m.createContextMenu(this._rootNode,new b(this._actionService))){var s;g.after(this._contextMenu,"onOpen",e.hitch(this,function(){s=s||this._focusController.add("context-menu")}));g.after(this._contextMenu,"onClose",function(){s&&s.remove();s=null})}},_handleMouseDown:function(a){if(2===
(a.button&2)&&this._selectionController.hasSelection()&&(a=this._caretController.getPositionFromAbsoluteXY(a.pageX,a.pageY))){a=c.logicalFromPosition(a,this._equation.getRoot());var b=this._selectionController.getSelectionLogical();return b.left<=a||a<=b.right}},destroy:function(){this._contextMenu&&this._contextMenu.destroy()}})})},"MW/equations/editor/utils/EquationContextMenuModel":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/plugins/contextmenu/DocumentContextMenuModel"],
function(h,e,g){return h(g,{_getActionInfo:function(d){var c=this._actionService.getAction(d);if(c&&!c.hideInContextMenu)return this.inherited(arguments)}})})},"MW/equations/editor/controller/CursorController":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang MW/equations/editor/utils/CursorUtils MW/equations/editor/utils/IteratorConstants MW/equations/editor/utils/NodeUtils".split(" "),function(h,e,g,d,c,b){return e(null,{pluginId:"controller.cursor",pluginDependencies:["controller.selection",
"model.cursor","model.equation"],constructor:function(a,b,c){this._selectionController=a;this._cursor=b;this._equation=c;this.setLogical(0)},availableCursorPositions:function(){var a=this._equation.getRoot();return d.availableCursorPosition(a)},setLogical:function(a,b){0>a&&(a=0);var c=this._equation.getRoot(),e=d.positionFromLogical(a,c);e||(a=d.availableCursorPosition(c)-1,e=d.positionFromLogical(a,c));this.setPosition(e,b)},getLogical:function(){var a=this._cursor.getPosition();return d.logicalFromPosition(a,
this._equation.getRoot())},getAnchorLogical:function(){var a=this._cursor.getAnchor();return a&&d.logicalFromPosition(a,this._equation.getRoot())},hasSelection:function(){return this._cursor.hasSelection()},setPosition:function(a,c){a={id:a.id,offset:a.offset};var e=this._equation.getById(a.id);0>a.offset&&(a.offset+=d.nodeLength(e)+1);c&&(b.isMultiLineEquation(this._equation.getRoot())&&(a=this._fixPositionInLine(a)),e=this._cursor.hasSelection()?this._cursor.getAnchor():this._cursor.getPosition(),
e=this._selectionController.getSpan(e,a),a={id:e.id,offset:e.reversed?e.left:e.right},this._equation.getById(a.id));a=this.fixPosition(a);this._cursor.setPosition(a,c)},setSelectionLogical:function(a,b){this._cursor.pauseEvents("selecting");this.setLogical(a);this.setLogical(b,!0);this._cursor.unpauseEvents("selecting")},_fixPositionInLine:function(a){var b=this.getPosition(),c=this._equation.getById(a.id),b=this._getLineOf(b.node),c=this._getLineOf(c);if(b!==c){var d=this._equation.getRoot().children[0].children[0].children[b];
a.id=d.id;a.offset=b<c?d.children.length:0;a=this.fixPosition(a)}return a},_getLineOf:function(a){return this._equation.iterate({from:a,direction:c.UP,MathMatrix:g.hitch(this,function(a,b){var c=this._equation.getParentAndIndex(a);"MathRoot"===this._equation.getParent(c.parent).className&&(c=this._equation.getParentAndIndex(b.getLastNode()),b.stop(c.index))})})||0},fixPosition:function(a){var c=this._equation.getById(a.id),e=b.categorizeNode(c);if("placeholder"===e)a=d.adaptPositionToAtoms(a,c.children[a.offset-
1],c.children[a.offset]);else if("atom"===e)if(0===a.offset){if((e=this._equation.getPreviousSibling(c))&&"atom"===b.categorizeNode(e)&&d.shouldCursorMergeToLeft(e,c))a.id=e.id,a.offset=e.text.length}else if(a.offset===c.text.length&&(e=this._equation.getNextSibling(c))&&"atom"===b.categorizeNode(e)&&!d.shouldCursorMergeToLeft(c,e))a.id=e.id,a.offset=0;return a},getPosition:function(){var a=this._cursor.getPosition();a.node=this._equation.getById(a.id);return a}})})},"MW/equations/editor/controller/EditManager":function(){define(["dojo/_base/declare",
"MW/equations/editor/controller/EditBlock","MW/equations/editor/model/UndoRedoStep","mw-log/Log"],function(h,e,g,d){return h(null,{pluginId:"controller.editmanager",pluginDependencies:["controller.cursor","model.cursor","model.equation","controller.placeholderatomcontroller","controller.livecursor"],constructor:function(c,b,a){this._cursorController=c;this._equationModel=a;this._cursor=b},createBlock:function(c){this.beforeBlock();var b=this._cursor.getState();this._equationModel.pauseEvents();this._cursor.pauseEvents();
var a=[],f=new e(this._equationModel,a);try{c.call(void 0,f)}catch(h){d.error("Error while executing block: "+h)}this._equationModel.unpauseEvents();this._cursor.unpauseEvents();0<a.length&&(c=new g(a,b,this._cursor.getState(),this._cursor,this._equationModel),this.onNewStep(c));this.afterBlock()},beforeBlock:function(){},afterBlock:function(){},onNewStep:function(c){},onReset:function(){},setEquation:function(c,b){this._equationModel.pauseEvents();this._cursor.pauseEvents();this.onReset();this._equationModel.setEquation(c,
b);this._cursorController.setLogical(0);this._equationModel.unpauseEvents();this._cursor.unpauseEvents()}})})},"MW/equations/editor/controller/EditBlock":function(){define("dojo/_base/declare dojo/_base/lang MW/equations/editor/commands/DeleteNodeCommand MW/equations/editor/commands/InsertNodeCommand MW/equations/editor/commands/MoveChildrenCommand MW/equations/editor/commands/ReplaceTextCommand MW/equations/editor/commands/UpdateAttributesCommand".split(" "),function(h,e,g,d,c,b,a){return h(null,
{constructor:function(a,b){this._equation=a;this._actions=b},deleteNode:function(a){this._equation.beforeDeleteNode(this,a);this._storeAndExecute(new g(a))},insertNode:function(a,b,c,g){g=e.mixin({},g);c=this._storeAndExecute(new d(a,b,c,g));this._equation.afterNodeInserted(this,a,b,c);return c},replaceNode:function(a,b,c){var d=this._equation.getById(a),d=this._equation.getParentAndIndex(d);this.deleteNode(a);return this.insertNode(d.parent.id,d.index,b,c)},replaceText:function(a,c,d,e){this._equation.beforeReplaceText(this,
a,c,d,e);this._storeAndExecute(new b(a,c,d,e))},updateAttributes:function(b,c){this._equation.beforeUpdateAttributes(this,b,c);this._storeAndExecute(new a(b,c))},moveChildren:function(a,b,d,e,g){e=e||0;g=g||this._equation.getById(d).children.length;this._storeAndExecute(new c(a,b,d,e,g));this._equation.afterChildrenMoved(this,a,b,d,e,g)},mergeNodes:function(a,b){this._equation.beforeMergeNodes(this,a,b);var c=this._equation.getById(a),d=this._equation.getById(b);this.updateAttributes(c.id,{text:c.text+
d.text});this.deleteNode(b)},_storeAndExecute:function(a){var b=a.execute(this._equation);this._actions.push(a);return b}})})},"MW/equations/editor/commands/DeleteNodeCommand":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(e){this._targetId=e},execute:function(e){this._removedNode=e.getById(this._targetId);var g=e.getParent(this._removedNode);this._parentId=g.id;this._deletedIndex=g.children.indexOf(this._removedNode);g.children.splice(this._deletedIndex,
1);e.changed()},unexecute:function(e){e.getById(this._parentId).children.splice(this._deletedIndex,0,this._removedNode);e.changed()}})})},"MW/equations/editor/commands/InsertNodeCommand":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/equations/renderer/model/utils/NodeFactory","MW/rtc/model/importers/Base","mw-utils/Utils"],function(h,e,g,d,c){return h(null,{constructor:function(b,a,f,d){this._targetId=b;this._offset=a;this._name=f;this._attributes=d||{};this._attributes.id||(this._attributes.id=
c.generateUuid())},execute:function(b){var a=b.getById(this._targetId),c=this._createNode();c&&(c.parent=a);a.children.splice(this._offset,0,c);b.changed();return c},unexecute:function(b){b.getById(this._targetId).children.splice(this._offset,1);b.changed()},_createNode:function(){return g.createNode(this._name,this._attributes)}})})},"MW/equations/editor/commands/MoveChildrenCommand":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/equations/renderer/model/utils/NodeFactory","MW/rtc/model/importers/Base",
"mw-utils/Utils"],function(h,e,g,d,c){return h(null,{constructor:function(b,a,c,d,e){this._targetId=b;this._targetOffset=a;this._sourceId=c;this._start=d||0;this._end=e},execute:function(b){var a=b.getById(this._targetId),c=b.getById(this._sourceId),d=c.children.slice(this._start,this._end);c.children.splice(this._start,this._end-this._start);d.forEach(function(b){b&&(b.parent=a)});c=[this._targetOffset,0].concat(d);a.children.splice.apply(a.children,c);b.changed()},unexecute:function(b){var a=b.getById(this._targetId),
c=b.getById(this._sourceId),d=a.children.slice(this._targetOffset,this._targetOffset-this._start+this._end);a.children.splice(this._targetOffset,this._end-this._start);d.forEach(function(a){a&&(a.parent=c)});a=[this._start,0].concat(d);c.children.splice.apply(c.children,a);b.changed()}})})},"MW/equations/editor/commands/ReplaceTextCommand":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(e,g,d,c){this._targetId=e;this._offset=g;this._length=d;this._text=c},
execute:function(e){var g=e.getById(this._targetId);this._replacement=g.text.substr(this._offset,this._length);g.text=g.text.substr(0,this._offset)+this._text+g.text.substr(this._offset+this._length);e.changed();return g},unexecute:function(e){var g=e.getById(this._targetId);g.text=g.text.substr(0,this._offset)+this._replacement+g.text.substr(this._offset+this._text.length);e.changed();return g}})})},"MW/equations/editor/commands/UpdateAttributesCommand":function(){define(["dojo/_base/declare"],function(h){return h(null,
{constructor:function(e,g){this._targetId=e;this._newAttributes=g},execute:function(e){var g=e.getById(this._targetId);this._oldAttributes={};for(var d in this._newAttributes)this._newAttributes.hasOwnProperty(d)&&(this._oldAttributes[d]=g[d],g[d]=this._newAttributes[d]);e.changed()},unexecute:function(e){var g=e.getById(this._targetId),d;for(d in this._oldAttributes)this._oldAttributes.hasOwnProperty(d)&&(g[d]=this._oldAttributes[d]);e.changed()}})})},"MW/equations/editor/model/UndoRedoStep":function(){define(["dojo/_base/declare"],
function(h){return h(null,{constructor:function(e,g,d,c,b){this._commands=e;this._cursorStart=g;this._cursorEnd=d;this._cursor=c;this._equation=b},execute:function(){this._equation.pauseEvents();this._cursor.pauseEvents();this._commands.forEach(function(e){e.execute(this._equation)},this);this._cursor.setState(this._cursorEnd);this._equation.unpauseEvents();this._cursor.unpauseEvents()},unexecute:function(){this._equation.pauseEvents();this._cursor.pauseEvents();for(var e=this._commands.length-1;0<=
e;e-=1)this._commands[e].unexecute(this._equation);this._cursor.setState(this._cursorStart);this._equation.unpauseEvents();this._cursor.unpauseEvents()}})})},"MW/equations/editor/controller/FocusController":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on MW/equations/editor/utils/EquationPlugin".split(" "),function(h,e,g,d,c,b){return e(b,{pluginId:"controller.focus",pluginDependencies:["api.attributes","view.keyhandler"],constructor:function(a,b){this._attributes=
a;this._keyHandler=b;this._focusStack=[];this.own(d.after(b,"onBlur",g.hitch(this,"_handleBlur")));this.own(d.after(b,"onFocus",g.hitch(this,"_handleFocus")));this._windowblurred=!1;this.own(d.after(window,"onfocus",g.hitch(this,"_handleWindowFocus")));this.own(d.after(window,"onblur",g.hitch(this,"_handleWindowBlur")))},_handleWindowFocus:function(){this._focused=!0;this._windowblurred=!1;this._enqueueFocusCheck()},_handleWindowBlur:function(){this._focused=!1;this._windowblurred=!0;this._enqueueFocusCheck()},
focus:function(){this._attributes.set("active",!0);0===this._focusStack.length&&this._keyHandler.focus()},add:function(a){this._attributes.set("active",!0);(0===this._focusStack.length||this._focusStack[0].group!==a)&&this._focusStack.unshift({group:a});return{remove:g.hitch(this,function(){h.some(this._focusStack,g.hitch(this,function(b,c){if(b.group===a)return this._focusStack.splice(c,1),!0}))&&(!this._windowblurred&&0===this._focusStack.length&&this._attributes.get("active"))&&this._keyHandler.focus()})}},
_handleFocus:function(){this._focused=!0;this._enqueueFocusCheck()},_handleBlur:function(){this._focused=!1;this._enqueueFocusCheck()},_enqueueFocusCheck:function(){this._focusCheckEnqueued||(this._focusCheckEnqueued=!0,window.setTimeout(g.hitch(this,function(){this._focusCheckEnqueued=!1;this._attributes.set("active",!this._windowblurred&&(this._focused||0<this._focusStack.length))}),0))}})})},"MW/equations/editor/controller/KeyHandlerController":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/has MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/PriorityHandlerChain".split(" "),
function(h,e,g,d,c,b,a){return e(b,{pluginId:"controller.keyhandler",pluginDependencies:["api.attributes","external.actionservice"],constructor:function(b,c){this._attributes=b;this._bindings={};this._typeHandlers=new a;this._actionService=c;c.getAllActions().forEach(function(a){(a.key||a.platformKey)&&this._addAction(a)},this);this.own(d.after(this._actionService,"addAction",g.hitch(this,"_addAction"),!0));this.own(d.after(this._actionService,"removeAction",g.hitch(this,"_removeAction"),!0))},add:function(a,
b,d){var e=a;if("string"!==typeof a&&(e=a.key,a.platformKey))for(var g in a.platformKey)if(a.platformKey.hasOwnProperty(g)&&c(g)){e=a.platformKey[g];break}this._ensureBinding(e);return this._bindings[e].add(b,d)},addTypeHandler:function(a,b){return this._typeHandlers.add(a,b)},registerView:function(a){this._keyHandler=a;Object.keys(this._bindings).forEach(g.hitch(this,"_makeBinding"))},handleType:function(a){!this._attributes.get("disabled")&&(!(1===a.length&&this._bindings[a])||!this._bindings[a].fire())&&
this._typeHandlers.fire(a)},_ensureBinding:function(b){this._bindings[b]||(this._bindings[b]=new a,this._makeBinding(b))},_makeBinding:function(a){this._keyHandler&&this._keyHandler.addBinding({key:a,callback:g.hitch(this,"_handleKey",a)})},_handleKey:function(a){this._bindings[a]&&(this._attributes.get("disabled")||!this._bindings[a].fire()&&1===a.length&&this._typeHandlers.fire(a))},_addAction:function(a){(a.key||a.platformKey)&&this.add(a,g.hitch(this,function(){var b=this._actionService.getAction(a.id);
if(b&&b.enabled&&b.callback)return b.callback.call(void 0)}),a.keyPriority)},_removeAction:function(a){}})})},"MW/equations/editor/controller/LiveCursorController":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/equations/editor/utils/CursorUtils MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/IteratorConstants MW/equations/editor/utils/NodeUtils".split(" "),function(h,e,g,d,c,b,a){return h(c,{pluginId:"controller.livecursor",pluginDependencies:["controller.cursor",
"model.cursor","model.equation"],constructor:function(a,b,c){this._cursorController=a;this._cursor=b;this._equation=c;this.own(g.before(this._equation,"beforeDeleteNode",e.hitch(this,"_handleDeleteNode")));this.own(g.before(this._equation,"afterNodeInserted",e.hitch(this,"_handleNodeInserted")));this.own(g.before(this._equation,"beforeReplaceText",e.hitch(this,"_handleReplaceText")));this.own(g.before(this._equation,"afterChildrenMoved",e.hitch(this,"_handleChildrenMoved"),!0));this.own(g.before(this._equation,
"beforeMergeNodes",e.hitch(this,"_handleBeforeMergeNodes"),!0))},_handleBeforeMergeNodes:function(a,b,c){a=this._cursorController.getPosition();a.id===c&&(c=this._equation.getById(b),this._cursor.setPosition({id:b,offset:a.offset+c.text.length}))},_handleNodeInserted:function(a,b,c){this._cursor.clearSelection();a=this._cursorController.getPosition();if(a.id!==b){var d=this._equation.getParentAndIndex(a.node),e=d.parent,d=d.index;"MathText"===a.node.className&&e.id===b&&(d===c-1&&a.offset===a.node.text.length?
this._cursorController.setPosition({id:e.id,offset:d+2}):d===c+1&&0===a.offset&&this._cursorController.setPosition({id:e.id,offset:d}))}else a.offset>=c&&this._cursorController.setPosition({id:a.id,offset:a.offset+1})},_handleDeleteNode:function(b,c){this._cursor.clearSelection();var e=this._cursor.getPosition();if(e.id!==c){var g=this._equation.getById(c),g=this._equation.getParentAndIndex(g),h=g.parent,m=g.index;if(h.id===e.id){if(e.offset>m){var m=e.offset-1,q={id:h.id,offset:m},q=d.adaptPositionToAtoms(q,
h.children[m-(g.index===e.offset-1?1:0)],h.children[m+1]);this._cursor.setPosition(q)}}else for(e=this._equation.getById(e.id);e;){g=this._equation.getParentAndIndex(e);if(!g)break;e=g.parent;if(e.id===c){g=this._equation.getParentAndIndex(e);h=g.parent;m=g.index;if("placeholder"!==a.categorizeNode(h))return this._findCursorPosition(e);e={id:h.id,offset:m};e=d.adaptPositionToAtoms(e,h.children[m-1],h.children[m+1]);this._cursor.setPosition(e);break}}}else g=this._equation.getById(e.id),g=this._equation.getParentAndIndex(g),
h=g.parent,m=g.index,e={id:h.id,offset:m},e=d.adaptPositionToAtoms(e,h.children[m-1],h.children[m+1]),this._cursor.setPosition(e)},_findCursorPosition:function(a){this._equation.iterate({start:a,direction:b.RIGHT_LEFT_DOWN_UP,skipFirst:!0,placeholder:e.hitch(this,function(a,b){var c=0;"left"===b.getDirection()&&(c=-1);this._cursorController.setPosition({id:a.id,offset:c});b.stop()})})},_handleReplaceText:function(a,b,c,d,e){this._cursor.clearSelection();a=this._cursor.getPosition();a.id!==b||a.offset<
c||(a=a.offset,a=(a<c+d?c:a-d)+e.length,this._cursorController.setPosition({id:b,offset:a}))},_handleChildrenMoved:function(b,c,d,e,g,h){b=this._cursorController.getPosition();b.id===e&&b.offset>=g&&b.offset<=h&&this._cursorController.setPosition({id:c,offset:d+b.offset-g});h=a.categorizeNode(b.node);var q=this._equation.getParentAndIndex(b.node),r=q.parent;"atom"===h&&r.id===e&&b.offset===b.node.text.length&&q.index===g-1&&this._cursorController.setPosition({id:c,offset:d})}})})},"MW/equations/editor/controller/MouseController":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/on","MW/equations/editor/utils/EquationPlugin","MW/equations/editor/utils/PriorityHandlerChain"],function(h,e,g,d,c){return h(d,{pluginId:"controller.mouse",pluginDependencies:["api.attributes","controller.focus","view.rootnode"],_DOUBLE_CLICK_TIME:400,constructor:function(b,a,d){this._attributes=b;this._rootNode=d;this._focusController=a;this._mouseDownHandlers=new c;this._mouseMoveHandlers=new c;this._mouseUpHandlers=new c;this._mouseDoubleClickHandlers=new c;this.own(g(d,
"mousedown",e.hitch(this,"_handleMouseDown")));this.own(g(d,"mousemove",e.hitch(this,"_handleMouseMove")));this.own(g(d,"mouseup",e.hitch(this,"_handleMouseUp")))},addMouseUp:function(b,a){return this._mouseUpHandlers.add(b,a)},addMouseDown:function(b,a){return this._mouseDownHandlers.add(b,a)},addMouseDoubleClick:function(b,a){return this._mouseDoubleClickHandlers.add(b,a)},addMouseMove:function(b,a){return this._mouseMoveHandlers.add(b,a)},_addWindowMouseMoveHandler:function(){this._windowMouseMoveHandler||
(this._windowMouseMoveHandler=g(window,"mousemove",e.hitch(this,"_handleWindowMouseMove")))},_handleWindowMouseMove:function(b){1!==(b.buttons&1)?(this._windowMouseMoveHandler.remove(),this._windowMouseMoveHandler=null):this._rootNode.contains(b.target)||this._mouseMoveHandlers.fire(b)},_addWindowMouseUpHandler:function(){this._windowMouseUpHandler||(this._mouseDownFocus=this._focusController.add("mouse-down"),this._windowMouseUpHandler=g(window,"mouseup",e.hitch(this,"_handleWindowMouseUp")))},_handleWindowMouseUp:function(b){this._windowMouseUpHandler.remove();
this._windowMouseUpHandler=null;this._mouseDownFocus.remove()},_handleMouseMove:function(b){!this._attributes.get("disabled")&&!(b.pageX===this._lastX&&b.pageY===this._lastY)&&(this._lastX=b.pageX,this._lastY=b.pageY,this._mouseMoveHandlers.fire(b))},_handleMouseDown:function(b){if(!this._attributes.get("disabled")){this._addWindowMouseMoveHandler();this._addWindowMouseUpHandler();var a=b.timeStamp;if(a-this._lastClickTime<this._DOUBLE_CLICK_TIME&&0===b.button&&b.pageX===this._lastX&&b.pageY===this._lastY)return this._mouseDoubleClickHandlers.fire(b),
!0;this._lastX=b.pageX;this._lastY=b.pageY;this._lastClickTime=a;this._mouseDownHandlers.fire(b)}},_handleMouseUp:function(b){this._windowMouseUpHandler&&this._handleWindowMouseUp(b);this._attributes.get("disabled")||this._mouseUpHandlers.fire(b)}})})},"MW/equations/editor/controller/PlaceholderAtomController":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/equations/editor/utils/CursorUtils","MW/equations/editor/utils/EquationPlugin"],function(h,e,g,d,c){return h(c,{pluginId:"controller.placeholderatomcontroller",
pluginDependencies:["model.equation"],constructor:function(b){this._equation=b;this.own(g.after(this._equation,"beforeDeleteNode",e.hitch(this,"_handleDeleteNode"),!0));this.own(g.after(this._equation,"afterNodeInserted",e.hitch(this,"_handleNodeInserted"),!0));this.own(g.after(this._equation,"afterChildrenMoved",e.hitch(this,"_handleChildrenMoved"),!0))},_handleNodeInserted:function(b,a,c,d){a=this._equation.getById(a);2===a.children.length&&a.children[1]&&"placeholder-atom"===a.children[1]["data-category"]?
b.deleteNode(a.children[1].id):d&&"placeholder"===d["data-category"]&&this._insertPlaceholderAtom(b,d.id)},_handleDeleteNode:function(b,a){var c=this._equation.getParent(this._equation.getById(a));"placeholder"===c["data-category"]&&1===c.children.length&&this._insertPlaceholderAtom(b,c.id)},_handleChildrenMoved:function(b,a,c,d,e,g){a=this._equation.getById(a);1<a.children.length&&(a.children[a.children.length-1]&&"placeholder-atom"===a.children[a.children.length-1]["data-category"]&&b.deleteNode(a.children[a.children.length-
1].id),1<a.children.length&&(c<a.children.length-1&&a.children[c]&&"placeholder-atom"===a.children[c]["data-category"])&&b.deleteNode(a.children[c].id),1<a.children.length&&(a.children[0]&&"placeholder-atom"===a.children[0]["data-category"])&&b.deleteNode(a.children[0].id));c=this._equation.getById(d);"placeholder"===c["data-category"]&&0===c.children.length&&this._insertPlaceholderAtom(b,c.id)},_insertPlaceholderAtom:function(b,a){b.insertNode(a,0,"MathText",{"data-category":"placeholder-atom",text:""})}})})},
"MW/equations/editor/controller/SelectionController":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","MW/equations/editor/utils/CursorUtils","MW/equations/editor/utils/NodeUtils"],function(h,e,g,d,c){return e(null,{pluginId:"controller.selection",pluginDependencies:["model.cursor","model.equation"],constructor:function(b,a){this._cursor=b;this._equation=a},getSelectionStartLogical:function(){if(this._cursor.hasSelection()){var b=this.getSelectionSpan();return d.logicalFromPosition({id:b.id,
offset:b.reversed?b.right:b.left},this._equation.getRoot())}},getSelectionLogical:function(){if(this._cursor.hasSelection()){var b=this.getSelectionSpan(),a=d.logicalFromPosition({id:b.id,offset:b.left},this._equation.getRoot()),c=d.logicalFromPosition({id:b.id,offset:b.right},this._equation.getRoot());return{left:a,right:c,reversed:b.reversed}}},hasSelection:function(){return this._cursor.hasSelection()},iterateSelection:function(b){var a=this.getSelectionSpan(),d={},d="atom"===c.categorizeNode(a.node)?
[a.node]:a.node.children.slice(a.left,a.right);this._equation.iterate(g.mixin({},b,{start:d}))},getSelectionSpan:function(){var b=this._cursor.getSelection();return this.getSpan(b[0],b[1])},getSelectionShrinkPosition:function(){var b=this._cursor.getSelection(),b=this._analyzeAncestors(b[0],b[1]),a=c.categorizeNode(b.lastCommon.node);if("placeholder"===a||"atom"===a){var a=b.lastCommon.minLeftOffset,f=b.lastCommon.minRightOffset,e=b.length,e=b.lastCommonIndex===e-1||b.lastCommonIndex===e-2&&b[e-1].leftOffset===
b[e-1].rightOffset;if(a<f-1||e)return{id:b.lastCommon.id,offset:b.reversed?a+1:f-1}}for(f=b.lastCommonIndex;f+1<b.length&&!(f+=1,a=c.categorizeNode(b[f].node),"atom"===a||"placeholder"===a););return{id:b[f].id,offset:b.reversed?0:d.nodeLength(b[f].node)}},getSpan:function(b,a){if(b.id===a.id)return{id:b.id,left:Math.min(b.offset,a.offset),right:Math.max(b.offset,a.offset),reversed:b.offset>a.offset,node:this._equation.getById(b.id)};for(var d=this._analyzeAncestors(b,a),e=d.lastCommonIndex,g=d.lastCommonIndex;0<=
e;){var h=c.categorizeNode(d[e].node);if("atom"===h||"placeholder"===h){g=e;break}e-=1}return{id:d[g].id,left:d[g].minLeftOffset,node:d[g].node,right:d[g].minRightOffset,reversed:d.reversed}},_analyzeAncestors:function(b,a){for(var c=this._getAncestors(b),d=this._getAncestors(a),e=0;e<c.length&&e<d.length&&c[e].id===d[e].id;)c[e].minLeftOffset=Math.min(c[e].leftOffset,d[e].leftOffset),c[e].minRightOffset=Math.max(c[e].rightOffset,d[e].rightOffset),e+=1;var e=e-1,g={lastCommonIndex:e,lastCommon:c[e],
length:c.length,reversed:c[e].leftOffset>d[e].leftOffset||c[e].rightOffset>d[e].rightOffset};c.forEach(function(a,b){g[b]=a});return g},_getAncestors:function(b){var a=this._equation.getById(b.id),c=b.offset,d=b.offset;for(b=[];a;)if(b.unshift({id:a.id,leftOffset:c,rightOffset:d,node:a}),d=this._equation.getParentAndIndex(a)){var e="MathText"===a.className&&c===a.text.length,g="MathText"===a.className&&0===c,a=d.parent,c=d.index,d=d.index+1;e?c=d:g&&(d=c)}else break;return b}})})},"MW/equations/editor/controller/UndoRedoController":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/aspect","MW/equations/editor/utils/EquationPlugin"],function(h,e,g,d){return h(d,{pluginId:"controller.undoredo",pluginDependencies:["controller.editmanager","model.cursor","model.equation"],constructor:function(c,b,a){this._undoStack=[];this._redoStack=[];this._equationModel=a;this._cursorModel=b;this.own(g.after(c,"onNewStep",e.hitch(this,"_insert"),!0));this.own(g.after(c,"onReset",e.hitch(this,"_clear"),!0))},onChange:function(){},_clear:function(){this._undoStack=[];this._redoStack=
[];this.onChange()},canUndo:function(){return 0<this._undoStack.length},canRedo:function(){return 0<this._redoStack.length},undo:function(){if(this.canUndo()){var c=this._undoStack.pop();c.unexecute();this._redoStack.push(c);this.onChange()}},redo:function(){if(this.canRedo()){var c=this._redoStack.pop();c.execute();this._undoStack.push(c);this.onChange()}},_insert:function(c){this._undoStack.push(c);this._redoStack=[];this.onChange()}})})},"MW/equations/editor/helper/BackspaceToUndoHelper":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/aspect","MW/equations/editor/utils/EquationPlugin"],function(h,e,g,d){return h(d,{pluginId:"helper.backspacetoundo",pluginDependencies:["controller.undoredo","controller.keyhandler","model.cursor","model.equation"],constructor:function(c,b,a,d){this._undoRedoController=c;this.own(b.add("backspace",e.hitch(this,"_handleBackspace",-1),10));this.own(g.after(a,"onChange",e.hitch(this,"_reset")));this.own(g.after(d,"onChange",e.hitch(this,"_reset")))},start:function(){this._mapBackspaceToUndo=
!0},_reset:function(){this._mapBackspaceToUndo=!1},_handleBackspace:function(){if(this._mapBackspaceToUndo)return this._undoRedoController.undo(),this._mapBackspaceToUndo=!1,!0}})})},"MW/equations/editor/helper/DeleteHelper":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","MW/equations/editor/utils/NodeUtils"],function(h,e,g,d){return e(null,{pluginId:"helper.delete",pluginDependencies:["controller.selection","model.equation"],constructor:function(c,b){this._selectionController=
c;this._equation=b;this._deleteHandlers=[]},addDeleteHandler:function(c){this._deleteHandlers.push(c);return{remove:g.hitch(this,function(){var b=this._deleteHandlers.indexOf(c);0<=b&&this._deleteHandlers.splice(b,1)})}},handleDelete:function(c){return h.some(this._deleteHandlers,function(b){return b(c)})},deleteSelection:function(c){this.deleteRange(c,this._selectionController.getSelectionSpan())},deleteRange:function(c,b){var a=b.node,f=d.categorizeNode(a);if("atom"===f)this.deleteInAtom(c,a,b.left,
b.right-b.left);else if("placeholder"===f){for(f=b.right-1;f>=b.left;f-=1)c.deleteNode(a.children[f].id);f=a.children[b.left-1];a=a.children[b.left];f&&a&&d.mergeIfCompatible(c,f,a)}},deleteInAtom:function(c,b,a,f){b.text.length===f?(a=this._equation.getPreviousSibling(b),f=this._equation.getNextSibling(b),c.deleteNode(b.id),a&&f&&d.mergeIfCompatible(c,a,f)):c.replaceText(b.id,a,f,"")}})})},"MW/equations/editor/helper/ExportHTMLImage":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style MW/equations/editor/utils/EquationPlugin MW/equations/renderer/model/utils/MathMLUtils MW/rtc/misc/ImageURIUtilities MW/rtc/plugins/cutcopypaste/MIMETypes".split(" "),
function(h,e,g,d,c,b,a){return h(d,{pluginId:"helper.exporthtmlimage",pluginFamily:"copypaste",pluginDependencies:["external.clipboardtempdirpath","helper.mimetype","model.equation","view.renderer","view.rootnode"],constructor:function(a,b,c,d,g){this._equation=c;this._clipboardTempDirpath=a;this._renderer=d;this._rootNode=g;this.own(b.addExportContributor(e.hitch(this,"_convertToImage")))},_convertToImage:function(d){if("MathText"===d.node.className)return[];var e=g.getComputedStyle(this._rootNode).fontSize;
d=d.node.children.slice(d.left,d.right);d=c.exportMathML(d,{attribBlackList:["id","data-category"],inline:this._equation.getRoot().inline});e=this._renderer.getEquationRenderer().renderToImageURLSynch(d,e,2);d="\x3cspan "+('style\x3d"vertical-align: '+Math.round(e.verticalAlign)+'"\x3e');d+="\x3cimg ";var h=[];if(this._clipboardTempDirpath){var n=b.pushImageAndGetPathFromURI(e.dataURL,this._clipboardTempDirpath,h);d+='src\x3d"'+n+'"'}else d+='src\x3d"'+e.dataURL+'"';d+=' width\x3d"'+e.width/2+'" height\x3d"'+
e.height/2+'"';return[{flavor:a.HTML,content:d+"\x3e\x3c/span\x3e"}].concat(0<h.length?[{flavor:a.IMAGE_LIST,content:h}]:[])}})})},"MW/equations/editor/helper/ExportImage":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style MW/equations/editor/utils/EquationPlugin MW/equations/renderer/model/utils/MathMLUtils MW/equations/renderer/model/utils/NodeFactory MW/rtc/plugins/cutcopypaste/MIMETypes".split(" "),function(h,e,g,d,c,b,a){return h(d,{pluginId:"helper.exportimage",pluginFamily:"copypaste",
pluginDependencies:["helper.mimetype","model.equation","view.renderer","view.rootnode"],constructor:function(a,b,c,d){this._equation=b;this._renderer=c;this._rootNode=d;this.own(a.addExportContributor(e.hitch(this,"_convertToImage")))},_convertToImage:function(d){var h=g.getComputedStyle(this._rootNode).fontSize,l=[];d.node.children?l=d.node.children.slice(d.left,d.right):"MathText"===d.node.className?l.push(b.createNode("MathText",e.mixin(d.node.getContents(),{text:d.node.text.substring(d.left,d.right)}))):
l.push(d.node);d=c.exportMathML(l,{attribBlackList:["id","data-category"],inline:this._equation.getRoot().inline});h=this._renderer.getEquationRenderer().renderToImageURLSynch(d,h,1);return[{flavor:a.IMAGE,content:h.dataURL}]}})})},"MW/equations/editor/helper/ExportMathML":function(){define("dojo/_base/declare dojo/_base/lang MW/equations/editor/utils/EquationPlugin MW/equations/renderer/model/utils/MathMLUtils MW/equations/renderer/model/utils/NodeFactory MW/rtc/plugins/cutcopypaste/MIMETypes".split(" "),
function(h,e,g,d,c,b){return h(g,{pluginId:"helper.exportmathml",pluginFamily:"copypaste",pluginDependencies:["helper.mimetype"],constructor:function(a){this.own(a.addExportContributor(e.hitch(this,"_generateMathMLContent")))},_generateMathMLContent:function(a){var f=[];a.node.children?f=a.node.children.slice(a.left,a.right):"MathText"===a.node.className?f.push(c.createNode("MathText",e.mixin(a.node.getContents(),{text:a.node.text.substring(a.left,a.right)}))):f.push(a.node);a=d.exportMathML(f,{attribBlackList:["id",
"data-category"]});return[{flavor:b.MATHML_PRESENTATION,content:a}]}})})},"MW/equations/editor/helper/ExportPlainText":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/equations/editor/utils/EquationPlugin","MW/rtc/plugins/cutcopypaste/MIMETypes"],function(h,e,g,d){return h(g,{pluginId:"helper.exportplaintext",pluginFamily:"copypaste",pluginDependencies:["helper.mimetype","helper.plaintextgenerator"],constructor:function(c,b){this._plainTextGeneratorHelper=b;this.own(c.addExportContributor(e.hitch(this,
"_generateTextMIMEType")))},_generateTextMIMEType:function(c){c=this._plainTextGeneratorHelper.convertSelection(c);return[{flavor:d.TEXT,content:c},{flavor:d.COPY_FOR_COMMAND_WINDOW,content:c}]}})})},"MW/equations/editor/helper/ImportHelper":function(){define(["dojo/_base/declare","MW/equations/editor/utils/EquationPlugin","MW/equations/renderer/Renderer"],function(h,e,g){return h(e,{pluginId:"helper.import",pluginDependencies:[],constructor:function(d,c){this._renderer={}},importModel:function(d,
c){var b=this._rendererFor(c||"mathml");"tex"===c&&(d=b.setDisplaystyleIfNeeded(d));return b.getModel(d)},_rendererFor:function(d){this._renderer[d]||(this._renderer[d]=new g({equationFormat:d,cacheFontMetrics:!1}));return this._renderer[d]}})})},"MW/equations/editor/helper/InsertHelper":function(){define("dojo/_base/declare dojo/_base/lang MW/equations/editor/utils/MathVariant MW/equations/editor/utils/NodeUtils MW/equations/renderer/model/SpacingClasses MW/equations/renderer/model/Symbols".split(" "),
function(h,e,g,d,c,b){return h(null,{pluginId:"helper.insert",pluginDependencies:["controller.cursor","model.equation"],constructor:function(a,b){this._cursorController=a;this._equation=b},getInsertPosition:function(a,b){b=b||this._cursorController.getPosition();var c=this._equation.getById(b.id),e=d.categorizeNode(c);if("atom"===e||"placeholder-atom"===e){var g=this._equation.getParentAndIndex(c),e=g.parent,g=g.index;if(0===b.offset)return{id:e.id,node:e,offset:g};b.offset<c.text.length&&this._splitNode(a,
c,b.offset);return{id:e.id,node:e,offset:g+1}}return b},insertTemplate:function(a,b,c,g){this._cursorPositions=[];var h=g?c.children[g-1]:null,p=g<c.children.length?c.children[g]:null;e.isArray(b[0])?b.forEach(function(b,d){this._insertRecursive(a,b,c,g+d)},this):this._insertRecursive(a,b,c,g);if(h){if(b=this._equation.getNextSibling(h))d.mergeIfCompatible(a,h,b),b=this._equation.getNextSibling(h);this.autoRemoveSpace(a,h,b)}p&&(h=this._equation.getPreviousSibling(p))&&d.mergeIfCompatible(a,h,p);
return this._cursorPositions},_insertRecursive:function(a,b,c,d){if(0!==b.length){var e=a.insertNode(c.id,d,b[0],b[1]);b[2]&&b[2].forEach(function(b,c){this._insertRecursive(a,b,e,c)},this);b[1]&&b[1].hasOwnProperty("data-cursor")&&(c={id:e.id,offset:0},this._cursorPositions[b[1]["data-cursor"]]=c,0===b[1]["data-cursor"]&&this._cursorController.setPosition(c))}},autoRemoveSpace:function(a,b,c){if(b&&!("MathText"!==b.className||"mtext"!==b.kind)){var e=this._equation.getPreviousSibling(b);e&&c&&!("atom"===
d.categorizeNode(e)&&"symbol"!==e.kind&&"symbol"!==c.kind)&&(e=(e=this._hasSpacingRight(e))||this._hasSpacingLeft(c))&&("\u2009"===b.text?a.deleteNode(b.id):b.text.match(/^\u2009+$/)&&a.replaceText(b.id,0,1,""))}},_hasSpacingRight:function(a){return"symbol"!==a.kind||!b.symbolMap[a.symbolName]?!1:0<=[c.OP,c.BIN,c.REL,c.PUNCT,c.INNER].indexOf(b.symbolMap[a.symbolName].spacing)},_hasSpacingLeft:function(a){return"symbol"!==a.kind||!b.symbolMap[a.symbolName]?!1:0<=[c.OP,c.BIN,c.REL,c.INNER].indexOf(b.symbolMap[a.symbolName].spacing)},
prepareTextAttributes:function(a,b,c){"number"===a.kind&&(b&&"id"===b.kind&&0<c)&&(a.kind="id");return a},_splitNode:function(a,b,c){var e=this._equation.getParentAndIndex(b),g={text:b.text.substr(c),kind:b.kind,mathvariant:b.mathvariant};"number"===d.kindOfText(g.text)&&(g.kind="number");a.insertNode(e.parent.id,e.index+1,"MathText",this.prepareTextAttributes(g));a.replaceText(b.id,c,b.text.length-c,"")}})})},"MW/equations/editor/helper/InsertTemplateHelper":function(){define(["dojo/_base/declare",
"MW/equations/editor/utils/Serializer"],function(h,e){return h(null,{pluginId:"helper.inserttemplate",pluginDependencies:["controller.cursor","controller.selection","helper.delete","helper.insert","model.equation"],constructor:function(e,d,c,b,a){this._deleteHelper=c;this._insertHelper=b;this._selectionController=d;this._equation=a;this._cursorController=e},insertTemplate:function(e,d,c){var b=null;c?(b=this._serializeRange(c),this._deleteHelper.deleteRange(e,c)):this._cursorController.hasSelection()&&
(b=this._serializeRange(this._selectionController.getSelectionSpan()),this._deleteHelper.deleteSelection(e));c=this._insertHelper.getInsertPosition(e);var a=this._equation.getById(c.id);d=this._insertHelper.insertTemplate(e,d,a,c.offset);b&&(0<b.length&&d[0])&&(c=this._insertHelper.getInsertPosition(e),a=this._equation.getById(c.id),this._insertHelper.insertTemplate(e,b,a,c.offset),d[1]&&this._cursorController.setPosition(d[1]));return d},_serializeRange:function(g){return e.serializeRange(g.node,
g.left,g.right)}})})},"MW/equations/editor/helper/MimeTypeHelper":function(){define("dojo/_base/declare dojo/_base/lang MW/equations/editor/utils/NodeUtils MW/equations/editor/utils/PlainTextParser MW/equations/editor/utils/Serializer MW/rtc/plugins/cutcopypaste/MIMETypes".split(" "),function(h,e,g,d,c,b){return h(null,{pluginId:"helper.mimetype",pluginDependencies:["controller.selection","helper.import","helper.insert"],constructor:function(a,b,c){this._selectionController=a;this._importHelper=b;
this._insertHelper=c;this._exportContributor=[]},addExportContributor:function(a){this._exportContributor.push(a);return{remove:e.hitch(this,function(){var b=this._exportContributor.indexOf(a);0<=b&&this._exportContributor.splice(b,1)})}},acceptedMimeTypes:function(){return["application/matlab_json_equation",b.TEXT,b.MATHML_PRESENTATION]},convertSelection:function(){var a=this._selectionController.getSelectionSpan();return this.convertRange(a)},convertRange:function(a){var b=[],d=JSON.stringify(c.serializeRange(a.node,
a.left,a.right));b.push({flavor:"application/matlab_json_equation",content:d});this._exportContributor.forEach(function(c){b=b.concat(c.call(null,a))});return b},insertContent:function(a,f){var e;if(f["application/matlab_json_equation"])try{var h=JSON.parse(f["application/matlab_json_equation"]);e=this._insertHelper.getInsertPosition(a);this._insertHelper.insertTemplate(a,h,e.node,e.offset)}catch(n){}else if(f[b.MATHML_PRESENTATION]){if(e=this._importHelper.importModel(f[b.MATHML_PRESENTATION],"mathml"))e=
g.categorizeTree(e),h=c.serializeRange(e.children[0]),e=this._insertHelper.getInsertPosition(a),this._insertHelper.insertTemplate(a,h,e.node,e.offset)}else if(f[b.TEXT]||f[b.UNICODE_STRING])h=d.parse(f[b.TEXT]||f[b.UNICODE_STRING]),e=this._insertHelper.getInsertPosition(a),this._insertHelper.insertTemplate(a,h,e.node,e.offset)}})})},"MW/equations/editor/utils/PlainTextParser":function(){define(["MW/equations/editor/utils/NodeUtils","MW/equations/renderer/model/Symbols"],function(h,e){function g(c,
b){if("delimiter"===c)return["MathDelimiter",{symbolName:e.getSymbolName(b)},[]];var a={kind:c,text:b};"symbol"===c&&(a.symbolName=e.getSymbolName(b));return["MathText",a,[]]}var d=[h.TEXT_KIND.IDENTIFIER,h.TEXT_KIND.NUMBER];return{parse:function(c){for(var b=[],a=0,f,e;a<c.length;){var l=c.substr(a,1),l=h.kindOfText(l);f===h.TEXT_KIND.IDENTIFIER&&l===h.TEXT_KIND.NUMBER&&(l=h.TEXT_KIND.IDENTIFIER);if(l!==f||0>d.indexOf(l))f&&f!==h.TEXT_KIND.WHITESPACE&&b.push(g(f,c.substring(e,a))),f=l,e=a;a+=1}f&&
f!==h.TEXT_KIND.WHITESPACE&&b.push(g(f,c.substr(e)));return b}}})},"MW/equations/editor/helper/PlainTextGenerator":function(){define(["dojo/_base/declare","MW/equations/editor/utils/EquationPlugin","MW/equations/renderer/model/Symbols"],function(h,e,g){var d={symbol:["id","number","delimiter"],number:["id","number"],id:["id","number"]};return h(e,{pluginId:"helper.plaintextgenerator",pluginDependencies:["model.equation"],constructor:function(c){this._equation=c},convertSelection:function(c){function b(b,
c){if(d[f]&&0<=d[f].indexOf(b)||d[b]&&0<=d[b].indexOf(f))a+=" ";f=b;a+=c}if("MathText"===c.node.className)return c.node.symbolName?g.serializeSymbol(c.node.symbolName):c.node.text.slice(c.left,c.right);var a="",f="";this._equation.iterate({start:c.node.children.slice(c.left,c.right),MathText:function(a){a.symbolName?b(a.kind,g.serializeSymbol(a.symbolName)):b(a.kind,a.text)},MathDelimiter:function(a){a.symbolName&&b("delimiter",g.serializeSymbol(a.symbolName))}});return a}})})},"MW/equations/editor/model/Cursor":function(){define(["dojo/_base/declare",
"dojo/_base/lang"],function(h,e){return h(null,{pluginId:"model.cursor",constructor:function(){this._position={};this._paused={}},clearSelection:function(){this._anchor=void 0},getPosition:function(){return e.mixin({},this._position)},getAnchor:function(){return this._anchor&&e.mixin({},this._anchor)},setPosition:function(e,d){d?(this._anchor=this._anchor||this.getPosition(),this._anchor.id===e.id&&this._anchor.offset===e.offset&&(this._anchor=void 0)):this._anchor=void 0;this._position=e;this._onChange()},
hasSelection:function(){return!!this._anchor},getSelection:function(){return[e.mixin({},this._anchor),e.mixin({},this._position)]},getState:function(){return[this._anchor?e.mixin({},this._anchor):void 0,this.getPosition()]},setState:function(g){this.setPosition(g[1]);g[0]&&(this._anchor=e.mixin({},g[0]))},pauseEvents:function(e){this._paused[e||"default"]=!0},unpauseEvents:function(e){delete this._paused[e||"default"];this._shouldFire&&!this._isPaused()&&this._onChange()},_isPaused:function(){return 0<
Object.keys(this._paused).length},onChange:function(){},_onChange:function(){this._isPaused()?this._shouldFire=!0:(this.onChange(),this._shouldFire=!1)}})})},"MW/equations/editor/model/Equation":function(){define("dojo/_base/array dojo/_base/declare MW/equations/editor/utils/Iterator MW/equations/editor/utils/NodeUtils MW/equations/renderer/model/utils/TeXUtils MW/equations/renderer/model/utils/MathMLUtils mw-utils/Utils".split(" "),function(h,e,g,d,c,b,a){return e(null,{pluginId:"model.equation",
pluginDependencies:["helper.import"],constructor:function(a){this._importHelper=a;this.setEquation('\x3cmath\x3e\x3cmrow\x3e\x3cmi data-category\x3d"placeholder-atom"\x3e\x3c/mi\x3e\x3c/mrow\x3e\x3c/math\x3e')},changed:function(){this._eventsPaused?this._triggered=!0:(this._triggered=!1,this.onChange())},pauseEvents:function(){this._eventsPaused=!0},unpauseEvents:function(){this._eventsPaused=!1;this._triggered&&this.changed()},getRoot:function(){return this._root},getById:function(a){return this._searchById(a,
this._root)},_searchById:function(a,b){var c;if(b.id===a)return b;h.some(b.children,function(b){if(b)return c=this._searchById(a,b)},this);return c},getParent:function(a){return(a=this.getParentAndIndex(a))&&a.parent},getParentAndIndex:function(a){return this._getParentAndIndex(a,this._root)},_getParentAndIndex:function(a){var b=a.parent;if(b)return{parent:b,index:b.children.indexOf(a)}},getPreviousSibling:function(a){if((a=this.getParentAndIndex(a))&&0<a.index)return a.parent.children[a.index-1]},
getNextSibling:function(a){if((a=this.getParentAndIndex(a))&&a.index<a.parent.children.length-1)return a.parent.children[a.index+1]},onChange:function(){},beforeDeleteNode:function(a,b){},afterNodeInserted:function(a,b,c,d){},afterChildrenMoved:function(a,b,c,d,e,g){},beforeReplaceText:function(a,b,c,d,e){},beforeUpdateAttributes:function(a,b,c){},beforeMergeNodes:function(a,b,c){},setEquation:function(a,b){this._root=this._importHelper.importModel(a,b);this._prepareEquation(this._root);d.categorizeTree(this._root);
this.changed()},serializeToMathMl:function(){return b.exportMathML([this._root],{attribBlackList:["id","data-category"]})},serializeToTeX:function(){return c.exportLaTeX([this._root],{attribBlackList:["id","data-category"]})},iterate:function(a){a=new g(this,a);a.iterate();return a.getResult()},_prepareEquation:function(b){b.id||(b.id=a.generateUuid());b.children&&b.children.forEach(function(a){a&&(a.parent=b,this._prepareEquation(a))},this)}})})},"MW/equations/editor/utils/Iterator":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang MW/equations/editor/utils/IteratorConstants MW/equations/editor/utils/IteratorResolver MW/equations/editor/utils/NodeUtils".split(" "),
function(h,e,g,d,c,b){return e(null,{constructor:function(a,b){this._equation=a;this._options=g.mixin({start:b.from||a.getRoot(),direction:d.DOWN},b)},stop:function(a){this._result=a;this._stopped=!0},isStopped:function(){return this._stopped},getResult:function(){return this._result},getParent:function(){return this._equation.getParent(this._currentNode)},getParentIndex:function(){var a=this._equation.getParentAndIndex(this._currentNode);return a&&a.index},getLastNode:function(){return this._lastNode},
getCurrentNode:function(){return this._currentNode},getDirection:function(){return this._moveDirection||"down"},iterate:function(){var a=this._options.start;g.isArray(a)||(a=[a]);h.some(a,g.hitch(this,function(a){this._iterateNode(a);return this.isStopped()}))},_iterateNode:function(a){var b=c.build(this._options.direction,a,this._equation);if(this._options.skipFirst){var d=b.getNext();a=d.node;this._moveDirection=d.direction}for(;a;){this._lastNode=this._currentNode;this._currentNode=a;this._handleNode();
if(this.isStopped()||!b.hasNext())break;d=b.getNext();a=d.node;this._moveDirection=d.direction}},_handleNode:function(){var a=b.categorizeNode(this._currentNode);this._options[a]&&this._options[a].call(void 0,this._currentNode,this);this._options[this._currentNode.className]&&this._options[this._currentNode.className].call(void 0,this._currentNode,this);this._options.all&&this._options.all.call(void 0,this._currentNode,this)}})})},"MW/equations/editor/utils/IteratorResolver":function(){define(["dojo/_base/array",
"dojo/_base/declare"],function(h,e){function g(b){for(var a=[["direction","[a-z]+"],["repeat","\\*"],["paren","[()]"],["require","\\+"]],c=RegExp("(?:("+h.map(a,function(a){return a[1]}).join(")|(")+")|(.))","g"),d,e=[];d=c.exec(b);)for(var g=0;g<a.length;g+=1)if(d[g+1]){e.push({type:a[g][0],match:d[g+1]});break}return e}function d(b){var a=[],c={},d=[];b.forEach(function(b){if(0<Object.keys(c).length&&("paren"===b.type||c[b.type]))a.push(c),c={};switch(b.type){case "direction":c.direction=b.match;
break;case "repeat":case "require":c[b.type]=!0;break;case "paren":"("===b.match?(d.push(a),a=[]):(b=a,a=d.pop(),c={direction:"sequence",children:b})}});0<Object.keys(c).length&&a.push(c);return a}var c=e(null,{constructor:function(b,a,c){this._state={current:b,sequence:c,index:0};this._stateStack=[];this._visitStack=[];this._equationModel=a;this._resolveNext()},_resolveNext:function(){this._next=null;if(this._state.index>=this._state.sequence.length)return this._currentSequenceEnded();var b=this._state.sequence[this._state.index],
a,c=b.repeat,d=!0;switch(b.direction){case "children":0===this._visitStack.length&&this._state.current.children&&(this._visitStack=this._state.current.children.slice(0));for(;!a&&0<this._visitStack.length;)a=this._visitStack.shift();a&&a.children&&(this._visitStack=a.children.concat(this._visitStack));c=0<this._visitStack.length;d=!1;break;case "up":a=this._equationModel.getParent(this._state.current);break;case "right":a=this._equationModel.getNextSibling(this._state.current);break;case "left":a=
this._equationModel.getPreviousSibling(this._state.current);break;case "sequence":return this._state.index+=1,this._stateStack.push(this._state),this._state={current:this._state.current,sequence:b.children,repeat:b.repeat,index:0},this._resolveNext()}a?(this._state.foundNode=!0,this._next={node:a,direction:b.direction},c||(this._state.index+=1),d&&(this._state.current=a)):(this._next=null,this._state.index+=1,b.require&&(this._state.index=this._state.sequence.length+1),this._resolveNext())},_currentSequenceEnded:function(){if(this._state.repeat&&
this._state.foundNode&&(this._state.index=0,this._state.foundNode=!1,this._resolveNext(),this._next))return;0<this._stateStack.length&&(this._state=this._stateStack.pop(),this._resolveNext())},hasNext:function(){return!!this._next},getNext:function(){var b=this._next;this._resolveNext();return b}});return{build:function(b,a,f){b=g(b);b=d(b);return new c(a,f,b)}}})},"MW/equations/editor/view/Caret":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-construct","dojo/dom-style","MW/rtc/plugins/view/divcaret/DivCaretPlugin"],
function(h,e,g,d,c){return h(null,{pluginId:"view.caret",pluginDependencies:["view.rootnode"],constructor:function(b){this._hidden={};this._rtcCursorAdapter={position:void 0,onUpdate:function(a){},isSelectionHidden:function(){},isHidden:e.hitch(this,"isHidden"),getNode:e.hitch(this,function(){return{isReadOnly:e.hitch(this,function(){return this._isReadonly})}})};this._rtcCursorViewAdapter={onUpdate:function(){}};this._cursorControllerAdapter={getCursors:e.hitch(this,function(){return[this._rtcCursorAdapter]})};
var a={addLayer:e.hitch(this,function(a){g.place(a,b);this._node=a.children[0]}),scrollPositionIntoView:function(){},getCoordinateForPosition:e.hitch(this,function(a){return{x:this._x||0.1,y:this._y,height:this._h}})};this._divCaret=new c(this._rtcCursorViewAdapter,a,this._cursorControllerAdapter)},isHidden:function(){return 0<Object.keys(this._hidden).length},setReadonly:function(b){this._isReadonly=b;this._rtcCursorAdapter.onUpdate()},getGeometry:function(){return{x:this._x,y:this._y,h:this._h,
w:1}},getNode:function(){return this._divCaret.getBox()},hide:function(b){this._hidden[b||"default"]=!0;this._rtcCursorViewAdapter.onUpdate()},show:function(b){delete this._hidden[b||"default"];this._rtcCursorViewAdapter.onUpdate()},setXY:function(b,a,c){this._x=b;this._y=a;this._h=c||16;this._rtcCursorViewAdapter.onUpdate()}})})},"MW/rtc/plugins/view/divcaret/DivCaretPlugin":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-construct dojo/dom-style dojo/has MW/rtc/abstract/AbstractPlugin".split(" "),
function(h,e,g,d,c,b,a){return h(a,{ACTIV_COLOR:"rgba(0, 0, 0, 1)",INACTIV_COLOR:"rgba(0, 0, 0, 0.3)",constructor:function(a,b,c){this._rtcView=b;this._cursorController=c;this._layer=d.create("span",{"class":"cursorGroup"});this._permanentLayer=document.createElement("span");this._permanentLayer.className="cursor";this._layer.appendChild(this._permanentLayer);this._rtcView.addLayer(this._layer);this._paddingLeft=this._rtcView.paddingLeft;this._layers=[];this._blinkAllTimer=null;this._hidden=!1;this.own(g.after(a,
"onUpdate",e.hitch(this,"_handleCursorViewUpdate")));this.own(g.after(a,"onScrollCursorIntoView",e.hitch(this,"_handleScrollIntoView")))},_handleCursorViewUpdate:function(){this._layout()},_handleScrollIntoView:function(){this._rtcView.scrollPositionIntoView(this._cursorController.getScrollIntoViewPosition())},getBox:function(){return this._permanentLayer},_hide:function(a){c.set(a,{visibility:"hidden"});this._hidden=!0},_layout:function(){this._removeAllCarets();this._cursorController.getCursors().forEach(function(a,
b){var c;c=0===b?this._permanentLayer:this._addCursorLayer();var d=this._rtcView.getCoordinateForPosition(a.position);this.updateCaretGeometry(c,d);a.isSelectionHidden()||a.isHidden()?this._hide(c):(this._hidden=!1,d=(d=a.getNode())&&!d.isReadOnly(),c.style.visible=!0,c.style.visibility="visible",c.style.borderColor=d?this.ACTIV_COLOR:this.INACTIV_COLOR,d?c.removeAttribute("inactive"):c.setAttribute("inactive",""))},this);this._blinkAll();this._addAllLayers()},updateCaretGeometry:function(a,b){var c=
b.y+"px",d=b.height-1+"px";a.style.left=(b.x||this._paddingLeft)+"px";a.style.top=c;a.style.height=d},_blinkAll:function(){this._blinkAllTimer&&clearTimeout(this._blinkAllTimer);this._blinkAllTimer=setTimeout(e.hitch(this,this._blink),600)},_blink:function(){this._hidden||(this._layers.forEach(function(a){"hidden"===c.get(a,"visibility")?c.set(a,"visibility","visible"):a.hasAttribute("inactive")||c.set(a,"visibility","hidden")},this),"hidden"===c.get(this._permanentLayer,"visibility")?c.set(this._permanentLayer,
"visibility","visible"):this._permanentLayer.hasAttribute("inactive")||c.set(this._permanentLayer,"visibility","hidden"),this._blinkAllTimer=setTimeout(e.hitch(this,this._blink),600))},_removeAllCarets:function(){this._layers.forEach(function(a){this._layer.removeChild(a)},this);this._layers=[]},_addAllLayers:function(){var a=document.createDocumentFragment();this._layers.forEach(function(b){a.appendChild(b)});this._layer.appendChild(a)},_addCursorLayer:function(){var a=document.createElement("span");
a.className="cursor";this._layers.push(a);return a},destroy:function(){this.inherited(arguments);clearTimeout(this._blinkAllTimer)}})})},"MW/equations/editor/view/Helper":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-geometry dojo/query MW/equations/editor/utils/EquationPlugin".split(" "),function(h,e,g,d,c,b){return h(b,{pluginId:"view.helper",pluginDependencies:["view.renderer","view.rootnode"],constructor:function(a,b){this._rootNode=b;this.own(g.after(a,"onRedraw",
e.hitch(this,"_handleRedraw")))},getNodeGeometry:function(a){return this._getNodeGeometryById(a.id)},isAttachedToDocument:function(){for(var a=this._rootNode;a&&!a.body;)a=a.parentNode;return!!a},getRootGeometry:function(){return d.position(this._rootNode.querySelector(".render-target")||this._rootNode,!0)},_getNodeGeometryById:function(a){var b=d.position(this._rootNode,!0);if(!this._cache[a]){var g=c("*[id\x3d'"+a+"']",this._rootNode)[0],g=d.position(g,!0);this._cache[a]={relativeX:g.x-b.x,relativeY:g.y-
b.y,h:g.h,w:g.w}}return e.mixin({x:this._cache[a].relativeX+b.x,y:this._cache[a].relativeY+b.y},this._cache[a])},_handleRedraw:function(){this._cache={}}})})},"MW/equations/editor/view/HighlightActiveRow":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class dojo/query MW/equations/editor/utils/EquationPlugin".split(" "),function(h,e,g,d,c,b){return h(b,{pluginId:"view.highlightactiverow",pluginDependencies:["api.attributes","model.cursor","controller.caret","view.rootnode"],
constructor:function(a,b,c,d){this._attributes=a;this._cursor=b;this._rootnode=d;this.own(a.observe("disabled",e.hitch(this,"_highlightRow")));this.own(g.after(c,"beforeCaretRedraw",e.hitch(this,"_highlightRow")))},_highlightRow:function(){for(var a=c(".MathRow",this._rootnode),b=0;b<a.length;b+=1)d.remove(a[b],"highlight");if(!this._cursor.hasSelection()&&!this._attributes.get("disabled")&&(a=this._cursor.getPosition(),a=c('*[id\x3d"'+a.id+'"]',this._rootnode),0<a.length)){for(a=a[0];a&&!a.className.match(/MathRow/);)if(a=
a.parentNode,!this._rootnode.contains(a))return;a&&!a.parentNode.className.match(/MathRoot/)&&d.add(a,"highlight")}}})})},"MW/equations/editor/view/KeyHandler":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/on MW/equations/editor/utils/EquationPlugin MW/rtc/events/KeyHandler".split(" "),function(h,e,g,d,c,b){return h(c,{pluginId:"view.keyhandler",pluginDependencies:["controller.keyhandler","external.actionservice","view.rootnode"],constructor:function(a,c,g){this._actionService=
c;this._rtcKeyHandler=new b({insertTextAtCurrentPosition:e.hitch(a,"handleType")},{getAllActions:function(){return[]},addAction:function(){},removeAction:function(){}},g);a.registerView(this);this.own(d(this._rtcKeyHandler.keyCapture,"blur",e.hitch(this,"onBlur")));this.own(d(this._rtcKeyHandler.keyCapture,"focus",e.hitch(this,"onFocus")))},getKeyCapture:function(){return this._rtcKeyHandler.keyCapture},enableBrowserCopyPaste:function(a){this._rtcKeyHandler.enableBrowserCopyPaste(a)},addBinding:function(a){this._rtcKeyHandler.addBinding(a)},
listenTo:function(a,b){this._rtcKeyHandler.listenTo(a,b)},focus:function(){this.getKeyCapture().style.visibility="visible";this._rtcKeyHandler.focus()},onBlur:function(){this.getKeyCapture().style.visibility="hidden"},onFocus:function(){}})})},"MW/equations/editor/view/MoveKeyCaptureOnFocus":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/dom-style","MW/equations/editor/utils/EquationPlugin"],function(h,e,g,d,c){return h(c,{pluginId:"view.movekeycaptureonfocus",pluginDependencies:["view.caret",
"view.keyhandler"],constructor:function(b,a){this._caret=b;this._keyHandlerView=a;this.own(g.before(a,"focus",e.hitch(this,"_beforeFocus")))},_beforeFocus:function(){var b=this._caret.getGeometry(),a=this._keyHandlerView.getKeyCapture();d.set(a,{top:b.y+"px",left:b.x+"px",position:"absolute"})}})})},"MW/equations/editor/view/RootNode":function(){define(["dojo/_base/declare","dojo/dom-construct"],function(h,e){return h(null,{pluginId:"view.rootnode",pluginResolver:"getNode",constructor:function(){this._rootNode=
e.create("div",{className:"mwEquationEditor",style:{position:"relative",display:"inline-block"}})},getNode:function(){return this._rootNode},destroy:function(){e.destroy(this._rootNode)}})})},"MW/equations/editor/view/Renderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class dojo/dom-construct MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/NodeUtils MW/equations/renderer/Renderer".split(" "),function(h,e,g,d,c,b,a,f){return h(b,{pluginId:"view.renderer",
pluginDependencies:["api.attributes","model.equation","view.rootnode"],constructor:function(a,b,d){this._attributes=a;this._rootNode=d;this._renderTarget=c.create("div",{className:"render-target"},this._rootNode);this._equation=b;this.own(g.after(b,"onChange",e.hitch(this,"redraw")));this._createRenderer();["pxPerEm","cacheFontMetrics"].forEach(function(b){this.own(a.observe(b,e.hitch(this,"_handleRendererAttributeChange",b)))},this);this.own(a.observe("disabled",e.hitch(this,"_handleAttributeChange",
"disabled","enabled")));this.own(a.observe("readonly",e.hitch(this,"_handleAttributeChange","readonly","writable")));this.own(a.observe("emptyEquation",e.hitch(this,"_handleEmptyEquationChanged")))},getEquationRenderer:function(){return this._renderer},_handleAttributeChange:function(a,b){this._attributes.get(a)?(d.add(this._rootNode,a),d.remove(this._rootNode,b)):(d.add(this._rootNode,b),d.remove(this._rootNode,a))},_handleEmptyEquationChanged:function(a){this._isEmptyEquation()&&this.redraw()},
_createRenderer:function(){var a={equationFormat:"mathml",cacheFontMetrics:this._attributes.get("cacheFontMetrics")||!1};this._attributes.get("pxPerEm")&&(a.pxPerEm=this._attributes.get("pxPerEm"));this._renderer=new f(a)},_handleRendererAttributeChange:function(){this._createRenderer();this._renderTarget&&this.redraw()},onRedraw:function(){},redraw:function(){if(this._isEmptyEquation()){var a=this._attributes.get("emptyEquation");if("string"===typeof a){var b=this._equation.getRoot().children[0].children[0].id;
c.empty(this._renderTarget);this._renderTarget.innerHTML=a;if(a=this._renderTarget.firstElementChild)a.id=b;return}}this._renderer.draw(this._equation.getRoot(),this._renderTarget).then(e.hitch(this,function(){this.onRedraw()}))},_isEmptyEquation:function(){return a.isEmptyEquation(this._equation.getRoot())}})})},"MW/equations/editor/view/Selection":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-style"],function(h,e,g){return h(null,{pluginId:"view.selection",pluginDependencies:["view.rootnode"],
constructor:function(d){this._node=e.create("span",{"class":"selection",style:{display:"none",position:"absolute",width:"1px",backgroundColor:"rgba(0,132,230,.35)",height:"16px",zIndex:999}},d);this._hidden={}},getNode:function(){return this._node},hide:function(d){this._hidden[d||"default"]=!0;this._node.style.display="none"},show:function(d){delete this._hidden[d||"default"];this.isHidden()||(this._node.style.display="inline-block")},getGeometry:function(){return{x:this._x,y:this._y,h:this._h,w:this._w}},
isHidden:function(){return 0<Object.keys(this._hidden).length},set:function(d,c,b,a){this._x=d;this._y=c;this._h=a;this._w=b;g.set(this._node,{left:d+"px",display:this.isHidden()?"none":"inline-block",top:c+"px",height:a+"px",width:b+"px"})}})})},"MW/equations/utils/PluginService":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang"],function(h,e,g){return e(null,{constructor:function(d){d=d||{};this._disable=d.disable||[];this._dependencies=g.mixin({},d.inject);this._dependencies["core.resolver"]=
this;this._destroyOrder=[];this._byPluginId={};this._byPluginFamily={};this._registry=d.registry||[];this._resolveNames();this._resolveDependencies(d.enable||[])},get:function(d){return this._dependencies[d]},inject:function(d,c){this._dependencies[d]=c},destroy:function(){this._destroyOrder.forEach(function(d){g.isObject(d)&&g.isFunction(d.destroy)&&d.destroy()},this);this._destroyOrder=[];this._dependencies=[]},_resolveNames:function(){this._registry.forEach(function(d){var c=d.prototype,b=c.pluginId,
c=c.pluginFamily;b&&(this._byPluginId[b]||(this._byPluginId[b]=[]),this._byPluginId[b].push(d),c&&(this._byPluginFamily[c]||(this._byPluginFamily[c]=[]),this._byPluginFamily[c].push(b)))},this)},_resolveDependencies:function(d){d.forEach(function(c){this._getOrCreate(c)},this)},_getOrCreate:function(d){if(this._dependencies.hasOwnProperty(d))return this._dependencies[d];if(this._byPluginId[d])return this._createById(d);if(this._byPluginFamily[d]){var c;this._byPluginFamily[d].forEach(g.hitch(this,
function(b){0>this._disable.indexOf(b)&&(c=this._getOrCreate(b))}));return c}console.warn("Could not resolve id "+d)},_createById:function(d){var c=this._byPluginId[d][0],b=[];c.prototype.pluginDependencies&&(b=h.map(c.prototype.pluginDependencies,g.hitch(this,"_getOrCreate")));b=new (Function.prototype.bind.apply(c,[null].concat(b)));this._destroyOrder.unshift(b);(c=c.prototype.pluginResolver)&&(b=b[c]());this.inject(d,b);return b}})})},"MW/rtc/plugins/equations/equationeditor/EquationEditorBridge":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/has dojo/on MW/equations/editor/utils/CaretUtilities MW/equations/editor/utils/CursorUtils MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/NodeUtils".split(" "),
function(h,e,g,d,c,b,a,f,k){var l="up down left right home end ctrl_a meta_a meta_shift_left meta_shift_right meta_left meta_right".split(" "),n="alt_delete alt_backspace shift_delete shift_backspace ctrl_delete ctrl_backspace meta_delete meta_backspace".split(" ");return h(f,{pluginId:"equationeditor.rtc-bridge",pluginDependencies:"api.attributes controller.caret controller.cursor controller.editmanager controller.focus controller.keyhandler controller.mouse controller.selection external.actionservice helper.plaintextgenerator helper.mimetype model.cursor model.equation rtc.divcaret rtc.cursor rtc.deletenode rtc.document rtc.equationnode rtc.keyhandler rtc.undoredo.editblock rtc.updatenode rtc.scrollpane view.caret view.helper view.keyhandler view.rootnode view.selection".split(" "),
constructor:function(a,b,c,d,f,h,k,l,n,x,A,B,F,G,H,I,K,C,M,Q,L,N,J,O,T,W,S){this._attributes=a;this._caretController=b;this._cursorController=c;this._editManager=d;this._selectionController=l;this._actionService=n;this._plainTextGeneratorHelper=x;this._mimeTypeHelper=A;this._cursor=B;this._deleteNode=I;this._equation=F;this._rtcCursor=H;this._rtcDocument=K;this._equationnode=C;this._viewHelper=O;this._updateNode=L;this._scrollPane=N;this._focusController=f;this._keyHandlerView=T;this._rootNode=W;
this._mouseController=k;this._keyHandler=M;this._rtcEditBlockController=Q;this._keyHandlerController=h;S.hide("rtc");this._equationnode.setEditorBridge(this);this._rtcOffset=0;this._installMouseTrap();this.own(g.after(J,"getNode",function(){return G.getBox()}));n.loadActions([{id:"equation-editor-bridge.backspace",key:"backspace",enabled:!0,keyPriority:5,callback:e.hitch(this,"_handleDelete")},{id:"equation-editor-bridge.backspace",key:"delete",enabled:!0,keyPriority:5,callback:e.hitch(this,"_handleDelete")},
{id:"equation-editor-bridge.escape",key:"escape",enabled:!0,callback:e.hitch(this,"_handleESC")},{id:"equation-editor-bridge.enter",enabled:!0,key:"enter",keyPriority:-5,callback:e.hitch(this,"_handleLineBreak")}]);this.own(g.after(d,"beforeBlock",e.hitch(this,"_handleBeforeBlock")));this.own(g.after(d,"afterBlock",e.hitch(this,"_handleAfterBlock")));this.own(g.after(d,"onNewStep",e.hitch(this,"_handleNewUndoStep"),!0));this.own(g.after(B,"onChange",e.hitch(this,"_handleEquationCursorChange")));this.own(a.observe("disabled",
e.hitch(this,"_handleDisabledChange")));this._installKeyDelegates();this.own(g.after(T,"onFocus",e.hitch(this,"_showCursor")));this.own(a.observe("active",function(b){a.get("disabled")||(b?this._showCursor():this._hideCursor())}.bind(this)))},_showCursor:function(){this._rtcCursor.show()},_hideCursor:function(){this._rtcCursor.hide()},convertToText:function(){return this._plainTextGeneratorHelper.convertSelection({node:this._equation.getRoot(),left:0,right:1})},handlePaste:function(a){var b={};this._mimeTypeHelper.acceptedMimeTypes().forEach(function(c){var d=
a(c);d&&(b[c]=d)});this._editManager.createBlock(e.hitch(this,function(a){this._mimeTypeHelper.insertContent(a,b)}))},convertSelection:function(){if(!this._cursorController.hasSelection()){var a=this._equation.getRoot().children[0];return this._mimeTypeHelper.convertRange({node:a,left:0,right:a.children.length})}return this._mimeTypeHelper.convertSelection()},_handleDelete:function(){if(1===this._cursorController.availableCursorPositions())return this._deleteNode.call(null),!0},_handleESC:function(){k.isEmptyEquation(this._equation.getRoot())?
this._deleteNode.call(null):this._rtcCursor.setPosition(this._equationnode.endPosition())},_handleLineBreak:function(){var a=this._cursorController.getPosition();if(k.categorizeNode(a.node)===k.CATEGORY.PLACEHOLDER_ATOM){var a=this._equation.getParentAndIndex(a.node.parent),b=a.parent;if(!("MathMatrix"!==b.className||1!==b.cols||a.index!==b.children.length-1))if(a=b.parent,"MathRow"===a.className&&"MathRoot"===a.parent.className)return this._actionService.executeAction("equationeditor.backspace"),
this._rtcCursor.setPosition(this._equationnode.endPosition()),this._rtcDocument.insertBreak(),!0}},cursorOffsetFromXY:function(b,c){var d=this._caretController.getPositionFromXY(b,c);return d&&a.logicalFromPosition(d,this._equation.getRoot())||0},caretCoordinatesFor:function(c){var d;if(c===this._rtcAnchorOffset&&this._cursor.hasSelection()){d=this._selectionController.getSelectionSpan();var f=b.coordinatesFromSelection(d,this._rootNode);d={y:f.y,height:f.h,x:d.reversed?f.x+f.w:f.x}}d||(c=a.positionFromLogical(c,
this._equation.getRoot()),d=b.coordinatesFromPosition(c,this._rootNode));d||(d={height:10,x:0,y:0});d.width=1;d.pageX=this._viewHelper.getRootGeometry().x+d.x;d.x+=this._equationnode.getLeft();d.y+=this._equationnode.getTop();return d},maxOffset:function(){return this._cursorController.availableCursorPositions()-1},setCursor:function(a,b){this._rtcOffset===a&&this._rtcAnchorOffset===b||("undefined"===typeof b?this._cursorController.setLogical(a):this._cursorController.setSelectionLogical(b,a),this._rtcOffset=
a,this._rtcAnchorOffset=b)},_installMouseTrap:function(){var a=!1;this.own(this._mouseController.addMouseDown(e.hitch(this,function(b){this._rtcCursor.externalMouseDown();b.stopPropagation();a=!0}),12));this.own(this._mouseController.addMouseDoubleClick(function(b){b.stopPropagation();a=!0},12));this.own(this._mouseController.addMouseMove(function(b){a&&b.stopPropagation()},12));this.own(this._mouseController.addMouseUp(function(b){a&&(b.stopPropagation(),a=!1)},12))},_installKeyDelegates:function(){Object.keys(this._keyHandler.keyMap).forEach(function(a){this._keyHandlerController.add(a,
e.hitch(this,function(){1!==this._keyHandlerController._bindings[a]._handlers.length&&0>l.indexOf(a)||0<=n.indexOf(a)||this._keyHandler.keyMap[a].forEach(function(a){a.call(null)})}))},this)},_handleBeforeBlock:function(){this._rtcEditBlockController.startEdit()},_handleNewUndoStep:function(a){var b=this._rtcEditBlockController.getActiveBlock();b.addCommands([a]);this._updateNode();b.pushAndExecuteCommand({execute:e.hitch(this._focusController,"focus"),unexecute:function(){}})},_handleAfterBlock:function(){this._rtcEditBlockController.endEdit();
this._handleEquationCursorChange();this._rtcCursor.onUpdate(!1,!1)},_handleDisabledChange:function(){this._attributes.get("disabled")?(this._cursor.clearSelection(),this._rtcAnchorOffset=this._rtcOffset=void 0,this._actionService.detach()):this._actionService.attach()},_handleEquationCursorChange:function(){var a=this._cursorController.getLogical(),b=this._cursorController.getAnchorLogical();if(!(this._rtcOffset===a&&b===this._rtcAnchorOffset)){"undefined"!==typeof b?(this._rtcOffset=b,this._rtcAnchorOffset=
void 0,this._rtcCursor.releaseAnchor(),this._rtcCursor.setPosition(this._equationnode,{posInNode:b+1}),this._rtcCursor.fixAnchor(!0)):this._rtcCursor.releaseAnchor();this._rtcOffset=a;this._rtcAnchorOffset=b;this._rtcCursor.setPosition(this._equationnode,{posInNode:a+1},!0);var c,f;d("safari")&&(c=this._scrollPane.scrollLeft,f=this._scrollPane.scrollTop);this._focusController.focus();d("safari")&&(this._scrollPane.scrollLeft=c,this._scrollPane.scrollTop=f)}}})})},"MW/rtc/plugins/equations/equationeditor/MathMLMimeConverterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/equations/equationeditor/MathMLMimeConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.cutcopypaste.converter"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/equations/equationeditor/MathMLMimeConverter":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/model/PositionUtilities","MW/rtc/plugins/cutcopypaste/MIMETypes","MW/rtc/plugins/equations/equationcontroller/nodes/EquationNode"],
function(h,e,g,d,c){return h(null,{_PRIORITY:95,constructor:function(b){b.registerMimeHandler(d.MATHML_PRESENTATION,e.hitch(this,"_convertFromMimeData"),this._PRIORITY);b.registerNodeConverter(c,e.hitch(this,"_convertFromEquationNode"));b.registerPasteHandler(c,e.hitch(this,"_handlePaste"))},_handlePaste:function(b,a,c){if(b&&(0===b.getStartPosition().getOffset()||b.getEndPosition().getOffset()===b.getEndPosition().getNode().maxOffset())||a&&(0===a.getOffset()||a.getOffset()===a.getNode().maxOffset()))return!1;
(b?b.getStartPosition().getNode():a.getNode()).getEditorBridge().handlePaste(c);return!0},_convertFromEquationNode:function(b){var a=b.getStartPosition().getNode();if(a.isInstanceOf(c)){var f=b.getStartPosition();b=b.getEndPosition();if(0===g.comparePositions(f,b))return[];if(a=a.getEditorBridge())return a=a.convertSelection(),a.push({flavor:d.MATLAB_RICHTEXT,content:void 0}),a}return[]},_convertFromMimeData:function(b){return[(new c({className:"EquationNode",encoding:"mathml",mathmlString:b})).serialize()]},
priority:function(){return 55}})})},"MW/rtc/plugins/equations/export/Equation2HTMLProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/equations/export/Equation2HTML"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/equations/export/Equation2HTML":function(){define(["dojo/_base/declare","MW/rtc/plugins/equations/equationcontroller/nodes/EquationNode","MW/rtc/plugins/equations/equationcontroller/view/EquationViewUtilities",
"MW/rtc/plugins/export/NodeExporterInterface"],function(h,e,g,d){return h([d],{_SCALING:2,constructor:function(){},getApplicableNodeClass:function(){return e},visit:function(c,b,a,d,e){this._writeImageURI(c,b);return!0},_writeImageURI:function(c,b){var a=g.exportDomnodeToImageURL(b.box,this._SCALING);if(a.simpleEquation)c.addToBody(g.simpleEquationToHTML(a.simpleEquation));else{var d=a.dataURL,a='\x3cspan style\x3d"vertical-align:'+Math.round(a.verticalAlign)+'px"\x3e\x3cimg src\x3d"'+d+'" width\x3d"'+
a.width/this._SCALING+'" height\x3d"'+a.height/this._SCALING+'" /\x3e\x3c/span\x3e';c.addToBody(a)}}})})},"MW/rtc/plugins/equations/latexeditor/LaTeXEditorProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","./LaTeXEditor","MW/rtc/core/provider/PluginProvider"],function(h,e,g,d){return h(d,{requires:function(){return{createInstance:["rtc.focusservice","rtc.cursor","rtc.actionservice","rtc.hyperlinkservice","rtc.richtext.equationcontroller"]}},createInstance:function(c,b,a,d,e){var h=
{};h.focusService=c;h.cursor=b;h.actionService=a;h.hyperlinkService=d;h.equationController=e;return new g(h)}})})},"MW/rtc/plugins/equations/latexeditor/LaTeXEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/model/DocumentUtilities MW/rtc/RichTextComponentFeatureEnum ./view/EquationDialog".split(" "),function(h,e,g,d,c,b){return h(null,{constructor:function(a){a=a||{};this._focusService=a.focusService;this._cursor=a.cursor;this._actionService=a.actionService;this._hyperlinkService=
a.hyperlinkService;this._equationController=a.equationController;this._actionService.loadActions([{id:c.EQUATIONS.LATEX_EDITOR_ACTION,enabled:!0,key:"ctrl_shift_l",platformKey:{mac:"meta_shift_l"},callback:e.hitch(this,"_editLaTeXEquation")}]);this._connections=[];this._connections.push(g.after(this._cursor,"onChange",e.hitch(this,this._updateActions)));this._connections.push(g.after(this._equationController,"onActionsNeedUpdate",e.hitch(this,this._updateActions)));this._connections.push(g.after(this._cursor,
"onDoubleClick",e.hitch(this,this._doubleClick)))},_updateActions:function(){this._actionService.updateAction(c.EQUATIONS.LATEX_EDITOR_ACTION,{enabled:this._equationController.canEditLaTeXEquation()})},_doubleClick:function(){this._equationController.equationUnderCursor("tex")&&(this._cursor.resetAction(),this._editLaTeXEquation())},_dlgClose:function(){this.eqnDlg=null;this._focusService.setFocus()},_dlgAccept:function(a){this._equationController.updateDocument(a);setTimeout(e.hitch(this,function(){this._focusService.setFocus()}),
0)},_editLaTeXEquation:function(){if(this._actionService.getAction(c.EQUATIONS.LATEX_EDITOR_ACTION).enabled&&this._equationController.canEditLaTeXEquation()){var a=this._equationController.equationUnderCursor("tex"),a={encoding:"tex",currentNode:a,texString:a?a.getTeXString():this._cursor.selectedText(),displayStyle:a?a.getDisplayStyle():""===this._cursor.getNode().getText().trim()};this.eqnDlg=new b(e.hitch(this,this._dlgClose),e.hitch(this,this._dlgAccept),this._hyperlinkService,a)}},dispose:function(){this._connections.forEach(function(a){a.remove()})}})})},
"MW/rtc/plugins/equations/latexeditor/view/EquationDialog":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/query dojo/aspect dojo/dom-construct dojo/dom-style dojo/keys dojo/on dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/form/SimpleTextarea dojo/i18n!l10n/nls/dialog dojo/i18n!l10n/nls/equationDialog mw-dialog-utils/DialogUtils MW/equations/renderer/Renderer mw-form/PushButton dojo/text!./EquationDialogTemplate.html".split(" "),function(h,e,g,d,c,b,
a,f,k,l,n,p,m,q,r,s,t,u){return h([k,l,n],{templateString:u,constructor:function(a,b,c,d){this._closeCallBack=a;this._acceptCallBack=b;this._hyperlinkService=c;this._info=d},postCreate:function(){this.inherited(arguments);this.okButton.set("label",m.ok);this.cancelButton.set("label",m.cancel);this.helpButton.set("label",q.helpLabel);this.equationCodeLabel.innerHTML=q.codeLabel;this.previewLabel.innerHTML=q.previewLabel;this.codeTextInput.set("value",this._info.texString);f(this.codeTextInput,"input",
e.hitch(this,"onInput"));var a=this;setTimeout(function(){a.codeTextInput.focus()},0);this.keyUpHandler=f(this.okButton,"click",e.hitch(this,"onOK"));f(this.cancelButton,"click",e.hitch(this,"onCancel"));f(this.helpButton,"click",e.hitch(this,"onHelp"));this._equationDialogWidget=r.displayModalDialog(this,q.title,[]);this.renderer=new s({equationFormat:"tex",strictTeX:!0});this._renderPreview(!0)},onTextKeyup:function(a){},onInput:function(){if(!this.textDirty){var a=this;setTimeout(function(){a._renderPreview()},
250);this.textDirty=!0}},_renderPreview:function(a){if(!this._closing&&(this.textDirty||a)){a=!1;c.empty(this.previewTextInput);var b=this.codeTextInput.get("value");b.length&&(a=this.renderer.render(this.renderer.setDisplaystyleIfNeeded(b,!0),this.previewTextInput,{displaystyle:this._info.displayStyle}));this.textDirty=!1;this.okButton.set("Disabled",!a)}},onClose:function(){this._closing=!0;this._closeCallBack()},onCancel:function(){this._closing=!0;this._equationDialogWidget.onClose()},onHelp:function(){this._hyperlinkService.openUrl("matlab:helpview(fullfile(docroot,'matlab','helptargets.map'),'edit_equation')")},
onOK:function(){this._closing=!0;this._info.texString=this.codeTextInput.get("value");this._acceptCallBack(this._info);this.keyUpHandler.remove();this._equationDialogWidget.onClose()}})})},"dojo/_base/query":function(){define(["../query","./NodeList"],function(h){return h})},"dijit/form/SimpleTextarea":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/sniff","./TextBox"],function(h,e,g,d){return h("dijit.form.SimpleTextarea",d,{baseClass:"dijitTextBox dijitTextArea",rows:"3",cols:"20",
templateString:"\x3ctextarea ${!nameAttrSetting} data-dojo-attach-point\x3d'focusNode,containerNode,textbox' autocomplete\x3d'off'\x3e\x3c/textarea\x3e",postMixInProperties:function(){!this.value&&this.srcNodeRef&&(this.value=this.srcNodeRef.value);this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);g("ie")&&this.cols&&e.add(this.textbox,"dijitTextAreaCols")},filter:function(c){c&&(c=c.replace(/\r/g,""));return this.inherited(arguments)},_onInput:function(c){if(this.maxLength){var b=
parseInt(this.maxLength),a=this.textbox.value.replace(/\r/g,""),b=a.length-b;if(0<b){var d=this.textbox;if(d.selectionStart){var e=d.selectionStart,h=0;g("opera")&&(h=(this.textbox.value.substring(0,e).match(/\r/g)||[]).length);this.textbox.value=a.substring(0,e-b-h)+a.substring(e-h);d.setSelectionRange(e-b,e-b)}else this.ownerDocument.selection&&(d.focus(),a=this.ownerDocument.selection.createRange(),a.moveStart("character",-b),a.text="",a.select())}}this.inherited(arguments)}})})},"mw-form/PushButton":function(){define("dojo/_base/declare dojo/on dijit/_WidgetBase dijit/_Contained dijit/_CssStateMixin dijit/_FocusMixin dijit/_TemplatedMixin mw-mixins/property/TagMixin mw-mixins/property/DescriptionMixin mw-mixins/property/DisabledMixin mw-mixins/property/HorizontalAlignmentMixin mw-mixins/property/IconAlignmentMixin mw-mixins/property/IconMixin mw-mixins/property/SizeMixin mw-mixins/property/TextMixin mw-mixins/property/VisualFamilyMixin mw-mixins/property/VerticalAlignmentMixin mw-mixins/IconAndTextSizingMixin mw-mixins/PreventSelectionMixin mw-mixins/mixinDependencyValidator mw-mixins/AriaLabelledByMixin dojo/text!./templates/PushButton.html".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A){return h(w.validate([g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,x]),{baseClass:"mwWidget mwPushButton",templateString:A,postCreate:function(){this.inherited(arguments);this.own(e(this.domNode,"keydown",this._handleKeydown.bind(this)),e(this.domNode,"keyup",this._handleKeyup.bind(this)))},_handleKeydown:function(a){switch(a.keyCode){case 13:this.get("disabled")||a.target.click();break;case 32:a.preventDefault()}},_handleKeyup:function(a){switch(a.keyCode){case 32:this.get("disabled")||
a.target.click()}},_qeClick:function(){this.emit("click")}})})},"MW/rtc/plugins/events/EventHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/events/DefaultEventHandler","MW/rtc/plugins/events/MobileEventHandler"],function(h,e,g,d){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.view","rtc.cursor","rtc.cursorcontroller"]}},createInstance:function(c,b,a){return/Android/.test(navigator.userAgent)?
new d:g(c,b,a)},destroyInstance:function(c){c.destroy()}})})},"MW/rtc/plugins/events/DefaultEventHandler":function(){define("dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/_base/window dojo/aspect dojo/has dojo/on dojo/touch mw-gesture/GestureDetector mw-gesture/GestureRegistry mw-gesture/util/PointerTypes mw-gesture/util/ButtonValues MW/rtc/plugins/events/EventHandler ./EventHandlerUtilities".split(" "),function(h,e,g,d,c,b,a,f,k,l,n,p,m,q){return h(m,{constructor:function(c,d,f){this._cursor=
d;this._cursorController=f;this._view=c;this._isGestureEnabled=!0;c=c.getDomtarget();this._gestureDetector=new k(c);d=l.tapmove({options:{pointerTypes:[n.MOUSE,n.PEN],numTaps:0},callbacks:{began:g.hitch(this,function(a,b){this._handleGesture(a.srcEvent,b,g.hitch(this,"_onSingleDown"));this.onMouseDown(a.srcEvent)}),recognized:g.hitch(this,function(a){this.onMouseUp(a.srcEvent)})}});f=l.tapmove({options:{pointerTypes:[n.MOUSE,n.PEN],numTaps:0,button:p.RIGHT},callbacks:{began:g.hitch(this,function(a,
b){this._handleGesture(a.srcEvent,b,g.hitch(this,"_onSecondaryDown"));this.onMouseDown(a.srcEvent)}),recognized:g.hitch(this,function(a){this.onMouseUp(a.srcEvent)})}});var e=l.tap({options:{pointerTypes:[n.TOUCH],numTaps:1},callbacks:{recognized:g.hitch(this,function(a,b){this._handleGesture(a.srcEvent,b,g.hitch(this,"_onTap"))})}}),h=l.tapmove({options:{pointerTypes:[n.MOUSE,n.PEN],numTaps:1},callbacks:{began:g.hitch(this,function(a,b){this._handleGesture(a.srcEvent,b,g.hitch(this,"_onTapDown"));
this.onMouseDown(a.srcEvent)}),recognized:g.hitch(this,function(a){this.onMouseUp(a.srcEvent)})}}),q=l.tapmove({options:{pointerTypes:[n.MOUSE,n.PEN],numTaps:2},callbacks:{began:g.hitch(this,function(a,b){this._handleGesture(a.srcEvent,b,g.hitch(this,"_onDoubleTapDown"));this.onMouseDown(a.srcEvent)}),recognized:g.hitch(this,function(a){this.onMouseUp(a.srcEvent)})}});q.getCoordinator().prevents(h);q.getCoordinator().prevents(d);h.getCoordinator().prevents(d);d.getCoordinator().prevents(f);this._gestureDetector.add([q,
h,d,e,f]);this.own(a(c,"selectstart",g.hitch(this,"_handleSelectStart")));this._focusHandle=a.pausable(c,"focus",g.hitch(this,"onFocus"));this.own(this._focusHandle);b("chrome")||this.own(a.pausable(c,"focusin",g.hitch(this,this.onFocus)))},destroy:function(){this.inherited(arguments);this._gestureDetector.destroy();this._gestureDetector=null},_handleGesture:function(a,b,c){if(this.isGestureEnabled()){var d;d=this._view.fixEvent(a);this._view.isFixedEventOutside(d)||(this._cursor.show(),d=this._view.getPositionFromEvent(d),
c(a,b,d),q.collapseBrowserSelection())}},_onSingleDown:function(a,b,c){this._view.isDraggable()&&this._cursorController.isEventInSelection(a)?this._startDragAction(a,b,c):(this.onFocus(),this._startSelectionAction(a,b,c),e.stop(a))},_onTapDown:function(a,b,c){this._startWordSelectionAction(a,b,c,!0);q.preventDefaultIfTouchEvent(a)},_onDoubleTapDown:function(a,b,c){this._startLineSelectionAction(a,b,c);q.preventDefaultIfTouchEvent(a)},_onSecondaryDown:function(a,b,c){this._startSecondarySelectionAction(a,
b,c)},_onTap:function(a,b,c){this._cursor.resetAction();this._cursor.setCursorToEvent(a)},_startDragAction:function(a,b,c){var d=this;this._focusHandle.pause();q.startDragActionForGesture(b,this._cursorController,this._view);b.onTemp({after:function(){d._focusHandle.resume();d.onFocus()}})},_startSelectionAction:function(a,b,c){var d=this;q.startSelectionActionForGesture(b,this._cursorController,this._view,a,c);b.onTemp({after:function(){d.onFocus()}})},_startWordSelectionAction:function(a,b,c){var d=
this;q.startWordSelectionActionForGesture(b,this._cursorController,this._view,a,c);b.onTemp({after:function(){d.onFocus()}})},_startLineSelectionAction:function(a,b,c){var d=this;q.startLineSelectionActionForGesture(b,this._cursorController,this._view,a,c);b.onTemp({after:function(){d.onFocus()}})},_startSecondarySelectionAction:function(a,b,c){q.startSecondarySelectionActionForGesture(b,this._cursorController,this._view,a,c)},_handleSelectStart:function(a){var b=a.target.tagName;"TEXTAREA"===b||
"INPUT"===b||a.preventDefault()},disableGesture:function(){this._isGestureEnabled=!1},enableGesture:function(){this._isGestureEnabled=!0},isGestureEnabled:function(){return this._isGestureEnabled},onMouseDown:function(a){},onMouseUp:function(a){},onFocus:function(a){},onBlur:function(a){}})})},"MW/rtc/plugins/events/EventHandler":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,e){return h(e,{onMouseDown:function(e){throw Error("Unimplemented API: onMouseDown");
},onMouseUp:function(e){throw Error("Unimplemented API: onMouseUp");},onFocus:function(e){throw Error("Unimplemented API: onFocus");},onBlur:function(e){throw Error("Unimplemented API: onBlur");}})})},"MW/rtc/plugins/events/EventHandlerUtilities":function(){define(["dojo/_base/window","dojo/has","mw-gesture/input/PointerInputUtil"],function(h,e,g){var d=function(b,a,c){var d;a=b.fixEvent(a);e("mozilla")&&0===a.layerX&&0===a.layerY?d=void 0:(b.isFixedEventOutside(a)?(d=b.getFixedEventDirectionOutside(a),
b=b.getFixedEventPositionAtBorder(a)):b=b.getPositionFromEvent(a),d={diffXY:d,position:b});if(d)c.onMove(d.position,d.diffXY,a.layerY,a.offsetX)},c=function(){var b=h.global.getSelection();b.isCollapsed||b.collapseToStart()};return{startSelectionActionForGesture:function(b,a,f,e,g){var h=f.fixEvent(e),p;p=e.altKey?a.startBlockSelectionAction(g,e.shiftKey,h.layerY,h.offsetX):a.startSelectionAction(g,e.shiftKey,e.layerY);var m=e.altKey;b.onTemp({progress:function(b){b=b.srcEvent;var r=b.altKey;m===
r?d(f,b,p):(m=r,p=b.altKey?a.startBlockSelectionAction(g,e.shiftKey,h.layerY,h.offsetX):a.startSelectionAction(g,e.shiftKey,e.layerY));c()},recognized:function(a){p.resolve();c()},cancelled:function(){p.cancel()},after:function(){c()}})},startWordSelectionActionForGesture:function(b,a,f,e,g){var h=a.startGroupedSelectionAction(g,e.shiftKey,e.layerY,!0);b.onTemp({progress:function(a){d(f,a.srcEvent,h);c()},recognized:function(a){h.resolve();c()},cancelled:function(){h.cancel()},after:function(){c()}})},
startLineSelectionActionForGesture:function(b,a,f,e,g){var h=a.startGroupedSelectionAction(g,e.shiftKey,e.layerY,!1);b.onTemp({progress:function(a){d(f,a.srcEvent,h);c()},recognized:function(a){h.resolve();c()},cancelled:function(){h.cancel()},after:function(){c()}})},startSecondarySelectionActionForGesture:function(b,a,d,e,g){var h=a.startSecondarySelectionAction(g,e.shiftKey,e.layerY);b.onTemp({recognized:function(){h.resolve()},cancelled:function(){h.cancel()},after:function(){c()}})},startDragActionForGesture:function(b,
a,d){d.setDomTargetDraggable(!0);var e=a.startDragAction();b.onTemp({recognized:function(a){a=d.fixEvent(a.srcEvent);if(!d.isFixedEventOutside(a))e.onUp(d.getPositionFromEvent(a));e.resolve()},cancelled:function(){e.cancel()},after:function(){d.setDomTargetDraggable(!1);c()}})},preventDefaultIfTouchEvent:function(b){g.isTouchEvent(b)&&b.preventDefault()},collapseBrowserSelection:c}})},"MW/rtc/plugins/events/MobileEventHandler":function(){define("dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/_base/window dojo/aspect dojo/has dojo/on dojo/touch MW/rtc/plugins/events/EventHandler".split(" "),
function(h,e,g,d,c,b,a,f,k){return h(k,{constructor:function(){},onMouseDown:function(a){},onMouseUp:function(a){},onFocus:function(a){},onBlur:function(a){}})})},"MW/rtc/plugins/execution/ExecutionActionsProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/debug/DebugServicesFactory","MW/rtc/plugins/execution/ExecutionActions"],function(h,e,g,d){return h(e,{requires:function(){return{createInstance:"rtc.actionservice rtc.embeddedoutputs.executionmanager rtc.code.matlabfiletype matlab.services.busyidle debug.breakpoint.temporary debug.documentdirtyservice rtc.cursorcontroller rtc.embeddedoutputs.statehandler rtc.execution.controlc rtc.keyhandler rtc.embeddedoutputs rtc.linenumberservice".split(" ")}},
createInstance:function(c,b,a,f,e,h,n,p,m,q,r,s){var t=g.getInstance();return new d(c,b,a,f,e,h,n,t,p,m,q,r,s)}})})},"MW/rtc/plugins/execution/ExecutionActions":function(){define("dojo/aspect dojo/_base/declare dojo/_base/lang dojo/i18n!l10n/nls/execution MW/rtc/abstract/AbstractPlugin MW/rtc/plugins/execution/RunToLineEventData".split(" "),function(h,e,g,d,c,b){return e(c,{CONTINUE_ACTION_ID:"rtc_continue",STEP_ACTION_ID:"rtc_step",STOP_ACTION_ID:"rtc_stop_execution",PAUSE_ACTION_ID:"rtc_pause",
RUN_TO_LINE_ACTION_ID:"rtc_run_to_line",CONTINUE_TO_LINE_ACTION_ID:"rtc_continue_to_line",constructor:function(a,b,c,d,e,p,m,q,r,s,t,u,v){this._actionService=a;this._executionManager=b;this._fileTypeService=c;this._busyIdleService=d;this._temporaryBreakpointManager=e;this._documentDirtyService=p;this._cursorController=m;this._debugServices=q;this._stateHandler=r;this._controlC=s;this._keyHandler=t;this._embeddedOutputs=u;this._lineNumberService=v;this._createActions();this._isBusy=this._busyIdleService.isBusy();
this._isDebugging=this._debugServices.isDebugging;this._isScriptFile=this._fileTypeService.isScript();this._cursorHasSelection=this._isDirtyWhileDebugging=!1;this._isExecutionEnabled=this._embeddedOutputs.isEmbeddedOutputsEnabled();this._refreshActions(this._isBusy,this._isDebugging,this._isScriptFile,this._isDirtyWhileDebugging,this._cursorHasSelection,this._isExecutionEnabled);this.own(h.after(this._fileTypeService,"onFileTypeChange",g.hitch(this,"_handleFileTypeChange")));this.own(h.after(this._busyIdleService,
"onIdleBusyStatusChange",g.hitch(this,"_handleBusyIdleChange"),!0));this.own(h.after(this._documentDirtyService,"onDocumentDirtiedWhileDebugging",g.hitch(this,"_handleDocumentDirtiedWhileDebugging"),!0));this.own(h.after(this._cursorController,"onUpdate",g.hitch(this,"_handleCursorControllerUpdate")));this.own(h.after(this._debugServices,"onDebugModeChanged",g.hitch(this,"_handleDebugModeChanged"),!0));this.own(h.after(this._embeddedOutputs,"onEmbeddedOutputsStateChange",g.hitch(this,"_handleEOEnablementStateChanged"),
!0))},_createActions:function(){var a=[{id:this.CONTINUE_ACTION_ID,enabled:!1,key:"f5",platformKey:{mac:"f5"},shortcut:d.continueShortcut,text:d.continueLabel,description:d.continueDescription,callback:g.hitch(this,"_performContinue")},{id:this.STOP_ACTION_ID,enabled:!1,key:"shift+f5",platformKey:{mac:"shift+f5"},shortcut:d.stopShortcut,text:d.stopLabel,description:d.stopDescription,callback:g.hitch(this,"_performStop")},{id:this.STEP_ACTION_ID,enabled:!0,key:"f10",platformKey:{mac:"f10"},text:d.stepLabel,
shortcut:d.stepShortcut,description:d.stepDescription,callback:g.hitch(this,"_performStep")},{id:this.PAUSE_ACTION_ID,enabled:!1,key:"ctrl_f5",platformKey:{mac:"meta_f5"},shortcut:d.pauseShortcut,text:d.pauseLabel,description:d.pauseDescription,callback:g.hitch(this,"_performPause")},{id:this.RUN_TO_LINE_ACTION_ID,enabled:!0,text:d.runToLineLabel,description:d.runToLineDescription,callback:g.hitch(this,"_performRunToLine")},{id:this.CONTINUE_TO_LINE_ACTION_ID,enabled:!1,text:d.continueToLineLabel,
description:d.continueToLineDescription,callback:g.hitch(this,"_performContinueToLine")}];this._actionService.loadActions(a);this._addAdditionalKeyBindings()},_addAdditionalKeyBindings:function(){this._keyHandler.addBindings([{platformKey:{mac:"meta_shift_o"},action:this.STEP_ACTION_ID}])},_performContinue:function(){return this._isDebugging?(this._debugServices.debugContinue(),!0):!1},_performStep:function(){if(this._isDebugging)this._debugServices.debugStep();else return this._stepToFirstLine();
return!0},_stepToFirstLine:function(){var a=0<this._lineNumberService.getNumberOfCodeLines();return!this._stateHandler.isRunning()&&a?(this._performRunToLine(new b(0)),!0):!1},_performStop:function(){var a=this._stateHandler.isRunning();this._isDebugging&&!this._isBusy?this._debugServices.debugExit():this._isBusy&&a?this._executionManager.interrupt():this._controlC.interrupt();return!0},_performPause:function(){this._debugServices.debugPause();this._actionService.updateAction(this.PAUSE_ACTION_ID,
{enabled:!1,text:d.pausingLabel,description:d.pausingDescription});return!0},_performRunToLine:function(a){this._temporaryBreakpointManager.setBreakpoint(a.lineNumber).then(g.hitch(this._actionService,"executeAction","rtc_refresh_outputs"))},_performContinueToLine:function(a){this._temporaryBreakpointManager.setBreakpoint(a.lineNumber).then(g.hitch(this._debugServices,"debugContinue"))},_handleBusyIdleChange:function(a){this._isBusy=a;this._refreshActions(this._isBusy,this._isDebugging,this._isScriptFile,
this._isDirtyWhileDebugging,this._cursorHasSelection,this._isExecutionEnabled)},_handleDocumentDirtiedWhileDebugging:function(){this._isDirtyWhileDebugging=!0;this._refreshActions(this._isBusy,this._isDebugging,this._isScriptFile,this._isDirtyWhileDebugging,this._cursorHasSelection,this._isExecutionEnabled)},_handleCursorControllerUpdate:function(){var a=this._cursorController.hasSelection();this._cursorHasSelection!==a&&(this._cursorHasSelection=a,this._refreshActions(this._isBusy,this._isDebugging,
this._isScriptFile,this._isDirtyWhileDebugging,this._cursorHasSelection,this._isExecutionEnabled))},_handleDebugModeChanged:function(a){this._isDebugging=a;this._isDirtyWhileDebugging=!1;this._refreshActions(this._isBusy,this._isDebugging,this._isScriptFile,this._isDirtyWhileDebugging,this._cursorHasSelection,this._isExecutionEnabled)},_handleDBCont:function(){this._isBusy=!0;this._refreshActions(this._isBusy,this._isDebugging,this._isScriptFile,this._isDirtyWhileDebugging,this._cursorHasSelection,
this._isExecutionEnabled)},_handleEOEnablementStateChanged:function(a){this._isExecutionEnabled=a;this._refreshActions(this._isBusy,this._isDebugging,this._isScriptFile,this._isDirtyWhileDebugging,this._cursorHasSelection,this._isExecutionEnabled)},_handleFileTypeChange:function(){this._isScriptFile=this._fileTypeService.isScript();this._refreshActions(this._isBusy,this._isDebugging,this._isScriptFile,this._isDirtyWhileDebugging,this._cursorHasSelection,this._isExecutionEnabled)},_refreshActions:function(a,
b,c,e,g,h){this._actionService.updateAction(this.STEP_ACTION_ID,{enabled:!a&&b||h&&!a&&c});this._actionService.updateAction(this.PAUSE_ACTION_ID,{enabled:a});this._actionService.updateAction(this.STOP_ACTION_ID,{enabled:a||b});this._actionService.updateAction(this.RUN_TO_LINE_ACTION_ID,{enabled:!a&&!b&&c&&!g&&h});this._actionService.updateAction(this.CONTINUE_TO_LINE_ACTION_ID,{enabled:!a&&b&&!e&&!g});this._actionService.updateAction(this.CONTINUE_ACTION_ID,{enabled:!a&&b});a||this._actionService.updateAction(this.PAUSE_ACTION_ID,
{text:d.pauseLabel,description:d.pauseDescription})}})})},"MW/rtc/plugins/execution/ControlCServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/execution/ControlCService"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.editordataservice"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/execution/ControlCService":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,
e){return h(e,{_CONTROL_C_FEATURE_ID:"rtc.execution.controlc",constructor:function(e){this._editorDataService=e},interrupt:function(){this._editorDataService.request(this._CONTROL_C_FEATURE_ID).then(function(){},function(){})}})})},"MW/rtc/plugins/execution/BusyIdleServicesProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/execution/BusyIdleServices"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.editordataservice"]}},
createInstance:function(d){return new g(d)},priority:function(){return 1}})})},"MW/rtc/plugins/execution/BusyIdleServices":function(){define(["dojo/aspect","dojo/_base/declare","dojo/_base/lang","mw-messageservice/MessageService","MW/rtc/plugins/execution/AbstractBusyIdleService"],function(h,e,g,d,c){return e(c,{_BUSY_IDLE_FEATURE_ID:"matlab.busyidle",_channel:"/editor/busy-idle-state-change",constructor:function(b,a){this._isBusy=!1;this._listener=b.listenTo(this._BUSY_IDLE_FEATURE_ID,g.hitch(this,
"_handleBusyIdleChange"));this.messageService=a||d;this.messageService.subscribe(this._channel,"_handleBusyIdleChange",this)},isBusy:function(){return this._isBusy},_handleBusyIdleChange:function(b){this._isBusy=b.data.isBusy;this.onIdleBusyStatusChange(this._isBusy)},destroy:function(){this.inherited(arguments);this._listener.remove();this.messageService.unsubscribe(this._channel,"_handleBusyIdleChange",this)}})})},"MW/rtc/plugins/execution/AbstractBusyIdleService":function(){define(["dojo/aspect",
"dojo/_base/declare","dojo/_base/lang","mw-log/Log","MW/rtc/abstract/AbstractPlugin"],function(h,e,g,d,c){return e(c,{constructor:function(){},onIdleBusyStatusChange:function(b){},isBusy:function(){d.error("AbstractBusyIdleService.isBusy Unimplemented")}})})},"MW/rtc/plugins/execution/margin/DecoratableExecutionMarginProvider":function(){define(["dojo/dom-attr","dojo/dom-class","dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/margin/DecoratableRangeMargin"],function(h,e,g,d,c){return g(d,
{requires:function(){return{isApplicable:[],createInstance:"rtc.view rtc.internaldocument rtc.linenumberservice rtc.focusservice margin.statusactionbar.sectionsdecorator margin.statusactionbar.stalesectionsdecorator margin.statusactionbar.stalesectionsbackgrounddecorator".split(" ")}},createInstance:function(b,a,d,g,h,n,p){b=new c(b,a,g,[h,n,p],500,null,null);e.add(b.getMarginElement(),"executionMargin");return b}})})},"MW/rtc/plugins/execution/range/StepRangeProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/debug/DebugServicesFactory","MW/rtc/plugins/execution/range/StepRange"],function(h,e,g,d){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["debug.documentdebugservices","rtc.linenumberservice","rtc.code.executablelines","matlab.code.mtree.codeblocks","rtc.execution.range.utilities"]}},createInstance:function(c,b,a,f,e){var h=g.getInstance();return new d(h,c,b,a,f,e)}})})},"MW/rtc/plugins/execution/range/StepRange":function(){define(["dojo/aspect",
"dojo/_base/declare","dojo/_base/lang","MW/rtc/plugins/execution/range/AbstractExecutionRange","MW/rtc/plugins/language/matlab/syntax/mtree/codeblocks/BlockType"],function(h,e,g,d,c){return e(d,{_ACTION_ID:"rtc_step",constructor:function(b,a,d,e,h,n){this._debugServices=b;this._documentDebugServices=a;this._lineNumberService=d;this._executableLineService=e;this._codeBlockServices=h;this._executionRangeUtilities=n;this._blockHandlers={};this._blockHandlers[c.FOR_LOOP]=g.hitch(this,"_buildRangeForLoop");
this._blockHandlers[c.WHILE_LOOP]=g.hitch(this,"_buildRangeForLoop");this._blockHandlers[c.IF_STATEMENT]=g.hitch(this,"_buildRangeForConditional");this._blockHandlers[c.FUNCTION_DEFINITION]=g.hitch(this,"_buildRangeForFunction")},getActionId:function(){return this._ACTION_ID},getRange:function(){return this._debugServices.isDebugging?this._buildRangeInDebugMode():this._buildRangeOutsideDebugMode()},_buildRangeOutsideDebugMode:function(){var b=this._executableLineService.getFirstExecutableCodeLine();
return-1===b?this._INVALID_RANGE:this._executionRangeUtilities.buildRangeForCodeLines(1,b)},_buildRangeInDebugMode:function(){var b=this._documentDebugServices.getExecutionPoint();if(!b||null===b.getLineNumber())return this._INVALID_RANGE;var b=b.getLineNumber(),a=this._codeBlockServices.getInnermostBlockOfType(b,null);return this._getBlockHandler(a)(b,a)},_getBlockHandler:function(b){var a=null;b&&(a=this._blockHandlers[b.type]);return a||g.hitch(this,"_buildNormalStepRange")},_buildRangeForConditional:function(b,
a){return b===a.startLine?this._executionRangeUtilities.buildRangeForCodeLines(a.startLine,a.endLine):this._buildNormalStepRange(b)},_buildRangeForLoop:function(b,a){return b===a.startLine||b===a.endLine?this._executionRangeUtilities.buildRangeForCodeLines(a.startLine,a.endLine):this._buildNormalStepRange(b)},_buildRangeForFunction:function(b,a){return b===a.endLine?this._executionRangeUtilities.buildRangeForCodeLines(b,b):this._buildNormalStepRange(b)},_buildNormalStepRange:function(b){var a=this._alterNextLineConsideringScope(b);
b=this._lineNumberService.getLineNumberFromCodeLineNumber(b)+1;return this._executionRangeUtilities.buildRange(b,a)},_alterNextLineConsideringScope:function(b){var a=this._executableLineService.getNextExecutableCodeLine(b);if(-1===a)return this._executionRangeUtilities.getFinalLineOfMainScope();b=this._codeBlockServices.getInnermostBlockOfType(b,c.FUNCTION_DEFINITION);var d=this._codeBlockServices.getInnermostBlockOfType(a,c.FUNCTION_DEFINITION);return!b&&!d?this._lineNumberService.getLineNumberFromCodeLineNumber(a)+
1:!b&&d?this._executionRangeUtilities.getFinalLineOfMainScope():b.id===d.id?this._lineNumberService.getLineNumberFromCodeLineNumber(a)+1:this._lineNumberService.getLineNumberFromCodeLineNumber(this._executableLineService.getNextExecutableCodeLine(d.endLine))+1}})})},"MW/rtc/plugins/execution/range/AbstractExecutionRange":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,e){return h(e,{_INVALID_RANGE:null,getActionId:function(){throw Error("Unimplemented API: MW.rtc.plugins.execution.range.AbstractExecutionRange.getActionId");
},getRange:function(){throw Error("Unimplemented API: MW.rtc.plugins.execution.range.AbstractExecutionRange");}})})},"MW/rtc/plugins/execution/range/StepOutRangeProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/debug/DebugServicesFactory","MW/rtc/plugins/execution/range/StepOutRange"],function(h,e,g,d){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["debug.documentdebugservices","rtc.linenumberservice",
"matlab.code.mtree.codeblocks","rtc.execution.range.utilities"]}},createInstance:function(c,b,a,f){var e=g.getInstance();return new d(e,c,a,b,f)}})})},"MW/rtc/plugins/execution/range/StepOutRange":function(){define(["dojo/_base/declare","MW/rtc/plugins/execution/range/AbstractExecutionRange","MW/rtc/plugins/language/matlab/syntax/mtree/codeblocks/BlockType"],function(h,e,g){return h(e,{_ACTION_ID:"rtc_debug_step_out",constructor:function(d,c,b,a,f){this._debugServices=d;this._documentDebugServices=
c;this._codeBlockServices=b;this._lineNumberService=a;this._executionRangeUtilities=f},getActionId:function(){return this._ACTION_ID},getRange:function(){if(!this._debugServices.isDebugging)return this._INVALID_RANGE;var d=this._documentDebugServices.getExecutionPoint();if(!d||null===d.getLineNumber())return this._INVALID_RANGE;d=d.getLineNumber();return this._buildRangeForLine(d)},_buildRangeForLine:function(d){var c=this._codeBlockServices.getInnermostBlockOfType(d,g.FUNCTION_DEFINITION);if(c)return this._executionRangeUtilities.buildRangeForCodeLines(d,
c.endLine);d=this._lineNumberService.getLineNumberFromCodeLineNumber(d)+1;c=this._executionRangeUtilities.getFinalLineOfMainScope();return this._executionRangeUtilities.buildRange(d,c)}})})},"MW/rtc/plugins/execution/range/RunToHereRangeProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/debug/DebugServicesFactory","MW/rtc/plugins/execution/range/RunToHereRange"],function(h,e,g,d){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],
createInstance:["debug.documentdebugservices","rtc.linenumberservice","matlab.code.mtree.codeblocks","rtc.execution.range.utilities","debug.contextualbuttons.runtohere.viewmodel"]}},createInstance:function(c,b,a,f,e){a=g.getInstance();return new d(a,c,b,f,e)}})})},"MW/rtc/plugins/execution/range/RunToHereRange":function(){define(["dojo/aspect","dojo/_base/declare","dojo/_base/lang","MW/rtc/model/Range","MW/rtc/plugins/execution/range/AbstractExecutionRange"],function(h,e,g,d,c){return e(c,{_NO_LINE:-1,
_ACTION_ID:"rtc_run_to_here",constructor:function(b,a,c,d,e){this._debugServices=b;this._documentDebugServices=a;this._lineNumberService=c;this._executionRangeUtilities=d;this._runToHereViewModel=e;this._currentRunToHereLine=this._NO_LINE;this.own(h.after(e,"onUpdate",g.hitch(this,"_handleRunToHereViewModelUpdate"),!0));this.own(h.after(e,"onClear",g.hitch(this,"_handleRunToHereViewModelClear")))},_handleRunToHereViewModelUpdate:function(b){this._currentRunToHereLine=b.getRange().getStartPosition().getLine()},
_handleRunToHereViewModelClear:function(){this._currentRunToHereLine=this._NO_LINE},getActionId:function(){return this._ACTION_ID},getRange:function(){if(this._currentRunToHereLine===this._NO_LINE)return this._INVALID_RANGE;if(!this._debugServices.isDebugging)return this._buildRangeOutsideDebugMode();var b=this._documentDebugServices.getExecutionPoint();if(!b||null===b.getLineNumber())return this._INVALID_RANGE;b=b.getLineNumber();return this._buildRangeWhileDebugging(b)},_buildRangeOutsideDebugMode:function(){return this._executionRangeUtilities.buildRange(1,
this._currentRunToHereLine)},_buildRangeWhileDebugging:function(b){b=this._lineNumberService.getLineNumberFromCodeLineNumber(b)+1;return this._executionRangeUtilities.buildRange(b,this._currentRunToHereLine)}})})},"MW/rtc/plugins/execution/range/RunSectionRangeProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/execution/range/RunSectionRange","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],
createInstance:["rtc.code.sections.model","rtc.execution.range.utilities"]}},createInstance:function(d,c){return new e(d,c)}})})},"MW/rtc/plugins/execution/range/RunSectionRange":function(){define(["dojo/_base/declare","MW/rtc/model/Range","MW/rtc/plugins/execution/range/AbstractExecutionRange"],function(h,e,g){return h(g,{_ACTION_ID:"rtc_run_section",constructor:function(d,c){this._sectionModel=d;this._executionRangeUtilities=c},getActionId:function(){return this._ACTION_ID},getRange:function(){var d=
this._sectionModel.getCurrentSection();if(!d)return this._INVALID_RANGE;var c=d.end,d=d.start.getLine(),c=c.getLine();return this._executionRangeUtilities.buildRange(d,c)}})})},"MW/rtc/plugins/execution/range/RunSectionEndRangeProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/execution/range/RunSectionEndRange","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.code.sections.model",
"rtc.execution.range.utilities"]}},createInstance:function(d,c){return new e(d,c)}})})},"MW/rtc/plugins/execution/range/RunSectionEndRange":function(){define(["dojo/_base/declare","MW/rtc/model/Range","MW/rtc/plugins/execution/range/AbstractExecutionRange"],function(h,e,g){return h(g,{_ACTION_ID:"rtc_run_section_end",constructor:function(d,c){this._sectionModel=d;this._executionRangeUtilities=c},getActionId:function(){return this._ACTION_ID},getRange:function(){var d=this._sectionModel.getCurrentSection();
if(!d)return this._INVALID_RANGE;var d=d.start.getLine(),c=this._executionRangeUtilities.getFinalLineOfMainScope();return this._executionRangeUtilities.buildRange(d,c)}})})},"MW/rtc/plugins/execution/range/RunSectionAdvanceRangeProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/execution/range/RunSectionAdvanceRange","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.code.sections.model",
"rtc.execution.range.utilities"]}},createInstance:function(d,c){return new e(d,c)}})})},"MW/rtc/plugins/execution/range/RunSectionAdvanceRange":function(){define(["dojo/_base/declare","MW/rtc/model/Range","MW/rtc/plugins/execution/range/RunSectionRange"],function(h,e,g){return h(g,{_ACTION_ID:"rtc_run_section_advance",constructor:function(d,c,b,a){},getActionId:function(){return this._ACTION_ID}})})},"MW/rtc/plugins/execution/range/RunAllRangeProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"MW/rtc/plugins/execution/range/RunAllRange"],function(h,e,g){return h(e,{requires:function(){return{isApplicable:[],createInstance:["rtc.execution.range.utilities"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/execution/range/RunAllRange":function(){define(["dojo/_base/declare","MW/rtc/model/Range","MW/rtc/plugins/execution/range/AbstractExecutionRange"],function(h,e,g){return h(g,{_ACTION_ID:"rtc_refresh_all_outputs",constructor:function(d){this._executionRangeUtilities=d},
getActionId:function(){return this._ACTION_ID},getRange:function(){var d=this._executionRangeUtilities.getFinalLineOfMainScope();return this._executionRangeUtilities.buildRange(1,d)}})})},"MW/rtc/plugins/execution/range/ContinueRangeProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/debug/DebugServicesFactory","MW/rtc/plugins/execution/range/ContinueRange"],function(h,e,g,d){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],
createInstance:["debug.documentdebugservices","rtc.linenumberservice","matlab.code.mtree.codeblocks","rtc.execution.range.utilities"]}},createInstance:function(c,b,a,f){var e=g.getInstance();return new d(e,c,a,b,f)}})})},"MW/rtc/plugins/execution/range/ContinueRange":function(){define(["dojo/_base/declare","MW/rtc/plugins/execution/range/StepOutRange"],function(h,e){return h(e,{_ACTION_ID:"rtc_continue",constructor:function(e,d,c,b,a){},getActionId:function(){return this._ACTION_ID}})})},"MW/rtc/plugins/execution/range/ExecutionRangeManagerProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/execution/range/ExecutionRangeManager"],function(h,e,g){return h(e,{requires:function(){return{isApplicable:[],createInstance:["rtc.execution.range"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/execution/range/ExecutionRangeManager":function(){define(["dojo/aspect","dojo/_base/declare","dojo/_base/lang","MW/rtc/abstract/AbstractPlugin"],function(h,e,g,d){return e(d,{_INVALID_RANGE:null,constructor:function(c){this._actionRangeMap=
{};this._initializeMap(c)},_initializeMap:function(c){c.forEach(function(b){this._actionRangeMap[b.getActionId()]=b},this)},getRangeForAction:function(c){return!this._actionRangeMap.hasOwnProperty(c)?this._INVALID_RANGE:this._actionRangeMap[c].getRange()}})})},"MW/rtc/plugins/execution/range/ExecutionRangeUtilitiesProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/execution/range/ExecutionRangeUtilities"],function(h,e,g){return h(e,{isApplicable:function(){return!0},
requires:function(){return{isApplicable:[],createInstance:["rtc.document","rtc.internaldocument","rtc.code.sections.model","rtc.linenumberservice","debug.breakpointmodel"]}},createInstance:function(d,c,b,a,f){return new g(d,c,b,a,f)}})})},"MW/rtc/plugins/execution/range/ExecutionRangeUtilities":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin","MW/rtc/model/Range","MW/rtc/plugins/language/matlab/functions/FunctionAttributeConstants"],function(h,e,g,d){return h(e,{constructor:function(c,
b,a,d,e){this._document=c;this._internalDocument=b;this._sectionModel=a;this._lineNumberService=d;this._breakpointDataModel=e},getFinalLineOfMainScope:function(){var c=-1,b=this._sectionModel.getSections();b.some(function(a,f){var e=a[d.LOCAL_FUNCTION_ATTRIBUTE];if(e&&0<e.length&&0<f)return c=b[f-1].end.getLine(),!0});-1===c&&(c=this._internalDocument.getMaxLineNumber());return c},trimRangeToBreakpoints:function(c){var b=c.getStartPosition().getLine(),a=c.getEndPosition().getLine();c=this._breakpointDataModel.getAllBreakpoints();
var d=this._internalDocument.getMaxLineNumber()+1,e=!1;c.forEach(function(c){c=this._lineNumberService.getLineNumberFromCodeLineNumber(c.zeroBasedLineNumber+1)+1;var g=c<d;b<c&&c<a&&g&&(d=c,e=!0)},this);return e?this.buildRange(b,d):this.buildRange(b,a)},buildRange:function(c,b){var a=this._document.createLinePositionInLine(c-1,!1),d=this._document.createLinePositionInLine(b-1,!1);return new g(a,d)},buildRangeForCodeLines:function(c,b){var a=this._lineNumberService.getLineNumberFromCodeLineNumber(c)+
1,d=this._lineNumberService.getLineNumberFromCodeLineNumber(b)+1;return this.buildRange(a,d)}})})},"MW/rtc/plugins/find/FindProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities","MW/rtc/plugins/find/FindHandler","MW/rtc/core/provider/PluginProvider"],function(h,e,g,d,c){return h(c,{requires:function(){return{createInstance:"rtc.focusservice rtc.document rtc.internaldocument rtc.cursor rtc.actionservice rtc.view.visibility".split(" ")}},
createInstance:function(b,a,c,e,g,h){return new d(b,a,c,e,g,h)},destroyInstance:function(b){b.cleanup();b.destroy()}})})},"MW/rtc/plugins/find/FindHandler":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/window MW/rtc/abstract/AbstractPlugin MW/rtc/plugins/find/FindUtilities MW/rtc/plugins/find/view/FindDialog MW/rtc/plugins/find/FindPreference MW/rtc/RichTextComponentFeatureEnum".split(" "),function(h,e,g,d,c,b,a,f,k,l,n){return g(a,{constructor:function(a,
b,c,f,g,h){this._focusService=a;this._document=b;this._internalDocument=c;this._cursor=f;this._actionService=g;this._visibilityNotifier=h;this._dialogInstance=null;this._withReplaceOption=!1;a=[{id:n.FIND_STRING.FIND_ACTION,enabled:!0,key:"ctrl_f",platformKey:{mac:"meta_f"},callback:d.hitch(this,"_createFindDialogCallback")},{id:n.FIND_STRING.FIND_NEXT_ACTION,enabled:!1,key:"f3",platformKey:{mac:"meta_g"},callback:d.hitch(this,"_findNextCallback")},{id:n.FIND_STRING.FIND_PREVIOUS_ACTION,enabled:!1,
key:"shift_f3",platformKey:{mac:"meta_shift_g"},callback:d.hitch(this,"_findPreviousCallback")},{id:n.FIND_STRING.FIND_SELECTION_ACTION,enabled:!1,key:"ctrl_f3",platformKey:{mac:"meta_e"},callback:d.hitch(this,"_findSelectionCallback")}];this._actionService.loadActions(a);var k=this;this.own(e.after(this._cursor,"onChange",d.hitch(this,function(){var a=0!==k._cursor.selectedText().length;k._actionService&&k._actionService.updateAction(n.FIND_STRING.FIND_SELECTION_ACTION,{enabled:a})})));this.own(e.after(this._visibilityNotifier,
"onHide",d.hitch(this,"cleanup")))},_createFindDialogCallback:function(){if(this._actionService.getAction(n.FIND_STRING.FIND_ACTION).enabled)return this.createFindDialog()},_findNextCallback:function(){if(this._actionService.getAction(n.FIND_STRING.FIND_NEXT_ACTION).enabled)return this.find({backward:!1,keyFind:!0})},_findPreviousCallback:function(){if(this._actionService.getAction(n.FIND_STRING.FIND_PREVIOUS_ACTION).enabled)return this.find({backward:!0,keyFind:!0})},_findSelectionCallback:function(){if(this._actionService.getAction(n.FIND_STRING.FIND_SELECTION_ACTION).enabled)return this.find({backward:!1,
selectionKey:!0})},registerReplaceFeature:function(){this._withReplaceOption=!0},createFindDialog:function(){var a=null;if(null!==this._dialogInstance)return this._dialogInstance.findTextInput.focus(),this._dialogInstance;this._resizeHandle=e.after(window,"onresize",d.hitch(this,"_resize"));var b=this._cursor.selectedText(),c=this._internalDocument.isReadOnly();""!==b.trim()&&l.setFindText(b);l.setReadOnlyFileStatus(c);this._withReplaceOption&&(a=d.hitch(this,this._replace));this._dialogInstance=
new k(d.hitch(this,this.find),a,d.hitch(this,this._close),l);this._resize();return this._dialogInstance},_resize:function(){var a=b.getBox(),d=this._dialogInstance.getParent().domNode,f=c.get(d,"width"),e=c.get(d,"height"),f=a.w/2-parseInt(f,10)/2,a=a.h/2-parseInt(e,10)/2;c.set(d,{top:a+"px",left:f+"px"})},_findOnce:function(a){var b={};a.keyFind?b=l.getLastSearchOptions():a.selectionKey?(b.text=this._cursor.selectedText(),b.caseSensitive=!1,b.wholeWords=!1):b=this._getFindObject();b.backward=a.backward;
if(a.continueAtStart||null!==a.continueAtStart&&void 0!==a.continueAtStart&&!1===a.continueAtStart)b.continueAtStart=a.continueAtStart;this._cursor.hasSelection()&&(this._cursor.internalCollapseSelection(b.backward?this._cursor.LEFT:this._cursor.RIGHT),this._cursor.onUpdate());a=this._cursor.getPosition();b.startAt=a;a=f.find(this._internalDocument,b.text,b);l.setLastSearchOptions(b.text,b.caseSensitive,b.wholeWords);this._actionService.updateAction(n.FIND_STRING.FIND_NEXT_ACTION,{enabled:!0});this._actionService.updateAction(n.FIND_STRING.FIND_PREVIOUS_ACTION,
{enabled:!0});return a},_findWithoutScrollingView:function(a){if(a=this._findOnce(a))this._cursor.setPosition(a),this._cursor.onUpdate(!0);return a},find:function(a){a=this._findOnce(a);this._setPositionAndScrollView(a);return a},_getFindObject:function(){return{text:l.getFindText(),caseSensitive:l.getMatchCaseChecked(),wholeWords:l.getWholeWordChecked(),isFileReadOnly:l.getReadOnlyFileStatus()}},_setPositionAndScrollView:function(a){if(a)return this._cursor.setPosition(a),this._cursor.onUpdate(),
!0},_replace:function(a,b){var c=this._getFindObject();if(!(""===c.text||c.text===a||this._internalDocument.isReadOnly())){var d=this._document.startBlockEdit();b?this._replaceAllOccurrence(c,a):this._replaceOccurrence(c,a);this._document.endBlockEdit(d)}},_replaceOccurrence:function(a,b){var c=this._cursor.selectedText().toLowerCase()===a.text.toLowerCase();return this._cursor.hasSelection()&&c||this.find({backward:!1})?(this._document.insertTextAtCurrentPosition(b),!0):!1},_replaceAllOccurrence:function(a,
b){var c=this._cursor.getPosition();this._cursor.setLineColumn(1,1);for(var d=this._findWithoutScrollingView({backward:!1,continueAtStart:!1});d;)this._cursor.isCursorReadOnly()||this._document.insertTextAtCurrentPosition(b),d=this._findWithoutScrollingView({backward:!1,continueAtStart:!1});this._setPositionAndScrollView(c)},_close:function(){this._resizeHandle.remove();this._focusService.setFocus();this._dialogInstance&&(this._dialogInstance=null)},cleanup:function(){this._dialogInstance&&(this._dialogInstance.onClose(),
this._dialogInstance=null)}})})},"MW/rtc/plugins/find/FindUtilities":function(){define([],function(){return{_REGEX_SPECIAL_CHARS:"!\\(\\)\\[\\]\\{\\}\\-\\+\\*,\x3d\\.\\?\\/\\:;%'\"\x26\x3c\x3e\\|\\^",find:function(h,e,g){return g.hasOwnProperty("findAll")&&g.findAll?(g.findAll=!1,g.startAt={line:0,column:0},g.backwards=!1,this._findAll(h,e,g)):this._findOne(h,e,g)},adjustMatch:function(h,e){var g=h[0].length-e.length,d=h[0].length-1;if(1===g){for(var c=!1,b=0;b<e.length;b++)if(e.charAt(b)!==h[0].charAt(b)){h[0]=
h[0].substring(1);h.index+=1;c=!0;break}c||(h[0]=h[0].substring(0,d))}2==g&&(h[0]=h[0].substring(0,d),h[0]=h[0].substring(1),h.index+=1)},_findOne:function(h,e,g){var d=0,c=0;g=g||{};g.startAt&&(d=g.startAt.line,c=g.startAt.column);var b=d,a=c,f=h.getLineNode(d),f=f.getTextForPositioning(),k=!(g.hasOwnProperty("backward")&&g.backward),l=g.hasOwnProperty("caseSensitive")&&g.caseSensitive||!1,n=g.hasOwnProperty("wholeWords")&&g.wholeWords||!1,p=g.hasOwnProperty("regexp")&&g.regexp||!1,m=g.hasOwnProperty("continueAtStart")?
g.continueAtStart:!0;g=e.length;k?f=f.substring(c):(f=f.substring(0,c),c=0);l||(f=f.toLowerCase(),p||(e=e.toLowerCase()));var q=e,r=RegExp("[\\s"+this._REGEX_SPECIAL_CHARS+"]").exec(q);!p&&(n&&!r)&&(p=!0,e="(?:^|\\s|["+this._REGEX_SPECIAL_CHARS+"])"+e+("(?:$|\\s|["+this._REGEX_SPECIAL_CHARS+"])"));for(r=!1;;){if(p){var s=RegExp(e,"g"+(!l?"i":"")),t=s.exec(f);if(t){h=t.index;t[0].length>g&&n&&(s.lastIndex-=1,this.adjustMatch(t,q),h=t.index);if(!k&&0<t[0].length)for(k=t;k;)if(k=s.exec(f))t=k,t[0].length>
g&&n&&(s.lastIndex-=1,this.adjustMatch(t,q),h=t.index);return{anchor:{line:d,column:c+h},line:d,column:c+h+t[0].length}}}else if(r&&(f=f.substring(0,f.length)),s=-1,s=k?f.indexOf(e):f.lastIndexOf(e),0<=s)return{anchor:{line:d,column:c+s},line:d,column:c+s+e.length};if(r)return null;d=k?d+1:d-1;c=0;f=h.getLineNode(d);if(!f){if(!m)return null;d=k?0:h.getMaxLineNumber()-1;f=h.getLineNode(d)}if(d===b){if(k&&0===a||!k&&a===h.getLineNode(d).getText().length)return null;r=!0}f=f.getTextForPositioning();
l||(f=f.toLowerCase())}},_findAll:function(h,e,g){for(var d=[],c=0,b=this._findOne(h,e,g);null!==b;)d[c]=b,g.startAt={line:b.line,column:b.column+1},b=this._findOne(h,e,g),c+=1;return d}}})},"MW/rtc/plugins/find/view/FindDialog":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/query dojo/aspect dojo/dom-construct dojo/dom-style dojo/keys dojo/on dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./FindDialogTemplate.html dijit/form/Button dijit/form/TextBox dijit/form/CheckBox dojo/i18n!l10n/nls/dialog dojo/i18n!l10n/nls/findDialog mw-dialog-utils/DialogUtils".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u){return h([k,l,n],{templateString:p,constructor:function(a,b,c,d){this._findCallBack=a;this._replaceCallBack=b;this._closeCallBack=c;this._findDialogWidget=null;this._replaceSearchString=this._findSearchString=this.findTextInput="";this._wholeWordSet=this._matchCaseSet=!1;this._findDialogPreferences=d},postCreate:function(){this.inherited(arguments);var a=t.findAndReplaceTitle;this.findNextButton.set("label",t.findNextButton);this.replaceButton.set("label",
t.replaceButton);this.replaceAllButton.set("label",t.replaceAllButton);this.findPreviousButton.set("label",t.findPreviousButton);this.matchCaseLabel.innerHTML=t.matchCaseLabel;this.wholeWordLabel.innerHTML=t.wholeWordLabel;this.findTextLabel.innerHTML=t.findTextLabel;this.replaceTextLabel.innerHTML=t.replaceTextLabel;this.findTextInput.set("value",this._findDialogPreferences.getFindText());this.replaceTextInput.set("value",this._findDialogPreferences.getReplaceText());this.matchCaseCheckBox.set("checked",
this._findDialogPreferences.getMatchCaseChecked());this.wholeWordCheckBox.set("checked",this._findDialogPreferences.getWholeWordChecked());this._matchCaseSet=this.matchCaseCheckBox.checked;this._wholeWordSet=this.wholeWordCheckBox.checked;this._findDialogPreferences.getReadOnlyFileStatus()&&(this.replaceButton.set("Disabled",!0),this.replaceAllButton.set("Disabled",!0),this.replaceTextInput.set("Disabled",!0));f(this.findTextInput,"onkeyup",e.hitch(this,"onTextKeyup"));f(this.findTextInput,"change",
e.hitch(this,"_handleTextChange"));var b=this;setTimeout(function(){b.findTextInput&&b.findTextInput.focus()},0);this.findNextButton.set("data-findNextButtonId","findNextButton");this.findPreviousButton.set("data-findPreviousButtonId","findPreviousButton");this.replaceButton.set("data-replaceButtonId","replaceButton");this.replaceAllButton.set("data-replaceAllButtonId","replaceAllButton");this.findTextInput.set("data-findTextInputId","findTextInput");this.replaceTextInput.set("data-replaceTextInputId",
"replaceTextInput");this.matchCaseCheckBox.set("data-matchCaseCheckBoxId","matchCaseCheckBox");this.wholeWordCheckBox.set("data-wholeWordCheckBoxId","wholeWordCheckBox");this.matchCaseLabel.setAttribute("data-matchCaseLabelId","matchCaseLabel");this.wholeWordLabel.setAttribute("data-wholeWordLabelId","wholeWordLabel");f(this.findNextButton,"click",e.hitch(this,"onFind",!1));f(this.findPreviousButton,"click",e.hitch(this,"onFind",!0));f(this.matchCaseCheckBox,"click",e.hitch(this,"onCheckBoxClick",
!1));f(this.wholeWordCheckBox,"click",e.hitch(this,"onCheckBoxClick",!0));f(this.replaceButton,"click",e.hitch(this,"onReplace",!1));f(this.replaceAllButton,"click",e.hitch(this,"onReplace",!0));var c={"data-testid":"rteFindDialog",layoutId:"rteFindDialog",closeCallBack:e.hitch(this,this.onClose),resizable:!1};this._replaceCallBack||(a=t.findTitle,this.replace.style.display="none");this._findDialogWidget=u.displayNonModalDialog(a,this,c);this._findDialogWidget.findTextInput.focusNode.select();d.before(this._findDialogWidget,
"onClose",e.hitch(this,this.saveDialogState));this._findDialogWidget.domNode.addEventListener("click",e.hitch(this,function(a){"replaceTextInput"!==a.target.name&&this.findTextInput.focus()}))},saveDialogState:function(){this._findDialogPreferences.setFindText(this._findSearchString);this._findDialogPreferences.setReplaceText(this._replaceSearchString);this._findDialogPreferences.setMatchCaseChecked(this._matchCaseSet);this._findDialogPreferences.setWholeWordChecked(this._wholeWordSet)},onTextKeyup:function(b){this._handleTextChange();
if(b.keyCode===a.ENTER)this.onFind(!1),this.findTextInput.focus();else if(b.keyCode===a.ESCAPE)this.onClose()},_handleTextChange:function(a){this._findSearchString=this.findTextInput.get("value");this._replaceSearchString=this.replaceTextInput.get("value")},onClose:function(){this._closeCallBack()},onCheckBoxClick:function(){this._matchCaseSet=this.matchCaseCheckBox.checked;this._wholeWordSet=this.wholeWordCheckBox.checked},onFind:function(a){this.saveDialogState();this._findCallBack({backward:a});
a?this.findPreviousButton.focus():this.findNextButton.focus()},onReplace:function(a){this.saveDialogState();var b=this.replaceTextInput.get("value");this._replaceCallBack(b,a);a?this.replaceAllButton.focus():(this._findCallBack({backward:!1}),this.replaceButton.focus())}})})},"dijit/form/CheckBox":function(){define("require dojo/_base/declare dojo/dom-attr dojo/has dojo/query dojo/ready ./ToggleButton ./_CheckBoxMixin dojo/text!./templates/CheckBox.html ../_mw/utils/deprecation dojo/NodeList-dom ../a11yclick".split(" "),
function(h,e,g,d,c,b,a,f,k,l){l.deprecated({deprecated:{module:"dijit/form/Checkbox"},replacement:{module:"mw-form/Checkbox"},geckNumber:1352405});d("dijit-legacy-requires")&&b(0,function(){h(["dijit/form/RadioButton"])});return e("dijit.form.CheckBox",[a,f],{templateString:k,baseClass:"dijitCheckBox",_setValueAttr:function(a,b){"string"==typeof a&&(this.inherited(arguments),a=!0);this._created&&this.set("checked",a,b)},_getValueAttr:function(){return this.checked&&this._get("value")},_setIconClassAttr:null,
_setNameAttr:"focusNode",postMixInProperties:function(){this.inherited(arguments);this.checkedAttrSetting=""},_fillContent:function(){},_onFocus:function(){this.id&&c("label[for\x3d'"+this.id+"']").addClass("dijitFocusedLabel");this.inherited(arguments)},_onBlur:function(){this.id&&c("label[for\x3d'"+this.id+"']").removeClass("dijitFocusedLabel");this.inherited(arguments)}})})},"dijit/form/ToggleButton":function(){define(["dojo/_base/declare","dojo/_base/kernel","./Button","./_ToggleButtonMixin",
"../_mw/utils/deprecation"],function(h,e,g,d,c){c.deprecated({deprecated:{module:"dijit/form/ToggleButton"},replacement:{module:"mw-form/ToggleButton"},geckNumber:1352405});return h("dijit.form.ToggleButton",[g,d],{baseClass:"dijitToggleButton",setChecked:function(b){e.deprecated("setChecked("+b+") is deprecated. Use set('checked',"+b+") instead.","","2.0");this.set("checked",b)}})})},"dijit/form/_ToggleButtonMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(h,e){return h("dijit.form._ToggleButtonMixin",
null,{checked:!1,_aria_attr:"aria-pressed",_onClick:function(e){var d=this.checked;this._set("checked",!d);var c=this.inherited(arguments);this.set("checked",c?this.checked:d);return c},_setCheckedAttr:function(g,d){this._set("checked",g);var c=this.focusNode||this.domNode;this._created&&e.get(c,"checked")!=!!g&&e.set(c,"checked",!!g);c.setAttribute(this._aria_attr,String(g));this._handleOnChange(g,d)},postCreate:function(){this.inherited(arguments);var e=this.focusNode||this.domNode;this.checked&&
e.setAttribute("checked","checked");void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.checked)},reset:function(){this._hasBeenBlurred=!1;this.set("checked",this.params.checked||!1)}})})},"dijit/form/_CheckBoxMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(h,e){return h("dijit.form._CheckBoxMixin",null,{type:"checkbox",value:"on",readOnly:!1,_aria_attr:"aria-checked",_setReadOnlyAttr:function(g){this._set("readOnly",g);e.set(this.focusNode,"readOnly",
g)},_setLabelAttr:void 0,_getSubmitValue:function(e){return null==e||""===e?"on":e},_setValueAttr:function(g){g=this._getSubmitValue(g);this._set("value",g);e.set(this.focusNode,"value",g)},reset:function(){this.inherited(arguments);this._set("value",this._getSubmitValue(this.params.value));e.set(this.focusNode,"value",this.value)},_onClick:function(e){return this.readOnly?(e.stopPropagation(),e.preventDefault(),!1):this.inherited(arguments)}})})},"MW/rtc/plugins/find/FindPreference":function(){define([],
function(){return{_findTextHistory:"",_replaceTextHistory:"",_matchCaseHistory:!1,_wholeWordHistory:!1,_isFileReadOnly:!1,_lastSearchedText:"",_lastMatchCase:!1,_lastWholeWord:!1,setFindText:function(h){h=h.split("\n");this._findTextHistory=0<h.length?h[0]:""},getFindText:function(){return this._findTextHistory},setReplaceText:function(h){this._replaceTextHistory=h.trim()},getReplaceText:function(){return this._replaceTextHistory},setMatchCaseChecked:function(h){this._matchCaseHistory=h},getMatchCaseChecked:function(){return this._matchCaseHistory},
setWholeWordChecked:function(h){this._wholeWordHistory=h},getWholeWordChecked:function(){return this._wholeWordHistory},setReadOnlyFileStatus:function(h){this._isFileReadOnly=h},getReadOnlyFileStatus:function(){return this._isFileReadOnly},setLastSearchOptions:function(h,e,g){this._lastSearchedText=h;this._lastMatchCase=e;this._lastWholeWord=g},getLastSearchOptions:function(){return{text:this._lastSearchedText,caseSensitive:this._lastMatchCase,wholeWords:this._lastWholeWord}}}})},"MW/rtc/plugins/find/ReplaceProvider":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/plugins/find/ReplaceHandler","MW/rtc/core/provider/PluginProvider"],function(h,e,g,d){return h(d,{requires:function(){return{createInstance:["rtc.actionservice","rtc.navigate.find"]}},createInstance:function(c,b){return new g(c,b)}})})},"MW/rtc/plugins/find/ReplaceHandler":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/RichTextComponentFeatureEnum"],function(h,e,g){return h(null,{constructor:function(d,c){this._findHandler=c;this._actionService=d;this._findHandler.registerReplaceFeature();
var b=[{id:g.FIND_STRING.REPLACE_ACTION,enabled:!0,key:"ctrl_h",callback:e.hitch(this,"_openFindDialogWithReplace")}];d.loadActions(b)},_openFindDialogWithReplace:function(){this._actionService.getAction(g.FIND_STRING.REPLACE_ACTION).enabled&&this._findHandler.createFindDialog()}})})},"MW/rtc/plugins/formatcode/FormatCodePluginProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities","MW/rtc/plugins/formatcode/FormatCode","MW/rtc/core/provider/PluginProvider"],
function(h,e,g,d){return h(d,{isApplicable:function(c){return e.isMatlabCodeFileOrBuffer(c)},requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:"rtc.indentutilities rtc.document rtc.internaldocument rtc.cursor rtc.actionservice rtc.code.autoindent".split(" ")}},createInstance:function(c,b,a,d,e,h){return new g(c,b,a,d,e,h)},destroyInstance:function(c){c.destroy()}})})},"MW/rtc/plugins/formatcode/FormatCode":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/formatcode/FormatCodeDataService MW/rtc/abstract/AbstractPlugin MW/rtc/EditorUtilities MW/rtc/RichTextComponentFeatureEnum MW/rtc/model/DocumentUtilities MW/rtc/model/DocumentConstants MW/rtc/model/events/DocumentEvent MW/rtc/model/CodeUtilities MW/rtc/model/NodeUtilities MW/rtc/model/Position dojo/i18n!l10n/nls/actions".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q){return h(c,{constructor:function(a,b,c,f,h,k){this._indentUtilities=a;this._internalDocument=c;this._document=b;this._cursor=f;this._formatCodeDataService=new d;this._documentContent="";this._actionService=h;this._autoIndent=k;this._addActions();this.own(g.after(this._cursor,"onChange",e.hitch(this,"_updateActionState")));this.own(g.after(this._document,"onChange",e.hitch(this,"_updateActionsOnDocumentChange"),!0))},_addActions:function(){this._actions=[{id:a.FORMAT_CODE.SMART_INDENT_ACTION,
enabled:!0,contextMenuGroup:"Default",text:q.smartIndentLabel,description:q.smartIndentDescription,key:"ctrl_i",platformKey:{mac:"meta_i"},callback:e.hitch(this,"_checkAndFormatCode")}];this._actionService.loadActions(this._actions)},_updateActionsOnDocumentChange:function(a){a&&e.isArray(a)&&a.some(function(a){if(a.type===k.READONLY_STATE_CHANGE_EVENT)return this._updateActionState(),!0},this)},_updateActionState:function(){var b=this._isCodeInSelection(),c=this._isSelectionReadOnly(),d=this._document.isReadOnly();
this._actionService.updateAction(a.FORMAT_CODE.SMART_INDENT_ACTION,{enabled:b&&!c&&!d})},_isSelectionReadOnly:function(){var a=this._cursor.selectionInfo(),a=this._indentUtilities.getRangeFromSelection(a),a=p.getParagraphNodesInRange(a.start,a.end);return 0==f.getWritableChunksInRange(this._internalDocument,a).length},_isCodeInSelection:function(){var a=this._cursor.selectionInfo();return n.isCodeInRange(a.startNode,a.endNode)},_checkAndFormatCode:function(){this._actionService.getAction(a.FORMAT_CODE.SMART_INDENT_ACTION).enabled&&
this.formatCode()},formatCode:function(){this._documentContent=this._document.getCodeText();0!==this._documentContent.length&&(this._cursorPos=this._cursor.getPosition(),this._selectionInfo=this._cursor.selectionInfo(),this._rangeToFormat=b.getRangeOfCodeToFormat(this._documentContent,this._cursorPos),this._formatCodeServerRequest())},_formatCodeServerRequest:function(){this._formatCodeDataService.getFormattedCode(this._documentContent,this._rangeToFormat.start,this._rangeToFormat.end,"file.m",this._rangeToFormat.cursor,
e.hitch(this,"_formatCodeCallback"),e.hitch(this,"_formatErrorCallback"))},_formatErrorCallback:function(){this._internalDocument.setReadOnly(!1,!0)},_adjustCursorPosition:function(a,b,c,d,f){var e={line:a.line,anchor:{}},g=b.length-1;d?(e.anchor={line:a.anchor.line,column:Math.max(0,a.anchor.column+b[c.isReversed?g:0])},e.column=Math.max(0,a.column+b[c.isReversed?0:g])):e.column=Math.max(0,a.column+b[a.line-f]);return e},_getMockCursorPosition:function(a,b){return{line:a.endLine,column:b.maxOffset(),
anchor:{line:a.startLine,column:0}}},_isCursorInCurrentChunk:function(a,b){var c=this._internalDocument.getLineNumber(a),d=this._internalDocument.getLineNumber(b)>=this._cursorPos.line;return c<=this._cursorPos.line&&d},_formatCodeCallback:function(a){var c=this._documentContent.substring(this._rangeToFormat.start,this._rangeToFormat.end);if(c!==a){c=c.split("\n");a=a.split("\n");var d=this._cursorPos,e=this._selectionInfo,g=!e.isNull;g||(e.startNode=this._internalDocument.startNode(),e.startPos=
0,e.endNode=this._internalDocument.endNode(),e.endPos=e.endNode.maxOffset(),e.isNull=!1,e.isLocal=!1);var h=this._indentUtilities.getRangeFromSelection(e),e=this._internalDocument.getLineNumber(e.startNode.rootContainer()),k=p.getParagraphNodesInRange(h.start,h.end),h=f.getWritableChunksInRange(this._internalDocument,k);this._autoIndent.disable();this._internalDocument.onPreDocumentChanged({});for(var n=this._internalDocument.getLineNumber(k[0]),k=this._internalDocument.getLineNumber(k[k.length-1]),
n=l.create(n,k),k=this._document.startEdit(),q=0;q<h.length;q++){var m=h[q],G=this._internalDocument.getLineNode(m.startLine),H=this._internalDocument.getLineNode(m.endLine),I=this._getMockCursorPosition(m,H),I=this._cursor.cursorPos2selectionInfo(I),K=m.startLine-e,C=m.endLine-e,M=c.slice(K,C+1),K=a.slice(K,C+1),M=this._indentUtilities.getIndentArray(M,K),K=M.pop();this._indentUtilities.blockDeltaIndent(G,H,M,b.getWhiteSpaces(K))&&this._isCursorInCurrentChunk(G,H)&&(m=this._adjustCursorPosition(d,
M,I,g,m.startLine),this._cursor.setPosition(m))}k.appendUndoEvents([n]);k.appendRedoEvents([n]);this._document.endEdit();this._cursor.onUpdate();this._internalDocument.emitDocumentEvents([n]);this._autoIndent.enable()}},destroy:function(){this._actions.forEach(function(a){this._actionService.removeAction(a.id)},this)}})})},"MW/formatcode/FormatCodeDataService":function(){define(["dojo/_base/declare","dojo/_base/array","mw-log/Log","mw-remote/Remote"],function(h,e,g,d){return h(null,{constructor:function(){d.registerResponseHandler("FormatCodeResponse",
this._handleFormatCodeResponse,this);d.registerFaultHandler("FormatCode",this._handleFormatCodeError,this)},getFormattedCode:function(c,b,a,f,e,g,h){d.sendMessage({FormatCode:{code:c,startOfSelection:b,endOfSelection:a,filename:f,cursorPosition:e}},{responseCallback:g,errorCallback:h})},_handleFormatCodeResponse:function(c,b){e.forEach(c,function(a){b.responseCallback(a.formattedCode,a.startOfFormattedCode,a.endOfFormattedCode,a.adjustedStartOfSelection,a.adjustedEndOfSelection,a.adjustedCursorPosition)},
this)},_handleFormatCodeError:function(c,b){g.assert(!1,"Received the following error: "+c);b.errorCallback&&b.errorCallback()}})})},"MW/rtc/EditorUtilities":function(){define([],function(){return{getLineColumnFromOffset:function(h,e){"string"===typeof h&&(h=h.split("\n"));var g=0,d;for(d=0;d<h.length;d+=1){if(g+h[d].length>=e)return{line:d,column:e-g};g=g+h[d].length+1}return{line:0,column:0}},getOffsetFromLine:function(h,e){"string"===typeof h&&(h=h.split("\n"));var g=0,d;for(d=0;d<h.length;d+=
1){if(e===d)return[g,h[d].length];g=g+h[d].length+1}return[g,0]},getRangeOfCodeToFormat:function(h,e){var g=h.split("\n"),d=this.getOffsetFromLine(g,e.line),c={cursor:d[0]};g[e.line]&&(c.cursor+=e.column);e.anchor&&e.anchor.hasOwnProperty("line")&&e.anchor.hasOwnProperty("column")?(g=this.getOffsetFromLine(g,e.anchor.line),d[0]<g[0]?(c.start=d[0],c.end=g[0]+g[1]):(c.start=g[0],c.end=d[0]+d[1])):(c.start=0,c.end=h.length,c.cursorLine=e.line);return c},getWhiteSpaces:function(h){var e="",g;for(g=0;g<
h;g+=1)e+=" ";return e}}})},"MW/rtc/plugins/goto/GotoProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/plugins/goto/GotoHandler","MW/rtc/core/provider/PluginProvider"],function(h,e,g,d){return h(d,{requires:function(){return{createInstance:"rtc.focusservice rtc.internaldocument rtc.linenumberservice rtc.document rtc.cursor rtc.functionservice rtc.actionservice rtc.code.matlabfiletype".split(" ")}},createInstance:function(c,b,a,d,e,h,n,p){return new g(c,b,a,d,e,h,n,p)}})})},
"MW/rtc/plugins/goto/GotoHandler":function(){define("dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/has dojo/topic dojo/_base/lang dojo/aspect dojo/dom-style dijit/registry dijit/focus MW/rtc/plugins/goto/GotoPreferences MW/rtc/plugins/goto/view/GotoDialog MW/rtc/plugins/language/matlab/section/SectionsList MW/uiframework/UIBuilderFactory MW/rtc/RichTextComponentFeatureEnum MW/rtc/plugins/goto/GotoUtilities".split(" "),function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s){var t=!1,u=!1,v=!1,w=!1,
x;return g(null,{_focusService:null,constructor:function(a,b,c,d,f,e,g,h){this._focusService=a;this._internalDocument=b;this._lineNumberService=c;this._cursor=f;this._document=d;this._actionService=g;this._goToActions=[];this._goToDialog=null;this._createGoToDialogAction();g.loadActions(this._goToActions);this._sectionsList=new m(b,d);this._sectionPopupId=this._functionPopupId=null;this._functionService=e;this._fileType=h},_createGoToDialogAction:function(){this._goToActions=[{id:r.GOTO_LINE.GOTO_ACTION,
enabled:!0,key:d("safari")?"":"ctrl_g",platformKey:{mac:d("safari")?"":"meta_l"},callback:b.hitch(this,"_gotoActionCallback")}]},_gotoActionCallback:function(){if(this._actionService.getAction(r.GOTO_LINE.GOTO_ACTION).enabled)return this._goToLineDialog()},_goToLineDialog:function(){return this._goToDialog=new p(b.hitch(this,this._goToLine),b.hitch(this,this._close))},_goToLine:function(a){s.gotoCodeLineColumn(this._internalDocument,this._lineNumberService,this._cursor,a,1)},goToLine:function(a){this._goToLine(a);
this._focusEditor()},_close:function(){this._focusEditor()},_focusEditor:function(){setTimeout(b.hitch(this,function(){this._focusService.setFocus()}),1)},setupGoToToolStripButton:function(){var a=q.getInstance(),c=a.tagToId("motwToolstrip.editorTab.navigate.goTo");c&&a.addEventCallback(c,b.hitch(this,function(b){if("dropDownPerformed"===b.eventType){b=this._getActiveGoToHandlerInstance();var d=b._sectionsList.getSections(),f=b._functionService.getFunctionDeclarations().length;v=w=t=!1;0<f&&0===d.length?
t=!0:0===f&&0<d.length?t=!1:0!==f&&0!==d.length&&(v=w=!0);b=this._populateGoToDropDownList(a,b);a.showPopup(c,b)}}),this)},_populateGoToDropDownList:function(a,b){var c={};a&&(c.popupId=a.tagToId("motwToolstrip.editorTab.navigate.goTo.goToList"),c.sectionHeaderId=a.tagToId("motwToolstrip.editorTab.navigate.goTo.goToList.sectionHeader"),c.functionHeaderId=a.tagToId("motwToolstrip.editorTab.navigate.goTo.goToList.functionHeader"),c.popupListPanelId=a.tagToId("motwToolstrip.editorTab.navigate.goTo.goToList.goToListPanel"));
this._destroyPopupList(a,c);t?this._createFunctionsPopupListPanel(b,a,c):w?this._createFunctionsAndSectionsPopupListPanel(b,a,c,u):this._createSectionsPopupListPanel(b,a,c);return c.popupId},_createFunctionsAndSectionsPopupListPanel:function(a,b,c,d){this._createFunctionsPopupListPanel(a,b,c);this._functionPopupId=c.popupListPanelId;this._createSectionsPopupListPanel(a,b,c);this._sectionPopupId=c.popupListPanelId;d?n.setPopupStyle(this._functionPopupId,c.functionHeaderId,"none"):n.setPopupStyle(this._sectionPopupId,
c.sectionHeaderId,"none")},_createSectionsPopupListPanel:function(a,d,f){var e=a._sectionsList.getSections();if(0<e.length){f.sectionHeaderId=n.createSectionHeader(d);d.add(f.sectionHeaderId,f.popupId,2);f.popupListPanelId=n.createPopupListPanel(d);d.add(f.popupListPanelId,f.popupId,3);v&&(n.createFunctionToggleSwitch(d).onclick=b.hitch(this,function(){n.setPopupStyle(this._sectionPopupId,f.sectionHeaderId,"none");var a=k.byId(d.tagToId("motwToolstrip.editorTab.navigate.goTo.goToList.goToLine"));
l.focus(a.domNode);n.setPopupStyle(this._functionPopupId,f.functionHeaderId,"");u=!1;c.publish("/toolstrip/popUpList/render")}));var g=1,h,q;e.forEach(function(b,c){h=b.startPosition.getRow();q=a._sectionsList.getTextInLine(h);if(m.hasSectionTitle(q)){var e=n.formatSectionTitle(q,g);g=e[1];e=n.createGoToListItem(a,d,h+1,e[0]);d.add(e,f.popupListPanelId,c)}})}},_createFunctionsPopupListPanel:function(a,d,f){var e=a._functionService.getAllFunctionDeclarations();if(!(1>e.length)){f.functionHeaderId=
n.createFunctionHeader(d);d.add(f.functionHeaderId,f.popupId,2);v&&(n.createSectionToggleSwitch(d).onclick=b.hitch(this,function(){n.setPopupStyle(this._functionPopupId,f.functionHeaderId,"none");var a=k.byId(d.tagToId("motwToolstrip.editorTab.navigate.goTo.goToList.goToLine"));l.focus(a.domNode);n.setPopupStyle(this._sectionPopupId,f.sectionHeaderId,"");u=!0;c.publish("/toolstrip/popUpList/render")}));f.popupListPanelId=n.createPopupListPanel(d);d.add(f.popupListPanelId,f.popupId,3);var g=this._fileType.getFileType()===
this._fileType.FILE_TYPE.ClassDefinitionFile;s.sortFunctionDeclarations(e,!g).forEach(function(b,c){var e=n.createGoToFunctionListItem(a,d,b.getStartLine(),b.getName());d.add(e,f.popupListPanelId,c)})}},_destroyPopupList:function(a,b){a.exists(this._sectionPopupId)&&a.destroy(this._sectionPopupId);a.exists(this._functionPopupId)&&a.destroy(this._functionPopupId);Object.keys(b).map(function(c){"popupId"!==c&&a.exists(b[c])&&a.destroy(b[c])})},setActiveGoToHandlerInstance:function(a){x=a},_getActiveGoToHandlerInstance:function(){return x}})})},
"MW/rtc/plugins/goto/GotoPreferences":function(){define("dojo/_base/lang dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/i18n!l10n/nls/gotoDialog dijit/registry MW/toolstrip/constants/TypeConstants MW/toolstrip/hashes/listOfNewWidgets".split(" "),function(h,e,g,d,c,b,a,f){return{_lastSelectedLine:"",createGoToListItem:function(b,c,d,f){f=c.create({type:a.LIST_ITEM,tag:"SectionListItem"+d,text:f});c.addEventCallback(f,h.hitch(b,function(a){"itemPushed"===a.eventType&&b.goToLine(d)}));return f},
createGoToFunctionListItem:function(b,c,d,f){f=c.create({type:a.LIST_ITEM,tag:"FunctionListItem"+d,text:f});c.addEventCallback(f,h.hitch(b,function(a){"itemPushed"===a.eventType&&b.goToLine(d)}));return f},createPopupListPanel:function(b){return b.create({tag:"motwToolstrip.editorTab.navigate.goTo.goToList.goToListPanel",type:a.POPUP_LIST_PANEL,maxHeight:440})},createSectionHeader:function(b){return b.create({tag:"motwToolstrip.editorTab.navigate.goTo.goToList.sectionHeader",type:a.POPUP_LIST_HEADER,
title:"SECTIONS"})},createFunctionHeader:function(b){return b.create({tag:"motwToolstrip.editorTab.navigate.goTo.goToList.functionHeader",type:a.POPUP_LIST_HEADER,title:"FUNCTIONS"})},createSectionToggleSwitch:function(a){var c=b.byId(a.tagToId("motwToolstrip.editorTab.navigate.goTo.goToList.functionHeader"));if(-1===f.indexOf(c.type)){var d=c.domNode;a=d.querySelector("td")}else a=c.domNode;var h=g.create("div",{innerHTML:"SHOW SECTIONS"});e.set(h,"style","float:right; font-family:Arial; font-size:8px; margin-top:3px; margin-right:3px; color:white;  cursor: pointer; padding:1px; ");
g.place(h,a,"last");-1===f.indexOf(c.type)&&d.appendChild(a);return h},createFunctionToggleSwitch:function(a){var c=b.byId(a.tagToId("motwToolstrip.editorTab.navigate.goTo.goToList.sectionHeader"));if(-1===f.indexOf(c.type)){var d=c.domNode;a=d.querySelector("td")}else a=c.domNode;var h=g.create("div",{innerHTML:"SHOW FUNCTIONS"});e.set(h,"style","float:right; font-family:Arial; font-size:8px; margin-top:3px; margin-right:3px; color:white;  cursor: pointer; padding:1px; ");g.place(h,a,"last");-1===
f.indexOf(c.type)&&d.appendChild(a);return h},formatSectionTitle:function(a,b){var d=a.replace(/^\s*%%/,"").trim();0===d.length&&(d=c.section+" "+b,b+=1);return[d,b]},setGotoLine:function(a){this._lastSelectedLine=a},getGotoLine:function(){return this._lastSelectedLine},setPopupStyle:function(a,c,f){a=b.byId(a);c=b.byId(c);d.set(a.domNode,"display",f);d.set(c.domNode,"display",f)}}})},"MW/toolstrip/constants/TypeConstants":function(){define([],function(){return{TOOLSTRIP_ROOT:"ToolstripRoot",QAB_ROOT:"QABRoot",
POPUP_ROOT:"PopupRoot",GALLERY_ROOT:"GalleryRoot",GALLERY_POPUP_ROOT:"GalleryPopupRoot",GALLERY_FAVORITE_CATEGORY_ROOT:"GalleryFavoriteCategoryRoot",TOOLSTRIP:"Toolstrip",QAB:"QuickAccessBar",QA_GROUP:"QuickAccessGroup",TAB_GROUP:"TabGroup",TAB:"Tab",SECTION:"Section",PANEL:"Panel",COLUMN:"Column",COLOR_PICKER_BUTTON:"ColorPickerButton",GRID_PICKER_BUTTON:"GridPickerButton",PUSH_BUTTON:"PushButton",DROP_DOWN_BUTTON:"DropDownButton",SPLIT_BUTTON:"SplitButton",TOGGLE_BUTTON:"ToggleButton",POPUP_LIST:"PopupList",
LIST_ITEM:"ListItem",POPUP_LIST_PANEL:"PopupListPanel",LIST_ITEM_WITH_CHECKBOX:"ListItemWithCheckBox",LIST_ITEM_WITH_TEXTFIELD:"ListItemWithTextField",LIST_ITEM_WITH_RADIO_BUTTON:"ListItemWithRadioButton",LIST_ITEM_WITH_POPUP:"ListItemWithPopup",POPUP_LIST_SEPARATOR:"PopupListSeparator",POPUP_LIST_HEADER:"PopupListHeader",COMBO_BOX:"ComboBox",LIST:"List",LABEL:"Label",EMPTY_CONTROL:"EmptyControl",TEXT_FIELD:"TextField",TEXT_AREA:"TextArea",SPINNER:"Spinner",HORIZONTAL_SLIDER:"HorizontalSlider",RADIO_BUTTON:"RadioButton",
CHECK_BOX:"CheckBox",TOGGLE_SPLIT_BUTTON:"ToggleSplitButton",FOOTER:"Footer",FOOTER_CELL:"FooterCell",QAB_PUSH_BUTTON:"QABPushButton",QAB_DROP_DOWN_BUTTON:"QABDropDownButton",QAB_SPLIT_BUTTON:"QABSplitButton",QAB_TOGGLE_BUTTON:"QABToggleButton",QAB_TOGGLE_SPLIT_BUTTON:"QABToggleSplitButton",QAB_FLOATING_PANE_DOCK:"QABFloatingPaneDock",MENUBAR_WRAPPER:"MenubarWrapper",TOOLBAR_WRAPPER:"ToolbarWrapper",GALLERY:"Gallery",GALLERY_POPUP:"GalleryPopup",GALLERY_CATEGORY:"GalleryCategory",GALLERY_FAVORITE_CATEGORY:"GalleryFavoriteCategory",
GALLERY_ITEM:"GalleryItem",TOGGLE_GALLERY_ITEM:"ToggleGalleryItem"}})},"MW/toolstrip/hashes/listOfNewWidgets":function(){define(["../constants/TypeConstants"],function(h){return[h.LABEL,h.PUSH_BUTTON,h.TOGGLE_BUTTON,h.DROP_DOWN_BUTTON,h.SPLIT_BUTTON,h.TOGGLE_SPLIT_BUTTON,h.TEXT_FIELD,h.TEXT_AREA,h.CHECK_BOX,h.RADIO_BUTTON,h.COMBO_BOX,h.SPINNER,h.LIST,h.LIST_ITEM,h.LIST_ITEM_WITH_CHECKBOX,h.LIST_ITEM_WITH_RADIO_BUTTON,h.LIST_ITEM_WITH_POPUP,h.LIST_ITEM_WITH_TEXTFIELD,h.POPUP_LIST,h.POPUP_LIST_PANEL,
h.POPUP_LIST_SEPARATOR,h.POPUP_LIST_HEADER,h.QAB_PUSH_BUTTON,h.QAB_TOGGLE_BUTTON,h.QAB_DROP_DOWN_BUTTON,h.QAB_SPLIT_BUTTON,h.QAB_TOGGLE_SPLIT_BUTTON,h.COLOR_PICKER_BUTTON,h.GRID_PICKER_BUTTON]})},"MW/rtc/plugins/goto/view/GotoDialog":function(){define("dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/form/Button dijit/form/NumberTextBox dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/keys dojo/on dojo/aspect dojo/text!./GotoDialogTemplate.html dojo/i18n!l10n/nls/dialog dojo/i18n!l10n/nls/gotoDialog mw-dialog-utils/DialogUtils MW/rtc/plugins/goto/GotoPreferences".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s){h=b([h,e,g],{templateString:p,widgetsInTemplate:!0,constructor:function(a,b){this._goToLineCallback=a;this._closeCallBack=b;this._goToDialogWidget=null},postCreate:function(){this.inherited(arguments);this.okButton.set("Disabled",!0);var b=this;this.okButton.set("label",m.ok);this.cancelButton.set("label",m.cancel);this.lineNumberLabel.innerHTML=q.line;var c=s.getGotoLine(),c=""===c||isNaN(c);this.okButton.set("Disabled",c);this.lineNumberInput.set("value",
s.getGotoLine());l(this.okButton,"click",a.hitch(this,"onOK"));l(this.cancelButton,"click",a.hitch(this,"onCancel"));l(this.lineNumberInput,"keyup",a.hitch(this,"onTextKeyup"));this.okButton.set("data-okButtonId","okButton");this.cancelButton.set("data-cancelButtonId","cancelButton");this.lineNumberInput.set("data-lineNumberInputId","lineNumberInput");setTimeout(function(){b.lineNumberInput.focus()},0);this._goToDialogWidget=r.displayModalDialog(this,q.title,[],{"data-testid":"rteGoToDialog",dialogClass:"rteGoToDialog"});
n.before(this._goToDialogWidget,"onClose",a.hitch(this,this._saveGoToDialogState))},_saveGoToDialogState:function(){s.setGotoLine(this.lineNumberInput.get("value"))},onTextKeyup:function(a){var b=this.lineNumberInput.get("value");void 0===b||""===b||isNaN(b)||0>b?this.okButton.set("disabled",!0):this.okButton.set("disabled",!1);if(a.keyCode===k.ENTER&&!this.okButton.get("disabled"))if(this.onOK)this.onOK();else if(a.keyCode===k.ESCAPE)this.onCancel()},onCancel:function(){this._goToDialogWidget.onClose()},
onOK:function(){var a=this.getLineNumber();this._goToLineCallback(a);this.onCancel()},onClose:function(){this._closeCallBack()},getLineNumber:function(){return this.lineNumberInput.get("value")}});h.getEmptySectionTitle=function(){return q.section};return h})},"dijit/form/NumberTextBox":function(){define("dojo/_base/declare dojo/_base/lang dojo/i18n dojo/string dojo/number ./RangeBoundTextBox".split(" "),function(h,e,g,d,c,b){var a=function(a){a=a||{};var b=g.getLocalization("dojo.cldr","number",
g.normalizeLocale(a.locale)),c=a.pattern?a.pattern:b[(a.type||"decimal")+"Format"];a="number"==typeof a.places?a.places:"string"===typeof a.places&&0<a.places.length?a.places.replace(/.*,/,""):-1!=c.indexOf(".")?c.split(".")[1].replace(/[^#0]/g,"").length:0;return{sep:b.decimal,places:a}},f=h("dijit.form.NumberTextBoxMixin",null,{pattern:function(a){return"("+(this.focused&&this.editOptions?this._regExpGenerator(e.delegate(a,this.editOptions))+"|":"")+this._regExpGenerator(a)+")"},value:NaN,editOptions:{pattern:"#.######"},
_formatter:c.format,_regExpGenerator:c.regexp,_decimalInfo:a(),postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},_setConstraintsAttr:function(b){var c="number"==typeof b.places?b.places:0;c&&c++;"number"!=typeof b.max&&(b.max=9*Math.pow(10,15-c));"number"!=typeof b.min&&(b.min=-9*Math.pow(10,15-c));this.inherited(arguments,[b]);this.focusNode&&(this.focusNode.value&&!isNaN(this.value))&&this.set("value",this.value);this._decimalInfo=a(b)},_onFocus:function(){if(!this.disabled&&
!this.readOnly){var a=this.get("value");"number"==typeof a&&!isNaN(a)&&(a=this.format(a,this.constraints),void 0!==a&&(this.textbox.value=a));this.inherited(arguments)}},format:function(a,b){var c=String(a);if("number"!=typeof a)return c;if(isNaN(a))return"";if(!("rangeCheck"in this&&this.rangeCheck(a,b))&&!1!==b.exponent&&/\de[-+]?\d/i.test(c))return c;this.editOptions&&this.focused&&(b=e.mixin({},b,this.editOptions));return this._formatter(a,b)},_parser:c.parse,parse:function(a,b){var c=e.mixin({},
b,this.editOptions&&this.focused?this.editOptions:{});if(this.focused&&null!=c.places){var d=c.places,d="number"===typeof d?d:Number(d.split(",").pop());c.places="0,"+d}c=this._parser(a,c);this.editOptions&&(this.focused&&isNaN(c))&&(c=this._parser(a,b));return c},_getDisplayedValueAttr:function(){var a=this.inherited(arguments);return isNaN(a)?this.textbox.value:a},filter:function(a){if(null==a||"string"==typeof a&&""==a)return NaN;"number"==typeof a&&(!isNaN(a)&&0!=a)&&(a=c.round(a,this._decimalInfo.places));
return this.inherited(arguments,[a])},serialize:function(a,b){return"number"!=typeof a||isNaN(a)?"":this.inherited(arguments)},_setBlurValue:function(){var a=e.hitch(e.delegate(this,{focused:!0}),"get")("value");this._setValueAttr(a,!0)},_setValueAttr:function(a,b,c){if(void 0!==a&&void 0===c)if(c=String(a),"number"==typeof a)if(isNaN(a))c="";else{if("rangeCheck"in this&&this.rangeCheck(a,this.constraints)||!1===this.constraints.exponent||!/\de[-+]?\d/i.test(c))c=void 0}else a?a=void 0:(c="",a=NaN);
this.inherited(arguments,[a,b,c])},_getValueAttr:function(){var a=this.inherited(arguments);if(isNaN(a)&&""!==this.textbox.value){if(!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)&&RegExp("^"+c._realNumberRegexp(e.delegate(this.constraints))+"$").test(this.textbox.value))return a=Number(this.textbox.value),isNaN(a)?void 0:a}else return a},isValid:function(a){if(!this.focused||this._isEmpty(this.textbox.value))return this.inherited(arguments);var b=this.get("value");return!isNaN(b)&&
this.rangeCheck(b,this.constraints)?!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)?!0:this.inherited(arguments):!1},_isValidSubset:function(){var a="number"==typeof this.constraints.min,b="number"==typeof this.constraints.max,c=this.get("value");if(isNaN(c)||!a&&!b)return this.inherited(arguments);var f=c|0,e=0>c,g=-1!=this.textbox.value.indexOf(this._decimalInfo.sep),h=(this.maxLength||20)-this.textbox.value.length,s=g?this.textbox.value.split(this._decimalInfo.sep)[1].replace(/[^0-9]/g,
""):"",f=g?f+"."+s:f+"",h=d.rep("9",h),g=c;e?g=Number(f+h):c=Number(f+h);return!(a&&c<this.constraints.min||b&&g>this.constraints.max)}});h=h("dijit.form.NumberTextBox",[b,f],{baseClass:"dijitTextBox dijitNumberTextBox"});h.Mixin=f;return h})},"dojo/number":function(){define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(h,e,g,d,c){var b={};h.setObject("dojo.number",b);b.format=function(a,c){c=h.mixin({},c||{});var d=e.normalizeLocale(c.locale),d=e.getLocalization("dojo.cldr",
"number",d);c.customs=d;d=c.pattern||d[(c.type||"decimal")+"Format"];return isNaN(a)||Infinity==Math.abs(a)?null:b._applyPattern(a,d,c)};b._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;b._applyPattern=function(a,c,d){d=d||{};var e=d.customs.group,g=d.customs.decimal;c=c.split(";");var h=c[0];c=c[0>a?1:0]||"-"+h;if(-1!=c.indexOf("%"))a*=100;else if(-1!=c.indexOf("\u2030"))a*=1E3;else if(-1!=c.indexOf("\u00a4"))e=d.customs.currencyGroup||e,g=d.customs.currencyDecimal||g,c=c.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/,
function(a,b,c,f){a=d[["symbol","currency","displayName"][c.length-1]]||d.currency||"";return!a?"":b+a+f});else if(-1!=c.indexOf("E"))throw Error("exponential notation not supported");var q=b._numberPatternRE,h=h.match(q);if(!h)throw Error("unable to find a number expression in pattern: "+c);!1===d.fractional&&(d.places=0);return c.replace(q,b._formatAbsolute(a,h[0],{decimal:g,group:e,places:d.places,round:d.round}))};b.round=function(a,b,c){c=10/(c||10);return(c*+a).toFixed(b)/c};if(0==(0.9).toFixed()){var a=
b.round;b.round=function(b,c,d){var e=Math.pow(10,-c||0),g=Math.abs(b);if(!b||g>=e)e=0;else if(g/=e,0.5>g||0.95<=g)e=0;return a(b,c,d)+(0<b?e:-e)}}b._formatAbsolute=function(a,c,e){e=e||{};!0===e.places&&(e.places=0);Infinity===e.places&&(e.places=6);c=c.split(".");var g="string"==typeof e.places&&e.places.indexOf(","),h=e.places;g?h=e.places.substring(g+1):0<=h||(h=(c[1]||[]).length);0>e.round||(a=b.round(a,h,e.round));a=String(Math.abs(a)).split(".");var m=a[1]||"";c[1]||e.places?(g&&(e.places=
e.places.substring(0,g)),g=void 0!==e.places?e.places:c[1]&&c[1].lastIndexOf("0")+1,g>m.length&&(a[1]=d.pad(m,g,"0",!0)),h<m.length&&(a[1]=m.substr(0,h))):a[1]&&a.pop();h=c[0].replace(",","");g=h.indexOf("0");-1!=g&&(g=h.length-g,g>a[0].length&&(a[0]=d.pad(a[0],g)),-1==h.indexOf("#")&&(a[0]=a[0].substr(a[0].length-g)));var h=c[0].lastIndexOf(","),q,r;-1!=h&&(q=c[0].length-h-1,c=c[0].substr(0,h),h=c.lastIndexOf(","),-1!=h&&(r=c.length-h-1));c=[];for(h=a[0];h;)g=h.length-q,c.push(0<g?h.substr(g):h),
h=0<g?h.slice(0,g):"",r&&(q=r,delete r);a[0]=c.reverse().join(e.group||",");return a.join(e.decimal||".")};b.regexp=function(a){return b._parseInfo(a).regexp};b._parseInfo=function(a){a=a||{};var d=e.normalizeLocale(a.locale),d=e.getLocalization("dojo.cldr","number",d),g=a.pattern||d[(a.type||"decimal")+"Format"],h=d.group,p=d.decimal,m=1;if(-1!=g.indexOf("%"))m/=100;else if(-1!=g.indexOf("\u2030"))m/=1E3;else{var q=-1!=g.indexOf("\u00a4");q&&(h=d.currencyGroup||h,p=d.currencyDecimal||p)}d=g.split(";");
1==d.length&&d.push("-"+d[0]);d=c.buildGroupRE(d,function(d){d="(?:"+c.escapeString(d,".")+")";return d.replace(b._numberPatternRE,function(c){var d={signed:!1,separator:a.strict?h:[h,""],fractional:a.fractional,decimal:p,exponent:!1};c=c.split(".");var e=a.places;1==c.length&&1!=m&&(c[1]="###");1==c.length||0===e?d.fractional=!1:(void 0===e&&(e=a.pattern?c[1].lastIndexOf("0")+1:Infinity),e&&void 0==a.fractional&&(d.fractional=!0),!a.places&&e<c[1].length&&(e+=","+c[1].length),d.places=e);c=c[0].split(",");
1<c.length&&(d.groupSize=c.pop().length,1<c.length&&(d.groupSize2=c.pop().length));return"("+b._realNumberRegexp(d)+")"})},!0);q&&(d=d.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(b,d,e,g){b=c.escapeString(a[["symbol","currency","displayName"][e.length-1]]||a.currency||"");if(!b)return"";d=d?"[\\s\\xa0]":"";g=g?"[\\s\\xa0]":"";return!a.strict?(d&&(d+="*"),g&&(g+="*"),"(?:"+d+b+g+")?"):d+b+g}));return{regexp:d.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:h,decimal:p,factor:m}};b.parse=function(a,
c){var d=b._parseInfo(c),e=RegExp("^"+d.regexp+"$").exec(a);if(!e)return NaN;var g=e[1];if(!e[1]){if(!e[2])return NaN;g=e[2];d.factor*=-1}g=g.replace(RegExp("["+d.group+"\\s\\xa0]","g"),"").replace(d.decimal,".");return g*d.factor};b._realNumberRegexp=function(a){a=a||{};"places"in a||(a.places=Infinity);"string"!=typeof a.decimal&&(a.decimal=".");if(!("fractional"in a)||/^0/.test(a.places))a.fractional=[!0,!1];"exponent"in a||(a.exponent=[!0,!1]);"eSigned"in a||(a.eSigned=[!0,!1]);var d=b._integerRegexp(a),
e=c.buildGroupRE(a.fractional,function(b){var c="";b&&0!==a.places&&(c="\\"+a.decimal,c=Infinity==a.places?"(?:"+c+"\\d+)?":c+("\\d{"+a.places+"}"));return c},!0),g=c.buildGroupRE(a.exponent,function(c){return c?"([eE]"+b._integerRegexp({signed:a.eSigned})+")":""}),d=d+e;e&&(d="(?:(?:"+d+")|(?:"+e+"))");return d+g};b._integerRegexp=function(a){a=a||{};"signed"in a||(a.signed=[!0,!1]);"separator"in a?"groupSize"in a||(a.groupSize=3):a.separator="";var b=c.buildGroupRE(a.signed,function(a){return a?
"[-+]":""},!0),d=c.buildGroupRE(a.separator,function(b){if(!b)return"(?:\\d+)";b=c.escapeString(b);" "==b?b="\\s":"\u00a0"==b&&(b="\\s\\xa0");var d=a.groupSize,e=a.groupSize2;return e?(b="(?:0|[1-9]\\d{0,"+(e-1)+"}(?:["+b+"]\\d{"+e+"})*["+b+"]\\d{"+d+"})",0<d-e?"(?:"+b+"|(?:0|[1-9]\\d{0,"+(d-1)+"}))":b):"(?:0|[1-9]\\d{0,"+(d-1)+"}(?:["+b+"]\\d{"+d+"})*)"},!0);return b+d};return b})},"dijit/form/RangeBoundTextBox":function(){define(["dojo/_base/declare","dojo/i18n","./MappedTextBox","dojo/i18n!./nls/validate"],
function(h,e,g){return h("dijit.form.RangeBoundTextBox",g,{rangeMessage:"",rangeCheck:function(d,c){return("min"in c?0<=this.compare(d,c.min):!0)&&("max"in c?0>=this.compare(d,c.max):!0)},isInRange:function(){return this.rangeCheck(this.get("value"),this.constraints)},_isDefinitelyOutOfRange:function(){var d=this.get("value");if(null==d)return!1;var c=!1;"min"in this.constraints&&(c=this.constraints.min,c=0>this.compare(d,"number"==typeof c&&0<=c&&0!=d?0:c));!c&&"max"in this.constraints&&(c=this.constraints.max,
c=0<this.compare(d,"number"!=typeof c||0<c?c:0));return c},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange()},isValid:function(d){return this.inherited(arguments)&&(this._isEmpty(this.textbox.value)&&!this.required||this.isInRange(d))},getErrorMessage:function(d){var c=this.get("value");return null!=c&&""!==c&&("number"!=typeof c||!isNaN(c))&&!this.isInRange(d)?this.rangeMessage:this.inherited(arguments)},postMixInProperties:function(){this.inherited(arguments);
this.rangeMessage||(this.messages=e.getLocalization("dijit.form","validate",this.lang),this.rangeMessage=this.messages.rangeMessage)}})})},"dijit/form/MappedTextBox":function(){define(["dojo/_base/declare","dojo/sniff","dojo/dom-construct","./ValidationTextBox"],function(h,e,g,d){return h("dijit.form.MappedTextBox",d,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting=""},_setNameAttr:"valueNode",serialize:function(c){return c.toString?c.toString():""},toString:function(){var c=
this.filter(this.get("value"));return null!=c?"string"==typeof c?c:this.serialize(c,this.constraints):""},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.valueNode=g.place("\x3cinput type\x3d'hidden'"+(this.name&&!e("msapp")?' name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"")+"/\x3e",this.textbox,"after")},reset:function(){this.valueNode.value="";this.inherited(arguments)}})})},"dijit/form/ValidationTextBox":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/i18n ./TextBox ../Tooltip dojo/text!./templates/ValidationTextBox.html dojo/i18n!./nls/validate".split(" "),
function(h,e,g,d,c,b,a){var f=h("dijit.form.ValidationTextBox",c,{templateString:a,required:!1,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(a,b){b!=f.prototype[a]&&(e.deprecated("ValidationTextBox id\x3d"+this.id+", set('"+a+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0"),this.set("pattern",b))},_setRegExpGenAttr:function(a){this._deprecateRegExp("regExpGen",
a);this._set("regExpGen",this._computeRegexp)},_setRegExpAttr:function(a){this._deprecateRegExp("regExp",a)},_setValueAttr:function(){this.inherited(arguments);this._refreshState()},validator:function(a,b){return RegExp("^(?:"+this._computeRegexp(b)+")"+(this.required?"":"?")+"$").test(a)&&(!this.required||!this._isEmpty(a))&&(this._isEmpty(a)||void 0!==this.parse(a,b))},_isValidSubset:function(){return 0==this.textbox.value.search(this._partialre)},isValid:function(){return this.validator(this.textbox.value,
this.get("constraints"))},_isEmpty:function(a){return(this.trim?/^\s*$/:/^$/).test(a)},getErrorMessage:function(){var a="$_unset_$"==this.invalidMessage?this.messages.invalidMessage:!this.invalidMessage?this.promptMessage:this.invalidMessage,b="$_unset_$"==this.missingMessage?this.messages.missingMessage:!this.missingMessage?a:this.missingMessage;return this.required&&this._isEmpty(this.textbox.value)?b:a},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(a){var b=
"",c=this.disabled||this.isValid(a);c&&(this._maskValidSubsetError=!0);var d=this._isEmpty(this.textbox.value),e=!c&&a&&this._isValidSubset();this._set("state",c?"":((!this._hasBeenBlurred||a)&&d||e)&&(this._maskValidSubsetError||e&&!this._hasBeenBlurred&&a)?"Incomplete":"Error");this.focusNode.setAttribute("aria-invalid","Error"==this.state?"true":"false");"Error"==this.state?(this._maskValidSubsetError=a&&e,b=this.getErrorMessage(a)):"Incomplete"==this.state?(b=this.getPromptMessage(a),this._maskValidSubsetError=
!this._hasBeenBlurred||a):d&&(b=this.getPromptMessage(a));this.set("message",b);return c},displayMessage:function(a){a&&this.focused?b.show(a,this.domNode,this.tooltipPosition,!this.isLeftToRight()):b.hide(this.domNode)},_refreshState:function(){this._created&&this.validate(this.focused);this.inherited(arguments)},constructor:function(a){this.constraints=g.clone(this.constraints);this.baseClass+=" dijitValidationTextBox"},startup:function(){this.inherited(arguments);this._refreshState()},_setConstraintsAttr:function(a){!a.locale&&
this.lang&&(a.locale=this.lang);this._set("constraints",a);this._refreshState()},_setPatternAttr:function(a){this._set("pattern",a);this._refreshState()},_computeRegexp:function(a){var b=this.pattern;"function"==typeof b&&(b=b.call(this,a));if(b!=this._lastRegExp){var c="";this._lastRegExp=b;".*"!=b&&b.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(a){switch(a.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":c+=a;break;case ")":c+="|$)";break;default:c+=
"(?:"+a+"|$)"}});try{"".search(c)}catch(d){c=this.pattern,console.warn("RegExp error in "+this.declaredClass+": "+this.pattern)}this._partialre="^(?:"+c+")$"}return b},postMixInProperties:function(){this.inherited(arguments);this.messages=d.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(a){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(a){this._set("required",a);this.focusNode.setAttribute("aria-required",
a);this._refreshState()},_setMessageAttr:function(a){this._set("message",a);this.displayMessage(a)},reset:function(){this._maskValidSubsetError=!0;this.inherited(arguments)},_onBlur:function(){this.displayMessage("");this.inherited(arguments)},destroy:function(){b.hide(this.domNode);this.inherited(arguments)}});return f})},"MW/rtc/plugins/language/matlab/section/SectionsList":function(){define("dojo/aspect dojo/_base/declare dojo/_base/lang dojo/Evented MW/rtc/plugins/language/matlab/section/Position MW/syntaxhighlighting/SyntaxHighlightingDataServiceFactory mw-utils/Utils".split(" "),
function(h,e,g,d,c,b,a){e=e([d],{constructor:function(a,c){this._internalDocument=a;this._document=c;this._dataService=b.getInstance();this._sections=[];h.after(this._dataService,"onSectionLocationUpdate",g.hitch(this,this._updateModel),!0)},_updateCells:function(){var a=this;clearTimeout(this._idleTimerID);this._idleTimerID=setTimeout(function(){a._serverRequest()},200)},_serverRequest:function(){this._requestID=a.generateUuid();var b=this._document.getCodeText(!0);this._dataService.updateData(b,
this._requestID,!0)},updateCells:function(){this._updateCells()},onUpdateModel:function(a,b,c,d){},getSections:function(){return this._sections},_updateModel:function(a,b,d,e){if(this._document.getText()===e&&d){var g;this._sections.forEach(function(a){a.startPosition.destroy();a.endPosition.destroy()});this._sections=[];var h=this._internalDocument.getMaxLineNumber()-1;0<b.length&&0<b[0]&&this._sections.push({startPosition:new c(0,0,this._internalDocument),endPosition:new c(h,this._getMaxColumnOnLine(h),
this._internalDocument)});for(g=0;g<b.length-1;g+=2){var q=b[g+1];this._sections.push({startPosition:new c(b[g],0,this._internalDocument),endPosition:new c(q,this._getMaxColumnOnLine(q),this._internalDocument)})}q=0;for(g=1;g<this._sections.length;g+=1)this._sections[g].endPosition.getRow()>this._sections[q].endPosition.getRow()&&(q=g);0<this._sections.length&&this._sections[q].endPosition.getRow()<h&&(g=this._sections[q],this._sections[q].startPosition.destroy(),this._sections[q].endPosition.destroy(),
this._sections[q]={startPosition:new c(g.startPosition.getRow(),0,this._internalDocument),endPosition:new c(h,this._getMaxColumnOnLine(h),this._internalDocument)});this.onUpdateModel(a,b,d,e);this.emit("sectionsChangedEvent")}},_getMaxColumnOnLine:function(a){return this._internalDocument.getLineNode(a).getText().length},getTextInLine:function(a){return this._internalDocument.getLineNode(a).getText()}});e.hasSectionTitle=function(a){var b=!0;a.match(/^\s*%%(\s|$)/)||(b=!1);return b};return e})},"MW/rtc/plugins/language/matlab/section/Position":function(){define(["dojo/_base/declare",
"dojo/aspect","dojo/_base/lang","MW/rtc/model/DocumentConstants"],function(h,e,g,d){return h(null,{constructor:function(c,b,a){this._row=c;this._column=b;0>this._column&&(this._column=0);this._connection=e.after(a,"onPreDocumentChanged",g.hitch(this,this._updatePosition),!0)},getRow:function(){return this._row},_updatePosition:function(c){if(c)if(c.type===d.INSERT_BREAK_EVENT){var b=c.line,a=c.column;if(this._row>b||this._row===b&&a<=this._column)this._row+=c.numberOfLines}else c.type===d.DELETION_EVENT&&
(b=c.startLine,c=c.endLine,a=c-b,0!==a&&(!(this._row<b)&&this._row!==b&&this._row>b)&&(this._row>c?this._row-=a:this._row<c?this._row=b:this._row===c&&(this._row-=a)))},destroy:function(){this._connection.remove()}})})},"MW/uiframework/UIBuilderFactory":function(){define(["./UIBuilder","mw-actiondataservice/ActionDataService"],function(h,e){var g={};return{getInstance:function(d){d=d||{};d.channel=d.channel||"/DefaultUIBuilderPeerModelChannel";d.enableQABCustomization=d.enableQABCustomization||!1;
g[d.channel]||(d.isMATLABDriven=!!d.isMATLABDriven,d.actionService=d.actionService||new e({nameSpace:d.channel+"_Action",mode:d.isMATLABDriven?"ActAsClient":"StandAlone"}),g[d.channel]=new h(d));return g[d.channel]},destroyInstance:function(d){d=d||"/DefaultUIBuilderPeerModelChannel";g[d]&&(g[d].cleanup(),delete g[d])}}})},"MW/uiframework/UIBuilder":function(){define("dojo/_base/declare dojo/_base/lang dijit/registry ./constants/TypeConstants ./managers/ModelManager ./managers/WidgetManager ./supportedUIBuilderFunctions".split(" "),
function(h,e,g,d,c,b,a){return h(null,{constructor:function(f){var h,l;h=new c(f);l=new b({modelManager:h});a.fromModelManager.forEach(function(a){this[a]=e.hitch(h,h[a])},this);a.fromWidgetManager.forEach(function(a){this[a]=e.hitch(l,l[a])},this);this.cleanup=function(){h.cleanup();l.cleanup()};f.manageTabGroupsOutsidePeerModel&&(this.add=function(a,b,c){var e=h.manager.getById(a);e&&e.getType()===d.TAB_GROUP?l.addOutsidePeerModel(a,b):h.add(a,b,c)},this.remove=function(a){var b=h.manager.getById(a);
b&&b.getType()===d.TAB_GROUP?l.removeOutsidePeerModel(a):h.remove(a)},this.get=function(a,b){if("selectedTab"===b&&h.manager.getById(a).getType()===d.TOOLSTRIP){var c=g.byId(a);return c?c.get(b):""}return h.get(a,b)},this.set=function(a,b,c){if("selectedTab"===b&&h.manager.getById(a).getType()===d.TOOLSTRIP)(a=g.byId(a))&&a.set(b,c);else return h.set(a,b,c)},this.getChildrenIds=function(a){if(h.manager.getById(a).getType()===d.TOOLSTRIP){a=g.byId(a).getChildren();var b=[];b.length=a.length;for(var c=
0;c<b.length;c++)b[c]=a[c].id;return b}return h.getChildrenIds(a)},this.isAnOrphan=function(a){return h.manager.getById(a).getType()===d.TAB?(a=g.byId(a),!(a&&a.getParent()&&a.getParent().getParent())):h.isAnOrphan(a)},this.selectFirstTabInTabGroup=function(a,b){var c=h.tagToPeerNodeIdMap[a];if(c&&(c=h.manager.getById(c))&&0<c.getChildren().length){var d=g.byId(b);d&&(d.set("selectedTab",""),d.set("selectedTab",c.getChildren()[0].getId()))}},this.addPropertySetCallback=function(a,b,c){return h.manager.getById(a).getType()===
d.TOOLSTRIP?(a=g.byId(a))?a.watch(function(a,c,d){b({property:a,oldValue:c,newValue:d})}):null:h.addPropertySetCallback(a,b,c)})}})})},"MW/uiframework/constants/TypeConstants":function(){define(["dojo/_base/lang","MW/toolstrip/constants/TypeConstants"],function(h,e){var g={ROOT:"Root",ORPHAN_ROOT:"OrphanRoot"};h.mixin(g,e);return g})},"MW/uiframework/managers/ModelManager":function(){define("dojo/_base/declare dojo/_base/lang dijit/registry dojo/dom dojo/dom-attr mw-peermodel/PeerModelManager mw-peermodel/_PeerModelListenerMixin ../constants/TypeConstants ../hashes/ComponentPropertiesHash ../hashes/IconPropertiesSupportingBase64 ../hashes/ComponentsWithNoParent MW/toolstrip/hashes/ComponentsSupportedByFooterCell MW/toolstrip/hashes/ComponentsEligibleForQAB MW/toolstrip/ToolstripUtils ../../toolstrip/hashes/listOfNewWidgets MW/toolstrip/hashes/DefaultGalleryItemWidths mw-log/Log".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t){return h([a],{constructor:function(a){a=a||{};this.isMATLABDriven=a.isMATLABDriven;this._channel=a.channel;this.actionService=a.actionService;this.enableQABCustomization=a.enableQABCustomization;this._autoGeneratedActions={};this.tagToPeerNodeIdMap={};this._typeToRootNodeMap={};this._setupPeerModelManager()},_setupPeerModelManager:function(){var a;this.manager=b.getInstance(this._channel);this.addManagerListeners();this.isMATLABDriven?this.start():(this._root=
this.manager.setRoot(f.ROOT),this._root.addChild(f.ORPHAN_ROOT),this._root.addChild(f.TOOLSTRIP_ROOT),this._root.addChild(f.POPUP_ROOT),this._root.addChild(f.QAB_ROOT),a=this._root.addChild(f.GALLERY_ROOT),a.addChild(f.GALLERY_POPUP_ROOT),a.addChild(f.GALLERY_FAVORITE_CATEGORY_ROOT))},create:function(a){var b,c,d,f;this._supportBase64URL(a);c=e.clone(a);d=c.parentId;b=this._verifyProperties(c);if(q.supportsAction(a.type))if(a.actionId){if(f=this.actionService.getAction(a.actionId))this._supportBase64URL(f),
this._convertPopupTagToId(f),Object.keys(k[a.type]).forEach(function(c){k[a.type][c].notInAction||this._isAValidValue(f[c],k[a.type][c],k[a.type])||(f[c]=b.actionNodeProps[c])},this),this.actionService.updateAction(a.actionId,f)}else b.viewNodeProps.actionId=this.actionService.addAction(b.actionNodeProps),this._autoGeneratedActions[b.viewNodeProps.actionId]=!0;c=this._getCorrespondingParentNode(b.type,d);q.isAFooterCell(c.getType())&&-1===p.indexOf(a.type)&&t.error(a.type+" is not supported by Footer Cell");
c=c.addChild(b.type,b.viewNodeProps,null,a.originator||null);"Toolstrip"===b.type&&d&&this.placeToolstripById(c.getId(),d);this._postProcessing(c);return c.getId()},_getCorrespondingParentNode:function(a,b){var c;switch(a){case f.TOOLSTRIP:c=this._getRootNodeByType(f.TOOLSTRIP_ROOT);break;case f.QAB:c=this._getRootNodeByType(f.QAB_ROOT);break;case f.POPUP_LIST:c=this.exists(b)?this.manager.getById(b):this._getRootNodeByType(f.POPUP_ROOT);break;case f.GALLERY_POPUP:c=this._getRootNodeByType(f.GALLERY_POPUP_ROOT);
break;case f.GALLERY_FAVORITE_CATEGORY:c=this._getRootNodeByType(f.GALLERY_FAVORITE_CATEGORY_ROOT);break;default:c=this.exists(b)?this.manager.getById(b):this._getRootNodeByType(f.ORPHAN_ROOT)}return c},_findAncestorTabGroupId:function(a){for(;this.get(a,"type")!==f.TAB_GROUP;)if(null===a||this._root===this.manager.getById(a)){a=null;break}else a=this.getParentId(a);return a},_createCorrespondingComponentInQAB:function(a,b){var c=this._findAncestorTabGroupId(a);if(null!==c){var c=this.get(c,"QAGroupId"),
d=this.get(a,"actionId"),e=this.get(a,"tag")+"_qab",h=[];this.manager.getByType(f.QA_GROUP).forEach(function(a){h=h.concat(this.manager.getByProperty("actionId",d,a))},this);if(0===h.length)a=this.create({type:m[this.get(a,"type")],tag:e,actionId:d,parentId:c}),b&&this.move(a,c,0),this._hookupRemoveFromQABListener(a);else{var k=this.manager.getByProperty("tag","motwToolstrip.globalTabGroup_qaGroup")[0],l=g.byId(h[0].getId()),n=h[0].getParent()!==k,l=l&&l._globalised,q=this.manager.getById(c)===k;
if(void 0!=k&&(n||l&&q))this.destroy(h[0].getId()),a=this.create({type:m[this.get(a,"type")],tag:e,actionId:d,parentId:k.getId()}),q||(g.byId(a)._globalised=!0),b&&this.move(a,c,0),this._hookupRemoveFromQABListener(a)}return a}},_hookupAddToQABListener:function(a){var b=this.get(a,"actionId");this.actionService._actionById(b).addEventListener("propertySet",function(b){"isInQAB"===b.data.key&&!0===b.data.newValue&&this._createCorrespondingComponentInQAB(a,!0)},this)},_hookupRemoveFromQABListener:function(a){var b=
this.get(a,"actionId");this.actionService._actionById(b).addEventListener("propertySet",function(b){"isInQAB"===b.data.key&&!1===b.data.newValue&&this.exists(a)&&this.destroy(a)},this)},_postProcessing:function(a){var b,c;-1<Object.keys(m).indexOf(a.getType())&&(this._hookupAddToQABListener(a.getId()),!0===this.get(a.getId(),"isInQAB")&&this._createCorrespondingComponentInQAB(a.getId()));switch(a.getType()){case f.TOOLSTRIP:b=this.create({type:f.QAB});this.set(a.getId(),"QABId",b);break;case f.TAB_GROUP:c=
a.getParent();c.getType()===f.TOOLSTRIP&&(b=c.getProperty("QABId"));c=this.get(a.getId(),"tag");b=this.create({type:f.QA_GROUP,parentId:b,tag:c?c+"_qaGroup":""});this.set(a.getId(),"QAGroupId",b);break;case f.GALLERY_POPUP:b=this.create({type:f.GALLERY_FAVORITE_CATEGORY});this.set(a.getId(),"favCategoryId",b);break;case f.GALLERY:this.set(a.getId(),"currentColumnCount",this.get(a.getId(),"maxColumnCount"));break;case f.GALLERY_CATEGORY:this.addEventCallback(a.getId(),function(b){if("categoryMoved"===
b.eventType&&-1<["Top","Bottom"].indexOf(b.action))switch(a.setProperty("animation",{shouldAnimate:!0,startId:"",endId:""}),b.action){case "Top":this.manager.move(a,a.getParent(),0);break;case "Bottom":this.manager.move(a,a.getParent(),a.getParent().getNumberOfChildren()-1)}"itemMoved"===b.eventType&&this.manager.move(this.manager.getById(b.itemId),a,b.newIndex)},this);break;case f.QA_GROUP:case f.GALLERY_FAVORITE_CATEGORY:this.addEventCallback(a.getId(),function(b){"itemMoved"===b.eventType&&this.manager.move(this.manager.getById(b.itemId),
a,b.newIndex)},this);break;case f.GALLERY_ITEM:case f.TOGGLE_GALLERY_ITEM:this.addEventCallback(a.getId(),function(b){var c;"favButtonPushed"===b.eventType&&(b=a.getProperty("tag"),c=a.getProperty("actionId"),(c=this.actionService.getAction(c).isFavorite)?this.removeGalleryItemFromFavorites(b,!0,a.getId()):this.addGalleryItemToFavorites(b,!0,a.getId()))},this)}},addGalleryItemToFavorites:function(a,b,c){var d,e,g;b=b?!0:!1;if(g=this._peerNodeByTag(a,this._getRootNodeByType(f.GALLERY_POPUP_ROOT)))e=
g.getParent(),a=g.getProperty("actionId"),d=this.actionService.getAction(a).isFavorite,d||(d=e.getParent().getProperty("favCategoryId"),this.create({type:g.getType(),tag:g.getProperty("tag"),actionId:a,parentId:d,removable:g.getProperty("removable"),animation:{shouldAnimate:b,startId:c?c:g.getId(),endId:""},originator:"addGalleryItemToFavorites"}),this.actionService.updateAction(a,{isFavorite:!0}))},removeGalleryItemFromFavorites:function(a,b,c){var d,e,g,h;b=b?!0:!1;this.exists(c)&&(g=this.manager.getById(c));
if(a=this._peerNodeByTag(a,this._getRootNodeByType(f.GALLERY_POPUP_ROOT)))if(g=g?g.getParent():a.getParent(),a=a.getProperty("actionId"),d=this.actionService.getAction(a).isFavorite)g.getType()===f.GALLERY_FAVORITE_CATEGORY?(e=g.getId(),h=this.manager.getByProperty("actionId",a,this.manager.getByProperty("favCategoryId",e,this._getRootNodeByType(f.GALLERY_POPUP_ROOT))[0])[0].getId()):g.getType()===f.GALLERY_CATEGORY&&(e=g.getParent().getProperty("favCategoryId"),h=c),c=this.manager.getByProperty("actionId",
a,this.manager.getById(e))[0],c.setProperty("animation",{shouldAnimate:b,startId:"",endId:h}),this.destroy(c.getId()),this.actionService.updateAction(a,{isFavorite:!1})},add:function(a,b,c){var d,e;if(this._getRootNodeByType(f.ORPHAN_ROOT).hasDescendant(a))if(d=this.manager.getById(a),e=this.manager.getById(b),t.assert(e,"The parentId provided is not valid!"),"FooterCell"===e._type&&-1===p.indexOf(d._type))t.warn(d._type+" is not supported by Footer Cell");else{if(0>c||c>e.getChildren().length)c=
e.getChildren().length;this.manager.move(d,e,c);this.get(a,"type")===f.TAB_GROUP&&this.get(b,"type")===f.TOOLSTRIP&&(a=this.get(a,"QAGroupId"),b=this.get(b,"QABId"),this.add(a,b,this.manager.getById(b).getNumberOfChildren()-c));if("Column"===e.getType()){var h;for(c=e.getParent();c&&"Toolstrip"!==c.getType();)"Tab"===c.getType()&&(h=c),c=c.getParent();if(h){var k;h.getId()&&(k=g.byId(h.getId()));k&&k.selected&&(h=c.getId())&&g.byId(h).resize()}}}else t.assert(!1,"The child being added should be an orphan!")},
remove:function(a){var b;this.exists(a)?(b=this.manager.getById(a),this.manager.move(b,this._getRootNodeByType(f.ORPHAN_ROOT)),this.get(a,"type")===f.TAB_GROUP&&this.remove(this.get(a,"QAGroupId"))):t.assert(!1,"The node does not exist!")},destroy:function(a){var b;this.exists(a)?(a=this.manager.getById(a),b=a.getProperty("actionId"),"GalleryItem"===a._type&&(a.getParent()&&"GalleryFavoriteCategory"!==a.getParent()._type)&&this.removeGalleryItemFromFavorites(a._properties.tag,!1,a._id),a.destroy(),
this._autoGeneratedActions[b]&&0===this.manager.getByProperty("actionId",b).length&&(this.actionService.removeAction(b),delete this._autoGeneratedActions[b])):t.assert(!1,"The node does not exist!")},get:function(a,b){var c,d;if(this.exists(a))return c=this.manager.getById(a),"type"===b?d=c.getType():k[c.getType()][b].notInAction?(t.assert(c.hasProperty(b),"This is not a valid property!"),d=c.getProperty(b)):q.supportsAction(c.getType())?(c=c.getProperty("actionId"),t.assert(this.actionService.actionHasProperty(c,
b),"This is not a valid property!"),d=this.actionService.getAction(c)[b]):t.assert(!1,"This is not a valid property!"),d;t.assert(!1,"The node does not exist!")},getChildrenIds:function(a){if(this.exists(a))return a=this.manager.getById(a),a.getChildren().map(function(a){return a.getId()});t.assert(!1,"The node does not exist!")},exists:function(a){return this.manager.hasById(a)},indexOf:function(a){var b=-1,c;c=this.manager.getById(a);this.getParentId(a)&&(b=c.getParent().getChildIndex(c));return b},
isAnOrphan:function(a){return this._getRootNodeByType(f.ORPHAN_ROOT).hasDescendant(a)},getParentId:function(a){var b;if(!this.exists(a))return t.assert(!1,"A component with the given id does not exist!"),null;b=this.manager.getById(a);return!this._getRootNodeByType(f.ORPHAN_ROOT).hasChild(a)&&-1===n.indexOf(b.getType())?b.getParent().getId():null},set:function(a,b,c,d){var e,f={};this.exists(a)?(a=this.manager.getById(a),e=k[a.getType()],e[b]&&this._isAValidValue(c,e[b],b)&&(e[b].notInAction?a.setProperty(b,
c,d):q.supportsAction(a.getType())?(a=a.getProperty("actionId"),f[b]=c,this.actionService.updateAction(a,f,d)):t.assert(!1,"This is not a valid property!"))):t.assert(!1,"The node does not exist!")},move:function(a,b,c){a=this.manager.getById(a);t.assert(a,"The node being moved does not exist!");b=this.manager.getById(b);t.assert(b,"The new parent node does not exist!");if(0>c||c>b.getChildren().length)c=b.getChildren().length;this.manager.move(a,b,c)},getAllProperties:function(a){var b,c,d;b=this.manager.getById(a);
c=b.getProperties();if(q.supportsAction(b.getType())&&(a=b.getProperty("actionId")))(d=this.actionService.getAction(a))&&Object.keys(d).forEach(e.hitch(this,function(a){k[b.getType()][a]||delete d[a]})),c=e.mixin(c,d);return c},_supportBase64URL:function(a){var b;Object.keys(l).forEach(e.hitch(this,function(c){c in a&&(b=a[c],"string"===typeof b&&0===b.indexOf("url(")&&(a[c]=this._stripURL(b)))}))},_stripURL:function(a){a=a.slice(4);return a.slice(0,a.length-1)},_verifyProperties:function(a){var b=
{},c,d,e={viewNodeProps:{},actionNodeProps:{}};t.assert(a.type,"Type needs to be provided for all components!");c=k[a.type];e.type=a.type;this._convertPopupTagToId(a);Object.keys(c).forEach(function(d){this._isAValidValue(a[d],c[d],d)?b[d]=a[d]:c[d].required?t.error(d+" needs to be provided for component of type "+a.type):b[d]=c[d].defaultValue},this);Object.keys(b).forEach(function(a){c[a].notInAction?e.viewNodeProps[a]=b[a]:e.actionNodeProps[a]=b[a]});e.type===f.GALLERY_POPUP?e.viewNodeProps.galleryItemWidth||
(e.viewNodeProps.galleryItemWidth=s[e.viewNodeProps.galleryItemRowCount][e.viewNodeProps.galleryItemTextLineCount]):e.type===f.GALLERY&&(d=this.manager.getById(e.viewNodeProps.galleryPopupId),e.viewNodeProps.galleryItemWidth=d.getProperty("galleryItemWidth"),e.viewNodeProps.galleryItemRowCount=d.getProperty("galleryItemRowCount"),e.viewNodeProps.galleryItemTextLineCount=d.getProperty("galleryItemTextLineCount"),e.viewNodeProps.scrollToSelection=d.getProperty("scrollToSelection"));return e},_convertPopupTagToId:function(a){var b,
c={},d={popupTag:"popupId",galleryPopupTag:"galleryPopupId"};Object.keys(d).forEach(function(e){b=d[e];a[e]&&((e=this.tagToId(a[e]))&&(a[b]=e),c[b]=a[b],c[b]&&this.actionService.updateAction(a.id,c))},this)},_isAValidValue:function(a,b,c){var d,e=!0;void 0===a||null===a?e=!1:"Array"===b.type?Array.isArray(a)||(t.warn(c+" property default type is "+b.type+" but you have passed "+typeof a),e=!1):(d=b.type.toLowerCase(),typeof a!==d&&(e=!1,a=Array.isArray(a)?"Array":typeof a,t.warn(c+" property default type is "+
b.type+" but you have passed "+a)));return e},selectTab:function(a){var b;this.tagToPeerNodeIdMap[a]&&(a=this.manager.getById(this.tagToPeerNodeIdMap[a]),b=a.getParent(),this._widgetByPeerNode(b).set("selectedTab",a.getId()))},selectFirstTabInTabGroup:function(a){if(this.tagToPeerNodeIdMap[a]&&(a=this.manager.getById(this.tagToPeerNodeIdMap[a]))&&0<a.getChildren().length)this.set(this.getParentId(a.getId()),"selectedTab",""),this.set(this.getParentId(a.getId()),"selectedTab",a.getChildren()[0].getId())},
placeToolstripAt:function(a,b){var c=this.widgetByTag(a);c.placeAt(b);c.startup()},placeToolstripById:function(a,b){var c=this.widgetById(a);c.placeAt(b);c.startup()},widgetByTag:function(a){return g.byId(this.tagToId(a))},widgetById:function(a){return g.byId(a)},_widgetByPeerNode:function(a){return g.byId(a.getId().toString())},_peerNodeByTag:function(a,b){b=b||this._getRootNodeByType(f.ROOT);return this.manager.getByProperty("tag",a,b)[0]},showPopup:function(a,b){var e=g.byId(a.toString());e&&d.byId(c.get(e.domNode,
"widgetid"))&&(-1<r.indexOf(e.type)?(b&&e.set("menuId",b),e.showMenu()):(e.set("popupId",b),q.isAListItemWithPopup(e.get("type"))?e.getParent().hover_timer=e.getParent().defer(function(){e.getParent()._openItemPopup(e)},e.getParent().popupDelay):e.toggleDropDown()))},addEventCallback:function(a,b,c){var d,e,f,g;t.assert(this.exists(a),"The node does not exist!");d=this.manager.getById(a);e=function(a){delete a.data.type;b.call(c||d.getProperties(),a.data)};d.addEventListener("peerEvent",e,c);q.supportsAction(d.getType())&&
(a=d.getProperty("actionId"),f=this.actionService._actionById(a),g=function(a){delete a.data.type;b.call(c||f.getProperties(),a.data)},f.addEventListener("peerEvent",g,c));return{remove:function(){d.removeEventListener("peerEvent",e,c);q.supportsAction(d.getType())&&f.removeEventListener("peerEvent",g,c)}}},addPropertySetCallback:function(a,b,c){var d,e,f,g=this;t.assert(this.exists(a),"The node does not exist!");e=this.manager.getById(a);f=function(a){a.originator&&"UI"===a.originator.source&&b.call(c||
e.getProperties(),{property:a.data.key,oldValue:a.data.oldValue,newValue:a.data.newValue})};a=function(a,d){d&&"UI"===d.source&&b.call(c,a)};e.addEventListener("propertySet",f,c);q.supportsAction(e.getType())&&(d=e.getProperty("actionId"),this.actionService.addActionChangeCallback(d,a,c));return{remove:function(){e.removeEventListener("propertySet",f,c);q.supportsAction(e.getType())&&g.actionService.removeActionChangeCallback(d)}}},tagToId:function(a){if(a)return this.tagToPeerNodeIdMap[a]},createPopupsFromConfig:function(a){a.popups.forEach(function(a){this._addConfigItem(a)},
this)},createGalleryPopupFromConfig:function(a){this._addConfigItem(a)},addToolstripFromConfig:function(a){this.create(a)},addTabGroupFromConfig:function(a,b,c){this._addConfigItem(this._findInConfig(a,b),c)},_addConfigItem:function(a,b){g.byId(a.id)?this.add(a.id,a.parentId):(b&&(a.parentId=this.tagToId(b)),a.id=this.create(a),a.children&&this._addChildren(a.id,a.children))},_addChildren:function(a,b){b.forEach(function(b){b.parentId=a;this._addConfigItem(b)},this)},_findInConfig:function(a,b){function c(a,
b){a.tag===b?d=a:a.children&&a.children.forEach(function(a){c(a,b)})}var d;c(a,b);return d},cleanup:function(){this.isMATLABDriven||this._getRootNodeByType(f.ROOT).destroy();this.actionService.destroy();b.cleanup(this._channel)},_getRootNodeByType:function(a){var b=null;if(this._typeToRootNodeMap[a])b=this._typeToRootNodeMap[a];else{var c=this.manager.getByType(a);c&&(b=c[0]);this._typeToRootNodeMap[a]=b}return b},getAllCategoriesInDescendingOrder:function(a){var b=[];a=a.getChildren();for(var c=
a.pop();c;)b.push(c),c=a.pop();return b},getGalleryState:function(a){var b,c=[],d;a=this.tagToId(a);d={items:{tags:[],isFavorite:[]},categories:{tags:[]}};if(this.exists(a))return a=this.manager.getById(a),b=this.manager.getById(a.getProperty("favCategoryId")),b=b.getChildren(),a.getChildren().forEach(function(a){a.getChildren().forEach(function(a){c.push(a)})}),b.concat(c).forEach(function(a){var b;b=a.getProperty("actionId");a=a.getProperty("tag");b=this.actionService.getAction(b).isFavorite;-1===
d.items.tags.indexOf(a)&&(d.items.tags.push(a),d.items.isFavorite.push(b))},this),d.categories.tags=a.getChildren().map(function(a){return a.getProperty("tag")}),a.setProperty("state",d),d;t.assert(!1,"The node does not exist!")},setGalleryState:function(a,b){var c,d,e,f,g,h,k=0,l=this.tagToId(a);this.exists(l)?(c=this.manager.getById(l),f=c.getProperty("favCategoryId"),g=this.manager.getById(f),g.getChildren().forEach(function(a){-1!==b.items.tags.indexOf(a.getProperty("tag"))&&(this.actionService.updateAction(a.getProperty("actionId"),
{isFavorite:!1}),a.destroy())},this),b.items.tags.forEach(function(a,e){var g;b.items.isFavorite[e]&&(d=this.manager.getByProperty("tag",a,c),0<d.length&&(h=d[0].getProperty("actionId"),g=this.create({type:d[0].getType(),tag:a,actionId:h}),this.add(g,f,k),k+=1,this.actionService.updateAction(h,{isFavorite:!0})))},this),b.categories.tags.forEach(function(a,b){e=this.tagToId(a);this.exists(e)&&this.move(e,l,b)},this)):t.assert(!1,"The node does not exist!")},getQABState:function(a){var b=[];a=this.get(this.tagToId(a),
"QABId");this.getChildrenIds(a).forEach(function(a){this.getChildrenIds(a).forEach(function(a){var c={};c.tag=this.get(a,"tag");c.showText=this.get(a,"showText");b.push(c)},this)},this);return b},setQABState:function(a,b,c){this.get(this.tagToId(a),"QABId");if(!Array.isArray(b)&&void 0!==b){var d=[];Object.keys(b).forEach(function(a){var c={};c.tag=a;c.showText=b[a].showText;d.push(c)});b=d}void 0===b||0===b.length?c.forEach(function(a){a=this.create(a);this.set(a,"isInQAB",!0);this._hookupRemoveFromQABListener(a)},
this):b.forEach(function(a){var b=a.tag,d=!1,e=!!a.showText;c.forEach(function(a){a.tag===b&&(d=!0,a.showText=e,a=this.create(a),this.set(a,"isInQAB",!0),this._hookupRemoveFromQABListener(a))},this);if(!d)if(a=b.replace("_qab",""),a=this.tagToId(a),-1<Object.keys(m).indexOf(this.get(a,"type"))&&!1===this.get(a,"isInQAB")){var f=this._createCorrespondingComponentInQAB(a);this.set(f,"showText",e);this.set(a,"isInQAB",!0)}else(a=this.tagToId(b))&&this.set(a,"showText",e)},this)}})})},"MW/uiframework/hashes/ComponentPropertiesHash":function(){define("dojo/_base/lang MW/toolstrip/hashes/componentproperties/containers/ToolstripProperties MW/toolstrip/hashes/componentproperties/containers/QABProperties MW/toolstrip/hashes/componentproperties/containers/QAGroupProperties MW/toolstrip/hashes/componentproperties/containers/TabGroupProperties MW/toolstrip/hashes/componentproperties/containers/TabProperties MW/toolstrip/hashes/componentproperties/containers/ColumnProperties MW/toolstrip/hashes/componentproperties/containers/SectionProperties MW/toolstrip/hashes/componentproperties/containers/PanelProperties MW/toolstrip/hashes/componentproperties/containers/FooterProperties MW/toolstrip/hashes/componentproperties/containers/FooterCellProperties MW/toolstrip/hashes/componentproperties/controls/PushButtonProperties MW/toolstrip/hashes/componentproperties/controls/ToggleButtonProperties MW/toolstrip/hashes/componentproperties/controls/DropDownButtonProperties MW/toolstrip/hashes/componentproperties/controls/SplitButtonProperties MW/toolstrip/hashes/componentproperties/controls/ToggleSplitButtonProperties MW/toolstrip/hashes/componentproperties/controls/ColorPickerButtonProperties MW/toolstrip/hashes/componentproperties/controls/GridPickerButtonProperties MW/toolstrip/hashes/componentproperties/controls/QABPushButtonProperties MW/toolstrip/hashes/componentproperties/controls/QABDropDownButtonProperties MW/toolstrip/hashes/componentproperties/controls/QABFloatingPaneDockProperties MW/toolstrip/hashes/componentproperties/controls/QABSplitButtonProperties MW/toolstrip/hashes/componentproperties/controls/QABToggleButtonProperties MW/toolstrip/hashes/componentproperties/controls/QABToggleSplitButtonProperties MW/toolstrip/hashes/componentproperties/controls/ComboBoxProperties MW/toolstrip/hashes/componentproperties/controls/ListProperties MW/toolstrip/hashes/componentproperties/controls/PopupListProperties MW/toolstrip/hashes/componentproperties/controls/PopupListPanelProperties MW/toolstrip/hashes/componentproperties/controls/PopupListHeaderProperties MW/toolstrip/hashes/componentproperties/controls/PopupListSeparatorProperties MW/toolstrip/hashes/componentproperties/controls/TextAreaProperties MW/toolstrip/hashes/componentproperties/controls/TextFieldProperties MW/toolstrip/hashes/componentproperties/controls/HorizontalSliderProperties MW/toolstrip/hashes/componentproperties/controls/SpinnerProperties MW/toolstrip/hashes/componentproperties/controls/RadioButtonProperties MW/toolstrip/hashes/componentproperties/controls/CheckBoxProperties MW/toolstrip/hashes/componentproperties/controls/LabelProperties MW/toolstrip/hashes/componentproperties/controls/EmptyControlProperties MW/toolstrip/hashes/componentproperties/controls/MenuBarWrapperProperties MW/toolstrip/hashes/componentproperties/controls/ToolBarWrapperProperties MW/toolstrip/hashes/componentproperties/controls/GalleryProperties MW/toolstrip/hashes/componentproperties/controls/GalleryPopupProperties MW/toolstrip/hashes/componentproperties/controls/GalleryCategoryProperties MW/toolstrip/hashes/componentproperties/controls/GalleryFavoriteCategoryProperties MW/toolstrip/hashes/componentproperties/controls/GalleryItemProperties MW/toolstrip/hashes/componentproperties/controls/ToggleGalleryItemProperties MW/toolstrip/hashes/componentproperties/controls/ListItemProperties MW/toolstrip/hashes/componentproperties/controls/ListItemWithCheckBoxProperties MW/toolstrip/hashes/componentproperties/controls/ListItemWithRadioButtonProperties MW/toolstrip/hashes/componentproperties/controls/ListItemWithTextFieldProperties MW/toolstrip/hashes/componentproperties/controls/ListItemWithPopupProperties".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,B,F,G,H,I,K,C,M,Q,L,N,J,O,T,W,S,R,ea,Y,$,da,ga,V,aa,oa,fa,z,X,D){var ba={};Array.prototype.slice.call(arguments).forEach(function(a,b){0<b&&h.mixin(ba,a)});return ba})},"MW/toolstrip/hashes/componentproperties/containers/ToolstripProperties":function(){define(["dojo/_base/lang","../../../constants/TypeConstants","../../../constants/DisplayStateConstants","../properties/TypeProperty","../properties/TagProperty"],function(h,e,g,d,c){var b={};b[e.TOOLSTRIP]=
h.mixin({displayState:{type:"string",notInAction:!0,defaultValue:g.EXPANDED},QABId:{type:"string",notInAction:!0,defaultValue:""},selectedTab:{type:"String",notInAction:!0,defaultValue:""}},d,c);return b})},"MW/toolstrip/constants/DisplayStateConstants":function(){define([],function(){return{COLLAPSED:"collapsed",EXPANDED:"expanded",EXPANDED_ON_TOP:"expanded_on_top"}})},"MW/toolstrip/hashes/componentproperties/properties/TypeProperty":function(){define(["./VerifyComponentProperty"],function(h){return{type:new h({type:"string",
defaultValue:"",notInAction:!0,required:!0})}})},"MW/toolstrip/hashes/componentproperties/properties/VerifyComponentProperty":function(){define(["mw-log/Log"],function(h){return function(e){e=e||{};"string"!==typeof e.type&&h.error(e.type,"Type property is required");"boolean"!==typeof e.notInAction&&h.error(e.notInAction,"NotInAction property is required");"boolean"!==typeof e.required&&h.error(e.required,"Required property is required");void 0===e.defaultValue&&h.error(e.defaultValue,"DefaultValue  property is required");
return e}})},"MW/toolstrip/hashes/componentproperties/properties/TagProperty":function(){define(["./VerifyComponentProperty"],function(h){return{tag:new h({type:"string",defaultValue:"",notInAction:!0,required:!1})}})},"MW/toolstrip/hashes/componentproperties/containers/QABProperties":function(){define(["dojo/_base/lang","../../../constants/TypeConstants","../properties/TypeProperty","../properties/TagProperty"],function(h,e,g,d){var c={};c[e.QAB]=h.mixin({},g,d);return c})},"MW/toolstrip/hashes/componentproperties/containers/QAGroupProperties":function(){define(["dojo/_base/lang",
"../../../constants/TypeConstants","../properties/TypeProperty","../properties/TagProperty"],function(h,e,g,d){var c={};c[e.QA_GROUP]=h.mixin({},g,d);return c})},"MW/toolstrip/hashes/componentproperties/containers/TabGroupProperties":function(){define(["dojo/_base/lang","../../../constants/TypeConstants","../properties/TypeProperty","../properties/TagProperty"],function(h,e,g,d){var c={};c[e.TAB_GROUP]=h.mixin({selectedTab:{type:"string",notInAction:!0,defaultValue:""},QAGroupId:{type:"string",notInAction:!0,
defaultValue:""}},g,d);return c})},"MW/toolstrip/hashes/componentproperties/containers/TabProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/TitleProperty ../properties/MnemonicProperty ../properties/RemovableProperty ../properties/RemoveMessageProperty".split(" "),function(h,e,g,d,c,b,a,f){var k={};k[e.TAB]=h.mixin({},g,d,c,b,a,f);return k})},"MW/toolstrip/hashes/componentproperties/properties/TitleProperty":function(){define(["./VerifyComponentProperty"],
function(h){return{title:new h({type:"string",notInAction:!0,defaultValue:"",required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/MnemonicProperty":function(){define(["./VerifyComponentProperty"],function(h){return{mnemonic:new h({type:"string",notInAction:!0,defaultValue:"",required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/RemovableProperty":function(){define(["./VerifyComponentProperty"],function(h){return{removable:new h({type:"boolean",defaultValue:!1,notInAction:!0,
required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/RemoveMessageProperty":function(){define(["./VerifyComponentProperty"],function(h){return{removeMessage:new h({type:"string",defaultValue:"",notInAction:!0,required:!1})}})},"MW/toolstrip/hashes/componentproperties/containers/ColumnProperties":function(){define(["dojo/_base/lang","../../../constants/TypeConstants","../../../constants/AlignmentConstants","../properties/TypeProperty","../properties/TagProperty"],function(h,e,g,d,
c){var b={};b[e.COLUMN]=h.mixin({horizontalAlignment:{type:"string",notInAction:!0,defaultValue:g.LEFT},width:{type:"number",notInAction:!0,defaultValue:0},extraColumnGap:{type:"boolean",notInAction:!0,defaultValue:!1}},d,c);return b})},"MW/toolstrip/constants/AlignmentConstants":function(){define([],function(){return{LEFT:"left",RIGHT:"right",CENTER:"center"}})},"MW/toolstrip/hashes/componentproperties/containers/SectionProperties":function(){define(["dojo/_base/lang","../../../constants/TypeConstants",
"../properties/TypeProperty","../properties/TagProperty","../properties/TitleProperty"],function(h,e,g,d,c){var b={};b[e.SECTION]=h.mixin({collapsePriority:{type:"number",notInAction:!0,defaultValue:0}},g,d,c);return b})},"MW/toolstrip/hashes/componentproperties/containers/PanelProperties":function(){define(["dojo/_base/lang","../../../constants/TypeConstants","../properties/TypeProperty","../properties/TagProperty"],function(h,e,g,d){var c={};c[e.PANEL]=h.mixin({},g,d);return c})},"MW/toolstrip/hashes/componentproperties/containers/FooterProperties":function(){define(["dojo/_base/lang",
"../../../constants/TypeConstants","../properties/TypeProperty","../properties/TagProperty"],function(h,e,g,d){var c={};c[e.FOOTER]=h.mixin({},g,d);return c})},"MW/toolstrip/hashes/componentproperties/containers/FooterCellProperties":function(){define(["dojo/_base/lang","../../../constants/TypeConstants","../properties/TypeProperty","../properties/TagProperty"],function(h,e,g,d){var c={};c[e.FOOTER_CELL]=h.mixin({},g,d);return c})},"MW/toolstrip/hashes/componentproperties/controls/PushButtonProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/IconProperty ../properties/QuickAccessIconProperty ../properties/IconOverrideProperty ../properties/TextProperty ../properties/TextOverrideProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/IsInQABProperty".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s){var t={};t[e.PUSH_BUTTON]=h.mixin({},g,d,c,b,a,f,k,l,n,p,m,q,r,s);return t})},"MW/toolstrip/hashes/componentproperties/properties/IconProperty":function(){define(["./VerifyComponentProperty"],function(h){return{icon:new h({type:"string",notInAction:!1,defaultValue:"",required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/QuickAccessIconProperty":function(){define(["./VerifyComponentProperty"],function(h){return{quickAccessIcon:new h({type:"string",
notInAction:!1,defaultValue:"",required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/IconOverrideProperty":function(){define(["./VerifyComponentProperty"],function(h){return{iconOverride:new h({type:"string",notInAction:!0,defaultValue:"",required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/TextProperty":function(){define(["./VerifyComponentProperty"],function(h){return{text:new h({type:"string",defaultValue:"",notInAction:!1,required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/TextOverrideProperty":function(){define(["./VerifyComponentProperty"],
function(h){return{textOverride:new h({type:"string",defaultValue:"",notInAction:!0,required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/EnabledProperty":function(){define(["./VerifyComponentProperty"],function(h){return{enabled:new h({type:"boolean",shouldBeFlipped:!0,notInAction:!1,defaultValue:!0,required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/DescriptionProperty":function(){define(["./VerifyComponentProperty"],function(h){return{description:new h({type:"string",
notInAction:!1,defaultValue:"",required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/DescriptionOverrideProperty":function(){define(["./VerifyComponentProperty"],function(h){return{descriptionOverride:new h({type:"string",notInAction:!0,defaultValue:"",required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/ShortcutProperty":function(){define(["./VerifyComponentProperty"],function(h){return{shortcut:new h({type:"string",notInAction:!1,defaultValue:"",required:!1})}})},
"MW/toolstrip/hashes/componentproperties/properties/ActionIdProperty":function(){define(["./VerifyComponentProperty"],function(h){return{actionId:new h({type:"string",notInAction:!0,defaultValue:"",required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/IsInQABProperty":function(){define(["./VerifyComponentProperty"],function(h){return{isInQAB:new h({type:"boolean",notInAction:!1,defaultValue:!1,required:!1})}})},"MW/toolstrip/hashes/componentproperties/controls/ToggleButtonProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/IconProperty ../properties/QuickAccessIconProperty ../properties/IconOverrideProperty ../properties/TextProperty ../properties/TextOverrideProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/IsInQABProperty ../properties/SelectedProperty ../properties/ButtonGroupNameProperty ../properties/AllowDeselectionInButtonGroupProperty".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v){var w={};w[e.TOGGLE_BUTTON]=h.mixin({},g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v);return w})},"MW/toolstrip/hashes/componentproperties/properties/SelectedProperty":function(){define(["./VerifyComponentProperty"],function(h){return{selected:new h({type:"boolean",notInAction:!1,defaultValue:!1,required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/ButtonGroupNameProperty":function(){define(["./VerifyComponentProperty"],function(h){return{buttonGroupName:new h({type:"string",
defaultValue:"",required:!1,notInAction:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/AllowDeselectionInButtonGroupProperty":function(){define(["./VerifyComponentProperty"],function(h){return{allowDeselectionInButtonGroup:new h({type:"boolean",defaultValue:!1,required:!1,notInAction:!1})}})},"MW/toolstrip/hashes/componentproperties/controls/DropDownButtonProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/IconProperty ../properties/QuickAccessIconProperty ../properties/IconOverrideProperty ../properties/TextProperty ../properties/TextOverrideProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/IsInQABProperty ../properties/PopupIdProperty ../properties/PreventRestoreFocusProperty ../properties/HasDynamicPopupProperty ../properties/ErrorTextProperty ../properties/WarningTextProperty ../properties/ValidationStateProperty".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A){var B={};B[e.DROP_DOWN_BUTTON]=h.mixin({},g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A);return B})},"MW/toolstrip/hashes/componentproperties/properties/PopupIdProperty":function(){define(["./VerifyComponentProperty"],function(h){return{popupId:new h({type:"string",notInAction:!1,defaultValue:"",required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/PreventRestoreFocusProperty":function(){define(["./VerifyComponentProperty"],function(h){return{preventRestoreFocus:new h({type:"boolean",
defaultValue:!1,notInAction:!1,required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/HasDynamicPopupProperty":function(){define(["./VerifyComponentProperty"],function(h){return{hasDynamicPopup:new h({type:"boolean",notInAction:!1,defaultValue:!1,required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/ErrorTextProperty":function(){define(["./VerifyComponentProperty"],function(h){return{errorText:new h({type:"string",notInAction:!1,defaultValue:"This component is in error state",
required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/WarningTextProperty":function(){define(["./VerifyComponentProperty"],function(h){return{warningText:new h({type:"string",notInAction:!1,defaultValue:"This component is in Warning state",required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/ValidationStateProperty":function(){define(["./VerifyComponentProperty"],function(h){return{validationState:new h({type:"string",notInAction:!1,defaultValue:"normal",required:!1})}})},
"MW/toolstrip/hashes/componentproperties/controls/SplitButtonProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/IconProperty ../properties/QuickAccessIconProperty ../properties/IconOverrideProperty ../properties/TextProperty ../properties/TextOverrideProperty ../properties/EnabledProperty ../properties/DropDownAlwaysEnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/IsInQABProperty ../properties/PopupIdProperty ../properties/PreventRestoreFocusProperty ../properties/HasDynamicPopupProperty ../properties/ErrorTextProperty ../properties/WarningTextProperty ../properties/ValidationStateProperty".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,B){var F={};F[e.SPLIT_BUTTON]=h.mixin({},g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,B);return F})},"MW/toolstrip/hashes/componentproperties/properties/DropDownAlwaysEnabledProperty":function(){define(["./VerifyComponentProperty"],function(h){return{dropDownAlwaysEnabled:new h({type:"boolean",shouldBeFlipped:!1,notInAction:!1,defaultValue:!1,required:!1})}})},"MW/toolstrip/hashes/componentproperties/controls/ToggleSplitButtonProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/IconProperty ../properties/QuickAccessIconProperty ../properties/IconOverrideProperty ../properties/TextProperty ../properties/TextOverrideProperty ../properties/EnabledProperty ../properties/DropDownAlwaysEnabledProperty ../properties/SelectedProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/IsInQABProperty ../properties/PopupIdProperty ../properties/PreventRestoreFocusProperty ../properties/HasDynamicPopupProperty ../properties/ErrorTextProperty ../properties/WarningTextProperty ../properties/ValidationStateProperty ../properties/ButtonGroupNameProperty ../properties/AllowDeselectionInButtonGroupProperty".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,B,F,G,H){var I={};I[e.TOGGLE_SPLIT_BUTTON]=h.mixin({},g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,B,F,G,H);return I})},"MW/toolstrip/hashes/componentproperties/controls/ColorPickerButtonProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/IconProperty ../properties/QuickAccessIconProperty ../properties/IconOverrideProperty ../properties/TextProperty ../properties/TextOverrideProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/IsInQABProperty".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s){var t={};t[e.COLOR_PICKER_BUTTON]=h.mixin({},{selectedColor:{type:"string",defaultValue:"#ff0000",notInAction:!0,required:!1},closeOnColorSelection:{type:"boolean",defaultValue:!0,notInAction:!0,required:!1},autoColor:{type:"string",defaultValue:"#000000",notInAction:!0,required:!1},displayView:{type:"string",defaultValue:"standard",notInAction:!0,required:!1},showAuto:{type:"boolean",defaultValue:!1,notInAction:!0,required:!1},showNone:{type:"boolean",defaultValue:!1,
notInAction:!0,required:!1},showFlat:{type:"boolean",defaultValue:!1,notInAction:!0,required:!1},showInterp:{type:"boolean",defaultValue:!1,notInAction:!0,required:!1},showTexturemap:{type:"boolean",defaultValue:!1,notInAction:!0,required:!1}},g,d,c,b,a,f,k,l,n,p,m,q,r,s);return t})},"MW/toolstrip/hashes/componentproperties/controls/GridPickerButtonProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/IconProperty ../properties/IconOverrideProperty ../properties/QuickAccessIconProperty ../properties/TextProperty ../properties/TextOverrideProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/ActionIdProperty ../properties/IsInQABProperty".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q){var r={};r[e.GRID_PICKER_BUTTON]=h.mixin({},{maxRows:{type:"number",defaultValue:5,notInAction:!0,required:!1},maxColumns:{type:"number",defaultValue:5,notInAction:!0,required:!1},occupancy:{type:"number",defaultValue:0,notInAction:!0,required:!1},fillOrder:{type:"string",defaultValue:"rowMajor",notInAction:!0,required:!1},selection:{type:"Object",defaultValue:{},notInAction:!0,required:!1}},g,d,c,b,a,f,k,l,n,p,m,q);return r})},"MW/toolstrip/hashes/componentproperties/controls/QABPushButtonProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/QuickAccessIconProperty ../properties/TextProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/IsInQABProperty ../properties/ShowTextProperty".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m){var q={};q[e.QAB_PUSH_BUTTON]=h.mixin({},g,d,c,b,a,f,k,l,n,p,m);return q})},"MW/toolstrip/hashes/componentproperties/properties/ShowTextProperty":function(){define(["./VerifyComponentProperty"],function(h){return{showText:new h({type:"boolean",defaultValue:!1,notInAction:!0,required:!1})}})},"MW/toolstrip/hashes/componentproperties/controls/QABDropDownButtonProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/QuickAccessIconProperty ../properties/TextProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/IsInQABProperty ../properties/PopupIdProperty ../properties/PreventRestoreFocusProperty ../properties/HasDynamicPopupProperty ../properties/ShowTextProperty".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s){var t={};t[e.QAB_DROP_DOWN_BUTTON]=h.mixin({},g,d,c,b,a,f,k,l,n,p,m,q,r,s);return t})},"MW/toolstrip/hashes/componentproperties/controls/QABFloatingPaneDockProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/QuickAccessIconProperty ../properties/TextProperty ../properties/TextOverrideProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/IsInQABProperty ../properties/PopupIdProperty ../properties/HasDynamicPopupProperty ../properties/ShowTextProperty".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t){var u={};u[e.QAB_FLOATING_PANE_DOCK]=h.mixin({},g,d,c,b,a,f,k,l,n,p,m,q,r,s,t);return u})},"MW/toolstrip/hashes/componentproperties/controls/QABSplitButtonProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/QuickAccessIconProperty ../properties/TextProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/IsInQABProperty ../properties/PopupIdProperty ../properties/PreventRestoreFocusProperty ../properties/HasDynamicPopupProperty ../properties/ShowTextProperty".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s){var t={};t[e.QAB_SPLIT_BUTTON]=h.mixin({},g,d,c,b,a,f,k,l,n,p,m,q,r,s);return t})},"MW/toolstrip/hashes/componentproperties/controls/QABToggleButtonProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/QuickAccessIconProperty ../properties/TextProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/IsInQABProperty ../properties/SelectedProperty ../properties/ButtonGroupNameProperty ../properties/ShowTextProperty".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r){var s={};s[e.QAB_TOGGLE_BUTTON]=h.mixin({},g,d,c,b,a,f,k,l,n,p,m,q,r);return s})},"MW/toolstrip/hashes/componentproperties/controls/QABToggleSplitButtonProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/QuickAccessIconProperty ../properties/TextProperty ../properties/EnabledProperty ../properties/SelectedProperty ../properties/DescriptionProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/IsInQABProperty ../properties/PopupIdProperty ../properties/PreventRestoreFocusProperty ../properties/HasDynamicPopupProperty ../properties/ErrorTextProperty ../properties/WarningTextProperty ../properties/ValidationStateProperty ../properties/ButtonGroupNameProperty ../properties/ShowTextProperty".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x){var A={};A[e.QAB_TOGGLE_SPLIT_BUTTON]=h.mixin({},g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x);return A})},"MW/toolstrip/hashes/componentproperties/controls/ComboBoxProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/TextProperty ../properties/ItemsProperty ../properties/PlaceholderTextProperty ../properties/ErrorTextProperty ../properties/WarningTextProperty ../properties/ValidationStateProperty".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s){var t={};t[e.COMBO_BOX]=h.mixin({},{selectedItem:{type:"string",defaultValue:"",notInAction:!1,required:!1},editable:{type:"boolean",notInAction:!1,defaultValue:!1,required:!1},footerId:{type:"string",notInAction:!0,required:!1,defaultValue:""}},g,d,c,b,a,f,k,l,n,p,m,q,r,s);return t})},"MW/toolstrip/hashes/componentproperties/properties/ItemsProperty":function(){define(["./VerifyComponentProperty"],function(h){return{items:new h({type:"Array",notInAction:!1,
defaultValue:[],required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/PlaceholderTextProperty":function(){define(["./VerifyComponentProperty"],function(h){return{placeholderText:new h({type:"string",notInAction:!1,defaultValue:"",required:!1})}})},"MW/toolstrip/hashes/componentproperties/controls/ListProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/CompactProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/ItemsProperty ../properties/ErrorTextProperty ../properties/WarningTextProperty ../properties/ValidationStateProperty".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r){var s={};s[e.LIST]=h.mixin({},{selectedItems:{type:"Array",defaultValue:[],notInAction:!1,required:!1},selectionMode:{type:"string",defaultValue:"single",notInAction:!1,required:!1}},g,d,c,b,a,f,k,l,n,p,m,q,r);return s})},"MW/toolstrip/hashes/componentproperties/properties/CompactProperty":function(){define(["./VerifyComponentProperty"],function(h){return{compact:new h({type:"boolean",notInAction:!0,defaultValue:!1,required:!1})}})},"MW/toolstrip/hashes/componentproperties/controls/PopupListProperties":function(){define(["dojo/_base/lang",
"../../../constants/TypeConstants","../properties/TypeProperty","../properties/TagProperty"],function(h,e,g,d){var c={};c[e.POPUP_LIST]=h.mixin({},{maxHeight:{type:"number",defaultValue:600,notInAction:!0,required:!1}},g,d);return c})},"MW/toolstrip/hashes/componentproperties/controls/PopupListPanelProperties":function(){define(["dojo/_base/lang","../../../constants/TypeConstants","../properties/TypeProperty","../properties/TagProperty"],function(h,e,g,d){var c={};c[e.POPUP_LIST_PANEL]=h.mixin({},
{maxHeight:{type:"number",defaultValue:100,notInAction:!0,required:!1}},g,d);return c})},"MW/toolstrip/hashes/componentproperties/controls/PopupListHeaderProperties":function(){define(["dojo/_base/lang","../../../constants/TypeConstants","../properties/TypeProperty","../properties/TagProperty","../properties/TitleProperty"],function(h,e,g,d,c){var b={};b[e.POPUP_LIST_HEADER]=h.mixin({},g,d,c);return b})},"MW/toolstrip/hashes/componentproperties/controls/PopupListSeparatorProperties":function(){define(["dojo/_base/lang",
"../../../constants/TypeConstants","../properties/TypeProperty","../properties/TagProperty"],function(h,e,g,d){var c={};c[e.POPUP_LIST_SEPARATOR]=h.mixin({},g,d);return c})},"MW/toolstrip/hashes/componentproperties/controls/TextAreaProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/TextProperty ../properties/EditableProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/CompactProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/ErrorTextProperty ../properties/WarningTextProperty ../properties/ValidationStateProperty".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s){var t={};t[e.TEXT_AREA]=h.mixin({},{},g,d,c,b,a,f,k,l,n,p,m,q,r,s);return t})},"MW/toolstrip/hashes/componentproperties/properties/EditableProperty":function(){define(["./VerifyComponentProperty"],function(h){return{editable:new h({type:"boolean",notInAction:!1,defaultValue:!0,required:!1})}})},"MW/toolstrip/hashes/componentproperties/controls/TextFieldProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/TextProperty ../properties/EditableProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/PlaceholderTextProperty ../properties/ErrorTextProperty ../properties/WarningTextProperty ../properties/ValidationStateProperty".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s){var t={};t[e.TEXT_FIELD]=h.mixin({},{},g,d,c,b,a,f,k,l,n,p,m,q,r,s);return t})},"MW/toolstrip/hashes/componentproperties/controls/HorizontalSliderProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/ValueProperty ../properties/MinimumProperty ../properties/MaximumProperty ../properties/ErrorTextProperty ../properties/WarningTextProperty ../properties/ValidationStateProperty".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s){var t={};t[e.HORIZONTAL_SLIDER]=h.mixin({},{value:{type:"number",defaultValue:5,notInAction:!1,required:!1},minimum:{type:"number",defaultValue:-10,notInAction:!1,required:!1},maximum:{type:"number",defaultValue:10,notInAction:!1,required:!1},steps:{type:"number",defaultValue:10,notInAction:!1,required:!1},numberOfTicks:{type:"number",defaultValue:10,notInAction:!1,required:!1},labels:{type:"Array",notInAction:!1,required:!1,defaultValue:[]}},g,d,c,b,a,f,
k,l,n,p,m,q,r,s);return t})},"MW/toolstrip/hashes/componentproperties/properties/ValueProperty":function(){define(["./VerifyComponentProperty"],function(h){return{value:new h({notInAction:!1,type:"number",defaultValue:5,required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/MinimumProperty":function(){define(["./VerifyComponentProperty"],function(h){return{minimum:new h({type:"number",notInAction:!1,defaultValue:-20,required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/MaximumProperty":function(){define(["./VerifyComponentProperty"],
function(h){return{maximum:new h({type:"number",notInAction:!1,defaultValue:20,required:!1})}})},"MW/toolstrip/hashes/componentproperties/controls/SpinnerProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/ValueProperty ../properties/MinimumProperty ../properties/MaximumProperty ../properties/ErrorTextProperty ../properties/WarningTextProperty ../properties/ValidationStateProperty MW/toolstrip/hashes/listOfNewWidgets".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t){var u={};u[e.SPINNER]=h.mixin({},{editable:{type:"boolean",defaultValue:!1,notInAction:!1,required:!1},minorStepSize:{type:"number",defaultValue:5,notInAction:!1,required:!1},majorStepSize:{type:"number",defaultValue:10,notInAction:!1,required:!1},errorText:{type:"string",notInAction:!1,defaultValue:"The value entered is not in range",required:!1}},-1===t.indexOf(e.SPINNER)?{}:{format:{type:"string",defaultValue:"",notInAction:!0,required:!1}},g,d,c,b,a,
f,k,l,n,p,m,q,r,s);return u})},"MW/toolstrip/hashes/componentproperties/controls/RadioButtonProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/TextProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/SelectedProperty ../properties/ButtonGroupNameProperty ../properties/ErrorTextProperty ../properties/WarningTextProperty ../properties/ValidationStateProperty".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s){var t={};t[e.RADIO_BUTTON]=h.mixin({},g,d,c,b,a,f,k,l,n,p,m,q,r,s);return t})},"MW/toolstrip/hashes/componentproperties/controls/CheckBoxProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/TextProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/SelectedProperty ../properties/ErrorTextProperty ../properties/WarningTextProperty ../properties/ValidationStateProperty".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r){var s={};s[e.CHECK_BOX]=h.mixin({},g,d,c,b,a,f,k,l,n,p,m,q,r);return s})},"MW/toolstrip/hashes/componentproperties/controls/LabelProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/TextProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/IconProperty".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p){var m={};m[e.LABEL]=h.mixin({},g,d,c,b,a,f,k,l,n,p);return m})},"MW/toolstrip/hashes/componentproperties/controls/EmptyControlProperties":function(){define(["dojo/_base/lang","../../../constants/TypeConstants","../properties/TypeProperty","../properties/TagProperty"],function(h,e,g,d){var c={};c[e.EMPTY_CONTROL]=h.mixin({},g,d);return c})},"MW/toolstrip/hashes/componentproperties/controls/MenuBarWrapperProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty".split(" "),
function(h,e,g,d,c,b,a,f,k,l){var n={};n[e.MENUBAR_WRAPPER]=h.mixin({},{},g,d,c,b,a,f,k,l);return n})},"MW/toolstrip/hashes/componentproperties/controls/ToolBarWrapperProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty".split(" "),
function(h,e,g,d,c,b,a,f,k,l){var n={};n[e.TOOLBAR_WRAPPER]=h.mixin({},g,d,c,b,a,f,k,l);return n})},"MW/toolstrip/hashes/componentproperties/controls/GalleryProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/EnabledProperty ../properties/GalleryItemRowCountProperty ../properties/GalleryItemTextLineCountProperty ../properties/GalleryItemWidthProperty ../properties/ScrollToSelectionProperty ../properties/HideDisabledItemsProperty ../properties/MnemonicProperty ../properties/OpenIfEmptyProperty".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p){c={};c[e.GALLERY]=h.mixin({},{galleryPopupId:{type:"string",notInAction:!0,required:!0},minColumnCount:{type:"number",notInAction:!0,required:!1,defaultValue:3},maxColumnCount:{type:"number",notInAction:!0,defaultValue:7},currentColumnCount:{type:"number",notInAction:!0,required:!1,defaultValue:7},textOverlay:{type:"string",notInAction:!0,required:!1,defaultValue:""},displayState:{type:"string",notInAction:!0,required:!1,defaultValue:"normal"},shouldRefresh:{type:"boolean",
notInAction:!0,defaultValue:!0,required:!1},enabled:{type:"boolean",shouldBeFlipped:!0,notInAction:!0,defaultValue:!0,required:!1}},g,d,b,a,f,k,l,n,p);return c})},"MW/toolstrip/hashes/componentproperties/properties/GalleryItemRowCountProperty":function(){define(["./VerifyComponentProperty"],function(h){return{galleryItemRowCount:new h({type:"number",notInAction:!0,defaultValue:1,required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/GalleryItemTextLineCountProperty":function(){define(["./VerifyComponentProperty"],
function(h){return{galleryItemTextLineCount:new h({type:"number",notInAction:!0,defaultValue:2,required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/GalleryItemWidthProperty":function(){define(["./VerifyComponentProperty"],function(h){return{galleryItemWidth:new h({type:"number",notInAction:!0,defaultValue:0,required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/ScrollToSelectionProperty":function(){define(["./VerifyComponentProperty"],function(h){return{scrollToSelection:new h({type:"boolean",
notInAction:!0,defaultValue:!1,required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/HideDisabledItemsProperty":function(){define(["./VerifyComponentProperty"],function(h){return{hideDisabledItems:new h({type:"boolean",notInAction:!0,defaultValue:!0,required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/OpenIfEmptyProperty":function(){define(["./VerifyComponentProperty"],function(h){return{openIfEmpty:new h({type:"boolean",defaultValue:!0,notInAction:!0,required:!1})}})},
"MW/toolstrip/hashes/componentproperties/controls/GalleryPopupProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/GalleryItemRowCountProperty ../properties/GalleryItemTextLineCountProperty ../properties/GalleryItemWidthProperty ../properties/DisplayStateProperty ../properties/ScrollToSelectionProperty ../properties/DndEnabledProperty dojo/i18n!l10n/nls/toolstrip".split(" "),function(h,e,g,d,c,b,a,f,k,l,
n){var p={};p[e.GALLERY_POPUP]=h.mixin({},{columnCount:{type:"number",notInAction:!0,required:!1,defaultValue:0},favCategoryId:{type:"string",notInAction:!0,required:!1,defaultValue:""},footerId:{type:"string",notInAction:!0,required:!1,defaultValue:""},placeholderText:{type:"string",notInAction:!0,required:!1,defaultValue:n.gallerySearch},showHeader:{type:"boolean",notInAction:!0,required:!1,defaultValue:!0},userCustomizable:{type:"boolean",notInAction:!0,required:!1,defaultValue:!0}},g,d,c,b,a,
f,k,l);return p})},"MW/toolstrip/hashes/componentproperties/properties/DisplayStateProperty":function(){define(["../../../constants/gallery/GalleryViewConstants","./VerifyComponentProperty"],function(h,e){return{displayState:new e({type:"string",notInAction:!0,defaultValue:h.ICON,required:!1})}})},"MW/toolstrip/constants/gallery/GalleryViewConstants":function(){define([],function(){return{ICON:"icon_view",LIST:"list_view"}})},"MW/toolstrip/hashes/componentproperties/properties/DndEnabledProperty":function(){define(["./VerifyComponentProperty"],
function(h){return{dndEnabled:new h({type:"boolean",notInAction:!0,defaultValue:!1,required:!1})}})},"MW/toolstrip/hashes/componentproperties/controls/GalleryCategoryProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/TitleProperty ../properties/DisplayStateProperty ../properties/AnimationProperty ../properties/HideWhenEmptyProperty ../properties/DndEnabledProperty ../properties/IconProperty".split(" "),
function(h,e,g,d,c,b,a,f,k,l){var n={};n[e.GALLERY_CATEGORY]=h.mixin({},g,d,c,b,a,f,k,l);return n})},"MW/toolstrip/hashes/componentproperties/properties/AnimationProperty":function(){define(["./VerifyComponentProperty"],function(h){return{animation:new h({type:"object",notInAction:!0,defaultValue:{shouldAnimate:!1,startId:"",endId:""},required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/HideWhenEmptyProperty":function(){define(["./VerifyComponentProperty"],function(h){return{hideWhenEmpty:new h({type:"boolean",
notInAction:!0,defaultValue:!0,required:!1})}})},"MW/toolstrip/hashes/componentproperties/controls/GalleryFavoriteCategoryProperties":function(){define(["dojo/_base/lang","../../../constants/TypeConstants","../properties/TypeProperty","../properties/TagProperty","../properties/DisplayStateProperty"],function(h,e,g,d,c){var b={};b[e.GALLERY_FAVORITE_CATEGORY]=h.mixin({},{title:{type:"string",notInAction:!0,required:!1,defaultValue:"FAVORITES"}},g,d,c);return b})},"MW/toolstrip/hashes/componentproperties/controls/GalleryItemProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/DisplayStateProperty ../properties/IconProperty ../properties/TextProperty ../properties/TextOverrideProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/AnimationProperty ../properties/ClosePopupOnClickProperty ../properties/RemovableProperty ../properties/RemoveMessageProperty".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u){var v={};v[e.GALLERY_ITEM]=h.clone(h.mixin({},{isFavorite:{type:"boolean",defaultValue:!1,notInAction:!1,required:!1}},g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u));v[e.GALLERY_ITEM].closePopupOnClick.defaultValue=!0;return v})},"MW/toolstrip/hashes/componentproperties/properties/ClosePopupOnClickProperty":function(){define(["./VerifyComponentProperty"],function(h){return{closePopupOnClick:new h({type:"boolean",notInAction:!1,defaultValue:!1,required:!1})}})},"MW/toolstrip/hashes/componentproperties/controls/ToggleGalleryItemProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/DisplayStateProperty ../properties/SelectedProperty ../properties/IconProperty ../properties/TextProperty ../properties/TextOverrideProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/AnimationProperty ../properties/ButtonGroupNameProperty ../properties/ClosePopupOnClickProperty ../properties/RemovableProperty ../properties/RemoveMessageProperty ../properties/AllowDeselectionInButtonGroupProperty".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x){var A={};A[e.TOGGLE_GALLERY_ITEM]=h.clone(h.mixin({},{isFavorite:{type:"boolean",defaultValue:!1,notInAction:!1,required:!1}},g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x));A[e.TOGGLE_GALLERY_ITEM].closePopupOnClick.defaultValue=!0;return A})},"MW/toolstrip/hashes/componentproperties/controls/ListItemProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/IconProperty ../properties/IconOverrideProperty ../properties/TextProperty ../properties/TextOverrideProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/ShowDescriptionProperty ../properties/QuickAccessIconProperty ../properties/UseQuickAccessIconProperty ../properties/RemovableProperty".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u){var v={};v[e.LIST_ITEM]=h.mixin({},{showIcon:{type:"boolean",defaultValue:!0,notInAction:!0,required:!1},showText:{type:"boolean",defaultValue:!0,notInAction:!0,required:!1}},g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u);return v})},"MW/toolstrip/hashes/componentproperties/properties/ShowDescriptionProperty":function(){define(["./VerifyComponentProperty"],function(h){return{showDescription:new h({type:"boolean",defaultValue:!0,notInAction:!0,required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/UseQuickAccessIconProperty":function(){define(["./VerifyComponentProperty"],
function(h){return{useQuickAccessIcon:new h({type:"boolean",notInAction:!0,defaultValue:!1,required:!1})}})},"MW/toolstrip/hashes/componentproperties/controls/ListItemWithCheckBoxProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/TextProperty ../properties/TextOverrideProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/ShowDescriptionProperty ../properties/SelectedProperty ../properties/ClosePopupOnClickProperty".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r){var s={};s[e.LIST_ITEM_WITH_CHECKBOX]=h.mixin({},{showText:{type:"boolean",defaultValue:!0,notInAction:!0,required:!1}},g,d,c,b,a,f,k,l,n,p,m,q,r);return s})},"MW/toolstrip/hashes/componentproperties/controls/ListItemWithRadioButtonProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/TextProperty ../properties/TextOverrideProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/ShowDescriptionProperty ../properties/SelectedProperty ../properties/ClosePopupOnClickProperty ../properties/ButtonGroupNameProperty".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s){var t={};t[e.LIST_ITEM_WITH_RADIO_BUTTON]=h.mixin({},{showText:{type:"boolean",defaultValue:!0,notInAction:!0,required:!1}},g,d,c,b,a,f,k,l,n,p,m,q,r,s);return t})},"MW/toolstrip/hashes/componentproperties/controls/ListItemWithTextFieldProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/TextProperty ../properties/TextOverrideProperty ../properties/EnabledProperty ../properties/EditableProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/PlaceholderTextProperty ../properties/ErrorTextProperty ../properties/WarningTextProperty ../properties/ValidationStateProperty".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r){var s={};s[e.LIST_ITEM_WITH_TEXTFIELD]=h.mixin({},{label:{type:"string",defaultValue:"",notInAction:!1,required:!1}},g,d,c,b,a,f,k,l,n,p,m,q,r);return s})},"MW/toolstrip/hashes/componentproperties/controls/ListItemWithPopupProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/TextProperty ../properties/TextOverrideProperty ../properties/IconProperty ../properties/IconOverrideProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/ShowDescriptionProperty ../properties/HasDynamicPopupProperty ../properties/QuickAccessIconProperty ../properties/UseQuickAccessIconProperty".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u){var v={};v[e.LIST_ITEM_WITH_POPUP]=h.mixin({},{popupId:{type:"string",defaultValue:"",notInAction:!1,required:!1},showIcon:{type:"boolean",defaultValue:!0,notInAction:!0,required:!1,description:"Using this you can toggle the visibility of the icon on the list item."},showText:{type:"boolean",defaultValue:!0,notInAction:!0,required:!1}},g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u);return v})},"MW/uiframework/hashes/IconPropertiesSupportingBase64":function(){define({icon:!0,
iconClass:!0,quickAccessIcon:!0})},"MW/uiframework/hashes/ComponentsWithNoParent":function(){define(["../constants/TypeConstants"],function(h){return[h.TOOLSTRIP,h.POPUP_LIST,h.GALLERY_POPUP,h.GALLERY_FAVORITE_CATEGORY]})},"MW/toolstrip/hashes/ComponentsSupportedByFooterCell":function(){define(["../constants/TypeConstants"],function(h){return[h.PUSH_BUTTON,h.TOGGLE_BUTTON,h.RADIO_BUTTON,h.TEXT_FIELD,h.LABEL,h.CHECK_BOX]})},"MW/toolstrip/hashes/ComponentsEligibleForQAB":function(){define(["../constants/TypeConstants"],
function(h){var e={};e[h.PUSH_BUTTON]=h.QAB_PUSH_BUTTON;e[h.DROP_DOWN_BUTTON]=h.QAB_DROP_DOWN_BUTTON;e[h.SPLIT_BUTTON]=h.QAB_SPLIT_BUTTON;e[h.TOGGLE_BUTTON]=h.QAB_TOGGLE_BUTTON;e[h.TOGGLE_SPLIT_BUTTON]=h.QAB_TOGGLE_SPLIT_BUTTON;return e})},"MW/toolstrip/ToolstripUtils":function(){define("dijit/registry dojo/_base/kernel dojo/_base/window dojo/dom-geometry dojo/dom-construct ./constants/TypeConstants ./hashes/ComponentsThatDontSupportAction ./hashes/PeerNodeTypesWithNoCorrespondingWidget ./hashes/ComponentsThatSupportAnimation".split(" "),
function(h,e,g,d,c,b,a,f,k){return{isGalleryPopupAttachedWithGallery:function(a){return a.domNode.classList.contains("gallery")},isAPopupList:function(a){return a===b.POPUP_LIST},isAListItemWithPopup:function(a){return a===b.LIST_ITEM_WITH_POPUP},isAMenubarWrapper:function(a){return a===b.MENUBAR_WRAPPER},isAToolbarWrapper:function(a){return a===b.TOOLBAR_WRAPPER},isAColumn:function(a){return a===b.COLUMN},isAPanel:function(a){return a===b.PANEL},supportsAction:function(b){return-1===a.indexOf(b)},
isAFooterCell:function(a){return a===b.FOOTER_CELL},hasNoCorrespondingWidget:function(a){return-1<f.indexOf(a)},supportsAnimation:function(a){return-1<k.indexOf(a)},findParent:function(a,b){for(var c=null,d;a;){d=null;if(a.get("type")===b){c=a;break}a.domNode.parentNode&&(d=a.domNode.parentNode.getAttribute("dijitpopupparent"));a=d?h.byId(d):a.getParent()}return c},findParentToolstrip:function(a){return this.findParent(a,b.TOOLSTRIP)},findParentSection:function(a){return this.findParent(a,b.SECTION)},
getClosestValue:function(a,b){for(var c=-1,d=a.length,e;1<d-c;)e=Math.round((c+d)/2),a[e]<=b?c=e:d=e;a[c]===b&&(d=c);return[a[c],a[d]]},computeWidth:function(a,b,c){return parseInt(this._computeStyle(a,null,b,c).width)},computeHeight:function(a,b,c){return parseInt(this._computeStyle(a,b,null,c).height)},_computeStyle:function(a,b,d,e){null==b&&(b="auto");null==d&&(d="auto");null==e&&(e="");e=-1<["ko","ko-kr","ja-jp","zh-cn"].indexOf((navigator.language||navigator.userLanguage).toLowerCase())?c.create("div",
{"class":"dijitOffScreen",style:'font-size: 13px; font-family: Arial, "Helvetica Neue", sans-serif; text-transform: uppercase;'+e},g.body()):c.create("div",{"class":"dijitOffScreen",style:'font-size: 11px; font-family: Arial, "Helvetica Neue", sans-serif; text-transform: uppercase;'+e},g.body());e.style.width=b;e.style.height=d;e.textContent=a;a=window.getComputedStyle(e,null);a={width:a.width,height:a.height};c.destroy(e);return a}}})},"MW/toolstrip/hashes/ComponentsThatDontSupportAction":function(){define(["../constants/TypeConstants"],
function(h){return[h.TOOLSTRIP,h.QAB,h.QA_GROUP,h.TAB_GROUP,h.TAB,h.SECTION,h.COLUMN,h.PANEL,h.EMPTY_CONTROL,h.POPUP_LIST,h.POPUP_LIST_PANEL,h.POPUP_LIST_HEADER,h.POPUP_LIST_SEPARATOR,h.FOOTER,h.FOOTER_CELL,h.GALLERY,h.GALLERY_POPUP,h.GALLERY_FAVORITE_CATEGORY]})},"MW/toolstrip/hashes/PeerNodeTypesWithNoCorrespondingWidget":function(){define(["MW/uiframework/constants/TypeConstants"],function(h){return[h.ROOT,h.ORPHAN_ROOT,h.TOOLSTRIP_ROOT,h.POPUP_ROOT,h.QAB_ROOT,"QAGroupRoot",h.GALLERY_ROOT,h.GALLERY_POPUP_ROOT,
h.GALLERY_FAVORITE_CATEGORY_ROOT]})},"MW/toolstrip/hashes/ComponentsThatSupportAnimation":function(){define(["../constants/TypeConstants"],function(h){return[h.GALLERY_FAVORITE_CATEGORY,h.GALLERY_CATEGORY]})},"MW/toolstrip/hashes/DefaultGalleryItemWidths":function(){define([],function(){return{1:{"0":68,1:68,2:68},2:{"0":52,1:102},3:{"0":52,1:98}}})},"MW/uiframework/managers/WidgetManager":function(){define("dojo/aspect dojo/debounce dojo/_base/lang dojo/_base/declare dijit/registry dijit/popup ../constants/TypeConstants ../WidgetFactory ../hashes/ControlEventsHash ../hashes/ComponentPropertiesHash ../hashes/PeerNodeWidgetPropertiesHash ../../toolstrip/hashes/listOfNewWidgets ../../toolstrip/hashes/PeerNodeWidgetEventsHash MW/toolstrip/hashes/ToolstripCollapseTriggers MW/toolstrip/constants/DisplayStateConstants MW/toolstrip/ToolstripUtils mw-log/Log mw-utils/Utils".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u){return d(null,{constructor:function(a){var b=this;this._aspectMap={};a=a||{};t.assert(a.modelManager,"Model Manager needs to be passed in!");this._modelManager=a.modelManager;this._openPopups=[];this._galleryRefreshMap={};this._addAspect(this._modelManager,"onChildAdd",function(a){b.childAddedObserver(a)});this._addAspect(this._modelManager,"onChildDestroy",function(a){b.childDestroyedObserver(a)});this._addAspect(this._modelManager,"onPropertySet",function(a){b.propertySetObserver(a)});
this._addAspect(this._modelManager,"onChildMove",function(a){b.childMovedObserver(a)});this._addAspect(this._modelManager,"onPeerEvent",function(a){b.peerEventObserver(a)});this._addAspect(this._modelManager.actionService,"onActionChange",g.hitch(this,this._onActionChange));this._addAspect(this._modelManager.actionService,"onActionAdd",g.hitch(this,this._onActionAdd));this._addAspect(this._modelManager.actionService,"onPeerEvent",g.hitch(this,this._onActionPeerEvent))},_getAspectId:function(a){if(a instanceof
Object)return a.aspectId||(a.aspectId=a.id?a.id:u.generateUuid()),a.aspectId;throw Error("WidgetManager only supports widgets.");},_getAspectKey:function(a,b,c){if((a=this._getAspectId(a))&&b&&"function"===typeof c)return a+"_"+b+"_"+c.toString();throw Error("Invalid input.");},_getAssociatedAspects:function(a){var b=this._getAspectId(a),c=[];Object.keys(this._aspectMap).forEach(function(a){0===a.indexOf(b+"_")&&c.push(a)}.bind(this));return c},_addAspect:function(a,b,c){var d=this._getAspectKey(a,
b,c);d&&!this._aspectMap.hasOwnProperty(d)&&(this._aspectMap[d]=h.after(a,b,c,!0));return d},_removeAspect:function(a){this._aspectMap.hasOwnProperty(a)&&(this._aspectMap[a].remove(),delete this._aspectMap[a])},childAddedObserver:function(b){var d,f,g,h,k,l,n,q=this;d=b.data.child;f=b.target;s.hasNoCorrespondingWidget(d.getType())||(k=this._getWidgetProperties(d),n=d.getId(),k.id=n.toString(),c.byId(k.id)||(""!==k.tag&&"addGalleryItemToFavorites"!==b.originator&&(this._modelManager.tagToPeerNodeIdMap[k.tag]=
n),g=this._buildWidget(k,d),h=this._getWidgetForPeerNode(f),g.get("type")===a.GALLERY?(q.refreshGallery(d.getId()),q._modelManager.addEventCallback(d.getId(),e(function(a){"refresh"===a.eventType&&q.refreshGallery(d.getId())},100))):g.get("type")===a.GALLERY_POPUP&&this._modelManager.manager.getByProperty("galleryPopupId",g.id).forEach(function(a){c.byId(a.getId()).setupGalleryPopupListener(g)}),l=function(){h&&h.addChild(g,b.data.index)},f=d.getProperty("animation"),s.supportsAnimation(b.target.getType())&&
f&&!0===f.shouldAnimate?h.animate({type:"childAdd",childWidget:g,startId:f.startId,endId:f.endId,onEnd:function(){l();d.setProperty("animation",{shouldAnimate:!1,startId:"",endId:""})}}):l()))},addOutsidePeerModel:function(a,b){var d=this._modelManager.manager.getById(a),e=this._modelManager.manager.getById(b),f=this._getWidgetProperties(d);f.id=d.getId().toString();d=c.byId(f.id)||this._buildWidget(f,d);(e=this._getWidgetForPeerNode(e))&&e.addChild(d)},removeOutsidePeerModel:function(a){a=this._modelManager.manager.getById(a);
a=this._getWidgetForPeerNode(a);this._getAssociatedAspects(a).forEach(function(a){this._removeAspect(a)}.bind(this));var b=a.getParent();b&&b.removeChild(a)},_buildWidget:function(b,c){if(b.type===a.TOOLSTRIP||b.type===a.QA_GROUP)b.enableQABCustomization=this._modelManager.enableQABCustomization;var d=f.create(b),e=this;this._addWatchToWidgetProperties(d,c);this._attachPopupMonitor(d);this._hookupEvents(d,c);this._listenForToolstripCollapseTrigger(d);this._addAspect(d,"removeChild",function(a){e._resetStateRecursive(a)});
return d},_listenForToolstripCollapseTrigger:function(a){var b=this,c=q[a.get("type")];c&&(c.events.forEach(function(c){if(-1<p.indexOf(a.type))a.on(m[a.type][c],function(){b._collapseParents(a)});else a.own(h.after(a,c,function(){b._collapseParents(a)}))}),a.watch(function(d){-1<c.properties.indexOf(d)&&b._collapseParents(a)}))},_collapseParents:function(a){this._collapseParentSection(a);this._collapseParentToolstrip(a)},_collapseParentSection:function(a){(a=s.findParentSection(a))&&a.closePopup()},
_collapseParentToolstrip:function(a){var b=s.findParentToolstrip(a);b&&(b.get("displayState")===r.EXPANDED_ON_TOP&&"FooterCell"!==a.getParent().type)&&b.set("displayState",r.COLLAPSED)},_attachPopupMonitor:function(b){var c=this,d;switch(b.get("type")){case a.POPUP_LIST:d=b;break;case a.COMBO_BOX:d=b.dropDown;break;case a.GALLERY_POPUP:d=b;break;case a.SECTION:d=b.getPopup()}d&&(this._addAspect(d,"onOpen",function(){c._onPopupOpen(d)}),this._addAspect(d,"onClose",function(){c._onPopupClose()}))},
_getWidgetProperties:function(a){var b=this._modelManager.getAllProperties(a.getId()),c,d;Object.keys(b).forEach(function(e){if((c=n[a.getType()])&&c[e])d=l[a.getType()][e],b[c[e]]=d.shouldBeFlipped?!b[e]:g.clone(b[e]),delete b[e]});b.type=a.getType();return b},childDestroyedObserver:function(a){var b,c,d,e,f,h;d=a.data.child;e=a.target;h=d.getId();if(b=this._getWidgetForPeerNode(d))this._getAssociatedAspects(b).forEach(function(a){this._removeAspect(a)}.bind(this)),Object.keys(this._modelManager.tagToPeerNodeIdMap).forEach(g.hitch(this,
function(a){this._modelManager.tagToPeerNodeIdMap[a]===h&&delete this._modelManager.tagToPeerNodeIdMap[a]})),c=this._getWidgetForPeerNode(e),f=function(){(s.isAMenubarWrapper(b.get("type"))||s.isAToolbarWrapper(b.get("type")))&&b.getChildren().forEach(function(a){b.removeChild(a)});c&&c.removeChild(b);b.destroyRecursive()},e=d.getProperty("animation"),s.supportsAnimation(a.target.getType())&&e&&!0===e.shouldAnimate?c.animate({type:"childRemove",childWidget:b,startId:e.startId,endId:e.endId,onEnd:function(){f();
d.setProperty("animation",{shouldAnimate:!1,startId:"",endId:""})}}):f()},childMovedObserver:function(a){var b,c,d,e,f,g;d=this._getWidgetForPeerNode(a.target);b=this._getWidgetForPeerNode(a.data.oldParent);c=this._getWidgetForPeerNode(a.data.newParent);e=function(){c&&c.addChild(d,a.data.newIndex)};f=function(){b&&b.removeChild(d)};(g=a.target.getProperty("animation"))&&!0===g.shouldAnimate?s.supportsAnimation(a.target.getType())?d.animate({type:"move",oldIndex:a.data.oldIndex,newIndex:a.data.newIndex,
onEnd:function(){f();e();a.target.setProperty("animation",{shouldAnimate:!1,startId:"",endId:""})}}):s.supportsAnimation(a.data.newParent.getType())?c.animate({type:"childAdd",childWidget:d,startId:g.startId,endId:g.endId,onEnd:function(){f();e();a.target.setProperty("animation",{shouldAnimate:!1,startId:"",endId:""})}}):s.supportsAnimation(a.data.oldParent.getType())&&b.animate({type:"childRemove",childWidget:d,startId:g.startId,endId:g.endId,onEnd:function(){f();e();a.target.setProperty("animation",
{shouldAnimate:!1,startId:"",endId:""})}}):(f(),e())},propertySetObserver:function(a){var b=this._getWidgetForPeerNode(a.target),c,d,e;b&&("tag"===a.data.key&&(d=b.get("tag"),e=this._modelManager.tagToPeerNodeIdMap[d],delete this._modelManager.tagToPeerNodeIdMap[d],this._modelManager.tagToPeerNodeIdMap[a.data.newValue]=e),this._setWidgetProperty(b,a.data.key,a.data.newValue,a.originator),"actionId"===a.data.key&&(c=this._getWidgetProperties(a.target),Object.keys(c).forEach(function(d){c=this._getWidgetProperties(a.target);
b.set(d,c[d])},this)))},_getWidgetsWithActionId:function(a){return c.toArray().filter(function(b){return b.actionId===a&&l[b.type]})},_onActionChange:function(a){"id"!==a.key&&this._getWidgetsWithActionId(a.id).forEach(function(b){b._destroyed||this._setWidgetProperty(b,a.key,a.newValue,a.originator)},this)},_onActionAdd:function(a){if(this._modelManager.isMATLABDriven){var b=this._modelManager.actionService.getAction(a.id),c=Object.keys(b);this._getWidgetsWithActionId(a.id).forEach(function(d){c.forEach(function(c){d._destroyed||
this._setWidgetProperty(d,c,b[c],a.originator)},this)},this)}},_setWidgetProperty:function(a,b,c,d){var e=b,f=n[a.get("type")];-1!==Object.keys(l[a.type]).indexOf(b)&&(f&&f[b]&&(e=f[b]),b=l[a.type][b],b.shouldBeFlipped?a.set(e,!c,d):a.set(e,c,d))},peerEventObserver:function(a){switch(a.data.eventType){case "placeToolStrip":this._modelManager.placeToolstripById(a.target.getId(),a.data.hostId);break;case "showPopup":this._modelManager.showPopup(a.target.getId(),a.data.popupId);break;case "refreshGallery":this._refreshGalleryFromMATLAB(a.data.galleryId)}},
_refreshGalleryFromMATLAB:function(a){this._galleryRefreshMap[a]=this._galleryRefreshMap[a]?this._galleryRefreshMap[a]+1:1;2===this._galleryRefreshMap[a]&&(this.refreshGallery(a),delete this._galleryRefreshMap[a])},_onActionPeerEvent:function(a){switch(a.data.eventType){case "refreshGallery":this._refreshGalleryFromMATLAB(a.data.galleryId)}},_addWatchToWidgetProperties:function(a,b){var c,d=this,e,f=n[b.getType()],g=l[b.getType()];a.watch(function(a,h,k){d._modelManager.exists(b.getId())&&(c=a,f&&
f[a]&&(c=f[a]),-1!==Object.keys(g).indexOf(c)&&(e=l[b.getType()][c],e.shouldBeFlipped&&(k=!k),"checked"===a&&!this._treatAsUserEvent?d._modelManager.set(b.getId(),c,k,{source:"ProgrammaticEvent"}):d._modelManager.set(b.getId(),c,k,{source:"UI"})))})},_hookupEvents:function(a,b){function c(f,k){var l="aspect";-1<p.indexOf(e)&&(l="on");f.forEach(function(c){function f(a){var e={};"aspect"===l?e=a||{}:a&&a.mwEventData&&g.mixin(e,a.mwEventData);e.eventType=c;"action"===k?d._modelManager.actionService.executeAction(b.getProperty("actionId"),
e):b.dispatchEvent("peerEvent",b,e)}if("aspect"===l)a.own(h.after(a,c,f,!0));else{var n=c;m[e]&&m[e][c]&&(n=m[e][c]);a.on(n,f)}})}var d=this,e=b.getType(),f=k[e];f&&(c(f.actionEvents,"action"),c(f.componentEvents,"peerNode"))},_getWidgetForPeerNode:function(a){return c.byId(a.getId().toString())},_onPopupClose:function(){this._openPopups.pop();this.onOpenPopupCountChange(this._openPopups.length,this._openPopups)},_onPopupOpen:function(a){this._openPopups.push(a);this.onOpenPopupCountChange(this._openPopups.length,
this._openPopups)},onOpenPopupCountChange:function(a,b){},isAnyPopupOpen:function(){return 0<b._stack.length&&this._modelManager.exists(b._stack[0].widget.id)},closeAllOpenPopups:function(){this.isAnyPopupOpen()&&b.close()},_resetStateRecursive:function(a){["hovering","active"].forEach(function(b){!0===a.get(b)&&a.set(b,!1)});a.getChildren&&0<a.getChildren().length&&this._resetStateOfChildren(a)},_resetStateOfChildren:function(a){a.getChildren().forEach(function(a){this._resetStateRecursive(a)},this)},
refreshGallery:function(b){var d=c.byId(b);if(d){if(this._modelManager.isMATLABDriven){var e=this._modelManager.get(b,"galleryPopupId");if(e){if(!this._modelManager.manager.hasById(e))return;e=this._modelManager.manager.getById(e);if(this._modelManager.manager.getByType(a.GALLERY_ITEM,e).concat(this._modelManager.manager.getByType(a.TOGGLE_GALLERY_ITEM,e)).some(function(a){return!this._modelManager.actionService.getAction(a.getProperty("actionId"))},this))return}}!1!==d.get("shouldRefresh")&&(e=[],
!0===d.get("hideDisabledItems")?(e=this._getUniqueGalleryItems(b,!0),0===e.length&&(e=this._getUniqueGalleryItems(b))):e=this._getUniqueGalleryItems(b),d.destroyDescendants(),e.forEach(function(a){var b=this._getWidgetProperties(a);a=this._buildWidget(b,a);d.addChild(a)},this),0===e.length&&d.closeDropDown())}},_getUniqueGalleryItems:function(a,b){function c(a){n=!h.some(function(b){return b.getProperty("actionId")===a.getProperty("actionId")});b&&(n=n&&!0===this._modelManager.get(a.getId(),"enabled"));
n&&h.push(a)}function d(){for(k=this._modelManager.getAllCategoriesInDescendingOrder(g);0<k.length;)l=k.pop().getChildren(),l.forEach(c,this)}function e(){for(var a=0,b=h.length,c=null;a<b;){if(!0===this._modelManager.get(h[a].getId(),"selected")){c={peerNode:h[a],index:a};break}a+=1}return c}var f,g,h=[],k,l,n;f=this._modelManager.manager.getById(a);g=this._modelManager.manager.getById(f.getProperty("galleryPopupId"));f=f.getProperty("currentColumnCount")*f.getProperty("galleryItemRowCount");var q=
g.getProperty("favCategoryId");this._modelManager.exists(q)&&(h=this._modelManager.manager.getById(q).getChildren());b&&(h=h.filter(function(a){return!0===this._modelManager.get(a.getId(),"enabled")},this));if(this._modelManager.get(a,"scrollToSelection")){d.call(this);if(q=e.call(this)){var m=q.peerNode.getId(),m=this._modelManager.getParentId(m),m=h.indexOf(this._modelManager.manager.getById(this._modelManager.getChildrenIds(m)[0]));q.index>m+f-1&&(m=q.index-f+1);m+f>h.length&&(m=h.length-f);0>
m&&(m=0);return h.splice(m,f)}return h.slice(0,f)}h.length<f&&d.call(this);return h.slice(0,f)},cleanup:function(){Object.keys(this._aspectMap).forEach(function(a){this._removeAspect(a)}.bind(this))}})})},"dojo/debounce":function(){define([],function(){return function(h,e){var g;return function(){g&&clearTimeout(g);var d=this,c=arguments;g=setTimeout(function(){h.apply(d,c)},e)}}})},"MW/uiframework/WidgetFactory":function(){define(["dojo/_base/lang","MW/toolstrip/hashes/WidgetClassHash","mw-log/Log"],
function(h,e,g){return{create:function(d){var c;e[d.type]?c=new e[d.type](d):g.error("No corresponding constructor found for the given type!");return c}}})},"MW/toolstrip/hashes/WidgetClassHash":function(){define("../constants/TypeConstants ../widgets/Toolstrip ../widgets/QAB ../widgets/QAGroup ../widgets/TabGroup ../widgets/Tab ../widgets/Section ../widgets/Panel ../widgets/Column ../menu/PopupListPanel ../widgets/Footer ../widgets/FooterCell ../widgets/gallery/Gallery ../widgets/gallery/GalleryPopup ../widgets/gallery/GalleryCategory ../form/PushButton ../form/DropDownButton ../form/SplitButton ../form/ToggleButton ../form/ColorPickerButton ../form/GridPickerButton ../qab/QABPushButton ../qab/QABDropDownButton ../qab/QABSplitButton ../qab/QABToggleButton ../qab/QABToggleSplitButton ../widgets/qabcontrols/QABFloatingPaneDock ../form/ToggleSplitButton ../menu/PopupList ../menu/ListItem ../menu/ListItemWithPopup ../menu/ListItemWithCheckBox ../menu/ListItemWithTextField ../menu/ListItemWithRadioButton ../menu/PopupListSeparator ../menu/PopupListHeader ../form/ComboBox ../form/ListBox ../form/Label ../widgets/EmptyControl ../form/TextField ../form/TextArea ../form/Spinner ../widgets/HorizontalSlider ../form/RadioButton ../form/CheckBox ../widgets/ToolbarWrapper ../widgets/MenubarWrapper ../widgets/gallery/GalleryItem ../widgets/gallery/ToggleGalleryItem".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,B,F,G,H,I,K,C,M,Q,L,N,J,O,T,W,S,R,ea,Y,$,da,ga,V,aa,oa,fa,z,X){var D={};D[h.TOOLSTRIP]=e;D[h.QAB]=g;D[h.QA_GROUP]=d;D[h.TAB_GROUP]=c;D[h.TAB]=b;D[h.SECTION]=a;D[h.PANEL]=f;D[h.POPUP_LIST_PANEL]=l;D[h.COLUMN]=k;D[h.GALLERY]=m;D[h.GALLERY_POPUP]=q;D[h.GALLERY_CATEGORY]=r;D[h.GALLERY_FAVORITE_CATEGORY]=r;D[h.FOOTER]=n;D[h.FOOTER_CELL]=p;D[h.PUSH_BUTTON]=s;D[h.DROP_DOWN_BUTTON]=t;D[h.SPLIT_BUTTON]=u;D[h.TOGGLE_BUTTON]=v;D[h.COLOR_PICKER_BUTTON]=w;D[h.GRID_PICKER_BUTTON]=
x;D[h.QAB_PUSH_BUTTON]=A;D[h.QAB_DROP_DOWN_BUTTON]=B;D[h.QAB_SPLIT_BUTTON]=F;D[h.QAB_TOGGLE_BUTTON]=G;D[h.QAB_TOGGLE_SPLIT_BUTTON]=H;D[h.QAB_FLOATING_PANE_DOCK]=I;D[h.TOGGLE_SPLIT_BUTTON]=K;D[h.POPUP_LIST]=C;D[h.LIST_ITEM]=M;D[h.LIST_ITEM_WITH_POPUP]=Q;D[h.LIST_ITEM_WITH_CHECKBOX]=L;D[h.LIST_ITEM_WITH_TEXTFIELD]=N;D[h.LIST_ITEM_WITH_RADIO_BUTTON]=J;D[h.POPUP_LIST_SEPARATOR]=O;D[h.POPUP_LIST_HEADER]=T;D[h.COMBO_BOX]=W;D[h.LIST]=S;D[h.LABEL]=R;D[h.EMPTY_CONTROL]=ea;D[h.TEXT_FIELD]=Y;D[h.TEXT_AREA]=
$;D[h.SPINNER]=da;D[h.HORIZONTAL_SLIDER]=ga;D[h.RADIO_BUTTON]=V;D[h.CHECK_BOX]=aa;D[h.MENUBAR_WRAPPER]=fa;D[h.TOOLBAR_WRAPPER]=oa;D[h.GALLERY_ITEM]=z;D[h.TOGGLE_GALLERY_ITEM]=X;return D})},"MW/toolstrip/widgets/Toolstrip":function(){define("dojo/aspect dojo/on dojo/dom dojo/topic dojo/keys dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/_base/kernel dijit/Viewport dojo/query dojo/dom-geometry ../ToolstripUtils dojo/i18n!l10n/nls/toolstrip dojo/_base/event dijit/registry dijit/popup dojo/text!./templates/Toolstrip.html dijit/_WidgetBase dijit/_Container dijit/_TemplatedMixin ./TabContainer mw-form/PushButton mw-menu/ContextMenu mw-menu/MenuItem mw-menu/MenuSeparator ../hashes/ComponentsEligibleForQAB ../constants/TypeConstants ../constants/DisplayStateConstants ../constants/MiscConstants ./_WidgetMixin mw-event-utils/doubleClickHandler mw-utils/widgetUtils MW/layout/ConfirmationDialog mw-mixins/PreventSelectionMixin MW/uiframework/MnemonicsStates MW/toolstrip/contextmenumanager/ContextMenuManager".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,B,F,G,H,I,K,C,M,Q,L,N,J,O,T,W){var S=function(a,b){return!a||!b?!1:a[a.msMatchesSelector?"msMatchesSelector":"matches"](b)};return b([v,w,x,Q,O],{templateString:u,constructor:function(){this._shouldSetSelectedTab=!0;this._previousSelectedChild=null;this._tabGroupListeners={};h.before(this,"addChild",this._beforeAddChild)},postCreate:function(){this.inherited(arguments);this.domNode.setAttribute("data-focus","refuse");var a=this;this.tabContainer=
new A({"class":"tabContainer"},this.toolstripTabContainer);this.tabContainer.tablist.onkeydown=function(){};this._supportingWidgets.push(this.tabContainer);this.own(h.after(this,"placeAt",function(){d.publish("/Toolstrip/toolstripPlaced",{toolstripId:this.id});a.toolstripPlaced();a.resize()}));this.collapseButton=(new B({"class":"collapseButton",icon:"smallCollapse",showText:!1,width:20,height:20})).placeAt(this.collapseButtonContainer);this.collapseButton.on("click",f.hitch(this,this._expandCollapse));
this.tabContainer.tablist.tablistWrapper.children[0].dojoClick=!1;this._setTooltipforExpandCollapseButton();this._supportingWidgets.push(this.collapseButton);this.hostId&&(this.placeAt(this.hostId),this.resize(),this.startup());this.connect(this.tabContainer,"selectChild",function(a){this.set("selectedTab",a.id)});this.own(l.on("resize",f.hitch(this,function(){this._resizeTimeout&&(clearTimeout(this._resizeTimeout),this._resizeTimeout=null);this._resizeTimeout=setTimeout(f.hitch(this,function(){this.resize()}),
500)})));this.own(e(this.domNode,".dijitTab:click",L.createCallback(function(b){var c=s.getEnclosingWidget(b.target);a.displayState===C.COLLAPSED?a.set("displayState",C.EXPANDED_ON_TOP):a.displayState===C.EXPANDED_ON_TOP&&T.getCurrentMnemonicsState()!==T.CONTROL_TAB&&a._previousSelectedChild&&g.isDescendant(b.target,a._previousSelectedChild.domNode)&&a.set("displayState",C.COLLAPSED);a._previousSelectedChild=c},function(){a._expandCollapse()})),e(document.body,"click",function(b){a.displayState===
C.EXPANDED_ON_TOP&&(!N.isDescendant(b.target,a.domNode)&&b.target!==document.body)&&a.set("displayState",C.COLLAPSED)}));this._setupContextMenu();this._setLocaleOnDomNode()},_setLocaleOnDomNode:function(){-1<["ko","ko-kr","ja-jp","zh-cn"].indexOf(k.locale)&&this.domNode.classList.add("isCJK")},_setupContextMenu:function(){var a=this,b='[id\x3d"'+this.id+'"]',c=function(a){var b=a.target||document.activeElement,c;n("[dijitpopupparent]").some(function(a){return"none"!==a.style.display&&b&&a.contains(b)?
(c=a,!0):!1});if(b&&c&&(c.classList.contains("galleryPopupWrapper")||c.classList.contains("toolstripPopup"))&&this._findParentNode(b,"id",this.id)){if(a=n('[id\x3d"'+c.id+'"] *'),a.push(c),-1<a.indexOf(b))return a}else return null}.bind(this);this._contextMenu=new F({willOpenCallback:f.hitch(this,this._updateContextMenu),targetNodes:[b,b+" *",c]});this._contextMenu.domNode.classList.add("mwToolstripPopupContextMenu");W.registerContextMenu(this._contextMenu);this.own({remove:function(){W.unregisterContextMenu(a._contextMenu);
a._contextMenu.destroyRecursive()}})},_findParentNode:function(a,b,c){var d=null,e;a.domNode&&(a=a.domNode);for(;a&&a!==window.document;){if(c){if(a.hasAttribute(b)&&a.getAttribute(b)===c){d=a;break}}else{if(a.hasAttribute(b)){d=a;break}if(a.classList.contains(b)){d=a;break}}a=(e=a.getAttribute("dijitpopupparent"))?document.getElementById(e):a.parentNode}return d},addContextMenuCallback:function(a,b){W.addContributor(this._contextMenu,a,b)},removeContextMenuCallback:function(a,b){W.removeContributor(this._contextMenu,
a,b)},_updateContextMenu:function(a){W.build(this._contextMenu,a.target,!0);var b;if(b=a.target.classList.contains("toolstripComponentWrapper")?s.getEnclosingWidget(a.target.children[0]):s.getEnclosingWidget(a.target))if(("GalleryItem"===b.type||"ToggleGalleryItem"===b.type)&&!0===b.get("removable")&&this._addRemoveWidgetMenuItemToContextMenu(b),b.page&&"Tab"===b.page.type&&!0===b.page.get("removable"))this._addRemoveWidgetMenuItemToContextMenu(b.page);else{for(var c=b;c&&"Tab"!==c.type;)c=c.domNode&&
c.domNode.parentElement&&c.domNode.parentElement.hasAttribute("dijitpopupparent")?s.byId(c.domNode.parentElement.getAttribute("dijitpopupparent")):c.getParent();c&&!0===c.get("removable")&&this._addRemoveWidgetMenuItemToContextMenu(c)}if(this.enableQABCustomization){-1<Object.keys(I).indexOf(b.get("type"))&&!b.get("hasDynamicMenu")&&(c=new G({text:q.addToQAB,tag:"addToQAB",disabled:b.get("isInQAB")}),this._contextMenu.addChild(c),c.on("click",function(){b.set("isInQAB",!0)}));switch(b.get("type")){case K.QAB_PUSH_BUTTON:case K.QAB_TOGGLE_BUTTON:case K.QAB_SPLIT_BUTTON:case K.QAB_DROP_DOWN_BUTTON:case K.QAB_TOGGLE_SPLIT_BUTTON:!0===
b.get("isInQAB")&&(c=new G({text:q.removeFromQAB,tag:"removeFromQAB"}),this._contextMenu.addChild(c),c.on("click",function(){b.set("isInQAB",!1)}));this._setShowHideLabelMenuItem(b);break;case K.QAB_FLOATING_PANE_DOCK:this._setShowHideLabelMenuItem(b)}this._isDescendantOfQAB(b)&&(c=new G({text:q.restoreFactoryControls,tag:"restoreFactoryControls"}),this._contextMenu.addChild(c),c.on("click",f.hitch(this,function(){var a=new J({title:q.restoreFactoryControlsDialogTitle,message:q.restoreFactoryControlsDialogMessage});
a.on("success",f.hitch(this,function(){this._QABWidget.restoreFactoryControls()}));a.open()})))}if(S(a.target,'[data-type\x3d"Toolstrip"], [data-type\x3d"Toolstrip"] *')||S(a.target,'[data-type\x3d"SectionPopup"], [data-type\x3d"SectionPopup"] *'))this._contextMenu.hasChildren()&&this._contextMenu.addChild(new H),a=new G({text:this.get("displayState")!==C.EXPANDED?q.restoreToolstrip:q.minimizeToolstrip,tag:"minimizeRestoreToolstrip"}),this._contextMenu.addChild(a),a.on("click",f.hitch(this,this._expandCollapse))},
_setShowHideLabelMenuItem:function(a){var b=new G({text:a.get("showText")?q.hideLabel:q.showLabel,tag:"showHideLabel"});this._contextMenu.addChild(b);b.on("click",function(){a.set("showText",!a.get("showText"))})},_addRemoveWidgetMenuItemToContextMenu:function(a){var b,d=function(b){"keydown"===b.type&&0>[c.ENTER,c.SPACE].indexOf(b.keyCode)||(a._emitRemoveEvent?a._emitRemoveEvent():a.emit("remove"),t.close())};b=a.get("removeMessage");if(!b)switch(a.get("type")){case K.TAB:b=q.closeWidget.replace(/\$\{0}/g,
a.get("title"));break;case K.GALLERY_ITEM:case K.TOGGLE_GALLERY_ITEM:b=q.removeWidget.replace(/\$\{0}/g,a.get("text"))}b=new G({text:b,tag:"removeWidget"});this._contextMenu.addChild(b);b.on("mouseup",d);b.on("keydown",d)},_isDescendantOfQAB:function(a){var b=!1;if(a===this._QABWidget)b=!0;else for(;a&&a.getParent&&a.getParent()!==this;){if(a.getParent()===this._QABWidget){b=!0;break}a=a.getParent()}return b},_getToolstripWidth:function(){return p.getMarginBox(this.domNode).w},_getTopRightContainerWidth:function(){return p.getMarginBox(this.topRightContainer).w},
_getTabsWidth:function(a){var b=0;a.forEach(function(a){b+=p.getMarginBox(a).w});return b},_getTabMargin:function(a){if(0<a.length)return p.getMarginBox(a[0]).w-p.position(a[0]).w},_getTabPadding:function(a){if(0<a.length)return 20},_shrinkTabs:function(a){var b=a.length,c=this,d=this._getTabMargin(a),e=this._getTabPadding(a);a.forEach(function(f,g){a[g].style.width=c._availableWidthForTabs/b-e-d+"px";f.classList.add("noMinWidth")})},_expandTabs:function(a){var b,c,d=this,e=0,f=a.length,g,h=[],k=
this._getTabMargin(a);this._getTabPadding(a);a.forEach(function(b,c){g=m.computeWidth(a[c].textContent);g<M.TAB_WIDTH&&(g=M.TAB_WIDTH);g+=k;e+=g;h.push(g)});e<d._getToolstripWidth()-d._getTopRightContainerWidth()?a.forEach(function(b,c){b.classList.remove("noMinWidth");a[c].style.width="auto"}):a.forEach(function(e,g){b=parseFloat(a[g].style.width);c=b+d._availableWidth/f;c<h[g]?(a[g].style.width=c+"px",e.classList.add("noMinWidth")):a[g].style.width=h[g]-k+"px"})},_setPreventResizeAttr:function(a){this._ignoreResize=
this._doNotResize=a},resize:function(){if(this._startupComplete&&(this.inherited(arguments),!this._destroyed&&!this._doNotResize&&(this.tabContainer._started&&this.tabContainer.resize(),this.domNode.parentElement))){var a,b=this,c,d,e=0,f,g,h;a=n("[data-dojo-attach-point\x3d'titleNode,innerDiv,tabContent']",this.domNode);e=this._getTabsWidth(a);h=this._getToolstripWidth();g=this._getTopRightContainerWidth();d={QABContainer:this._getQABWidth(),logoutContainer:this._getLogoutButtonWidth(),searchContainer:this._getSearchBoxWidth(),
tabs:this._getTabsWidth(a)};c=["searchContainer","QABContainer","logoutContainer","tabs"];e+g>h?(f=e+g-h,c.forEach(function(c){g=b._getTopRightContainerWidth();h=b._getToolstripWidth();f=e+g-h;0<f&&("tabs"===c?(b._availableWidthForTabs=h-g,b._shrinkTabs(a)):("searchContainer"===c&&b.searchPopupContainer.classList.remove("dijitOffScreen"),n("."+c,b.domNode)[0].classList.add("dijitOffScreen")))})):(this._availableWidth=h-(e+g),c.reverse().forEach(function(c){g=b._getTopRightContainerWidth();h=b._getToolstripWidth();
e=b._getTabsWidth(a);b._availableWidth=h-(e+g);0<b._availableWidth&&("tabs"===c?b._expandTabs(a):d[c]<b._availableWidth&&(n("."+c,b.domNode)[0].classList.remove("dijitOffScreen"),n("."+c,b.domNode)[0].style.display="inline-block","searchContainer"===c&&b.searchPopupContainer.classList.add("dijitOffScreen")))}))}},_getLogoutButtonWidth:function(){return p.getMarginBox(this.logoutContainer).w},_getQABWidth:function(){return p.getMarginBox(this.QABContainer).w},_getSearchBoxWidth:function(){return p.getMarginBox(this.searchContainer).w},
startup:function(){this.inherited(arguments);this._adjustHostHeight();var a=this.domNode.parentNode;a&&(a.style.zIndex=20);this.tabContainer.startup();this.collapseButton.startup();this._QABWidget&&this._QABWidget.startup();this._startupComplete=!0},_expandCollapse:function(){var a=this.displayState;a===C.COLLAPSED||a===C.EXPANDED_ON_TOP?a=C.EXPANDED:a===C.EXPANDED&&(a=C.COLLAPSED);this.set("displayState",a);t.close()},addTab:function(a,b){this._shouldSetSelectedTab=!1;this.tabContainer.addChild(a,
b);this._shouldSetSelectedTab=!0},removeChild:function(a){a.tabs.forEach(function(a){this.removeTab(a)},this);this.inherited(arguments);this.resize();Object.keys(this._tabGroupListeners).forEach(function(a){this._tabGroupListeners[a].forEach(function(a){a.remove()})},this)},_beforeAddChild:function(a,b){var c=b,d=this.getChildren().length;!b&&0!==b&&(c=d);return[a,c]},addChild:function(a,b){var c=0,d=0,e,g;for(e=this.getChildren();c<b;)d+=e[c].tabs.length,c+=1;a.tabs.forEach(function(a,b){this.addTab(a,
d+b)},this);this.inherited(arguments);this.set("selectedTab",a.get("selectedTab"));this._startupComplete&&this.resize();this._removeUnSelectableAttribute();c=a.on("childadded",f.hitch(this,this.resize));e=a.on("childremoved",f.hitch(this,this.resize));g=a.on("childadded",f.hitch(this,this._removeUnSelectableAttribute));this._tabGroupListeners[a.id]=[c,e,g]},_removeUnSelectableAttribute:function(){n(".tabLabel",this.domNode).forEach(function(a){g.setSelectable(a,!0)},this)},_setSelectedTabAttr:function(a){if(this._shouldSetSelectedTab){var b=
s.byId(a.toString());if(b&&(this.selectedTab!==a||!this.tabContainer.selectedChildWidget||this.tabContainer.selectedChildWidget.get("id")!==a))this._set("selectedTab",a),this.selectTab(b),this.getChildren().forEach(function(b){b.tabs.some(function(b){return b.id===a})&&b.set("selectedTab",a)})}},_setDisplayStateAttr:function(a){this._set("displayState",a);this._setTooltipforExpandCollapseButton();this._adjustHostHeight()},_setTooltipforExpandCollapseButton:function(){this.collapseButton&&(this.displayState===
C.COLLAPSED||this.displayState===C.EXPANDED_ON_TOP?this.collapseButton.set("description",q.restoreToolstrip):this.collapseButton.set("description",q.minimizeToolstrip))},_adjustHostHeight:function(){var a,b;if(a=this.domNode.parentElement)switch(b=s.getEnclosingWidget(a.parentElement),this.displayState){case C.COLLAPSED:this.domNode.classList.remove("toolstripNotCollapsed");this.domNode.classList.remove("toolstripExpandedOnTop");a.style.height="28px";a.style.overflow="hidden";this.collapseButton&&
this.collapseButton.set("icon","smallExpand");break;case C.EXPANDED:this.domNode.classList.add("toolstripNotCollapsed");this.domNode.classList.remove("toolstripExpandedOnTop");a.style.height="121px";a.style.overflow="hidden";this.collapseButton&&this.collapseButton.set("icon","smallCollapse");this.tabContainer&&this.tabContainer.selectedChildWidget&&this.tabContainer.selectedChildWidget.resize();break;case C.EXPANDED_ON_TOP:this.domNode.classList.add("toolstripNotCollapsed"),this.domNode.classList.add("toolstripExpandedOnTop"),
a.style.height="28px",a.style.overflow="visible",this.tabContainer&&this.tabContainer.selectedChildWidget&&this.tabContainer.selectedChildWidget.resize()}b&&b.resize&&b.resize()},removeTab:function(a){this._shouldSetSelectedTab=!1;this.tabContainer.removeChild(a);this._shouldSetSelectedTab=!0},selectTab:function(a){this.tabContainer.selectChild(a);this.set("selectedTab",a.id)},_setQABIdAttr:function(b){var c=s.byId(b);c&&(this._QABWidget=c,a.place(c.domNode,this.QABContainer),this._started&&this._QABWidget.startup(),
this.own(c));this._set("QABId",b)},toolstripPlaced:function(){}})})},"MW/toolstrip/widgets/TabContainer":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dijit/layout/TabContainer dijit/layout/ScrollingTabController mw-ddux/UsageLogger".split(" "),function(h,e,g,d,c,b){return h(d,{postMixInProperties:function(){this.inherited(arguments);this.controllerWidget=h(c,{resize:function(){},onAddChild:function(a,b){var c=new (e.isString(this.buttonWidget)?e.getObject(this.buttonWidget):this.buttonWidget)({id:this.id+
"_"+a.id,name:this.id+"_"+a.id,label:a.title,disabled:a.disabled,ownerDocument:this.ownerDocument,dir:a.dir,lang:a.lang,textDir:a.textDir||this.textDir,showLabel:a.showTitle,iconClass:a.iconClass,closeButton:a.closable,title:a.tooltip,page:a});this.addChild(c,b);c.domNode.setAttribute("data-tag",a.tag+".tab");c.domNode.setAttribute("data-type","ToolstripTab");a.controlButton=c;if(!this._currentChild)this.onSelectChild(a);c=a._wrapper.getAttribute("aria-labelledby")?a._wrapper.getAttribute("aria-labelledby")+
" "+c.id:c.id;a._wrapper.removeAttribute("aria-label");a._wrapper.setAttribute("aria-labelledby",c)}})},resize:function(){if(!this._hasBeenShown){this._hasBeenShown=!0;var a=this.selectedChildWidget;a&&this._showChild(a)}(a=this.selectedChildWidget)&&a.resize()}})})},"dijit/layout/TabContainer":function(){define(["dojo/_base/lang","dojo/_base/declare","./_TabContainerBase","./TabController","./ScrollingTabController"],function(h,e,g,d,c){return e("dijit.layout.TabContainer",g,{useMenu:!0,useSlider:!0,
controllerWidget:"",_makeController:function(b){var a=this.baseClass+"-tabs"+(this.doLayout?"":" dijitTabNoLayout");return new ("string"==typeof this.controllerWidget?h.getObject(this.controllerWidget):this.controllerWidget)({id:this.id+"_tablist",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,tabPosition:this.tabPosition,doLayout:this.doLayout,containerId:this.id,"class":a,nested:this.nested,useMenu:this.useMenu,useSlider:this.useSlider,tabStripClass:this.tabStrip?
this.baseClass+(this.tabStrip?"":"No")+"Strip":null},b)},postMixInProperties:function(){this.inherited(arguments);this.controllerWidget||(this.controllerWidget=("top"==this.tabPosition||"bottom"==this.tabPosition)&&!this.nested?c:d)}})})},"dijit/layout/_TabContainerBase":function(){define("dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style ./StackContainer ./utils ../_TemplatedMixin dojo/text!./templates/TabContainer.html".split(" "),function(h,e,g,d,c,b,a,f){return h("dijit.layout._TabContainerBase",
[c,a],{tabPosition:"top",baseClass:"dijitTabContainer",tabStrip:!1,nested:!1,templateString:f,postMixInProperties:function(){this.baseClass+=this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"");this.srcNodeRef&&d.set(this.srcNodeRef,"visibility","hidden");this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.tablist=this._makeController(this.tablistNode);this.doLayout||e.add(this.domNode,"dijitTabContainerNoLayout");this.nested?(e.add(this.domNode,
"dijitTabContainerNested"),e.add(this.tablist.containerNode,"dijitTabContainerTabListNested"),e.add(this.tablistSpacer,"dijitTabContainerSpacerNested"),e.add(this.containerNode,"dijitTabPaneWrapperNested")):e.add(this.domNode,"tabStrip-"+(this.tabStrip?"enabled":"disabled"))},_setupChild:function(a){e.add(a.domNode,"dijitTabPane");this.inherited(arguments)},startup:function(){this._started||(this.tablist.startup(),this.inherited(arguments))},layout:function(){if(this._contentBox&&"undefined"!=typeof this._contentBox.l){var a=
this.selectedChildWidget;if(this.doLayout){var c=this.tabPosition.replace(/-h/,"");this.tablist.region=c;c=[this.tablist,{domNode:this.tablistSpacer,region:c},{domNode:this.containerNode,region:"center"}];b.layoutChildren(this.domNode,this._contentBox,c);this._containerContentBox=b.marginBox2contentBox(this.containerNode,c[2]);a&&a.resize&&a.resize(this._containerContentBox)}else{if(this.tablist.resize){c=this.tablist.domNode.style;c.width="0";var d=g.getContentBox(this.domNode).w;c.width="";this.tablist.resize({w:d})}a&&
a.resize&&a.resize()}}},destroy:function(a){this.tablist&&this.tablist.destroy(a);this.inherited(arguments)}})})},"dijit/layout/StackContainer":function(){define("dojo/_base/array dojo/cookie dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/has dojo/_base/lang dojo/on dojo/ready dojo/topic dojo/when ../registry ../_WidgetBase ./_LayoutWidget".split(" "),function(h,e,g,d,c,b,a,f,k,l,n,p,m,q){b("dijit-legacy-requires")&&k(0,function(){require(["dijit/layout/StackController"])});g=g("dijit.layout.StackContainer",
q,{doLayout:!0,persist:!1,baseClass:"dijitStackContainer",buildRendering:function(){this.inherited(arguments);d.add(this.domNode,"dijitLayoutContainer")},postCreate:function(){this.inherited(arguments);this.own(f(this.domNode,"keydown",a.hitch(this,"_onKeyDown")))},startup:function(){if(!this._started){var a=this.getChildren();h.forEach(a,this._setupChild,this);this.persist?this.selectedChildWidget=p.byId(e(this.id+"_selectedChild")):h.some(a,function(a){a.selected&&(this.selectedChildWidget=a);return a.selected},
this);var b=this.selectedChildWidget;!b&&a[0]&&(b=this.selectedChildWidget=a[0],b.selected=!0);l.publish(this.id+"-startup",{children:a,selected:b,textDir:this.textDir});this.inherited(arguments)}},resize:function(){if(!this._hasBeenShown){this._hasBeenShown=!0;var a=this.selectedChildWidget;a&&this._showChild(a)}this.inherited(arguments)},_setupChild:function(a){var b=a.domNode,d=c.place("\x3cdiv role\x3d'tabpanel' class\x3d'"+this.baseClass+"ChildWrapper dijitHidden'\x3e",a.domNode,"replace"),e=
a["aria-label"]||a.title||a.label;e&&d.setAttribute("aria-label",e);c.place(b,d);a._wrapper=d;this.inherited(arguments);"none"==b.style.display&&(b.style.display="block");a.domNode.removeAttribute("title")},addChild:function(a,b){this.inherited(arguments);this._started&&(l.publish(this.id+"-addChild",a,b),this.layout(),this.selectedChildWidget||this.selectChild(a))},removeChild:function(a){var b=h.indexOf(this.getChildren(),a);this.inherited(arguments);c.destroy(a._wrapper);delete a._wrapper;this._started&&
l.publish(this.id+"-removeChild",a);if(!this._descendantsBeingDestroyed){if(this.selectedChildWidget===a&&(this.selectedChildWidget=void 0,this._started)){var d=this.getChildren();d.length&&this.selectChild(d[Math.max(b-1,0)])}this._started&&this.layout()}},selectChild:function(a,b){var c;a=p.byId(a);this.selectedChildWidget!=a&&(c=this._transition(a,this.selectedChildWidget,b),this._set("selectedChildWidget",a),l.publish(this.id+"-selectChild",a,this._focused),this.persist&&e(this.id+"_selectedChild",
this.selectedChildWidget.id));return n(c||!0)},_transition:function(a,b){b&&this._hideChild(b);var c=this._showChild(a);a.resize&&(this.doLayout?a.resize(this._containerContentBox||this._contentBox):a.resize());return c},_adjacent:function(a){var b=this.getChildren(),c=h.indexOf(b,this.selectedChildWidget),c=c+(a?1:b.length-1);return b[c%b.length]},forward:function(){return this.selectChild(this._adjacent(!0),!0)},back:function(){return this.selectChild(this._adjacent(!1),!0)},_onKeyDown:function(a){l.publish(this.id+
"-containerKeyDown",{e:a,page:this})},layout:function(){var a=this.selectedChildWidget;a&&a.resize&&(this.doLayout?a.resize(this._containerContentBox||this._contentBox):a.resize())},_showChild:function(a){var b=this.getChildren();a.isFirstChild=a==b[0];a.isLastChild=a==b[b.length-1];a._set("selected",!0);a._wrapper&&d.replace(a._wrapper,"dijitVisible","dijitHidden");return a._onShow&&a._onShow()||!0},_hideChild:function(a){a._set("selected",!1);a._wrapper&&d.replace(a._wrapper,"dijitHidden","dijitVisible");
a.onHide&&a.onHide()},closeChild:function(a){if(!a.onClose||a.onClose(this,a))this.removeChild(a),a.destroyRecursive()},destroyDescendants:function(a){this._descendantsBeingDestroyed=!0;this.selectedChildWidget=void 0;h.forEach(this.getChildren(),function(b){a||this.removeChild(b);b.destroyRecursive(a)},this);this._descendantsBeingDestroyed=!1}});g.ChildWidgetProperties={selected:!1,disabled:!1,closable:!1,iconClass:"dijitNoIcon",showTitle:!0};a.extend(m,g.ChildWidgetProperties);return g})},"dojo/cookie":function(){define(["./_base/kernel",
"./regexp"],function(h,e){h.cookie=function(g,d,c){var b=document.cookie,a;if(1==arguments.length)a=(a=b.match(RegExp("(?:^|; )"+e.escapeString(g)+"\x3d([^;]*)")))?decodeURIComponent(a[1]):void 0;else{c=c||{};b=c.expires;if("number"==typeof b){var f=new Date;f.setTime(f.getTime()+864E5*b);b=c.expires=f}b&&b.toUTCString&&(c.expires=b.toUTCString());d=encodeURIComponent(d);var b=g+"\x3d"+d,h;for(h in c)b+="; "+h,f=c[h],!0!==f&&(b+="\x3d"+f);document.cookie=b}return a};h.cookie.isSupported=function(){"cookieEnabled"in
navigator||(this("__djCookieTest__","CookiesAllowed"),navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1}));return navigator.cookieEnabled};return h.cookie})},"dijit/layout/TabController":function(){define("dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/has dojo/i18n dojo/_base/lang ./StackController ../registry ../Menu ../MenuItem dojo/text!./templates/_TabButton.html dojo/i18n!../nls/common".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p){c=h("dijit.layout._TabButton",f.StackButton,{baseClass:"dijitTab",cssStateNodes:{closeNode:"dijitTabCloseButton"},templateString:p,_setNameAttr:"focusNode",scrollOnFocus:!1,buildRendering:function(){this.inherited(arguments);e.setSelectable(this.containerNode,!1)},startup:function(){this.inherited(arguments);var a=this.domNode;this.defer(function(){a.className=a.className},1)},_setCloseButtonAttr:function(a){this._set("closeButton",a);d.toggle(this.domNode,"dijitClosable",
a);this.closeNode.style.display=a?"":"none";a&&(a=b.getLocalization("dijit","common"),this.closeNode&&g.set(this.closeNode,"title",a.itemClose))},_setDisabledAttr:function(a){this.inherited(arguments);if(this.closeNode)if(a)g.remove(this.closeNode,"title");else{var c=b.getLocalization("dijit","common");g.set(this.closeNode,"title",c.itemClose)}},_setLabelAttr:function(b){this.inherited(arguments);!this.showLabel&&!this.params.title&&(this.iconNode.alt=a.trim(this.containerNode.innerText||this.containerNode.textContent||
""))}});h=h("dijit.layout.TabController",f,{baseClass:"dijitTabController",templateString:"\x3cdiv role\x3d'tablist' data-dojo-attach-event\x3d'onkeydown:onkeydown'\x3e\x3c/div\x3e",tabPosition:"top",buttonWidget:c,buttonWidgetCloseClass:"dijitTabCloseButton",postCreate:function(){this.inherited(arguments);var a=new l({id:this.id+"_Menu",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,targetNodeIds:[this.domNode],selector:function(a){return d.contains(a,"dijitClosable")&&
!d.contains(a,"dijitTabDisabled")}});this.own(a);var c=b.getLocalization("dijit","common"),e=this;a.addChild(new n({label:c.itemClose,ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,onClick:function(a){a=k.byNode(this.getParent().currentTarget);e.onCloseButtonClick(a.page)}}))}});h.TabButton=c;return h})},"dijit/layout/StackController":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/keys dojo/_base/lang dojo/on dojo/topic ../focus ../registry ../_Widget ../_TemplatedMixin ../_Container ../form/ToggleButton dojo/touch".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q){d=e("dijit.layout._StackButton",q,{tabIndex:"-1",closeButton:!1,_aria_attr:"aria-selected",buildRendering:function(a){this.inherited(arguments);(this.focusNode||this.domNode).setAttribute("role","tab")}});e=e("dijit.layout.StackController",[n,p,m],{baseClass:"dijitStackController",templateString:"\x3cspan role\x3d'tablist' data-dojo-attach-event\x3d'onkeydown'\x3e\x3c/span\x3e",containerId:"",buttonWidget:d,buttonWidgetCloseClass:"dijitStackCloseButton",pane2button:function(a){return l.byId(this.id+
"_"+a)},postCreate:function(){this.inherited(arguments);this.own(f.subscribe(this.containerId+"-startup",b.hitch(this,"onStartup")),f.subscribe(this.containerId+"-addChild",b.hitch(this,"onAddChild")),f.subscribe(this.containerId+"-removeChild",b.hitch(this,"onRemoveChild")),f.subscribe(this.containerId+"-selectChild",b.hitch(this,"onSelectChild")),f.subscribe(this.containerId+"-containerKeyDown",b.hitch(this,"onContainerKeyDown")));this.containerNode.dojoClick=!0;this.own(a(this.containerNode,"click",
b.hitch(this,function(a){var b=l.getEnclosingWidget(a.target);if(b!=this.containerNode&&!b.disabled&&b.page)for(a=a.target;a!==this.containerNode;a=a.parentNode)if(g.contains(a,this.buttonWidgetCloseClass)){this.onCloseButtonClick(b.page);break}else if(a==b.domNode){this.onButtonClick(b.page);break}})))},onStartup:function(c){this.textDir=c.textDir;h.forEach(c.children,this.onAddChild,this);if(c.selected)this.onSelectChild(c.selected);var d=l.byId(this.containerId).containerNode,e=b.hitch(this,"pane2button");
c={title:"label",showtitle:"showLabel",iconclass:"iconClass",closable:"closeButton",tooltip:"title",disabled:"disabled",textdir:"textdir"};var f=function(b,c){return a(d,"attrmodified-"+b,function(a){var b=e(a.detail&&a.detail.widget&&a.detail.widget.id);b&&b.set(c,a.detail.newValue)})},g;for(g in c)this.own(f(g,c[g]))},destroy:function(a){this.destroyDescendants(a);this.inherited(arguments)},onAddChild:function(a,c){var d=new (b.isString(this.buttonWidget)?b.getObject(this.buttonWidget):this.buttonWidget)({id:this.id+
"_"+a.id,name:this.id+"_"+a.id,label:a.title,disabled:a.disabled,ownerDocument:this.ownerDocument,dir:a.dir,lang:a.lang,textDir:a.textDir||this.textDir,showLabel:a.showTitle,iconClass:a.iconClass,closeButton:a.closable,title:a.tooltip,page:a});this.addChild(d,c);a.controlButton=d;if(!this._currentChild)this.onSelectChild(a);d=a._wrapper.getAttribute("aria-labelledby")?a._wrapper.getAttribute("aria-labelledby")+" "+d.id:d.id;a._wrapper.removeAttribute("aria-label");a._wrapper.setAttribute("aria-labelledby",
d)},onRemoveChild:function(a){this._currentChild===a&&(this._currentChild=null);var b=this.pane2button(a.id);b&&(this.removeChild(b),b.destroy());delete a.controlButton},onSelectChild:function(a){if(a){if(this._currentChild){var b=this.pane2button(this._currentChild.id);b.set("checked",!1);b.focusNode.setAttribute("tabIndex","-1")}b=this.pane2button(a.id);b.set("checked",!0);this._currentChild=a;b.focusNode.setAttribute("tabIndex","0");l.byId(this.containerId)}},onButtonClick:function(a){var b=this.pane2button(a.id);
k.focus(b.focusNode);this._currentChild&&this._currentChild.id===a.id&&b.set("checked",!0);l.byId(this.containerId).selectChild(a)},onCloseButtonClick:function(a){l.byId(this.containerId).closeChild(a);this._currentChild&&(a=this.pane2button(this._currentChild.id))&&k.focus(a.focusNode||a.domNode)},adjacent:function(a){if(!this.isLeftToRight()&&(!this.tabPosition||/top|bottom/.test(this.tabPosition)))a=!a;var b=this.getChildren(),c=h.indexOf(b,this.pane2button(this._currentChild.id)),d=b[c],e;do c=
(c+(a?1:b.length-1))%b.length,e=b[c];while(e.disabled&&e!=d);return e},onkeydown:function(a,b){if(!this.disabled&&!a.altKey){var d=null;if(a.ctrlKey||!a._djpage){switch(a.keyCode){case c.LEFT_ARROW:case c.UP_ARROW:a._djpage||(d=!1);break;case c.PAGE_UP:a.ctrlKey&&(d=!1);break;case c.RIGHT_ARROW:case c.DOWN_ARROW:a._djpage||(d=!0);break;case c.PAGE_DOWN:a.ctrlKey&&(d=!0);break;case c.HOME:for(var e=this.getChildren(),f=0;f<e.length;f++){var g=e[f];if(!g.disabled){this.onButtonClick(g.page);break}}a.stopPropagation();
a.preventDefault();break;case c.END:e=this.getChildren();for(f=e.length-1;0<=f;f--)if(g=e[f],!g.disabled){this.onButtonClick(g.page);break}a.stopPropagation();a.preventDefault();break;case c.DELETE:case 87:if(this._currentChild.closable&&(a.keyCode==c.DELETE||a.ctrlKey))this.onCloseButtonClick(this._currentChild),a.stopPropagation(),a.preventDefault();break;case c.TAB:a.ctrlKey&&(this.onButtonClick(this.adjacent(!a.shiftKey).page),a.stopPropagation(),a.preventDefault())}null!==d&&(this.onButtonClick(this.adjacent(d).page),
a.stopPropagation(),a.preventDefault())}}},onContainerKeyDown:function(a){a.e._djpage=a.page;this.onkeydown(a.e)}});e.StackButton=d;return e})},"dijit/layout/ScrollingTabController":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/_base/lang dojo/on dojo/query dojo/sniff ../registry dojo/text!./templates/ScrollingTabController.html dojo/text!./templates/_ScrollingTabControllerButton.html ./TabController ./utils ../_WidgetsInTemplateMixin ../Menu ../MenuItem ../form/Button ../_HasDropDown dojo/NodeList-dom ../a11yclick".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w){p=e("dijit.layout.ScrollingTabController",[q,s],{baseClass:"dijitTabController dijitScrollingTabController",templateString:p,useMenu:!0,useSlider:!0,tabStripClass:"",_minScroll:5,_setClassAttr:{node:"containerNode",type:"class"},buildRendering:function(){this.inherited(arguments);var a=this.domNode;this.scrollNode=this.tablistWrapper;this._initButtons();this.tabStripClass||(this.tabStripClass="dijitTabContainer"+this.tabPosition.charAt(0).toUpperCase()+
this.tabPosition.substr(1).replace(/-.*/,"")+"None",g.add(a,"tabStrip-disabled"));g.add(this.tablistWrapper,this.tabStripClass)},onStartup:function(){this.inherited(arguments);c.set(this.domNode,"visibility","");this._postStartup=!0;this.own(f(this.containerNode,"attrmodified-label, attrmodified-iconclass",a.hitch(this,function(a){this._dim&&this.resize(this._dim)})))},onAddChild:function(a,b){this.inherited(arguments);c.set(this.containerNode,"width",c.get(this.containerNode,"width")+200+"px")},
onRemoveChild:function(a,b){var c=this.pane2button(a.id);this._selectedTab===c.domNode&&(this._selectedTab=null);this.inherited(arguments)},_initButtons:function(){this._btnWidth=0;this._buttons=k("\x3e .tabStripButton",this.domNode).filter(function(a){if(this.useMenu&&a==this._menuBtn.domNode||this.useSlider&&(a==this._rightBtn.domNode||a==this._leftBtn.domNode))return this._btnWidth+=d.getMarginSize(a).w,!0;c.set(a,"display","none");return!1},this)},_getTabsWidth:function(){var a=this.getChildren();
if(a.length){var b=a[this.isLeftToRight()?0:a.length-1].domNode,a=a[this.isLeftToRight()?a.length-1:0].domNode;return a.offsetLeft+a.offsetWidth-b.offsetLeft}return 0},_enableBtn:function(a){var b=this._getTabsWidth();a=a||c.get(this.scrollNode,"width");return 0<b&&a<b},resize:function(a){this._dim=a;this.scrollNode.style.height="auto";var b=this._contentBox=r.marginBox2contentBox(this.domNode,{h:0,w:a.w});b.h=this.scrollNode.offsetHeight;d.setContentSize(this.domNode,b);b=this._enableBtn(this._contentBox.w);
this._buttons.style("display",b?"":"none");this._leftBtn.region="left";this._rightBtn.region="right";this._menuBtn.region=this.isLeftToRight()?"right":"left";r.layoutChildren(this.domNode,this._contentBox,[this._menuBtn,this._leftBtn,this._rightBtn,{domNode:this.scrollNode,region:"center"}]);this._selectedTab&&(this._anim&&"playing"==this._anim.status()&&this._anim.stop(),this.scrollNode.scrollLeft=this._convertToScrollLeft(this._getScrollForSelectedTab()));this._setButtonClass(this._getScroll());
this._postResize=!0;return{h:this._contentBox.h,w:a.w}},_getScroll:function(){return this.isLeftToRight()||8>l("ie")||l("trident")&&l("quirks")||l("webkit")?this.scrollNode.scrollLeft:c.get(this.containerNode,"width")-c.get(this.scrollNode,"width")+(l("trident")||l("edge")?-1:1)*this.scrollNode.scrollLeft},_convertToScrollLeft:function(a){if(this.isLeftToRight()||8>l("ie")||l("trident")&&l("quirks")||l("webkit"))return a;var b=c.get(this.containerNode,"width")-c.get(this.scrollNode,"width");return(l("trident")||
l("edge")?-1:1)*(a-b)},onSelectChild:function(a,b){var d=this.pane2button(a.id);if(d){var e=d.domNode;if(e!=this._selectedTab&&(this._selectedTab=e,this._postResize)){var f=this._getScroll();f>e.offsetLeft||f+c.get(this.scrollNode,"width")<e.offsetLeft+c.get(e,"width")?(e=this.createSmoothScroll(),b&&(e.onEnd=function(){d.focus()}),e.play()):b&&d.focus()}this.inherited(arguments)}},_getScrollBounds:function(){var a=this.getChildren(),b=c.get(this.scrollNode,"width"),d=c.get(this.containerNode,"width")-
b,e=this._getTabsWidth();if(a.length&&e>b)return{min:this.isLeftToRight()?0:a[a.length-1].domNode.offsetLeft,max:this.isLeftToRight()?a[a.length-1].domNode.offsetLeft+a[a.length-1].domNode.offsetWidth-b:d};a=this.isLeftToRight()?0:d;return{min:a,max:a}},_getScrollForSelectedTab:function(){var a=this._selectedTab,b=c.get(this.scrollNode,"width"),d=this._getScrollBounds(),a=a.offsetLeft+c.get(a,"width")/2-b/2;return a=Math.min(Math.max(a,d.min),d.max)},createSmoothScroll:function(a){if(0<arguments.length){var c=
this._getScrollBounds();a=Math.min(Math.max(a,c.min),c.max)}else a=this._getScrollForSelectedTab();this._anim&&"playing"==this._anim.status()&&this._anim.stop();var d=this,e=this.scrollNode,f=new b.Animation({beforeBegin:function(){this.curve&&delete this.curve;var c=e.scrollLeft,g=d._convertToScrollLeft(a);f.curve=new b._Line(c,g)},onAnimate:function(a){e.scrollLeft=a}});this._anim=f;this._setButtonClass(a);return f},_getBtnNode:function(a){for(a=a.target;a&&!g.contains(a,"tabStripButton");)a=a.parentNode;
return a},doSlideRight:function(a){this.doSlide(1,this._getBtnNode(a))},doSlideLeft:function(a){this.doSlide(-1,this._getBtnNode(a))},doSlide:function(a,b){if(!b||!g.contains(b,"dijitTabDisabled")){var d=0.75*c.get(this.scrollNode,"width")*a,d=this._getScroll()+d;this._setButtonClass(d);this.createSmoothScroll(d).play()}},_setButtonClass:function(a){var b=this._getScrollBounds();this._leftBtn.set("disabled",a<=b.min);this._rightBtn.set("disabled",a>=b.max)}});m=e("dijit.layout._ScrollingTabControllerButtonMixin",
null,{baseClass:"dijitTab tabStripButton",templateString:m,tabIndex:"",isFocusable:function(){return!1}});e("dijit.layout._ScrollingTabControllerButton",[v,m]);e("dijit.layout._ScrollingTabControllerMenuButton",[v,w,m],{containerId:"",tabIndex:"-1",isLoaded:function(){return!1},loadDropDown:function(a){this.dropDown=new t({id:this.containerId+"_menu",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir});var b=n.byId(this.containerId);h.forEach(b.getChildren(),function(a){var c=
new u({id:a.id+"_stcMi",label:a.title,iconClass:a.iconClass,disabled:a.disabled,ownerDocument:this.ownerDocument,dir:a.dir,lang:a.lang,textDir:a.textDir||b.textDir,onClick:function(){b.selectChild(a)}});this.dropDown.addChild(c)},this);a()},closeDropDown:function(a){this.inherited(arguments);this.dropDown&&(this._popupStateNode.removeAttribute("aria-owns"),this.dropDown.destroyRecursive(),delete this.dropDown)}});return p})},"dijit/_HasDropDown":function(){define("dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on dojo/touch ./registry ./focus ./popup ./_FocusMixin".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s){return h("dijit._HasDropDown",s,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:-1,dropDownPosition:["below","above"],_stopClickEvents:!0,_onDropDownMouseDown:function(a){!this.disabled&&!this.readOnly&&("MSPointerDown"!=a.type&&"pointerdown"!=a.type&&a.preventDefault(),this.own(n.once(this.ownerDocument,p.release,l.hitch(this,"_onDropDownMouseUp"))),this.toggleDropDown())},
_onDropDownMouseUp:function(a){var d=this.dropDown,e=!1;if(a&&this._opened){var f=b.position(this._buttonNode,!0);if(!(a.pageX>=f.x&&a.pageX<=f.x+f.w)||!(a.pageY>=f.y&&a.pageY<=f.y+f.h)){for(f=a.target;f&&!e;)c.contains(f,"dijitPopup")?e=!0:f=f.parentNode;if(e){f=a.target;if(d.onItemClick){for(var g;f&&!(g=m.byNode(f));)f=f.parentNode;if(g&&g.onClick&&g.getParent)g.getParent().onItemClick(g,a)}return}}}if(this._opened){if(d.focus&&(!1!==d.autoFocus||"mouseup"==a.type&&!this.hovering))this._focusDropDownTimer=
this.defer(function(){d.focus();delete this._focusDropDownTimer})}else this.focus&&this.defer("focus")},_onDropDownClick:function(a){this._stopClickEvents&&(a.stopPropagation(),a.preventDefault())},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var a={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",
left:"Left",right:"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";c.add(this._arrowWrapperNode||this._buttonNode,"dijit"+a+"ArrowButton")},postCreate:function(){this.inherited(arguments);var a=this.focusNode||this.domNode;this.own(n(this._buttonNode,p.press,l.hitch(this,"_onDropDownMouseDown")),n(this._buttonNode,"click",l.hitch(this,"_onDropDownClick")),n(a,"keydown",l.hitch(this,"_onKey")),n(a,"keyup",l.hitch(this,"_onKeyUp")))},destroy:function(){this._opened&&this.closeDropDown(!0);
this.dropDown&&(this.dropDown._destroyed||this.dropDown.destroyRecursive(),delete this.dropDown);this.inherited(arguments)},_onKey:function(a){if(!this.disabled&&!this.readOnly){var b=this.dropDown,c=a.target;if(b&&(this._opened&&b.handleKey)&&!1===b.handleKey(a))a.stopPropagation(),a.preventDefault();else if(b&&this._opened&&a.keyCode==k.ESCAPE)this.closeDropDown(),a.stopPropagation(),a.preventDefault();else if(!this._opened&&(a.keyCode==k.DOWN_ARROW||(a.keyCode==k.ENTER||a.keyCode==k.SPACE&&(!this._searchTimer||
a.ctrlKey||a.altKey||a.metaKey))&&("input"!==(c.tagName||"").toLowerCase()||c.type&&"text"!==c.type.toLowerCase())))this._toggleOnKeyUp=!0,a.stopPropagation(),a.preventDefault()}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var a=this.dropDown;a&&a.focus&&this.defer(l.hitch(a,"focus"),1)}},_onBlur:function(){this.closeDropDown(!1);this.inherited(arguments)},isLoaded:function(){return!0},loadDropDown:function(a){a()},loadAndOpenDropDown:function(){var a=
new e,b=l.hitch(this,function(){this.openDropDown();a.resolve(this.dropDown)});this.isLoaded()?b():this.loadDropDown(b);return a},toggleDropDown:function(){!this.disabled&&!this.readOnly&&(this._opened?this.closeDropDown(!0):this.loadAndOpenDropDown())},openDropDown:function(){var a=this.dropDown,e=a.domNode,f=this._aroundNode||this.domNode,g=this,h=r.open({parent:this,popup:a,around:f,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){g.closeDropDown(!0)},onCancel:function(){g.closeDropDown(!0)},
onClose:function(){d.set(g._popupStateNode,"popupActive",!1);c.remove(g._popupStateNode,"dijitHasDropDownOpen");g._set("_opened",!1)}});if(this.forceWidth||this.autoWidth&&f.offsetWidth>a._popupWrapper.offsetWidth){var f=f.offsetWidth-a._popupWrapper.offsetWidth,k={w:a.domNode.offsetWidth+f};this._origStyle=e.style.cssText;l.isFunction(a.resize)?a.resize(k):b.setMarginBox(e,k);"R"==h.corner[1]&&(a._popupWrapper.style.left=a._popupWrapper.style.left.replace("px","")-f+"px")}d.set(this._popupStateNode,
"popupActive","true");c.add(this._popupStateNode,"dijitHasDropDownOpen");this._set("_opened",!0);this._popupStateNode.setAttribute("aria-expanded","true");this._popupStateNode.setAttribute("aria-owns",a.id);"presentation"!==e.getAttribute("role")&&!e.getAttribute("aria-labelledby")&&e.setAttribute("aria-labelledby",this.id);return h},closeDropDown:function(a){this._focusDropDownTimer&&(this._focusDropDownTimer.remove(),delete this._focusDropDownTimer);this._opened&&(this._popupStateNode.setAttribute("aria-expanded",
"false"),a&&this.focus&&this.focus(),r.close(this.dropDown),this._opened=!1);this._origStyle&&(this.dropDown.domNode.style.cssText=this._origStyle,delete this._origStyle)}})})},"mw-menu/MenuSeparator":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_CssStateMixin mw-mixins/property/TagMixin mw-mixins/property/VisualFamilyMixin mw-mixins/PreventFocusMixin mw-mixins/mixinDependencyValidator dojo/text!./templates/MenuSeparator.html".split(" "),function(h,e,g,d,c,b,
a,f,k){return h(f.validate([e,g,d,c,b,a]),{baseClass:"mwWidget mwMenuSeparator",templateString:k})})},"mw-mixins/PreventFocusMixin":function(){define(["dojo/_base/declare","dojo/on"],function(h,e){return h(null,{postCreate:function(){this.inherited(arguments);this._getNonFocusableNodes().forEach(function(g){e(g,"mousedown",function(d){d.preventDefault()})})},_getNonFocusableNodes:function(){return[this.domNode]}})})},"MW/toolstrip/constants/MiscConstants":function(){define([],function(){return{DO_NOT_DISPLAY:"ToolstripDoNotDisplay",
TAB_WIDTH:102}})},"MW/toolstrip/widgets/_WidgetMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{postCreate:function(){this.inherited(arguments);this._addDataAttribute("tag");this._addDataAttribute("type")},_addDataAttribute:function(e,g){g=g||this[e];this.domNode&&this.domNode.setAttribute("data-"+e,g)},_setTagAttr:function(e){this._addDataAttribute("tag",e);this._set("tag",e)},_setTypeAttr:function(e){this._addDataAttribute("type",e);this._set("type",e)}})})},"mw-event-utils/doubleClickHandler":function(){define({createCallback:function(h,
e,g){var d=0,c;void 0===g&&(g=200);return function(b){d+=1;1===d?c=setTimeout(function(){d=0;h(b)},g):2===d&&(clearTimeout(c),d=0,b.syntheticEvent||e(b))}}})},"MW/layout/ConfirmationDialog":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/has dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/ConfirmationDialog.html mw-dialog-utils/DialogUtils dojo/i18n!l10n/nls/confirmationDialog".split(" "),function(h,e,g,d,c,b,a,f,k){var l=["warning","question"],n=function(a,
b){this.emit(a.name);b.onClose()},p={question:{icon:"icon_dialog_question_32",buttons:[{name:"failure",label:k.no},{name:"success",label:k.yes}]},warning:{icon:"icon_dialog_warning_32",buttons:[{name:"failure",label:k.cancel},{name:"success",label:k.ok}]}};d("mac")&&Object.keys(p).forEach(function(a){p[a].buttons.reverse()});return h([c,b],{baseClass:"mwConfirmationDialog",templateString:a,title:"I am the Title",message:"I am the message.",type:"warning",postCreate:function(){this.inherited(arguments);
g.add(this.iconNode,p[this.type].icon);this.messageNode.textContent=this.message},_setTypeAttr:function(a){if(-1===l.indexOf(a))throw Error("The 'type' property can only be one of: "+l);this._checkAndSetProperty("type",a)},_setTitleAttr:function(a){this._checkAndSetProperty("title",a)},_setMessageAttr:function(a){this._checkAndSetProperty("message",a)},_checkAndSetProperty:function(a,b){if(this._created)throw Error("The '"+a+"' can only be set during construction!");this._set(a,b)},open:function(){var a=
p[this.type].buttons;a.forEach(function(a){a.buttonHandler={handler:e.hitch(this,n)}},this);f.displayModalDialog(this,this.title,a,{dialogClass:"mwConfirmationDialogContainer"})}})})},"MW/uiframework/MnemonicsStates":function(){define(["dojo/dom-class","MW/uiframework/FocusManager"],function(h,e){return{_currentMnemonicsState:void 0,_toolstrip:void 0,NULL_NULL:1,NULL_CONTROL:2,NULL_TAB:3,CONTROL_TAB:4,TAB_TAB:5,getCurrentMnemonicsState:function(){return this._currentMnemonicsState},setCurrentMnemonicsState:function(e,
d){this._currentMnemonicsState=e;("undefined"!==typeof d?d:1)&&this._manageToolstripFocus(e)},setToolstrip:function(e){this._toolstrip=e},_manageToolstripFocus:function(g){g===this.NULL_NULL?e.refuseFocus(this._toolstrip.domNode):e.temporaryFocus(this._toolstrip.domNode);h.toggle(document.body,"mnemonicsMode",g!==this.NULL_NULL)}}})},"MW/toolstrip/contextmenumanager/ContextMenuManager":function(){define(["mw-utils/Utils","mw-menu/ContextMenu","mw-menu/MenuItem","mw-menu/MenuSeparator"],function(h,
e,g,d){var c={contributors:"Contributors",contextMenu:"ContextMenu"},b={_cmContributors:{},_contextMenus:{},_registerContextMenu:function(a){a.get("managerId")||(a.get("id")?a.managerId=a.get("id"):a.managerId=h.generateUuid());b._contextMenus.hasOwnProperty(a.managerId)||(b._contextMenus[a.managerId]=a,b._cmContributors[a.managerId]={});return a.managerId},_unregisterContextMenu:function(a){a=b._extractManagerId(a);b._contextMenus.hasOwnProperty(a)&&(delete b._contextMenus[a],delete b._cmContributors[a])},
_isRegistered:function(a){a=b._extractManagerId(a);return void 0!==a&&b._contextMenus.hasOwnProperty(a)},_extractManagerId:function(a){var b;a instanceof e&&a.managerId?b=a.managerId:"string"===typeof a&&(b=a);return b},_getContextMenu:function(a){a=b._extractManagerId(a);return b._contextMenus.hasOwnProperty(a)?b._contextMenus[a]:null},_getContributors:function(a){a=b._extractManagerId(a);return b._cmContributors.hasOwnProperty(a)?Object.keys(b._cmContributors[a]):null},_validateProp:function(a){if(!c.hasOwnProperty(a))throw Error("The input attribute '"+
a.toString()+"' is not valid;");},_buildContextMenuContributors:function(a,c){if(!b._isRegistered(a))throw Error("The context menu provided is not registered.");var e=b._extractManagerId(a),h=Object.keys(b._cmContributors[e]),n=[],p={},m={},q=[],r=function(a){var b;if(!(a instanceof g))if("object"===typeof a)a.callback&&(b=a.callback),a=new g(a),b&&a.own(a.on("click",b.bind(a)));else throw Error("Expected input argument to be of type 'MenuItem' or 'Object'");return a},s=function(a){null==a&&(a="default");
if("string"!==typeof a)throw Error("Expected input argument to be of type 'MenuItem'");0>n.indexOf(a)&&(n.push(a),p[a]=new d({tag:a}),p[a].domNode.classList.add("mwMenuSection"),m[a]=[],p[a].domNode.dataset.childCount=m[a].length,q.push(p[a]));return a},t={type:"ContextMenuBuilder",version:"1.0.0",addItems:function(a){if(!(a instanceof Array))throw Error("Expected input argument to be of type 'Array'");a.forEach(function(a){this.addItem(a,a.section)}.bind(this))},addItem:function(a,b){a=r(a);b=s(b);
if(-1<q.indexOf(a))this.placeItemIn(a,b);else{m[b].push(a);p[b].domNode.dataset.childCount=m[b].length;a.section=b;var c=q.indexOf(p[b])+m[b].length+1;q.splice(c,0,a)}},placeItemBefore:function(a,b){a=r(a);b=r(b);a.section!==b.section&&(m[a.section].splice(m[a.section].indexOf(a),1),p[a.section].domNode.dataset.childCount=m[a.section].length,m[b.section].splice(m[b.section].indexOf(b),0,a),p[b.section].domNode.dataset.childCount=m[b.section].length,a.section=b.section);q.splice(q.indexOf(a),1);q.splice(q.indexOf(b),
0,a)},placeItemAfter:function(a,b){a=r(a);b=r(b);a.section!==b.section&&(m[a.section].splice(m[a.section].indexOf(a),1),p[a.section].domNode.dataset.childCount=m[a.section].length,m[b.section].splice(m[b.section].indexOf(b)+1,0,a),p[b.section].domNode.dataset.childCount=m[b.section].length,a.section=b.section);q.splice(q.indexOf(a),1);q.splice(q.indexOf(b)+1,0,a)},placeItemIn:function(a,b){a=r(a);b=s(b);if(a.section!==b){m[a.section].splice(m[a.section].indexOf(a),1);p[a.section].domNode.dataset.childCount=
m[a.section].length;m[b].push(a);p[b].domNode.dataset.childCount=m[b].length;a.section=b;q.splice(q.indexOf(a),1);var c=q.indexOf(p[b])+m[b].length+1;q.splice(c,0,a)}},removeItem:function(a){var b;a=r(a);m[a.section].splice(m[a.section].indexOf(a),1);q.splice(q.indexOf(a),1);1>m[a.section].length?(n[a.section].splice(n[a.section].indexOf(a.section),1),delete m[a.section],b=p[a.section],delete p[a.section],b.destroyRecursive()):p[a.section].domNode.dataset.childCount=m[a.section].length;delete a.section},
getItems:function(a){a=s(a);return m[a]},getItemSection:function(a){a=r(a);return a.section},hasItem:function(a){a=r(a);return-1<q.indexOf(a)},placeSectionBefore:function(a,b){a=s(a);b=s(b);n.splice(n.indexOf(a),1);n.splice(n.indexOf(b),0,a);q.splice(q.indexOf(p[a]),1);var c=q.indexOf(p[b]);q.splice(c,0,p[a]);var d=0;m[a].forEach(function(b){q.splice(q.indexOf(b),1);var c=q.indexOf(p[a])+d++ +1;q.splice(c,0,b)})},placeSectionAfter:function(a,b){a=s(a);b=s(b);n.splice(n.indexOf(a),1);n.splice(n.indexOf(b)+
1,0,a);q.splice(q.indexOf(p[a]),1);var c=q.indexOf(p[b])+m[b].length+1;q.splice(c,0,p[a]);var d=0;m[a].forEach(function(b){q.splice(q.indexOf(b),1);var c=q.indexOf(p[a])+d++ +1;q.splice(c,0,b)})},getSections:function(){return n},hasSection:function(a){a=s(a);return-1<n.indexOf(a)}};0<h.length&&(h.forEach(function(a){(!c||!a?0:c[c.msMatchesSelector?"msMatchesSelector":"matches"](a))&&b._cmContributors[e][a].forEach(function(a){a(t,c)},this)},this),0<q.length&&q.forEach(function(a){b._contextMenus[e].addChild(a)}.bind(this)),
h=b._contextMenus[e].getChildren(),0<h.length&&h[0].domNode.classList.contains("mwMenuSection")&&(h[0].domNode.style.display="none"))}};return{type:"ContextMenuManager",version:"1.0.0",registerContextMenu:function(a){return a instanceof e&&!b._isRegistered(a)?b._registerContextMenu(a):b._extractManagerId(a)},unregisterContextMenu:function(a){(a instanceof e||"string"===typeof a)&&b._isRegistered(a)&&b._unregisterContextMenu(a)},isRegistered:function(a){return b._isRegistered(a)},get:function(a,d){if(b._isRegistered(a))return b._validateProp(d),
b["_get"+c[d]](a)},addContributor:function(a,c,d){if(b._isRegistered(a)){if("string"!==typeof c)throw Error("Expected 'selector' input argument to be of type 'string'");if("function"!==typeof d)throw Error("Expected 'callback' input argument to be of type 'function'");a=b._extractManagerId(a);b._cmContributors[a].hasOwnProperty(c)||(b._cmContributors[a][c]=[]);0>b._cmContributors[a][c].indexOf(d)&&b._cmContributors[a][c].push(d)}},removeContributor:function(a,c,d){if(b._isRegistered(a)){if("string"!==
typeof c)throw Error("Expected 'selector' input argument to be of type 'string'");if("function"!==typeof d)throw Error("Expected 'callback' input argument to be of type 'function'");a=b._extractManagerId(a);b._cmContributors[a].hasOwnProperty(c)&&-1<b._cmContributors[a][c].indexOf(d)&&b._cmContributors[a][c].splice(b._cmContributors[a][c].indexOf(d),1);1>b._cmContributors[a][c].length&&delete b._cmContributors[a][c]}},build:function(a,c,d){b._isRegistered(a)&&(d&&(a=b._getContextMenu(a),a.getChildren().forEach(function(b){a.removeChild(b);
b.destroyRecursive()},this)),b._buildContextMenuContributors(a,c))}}})},"MW/toolstrip/widgets/QAB":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Container dojo/text!./templates/QAB.html ./_WidgetMixin dojo/aspect".split(" "),function(h,e,g,d,c,b,a){return h([e,g,d,b],{templateString:c,constructor:function(){this.own(a.before(this,"addChild",function(a,b){var c=0;0<=b&&(c=b);return[a,c]}),a.after(this,"addChild",function(){this.refresh()}),a.after(this,"removeChild",
function(){this.refresh()}))},postCreate:function(){this.inherited(arguments);this.refresh()},refresh:function(){this.showHideQAB();this.showHideQAGroups();this.showHideSeparators()},showHideQAB:function(){var a=0;this.getChildren().forEach(function(b){a+=b.getChildren().length});this.domNode.style.display=0===a?"none":"block"},showHideQAGroups:function(){this.getChildren().forEach(function(a){0===a.getChildren().length?a.domNode.style.display="none":a.domNode.style.display="inline-block"},this)},
showHideSeparators:function(){this.getChildren().forEach(function(a,b){this._isFirstVisibleQAGroup(a,b)?a.separatorNode.style.display="none":a.separatorNode.style.display="inline-block"},this)},_isFirstVisibleQAGroup:function(a,b){var c=this.getChildren(),d,e=!1;d=0;if(0===b)return!0;for(;d<=b-1;)"none"===c[d].domNode.style.display&&(e=!0),d+=1;return e},restoreFactoryControls:function(){}})})},"MW/toolstrip/widgets/QAGroup":function(){define("dojo/_base/declare dojo/_base/lang dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Container dojo/text!./templates/QAGroup.html ./_WidgetMixin ./_ChildrenWrapperMixin ../utils/DragSorter dojo/aspect".split(" "),
function(h,e,g,d,c,b,a,f,k,l){return h([g,d,c,a,f],{templateString:b,constructor:function(){var a=this;this.own(l.before(this,"addChild",function(a,b){var c=0;0<=b&&(c=b);return[a,c]}),l.after(this,"addChild",function(){var b=a.getParent();b&&(b.refresh(),(b=b.getParent())&&b.resize())}),l.after(this,"removeChild",function(){var b=a.getParent();b&&(b.refresh(),(b=b.getParent())&&b.resize())}))},postCreate:function(){this.inherited(arguments);this.enableQABCustomization&&(this._dragSorter=new k({containerNode:this.containerNode}),
this._dragSorter.on("nodemoved",e.hitch(this,function(a){this.itemMoved({itemId:this.getChildren()[a.oldIndex].id,newIndex:a.newIndex})})))},destroy:function(){this.enableQABCustomization&&this._dragSorter.destroy();this.inherited(arguments)},itemMoved:function(){}})})},"MW/toolstrip/widgets/_ChildrenWrapperMixin":function(){define(["dojo/_base/declare","dojo/dom-construct"],function(h,e){return h(null,{constructor:function(){this._wrappers={};this._childrenWidgets=[]},addChild:function(g,d){var c=
e.create("div",{id:g.id+"_wrapper","class":"toolstripComponentWrapper"},this.containerNode,d);0<=d?this._childrenWidgets.splice(d,0,g):this._childrenWidgets.push(g);this.own(g);e.place(g.domNode,c);this._started&&!g._started&&g.startup();this._wrappers[g.id]=c},removeChild:function(g){var d,c=this._wrappers[g.id];this._childrenWidgets.forEach(function(b,a){g.id===b.id&&(d=a)});this._childrenWidgets.splice(d,1);c&&(g.domNode&&c.removeChild(g.domNode),e.destroy(c),delete this._wrappers[g.id])},getChildren:function(){return this._childrenWidgets}})})},
"MW/toolstrip/utils/DragSorter":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/mouse dojo/Evented dojo/dom-construct dojo/dom-geometry".split(" "),function(h,e,g,d,c,b,a){var f=["-webkit-","-moz-","-ms-",""];return h([c],{constructor:function(a){if(void 0===a.containerNode||1!==a.containerNode.nodeType)throw Error("A containerNode needs to be provided and it should be a DOM Node!");this._dragSorterContainerNode=a.containerNode;this._currentTarget=null;this._previousPageX=0;this._dragSorterContainerNode.classList.add("mwDragSortContainer");
this._dragSortOverlay=b.create("div",{"class":"mwDragSortContainerOverlay"},document.body);this._mouseDownListenerHandle=g(this._dragSorterContainerNode,"mousedown",e.hitch(this,this._mouseDownListener));this._mouseUpListenerHandle=g(window,"mouseup",e.hitch(this,this._mouseUpListener))},_mouseDownListener:function(b){if(d.isLeft(b)&&(this._currentTarget=this._getAncestorWhichIsADirectChildOfContainerNode(b.target),null!==this._currentTarget&&1<this._dragSorterContainerNode.children.length)){var c=
a.position(this._currentTarget);this._mouseMoveListenerHandle=g(document.body,"mousemove",e.hitch(this,this._mouseMoveListener,{index:this._getIndexOfNode(this._currentTarget),position:c,leftOffset:b.pageX-c.x,rightOffset:c.x+c.w-b.pageX,mouseDownCoords:{x:b.pageX,y:b.pageY}}));this._windowSelectStartHandle=g(window,"selectstart",function(a){a.preventDefault()})}},_mouseMoveListener:function(b,c){if(!(5>=Math.abs(b.mouseDownCoords.x-c.pageX)&&5>=Math.abs(b.mouseDownCoords.y-c.pageY))){this._mouseMoveHappened=
!0;var d=a.position(this._dragSorterContainerNode),e=a.getPadBorderExtents(this._dragSorterContainerNode),f=d.x+b.leftOffset+e.l,e=d.x+d.w-b.rightOffset-e.r,g=c.pageX,d=null;this._currentTarget.classList.add("mwDragTarget");document.body.classList.add("mwDragging");g<f?g=f:g>e&&(g=e);this._currentTarget.style.left=g-b.position.x-b.leftOffset+"px";d=c.pageX>this._previousPageX?"r":"l";this._previousPageX=c.pageX;f=this._findNodesOnEitherSide(d);for(e=0;e<this._dragSorterContainerNode.children.length;e++)if(g=
this._dragSorterContainerNode.children[e],g!==this._currentTarget){var h=a.position(g),s=a.position(this._currentTarget);"r"===d?e>=b.index?s.x+s.w>=h.x+h.w/2&&this._applyTranslateX(g,-s.w):-1<f.left.indexOf(g)&&"0"!==g.getAttribute("data-translated")&&this._applyTranslateX(g,0):"l"===d&&(e<=b.index?s.x<=h.x+h.w/2&&this._applyTranslateX(g,s.w):-1<f.right.indexOf(g)&&"0"!==g.getAttribute("data-translated")&&this._applyTranslateX(g,0))}}},_mouseUpListener:function(){this._mouseMoveListenerHandle&&this._mouseMoveListenerHandle.remove();
this._windowSelectStartHandle&&this._windowSelectStartHandle.remove();if(this._mouseMoveHappened){if(null!==this._currentTarget){var a=this._getIndexOfNode(this._currentTarget);this._moveCurrentTargetToNewLocation();this._currentTarget.style.left="";this._currentTarget.classList.remove("mwDragTarget");document.body.classList.remove("mwDragging");this._resetAllSiblingTranslateX();this.emit("nodemoved",{node:this._currentTarget,oldIndex:a,newIndex:this._getIndexOfNode(this._currentTarget)});this._currentTarget=
null}this._mouseMoveHappened=!1}},_findNodesOnEitherSide:function(b){var c={left:[],right:[]},d=a.position(this._dragSorterContainerNode),e=a.getPadBorderExtents(this._dragSorterContainerNode),f=a.position(this._currentTarget);2>=f.x-d.x-e.l?c.right=this._getCurrentTargetSiblings():2>=d.x+d.w-f.x-f.w-e.l?c.left=this._getCurrentTargetSiblings():this._getCurrentTargetSiblings().forEach(function(d){var e=a.position(d);("l"===b?f.x:f.x+f.w)>=e.x+e.w/2?c.left.push(d):c.right.push(d)});return c},_getIndexOfNode:function(a){return Array.prototype.indexOf.call(this._dragSorterContainerNode.children,
a)},_getCurrentTargetSiblings:function(){return[].slice.call(this._dragSorterContainerNode.children).filter(function(a){return a!==this._currentTarget},this)},_getAncestorWhichIsADirectChildOfContainerNode:function(a){var b=null;if(a!==this._dragSorterContainerNode)for(b=a;b.parentNode!==this._dragSorterContainerNode;)b=b.parentNode;return b},_moveCurrentTargetToNewLocation:function(){var c=null,d=a.position(this._dragSorterContainerNode),e=a.getPadBorderExtents(this._dragSorterContainerNode),f=a.position(this._currentTarget),
g=f.x-(d.x+e.l),d=g;this._getCurrentTargetSiblings().forEach(function(b){var d=a.position(b),d=Math.abs(f.x-(d.x+d.w));d<g&&(c=b,g=d)});g===d?b.place(this._currentTarget,this._dragSorterContainerNode,"first"):b.place(this._currentTarget,c,"after")},_applyTranslateX:function(a,b){a.setAttribute("data-translated",b);f.forEach(function(c){a.style[c+"transform"]="translate("+b+"px, 0)"})},_resetAllSiblingTranslateX:function(){this._getCurrentTargetSiblings().forEach(function(a){a.classList.add("mwNoTransition");
this._applyTranslateX(a,0);a.offsetHeight;a.classList.remove("mwNoTransition")},this)},destroy:function(){this._mouseDownListenerHandle.remove();this._mouseUpListenerHandle.remove();this._dragSorterContainerNode.classList.remove("mwDragSortContainer");b.destroy(this._dragSortOverlay)}})})},"MW/toolstrip/widgets/TabGroup":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/TabGroup.html dijit/_Contained dijit/registry ./_WidgetMixin".split(" "),function(h,
e,g,d,c,b,a){return h([e,g,c,a],{templateString:d,constructor:function(){this.tabs=[]},addChild:function(a,b){var c=0,d=null,e,g=0,h,r;!b&&0!==b&&(b=this.tabs.length);this.tabs.splice(b,0,a);if(e=this.getParent()){r=e.getChildren();for(h=r.length;g<h;){if(this===r[g]){0<=b&&(d=c+b);break}c+=r[g].tabs.length;g+=1}e.addTab(a,d)}this.emit("childadded")},removeChild:function(a){var b=this.getParent(),c;c=this.tabs.indexOf(a);-1<c&&this.tabs.splice(c,1);0===this.tabs.length&&this.set("selectedTab","");
b&&b.removeTab(a);this.emit("childremoved")},_setSelectedTabAttr:function(a){var c=this.getParent(),d=b.byId(a);c&&a&&(c.selectTab(d),c.getChildren().forEach(function(a){a!==this&&a.set("selectedTab","")},this));this._set("selectedTab",a)}})})},"MW/toolstrip/widgets/Tab":function(){define("dojo/_base/declare dojo/dom-construct dijit/layout/ContentPane dijit/registry dojo/query dojo/dom-geometry MW/toolstrip/widgets/_WidgetMixin MW/toolstrip/mixins/property/RemovableMixin".split(" "),function(h,e,
g,d,c,b,a,f){return h([g,a,f],{constructor:function(){this["class"]="tabContentPane"},postCreate:function(){this.containerNode=e.create("span",{"class":"sectionContainer"},this.domNode)},resize:function(){var a=this.getParent().getParent();if(a._startupComplete&&!a._ignoreResize){this.inherited(arguments);var c,d,e,f,g,h,s=0;if(!this._destroyed)if(this.inherited(arguments),g=this._getAllDescendantGalleries(),h=g.length,a=this.getChildren(),d=a.length,a.sort(function(a,b){var c=0;a.collapsePriority>
b.collapsePriority?c=-1:a.collapsePriority<b.collapsePriority&&(c=1);return c}),e=this._getWidthOfAllSections(),f=b.position(this.domNode).w,f<e){for(c=h-1;0<=c;){for(;f<e;){if(!g[c].shrink()){s+=1;break}e=this._getWidthOfAllSections();f=b.position(this.domNode).w}c-=1}if(s===h){for(c=d-1;0<=c&&f<e;)a[c].hideDescendantLabels(),e=this._getWidthOfAllSections(),f=b.position(this.domNode).w,c-=1;for(c=d-1;0<=c&&f<e;)a[c].collapse(),e=this._getWidthOfAllSections(),f=b.position(this.domNode).w,c-=1}}else{for(c=
0;c<d&&f>e;){a[c].expand();e=this._getWidthOfAllSections();f=b.position(this.domNode).w;if(f<e){a[c].collapse();break}c+=1}for(c=0;c<d&&f>e;){a[c].showDescendantLabels();e=this._getWidthOfAllSections();f=b.position(this.domNode).w;if(f<e){a[c].hideDescendantLabels();break}c+=1}if(c===d){g=this._getAllDescendantGalleries();h=g.length;for(c=0;c<h;){for(;f>e;)if(g[c].grow()){if(e=this._getWidthOfAllSections(),f=b.position(this.domNode).w,f<e){g[c].shrink();break}}else break;c+=1}}}}},_getAllDescendantGalleries:function(){return c(".gallery",
this.domNode).map(function(a){return d.byNode(a)})},_getWidthOfAllSections:function(){var a,c,d,e=0;a=this.getChildren();c=a.length;for(d=0;d<c;d++)e+=b.position(a[d].domNode).w;return e+20}})})},"MW/toolstrip/mixins/property/RemovableMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{_removable:!1,_removeMessage:"",_getRemovableAttr:function(){return this.get("_removable")},_setRemovableAttr:function(e){if("boolean"!==typeof e)throw Error("'removable' property expected a boolean value.");
this._set("_removable",e)},_getRemoveMessageAttr:function(){return this.get("_removeMessage")},_setRemoveMessageAttr:function(e){if("string"!==typeof e)throw Error("'_removeMessage' property expected a string value.");this._set("_removeMessage",e)},_emitRemoveEvent:function(){this.emit("remove");this.remove()},remove:function(){}})})},"MW/toolstrip/widgets/Section":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-construct dijit/registry dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Container dojo/text!./templates/Section.html ./_WidgetMixin MW/toolstrip/form/SectionDropDownButton ./SectionPopup mw-mixins/ResizeMixin".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m){var q=["PushButton","DropDownButton","SplitButton","ToggleButton","ToggleSplitButton"];return h([b,a,f,l,m],{templateString:k,constructor:function(){this._isCollapsed=!1},_createSectionPopup:function(){this._sectionPopup=new p;this.own(this._sectionPopup);this._sectionDropDownButton=new n({menu:this._sectionPopup,label:this.get("title")});this._sectionDropDownButton.focusNode.setAttribute("tabIndex","0");this.own(this._sectionDropDownButton);this._sectionPopup.domNode.setAttribute("data-focus",
"temporary");this._sectionDropDownButton.placeAt(this.sectionDropDownContainer);this._sectionDropDownButton.startup();this._sectionDropDownButton.set("text",this.title)},_setTitleAttr:function(a){this.titleNode.textContent=a;this._sectionDropDownButton&&this._sectionDropDownButton.set("label",a);this._set("title",a)},collapse:function(){this._sectionPopup||this._createSectionPopup();var a;this._isCollapsed||-1===this.collapsePriority?a=!1:(this._isCollapsed=a=!0,this.sectionWrapper.style.display=
"none",this.sectionDropDownContainer.style.display="inline-block",d.place(this.columnContainerWrapper,this._sectionDropDownButton.menu.domNode),this._sectionDropDownButton.focusNode.setAttribute("tabIndex","0"));return a},expand:function(){var a;this._isCollapsed?(a=!0,this._isCollapsed=!1,this.sectionWrapper.style.display="inline-block",this.sectionDropDownContainer.style.display="none",d.place(this.columnContainerWrapper,this.sectionWrapper,"first"),this._sectionDropDownButton.focusNode.removeAttribute("tabIndex")):
a=!1;return a},showDescendantLabels:function(){this.domNode.classList.remove("mwHideDescendantLabels");this._updateDescendantTitle(!0)},hideDescendantLabels:function(){this.domNode.classList.add("mwHideDescendantLabels");this._updateDescendantTitle(!1)},getPopup:function(){return this._sectionPopup},closePopup:function(){this.isPopupOpen()&&this._sectionDropDownButton.closeMenu()},addChild:function(a){this.inherited(arguments);"Column"===a.type&&a.updateChildrenOrientations()},isPopupOpen:function(){return!this._sectionPopup?
!1:this._sectionDropDownButton.menu.domNode.parentNode&&"none"!==this._sectionDropDownButton.menu.domNode.parentNode.style.display},_updateDescendantTitle:function(a){var b,d;q.forEach(e.hitch(this,function(e){d=this.domNode.querySelectorAll("[data-type\x3d"+e+"]");for(b=0;b<d.length;++b)e=c.getEnclosingWidget(d[b]),"Horizontal"===e.orientation&&(a?e._updateTitle(e.get("description")):e._updateTitle(e.get("text")))}))}})})},"MW/toolstrip/form/SectionDropDownButton":function(){define("dojo/_base/declare MW/toolstrip/form/DropDownButton ../mixins/property/IconOverrideMixin ../mixins/property/OrientationMixin ../mixins/property/TextOverrideMixin ../mixins/property/TypeMixin mw-mixins/property/ShortcutMixin ../mixins/property/MenuIdMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,e,g,d,c,b,a,f,k){return h(k.validate([e,g,d,c,b,a,f]),{visualFamily:"toolstrip",baseClass:"toolstrip mwSectionDropDownButton",type:"SectionDropDownButton",minWidth:38,orientation:"Vertical",verticalHeight:92,doNotSize:!0,preventRestoreFocus:!0,postCreate:function(){this.inherited(arguments);this.set("menuOrientation","below");this.own(this.on("keydown",function(a){switch(a.keyCode){case 37:this.isMenuOpen()&&this.closeMenu();break;case 38:this.isMenuOpen()&&this.closeMenu();break;case 39:this.isMenuOpen()&&
this.closeMenu();break;case 40:this.isMenuOpen()||this.openMenu()}}.bind(this)))},_setLabelAttr:function(a){if("string"!==typeof a)throw Error("'label' property must be of type string.");this.set("text",a);this.focusNode.setAttribute("title",a)},_setDescriptionAttr:function(){},_setShortcutAttr:function(){},_setPlatformizeShortcutAttr:function(){},_getLabelAttr:function(){return this.get("text")},_getTextForDOM:function(a){return a}})})},"MW/toolstrip/form/DropDownButton":function(){define("dojo/_base/declare mw-form/DropDownButton MW/toolstrip/mixins/property/MnemonicMixin MW/toolstrip/mixins/property/MnemonicKeyNavDirectionMixin MW/toolstrip/mixins/property/IconOverrideMixin MW/toolstrip/mixins/property/TextMixin MW/toolstrip/mixins/property/SizeMixin MW/toolstrip/form/mixins/property/DropDownButtonSizeMixin MW/toolstrip/form/mixins/property/DropDownButtonTextMixin MW/toolstrip/mixins/property/OrientationMixin MW/toolstrip/mixins/property/TextOverrideMixin MW/toolstrip/mixins/property/DescriptionOverrideMixin MW/toolstrip/mixins/property/TypeMixin mw-mixins/property/ShortcutMixin MW/toolstrip/mixins/property/MenuIdMixin MW/toolstrip/mixins/property/MenuMixin MW/toolstrip/mixins/property/PreventRestoreFocusMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u){return h(u.validate([e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t]),{visualFamily:"toolstrip",minWidth:38})})},"mw-form/DropDownButton":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_Contained dijit/_CssStateMixin dijit/_FocusMixin dijit/_TemplatedMixin mw-mixins/property/TagMixin mw-mixins/property/MenuMixin mw-mixins/property/HasDynamicMenuMixin mw-mixins/property/DescriptionMixin mw-mixins/property/DisabledMixin mw-mixins/property/IconAlignmentMixin mw-mixins/property/IconMixin mw-mixins/property/ArrowModeMixin mw-mixins/property/SizeMixin mw-mixins/property/TextMixin mw-mixins/property/VisualFamilyMixin mw-mixins/property/ValidationMixin mw-mixins/AccessibilityClickMixin mw-mixins/PreventSelectionMixin mw-form/mixins/property/DropDownButtonIconAlignmentMixin mw-form/mixins/property/DropDownButtonArrowModeMixin mw-form/mixins/property/DropDownButtonTextMixin mw-form/mixins/property/DropDownButtonSizeMixin mw-mixins/mixinDependencyValidator dojo/text!./templates/DropDownButton.html".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,B,F,G,H){return h(G.validate([e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,B,F]),{baseClass:"mwWidget mwDropDownButton",templateString:H})})},"MW/toolstrip/mixins/property/MnemonicMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{mnemonic:"",postCreate:function(){this.inherited(arguments);this._updateMnemonicInDOM(this.get("mnemonic"))},_setMnemonicAttr:function(e){if("string"!==typeof e)throw Error("mnemonic property expects a String!");
this._started&&this._updateMnemonicInDOM(e);this._set("mnemonic",e)},_updateMnemonicInDOM:function(e){if(0<e.length){if(e.split("").some(function(e){return 65>e.charCodeAt(0)||90<e.charCodeAt(0)}))throw Error("mnemonic property should be a String of uppercase characters!");this.focusNode.setAttribute("data-mnemonic",e)}}})})},"MW/toolstrip/mixins/property/MnemonicKeyNavDirectionMixin":function(){define(["dojo/_base/declare"],function(h){var e=["all","none","horizontal","vertical"];return h(null,{mnemonicKeyNavDirection:"all",
postCreate:function(){this.inherited(arguments);this._updateMnemonicKeyNavDirectionInDOM(this.get("mnemonicKeyNavDirection"))},_setMnemonicKeyNavDirectionAttr:function(g){if(-1===e.indexOf(g))throw Error("'mnemonicKeyNavDirection' property expects one of these values: "+e);this._started&&this._updateMnemonicKeyNavDirectionInDOM(g);this._set("mnemonicKeyNavDirection",g)},_updateMnemonicKeyNavDirectionInDOM:function(e){this.focusNode.setAttribute("data-mnemonic-key-nav-direction",e)}})})},"MW/toolstrip/mixins/property/IconOverrideMixin":function(){define(["dojo/_base/declare",
"mw-mixins/property/IconMixin"],function(h,e){var g=h(null,{iconOverride:"",iconProp:"icon",postCreate:function(){this.inherited(arguments);this.set("iconOverride",this.get("iconOverride"))},_setIconOverrideAttr:function(d){if("string"!==typeof d)throw Error("'iconOverride' property expects a literal string!");this._removeOldIcon(this.get("iconOverride"));this._set("iconOverride",d);this._updateDOM(d)},_updateDOM:function(d){d=""!==this.iconOverride?this.iconOverride:this[this.iconProp]?this[this.iconProp]:
this.icon;arguments[0]=d;this.inherited(arguments)},_setIconPropAttr:function(d){this._set("iconProp",d);this._updateDOM(d)}});g._dependencies=[{mixin:e,orderDependent:!0}];return g})},"MW/toolstrip/mixins/property/TextMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{text:"",postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwTextMixin");this._addTextContentClass();this.set("text",this.get("text"))},_addTextContentClass:function(){(this.textNode||
this.domNode).classList.add("mwTextContent")},_getTextForDOM:function(e,g){return e},_placeTextInNode:function(e,g){g=g||this.textNode;this.textNode.setAttribute("data-text-content",this._getTextForDOM(e,g))}})})},"MW/toolstrip/mixins/property/SizeMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{postCreate:function(){this.inherited(arguments);this.height=this.width="auto"},_setHeightAttr:function(e){},_getHeightAttr:function(){return"Horizontal"===this.get("orientation")?
22:72}})})},"MW/toolstrip/form/mixins/property/DropDownButtonSizeMixin":function(){define(["dojo/_base/declare","MW/toolstrip/mixins/property/SizeMixin"],function(h,e){var g=h(null,{_setSize:function(){}});g._dependencies=[{mixin:e,orderDependent:!0}];return g})},"MW/toolstrip/form/mixins/property/DropDownButtonTextMixin":function(){define(["dojo/_base/declare","MW/toolstrip/mixins/property/TextMixin","MW/toolstrip/mixins/property/SizeMixin","mw-form/mixins/property/DropDownButtonSizeMixin"],function(h,
e,g,d){h=h(null,{_addTextContentClass:function(){},_getTextForDOM:function(c,b){var a,d,e=this._getTextNodes();if(b===e.inlineTextElement||b===e.lastTextLineElement){-1<(d=c.lastIndexOf("\n"))?(a=c.substring(0,d),d=c.substring(d+1,c.length)):(a=c,d="");if(b===e.inlineTextElement)return a;if(b===e.lastTextLineElement)return d}else return c},_placeTextInNode:function(c){this._getTextNodes().forEach(function(b){b.setAttribute("data-text-content",this._getTextForDOM(c,b))}.bind(this))},_getTextNodes:function(){var c=
[this.textLine,this.inlineTextLine,this.lastTextLine];c.textElement=c[0];c.inlineTextElement=c[1];c.lastTextLineElement=c[2];return c}});h._dependencies=[{mixin:e,orderDependent:!0},{mixin:g,orderDependent:!1},{mixin:d,orderDependent:!1}];return h})},"MW/toolstrip/mixins/property/OrientationMixin":function(){define(["dojo/_base/declare"],function(h){var e=["Horizontal","Vertical"];return h(null,{orientation:"Horizontal",horizontalHeight:22,verticalHeight:72,_setOrientationAttr:function(g){if(-1===
e.indexOf(g))throw Error("'orientation' property expects one of these values: "+e);this.domNode.classList.remove(this._getClassNameForOrientation(this.get("orientation")));this.domNode.classList.add(this._getClassNameForOrientation(g));"Horizontal"===g?this.set("iconProp","quickAccessIcon"):"Vertical"===g&&this.set("iconProp","icon");this._set("orientation",g)},_getClassNameForOrientation:function(e){return"mw"+e+"Orientation"}})})},"MW/toolstrip/mixins/property/TextOverrideMixin":function(){define(["dojo/_base/declare",
"MW/toolstrip/constants/MiscConstants","MW/toolstrip/mixins/property/TextMixin"],function(h,e,g){h=h(null,{textOverride:"",postCreate:function(){this.inherited(arguments);this.set("textOverride",this.get("textOverride"))},_setTextAttr:function(d){this.inherited(arguments);this._updateNoTextClass()},_setTextOverrideAttr:function(d){if("string"!==typeof d)throw Error("'textOverride' property expects a literal string!");this._placeTextInNode(d,void 0,"textOverride setter");this._set("textOverride",d);
this._updateNoTextClass()},_updateNoTextClass:function(){""===this.get("textOverride")&&""===this.get("text")||this.get("textOverride")===e.DO_NOT_DISPLAY?this.domNode.classList.add("mwNoText"):this.domNode.classList.remove("mwNoText")},_placeTextInNode:function(d,c,b){"textOverride setter"===b?d===e.DO_NOT_DISPLAY?d="":""===d&&(d=this.text):""!==this.textOverride&&(d=this.textOverride===e.DO_NOT_DISPLAY?"":this.textOverride);arguments[0]=d;arguments[1]=c;this.inherited(arguments)}});h._dependencies=
[{mixin:g,orderDependent:!0}];return h})},"MW/toolstrip/mixins/property/DescriptionOverrideMixin":function(){define(["dojo/_base/declare","mw-mixins/property/DescriptionMixin"],function(h,e){var g=h(null,{descriptionOverride:"",postCreate:function(){this.inherited(arguments);this.set("descriptionOverride",this.get("descriptionOverride"))},_setDescriptionOverrideAttr:function(d){if("string"!==typeof d)throw Error("'description' property expects a literal string!");this._updateDescription(d,!0);this._set("descriptionOverride",
d)},_updateDescription:function(d,c){c?""===d&&(d=this.description):""!==this.descriptionOverride&&(d=this.descriptionOverride);arguments[0]=d;this.inherited(arguments)}});g._dependencies=[{mixin:e,orderDependent:!0}];return g})},"MW/toolstrip/mixins/property/TypeMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{type:"",_setTypeAttr:function(e){if("string"!==typeof e)throw Error("type property expects a 'String'");this.domNode.setAttribute("data-type",e);this._set("type",
e)},postCreate:function(){this.inherited(arguments);this.set("type",this.get("type"))}})})},"MW/toolstrip/mixins/property/MenuIdMixin":function(){define(["dojo/_base/declare","dijit/registry","mw-menu/Menu","MW/toolstrip/widgets/gallery/GalleryPopup"],function(h,e,g,d){return h(null,{menuId:"",_setMenuIdAttr:function(c){this._set("menuId",c);this._syncAttributes()},_setMenuAttr:function(c){this.set("menuId",c.get("id"))},_getMenuIdAttr:function(){this._syncAttributes();return this._get("menuId")},
_getMenuAttr:function(){this._syncAttributes();return this._get("menu")},_syncAttributes:function(){var c=e.byId(this._get("menuId"))||null;this._get("menu")!==c&&(this._validateMenuAttr(c),this._set("menu",c))}})})},"MW/toolstrip/widgets/gallery/GalleryPopup":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-class dojo/on dojo/keys dojo/query dojo/dom-geometry dojo/_base/lang dojo/_base/window dojo/aspect dojo/dnd/Source dijit/registry dijit/popup dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Container dojo/i18n!l10n/nls/toolstrip dojo/text!./templates/GalleryPopup.html mw-form/TextField mw-form/ToggleButton mw-form/PushButton mw-dnd/DnDUtils MW/toolstrip/widgets/_PopupBase MW/toolstrip/constants/OrientationConstants MW/toolstrip/GalleryFilter MW/toolstrip/constants/TypeConstants MW/toolstrip/constants/gallery/GalleryViewConstants MW/toolstrip/widgets/_WidgetMixin MW/toolstrip/widgets/gallery/GalleryItemRowCountMixin MW/toolstrip/widgets/gallery/GalleryItemTextLineCountMixin MW/toolstrip/form/SearchTextField".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,B,F,G,H,I,K,C,M,Q){var L=function(a,b){return!a||!b||!(a instanceof Element)?!1:a[a.msMatchesSelector?"msMatchesSelector":"matches"](b)};return h([q,r,s,B,K,C,M],{templateString:u,showHeader:!0,favoritesEnabled:!0,dndEnabled:!1,constructor:function(){this.searchBox=new Q({value:""});this.searchBox._setWidthAttr=function(){};this.own(this.searchBox);this._searchBoxValue="";this._handleCloseButtonClick=f.hitch(this,function(){m.close(this)})},buildRendering:function(){this.inherited(arguments);
this.searchBox.placeAt(this.searchTextFieldContainerNode)},postCreate:function(){var a=this;this.inherited(arguments);this.domNode.setAttribute("data-focus","temporary");this.galleryItemFilters={};this._createSearchBoxAndButtons();this.own(l.after(this,"addChild",function(b){b.set("displayState",a.displayState);b.set("userCustomizable",a.userCustomizable);a.galleryStateChanged()},!0));this.own(l.after(this,"removeChild",function(){a.galleryStateChanged()},!0));this._handleFocusChange=function(a){L(a.target,
".mwToolstripPopupContextMenu, .mwToolstripPopupContextMenu *")||a.target.hasAttribute("dijitpopupparent")&&L(a.target.firstChild,".mwToolstripPopupContextMenu, .mwToolstripPopupContextMenu *")||(a.target&&(a.target instanceof Element&&this.domNode&&this.domNode.parentElement&&"none"!==this.domNode.parentElement.style.display&&!this.domNode.contains(a.target)&&this.domNode!==a.target)&&(this._invokingWidget?this._invokingWidget.domNode&&!this._invokingWidget.domNode.contains(a.target)&&m.close(this):
m.close(this)),this._handleWindowBlur(a))}.bind(this);this._handleWindowBlur=function(a){(a.target===window||a.target===document.documentElement)&&m.close(this)}.bind(this);this.domNode.style.display="none";e.place(this.domNode,k.body());this.noSearchMatchNode.style.display="none";this.noSearchMatchNode.textContent=t.noSearchMatchNode;this._buildAndAddFilters();this._startupHeaderWidgets()},_buildAndAddFilters:function(){var a=this;this.galleryItemFilters.search=new G({id:"search",checkerFunction:function(b){var c,
d;c=a._searchBoxValue;d=RegExp(a._escapeRegExp(c),"i");return""===c||d.test(b.get("text"))||d.test(b.get("description"))||d.test(b.getParent().get("title"))}});this.galleryItemFilters.onlyShowEnabled=new G({id:"onlyShowEnabled",disabled:!0,checkerFunction:function(a){return!1===a.get("disabled")}})},_checkForPopupListInFooter:function(){var a;if(this.footerContainer&&(a=0<b(".toolstripPopupList",this.footerContainer).length?!0:!1))a=b(".toolstripPopupList",this.footerContainer)[0],a=a.getAttribute("widgetid"),
a=p.byId(a),a.onOpen()},enforceFilters:function(){var a,c;c=this.getChildren();this._favCategoryWidget&&c.push(this._favCategoryWidget);c.forEach(function(c){a=c.getChildren();a.forEach(function(a){g.remove(a.domNode,"hideFromView");Object.keys(this.galleryItemFilters).forEach(function(b){b=this.galleryItemFilters[b];!b.disabled&&!b.checkerFunction(a)&&g.add(a.domNode,"hideFromView")},this)},this);1>a.length&&c.hideWhenEmpty||(0<this._searchBoxValue.length||0<a.length)&&b(".hideFromView",c.domNode).length>=
a.length?g.add(c.domNode,"hideFromView"):g.remove(c.domNode,"hideFromView")},this);this._toggleDisplay(this.noSearchMatchNode,b(".Category.hideFromView",this.domNode).length===c.length)},_setUserCustomizableAttr:function(a){this.set("favoritesEnabled",a);this._set("userCustomizable",a)},_setFavoritesEnabledAttr:function(a){if("boolean"!==typeof a)throw Error("Expected input value for 'favoritesEnabled' to be a boolean value.");!0===a?(g.add(this.domNode,"favoritesEnabled"),this.domNode.classList.remove("favoritesDisabled")):
(g.add(this.domNode,"favoritesDisabled"),this.domNode.classList.remove("favoritesEnabled"))},_setShowHeaderAttr:function(a){!1===a?(this.header.style.display="none",this.header.classList.remove("margin")):!0===a&&(this.header.style.display=null,this.header.classList.add("margin"));this._set("showHeader",a)},_setDndEnabledAttr:function(a){if("boolean"!==typeof a)throw Error("Expected input value to be of type 'boolean'.");this._set("dndEnabled",a)},_setDisplayStateAttr:function(a){var b=this.categoryContainer;
b.style.overflowY="hidden";g.remove(this.domNode,I.ICON);g.remove(this.domNode,I.LIST);g.add(this.domNode,a);this._favCategoryWidget&&this._favCategoryWidget.set("displayState",a);this.getChildren().forEach(function(b){b.set("displayState",a)});this._set("displayState",a);this._updateToggleButtons();setTimeout(function(){b.style.overflowY="auto"}.bind(this),0)},_updateToggleButtons:function(){this.displayState===I.ICON?this.iconViewButton&&!this.iconViewButton.checked&&this.iconViewButton.set("checked",
!0):this.listViewButton&&!this.listViewButton.checked&&this.listViewButton.set("checked",!0)},_setFooterIdAttr:function(a){var b=p.byId(a);b?(0===b.getChildren().length&&(b.domNode.style.display="none"),e.place(b.domNode,this.footerContainer),b.startup(),this.footerContainer.style.display="block"):this.footerContainer.style.display="none";this._set("footerId",a)},_setFavCategoryIdAttr:function(a){var b=p.byId(a);b&&(this._favCategoryWidget=b,0===b.getChildren().length&&g.add(b.domNode,"hideFromView"),
b.set("isFavoriteCategory",!0),b.set("galleryPopupId",this.id),e.place(b.domNode,this.favCategoryContainer),this.own(b),b.set("displayState",this.displayState));this._set("favCategoryId",a)},_setPlaceholderTextAttr:function(a){this.searchBox.set("placeholder",a)},_getPlaceholderTextAttr:function(){return this.searchBox.getAttribute("placeholder")},_toggleDisplay:function(a,b){a.style.display=b?"block":"none"},_handleSearchKeyDown:function(a){a.keyCode===c.ESCAPE&&""!==a.target.value&&(this._resetSearchBoxValue(),
a.stopPropagation())},_handleSearchBoxTyping:function(a){this._searchBoxValue=a.mwEventData.currentContent;this.enforceFilters()},_createSearchBoxAndButtons:function(){var a=this;this.searchBox.on("typing",f.hitch(this,this._handleSearchBoxTyping));this.searchBox.on("keydown",f.hitch(this,this._handleSearchKeyDown));this.listViewButton=new w({icon:"icon_view_list_16",tag:"listViewButton",buttonGroup:"galleryPopupView_"+this.id});this.own(this.listViewButton);this.listViewButton.placeAt(this.listViewButtonContainerNode);
this.listViewButton.on("click",f.hitch(this,function(){this.focus()}));this.iconViewButton=new w({icon:"icon_view_icon_16",tag:"iconViewButton",buttonGroup:"galleryPopupView_"+this.id,checked:!0});this.own(this.iconViewButton);this.iconViewButton.placeAt(this.iconViewButtonContainerNode);this.iconViewButton.on("click",f.hitch(this,function(){this.focus()}));d(this.closeButtonNode,"click",this._handleCloseButtonClick);this.listViewButton.on("change",function(b){"checked"===b.mwEventData.propertyName&&
!0===b.mwEventData.newValue&&a.set("displayState",I.LIST)});this.iconViewButton.on("change",function(b){"checked"===b.mwEventData.propertyName&&!0===b.mwEventData.newValue&&a.set("displayState",I.ICON)});this._updateToggleButtons()},_calculateSelfMaxHeight:function(){var a=window.innerHeight-this.domNode.getBoundingClientRect().top;this.domNode.style.maxHeight=a+"px"},_resetSearchBoxValue:function(){this.searchBox.set("value","");this._searchBoxValue="";this.enforceFilters()},_resizeContainerNode:function(a){this.domNode.style.width=
a*this.galleryItemWidth+6+"px"},focus:function(){this.searchBox.focusNode.focus()},_startupHeaderWidgets:function(){this.searchBox.startup();this.listViewButton.startup();this.iconViewButton.startup()},_setColumnCountAttr:function(a){if("number"!==typeof a||0>a)throw Error("'columnCount' property expects a positive integer number!");this._set("columnCount",a)},_calculateSelfWidth:function(){var a;a=this.get("columnCount")||7;this._resizeContainerNode(a)},onOpen:function(){this.inherited(arguments);
this.domNode.parentNode.classList.add("galleryPopupWrapper");this.domNode.parentNode.style.height="auto";this._invokingGallery||this._calculateSelfWidth();this._calculateSelfMaxHeight();this._checkForPopupListInFooter();this._toggleDisplay(this.noSearchMatchNode,!1);setTimeout(function(){this.focus();setTimeout(function(){this.focus();setTimeout(function(){document.addEventListener("mousedown",this._handleFocusChange,!0);document.addEventListener("pointerdown",this._handleFocusChange,!0);window.addEventListener("blur",
this._handleWindowBlur);this.globalListenersCreated=!0}.bind(this),0)}.bind(this),0)}.bind(this),0);this.emit("open")},onClose:function(){this.inherited(arguments);this._resetSearchBoxValue();document.removeEventListener("mousedown",this._handleFocusChange);document.removeEventListener("pointerdown",this._handleFocusChange);window.removeEventListener("blur",this._handleWindowBlur);delete this.globalListenersCreated;this.emit("restorefocus")},destroy:function(){this.inherited(arguments);this.globalListenersCreated&&
window.removeEventListener("blur",this._handleWindowBlur)},galleryStateChanged:function(){},onExecute:function(){},_escapeRegExp:function(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$\x26")},_qeTyping:function(a){this.searchBox._qeTyping(a)},_qeCloseClick:function(){this._handleCloseButtonClick()}})})},"dojo/dnd/Source":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../dom-class ../dom-geometry ../mouse ../ready ../topic ./common ./Selector ./Manager".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p){g.isAsync||f(0,function(){require(["dojo/dnd/AutoSource","dojo/dnd/Target"])});var m=e("dojo.dnd.Source",n,{isSource:!0,horizontal:!1,copyOnly:!1,selfCopy:!1,selfAccept:!0,skipForm:!1,withHandles:!1,autoSync:!1,delay:0,accept:["text"],generateText:!0,constructor:function(a,b){d.mixin(this,d.mixin({},b));var e=this.accept;if(e.length){this.accept={};for(var f=0;f<e.length;++f)this.accept[e[f]]=1}this.mouseDown=this.isDragging=!1;this.targetBox=this.targetAnchor=null;
this.before=!0;this._lastY=this._lastX=0;this.sourceState="";this.isSource&&c.add(this.node,"dojoDndSource");this.targetState="";this.accept&&c.add(this.node,"dojoDndTarget");this.horizontal&&c.add(this.node,"dojoDndHorizontal");this.topics=[k.subscribe("/dnd/source/over",d.hitch(this,"onDndSourceOver")),k.subscribe("/dnd/start",d.hitch(this,"onDndStart")),k.subscribe("/dnd/drop",d.hitch(this,"onDndDrop")),k.subscribe("/dnd/cancel",d.hitch(this,"onDndCancel"))]},checkAcceptance:function(a,b){if(this==
a)return!this.copyOnly||this.selfAccept;for(var c=0;c<b.length;++c){for(var d=a.getItem(b[c].id).type,e=!1,f=0;f<d.length;++f)if(d[f]in this.accept){e=!0;break}if(!e)return!1}return!0},copyState:function(a,b){if(a)return!0;2>arguments.length&&(b=this==p.manager().target);if(b){if(this.copyOnly)return this.selfCopy}else return this.copyOnly;return!1},destroy:function(){m.superclass.destroy.call(this);h.forEach(this.topics,function(a){a.remove()});this.targetAnchor=null},onMouseMove:function(a){if(!(this.isDragging&&
"Disabled"==this.targetState)){m.superclass.onMouseMove.call(this,a);var c=p.manager();if(!this.isDragging&&this.mouseDown&&this.isSource&&(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)){var d=this.getSelectedNodes();d.length&&c.startDrag(this,d,this.copyState(l.getCopyKeyState(a),!0))}if(this.isDragging){d=!1;if(this.current){if(!this.targetBox||this.targetAnchor!=this.current)this.targetBox=b.position(this.current,!0);d=this.horizontal?a.pageX-this.targetBox.x<
this.targetBox.w/2==b.isBodyLtr(this.current.ownerDocument):a.pageY-this.targetBox.y<this.targetBox.h/2}if(this.current!=this.targetAnchor||d!=this.before)this._markTargetAnchor(d),c.canDrop(!this.current||c.source!=this||!(this.current.id in this.selection))}}},onMouseDown:function(a){if(!this.mouseDown&&this._legalMouseDown(a)&&(!this.skipForm||!l.isFormElement(a)))this.mouseDown=!0,this._lastX=a.pageX,this._lastY=a.pageY,m.superclass.onMouseDown.call(this,a)},onMouseUp:function(a){this.mouseDown&&
(this.mouseDown=!1,m.superclass.onMouseUp.call(this,a))},onDndSourceOver:function(a){this!==a?(this.mouseDown=!1,this.targetAnchor&&this._unmarkTargetAnchor()):this.isDragging&&(a=p.manager(),a.canDrop("Disabled"!=this.targetState&&(!this.current||a.source!=this||!(this.current.id in this.selection))))},onDndStart:function(a,b,c){this.autoSync&&this.sync();this.isSource&&this._changeState("Source",this==a?c?"Copied":"Moved":"");b=this.accept&&this.checkAcceptance(a,b);this._changeState("Target",b?
"":"Disabled");this==a&&p.manager().overSource(this);this.isDragging=!0},onDndDrop:function(a,b,c,d){if(this==d)this.onDrop(a,b,c);this.onDndCancel()},onDndCancel:function(){this.targetAnchor&&(this._unmarkTargetAnchor(),this.targetAnchor=null);this.before=!0;this.mouseDown=this.isDragging=!1;this._changeState("Source","");this._changeState("Target","")},onDrop:function(a,b,c){if(this!=a)this.onDropExternal(a,b,c);else this.onDropInternal(b,c)},onDropExternal:function(a,b,c){var d=this._normalizedCreator;
this._normalizedCreator=this.creator?function(b,c){return d.call(this,a.getItem(b.id).data,c)}:c?function(b){var c=a.getItem(b.id);b=b.cloneNode(!0);b.id=l.getUniqueId();return{node:b,data:c.data,type:c.type}}:function(b){var c=a.getItem(b.id);a.delItem(b.id);return{node:b,data:c.data,type:c.type}};this.selectNone();!c&&!this.creator&&a.selectNone();this.insertNodes(!0,b,this.before,this.current);!c&&this.creator&&a.deleteSelectedNodes();this._normalizedCreator=d},onDropInternal:function(a,b){var c=
this._normalizedCreator;if(!(this.current&&this.current.id in this.selection)){if(b)this._normalizedCreator=this.creator?function(a,b){return c.call(this,this.getItem(a.id).data,b)}:function(a){var b=this.getItem(a.id);a=a.cloneNode(!0);a.id=l.getUniqueId();return{node:a,data:b.data,type:b.type}};else{if(!this.current)return;this._normalizedCreator=function(a){var b=this.getItem(a.id);return{node:a,data:b.data,type:b.type}}}this._removeSelection();this.insertNodes(!0,a,this.before,this.current);this._normalizedCreator=
c}},onDraggingOver:function(){},onDraggingOut:function(){},onOverEvent:function(){m.superclass.onOverEvent.call(this);p.manager().overSource(this);if(this.isDragging&&"Disabled"!=this.targetState)this.onDraggingOver()},onOutEvent:function(){m.superclass.onOutEvent.call(this);p.manager().outSource(this);if(this.isDragging&&"Disabled"!=this.targetState)this.onDraggingOut()},_markTargetAnchor:function(a){this.current==this.targetAnchor&&this.before==a||(this.targetAnchor&&this._removeItemClass(this.targetAnchor,
this.before?"Before":"After"),this.targetAnchor=this.current,this.targetBox=null,this.before=a,this.targetAnchor&&this._addItemClass(this.targetAnchor,this.before?"Before":"After"))},_unmarkTargetAnchor:function(){this.targetAnchor&&(this._removeItemClass(this.targetAnchor,this.before?"Before":"After"),this.targetBox=this.targetAnchor=null,this.before=!0)},_markDndStatus:function(a){this._changeState("Source",a?"Copied":"Moved")},_legalMouseDown:function(b){if("touchstart"!=b.type&&!a.isLeft(b))return!1;
if(!this.withHandles)return!0;for(b=b.target;b&&b!==this.node;b=b.parentNode){if(c.contains(b,"dojoDndHandle"))return!0;if(c.contains(b,"dojoDndItem")||c.contains(b,"dojoDndIgnore"))break}return!1}});return m})},"dojo/dnd/Selector":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../dom ../dom-construct ../mouse ../_base/NodeList ../on ../touch ./common ./Container".split(" "),function(h,e,g,d,c,b,a,f,k,l,n,p){var m=e("dojo.dnd.Selector",p,{constructor:function(a,b){b||
(b={});this.singular=b.singular;this.autoSync=b.autoSync;this.selection={};this.anchor=null;this.simpleSelection=!1;this.events.push(k(this.node,l.press,d.hitch(this,"onMouseDown")),k(this.node,l.release,d.hitch(this,"onMouseUp")))},singular:!1,getSelectedNodes:function(){var a=new f,b=n._empty,d;for(d in this.selection)d in b||a.push(c.byId(d));return a},selectNone:function(){return this._removeSelection()._removeAnchor()},selectAll:function(){this.forInItems(function(a,b){this._addItemClass(c.byId(b),
"Selected");this.selection[b]=1},this);return this._removeAnchor()},deleteSelectedNodes:function(){var a=n._empty,d;for(d in this.selection)if(!(d in a)){var e=c.byId(d);this.delItem(d);b.destroy(e)}this.anchor=null;this.selection={};return this},forInSelectedItems:function(a,b){b=b||g.global;var c=this.selection,d=n._empty,e;for(e in c)e in d||a.call(b,this.getItem(e),e,this)},sync:function(){m.superclass.sync.call(this);this.anchor&&!this.getItem(this.anchor.id)&&(this.anchor=null);var a=[],b=n._empty,
c;for(c in this.selection)c in b||this.getItem(c)||a.push(c);h.forEach(a,function(a){delete this.selection[a]},this);return this},insertNodes:function(a,b,c,d){var e=this._normalizedCreator;this._normalizedCreator=function(b,c){var d=e.call(this,b,c);a?(this.anchor?this.anchor!=d.node&&(this._removeItemClass(d.node,"Anchor"),this._addItemClass(d.node,"Selected")):(this.anchor=d.node,this._removeItemClass(d.node,"Selected"),this._addItemClass(this.anchor,"Anchor")),this.selection[d.node.id]=1):(this._removeItemClass(d.node,
"Selected"),this._removeItemClass(d.node,"Anchor"));return d};m.superclass.insertNodes.call(this,b,c,d);this._normalizedCreator=e;return this},destroy:function(){m.superclass.destroy.call(this);this.selection=this.anchor=null},onMouseDown:function(b){this.autoSync&&this.sync();if(this.current)if(!this.singular&&!n.getCopyKeyState(b)&&!b.shiftKey&&this.current.id in this.selection)this.simpleSelection=!0,a.isLeft(b)&&(b.stopPropagation(),b.preventDefault());else{if(!this.singular&&b.shiftKey){n.getCopyKeyState(b)||
this._removeSelection();var c=this.getAllNodes();if(c.length&&(this.anchor||(this.anchor=c[0],this._addItemClass(this.anchor,"Anchor")),this.selection[this.anchor.id]=1,this.anchor!=this.current)){for(var d=0,e;d<c.length&&!(e=c[d],e==this.anchor||e==this.current);++d);for(++d;d<c.length;++d){e=c[d];if(e==this.anchor||e==this.current)break;this._addItemClass(e,"Selected");this.selection[e.id]=1}this._addItemClass(this.current,"Selected");this.selection[this.current.id]=1}}else this.singular?this.anchor==
this.current?n.getCopyKeyState(b)&&this.selectNone():(this.selectNone(),this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=1):n.getCopyKeyState(b)?this.anchor==this.current?(delete this.selection[this.anchor.id],this._removeAnchor()):this.current.id in this.selection?(this._removeItemClass(this.current,"Selected"),delete this.selection[this.current.id]):(this.anchor&&(this._removeItemClass(this.anchor,"Anchor"),this._addItemClass(this.anchor,"Selected")),
this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1):this.current.id in this.selection||(this.selectNone(),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1);b.stopPropagation();b.preventDefault()}},onMouseUp:function(){this.simpleSelection&&(this.simpleSelection=!1,this.selectNone(),this.current&&(this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=1))},
onMouseMove:function(){this.simpleSelection=!1},onOverEvent:function(){this.onmousemoveEvent=k(this.node,l.move,d.hitch(this,"onMouseMove"))},onOutEvent:function(){this.onmousemoveEvent&&(this.onmousemoveEvent.remove(),delete this.onmousemoveEvent)},_removeSelection:function(){var a=n._empty,b;for(b in this.selection)if(!(b in a)){var d=c.byId(b);d&&this._removeItemClass(d,"Selected")}this.selection={};return this},_removeAnchor:function(){this.anchor&&(this._removeItemClass(this.anchor,"Anchor"),
this.anchor=null);return this}});return m})},"dojo/dnd/Container":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../_base/window ../dom ../dom-class ../dom-construct ../Evented ../has ../on ../query ../touch ./common".split(" "),function(h,e,g,d,c,b,a,f,k,l,n,p,m,q){e=e("dojo.dnd.Container",k,{skipForm:!1,allowNested:!1,constructor:function(c,e){this.node=b.byId(c);e||(e={});this.creator=e.creator||null;this.skipForm=e.skipForm;this.parent=e.dropParent&&b.byId(e.dropParent);
this.map={};this.current=null;this.containerState="";a.add(this.node,"dojoDndContainer");(!e||!e._skipStartup)&&this.startup();this.events=[n(this.node,m.over,d.hitch(this,"onMouseOver")),n(this.node,m.out,d.hitch(this,"onMouseOut")),n(this.node,"dragstart",d.hitch(this,"onSelectStart")),n(this.node,"selectstart",d.hitch(this,"onSelectStart"))]},creator:function(){},getItem:function(a){return this.map[a]},setItem:function(a,b){this.map[a]=b},delItem:function(a){delete this.map[a]},forInItems:function(a,
b){b=b||g.global;var c=this.map,d=q._empty,e;for(e in c)e in d||a.call(b,c[e],e,this);return b},clearItems:function(){this.map={}},getAllNodes:function(){return p((this.allowNested?"":"\x3e ")+".dojoDndItem",this.parent)},sync:function(){var a={};this.getAllNodes().forEach(function(b){if(b.id){var c=this.getItem(b.id);if(c){a[b.id]=c;return}}else b.id=q.getUniqueId();var c=b.getAttribute("dndType"),d=b.getAttribute("dndData");a[b.id]={data:d||b.innerHTML,type:c?c.split(/\s*,\s*/):["text"]}},this);
this.map=a;return this},insertNodes:function(a,b,c){this.parent.firstChild?b?c||(c=this.parent.firstChild):c&&(c=c.nextSibling):c=null;var d;if(c)for(b=0;b<a.length;++b)d=this._normalizedCreator(a[b]),this.setItem(d.node.id,{data:d.data,type:d.type}),c.parentNode.insertBefore(d.node,c);else for(b=0;b<a.length;++b)d=this._normalizedCreator(a[b]),this.setItem(d.node.id,{data:d.data,type:d.type}),this.parent.appendChild(d.node);return this},destroy:function(){h.forEach(this.events,function(a){a.remove()});
this.clearItems();this.node=this.parent=this.current=null},markupFactory:function(a,b,c){a._skipStartup=!0;return new c(b,a)},startup:function(){if(!this.parent&&(this.parent=this.node,"table"==this.parent.tagName.toLowerCase())){var a=this.parent.getElementsByTagName("tbody");a&&a.length&&(this.parent=a[0])}this.defaultCreator=q._defaultCreator(this.parent);this.sync()},onMouseOver:function(a){for(var b=a.relatedTarget;b&&b!=this.node;)try{b=b.parentNode}catch(c){b=null}b||(this._changeState("Container",
"Over"),this.onOverEvent());b=this._getChildByEvent(a);this.current!=b&&(this.current&&this._removeItemClass(this.current,"Over"),b&&this._addItemClass(b,"Over"),this.current=b)},onMouseOut:function(a){for(a=a.relatedTarget;a;){if(a==this.node)return;try{a=a.parentNode}catch(b){a=null}}this.current&&(this._removeItemClass(this.current,"Over"),this.current=null);this._changeState("Container","");this.onOutEvent()},onSelectStart:function(a){if(!this.skipForm||!q.isFormElement(a))a.stopPropagation(),
a.preventDefault()},onOverEvent:function(){},onOutEvent:function(){},_changeState:function(b,c){var d="dojoDnd"+b,e=b.toLowerCase()+"State";a.replace(this.node,d+c,d+this[e]);this[e]=c},_addItemClass:function(b,c){a.add(b,"dojoDndItem"+c)},_removeItemClass:function(b,c){a.remove(b,"dojoDndItem"+c)},_getChildByEvent:function(b){if(b=b.target)for(var c=b.parentNode;c;b=c,c=b.parentNode)if((c==this.parent||this.allowNested)&&a.contains(b,"dojoDndItem"))return b;return null},_normalizedCreator:function(b,
c){var e=(this.creator||this.defaultCreator).call(this,b,c);d.isArray(e.type)||(e.type=["text"]);e.node.id||(e.node.id=q.getUniqueId());a.add(e.node,"dojoDndItem");return e}});q._createNode=function(a){return!a?q._createSpan:function(b){return f.create(a,{innerHTML:b})}};q._createTrTd=function(a){var b=f.create("tr");f.create("td",{innerHTML:a},b);return b};q._createSpan=function(a){return f.create("span",{innerHTML:a})};q._defaultCreatorNodes={ul:"li",ol:"li",div:"div",p:"div"};q._defaultCreator=
function(a){a=a.tagName.toLowerCase();var b="tbody"==a||"thead"==a?q._createTrTd:q._createNode(q._defaultCreatorNodes[a]);return function(a,c){var e=a&&d.isObject(a),f,g;e&&a.tagName&&a.nodeType&&a.getAttribute?(f=a.getAttribute("dndData")||a.innerHTML,e=(e=a.getAttribute("dndType"))?e.split(/\s*,\s*/):["text"],g=a):(f=e&&a.data?a.data:a,e=e&&a.type?a.type:["text"],g=("avatar"==c?q._createSpan:b)(String(f)));g.id||(g.id=q.getUniqueId());return{node:g,data:f,type:e}}};return e})},"dojo/dnd/Manager":function(){define("../_base/array ../_base/declare ../_base/lang ../_base/window ../dom-class ../Evented ../has ../keys ../on ../topic ../touch ./common ./autoscroll ./Avatar".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q){var r=e("dojo.dnd.Manager",[b],{constructor:function(){this.source=this.avatar=null;this.nodes=[];this.copy=!0;this.target=null;this.canDropFlag=!1;this.events=[]},OFFSET_X:a("touch")?4:16,OFFSET_Y:a("touch")?4:16,overSource:function(a){this.avatar&&(this.target=a&&"Disabled"!=a.targetState?a:null,this.canDropFlag=Boolean(this.target),this.avatar.update());l.publish("/dnd/source/over",a)},outSource:function(a){this.avatar?this.target==a&&(this.target=null,this.canDropFlag=
!1,this.avatar.update(),l.publish("/dnd/source/over",null)):l.publish("/dnd/source/over",null)},startDrag:function(a,b,e){function f(a){a.preventDefault();a.stopPropagation()}m.autoScrollStart(d.doc);this.source=a;this.nodes=b;this.copy=Boolean(e);this.avatar=this.makeAvatar();d.body().appendChild(this.avatar.node);l.publish("/dnd/start",a,b,this.copy);this.events=[k(d.doc,n.move,g.hitch(this,"onMouseMove")),k(d.doc,n.release,g.hitch(this,"onMouseUp")),k(d.doc,"keydown",g.hitch(this,"onKeyDown")),
k(d.doc,"keyup",g.hitch(this,"onKeyUp")),k(d.doc,"dragstart",f),k(d.body(),"selectstart",f)];c.add(d.body(),"dojoDnd"+(e?"Copy":"Move"))},canDrop:function(a){a=Boolean(this.target&&a);this.canDropFlag!=a&&(this.canDropFlag=a,this.avatar.update())},stopDrag:function(){c.remove(d.body(),["dojoDndCopy","dojoDndMove"]);h.forEach(this.events,function(a){a.remove()});this.events=[];this.avatar.destroy();this.source=this.target=this.avatar=null;this.nodes=[]},makeAvatar:function(){return new q(this)},updateAvatar:function(){this.avatar.update()},
onMouseMove:function(b){var c=this.avatar;c&&(m.autoScrollNodes(b),c=c.node.style,c.left=b.pageX+this.OFFSET_X+"px",c.top=b.pageY+this.OFFSET_Y+"px",c=Boolean(this.source.copyState(p.getCopyKeyState(b))),this.copy!=c&&this._setCopyStatus(c));a("touch")&&b.preventDefault()},onMouseUp:function(a){if(this.avatar){if(this.target&&this.canDropFlag){var b=Boolean(this.source.copyState(p.getCopyKeyState(a)));l.publish("/dnd/drop/before",this.source,this.nodes,b,this.target,a);l.publish("/dnd/drop",this.source,
this.nodes,b,this.target,a)}else l.publish("/dnd/cancel");this.stopDrag()}},onKeyDown:function(a){if(this.avatar)switch(a.keyCode){case f.CTRL:a=Boolean(this.source.copyState(!0));this.copy!=a&&this._setCopyStatus(a);break;case f.ESCAPE:l.publish("/dnd/cancel"),this.stopDrag()}},onKeyUp:function(a){this.avatar&&a.keyCode==f.CTRL&&(a=Boolean(this.source.copyState(!1)),this.copy!=a&&this._setCopyStatus(a))},_setCopyStatus:function(a){this.copy=a;this.source._markDndStatus(this.copy);this.updateAvatar();
c.replace(d.body(),"dojoDnd"+(this.copy?"Copy":"Move"),"dojoDnd"+(this.copy?"Move":"Copy"))}});p._manager=null;r.manager=p.manager=function(){p._manager||(p._manager=new r);return p._manager};return r})},"dojo/dnd/Avatar":function(){define("../_base/declare ../_base/window ../dom ../dom-attr ../dom-class ../dom-construct ../hccss ../query".split(" "),function(h,e,g,d,c,b,a,f){return h("dojo.dnd.Avatar",null,{constructor:function(a){this.manager=a;this.construct()},construct:function(){var c=b.create("table",
{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),e=this.manager.source,f,g=b.create("tbody",null,c),h=b.create("tr",null,g),q=b.create("td",null,h),r=Math.min(5,this.manager.nodes.length),s=0;a("highcontrast")&&b.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"\x3c"},q);b.create("span",{innerHTML:e.generateText?this._generateText():""},q);for(d.set(h,{"class":"dojoDndAvatarHeader",style:{opacity:0.9}});s<r;++s)e.creator?f=e._normalizedCreator(e.getItem(this.manager.nodes[s].id).data,
"avatar").node:(f=this.manager.nodes[s].cloneNode(!0),"tr"==f.tagName.toLowerCase()&&(h=b.create("table"),b.create("tbody",null,h).appendChild(f),f=h)),f.id="",h=b.create("tr",null,g),q=b.create("td",null,h),q.appendChild(f),d.set(h,{"class":"dojoDndAvatarItem",style:{opacity:(9-s)/10}});this.node=c},destroy:function(){b.destroy(this.node);this.node=!1},update:function(){c.toggle(this.node,"dojoDndAvatarCanDrop",this.manager.canDropFlag);if(a("highcontrast")){var b=g.byId("a11yIcon"),d="+";this.manager.canDropFlag&&
!this.manager.copy?d="\x3c ":!this.manager.canDropFlag&&!this.manager.copy?d="o":this.manager.canDropFlag||(d="x");b.innerHTML=d}f("tr.dojoDndAvatarHeader td span"+(a("highcontrast")?" span":""),this.node).forEach(function(a){a.innerHTML=this.manager.source.generateText?this._generateText():""},this)},_generateText:function(){return this.manager.nodes.length.toString()}})})},"mw-form/TextField":function(){define("dojo/_base/declare dojo/_base/lang dojo/keys dijit/_WidgetBase dijit/_Contained dijit/_CssStateMixin dijit/_FocusMixin dijit/_TemplatedMixin mw-mixins/property/TagMixin mw-mixins/property/DescriptionMixin mw-mixins/property/DisabledMixin mw-mixins/property/HorizontalAlignmentMixin mw-mixins/property/EditableMixin mw-mixins/property/SizeMixin mw-mixins/property/TextInputValueMixin mw-form/mixins/SharedTextInputMixin mw-mixins/property/PlaceholderMixin mw-mixins/property/VisualFamilyMixin mw-mixins/property/ValidationMixin mw-mixins/mixinDependencyValidator mw-mixins/event/ChangeEventMixin mw-mixins/event/TypingEventMixin dojo/text!./templates/TextField.html".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,B){return h(w.validate([d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,x,A]),{baseClass:"mwWidget mwTextField",templateString:B,horizontalAlignment:"left",width:150,height:22,constructor:function(){this._addKeysThatPreventTypingEvent([g.ENTER])},_handleEnterKey:function(){var a,b;a=this.inputNode.value;b=this.get("value");this.set("value",a);a=this.get("value");b!==a&&this._triggerChangeEvent("value",b,a);this.domNode.classList.add("mwTextFieldHighlight");this.defer(e.hitch(this,
function(){this.domNode.classList.remove("mwTextFieldHighlight")}),200)},_onKeyUp:function(a){this.inherited(arguments);a.keyCode===g.ENTER&&this._handleEnterKey()},_qeTypeOverWithEnter:function(a){var b=this.get("value");this.set("value",a);this._triggerChangeEvent("value",b,a)},_setDisabledAttr:function(a){this.inherited(arguments);!0===a?this.inputNode.setAttribute("disabled",""):this.inputNode.removeAttribute("disabled")}})})},"mw-mixins/property/EditableMixin":function(){define(["dojo/_base/declare"],
function(h){return h(null,{editable:!0,postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwEditableMixin");this._setEditableAttr(this.get("editable"))},_setEditableAttr:function(e){this.inputNode.readOnly=!e;e?this.domNode.classList.remove("mwNonEditable"):this.domNode.classList.add("mwNonEditable");this._set("editable",e)}})})},"mw-mixins/property/TextInputValueMixin":function(){define(["dojo/_base/declare","dojo/on"],function(h,e){return h(null,{value:"",postCreate:function(){this.inherited(arguments);
this.domNode.classList.add("mwTextInputValueMixin");this._setValueAttr(this.get("value"));this._stopChangeEventBubbling()},_setValueAttr:function(e){this.setValueInDom(e);this._set("value",e)},_stopChangeEventBubbling:function(){this.own(e(this.inputNode,"change",function(e){e.stopPropagation()}))},setValueInDom:function(e){this.inputNode.value=e}})})},"mw-form/mixins/SharedTextInputMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/keys dijit/_FocusMixin mw-mixins/property/PlaceholderMixin mw-mixins/event/ChangeEventMixin mw-mixins/event/TypingEventMixin".split(" "),
function(h,e,g,d,c,b,a){93;g.TAB;return h([d,c,b,a],{constructor:function(){this._preventTypingEventForKeys=[g.UP_ARROW,g.DOWN_ARROW,g.RIGHT_ARROW,g.LEFT_ARROW,g.PAGE_DOWN,g.PAGE_UP,g.HOME,g.END,g.ESCAPE,g.CAPS_LOCK,16,17,18,91,92,93]},_addKeysThatPreventTypingEvent:function(a){if(!Array.isArray(a))throw"Input to _addKeysThatPreventTypingEvent was not an array";this._preventTypingEventForKeys=this._preventTypingEventForKeys.concat(a)},postCreate:function(){this.inherited(arguments);this.on("keyup",
e.hitch(this,"_onKeyUp"))},_onKeyUp:function(a){0<=this._preventTypingEventForKeys.indexOf(a.keyCode)||this._triggerTypingEvent(this.inputNode.value)},_onBlur:function(){var a,b;a=this.inputNode.value;b=this.get("value");this._set("value",a);a=this.get("value");b!==a&&this._triggerChangeEvent("value",b,a);this.inherited(arguments)}})})},"mw-mixins/property/PlaceholderMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom dojo/dom-construct dojo/on dijit/focus mw-mixins/property/TextInputValueMixin".split(" "),
function(h,e,g,d,c,b,a){h=h(null,{placeholder:"",_setPlaceholderAttr:function(a){if("string"!==typeof a)throw Error("'placeholder' property expects a literal string!");this.inputNode.placeholder=a;this._set("placeholder",a)}});h._dependencies=[{mixin:a,orderDependent:!1}];return h})},"mw-mixins/event/TypingEventMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{_triggerTypingEvent:function(e){this.emit("typing",{mwEventData:{currentContent:e}})},_qeTyping:function(e){this.inputNode.value=
e;this._triggerTypingEvent(e)}})})},"mw-dnd/DnDUtils":function(){define(["dojo/_base/declare","dojo/aspect","dojo/dnd/Manager","mw-utils/Utils"],function(h,e,g,d){var c={},b=function(a){var b=-1;Object.keys(c).some(function(d,e,g){return c[d].dndSource===a?(b=d,!0):!1});return b};e.around(g.manager(),"makeAvatar",function(a){return function(){var b=g.manager(),d;!1===Object.keys(c).some(function(a,e,g){return c[a].dndSource===b.source?(d=c[a].makeAvatarFunc.call(b),!0):!1})&&(d=a.call(b));return d}});
return{registerMakeAvatar:function(a,e){var g=b(a);-1===g&&(g=d.generateUuid());c[g]={dndSource:a,makeAvatarFunc:e}},unregisterMakeAvatar:function(a){a=b(a);-1!==a&&delete c[a]},destroy:function(a){a&&a.remove()}}})},"MW/toolstrip/widgets/_PopupBase":function(){define(["dojo/_base/declare"],function(h){return h(null,{onOpen:function(){this.isShowingNow=!0},onClose:function(){this.isShowingNow=!1}})})},"MW/toolstrip/constants/OrientationConstants":function(){define([],function(){return{VERTICAL:"Vertical",
HORIZONTAL:"Horizontal"}})},"MW/toolstrip/GalleryFilter":function(){define(["dojo/_base/declare","mw-log/Log"],function(h,e){return h(null,{constructor:function(g){g=g||{};e.assert(g.id,"An id is required for a filter!");e.assert(g.checkerFunction,"A checker function is required for a filter!");this.id=g.id;this.disabled=!!g.disabled;this.checkerFunction=g.checkerFunction}})})},"MW/toolstrip/widgets/gallery/GalleryItemRowCountMixin":function(){define(["dojo/_base/declare","dojo/dom-class"],function(h,
e){return h(null,{_setGalleryItemRowCountAttr:function(g){e.remove(this.domNode,"oneRow");e.remove(this.domNode,"twoRow");e.remove(this.domNode,"threeRow");1===g?e.add(this.domNode,"oneRow"):2===g?e.add(this.domNode,"twoRow"):3===g&&e.add(this.domNode,"threeRow");this._set("galleryItemRowCount",g)}})})},"MW/toolstrip/widgets/gallery/GalleryItemTextLineCountMixin":function(){define(["dojo/_base/declare","dojo/dom-class"],function(h,e){return h(null,{_setGalleryItemTextLineCountAttr:function(g){e.remove(this.domNode,
"zeroLine");e.remove(this.domNode,"oneLine");e.remove(this.domNode,"twoLine");0===g?e.add(this.domNode,"zeroLine"):1===g?e.add(this.domNode,"oneLine"):2===g&&e.add(this.domNode,"twoLine");this._set("galleryItemTextLineCount",g)}})})},"MW/toolstrip/form/SearchTextField":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/_base/lang","dojo/on","mw-form/TextField"],function(h,e,g,d,c){return h(c,{baseClass:"mwWidget mwTextField mwSearchTextField",postCreate:function(){this.inherited(arguments);
this.clearLink=e.create("div",{"class":"clearTextContainerNode"},this.domNode,"first");this._toggleSearchBoxIcon();this.on("typing",g.hitch(this,this._toggleSearchBoxIcon));this.watch("value",g.hitch(this,this._toggleSearchBoxIcon));this.own(d(this.clearLink,"click",g.hitch(this,this._onClickClearButtonHandler)))},_toggleSearchBoxIcon:function(){""!==this.inputNode.value?this.clearLink.classList.add("clearTextIconVisible"):this.clearLink.classList.remove("clearTextIconVisible")},_onClickClearButtonHandler:function(){this.set("value",
"");this._triggerTypingEvent("");this._toggleSearchBoxIcon()}})})},"MW/toolstrip/mixins/property/MenuMixin":function(){define(["dojo/_base/declare","dijit/focus","MW/uiframework/FocusManager"],function(h,e,g){return h(null,{postCreate:function(){this.inherited(arguments);this.set("menuOrientation","below")},closeMenu:function(d){this.domNode.classList.contains("mwPopupMenuItem")||(g.isAvailable()?(this.get("preventRestoreFocus")||this.emit("restorefocus"),this._handleClosingPopup(d)):this.inherited(arguments))}})})},
"MW/toolstrip/mixins/property/PreventRestoreFocusMixin":function(){define(["dojo/_base/declare"],function(h){var e;return h(null,{_preventRestoreFocus:!1,postCreate:function(){e=this;this.inherited(arguments);this.domNode.addEventListener("restorefocus",this._handleRestoreFocus,!0);this.own({remove:function(){e&&(e.domNode&&e._handleRestoreFocus)&&e.domNode.removeEventListener("restorefocus",e._handleRestoreFocus,!0)}});this.set("preventRestoreFocus",this.get("preventRestoreFocus"))},_handleRestoreFocus:function(g){e.get("preventRestoreFocus")&&
(g.preventDefault(),g.stopImmediatePropagation())},_getPreventRestoreFocusAttr:function(){return this._preventRestoreFocus},_setPreventRestoreFocusAttr:function(e){if("boolean"!==typeof e)throw Error("'preventRestoreFocus' property expected a boolean value.");this._set("_preventRestoreFocus",e)}})})},"MW/toolstrip/widgets/SectionPopup":function(){define("dojo/_base/declare mw-menu/Menu mw-mixins/ResizeMixin ../mixins/property/TypeMixin ../mixins/property/PreventRestoreFocusMixin ../mixins/ScrollbarMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,e,g,d,c,b,a){return h(a.validate([e,g,d,c,b]),{visualFamily:"toolstrip",baseClass:"toolstrip mwSectionPopup",preventRestoreFocus:!0,type:"SectionPopup",postCreate:function(){this.inherited(arguments);this.own(this.on("keydown",function(a){switch(a.keyCode){case 27:for(a=a.target;!a.classList.contains("dijitPopup")&&null!==a&&a.parentElement;)a=a.parentElement;a?(a=document.getElementById(a.getAttribute("dijitpopupparent")))&&a.querySelector(".mwFocusNode")?a.querySelector(".mwFocusNode").focus():
this.emit("restorefocus"):this.emit("restorefocus")}}.bind(this)))},_emitRestoreFocus:function(){this.emit("restorefocus")},focus:function(){if(this.isMenuOpen()){var a,b,c=0,d=0,e=!1,g=this.getChildren();if(0<g.length)for(;!e&&c<g.length;)if(b="Column"===g[c++].type?g[c-1].getChildren():g,0<b.length)for(;!e&&d<b.length;)if(a=b[d++],!(a.domNode&&a.get("disabled")||a instanceof Element&&a.hasAttribute("disabled")))if(a.focus)a.focus(),e=!0;else if(a=a.domNode?a.domNode:a instanceof Element?a:null)if(a=
a.classList.contains(".mwFocusNode")||a.hasAttribute("data-dojo-attach-point")&&"focusNode"===a.getAttribute("data-dojo-attach-point")?a:a.querySelector(".mwFocusNode")||a.querySelector('[data-dojo-attach-point\x3d"focusNode"]'))a.focus(),e=!0;this._addFocusListeners()}}})})},"MW/toolstrip/mixins/ScrollbarMixin":function(){define(["dojo/_base/declare","dojo/sniff"],function(h,e){return h(null,{postCreate:function(){this.inherited(arguments);e("mac")||this.domNode.classList.add("mwScrollbarMixin")}})})},
"MW/toolstrip/widgets/Panel":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Container dojo/text!./templates/Panel.html ./_WidgetMixin mw-mixins/ResizeMixin".split(" "),function(h,e,g,d,c,b,a){return h([e,g,d,b,a],{templateString:c,addChild:function(a){this.inherited(arguments);var b=this.getParent();b&&"Column"===b.type&&b.updateChildrenOrientations()}})})},"MW/toolstrip/widgets/Column":function(){define("dojo/aspect dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/Column.html ./_WidgetMixin ./_ChildrenWrapperMixin mw-mixins/ResizeMixin MW/toolstrip/hashes/listOfNewWidgets MW/toolstrip/constants/OrientationConstants".split(" "),
function(h,e,g,d,c,b,a,f,k,l){return e([g,d,b,a,f],{templateString:c,constructor:function(){var a=this;this._wrappers={};this.own(h.after(this,"addChild",function(b){a._wrappers[b.id].style.textAlign=a.horizontalAlignment;a.get("width")&&b._scaleToParentWidth&&b.set("width","100%")},!0))},_setHorizontalAlignmentAttr:function(a){Object.keys(this._wrappers).forEach(function(b){this._wrappers[b].style.textAlign=a},this);this._set("horizontalAlignment",a)},_setWidthAttr:function(a){0<a&&(this.domNode.style.width=
a+"px",this._set("width",a),this.getChildren().forEach(function(a){a._scaleToParentWidth&&a.set("width","100%")}))},_setExtraColumnGapAttr:function(a){this._set("extraColumnGap",a);a?this.domNode.classList.add("extraColumnGap"):this.domNode.classList.remove("extraColumnGap")},resize:function(){this.inherited(arguments);var a=this.getChildren();a&&a.forEach(function(a){a.resize?a.resize():a.set("height",a.get("height"))},this)},addChild:function(a){this.inherited(arguments);this.updateChildrenOrientations()},
removeChild:function(a){this.inherited(arguments);this.updateChildrenOrientations()},updateChildrenOrientations:function(){var a=this.getParent();a&&("Section"===a.type||"SectionPopup"===a.type?this._updateChildrenOrientations():"Panel"===a.type&&(a=a.getParent())&&"Column"===a.type&&a.updateChildrenOrientations())},_updateChildrenOrientations:function(){var a=this.getChildren();1===a.length?"Panel"===a[0].type?a[0].getChildren().forEach(function(a){a=a.getChildren();var b=1===a.length?l.VERTICAL:
l.HORIZONTAL;a.forEach(function(a){a.get("orientation")&&a.set("orientation",b)})}):a[0].set("orientation",l.VERTICAL):a.forEach(function(a){"Panel"===a.type?a.getChildren().forEach(function(a){a.getChildren().forEach(function(a){a.get("orientation")&&a.set("orientation",l.HORIZONTAL)})}):a.get("orientation")&&a.set("orientation",l.HORIZONTAL)})}})})},"MW/toolstrip/menu/PopupListPanel":function(){define(["dojo/_base/declare","mw-menu/MenuPanel","../mixins/property/TypeMixin","mw-mixins/mixinDependencyValidator"],
function(h,e,g,d){return h(d.validate([e,g]),{visualFamily:"toolstrip"})})},"mw-menu/MenuPanel":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Container dijit/registry mw-menu/mixins/KeyNavMixin mw-menu/mixins/ContainerFocusMixin mw-menu/mixins/MenuFocusMixin mw-mixins/PreventFocusMixin mw-menu/mixins/property/MaxHeightMixin mw-mixins/property/TagMixin mw-mixins/property/VisualFamilyMixin mw-mixins/mixinDependencyValidator dojo/text!./templates/MenuPanel.html".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q){return h(m.validate([e,d,b,a,f,k,g,n,l,p]),{baseClass:"mwWidget mwMenuPanel",templateString:q,maxHeight:100,closeRequest:function(a){var b=this._getParentWidget();null!=b&&b.closeRequest&&(b._closeEventData?b._closeEventData.mwEventData?b._closeEventData.mwEventData.gainedFocusWidget=null:b._closeEventData.mwEventData={gainedFocusWidget:null}:b._closeEventData={mwEventData:{gainedFocusWidget:null}},b.closeRequest(a?a:!1))},_focusChange:function(a){var b=this._getParentWidget();
null!=b&&b._focusChange&&(b._closeEventData?b._closeEventData.mwEventData?b._closeEventData.mwEventData.gainedFocusWidget=a:b._closeEventData.mwEventData={gainedFocusWidget:a}:b._closeEventData={mwEventData:{gainedFocusWidget:a}},b._focusChange(a))},_getParentWidget:function(){return c.getEnclosingWidget(this.domNode.parentNode)}})})},"MW/toolstrip/widgets/Footer":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Container dijit/popup ./_WidgetMixin dojo/text!./templates/Footer.html".split(" "),
function(h,e,g,d,c,b,a){return h([e,g,d,b],{templateString:a,baseClass:"footer",postCreate:function(){this.inherited(arguments);this.own(this.on("click",function(a){a=a.target;var b;!a||!(a instanceof Element)?a=!1:(b=a.msMatchesSelector?"msMatchesSelector":"matches",a=a[b](".mwClosePopupOnClick, .mwClosePopupOnClick *"));a&&(a=this.getParent(),"GalleryPopup"===a.type&&c.close(a))}.bind(this)))}})})},"MW/toolstrip/widgets/FooterCell":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Container ./_WidgetMixin dojo/text!./templates/FooterCell.html ./_ChildrenWrapperMixin".split(" "),
function(h,e,g,d,c,b,a){return h([e,g,d,a,c],{templateString:b,baseClass:"footerCell"})})},"MW/toolstrip/widgets/gallery/Gallery":function(){define("dojo/_base/declare dojo/debounce dojo/dom-geometry dojo/aspect dojo/touch dojo/_base/lang dojo/on dojo/keys dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Container dijit/_HasDropDown dijit/registry dijit/_CssStateMixin dojo/text!./templates/Gallery.html ../../constants/gallery/GalleryViewConstants ../_WidgetMixin ./GalleryItemRowCountMixin ./GalleryItemTextLineCountMixin ./ScrollToSelectionMixin ./HideDisabledItemsMixin mw-mixins/property/VisualFamilyMixin mw-mixins/property/DisabledMixin MW/toolstrip/mixins/property/MnemonicMixin MW/toolstrip/mixins/property/MnemonicKeyNavDirectionMixin MW/uiframework/FocusManager dojo/i18n!l10n/nls/toolstrip".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,B,F,G,H,I){return h([k,l,n,q,p,t,u,v,w,x,A,B,F,G],{templateString:r,baseClass:"mwWidget mwGallery",visualFamily:"toolstrip",dropDownPosition:["below"],openIfEmpty:!0,postCreate:function(){this.inherited(arguments);this._focusManager={};this.own(d.after(this,"addChild",function(a){a.set("displayState",s.ICON)},!0),a(this.openPopupDiv,"click",function(a){this.isDropDownOpen()||this._onDropDownMouseDown(a)}.bind(this)),a(this.domNode,"keyup",function(a){(a.keyCode===
f.ENTER||a.keyCode===f.SPACE)&&this.openDropDown()}.bind(this)));var b=m.byId(this.galleryPopupId);b&&this.setupGalleryPopupListener(b);this.openPopupDiv.setAttribute("title",I.showMore)},openDropDown:function(){var a,c=m.byId(this.galleryPopupId);if(this.openIfEmpty||!(c.domNode.querySelectorAll(".Category.hideFromView").length>c.getChildren().length))a=c.columnCount?Math.max(c.columnCount,this.currentColumnCount):this.currentColumnCount,a=3>a?3*this.galleryItemWidth:a*this.galleryItemWidth,c.domNode.style.width=
a+30+"px",this.set("dropDown",c),this.setupGalleryPopupListener(c),this.inherited(arguments),this._handleWindowResizeHandler=b.hitch(this,"_handleWindowResize"),window.addEventListener("resize",this._handleWindowResizeHandler)},_shouldCloseDropDown:function(a,b){return a===window?!0:this.domNode&&this.domNode.contains(a)&&a.classList.contains("dijitDownArrowButton")&&(!b.domNode||!b.domNode.parentElement||"none"!==b.domNode.parentElement.style.display)||b.domNode&&b.domNode.contains(a)?!1:a.matches?
!a.matches(".mwToolstripPopupContextMenu, .mwToolstripPopupContextMenu  *"):a.matchesSelector?!a.matchesSelector(".mwToolstripPopupContextMenu, .mwToolstripPopupContextMenu  *"):a.webkitMatchesSelector?!a.webkitMatchesSelector(".mwToolstripPopupContextMenu, .mwToolstripPopupContextMenu  *"):a.mozMatchesSelector?!a.mozMatchesSelector(".mwToolstripPopupContextMenu, .mwToolstripPopupContextMenu  *"):a.msMatchesSelector?!a.msMatchesSelector(".mwToolstripPopupContextMenu, .mwToolstripPopupContextMenu  *"):
a.oMatchesSelector?!a.oMatchesSelector(".mwToolstripPopupContextMenu, .mwToolstripPopupContextMenu  *"):!0},closeDropDown:function(){window.removeEventListener("resize",this._handleWindowResizeHandler);if(!this.dropDown&&(this.dropDown=m.byId(this.galleryPopupId),!this.dropDown))return;this.inherited(arguments)},_handleWindowResize:function(){this.closeDropDown()},_qeDropDownClick:function(){this.toggleDropDown()},_onDropDownMouseDown:function(a){a instanceof MouseEvent&&0!==a.button||this.inherited(arguments)},
setupGalleryPopupListener:function(a){a._invokingGallery=this;var b=this;this._galleryPopupListener&&(this._galleryPopupListener.remove(),this._galleryPopupListener=null);this._galleryPopupListener=d.after(a,"galleryStateChanged",function(){b.refresh()})},shrink:function(){var a;this.currentColumnCount>this.minColumnCount?(this.set("currentColumnCount",this.currentColumnCount-1),a=!0):a=!1;return a},grow:function(){var a;this.currentColumnCount<this.maxColumnCount?(this.set("currentColumnCount",this.currentColumnCount+
1),a=!0):a=!1;return a},_setCurrentColumnCountAttr:function(a){this._set("currentColumnCount",a);this._resizeContainerNode();this.refresh()},_setOpenIfEmptyAttr:function(a){if("boolean"!==typeof a)throw Error("'openIfEmpty' property expected a boolean value");this._set("openIfEmpty",a)},_resizeContainerNode:function(){var a=this.currentColumnCount*this.galleryItemWidth+"px";this.containerNode.style.width=a;this.textOverlayWrapperNode.style.width=a},_setGalleryItemWidthAttr:function(a){0<a&&(this._set("galleryItemWidth",
a),this._resizeContainerNode())},_setDisplayStateAttr:function(a){var b=g.position(this.domNode);this._set("displayState",a);this.domNode.classList.remove("busy");this.set("disabled",!1);"busy"===a?(this.busyLayer.style.height=b.h+"px",this.busyLayer.style.width=b.w+"px",this.domNode.classList.add("busy")):"blocked"===a&&this.set("disabled",!0)},_setTextOverlayAttr:function(a){this._set("textOverlay",a);a?(this.textOverlayWrapperNode.style.display="table",this.textOverlayNode.textContent=a):(this.textOverlayWrapperNode.style.display=
"none",this.textOverlayNode.textContent="")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(a){}},refresh:function(){},destroy:function(){this._galleryPopupListener.remove();this.inherited(arguments)},isDropDownOpen:function(){var a=this.galleryPopupId?m.byId(this.galleryPopupId):null;return!!a&&!!a.domNode&&!!a.domNode.parentElement&&!(!a.domNode.parentElement.classList.contains("dijitPopup")&&"none"===a.domNode.style.display||"none"===a.domNode.parentElement.style.display)}})})},
"MW/toolstrip/widgets/gallery/ScrollToSelectionMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{scrollToSelection:!1})})},"MW/toolstrip/widgets/gallery/HideDisabledItemsMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{hideDisabledItems:!0})})},"MW/toolstrip/widgets/gallery/GalleryCategory":function(){define("dojo/_base/declare dojo/aspect dojo/dom-construct dojo/on dojo/dnd/Source dojo/dnd/Target dijit/registry dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Container dojo/i18n!l10n/nls/toolstrip dojo/dnd/Manager mw-dnd/DnDUtils dojo/text!./templates/GalleryCategory.html ../../constants/gallery/GalleryViewConstants ./_GalleryCategoryAnimationMixin ../_WidgetMixin ./GalleryItemAvatar".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u){var v=["","icon_favorite_category_16"];return h([f,k,l,s,t],{templateString:q,userCustomizable:!0,icon:"",hideWhenEmpty:!0,dndEnabled:!1,postCreate:function(){var a=this;this.inherited(arguments);this._moveToTopButtonClickHandler=function(){a.categoryMoved({action:"Top"})};this._moveToBottomButtonClickHandler=function(){a.categoryMoved({action:"Bottom"})};this._resetConfigurationLayoutListeners();this.own(e.after(this,"addChild",function(b,c){var d=a.getParent();
c=0<=c?c:a.getChildren().length-1;d&&d.galleryStateChanged();b.set("displayState",a.displayState);a.dndSource&&a.dndSource.insertNodes(!1,[b.domNode],!1,this.getChildren()[c].domNode);a.showHideCategory()},!0));this.own(e.after(this,"removeChild",function(b){(b=a.getParent())&&b.galleryStateChanged();a.showHideCategory()},!0));this.showHideCategory()},_resetConfigurationLayoutListeners:function(){var a=this;a._removeConfigurationLayoutListeners&&a._removeConfigurationLayoutListeners();a.moveTopButtonNode.addEventListener("click",
a._moveToTopButtonClickHandler);a.moveBottomButtonNode.addEventListener("click",a._moveToBottomButtonClickHandler);a._removeConfigurationLayoutListeners=function(){a.moveTopButtonNode&&a._moveToTopButtonClickHandler&&a.moveTopButtonNode.removeEventListener("click",a._moveToTopButtonClickHandler);a.moveBottomButtonNode&&a._moveToBottomButtonClickHandler&&a.moveBottomButtonNode.removeEventListener("click",a._moveToBottomButtonClickHandler);delete a._removeConfigurationLayoutListeners};a.own({remove:a._removeConfigurationLayoutListeners})},
showHideCategory:function(a){a||(a=this);if(0===a.getChildren().length){if(a.get("hideWhenEmpty")){a.containerNode.textContent="";a.containerNode.classList.remove("mwEmptyNode");a.domNode.classList.add("hideFromView");return}a.containerNode.textContent=n.emptyCategoryPlaceholder;a.containerNode.classList.add("mwEmptyNode")}else 3===a.containerNode.firstChild.nodeType?a.containerNode.removeChild(a.containerNode.firstChild):3===a.containerNode.lastChild.nodeType&&a.containerNode.removeChild(a.containerNode.lastChild),
a.containerNode.classList.remove("mwEmptyNode");a.domNode.classList.remove("hideFromView")},_setHideWhenEmptyAttr:function(a){if("boolean"!==typeof a)throw Error("Expected input value to be of type 'boolean'.");this._set("hideWhenEmpty",a)},_setDndEnabledAttr:function(a){if("boolean"!==typeof a)throw Error("Expected input value to be of type 'boolean'.");this._set("dndEnabled",a)},_setIconAttr:function(a){if(!this.get("isFavoriteCategory")){if("string"!==typeof a&&0>v.indexOf(a))throw Error("Expected input value to be of type 'string'.");
this.get("icon")&&this.titleIconNode.classList.remove(this.get("icon"));""!==a&&this.titleIconNode.classList.add(a);this._set("icon",a)}},_setIsFavoriteCategoryAttr:function(a){a?(this.get("icon")&&this.titleIconNode.classList.remove(this.get("icon")),this.titleIconNode.classList.add("starTitle")):(this.titleIconNode.classList.remove("starTitle"),this.get("icon")&&this.titleIconNode.classList.add(this.get("icon")));this._set("isFavoriteCategory",a);this._createDndSource(this.displayState)},_setDisplayStateAttr:function(a){this.getChildren().forEach(function(b){b.set("displayState",
a)});this._createDndSource(a);this._set("displayState",a)},_setTitleAttr:function(a){""===a&&(this.header.style.display="none");this.titleNode.textContent=a;this._set("title",a)},_setTagAttr:function(a){if("string"!==typeof a)throw Error('Expected inpute argument to be of type "string"');this._set("tag",a);this.domNode.dataset.tag=a},_setUserCustomizableAttr:function(a){!1===a?this.controlsNode.style.display="none":!0===a&&(this.controlsNode.style.display=null);this._set("userCustomizable",a)},_createDndSource:function(d){var f=
this,g={};if(this.isFavoriteCategory||this.dndEnabled)d===r.ICON&&(g={horizontal:!0}),this.dndSource&&(m.unregisterMakeAvatar(this.dndSource),this.dndSource.destroy()),this.dndSource=new c(this.containerNode,g),m.registerMakeAvatar(f.dndSource,function(){return new u(this)}),this.own(e.after(this.dndSource,"onDrop",function(b,c){f._onContainerDropHandler(b,c);f.showHideCategory(a.getEnclosingWidget(b.node));f.showHideCategory()},!0)),this.dndSourceHeader&&(m.unregisterMakeAvatar(this.dndSourceHeader),
this.dndSourceHeader.destroy()),this.dndSourceHeader=new b(this.headerDropNode,{}),m.registerMakeAvatar(f.dndSourceHeader,function(){return new u(this)}),this.own(e.before(this.dndSourceHeader,"onDrop",function(a,b){f._onHeaderDropHandlerBefore(a,b)},!0)),this.own(e.after(this.dndSourceHeader,"onDrop",function(b,c){f._onHeaderDropHandlerAfter(b,c);f.showHideCategory(a.getEnclosingWidget(b.node));f.showHideCategory()},!0)),this.own(e.after(this.dndSourceHeader,"onDraggingOver",function(a,b){f.headerDropNode.classList.add("mwHeaderDropNodeDragOver")},
!0)),this.own(e.after(this.dndSourceHeader,"onDraggingOut",function(a,b){f.headerDropNode.classList.remove("mwHeaderDropNodeDragOver")},!0))},_onContainerDropHandler:function(b,c){var d,e;e=a.getEnclosingWidget(c[0]);d=this.getIndexOfChild(e);this.itemMoved({itemId:e.id,newIndex:d},{widget:e,sourceData:b,targetWidget:this})},_onHeaderDropHandlerBefore:function(){this.headerDropNode.classList.remove("mwHeaderDropNodeDragOver");this.dndSourceHeader.before=!0;this.dndSourceHeader.current=this.containerNode.firstChild},
_onHeaderDropHandlerAfter:function(b,c){var d=c[0],e;c.forEach(function(a){a=this.dndSourceHeader._normalizedCreator(a);this.dndSourceHeader.delItem(a.node.id);this.dndSource.setItem(a.node.id,{data:a.data,type:a.type})}.bind(this));e=a.getEnclosingWidget(d);d=this.displayState===r.ICON?this.getChildren().length:0;this.itemMoved({itemId:e.id,newIndex:d},{widget:e,sourceData:b,targetWidget:this})},_qeMoveToTopClick:function(){this._moveToTopButtonClickHandler()},_qeMoveToBottomClick:function(){this._moveToBottomButtonClickHandler()},
categoryMoved:function(a){this.emit("categorymoved",{data:a})},itemMoved:function(a,b){this.emit("itemmoved",{mwEventData:{widget:b.widget,parent:b.targetWidget,index:a.newIndex}})}})})},"dojo/dnd/Target":function(){define(["../_base/declare","../dom-class","./Source"],function(h,e,g){return h("dojo.dnd.Target",g,{constructor:function(){this.isSource=!1;e.remove(this.node,"dojoDndSource")}})})},"MW/toolstrip/widgets/gallery/_GalleryCategoryAnimationMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/dom-geometry dojo/_base/fx dojo/fx dojo/query dijit/registry ../../constants/gallery/GalleryViewConstants mw-dom-utils/domUtils".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n){return h(null,{animate:function(a){switch(a.type){case "move":this._animateCategoryMove(a);break;case "childAdd":if(this.get("isFavoriteCategory"))this._animateFavoriteItemAdd(a);else a.onEnd();break;case "childRemove":if(this.get("isFavoriteCategory"))this._animateFavoriteItemRemove(a);else a.onEnd()}},_animateCategoryMove:function(b){var d,e,f,h;f=null;var k=b.newIndex,l=k;e=c.position(this.domNode);h=this._createCategoryClone(this);d=this._getGalleryPopupWidget().domNode.querySelectorAll(".otherCategoriesContainer .Category");
do if(!d[l].classList.contains("hideFromView")){f=d[l];break}while(++l<d.length);f&&n.isElementObscuredByAncestor(f)&&(f=null);if(!f&&0<k){l=k-1;do if(!d[l].classList.contains("hideFromView")&&!n.isElementObscuredByAncestor(d[l])){f=d[l];break}while(0<=--l)}d=f?c.position(f).y:0;f=this._getGalleryPopupPos();d-=f.y;e.x-=f.x;e.y-=f.y;a.slideTo({node:h,duration:this._calculateDuration(0,e.y,0,d),left:e.x,top:d,onEnd:function(){g.destroy(h);b.onEnd()}}).play()},_animateFavoriteItemAdd:function(b){var d,
e=this,f,h,n,u,v=0,w=0,x,A,B=!0;x=this._getGalleryPopupPos();A=c.position(this.domNode);f=k.byId(b.startId);h=c.position(f.domNode);d=this._createItemClone(f);f=this.getChildren().filter(function(a){return!a.domNode.classList.contains("hideFromView")});u=f.length;0===u?n=h:(f=f[u-1],f=c.position(f.domNode),this.displayState===l.ICON?(x.w-(f.x-x.x+f.w)<f.w&&(B=!1),B?(n=f,v=f.w):(n=A,w=A.h)):this.displayState===l.LIST&&(n=f,w=f.h));this._getAllItemWidgets().forEach(function(a){a.detachFavButtonClickHandler()});
n.x-=x.x;n.y-=x.y;h.x-=x.x;h.y-=x.y;0<this._getGalleryPopupWidget().categoryContainer.scrollTop&&(w=n.y=0);h=this._calculateDuration(h.x,h.y,n.x,n.y);a.slideTo({node:d,duration:h,left:n.x+v,top:n.y+w,onEnd:function(){g.destroy(d);b.onEnd();e._getAllItemWidgets().forEach(function(a){a.attachFavButtonClickHandler()})}}).play()},_animateFavoriteItemRemove:function(b){var d,e,f=this,h,l;l=this._getGalleryPopupPos();d=b.childWidget;h=c.position(d.domNode);e=this._createItemClone(d);d=k.byId(b.endId);d=
c.position(d.domNode);d.x-=l.x;d.y-=l.y;h.x-=l.x;h.y-=l.y;d.y+d.h>l.h+this._getGalleryPopupWidget().categoryContainer.scrollTop&&(d.y=l.h-d.h);this._getAllItemWidgets().forEach(function(a){a.detachFavButtonClickHandler()});h=this._calculateDuration(h.x,h.y,d.x,d.y);a.slideTo({node:e,duration:h,left:d.x+0,top:d.y+0,onEnd:function(){g.destroy(e);b.onEnd();f._getAllItemWidgets().forEach(function(a){a.attachFavButtonClickHandler()})}}).play()},_getAllItemWidgets:function(){var a=[];k.byId(this.galleryPopupId).getChildren().forEach(function(b){a=
a.concat(b.getChildren())});return a},_calculateDuration:function(a,b,c,d){return Math.sqrt(Math.pow(a-c,2)+Math.pow(b-d,2))/0.7},_getGalleryPopupWidget:function(){return this.get("isFavoriteCategory")?k.byId(this.get("galleryPopupId")):this.getParent()},_getGalleryPopupPos:function(){return c.position(this._getGalleryPopupWidget().domNode)},_createCategoryClone:function(a){a=this._createClone(a);f(".controlsNode",a)[0].style.display="none";return a},_createItemClone:function(a){a=this._createClone(a);
f(".favButton",a)[0].style.display="none";d.remove(a,"dojoDndItemAnchor");d.remove(a,"dojoDndItemOver");return a},_createClone:function(a){var b,d,f;f=this._getGalleryPopupPos();b=e.clone(a.domNode);d=c.position(a.domNode);a=c.getContentBox(a.domNode);d.x-=f.x;d.y-=f.y;g.place(b,this._getGalleryPopupWidget().domNode);b.style.position="absolute";b.style.top=d.y+"px";b.style.left=d.x+"px";b.style.width=a.w+"px";b.style.height=a.h+"px";b.style.zIndex=5;return b}})})},"MW/toolstrip/widgets/gallery/GalleryItemAvatar":function(){define("dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-construct dojo/query dijit/registry".split(" "),
function(h,e,g,d,c,b){return h([],{constructor:function(a){this.manager=a;this.construct()},construct:function(){var a,f,h;a=this.manager.nodes[0];f=a.cloneNode(!0);h=g.position(a);f.style.width=h.w+"px";f.style.height=h.h+"px";h=c(".itemWrapper",f)[0];a=b.getEnclosingWidget(a).getParent();a=b.byId(a.get("galleryPopupId"));a=d.create("div",{"class":a.domNode.getAttribute("class")});e.remove(a,"galleryPopup");a.style.position="absolute";a.style.zIndex="1999";a.opacity=0.7;e.remove(f,"dojoDndItemOver dojoDndItem dojoDndItemAnchor");
e.add(f,"galleryItemAvatar");e.remove(h);e.add(h,"itemWrapper");d.place(f,a);this.node=a},destroy:function(){d.destroy(this.node);this.node=!1},update:function(){e.toggle(this.node,"dojoDndAvatarCanDrop",this.manager.canDropFlag)}})})},"MW/toolstrip/form/PushButton":function(){define("dojo/_base/declare mw-form/PushButton MW/toolstrip/mixins/property/MnemonicMixin MW/toolstrip/mixins/property/MnemonicKeyNavDirectionMixin MW/toolstrip/mixins/property/OrientationMixin MW/toolstrip/mixins/property/SizeMixin MW/toolstrip/mixins/property/TypeMixin MW/toolstrip/mixins/property/IconOverrideMixin MW/toolstrip/mixins/property/DescriptionOverrideMixin MW/toolstrip/mixins/property/TextMixin MW/toolstrip/mixins/property/TextOverrideMixin mw-mixins/property/ShortcutMixin MW/toolstrip/mixins/property/QuickAccessIconMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q){return h(q.validate([e,g,d,c,b,a,f,k,l,n,p,m]),{visualFamily:"toolstrip"})})},"MW/toolstrip/mixins/property/QuickAccessIconMixin":function(){define(["dojo/_base/declare","mw-mixins/property/IconMixin"],function(h,e){var g=h(null,{quickAccessIcon:"",postCreate:function(){this.inherited(arguments);this.set("quickAccessIcon",this.get("quickAccessIcon"))},_setQuickAccessIconAttr:function(d){if("string"!==typeof d)throw Error("'quickAccessIcon' property expects a literal string!");
this._set("quickAccessIcon",d);this._updateDOM(d)},_updateDOM:function(d){""===d?d=this.icon:""!==this.quickAccessIcon&&(d=this.quickAccessIcon);this._removeOldIcon(this.get("quickAccessIcon"));arguments[0]=d;this.inherited(arguments)}});g._dependencies=[{mixin:e,orderDependent:!0}];return g})},"MW/toolstrip/form/SplitButton":function(){define("dojo/_base/declare mw-form/SplitButton MW/toolstrip/mixins/property/MnemonicMixin MW/toolstrip/mixins/property/MnemonicKeyNavDirectionMixin MW/toolstrip/mixins/property/IconOverrideMixin MW/toolstrip/mixins/property/TextMixin MW/toolstrip/mixins/property/SizeMixin MW/toolstrip/form/mixins/property/DropDownButtonSizeMixin MW/toolstrip/form/mixins/property/DropDownButtonTextMixin MW/toolstrip/mixins/property/OrientationMixin MW/toolstrip/mixins/property/TextOverrideMixin MW/toolstrip/mixins/property/TypeMixin MW/toolstrip/mixins/property/DescriptionOverrideMixin MW/toolstrip/mixins/property/MenuIdMixin MW/toolstrip/mixins/property/MenuMixin MW/toolstrip/mixins/property/PreventRestoreFocusMixin mw-mixins/ResizeMixin mw-mixins/property/ShortcutMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v){return h(v.validate([e,g,d,c,b,a,f,k,l,n,p,m,u,q,s,r,t]),{visualFamily:"toolstrip",minWidth:38,resize:function(){this.inherited(arguments);if("Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&-1<navigator.appVersion.indexOf("Edge"))this._updateTextNodeWidth(),this.own(this.watch("text",this._updateTextNodeWidth))},_updateTextNodeWidth:function(){this.textNode&&(!this.textNode.classList.contains("mwEmptyNode")&&this.domNode.classList.contains("mwHorizontalOrientation"))&&
setTimeout(function(){this.textNode&&(this.textNode.style.width="",this.textNode.style.width=Math.ceil(parseFloat(window.getComputedStyle(this.textNode,null).width))+"px")}.bind(this),0)}})})},"MW/toolstrip/form/ToggleButton":function(){define("dojo/_base/declare mw-form/ToggleButton MW/toolstrip/mixins/property/MnemonicMixin MW/toolstrip/mixins/property/MnemonicKeyNavDirectionMixin MW/toolstrip/mixins/property/OrientationMixin MW/toolstrip/mixins/property/SizeMixin MW/toolstrip/mixins/property/TextMixin MW/toolstrip/mixins/property/TextOverrideMixin MW/toolstrip/mixins/property/ButtonGroupMixin MW/toolstrip/mixins/property/TypeMixin MW/toolstrip/mixins/property/DescriptionOverrideMixin mw-mixins/property/ShortcutMixin MW/toolstrip/mixins/property/IconOverrideMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q){return h(q.validate([e,g,d,c,b,a,f,k,l,n,p,m]),{visualFamily:"toolstrip",_qeSetChecked:function(a){this.set("checked",a,!0)}})})},"MW/toolstrip/mixins/property/ButtonGroupMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{_shouldUncheckWidget:function(e){return e.get("buttonGroup")===this.get("buttonGroup")&&e!==this&&e.get("checked")&&(!e.get("actionId")||e.get("actionId")!==this.get("actionId"))}})})},"MW/toolstrip/form/ColorPickerButton":function(){define("dijit/focus dojo/aspect dojo/_base/declare dojo/_base/lang dojo/keys dojo/query MW/toolstrip/form/SplitButton mw-menu/Menu mw-mixins/event/ChangeEventMixin mw-colorpicker/ColorPicker mw-dom-utils/domUtils".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n){return g([a,k],{baseClass:"mwWidget mwSplitButton mwColorPickerButton",visualFamily:"toolstrip",selectedColor:"#ff0000",closeOnColorSelection:!0,autoColor:"#000000",displayView:"standard",showAuto:!1,showNone:!1,showFlat:!1,showInterp:!1,showTexturemap:!1,constructor:function(){this._colorPickerMenu=new f;this._colorPicker=new l;this._colorPicker.startup();this._swatchNode=document.createElement("div");this.own(this._colorPickerMenu);this.own(this._colorPicker)},buildRendering:function(){this.inherited(arguments);
this._colorPickerMenu.addChild(this._colorPicker);this._swatchNode.classList.add("mwColorSwatchNode");this.iconNode.appendChild(this._swatchNode);this.set("menu",this._colorPickerMenu)},_setSelectedColorAttr:function(a){if("string"!==typeof a)throw Error("'selectedColor' property expects a literal string!");this._validateColor(a);this._swatchNode.style.backgroundColor=a;this._set("selectedColor",a);this._updatePreview()},_setAutoColorAttr:function(a){this._colorPicker.set("autoColor",a);this._set("autoColor",
a)},_getAutoColorAttr:function(){return this._colorPicker.get("autoColor")},_setDisplayViewAttr:function(a){this._colorPicker.set("displayView",a);this._set("displayView",a)},_getDisplayViewAttr:function(){return this._colorPicker.get("displayView")},_setShowAutoAttr:function(a){this._colorPicker.set("showAuto",a);this._set("showAuto",a)},_getShowAutoAttr:function(){return this._colorPicker.get("showAuto")},_setShowNoneAttr:function(a){this._colorPicker.set("showNone",a);this._set("showNone",a)},
_getShowNoneAttr:function(){return this._colorPicker.get("showNone")},_setShowFlatAttr:function(a){this._colorPicker.set("showFlat",a);this._set("showFlat",a)},_getShowFlatAttr:function(){return this._colorPicker.get("showFlat")},_setShowInterpAttr:function(a){this._colorPicker.set("showInterp",a);this._set("showInterp",a)},_getShowInterpAttr:function(){return this._colorPicker.get("showInterp")},_setShowTexturemapAttr:function(a){this._colorPicker.set("showTexturemap",a);this._set("showTexturemap",
a)},_getShowTexturemapAttr:function(){return this._colorPicker.get("showTexturemap")},postCreate:function(){this.inherited(arguments);this.own(e.after(this._colorPicker.paletteNode,"_onCellClick",d.hitch(this,"_updateSelectedColor")));this.own(e.after(this._colorPicker.recentColorsWidgetNode,"_onCellClick",d.hitch(this,"_updateSelectedColor")));this.menu.domNode.addEventListener("open",this._handleMenuCloseOnFocusOut.bind(this));this.menu.domNode.addEventListener("keydown",this._handleMenuKeyDown.bind(this));
this._colorPicker.domNode.addEventListener("keydown",this._handleColorPickerKeyDown.bind(this));this.buttonNode.addEventListener("click",this._handleButtonClick.bind(this))},_handleButtonClick:function(){var a=this.get("selectedColor");this._triggerChangeEvent("selectedColor",a,a)},_handleMenuCloseOnFocusOut:function(){var a=h.watch("curNode",d.hitch(this,function(b,c,d){null!==d&&!n.findParentNode(d,"mwMenu")&&(a.unwatch(),this._updatePreview(),this.closeMenu())}));this.own(a)},_handleMenuKeyDown:function(a){a.keyCode===
c.DOWN_ARROW||a.keyCode===c.UP_ARROW?this._colorPicker.paletteNode.focus():a.keyCode===c.TAB&&a.stopPropagation()},_closeMenuOnColorSelection:function(){this.closeOnColorSelection&&this.closeMenu()},_handleColorPickerKeyDown:function(a){"INPUT"===a.target.tagName&&(a.keyCode===c.ENTER?setTimeout(function(){this._updateSelectedColor()}.bind(this),100):a.keyCode===c.ESCAPE&&this.set("selectedColor",this.get("selectedColor")))},_updatePreview:function(){this.get("selectedColor")!==this._colorPicker.value&&
this._colorPicker.set("value",this.get("selectedColor"),!1)},_updateRecentColors:function(){var a=this.get("selectedColor"),b=this._colorPicker.get("recentlyUsedColors"),c=b.indexOf(a);-1!==c&&c<b.length?b.splice(c,1):b.pop();b.unshift(a);this._colorPicker.set("recentlyUsedColors",b);this.own(e.after(this._colorPicker.recentColorsWidgetNode,"_onCellClick",d.hitch(this,"_updateSelectedColor")))},_updateSelectedColor:function(){var a=this.get("selectedColor"),b=this._colorPicker.get("value");this.set("selectedColor",
b);b=this.get("selectedColor");this._updateRecentColors();this._closeMenuOnColorSelection();this._triggerChangeEvent("selectedColor",a,b)},_validateColor:function(a){var b=this._isRGBOrHex(a);if("invalid"===b)throw Error("'color' invalid value!");if("hex"===b){if(!/[0-9a-f]{6}/i.test(a))throw Error("'color' invalid value!");}else if("rgb"===b){var c;a=a.substring(4,a.length-1);a=a.split(",");if(3!==a.length)throw Error("'color' invalid value!");a.forEach(function(a){a=parseFloat(a);0!==a%1&&(c=!0)});
if(c){if(this._checkRGBDouble(a))throw Error("'color' invalid value!");}else if(this._checkRGBInt(a))throw Error("''color' invalid value!");}},_isRGBOrHex:function(a){return 0===a.indexOf("#")?"hex":0===a.indexOf("rgb")?"rgb":"invalid"},_checkRGBDouble:function(a){for(var b=0;3>b;b++){var c=parseFloat(a[b]);if(0>c||1<c)return!0}},_checkRGBInt:function(a){for(var b=0;3>b;b++){var c=parseInt(a[b]);if(0>c||255<c)return!0}}})})},"mw-colorpicker/ColorPicker":function(){define("dojo/_base/declare dojo/on dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin mw-form/ToggleButton ./ColorPalette ./ColorSpinner ./MColor ./ColorGradient ./ColorStyle dojo/text!./templates/ColorPicker.html dojo/i18n!./l10n/nls/ColorPickerResources".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m){return h([g,d,c],{value:"#ff0000",recentlyUsedColors:[],standardColors:[],displayView:"standard",autoColor:"",showAuto:!1,showNone:!1,showFlat:!1,showInterp:!1,showTexturemap:!1,_colorStylesShown:0,_STANDARD_COLORS:"standard_colors",_RECENT_COLORS:"recent_colors",_GRADIENT:"gradient",_SPINNER:"spinner",_colorStyleType:{AUTO:"auto",NONE:"none",FLAT:"flat",INTERP:"interp",TEXTUREMAP:"texturemap"},_displayViewType:{STANDARD:"standard",CUSTOM:"custom"},_isStarted:!1,
_parsedStandardColors:"",_previewTitle:m.preview,templateString:p,baseClass:"mwColorPicker",constructor:function(){this._set("recentlyUsedColors","#ff0000 #ff00ff #ffff00 #00ff00 #ffffff #00ffff #0000ff".split(" "));this._set("standardColors",k.getStandardColors())},postMixInProperties:function(){this._set("_parsedStandardColors",JSON.stringify(this.get("standardColors")));this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.paletteNode.set("showTitle",!1);this.titleNode.textContent=
m.standardColors;this.standardButtonNode.setAttribute("title",m.standardColors);this.customButtonNode.setAttribute("title",m.customColors);this.own(this.paletteNode.on("change",this._handleWidgetChange.bind(this,this._STANDARD_COLORS)),e(this.standardButtonNode,"click",this._switchToStandard.bind(this)),e(this.customButtonNode,"click",this._switchToCustom.bind(this)))},startup:function(){this.inherited(arguments);this._isStarted=!0;this.displayView===this._displayViewType.CUSTOM&&(this.colorGradientNode.startup(),
this.colorSpinnerNode.startup())},_setValueAttr:function(a){this._isColorStyle(a)?this._updateViewFromColorStyleChange(a):(this.displayView===this._displayViewType.STANDARD?(this.paletteNode.set("value",a,!1),this._colorStylesShown&&this._updateColorStyleSelection(this.value,a),this.recentColorsWidgetNode&&this.recentColorsWidgetNode.set("value",a,!1)):void 0!==this.colorGradientNode&&(this.colorGradientNode.set("value",a),this.colorSpinnerNode.set("value",a)),this._setPreviewColor(a));this._set("value",
a)},_isColorStyle:function(a){return-1===[this._colorStyleType.AUTO,this._colorStyleType.NONE,this._colorStyleType.FLAT,this._colorStyleType.INTERP,this._colorStyleType.TEXTUREMAP].indexOf(a)?!1:!0},_updateRecentColorsWidget:function(){if(this.recentColorsWidgetNode)for(this.recentColorsWidgetNode.destroy();this.recentColorsNode.lastChild;)this.recentColorsNode.removeChild(this.recentColorsNode.lastChild);this.recentColorsWidgetNode=new a({palette:[this.recentlyUsedColors],title:m.recentColors,value:this.value});
this.own(this.recentColorsWidgetNode.on("change",this._handleWidgetChange.bind(this,this._RECENT_COLORS)));this.recentColorsWidgetNode.placeAt(this.recentColorsNode).startup()},_setRecentlyUsedColorsAttr:function(a){this._set("recentlyUsedColors",a.slice(0,7));this._updateRecentColorsWidget()},_setDisplayViewAttr:function(a){a===this._displayViewType.STANDARD?this._switchToStandard():a===this._displayViewType.CUSTOM&&this._switchToCustom()},_setAutoColorAttr:function(a){this._set("autoColor",a);this._updateAutoColorSwatch(a);
(this.value===this._colorStyleType.AUTO||this.value===a)&&this._updateViewFromColorStyleChange(this._colorStyleType.AUTO)},_setShowAutoAttr:function(a){this._handleColorStyleSet(a,"autoColorNode",this._colorStyleType.AUTO);this._updateAutoColorSwatch(this.autoColor)},_updateAutoColorSwatch:function(a){this.autoColorNode&&(""===a?(this.autoColorNode.colorStyleSwatch.classList.add("mwColorStyleSwatchDefault"),this.autoColorNode.colorStyleSwatch.style.background=""):(this.autoColorNode.colorStyleSwatch.classList.remove("mwColorStyleSwatchDefault"),
a=new k(a),this.autoColorNode.colorStyleSwatch.style.background=a.toCss()))},_setShowNoneAttr:function(a){this._handleColorStyleSet(a,"noneColorNode",this._colorStyleType.NONE)},_setShowFlatAttr:function(a){this._handleColorStyleSet(a,"flatColorNode",this._colorStyleType.FLAT)},_setShowInterpAttr:function(a){this._handleColorStyleSet(a,"interpColorNode",this._colorStyleType.INTERP)},_setShowTexturemapAttr:function(a){this._handleColorStyleSet(a,"texturemapColorNode",this._colorStyleType.TEXTUREMAP)},
_handleColorStyleSet:function(a,b,c){var d=c.charAt(0).toUpperCase()+c.slice(1);a&&void 0===this[b]?(this[b]=this._createColorStyle(c),this.value===c&&this._updateSelection(c,!0)):a||(this._destroyColorStyle(this[b]),this[b]=void 0);this._set("show"+d,a)},_createColorStyle:function(a){var b=new n({value:a});b.placeAt(this.stylesContainerNode);b.startup();this.own(b.on("change",this._handleColorStyleChange.bind(this,a)));this._colorStylesShown++;return b},_destroyColorStyle:function(a){a&&a.destroy();
this._colorStylesShown--},_switchToCustom:function(){this.standardPickerRow.classList.add("mwColorPickerViewHidden");this.customPickerRow.classList.remove("mwColorPickerViewHidden");this.customButtonNode.classList.add("mwColorPickerToggleButtonFocused");this.standardButtonNode.classList.remove("mwColorPickerToggleButtonFocused");this.titleNode.textContent=m.customColors;this.titleNode.classList.add("mwColorPickerTitleCustomColors");this.colorGradientNode||(this.colorGradientNode=new l,this.own(this.colorGradientNode.on("change",
this._handleGradientChange.bind(this))),this.colorGradientNode.placeAt(this.gradientContainerNode),this.colorSpinnerNode=new f,this.own(this.colorSpinnerNode.on("change",this._handleSpinnerChange.bind(this))),this.colorSpinnerNode.placeAt(this.spinnerContainerNode),this._isStarted&&(this.colorGradientNode.startup(),this.colorSpinnerNode.startup()));0===this._colorStylesShown?(this.colorGradientNode.domNode.classList.remove("mwColorGradientWithStyle"),this.colorGradientNode.domNode.classList.remove("mwColorGradientWithStyles")):
2>=this._colorStylesShown?(this.colorGradientNode.domNode.classList.remove("mwColorGradientWithStyles"),this.colorGradientNode.domNode.classList.add("mwColorGradientWithStyle")):(this.colorGradientNode.domNode.classList.add("mwColorGradientWithStyles"),this.colorGradientNode.domNode.classList.remove("mwColorGradientWithStyle"));this.colorGradientNode.set("value",this.value);this.colorSpinnerNode.set("value",this.value);this._set("displayView",this._displayViewType.CUSTOM)},_switchToStandard:function(){this.standardPickerRow.classList.remove("mwColorPickerViewHidden");
this.customPickerRow.classList.add("mwColorPickerViewHidden");this.customButtonNode.classList.remove("mwColorPickerToggleButtonFocused");this.standardButtonNode.classList.add("mwColorPickerToggleButtonFocused");this.titleNode.textContent=m.standardColors;this.titleNode.classList.remove("mwColorPickerTitleCustomColors");this.paletteNode.set("value",this.value,!1);this.recentColorsWidgetNode&&this.recentColorsWidgetNode.set("value",this.value,!1);this._set("displayView",this._displayViewType.STANDARD)},
_handleGradientChange:function(a){var b=a.mwEventData.newValue;a.stopPropagation();this._handleWidgetChange(this._GRADIENT,b)},_handleSpinnerChange:function(a){var b=a.mwEventData.newValue;a.stopPropagation();this._handleWidgetChange(this._SPINNER,b)},_handleColorStyleChange:function(a){this._updateViewFromColorStyleChange(a);this._setValueAndEmitChange(a)},_updateViewFromColorStyleChange:function(a){var b=a===this._colorStyleType.AUTO?this.autoColor:null;this.recentColorsWidgetNode.set("value",b,
!1);this.paletteNode.set("value",b,!1);this._updateColorStyleSelection(this.value,a);this._setPreviewColorStyle(a)},_handleWidgetChange:function(a,b){switch(a){case this._STANDARD_COLORS:this._colorStylesShown&&this._updateColorStyleSelection(this.value,b);this.recentColorsWidgetNode&&this.recentColorsWidgetNode.set("value",b,!1);break;case this._RECENT_COLORS:this.paletteNode.set("value",b,!1);this._colorStylesShown&&this._updateColorStyleSelection(this.value,b);break;case this._GRADIENT:this.colorSpinnerNode.set("value",
b);break;case this._SPINNER:this.colorGradientNode.set("value",b)}this._setPreviewColor(b);this._setValueAndEmitChange(b)},_setValueAndEmitChange:function(a){var b=this.get("value");this._set("value",a);this.emit("change",{mwEventData:{propertyName:"value",oldValue:b,newValue:a}})},_setPreviewColor:function(a){a=new k(a);this.previewColorNode.style.background=a.toCss();this.previewColorNode.textContent="";this.previewColorNode.classList.remove("mwColorPickerPreviewNone");this.previewColorNode.classList.remove("mwColorPickerPreviewColorStyle")},
_setPreviewColorStyle:function(a){switch(a){case this._colorStyleType.AUTO:this.autoColor?this._setPreviewColor(this.autoColor):this._updatePreviewStyle(a);break;case this._colorStyleType.NONE:this.previewColorNode.classList.add("mwColorPickerPreviewNone");this.previewColorNode.classList.remove("mwColorPickerPreviewColorStyle");this.previewColorNode.style.background="";this.previewColorNode.textContent="";break;case this._colorStyleType.FLAT:case this._colorStyleType.INTERP:case this._colorStyleType.TEXTUREMAP:this._updatePreviewStyle(a)}},
_updatePreviewStyle:function(a){this.previewColorNode.style.background="";this.previewColorNode.classList.add("mwColorPickerPreviewColorStyle");this.previewColorNode.classList.remove("mwColorPickerPreviewNone");this.previewColorNode.textContent=m[a]},_updateColorStyleSelection:function(a,b){this._updateSelection(a,!1);this._updateSelection(b,!0)},_updateSelection:function(a,b){switch(a){case this.autoColor:this.autoColorNode&&this.autoColorNode.set("selected",b);break;case this._colorStyleType.AUTO:case this._colorStyleType.NONE:case this._colorStyleType.FLAT:case this._colorStyleType.INTERP:case this._colorStyleType.TEXTUREMAP:this[a+
"ColorNode"]&&this[a+"ColorNode"].set("selected",b)}}})})},"mw-colorpicker/ColorPalette":function(){define("dojo/_base/declare dojo/dom-construct dojo/string dojo/dom-attr dojo/dom-style dojo/on dojo/dom-class dojo/query dijit/_PaletteMixin dijit/_TemplatedMixin dijit/_WidgetBase ./MColor dojo/text!./templates/ColorPalette.html dojo/text!./templates/ColorPaletteSwatch.html dojo/i18n!./l10n/nls/ColorPickerResources".split(" "),function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r){var s=h([n,l,k],{palette:[],title:r.standardColors,
showTitle:!0,_setTitleAttr:{node:"titleNode",type:"innerText"},baseClass:"mwColorPalette",templateString:m,constructor:function(){this._set("palette",p.getStandardColors());this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.dyeClass=s._Color;this._preparePalette(this.palette,{})},startup:function(){this.inherited(arguments);this.own(b(this.gridNode,b.selector(".mwColorPaletteSwatch","mouseover"),this._emitPreviewChangeEvent.bind(this)))},_setShowTitleAttr:function(b){this._set("showTitle",
b);b?a.remove(this.titleNode,"mwColorPaletteTitleHidden"):a.add(this.titleNode,"mwColorPaletteTitleHidden")},_emitPreviewChangeEvent:function(a){a=new p(a.target.style.backgroundColor);this.emit("previewchange",{value:a.toHex()})}});s._Color=h([p],{template:q,getValue:function(){return this.toHex()},fillCell:function(a){var b=g.substitute(this.template,{color:this.toHex(),title:this.toMATLABFriendlyName()});d.set(a,"title",this.toMATLABFriendlyName());e.place(b,a)}});return s})},"dijit/_PaletteMixin":function(){define("dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/keys dojo/_base/lang dojo/on ./_CssStateMixin ./a11yclick ./focus ./typematic".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n){return h("dijit._PaletteMixin",f,{defaultTimeout:500,timeoutChangeRate:0.9,value:"",_selectedCell:-1,tabIndex:"0",cellClass:"dijitPaletteCell",dyeClass:null,_dyeFactory:function(a){return new ("string"==typeof this.dyeClass?b.getObject(this.dyeClass):this.dyeClass)(a)},_preparePalette:function(e,f){this._cells=[];var g=this._blankGif;this.own(a(this.gridNode,k,b.hitch(this,"_onCellClick")));for(var h=0;h<e.length;h++)for(var l=d.create("tr",{tabIndex:"-1",role:"row"},
this.gridNode),t=0;t<e[h].length;t++){var u=e[h][t];if(u){var v=this._dyeFactory(u,h,t,f[u]),u=d.create("td",{"class":this.cellClass,tabIndex:"-1",title:f[u],role:"gridcell"},l);v.fillCell(u,g);u.idx=this._cells.length;this._cells.push({node:u,dye:v})}}this._xDim=e[0].length;this._yDim=e.length;var w={UP_ARROW:-this._xDim,DOWN_ARROW:this._xDim,RIGHT_ARROW:this.isLeftToRight()?1:-1,LEFT_ARROW:this.isLeftToRight()?-1:1},x;for(x in w)this.own(n.addKeyListener(this.domNode,{keyCode:c[x],ctrlKey:!1,altKey:!1,
shiftKey:!1},this,function(){var a=w[x];return function(b){this._navigateByKey(a,b)}}(),this.timeoutChangeRate,this.defaultTimeout))},postCreate:function(){this.inherited(arguments);this._setCurrent(this._cells[0].node)},focus:function(){l.focus(this._currentFocus)},_onCellClick:function(a){for(var b=a.target;"TD"!=b.tagName;){if(!b.parentNode||b==this.gridNode)return;b=b.parentNode}var c=this._getDye(b).getValue();this._setCurrent(b);l.focus(b);this._setValueAttr(c,!0);a.stopPropagation();a.preventDefault()},
_setCurrent:function(a){"_currentFocus"in this&&e.set(this._currentFocus,"tabIndex","-1");(this._currentFocus=a)&&e.set(a,"tabIndex",this.tabIndex)},_setValueAttr:function(a,b){0<=this._selectedCell&&g.remove(this._cells[this._selectedCell].node,this.cellClass+"Selected");this._selectedCell=-1;if(a)for(var c=0;c<this._cells.length;c++)if(a==this._cells[c].dye.getValue()){this._selectedCell=c;g.add(this._cells[c].node,this.cellClass+"Selected");break}this._set("value",0<=this._selectedCell?a:null);
if(b||void 0===b)this.onChange(a)},onChange:function(){},_navigateByKey:function(a,c){if(-1!=c){var d=this._currentFocus.idx+a;d<this._cells.length&&-1<d&&(d=this._cells[d].node,this._setCurrent(d),this.defer(b.hitch(l,"focus",d)))}},_getDye:function(a){return this._cells[a.idx].dye}})})},"dijit/typematic":function(){define("dojo/_base/array dojo/_base/connect dojo/_base/lang dojo/on dojo/sniff ./main".split(" "),function(h,e,g,d,c,b){var a=b.typematic={_fireEventAndReload:function(){this._timer=
null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(0>this._currentTimeout?this._initialDelay:1<this._subsequentDelay?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay),this._minDelay);this._timer=setTimeout(g.hitch(this,"_fireEventAndReload"),this._currentTimeout)},trigger:function(a,b,c,d,e,h,q,r){if(e!=this._obj){this.stop();this._initialDelay=q||500;this._subsequentDelay=h||0.9;this._minDelay=r||10;this._obj=e;this._node=c;this._count=
this._currentTimeout=-1;this._callback=g.hitch(b,d);this._evt={faux:!0};for(var s in a)"layerX"!=s&&"layerY"!=s&&(b=a[s],"function"!=typeof b&&"undefined"!=typeof b&&(this._evt[s]=b));this._fireEventAndReload()}},stop:function(){this._timer&&(clearTimeout(this._timer),this._timer=null);this._obj&&(this._callback(-1,this._node,this._evt),this._obj=null)},addKeyListener:function(b,c,l,n,p,m,q){var r="keyCode"in c?"keyCode":"charCode"in c?"charCode":"charOrCode",s=[d(b,"keyCode"in c?"keydown":"charCode"in
c?"keypress":e._keypress,g.hitch(this,function(d){d[r]==c[r]&&(void 0===c.ctrlKey||c.ctrlKey==d.ctrlKey)&&(void 0===c.altKey||c.altKey==d.altKey)&&(void 0===c.metaKey||c.metaKey==(d.metaKey||!1))&&(void 0===c.shiftKey||c.shiftKey==d.shiftKey)?(d.stopPropagation(),d.preventDefault(),a.trigger(d,l,b,n,c,p,m,q)):a._obj==c&&a.stop()})),d(b,"keyup",g.hitch(this,function(){a._obj==c&&a.stop()}))];return{remove:function(){h.forEach(s,function(a){a.remove()})}}},addMouseListener:function(b,e,l,n,p,m){var q=
[d(b,"mousedown",g.hitch(this,function(c){c.preventDefault();a.trigger(c,e,b,l,b,n,p,m)})),d(b,"mouseup",g.hitch(this,function(b){this._obj&&b.preventDefault();a.stop()})),d(b,"mouseout",g.hitch(this,function(b){this._obj&&b.preventDefault();a.stop()})),d(b,"dblclick",g.hitch(this,function(d){d.preventDefault();9>c("ie")&&(a.trigger(d,e,b,l,b,n,p,m),setTimeout(g.hitch(this,a.stop),50))}))];return{remove:function(){h.forEach(q,function(a){a.remove()})}}},addListener:function(a,b,c,d,e,g,q,r){var s=
[this.addKeyListener(b,c,d,e,g,q,r),this.addMouseListener(a,d,e,g,q,r)];return{remove:function(){h.forEach(s,function(a){a.remove()})}}}};return a})},"mw-colorpicker/MColor":function(){define(["dojo/_base/declare","dojo/_base/Color"],function(h,e){var g=h([e],{toDoubleRGBString:function(){var d=this.toDoubleRGB();return"["+d[0].toFixed(2)+" "+d[1].toFixed(2)+" "+d[2].toFixed(2)+"]"},toMATLABFriendlyName:function(){var d=g.namedMATLABColors[this.toHex().toLowerCase()];return d?this.toDoubleRGBString()+
" - "+d:this.toDoubleRGBString()},toDoubleRGB:function(){return[this.r/255,this.g/255,this.b/255]}});g.fromDoubleRGB=function(d){d=d.map(function(c){return Math.round(255*c)});return new g(d)};g.toHSV=function(d){var c,b,a=d[0]/255,e=d[1]/255,g=d[2]/255,h,n,p=Math.max(a,e,g);b=p-Math.min(a,e,g);0===b?n=h=0:(n=b/p,d=(p-a)/6/b+0.5,c=(p-e)/6/b+0.5,b=(p-g)/6/b+0.5,a===p?h=b-c:e===p?h=1/3+d-b:g===p&&(h=2/3+c-d),0>h?h+=1:1<h&&(h-=1));return[Math.round(360*h),Math.round(100*n),Math.round(100*p)]};g.fromHSV=
function(d){var c=d[0],b=d[1]/100;d=d[2]/100;360===c&&(c=0);var a,e,h;if(0===b)e=h=a=d;else{var l=c/60,c=Math.floor(l),n=l-c,l=d*(1-b),p=d*(1-b*n),b=d*(1-b*(1-n));switch(c){case 0:a=d;e=b;h=l;break;case 1:a=p;e=d;h=l;break;case 2:a=l;e=d;h=b;break;case 3:a=l;e=p;h=d;break;case 4:a=b;e=l;h=d;break;case 5:a=d,e=l,h=p}}a=Math.round(255*a);e=Math.round(255*e);h=Math.round(255*h);return new g([a,e,h])};g.namedMATLABColors={"#ff0000":"red (r)","#ff00ff":"magenta (m)","#ffff00":"yellow (y)","#00ff00":"green (g)",
"#00ffff":"cyan (c)","#0000ff":"blue (b)","#000000":"black (k)","#ffffff":"white (w)"};g.getStandardColors=function(){return["#0073bd #d9541a #edb021 #7d2e8f #78ab30 #4dbfed #a3142e".split(" "),"#ffff11 #139fff #ff6929 #64d413 #b746ff #0fffff #ff13a6".split(" "),"#ffffff #f0f0f0 #e6e6e6 #cccccc #a6a6a6 #808080 #262626".split(" "),"#ff0000 #ff00ff #ffff00 #00ff00 #00ffff #0000ff #000000".split(" ")].slice()};return g})},"mw-colorpicker/ColorSpinner":function(){define("dojo/_base/declare dojo/dom-style dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin mw-form/ComboBox mw-form/Spinner mw-form/TextField mw-form/Label ./MColor dojo/text!./templates/ColorSpinner.html dojo/i18n!./l10n/nls/ColorPickerResources".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p){var m={value:0,step:0.01,width:67,errorText:"Value must be between 0 and 1.",format:"%.2f",height:22,horizontalAlignment:"right",includeMaximum:!0,includeMinimum:!0,limits:{minimum:0,maximum:1}},q={step:1,width:67,errorText:"Value must be an integer between 0 and 255.",format:"%.0f",height:22,horizontalAlignment:"right",includeMaximum:!0,includeMinimum:!0,limits:{minimum:0,maximum:255}},r={pattern:"^#[0-9a-f]{6}",required:!0,selectOnClick:!0,intermediateChanges:!0,
width:206,height:22,horizontalAlignment:"center",style:"font-size: 12px;"},s={step:1,width:67,errorText:"Value must be between 0 and 360.",format:"%.0f",height:22,horizontalAlignment:"right",includeMaximum:!0,includeMinimum:!0,limits:{minimum:0,maximum:360}},t={step:1,width:67,errorText:"Value must be between 0 and 100.",format:"%.0f",height:22,includeMaximum:!0,includeMinimum:!0,limits:{minimum:0,maximum:100}};return h([g,d,c],{value:"#000000",baseClass:"mwColorSpinner",templateString:n,_redTitle:p.redTitle,
_greenTitle:p.greenTitle,_blueTitle:p.blueTitle,_hexTitle:p.hexTitle,_hueTitle:p.hueTitle,_saturationTitle:p.saturationTitle,_valueTitle:p.valueTitle,_DOUBLE_LABEL:p.doubleLabel,_INT_LABEL:p.intLabel,_HEX_LABEL:p.hexLabel,_HSV_LABEL:p.hsvLabel,_handleChangeFcn:{},postCreate:function(){this.inherited(arguments);this.comboBox.set("items",[{label:this._DOUBLE_LABEL,value:this._DOUBLE_LABEL},{label:this._INT_LABEL,value:this._INT_LABEL},{label:this._HEX_LABEL,value:this._HEX_LABEL},{label:this._HSV_LABEL,
value:this._HSV_LABEL}]);this.comboBox.set("value",this._DOUBLE_LABEL);this.comboBox.set("width",206);this.own(this.comboBox.on("change",this._changeColorModel.bind(this)),this.spinnerNode1.on("change",this._handleSpinnerChange.bind(this)),this.spinnerNode2.on("change",this._handleSpinnerChange.bind(this)),this.spinnerNode3.on("change",this._handleSpinnerChange.bind(this)),this.hexTextField.on("change",this._handleHexChange.bind(this)));this._handleChangeFcn=this._handleDoubleSpinnerChange.bind(this);
this._updateSpinnerValues(new l(this.value));this._setLabelsToRGB();this._setSpinnerProps(m);this.hexTextField.set(r)},_setValueAttr:function(a){a=new l(a);this._set("value",a.toHex());this._updateSpinnerValues(a)},_changeColorModel:function(a){a.stopPropagation();a=this.comboBox.get("value");a===this._DOUBLE_LABEL?(this._setSpinnerProps(m),this._setLabelsToRGB(),this._handleChangeFcn=this._handleDoubleSpinnerChange.bind(this)):a===this._INT_LABEL?(this._setSpinnerProps(q),this._setLabelsToRGB(),
this._handleChangeFcn=this._handleIntSpinnerChange.bind(this)):a===this._HEX_LABEL?(this.hexTextField.set("value",this.get("value")),this._showHex()):a===this._HSV_LABEL&&(this._hideHex(),this._setLabelsToHSV(),this.spinnerNode1.set(s),this.spinnerNode2.set(t),this.spinnerNode3.set(t),this._handleChangeFcn=this._handleHsvSpinnerChange.bind(this));this._updateSpinnerValues(new l(this.get("value")))},_updateSpinnerValues:function(a){var b=this.comboBox.get("value");b===this._DOUBLE_LABEL?this._updateDoubleValues(a):
b===this._INT_LABEL?this._updateIntValues(a):b===this._HEX_LABEL?this.hexTextField.set("value",a.toHex()):b===this._HSV_LABEL&&this._updateHsvValues(a)},_updateDoubleValues:function(a){a=a.toDoubleRGB();a=a.map(function(a){return Math.round(100*a)/100});this._setSpinnerValues(a)},_updateIntValues:function(a){a=a.toRgb();this._setSpinnerValues(a)},_updateHsvValues:function(a){a=a.toRgb();a=l.toHSV([a[0],a[1],a[2]]);this._setSpinnerValues(a)},_handleSpinnerChange:function(a){a.stopPropagation();a=this.spinnerNode1.get("value");
var b=this.spinnerNode2.get("value"),c=this.spinnerNode3.get("value");this._handleChangeFcn([a,b,c])},_handleDoubleSpinnerChange:function(a){a=l.fromDoubleRGB(a);this._setValueAndEmitChange(a.toHex())},_handleIntSpinnerChange:function(a){a=new l(a);this._setValueAndEmitChange(a.toHex())},_handleHsvSpinnerChange:function(a){a=l.fromHSV([a[0],a[1],a[2]]);a=new l(a);this._setValueAndEmitChange(a.toHex())},_handleHexChange:function(a){a.stopPropagation();if(a=this._parseAndGetHexValue())this.hexTextField.set("value",
a),this._setValueAndEmitChange(a)},_parseAndGetHexValue:function(){var a=this.hexTextField.get("value");if(/^#[0-9a-f]{3}(?:[0-9a-f]{3})?$/i.test(a))return this.hexTextField.set("validationState","normal"),(new l(a)).toHex();this.hexTextField.set("validationState","error");this.hexTextField.set("errorText",p.invalidHexErrorMessage);return null},_setSpinnerValues:function(a){this.spinnerNode1.set("value",a[0]);this.spinnerNode2.set("value",a[1]);this.spinnerNode3.set("value",a[2])},_setSpinnerProps:function(a){this._hideHex();
this.spinnerNode1.set(a);this.spinnerNode2.set(a);this.spinnerNode3.set(a)},_showHex:function(){e.set(this.hexNode,"display","");e.set(this.spinnersNode,"display","none")},_hideHex:function(){e.set(this.hexNode,"display","none");e.set(this.spinnersNode,"display","")},_setLabelsToHSV:function(){this.titleNode1.set("text",this._hueTitle);this.titleNode2.set("text",this._saturationTitle);this.titleNode3.set("text",this._valueTitle)},_setLabelsToRGB:function(){this.titleNode1.set("text",this._redTitle);
this.titleNode2.set("text",this._greenTitle);this.titleNode3.set("text",this._blueTitle)},_setValueAndEmitChange:function(a){var b=this.get("value");b!==a&&(this._set("value",a),this.emit("change",{mwEventData:{propertyName:"value",oldValue:b,newValue:a}}))}})})},"mw-form/ComboBox":function(){define("dojo/_base/declare dojo/on dojo/_base/lang dojo/keys dijit/popup dijit/_WidgetBase dijit/_Contained dijit/_CssStateMixin dijit/_FocusMixin dijit/_TemplatedMixin dijit/focus dojo/mouse mw-mixins/AccessibilityClickMixin mw-mixins/property/TagMixin mw-mixins/property/DisabledMixin mw-mixins/property/EditableMixin mw-mixins/property/DescriptionMixin mw-mixins/property/SizeMixin mw-mixins/property/TextInputValueMixin mw-mixins/property/VisualFamilyMixin mw-mixins/ResizeMixin mw-mixins/property/ValidationMixin mw-mixins/event/ChangeEventMixin mw-form/TextField dijit/_Container mw-mixins/KeyNavMixin mw-dom-utils/domUtils mw-mixins/mixinDependencyValidator dojo/text!./templates/ComboBox.html".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,B,F,G,H,I,K,C){var M=h([b,l,f,G,H,w],{baseClass:"mwWidget mwComboBoxPopup",templateString:'\x3cdiv tabindex\x3d"0"\x3e\x3cdiv data-dojo-attach-point\x3d"menuItemsNode"\x3e\x3c/div\x3e\x3c/div\x3e',getChildren:function(){return Array.prototype.slice.call(this.menuItemsNode.childNodes)}});return h(K.validate([b,a,f,k,l,m,q,r,s,t,u,v,w,x,A,B]),{baseClass:"mwWidget mwComboBox",templateString:C,editable:!1,text:"",height:22,width:150,maxHeight:500,ORIENTATION_VALUES:{below:["below",
"below-alt"],vertical:["below","below-alt","above","above-alt"],horizontal:["after","before"]},closeOnWindowResize:!0,constructor:function(a){a=a||{};this._textField=new F({editable:!1,disabled:!0});this.own(this._textField);this.own(e(this._textField,"typing",g.hitch(this,"_handleTextFieldTyping")),e(this._textField,"keydown",g.hitch(this,"_handleTextFieldKeyDown")));this.menu=new M({});this.own(this.get("menu"));this._isTextEmpty=!0;this._pendingValue=null;if(a&&!1===this.get("editable")&&a.value&&
!a.items)throw Error("Value cannot be set on a non-editable combo box without having items");},postCreate:function(){this.inherited(arguments);this.own(e(this.domNode,"mousedown",g.hitch(this,"focus")),e(this._textField.inputNode,"blur",g.hitch(this,"_handleTextFieldBlur"),!0),e(this.domNode,"blur",g.hitch(this,"_handleDomNodeBlur"),!0),e(this.domNode,"keydown",g.hitch(this,"_handleDomNodeKeyDown")),e(this.get("menu").menuItemsNode,"click",g.hitch(this,"_handleMenuClick")),e(this.get("menu").menuItemsNode,
"keydown",g.hitch(this,"_handleMenuKeyDown")));this._menuNodeMouseDownHandler||(this._menuNodeMouseDownHandler=g.hitch(this,"_handleArrowNodeMouseDown"),this.menuNode.addEventListener("mousedown",this._menuNodeMouseDownHandler,!0));!0===this.get("disabled")&&(this.menuNode.removeEventListener("mousedown",this._menuNodeMouseDownHandler,!0),this._menuNodeMouseDownHandler=null);this.menu.domNode.addEventListener("blur",g.hitch(this,"_handleMenuBlur"),!0);this._handleWindowResize=function(){!0===this.closeOnWindowResize&&
!0===this._comboBoxMenuOpened&&this.closeMenu()}.bind(this);window.addEventListener("resize",this._handleWindowResize);(void 0===this.get("items")||0===this.get("items").length)&&this.set("items",[]);this.set("menuOrientation","vertical")},_setCloseOnWindowResizeAttr:function(a){if("boolean"!==typeof a)throw Error("Input value expected to be of type 'boolean'.");this._set("closeOnWindowResize",a)},startup:function(){this.inherited(arguments);this.menu.startup();this._textField.startup();this._isResized||
this.resize()},destroy:function(){window.removeEventListener("resize",this._handleWindowResize);this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this._textField.placeAt(this.textFieldContainerNode);this.inputNode=this._textField.inputNode;this.focusNode=this.domNode},_isDescendant:function(a,b){if(a===b)return!0;for(var c=b.parentNode;null!=c;){if(c===a)return!0;c=c.parentNode}return!1},_handleArrowNodeMouseDown:function(a){!0!==this._comboBoxMenuOpened?this._openComboBoxMenu():
this.closeMenu()},closeMenu:function(){c.close(this.menu)},_closeMenuOnBlur:function(a){setTimeout(g.hitch(this,function(){if(!this._isDescendant(this.domNode,document.activeElement)&&!this._isDescendant(this.menu.domNode,document.activeElement)){this.closeMenu();var a=this._getSelectedItemFromLabel(this.inputNode.value);a||(a={label:"",value:""});!0===this.get("editable")&&""!==this.inputNode.value&&this.inputNode.value!==a.label&&this.inputNode.value!==this.get("value")?a&&void 0!==a.index?this.set("value",
a.value,!0):this.set("value",this.inputNode.value,!0):""===this.inputNode.value&&(""!==this.get("value")&&!0===this.get("editable"))&&this.set("value","",!0)}},0))},_handleMenuBlur:function(a){this._closeMenuOnBlur(a)},_handleMenuItemMouseEnter:function(a){I.isFocusable(a.target)&&n.focus(a.target)},_handleTextFieldBlur:function(a){!0===this.get("editable")&&this._closeMenuOnBlur(a)},_handleDomNodeBlur:function(a){!1===this.get("editable")&&this._closeMenuOnBlur(a)},_handleUpAndDownArrow:function(a){var b=
this.get("menu").getChildren(),c=void 0!==this._get("value")?this._getSelectedItemFromValue(this._get("value")):void 0;if(a.keyCode===d.DOWN_ARROW){for(c=c&&void 0!==c.index?c.index%b.length:0;c<b.length;c++)if(this._isKeyboardNav(b[c])){n.focus(b[c]);break}this._comboBoxMenuOpened||this._openComboBoxMenu();a.preventDefault()}else if(a.keyCode===d.UP_ARROW){for(c=c&&void 0!==c.index?c.index%b.length:b.length-1;0<=c;c--)if(this._isKeyboardNav(b[c])){n.focus(b[c]);break}this._comboBoxMenuOpened||this._openComboBoxMenu();
a.preventDefault()}},_handleDomNodeKeyDown:function(a){if(!1===this.get("editable")&&!0===!this.get("disabled")&&(this._handleUpAndDownArrow(a),a.keyCode===d.SPACE||a.keyCode===d.ENTER))!0!==this._comboBoxMenuOpened?this._openComboBoxMenu():this.closeMenu(),a.stopPropagation(),a.preventDefault();a.keyCode===d.ESCAPE&&(!0===this._comboBoxMenuOpened&&(a.stopPropagation(),a.preventDefault()),this.closeMenu())},_setDisabledAttr:function(a){this.inherited(arguments);!0===a?(this._menuNodeMouseDownHandler&&
(this.menuNode.removeEventListener("mousedown",this._menuNodeMouseDownHandler,!0),this._menuNodeMouseDownHandler=null),this.closeMenu()):this.menuNode&&null===this._menuNodeMouseDownHandler&&(this._menuNodeMouseDownHandler=g.hitch(this,"_handleArrowNodeMouseDown"),this.menuNode.addEventListener("mousedown",this._menuNodeMouseDownHandler,!0));!0===this.get("editable")&&this._textField.set("disabled",a)},_handleTextFieldKeyDown:function(a){!0===this.get("editable")&&this._handleUpAndDownArrow(a);!0===
this.get("editable")&&a.keyCode===d.ENTER&&(a=this.inputNode.value,this._isTextEmpty=!0,(a=this._getSelectedItemFromLabel(a))&&void 0!==a.index?this.set("value",a.value,!0):this.set("value",this.inputNode.value,!0),this.closeMenu())},_openComboBoxMenu:function(a){var b=void 0!==this._get("value")?this._getSelectedItemFromValue(this._get("value")):void 0;void 0!==b&&0<this.get("menu").getChildren().length&&(this.get("menu").getChildren()[b.index].classList.add("mwComboBoxSelectedMenuItem"),this.get("menu").getChildren()[b.index].focus());
(!a||!a.typing)&&this.get("menu").getChildren().forEach(function(a,b){"none"===a.style.display&&(a.style.display="")});this.menu.domNode.style.minWidth=this.domNode.getBoundingClientRect().width+"px";c.open({parent:this,popup:this.menu,around:this.domNode,orient:this.menuOrientation,onClose:g.hitch(this,function(){!0===!this._destroyed&&this.domNode.classList.remove("mwHasMenuOpened");this._comboBoxMenuOpened=!1;this.menu&&(this.menu.domNode&&this.menu.domNode.parentNode)&&(this.menu.domNode.parentNode.style.overflowX=
"visible",this.menu.domNode.parentNode.style.overflowY="visible")})});this.domNode.classList.add("mwHasMenuOpened");this._comboBoxMenuOpened=!0;this.menu.domNode.parentElement.classList.contains("mwComboBoxPopupParent")||this.menu.domNode.parentElement.classList.add("mwComboBoxPopupParent")},_handleTextFieldTyping:function(a){var b=a.mwEventData.currentContent,c=RegExp(this._escapeRegExp(b),"i");this.get("menu").getChildren().forEach(g.hitch(this,function(a,d){if(this._isSeparator(a))a.style.display=
"none";else{var e=a.textContent;if(0===e.toLowerCase().indexOf(b.toLowerCase())){if(""!==b||c.test(e))a.style.display=""}else a.style.display="none"}}));var d=0;this.get("menu").getChildren().forEach(g.hitch(this,function(a){this._isSeparator(a)&&0<d?(a.style.display="block",d=0):!this._isSeparator(a)&&"none"!==a.style.display&&d++}));this._comboBoxMenuOpened||this._openComboBoxMenu({typing:!0})},_handleMenuKeyDown:function(a){a.keyCode===d.BACKSPACE&&(a.preventDefault(),n.focus(this._textField.focusNode));
(a.keyCode===d.ENTER||a.keyCode===d.SPACE)&&!this.get("disabled")&&e.emit(a.target,"click",{bubbles:!0,cancelable:!0,mwEventData:{keyCode:a.keyCode},_dojo_click:!0});(a.keyCode===d.LEFT_ARROW||a.keyCode===d.RIGHT_ARROW)&&this.editable&&n.focus(this._textField.focusNode);a.keyCode===d.ESCAPE&&(this.closeMenu(),n.focus(this.focusNode),a.stopPropagation(),a.preventDefault())},_handleMenuClick:function(a){this._isSeparator(a.target)||!a.target.classList.contains("mwMenuItem")&&!a.target.classList.contains("mwTextNode")?
a.preventDefault():(a=this._getSelectedItemFromLabel(a.target.textContent).value,this.set("value",a,!0),this.closeMenu())},_removeSelectedMenuItemColor:function(){var a=void 0!==this._get("value")?this._getSelectedItemFromValue(this._get("value")):void 0;void 0!==a&&0<this.get("menu").getChildren().length&&this.get("menu").getChildren()[a.index].classList.remove("mwComboBoxSelectedMenuItem")},_onMouseDown:function(){this.inherited(arguments);n.focus(this.get("menu").focusNode)},_getParentPopup:function(a){for(;a;){if(a.classList&&
a.classList.contains("dijitPopup"))return a;a=a.parentNode}return null},resize:function(){this._textField.domNode.parentNode.style.width="calc(100% - 22px)";this._textField.set("width","100%")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{setTimeout(g.hitch(this,function(){n.focus(this.focusNode)}),0)}catch(a){}},_setMaxHeightAttr:function(a){if("number"!==typeof a)throw Error("'MaxHeight' property expects a Number!");this.menu.domNode.style.maxHeight=a+"px";this._set("maxHeight",
a)},_setValueAttr:function(a,b){var c=this._getSelectedItemFromValue(a);if(("number"===typeof a?a.toString():a)&&c&&void 0!==c.index)this._textField.set("value",c.label),this._isTextEmpty=!0,this._removeSelectedMenuItemColor(),0<this.get("menu").getChildren().length&&void 0!==c.index&&this.get("menu").getChildren()[c.index].classList.add("mwComboBoxSelectedMenuItem");else if(("number"===typeof a?a.toString():a)&&!c)if(this.get("editable"))this._removeSelectedMenuItemColor(),this._textField.set("value",
a),this._isTextEmpty=!1;else{if(!this.get("items")||0===this.get("items").length){this._pendingValue=a;return}throw Error("Value must match an existing item for non-editable combo box");}else""===a&&(this._textField.set("value",""),void 0!==this._get("value")&&(this._removeSelectedMenuItemColor(),this._isTextEmpty=!0),""!==this.get("text")&&(this._isTextEmpty=!1));!0===this._isTextEmpty?this.set("text",""):this.set("text",a);c=this.get("value");this._set("value",a);var d=this.get("value");!0===b&&
c!==d&&this._triggerChangeEvent("value",c,d)},_getValueAttr:function(){return this._get("value")},_setItemsAttr:function(a){a&&0<a.length?(this.set("value","",!0),this._initMenuItems(a)):(this.set("value","",!0),this._destroyMenuItems());this._set("items",a);!1===this.get("editable")&&null!=this._pendingValue&&(this.set("value",this._pendingValue,!0),this._pendingValue=null)},_initMenuItems:function(a){0<this.get("menu").getChildren().length&&this._destroyMenuItems();a.forEach(function(a,b){var c=
document.createElement("div");if(a.type&&"separator"===a.type)c.setAttribute("data-refuse-key-nav",!0),c.setAttribute("data-menu-item-type","separator"),c.classList.add("mwMenuSeparator"),this.get("menu").menuItemsNode.appendChild(c);else{c.setAttribute("tabIndex","0");"mwDefaultVisualFamily mwTextMixin mwTextMixin mwWidget mwSharedMenuItem mwMenuItem".split(" ").forEach(function(a){c.classList.add(a)});var d=document.createElement("div");d.textContent=a.label;d.classList.add("mwTextNode");c.appendChild(d);
this.get("menu").menuItemsNode.appendChild(c);c.addEventListener("mouseover",g.hitch(this,"_handleMenuItemMouseEnter"))}},this)},_getItemsAttr:function(){return this._get("items")},_setEditableAttr:function(a){a?(this.domNode.classList.add("mwEditableComboBox"),this.domNode.classList.remove("mwNonEditable"),this.focusNode=this._textField.focusNode,this._toggleTextField(!0),this._textField.focusNode.setAttribute("tabIndex","0"),this.menuNode=this.arrowNode,this._set("editable",!0)):(this.domNode.classList.add("mwNonEditable"),
this.domNode.classList.remove("mwEditableComboBox"),this.focusNode=this.domNode,this._toggleTextField(!1),this._textField.focusNode.setAttribute("tabIndex","-1"),this.menuNode=this.domNode,this._set("editable",!1))},_setTextAttr:function(a){!1===this._isTextEmpty||(""===this.get("value")||void 0===this.get("value"))&&""!==a?(this.get("editable")&&void 0===this._getSelectedItemFromValue(a)?(this._set("text",a),this._isTextEmpty=!1):(this._isTextEmpty=!0,this._set("text","")),this._textField.set("value",
a)):this._set("text","")},_getTextAttr:function(a){return this._get("text")},_toggleTextField:function(a){this._textField.set("editable",a);!0===this.get("disabled")?this._textField.set("disabled",a):this._textField.set("disabled",!a)},_setMenuOrientationAttr:function(a){if("string"!==typeof a||-1===this.ORIENTATION_VALUES.hasOwnProperty(a))throw Error("'menuOrientation' property expects one of these values: "+Object.keys(this.ORIENTATION_VALUES));this._set("menuOrientation",this.ORIENTATION_VALUES[a])},
_setWidthAttr:function(a){this.inherited(arguments);(void 0!==this._started||!0===this._started)&&this.resize()},_setHeightAttr:function(a){this.inherited(arguments);this._textField.set("height",a)},_setPlaceholderAttr:function(a){this._textField.set("placeholder",a);this._set("placeholder",a)},_getPlaceholderAttr:function(){return this._textField.get("placeholder")},_destroyMenuItems:function(){for(;this.get("menu").menuItemsNode.firstChild;)this.get("menu").menuItemsNode.firstChild.removeEventListener("mouseover",
g.hitch(this,"_handleMenuItemMouseEnter")),this.get("menu").menuItemsNode.removeChild(this.get("menu").menuItemsNode.firstChild)},_escapeRegExp:function(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$\x26")},_getSelectedItemFromLabel:function(a){var b={};if(this.get("items")&&0<this.get("items").length)for(var c=0;c<this.get("items").length;c++){var d=this.get("items")[c];if(void 0!==d.label&&d.label===a){b.label=d.label;b.value=d.value;b.index=c;break}}return void 0!==b.index?b:void 0},_getSelectedItemFromValue:function(a){var b=
{};if(this.get("items")&&0<this.get("items").length)for(var c=0;c<this.get("items").length;c++){var d=this.get("items")[c];if(void 0!==d.value&&(d.value===a||"object"===typeof d.value&&JSON.stringify(d.value)===JSON.stringify(a))){b.label=d.label;b.value=d.value;b.index=c;break}}return void 0!==b.index?b:void 0},_isSeparator:function(a){return a&&a.getAttribute("data-menu-item-type")&&"separator"===a.getAttribute("data-menu-item-type")},_isKeyboardNav:function(a){return"none"!==a.style.display&&!this._isSeparator(a)},
_qeSelectItemByLabel:function(a){a=this._getSelectedItemFromLabel(a).value;this.set("value",a,!0)},_qeSelectItemByValue:function(a){a=this._getSelectedItemFromValue(a).value;this.set("value",a,!0)},_qeSelectItemByIndex:function(a){a=this.get("items")[a].value;this.set("value",a,!0)}})})},"mw-mixins/KeyNavMixin":function(){define("dojo/_base/declare dijit/registry dijit/focus dojo/_base/lang dojo/on dojo/keys".split(" "),function(h,e,g,d,c,b){return h(null,{postCreate:function(){this.inherited(arguments);
this.own(c(this,"keydown",d.hitch(this,"_handleKeyBoardNavigation")))},_handleKeyBoardNavigation:function(a){var c=g.curNode;if(a.keyCode===b.DOWN_ARROW)this._handleDownArrow(c),a.preventDefault();else if(a.keyCode===b.UP_ARROW)this._handleUpArrow(c),a.preventDefault();else if(a.keyCode===b.PAGE_UP||a.keyCode===b.HOME)this._moveToFirstChild(c),a.preventDefault();else if(a.keyCode===b.PAGE_DOWN||a.keyCode===b.END)this._moveToLastChild(c),a.preventDefault()},_handleDownArrow:function(a){a=a.parentElement.lastChild===
a?a.parentElement.firstChild:a.nextSibling;a=this._moveToNextFocusableNode(a);a.focus()},_handleUpArrow:function(a){a=a.parentElement.firstChild===a?a.parentElement.lastChild:a.previousSibling;a=this._moveToPreviousFocusableNode(a);a.focus()},_moveToNextFocusableNode:function(a){for(var b;a;)if(b=e.getEnclosingWidget(a),a.getAttribute("data-refuse-key-nav")||b&&b.get("disabled")||"none"===a.style.display)a=a.nextSibling?a.nextSibling:this._moveToFirstChild(a);else break;return a},_moveToPreviousFocusableNode:function(a){for(var b;a;)if(b=
e.getEnclosingWidget(a),a.getAttribute("data-refuse-key-nav")||b&&b.get("disabled")||"none"===a.style.display)a=a.previousSibling?a.previousSibling:this._moveToLastChild(a);else break;return a},_moveToFirstChild:function(a){for(a=a.parentElement.firstChild;a;)if(a.getAttribute("data-refuse-key-nav"))a=a.nextSibling;else break;return a},_moveToLastChild:function(a){for(a=a.parentElement.lastChild;a;)if(a.getAttribute("data-refuse-key-nav"))a=a.previousSibling;else break;return a}})})},"mw-form/Spinner":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/dom-geometry dojo/dom-construct dojo/on dojo/keys dijit/_WidgetBase dijit/_Contained dijit/_CssStateMixin dijit/_FocusMixin dijit/_TemplatedMixin mw-form/TextField mw-mixins/property/TagMixin mw-mixins/property/DisabledMixin mw-mixins/property/EditableMixin mw-mixins/property/FormatMixin mw-mixins/property/SizeMixin mw-mixins/property/ValidationMixin mw-mixins/property/VisualFamilyMixin mw-mixins/property/HorizontalAlignmentMixin mw-mixins/event/ChangeEventMixin mw-mixins/event/TypingEventMixin mw-mixins/ResizeMixin mw-mixins/mixinDependencyValidator dojo/text!./templates/Spinner.html".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,B,F,G,H){var I=Number.MAX_VALUE,K=Number.NEGATIVE_INFINITY;return h(G.validate([f,k,l,n,p,q,r,s,t,u,v,w,x,A,B,F]),{baseClass:"mwWidget mwSpinner",templateString:H,width:150,height:22,value:100,step:1,errorText:"",horizontalAlignment:"right",_preventClick:!1,includeMinimum:!0,includeMaximum:!0,constructor:function(){this._textField=new m({horizontalAlignment:"right"});this.focusNode=this._textField.focusNode;this.inputNode=this._textField.inputNode;
this.own(this._textField);this.limits={minimum:0,maximum:Number.POSITIVE_INFINITY};this.own(this._textField.watch("value",e.hitch(this,function(a,b,c){isNaN(parseFloat(c))||this._set("value",parseFloat(c))})))},buildRendering:function(){this.inherited(arguments);this._textField.placeAt(this.containerNode,"first")},_setEditableAttr:function(a){if("boolean"!==typeof a)throw Error("Editable property expects a boolean");this._textField.set("editable",a);a?this.domNode.classList.remove("mwNonEditable"):
this.domNode.classList.add("mwNonEditable");this._set("editable",a)},_setDisabledAttr:function(a){this.inherited(arguments);this._textField.set("disabled",a)},_setHorizontalAlignmentAttr:function(a){this.inherited(arguments);this._textField.set("horizontalAlignment",a)},_setStepAttr:function(a){if("number"!==typeof a)throw Error("'step' property expects a Number!");this._set("step",a)},_setValueAttr:function(a){if(a<this.get("limits").minimum||a>this.get("limits").maximum)throw Error("'Value' must be numeric and fall within the range of 'Limits'.");
this._checkValueInLimits(a);this._textField.set("value",a+"");this._set("value",a)},_checkValueInLimits:function(a){if(this._rangeCheck(a)){this.incrementButtonNode.classList.remove("mwIncrementButtonDisabled");this.decrementButtonNode.classList.remove("mwDecrementButtonDisabled");if(this.get("includeMaximum"))parseFloat(a)===this.get("limits").maximum&&this.incrementButtonNode.classList.add("mwIncrementButtonDisabled");else{var b=this._calculateIncrement(this.get("limits").maximum,-0.1);parseFloat(a)===
this.get("limits").maximum+b&&this.incrementButtonNode.classList.add("mwIncrementButtonDisabled")}this.get("includeMinimum")?parseFloat(a)===this.get("limits").minimum&&this.decrementButtonNode.classList.add("mwDecrementButtonDisabled"):(b=this._calculateIncrement(this.get("limits").minimum,0.1),parseFloat(a)===this.get("limits").minimum+b&&this.decrementButtonNode.classList.add("mwDecrementButtonDisabled"))}else if(this.get("includeMaximum")&&parseFloat(a)===this.get("limits").maximum||!this.get("includeMaximum")&&
parseFloat(a)<=this.get("limits").maximum)this.incrementButtonNode.classList.add("mwIncrementButtonDisabled"),this.decrementButtonNode.classList.remove("mwDecrementButtonDisabled");else if(this.get("includeMinimum")&&parseFloat(a)===this.get("limits").minimum||!this.get("includeMinimum")&&parseFloat(a)>=this.get("limits").minimum)this.decrementButtonNode.classList.add("mwDecrementButtonDisabled"),this.incrementButtonNode.classList.remove("mwIncrementButtonDisabled")},_getValueAttr:function(){return parseFloat(this._textField.get("value"))},
_setWidthAttr:function(a){this.inherited(arguments);this.resize()},_setLimitsAttr:function(a){if("object"!==typeof a)throw Error("'IncludeMinimum' property expects an 'Object'!");this._validateLimits(a);this._set("limits",a);this._applyConstraintsToValue()},_validateLimits:function(a){if("number"!==typeof a.maximum||"number"!==typeof a.minimum)throw Error("'Limits' expects an Object of numbers!");if(a.minimum>a.maximum)throw Error("'Minimum' should be less than maximum");},_setIncludeMinimumAttr:function(a){if("boolean"!==
typeof a)throw Error("'IncludeMinimum' property expects a 'Boolean'!");this._set("includeMinimum",a);this._applyConstraintsToValue()},_setIncludeMaximumAttr:function(a){if("boolean"!==typeof a)throw Error("'IncludeMaximum' property expects a 'Boolean'!");this._set("includeMaximum",a);this._applyConstraintsToValue()},_applyConstraintsToValue:function(){var a=this.get("includeMaximum")?this.get("limits").maximum:this.get("limits").maximum-this.get("step"),b=this.get("includeMinimum")?this.get("limits").minimum:
this.get("limits").minimum+this.get("step");this.get("limits").maximum<this.get("value")&&this.set("value",a);this.get("limits").minimum>this.get("value")&&this.set("value",b)},_getDomNodeForValidationClasses:function(){return this.domNode},postCreate:function(){this.inherited(arguments);this.set("value",this.value);this.own(b(this.domNode,"keydown",e.hitch(this,"_onKeyDown")),b(this.incrementButtonNodeWrapper,"click",e.hitch(this,function(){if(!this._preventClick){var a=parseFloat(this._textField.get("value"));
this._handleIncrement(this.get("step"));var b=parseFloat(this._textField.get("value"));this._triggerChangeEvent("value",a,b)}})),b(this.decrementButtonNodeWrapper,"click",e.hitch(this,function(){if(!this._preventClick){var a=parseFloat(this._textField.get("value"));this._handleDecrement(this.get("step"));var b=parseFloat(this._textField.get("value"));this._triggerChangeEvent("value",a,b)}})),b(this.incrementButtonNodeWrapper,"mousedown",e.hitch(this,this._onIncrementButtonMouseDown)),b(this.decrementButtonNodeWrapper,
"mousedown",e.hitch(this,this._onDecrementButtonMouseDown)),b(this.incrementButtonNodeWrapper,"mouseup, mouseout",e.hitch(this,this._onButtonMouseUp)),b(this.decrementButtonNodeWrapper,"mouseup, mouseout",e.hitch(this,this._onButtonMouseUp)),b(this._textField,"focusin",e.hitch(this._textField,function(){this.inputNode.select()})));this._textField.on("change",e.hitch(this,function(a){this._onChangeHandler(a)}));this._textField.on("typing",e.hitch(this,function(a){this._handleValidation(a.mwEventData.currentContent)}))},
_onChangeHandler:function(a){var b;a.preventDefault();a.stopPropagation();"normal"!==this.get("validationState")?this._revertToOldValue(a.mwEventData.oldValue):(b=a.mwEventData.oldValue,a=a.mwEventData.newValue,this._triggerChangeEvent("value",this._isNumeric(b)?parseFloat(b):b,this._isNumeric(a)?parseFloat(a):a),this._checkValueInLimits(a),this.set("value",this._isNumeric(a)?parseFloat(a):a))},startup:function(){this._textField.startup();this.inherited(arguments)},_getParentPopup:function(a){for(;a;){if(a.classList&&
a.classList.contains("dijitPopup"))return a;a=a.parentNode}return null},resize:function(){var a=d.position(this.domNode).w,b=d.position(this.buttonsContainerNode).w;if(0===b){var c=this._getParentPopup(this.buttonsContainerNode);if(null!==c){c.classList.add("dijitOffScreen");var e=g.get(c,"display");c.style.display="block";b=d.position(this.buttonsContainerNode).w;c.style.display=e}}d.getPadBorderExtents(this._textField.domNode);c=d.getPadBorderExtents(this.buttonsContainerNode);c=c.l+c.r;this.containerNode.style.width=
a-b+"px";this._textField.domNode.style.width=a-b-c+"px";this.inherited(arguments)},_onIncrementButtonMouseDown:function(){this._delayStart=setTimeout(e.hitch(this,function(){this._valueChangeTimer=setInterval(e.hitch(this,function(){var a=parseFloat(this._textField.get("value"));this._handleIncrement(this.get("step"));var b=parseFloat(this._textField.get("value"));this._triggerChangingEvent("value",a,b)}),100);this._preventClick=!0}),300)},_triggerChangingEvent:function(a,b,c){this.emit("changing",
{mwEventData:{propertyName:a,oldValue:b,newValue:c}})},_onDecrementButtonMouseDown:function(){this._delayStart=setTimeout(e.hitch(this,function(){this._valueChangeTimer=setInterval(e.hitch(this,function(){var a=parseFloat(this._textField.get("value"));this._handleDecrement(this.get("step"));var b=parseFloat(this._textField.get("value"));this._triggerChangingEvent("value",a,b)}),100);this._preventClick=!0}),300)},_onButtonMouseUp:function(){clearInterval(this._valueChangeTimer);clearTimeout(this._delayStart);
this._preventClick=!1},_onKeyDown:function(b){b.keyCode===a.UP_ARROW?(b.preventDefault(),this._handleIncrement(this.get("step"))):b.keyCode===a.DOWN_ARROW?(b.preventDefault(),this._handleDecrement(this.get("step"))):b.keyCode===a.PAGE_UP?b.preventDefault():b.keyCode===a.PAGE_DOWN&&b.preventDefault()},_handleIncrement:function(a){var b;b=parseFloat(this._textField.get("value"))+a;this._rangeCheck(b)?(this._textField.set("value",b),!this._isInt(b)&&!this._isInt(this.get("step"))&&this._textField.setValueInDom(this._formatShort(this.get("value"))),
this.get("includeMaximum")?this.get("limits").maximum===b?this.incrementButtonNode.classList.add("mwIncrementButtonDisabled"):this.decrementButtonNode.classList.remove("mwDecrementButtonDisabled"):(this.incrementButtonNode.classList.remove("mwIncrementButtonDisabled"),this.decrementButtonNode.classList.remove("mwDecrementButtonDisabled"))):(this.get("includeMaximum")?(this._textField.set("value",this.get("limits").maximum),!this._isInt(b)&&!this._isInt(this.get("step"))&&this._textField.setValueInDom(this._formatShort(this.get("limits").maximum))):
(b=this._calculateIncrement(this.get("limits").maximum,-0.1),b=this.get("limits").maximum+b,this._textField.set("value",b),!this._isInt(b)&&!this._isInt(this.get("step"))&&this._textField.setValueInDom(this._formatShort(b))),this._disableIncrementButton(b,a))},_handleDecrement:function(a){var b;b=parseFloat(this._textField.get("value"))-a;this._rangeCheck(b)?(this._textField.set("value",b),!this._isInt(b)&&!this._isInt(this.get("step"))&&this._textField.setValueInDom(this._formatShort(this.get("value"))),
this.get("includeMinimum")?this.get("limits").minimum===b?this.decrementButtonNode.classList.add("mwDecrementButtonDisabled"):this.incrementButtonNode.classList.remove("mwIncrementButtonDisabled"):(this.incrementButtonNode.classList.remove("mwIncrementButtonDisabled"),this.decrementButtonNode.classList.remove("mwDecrementButtonDisabled"))):(this.get("includeMinimum")?(this._textField.set("value",this.get("limits").minimum),!this._isInt(b)&&!this._isInt(this.get("step"))&&this._textField.setValueInDom(this._formatShort(this.get("limits").minimum))):
(b=this._calculateIncrement(this.get("limits").minimum,0.1),b=this.get("limits").minimum+b,this._textField.set("value",b),!this._isInt(b)&&!this._isInt(this.get("step"))&&this._textField.setValueInDom(this._formatShort(b))),this._disableDecrementButton(b,a))},_calculateIncrement:function(a,b){var c=b;if(a===I||a===K||Infinity===a)return 0;for(;!1===this._rangeCheck(a+c,this.constraints);)c/=10;return c},_disableIncrementButton:function(a,b){this.incrementButtonNode.classList.remove("mwIncrementButtonDisabled");
this.decrementButtonNode.classList.remove("mwDecrementButtonDisabled");this._rangeCheck(a+b)?(this.incrementButtonNode.classList.remove("mwIncrementButtonDisabled"),this.decrementButtonNode.classList.remove("mwDecrementButtonDisabled")):this.incrementButtonNode.classList.add("mwIncrementButtonDisabled")},_disableDecrementButton:function(a,b){this.incrementButtonNode.classList.remove("mwIncrementButtonDisabled");this.decrementButtonNode.classList.remove("mwDecrementButtonDisabled");this._rangeCheck(a-
b)?(this.decrementButtonNode.classList.remove("mwDecrementButtonDisabled"),this.incrementButtonNode.classList.remove("mwIncrementButtonDisabled")):this.decrementButtonNode.classList.add("mwDecrementButtonDisabled")},_rangeCheck:function(a){a=parseFloat(a);var b=!1===this.get("includeMinimum")?a>this.get("limits").minimum:a>=this.get("limits").minimum;a=!1===this.get("includeMaximum")?a<this.get("limits").maximum:a<=this.get("limits").maximum;return b&&a},_setRevertTimeout:function(a){return a||2E3},
_revertToOldValue:function(a){this._hiddenDiv=c.create("div",{},this.domNode);var b=d.getBorderExtents(this.domNode);this._hiddenDiv.style.top=-b.t+"px";this._hiddenDiv.style.right=-b.r+"px";this._hiddenDiv.style.bottom=-b.b+"px";this._hiddenDiv.style.left=-b.l+"px";this._hiddenDiv.style.position="absolute";this._hiddenDiv.addEventListener("mousedown",function(a){a.preventDefault();a.stopPropagation()});setTimeout(e.hitch(this,function(){!0!==this._destroyed&&(this._textField.set("value",a),this._handleDisplayFormat(),
this.set("validationState","normal"),c.destroy(this._hiddenDiv))}),this._setRevertTimeout())},_handleValidation:function(a){parseFloat(a)<=this.get("limits").minimum&&!this.get("includeMinimum")||parseFloat(a)<this.get("limits").minimum&&this.get("includeMinimum")||parseFloat(a)>this.get("limits").maximum&&this.get("includeMaximum")||parseFloat(a)>=this.get("limits").maximum&&!this.get("includeMaximum")||this._containsNonNumericCharacter(a)||isNaN(parseFloat(a))?this.set("validationState","error"):
(this.set("validationState","normal"),this.validationTooltip&&this.validationTooltip.domNode.classList.remove("mwValidationFocused"))},_containsNonNumericCharacter:function(a){return a.split("").some(function(a){return-1==="0123456789.".indexOf(a)})},_isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},_isInt:function(a){return Number(a)===a&&0===a%1},_formatShort:function(a){return a.toFixed(4)},_qeTypeOverWithEnter:function(a){var b=this.get("value");this.set("value",a);this._triggerChangeEvent("value",
b,a)}})})},"mw-mixins/property/FormatMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/_FocusMixin"],function(h,e,g){h=h(null,{format:"",constructor:function(){this.displayValueFormatter=null},postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwFormatMixin");this.set("format",this.get("format"))},startup:function(){this.inherited(arguments);this._handleDisplayFormat()},_setFormatAttr:function(d){if("string"!==typeof d)return Error("Format property expects a ''string");
this._set("format",d);this._handleDisplayFormat()},_handleDisplayFormat:function(){var d=this.get("format"),c=parseFloat(this._textField.get("value"));if(c||0===c)if(d.match("%*[0-9|.]d")||0<=d.indexOf("%i"))this._textField.setValueInDom(parseFloat(c).toFixed(4)+d.substr(d.indexOf("d")+1,d.length));else if(d.match("%*[0-9|.]f")){var b=parseFloat(d.replace(/(.*\.)(.*)(f.*)/,"$2"));b&&this._textField.setValueInDom(c.toFixed(b)+d.substr(d.indexOf("f")+1,d.length))}else this.displayValueFormatter&&this.displayValueFormatter(this.get("value")).then(e.hitch(this,
function(a){this._textField.setValueInDom(a)}))},_onBlur:function(){this.inherited(arguments);"normal"===this.get("validationState")&&this._handleDisplayFormat();this._formattedValueSet=!0},_onFocus:function(){this.inherited(arguments);this.get("disabled")||(!this._isInt(this.get("value"))||!this._isInt(this.get("step")))&&"normal"===this.get("validationState")&&this._textField.setValueInDom(this.get("value").toFixed(4));this._formattedValueSet=!1}});h._dependencies=[{mixin:g,orderDependent:!1}];
return h})},"mw-form/Label":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_Contained dijit/_CssStateMixin dijit/_FocusMixin dijit/_TemplatedMixin mw-mixins/property/TagMixin mw-mixins/property/DescriptionMixin mw-mixins/property/DisabledMixin mw-mixins/property/HorizontalAlignmentMixin mw-mixins/property/IconAlignmentMixin mw-mixins/property/IconMixin mw-mixins/property/SizeMixin mw-mixins/property/TextMixin mw-mixins/property/VisualFamilyMixin mw-mixins/property/VerticalAlignmentMixin mw-mixins/IconAndTextSizingMixin mw-mixins/PreventSelectionMixin mw-mixins/AccessibilityClickMixin mw-mixins/mixinDependencyValidator mw-mixins/AriaLabelledByMixin dojo/text!./templates/Label.html".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A){return h(w.validate([e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,x]),{baseClass:"mwWidget mwLabel",templateString:A,_paddingAndBorder:0,_setTabIndexOnNode:function(){}})})},"mw-colorpicker/ColorGradient":function(){define("dojo/_base/declare dojo/on dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin ./MColor dojo/text!./templates/ColorGradient.html".split(" "),function(h,e,g,d,c,b,a){return h([d,g,c],{value:"#ff0000",_gradientClicked:!1,
_hueClicked:!1,_GRADIENT_MARKER_RADIUS:3,_HUE_MARKER_HEIGHT:3,_hue:0,_sat:100,_val:100,baseClass:"mwColorGradient",templateString:a,postCreate:function(){this.inherited(arguments);this.own(e(this.gradientNode,"mousedown",this._handleClickOnGradient.bind(this)),e(this.hueNode,"mousedown",this._handleClickOnHue.bind(this)))},startup:function(){this.inherited(arguments);this._updateMarkers()},_setValueAttr:function(a){a=new b(a);this._set("value",a.toHex());a=b.toHSV(a.toRgb());this._set("_hue",a[0]);
this._set("_sat",a[1]);this._set("_val",a[2]);this._updateMarkers();this._setBackgroundColor(b.fromHSV([a[0],100,100]))},_handleClickOnGradient:function(a){0===a.button&&(this._gradientClicked=!0,this._calculateDimensions(),this._gradientRect=this.gradientNode.getBoundingClientRect(),this._addMouseEventListeners());a.preventDefault()},_handleClickOnHue:function(a){0===a.button&&(this._hueClicked=!0,this._calculateDimensions(),this._hueRect=this.hueNode.getBoundingClientRect(),this._addMouseEventListeners());
a.preventDefault()},_addMouseEventListeners:function(){this._mouseMoveHandler=this._handleMouseMove.bind(this);this._mouseUpHandler=this._handleMouseUp.bind(this);document.addEventListener("mousemove",this._mouseMoveHandler);document.addEventListener("mouseup",this._mouseUpHandler)},_handleMouseUp:function(a){document.removeEventListener("mousemove",this._mouseMoveHandler);document.removeEventListener("mouseup",this._mouseUpHandler);this._gradientClicked?(this._gradientClicked=!1,this._updateGradient(a)):
this._hueClicked&&(this._hueClicked=!1,this._updateHue(a))},_handleMouseMove:function(a){this._gradientClicked&&this._updateGradient(a);this._hueClicked&&this._updateHue(a)},_updateGradient:function(a){var b=this._calculateNewMarkerPosition(a,this._gradientRect);a=Math.round(100*(b.offsetX/this._gradientRect.width));b=Math.round(100*((this._gradientRect.height-b.offsetY)/this._gradientRect.height));this.set("_sat",a);this.set("_val",b);this._setValueAndEmitChange();this._updateGradientMarker()},_updateHue:function(a){a=
this._calculateNewHueColor(a);this.set("_hue",a);this._setValueAndEmitChange();a=b.fromHSV([a,100,100]);this._setBackgroundColor(a);this._updateHueMarker()},_calculateNewHueColor:function(a){a=this._calculateNewMarkerPosition(a,this._hueRect);return Math.round(360*(a.offsetY/this._hueRect.height))},_calculateNewMarkerPosition:function(a,b){var c=b.left,d=b.top,e=b.left+b.width,g=b.top+b.height,e=Math.min(Math.max(a.clientX,c),e),g=Math.min(Math.max(a.clientY,d),g);return{offsetX:e-c,offsetY:g-d}},
_updateMarkers:function(){this._calculateDimensions();this._updateGradientMarker();this._updateHueMarker()},_updateGradientMarker:function(){var a=this._height-this._height*this._val/100-this._GRADIENT_MARKER_RADIUS;this.gradientMarkerNode.style.left=this._width*this._sat/100-this._GRADIENT_MARKER_RADIUS+"px";this.gradientMarkerNode.style.top=a+"px"},_updateHueMarker:function(){this.hueMarkerNode.style.top=this._hue/360*this._height-this._HUE_MARKER_HEIGHT+"px"},_setValueAndEmitChange:function(){var a=
this.get("value"),c=this.get("_hue"),d=this.get("_sat"),e=this.get("_val"),c=b.fromHSV([c,d,e]).toHex();a!==c&&(this._set("value",c),this.emit("change",{mwEventData:{propertyName:"value",oldValue:a,newValue:c}}))},_setBackgroundColor:function(a){this.gradientNode.style.backgroundColor=a.toCss(!1)},_calculateDimensions:function(){this._height=88;this._width=178;this.domNode.classList.contains("mwColorGradientWithStyle")?this._height=118:this.domNode.classList.contains("mwColorGradientWithStyles")&&
(this._height=148)}})})},"mw-colorpicker/ColorStyle":function(){define("dojo/dom-class dojo/on dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/ColorStyle.html dojo/i18n!./l10n/nls/ColorPickerResources".split(" "),function(h,e,g,d,c,b,a){return g([d,c],{value:null,selected:!1,baseClass:"mwColorStyle",templateString:b,postCreate:function(){this.inherited(arguments);this.own(e(this.colorStyleButton,"focus",this._select.bind(this)));this.own(e(this.colorStyleButton,"mouseover",
this._handleHover.bind(this)))},_setSelectedAttr:function(a){this._set("selected",a);a?h.add(this.colorStyleButton,"mwColorStyleSelected"):h.remove(this.colorStyleButton,"mwColorStyleSelected")},_select:function(){this.set("selected",!0);this.emit("change",{value:this.value})},_handleHover:function(){this.emit("previewchange",{value:this.value})},_setValueAttr:function(b){this._set("value",b);var c=b.charAt(0).toUpperCase()+b.slice(1);h.add(this.colorStyleButton,"mwColorStyle"+c);this.colorStyleLabel.textContent=
a[b]}})})},"MW/toolstrip/form/GridPickerButton":function(){define("dijit/focus dojo/_base/declare dojo/_base/lang dojo/on dojo/Evented dojo/keys MW/GridPicker MW/toolstrip/form/DropDownButton mw-menu/Menu mw-dom-utils/domUtils".split(" "),function(h,e,g,d,c,b,a,f,k,l){return e([f,c],{baseClass:"mwWidget mwDropDownButton mwGridPickerButton",visualFamily:"toolstrip",maxRows:5,maxColumns:5,occupancy:0,fillOrder:"rowMajor",constructor:function(b){b=b||{};this.maxRows=b.maxRows?b.maxRows:this.maxRows;
this.maxColumns=b.maxColumns?b.maxColumns:this.maxColumns;this.occupancy=b.occupancy?b.occupancy:this.occupancy;this.fillOrder=b.fillOrder?b.fillOrder:this.fillOrder;this._gridPicker=new a({maxRows:this.maxRows,maxColumns:this.maxColumns,occupancy:this.occupancy,fillOrder:this.fillOrder});this._gridPickerMenu=new k;this.selection={};this.own(this._gridPicker);this.own(this._gridPickerMenu)},buildRendering:function(){this.inherited(arguments);this._gridPickerMenu.addChild(this._gridPicker);this.set("menu",
this._gridPickerMenu)},_setSelectionAttr:function(a){0!==Object.keys(a).length&&this._gridPicker.getLastSelectedRowCount()!==a.row&&this._gridPicker.getLastSelectedColumnCount()!==a.column&&this._gridPicker.highlightCells(a.row-1,a.column-1);this._set("selection",a)},_setMaxRowsAttr:function(a){if(this._created)throw Error("Max Rows can only be set at construction time");this._set("maxRows",a)},_setMaxColumnsAttr:function(a){if(this._created)throw Error("Max Columns can only be set at construction time");
this._set("maxColumns",a)},_setOccupancyAttr:function(a){this._gridPicker.set("occupancy",a);this._set("occupancy",a)},_setFillOrderAttr:function(a){this._gridPicker.set("fillOrder",a);this._set("fillOrder",a)},postCreate:function(){this.inherited(arguments);this._gridPicker.on(a.SELECTION_CHANGED,this._handleGridSelection.bind(this));this.menu.on("keydown",this._handleMenuKeyDown.bind(this));this.menu.on("open",this._handleMenuCloseOnFocusOut.bind(this))},_handleGridSelection:function(a){var b={};
b.row=a.rows;b.column=a.columns;this.set("selection",b);this.closeMenu()},_handleMenuCloseOnFocusOut:function(){var a=h.watch("curNode",g.hitch(this,function(b,c,d){if(null===d||!l.findParentNode(d,"mwMenu"))a.unwatch(),this.closeMenu()}));this.own(a)},_handleMenuKeyDown:function(a){a.keyCode===b.TAB&&a.stopPropagation();this._gridPicker.navigate(a)}})})},"MW/GridPicker":function(){define("dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/dom dojo/Evented dojo/keys dojo/on dojo/touch dijit/_WidgetBase".split(" "),
function(h,e,g,d,c,b,a,f,k){h=h([k,c],{maxRows:5,maxColumns:5,occupancy:0,fillOrder:"rowMajor",_highlightedRows:0,_highlightedColumns:0,_lastSelectedRows:0,_lastSelectedColumns:0,buildRendering:function(){this.inherited(arguments);this.domNode.classList.add("gridPicker");this.domNode.setAttribute("tabindex",0);this._createGrid()},postCreate:function(){this.inherited(arguments);this.domNode.addEventListener("mousemove",this._highlightSelection.bind(this),!0);this.domNode.addEventListener("click",this._commitSelection.bind(this));
this.domNode.addEventListener("mouseleave",this._clearHighlighting.bind(this))},getLastSelectedRowCount:function(){return this._lastSelectedRows},getLastSelectedColumnCount:function(){return this._lastSelectedColumns},navigate:function(a){var c=!1,d=!1;0!==this._highlightedRows&&0!==this._highlightedColumns&&(c=!0);switch(a.keyCode){case b.DOWN_ARROW:c?this.highlightCells(this._highlightedRows,this._highlightedColumns-1):this.highlightCells(0,0);d=!0;break;case b.UP_ARROW:c&&this.highlightCells(this._highlightedRows-
2,this._highlightedColumns-1);d=!0;break;case b.RIGHT_ARROW:c&&this.highlightCells(this._highlightedRows-1,this._highlightedColumns);d=!0;break;case b.LEFT_ARROW:c&&this.highlightCells(this._highlightedRows-1,this._highlightedColumns-2);d=!0;break;case b.ENTER:this._commitSelection();this._clearHighlighting();d=!0;break;case b.TAB:c?this._highlightedColumns<this.maxColumns?this.highlightCells(this._highlightedRows-1,this._highlightedColumns):this._highlightedRows<this.maxRows&&this.highlightCells(this._highlightedRows,
0):this.highlightCells(0,0);d=!0;break;case b.ESCAPE:this._clearHighlighting()}return d},highlightCells:function(a,b){var c,d,e=0;if(void 0!==a&&void 0!==b)if(this._highlightedRows=a+1,this._highlightedColumns=b+1,"rowMajor"===this.fillOrder)for(c=0;c<this.maxRows;c++)for(d=0;d<this.maxColumns;d++)c<=a&&d<=b?(this._cells[c][d].classList.add("selected"),e<this.occupancy?this._cells[c][d].classList.add("occupied"):this._cells[c][d].classList.remove("occupied"),e++):this._cells[c][d].classList.remove("selected");
else for(d=0;d<this.maxColumns;d++)for(c=0;c<this.maxRows;c++)c<=a&&d<=b?(this._cells[c][d].classList.add("selected"),e<this.occupancy?this._cells[c][d].classList.add("occupied"):this._cells[c][d].classList.remove("occupied"),e++):this._cells[c][d].classList.remove("selected")},_createGrid:function(){var a,b,c;this._cells=[];this._cells.length=this.maxRows;for(a=0;a<this.maxRows;a++){this._cells[a]=[];this._cells[a].length=this.maxColumns;for(b=0;b<this.maxColumns;b++)c=document.createElement("button"),
c.setAttribute("id",this.id+"Cell"+a+"_"+b),c.setAttribute("tabindex","0"),this.domNode.appendChild(c),c.classList.add("cell"),c.row=a,c.col=b,this._cells[a][b]=c;a<this.maxRows&&(b=document.createElement("br"),this.domNode.appendChild(b))}},_highlightSelection:function(a){this.highlightCells(a.target.row,a.target.col)},_clearHighlighting:function(){var a,b;for(a=0;a<this._highlightedRows;a++)for(b=0;b<this._highlightedColumns;b++)this._cells[a][b].classList.remove("selected");this._highlightedColumns=
this._highlightedRows=0},_commitSelection:function(){this._lastSelectedRows=this._highlightedRows;this._lastSelectedColumns=this._highlightedColumns;this.emit("gridSelectionChanged",{rows:this._lastSelectedRows,columns:this._lastSelectedColumns})},startup:function(){this.inherited(arguments)},destroy:function(){this.domNode.removeEventListener("mousemove",this._highlightSelection.bind(this),!0);this.domNode.removeEventListener("click",this._commitSelection.bind(this));this.domNode.removeEventListener("mouseleave",
this._clearHighlighting.bind(this));this.inherited(arguments)}});h.ROW_MAJOR="rowMajor";h.COLUMN_MAJOR="columnMajor";h.SELECTION_CHANGED="gridSelectionChanged";return h})},"MW/toolstrip/qab/QABPushButton":function(){define(["dojo/_base/declare","../form/PushButton","../mixins/property/QuickAccessIconMixin","../mixins/property/ShowTextMixin"],function(h,e,g,d){return h([e,g,d],{})})},"MW/toolstrip/mixins/property/ShowTextMixin":function(){define(["dojo/_base/declare","MW/toolstrip/mixins/property/TextMixin",
"mw-mixins/property/DescriptionMixin","mw-mixins/property/ShortcutMixin"],function(h,e,g,d){h=h(null,{showText:!0,_setShowTextAttr:function(c){if("boolean"!==typeof c)throw Error("'showText' property expects a boolean!");this._set("showText",c);this._updateTooltip(c)},_setTextAttr:function(){this.inherited(arguments);this._updateTooltip(this.get("showText"))},_setDescriptionAttr:function(){this.inherited(arguments);this._updateTooltip(this.get("showText"))},_setShortcutAttr:function(){this.inherited(arguments);
this._updateTooltip(this.get("showText"))},_updateTooltip:function(c){var b=this.get("text");b&&(b=b.replace(/\n/g," "));c=c?this.get("description"):b;this.get("shortcut")&&(c=c?c+" ("+this._getPlatformizedShortcut(this.get("shortcut"))+")":this._getPlatformizedShortcut(this.get("shortcut")));this.domNode.setAttribute("title",c);this._updateTextInDOM(this.get("text"))},_getTextForDOM:function(){return this.get("showText")?this.inherited(arguments):""}});h._dependencies=[{mixin:e,orderDependent:!0},
{mixin:g,orderDependent:!0},{mixin:d,orderDependent:!0}];return h})},"MW/toolstrip/qab/QABDropDownButton":function(){define(["dojo/_base/declare","../form/DropDownButton","../mixins/property/QuickAccessIconMixin","../mixins/property/ShowTextMixin"],function(h,e,g,d){return h([e,g,d],{})})},"MW/toolstrip/qab/QABSplitButton":function(){define(["dojo/_base/declare","../form/SplitButton","../mixins/property/QuickAccessIconMixin","../mixins/property/ShowTextMixin"],function(h,e,g,d){return h([e,g,d],{})})},
"MW/toolstrip/qab/QABToggleButton":function(){define(["dojo/_base/declare","../form/ToggleButton","../mixins/property/QuickAccessIconMixin","../mixins/property/ShowTextMixin"],function(h,e,g,d){return h([e,g,d],{_qeSetChecked:function(c){this.set("checked",c,!0)}})})},"MW/toolstrip/qab/QABToggleSplitButton":function(){define(["dojo/_base/declare","../form/ToggleSplitButton","../mixins/property/QuickAccessIconMixin","../mixins/property/ShowTextMixin"],function(h,e,g,d){return h([e,g,d],{_qeSetChecked:function(c){this.set("checked",
c,!0)}})})},"MW/toolstrip/form/ToggleSplitButton":function(){define("dojo/_base/declare mw-form/ToggleSplitButton MW/toolstrip/mixins/property/MnemonicMixin MW/toolstrip/mixins/property/MnemonicKeyNavDirectionMixin MW/toolstrip/mixins/property/IconOverrideMixin MW/toolstrip/mixins/property/TextMixin MW/toolstrip/mixins/property/SizeMixin MW/toolstrip/form/mixins/property/DropDownButtonSizeMixin MW/toolstrip/form/mixins/property/DropDownButtonTextMixin MW/toolstrip/mixins/property/OrientationMixin MW/toolstrip/mixins/property/TextOverrideMixin MW/toolstrip/mixins/property/TypeMixin MW/toolstrip/mixins/property/DescriptionOverrideMixin MW/toolstrip/mixins/property/MenuIdMixin MW/toolstrip/mixins/property/MenuMixin MW/toolstrip/mixins/property/PreventRestoreFocusMixin mw-mixins/ResizeMixin mw-mixins/property/ShortcutMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v){return h(v.validate([e,g,d,b,a,f,k,l,n,c,p,m,u,q,r,s,t]),{visualFamily:"toolstrip",minWidth:38,resize:function(){this.inherited(arguments);if("Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&-1<navigator.appVersion.indexOf("Edge"))this._updateTextNodeWidth(),this.own(this.watch("text",this._updateTextNodeWidth))},_updateTextNodeWidth:function(){this.textNode&&(!this.textNode.classList.contains("mwEmptyNode")&&this.domNode.classList.contains("mwHorizontalOrientation"))&&
setTimeout(function(){this.textNode&&(this.textNode.style.width="",this.textNode.style.width=Math.ceil(parseFloat(window.getComputedStyle(this.textNode,null).width))+"px")}.bind(this),0)},_qeSetChecked:function(a){this.set("checked",a,!0)}})})},"mw-form/ToggleSplitButton":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_Contained dijit/_FocusMixin dijit/_TemplatedMixin mw-mixins/property/TagMixin mw-mixins/property/MenuMixin mw-mixins/property/HasDynamicMenuMixin mw-mixins/property/DisabledMixin mw-mixins/property/CheckedMixin mw-mixins/property/ButtonGroupMixin mw-mixins/property/DescriptionMixin mw-mixins/property/IconAlignmentMixin mw-mixins/property/IconMixin mw-mixins/property/ArrowModeMixin mw-mixins/property/SizeMixin mw-mixins/property/TabIndexNodesMixin mw-mixins/property/TextMixin mw-mixins/property/VisualFamilyMixin mw-mixins/property/ValidationMixin mw-mixins/event/ChangeEventMixin mw-mixins/AccessibilityClickMixin mw-mixins/PreventSelectionMixin mw-form/mixins/property/DropDownButtonIconAlignmentMixin mw-form/mixins/property/DropDownButtonArrowModeMixin mw-form/mixins/property/DropDownButtonTextMixin mw-form/mixins/property/DropDownButtonSizeMixin mw-form/mixins/property/DropDownNeverDisabledMixin mw-form/mixins/SplitButtonToggleSplitButtonMenuMixin mw-form/mixins/SplitButtonToggleSplitButtonFocusMixin mw-mixins/mixinDependencyValidator dojo/text!mw-form/templates/DropDownButton.html".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,B,F,G,H,I,K,C,M,Q,L){return h(Q.validate([e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,B,F,G,H,I,K,C,M]),{baseClass:"mwWidget mwToggleSplitButton",templateString:L,cssStateNodes:{buttonNode:"mwButtonNode",dropDownNode:"mwDropDownNode"},postCreate:function(){this.set("checkableNode",this.buttonNode);this.inherited(arguments)}})})},"MW/toolstrip/widgets/qabcontrols/QABFloatingPaneDock":function(){define("dojo/_base/declare dojo/topic dijit/registry MW/toolstrip/constants/TypeConstants MW/toolstrip/hashes/PeerNodeWidgetPropertiesHash MW/toolstrip/menu/PopupList MW/toolstrip/menu/ListItem MW/toolstrip/qab/QABDropDownButton".split(" "),
function(h,e,g,d,c,b,a,f){return h([f],{postCreate:function(){this.text=this[c[d.QAB_FLOATING_PANE_DOCK].text];this.inherited(arguments);e.publish("/floatingPaneDockUpdate",{newWidget:this});g.byId("dockDropDownMenu")?this._popupList=g.byId("dockDropDownMenu"):this._popupList=new b({id:"dockDropDownMenu"});this.set("menuId","dockDropDownMenu")},addItem:function(b){var c=new a({guiId:b.id,text:b.title});b.watch("title",function(){c.set("text",b.title)});c.on("click",function(){b.show();b.bringToTop()});
this._popupList.addChild(c);this._toggleSelectDisplayAndReset()},_findMenuItemForGuiId:function(a){var b=null;this._popupList.getChildren().some(function(c){b=c;return c.guiId===a});return b},removeItem:function(a){a=this._findMenuItemForGuiId(a.id);this._popupList.removeChild(a);a.destroyRecursive();this._destroyed||this._toggleSelectDisplayAndReset()},startup:function(){this.inherited(arguments);this._toggleSelectDisplayAndReset()},_toggleSelectDisplayAndReset:function(){0<this._popupList.getChildren().length?
this.set("disabled",!1):this.set("disabled",!0)},_positionDock:function(){}})})},"MW/toolstrip/hashes/PeerNodeWidgetPropertiesHash":function(){define(["dojo/_base/lang","../constants/TypeConstants","MW/toolstrip/hashes/listOfNewWidgets"],function(h,e,g){var d={},c,b,a,f;b={enabled:"disabled"};c=h.mixin({text:"label"},b);a=h.mixin({text:"label",showText:"showLabel",shortcut:"accelKey"},b);f=h.mixin({popupId:"menuId",hasDynamicPopup:"hasDynamicMenu"},b);d[e.PUSH_BUTTON]=-1===g.indexOf(e.PUSH_BUTTON)?
c:b;d[e.TOGGLE_BUTTON]=h.mixin({selected:"checked"},-1===g.indexOf(e.TOGGLE_BUTTON)?c:b,-1===g.indexOf(e.TOGGLE_BUTTON)?{}:{buttonGroupName:"buttonGroup"});d[e.TOGGLE_SPLIT_BUTTON]=h.mixin({selected:"checked"},-1===g.indexOf(e.TOGGLE_SPLIT_BUTTON)?b:f,-1===g.indexOf(e.TOGGLE_SPLIT_BUTTON)?{}:{buttonGroupName:"buttonGroup"},-1===g.indexOf(e.TOGGLE_SPLIT_BUTTON)?{}:{dropDownAlwaysEnabled:"dropDownNeverDisabled"});d[e.DROP_DOWN_BUTTON]=-1===g.indexOf(e.DROP_DOWN_BUTTON)?c:f;d[e.SPLIT_BUTTON]=h.mixin(-1===
g.indexOf(e.SPLIT_BUTTON)?c:f,-1===g.indexOf(e.SPLIT_BUTTON)?{}:{dropDownAlwaysEnabled:"dropDownNeverDisabled"});d[e.COLOR_PICKER_BUTTON]=b;d[e.GRID_PICKER_BUTTON]=b;d[e.SPLIT_BUTTON_WITH_DISABLE_OVERRIDE]=c;d[e.LIST_ITEM]=-1===g.indexOf(e.LIST_ITEM)?a:b;d[e.LIST_ITEM_WITH_CHECKBOX]=h.mixin({selected:"checked"},-1===g.indexOf(e.LIST_ITEM_WITH_CHECKBOX)?a:b,-1===g.indexOf(e.LIST_ITEM_WITH_CHECKBOX)?{}:{closePopupOnClick:"closeMenuOnClick"});d[e.LIST_ITEM_WITH_RADIO_BUTTON]=h.mixin({selected:"checked"},
-1===g.indexOf(e.LIST_ITEM_WITH_RADIO_BUTTON)?a:b,-1===g.indexOf(e.LIST_ITEM_WITH_RADIO_BUTTON)?{}:{closePopupOnClick:"closeMenuOnClick",buttonGroupName:"buttonGroup"});d[e.LIST_ITEM_WITH_TEXTFIELD]=h.mixin(-1===g.indexOf(e.LIST_ITEM_WITH_TEXTFIELD)?{editable:"readOnly"}:{placeholderText:"placeholder"},{text:"value"},b);d[e.LIST_ITEM_WITH_POPUP]=-1===g.indexOf(e.LIST_ITEM_WITH_POPUP)?a:f;d[e.POPUP_LIST_HEADER]=h.mixin({title:-1===g.indexOf(e.POPUP_LIST_HEADER)?"label":"text"});d[e.SPINNER]=h.mixin({minorStepSize:-1===
g.indexOf(e.SPINNER)?"smallDelta":"step",majorStepSize:-1===g.indexOf(e.SPINNER)?"largeDelta":"step"},-1===g.indexOf(e.SPINNER)?{editable:"readOnly"}:{},b);d[e.TEXT_FIELD]=h.mixin({text:"value"},-1===g.indexOf(e.TEXT_FIELD)?{placeholderText:"placeHolder_asdfasdf",editable:"readOnly"}:{placeholderText:"placeholder"},b);d[e.TEXT_AREA]=h.mixin({text:"value"},-1===g.indexOf(e.TEXT_AREA)?{editable:"readOnly"}:{},b);d[e.RADIO_BUTTON]=h.mixin(-1===g.indexOf(e.RADIO_BUTTON)?{text:"label"}:{buttonGroupName:"buttonGroup"},
{selected:"checked"},b);d[e.LABEL]=h.mixin({},b);d[e.CHECK_BOX]=h.mixin(-1===g.indexOf(e.CHECK_BOX)?{text:"label"}:{},{selected:"checked"},b);d[e.COMBO_BOX]=h.mixin(-1===g.indexOf(e.COMBO_BOX)?{editable:"readOnly"}:{selectedItem:"value",placeholderText:"placeholder"},b);d[e.LIST]=h.mixin(-1===g.indexOf(e.LIST)?{}:{selectedItems:"value"},b);d[e.HORIZONTAL_SLIDER]=b;d[e.GALLERY]=b;d[e.GALLERY_ITEM]=b;d[e.TOGGLE_GALLERY_ITEM]=h.mixin({selected:"checked",buttonGroupName:"buttonGroup"},b);d[e.QAB_PUSH_BUTTON]=
d[e.PUSH_BUTTON];d[e.QAB_DROP_DOWN_BUTTON]=d[e.DROP_DOWN_BUTTON];d[e.QAB_FLOATING_PANE_DOCK]=c;d[e.QAB_SPLIT_BUTTON]=d[e.SPLIT_BUTTON];d[e.QAB_TOGGLE_BUTTON]=d[e.TOGGLE_BUTTON];d[e.QAB_TOGGLE_SPLIT_BUTTON]=d[e.TOGGLE_SPLIT_BUTTON];Object.keys(d).forEach(function(a){Object.keys(d[a]).forEach(function(b){d[a][d[a][b]]=b})});return d})},"MW/toolstrip/menu/PopupList":function(){define(["dojo/_base/declare","mw-menu/Menu","../mixins/property/TypeMixin","../mixins/ScrollbarMixin","mw-mixins/mixinDependencyValidator"],
function(h,e,g,d,c){return h(c.validate([e,g,d]),{visualFamily:"toolstrip",postCreate:function(){this.inherited(arguments);this.domNode.setAttribute("data-focus","temporary")}})})},"MW/toolstrip/menu/ListItem":function(){define("dojo/_base/declare mw-menu/MenuItem MW/toolstrip/mixins/property/IconOverrideMixin MW/toolstrip/mixins/property/TypeMixin MW/toolstrip/mixins/property/DescriptionOverrideMixin MW/toolstrip/mixins/property/TextOverrideMixin MW/toolstrip/mixins/property/UseQuickAccessIconMixin MW/toolstrip/mixins/property/QuickAccessIconMixin MW/toolstrip/mixins/property/RemovableMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,e,g,d,c,b,a,f,k,l){return h(l.validate([e,g,d,c,b,a,f,k]),{visualFamily:"toolstrip",_setRemovableAttr:function(a){this.inherited(arguments);if(a){this.domNode.classList.add("removableTrue");this._removeNode=document.createElement("div");this._removeNode.classList.add("mwRemoveNode");var b=document.createElement("div");b.classList.add("clear_all");this._removeNode.appendChild(b);this.domNode.appendChild(this._removeNode);this._handleKeyupForRemove=function(a){46===a.keyCode&&(this._emitRemoveEvent(),
a.stopPropagation())}.bind(this);this.domNode.addEventListener("keyup",this._handleKeyupForRemove);this._removeNode.addEventListener("click",this._handleRemoveNodeClick.bind(this));this._removeNode.addEventListener("mouseup",this._handleRemoveNodeMouseup)}else this._removeNode&&(this.domNode.classList.remove("removableTrue"),this.domNode.removeChild(this._removeNode),this._removeNode=null,this.domNode.removeEventListener("keyup",this._handleKeyupForRemove));this._set("removable",a)},_handleRemoveNodeClick:function(a){this._emitRemoveEvent();
a.stopPropagation()},_handleRemoveNodeMouseup:function(a){a.stopPropagation()}})})},"MW/toolstrip/mixins/property/UseQuickAccessIconMixin":function(){define(["dojo/_base/declare","mw-mixins/property/IconMixin"],function(h,e){var g=h(null,{useQuickAccessIcon:!1,postCreate:function(){this.inherited(arguments);this.set("useQuickAccessIcon",this.get("useQuickAccessIcon"))},_setUseQuickAccessIconAttr:function(d){if("boolean"!==typeof d)throw Error("'useQuickAccessIcon' property expects a boolean!");this._set("useQuickAccessIcon",
d);d?this.set("iconProp","quickAccessIcon"):this.set("iconProp","icon")}});g._dependencies=[{mixin:e,orderDependent:!1}];return g})},"MW/toolstrip/menu/ListItemWithPopup":function(){define("dojo/_base/declare mw-menu/PopupMenuItem MW/toolstrip/mixins/property/TypeMixin MW/toolstrip/mixins/property/DescriptionOverrideMixin MW/toolstrip/mixins/property/TextOverrideMixin MW/toolstrip/mixins/property/MenuIdMixin MW/toolstrip/mixins/property/IconOverrideMixin MW/toolstrip/mixins/property/UseQuickAccessIconMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,e,g,d,c,b,a,f,k){return h(k.validate([e,g,d,c,b,a,f]),{visualFamily:"toolstrip"})})},"mw-menu/PopupMenuItem":function(){define("dojo/_base/declare dijit/focus dojo/on dojo/keys dojo/dom-geometry dojo/_base/lang dijit/_WidgetBase dijit/_TemplatedMixin dijit/_CssStateMixin dijit/_Contained dijit/_FocusMixin mw-menu/mixins/OnOpenMixin mw-menu/mixins/OnCloseMixin mw-mixins/property/TagMixin mw-menu/mixins/property/CloseMenuOnClickMixin mw-mixins/property/DescriptionMixin mw-mixins/property/DisabledMixin mw-mixins/property/MenuMixin mw-mixins/property/HasDynamicMenuMixin mw-mixins/property/IconMixin mw-mixins/property/ShortcutMixin mw-menu/mixins/property/ShowDescriptionMixin mw-menu/mixins/property/ShowIconMixin mw-menu/mixins/property/ShowTextMixin mw-menu/mixins/property/ShowShortcutMixin mw-mixins/property/TextMixin mw-menu/mixins/SingleLineTextMixin mw-mixins/property/VisualFamilyMixin mw-menu/mixins/FocusableMenuChildMixin mw-menu/mixins/MenuChildResizeMixin mw-menu/mixins/MenuItemTextColorMixin mw-mixins/PreventSelectionMixin mw-mixins/mixinDependencyValidator dojo/text!./templates/PopupMenuItem.html".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,B,F,G,H,I,K,C,M,Q,L,N,J){return h(N.validate([a,f,k,l,n,p,m,q,r,s,t,u,C,v,w,x,A,B,F,G,H,I,K,Q,L,M]),{baseClass:"mwWidget mwSharedMenuItem mwPopupMenuItem",templateString:J,_focusSubMenuOnOpen:!1,menuOrientation:"horizontal",keyPressButtons:"right_arrow_a11y",postCreate:function(){this.inherited(arguments);this.own(g(this.domNode,"keydown",b.hitch(this,"_handleRightArrow")))},_setFocusSubMenuOnOpenAttr:function(a){if("boolean"!==typeof a)throw Error("'doFocus' argument expects a boolean value.");
this._set("_focusSubMenuOnOpen",a)},_emitClickEvent:function(){this.emit("click",{mwEventData:{value:this.get("text")},_dojo_click:!0})},focusLost:function(a){this.get("menu")&&(this.get("menu").isDescendant&&!this.get("menu").isDescendant(a,this.get("menu")))&&(this.get("menu")._closeEventData?this.get("menu")._closeEventData.mwEventData?this.get("menu")._closeEventData.mwEventData.gainedFocusWidget=a:this.get("menu")._closeEventData.mwEventData={gainedFocusWidget:a}:this.get("menu")._closeEventData=
{mwEventData:{gainedFocusWidget:a}},this.closeMenu(!1))},focus:function(){this.inherited(arguments);this.get("disabled")||this.openMenu()},_handleRightArrow:function(a){a.keyCode===d.RIGHT_ARROW&&(this.isMenuOpen()?this.get("menu").focusFirst():(this.set("_focusSubMenuOnOpen",!0),this.openMenu()))},_showMenu:function(){var a=this.get("menu");null!==a&&(!this._doNotOpen&&!this.isMenuOpen())&&(a._leftArrowListener=g(a.domNode,"keydown",b.hitch(a,this._handleLeftArrow)),a._menuCloseListener=g(a.domNode,
"close",b.hitch(a,this._handleCloseMenu)),a._storeFocusOnOpen=a.get("_focusOnOpen"),a._storeOnOpen=a.onOpen,a._storeMatchMinWidthToInvokingWidget=a.get("_matchMinWidthToInvokingWidget"),a.set("_focusOnOpen",this.get("_focusSubMenuOnOpen")),a.onOpen=this.onOpen,a._matchMinWidthToInvokingWidget=!1,a.domNode.classList.add("mwPopupMenuItemPopup"),this.inherited(arguments))},_handleCloseMenu:function(a){if(a&&a.mwEventData&&a.mwEventData.hasOwnProperty("gainedFocusWidget")){var b=this._invokingWidget.getParentWidget();
a=a.mwEventData.gainedFocusWidget;!b.isInvokingWidget(a)&&!b.isDescendant(a,b)&&(this._leftArrowListener&&this._leftArrowListener.remove(),this._menuCloseListener&&this._menuCloseListener.remove(),delete this._leftArrowListener,delete this._menuCloseListener,this._focusOnOpen=this._storeFocusOnOpen,this.onOpen=this._storeOnOpen,this._matchMinWidthToInvokingWidget=this._storeMatchMinWidthToInvokingWidget,this.domNode.classList.remove("mwPopupMenuItemPopup"),b._focusChange(a))}},_handleLeftArrow:function(a){a.keyCode===
d.LEFT_ARROW&&(this._doNotOpen=!0,this._invokingWidget.focus(),this._doNotOpen=!1)},onOpen:function(){this.inherited(arguments);this._emitOpenEvent();this._updateLayout();c.position(this.domNode).x>c.position(this._invokingWidget.domNode).x?(this.domNode.classList.add("mwPopupMenuItemPopupRight"),this.domNode.classList.remove("mwPopupMenuItemPopupleft"),this.domNode.parentElement.classList.add("mwPopupMenuItemParentRight"),this.domNode.parentElement.classList.remove("mwPopupMenuItemParentLeft")):
(this.domNode.classList.add("mwPopupMenuItemPopupLeft"),this.domNode.classList.remove("mwPopupMenuItemPopupRight"),this.domNode.parentElement.classList.remove("mwPopupMenuItemParentRight"),this.domNode.parentElement.classList.add("mwPopupMenuItemParentLeft"));this.domNode.parentElement.classList.add("mwPopupMenuItemParent");0<this.getChildren().length&&(this._focusOnOpen&&this.focusFirst)&&(this._storeFocus=this.focus,this.focus=function(){this.focusFirst();this.focus=this._storeFocus;delete this._storeFocus});
this._invokingWidget.set("_focusSubMenuOnOpen",!1)},_closeMenuOnParentClick:function(){return!1},_updateWidth:function(){}})})},"MW/toolstrip/menu/ListItemWithCheckBox":function(){define("dojo/_base/declare mw-menu/CheckBoxMenuItem ../mixins/property/TypeMixin ../mixins/property/DescriptionOverrideMixin ../mixins/property/TextOverrideMixin mw-mixins/mixinDependencyValidator".split(" "),function(h,e,g,d,c,b){return h(b.validate([e,g,d,c]),{visualFamily:"toolstrip",postCreate:function(){this.inherited(arguments);
this.checkBox.set("visualFamily","toolstrip")},_qeSetChecked:function(a){this.set("checked",a,!0)}})})},"mw-menu/CheckBoxMenuItem":function(){define("dojo/_base/declare dijit/focus dijit/_WidgetBase dijit/_TemplatedMixin dijit/_CssStateMixin dijit/_Contained dijit/_FocusMixin mw-form/CheckBox mw-mixins/property/TagMixin mw-mixins/property/CheckedMixin mw-menu/mixins/property/CloseMenuOnClickMixin mw-mixins/property/DescriptionMixin mw-mixins/property/DisabledMixin mw-mixins/property/ShortcutMixin mw-menu/mixins/property/ShowDescriptionMixin mw-menu/mixins/property/ShowTextMixin mw-menu/mixins/property/ShowShortcutMixin mw-mixins/property/TextMixin mw-menu/mixins/SingleLineTextMixin mw-mixins/property/VisualFamilyMixin mw-menu/mixins/FocusableMenuChildMixin mw-menu/mixins/MenuChildResizeMixin mw-menu/mixins/MenuItemTextColorMixin mw-mixins/AccessibilityClickMixin mw-mixins/event/ChangeEventMixin mw-mixins/PreventSelectionMixin mw-mixins/mixinDependencyValidator dojo/text!./templates/CheckBoxRadioButtonMenuItem.html".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,B,F,G,H,I,K){return h(I.validate([g,d,c,b,a,x,A,k,l,n,p,q,r,s,t,u,v,m,w,B,F,G,H]),{baseClass:"mwWidget mwSharedMenuItem mwCheckBoxMenuItem",templateString:K,constructor:function(){this.checkBox=new f({text:""});this.own(this.checkBox)},_setCheckedAttr:function(a){this.inherited(arguments);this.checkBox.set("checked",a);this.get("closeMenuOnClick")&&(a?(this.checkBox.domNode.classList.add("mwSpecialCheckBoxIcon"),this.checkBox.domNode.classList.remove("mwNoCheckBoxIcon")):
(this.checkBox.domNode.classList.add("mwNoCheckBoxIcon"),this.checkBox.domNode.classList.remove("mwSpecialCheckBoxIcon")))},buildRendering:function(){this.inherited(arguments);this.checkBox.placeAt(this.domNode,"first")},postCreate:function(){this.inherited(arguments);this.checkBox._triggerChangeEvent=function(){};this.checkBox._onClick=function(){};this.domNode.setAttribute("data-composite-primary","");(this.checkBox.focusNode||this.checkBox.domNode).setAttribute("data-composite-child","");(this.checkBox.focusNode||
this.checkBox.domNode).setAttribute("data-composite-primary-id",this.get("id"))},startup:function(){this.inherited(arguments);this.checkBox.startup()},_onClick:function(){this.inherited(arguments);this.checkBox.set("checked",this.get("checked"))},_emitClickEvent:function(){this.emit("click",{mwEventData:{checked:this.get("checked")},_dojo_click:!0})}})})},"mw-form/CheckBox":function(){define("dojo/_base/declare dojo/on dijit/_WidgetBase dijit/_Contained dijit/_CssStateMixin dijit/_FocusMixin dijit/_TemplatedMixin mw-mixins/property/TagMixin mw-mixins/property/DisabledMixin mw-mixins/property/CheckedMixin mw-mixins/property/DescriptionMixin mw-mixins/property/SizeMixin mw-mixins/property/TextMixin mw-mixins/property/VisualFamilyMixin mw-mixins/property/ValidationMixin mw-mixins/event/ChangeEventMixin mw-form/mixins/CheckBoxRadioButtonTextSizingMixin mw-mixins/PreventSelectionMixin mw-mixins/mixinDependencyValidator mw-mixins/AriaLabelledByMixin dojo/text!./templates/CheckBox.html".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x){return h(v.validate([g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,w]),{baseClass:"mwWidget mwCheckBox",templateString:x,postCreate:function(){this.inherited(arguments);this.own(e(this.domNode,"keydown",this._handleKeydown.bind(this)),e(this.domNode,"keyup",this._handleKeyup.bind(this)))},_handleKeydown:function(a){32===a.keyCode&&a.preventDefault()},_handleKeyup:function(a){32===a.keyCode&&(this.get("disabled")||a.target.click())}})})},"mw-form/mixins/CheckBoxRadioButtonTextSizingMixin":function(){define(["dojo/_base/declare",
"dojo/dom-geometry"],function(h,e){return h(null,{_setWidthAttr:function(){this.inherited(arguments);if(this._started)if("auto"!==this.get("width")){var g=e.position(this.checkBoxRadioIconNode),d=e.getMarginExtents(this.textNode);this.textNode.style.width=this.width-(g.w+d.l)+"px"}else this.textNode.style.width="auto"}})})},"MW/toolstrip/menu/ListItemWithTextField":function(){define("dojo/_base/declare dojo/_base/lang mw-menu/TextFieldMenuItem ../mixins/property/TextOverrideMixin ../mixins/property/TypeMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,e,g,d,c,b){return h(b.validate([g,d,c]),{visualFamily:"toolstrip",constructor:function(){this.textField._triggerTypingEvent=function(a){this.emit("typing",{mwEventData:{text:a}})}},_setLabelAttr:function(a){this.set("text",a);this._set("label",a)},getLabelAttr:function(){this.get("text")},postCreate:function(){this.inherited(arguments);this.textField.set("visualFamily","toolstrip");this.watch("text",e.hitch(this,"_updateLabel"))},_updateLabel:function(a,b,c){this.set("label",c)},_onFocus:function(){this.inherited(arguments);
this.emit("focusgained",{mwEventData:{text:this.textField.inputNode.value}})},_onBlur:function(){this.inherited(arguments);this.emit("focuslost",{mwEventData:{text:this.textField.inputNode.value}})}})})},"mw-menu/TextFieldMenuItem":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/keys dijit/focus dijit/_WidgetBase dijit/_TemplatedMixin dijit/_CssStateMixin dijit/_Contained dijit/_FocusMixin mw-dom-utils/domUtils mw-form/TextField mw-menu/mixins/property/CloseMenuOnClickMixin mw-mixins/property/TagMixin mw-mixins/property/DisabledMixin mw-mixins/property/DescriptionMixin mw-mixins/property/ShortcutMixin mw-menu/mixins/property/ShowTextMixin mw-menu/mixins/property/ShowShortcutMixin mw-mixins/property/TextMixin mw-mixins/property/VisualFamilyMixin mw-menu/mixins/FocusableMenuChildMixin mw-menu/mixins/MenuChildResizeMixin mw-mixins/PreventSelectionMixin mw-mixins/mixinDependencyValidator mw-mixins/property/ValidationMixin dojo/text!./templates/TextFieldMenuItem.html".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,B,F,G,H,I){return h(G.validate([b,a,f,k,l,s,t,v,u,w,m,q,r,x,A,B,F,H]),{baseClass:"mwWidget mwSharedMenuItem mwTextFieldMenuItem",templateString:I,closeOnEnter:!0,editable:!0,placeholder:"",constructor:function(){this.textField=new p({value:""});this.own(this.textField)},_setPlaceholderAttr:function(a){this.textField.set("placeholder",a);this._set("placeholder",a)},_getPlaceholderAttr:function(a){return this.textField.get("placeholder")},_setValueAttr:function(a){this.textField.set("value",
a);this._set("value",a)},_setEditableAttr:function(a){this.textField.set("editable",a);this._set("editable",a)},_getValueAttr:function(){return this.textField.get("value")},_getEditableAttr:function(){return this.textField.get("editable")},buildRendering:function(){this.inherited(arguments);this.textField.placeAt(this.shortcutKeyNode,"before");this.inputNode=this.textField.inputNode},postCreate:function(){this.inherited(arguments);this.textField.on("change",e.hitch(this,function(a){this.get("value")!==
a.mwEventData.newValue&&this.set("value",a.mwEventData.newValue)}));this.own(g(this.textField.focusNode,"change",e.hitch(this,"_onChange")),g(this.textField.focusNode,"keydown",e.hitch(this,"_onKeyDown")),g(this.domNode,"focus",e.hitch(this,"_focusGained")));this.domNode.classList.add("mwEditableMixin");this._setEditableAttr(this.get("editable"));this._setPlaceholderAttr(this.get("placeholder"));this.domNode.setAttribute("data-composite-primary","");this.domNode.setAttribute("spellcheck","false");
(this.textField.focusNode||this.textField.domNode).setAttribute("data-composite-child","");(this.textField.focusNode||this.textField.domNode).setAttribute("data-composite-primary-id",this.get("id"));this.textField.domNode.setAttribute("data-composite-child","");this.textField.domNode.setAttribute("data-composite-primary-id",this.get("id"))},startup:function(){this.inherited(arguments);this.textField.startup()},_getDomNodeForValidationClasses:function(){return this.textField.domNode},_focusGained:function(a){this.focus&&
n.isFocusable(this.focusNode||this.domNode)&&this.focus()},focus:function(){var a=this.focusNode||this.domNode;a.hasAttribute("data-composite-child")&&(a=document.getElementById(a.getAttribute("data-composite-primary-id")));n.isFocusable(a)&&c.focus(this.getFocusNode())},getFocusNode:function(){return this.textField.focusNode},_onKeyDown:function(a){if(a.keyCode===d.TAB)a.preventDefault(),a.stopPropagation(),this.emit("synkeydown",{keyCode:d.TAB});else if(a.keyCode===d.ESCAPE)this.textField.inputNode.value=
this.get("value"),this.emit("textcancelled",{mwEventData:{text:this.get("value")}}),a.preventDefault(),a.stopPropagation(),this._requestClose(!1);else if(a.keyCode===d.ENTER){a=this.get("value");var b=this.textField.inputNode.value;a===b?this.emit("recommit",{mwEventData:{propertyName:"value",value:b}}):(this.emit("commit",{mwEventData:{propertyName:"value",value:b}}),this.set("value",b),this.textField._triggerChangeEvent("value",a,b));this.closeOnEnter&&!0===this.closeOnEnter&&this._requestClose(!1)}else(a.keyCode===
d.HOME||a.keyCode===d.END)&&a.stopPropagation()},_handleInputNodeClick:function(){!1!==this.textField.get("editable")&&this.textField.inputNode.select()},_emitClickEvent:function(a){this.emit("click",{mwEventData:{value:this.get("value")},_dojo_click:!0});a.target!==this.inputNode&&this.emit("itempushed")},_qeTypeOverWithEnter:function(a){this.textField._qeTypeOverWithEnter(a)},_qeTyping:function(a){this.textField._qeTyping(a)}})})},"MW/toolstrip/menu/ListItemWithRadioButton":function(){define("dojo/_base/declare mw-menu/RadioButtonMenuItem ../mixins/property/TypeMixin ../mixins/property/DescriptionOverrideMixin ../mixins/property/TextOverrideMixin ../mixins/property/ButtonGroupMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,e,g,d,c,b,a){return h(a.validate([e,g,d,c,b]),{visualFamily:"toolstrip",postCreate:function(){this.inherited(arguments);this.radioButton.set("visualFamily","toolstrip")},_qeSetChecked:function(a){this.set("checked",a,!0)}})})},"mw-menu/RadioButtonMenuItem":function(){define("dojo/_base/declare dijit/focus dijit/_WidgetBase dijit/_TemplatedMixin dijit/_CssStateMixin dijit/_Contained dijit/_FocusMixin mw-form/RadioButton mw-mixins/property/CheckedMixin mw-menu/mixins/property/CloseMenuOnClickMixin mw-mixins/property/TagMixin mw-mixins/property/ButtonGroupMixin mw-mixins/property/DescriptionMixin mw-mixins/property/DisabledMixin mw-mixins/property/ShortcutMixin mw-menu/mixins/property/ShowDescriptionMixin mw-menu/mixins/property/ShowTextMixin mw-menu/mixins/property/ShowShortcutMixin mw-mixins/property/TextMixin mw-menu/mixins/SingleLineTextMixin mw-mixins/property/VisualFamilyMixin mw-menu/mixins/FocusableMenuChildMixin mw-menu/mixins/MenuChildResizeMixin mw-menu/mixins/MenuItemTextColorMixin mw-mixins/AccessibilityClickMixin mw-mixins/event/ChangeEventMixin mw-mixins/PreventSelectionMixin mw-mixins/mixinDependencyValidator dojo/text!./templates/CheckBoxRadioButtonMenuItem.html".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,B,F,G,H,I,K,C){return h(K.validate([g,d,c,b,a,A,B,m,r,s,t,u,v,w,q,x,k,l,F,G,n,p,H,I]),{baseClass:"mwWidget mwSharedMenuItem mwRadioButtonMenuItem",templateString:C,constructor:function(){this.radioButton=new f({text:""});this.own(this.radioButton)},_setCheckedAttr:function(a){this.inherited(arguments);this.radioButton.set("checked",a)},buildRendering:function(){this.inherited(arguments);this.radioButton.placeAt(this.domNode,"first")},startup:function(){this.inherited(arguments);
this.radioButton.startup()},_emitClickEvent:function(){this.emit("click",{mwEventData:{checked:this.get("checked")},_dojo_click:!0})}})})},"mw-form/RadioButton":function(){define("dojo/_base/declare dojo/on dijit/_WidgetBase dijit/_Contained dijit/_CssStateMixin dijit/_FocusMixin dijit/_TemplatedMixin mw-mixins/property/TagMixin mw-mixins/property/DisabledMixin mw-mixins/property/CheckedMixin mw-mixins/property/ButtonGroupMixin mw-mixins/property/DescriptionMixin mw-mixins/property/SizeMixin mw-mixins/property/TextMixin mw-mixins/property/VisualFamilyMixin mw-mixins/property/ValidationMixin mw-mixins/event/ChangeEventMixin mw-form/mixins/CheckBoxRadioButtonTextSizingMixin mw-mixins/PreventSelectionMixin mw-mixins/mixinDependencyValidator mw-mixins/AriaLabelledByMixin dojo/text!./templates/RadioButton.html".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A){return h(w.validate([g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,x]),{baseClass:"mwWidget mwRadioButton",templateString:A,postCreate:function(){this.inherited(arguments);this.own(e(this.domNode,"keydown",this._handleKeydown.bind(this)),e(this.domNode,"keyup",this._handleKeyup.bind(this)))},_handleKeydown:function(a){32===a.keyCode&&a.preventDefault()},_handleKeyup:function(a){32===a.keyCode&&(this.get("disabled")||a.target.click())},_onClick:function(){!0===
!this.get("checked")&&this.inherited(arguments)}})})},"MW/toolstrip/menu/PopupListSeparator":function(){define(["dojo/_base/declare","mw-menu/MenuSeparator","../mixins/property/TypeMixin","mw-mixins/mixinDependencyValidator"],function(h,e,g,d){return h(d.validate([e,g]),{visualFamily:"toolstrip"})})},"MW/toolstrip/menu/PopupListHeader":function(){define(["dojo/_base/declare","mw-menu/MenuHeader","../mixins/property/TypeMixin","mw-mixins/mixinDependencyValidator"],function(h,e,g,d){return h(d.validate([e,
g]),{visualFamily:"toolstrip"})})},"mw-menu/MenuHeader":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_CssStateMixin mw-mixins/property/TagMixin mw-mixins/PreventFocusMixin mw-mixins/PreventSelectionMixin mw-mixins/property/TextMixin mw-mixins/property/VisualFamilyMixin mw-mixins/mixinDependencyValidator dojo/text!./templates/MenuHeader.html".split(" "),function(h,e,g,d,c,b,a,f,k,l,n){return h(l.validate([e,g,d,c,b,a,f,k]),{baseClass:"mwWidget mwMenuHeader",templateString:n})})},
"MW/toolstrip/form/ComboBox":function(){define("dojo/_base/declare dojo/keys mw-form/ComboBox dijit/registry ../mixins/property/MnemonicMixin ../mixins/property/MnemonicKeyNavDirectionMixin ../mixins/AcceptFocusMixin ../mixins/ColumnWidthMixin ../mixins/property/TypeMixin ../mixins/property/DescriptionOverrideMixin mw-mixins/property/ShortcutMixin mw-mixins/property/ValidationMixin".split(" "),function(h,e,g,d,c,b,a,f,k,l,n,p){return h([g,c,b,a,f,k,l,n,p],{visualFamily:"toolstrip",height:22,mnemonicKeyNavDirection:"none",
_scaleToParentWidth:!0,_setEditableAttr:function(a){this.inherited(arguments);!1===a?this.domNode.setAttribute("data-focus","refuse"):(this.domNode.setAttribute("data-focus","accept"),this.arrowNode.setAttribute("data-focus","refuse"))},postCreate:function(){this._textField.set("visualFamily","toolstrip");this.menu.set("visualFamily","toolstrip");this.inherited(arguments);!1===this.get("editable")?this.domNode.setAttribute("data-focus","refuse"):(this.domNode.setAttribute("data-focus","accept"),this.get("menu").domNode.setAttribute("data-focus",
"refuse"));this.get("menu").domNode.setAttribute("data-focus","temporary")},_handleTextFieldKeyDown:function(a){a.keyCode===e.ESCAPE&&(this.emit("textcancelled",{mwEventData:{text:this.inputNode.value}}),this.emit("restorefocustolastnonrefuseelement"));if(a.keyCode===e.ENTER){if(this.get("value")===this.inputNode.value){var b=this._getSelectedItemFromValue(this.get("value"));b&&b.label===this.inputNode.value&&void 0!==b.value?this.emit("recommit",{mwEventData:{value:b.value}}):this.emit("recommit",
{mwEventData:{text:this.get("value")}})}this.emit("restorefocustolastnonrefuseelement")}this.inherited(arguments)},_handleMenuClick:function(a){var b=this._getSelectedItemFromLabel(a.target.textContent);this.get("value")===b.value&&this.emit("recommit",{mwEventData:{value:this.get("value")}});this.inherited(arguments)},_setItemsAttr:function(a){if(a&&0<a.length){var b;a.forEach(function(a){!0===a.selected&&(b=a.value)},this);void 0===b?(this.set("value","",!0),this._initMenuItems(a),this._set("items",
a)):(this._initMenuItems(a),this._set("items",a),this.set("value",b,!0))}else this.set("value","",!0),this._destroyMenuItems(),this._set("items",a);!1===this.get("editable")&&null!=this._pendingValue&&(this.set("value",this._pendingValue,!0),this._pendingValue=null);this.menu.getChildren().forEach(function(a){a.classList.remove("mwDefaultVisualFamily");a.classList.add("mwToolstripVisualFamily")})},resize:function(){var a=this.get("width"),b=2;"100%"===a&&(a=this.domNode.getBoundingClientRect().width-
b,b=0);this._textField.domNode.style.width="calc("+a+"px - 22px - 2px - 1px)";this.menu.domNode.style.minWidth="calc("+a+"px - "+b+"px)"},startup:function(){this.inherited(arguments);this.items.forEach(function(a){!0===a.selected&&this.set("value",a.value)},this)},_openComboBoxMenu:function(){this.inherited(arguments);this.emit("dropdownclick",{})},closeMenu:function(){this.inherited(arguments);this.emit("restorefocustolastnonrefuseelement")},_setFooterIdAttr:function(a){var b=d.byId(a);b&&(this._createFooterNode(),
b.placeAt(this.footerNode),b.startup());this._set("footerId",a)},_createFooterNode:function(){if(this.footerNode){var a=d.byId(this.get("footerId"));a&&a.destroyRecursive()}else this.footerNode=document.createElement("div"),this.get("menu").domNode.appendChild(this.footerNode)}})})},"MW/toolstrip/mixins/AcceptFocusMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{postCreate:function(){this.inherited(arguments);this.domNode.setAttribute("data-focus","accept")}})})},"MW/toolstrip/mixins/ColumnWidthMixin":function(){define(["dojo/_base/declare"],
function(h){return h(null,{_allowedValues:["auto","100%"],_validateSizeInput:function(e){"100%"!==e&&this.inherited(arguments)},_setSize:function(e,g){this._validateSizeInput(g);this._set(e,g);if(this._started){"100%"===g&&this.getParent()&&(g=this.getParent().get("width"));var d="",d=0<=this._allowedValues.indexOf(g)?g:this._getAdjustedSize(e,g,this.domNode);this.domNode.style[e]=d}}})})},"MW/toolstrip/form/ListBox":function(){define("dojo/_base/declare dojo/_base/lang dojo/keys dojo/on mw-form/ListBox ../mixins/property/MnemonicMixin ../mixins/property/MnemonicKeyNavDirectionMixin ../mixins/ColumnWidthMixin ../mixins/property/TypeMixin ../mixins/property/DescriptionOverrideMixin ../mixins/property/CompactMixin mw-mixins/property/ShortcutMixin ../mixins/AcceptFocusMixin ../mixins/ScrollbarMixin ../widgets/_ValidationMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s){return h(s.validate([c,b,a,f,k,l,n,p,m,q,r]),{visualFamily:"toolstrip",width:150,height:66,mnemonicKeyNavDirection:"horizontal",_scaleToParentWidth:!0,_setItemsAttr:function(a){this.inherited(arguments);this._started&&this._handleSelection(a)},_handleSelection:function(a){var b=[];a.forEach(function(a){!0===a.selected&&b.push(a.value)},this);0<b.length&&("single"===this.get("selectionMode")?this.set("value",[b[b.length-1]]):this.set("value",b))},postCreate:function(a){this.inherited(arguments);
this.own(d(this.containerNode,"keydown",e.hitch(this,"_handleKeyDownEvent")))},startup:function(){this.inherited(arguments);this._handleSelection(this.get("items"))},_handleKeyDownEvent:function(a){this.inherited(arguments);a.keyCode===g.ESCAPE?this.emit("restorefocustolastnonrefuseelement"):a.keyCode===g.ENTER&&(this.emit("restorefocustolastnonrefuseelement"),this.emit("commit",{}))}})})},"mw-form/ListBox":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/query dojo/on dojo/keys dijit/_WidgetBase dijit/_TemplatedMixin dijit/_CssStateMixin dijit/Destroyable dijit/Tooltip mw-mixins/property/TagMixin mw-mixins/property/DisabledMixin mw-mixins/property/DescriptionMixin mw-mixins/property/SizeMixin mw-mixins/property/VisualFamilyMixin mw-mixins/property/ValidationMixin mw-mixins/event/ChangeEventMixin mw-mixins/PreventSelectionMixin mw-mixins/mixinDependencyValidator mw-html-utils/HtmlUtils dojo/text!./templates/ListBox.html".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A){l=h(l,{constructor:function(a){this.widget=a;this.own(c(a.containerNode,"mousedown",e.hitch(this,"_handleMouseDown")),c(a.containerNode,"keydown",e.hitch(this,"_handleKeyDown")))},_handleMouseDown:function(a){if(a.target.classList.contains("mwListItem")){var b=Number(a.target.getAttribute("data-mw-index")),c=this.widget._selectedIndices.indexOf(b);a=this._getNewSelectedIndexOnMouseDown(a,b,c);this._setSelectedItems(a)}},_handleKeyDown:function(a){a=
this._getNewSelectedIndexOnKeyDown(a);-1!==a&&(this._setSelectedItems(a),this.widget.scrollToIndex(a[0]))},_setSelectedItems:function(a){if(-1!==a){var b=[],c=this.widget.get("value");a.forEach(function(a){b.push(this.widget._indexValueMap[a])},this);this.widget.set("value",b);this.widget._triggerChangeEvent("value",c,b)}},_getNewSelectedIndexOnKeyDown:function(a){if(0===this.widget.items.length)return-1;var c=this.widget._selectedIndices[0],d=this.widget._getIndexes(),e=Math.min.apply(null,d),d=
Math.max.apply(null,d),f=[];switch(a.keyCode){case b.UP_ARROW:f=c===e||void 0===c&&this._anchorIndex===e?[e]:void 0===c&&void 0===this._anchorIndex?[d]:void 0===c&&void 0!==this._anchorIndex?[this._anchorIndex-1]:[c-1];a.stopPropagation();a.preventDefault();break;case b.DOWN_ARROW:f=c===d||void 0===c&&this._anchorIndex===d?[d]:void 0===c&&void 0===this._anchorIndex?[e]:void 0===c&&void 0!==this._anchorIndex?[this._anchorIndex+1]:[c+1];a.stopPropagation();a.preventDefault();break;default:f=-1}return f}});
var B=h(l,{_getNewSelectedIndexOnMouseDown:function(a,b,c){var d=[b];0<=c&&(d=a.ctrlKey||a.metaKey?[]:-1);this._anchorIndex=b;return d}}),F=h(l,{constructor:function(){this._anchorIndex=this.widget._selectedIndices[0]||1},_getNewSelectedIndexOnMouseDown:function(a,b,c){var d=[b],e;if(0<=c)a.shiftKey?d=this._getRangeOfIndices(b):(a.ctrlKey||a.metaKey?(d=this.widget._selectedIndices.slice(0),d.splice(c,1)):1===this.widget._selectedIndices.length&&(d=-1),e=!1);else if(a.shiftKey)d=this._getRangeOfIndices(b);
else if(e=!1,a.ctrlKey||a.metaKey)d=this.widget._selectedIndices.slice(0),d.push(b);!1===e&&(this._anchorIndex=b);return d},_getRangeOfIndices:function(a){var b,c=[],d=this._anchorIndex;if(a<=d)for(b=a;b<=d;b+=1)c.push(b);else for(b=d;b<=a;b+=1)c.push(b);return c}});return h(w.validate([a,f,k,p,m,q,r,s,t,u,v]),{templateString:A,baseClass:"mwWidget mwListBox",selectionMode:"single",constructor:function(){this._indexValueMap={};this._valueIndexMap={};this.items=[];this.value=[];this._selectedIndices=
[]},scrollToValue:function(a){this.scrollToIndex(this._valueIndexMap[a])},scrollToIndex:function(a){var b=this._getItemNodes().filter(function(b){return Number(b.getAttribute("data-mw-index"))===a},this)[0];if(b){var c=this.domNode;b.offsetTop+b.offsetHeight>c.offsetHeight+c.scrollTop?this.domNode.scrollTop=b.offsetTop+b.offsetHeight-this.domNode.offsetHeight:b.offsetTop<c.scrollTop&&(this.domNode.scrollTop=b.offsetTop)}},postCreate:function(){this.inherited(arguments);this.set("items",this.get("items"));
this.set("value",this.get("value"));this.own(c(this.containerNode,"mouseover",e.hitch(this,function(a){var b=this._getEscapedToolTipString(a);b&&0<b.length&&n.show(b,a.srcElement)})),c(this.containerNode,"mouseout",function(a){n.hide(a.srcElement)}));this._selectionStrategy=new this._selectionStrategyModule(this)},_getEscapedToolTipString:function(a){var b="";a=a.srcElement.getAttribute("data-mw-tooltiptext");null!==a&&(b=x.escapeHtml(a));return b},startup:function(){this.inherited(arguments);this._updateTooltipForClippedItems()},
_setSelectionModeAttr:function(a){if(0===a.toLowerCase().indexOf("single"))this._selectionStrategyModule=B;else if(0===a.toLowerCase().indexOf("multiple"))this._selectionStrategyModule=F;else throw Error("Selection Mode should be one of: single, multiple");this._created&&(this._selectionStrategy.destroy(),this._selectionStrategy=new this._selectionStrategyModule(this));this._set("selectionMode",a)},_setItemsAttr:function(a){this._validateItemsArray(a);var b=this._getItemsListAndInitInternalDs(a);
this._updateDom(b);this._created&&this.set("value",[]);this._set("items",a);this._updateTooltipForClippedItems()},_setWidthAttr:function(){this.inherited(arguments);this._updateTooltipForClippedItems()},_setHeightAttr:function(){this.inherited(arguments);this._updateTooltipForClippedItems()},_validateItemsArray:function(a){if(Array.isArray(a))a.forEach(function(a){if(void 0===a.label||void 0===a.value)throw Error('The "items" must be an array of objects, where each object should consist of a label and a value property. Like: [ {label: "Item 1", value: 1}, {label: "Item 2", value: 2}, {label: "Item 3", value: 3}, {label: "Item 4", value: 4} ]');
});else throw Error('The "items" must be an array of objects, where each object should consist of a label and a value property. Like: [ {label: "Item 1", value: 1}, {label: "Item 2", value: 2}, {label: "Item 3", value: 3}, {label: "Item 4", value: 4} ]');},_setValueAttr:function(a){this._validateValueArray(a);this._set("value",a);var b=[];a.forEach(function(a){b.push(this._valueIndexMap[a])},this);this._setSelectedIndex(b)},_validateValueArray:function(a){if(Array.isArray(a)){if("single"===this.get("selectionMode")&&
1<a.length)throw Error("'value' property must be a single element array in single selection mode.");a.forEach(function(a){if(!this.items.some(function(b){return b.value===a}))throw Error("'value' must be a subset of the items' values.");},this)}else throw Error("'value' property expects an array.");},_setSelectedIndex:function(a){var b=this._getItemNodes();b.forEach(function(a){a.classList.remove("mwListItemSelected")});this._selectedIndices=a;0!==a.length&&b.forEach(function(b){var c=Number(b.getAttribute("data-mw-index"));
a.forEach(function(a){a===c&&b.classList.add("mwListItemSelected")})})},_getItemsListAndInitInternalDs:function(a){var b=[],c=a.length,d;this._indexValueMap={};this._valueIndexMap={};if(0<c)for(d=0;d<c;d+=1){var e=d+1;b[d]={index:e,label:a[d].label,value:a[d].value};this._indexValueMap[e]=a[d].value;this._valueIndexMap[a[d].value]=e}else b=[];return b},_updateDom:function(a){g.empty(this.containerNode);0<a.length&&a.forEach(function(a){g.create("li",{textContent:a.label,"data-mw-index":a.index,"data-mw-tooltiptext":"",
"class":"mwListItem"},this.containerNode)},this)},_updateTooltipForClippedItems:function(){this._getItemNodes().forEach(function(a){a.offsetWidth<a.scrollWidth?a.setAttribute("data-mw-tooltiptext",a.textContent):a.setAttribute("data-mw-tooltiptext","")})},_getIndexes:function(){var a=[];this._getItemNodes().forEach(function(b){a.push(Number(b.getAttribute("data-mw-index")))});return a},_getItemNodes:function(){return d("li",this.containerNode)},_qeSelectItemsByLabel:function(a){var b=this.get("items").filter(function(b){return-1<
a.indexOf(b.label)}).map(function(a){return a.value});this.set("value",b)},_qeSelectItemsByIndex:function(a){var b=this.get("items").filter(function(b,c){return-1<a.indexOf(c)}).map(function(a){return a.value});this.set("value",b)}})})},"MW/toolstrip/mixins/property/CompactMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{_setCompactAttr:function(e){var g=!0===e?42:66;this.get("height")!==g&&this.set("height",g);this._set("compact",e)}})})},"MW/toolstrip/widgets/_ValidationMixin":function(){define("dojo/_base/declare dojo/dom-class dojo/mouse dojo/dom-geometry dojo/dom-construct dojo/on dojo/_base/window ./Tooltip".split(" "),
function(h,e,g,d,c,b,a,f){return h(null,{_createValidationtooltip:function(){this.validationTooltip||(this.validationTooltip=new f({}),this.own(this.validationTooltip),c.place(this.validationTooltip.domNode,a.body()),this._addTooltipEvents())},_setErrorTextAttr:function(a){this.validationTooltip&&(this.validationTooltip.textNode.textContent=a);this._set("errorText",a)},_setWarningTextAttr:function(a){this.validationTooltip&&(this.validationTooltip.textNode.textContent=a);this._set("warningText",a)},
_setValidationStateAttr:function(a){var b=!1,c=!1;"error"===a.toLowerCase()?(c=!0,this._createValidationtooltip(),this.validationTooltip.textNode.textContent=this.errorText):"warning"===a.toLowerCase()&&(b=!0,this._createValidationtooltip(),this.validationTooltip.textNode.textContent=this.warningText);this.validationTooltip&&(e.toggle(this._getDomNodeForValidationClasses(),"has-error",c),e.toggle(this.validationTooltip.domNode,"error-tooltip",c),e.toggle(this.validationTooltip.domNode,"warning-tooltip",
b),this.validationTooltip.domNode.style.visibility="hidden");this._set("validationState",a)},_flipDomOrder:function(a){var b=a.children[1];c.place(a.children[0],c.place(b,a),"after");c.place(b.children[0],c.place(b.children[1],b),"after")},_tooltipOrientation:function(){return e.contains(this.validationTooltip.domNode,"dijitTooltipLeft")?"left":"right"},_getDomNodeForValidationClasses:function(){return this.domNode},_getFocusWidget:function(){return this},_placeTooltip:function(){if(this.validationTooltip&&
("error"===this.validationState||"warning"===this.validationState)){var b=d.position(this.domNode),c,f,g,h,q,r,s,t=!1;c=b.x;f=b.y;g=b.w;"error"===this.validationState?(e.add(this._getDomNodeForValidationClasses(),"has-error"),this.validationTooltip.textNode.textContent=this.errorText,e.add(this.validationTooltip.domNode,"error-tooltip")):"warning"===this.validationState&&(this.validationTooltip.textNode.textContent=this.warningText,e.add(this.validationTooltip.domNode,"warning-tooltip"));this.validationTooltip.domNode.style.visibility=
"visible";r=d.position(this.validationTooltip.domNode).h/2;q=d.position(this.domNode).h/2;b=this.validationTooltip.domNode;s=d.position(a.body()).w;h=this._calculateTooltipWidth();c+g+h>s?(t=!0,c=c-h+"px",f=f+q-r+document.body.scrollTop+"px",e.contains(b.children[0],"tooltipConnector")&&this._flipDomOrder(b)):(c=c+g+"px",f=f+q-r+document.body.scrollTop+"px");e.toggle(this.validationTooltip.domNode,"tooltipLeft",t);e.toggle(this.validationTooltip.domNode,"tooltipRight",!t);this.validationTooltip.domNode.style.left=
c;this.validationTooltip.domNode.style.top=f}},_calculateTooltipWidth:function(){e.add(this.validationTooltip.domNode,"tooltipLeft");var a=d.position(this.validationTooltip.domNode).w;e.remove(this.validationTooltip.domNode,"tooltipLeft");return a},_addTooltipEvents:function(){var a=this;this.own(b(this,g.enter,function(){a._placeTooltip()}),b(this,g.leave,function(){a.validationTooltip&&(a.validationTooltip.domNode.style.visibility="hidden")}),b(this._getFocusWidget(),"focus",function(){a._placeTooltip();
a.validationTooltip&&("error"===a.get("validationState")||"warning"===a.get("validationState"))&&e.add(a.validationTooltip.domNode,"validationFocused")}),b(this._getFocusWidget(),"blur",function(){a.validationTooltip&&(e.remove(a.validationTooltip.domNode,"validationFocused"),a.validationTooltip.domNode.style.visibility="hidden")}))}})})},"MW/toolstrip/widgets/Tooltip":function(){define(["dojo/_base/declare","dijit/_WidgetBase","./_TooltipMixin","dijit/_TemplatedMixin","dojo/text!./templates/Tooltip.html"],
function(h,e,g,d,c){return h([e,d,g],{templateString:c})})},"MW/toolstrip/widgets/_TooltipMixin":function(){define(["dojo/_base/declare","dojo/aspect","./_DescriptionMixin","mw-event-utils/platformize"],function(h,e,g,d){return h([g],{_updateDescription:function(){this.inherited(arguments);this._updateTooltip()},_setTextAttr:function(){this.inherited(arguments);this._updateTooltip()},_setShortcutAttr:function(c){this._set("shortcut",c);this._updateTooltip()},_updateTooltip:function(){var c="",b="",
a="",d="",e="";this.textOverride?c=this.textOverride.replace(/\n/g," "):this.text&&(c=this.text.replace(/\n/g," "));this.shortcut&&(b=this._getPlatformSpecificShortcutString());this.descriptionOverride?a=this.descriptionOverride:this.description&&(a=this.description);!c&&b&&a?(c=a,a="",d=" "):c&&(b&&(d=" "),a&&(e=" - "));this.domNode.setAttribute("title",c+d+b+e+a)},_getPlatformSpecificShortcutString:function(){return"("+d.getPlatformSpecificString(this.shortcut)+")"}})})},"MW/toolstrip/widgets/_DescriptionMixin":function(){define(["dojo/_base/declare"],
function(h){return h(null,{_setDescriptionAttr:function(e){this._set("description",e);this._updateDescription()},_setDescriptionOverrideAttr:function(e){this._set("descriptionOverride",e);this._updateDescription()},_updateDescription:function(){var e="";this.descriptionOverride?e=this.descriptionOverride:this.description&&(e=this.description);this.descriptionNode&&(this.descriptionNode.textContent=e)}})})},"MW/toolstrip/form/Label":function(){define("dojo/_base/declare mw-form/Label MW/toolstrip/mixins/property/TypeMixin MW/toolstrip/mixins/property/IconOverrideMixin MW/toolstrip/mixins/property/DescriptionOverrideMixin MW/toolstrip/mixins/property/TextMixin MW/toolstrip/mixins/property/TextOverrideMixin mw-mixins/property/ShortcutMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,e,g,d,c,b,a,f,k){return h(k.validate([e,g,d,c,b,a,f]),{visualFamily:"toolstrip",height:22,_setTabIndexOnNode:function(){}})})},"MW/toolstrip/widgets/EmptyControl":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dojo/text!./templates/EmptyControl.html","./_WidgetMixin"],function(h,e,g,d,c){return h([e,g,c],{templateString:d})})},"MW/toolstrip/form/TextField":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojo/on dojo/keys mw-form/TextField MW/uiframework/utils ../mixins/property/MnemonicMixin ../mixins/property/MnemonicKeyNavDirectionMixin ../mixins/AcceptFocusMixin ../mixins/ColumnWidthMixin ../mixins/property/TypeMixin ../mixins/property/DescriptionOverrideMixin mw-mixins/property/ShortcutMixin mw-mixins/property/ValidationMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s){return h(s.validate([b,f,k,l,n,p,m,q,r]),{visualFamily:"toolstrip",width:150,height:22,mnemonicKeyNavDirection:"vertical",_scaleToParentWidth:!0,_onKeyUp:function(a){a.keyCode===c.ESCAPE?(this.inputNode.value=this.get("value"),this.emit("textcancelled",{mwEventData:{text:this.get("value")}}),this.emit("restorefocustolastnonrefuseelement")):a.keyCode===c.ENTER&&(this.get("value")===this.inputNode.value&&this.emit("recommit",{mwEventData:{text:this.get("value")}}),
this.emit("restorefocustolastnonrefuseelement"),this.emit("commit",{}));this.inherited(arguments)},_triggerTypingEvent:function(a){this.emit("typing",{mwEventData:{text:a}})},postCreate:function(){this.inherited(arguments);this.domNode.setAttribute("spellcheck","false");this.own(d(this.inputNode,"focus",e.hitch(this,"_handleInputNodeFocus")))},_handleInputNodeFocus:function(b){!1!==this.get("editable")&&(a.detectIE()?setTimeout(e.hitch(this,function(){this.inputNode.select();return!1},0)):this.inputNode.select())},
_onFocus:function(){this.inherited(arguments);this.emit("focusgained",{mwEventData:{text:this.inputNode.value}})},_onBlur:function(){this.inherited(arguments);this.emit("focuslost",{mwEventData:{text:this.inputNode.value}})}})})},"MW/uiframework/utils":function(){define([],function(){return{detectIE:function(){var h=window.navigator.userAgent,e=h.indexOf("MSIE ");if(0<e)return parseInt(h.substring(e+5,h.indexOf(".",e)),10);if(0<h.indexOf("Trident/"))return e=h.indexOf("rv:"),parseInt(h.substring(e+
3,h.indexOf(".",e)),10);e=h.indexOf("Edge/");return 0<e?parseInt(h.substring(e+5,h.indexOf(".",e)),10):!1}}})},"MW/toolstrip/form/TextArea":function(){define("dojo/_base/declare dojo/keys mw-form/TextArea ../mixins/property/MnemonicMixin ../mixins/property/MnemonicKeyNavDirectionMixin ../mixins/AcceptFocusMixin ../mixins/ColumnWidthMixin ../mixins/property/TypeMixin ../mixins/property/DescriptionOverrideMixin ../mixins/property/CompactMixin mw-mixins/property/ShortcutMixin ../mixins/ScrollbarMixin mw-mixins/property/ValidationMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q){return h(q.validate([g,d,c,b,a,f,k,l,n,p,m]),{visualFamily:"toolstrip",width:150,height:66,mnemonicKeyNavDirection:"none",_scaleToParentWidth:!0,_triggerTypingEvent:function(a){this.emit("typing",{mwEventData:{text:a}})},_onFocus:function(){this.inherited(arguments);this.emit("focusgained",{mwEventData:{text:this.inputNode.value}})},_onBlur:function(){this.inherited(arguments);this.emit("focuslost",{mwEventData:{text:this.inputNode.value}})},_onKeyUp:function(a){a.keyCode===
e.ESCAPE&&this.emit("restorefocustolastnonrefuseelement");this.inherited(arguments)}})})},"mw-form/TextArea":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_Contained dijit/_CssStateMixin dijit/_FocusMixin dijit/_TemplatedMixin mw-mixins/property/TagMixin mw-mixins/property/DescriptionMixin mw-mixins/property/DisabledMixin mw-mixins/property/HorizontalAlignmentMixin mw-mixins/property/EditableMixin mw-mixins/property/SizeMixin mw-mixins/property/TextInputValueMixin mw-form/mixins/SharedTextInputMixin mw-mixins/property/PlaceholderMixin mw-mixins/property/VisualFamilyMixin mw-mixins/property/ValidationMixin mw-mixins/event/ChangeEventMixin mw-mixins/event/TypingEventMixin mw-mixins/mixinDependencyValidator dojo/text!./templates/TextArea.html".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x){return h(w.validate([e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v]),{baseClass:"mwWidget mwTextArea",templateString:x,horizontalAlignment:"left",width:150,height:66,_setDisabledAttr:function(a){this.inherited(arguments);!0===a?this.inputNode.setAttribute("disabled",""):this.inputNode.removeAttribute("disabled")}})})},"MW/toolstrip/form/Spinner":function(){define("dojo/_base/declare dojo/_base/lang dojo/keys mw-form/Spinner ../mixins/property/MnemonicMixin ../mixins/property/MnemonicKeyNavDirectionMixin ../mixins/ColumnWidthMixin ../mixins/property/TypeMixin mw-mixins/property/DescriptionMixin ../mixins/property/DescriptionOverrideMixin ../mixins/AcceptFocusMixin mw-mixins/property/ShortcutMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m){return h(m.validate([d,c,b,a,f,k,l,n,p]),{visualFamily:"toolstrip",width:70,mnemonicKeyNavDirection:"none",_scaleToParentWidth:!0,postCreate:function(){this.inherited(arguments);this._textField.set("visualFamily","toolstrip")},_setMinimumAttr:function(a){this.set("limits",{minimum:a,maximum:this.limits.maximum});this._set("minimum",a)},_setMaximumAttr:function(a){this.set("limits",{minimum:this.limits.minimum,maximum:a});this._set("maximum",a)},_setValueAttr:function(a){a<
this.get("limits").minimum||a>this.get("limits").maximum||(this._checkValueInLimits(a),this._textField.set("value",a+""),this._set("value",a))},_onKeyDown:function(a){this.inherited(arguments);a.keyCode===g.ENTER?(this.get("value")+""===this._textField.inputNode.value&&this.emit("recommit",{mwEventData:{value:this.get("value")}}),this.emit("restorefocustolastnonrefuseelement"),this.emit("commit",{})):a.keyCode===g.ESCAPE&&this.emit("restorefocustolastnonrefuseelement")},resize:function(){this.containerNode.style.width=
"calc(100% -  21px)";this._textField.domNode.style.width="100%"}})})},"MW/toolstrip/widgets/HorizontalSlider":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/keys dojo/query ./_SliderPropertyMixin ./_SliderKeyBoardEventMixin ../ToolstripUtils ./external/HorizontalSlider ./_TooltipMixin ./_WidgetMixin ./_ValidationMixin mw-mixins/property/DisabledMixin MW/toolstrip/mixins/property/MnemonicMixin MW/toolstrip/mixins/property/MnemonicKeyNavDirectionMixin ../mixins/AcceptFocusMixin MW/uiframework/FocusManager".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t){return h([k,b,a,l,n,p,m,q,r,s],{width:150,_scaleToParentWidth:!0,mnemonicKeyNavDirection:"vertical",_setPixelValue:function(a,b,c){if(!this.disabled&&!this.readOnly){var d=(this.maximum-this.minimum)/this.steps,e=[];a=Math.max(Math.min((this.maximum-this.minimum)*a/b+this.minimum,this.maximum),this.minimum);for(b=this.minimum;b<=this.maximum;b+=d)e.push(b);d=f.getClosestValue(e,a);a=a-d[0]>d[1]-a?d[1]:d[0];this._setValueAttr(a,c)}},_setWidthAttr:function(a){this._set("width",
a);this._sliderResize()},_setMajorTickLabelsAttr:function(a){this.inherited(arguments);this._sliderResize()},_sliderResize:function(){var a,b,d;d=this.get("width");"100%"===d?void 0===this.majorTickLabels?this.getParent()&&(b=this.getParent().get("width"),this._setWidthOnChildren(b)):0<this.majorTickLabels.length?(a=c(".vc-MajorTickLabels",this.containerNode)[0],b=a.childElementCount,d=a.children[0],a=a.children[b-1],d=f.computeWidth(d.textContent),a=f.computeWidth(a.textContent),d/=2,a/=2,b=this.getParent().get("width"),
this.domNode.style.marginLeft=d+"px",this.domNode.style.marginRight=a+"px",this.domNode.style.width=b+"px",this.sliderTrackNode.style.width="100%",this.containerNode.style.width="100%",this._set("width",b)):(b=this.getParent().get("width"),this.domNode.style.marginLeft="5px",this.domNode.style.marginRight="5px",this.domNode.style.width=b+"px",this.sliderTrackNode.style.width="100%",this.containerNode.style.width="100%"):this._setWidthOnChildren(d)},_setWidthOnChildren:function(a){this.sliderTrackNode.style.width=
a-5+"px";this.containerNode.style.width=a-5+"px";this.domNode.style.marginLeft="5px";this.domNode.style.marginRight="5px"},_getDomNodeForValidationClasses:function(){return this.sliderTrackNode},constrainTicksToScaleLimits:function(a,b,c){var d=[],e=[],f;void 0===a.length&&(a=[a]);for(f=0;f<a.length;f+=1)a[f]>=b[0]&&a[f]<=b[1]&&(d[d.length]=a[f],void 0!==c&&(e[e.length]=c[f]));return void 0!==c?{ticks:d,labels:e}:{ticks:d}},_adjustLabelContainerPositioning:function(){this.majorTickLabelDijit&&c(".dijitRuleLabelContainerH",
this.majorTickLabelDijit.domNode).forEach(function(a){var b=-1*(f.computeWidth(a.children[0].innerHTML)/2);a.style.marginLeft=b+"px"})},postCreate:function(){this.inherited(arguments);this.own(g(this,"mouseup",e.hitch(this,function(){this.valueChanged({value:this.value});this._mouseUp=!0})));this.own(g(this,"mouseout",e.hitch(this,function(){this._mouseUp=!1})));this.own(g(this,"mousedragreleased",e.hitch(this,function(){this._mouseUp||this.valueChanged({value:this.value})})));this.own(g(this,"keydown",
e.hitch(this,this._handleKeyDown)))},_handleKeyDown:function(a){this.inherited(arguments);a.keyCode===d.ESCAPE?this.emit("restorefocustolastnonrefuseelement"):a.keyCode===d.ENTER&&(this.emit("restorefocustolastnonrefuseelement"),this.emit("commit",{}))},valueChanged:function(a){}})})},"MW/toolstrip/widgets/_SliderPropertyMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{_setStepsAttr:function(e){this._set("steps",e)},_setNumberOfTicksAttr:function(e){this._set("numberOfTicks",
e);var g=this.minimum,d=[];if(1<e){for(;d.length<e-1;)d.push(g),g+=(this.maximum-this.minimum)/(this.numberOfTicks-1);d.push(this.maximum);this.set("minorTicks",d)}else 1===e?(d.push((this.maximum+this.minimum)/2),this.set("minorTicks",d)):this.set("minorTicks",[])},_setLabelsAttr:function(e){var g=this.minimum,d=[];this._set("labels",e);if(0<e.length){if(1===e.length)d.push((this.minimum+this.maximum)/2);else for(;g<=this.maximum;)d.push(g),g+=(this.maximum-this.minimum)/(this.labels.length-1);this.set("majorTicks",
d);this.set("majorTickLabels",e)}else this.set("majorTicks",[]),this.set("majorTickLabels",[])}})})},"MW/toolstrip/widgets/_SliderKeyBoardEventMixin":function(){define(["dojo/_base/declare","dojo/on","dojo/aspect","dojo/keys","../ToolstripUtils"],function(h,e,g,d,c){return h(null,{constructor:function(){this.own(g.after(this,"postCreate",this._attachKeyBoardEvent,!0))},_attachKeyBoardEvent:function(){var b;this.own(e(this,"keyup",function(a){if(!this.get("disabled")){var e=[],g;g=[];e=(this.maximum-
this.minimum)/this.steps;for(b=this.minimum;b<=this.maximum;b+=e)g.push(b);a.keyCode===d.LEFT_ARROW||a.keyCode===d.PAGE_DOWN?(e=c.getClosestValue(g,this.get("value"))[0],a=g.indexOf(e),g=0===a?g[0]:g[a-1],this.set("value",g)):a.keyCode===d.RIGHT_ARROW||a.keyCode===d.PAGE_UP?(e=c.getClosestValue(g,this.get("value"))[1],a=g.indexOf(e),g=0===a?g[1]:a===g.length-1?g[g.length-1]:g[a+1],this.set("value",g)):a.keyCode===d.END?(g=g[g.length-1],this.set("value",g)):a.keyCode===d.HOME&&(g=g[0],this.set("value",
g))}}))}})})},"MW/toolstrip/widgets/external/HorizontalSlider":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-geometry dojo/query ./_AbstractSlider ./HorizontalRule ./HorizontalRuleLabels".split(" "),function(h,e,g,d,c,b,a){return h(c,{baseClass:"vc-slider vc-horizontalSlider",width:200,height:6,_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_thumbPositionParam1:"width",_thumbPositionParam2:"left",_isScaleDirectionReverse:!1,orientation:"horizontal",getRuleLabelConstructor:function(){return a},
_setWidthAttr:function(a){this.sliderTrackNode.style.width=a+"px";this.containerNode.style.width=a+"px";this._set("width",a)},getRuleConstructor:function(){return b},postCreate:function(){this.inherited(arguments);this.own(this.watch("width",e.hitch(this,"_adjustThumbPosition")),this.watch("fontSize",e.hitch(this,"_adjustLabelContainerPositioning")),this.watch("fontWeight",e.hitch(this,"_adjustLabelContainerPositioning")),this.watch("fontFamily",e.hitch(this,"_adjustLabelContainerPositioning")),this.watch("fontStyle",
e.hitch(this,"_adjustLabelContainerPositioning")))},_setMajorTickLabelsAttr:function(a){this.inherited(arguments);this._adjustLabelContainerPositioning()},_adjustLabelContainerPositioning:function(){this.majorTickLabelDijit&&d(".dijitRuleLabelContainerH",this.majorTickLabelDijit.domNode).forEach(function(a){var b=-1*(g.position(a).w/2);a.style.marginLeft=b+"px"})},_computePreferredWidth:function(){var a,b;a=this.width+this.sliderThumbSize.w;b=this._computePreferredWidthOfMajorTickLabels();return Math.max(a,
b)},_computePreferredX:function(){var a=this._adjustTrackAndContainerOffset();return this.location[0]-a},_computePreferredHeight:function(){var a=this._getDomNodeOfWidgetAtEnd();a&&(this._bottomWidgetPosition=g.position(a));return(a?this._bottomWidgetPosition.y+this._bottomWidgetPosition.h:this.sliderThumbSize.y+this.sliderThumbSize.h)-this.sliderThumbSize.y},_computePreferredY:function(){var a;a=g.position(this.sliderTrackNode);this._bottomWidgetPosition?(a=this._bottomWidgetPosition.y-a.y-a.h+this._bottomWidgetPosition.h,
this._bottomWidgetPosition=null):a=this.sliderThumbSize.h/3;return this.location[1]-a},_computePreferredWidthOfMajorTickLabels:function(){var a=0;if(this.majorTickLabelDijit)var a=d(".dijitRuleLabel",this.containerNode),b=0,b=g.position(a[0]),c=g.position(this.sliderTrackNode),b=b.x<c.x-this.sliderThumbSize.w/2?b.x:c.x-this.sliderThumbSize.w/2,a=g.position(a[a.length-1]),a=a.x-b+a.w;return a},_adjustTrackAndContainerOffset:function(){var a=d(".dijitRuleLabel",this.containerNode),b=this.sliderThumbSize.w/
2;if(0===a.length)b=this.sliderThumbSize.w/2;else{for(var c=[],e=0;e<a.length;e+=1)c[e]=g.position(a[e]).x;c=Math.min.apply(null,c);a=g.position(this.sliderTrackNode);c<a.x-this.sliderThumbSize.w/2&&(b=a.x-c)}this.sliderTrackNode.style.left=b+"px";this.containerNode.style.left=b+"px";return b}})})},"MW/toolstrip/widgets/external/_AbstractSlider":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-geometry dojo/_base/event dijit/focus dijit/form/_FormValueWidget dijit/_Container dojo/text!./templates/Slider.html dojo/dnd/Moveable ./_SliderThumbMover".split(" "),
function(h,e,g,d,c,b,a,f,k,l){return h([b,a],{templateString:f,sliderTrackNode:null,sliderThumbNode:null,value:0,maximum:100,minimum:0,THUMB_WIDTH:14,preferredSize:{width:0,height:0,left:0,bottom:0},_setHeightAttr:function(a){this.sliderTrackNode.style.height=a+"px";this._set("height",a)},_setOuterWidthAttr:function(a){this.domNode.style.width=a+"px"},_setOuterHeightAttr:function(a){this.domNode.height=a+"px"},_setLocationAttr:function(a){this._set("location",a)},_setPixelValue:function(a,b,c){!this.disabled&&
!this.readOnly&&this._setValueAttr(Math.max(Math.min((this.maximum-this.minimum)*a/b+this.minimum,this.maximum),this.minimum),c)},_setValueAttr:function(a,b){this._set("value",a);this.valueNode.value=a;this.inherited(arguments)},_setMinimumAttr:function(a){this._set("minimum",a)},_setMaximumAttr:function(a){this._set("maximum",a)},_setMajorTicksAttr:function(a){if(this.majorTickDijit&&(this.majorTickDijit.destroy(),this.majorTickDijit=null,0===a.length)){this._set("majorTicks",a);return}var b=this.constrainTicksToScaleLimits(a,
[this.get("minimum"),this.get("maximum")]),c=this.getRuleConstructor();0===b.ticks.length?this._set("majorTicks",a):(this._set("majorTicks",b.ticks.slice(0)),this.majorTickDijit=new c({"class":"vc-MajorTickMarks",ticks:this.majorTicks,minimum:this.minimum,maximum:this.maximum,count:this.majorTicks.length}),this.majorTickDijit.placeAt(this.containerNode))},_setMinorTicksAttr:function(a){if(this.minorTickDijit&&(this.minorTickDijit.destroy(),this.minorTickDijit=null,0===a.length)){this._set("minorTicks",
a);return}var b=this.constrainTicksToScaleLimits(a,[this.get("minimum"),this.get("maximum")]),c=this.getRuleConstructor();0===b.ticks.length?this._set("minorTicks",a):(this._set("minorTicks",b.ticks.slice(0)),this.minorTickDijit=new c({"class":"vc-MinorTickMarks",count:this.minorTicks.length,ticks:this.minorTicks,minimum:this.minimum,maximum:this.maximum}),this.minorTickDijit.placeAt(this.containerNode))},_setMajorTickLabelsAttr:function(a){this.majorTickLabelDijit&&(this.majorTickLabelDijit.destroy(),
this.majorTickLabelDijit=null);if(0===a.length||0===a.join("").trim().length)this._set("majorTickLabels",a);else{var b=this.constrainTicksToScaleLimits(this.get("majorTicks"),[this.get("minimum"),this.get("maximum")],a),c=this.getRuleLabelConstructor();0===b.labels.length?this._set("majorTickLabels",a):(this._set("majorTickLabels",b.labels.slice(0)),this.majorTickLabelDijit=new c({"class":"vc-MajorTickLabels",minimum:this.minimum,maximum:this.maximum,labels:this.majorTickLabels,count:this.majorTickLabels.length,
ticks:this.majorTicks}),this.majorTickLabelDijit.placeAt(this.containerNode))}},_onTrackClick:function(a){if(!this.disabled&&!(this.readOnly||a.target===this.sliderThumbNode)){c.focus(this.sliderThumbNode);d.stop(a);var b=g.position(this.sliderTrackNode),e=a[this._mousePixelCoord]-b[this._startingPixelCoord];this._isScaleDirectionReverse&&(e=b[this._pixelCount]-e);this._setPixelValue(e,b[this._pixelCount],!0);this.emit("mouseclicked");this._thumbMoveable.onMouseDown(a)}},postCreate:function(){this.inherited(arguments);
var a=h(l,{widget:this});this._thumbMoveable=new k(this.sliderThumbNode,{mover:a});this.own(this.watch("value",e.hitch(this,"_adjustThumbPosition")));this.own(this.watch("minimum",e.hitch(this,"_adjustThumbPosition")));this.own(this.watch("maximum",e.hitch(this,"_adjustThumbPosition")));this._adjustThumbPosition()},_adjustThumbPosition:function(){var a=(this.value-this.minimum)/(this.maximum-this.minimum),a=100*a-100*(this.THUMB_WIDTH/this[this._thumbPositionParam1]/2);this.sliderThumbNode.style[this._thumbPositionParam2]=
a+"%"},computePreferredSize:function(){var a,b,c,d;this.sliderThumbSize=g.position(this.sliderThumbNode);c=this._computePreferredWidth();a=this._computePreferredX();d=this._computePreferredHeight();b=this._computePreferredY();this.set("preferredSize",{width:c,height:d,left:a,bottom:b})},_getDomNodeOfWidgetAtEnd:function(){var a;this.majorTickLabelDijit?a=this.majorTickLabelDijit.domNode:this.majorTickDijit?a=this.majorTickDijit.domNode:this.minorTickDijit&&(a=this.minorTickDijit.domNode);return a}})})},
"MW/toolstrip/widgets/external/_SliderThumbMover":function(){define(["dojo/_base/declare","dojo/dom-geometry","dojo/dnd/Mover"],function(h,e,g){return h(g,{onMouseMove:function(d){var c=this.widget,b=c._sliderTrackDimensions;b||(b=c._sliderTrackDimensions=e.position(c.sliderTrackNode,!0));d=d[c._mousePixelCoord]-b[c._startingPixelCoord];c._isScaleDirectionReverse&&(d=b[c._pixelCount]-d);c._setPixelValue(d,b[c._pixelCount],!1);this._wasDragged=!0;c.emit("mousedragging")},onMouseUp:function(){var d=
this.widget;this._wasDragged?(d.emit("mousedragreleased"),this._wasDragged=!1):d.emit("mouseclicked");this.inherited(arguments)},destroy:function(){this.widget._sliderTrackDimensions=null;this.inherited(arguments)}})})},"MW/toolstrip/widgets/external/HorizontalRule":function(){define(["dojo/_base/declare","dijit/_Widget","dijit/_TemplatedMixin"],function(h,e,g){return h("dijit.form.HorizontalRule",[e,g],{templateString:'\x3cdiv class\x3d"dijitRuleContainer dijitRuleContainerH"\x3e\x3c/div\x3e',count:3,
container:"containerNode",ruleStyle:"",_positionPrefix:'\x3cdiv class\x3d"dijitRuleMark dijitRuleMarkH" style\x3d"left:',_positionSuffix:"%;",_suffix:'"\x3e\x3c/div\x3e',ticks:null,minimum:0,maximum:100,_isHorizontal:!0,isAddQeIdForTickBased:!0,_qeIdSuffix:"id\x3d",_genHTML:function(d,c){var b="";this.isAddQeIdForTickBased&&this.ticks&&(b='"'+this._qeIdSuffix+'"'+this["class"]+"_"+this.ticks[c]);return this._positionPrefix+d+this._positionSuffix+this.ruleStyle+b+this._suffix},buildRendering:function(){this.inherited(arguments);
var d="",c,b;if(this.ticks){b=this.maximum-this.minimum;for(c=0;c<this.count;c+=1)d+=this._genHTML(100*((this.ticks[c]-this.minimum)/b),c)}else{d=this._genHTML(0,0);b=100/(this.count-1);for(c=1;c<this.count-1;c+=1)d+=this._genHTML(b*c,c);d+=this._genHTML(100,this.count-1)}this.domNode.innerHTML=d}})})},"MW/toolstrip/widgets/external/HorizontalRuleLabels":function(){define(["dojo/_base/declare","dojo/number","dojo/query","./HorizontalRule"],function(h,e,g,d){return h("dijit.form.HorizontalRuleLabels",
d,{templateString:'\x3cdiv class\x3d"dijitRuleContainer dijitRuleContainerH dijitRuleLabelsContainer dijitRuleLabelsContainerH"\x3e\x3c/div\x3e',labelStyle:"",labels:[],numericMargin:0,minimum:0,maximum:1,constraints:{pattern:"#%"},_positionPrefix:'\x3cdiv class\x3d"dijitRuleLabelContainer dijitRuleLabelContainerH" style\x3d"left:',_labelPrefix:'"\x3e\x3cdiv class\x3d"dijitRuleLabel dijitRuleLabelH"',_suffix:"\x3c/div\x3e\x3c/div\x3e",_qeIdSuffix:"id\x3d",_calcPosition:function(c){return c},_genHTML:function(c,
b){var a=this._qeIdSuffix+'"'+this["class"]+"_"+this.labels[b]+'"\x3e';return this._positionPrefix+this._calcPosition(c)+this._positionSuffix+this.labelStyle+this._labelPrefix+a+this.labels[b]+this._suffix},getLabels:function(){var c=this.labels,b,a,d;!c.length&&this.srcNodeRef&&(c=g("\x3e li",this.srcNodeRef).map(function(a){return String(a.innerHTML)}));if(!c.length&&1<this.count){b=this.minimum;a=(this.maximum-b)/(this.count-1);for(d=0;d<this.count;d+=1)c.push(d<this.numericMargin||d>=this.count-
this.numericMargin?"":e.format(b,this.constraints)),b+=a}return c},postMixInProperties:function(){this.inherited(arguments);this.labels=this.getLabels();this.count=this.labels.length}})})},"MW/toolstrip/form/RadioButton":function(){define("dojo/_base/declare mw-form/RadioButton MW/toolstrip/mixins/property/MnemonicMixin MW/toolstrip/mixins/property/MnemonicKeyNavDirectionMixin MW/toolstrip/mixins/property/TypeMixin MW/toolstrip/mixins/property/DescriptionOverrideMixin MW/toolstrip/mixins/property/TextMixin MW/toolstrip/mixins/property/TextOverrideMixin mw-mixins/property/ShortcutMixin MW/toolstrip/mixins/property/ButtonGroupMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n){return h(n.validate([e,g,d,c,b,a,f,k,l]),{visualFamily:"toolstrip",height:22,_qeSetChecked:function(a){this.set("checked",a,!0)}})})},"MW/toolstrip/form/CheckBox":function(){define("dojo/_base/declare mw-form/CheckBox MW/toolstrip/mixins/property/MnemonicMixin MW/toolstrip/mixins/property/MnemonicKeyNavDirectionMixin MW/toolstrip/mixins/property/TypeMixin MW/toolstrip/mixins/property/DescriptionOverrideMixin MW/toolstrip/mixins/property/TextMixin MW/toolstrip/mixins/property/TextOverrideMixin mw-mixins/property/ShortcutMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,e,g,d,c,b,a,f,k,l){return h(l.validate([e,g,d,c,b,a,f,k]),{visualFamily:"toolstrip",height:22,_qeSetChecked:function(a){this.set("checked",a,!0)}})})},"MW/toolstrip/widgets/ToolbarWrapper":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Container dojo/text!./templates/ToolbarWrapper.html ./_WidgetMixin".split(" "),function(h,e,g,d,c,b){return h([e,g,d,b],{templateString:c})})},"MW/toolstrip/widgets/MenubarWrapper":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Container dojo/text!./templates/MenubarWrapper.html ./_WidgetMixin".split(" "),
function(h,e,g,d,c,b){return h([e,g,d,b],{templateString:c})})},"MW/toolstrip/widgets/gallery/GalleryItem":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-geometry dojo/dom-construct dojo/_base/window dojo/on dojo/mouse dojo/touch dijit/popup dijit/_WidgetBase dijit/_CssStateMixin dijit/_TemplatedMixin dojo/text!./templates/GalleryItem.html ../../constants/gallery/GalleryViewConstants ../../constants/gallery/ItemLocationConstants ../../constants/TypeConstants mw-mixins/property/IconMixin ../_TooltipMixin ../_WidgetMixin mw-mixins/event/ChangeEventMixin mw-mixins/property/DisabledMixin mw-mixins/AccessibilityClickMixin MW/toolstrip/ToolstripUtils MW/toolstrip/mixins/property/MnemonicKeyNavDirectionMixin MW/toolstrip/mixins/property/RemovableMixin MW/toolstrip/mixins/property/QuickAccessIconMixin MW/toolstrip/mixins/property/IconOverrideMixin".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,B,F,G,H){return h([n,p,m,u,v,w,x,A,B,G,H],{baseClass:"mwWidget mwGalleryItem",templateString:q,constructor:function(a){a=a||{};this.disabled=!!a.disabled;this._favButtonClickConnection=null;this._handleFavButtonClick=e.hitch(this,function(){this.favButtonPushed()})},postCreate:function(){var b=this;this.own(a(this.itemWrapperNode,"click",function(){b.disabled||b.itemPushed()}));this.inherited(arguments);this.attachFavButtonClickHandler()},_setIsFavoriteAttr:function(a){a?
this.domNode.classList.add("isFavorite"):this.domNode.classList.remove("isFavorite");this._set("isFavorite",a)},_setDisplayStateAttr:function(a){var b=this.getParent(),b=b&&b.getParent();if(!b||!(b.get("type")===t.GALLERY_POPUP&&b.get("displayState")!==a))this._set("displayState",a),this._updateItemDimensions(),this._updateText(),"DATA_URI"===this._getIconType(this.icon)&&this._updateIconNodeSize()},_updateItemDimensions:function(){this.displayState===r.LIST?this.domNode.style.width="auto":this._getPropertyFromAncestor("galleryItemWidth")&&
(this.domNode.style.width=this._getPropertyFromAncestor("galleryItemWidth")+"px")},attachFavButtonClickHandler:function(){this._favButtonClickConnection=a(this.favButtonNode,"click",this._handleFavButtonClick)},detachFavButtonClickHandler:function(){this._favButtonClickConnection&&(this._favButtonClickConnection.remove(),this._favButtonClickConnection=null)},_setTextAttr:function(a){this._set("text",a);this._updateText()},_setTextOverrideAttr:function(a){this._set("textOverride",a);this._updateText()},
_updateText:function(){var a;this.textOverride?a=this.textOverride:this.text&&(a=this.text);a&&(this.displayState===r.LIST&&(a=a.replace(/\n/g," "),this.shortcut&&(a=a+" "+this.shortcut)),this.labelNode.textContent=a,this._updateTooltip())},_getLocation:function(){var a=this.getParent(),b=!1;if(a)switch(a.type){case t.GALLERY_CATEGORY:b=s.CATEGORY;break;case t.GALLERY_FAVORITE_CATEGORY:b=s.FAVORITES;break;case t.GALLERY:b=s.GALLERY}return b},_getPropertyFromAncestor:function(a){var b=!1,c=this._getLocation();
if(c===s.GALLERY)b=this.getParent()[a];else if(c===s.CATEGORY||c===s.FAVORITES)this.getParent().getParent()&&(b=this.getParent().getParent()[a]);return b},itemPushed:function(){!1!==this.get("closePopupOnClick")&&l.close()},favButtonPushed:function(){},_setIconAttr:function(a){this.inherited(arguments);this.iconNode.classList.remove("dijitInline");"DATA_URI"===this._getIconType(a)&&this._updateIconNodeSize()},_updateIconNodeSize:function(){var a,b,d,e;this.icon&&1===this._getPropertyFromAncestor("galleryItemRowCount")&&
(e=this.iconNode,a=c.create("img",{src:this.icon.replace(/"/g,"").replace(/url\(|\)$/ig,"")}),b=this._getPropertyFromAncestor("galleryItemWidth"),g.after(a,"onload",function(){d=a.width>b-4?b-4:a.width;e.style.width=d+"px";e.style.height=a.height+"px"}))},_qeClick:function(){this.itemPushed()},_qeFavoriteClick:function(){this._handleFavButtonClick()}})})},"MW/toolstrip/constants/gallery/ItemLocationConstants":function(){define([],function(){return{GALLERY:"Gallery",FAVORITES:"Favorites",CATEGORY:"Category"}})},
"MW/toolstrip/widgets/gallery/ToggleGalleryItem":function(){define("dojo/_base/declare ./GalleryItem ../../constants/TypeConstants mw-mixins/event/ChangeEventMixin mw-mixins/property/CheckedMixin mw-mixins/property/ButtonGroupMixin MW/toolstrip/mixins/property/ButtonGroupMixin MW/toolstrip/mixins/property/RemovableMixin".split(" "),function(h,e,g,d,c,b,a,f){return h([e,d,c,b,a,f],{baseClass:"mwWidget mwToggleGalleryItem",postCreate:function(){this.set("checkableNode",this.itemWrapperNode);this.inherited(arguments)},
_setCheckedAttr:function(){this.inherited(arguments);if(!this._destroyed){var a=this.getParent(),b=null;a&&(a.type===g.GALLERY&&a.scrollToSelection?a.getChildren().some(function(a){return!0===a.get("checked")},this)||a.refresh():(b=a.getParent())&&b.type===g.GALLERY_POPUP&&b.scrollToSelection&&this.checked&&!b._invokingGallery.getChildren().some(function(a){return a.get("actionId")===this.get("actionId")},this)&&b.galleryStateChanged())}},_qeSetChecked:function(a){this.set("checked",a,!0)}})})},"MW/uiframework/hashes/ControlEventsHash":function(){define(["dojo/_base/lang",
"MW/toolstrip/hashes/ControlEventsHash"],function(h,e){var g={};h.mixin(g,e);return g})},"MW/toolstrip/hashes/ControlEventsHash":function(){define(["../constants/TypeConstants"],function(h){var e={};e[h.TOOLSTRIP]={actionEvents:[],componentEvents:["toolstripPlaced"]};e[h.TAB]={actionEvents:[],componentEvents:["remove"]};e[h.PUSH_BUTTON]={actionEvents:["buttonPushed"],componentEvents:[]};e[h.QAB]={actionEvents:[],componentEvents:["restoreFactoryControls","toggleFactoryControl"]};e[h.QAB_PUSH_BUTTON]=
e[h.PUSH_BUTTON];e[h.TOGGLE_BUTTON]={actionEvents:[],componentEvents:[]};e[h.QAB_TOGGLE_BUTTON]=e[h.TOGGLE_BUTTON];e[h.DROP_DOWN_BUTTON]={actionEvents:[],componentEvents:["dropDownPerformed"]};e[h.QAB_DROP_DOWN_BUTTON]=e[h.DROP_DOWN_BUTTON];e[h.SPLIT_BUTTON]={actionEvents:["buttonPushed"],componentEvents:["dropDownPerformed"]};e[h.COLOR_PICKER_BUTTON]={actionEvents:["valueChanged"],componentEvents:[]};e[h.QAB_SPLIT_BUTTON]=e[h.SPLIT_BUTTON];e[h.TOGGLE_SPLIT_BUTTON]={actionEvents:[],componentEvents:["dropDownPerformed"]};
e[h.QAB_TOGGLE_SPLIT_BUTTON]=e[h.TOGGLE_SPLIT_BUTTON];e[h.COMBO_BOX]={actionEvents:"dropDownPerformed focusGained focusLost typing textCancelled recommit".split(" "),componentEvents:[]};e[h.POPUP_LIST]={actionEvents:[],componentEvents:["onOpen","onClose"]};e[h.LIST_ITEM]={actionEvents:["itemPushed"],componentEvents:["remove"]};e[h.LIST_ITEM_WITH_POPUP]={actionEvents:[],componentEvents:["dropDownPerformed"]};e[h.LIST_ITEM_WITH_CHECKBOX]={actionEvents:[],componentEvents:["closeRequest"]};e[h.TEXT_FIELD]=
{actionEvents:["focusGained","focusLost","typing","textCancelled","recommit"],componentEvents:[]};e[h.TEXT_AREA]={actionEvents:["focusGained","focusLost"],componentEvents:[]};e[h.LIST_ITEM_WITH_TEXTFIELD]={actionEvents:"focusGained focusLost typing commit recommit textCancelled itemPushed".split(" "),componentEvents:[]};e[h.HORIZONTAL_SLIDER]={actionEvents:["valueChanged"],componentEvents:[]};e[h.SPINNER]={actionEvents:["valueChanged","recommit"],componentEvents:[]};e[h.GALLERY]={actionEvents:[],
componentEvents:["refresh"]};e[h.GALLERY_POPUP]={actionEvents:[],componentEvents:["galleryStateChanged"]};e[h.GALLERY_CATEGORY]={actionEvents:[],componentEvents:["categoryMoved","itemMoved"]};e[h.GALLERY_FAVORITE_CATEGORY]={actionEvents:[],componentEvents:["itemMoved"]};e[h.GALLERY_ITEM]={actionEvents:["itemPushed"],componentEvents:["favButtonPushed","remove"]};e[h.TOGGLE_GALLERY_ITEM]={actionEvents:[],componentEvents:["favButtonPushed","remove"]};e[h.QA_GROUP]={actionEvents:[],componentEvents:["itemMoved"]};
e[h.SPLIT_BUTTON_WITH_DISABLE_OVERRIDE]=e[h.SPLIT_BUTTON];return e})},"MW/uiframework/hashes/PeerNodeWidgetPropertiesHash":function(){define(["dojo/_base/lang","MW/toolstrip/hashes/PeerNodeWidgetPropertiesHash"],function(h,e){var g={};h.mixin(g,e);Object.keys(g).forEach(function(d){Object.keys(g[d]).forEach(function(c){g[d][g[d][c]]=c})});return g})},"MW/toolstrip/hashes/PeerNodeWidgetEventsHash":function(){define(["../constants/TypeConstants"],function(h){var e={};e[h.PUSH_BUTTON]={buttonPushed:"click"};
e[h.DROP_DOWN_BUTTON]={dropDownPerformed:"dropdownclick"};e[h.SPLIT_BUTTON]={dropDownPerformed:"dropdownclick",buttonPushed:"click"};e[h.COLOR_PICKER_BUTTON]={valueChanged:"change"};e[h.TOGGLE_SPLIT_BUTTON]={dropDownPerformed:"dropdownclick"};e[h.QAB_PUSH_BUTTON]=e[h.PUSH_BUTTON];e[h.QAB_DROP_DOWN_BUTTON]=e[h.DROP_DOWN_BUTTON];e[h.QAB_SPLIT_BUTTON]=e[h.SPLIT_BUTTON];e[h.QAB_TOGGLE_SPLIT_BUTTON]=e[h.TOGGLE_SPLIT_BUTTON];e[h.TEXT_FIELD]={focusGained:"focusgained",focusLost:"focuslost",typing:"typing",
textCancelled:"textcancelled"};e[h.TEXT_AREA]={focusGained:"focusgained",focusLost:"focuslost"};e[h.COMBO_BOX]={focusGained:"focus",focusLost:"blur",typing:"typing",textCancelled:"textcancelled",dropDownPerformed:"dropdownclick"};e[h.POPUP_LIST]={onOpen:"open",onClose:"close"};e[h.SPINNER]={valueChanged:"change"};e[h.LIST_ITEM]={itemPushed:"click"};e[h.LIST_ITEM_WITH_TEXTFIELD]={focusGained:"focusgained",focusLost:"focuslost",typing:"typing",commit:"commit",recommit:"recommit",textCancelled:"textcancelled",
itemPushed:"itempushed"};e[h.LIST_ITEM_WITH_POPUP]={dropDownPerformed:"dropdownclick"};e[h.LIST_ITEM_WITH_CHECKBOX]={closeRequest:"closeRequest"};return e})},"MW/toolstrip/hashes/ToolstripCollapseTriggers":function(){define(["../constants/TypeConstants"],function(h){var e={};e[h.PUSH_BUTTON]={events:["buttonPushed"],properties:[]};e[h.SPLIT_BUTTON]={events:["buttonPushed"],properties:[]};e[h.TOGGLE_BUTTON]={events:[],properties:["checked"]};e[h.LIST_ITEM]={events:["itemPushed"],properties:[]};e[h.LIST_ITEM_WITH_CHECKBOX]=
{events:["closeRequest"],properties:[]};e[h.COMBO_BOX]={events:[],properties:["value"]};e[h.CHECK_BOX]={events:[],properties:["checked"]};e[h.RADIO_BUTTON]={events:[],properties:["checked"]};e[h.SPLIT_BUTTON_WITH_DISABLE_OVERRIDE]={events:["buttonPushed"],properties:[]};e[h.GALLERY_ITEM]={events:["itemPushed"],properties:[]};e[h.TOGGLE_GALLERY_ITEM]={events:[],properties:["checked"]};return e})},"MW/uiframework/supportedUIBuilderFunctions":function(){define({fromModelManager:"create destroy add remove get set exists indexOf getChildrenIds getParentId isAnOrphan addEventCallback addPropertySetCallback createPopupsFromConfig addTabGroupFromConfig createGalleryPopupFromConfig addGalleryItemToFavorites removeGalleryItemFromFavorites getGalleryState setGalleryState getQABState setQABState widgetByTag tagToId showPopup addToolstripFromConfig placeToolstripAt selectTab selectFirstTabInTabGroup getMenubarWrapperWidget getToolbarWrapperWidget".split(" "),
fromWidgetManager:["refreshGallery","isAnyPopupOpen","closeAllOpenPopups"]})},"MW/rtc/plugins/goto/GotoUtilities":function(){define([],function(){return{gotoCodeLineColumn:function(h,e,g,d,c){var b=e.getNumberOfCodeLines();0!=b&&(d=this._getCorrectedLineOrColumn(d,b),e=e.getLineNumberFromCodeLineNumber(d)+1,h=h.getLineNode(e-1).getText().length+1,c=this._getCorrectedLineOrColumn(c,h),g.setLineColumn(e,c,!0))},gotoDocumentLineColumn:function(h,e,g,d){var c=h.getMaxLineNumber();g=this._getCorrectedLineOrColumn(g,
c);h=h.getLineNode(g-1).getText().length+1;d=this._getCorrectedLineOrColumn(d,h);e.setLineColumn(g,d,!0)},_getCorrectedLineOrColumn:function(h,e){h=Math.max(h,1);return Math.min(h,e)},sortFunctionDeclarations:function(h,e){var g=h.map(function(c,b){return{elem:c,idx:b}}),d=e?g.shift():null;g.sort(function(c,b){var a=c.elem.getName().toLocaleLowerCase(),d=b.elem.getName().toLocaleLowerCase(),a=a.localeCompare(d);return 0!==a?a:c.idx-b.idx});d&&g.unshift(d);return g.map(function(c){return c.elem})}}})},
"MW/rtc/plugins/htmlmime/HTMLMimeConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./HTMLMimeConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/htmlmime/HTMLMimeConverter":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-construct MW/rtc/plugins/cutcopypaste/MIMETypes MW/rtc/plugins/cutcopypaste/mime/MimeConverter MW/rtc/plugins/htmlmime/DocumentBuilder".split(" "),
function(h,e,g,d,c,b,a){return e(b,{_PRIORITY:50,SKIP_NODES:["META","LINK","#comment","STYLE"],constructor:function(){this._handlers=[];this._textHandlers=[];this._preprocessors=[]},getType:function(){return c.HTML},priority:function(){return this._PRIORITY},setDefaultParagraphFactory:function(a){this._defaultParagraphFactory=a},registerDocumentPreprocessor:function(a){this._preprocessors.push(a)},registerNodeHandler:function(a,b,c){"string"===typeof a&&(a=[a]);this._handlers.push(g.mixin({acceptedNodeNames:a,
convertNode:b,priority:c||0},b));this._handlers=this._handlers.sort(function(a,b){return b.priority-a.priority})},registerTextHandler:function(a,b){this._textHandlers.push({convertText:a,priority:b||0});this._textHandlers=this._textHandlers.sort(function(a,b){return b.priority-a.priority})},convertFromMimeData:function(b){if(this._defaultParagraphFactory){b=b.replace(/<\/html>[\s\S]*/,"\x3c/html\x3e");var c=document.createElement("iframe");c.style.visibility="hidden";document.body.appendChild(c);
c.sandbox="allow-same-origin";c.contentDocument.documentElement.innerHTML=b;b=c.contentDocument.documentElement.querySelector("head");d.create("style",{type:"text/css",textContent:"pre {font-family: monospace }\nbody {font-family: 'Arial', 'Helvetica', sans-serif}"},b,"first");var e=c.contentDocument.body;this._preprocessors.forEach(function(a){a(e)});this._builder=new a(this._defaultParagraphFactory);this._traverseDOM(e);document.body.removeChild(c);c=this._builder.getDocumentFragment();return 0===
c.length?void 0:c}},_traverseDOM:function(a){var b=this._builder.getActiveNode();this._enterNode(a);a=a.firstChild;for(var c;a;)"#text"===a.nodeName?(c=a.textContent)&&this._callTextConverter(a):0>this.SKIP_NODES.indexOf(a.nodeName)&&this._traverseDOM(a),a=a.nextSibling;b?this._builder.popTo(b):this._builder.getActiveNode()&&(this._builder.isImplicitParagraph()?this._builder.setActiveNode(this._builder.getLastParagraph()):this._builder.leaveParagraph())},_callTextConverter:function(a){this._textHandlers.forEach(function(b){b.convertText(a,
this._builder)},this)},_enterNode:function(a){h.some(this._handlers,function(b){if(!b.convertNode||0>b.acceptedNodeNames.indexOf(a.nodeName))return!1;b.convertNode(a,this._builder)},this)}})})},"MW/rtc/plugins/htmlmime/DocumentBuilder":function(){define(["dojo/_base/array","dojo/_base/declare"],function(h,e){return e(null,{constructor:function(e){this._defaultParagraphFactory=e;this._content=[];this._isImplicitParagraph=!1},getDocumentFragment:function(){this.leaveParagraph();return h.map(this._content,
function(e){return e.serialize()})},getActiveNode:function(){return this._activeNode},isInParagraph:function(){return!!this.getActiveNode()},getLastParagraph:function(){return this._content[this._content.length-1]},appendNode:function(e){this._activeNode||(this.appendParagraph(),this._isImplicitParagraph=!0);this._activeNode.children.push(e)},appendInnerNode:function(e){this.appendNode(e);this._activeNode=e},setActiveNode:function(e){this._activeNode!==e&&(this._activeNode&&0===this._activeNode.children.length&&
this._removeNode(this._activeNode),this._activeNode=e)},appendParagraph:function(e){this._isImplicitParagraph=!1;var d=this.getLastParagraph();d&&0===d.children.length&&this._removeNode(d);this._activeNode=e||this._defaultParagraphFactory();this._content.push(this._activeNode)},_removeNode:function(e){var d,c=this.getParent(e);c?(d=c.children.indexOf(e),c.children.splice(d,1)):(d=this._content.indexOf(e))&&this._content.splice(d,1);this._activeNode===e&&(this._activeNode=null)},getParent:function(e){var d;
h.some(this._content,function(c){return d=this._searchParent(e,c)},this);return d},isImplicitParagraph:function(){return this._isImplicitParagraph},_searchParent:function(e,d){if(!d.children)return!1;if(0<=d.children.indexOf(e))return d;var c;h.some(d.children,function(b){return c=this._searchParent(e,b)},this);return c},leaveParagraph:function(){this.setActiveNode(null)},popTo:function(e){for(var d=this._activeNode;d&&d!==e;)d=this.getParent(d);this.setActiveNode(d)}})})},"MW/rtc/plugins/hyperlink/HyperlinkProvider":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/hyperlink/Hyperlink","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{requires:function(){return{createInstance:"rtc.internaldocument rtc.document rtc.eventhandler rtc.view rtc.cursor rtc.internalhyperlinkservice rtc.textnodeservice".split(" ")}},createInstance:function(d,c,b,a,f,g,h){return new e(d,c,b,a,f,g,h)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/hyperlink/Hyperlink":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/has dojo/mouse dojo/on mw-log/Log MW/rtc/model/DocumentUtilities MW/rtc/model/DocumentEventUtilities MW/rtc/model/events/DeletionEvent MW/rtc/model/events/DocumentEvent MW/rtc/model/Position MW/rtc/plugins/richtext/nodes/leaf/RichTextNode ./model/HyperlinkNode".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q){return h(null,{constructor:function(a,c,d,f,h,k,l){this._internalDocument=a;this._document=c;this._eventHandler=d;this._view=f;this._cursor=h;this._hyperlinkService=k;this._textNodeService=l;this._handles=[];this._handles.push(b(f.getDomtarget(),"a.hyperlinkNode:auxclick",e.hitch(this,this._handleAuxClick)));this._handles.push(b(f.getDomtarget(),"a.hyperlinkNode:click",e.hitch(this,this._handleClick)));this._handles.push(g.after(this._document,"onDirectedDeletion",
e.hitch(this,"_onDelete"),!0))},_handleAuxClick:function(a){a.stopPropagation();a.preventDefault()},_handleClick:function(a){var b;a.preventDefault();(d("mac")?!a.ctrlKey:a.ctrlKey)?this._cursor.hasSelection()||c.isRight(a)||a.altKey?(a.stopPropagation(),a.preventDefault()):(b=this._view.getCoordinateFromEvent(this._view.fixEvent(a)),b=this._view.getPositionFromCoordinate(b),b=b.getNode().parent.hyperlink,!b&&a.selectorTarget&&(b=a.selectorTarget.href),b&&(this._hyperlinkService.openUrl(b),a.stopPropagation(),
a.preventDefault())):(a.stopPropagation(),a.preventDefault())},_onDelete:function(a,b){if(!this._cursor.hasSelection()&&b.isLocal){var c=this._getHyperlinkByTextNode(b.startNode);if(c){if(-1===a&&b.endNode===c.endNode()&&b.endPos===b.endNode.maxOffset())return this.performEditAction({nodeBeingEdited:c}),!0;if(1===a&&b.startNode===c.startNode()&&0===b.startPos)return this._cursor.setPosition(c,c.maxOffset()),this._cursor.fixAnchor(),this._cursor.setPosition(c),!0}}},hyperlinkUnderCursor:function(){var a=
this._cursor.selectionInfo(),b=a.startNode,c=this._getHyperlinkByTextNode(b);return c&&b.parent===a.endNode.parent?a.isNull&&f.isEdgeOfTextLevelContainer(b,a.startPos)?null:c:null},_getHyperlinkByTextNode:function(a){return!a.isTextNode()?null:(a=a.parent)&&a instanceof q?a:null},_buildHyperlink:function(a){var b=new m({text:a.displayText});return new q([b],{hyperlink:a.targetUrl})},_removeHyperlink:function(a){var b,c;a||(a=this.hyperlinkUnderCursor());if(a){b=this._cursor.getPosition();c=a.startPosition();
var d=this._textNodeService.createTextNodeForPosition("",c);c=this._internalDocument.insertAtPosition(d,c);c=c.insertedRange.getStartPosition();d=this._internalDocument.removeChildren(a);this._internalDocument.deleteNode(a,c);this._internalDocument.insertAtPosition(d,c);this._cursor.setPosition(b)}},_openHyperlink:function(){var a;if(a=this.hyperlinkUnderCursor())a=a.hyperlink,this._hyperlinkService.openUrl(a)},performEditAction:function(b){a.assert(b,"Hyperlink.performEditAction called without linkData!");
var c=this._cursor.getNode().rootContainer(),d=this._internalDocument.getLineNumber(c),c=this._document.startEdit(),e=[],f=[];if(""===b.targetUrl||!b.displayText)this._removeHyperlink(b.nodeBeingEdited),e=f=[n.create(d,d)];else if(b.nodeBeingEdited)e=this._cursor.position.getNode().offsetInContainer(b.nodeBeingEdited)+this._cursor.position.getOffset(),this._cursor.collapseSelection(),this._replaceDisplayText(b.nodeBeingEdited,b.displayText),e>b.displayText.length&&(e=b.displayText.length),this._internalDocument.changeNodeAttributes(b.nodeBeingEdited,
{hyperlink:b.targetUrl}),this._cursor.setPosition(b.nodeBeingEdited.children[0],e),e=f=[n.create(d,d)];else{d=this._cursor.hasSelection();f=this._cursor.selectionInfo();b=this._buildHyperlink(b);var g=new p(f.endNode,f.endPos),h=this._internalDocument.insertAtPosition(b,g),e=e.concat(h.events),g=b.rootContainer()!==g.node.rootContainer();d&&!g&&this._internalDocument.deleteSelection(f);this._cursor.releaseAnchor(!0);d&&(this._cursor.releaseAnchor(!0),this._cursor.setPosition(b,0),this._cursor.fixAnchor());
this._cursor.setPosition(b,-1);b=k.finalLineRangeFromEvents(e);f=[l.create(b.startLine,b.endLine)]}c.appendUndoEvents(f);c.appendRedoEvents(e);this._document.endEdit();this._internalDocument.emitDocumentEvents(e);this._cursor.onUpdate()},_replaceDisplayText:function(a,b){this._internalDocument.removeChildren(a,1);this._internalDocument.changeNodeAttributes(a.firstChild(),{text:b})},applyHyperlinkInLineColumn:function(a,b,c,d,e){var f=this._cursor.getLineColumn(),g=f.line,h=f.column;this._cursor.setSelectionLineColumn(c,
d,c,e);this.performEditAction({targetUrl:a,displayText:b,nodeBeingEdited:null});a=e-d-b.length;c===f.line&&0<a&&(h-=a);this._cursor.setLineColumn(g,h)},isAtHyperlink:function(a){return null!==this._getHyperlinkByTextNode(a.getNode())},destroy:function(){this._handles.forEach(function(a){a.remove()});this._handles=[]}})})},"MW/rtc/plugins/hyperlink/HyperlinkEditorProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/hyperlink/HyperlinkEditor","MW/rtc/core/provider/PluginProvider"],function(h,
e,g){return h(g,{requires:function(){return{createInstance:"rtc.actionservice rtc.cursor rtc.richtext.hyperlink rtc.internaldocument rtc.view rtc.eventhandler rtc.richtext.anchor rtc.focusservice".split(" ")}},createInstance:function(d,c,b,a,f,g,h,n){return new e(d,c,b,a,f,g,h,n)}})})},"MW/rtc/plugins/hyperlink/HyperlinkEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on MW/rtc/abstract/AbstractPlugin MW/rtc/RichTextComponentFeatureEnum MW/rtc/model/Selection ./model/DocumentTargetSelector ./view/HyperlinkDialog dojo/i18n!l10n/nls/richtext_actions ./model/HyperlinkNode".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n){return h(c,{_NON_WORD_CHARACTER:"[\\!\u00a7\\$\\%\\\x26\\/\\(\\)\\\x3d\\?\\,\\.\\-_\\:;\\]\\+\\*\\~\x3c\x3e\\|\"'\u00b4`\u00b0# ]",constructor:function(a,b,c,d,f,h,k,l){this._actionService=a;this._cursor=b;this._hyperlink=c;this._internalDocument=d;this._view=f;this._eventHandler=h;this._anchor=k;this._focusService=l;a.loadActions(this._actions());this.own(g.after(this._cursor,"onChange",e.hitch(this,"_updateActions")))},_actions:function(){return[{id:b.HYPERLINK.HYPERLINK_ACTION,
key:"ctrl_k",platformKey:{mac:"meta_k"},enabled:!1,callback:e.hitch(this,"_hyperlinkCallback")},{id:"rtc_general_hyperlink",enabled:!0,contextMenuGroup:"RichText",description:l.generalHyperlink,callback:e.hitch(this,"_generalHyperlinkCallback")}]},_hyperlinkCallback:function(){if(this._actionService.getAction(b.HYPERLINK.HYPERLINK_ACTION).enabled)return this._editHyperlink()},_generalHyperlinkCallback:function(){if(this._actionService.getAction("rtc_general_hyperlink").enabled){var b=this._cursor.getNode(),
c=b instanceof n?b:null;(c=!c&&b.parent instanceof n?b.parent:c)&&this._cursor.setSelection(new a(c.getPositionFromOffset(0),c.getPositionFromOffset(c.maxOffset())));return this._editHyperlink()}},_updateActions:function(){var a=this._canEditHyperlink();this._actionService.updateAction(b.HYPERLINK.HYPERLINK_ACTION,{enabled:a});this._actionService.updateAction("rtc_general_hyperlink",{enabled:a})},_canEditHyperlink:function(){var a;if(!this._cursor||this._cursor.isCursorReadOnly())return!1;a=this._cursor.selectionInfo();
return!a.isInTextContainer||a.fileEndSelected?!1:!0},_editHyperlink:function(){if(!this.dialog&&this._canEditHyperlink()){var a={displayText:"",targetUrl:""};(this._nodeBeingEdited=this._hyperlink.hyperlinkUnderCursor())?(a.displayText=this._nodeBeingEdited.getText(),a.targetUrl=this._nodeBeingEdited.hyperlink):(a.displayText=this._cursor.selectedText(),!a.displayText&&(!this._checkChar(this._cursor.charAtCursor())&&!this._checkChar(this._cursor.charAtCursor(-1)))&&(this._cursor.selectWordUnderCursor(),
a.displayText=this._cursor.selectedText()));this._oldCursorPosition=this._cursor.getPosition();this._oldCursorSelection=this._cursor.getSelection();this._internalDocument.setReadOnly(!0);this._cursor.hideSelection();this._cursor.onChange();this._documentTargetSelector=new f(this._internalDocument,this._view,this._anchor,this._eventHandler);this.dialog=new k(e.hitch(this,this._dlgClose),e.hitch(this,this._dlgAccept),a,this._documentTargetSelector)}},_dlgClose:function(a){this._focusService.setFocus();
this.dialog.destroy();this.dialog=void 0;this._documentTargetSelector.destroy();this._documentTargetSelector=void 0;this._internalDocument.setReadOnly(!1);this._revertCursor()},_dlgAccept:function(a){var b=/^\S*:/;""!==a.targetUrl&&!b.test(a.targetUrl)&&(a.targetUrl="http://"+a.targetUrl);a.nodeBeingEdited=this._nodeBeingEdited;this._nodeBeingEdited=null;this._hyperlink.performEditAction(a);setTimeout(e.hitch(this,function(){this._focusService.setFocus()}),0)},_revertCursor:function(){this._cursor.setPosition(this._oldCursorPosition);
this._cursorSelection&&this._cursor.setSelection(this._oldCursorSelection);this._cursor.showSelection();this._cursor.onChange()},_checkChar:function(a){return null===a||""===a||a.match(this._NON_WORD_CHARACTER)?!0:!1},destroy:function(){this.dialog&&this.dialog.close();this._documentTargetSelector&&this._documentTargetSelector.destroy()}})})},"MW/rtc/plugins/hyperlink/model/DocumentTargetSelector":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect ./HyperlinkUtilities mw-dialogs/ButtonEnum MW/rtc/model/CodeUtilities".split(" "),
function(h,e,g,d,c,b){return h(null,{_CSS_HOVER_STYLE:"internalTargetLine",_CSS_TARGET_SELECTED:"internalTargetLineSelected",constructor:function(a,b,c,d){this._internalDocument=a;this._view=b;this._anchor=c;this._eventhandler=d},enableTargetSelector:function(){this._handler||(this._handler=g.before(this._eventhandler,"onMouseDown",this._handleMouseEvent.bind(this)));this._eventhandler.disableGesture();this._lastSelectedTarget&&this._styleLineOrBlockForNode(this._lastSelectedTarget,this._CSS_TARGET_SELECTED);
this._createHoverClasses()},disableTargetSelector:function(){this._removeHoverClasses();this._removeStyleLineOrBlockForNode(this._lastSelectedTarget,this._CSS_TARGET_SELECTED);this.destroy()},updateSelectedTarget:function(a){this._lastSelectedTarget=d.getNodeForInternalUrl(this._internalDocument.root,a)},getUrlForSelectedTarget:function(){return this._lastSelectedTarget?(this._anchor.createNodeId(this._lastSelectedTarget),d.INTERNAL+this._lastSelectedTarget.anchorId):null},_handleMouseEvent:function(a){var b=
this._view.fixEvent(a),c=this._view.getPositionFromEvent(b);this._view.getClientWidth()-16>=b.layerX&&(this._removeStyleLineOrBlockForNode(this._lastSelectedTarget,this._CSS_TARGET_SELECTED),this._lastSelectedTarget=d.getPossibleTarget(c.getNode().rootContainer()),this._styleLineOrBlockForNode(this._lastSelectedTarget,this._CSS_TARGET_SELECTED),this.onSelectedTargetChange(this._lastSelectedTarget));a.stopPropagation()},onSelectedTargetChange:function(){},_createHoverClasses:function(){this._internalDocument.root.children.forEach(function(a){this._styleLineOrBlockForNode(a,
this._CSS_HOVER_STYLE)},this)},_removeHoverClasses:function(){this._internalDocument.root.children.forEach(function(a){this._removeStyleLineOrBlockForNode(a,this._CSS_HOVER_STYLE);this._removeStyleLineOrBlockForNode(a,this._CSS_TARGET_SELECTED)},this)},_styleLineOrBlockForNode:function(a,c){if(b.isCodeContainer(a))!b.isCodeContainer(a.previousSibling())&&(a.box.parentElement&&a.box.parentElement.parentElement)&&a.box.parentElement.parentElement.classList.add(c);else{var d=this._internalDocument.getLineNumber(a);
this._view.applyClassToLine(d,c)}},_removeStyleLineOrBlockForNode:function(a,c){if(b.isCodeContainer(a))!b.isCodeContainer(a.previousSibling())&&(a.box.parentElement&&a.box.parentElement.parentElement)&&a.box.parentElement.parentElement.classList.remove(c);else{var d=this._internalDocument.getLineNumber(a);this._view.removeClassFromLine(d,c)}},destroy:function(){this._lastSelectedTarget=void 0;this._handler&&(this._handler.remove(),this._handler=void 0);this._eventhandler.enableGesture()}})})},"mw-dialogs/ButtonEnum":function(){define(["dojo/i18n!./l10n/nls/dialog"],
function(h){var e={HELP:"Help",SPL1:"Spl1",SPL2:"Spl2",DO_IT:"DoIt",DONT_DO_IT:"DontDoIt",CANCEL:"Cancel",APPLY:"Apply",REVERT:"Revert"};h={NO_DEFAULT_ACTION:"NoDefaultAction",TYPE:e,HELP:{type:e.HELP,label:h.help,"data-test-id":"HelpButton"},OK:{type:e.DO_IT,label:h.ok,"data-test-id":"OkButton"},YES:{type:e.DO_IT,label:h.yes,"data-test-id":"YesButton"},SUBMIT:{type:e.DO_IT,label:h.submit,"data-test-id":"SubmitButton"},SAVE:{type:e.DO_IT,label:h.save,"data-test-id":"SaveButton"},FIND:{type:e.DO_IT,
label:h.find,"data-test-id":"FindButton"},CREATE:{type:e.DO_IT,label:h.create,"data-test-id":"CreateButton"},DONT_SAVE:{type:e.DONT_DO_IT,label:h.dontSave,"data-test-id":"DontSaveButton"},NO:{type:e.DONT_DO_IT,label:h.no,"data-test-id":"NoButton"},CANCEL:{type:e.CANCEL,label:h.cancel,"data-test-id":"CancelButton"},CLOSE:{type:e.CANCEL,label:h.close,"data-test-id":"CloseButton"},APPLY:{type:e.APPLY,label:h.apply,"data-test-id":"ApplyButton"},REVERT:{type:e.REVERT,label:h.revert,"data-test-id":"RevertButton"}};
Object.freeze(h);Object.freeze(e);return h})},"MW/rtc/plugins/hyperlink/view/HyperlinkDialog":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/aspect dojo/keys dojo/on mw-dialogs/ButtonEnum mw-dialogs/Dialogs mw-menu/RadioButtonMenuItem mw-form/TextField ../model/HyperlinkUtilities dojo/i18n!l10n/nls/hyperlinkDialog dojo/text!./HyperlinkDialogTemplate.html".split(" "),function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r){return d([e,
h,g],{_DIALOG_HEIGHT:"235px",_DIALOG_MIN_WIDTH:"205px",_DIALOG_WIDTH:"300px",_DIALOG_LEFT:37,_DIALOG_TOP:50,_DIALOG_ELEMENT_WIDTH:"100%",_DONE_TYPING_INTERVAL:500,templateString:r,widgetsInTemplate:!0,constructor:function(a,d,e,f){this._acceptCallBack=d;this._closeCallBack=a;this._displayText=e.displayText;this._dialogTitle=(this._targetUrl=e.targetUrl)?q.editTitle:q.createTitle;this._documentTargetSelector=f;this.own(b.after(this._documentTargetSelector,"onSelectedTargetChange",c.hitch(this,"_selectTargetCallback"),
!0))},postCreate:function(){this.inherited(arguments);this._hyperlinkDialogWidget=l.createDialog({title:this._dialogTitle,content:this,buttons:[k.OK,k.CANCEL,{type:k.REVERT.type,label:q.remove,"data-test-id":k.REVERT["data-test-id"]}],dialogType:l.MODAL,draggable:!0});this._createTextFields();this._createRadioButtons();this._updateTarget();this.displayTextLabel.innerHTML=q.displayText;this.urlTextLabel.innerHTML=q.targetURL;this.internalTextLabel.innerText=q.internalDescription;this._hyperlinkDialogWidget.addButtonEventListener(k.OK,
c.hitch(this,"_handleOK"),!1);this._hyperlinkDialogWidget.addButtonEventListener(k.CANCEL,c.hitch(this,"_handleCancel"),!1);this._hyperlinkDialogWidget.addButtonEventListener(k.REVERT,c.hitch(this,"_handleRemove"),!1);this._hyperlinkDialogWidget.on("close",c.hitch(this,"_handleClose"));this._hyperlinkDialogWidget.domNode.style.height=this._DIALOG_HEIGHT;this._hyperlinkDialogWidget.domNode.style.minWidth=this._DIALOG_MIN_WIDTH;this._hyperlinkDialogWidget.domNode.style.width=this._DIALOG_WIDTH;this._hyperlinkDialogWidget.domNode.style.top=
parseInt(this._hyperlinkDialogWidget.domNode.style.top,10)-this._DIALOG_LEFT+"px";this._hyperlinkDialogWidget.domNode.style.left=parseInt(this._hyperlinkDialogWidget.domNode.style.left,10)+this._DIALOG_TOP+"px";this._hyperlinkDialogWidget._contentArea.style.overflow="unset";this._targetUrl||this._hyperlinkDialogWidget.disableButton(k.REVERT);this._hyperlinkDialogWidget.disableButton(k.OK);this.underlay=this._hyperlinkDialogWidget._underlay;0===this._targetUrl.indexOf(m.INTERNAL)&&(this._onChangeInternalRadio(!0),
this._onChangeExternalRadio(!1))},_selectTargetCallback:function(){this.urlTextInput.setValueInDom(q.internalLinkText);this._hyperlinkDialogWidget.enableButton(k.OK)},_updateTarget:function(){0===this._targetUrl.indexOf(m.INTERNAL)?(this._documentTargetSelector.updateSelectedTarget(this._targetUrl),this.urlTextInput.setValueInDom(q.internalLinkText)):this.urlTextInput.setValueInDom(this._targetUrl)},_createTextFields:function(){this.urlTextInput=new p({placeholder:q.defaultUrl});this.urlTextInput.placeAt(this._hyperlinkDialogWidget.domNode.querySelector(".hyperlinkUrlInput"));
this.urlTextInput.on("onkeyup",c.hitch(this,"onTextKeyup"));this.urlTextInput.startup();this.urlTextInput.domNode.style.width=this._DIALOG_ELEMENT_WIDTH;setTimeout(function(){this.urlTextInput.inputNode.focus()}.bind(this),0);this.displayTextInput=new p({placeholder:q.mathworksPlaceholder,value:this._displayText});this.displayTextInput.placeAt(this._hyperlinkDialogWidget.domNode.querySelector(".hyperlinkTextInput"));this.displayTextInput.on("onkeyup",c.hitch(this,"onTextKeyup"));this.displayTextInput.startup();
this.displayTextInput.domNode.style.width=this._DIALOG_ELEMENT_WIDTH},_createRadioButtons:function(){var a=this._hyperlinkDialogWidget.domNode.id;this.radioButtonExternalURL=new n({text:q.external,buttonGroup:"radioButtonGroup"+a,checked:!0});this.radioButtonExternalURL.placeAt(this._hyperlinkDialogWidget.domNode.querySelector(".toggleRadioButtonExternalURL"));this.radioButtonExternalURL.on("change",function(a){this.radioButtonInternalHyperlink.get("checked")&&(this._onChangeExternalRadio(!0),this._onChangeInternalRadio(!1))}.bind(this));
this.radioButtonExternalURL.startup();this.radioButtonExternalURL.focusNode.focus=function(){};this.radioButtonInternalHyperlink=new n({text:q.internal,buttonGroup:"radioButtonGroup"+a});this.radioButtonInternalHyperlink.placeAt(this._hyperlinkDialogWidget.domNode.querySelector(".toggleRadioButtonInternalHyperlink"));this.radioButtonInternalHyperlink.on("change",function(a){this.radioButtonExternalURL.get("checked")&&(this._onChangeExternalRadio(!1),this._onChangeInternalRadio(!0))}.bind(this));this.radioButtonInternalHyperlink.startup();
this.radioButtonInternalHyperlink.focusNode.focus=function(){}},_onChangeInternalRadio:function(a){this.radioButtonInternalHyperlink.set("checked",a);a&&(this.targetUrlTable.hidden=!0,this.targetInternalHyperlinkTable.hidden=!1,this.underlay.style.display="none",this._documentTargetSelector.enableTargetSelector(),this._hyperlinkDialogWidget.disableButton(k.OK))},_onChangeExternalRadio:function(a){this.radioButtonExternalURL.set("checked",a);a&&(this.targetUrlTable.hidden=!1,this.targetInternalHyperlinkTable.hidden=
!0,this.underlay.style.display="block",this.underlay.style.opacity="",this._documentTargetSelector.disableTargetSelector(),this.urlTextInput.inputNode.value="",this.urlTextInput.inputNode.focus(),this.onTextKeyup());this._hyperlinkDialogWidget.disableButton(k.OK)},onTextKeyup:function(b){clearTimeout(this._timeout);this._timeout=setTimeout(function(){var c=this.displayTextInput.inputNode.value,d=this.urlTextInput.inputNode.value;this.radioButtonExternalURL.get("checked")&&(""===d?(this.urlTextInput.set("validationState",
"warning"),this.urlTextInput.set("warningText",q.emptyURL),this._hyperlinkDialogWidget.disableButton(k.OK)):!m.isHyperlinkValid(d)&&!this._documentTargetSelector.getUrlForSelectedTarget()?(this.urlTextInput.set("validationState","error"),this.urlTextInput.set("errorText",q.wrongURL),this._hyperlinkDialogWidget.disableButton(k.OK)):(this.urlTextInput.set("validationState","normal"),this._hyperlinkDialogWidget.enableButton(k.OK),b.keyCode===a.ENTER&&("text"===b.target.type&&c&&d)&&this._handleOK()))}.bind(this),
this._DONE_TYPING_INTERVAL)},_handleRemove:function(){this._targetUrl="";this._finalize()},_handleCancel:function(){this._hyperlinkDialogWidget.close()},_handleOK:function(){var a=this._documentTargetSelector.getUrlForSelectedTarget();if(a)this._targetUrl=a;else if(this._targetUrl=this.urlTextInput.inputNode.value,!m.isHyperlinkValid(this._targetUrl))return;this._finalize()},_finalize:function(){var a=this.displayTextInput.inputNode.value?this.displayTextInput.inputNode.value:this._targetUrl;0===
a.indexOf(m.INTERNAL)&&(a=q.internalLinkText);a={displayText:a,targetUrl:this._targetUrl};this._hyperlinkDialogWidget.close();this._acceptCallBack(a)},_handleClose:function(){this._documentTargetSelector.disableTargetSelector();clearTimeout(this._timeout);this._closeCallBack()},close:function(){this._hyperlinkDialogWidget.close()}})})},"mw-dialogs/Dialogs":function(){define(["dojo/_base/lang","dojo/keys","dojo/on","mw-dialogs/view/Dialog","mw-utils/Utils"],function(h,e,g,d,c){return{MODAL:"modal",
MODELESS:"modeless",createDialog:function(b){b.id=b.id?b.id:"dialog_"+c.generateUuid();b.className="string"===typeof b.className?h.trim(b.className):"";b.dialogType="modal"===b.dialogType?"modal":"modeless";b.hideCloseButton="boolean"===typeof b.hideCloseButton?b.hideCloseButton:!1;b.closeOnEscape="boolean"===typeof b.closeOnEscape?b.closeOnEscape:!0;b.resizable="boolean"===typeof b.resizable?b.resizable:!1;b.draggable="boolean"===typeof b.draggable?b.draggable:"modeless"===b.dialogType;return new d(b)}}})},
"mw-dialogs/view/Dialog":function(){var h=function(){function e(e,d){for(var c=0;c<d.length;c++){var b=d[c];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(e,b.key,b)}}return function(g,d,c){d&&e(g.prototype,d);c&&e(g,c);return g}}();define("dojo/dom-attr dojo/dom-class dojo/dom-style dojo/has dojo/keys dojo/on dojo/touch mw-dialogs/controller/DialogController mw-dialogs/controller/Draggable mw-dialogs/controller/Resizable mw-dialogs/controller/Focus mw-dialogs/controller/stopEvent mw-dialogs/view/ButtonBar mw-dialogs/view/ContentWidget mw-dialogs/utils/preventShortCutKeys".split(" "),
function(e,g,d,c,b,a,f,k,l,n,p,m,q,r,s){var t=function(b){return a(b,!c("mozilla")?"mousewheel":"DOMMouseScroll",function(a){var c="DOMMouseScroll"===a.type?-40*a.detail:a.wheelDelta,d=0<c;!d&&-c>b.scrollHeight-b.clientHeight-b.scrollTop?(b.scrollTop=b.scrollHeight,m(a)):d&&c>b.scrollTop&&(b.scrollTop=0,m(a))})},u=function(){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this._eventSignals=[];this.domNode=this._createDomNodes(a.id);this.domNode.widget=
this;this._buildDialog(a);this._renderDialog(a.title);this._show();return this}h(c,[{key:"addButtonEventListener",value:function(a,b,c){q.addButtonEventListener(this,a,b,c)}},{key:"enableButton",value:function(a){q.enableButton(this,a)}},{key:"disableButton",value:function(a){q.disableButton(this,a)}},{key:"on",value:function(b,c){var d=a(this.domNode,b,c);this._eventSignals.push(d)}},{key:"close",value:function(){a.emit(this.domNode,"close",{bubbles:!1,cancelable:!0});a.emit(this.domNode,"restorefocus",
{bubbles:!0});this.destroy()}},{key:"destroy",value:function(){this._isModal?this._allModalDialogs.splice(this._allModalDialogs.indexOf(this),1):this._allModelessDialogs.splice(this._allModelessDialogs.indexOf(this),1);this._focusHandle&&this._focusHandle.unwatch();this._eventSignals.forEach(function(a){a.remove()});this._eventSignals=[];var a=void 0;for(a in this._buttonEventHandlers)this._buttonEventHandlers[a].remove();this._buttonEventHandlers={};this._resizeEventSignals&&n.disable(this);this._contentWidget&&
this._contentWidget.destroyRecursive();document.body.removeChild(this.domNode);if(!0===this._isModal){document.body.removeChild(this._underlay);var b=this._allModalDialogs;1<b.length&&b.sort(function(a,b){return a.domNode.style.zIndex-b.domNode.style.zIndex});1<=b.length&&(b[b.length-1]._underlay.style.opacity=1)}for(a in this)this.hasOwnProperty(a)&&delete this[a]}},{key:"moveTo",value:function(a){k.moveTo(this,a)}},{key:"bringToTop",value:function(){var a=[],b=this;if(this._isModal)a=this._allModalDialogs.filter(function(a){return a!==
b},this),a.sort(function(a,b){return a.domNode.style.zIndex-b.domNode.style.zIndex}),a.push(this),a.forEach(function(c,d){c.domNode.style.zIndex=b._startZ+2*d;c._underlay.style.zIndex=c.domNode.style.zIndex-1;d!==a.length-1&&(c._underlay.style.opacity=0);g.remove(c.domNode,"mwModalDialogFg")},this),g.add(this.domNode,"mwModalDialogFg");else{var a=this._allModelessDialogs.filter(function(a){return a!==b},this),c=document.getElementsByClassName("mwNonModalDialog");0<c.length&&(c=Array.prototype.slice.call(c),
c=c.map(function(a){return{domNode:a}}),a=a.concat(c));a.sort(function(a,b){return a.domNode.style.zIndex-b.domNode.style.zIndex});a.push(this);a.forEach(function(a,d){a.domNode.style.zIndex=b._startZ+2*d;g.remove(a.domNode,"mwModelessDialogFg");0<c.length&&g.remove(a.domNode,"dojoxFloatingPaneFg")},this);g.add(this.domNode,"mwModelessDialogFg")}}},{key:"_show",value:function(){d.set(this.domNode,"visibility","visible");this.moveTo(this._specifiedPosition);p.focus(this);this._contentWidget&&this._contentWidget.startup();
a.emit(this.domNode,"show",{bubbles:!1,cancelable:!0})}},{key:"_trackEventListener",value:function(a){this._eventSignals.push(a);return a}},{key:"_removeEventListener",value:function(a){var b=this._eventSignals.indexOf(a);-1<b&&(this._eventSignals.splice(b,1),a.remove())}},{key:"_createDomNodes",value:function(a){var b=document.createElement("div");b.id=a;b.className="mwDialog";b.tabIndex=0;a=this._titleBar=document.createElement("div");a.className="mwDialogTitleBar";e.set(a,"data-test-id","dialog-title-bar");
var c=this._titleBar._titleNode=document.createElement("span");c.className="mwTitleNode";e.set(c,"data-test-id","dialog-title-node");var d=this._contentArea=document.createElement("div");d.className="mwDialogBody";e.set(d,"data-test-id","dialog-content-area");a.appendChild(c);b.appendChild(a);b.appendChild(d);return b}},{key:"_buildDialog",value:function(c){var d=this;this.domNode.setAttribute("data-focus","temporary");c.className&&g.add(this.domNode,c.className);if(!c.hideCloseButton){var f=this._titleBar.closeNode=
document.createElement("span");f.className="mwCloseNode";e.set(f,"data-test-id","dialog-close-node");this._titleBar.appendChild(f);this._trackEventListener(a(f,"click",function(){d.close()}))}if(c.closeOnEscape)this.on("keydown",function(a){a.keyCode===b.ESCAPE&&(d.close(),m(a))});c.content&&(this._contentWidget=new r({widget:c.content,contentArea:this._contentArea}),k.selectionWithinDialogBounds(this));c.buttons&&Array.isArray(c.buttons)&&0<c.buttons.length?(f=q.createButtonBar(this,c.buttons,c.defaultActionButton),
this.domNode.appendChild(f)):g.add(this._contentArea,"mwNoButtons");"modal"===c.dialogType?(this._isModal=!0,this._startZ=this._modalDialogBeginZIndex,g.add(this.domNode,"mwModalDialog"),f=document.createElement("div"),f.className="mwUnderlay",document.body.appendChild(f),this._underlay=f,s.prevent(this)):(this._startZ=this._modelessDialogBeginZIndex,g.add(this.domNode,"mwModelessDialog"));c["data-test-id"]&&e.set(this.domNode,"data-test-id",c["data-test-id"]);c.bindingNode&&(this._bindingNode=c.bindingNode);
c.position&&(this._specifiedPosition=c.position);c.specifiedFocusItem&&(this.specifiedFocusItem=c.specifiedFocusItem);this._addControllers(c)}},{key:"_renderDialog",value:function(a){document.body.appendChild(this.domNode);this._isModal?this._allModalDialogs.push(this):this._allModelessDialogs.push(this);this._buttonBar&&d.get(this.domNode,"min-width")<this._buttonBar._buttonBarWidth&&d.set(this.domNode,"min-width",this._buttonBar._buttonBarWidth+"px");d.get(this.domNode,"width")>document.documentElement.clientWidth?
d.set(this.domNode,"width",document.documentElement.clientWidth+"px"):d.set(this.domNode,"width",d.get(this.domNode,"width")+"px");d.get(this.domNode,"height")>document.documentElement.clientHeight?d.set(this.domNode,"height",document.documentElement.clientHeight+"px"):d.set(this.domNode,"height",d.get(this.domNode,"height")+"px");this.title=a}},{key:"_addControllers",value:function(b){var c=this,d=this;this._scrollWheelListener=null;b.draggable?l.draggable({dialog:this,bindingNode:this._bindingNode}):
this._titleBar.style.cursor="default";b.resizable&&(n.enable({widget:this,bindingNode:this._bindingNode}),this._resizeHandlers.forEach(function(b){d._resizeEventSignals.push(a(b,f.press,function(){d.bringToTop()}))}),this._resizeEventSignals.push(a(this.domNode,n.resizeEvent,function(a){d._isCenter=!1;d._specifiedPosition={x:a.dimension.x,y:a.dimension.y};d._resolveScrollBar();d._titleBar._titleNode.title=d._titleBar._titleNode.offsetWidth<d._titleBar._titleNode.scrollWidth?d.title:"";d._contentArea.scrollHeight>
d._contentArea.clientHeight?g.add(c._contentArea,"mwOverflow"):g.remove(c._contentArea,"mwOverflow")})));this.on(f.press,function(){d.bringToTop()});this._resolveScrollBar();k.addScrollHandler(this);k.addBrowserResizeHandler(this)}},{key:"_resolveScrollBar",value:function(){0<this._contentArea.scrollHeight-this._contentArea.clientHeight?(0<this._contentArea.offsetWidth-this._contentArea.scrollWidth&&d.set(this._contentArea,"padding-right",this._standardContentPadding-(this._contentArea.offsetWidth-
this._contentArea.scrollWidth)+"px"),this._scrollWheelListener||(this._scrollWheelListener=this._trackEventListener(t(this._contentArea)))):(d.set(this._contentArea,"padding-right",this._standardContentPadding+"px"),this._scrollWheelListener&&(this._removeEventListener(this._scrollWheelListener),this._scrollWheelListener=null))}},{key:"title",set:function(a){this._titleText="";a&&"string"===typeof a&&(this._titleText=a);this._titleBar._titleNode.textContent=this._titleText;this._titleBar._titleNode.offsetWidth<
this._titleBar._titleNode.scrollWidth&&(this._titleBar._titleNode.title=this._titleText)},get:function(){return this._titleText}}]);return c}();u.prototype._modalDialogBeginZIndex=950;u.prototype._modelessDialogBeginZIndex=100;u.prototype._standardContentPadding=20;u.prototype._allModalDialogs=[];u.prototype._allModelessDialogs=[];return u})},"mw-dialogs/controller/DialogController":function(){var h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&
"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};define(["dojo/dom-geometry","dojo/on","dojo/window","./stopEvent"],function(e,g,d,c){var b=function(a,b,c,d,e){var f={};e?(f.l=Math.max(e.x,Math.min(e.x+b.x,e.x+e.w-c.w)),f.t=Math.max(e.y,Math.min(e.y+b.y,e.y+e.h-c.h)),a._specifiedPosition={x:f.l-e.x,y:f.t-e.y}):(f.l=Math.max(0,Math.min(b.x,d.w-c.w)),f.t=Math.max(0,Math.min(b.y,d.h-c.h)),a._specifiedPosition={x:f.l,y:f.t});a._isCenter=!1;return f},a=function(a,
b,c,d,e){b={};e?(b.l=c.w>=e.x+e.w||c.w>=d.w-e.x||c.w>=e.w?Math.max(0,e.x):(0<=e.x?e.x:0)+(e.x+e.w<=d.w?e.w/2:(d.w-e.x)/2)-c.w/2,b.t=c.h>=e.y+e.h||c.h>=d.h-e.y||c.h>=e.h?Math.max(0,e.y):(0<=e.y?e.y:0)+(e.y+e.h<=d.h?e.h/2:(d.h-e.y)/2)-c.h/2):(b.l=Math.max(0,d.w/2-c.w/2),b.t=Math.max(0,d.h/2-c.h/2));a._isCenter=!0;return b},f=function(a,b,c,d,e,f,g){a={};g?(a.l=Math.max(g.x,Math.min(b.x-c+d,g.x+g.w-b.w)),a.t=Math.max(g.y,Math.min(b.y-e+f,g.y+g.h-b.h))):(a.l=b.x,a.t=b.y);return a},k=function(a,b,c,d){var e=
{};d?a._isCenter?(e.l=Math.max(0,Math.max(d.x,Math.min(c.w-b.w,Math.min(d.x+d.w/2-b.w/2,d.x+d.w-b.w)))),e.t=Math.max(0,Math.max(d.y,Math.min(c.h-b.h,Math.min(d.y+d.h/2-b.h/2,d.y+d.h-b.h))))):(e.l=Math.max(0,Math.max(d.x,Math.min(c.w-b.w,Math.min(a._specifiedPosition.x+d.x,d.x+d.w-b.w)))),e.t=Math.max(0,Math.max(d.y,Math.min(c.h-b.h,Math.min(a._specifiedPosition.y+d.y,d.y+d.h-b.h))))):a._isCenter?(e.l=Math.max(0,Math.min(c.w/2-b.w/2,c.w-b.w)),e.t=Math.max(0,Math.min(c.h/2-b.h/2,c.h-b.h))):(e.l=Math.max(0,
Math.min(a._specifiedPosition.x,c.w-b.w)),e.t=Math.max(0,Math.min(a._specifiedPosition.y,c.h-b.h)));return e};return{moveTo:function(c,f){var g=e.position(c.domNode),k={},k=d.getBox();if("object"===h(c._bindingNode))var q=e.position(c._bindingNode),k=f?b(c,f,g,k,q):a(c,f,g,k,q);else k=f?b(c,f,g,k):a(c,f,g,k);c.domNode.style.left=k.l+"px";c.domNode.style.top=k.t+"px"},addScrollHandler:function(a){var b=window.pageYOffset,c=window.pageXOffset;a._trackEventListener(g(document,"scroll",function(){var d=
window.pageYOffset,g=window.pageXOffset,k=e.position(a.domNode),s={};"object"===h(a._bindingNode)?(s=e.position(a._bindingNode),s=f(a,k,g,c,d,b,s)):s=f(a,k,g,c,d,b);a.domNode.style.left=s.l+"px";a.domNode.style.top=s.t+"px";b=d;c=g}))},addBrowserResizeHandler:function(a){a._trackEventListener(g(window,"resize",function(){var b=e.position(a.domNode),c=d.getBox(),f={};"object"===h(a._bindingNode)?(f=e.position(a._bindingNode),f=k(a,b,c,f)):f=k(a,b,c);a.domNode.style.left=f.l+"px";a.domNode.style.top=
f.t+"px"}))},selectionWithinDialogBounds:function(a){var b=void 0;a._trackEventListener(g(document,"mousedown",function(c){c.target===a._contentWidget.domNode&&(b=!0)}));a._trackEventListener(g(document,"mouseup",function(){b=!1}));a._trackEventListener(g(document,"mousemove",function(d){b&&d.target!==a._contentWidget.domNode&&c(d)}))}}})},"mw-dialogs/controller/stopEvent":function(){define([],function(){return function(h){h.stopPropagation();h.preventDefault();return!1}})},"mw-dialogs/controller/Draggable":function(){var h=
"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};define(["dojo/dom-geometry","dojo/on","dojo/window","./stopEvent"],function(e,g,d,c){var b=function(a,b,c,d,e,g){var h={};g?(h.t=e.yLocked?a.y:Math.max(0,Math.max(g.y,Math.min(b.h-a.h,Math.min(c.pageY-d.y,g.y+g.h-a.h)))),h.l=e.xLocked?a.x:Math.max(0,Math.max(g.x,Math.min(b.w-a.w,Math.min(c.pageX-
d.x,g.x+g.w-a.w))))):(h.l=Math.max(0,Math.min(c.pageX-d.x,b.w-a.w)),h.t=Math.max(0,Math.min(c.pageY-d.y,b.h-a.h)));return h};return{dragEvent:"move",draggable:function(a){var f=this,k=a.dialog,l=a.bindingNode,n=k._titleBar,p=!1,m={x:0,y:0},q={l:0,t:0},r={xLocked:!1,yLocked:!1},s=void 0,t=void 0,u=void 0;(function(){k._trackEventListener(g(n,"mousedown",function(a){k.bringToTop();if(0===a.button&&a.target!==n.closeNode){c(a);p=!0;t=d.getBox();s=e.position(k.domNode);if("object"===("undefined"===typeof l?
"undefined":h(l)))u=e.position(l),r.xLocked=s.w>=u.x+u.w||s.w>=t.w-u.x||s.w>=u.w,r.yLocked=s.h>=u.y+u.h||s.h>=t.h-u.y||s.h>=u.h;m.x=a.pageX-s.x;m.y=a.pageY-s.y}}));k._trackEventListener(g(document,"mouseup",function(a){c(a);p=!1}));k._trackEventListener(g(document,"mousemove",function(a){p&&(c(a),s=e.position(k.domNode),"object"===("undefined"===typeof l?"undefined":h(l))?(q=b(s,t,a,m,r,u),k._specifiedPosition={x:q.l-u.x,y:q.t-u.y}):(q=b(s,t,a,m),k._specifiedPosition={x:q.l,y:q.t}),k.domNode.style.left=
q.l+"px",k.domNode.style.top=q.t+"px",k._isCenter=!1,g.emit(k.domNode,f.dragEvent,{bubbles:!1,position:{x:q.l,y:q.t}}))}))})()}}})},"mw-dialogs/controller/Resizable":function(){var h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};define("dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/on dojo/query dojo/window ./stopEvent".split(" "),
function(e,g,d,c,b,a,f,k){var l=function(a,b,d,e,f,g){var h=void 0;return h=g?Math.max(c.get(a.domNode,"min-width"),Math.min(f.w-b.x,Math.min(d.pageX-e.x-b.x,Math.min(c.get(a.domNode,"max-width")?c.get(a.domNode,"max-width"):g.w+g.x-b.x,g.w+g.x-b.x)))):Math.max(c.get(a.domNode,"min-width"),Math.min(d.pageX-e.x-b.x,Math.min(c.get(a.domNode,"max-width")?c.get(a.domNode,"max-width"):f.w-b.x,f.w-b.x)))},n=function(a,b,d,e,f,g){f=void 0;return f=g?Math.max(c.get(a.domNode,"min-width"),Math.min(b.x+b.w,
Math.min(b.x+b.w-(d.pageX-e.x),Math.min(c.get(a.domNode,"max-width")?c.get(a.domNode,"max-width"):b.x+b.w-g.x,b.x+b.w-g.x)))):Math.max(c.get(a.domNode,"min-width"),Math.min(b.x+b.w-(d.pageX-e.x),Math.min(c.get(a.domNode,"max-width")?c.get(a.domNode,"max-width"):b.x+b.w,b.x+b.w)))},p=function(a,b,d,e,f,g){var h=void 0;return h=g?Math.max(c.get(a.domNode,"min-height"),Math.min(f.h-b.y,Math.min(d.pageY-e.y-b.y,Math.min(c.get(a.domNode,"max-height")?c.get(a.domNode,"max-height"):g.h+g.y-b.y,g.h+g.y-b.y)))):
Math.max(c.get(a.domNode,"min-height"),Math.min(d.pageY-e.y-b.y,Math.min(c.get(a.domNode,"max-height")?c.get(a.domNode,"max-height"):f.h-b.y,f.h-b.y)))},m=function(a,b,d,e,f,g){f=void 0;return f=g?Math.max(c.get(a.domNode,"min-height"),Math.min(b.y+b.h,Math.min(b.y+b.h-(d.pageY-e.y),Math.min(c.get(a.domNode,"max-height")?c.get(a.domNode,"max-height"):b.y+b.h-g.y,b.y+b.h-g.y)))):Math.max(c.get(a.domNode,"min-height"),Math.min(b.y+b.h-(d.pageY-e.y),Math.min(c.get(a.domNode,"max-height")?c.get(a.domNode,
"max-height"):b.y+b.h,b.y+b.h)))},q=function(a,c,e,f,g,q,x,A){k(e);var B,F,G,H;"object"===("undefined"===typeof q?"undefined":h(q))?(q=d.position(q),"e"===x?B=l(a,c,e,f,g,q):"w"===x&&(B=n(a,c,e,f,g,q)),"s"===A?F=p(a,c,e,f,g,q):"n"===A&&(F=m(a,c,e,f,g,q))):("e"===x?B=l(a,c,e,f,g):"w"===x&&(B=n(a,c,e,f,g)),"s"===A?F=p(a,c,e,f,g):"n"===A&&(F=m(a,c,e,f,g)));"w"===x&&(G=c.x+c.w-B);"n"===A&&(H=c.y+c.h-F);e={};f=void 0;if("e"===x||"w"===x)a.domNode.style.width=B+"px";"w"===x&&(a.domNode.style.left=G+"px");
if("s"===A||"n"===A)a.domNode.style.height=F+"px";"n"===A&&(a.domNode.style.top=H+"px");c=d.position(a.domNode);a._contentArea&&(f=d.position(a._contentArea),e={w:f.w,h:f.h});b.emit(a.domNode,"resize",{bubbles:!1,dimension:c,contentSize:e})};return{resizeEvent:"resize",enable:function(c){var h=c.widget,l=c.bindingNode;h._resizeEventSignals=[];var n=void 0,m=void 0,p={x:0,y:0};(function(){var c=!1,r=!1,B=!1,F=!1,G=!1,H=!1,I=!1,K=!1;h._resizeHandlers=[];var C=document.createElement("div");e.add(C,"mwResizableHandle mwResizable-e");
g.place(C,h.domNode,"last");h._resizeHandlers.push(C);var M=document.createElement("div");e.add(M,"mwResizableHandle mwResizable-s");g.place(M,h.domNode,"last");h._resizeHandlers.push(M);var Q=document.createElement("div");e.add(Q,"mwResizableHandle mwResizable-w");g.place(Q,h.domNode,"last");h._resizeHandlers.push(Q);var L=document.createElement("div");e.add(L,"mwResizableHandle mwResizable-n");g.place(L,h.domNode,"last");h._resizeHandlers.push(L);var N=document.createElement("div");e.add(N,"mwResizableHandle mwResizable-se");
g.place(N,h.domNode,"last");h._resizeHandlers.push(N);var J=document.createElement("div");e.add(J,"mwResizableHandle mwResizable-ne");g.place(J,h.domNode,"last");h._resizeHandlers.push(J);var O=document.createElement("div");e.add(O,"mwResizableHandle mwResizable-sw");g.place(O,h.domNode,"last");h._resizeHandlers.push(O);var T=document.createElement("div");e.add(T,"mwResizableHandle mwResizable-nw");g.place(T,h.domNode,"last");h._resizeHandlers.push(T);h._resizeHandlers.forEach(function(e){h._resizeEventSignals.push(b(e,
"mousedown",function(b){0===b.button&&(k(b),n=f.getBox(),m=d.position(h.domNode),e===C?(c=!0,p.x=b.pageX-(m.x+m.w),a("*")[0].style.cursor="ew-resize"):e===M?(r=!0,p.y=b.pageY-(m.y+m.h),a("*")[0].style.cursor="ns-resize"):e===Q?(B=!0,p.x=b.pageX-m.x,a("*")[0].style.cursor="ew-resize"):e===L?(F=!0,p.y=b.pageY-m.y,a("*")[0].style.cursor="ns-resize"):e===N?(G=!0,p.x=b.pageX-(m.x+m.w),p.y=b.pageY-(m.y+m.h),a("*")[0].style.cursor="nwse-resize"):e===J?(H=!0,p.x=b.pageX-(m.x+m.w),p.y=b.pageY-m.y,a("*")[0].style.cursor=
"nesw-resize"):e===O?(I=!0,p.x=b.pageX-m.x,p.y=b.pageY-(m.y+m.h),a("*")[0].style.cursor="nesw-resize"):e===T&&(K=!0,p.x=b.pageX-m.x,p.y=b.pageY-m.y,a("*")[0].style.cursor="nwse-resize"))}))});h._resizeEventSignals.push(b(document,"mouseup",function(){K=I=H=G=F=B=r=c=!1;a("*")[0].style.cursor=""}));h._resizeEventSignals.push(b(document,"mousemove",function(a){c?q(h,m,a,p,n,l,"e"):r?q(h,m,a,p,n,l,null,"s"):B?q(h,m,a,p,n,l,"w"):F?q(h,m,a,p,n,l,null,"n"):G?q(h,m,a,p,n,l,"e","s"):H?q(h,m,a,p,n,l,"e","n"):
I?q(h,m,a,p,n,l,"w","s"):K&&q(h,m,a,p,n,l,"w","n")}))})()},disable:function(a){a._resizeEventSignals.forEach(function(a){a.remove()});a._resizeEventSignals=[];a._resizeHandlers.forEach(function(a){g.destroy(a)});a._resizeHandlers=[]}}})},"mw-dialogs/controller/Focus":function(){define("dojo/on dojo/dom dojo/dom-attr dojo/dom-class dojo/keys dojo/query dijit/a11y dijit/focus mw-log/Log ./stopEvent".split(" "),function(h,e,g,d,c,b,a,f,k,l){return{_activeClass:"active",_focusedClass:"focused",_defaultButtonClass:"mwDefaultButton",
focus:function(b){var c=this,k=this;b._firstFocusItem=null;b._lastFocusItem=null;this._getFocusItems(b);b._focusHandle=f.watch("curNode",function(c,f,g){null===g?(b._defaultButton&&(d.remove(b._defaultButton,k._defaultButtonClass),d.remove(b._defaultButton,k._activeClass)),f&&d.remove(f,k._activeClass),d.remove(b.domNode,k._focusedClass)):(c=k._isPopupDescendant(g,b._contentArea))&&a.isFocusable(g)?(b._latestFocusedItem=c,d.add(b.domNode,k._focusedClass)):b._contentArea&&e.isDescendant(g,b._contentArea)&&
a.isFocusable(g)?(b._latestFocusedItem=g,b._defaultButton&&d.add(b._defaultButton,k._defaultButtonClass),d.add(b.domNode,k._focusedClass)):b._buttonBar&&e.isDescendant(g,b._buttonBar)&&a.isFocusable(g)?(b._latestFocusedItem=g,b._defaultButton&&d.remove(b._defaultButton,k._defaultButtonClass),d.add(b.domNode,k._focusedClass)):b._firstFocusItem?d.remove(b.domNode,k._focusedClass):(b._latestFocusedItem=g,d.add(b.domNode,k._focusedClass))});this.focusItem(b);b.on("click",function(){c._getFocusItems(b);
b._latestFocusedItem&&b._latestFocusedItem!==b.domNode&&"true"!==g.get(b._latestFocusedItem,"aria-disabled")?f.focus(b._latestFocusedItem):b._firstFocusItem?f.focus(b._firstFocusItem):f.focus(b.domNode)});b._underlay&&b._trackEventListener(h(b._underlay,"click",function(){b._firstFocusItem?f.focus(b._latestFocusedItem):f.focus(b.domNode)}));b._keyDownReady=!1;b.on("keydown",function(a){k._onKeyDown(a,b)});b.on("keyup",function(a){k._onKeyUp(a,b)})},_getFocusItems:function(b){b._firstFocusItem=a.getFirstInTabbingOrder(b.domNode);
b._lastFocusItem=a.getLastInTabbingOrder(b.domNode)||b._firstFocusItem},_isPopupDescendant:function(a,b){try{for(var c=null;a;){if(d.contains(a,"dijitPopup")){var e=g.get(a,"dijitPopupParent");e&&(c=a=document.getElementById(e))}if(a===b)return c;a=a.parentNode}}catch(f){}return!1},focusItem:function(b){if(b.specifiedFocusItem){var c=e.byId(b.specifiedFocusItem);null===c?(k.log("specifiedFocusItem couldn't be found"),this._focusDefaultItem(b)):e.isDescendant(c,b.domNode)?a.isFocusable(c)?f.focus(c):
(c=a.getFirstInTabbingOrder(c),void 0!==c?f.focus(c):(k.log("specifiedFocusItem is not focusable"),this._focusDefaultItem(b))):(k.log("specifiedFocusItem should be an id"),this._focusDefaultItem(b))}else this._focusDefaultItem(b);b.bringToTop()},_focusDefaultItem:function(a){a._firstFocusItem?a._buttonBar&&a._defaultButton&&e.isDescendant(a._firstFocusItem,a._buttonBar)&&a._defaultButton!==a._firstFocusItem&&"true"!==g.get(a._defaultButton,"aria-disabled")?f.focus(a._defaultButton):f.focus(a._firstFocusItem):
f.focus(a.domNode)},_onKeyDown:function(b,g){g._keyDownReady=!0;if(b.keyCode===c.TAB){this._getFocusItems(g);var h=b.target;g._firstFocusItem===g._lastFocusItem?l(b):h===g._firstFocusItem&&b.shiftKey?(f.focus(g._lastFocusItem),l(b)):h===g._lastFocusItem&&!b.shiftKey&&(f.focus(g._firstFocusItem),l(b))}else b.keyCode===c.SPACE?g._buttonBar&&(e.isDescendant(f.curNode,g._buttonBar)&&a.isFocusable(f.curNode))&&(l(b),d.add(f.curNode,"active")):b.keyCode===c.ENTER&&(g._contentArea&&g._defaultButton&&e.isDescendant(f.curNode,
g._contentArea)&&a.isFocusable(f.curNode)&&f.curNode.tagName&&"input"===f.curNode.tagName.toLowerCase()&&"text"===f.curNode.getAttribute("type").toLowerCase()?(l(b),d.add(g._defaultButton,"active")):g._buttonBar&&(e.isDescendant(f.curNode,g._buttonBar)&&a.isFocusable(f.curNode))&&(l(b),d.add(f.curNode,"active")))},_onKeyUp:function(b,g){g._keyDownReady&&(b.keyCode===c.SPACE?g._buttonBar&&(e.isDescendant(f.curNode,g._buttonBar)&&a.isFocusable(f.curNode))&&(d.remove(f.curNode,"active"),l(b),f.curNode.click(b)):
b.keyCode===c.ENTER&&(g._contentArea&&g._defaultButton&&e.isDescendant(f.curNode,g._contentArea)&&a.isFocusable(f.curNode)&&f.curNode.tagName&&"input"===f.curNode.tagName.toLowerCase()&&"text"===f.curNode.getAttribute("type").toLowerCase()?(d.remove(g._defaultButton,"active"),l(b),g._defaultButton.click(b)):g._buttonBar&&(e.isDescendant(f.curNode,g._buttonBar)&&a.isFocusable(f.curNode))&&(d.remove(f.curNode,"active"),l(b),f.curNode.click(b))))}}})},"mw-dialogs/view/ButtonBar":function(){define("dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/on dojo/query mw-dialogs/ButtonEnum mw-log/Log".split(" "),
function(h,e,g,d,c,b,a){function f(a,c,f){var g=document.createElement("div");g.className="mwActionButtonBar";e.set(g,"data-test-id","dialog-action-button-bar");var h=[],k;for(k in q){h[k]=[];for(var n in c)c[n].type===q[k]&&h[k].push(c[n])}c=[];for(var m in h)0!==h[m].length&&c.push(h[m][0]);var h=void 0,p;for(p in c){h=document.createElement("span");h.className="mwButton";h.tabIndex="0";h.textContent=c[p].label;e.set(h,"data-button-type",c[p].type);e.set(h,"aria-disabled","false");c[p]["data-test-id"]&&
e.set(h,"data-test-id",c[p]["data-test-id"]);a._trackEventListener(d(h,"click",l(c[p].type+"ButtonClick",a)));if(f===c[p].type||f===c[p]||void 0===f&&f!==b.NO_DEFAULT_ACTION&&"0"===p)a._defaultButton=h;g.appendChild(h);a._buttonBar._buttonBarWidth+=r}return g}function k(a,b){var c=document.createElement("div");c.className="mwSplButtonBar";e.set(c,"data-test-id","dialog-supplemental-button-bar");var f=void 0,g;for(g in b)f=document.createElement("span"),f.className="mwButton",f.tabIndex="0",f.textContent=
b[g].label,e.set(f,"data-button-type",b[g].type),e.set(f,"aria-disabled","false"),b[g]["data-test-id"]&&e.set(f,"data-test-id",b[g]["data-test-id"]),a._trackEventListener(d(f,"click",l(b[g].type+"ButtonClick",a))),c.appendChild(f),a._buttonBar._buttonBarWidth+=r;return c}function l(a,b){var c=function(){b.close()};return function(){d.emit(b.domNode,a,{bubbles:!1,close:c})}}function n(a,b){return d(a.domNode,b+"ButtonClick",function(c){var d=!1;a._buttonEvents[b].forEach(function(a){"function"===typeof a.func&&
a.func();d=d||a.dismiss});a.domNode&&d&&c.close()})}function p(a){var b="";return b=a.hasOwnProperty("type")?a.type:a}var m=[b.TYPE.HELP,b.TYPE.SPL1,b.TYPE.SPL2],q=[b.TYPE.DO_IT,b.TYPE.DONT_DO_IT,b.TYPE.CANCEL,b.TYPE.APPLY,b.TYPE.REVERT],r=96;return{addButtonEventListener:function(b,c,d,e){try{var f=p(c);void 0===b._buttonEvents[f]&&(b._buttonEvents[f]=[]);b._buttonEvents[f].push({func:d,dismiss:e});b._buttonEventHandlers[f]&&b._buttonEventHandlers[f].remove();b._buttonEventHandlers[f]=n(b,f)}catch(g){a.log("Button or type of button is invalid.")}},
enableButton:function(a,b){var d=p(b);a._buttonEventHandlers[d]&&a._buttonEventHandlers[d].remove();a._buttonEventHandlers[d]=n(a,d);d=c("span[data-button-type\x3d"+d+"]",a._buttonBar)[0];g.remove(d,"mwDisabled");e.set(d,"tabIndex",0);e.set(d,"aria-disabled","false")},disableButton:function(a,b){var d=p(b);a._buttonEventHandlers[d]&&a._buttonEventHandlers[d].remove();d=c("span[data-button-type\x3d"+d+"]",a._buttonBar)[0];g.add(d,"mwDisabled");e.set(d,"tabIndex",-1);e.set(d,"aria-disabled","true")},
createButtonBar:function(a,b,c){var d=a._buttonBar=document.createElement("div");d.className="mwDialogButtonBar";e.set(d,"data-test-id","dialog-button-bar");a._buttonEvents={};a._buttonEventHandlers={};a._buttonBar._buttonBarWidth=10;var h=!1,l=!1,n=[],p=[];b.forEach(function(a){-1!==m.indexOf(a.type)?p.push(a):-1!==q.indexOf(a.type)&&n.push(a)});0<p.length?(l=!0,d.appendChild(k(a,p))):g.add(d,"mwNoSplBtn");0<n.length&&(h=!0,d.appendChild(f(a,n,c)));!0===h&&!0===l&&(a._buttonBar._buttonBarWidth+=
10);return d}}})},"mw-dialogs/view/ContentWidget":function(){var h=function(){function e(e,d){for(var c=0;c<d.length;c++){var b=d[c];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(e,b.key,b)}}return function(g,d,c){d&&e(g.prototype,d);c&&e(g,c);return g}}();define(["dojo/_base/lang","dojo/dom-attr","dojo/dom-construct","dojo/dom-style","mw-dialogs/utils/mixinDijitLifecycleMethods"],function(e,g,d,c,b){return function(){function a(c){if(!(this instanceof
a))throw new TypeError("Cannot call a class as a function");this.widget=c.widget;this.contentArea=c.contentArea;b(this);this._addWidget(this.widget)}h(a,[{key:"_addWidget",value:function(a){if(e.isString(a)){var b=d.create("div");b.className="mwContentMessage";g.set(b,"textContent",a);g.set(b,"data-test-id","dialog-content-widget");c.set(b,"whiteSpace","pre-line");d.place(b,this.contentArea,"first");this.domNode=b}else e.isFunction(a.placeAt)?(g.set(a.domNode,"data-test-id","dialog-content-widget"),
a.placeAt(this.contentArea,"first"),this.domNode=a.domNode):(g.set(a,"data-test-id","dialog-content-widget"),d.place(a,this.contentArea,"first"),this.domNode=a)}}]);return a}()})},"mw-dialogs/utils/mixinDijitLifecycleMethods":function(){define(["dojo/_base/lang"],function(h){return function(e){var g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e.widget,d=function(){};h.isFunction(g.startup)?e.startup=function(){g.startup()}:e.startup=d;h.isFunction(g.destroyRecursive)?e.destroyRecursive=
function(c){g.destroyRecursive(c)}:e.destroyRecursive=d;h.isFunction(g.destroy)?e.destroy=function(c){g.destroy(c)}:e.destroy=d}})},"mw-dialogs/utils/preventShortCutKeys":function(){define([],function(){function h(g){g.metaKey?e(g):0>navigator.platform.toUpperCase().indexOf("MAC")&&g.ctrlKey&&e(g)}function e(e){switch(e.keyCode){case 65:if(e.target.value)e.target.setSelectionRange(0,e.target.value.length);else{var d=e.target,c=void 0,b=void 0;document.body.createTextRange?(c=document.body.createTextRange(),
c.moveToElementText(d),c.select()):window.getSelection&&(b=window.getSelection(),c=document.createRange(),c.selectNodeContents(d),b.removeAllRanges(),b.addRange(c))}e.preventDefault()}}return{prevent:function(e){var d=document.onkeydown;e.on("show",function(){document.body.style.cursor="default";document.onkeydown=h});e.on("close",function(){document.body.style.cursor="initial";document.onkeydown=d})}}})},"MW/rtc/plugins/hyperlink/HTMLHyperlinkElementHandlerProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/hyperlink/HTMLHyperlinkElementHandler"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.cutcopypaste.htmlmimeconverter"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/hyperlink/HTMLHyperlinkElementHandler":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/plugins/hyperlink/model/HyperlinkNode"],function(h,e,g){return h(null,{constructor:function(d){d.registerNodeHandler("A",e.hitch(this,
"_convertHyperlinkNode"))},_convertHyperlinkNode:function(d,c){d.hasAttribute("href")&&c.appendInnerNode(new g([],{hyperlink:d.getAttribute("href")}))}})})},"MW/rtc/plugins/hyperlink/HyperlinkMIMEConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/hyperlink/HyperlinkMIMEConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.cutcopypaste.converter"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/hyperlink/HyperlinkMIMEConverter":function(){define("dojo/_base/declare dojo/_base/lang MW/rtc/model/DocumentUtilities MW/rtc/model/PositionUtilities MW/rtc/plugins/cutcopypaste/MIMETypes MW/rtc/plugins/hyperlink/model/HyperlinkNode".split(" "),
function(h,e,g,d,c,b){return h(null,{constructor:function(a){a.registerNodeConverter(b,e.hitch(this,"_convertFromHyperlinkNode"))},_convertFromHyperlinkNode:function(a){var b=a.getStartPosition();a=a.getEndPosition();return g.isInTextLevelContainer(b.getNode())&&b.getNode().parent===a.getNode().parent&&g.isEdgeOfTextLevelContainer(b.getNode(),b.getOffset())&&g.isEdgeOfTextLevelContainer(a.getNode(),a.getOffset())&&0!==d.comparePositions(b,a)?[{flavor:c.MATLAB_RICHTEXT,content:JSON.stringify([b.getNode().parent.serialize()])}]:
[]}})})},"MW/rtc/plugins/hyperlink/HyperlinkTooltipProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/plugins/hyperlink/HyperlinkTooltip","MW/rtc/core/provider/PluginProvider"],function(h,e,g,d){return h(d,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.eventhandler","rtc.view"]}},createInstance:function(c,b,a){return new g(c,b,a)},destroyInstance:function(c){c.destroy()}})})},"MW/rtc/plugins/hyperlink/HyperlinkTooltip":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-style dojo/has dojo/query MW/rtc/plugins/view/tooltip/Tooltip mw-html-utils/HtmlUtils dojo/i18n!l10n/nls/richtext_actions".split(" "),
function(h,e,g,d,c,b,a,f,k){return h(null,{_LINE_BREAK:"\x3cbr\x3e",constructor:function(b,d,f){this._tooltip=new a(f,b,{timeout:500});this._view=f;this._aspectHandles=[];this._aspectHandles.push(g.after(this._tooltip,"onTooltip",e.hitch(this,"_displayTooltip"),!0));this._aspectHandles.push(g.after(d,"onMouseDown",e.hitch(this,"_onMouseDown"),!0));this._clickHintText=c("mac")?"":k.ctrlClickHint},_onMouseDown:function(a){this._tooltip&&this._tooltip.hideTooltip()},_isActiveWindow:function(){return!!b(".layeredNode").every(function(a){return"none"===
d.get(a,"display")})},_displayTooltip:function(a){if(a&&a.box&&a.parent&&this._isActiveWindow()&&"HyperlinkNode"===a.parent.className){var b=0!==a.parent.hyperlink.indexOf("internal")?a.parent.hyperlink:"",c=(b=b?f.escapeHtml(b):"")&&this._clickHintText?this._LINE_BREAK+this._clickHintText:this._clickHintText;(b||c)&&this._isElementInView(a.box)&&this._tooltip.showTooltip(b+c,{domNode:a.box})}},_isElementInView:function(a){a=a.getBoundingClientRect();var b=this._view.getDomtarget().getBoundingClientRect();
return a.top>=b.top&&a.bottom<=b.bottom},destroy:function(){this._aspectHandles.forEach(function(a){a.remove()});this._aspectHandles=[]}})})},"MW/rtc/plugins/view/tooltip/Tooltip":function(){define("dijit/Destroyable dojo/_base/declare dojo/_base/lang dojo/aspect ./TooltipEventHandler ./view/TooltipView".split(" "),function(h,e,g,d,c,b){return e(h,{constructor:function(a,e,h){this._tooltipView=new b(a);this.own(this._tooltipView);this._tooltipEventHandler=new c(a,h);this.own(d.after(this._tooltipEventHandler,
"onTooltip",g.hitch(this,"_onTooltip"),!0));this.own(d.after(this._tooltipEventHandler,"onHideTooltip",g.hitch(this,"hideTooltip"),!0));this.own(d.after(e,"onDocumentChanged",g.hitch(this,"_handleOnDocumentChanged")));this.own(d.after(a,"onLinesDOMUpdated",g.hitch(this,"_handleOnLinesDOMUpdated"),!0))},onTooltip:function(a,b){},_onTooltip:function(a,b){!a.rteNode&&a.parentNode&&a.parentNode.rteNode&&(a=a.parentNode);this.onTooltip(a.rteNode||null,b)},showTooltip:function(){this._tooltipView.show.apply(this._tooltipView,
arguments)},hideTooltip:function(){this._tooltipView.hide()},_handleOnDocumentChanged:function(){this.clearTooltip(!1)},_handleOnLinesDOMUpdated:function(a,b,c){this.clearTooltip(c)},clearTooltip:function(a){a||(this._tooltipEventHandler.clear(),this.hideTooltip())}})})},"MW/rtc/plugins/view/tooltip/TooltipEventHandler":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/on"],function(h,e,g){return h(null,{_TIMEOUT:780,_AUTOHIDE:0,constructor:function(d,c){c&&c.timeout&&(this._TIMEOUT=
c.timeout);c&&c.autohide&&(this._AUTOHIDE=c.autohide);this._tooltipTimer=null;var b=d.getDomtarget();g(b,"mousemove",e.hitch(this,"_onMousemove"))},onTooltip:function(d,c){},onHideTooltip:function(){},_onTooltipTimeout:function(d){this.onTooltip(d.target,d);if(this._AUTOHIDE){var c=e.hitch(this,this.onHideTooltip);this._tooltipTimer=setTimeout(function(){c()},this._AUTOHIDE)}},_onMousemove:function(d){if(d&&"mousemove"===d.type){this.clear();if(this._domNode!==d.target)this.onHideTooltip();this._domNode=
d.target;var c=e.hitch(this,this._onTooltipTimeout);this._tooltipTimer=setTimeout(function(){c(d)},this._TIMEOUT)}},clear:function(){this._tooltipTimer&&(clearTimeout(this._tooltipTimer),this._tooltipTimer=null)}})})},"MW/rtc/plugins/view/tooltip/view/TooltipView":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-style dojo/on dijit/popup dijit/Destroyable dijit/TooltipDialog MW/uiframework/FocusManager".split(" "),function(h,e,g,d,c,b,a,f,k){return h(a,{_ORIENT_BELOW_FIRST:["below-centered",
"above-centered"],_ORIENT_ABOVE_FIRST:["above-centered","below-centered"],constructor:function(a){var c=this;this._view=a;this._offsetNode=null;this.tooltip=new f({"class":"rtcTooltip",onMouseLeave:function(){c.hide()}});this.own(this.tooltip);b.moveOffScreen(this.tooltip)},show:function(a,c){this.tooltip.set("content",a);var d=c.domNode;c.hasOwnProperty("xOffset")&&!isNaN(c.xOffset)&&(this._createOffsetDiv(c.domNode,c.xOffset),d=this._offsetNode);this._popupInfo={popup:this.tooltip,around:d,orient:c.orient||
this._ORIENT_BELOW_FIRST};b.open(this._popupInfo);this._registerResizeHandler(a);this._deriveProperOrientation(a);this._handleOverflowRendering();k.refuseFocus(this.tooltip.domNode)},hide:function(){this._destroyOffsetDiv();b.close(this.tooltip);this._popupInfo=null},_registerResizeHandler:function(a){this._isDomElement(a)&&a.addEventListener("onResized",e.hitch(this,"_reposition"))},_reposition:function(){this._popupInfo&&(b.open(this._popupInfo),this._handleOverflowRendering())},_deriveProperOrientation:function(a){if(this._isDomElement(a)){c.emit(a,
"onAdjustingOrientation",{bubbles:!1,cancelable:!0});var b=this._popupInfo.around.getBoundingClientRect();1>=this.tooltip.domNode.parentNode.getBoundingClientRect().bottom-b.top&&(this._popupInfo.orient=this._ORIENT_ABOVE_FIRST);c.emit(a,"onReadyToDisplay",{bubbles:!1,cancelable:!0})}},_handleOverflowRendering:function(){var a=this.tooltip.domNode.getBoundingClientRect().height,b=this.tooltip._popupWrapper.getBoundingClientRect().height;a>b+0.1&&this._correctOverflowRendering(a,b)},_correctOverflowRendering:function(a,
b){this.tooltip._popupWrapper.style.overflowY="visible";"dijitTooltipAbove"===this.tooltip._currentOrientClass&&(this.tooltip._popupWrapper.style.height=a+"px",this.tooltip._popupWrapper.style.top=b-a+"px")},_isDomElement:function(a){return a&&a.nodeType===Node.ELEMENT_NODE},_createOffsetDiv:function(a,b){this._offsetNode&&this._destroyOffsetDiv();var c=this._view.getCoordinateForDomNode(a);this._offsetNode=g.create("div",{style:{position:"absolute",left:c.x+b+"px",top:c.y+"px",width:"0px",height:c.height+
"px"}},this._view.getDomtarget())},_destroyOffsetDiv:function(){this._offsetNode&&(g.destroy(this._offsetNode),this._offsetNode=null)}})})},"MW/rtc/plugins/hyperlink/export/Hyperlink2HTMLProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/hyperlink/export/Hyperlink2HTML"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/hyperlink/export/Hyperlink2HTML":function(){define(["dojo/_base/declare",
"mw-utils/HtmlUtils","MW/rtc/plugins/export/NodeExporterInterface","MW/rtc/plugins/hyperlink/model/HyperlinkNode"],function(h,e,g,d){return h([g],{_INTERNAL_SCHEME:"internal:",constructor:function(){},getApplicableNodeClass:function(){return d},enter:function(c,b,a){b='\x3ca href \x3d "'+this._normalizeUrl(e.escapeHtml(b.hyperlink))+'"\x3e';c.addToBody(b);return!1},leave:function(c,b,a){c.addToBody("\x3c/a\x3e")},_normalizeUrl:function(c){0===c.indexOf(this._INTERNAL_SCHEME)&&(c=c.replace(this._INTERNAL_SCHEME,
"#"));return c.replace(/"/g,"\x26quot;")}})})},"mw-utils/HtmlUtils":function(){define(["dojo/_base/window","dojo/_base/event","dojo/io-query","mw-utils/deprecation"],function(h,e,g,d){return{HYPERLINK_ESCAPE_REGEXP:/<a\s+href\s*=\s*"[^"]*"[^>]*>[\s\S]*?<\/a>/g,HYPERLINK_WITH_PARENTHESIS_ESCAPE_REGEXP:/<a\s+href\s*=\s*"([^"]*)"([^>]*)>([\s\S]*?)<\/a>/g,STRONG_ESCAPE_REGEXP:/<strong>|<\/strong>/g,BOLD_LINK_ATTRIBUTE_REGEX:/\bstyle\s*=\s*\"[^\"]*\bfont-weight\s*:\s*bold\b[^\"]*\"/,parseQueryString:function(){var c=
h.global.location.search.substr(1,h.global.location.search.length);return this._parseQueryString(c)},_parseQueryString:function(c){return g.queryToObject(c)},parseUrl:function(c){var b=document.createElement("a");b.display="none";b.href=c||window.location.href;b.href=b.href;b={protocol:b.protocol,hostname:b.hostname,port:b.port,pathname:b.pathname,search:b.search,hash:b.hash};if(("https:"===b.protocol||"http:"===b.protocol)&&0!==b.pathname.indexOf("/"))b.pathname="/"+b.pathname;"https:"===b.protocol&&
("443"===b.port&&0!==c.indexOf("https://"+b.hostname+":443"))&&(b.port="");return b},escapeHtml:function(c){var b=h.global.document.createElement("div");c=h.global.document.createTextNode(c);b.appendChild(c);b=b.innerHTML;c="";for(var a=0;a<b.length;a+=1){var d=b.charCodeAt(a);c=128<d?c+"\x26#"+d+";":c+b.charAt(a)}return c},escapeLinksAndHtml:function(c,b){d.deprecated({deprecated:{module:"mw-utils/HtmlUtils",method:"escapeLinksAndHtml"},replacement:{module:"mw-utils/HtmlUtils",method:"treatHtmlLikeCommandWindow"}});
var a="",e=c.split(this.HYPERLINK_ESCAPE_REGEXP),g=c.match(this.HYPERLINK_ESCAPE_REGEXP),h="",n=this,p=0,m=function(a,b,c,d){a=n.parseUrl(b).protocol;"http:"!==a&&("https:"!==a&&"matlab:"!==a)&&(b="#");b=n.escapeHtml(b);d=n._strongNotEscaped(d,!0);h='\x3ca href\x3d"'+b+'"\x3e'+d+"\x3c/a\x3e"};if(b)a=this.escapeHtml(c),a=this.escapeWhitespace(a);else if(""!==e[0]&&(a=this._strongNotEscaped(e[0],!0)),null!==g&&0!==g.length)for(p=0;p<g.length;p+=1)g[p].replace(this.HYPERLINK_WITH_PARENTHESIS_ESCAPE_REGEXP,
m),""!==e[p+1]&&(e[p+1]=this._strongNotEscaped(e[p+1],!0)),a+=h+e[p+1];return a},treatHtmlLikeCommandWindow:function(c,b,a){if("string"!==typeof c)return"";var d="",e=c.split(this.HYPERLINK_ESCAPE_REGEXP),g=c.match(this.HYPERLINK_ESCAPE_REGEXP),h="",p=this,m=0;a=a?a:{};var q=function(a,b,c,d){a=p.parseUrl(b).protocol;var e="";"http:"!==a&&("https:"!==a&&"matlab:"!==a)&&(b="#");b=p.escapeHtml(b);d=p._strongNotEscaped(d,!1);p.BOLD_LINK_ATTRIBUTE_REGEX.test(c)&&(e=' style\x3d"font-weight:bold"');h='\x3ca href\x3d"'+
b+'"'+e+"\x3e"+d+"\x3c/a\x3e"};if(b)d=this.escapeHtml(c);else if(""!==e[0]&&(d=this._strongNotEscaped(e[0],!1)),null!==g&&0!==g.length)for(m=0;m<g.length;m+=1)g[m].replace(this.HYPERLINK_WITH_PARENTHESIS_ESCAPE_REGEXP,q),""!==e[m+1]&&(e[m+1]=this._strongNotEscaped(e[m+1],!1)),d+=h+e[m+1];a.addPreTagToPreserveWhiteSpace&&(d='\x3cspan style\x3d"white-space: pre"\x3e'+d+"\x3c/span\x3e");return d},_strongNotEscaped:function(c,b){var a="",d=c.match(this.STRONG_ESCAPE_REGEXP),e=c.split(this.STRONG_ESCAPE_REGEXP),
g=function(a){return a};b&&(g=this.escapeWhitespace);var h=0;if(null!==d&&0!==d.length){a=g(this.escapeHtml(e[0]));for(h=0;h<d.length;h+=1)a+=d[h]+g(this.escapeHtml(e[h+1]))}else a=g(this.escapeHtml(c));return a},escapeWhitespace:function(c){d.deprecated({deprecated:{module:"mw-utils/HtmlUtils",method:"escapeWhitespace"},replacement:{module:"Plain HTML",method:'Set class as white-space: pre or use \x3cspan style\x3d"white-space: pre"\x3e...\x3c/span\x3e'}});return(c||"").replace(/\n/g,"\x3cbr\x3e").replace(/ {2}/g,
"\x26nbsp;\x26nbsp;")},handleAnchors:function(c,b){if(b.target.href){e.stop(b);var a=b.target.href;-1!==a.indexOf("matlab:")?"matlab:"===a.substring(0,7)&&(a=b.target.href.substring(7),c(h.global.unescape(a))):h.global.open(b.target.href)}},isElementOverflown:function(c){return c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth}}})},"MW/rtc/plugins/hyperlink/model/HyperlinkNodeContentConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./HyperlinkNodeContentConverter"],
function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/hyperlink/model/HyperlinkNodeContentConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/contentconverter/base/InnerNodeContentConverter","./HyperlinkNode"],function(h,e,g){return h(e,{getApplicableNodeClass:function(){return g}})})},"MW/rtc/plugins/hyperlink/view/HyperlinkCoordinateConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"./HyperlinkCoordinateConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/hyperlink/view/HyperlinkCoordinateConverter":function(){define("dojo/_base/declare dojo/has MW/rtc/model/Position MW/rtc/plugins/hyperlink/model/HyperlinkNode MW/rtc/view/coordinateconverter/CoordinateConverterUtilities MW/rtc/view/coordinateconverter/base/BaseCoordinateConverter".split(" "),function(h,e,g,d,c,b){return h(b,{constructor:function(){},
getApplicableNodeClass:function(){return d},getCoordinateFromPosition:function(a){return null},getDelegatedPositionForCoordinate:function(a){var b=a.getNode();a=a.getOffset();a=b.findChildIndexForPosInNode(a);return new g(b.children[a.n],a.posInNode)},_getClientRects:function(a){var b=document.createRange();a=this.getDomNode(a);try{b.selectNodeContents(a)}catch(d){return[]}b=b.getClientRects();a=[];for(var g=0;g<b.length;g++)if(!e("trident")||!(0===b[g].width&&1<b.length))a[a.length]=b[g];0===a.length&&
(a=b);return c.getClientRectsArray(a)}})})},"MW/rtc/plugins/hyperlink/view/HyperlinkLayouterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./HyperlinkLayouter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/hyperlink/view/HyperlinkLayouter":function(){define(["dojo/_base/declare","MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter",
"../model/HyperlinkNode"],function(h,e,g){return h(e,{constructor:function(){},getApplicableNodeClass:function(){return g},layout:function(d,c){return d.layoutInto(c,"a",{"class":"hyperlinkNode",target:"_blank",rel:"noreferrer noopener",href:c.hyperlink})}})})},"MW/rtc/plugins/images/HTMLImageElementHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/images/HTMLImageElementHandler"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.cutcopypaste.htmlmimeconverter"]}},
createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/images/HTMLImageElementHandler":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/plugins/images/model/ImageNode"],function(h,e,g){return h(null,{_IMG_URI_DATA_ATTRIBUTE:"data-imguri",_IMG_WIDTH_ATTRIBUTE:"width",_IMG_HEIGHT_ATTRIBUTE:"height",_REGEXP_VALID_DIM:/^\d+(\.\d+)?(px)?$/,constructor:function(d){this._styleStack=[{}];this._fromhtml=d;this._fromhtml.registerNodeHandler("IMG",e.hitch(this,"_convertImageNode"))},
_convertImageNode:function(d,c){var b;d.src.match(/^data:image\/\S+;base64,/)?b=new g({imgSrc:d.src}):d.hasAttribute(this._IMG_URI_DATA_ATTRIBUTE)&&(b=new g({imgSrc:d.getAttribute("data-imguri")}));if(b){var a;d.hasAttribute(this._IMG_WIDTH_ATTRIBUTE)&&(a=d.getAttribute(this._IMG_WIDTH_ATTRIBUTE),a.match(this._REGEXP_VALID_DIM)&&(b.width=parseInt(a,10)));d.hasAttribute(this._IMG_HEIGHT_ATTRIBUTE)&&(a=d.getAttribute(this._IMG_HEIGHT_ATTRIBUTE),a.match(this._REGEXP_VALID_DIM)&&(b.height=parseInt(a,
10)));c.appendNode(b)}}})})},"MW/rtc/plugins/images/model/ImageNode":function(){define(["dojo/_base/declare","MW/rtc/nodes/OpaqueNode"],function(h,e){return h([e],{constructor:function(e){this.width=e.width||-1;this.height=e.height||-1;this.align=e.align||"baseline";e.imgSrc&&(this.imgSrc=e.imgSrc.replace(/\n|\r/g,""));this.altText=e.altText||"";this.originalWidth=this.width},className:"ImageNode",_serializeAttributes:function(e){e.width=this.width;e.height=this.height;e.align=this.align;e.altText=
this.altText;e.imgSrc=this.imgSrc;e.text=this.getText()}})})},"MW/rtc/plugins/images/ImagesProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/images/Images","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.view","rtc.cursor"]}},createInstance:function(d,c,b,a){return new e(d,c,b,a)}})})},"MW/rtc/plugins/images/Images":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/model/DocumentUtilities MW/rtc/model/events/DocumentEvent MW/rtc/model/events/InsertBreakEvent MW/rtc/model/events/NumberOfLinesChangedEvent ./model/ImageNode".split(" "),
function(h,e,g,d,c,b,a,f,k){return h(d,{_IMAGE_MIN_SIZE:18,_IMAGE_SCALING_FACTOR:0.9,constructor:function(a,b,c,d){this._cursor=d;this._internalDocument=a;this._document=b;this._view=c;this.own(g.after(this._document,"onDirectedDeletion",e.hitch(this,"_onDelete"),!0))},_onDelete:function(a,b){if(!this._cursor.hasSelection()&&b.isLocal&&this._isImageNode(b.startNode))return this._cursor.setPosition(this._cursor.selectionInfo2cursorPos(b)),!0},_isImageNode:function(a){return a&&a instanceof k},canInsertImage:function(){if(this._cursor.isCursorReadOnly()||
this._cursor.hasSelection()&&!this.imageUnderCursor())return!1;var a=this._cursor.getNode();return c.isInTextLevelContainer(a)&&!c.isEdgeOfTextLevelContainer(a,this._cursor.getOffset())?!1:!0},imageUnderCursor:function(){var a;a=this._cursor.selectionInfo();var b=a.isLocal&&this._isImageNode(a.startNode)?a.startNode:null;!b&&(a.isNull&&a.endPos===a.endNode.maxOffset())&&(a=a.endNode.nextSibling(),b=this._isImageNode(a)?a:null);return b},imageFromDOMNode:function(a){a=a.rteNode;return this._isImageNode(a)?
a:null},insertImageFromData:function(a){a=this._createImageNode(a);this._insertImageNode(a);return a},startImageChange:function(a){var b=this._document.startEdit(),c=this._cursor.getNode().rootContainer();this._savedState={imageNode:a,container:c,editBlock:b,lineNum:this._internalDocument.getLineNumber(c)}},endImageChange:function(c){if(this._savedState){var d=this._savedState.lineNum,e=[b.create(d,d)];c.rootContainer()!==this._savedState.container&&(e.push(a.create(d,d+1,0,1)),e.push(f.create(d,
d+1,-1)));this._savedState.editBlock.appendUndoEvents(e);this._savedState.editBlock.appendRedoEvents(e);this._internalDocument.emitDocumentEvents(e);if(!this._savedState.imageNode)this.onImageInserted(c);this._document.endEdit();this._savedState=null}},onImageInserted:function(a){},_createImageNode:function(a){return new k({imgSrc:a.imgSrc,width:a.width||-1,height:a.height||-1,altText:a.altText})},_insertImageNode:function(a){this._internalDocument.insertAtPosition(a,this._cursor.position);this._cursor.setPosition(a,
1)},getWidthToFitOnScreen:function(){var a=this._view.getDocumentDimension();return Math.max(this._IMAGE_SCALING_FACTOR*a.width,this._IMAGE_MIN_SIZE)}})})},"MW/rtc/plugins/images/ImageMimeConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/images/ImageMimeConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/images/ImageMimeConverter":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/plugins/cutcopypaste/mime/MimeConverter","MW/rtc/plugins/images/model/ImageNode"],function(h,e,g,d){return h(g,{_PRIORITY:1,constructor:function(){},getType:function(){return"image/x-java-image"},convertFromMimeData:function(c){return[(new d({className:"ImageNode",imgSrc:c.src,width:c.width,height:c.height})).serialize()]},priority:function(){return this._PRIORITY}})})},"MW/rtc/plugins/images/ImageNodeConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"MW/rtc/plugins/images/ImageNodeConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.cutcopypaste.converter"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/images/ImageNodeConverter":function(){define("dojo/_base/declare dojo/_base/lang MW/rtc/model/PositionUtilities MW/rtc/plugins/cutcopypaste/MIMETypes MW/rtc/plugins/images/model/ImageNode mw-log/Log".split(" "),function(h,e,g,d,c,b){return h(null,{constructor:function(a){a.registerNodeConverter(c,
e.hitch(this,"_convertFromImageNode"))},_convertFromImageNode:function(a){a=a.getStartPosition().getNode();b.assert(a.isInstanceOf(c),"_convertFromImageNode should be called for selections with an ImageNode.");return[{flavor:d.IMAGE,content:a.imgSrc}]}})})},"MW/rtc/plugins/images/InsertImageProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/images/InsertImage"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument",
"rtc.cursor","rtc.actionservice","rtc.richtext.images","rtc.focusservice"]}},createInstance:function(d,c,b,a,e){return new g(d,c,b,a,e)}})})},"MW/rtc/plugins/images/InsertImage":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/RichTextComponentFeatureEnum ./view/ImageDialog dojo/i18n!l10n/nls/richtext_actions".split(" "),function(h,e,g,d,c,b,a){return h(d,{constructor:function(a,b,d,h,p){this._cursor=b;this._focusService=p;this._internalDocument=
a;this._imagesPlugin=h;this._actionService=d;this._actionService.loadActions([{id:c.IMAGES.IMAGE_ACTION,enabled:!1,key:"ctrl_alt_z",callback:e.hitch(this,"_imageAction")}]);this.own(g.after(this._cursor,"onDoubleClick",e.hitch(this,"_doubleClick")));this.own(g.after(this._cursor,"onChange",e.hitch(this,"_updateActions")))},_updateActions:function(){this._actionService.updateAction(c.IMAGES.IMAGE_ACTION,{enabled:this._canInsertImage()});this._actionService.updateAction("rtc_insert_image",{enabled:this._canInsertImage()&&
!this._imagesPlugin.imageUnderCursor()});this._actionService.updateAction("rtc_edit_image",{enabled:this._canInsertImage()&&!!this._imagesPlugin.imageUnderCursor()})},_canInsertImage:function(){return this._imagesPlugin.canInsertImage()},_doubleClick:function(){if(!this._cursor.isCursorReadOnly()){var a=this._imagesPlugin.imageUnderCursor();a&&(this._cursor.resetAction(),this._openDialog(a))}},_imageAction:function(){if(this._actionService.getAction(c.IMAGES.IMAGE_ACTION).enabled&&this._canInsertImage()){var a=
this._imagesPlugin.imageUnderCursor();this._openDialog(a)}},_openDialog:function(a){this._dialog=new b(e.hitch(this,this._dlgAccept),e.hitch(this,this._dlgClose),a)},_dlgClose:function(){this._focusService.setFocus()},_dlgAccept:function(a){this._imagesPlugin.startImageChange();var b=a.node;b?(b.updateAttributes(a),this._cursor.onUpdate()):b=this._imagesPlugin.insertImageFromData(a);this._imagesPlugin.endImageChange(b)}})})},"MW/rtc/plugins/images/view/ImageDialog":function(){define("dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class dojo/on dojo/text!./ImageDialogTemplate.html dojo/i18n!l10n/nls/dialog dojo/i18n!l10n/nls/insertImageDialog mw-dialog-utils/DialogUtils dijit/form/RadioButton dijit/form/ComboBox dijit/form/Button dijit/form/TextBox".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p){return d([h,e,g],{templateString:k,widgetsInTemplate:!0,TRIANGLE_COLLAPSED_CLASS:"detailTriangleCollapsed",TRIANGLE_EXPANDED_CLASS:"detailTriangleExpanded",constructor:function(a,b,c){this._acceptCallBack=a;this._closeCallBack=b;this.dataUri=this.url="";this.settingsStore={altText:"",size:100,align:"bottom"};this._imgNode=c||null},postCreate:function(){this.inherited(arguments);this.okButton.set("label",l.ok);f(this.okButton,"click",c.hitch(this,"onOK"));this.cancelButton.set("label",
l.cancel);f(this.cancelButton,"click",c.hitch(this,"onCancel"));this.fileRadioLabel.innerHTML=n.fromLocalFile;this.urlRadioLabel.innerHTML=n.fromWeb;b.after(this.urlRadioBut,"onChange",c.hitch(this,"_onInputModeChanged"));f(this.imageFileInput,"change",c.hitch(this,"onFileChange"));f(this.imageUrlTextInput,"input",c.hitch(this,"onUrlChange"));this.urlField.style.display="none";this.own(f(this.imagePreview,"load",c.hitch(this,"_previewLoad")),f(this.imagePreview,"error",c.hitch(this,"_previewLoad")));
this.detailArea.style.display="none";this.detailsLabel.innerHTML=n.displaySettings;f(this.detailsTriangle,"click",c.hitch(this,"_detailsToggle"));f(this.detailsLabel,"click",c.hitch(this,"_detailsToggle"));this.altTextInputLabel.innerHTML=n.altText;this.sizeInputLabel.innerHTML=n.sizeInPercent;this.alignInputLabel.innerHTML=n.alignment;this._init();b.after(this.sizeTextInput,"onChange",c.hitch(this,"_sizeUpdate"));this._goToDialogWidget=p.displayModalDialog(this,this._imgNode?n.editTitle:n.insertTitle,
[])},_init:function(){var a=1;this._imgNode&&(this.alignInput.value=this._imgNode.align,this.altTextInput.setValue(this._imgNode.altText),this.imagePreview.src=this._imgNode.imgSrc,0<this._imgNode.width&&this.imagePreview.naturalWidth&&(a=this.imagePreview.naturalWidth/this._imgNode.width),this.sizeTextInput.setValue(Math.round(100/a)),this._isDataUri(this._imgNode.imgSrc)?(this.dataUri=this._imgNode.imgSrc,this.fileDataPath=this.altTextInput.value):(this.urlRadioBut.set("checked",!0),this.fileRadioBut.set("checked",
!1),this.imageUrlTextInput.setValue(this._imgNode.imgSrc),this._onInputModeChanged()),this._detailsToggle());this._renderPreview()},_previewLoad:function(a){"load"===a.type?(this.okButton.set("Disabled",!1),this._altTextUpdate(!0)):0>=this.imagePreview.naturalWidth&&0>=this.imagePreview.naturalHeight&&this.okButton.set("Disabled",!0);this._sizeUpdate()},_detailsToggle:function(){"none"===this.detailArea.style.display?(this.detailArea.style.display="inline",a.replace(this.detailsTriangle,this.TRIANGLE_EXPANDED_CLASS,
this.TRIANGLE_COLLAPSED_CLASS)):(this.detailArea.style.display="none",a.replace(this.detailsTriangle,this.TRIANGLE_COLLAPSED_CLASS,this.TRIANGLE_EXPANDED_CLASS))},_onInputModeChanged:function(){this.fileField.style.display=this.urlRadioBut.checked?"none":"inline";this.urlField.style.display="none"===this.fileField.style.display?"inline":"none";var a;a=this.altTextInput.value;this.altTextInput.setValue(this.settingsStore.altText);this.settingsStore.altText=a;a=this.sizeTextInput.value;this.sizeTextInput.setValue(this.settingsStore.size);
this.settingsStore.size=a;a=this.alignInput.value;this.alignInput.value=this.settingsStore.align;this.settingsStore.align=a;this.imageUrlTextInput.focus();this._renderPreview()},_altTextUpdate:function(a){if(""===this.altTextInput.value||a)this.altTextInput.setValue(this._fileNameFromPath(this.urlRadioBut.checked?this.url:this.fileDataPath))},_sizeUpdate:function(){var a="";if(this.imagePreview.naturalWidth||this.imagePreview.naturalHeight)a=this._calcWidth(),a=a.width+" x "+a.height;this.origSize.innerHTML=
a},_renderPreview:function(){var a="";a=this.urlRadioBut.checked?this.url=this.imageUrlTextInput.get("value"):this.dataUri;this.imagePreview.src=a;""===a?(this.imagePreview.style.display="none",this.noPreview.style.display="inline-block"):(this.imagePreview.style.display="inline-block",this.noPreview.style.display="none");this._sizeUpdate()},onUrlChange:function(a){var b=this;setTimeout(function(){b._destroyed||b._renderPreview()},0)},onFileChange:function(){this.dataUri="";this.imagePreview.src=
"";var a=this.imageFileInput.value;if(a){var b=new FileReader;b.readAsDataURL(this.imageFileInput.files[0]);var c=this;b.onloadend=function(b){c.dataUri=b.target.result;c.fileDataPath=a;c._renderPreview();c._altTextUpdate()}}else this.dataUri="",this._renderPreview(),this._altTextUpdate()},onClose:function(){this._closeCallBack()},onCancel:function(){this.onClose();this._goToDialogWidget.onClose()},onOK:function(){var a={},a={},b=parseInt(this.sizeTextInput.value,10);isNaN(b)||100===b||(a=this._calcWidth());
a={node:this._imgNode,imgSrc:this.urlRadioBut.checked?this.url:this.dataUri,altText:this.altTextInput.value,align:this.alignInput.value,width:a.width||-1,height:a.height||-1};this._acceptCallBack(a);this.onClose();this._goToDialogWidget.onClose()},_fileNameFromPath:function(a){return!a||this._isDataUri(a)?"":a.replace(/^.*(\\|\/|\:)/,"")},_calcWidth:function(){var a={},b=parseInt(this.sizeTextInput.value,10);a.width=Math.round(this.imagePreview.naturalWidth*b/100);a.height=Math.round(this.imagePreview.naturalHeight*
b/100);return a},_isDataUri:function(a){return a&&a.substring&&a.substring(0,25).match(/^data:image.+;base64/)?!0:!1},onTextKeyup:function(a){}})})},"dijit/form/RadioButton":function(){define(["dojo/_base/declare","./CheckBox","./_RadioButtonMixin","../_mw/utils/deprecation"],function(h,e,g,d){d.deprecated({deprecated:{module:"dijit/form/RadioButton"},replacement:{module:"mw-form/RadioButton"},geckNumber:1352405});return h("dijit.form.RadioButton",[e,g],{baseClass:"dijitRadio"})})},"dijit/form/_RadioButtonMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/lang dojo/query!css2 ../registry".split(" "),
function(h,e,g,d,c,b){return e("dijit.form._RadioButtonMixin",null,{type:"radio",_getRelatedWidgets:function(){var a=[];c("input[type\x3dradio]",this.focusNode.form||this.ownerDocument).forEach(d.hitch(this,function(c){c.name==this.name&&c.form==this.focusNode.form&&(c=b.getEnclosingWidget(c))&&a.push(c)}));return a},_setCheckedAttr:function(a){this.inherited(arguments);this._created&&a&&h.forEach(this._getRelatedWidgets(),d.hitch(this,function(a){a!=this&&a.checked&&a.set("checked",!1)}))},_getSubmitValue:function(a){return null==
a?"on":a},_onClick:function(a){if(this.checked||this.disabled)return a.stopPropagation(),a.preventDefault(),!1;if(this.readOnly)return a.stopPropagation(),a.preventDefault(),h.forEach(this._getRelatedWidgets(),d.hitch(this,function(a){g.set(this.focusNode||this.domNode,"checked",a.checked)})),!1;var b=!1,c;h.some(this._getRelatedWidgets(),function(a){return a.checked?(c=a,!0):!1});this.checked=!0;c&&(c.checked=!1);if(!1===this.onClick(a)||a.defaultPrevented)b=!0;this.checked=!1;c&&(c.checked=!0);
b?a.preventDefault():this.set("checked",!0);return!b}})})},"dijit/form/ComboBox":function(){define(["dojo/_base/declare","./ValidationTextBox","./ComboBoxMixin"],function(h,e,g){return h("dijit.form.ComboBox",[e,g],{})})},"dijit/form/ComboBoxMixin":function(){define("dojo/_base/declare dojo/Deferred dojo/_base/kernel dojo/_base/lang dojo/store/util/QueryResults ./_AutoCompleterMixin ./_ComboBoxMenu ../_HasDropDown dojo/text!./templates/DropDownBox.html".split(" "),function(h,e,g,d,c,b,a,f,k){return h("dijit.form.ComboBoxMixin",
[f,b],{dropDownClass:a,hasDownArrow:!0,templateString:k,baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_setHasDownArrowAttr:function(a){this._set("hasDownArrow",a);this._buttonNode.style.display=a?"":"none"},_showResultList:function(){this.displayMessage("");this.inherited(arguments)},_setStoreAttr:function(a){a.get||d.mixin(a,{_oldAPI:!0,get:function(a){var b=new e;this.fetchItemByIdentity({identity:a,onItem:function(a){b.resolve(a)},onError:function(a){b.reject(a)}});
return b.promise},query:function(a,b){var f=new e(function(){g.abort&&g.abort()});f.total=new e;var g=this.fetch(d.mixin({query:a,onBegin:function(a){f.total.resolve(a)},onComplete:function(a){f.resolve(a)},onError:function(a){f.reject(a)}},b));return c(f)}});this._set("store",a)},postMixInProperties:function(){var a=this.params.store||this.store;a&&this._setStoreAttr(a);this.inherited(arguments);if(!this.params.store&&this.store&&!this.store._oldAPI){var b=this.declaredClass;d.mixin(this.store,{getValue:function(a,
c){g.deprecated(b+".store.getValue(item, attr) is deprecated for builtin store.  Use item.attr directly","","2.0");return a[c]},getLabel:function(a){g.deprecated(b+".store.getLabel(item) is deprecated for builtin store.  Use item.label directly","","2.0");return a.name},fetch:function(a){g.deprecated(b+".store.fetch() is deprecated for builtin store.","Use store.query()","2.0");require(["dojo/data/ObjectStore"],d.hitch(this,function(b){(new b({objectStore:this})).fetch(a)}))}})}},buildRendering:function(){this.inherited(arguments);
this.focusNode.setAttribute("aria-autocomplete",this.autoComplete?"both":"list")}})})},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../when"],function(h,e,g){var d=function(c){function b(b){c[b]=function(){var e=arguments,l=g(c,function(a){Array.prototype.unshift.call(e,a);return d(h[b].apply(h,e))});if("forEach"!==b||a)return l}}if(!c)return c;var a=!!c.then;a&&(c=e.delegate(c));b("forEach");b("filter");b("map");null==c.total&&(c.total=g(c,function(a){return a.length}));
return c};e.setObject("dojo.store.util.QueryResults",d);return d})},"dijit/form/_AutoCompleterMixin":function(){define("dojo/aspect dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/query dojo/regexp dojo/sniff ./DataList ./_TextBoxMixin ./_SearchMixin".split(" "),function(h,e,g,d,c,b,a,f,k,l,n){return e("dijit.form._AutoCompleterMixin",n,{item:null,autoComplete:!0,highlightMatch:"first",labelAttr:"",labelType:"text",maxHeight:-1,_stopClickEvents:!1,_getCaretPos:function(a){var b=0;
if("number"==typeof a.selectionStart)b=a.selectionStart;else if(f("ie")){var c=a.ownerDocument.selection.createRange().duplicate();a=a.createTextRange();c.move("character",0);a.move("character",0);try{a.setEndPoint("EndToEnd",c),b=String(a.text).replace(/\r/g,"").length}catch(d){}}return b},_setCaretPos:function(a,b){b=parseInt(b);l.selectInputText(a,b,b)},_setDisabledAttr:function(a){this.inherited(arguments);this.domNode.setAttribute("aria-disabled",a?"true":"false")},_onKey:function(a){if(!(32<=
a.charCode)){var b=a.charCode||a.keyCode;if(!(b==d.ALT||b==d.CTRL||b==d.META||b==d.SHIFT)){var c=this.dropDown,e=null;this._abortQuery();this.inherited(arguments);if(!a.altKey&&!a.ctrlKey&&!a.metaKey)switch(this._opened&&(e=c.getHighlightedOption()),b){case d.PAGE_DOWN:case d.DOWN_ARROW:case d.PAGE_UP:case d.UP_ARROW:this._opened&&this._announceOption(e);a.stopPropagation();a.preventDefault();break;case d.ENTER:if(e){if(e==c.nextButton){this._nextSearch(1);a.stopPropagation();a.preventDefault();break}else if(e==
c.previousButton){this._nextSearch(-1);a.stopPropagation();a.preventDefault();break}a.stopPropagation();a.preventDefault()}else this._setBlurValue(),this._setCaretPos(this.focusNode,this.focusNode.value.length);case d.TAB:b=this.get("displayedValue");if(c&&(b==c._messages.previousMessage||b==c._messages.nextMessage))break;e&&this._selectOption(e);case d.ESCAPE:this._opened&&(this._lastQuery=null,this.closeDropDown())}}}},_autoCompleteText:function(a){var b=this.focusNode;l.selectInputText(b,b.value.length);
var c=this.ignoreCase?"toLowerCase":"substr";0==a[c](0).indexOf(this.focusNode.value[c](0))?(c=this.autoComplete?this._getCaretPos(b):b.value.length,c+1>b.value.length&&(b.value=a,l.selectInputText(b,c))):(b.value=a,l.selectInputText(b))},_openResultList:function(a,b,d){var e=this.dropDown.getHighlightedOption();this.dropDown.clearResultList();!a.length&&0==d.start?this.closeDropDown():(this._nextSearch=this.dropDown.onPage=c.hitch(this,function(b){a.nextPage(-1!==b);this.focus()}),this.dropDown.createOptions(a,
d,c.hitch(this,"_getMenuLabelFromItem")),this._showResultList(),"direction"in d?(d.direction?this.dropDown.highlightFirstOption():d.direction||this.dropDown.highlightLastOption(),e&&this._announceOption(this.dropDown.getHighlightedOption())):this.autoComplete&&(!this._prev_key_backspace&&!/^[*]+$/.test(b[this.searchAttr].toString()))&&this._announceOption(this.dropDown.containerNode.firstChild.nextSibling))},_showResultList:function(){this.closeDropDown(!0);this.openDropDown();this.domNode.setAttribute("aria-expanded",
"true")},loadDropDown:function(){this._startSearchAll()},isLoaded:function(){return!1},closeDropDown:function(){this._abortQuery();this._opened&&(this.inherited(arguments),this.domNode.setAttribute("aria-expanded","false"))},_setBlurValue:function(){var a=this.get("displayedValue"),b=this.dropDown;b&&(a==b._messages.previousMessage||a==b._messages.nextMessage)?this._setValueAttr(this._lastValueReported,!0):"undefined"==typeof this.item?(this.item=null,this.set("displayedValue",a)):(this.value!=this._lastValueReported&&
this._handleOnChange(this.value,!0),this._refreshState());this.focusNode.removeAttribute("aria-activedescendant")},_setItemAttr:function(a,b,c){var d="";a&&(c||(c=this.store._oldAPI?this.store.getValue(a,this.searchAttr):a[this.searchAttr]),d=this._getValueField()!=this.searchAttr?this.store.getIdentity(a):c);this.set("value",d,b,c,a)},_announceOption:function(a){if(a){var b;if(a==this.dropDown.nextButton||a==this.dropDown.previousButton)b=a.innerHTML,this.item=void 0,this.value="";else{var c=this.dropDown.items[a.getAttribute("item")];
b=(this.store._oldAPI?this.store.getValue(c,this.searchAttr):c[this.searchAttr]).toString();this.set("item",c,!1,b)}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);this.focusNode.setAttribute("aria-activedescendant",g.get(a,"id"));this._autoCompleteText(b)}},_selectOption:function(a){this.closeDropDown();a&&this._announceOption(a);this._setCaretPos(this.focusNode,this.focusNode.value.length);this._handleOnChange(this.value,!0);this.focusNode.removeAttribute("aria-activedescendant")},
_startSearchAll:function(){this._startSearch("")},_startSearchFromInput:function(){this.item=void 0;this.inherited(arguments)},_startSearch:function(a){if(!this.dropDown){var b=this.id+"_popup";this.dropDown=new (c.isString(this.dropDownClass)?c.getObject(this.dropDownClass,!1):this.dropDownClass)({onChange:c.hitch(this,this._selectOption),id:b,dir:this.dir,textDir:this.textDir})}this._lastInput=a;this.inherited(arguments)},_getValueField:function(){return this.searchAttr},postMixInProperties:function(){this.inherited(arguments);
if(!this.store&&this.srcNodeRef&&(this.store=new k({},this.srcNodeRef),!("value"in this.params))){var a=this.item=this.store.fetchSelectedItem();if(a){var b=this._getValueField();this.value=this.store._oldAPI?this.store.getValue(a,b):a[b]}}},postCreate:function(){var a=b('label[for\x3d"'+this.id+'"]');a.length&&(a[0].id||(a[0].id=this.id+"_label"),this.domNode.setAttribute("aria-labelledby",a[0].id));this.inherited(arguments);h.after(this,"onSearch",c.hitch(this,"_openResultList"),!0)},_getMenuLabelFromItem:function(a){a=
this.labelFunc(a,this.store);var b=this.labelType;"none"!=this.highlightMatch&&("text"==this.labelType&&this._lastInput)&&(a=this.doHighlight(a,this._lastInput),b="html");return{html:"html"==b,label:a}},doHighlight:function(b,c){var d=(this.ignoreCase?"i":"")+("all"==this.highlightMatch?"g":""),e=this.queryExpr.indexOf("${0}");c=a.escapeString(c);return this._escapeHtml(b.replace(RegExp((0==e?"^":"")+"("+c+")"+(e==this.queryExpr.length-4?"$":""),d),"\uffff$1\uffff")).replace(/\uFFFF([^\uFFFF]+)\uFFFF/g,
'\x3cspan class\x3d"dijitComboBoxHighlightMatch"\x3e$1\x3c/span\x3e')},_escapeHtml:function(a){return a=String(a).replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;")},reset:function(){this.item=null;this.inherited(arguments)},labelFunc:function(a,b){return(b._oldAPI?b.getValue(a,this.labelAttr||this.searchAttr):a[this.labelAttr||this.searchAttr]).toString()},_setValueAttr:function(a,b,c,d){this._set("item",d||null);null==a&&(a="");this.inherited(arguments)}})})},
"dijit/form/DataList":function(){define("dojo/_base/declare dojo/dom dojo/_base/lang dojo/query dojo/store/Memory ../registry".split(" "),function(h,e,g,d,c,b){function a(a){return{id:a.value,value:a.value,name:g.trim(a.innerText||a.textContent||"")}}return h("dijit.form.DataList",c,{constructor:function(c,h){this.domNode=e.byId(h);g.mixin(this,c);this.id&&b.add(this);this.domNode.style.display="none";this.inherited(arguments,[{data:d("option",this.domNode).map(a)}])},destroy:function(){b.remove(this.id)},
fetchSelectedItem:function(){var b=d("\x3e option[selected]",this.domNode)[0]||d("\x3e option",this.domNode)[0];return b&&a(b)}})})},"dojo/store/Memory":function(){define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(h,e,g){return h("dojo.store.Memory",null,{constructor:function(d){for(var c in d)this[c]=d[c];this.setData(this.data||[])},data:null,idProperty:"id",index:null,queryEngine:g,get:function(d){return this.data[this.index[d]]},getIdentity:function(d){return d[this.idProperty]},
put:function(d,c){var b=this.data,a=this.index,e=this.idProperty,e=d[e]=c&&"id"in c?c.id:e in d?d[e]:Math.random();if(e in a){if(c&&!1===c.overwrite)throw Error("Object already exists");b[a[e]]=d}else a[e]=b.push(d)-1;return e},add:function(d,c){(c=c||{}).overwrite=!1;return this.put(d,c)},remove:function(d){var c=this.index,b=this.data;if(d in c)return b.splice(c[d],1),this.setData(b),!0},query:function(d,c){return e(this.queryEngine(d,c)(this.data))},setData:function(d){d.items?(this.idProperty=
d.identifier||this.idProperty,d=this.data=d.items):this.data=d;this.index={};for(var c=0,b=d.length;c<b;c++)this.index[d[c][this.idProperty]]=c}})})},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],function(h){return function(e,g){function d(b){b=h.filter(b,e);var a=g&&g.sort;a&&b.sort("function"==typeof a?a:function(b,c){for(var d,e=0;d=a[e];e++){var f=b[d.attribute],g=c[d.attribute],f=null!=f?f.valueOf():f,g=null!=g?g.valueOf():g;if(f!=g)return!!d.descending==(null==
f||f>g)?-1:1}return 0});if(g&&(g.start||g.count)){var c=b.length;b=b.slice(g.start||0,(g.start||0)+(g.count||Infinity));b.total=c}return b}switch(typeof e){default:throw Error("Can not query with a "+typeof e);case "object":case "undefined":var c=e;e=function(b){for(var a in c){var d=c[a];if(d&&d.test){if(!d.test(b[a],b))return!1}else if(d!=b[a])return!1}return!0};break;case "string":if(!this[e])throw Error("No filter function "+e+" was found in store");e=this[e];case "function":}d.matches=e;return d}})},
"dijit/form/_SearchMixin":function(){define("dojo/_base/declare dojo/keys dojo/_base/lang dojo/query dojo/string dojo/when ../registry".split(" "),function(h,e,g,d,c,b,a){return h("dijit.form._SearchMixin",null,{pageSize:Infinity,store:null,fetchProperties:{},query:{},list:"",_setListAttr:function(a){this._set("list",a)},searchDelay:200,searchAttr:"name",queryExpr:"${0}*",ignoreCase:!0,_patternToRegExp:function(a){return RegExp("^"+a.replace(/(\\.)|(\*)|(\?)|\W/g,function(a,b,c,d){return c?".*":d?
".":b?b:"\\"+a})+"$",this.ignoreCase?"mi":"m")},_abortQuery:function(){this.searchTimer&&(this.searchTimer=this.searchTimer.remove());this._queryDeferHandle&&(this._queryDeferHandle=this._queryDeferHandle.remove());this._fetchHandle&&(this._fetchHandle.abort&&(this._cancelingQuery=!0,this._fetchHandle.abort(),this._cancelingQuery=!1),this._fetchHandle.cancel&&(this._cancelingQuery=!0,this._fetchHandle.cancel(),this._cancelingQuery=!1),this._fetchHandle=null)},_processInput:function(a){if(!this.disabled&&
!this.readOnly){a=a.charOrCode;var b=!1;this._prev_key_backspace=!1;switch(a){case e.DELETE:case e.BACKSPACE:b=this._maskValidSubsetError=this._prev_key_backspace=!0;break;default:b="string"==typeof a||229==a}if(b)if(this.store)this.searchTimer=this.defer("_startSearchFromInput",1);else this.onSearch()}},onSearch:function(){},_startSearchFromInput:function(){this._startSearch(this.focusNode.value)},_startSearch:function(a){this._abortQuery();var d=this,e=g.clone(this.query),h={start:0,count:this.pageSize,
queryOptions:{ignoreCase:this.ignoreCase,deep:!0}},p=c.substitute(this.queryExpr,[a.replace(/([\\\*\?])/g,"\\$1")]),m,q=function(){var a=d._fetchHandle=d.store.query(e,h);!d.disabled&&!(d.readOnly||m!==d._lastQuery)&&b(a,function(c){d._fetchHandle=null;!d.disabled&&(!d.readOnly&&m===d._lastQuery)&&b(a.total,function(a){c.total=a;var b=d.pageSize;if(isNaN(b)||b>c.total)b=c.total;c.nextPage=function(a){h.direction=a=!1!==a;h.count=b;a?(h.start+=c.length,h.start>=c.total&&(h.count=0)):(h.start-=b,0>
h.start&&(h.count=Math.max(b+h.start,0),h.start=0));0>=h.count?(c.length=0,d.onSearch(c,e,h)):q()};d.onSearch(c,e,h)})},function(a){d._fetchHandle=null;d._cancelingQuery||console.error(d.declaredClass+" "+a.toString())})};g.mixin(h,this.fetchProperties);this.store._oldAPI?m=p:(m=this._patternToRegExp(p),m.toString=function(){return p});this._lastQuery=e[this.searchAttr]=m;this._queryDeferHandle=this.defer(q,this.searchDelay)},constructor:function(){this.query={};this.fetchProperties={}},postMixInProperties:function(){if(!this.store){var b=
this.list;b&&(this.store=a.byId(b))}this.inherited(arguments)}})})},"dijit/form/_ComboBoxMenu":function(){define("dojo/_base/declare dojo/dom-class dojo/dom-style dojo/keys ../_WidgetBase ../_TemplatedMixin ./_ComboBoxMenuMixin ./_ListMouseMixin".split(" "),function(h,e,g,d,c,b,a,f){return h("dijit.form._ComboBoxMenu",[c,b,f,a],{templateString:"\x3cdiv class\x3d'dijitReset dijitMenu' data-dojo-attach-point\x3d'containerNode' style\x3d'overflow: auto; overflow-x: hidden;' role\x3d'listbox'\x3e\x3cdiv class\x3d'dijitMenuItem dijitMenuPreviousButton' data-dojo-attach-point\x3d'previousButton' role\x3d'option'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitMenuItem dijitMenuNextButton' data-dojo-attach-point\x3d'nextButton' role\x3d'option'\x3e\x3c/div\x3e\x3c/div\x3e",
baseClass:"dijitComboBoxMenu",postCreate:function(){this.inherited(arguments);this.isLeftToRight()||(e.add(this.previousButton,"dijitMenuItemRtl"),e.add(this.nextButton,"dijitMenuItemRtl"));this.containerNode.setAttribute("role","listbox")},_createMenuItem:function(){var a=this.ownerDocument.createElement("div");a.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl");a.setAttribute("role","option");return a},onHover:function(a){e.add(a,"dijitMenuItemHover")},onUnhover:function(a){e.remove(a,
"dijitMenuItemHover")},onSelect:function(a){e.add(a,"dijitMenuItemSelected")},onDeselect:function(a){e.remove(a,"dijitMenuItemSelected")},_page:function(a){var b=0,c=this.domNode.scrollTop,d=g.get(this.domNode,"height");for(this.getHighlightedOption()||this.selectNextNode();b<d;){var e=this.getHighlightedOption();if(a){if(!e.previousSibling||"none"==e.previousSibling.style.display)break;this.selectPreviousNode()}else{if(!e.nextSibling||"none"==e.nextSibling.style.display)break;this.selectNextNode()}e=
this.domNode.scrollTop;b+=(e-c)*(a?-1:1);c=e}},handleKey:function(a){switch(a.keyCode){case d.DOWN_ARROW:return this.selectNextNode(),!1;case d.PAGE_DOWN:return this._page(!1),!1;case d.UP_ARROW:return this.selectPreviousNode(),!1;case d.PAGE_UP:return this._page(!0),!1;default:return!0}}})})},"dijit/form/_ComboBoxMenuMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/has dojo/i18n dojo/i18n!./nls/ComboBox".split(" "),function(h,e,g,d,c){return e("dijit.form._ComboBoxMenuMixin",
null,{_messages:null,postMixInProperties:function(){this.inherited(arguments);this._messages=c.getLocalization("dijit.form","ComboBox",this.lang)},buildRendering:function(){this.inherited(arguments);this.previousButton.innerHTML=this._messages.previousMessage;this.nextButton.innerHTML=this._messages.nextMessage},_setValueAttr:function(b){this._set("value",b);this.onChange(b)},onClick:function(b){if(b==this.previousButton)this._setSelectedAttr(null),this.onPage(-1);else if(b==this.nextButton)this._setSelectedAttr(null),
this.onPage(1);else this.onChange(b)},onChange:function(){},onPage:function(){},onClose:function(){this._setSelectedAttr(null)},_createOption:function(b,a){var c=this._createMenuItem(),d=a(b);d.html?c.innerHTML=d.label:c.appendChild(c.ownerDocument.createTextNode(d.label));""==c.innerHTML&&(c.innerHTML="\x26#160;");return c},createOptions:function(b,a,c){this.items=b;this.previousButton.style.display=0==a.start?"none":"";g.set(this.previousButton,"id",this.id+"_prev");h.forEach(b,function(a,b){var d=
this._createOption(a,c);d.setAttribute("item",b);g.set(d,"id",this.id+b);this.nextButton.parentNode.insertBefore(d,this.nextButton)},this);var d=!1;b.total&&!b.total.then&&-1!=b.total?a.start+a.count<b.total?d=!0:a.start+a.count>b.total&&a.count==b.length&&(d=!0):a.count==b.length&&(d=!0);this.nextButton.style.display=d?"":"none";g.set(this.nextButton,"id",this.id+"_next")},clearResultList:function(){for(var b=this.containerNode;2<b.childNodes.length;)b.removeChild(b.childNodes[b.childNodes.length-
2]);this._setSelectedAttr(null)},highlightFirstOption:function(){this.selectFirstNode()},highlightLastOption:function(){this.selectLastNode()},selectFirstNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.previousButton&&this.selectNextNode()},selectLastNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.nextButton&&this.selectPreviousNode()},getHighlightedOption:function(){return this.selected}})})},"dijit/form/_ListMouseMixin":function(){define(["dojo/_base/declare",
"dojo/on","dojo/touch","./_ListBase"],function(h,e,g,d){return h("dijit.form._ListMouseMixin",d,{postCreate:function(){this.inherited(arguments);this.domNode.dojoClick=!0;this._listConnect("click","_onClick");this._listConnect("mousedown","_onMouseDown");this._listConnect("mouseup","_onMouseUp");this._listConnect("mouseover","_onMouseOver");this._listConnect("mouseout","_onMouseOut")},_onClick:function(c,b){this._setSelectedAttr(b,!1);this._deferredClick&&this._deferredClick.remove();this._deferredClick=
this.defer(function(){this._deferredClick=null;this.onClick(b)})},_onMouseDown:function(c,b){this._hoveredNode&&(this.onUnhover(this._hoveredNode),this._hoveredNode=null);this._isDragging=!0;this._setSelectedAttr(b,!1)},_onMouseUp:function(c,b){this._isDragging=!1;var a=this.selected,d=this._hoveredNode;a&&b==a?this.defer(function(){this._onClick(c,a)}):d&&this.defer(function(){this._onClick(c,d)})},_onMouseOut:function(c,b){this._hoveredNode&&(this.onUnhover(this._hoveredNode),this._hoveredNode=
null);this._isDragging&&(this._cancelDrag=(new Date).getTime()+1E3)},_onMouseOver:function(c,b){this._cancelDrag&&((new Date).getTime()>this._cancelDrag&&(this._isDragging=!1),this._cancelDrag=null);this._hoveredNode=b;this.onHover(b);this._isDragging&&this._setSelectedAttr(b,!1)}})})},"dijit/form/_ListBase":function(){define(["dojo/_base/declare","dojo/on","dojo/window"],function(h,e,g){return h("dijit.form._ListBase",null,{selected:null,_listConnect:function(d,c){var b=this;return b.own(e(b.containerNode,
e.selector(function(a,b,c){return a.parentNode==c},d),function(a){b[c](a,this)}))},selectFirstNode:function(){for(var d=this.containerNode.firstChild;d&&"none"==d.style.display;)d=d.nextSibling;this._setSelectedAttr(d,!0)},selectLastNode:function(){for(var d=this.containerNode.lastChild;d&&"none"==d.style.display;)d=d.previousSibling;this._setSelectedAttr(d,!0)},selectNextNode:function(){var d=this.selected;if(d){for(d=d.nextSibling;d&&"none"==d.style.display;)d=d.nextSibling;d?this._setSelectedAttr(d,
!0):this.selectFirstNode()}else this.selectFirstNode()},selectPreviousNode:function(){var d=this.selected;if(d){for(d=d.previousSibling;d&&"none"==d.style.display;)d=d.previousSibling;d?this._setSelectedAttr(d,!0):this.selectLastNode()}else this.selectLastNode()},_setSelectedAttr:function(d,c){if(this.selected!=d){var b=this.selected;if(b)this.onDeselect(b);d&&(c&&g.scrollIntoView(d),this.onSelect(d));this._set("selected",d)}else if(d)this.onSelect(d)}})})},"MW/rtc/plugins/images/InlineResizeImageProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/images/InlineResizeImage"],function(h,e,g){return h(e,{requires:function(){return{createInstance:"rtc.richtext.images rtc.view rtc.internaldocument rtc.cursor rtc.richtext.resizer rtc.actionservice".split(" ")}},createInstance:function(d,c,b,a,e,h){return new g(d,c,b,a,e,h)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/images/InlineResizeImage":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/has dojo/on mw-log/Log MW/rtc/model/events/DocumentEvent dojo/i18n!l10n/nls/richtext_actions".split(" "),
function(h,e,g,d,c,b,a,f){return h(null,{constructor:function(a,b,d,h,m,q){this._imagePlugin=a;this._cursor=h;this._internalDocument=d;this._actionService=q;this._view=b;this._resizer=m;this._temporaryListeners=[];this._listeners=[];this._listeners.push(c(b.getDomtarget(),"click",e.hitch(this,this._handleClick)));this._listeners.push(g.after(this._cursor,"onChange",e.hitch(this,"_cursorChanged")));this._listeners.push(g.after(this._imagePlugin,"onImageInserted",e.hitch(this,"_imageInserted"),!0));
this._actionService.loadActions([{id:"rtc_reset_image",enabled:!1,contextMenuGroup:"RichText",description:f.resetImage,callback:e.hitch(this,"_resetImageSize")},{id:"rtc_deactivate_image",enabled:!1,key:"escape",callback:e.hitch(this,"_escapePressed")}])},destroy:function(){this._deactivateImage();this._listeners.forEach(function(a){a.remove()});this._listeners=[];this._actionService.removeAction("rtc_reset_image");this._actionService.removeAction("rtc_deactivate_image")},_imageInserted:function(a){this._cursor.setPosition(a,
{posInNode:1});this._cursor.movePosition(this._cursor.LEFT,!0)},_updateActions:function(){this._actionService.updateAction("rtc_reset_image",{enabled:this._canResetImage()})},_escapePressed:function(){return this._activeImage?(this._cursor.collapseSelection(),!0):!1},_cursorChanged:function(){var a,b;if(!this._activeImage&&(a=this._imagePlugin.imageUnderCursor(),b=this._cursor.selectionInfo(),a&&!b.isNull)){this._tryActivateImage(a);return}this._resizer.deactivate()},_handleClick:function(a){if(a=
this._imagePlugin.imageFromDOMNode(a.target)){var b=this._cursor.getNode()===a?this._cursor.getOffset():1;this._cursor.setPosition(a,{posInNode:b?0:1});this._cursor.movePosition(b?this._cursor.RIGHT:this._cursor.LEFT,!0)}else this._resizer.deactivate()},_canResetImage:function(){if(this._cursor.isCursorReadOnly())return!1;var a=this._activeImage||this._imagePlugin.imageUnderCursor();return a&&a.width!==a.originalWidth?!0:!1},_resetImageSize:function(){if(this._cursor.isCursorReadOnly())return!1;var a=
this._activeImage||this._imagePlugin.imageUnderCursor();a&&(this._imagePlugin.startImageChange(),this._internalDocument.changeNodeAttributes(a,{width:a.originalWidth,height:-1}),this._view.layoutNode(a),this._cursor.onUpdate(!1,!0),this._imagePlugin.endImageChange(a),this._activateImage(a))},_tryActivateImage:function(a){7<=d("trident")?(this._activateImage(a),a.box.addEventListener("load",e.hitch(this,function(){this._view.onLayoutChange()}),{once:!0})):a.box.complete?this._activateImage(a):a.box.addEventListener("load",
e.hitch(this,function(){this._activateImage(a);this._view.onLayoutChange()}),{once:!0})},_activateImage:function(a){if(!this._cursor.isCursorReadOnly()&&this._activeImage!==a){this._activeImage=a;this._cursor.hideSelection();var b=1;-1<this._activeImage.width?(a=this._activeImage.width,b=this._activeImage.width/this._activeImage.box.naturalWidth):a=this._activeImage.box.naturalWidth;this._resizer.activate({top:this._activeImage.box.offsetTop,left:this._activeImage.box.offsetLeft,width:a,height:-1<
this._activeImage.height?this._activeImage.height:Math.round(b*this._activeImage.box.naturalHeight)},{startDrag:e.hitch(this,"_startResize"),endDrag:e.hitch(this,"_endResize"),drag:e.hitch(this,"_trackResize"),closed:e.hitch(this,"_deactivateImage")});this._temporaryListeners.push(g.after(this._view,"onResize",e.hitch(this,"_handleViewChange")));this._temporaryListeners.push(g.after(this._view,"onLayoutChange",e.hitch(this,"_handleViewChange")));this._temporaryListeners.push(g.after(this._internalDocument,
"onDocumentChanged",e.hitch(this,"_documentChanged"),!0));this._updateActions()}},_deactivateImage:function(){this._activeImage=null;this._temporaryListeners.forEach(function(a){a.remove()});this._temporaryListeners=[];this._cursor.showSelection();this._updateActions()},_handleViewChange:function(){this._resizer.moveTo(this._activeImage.box.offsetTop,this._activeImage.box.offsetLeft)},_documentChanged:function(){!this._activeImage.box.offsetTop||!this._activeImage.box.offsetLeft||!this._activeImage.box.offsetWidth||
!this._activeImage.box.offsetHeight?this._resizer.deactivate():(this._resizer.moveTo(this._activeImage.box.offsetTop,this._activeImage.box.offsetLeft),this._resizer.resize(this._activeImage.box.offsetWidth,this._activeImage.box.offsetHeight))},_startResize:function(){this._savedSizeAttributes={width:this._activeImage.width,height:this._activeImage.height};this._imagePlugin.startImageChange(this._activeImage)},_endResize:function(a,b){this._activeImage.updateAttributes(this._savedSizeAttributes);this._internalDocument.changeNodeAttributes(this._activeImage,
{width:a,height:b});this._imagePlugin.endImageChange(this._activeImage);this._view.layoutNode(this._activeImage);this._updateActions()},_trackResize:function(a,b){this._activeImage.updateAttributes({width:a,height:b});this._view.layoutNode(this._activeImage);this._view.onLayoutChange();return!0}})})},"MW/rtc/plugins/images/export/Image2HTMLProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/images/export/Image2HTML"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},
createInstance:function(){return new g}})})},"MW/rtc/plugins/images/export/Image2HTML":function(){define(["dojo/_base/declare","MW/rtc/plugins/export/NodeExporterInterface","MW/rtc/plugins/images/model/ImageNode"],function(h,e,g){return h([e],{constructor:function(){},getApplicableNodeClass:function(){return g},visit:function(d,c,b,a,e){d.addToBody('\x3cimg src \x3d "'+c.imgSrc+'" width \x3d "'+c.width+'" height \x3d "'+c.height+'" alt \x3d "'+c.altText+'" style \x3d "vertical-align: '+c.align+'"\x3e\x3c/img\x3e')}})})},
"MW/rtc/plugins/images/model/ImageNodeContentConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./ImageNodeContentConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/images/model/ImageNodeContentConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/contentconverter/base/LeafNodeContentConverter","./ImageNode"],function(h,e,g){return h(e,{getApplicableNodeClass:function(){return g}})})},
"MW/rtc/plugins/images/view/ImageCoordinateConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./ImageCoordinateConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/images/view/ImageCoordinateConverter":function(){define(["dojo/_base/declare","MW/rtc/plugins/images/model/ImageNode","MW/rtc/view/coordinateconverter/base/OpaqueBoxCoordinateConverter"],function(h,
e,g){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return e},getCoordinateFromPosition:function(d){var c=this.inherited(arguments),b=d.getOffset();c.x-=b?0:1;return c}})})},"MW/rtc/plugins/images/view/ImageLayouterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./ImageLayouter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(d){d.destroy()}})})},
"MW/rtc/plugins/images/view/ImageLayouter":function(){define(["dojo/_base/declare","MW/rtc/model/NodeUtilities","MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter","../model/ImageNode"],function(h,e,g,d){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return d},layout:function(c,b){var a={"class":"imageNode"};0<=b.width&&(a.width=b.width);0<=b.height&&(a.height=b.height);a.style=b.align?"vertical-align: "+b.align:"vertical-align: baseline";b.imgSrc&&(a.src=b.imgSrc.replace(/\n|\r/g,
""));b.altText&&(a.alt=b.altText);b.textContainer().tempAlign=e.isFreestandingOpaque(b);return c.layoutInto(b,"img",a)}})})},"MW/rtc/plugins/imeinput/IMEInputProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./IMEInput"],function(h,e,g){return h(e,{requires:function(){return{createInstance:"rtc.cursor rtc.document rtc.internaldocument rtc.keyhandler rtc.shadowtextservice rtc.view.movehiddenkeycapture".split(" ")}},createInstance:function(d,c,b,a,e,h){return new g(d,
c,b,a,e,h)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/imeinput/IMEInput":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class dojo/dom-construct dojo/dom-style dojo/has dojo/on MW/rtc/model/DocumentConstants".split(" "),function(h,e,g,d,c,b,a,f,k){return h(null,{constructor:function(a,b,c,d,g,h){this._cursor=a;this._document=b;this._internalDocument=c;this._keyhandler=d;this._keyCapture=this._keyhandler.keyCapture;this._shadowtextservice=g;this._moveHiddenkeyCapture=
h;this._handlers=[];this._handlers.push(f(this._keyCapture,"compositionstart",e.hitch(this,"_handleCompositionstart")));this._handlers.push(f(this._keyCapture,"compositionend",e.hitch(this,"_handleCompositionend")));this._IMEnodeHandle=null;this._currentText=""},destroy:function(){this._handlers.forEach(function(a){a.remove()});this._handlers=[]},_handleServiceUpdate:function(a){a.update(this._currentText)},_inputHandlerIME:function(a){this._currentText=a;this._IMEnodeHandle.update(a)},_handleCompositionstart:function(a){this._cursor.isCursorReadOnly()?
this._keyCapture.value="":(this._cursor.hasSelection()&&this._document.deleteTextAtCurrentPosition(k.FORWARD_DELETE),this._keyhandler.setInputHandler(e.hitch(this,"_inputHandlerIME")),this._currentText="",a={text:"",cssClass:"composingInIME",updateCallback:e.hitch(this,"_handleServiceUpdate"),caretRightAligned:!0},this._IMEnodeHandle=this._shadowtextservice.requestTextAfterCursor(a),a=b.getComputedStyle(this._cursor.getNode().box),b.set(this._keyCapture,"fontSize",a.fontSize),this._moveHiddenkeyCapture.moveHiddenKeyCaptureToCaret(!0))},
_handleCompositionend:function(b){this._IMEnodeHandle.remove();this._IMEnodeHandle=null;this._currentText="";this._keyhandler.setDefaultInputHandler();(a("trident")||54<a("chrome"))&&this._keyhandler.handleInput({});this._moveHiddenkeyCapture.moveHiddenKeyCaptureToCaret(!1)}})})},"MW/rtc/plugins/indentation/IndentationProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./Indentation"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.cursor",
"rtc.actionservice","rtc.internaldocument","rtc.keyhandler","rtc.indentutilities"]}},createInstance:function(d,c,b,a,e){return new g(d,c,b,a,e)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/indentation/Indentation":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/model/CodeUtilities MW/rtc/model/DocumentConstants MW/rtc/model/DocumentUtilities MW/rtc/model/NodeUtilities MW/rtc/RichTextComponentFeatureEnum dojo/i18n!l10n/nls/actions".split(" "),
function(h,e,g,d,c,b,a,f,k,l){return h(d,{constructor:function(a,b,c,d,f){this._cursor=a;this._actionService=b;this._internalDocument=c;this._keyhandler=d;this._indentUtilities=f;this._addActions();this._addKeyBindings();this.own(g.after(this._cursor,"onChange",e.hitch(this,this._updateActiveSection)));this.own(g.after(this._internalDocument,"onDocumentChanged",e.hitch(this,this._updateActionsOnDocumentChange),!0))},_addActions:function(){this._actions=[{id:k.INDENT.INDENT_ACTION,enabled:!0,key:"ctrl_]",
platformKey:{mac:"meta_]"},description:l.indentDescription,callback:e.hitch(this,"_indentCallback")},{id:k.INDENT.OUTDENT_ACTION,enabled:!0,key:"ctrl_[",platformKey:{mac:"meta_["},description:l.outdentDescription,callback:e.hitch(this,"_unindentCallback")},{id:"rtc_format_code_tab",key:"tab",enabled:!0,callback:e.hitch(this,"_tabIndentCallback")}];this._actionService.loadActions(this._actions)},_indentCallback:function(){if(this._actionService.getAction(k.INDENT.INDENT_ACTION).enabled)return this._indentCode(e.hitch(this._indentUtilities,
"indentSelection"))},_unindentCallback:function(){if(this._actionService.getAction(k.INDENT.OUTDENT_ACTION).enabled)return this._indentCode(e.hitch(this._indentUtilities,"unindentSelection"))},_tabIndentCallback:function(){if(this._actionService.getAction(k.INDENT.OUTDENT_ACTION).enabled)return this._tabIndent()},_addKeyBindings:function(){this._keyhandler.addBindings([{key:"shift_tab",action:k.INDENT.OUTDENT_ACTION}])},_indentCode:function(b){if(this._isCodeInSelection())return b(a.DEFAULT_TAB_STRING),
!0},_tabIndent:function(){if(!this._cursor.hasSelection())return!1;this._indentCode(e.hitch(this._indentUtilities,"indentSelection"));return!0},_updateActionsOnDocumentChange:function(a){a&&e.isArray(a)&&a.some(function(a){if(a.type===b.READONLY_STATE_CHANGE_EVENT)return this._updateActiveSection(),!0},this)},_updateActiveSection:function(){var a=!this._cursor.isCursorReadOnly(),a=this._isCodeInSelection()&&a;this._actionService.updateAction(k.INDENT.INDENT_ACTION,{enabled:a});this._actionService.updateAction(k.INDENT.OUTDENT_ACTION,
{enabled:a});this._actionService.updateAction("rtc_format_code_tab",{enabled:a})},_isCodeInSelection:function(){var a=this._cursor.selectionInfo();return c.isCodeInRange(a.startNode,a.endNode)},destroy:function(){this._actions.forEach(function(a){this._actionService.removeAction(a.id)},this)}})})},"MW/rtc/plugins/indentutilities/IndentUtilitiesProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/Document","MW/rtc/plugins/indentutilities/IndentUtilities"],
function(h,e,g,d){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.cursor","rtc.internaldocument","rtc.document","rtc.textnodeservice","matlab.tokens"]}},createInstance:function(c,b,a,e,g){return new d(c,b,a,e,g)}})})},"MW/rtc/plugins/indentutilities/IndentUtilities":function(){define("dojo/_base/declare dojo/_base/lang mw-log/Log MW/rtc/model/DocumentConstants MW/rtc/model/DocumentUtilities MW/rtc/model/CodeUtilities MW/rtc/model/NodeUtilities MW/rtc/model/Position MW/rtc/model/events/DocumentEvent MW/rtc/plugins/language/matlab/autoindent/preferences/FunctionIndentingPreferences MW/rtc/plugins/undoredo/EditBlockConstants MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenUtilities mw-utils/Utils".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m){return h(null,{_INDENT_AMOUNT:4,_UNDOREDO_BLOCK_NAME:"AutoIndent",constructor:function(a,b,c,d,e){this._cursor=a;this._textNodeService=d;this._internalDocument=b;this._document=c;this._tokenizerService=e;this.setIndentingStyle(l.MixedFunctionIndenting)},indentSelection:function(a,b){this._indentSelection(1,a,b)},unindentSelection:function(a){this._internalDocument.root.getTextForPositioning().length&&this._indentSelection(-1,a)},setIndentingStyle:function(a){this._indentingStyle=
a},_indentSelection:function(a,b,c){var d=this._document.startEdit(n.INDENT),e=this._cursor.selectionInfo(),f=this._internalDocument.getLineNumber(e.startNode.rootContainer()),g=this._internalDocument.getLineNumber(e.endNode.rootContainer());if(a=this._doIndentOrUnindentOnSelection(a,b,e,c))this._generateAndEmitEvents(d,f,g),this._cursor.setPosition(a)},_doIndentOrUnindentOnSelection:function(a,b,c,d){var e=this.getRangeFromSelection(c),f=this._cursor.selectionInfo2cursorPos(c),g=b.length;if(0<a)this.blockIndent(e.start,
e.end,b,d),c=this._adjustSelectionForIndent(c,f,b,d);else{a=this.blockUnindent(e.start,e.end,"",g);if(0===a.length)return this._document.endEdit(),null;c=this._adjustSelectionForUnindent(c,f,a)}return c},_adjustSelectionForIndent:function(a,c,d,e){var f=a.isReversed;d=d.length;var g=this._internalDocument.getLineNode(c.line),h=this._internalDocument.getLineNode(c.anchor.line),k=this._cursor.getNode().parent,l=g.children;if(h)var n=this._cursor.anchor.getNode().parent,m=h.children;var p=1,H=p=0;if(a.isNull){if(b.isCodeContainer(g)||
e)c.column+=f||void 0!==c.column?d:0}else{if(b.isCodeContainer(g)||e)g.childrenAreContainers?f?c.column+=f||c.column?d:0:(p=l.indexOf(k),H=l.indexOf(n),p=p-(-1===H?0:H)+1,c.column+=f||c.column?d*p:0):c.column+=f||c.column?d:0;if(b.isCodeContainer(h)||e)h.childrenAreContainers?f?(H=m.indexOf(n),p=m.indexOf(k),p=H-(-1===p?0:p)+1,c.anchor.column+=!f||c.anchor.column?d*p:0):c.anchor.column+=!f||c.anchor.column?d:0:c.anchor.column+=!f||c.anchor.column?d:0}return c},_adjustSelectionForUnindent:function(a,
c,d){a=a.isReversed;var e=this._internalDocument.getLineNode(c.line),f=this._internalDocument.getLineNode(c.anchor.line);b.isCodeContainer(e)&&(c.column-=a?d[0]:d[1],c.column=Math.max(0,c.column));b.isCodeContainer(f)&&(c.anchor.column-=!a?d[0]:d[1],c.anchor.column=Math.max(0,c.anchor.column));return c},_generateAndEmitEvents:function(a,b,c){b=[k.create(b,c)];a.appendUndoEvents(b);a.appendRedoEvents(b);this._document.endEdit();this._internalDocument.emitDocumentEvents(b)},getRangeFromSelection:function(a){var b=
a.startNode.rootContainer(),c=a.endNode.rootContainer(),d=c.childrenAreContainers;b.childrenAreContainers&&(b=a.startNode.parent);d&&(c=a.endNode.parent);var e=0;0===a.endPos&&b!==c&&!d?(c=c.previousSibling(),e=0):e=c.maxOffset();return{start:b,end:c,endLength:e}},blockIndent:function(a,c,d,e){for(var f=null;!f||f!==c;)(b.isCodeContainer(a)||e)&&this.indentContainer(a,d),f=a,a=this._getNextContainer(a)},blockDeltaIndent:function(a,c,d,e){for(var f=null,g=0,h=!1,k=0;!f||f!==c;)b.isCodeContainer(a)&&
!a.isReadOnly()&&(f=d[g],0<f?(this.indentContainer(a,e.substring(0,f)),h=!0):0>f&&(k=this.unindentContainer(a,-f))&&(h=!0),m.isWhitespace(a.getText())||0!==this.rightTrimContainer(a)&&(h=!0)),f=a,a=a.nextSibling(),g+=1;return h},blockUnindent:function(a,c,d,e){for(var f=null,g=-1,h=!1,k=0,l=0<d.length;!f||f!==c;)b.isCodeContainer(a)&&!a.isReadOnly()&&(k=l?this.unindentContainerByString(a,d,e):this.unindentContainer(a,e),0>g&&(g=k),k&&(h=!0)),f=a,a=this._getNextContainer(a);return!h?[]:[g,k]},_getNextContainer:function(a){var b=
a.nextSibling();return b?b:(a=a.rootContainer().nextSibling())&&a.childrenAreContainers?a.children[0]:a},indentContainer:function(a,b){var c=a.startNode();if(c){var c=new f(c,0),d=this._textNodeService.createTextNodeForPosition(b,c);this._internalDocument.insertAtPosition(d,c)}},unindentContainer:function(a,b){var c=a.getText(),d=0;if(b&&0<b)if((c=c.substr(d,b).match(/\s*/))&&c[0])d+=c[0].length;else return 0;return this._internalDocument.deleteTextRange(a,d,!1,!0)},unindentContainerByString:function(a,
b,c){var d=a.getText(),e=d.indexOf(b);if(0>e)return 0;b=b.length;c&&0<c&&(c=d.substr(e+b,c).match(/\s*/))&&c[0]&&(b+=c[0].length);return this._internalDocument.deleteTextRange(a,b,e,!0)},rightTrimContainer:function(a){var b=0,c=0;if((b=a.getText().match(/\s*$/))&&b[0])c=b.index,b=b[0].length;else return 0;return this._internalDocument.deleteTextRange(a,b,c,!0)},skipWhiteSpaces:/\S|$/,_indentDelta:function(a,b){var c=a.search(this.skipWhiteSpaces);return b.search(this.skipWhiteSpaces)-c},getIndentLevel:function(a){return a.getText().search(this.skipWhiteSpaces)},
getIndentForLineNumber:function(a){a=this._internalDocument.getLineNode(a);return this.getIndentLevel(a)},getIndentArray:function(a,b){var c=[],d,e=0;for(d=0;d<a.length;d+=1){var f=this._indentDelta(a[d],b[d]);c.push(f);e<f&&(e=f)}c.push(e);return c},changeLineIndent:function(a,b){g.assert(0!==b,"Delta should not be zero");var c=this._internalDocument.getLineNode(a),d=this._document.startEdit(),e;0<b?e=this._indentContainer(c,b):0>b&&(e=this._unindentContainer(c,-b));this._cursor.setPosition(e);c=
k.create(a,a);d.appendUndoEvents([c]);d.appendRedoEvents([c]);this._document.endEdit();this._internalDocument.emitDocumentEvents([c])},_indentContainer:function(a,b){g.assert(0<b,"Amount to indent should be greater than zero");var d=c.getWhitespaceStringOfLength(b);this.indentContainer(a,d);var e=this._cursor.getPosition();e.column<d.length&&(e.column+=d.length);return e},_unindentContainer:function(a,b){g.assert(0<b,"Amount to un-indent should be greater than zero");this.unindentContainer(a,b);return this._cursor.getPosition()},
format:function(a){var b=this._tokenizerService.getLexStateForLine(a),c=0;b&&this._tokenizerService.isLineContinuation(b)?c=this.processLineContinuations(a):b&&!this._tokenizerService.isLineContinuation(b)&&(c=this.processNonLineContinuations(a));b=this.findFirstNonWhitespaceTokenInLine(a);c=this._findIndentLevel(b,a,c);b=this.getDeltaOfIndent(a,c);0!==b&&this._document.undoable(e.hitch(this,"changeLineIndent",a,b),this._UNDOREDO_BLOCK_NAME);return c},processLineContinuations:function(a){var b=0,
c=null;0<a&&(c=this._tokenizerService.getLexStateForLine(a-1));a=!0;c&&this._tokenizerService.isLineContinuation(c)&&(a=!1);a&&(b=this._INDENT_AMOUNT);return b},processNonLineContinuations:function(a){for(var b=null,c=0,d=!1,e=a;!d;){var f=this._isCodeLineEmpty(e-1);0<a&&(b=this._tokenizerService.getLexStateForLine(e-1));if(b&&this._tokenizerService.isLineContinuation(b))c=-this._INDENT_AMOUNT,d=!0;else if(!f||!b)d=!0;e-=1}return c},_isCodeLineEmpty:function(a){if(0<=a)return!this._document.isLineCode(a+
1)||""===this._document.getLineText(a+1)},findFirstNonWhitespaceTokenInLine:function(a){for(a=this._tokenizerService.getFirstTokenOnLine(a);null!==a&&p.isWhitespaceToken(a);)a=this._tokenizerService.getNextTokenOf(a);return a},_findIndentLevel:function(a,b,c){var d=-1;if(null!==a){var e=this._findStartTokenForMidBlock(a,b);null!==e?d=this._getIndentLevelForMidToken(e):p.isTokenEndOfBlock(a)?d=this._getIndentLevelForEndToken(a,b):p.isFunctionToken(a)&&this._isTokenNestedFunction(a)&&(d=this._getIndentLevelForFunctionToken(a,
b))}if(0>d){a=this._findNonWhitespaceAndComment(a,null,!0,b);if(null!==a)if(b=this.findFirstNonWhitespaceTokenInLine(a.getLineNumber()),p.isTokenEndOfBlock(a)&&a.equals(b)){if(d=this.getTokenIndent(a),this._indentingStyle===l.MixedFunctionIndenting||this._indentingStyle===l.ClassicFunctionIndenting)(a=this.findCorrespondingStartToken(a,a._line))&&this._isTokenNestedFunction(a,a._line&&this._indentingStyle===l.ClassicFunctionIndenting)&&(d-=this._INDENT_AMOUNT)}else null!==b&&(d=this.searchBackAndCalculateIndent(a,
b));d+=c}0>d&&(d=0);return d},_findStartTokenForMidBlock:function(a,b){var c=null;p.isTokenStartOfMidBlock(a)&&(c=this.findCorrespondingStartToken(a,b));return c},findCorrespondingStartToken:function(a,b){var c=0;for(a=this._findToken(a,b);null!==a;){if(p.isTokenStartOfBlock(a))if(0===c)break;else{if(0>(c-=1))return null}else p.isTokenEndOfBlock(a)&&(c+=1);a=this._findToken(a,b)}return a},_findToken:function(a,b){g.assert(null!==a,"Input token should not be null");for(var c=this._tokenizerService.getPreviousTokenOf(a,
b);null!==c;){if(p.isTokenStartOfBlock(c)||p.isTokenEndOfBlock(c)||p.isTokenStartOfMidBlock(c))return c;c=this._tokenizerService.getPreviousTokenOf(c,b)}return null},_isTokenNestedFunction:function(a,b){return p.isFunctionToken(a)&&null!==this._findMatchingFunctionToken(a,b)},searchBackAndCalculateIndent:function(a,b){for(var c=0,d=a;null!==d;){a=d;if(p.isTokenStartOfBlockIndent(a)){if(!p.isFunctionToken(a)||this._indentingStyle===l.AllFunctionIndent||p.isIndentableFunction(a)&&this._indentingStyle===
l.MixedFunctionIndenting)if(a.equals(b)||p.isTokenStartOfBlock(a))c+=1}else p.isTokenEndOfBlock(a)&&!a.equals(b)&&(c-=1,this._indentingStyle===l.MixedFunctionIndenting&&(d=this.findCorrespondingStartToken(a,a._line))&&this._isTokenNestedFunction(d)&&c--);d=this._findNonWhitespaceAndComment(a,b,!0)}return this.getTokenIndent(a)+c*this._INDENT_AMOUNT},_findMatchingFunctionToken:function(a,b){var c=null;if(p.isFunctionToken(a)||p.isNestedToken(a))c=this.findCorrespondingStartToken(a,b);return c},_getIndentLevelForMidToken:function(a){var b=
this.getTokenIndent(a);p.isSwitchToken(a)&&(b+=this._INDENT_AMOUNT);return b},_getIndentLevelForEndToken:function(a,b){var c=-1,d=this.findCorrespondingStartToken(a,b);null!==d&&(c=this.getTokenIndent(d));return c},_getIndentLevelForFunctionToken:function(a,b){var c=-1,d=this._findMatchingFunctionToken(a,b);null!==d&&(c=this.getTokenIndent(d)+this._INDENT_AMOUNT);return c},getTokenIndent:function(a){return this.getIndentForLineNumber(a.getLineNumber())},getDeltaOfIndent:function(a,b){g.assert(0<=
b,"Indent should be greater than or equal to zero");var c=this.getIndentForLineNumber(a);return b-c},_findNonWhitespaceAndComment:function(a,b,c,d){if(c){if(null!==a&&a.equals(b))return null;a=this._tokenizerService.getPreviousTokenOf(a,d);null!==b&&(b=this._tokenizerService.getPreviousTokenOf(b,d))}for(;null!==a&&!a.equals(b);){if(this.isNotWhitespaceOrComment(a))return a;a=c?this._tokenizerService.getPreviousTokenOf(a,d):this._tokenizerService.getNextTokenOf(a)}return null},isNotWhitespaceOrComment:function(a){g.assert(null!==
a,"Token passed in cannot be null");return p.isWhitespaceToken(a)&&!p.isSectionTitleToken(a)||p.isBlockCommentToken(a)||p.isCommentToken(a)&&!this.findFirstNonWhitespaceTokenInLine(a.getLineNumber()).equals(a)?!1:!0}})})},"MW/rtc/plugins/language/matlab/autoindent/preferences/FunctionIndentingPreferences":function(){define([],function(){return{AllFunctionIndent:"AllFunctionIndent",MixedFunctionIndenting:"MixedFunctionIndent",ClassicFunctionIndenting:"ClassicFunctionIndent"}})},"MW/rtc/plugins/hyperlink/HyperlinkInsertionRulesProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./HyperlinkInsertionRules"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/hyperlink/HyperlinkInsertionRules":function(){define("dojo/_base/declare mw-log/Log MW/rtc/plugins/hyperlink/model/HyperlinkNode MW/rtc/plugins/insertionrules/BaseInsertionRules MW/rtc/plugins/insertionrules/InsertionRuleConstants MW/rtc/plugins/insertionrules/receivinginstructions/ContinueUpInstruction MW/rtc/plugins/insertionrules/receivinginstructions/InsertIfCompatibleInstruction MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNode".split(" "),
function(h,e,g,d,c,b,a,f){return h([d],{_compatibleParents:[f],constructor:function(){},destroy:function(){},getApplicableNodeClass:function(){return g},getReceivingInstruction:function(c){return c.isAtEdge()?new b:new a},getTopLevelInsertionInstruction:function(a,b,d,e,g){return{insertInRoot:{relationToPosition:c.RELATION.AFTER,containerConstructor:f}}}})})},"MW/rtc/plugins/insertionrules/InsertionRuleServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"./InsertionRuleService"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.insertionrule"]}},createInstance:function(d){return new g(d)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/insertionrules/InsertionRuleService":function(){define(["dojo/_base/declare","MW/rtc/core/NodeMap","MW/rtc/plugins/insertionrules/InsertionRuleConstants"],function(h,e,g){return h(null,{RECEIVING_INSTRUCTION:g.RECEIVING_INSTRUCTION,RELATION:g.RELATION,constructor:function(d){this._rules=
new e(d)},destroy:function(){},getRulesForNode:function(d){var c=this._rules.get(d);if(!c)throw Error("MW.rtc.plugins.insertionrules.InsertionRuleService: No rule for node of type: "+d.className);return c},isInstructionOfType:function(d,c){return d.getType()===c}})})},"MW/rtc/plugins/lists/model/ListParagraphContentConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./ListParagraphContentConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},
createInstance:function(){return new g}})})},"MW/rtc/plugins/lists/model/ListParagraphContentConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/contentconverter/base/InnerNodeContentConverter","./ListParagraph"],function(h,e,g){return h(e,{getApplicableNodeClass:function(){return g}})})},"MW/rtc/plugins/lists/model/ListParagraph":function(){define(["dojo/_base/declare","MW/rtc/nodes/InnerNode"],function(h,e){return h([e],{constructor:function(e,d){d&&(this.type=d.type,this.anchorId=
d.anchorId);this.type=this.type||"unordered";this.wrappable=!0},className:"ListParagraph",CHILD_TEXT_SEPARATOR:"\n",containerType:function(){return this.type},getDefaultChild:function(){return{className:"ListItem"}},isEmpty:function(){return 1<this.children.length?!1:this.inherited(arguments)},resetUniqueAttributes:function(){},isSameTypeAs:function(e){return this.className===e.className&&this.type===e.type},isTextContainerNode:function(){return!0},canSpliceContainers:function(e,d){return"ordered"===
e.type&&"ordered"===d.type||"ordered"!==e.type&&"ordered"!==d.type},canMergeContainerWithSibling:function(e,d){return"ordered"===e.type&&"ordered"===d.type||"ordered"!==e.type&&"ordered"!==d.type},_serializeAttributes:function(e){e.type=this.type;this.anchorId&&(e.anchorId=this.anchorId)},childrenAreContainers:!0})})},"MW/rtc/plugins/lists/model/ListItemContentConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./ListItemContentConverter"],function(h,
e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/lists/model/ListItemContentConverter":function(){define(["dojo/_base/declare","MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNodeContentConverter","./ListItem"],function(h,e,g){return h(e,{getApplicableNodeClass:function(){return g}})})},"MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNodeContentConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/contentconverter/base/InnerNodeContentConverter",
"./RichTextParagraphNode"],function(h,e,g){return h(e,{getApplicableNodeClass:function(){return g}})})},"MW/rtc/plugins/lists/model/ListItem":function(){define(["dojo/_base/declare","MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNode"],function(h,e){return h([e],{constructor:function(e,d){d&&(this.bullet=d.bullet)},className:"ListItem",containerType:function(){return this.parent.type},isTextContainerNode:function(){return!0},offsetInContainer:function(e){var d,c=0;e=e||this.rootContainer();
for(var b=0;b<e.children.length;b++){d=e.children[b];if(this===d)return c;c=c+d.maxOffset()+e.CHILD_TEXT_SEPARATOR.length}return-1},_serializeAttributes:function(e){this.inherited(arguments);this.bullet&&(e.bullet=this.bullet)}})})},"MW/rtc/plugins/lists/ListParagraphInsertionRulesProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./ListParagraphInsertionRules"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},
destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/lists/ListParagraphInsertionRules":function(){define(["dojo/_base/declare","MW/rtc/plugins/insertionrules/BaseInsertionRules","MW/rtc/plugins/insertionrules/InsertionRuleConstants","MW/rtc/plugins/lists/model/ListParagraph"],function(h,e,g,d){return h([e],{_compatibleParents:[],constructor:function(){},destroy:function(){},getApplicableNodeClass:function(){return d},getTopLevelInsertionInstruction:function(c,b,a,e,h){b=c.getNode();return b.isInstanceOf(d)&&
!c.isAtEdge()&&b.containerType()===e.containerType()?{insertAlternateNodes:e.children}:{insertInRoot:{relationToPosition:g.RELATION.AT}}}})})},"MW/rtc/plugins/lists/ListItemInsertionRulesProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./ListItemInsertionRules"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/lists/ListItemInsertionRules":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/insertionrules/BaseInsertionRules","MW/rtc/plugins/insertionrules/InsertionRuleConstants","MW/rtc/plugins/lists/model/ListItem","MW/rtc/plugins/lists/model/ListParagraph"],function(h,e,g,d,c){return h([e],{_compatibleParents:[c],constructor:function(){},destroy:function(){},getApplicableNodeClass:function(){return d},getTopLevelInsertionInstruction:function(b,a,d,e,h){return{insertInRoot:{relationToPosition:g.RELATION.AT,containerConstructor:c}}}})})},"MW/rtc/plugins/codeexample/export/CodeExampleBlock2HTMLProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/codeexample/export/CodeExampleBlock2HTML"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/codeexample/export/CodeExampleBlock2HTML":function(){define(["dojo/_base/declare","MW/rtc/plugins/codeexample/CodeExampleEnum","MW/rtc/plugins/codeexample/model/CodeExampleBlockNode","MW/rtc/plugins/export/html/HTMLExportUtilities","MW/rtc/plugins/export/NodeExporterInterface"],
function(h,e,g,d,c){return h([c],{_STYLES:["margin","padding"],constructor:function(){},getApplicableNodeClass:function(){return g},enter:function(b,a,c){c=d.getStyleValuesForNode(a,this._STYLES);b.addToBody("\x3cdiv class \x3d '"+(a.type===e.MATLAB?"preformatted-matlab":"preformatted-plain")+"' style \x3d '"+c+"'\x3e")},leave:function(b,a,c){b.addToBody("\x3c/div\x3e")}})})},"MW/rtc/plugins/codeexample/model/CodeExampleBlockNodeContentConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"MW/rtc/plugins/codeexample/model/CodeExampleBlockNodeContentConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/codeexample/model/CodeExampleBlockNodeContentConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/contentconverter/base/InnerNodeContentConverter","MW/rtc/plugins/codeexample/model/CodeExampleBlockNode"],function(h,e,g){return h(e,{getApplicableNodeClass:function(){return g}})})},
"MW/rtc/plugins/codeexample/model/CodeExampleLineNodeContentConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/codeexample/model/CodeExampleLineNodeContentConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/codeexample/model/CodeExampleLineNodeContentConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/contentconverter/base/InnerNodeContentConverter",
"MW/rtc/plugins/codeexample/model/CodeExampleLineNode"],function(h,e,g){return h(e,{getApplicableNodeClass:function(){return g}})})},"MW/rtc/plugins/codeexample/model/CodeExampleLineNode":function(){define(["dojo/_base/declare","MW/rtc/nodes/inner/LineNode","MW/rtc/plugins/view/layoutmanager/rules/DefaultRule"],function(h,e,g){return h([e],{constructor:function(d){this.wrappable=!1;this.groupingType=g().groupingType},className:"CodeExampleLineNode",containerType:function(){return this.parent.type},
offsetInContainer:function(d){var c,b=0;d=d||this.rootContainer();for(var a=0;a<d.children.length;a++){c=d.children[a];if(this===c)return b;b=b+c.maxOffset()+d.CHILD_TEXT_SEPARATOR.length}return-1},getIndexInContainer:function(){return this.parent.children.indexOf(this)},_serializeAttributes:function(d){}})})},"MW/rtc/plugins/view/layoutmanager/rules/DefaultRule":function(){define(["dojo/_base/declare","MW/rtc/model/DocumentUtilities","MW/rtc/plugins/view/layoutmanager/abstract/BaseRule"],function(h,
e,g){return h(g,{constructor:function(){},getOperationsForLayout:function(d,c,b){return{nodeToPlace:d}},getOperationsForRemove:function(d,c){return{nodeToRemove:this._getDomNode(d)}},priority:function(){return 0}})})},"MW/rtc/plugins/codeexample/view/CodeExampleBlockLayouterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./CodeExampleBlockLayouter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},
destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/codeexample/view/CodeExampleBlockLayouter":function(){define(["dojo/_base/declare","MW/rtc/plugins/codeexample/model/CodeExampleBlockNode","MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter"],function(h,e,g){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return e},layout:function(d,c){var b=c.isFocused()?" "+c.getFocusedCssClass():"";return d.layoutInto(c,"div",{"class":"CodeExampleBlock "+c.type+b})}})})},
"MW/rtc/plugins/codeexample/view/CodeExampleLineLayouterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./CodeExampleLineLayouter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/codeexample/view/CodeExampleLineLayouter":function(){define(["dojo/_base/declare","MW/rtc/plugins/codeexample/model/CodeExampleLineNode","MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter"],
function(h,e,g){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return e},layout:function(d,c){return d.layoutInto(c,"div",{"class":"CodeExampleLine"})}})})},"MW/rtc/plugins/codeexample/view/CodeExampleBlockCoordinateConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./CodeExampleBlockCoordinateConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/codeexample/view/CodeExampleBlockCoordinateConverter":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/codeexample/model/CodeExampleBlockNode","MW/rtc/view/coordinateconverter/base/VerticalAlignCoordinateConverter"],function(h,e,g){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return e}})})},"MW/rtc/plugins/codeexample/CodeExampleBlockInsertionRulesProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./CodeExampleBlockInsertionRules"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},
destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/codeexample/CodeExampleBlockInsertionRules":function(){define(["dojo/_base/declare","MW/rtc/nodes/inner/LineNode","MW/rtc/plugins/codeexample/model/CodeExampleBlockNode","MW/rtc/plugins/insertionrules/BaseInsertionRules","MW/rtc/plugins/insertionrules/InsertionRuleConstants"],function(h,e,g,d,c){return h([d],{_compatibleParents:[],constructor:function(){},destroy:function(){},getApplicableNodeClass:function(){return g},getTopLevelInsertionInstruction:function(b,
a,d,g,h){return b.isAtRightEdge()&&b.isAtLeftEdge()?{insertInRoot:{relationToPosition:c.RELATION.AT}}:h.isAtRightEdge()&&!d?{insertInRoot:{relationToPosition:c.RELATION.AFTER,insertSibling:!0,siblingConstructor:e}}:{insertInRoot:{insertionPosition:h}}}})})},"MW/rtc/plugins/codeexample/CodeExampleLineInsertionRulesProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./CodeExampleLineInsertionRules"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},
createInstance:function(){return new g},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/codeexample/CodeExampleLineInsertionRules":function(){define("dojo/_base/declare MW/rtc/nodes/leaf/PlainTextNode MW/rtc/plugins/codeexample/model/CodeExampleBlockNode MW/rtc/plugins/codeexample/model/CodeExampleLineNode MW/rtc/plugins/insertionrules/BaseInsertionRules MW/rtc/plugins/insertionrules/InsertionRuleConstants MW/rtc/plugins/insertionrules/receivinginstructions/ContinueUpInstruction".split(" "),
function(h,e,g,d,c,b,a){return h([c],{_compatibleParents:[g],constructor:function(){},destroy:function(){},getApplicableNodeClass:function(){return d},getReceivingInstruction:function(b,c){return!(c instanceof e)?new a:this.inherited(arguments)},getTopLevelInsertionInstruction:function(a,c,d,e,h){return{insertInRoot:{relationToPosition:b.RELATION.AT,containerConstructor:g}}}})})},"MW/rtc/model/io/serializers/providers/containers/CodeExampleBlockContainerSerializerProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/containers/CodeExampleBlockContainerSerializer"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/model/io/serializers/containers/CodeExampleBlockContainerSerializer":function(){define("dojo/_base/declare dojo/_base/lang MW/rtc/model/io/DocumentTag MW/rtc/model/io/serializers/containers/ContainerSerializer MW/rtc/model/io/XmlUtils MW/rtc/plugins/codeexample/CodeExampleEnum".split(" "),
function(h,e,g,d,c,b){return h(d,{_INTRODUCED_VERSION:"R2018a",write:function(a,b,c){var d=document.createElement(this.getNodeType());a.forEach(function(a){this._writeCodeExample(a,d,b,c)},this);return d},read:function(a,b,d,e){var g=!0,h={className:this.getNodeType(),children:[]};h.type=this.getXMLType(e);for(e=0;e<a.childNodes.length;e++){g=a.childNodes[e];g=d.getSerializer(c.getAttribute(g)).read(g,b,d);h.children=h.children.concat(g.readObject);var g=g.readStatus,m=c.getBookmarkStart(a.parentElement);
m&&m.id&&(h.anchorId=m.id)}return{readObject:[h],readStatus:g}},_writeCodeExample:function(a,b,d,e){var h=c.createXMLElement(g.SDT_TAG),p=c.createSdtAliasPropertyElement(c.createXMLElement(g.SDT_PROPERTY_TAG),this.getXMLType(a.type));h.appendChild(p);var m=c.createXMLElement(g.SDT_CONTENT_TAG);h.appendChild(m);a.anchorId&&(p=c.createBookmarkStart(g.BOOKMARK_PREFIX+a.anchorId,a.anchorId),h.appendChild(p));a.children.forEach(function(a){a=e.getSerializer(a.className).write([a],d,e).children;for(var b=
0;b<a.length;b++)m.appendChild(a[b])},this);a.anchorId&&(a=c.createBookmarkEnd(a.anchorId),h.appendChild(a));a=c.createTextParagraph("");h=c.createAlternateContent(this._INTRODUCED_VERSION,h,a);b.appendChild(h)},getXMLType:function(a){if(!a)return"none";for(var c in b)if(b.hasOwnProperty(c)&&b[c]===a)return a;return"none"},getNodeType:function(){return"CodeExampleBlockNode"}})})},"MW/rtc/model/io/serializers/providers/containers/CodeExampleLineContainerSerializerProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/containers/CodeExampleLineContainerSerializer"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/model/io/serializers/containers/CodeExampleLineContainerSerializer":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/model/io/DocumentTag","MW/rtc/model/io/serializers/containers/ContainerSerializer","MW/rtc/model/io/XmlUtils"],function(h,e,
g,d,c){return h(d,{_CHILD_TYPE:"PlainTextNode",write:function(b,a,d){var e=document.createElement(this.getXMLType());b.forEach(function(b){var g=c.createXMLElement(),h=c.createParagraphProperty(this.getXMLType());g.appendChild(h);b.children.forEach(function(b){b=d.getSerializer(b.className).write(b,a,d);g.appendChild(b)});e.appendChild(g)},this);return e},read:function(b,a,c){b=c.getSerializer(this._CHILD_TYPE).read([b]);return{readObject:b.readObject.map(function(a){return{className:this.getNodeType(),
children:[a]}},this),readStatus:b.readStatus}},getXMLType:function(){return"CodeExampleLine"},getNodeType:function(){return"CodeExampleLineNode"}})})},"MW/rtc/plugins/codeexample/CodeExampleBlockKeyHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/codeexample/CodeExampleBlockKeyHandler","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{requires:function(){return{createInstance:["rtc.document","rtc.internaldocument","rtc.cursor","rtc.actionservice"]}},createInstance:function(d,
c,b,a){return new e(d,c,b,a)}})})},"MW/rtc/plugins/codeexample/CodeExampleBlockKeyHandler":function(){define("dojo/_base/declare dojo/_base/lang MW/rtc/abstract/AbstractPlugin MW/rtc/model/DocumentUtilities MW/rtc/model/events/DeletionEvent MW/rtc/model/events/NumberOfLinesChangedEvent MW/rtc/model/Position MW/rtc/model/PositionUtilities MW/rtc/model/SelectionUtilities MW/rtc/plugins/codeexample/model/CodeExampleBlockNode MW/rtc/plugins/richtext/ParagraphFormatsEnum".split(" "),function(h,e,g,d,c,
b,a,f,k,l,n){return h(g,{_REPLACE_CONTAINER_TYPE:n.NORMAL,_DELETE:"delete",_BACKSPACE:"backspace",constructor:function(a,b,c,d){this._document=a;this._internalDocument=b;this._cursor=c;this._actionService=d;d.loadActions([{id:"codeexampleblock.backspace",key:"backspace",enabled:!0,callback:e.hitch(this,"_performBackspaceOrDeleteSequence",this._BACKSPACE)},{id:"codeexampleblock.delete",key:"delete",enabled:!0,callback:e.hitch(this,"_performBackspaceOrDeleteSequence",this._DELETE)},{id:"codeexampleblock.escape",
key:"escape",enabled:!0,callback:e.hitch(this,"_handleEscape")},{id:"codeexampleblock.selectall",enabled:!0,key:"ctrl_a",platformKey:{mac:"meta_a"},callback:e.hitch(this,"_handleSelectAll")}])},_performBackspaceOrDeleteSequence:function(a){var b=this._cursor.getNode().rootContainer();if(this._cursor.hasSelection())return b instanceof l&&this._isContainerSelected(b)?(this._replaceWithDefaultTextContainer(b),!0):!1;var c=null;a===this._BACKSPACE?c=b.previousSibling():a===this._DELETE&&(c=b.nextSibling());
if(c&&!c.firstChild()||a===this._BACKSPACE&&!d.isAtStartOfContainer(this._cursor.position,b)||a===this._DELETE&&!d.isAtEndOfContainer(this._cursor.position,b))return!1;a=null;b instanceof l?a=b:c instanceof l&&(a=c);if(a){if(a.isEmpty())return this._replaceWithDefaultTextContainer(a),!0;b=this._document.startBlockEdit();a.nextNode()?k.setContainerSelection(this._cursor,this._internalDocument,a):(this._cursor.anchor.setPosition(a.startNode(),0),this._cursor.setPosition(a.endNode(),a.endNode().maxOffset(),
!0));this._document.endBlockEdit(b);return!0}return!1},_isContainerSelected:function(a){var b=this._cursor.getSelection(),c=d.isAtStartOfContainer(b.getStartPosition(),a);if(a=a.nextSibling()){if(c&&d.isAtStartOfContainer(b.getEndPosition(),a))return!0}else if(c&&this._cursor.isFileEndSelected())return!0;return!1},_replaceWithDefaultTextContainer:function(d){var e=this._internalDocument.createContainerForType(this._REPLACE_CONTAINER_TYPE).container,f=this._internalDocument.createNode(e.getDefaultChild());
e.addChild(f);var f=this._document.startEdit(),g=new a(d,0),h=this._internalDocument.getLineNumber(d);this._internalDocument.insertAtPosition(e,g);this._internalDocument.deleteNode(d,{node:e,offset:0});this._cursor.releaseAnchor();d=[c.create(h,h+1)];f.appendUndoEvents([b.create(h,h+1,1)]);f.appendRedoEvents(d);this._document.endEdit();this._internalDocument.emitDocumentEvents(d);this._cursor.onUpdate(!1,!0)},_handleEscape:function(){var a=this._cursor.getNode().rootContainer();return!this._cursor.hasSelection()&&
a instanceof l&&(a=a.nextNode()?a.nextNode().rootContainer():null)?(this._cursor.setPosition(a.startNode(),0,!0),!0):!1},_handleSelectAll:function(){var a=this._cursor.getNode().rootContainer();if(a instanceof l){var b=!1,c=!1,d=a.startNode(),e=a.endNode();if(this._cursor.hasSelection()){var c=!0,a=this._cursor.getSelectionStartNode().rootContainer(),g=this._cursor.getSelectionEndNode().rootContainer();if(a===g){var a=d.startPosition(),g=e.endPosition(),h=this._cursor.getSelection(),k=h.getStartPosition(),
h=h.getEndPosition();if(0!==f.comparePositions(a,k)||0!==f.comparePositions(g,h))b=!0}}else a.isEmpty()||(b=!0);if(b)return c&&this._cursor.internalCollapseSelection(!1),this._cursor.setPosition(d,0),this._cursor.fixAnchor(),this._cursor.setPosition(e,e.maxOffset(),!0),!0}return!1}})})},"MW/rtc/plugins/codeexample/CodeExampleProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/codeexample/CodeExample","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{requires:function(){return{createInstance:"rtc.document rtc.internaldocument rtc.view rtc.cursor rtc.cursor.view rtc.actionservice".split(" ")}},
createInstance:function(d,c,b,a,f,g){return new e(d,c,b,a,f,g)}})})},"MW/rtc/plugins/codeexample/CodeExample":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect mw-log/Log MW/rtc/abstract/AbstractPlugin MW/rtc/model/DocumentConstants MW/rtc/model/DocumentUtilities MW/rtc/model/events/NumberOfLinesChangedEvent MW/rtc/model/NodeUtilities MW/rtc/plugins/codeexample/CodeExampleEnum MW/rtc/plugins/codeexample/model/CodeExampleBlockNode MW/rtc/plugins/codeexample/model/CodeExampleLineNode MW/rtc/RichTextComponentFeatureEnum".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m){return h(c,{constructor:function(a,b,c,d,f,h){this._document=a;this._internalDocument=b;this._view=c;this._cursor=d;this._actionService=h;a=[{name:l.MATLAB,method:e.hitch(this,this.formatTemplate,l.MATLAB)},{name:l.PLAIN,method:e.hitch(this,this.formatTemplate,l.PLAIN)}];b.registerFormatTemplates(a);this.own(g.after(f,"onChange",e.hitch(this,"_updateView")));this.own(g.after(this._cursor,"onChange",e.hitch(this,this._updateActions)));this.own(g.after(this._cursor,
"onChange",e.hitch(this,this._fixPartialSelection)));h.loadActions(this._actions())},formatTemplate:function(a){var b={};b.container=new n([],{type:a});b.textContainer=new p([]);b.container.addChild(b.textContainer,0);return b},_actions:function(){return[{id:m.CODE_EXAMPLE.DEFAULT_ACTION,enabled:!1,selected:!1,callback:e.hitch(this,"_insertDefaultCallback")},{id:m.CODE_EXAMPLE.MATLAB_ACTION,key:"ctrl_alt_m",platformKey:{mac:"ctrl_alt_m"},enabled:!1,selected:!1,callback:e.hitch(this,"_insertMatlabCallback")},
{id:m.CODE_EXAMPLE.PLAIN_ACTION,key:"ctrl_alt_k",platformKey:{mac:"ctrl_alt_k"},enabled:!1,selected:!1,callback:e.hitch(this,"_insertPlainCallback")}]},_insertDefaultCallback:function(){if(this._actionService.getAction(m.CODE_EXAMPLE.DEFAULT_ACTION).enabled)return this._insertCodeExample(l.MATLAB)},_insertMatlabCallback:function(){if(this._actionService.getAction(m.CODE_EXAMPLE.MATLAB_ACTION).enabled)return this._insertCodeExample(l.MATLAB)},_insertPlainCallback:function(){if(this._actionService.getAction(m.CODE_EXAMPLE.PLAIN_ACTION).enabled)return this._insertCodeExample(l.PLAIN)},
_updateActions:function(){var a=this._getParagraphFormat();this._actionService.updateAction(m.CODE_EXAMPLE.DEFAULT_ACTION,{enabled:this._canSetFormat(),selected:a===l.MATLAB});this._actionService.updateAction(m.CODE_EXAMPLE.MATLAB_ACTION,{enabled:this._canSetFormat(),selected:a===l.MATLAB});this._actionService.updateAction(m.CODE_EXAMPLE.PLAIN_ACTION,{enabled:this._canSetFormat(),selected:a===l.PLAIN})},_fixedSelectionInfo:function(){var a=this._cursor.selectionInfo();a.isNull||(a=this._cursor.adjustSelection(a,
!0),this._cursor.setPosition(a.startNode,a.startPos),this._cursor.fixAnchor(!0),this._cursor.setPosition(a.endNode,a.endPos),a=this._cursor.selectionInfo());return a},_treatSelection:function(){var a;this._cursor.hasSelection()&&(a=this._cursor.selectedText(),this._document.deleteTextAtCurrentPosition(b.BACKWARD_DELETE));return a},_insertEmptyCodeExample:function(a){var b=this._cursor.position;this._cursor.hasSelection()&&d.assert("_insertEmptyCodeExample: Selection must be empty!");var c=this._internalDocument.createContainerForType(a);
a=c.container;var e=c.textContainer,c=this._internalDocument.createNode(e.getDefaultChild());e.addChild(c);b=this._internalDocument.insertAtPosition(a,b);this._cursor.setPosition(c.startPosition());this._cursor.onUpdate(!1,!0);return b.events},_insertCodeExample:function(b){var c=this._getParagraphFormat();if(this._canSetFormat()&&c!==b){var c=this._cursor.isReversed(),d=this._fixedSelectionInfo(),e=d.startPosition.getLineColumn().line-1,g=d.endPosition.getLineColumn().line-1;this._internalDocument.onPreDocumentChanged({});
var h=this._document.startBlockEdit(),k=this._treatSelection();b=this._insertEmptyCodeExample(b);k&&(k=a.textToContent(k,this._cursor.getNode()),this._document.insertContent(k,this._cursor.position,this._cursor));d.isNull||(k=this._cursor.getNode().rootContainer(),d=k.startPosition().getLineColumn(),k=k.endPosition().getLineColumn(),c?this._cursor.setSelectionLineColumn(k.line,k.column,d.line,d.column):this._cursor.setSelectionLineColumn(d.line,d.column,k.line,k.column));h.appendUndoEvents([f.create(e,
g,-1)]);h.appendRedoEvents(b);this._internalDocument.emitDocumentEvents(b);this._document.endBlockEdit(h);this._cursor.onUpdate(!1,!0);return!0}},_updateView:function(){var a=this._cursor.getSelectionStartContainer();this._prevActiveContainer!==a&&(this._blur(this._prevActiveContainer),this._focus(a),this._prevActiveContainer=a)},_focus:function(a){a instanceof n&&(a.focus(),this._view.applyClassToLine(this._internalDocument.getLineNumber(a),a.getFocusedCssClass()))},_blur:function(a){a instanceof
n&&(a.blur(),this._view.removeClassFromLine(this._internalDocument.getLineNumber(a),a.getFocusedCssClass()))},_fixPartialSelection:function(){if(this._cursor.hasSelection()){var b=this._cursor.getNode().rootContainer(),c=this._cursor.anchor.getNode().rootContainer();if(b!==c){if(c instanceof n)if(this._cursor.isReversed()){if(a.isAtStartOfContainer(this._cursor.anchor,c))return;a.isAtStartOfContainer(this._cursor.anchor,c.nextNode())||(c.nextNode()?this._cursor.anchor.setPosition(c.nextNode().startNode(),
0):this._cursor.anchor.setPosition(c.endNode(),c.endNode().maxOffset()))}else a.isAtStartOfContainer(this._cursor.anchor,c)||this._cursor.anchor.setPosition(c.startNode(),0);b instanceof n&&(this._cursor.suspendChangeEvent(),this._cursor.isReversed()?a.isAtStartOfContainer(this._cursor.position,b)||this._cursor.setPosition(b.startNode(),0,!0):a.isAtStartOfContainer(this._cursor.position,b.nextNode())||(b.nextNode()?this._cursor.setPosition(b.nextNode(),0,!0):this._cursor.setPosition(b.endNode(),b.endNode().maxOffset(),
!0)),this._cursor.activateChangeEvent(!0))}}},_getParagraphFormat:function(){if(!this._cursor)return"none";var a=this._cursor.getSelectionStartNode(),b=this._cursor.getSelectionEndNode();return k.getParagraphFormat({startNode:a,endNode:b})},_canSetFormat:function(){return this._isReadOnly()?!1:!this._isCodeExample()},_isReadOnly:function(){return this._internalDocument&&this._internalDocument.isReadOnly()||this._cursor&&this._cursor.isCursorReadOnly()?!0:!1},_isCodeExample:function(){var a=this._getParagraphFormat(),
b;for(b in l)if(l.hasOwnProperty(b)&&l[b]===a)return!0;return!1}})})},"MW/rtc/plugins/codeexample/syntaxhighlighter/matlab/SyntaxHighlighterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/codeexample/syntaxhighlighter/matlab/SyntaxHighlighter"],function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.internaldocument","rtc.view.decoration"]}},createInstance:function(d,c){return new g(d,
c)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/codeexample/syntaxhighlighter/matlab/SyntaxHighlighter":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/_base/array MW/rtc/abstract/AbstractPlugin MW/rtc/model/DocumentConstants MW/rtc/model/DocumentEventUtilities MW/rtc/model/NodeUtilities MW/rtc/model/Range MW/rtc/plugins/codeexample/CodeExampleEnum MW/rtc/plugins/codeexample/model/CodeExampleBlockNode MW/rtc/plugins/language/matlab/syntaxhighlighter/MatlabTokenColorUtilities MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenizer".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m){return h(c,{constructor:function(a,b){this._internalDocument=a;this._decorator=b.createDecorator();this._tokenizer=new m;this._previousTouchedCodeExampleContainer=null;this.own(g.after(a,"onDocumentChanged",e.hitch(this,"_handleDocumentChanged"),!0));this.own(g.after(a,"onDocumentReset",e.hitch(this,"_handleDocumentReset"),!0))},_handleDocumentChanged:function(b){for(var c=a.finalLineRangeFromEvents(b),d=[],e=c.startLine;e<=c.endLine;e++){var f=this._internalDocument.getLineNode(e);
f&&this._isCodeExampleMATLAB(f)&&d.push(f)}d.forEach(function(a){var c=this._getStartLineToRedrawFrom(a,b);this._redrawSyntaxHighlighting(a,c)},this)},_getStartLineToRedrawFrom:function(a,b){var c=f.getLineNumberForNode(a,this._internalDocument),e=d.filter(b,function(a){if(a.startLine===c&&a.endLine===c)return a});return this._getStartLineByEvent(e[0],a)},_getStartLineByEvent:function(a,c){var d=0;if(!a)return 0;switch(a.type){case b.INSERT_TEXT:var e=a.position.node.textContainer();this._isCodeExampleMATLAB(e)?
d=0:this._isDescendantOfCodeExampleMatlab(e)&&(d=Math.max(e.getIndexInContainer()-1,0));break;case b.INSERT_BREAK_EVENT:for(var f=e=0;f<c.children.length;f++){var g=c.children[f],e=e+(g.getText().length+1);if(e>=a.column){d=g.getIndexInContainer();break}}}return d},_handleDocumentReset:function(){this._updatePreviousTouchedCodeExampleContainer(null);this._tokenizer.initializeLines("");f.getContainersOfNodeType(n,this._internalDocument).filter(this._isCodeExampleMATLAB,this).forEach(function(a){this._redrawSyntaxHighlighting(a,
0)},this)},_redrawSyntaxHighlighting:function(a,b){this._getPreviousTouchedCodeExampleContainer()!==a&&this._tokenizer.initializeLines(a.getText());var c=a.children.length-1;this._tokenizer.retokenize(a.getText(),b,c);var d=this._tokenizer.getTokenMap(),d=p.processTokens(d,b,c),d=this._flattenProcessedTokensRange(d,a),e=a.children[b].startPosition(),f=a.lastChild().endPosition();this._decorator.clearRange(new k(e,f));for(e=b;e<=c;e++)this._decorateLines(d[e]);this._decorator.applyChanges();this._updatePreviousTouchedCodeExampleContainer(a)},
_flattenProcessedTokensRange:function(a,b){var c=f.getLineNumberForNode(b,this._internalDocument);Object.keys(a).forEach(function(d){var e=b.children[d].offsetInContainer();a[d].forEach(function(a){a.range.start.row=c;a.range.end.row=c;a.range.start.column+=e;a.range.end.column+=e},this)},this);return a},_isCodeExampleMATLAB:function(a){return a instanceof n&&a.containerType()===l.MATLAB},_isDescendantOfCodeExampleMatlab:function(a){return this._isCodeExampleMATLAB(a)?!0:a.parent?this._isDescendantOfCodeExampleMatlab(a.parent):
!1},_decorateLines:function(a){a.forEach(function(a){var b=a.range.start,c=a.range.end,b=this._internalDocument.getRangeForLineColumn(b.row+1,b.column+1,c.row+1,c.column+1);this._decorator.setStyle(b,"color",a.color)},this)},_updatePreviousTouchedCodeExampleContainer:function(a){this._previousTouchedCodeExampleContainer=a},_getPreviousTouchedCodeExampleContainer:function(){return this._previousTouchedCodeExampleContainer}})})},"MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenizer":function(){define("dojo/_base/declare dojo/_base/lang mw-log/Log ./MatlabToken ./MatlabTokenGenerator ./MatlabTokenUtilities".split(" "),
function(h,e,g,d,c,b){return h(null,{SHIFT_FOR_LENGTH:8,AND_FOR_TYPE:255,constructor:function(){this._tokenizer=c;this._tokenizer.initialize();this._resetTokenStates()},initializeLines:function(a){a=a.split("\n");var b;this._resetTokenStates();a=this._addNewLineCharacter(a);a.forEach(function(a,c){b=this._tokenizeCode(a,c,this.getLexStateForLine(c));this._replaceLineHandle(c,b)},this)},retokenize:function(a,b,c){var d=Object.keys(this._tokenMap).length;this._assertValidLines(b,c);this._isMultiLineDocumentChange=
c>b;a=a.split("\n");a=this._addNewLineCharacter(a);var e=a.length;b>d&&(b=d);var g=c;d>e?(this._deleteTokenPlaceHolders(c,d,d-e,e),this._deleteLineHandles(b,c)):d<e&&(this._insertTokenPlaceHolders(b,c,e-d),this._insertLineHandles(a,b,c));1<this.getNumberOfSavedStates()&&(g=this._rippleThroughLines(a,b,c));return g},resetStartingTokenizerStateForLine:function(a){var b=this._tokenizer.make_lex_state();this._replaceLineHandle(a-1,b)},_assertValidLines:function(a,b){g.assert(0<=a,"Invalid start line");
g.assert(0<=b,"Invalid end line")},_isMultiLineChange:function(){return this._isMultiLineDocumentChange},_addNewLineCharacter:function(a){for(var b=a.length,c=0;c<b-1;c++)a[c]+="\n";return a},_resetTokenStates:function(){this._tokenMap={};this._lexState=this._tokenizer.make_lex_state();this._savedLexStates=[this._lexState];this._isLineExecutable=[];this._tokensOnLine=[];this._isMultiLineDocumentChange=!1},_deleteTokenPlaceHolders:function(a,b,c,d){for(var e,g=a;g<b;g++)if(this._tokenMap[g]){a=this._tokenMap[g];
for(var h=0;h<a.length;h++)e=a[h],e.setLine(Math.max(0,e.getLineNumber()-c));this._tokenMap[Math.max(0,g-c)]=this._tokenMap[g]}Object.keys(this._tokenMap).reverse().forEach(function(a){a=parseInt(a,10);a>=d&&delete this._tokenMap[a]},this)},_deleteLineHandles:function(a,b){for(var c=b-1;c>=a;c--)this._removeLineHandle(c),this._isLineExecutable.splice(c,1),this._tokensOnLine.splice(c,1)},_removeLineHandle:function(a){a+1<this.getNumberOfSavedStates()&&this._savedLexStates.splice(a+1,1)},_insertTokenPlaceHolders:function(a,
b,c){for(var d=[],e=Object.keys(this._tokenMap).reverse(),g,h=parseInt(e[0],10);h>=a;h--){for(var e=this._tokenMap[h],q=0;q<e.length;q++)g=e[q],g.setLine(g.getLineNumber()+c);this._tokenMap[h+c]=this._tokenMap[h];this._tokensOnLine[h+c]=JSON.stringify(this._tokenMap[h]);this._isLineExecutable[h+c]=this._isLineExecutable[h]}for(h=a;h<=b;h++)this._tokenMap[h]=d},_insertLineHandles:function(a,b,c){var d=[],e=this._createStateHandle(a,b);c=Math.min(c,a.length-1);for(var g=b;g<c;g++)d[g-b]={},this._tokenizer.copy_lex_state(d[g-
b],e),e=this._createStateHandleUsingPreviousHandle(a,g+1,e);for(g=b;g<c;g++)this._insertLineHandle(g,d[g-b])},_insertLineHandle:function(a,b){a+1<this.getNumberOfSavedStates()?this._savedLexStates.splice(a+1,0,b):this._replaceLineHandle(a,b)},_replaceLineHandle:function(a,b){this._savedLexStates[a+1]={};this._tokenizer.copy_lex_state(this._savedLexStates[a+1],b)},_rippleThroughLines:function(a,b,c){this._assertValidLines(b,c);for(var d=!1,e=-1,g=a.length,h,q=!1;!d;)h=this._createStateHandle(a,b),
q=this._isLineUnchanged(b,h),q||(e=b,this._replaceLineHandle(b,h)),b>=c&&q&&(d=!0),b++,b===g&&(d=!0);-1===e&&(e=c);return e},_createStateHandle:function(a,b){var c=this.getLexStateForLine(b);return this._createStateHandleUsingPreviousHandle(a,b,c)},_createStateHandleUsingPreviousHandle:function(a,b,c){return this._tokenizeCode(a[b],b,c)},_tokenizeCode:function(a,b,c){var d=a.length+3,e=[],g=this._tokenizer.lex_line(e,d,c,a,a.length);this._notEnoughRoom(g)&&(g=this._tokenizer.lex_line(e,2*d,c,a,a.length));
this._isLineExecutable[b]=g.isExecutable;this._parseTokens(e,a,b);this._tokensChanged=this._tokensOnLine[b]!==JSON.stringify(this._tokenMap[b]);this._tokensOnLine[b]=JSON.stringify(this._tokenMap[b]);return g.newState},_isLineUnchanged:function(a,b){var c=this.areStatesEqual(b,this.getLexStateForLine(a+1));return this._isMultiLineChange()?c:c&&!this._tokensChanged},_notEnoughRoom:function(a){return-1===a.numTokens},getLexStateForLine:function(a){return this._savedLexStates[a]},getExecutableLineData:function(){return this._isLineExecutable},
isLineContinuation:function(a){return this._tokenizer.is_contin(a)},areStatesEqual:function(a,b){if(a&&b)return this._tokenizer.are_states_equal(a,b)},getNumberOfSavedStates:function(){return this._savedLexStates.length},getTokenMap:function(){return this._tokenMap},getLastToken:function(a){var c=null;(a=this._tokenMap[a])&&a.forEach(function(a){b.isEndOfLineToken(a)||(c=a)},this);return c},getFirstToken:function(a){var c=null;if((a=this._tokenMap[a])&&0<a.length)c=a[0],b.isEndOfLineToken(c)&&(c=
null);return c},getTokenOnLineColumn:function(a,b){for(var c=this.getFirstToken(a);c&&!this.isTokenAtColumn(c,b);)c=this.getNextToken(c);return c},isTokenAtColumn:function(a,b){var c=this.getTokenColumn(a),d=this.getTokenLength(a);return c<=b&&b<=c+d-1},getTokenColumn:function(a){return a._column},getTokenLength:function(a){return a._length},getNextToken:function(a){var c=null,d=this._tokenMap[a.getLineNumber()];a=a.getIndex();d&&(d[a+1]&&!b.isEndOfLineToken(d[a+1]))&&(c=d[a+1]);return c},getPreviousToken:function(a,
b){if(null===a)return this._searchBackForToken(b-1);var c=null;b=a.getLineNumber();var c=this._tokenMap[b],d=a.getIndex();return c&&c[d-1]?c=c[d-1]:this._searchBackForToken(b-1)},getNumberOfTokensOnLine:function(a){return!this._tokenMap[a]?null:this._tokenMap[a].length},_searchBackForToken:function(a){for(var b=this.getLastToken(a);!b&&0<=a;)b=this.getLastToken(a-=1);return b},_parseTokens:function(a,b,c){var e,g=[],h,m,q=a.length,r=0;for(e=0;e<q;e+=1)h=this._extractTokenInfo(a[e]),m=b.substr(r,h.length),
m=new d(e,h.type,c,r,h.length,m),g.push(m),r+=h.length;this._tokenMap[c]=g},_extractTokenInfo:function(a){var b={};b.type=a&this.AND_FOR_TYPE;b.length=a>>this.SHIFT_FOR_LENGTH;return b},destroy:function(){this._tokenMap={};this._tokenizer={};this._lexState={};this._savedLexStates=[];this._isLineExecutable=[]}})})},"MW/rtc/plugins/language/matlab/tokenizer/MatlabToken":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(e,g,d,c,b,a){this._index=e;this._type=g;this._line=
d;this._column=c;this._length=b;this._value=a},getIndex:function(){return this._index},getLength:function(){return this._length},equals:function(e){return e&&this._index===e._index&&this._type===e._type&&this._line===e._line&&this._column===e._column&&this._length===e._length&&this._value===e._value},getColumn:function(){return this._column},getPositionInfo:function(){return{line:this._line,column:this._column}},getLineNumber:function(){return this._line},setLine:function(e){this._line=e},getType:function(){return this._type},
getValue:function(){return this._value}})})},"MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenGenerator":function(){define(["./MatlabTokenConstants"],function(h){var e,g,d,c,b,a,f,k,l;function n(a,b){a+=G[b&127];a=a+" ("+(b>>8);return a+=") "}var p=0,m=1,q=2,r=3,s=4,t=5,u=6,v=7,w=0,x=1,A=2,B=3,F=4,G=[null,"FUNCTION","NESTED","IF","SWITCH","TRY","WHILE","FOR","END","ELSE","ELSEIF","BREAK","RETURN","PARFOR",null,"GLOBAL","PERSISTENT",null,null,null,"CATCH","CONTINUE","CASE","OTHERWISE",null,"CLASSDEF",
null,null,"PROPERTIES",null,"METHODS","EVENTS","ENUMERATION","SPMD","PARSECTION","SECTION",null,null,null,null,"ID","EEND","INT","FLOAT","STRING","DUAL","BANG","QUEST",null,null,"SEMI","COMMA","LP","RP","LB","RB","LC","RC","FEEND",null,"TRANS","DOTTRANS","NOT","AT","DOLLAR","BACKQUOTE","DOUBLEQUOTE",null,null,null,"PLUS","MINUS","MUL","DIV","LDIV","EXP","COLON",null,null,null,"DOT","DOTMUL","DOTDIV","DOTLDIV","DOTEXP","AND","OR","ANDAND","OROR","LT","GT","LE","GE","EQ","NE","EQUALS","CNE","ARROW",
null,null,"EOL","SEOL","CEOL","IEOL",null,"COMMENT","BLKSTART","BLKCOM","BLKEND","CPAD","PRAGMA","DOTDOTDOT","DOTDOT","DEEP_NEST","DEEP_STMT",null,"WHITE",null,"NEGERR","SEMERR","EOLERR","UNTERM","BADCHAR","DEEP_PAREN","FP_ERR","RES_ERR","DEEP_COM","BEGIN_TYPE","END_TYPE","STRING_LITERAL","UNTERM_STRING_LITERAL","LAST_TOKEN"];e=0;g=1;d=2;c=3;b=4;a=5;f=6;k=7;l=8;return function(){function G(){return{cstate:w,lstate:p,indent:0,infun:0,npars:0,ncoms:0,ldsv:0,atlp:0,contin:0,elist:0,haveends:0,begin:1,
spare:0,stack:0,propParseState:-1}}function I(a,b){a.cstate=b.cstate;a.lstate=b.lstate;a.indent=b.indent;a.infun=b.infun;a.npars=b.npars;a.ncoms=b.ncoms;a.ldsv=b.ldsv;a.atlp=b.atlp;a.contin=b.contin;a.elist=b.elist;a.haveends=b.haveends;a.begin=b.begin;a.spare=b.spare;a.stack=b.stack;a.propParseState=b.propParseState}function K(a){a.lstate=p;a.cstate=w;a.atlp=a.contin=a.elist=a.haveends=0;a.indent=a.infun=0;a.npars=a.ncoms=a.stack=0;a.begin=1;a.ldsv=0;a.spare=0}function C(a){if(a>=X)return ia;a=ba.charCodeAt(a);
return!(a&-128)?bb[a]:E}function M(){for(;C(z)!==ia;++z);}function Q(){for(;C(z)!==ia;++z);if(z+1<X){var a=ba[z],b=ba[z+1];("\n"===a&&"\r"===b||"\r"===a&&"\n"===b)&&++z}z<X&&++z}function L(a,b,c,d){3===arguments.length&&(d=0);if(a.length+d<c)return 0;for(;0<c;--c)if(a.charCodeAt(d+c-1)!==b.charCodeAt(c-1))return 0;return 1}function N(a,b,c,d){a=a.slice(b);switch(c){case 2:if(L(a,"if",2))return h.TOKENS.IF;break;case 3:if(L(a,"for",3))return h.TOKENS.FOR;if(L(a,"end",3))return h.TOKENS.END;if(L(a,
"try",3))return h.TOKENS.TRY;break;case 4:if(L(a,"case",4))return h.TOKENS.CASE;if(L(a,"else",4))return h.TOKENS.ELSE;if(L(a,"spmd",4))return h.TOKENS.SPMD;break;case 5:if(L(a,"catch",5))return h.TOKENS.CATCH;if(L(a,"while",5))return h.TOKENS.WHILE;if(L(a,"break",5))return h.TOKENS.BREAK;break;case 6:if(L(a,"elseif",6))return h.TOKENS.ELSEIF;if(L(a,"switch",6))return h.TOKENS.SWITCH;if(L(a,"global",6))return h.TOKENS.GLOBAL;if(L(a,"return",6))return h.TOKENS.RETURN;if(d&&L(a,"events",6))return h.TOKENS.EVENTS;
if(L(a,"parfor",6))return h.TOKENS.PARFOR;break;case 7:if(d&&L(a,"methods",7))return h.TOKENS.METHODS;break;case 8:if(L(a,"function",8))return h.TOKENS.FUNCTION;if(L(a,"continue",8))return h.TOKENS.CONTINUE;if(L(a,"classdef",8))return h.TOKENS.CLASSDEF;break;case 9:if(L(a,"otherwise",9))return h.TOKENS.OTHERWISE;break;case 10:if(L(a,"persistent",10))return h.TOKENS.PERSISTENT;if(d&&L(a,"properties",10))return h.TOKENS.PROPERTIES;break;case 11:if(d&&L(a,"enumeration",11))return h.TOKENS.ENUMERATION}return h.TOKENS.ID}
function J(a,b){var c=z===D?h.TOKENS.IEOL:h.TOKENS.EOL;if(y.npars){if(y.stack&1)return a[b]=z-D<<8|h.TOKENS.SEOL,1;a[b+0]=0|h.TOKENS.EOLERR;a[b+1]=z-D<<8|c;return 2}a[b]=z-D<<8|c;return 1}function O(){if(C(D+1)===Wa){var a;for(a=2;C(D+a)===ha;++a);if(C(D+a)===P)return h.TOKENS.PRAGMA}return h.TOKENS.COMMENT}function T(a,b){var c=0;D=z;z+=3;a[b+c++]=z-D<<8|h.TOKENS.DOTDOTDOT;D=z;M();D!=z&&(a[b+c++]=z-D<<8|h.TOKENS.COMMENT,D=z);Q();a[b+c++]=z-D<<8|h.TOKENS.CEOL;return c}function W(a,b){switch(C(z)){case ha:for(++z;C(z)===
ha;++z);a[b]=z-D<<8|h.TOKENS.WHITE;return 1;case qa:return M(),a[b]=z-D<<8|O(),D=z,Q(),J(a,b+1)+1;case Z:return C(z+1)===Z&&C(z+2)===Z?T(a,b):0;case ia:return Q(),J(a,b);case Aa:return++z,a[b]=z-D<<8|h.TOKENS.SEMI,y.lstate=p,1;case Ba:return++z,a[b]=z-D<<8|h.TOKENS.COMMA,y.lstate=p,1;default:return 0}}function S(){if(z>=X)return 0;switch(C(z)){case Ma:case Na:return C(z+1)===ha?0:1;case Oa:return C(z+1)===ka?0:1;case Z:return C(z+1)===ca?1:0;case P:case ca:case xa:case ta:case Da:case ma:case na:case ua:case La:case Xa:return 1;
default:return 0}}function R(a){return a>>8}function ea(){for(;z<X&&(C(z)===P||C(z)===ca||C(z)===xa);)++z;return y.lstate!==v?N(ba+D,D,z-D,y.cstate===A||y.cstate===F):h.TOKENS.ID}function Y(d,n){var m=C(z);if(y.propParseState===g){if(m!==P&&m!==ta&&m!==ma&&m!==ha&&m!==Z)return y.propParseState=l,0}else if(y.propParseState===b){if(m!==P&&m!==ma&&m!==ha&&m!==Z)return d[n+0]=0|h.TOKENS.END_TYPE,1}else if(y.propParseState===a){if(m!==P&&m!==ma&&m!==ha&&m!==Z)return d[n+0]=0|h.TOKENS.END_TYPE,1}else if(y.propParseState===
f&&m!==ma&&m!==ha&&m!==Z)return d[n+0]=0|h.TOKENS.END_TYPE,1;switch(m){case qa:return y.propParseState!==e&&y.propParseState!==l?(d[n+0]=0|h.TOKENS.END_TYPE,1):0;case ha:return y.propParseState===a&&(y.propParseState=f),0;case ia:return y.propParseState!==e&&y.propParseState!==l?(d[n+0]=0|h.TOKENS.END_TYPE,1):0;case P:if(y.propParseState===g){m=ea();if(m===h.TOKENS.ID)return d[n+0]=0|h.TOKENS.BEGIN_TYPE,d[n+1]=z-D<<8|h.TOKENS.ID,2;y.propParseState=l;d[n+0]=z-D<<8|m;return 1}if(y.propParseState===
a){m=ea();if(m===h.TOKENS.ID)return d[n+0]=z-D<<8|h.TOKENS.ID,1;d[n+0]=0|h.TOKENS.END_TYPE;d[n+1]=z-D<<8|m;return 2}return y.propParseState===f?(ea(),d[n+0]=0|h.TOKENS.END_TYPE,2):0;case Z:if(y.propParseState===a){if(C(z+1)===P)return++z,d[n+0]=z-D<<8|h.TOKENS.DOT,1;if(C(z+1)===Z&&C(z+2)===Z)y.propParseState=f;else return d[n+0]=0|h.TOKENS.END_TYPE,1}return 0;case ka:switch(y.propParseState){case e:case l:case c:case k:return 0;default:return d[n+0]=0|h.TOKENS.END_TYPE,1}case Ba:switch(y.propParseState){case f:case b:case a:return d[n+
0]=0|h.TOKENS.END_TYPE,1;default:return 0}case Aa:switch(y.propParseState){case f:case b:case a:return d[n+0]=0|h.TOKENS.END_TYPE,1;default:return 0}case ta:return y.propParseState===g?(d[n+0]=0|h.TOKENS.BEGIN_TYPE,1):y.propParseState===f||y.propParseState===a?(d[n+0]=0|h.TOKENS.END_TYPE,1):0;case ma:if(y.propParseState===a)y.propParseState=f;else if(y.propParseState===g)return d[n+0]=0|h.TOKENS.BEGIN_TYPE,1;return 0;case ya:return 0===y.npars&&y.propParseState!==e&&y.propParseState!==l?(d[n+0]=0|
h.TOKENS.END_TYPE,1):1===y.npars&&y.propParseState===c?(++z,d[n+0]=z-D<<8|h.TOKENS.RP,1):0;case za:if(0===y.npars){if(y.propParseState!==e&&y.propParseState!==l)return d[n+0]=0|h.TOKENS.END_TYPE,1}else if(1===y.npars&&y.propParseState===k)return++z,d[n+0]=z-D<<8|h.TOKENS.RC,d[n+1]=0|h.TOKENS.END_TYPE,2;return 0;default:return 0}}function $(a,b){var c;if(z>=X)return ja&&!y.begin?(D=z=X,J(a,b)):0;D=z;if(y.begin&&(c=oa(a,b)))return c;if(y.cstate===F){if(c=Y(a,b),0<c)return c}else if(y.lstate===m){a:{var d;
c=W(a,b);if(!c){for(d=c=0;z<X;++z){switch(C(z)){case na:if(c)continue;if(1===d)if(z+1>=X||C(z+1)!==na)d=0;else{++z;continue}else d=1;continue;case ta:case Da:case ma:d||++c;continue;case ya:case Ia:case za:d||--c;continue;case ha:if(d||c)continue;break;case Aa:if(d)continue;break;case ia:break;case qa:if(d)continue;break;case Z:if(d)continue;if(C(z+1)===Z&&C(z+2)===Z)break;continue;case Ba:if(d||c)continue;break;default:continue}break}if(d&&!c)a[b]=z-D<<8|h.TOKENS.UNTERM;else{if(y.ldsv===Ca&&C(D)===
P){for(c=D+1;c<z&&!(C(c)!==P&&C(c)!==ca&&C(c)!==xa);++c);if(c===z){a[b]=z-D<<8|h.TOKENS.ID;c=1;break a}}a[b]=z-D<<8|h.TOKENS.DUAL}c=1}}return c}if(1===y.begin&&y.stack&1&&y.contin&&(y.lstate===r||y.lstate===q)&&S()){if(z>D)return a[b+0]=z-D<<8|h.TOKENS.WHITE,D=z,a[b+1]=z-D<<8|h.TOKENS.COMMA,2;a[b]=z-D<<8|h.TOKENS.COMMA;return 1}switch(C(z)){case Za:return z=X,a[b]=z-D<<8|h.TOKENS.WHITE,1;case ha:for(++z;C(z)==ha;++z);if(y.stack&1&&(y.lstate==r||y.lstate==q)&&S())return a[b+0]=z-D<<8|h.TOKENS.WHITE,
D=z,a[b+1]=z-D<<8|h.TOKENS.COMMA,2;a[b]=z-D<<8|h.TOKENS.WHITE;return 1;case ia:return Q(),J(a,b);case P:for(c=z+1;c<X&&!(C(c)!=P&&C(c)!=ca&&C(c)!=xa);++c);z=c;c=y.lstate==v?h.TOKENS.ID:N(ba,D,z-D,y.cstate===A||y.cstate===F);if(c==h.TOKENS.ID||c==h.TOKENS.END&&(y.npars||y.lstate==u))return c==h.TOKENS.END&&(c=y.npars?h.TOKENS.EEND:h.TOKENS.FEEND),a[b]=z-D<<8|c,1;switch(c){case h.TOKENS.FUNCTION:if(y.infun&&(y.haveends||!y.begin)||y.cstate==A||y.cstate==B)c=h.TOKENS.NESTED}if(y.npars)return a[b+0]=
0|h.TOKENS.RES_ERR,a[b+1]=z-D<<8|c,2;a[b]=z-D<<8|c;return 1;case ca:for(++z;C(z)==ca;++z);if(C(z)==Z)switch(C(z+1)){case Ea:case Fa:case Ga:case Ha:case na:break;default:return++z,c=da(),a[b]=z-D<<8|c,1}if(C(z)==P)return c=da(),a[b]=z-D<<8|c,1;a[b]=z-D<<8|h.TOKENS.INT;return 1;case Z:if(C(z+1)==Z&&C(z+2)==Z)return T(a,b);++z;switch(C(z)){case ca:return c=da(),a[b]=z-D<<8|c,1;case Ea:return++z,a[b]=z-D<<8|h.TOKENS.DOTMUL,1;case Fa:return++z,a[b]=z-D<<8|h.TOKENS.DOTDIV,1;case Ga:return++z,a[b]=z-D<<
8|h.TOKENS.DOTLDIV,1;case Ha:return++z,a[b]=z-D<<8|h.TOKENS.DOTEXP,1;case na:return++z,a[b]=z-D<<8|h.TOKENS.DOTTRANS,1;case Z:return++z,a[b]=z-D<<8|h.TOKENS.DOTDOT,1;default:return a[b]=z-D<<8|h.TOKENS.DOT,1}case qa:if(!ba[D]&&D>=X-1)return X=D,0;M();a[b]=z-D<<8|O();D=z;Q();return 1+J(a,b+1);case Oa:++z;if(C(z)==ka)return++z,a[b]=z-D<<8|h.TOKENS.NE,1;a[b]=z-D<<8|h.TOKENS.NOT;return 1;case ka:++z;if(C(z)==ka)return++z,a[b]=z-D<<8|h.TOKENS.EQ,1;a[b]=z-D<<8|h.TOKENS.EQUALS;return 1;case Ra:++z;if(C(z)==
ka)return++z,a[b]=z-D<<8|h.TOKENS.LE,1;a[b]=z-D<<8|h.TOKENS.LT;return 1;case Sa:++z;if(C(z)==ka)return++z,a[b]=z-D<<8|h.TOKENS.GE,1;a[b]=z-D<<8|h.TOKENS.GT;return 1;case Ja:++z;if(C(z)==Ja)return++z,a[b]=z-D<<8|h.TOKENS.ANDAND,1;a[b]=z-D<<8|h.TOKENS.AND;return 1;case Ka:++z;if(C(z)==Ka)return++z,a[b]=z-D<<8|h.TOKENS.OROR,1;a[b]=z-D<<8|h.TOKENS.OR;return 1;case Ba:return++z,a[b]=z-D<<8|h.TOKENS.COMMA,1;case Aa:++z;if(y.npars&&!(y.stack&1))return a[b+0]=0|h.TOKENS.SEMERR,a[b+1]=z-D<<8|h.TOKENS.SEMI,
2;a[b]=z-D<<8|h.TOKENS.SEMI;return 1;case Ta:return++z,a[b]=z-D<<8|h.TOKENS.COLON,1;case ta:++z;if(y.npars==wa)return a[b+0]=0|h.TOKENS.DEEP_PAREN,a[b+1]=z-D<<8|h.TOKENS.LP,2;a[b]=z-D<<8|h.TOKENS.LP;return 1;case ma:++z;if(y.npars==wa)return a[b+0]=0|h.TOKENS.DEEP_PAREN,a[b+1]=z-D<<8|h.TOKENS.LC,2;a[b]=z-D<<8|h.TOKENS.LC;return 1;case Da:++z;if(y.npars==wa)return a[b+0]=0|h.TOKENS.DEEP_PAREN,a[b+1]=z-D<<8|h.TOKENS.LB,2;a[b]=z-D<<8|h.TOKENS.LB;return 1;case ya:++z;if(0==y.npars)return a[b+0]=0|h.TOKENS.NEGERR,
a[b+1]=z-D<<8|h.TOKENS.RP,2;a[b]=z-D<<8|h.TOKENS.RP;return 1;case Ia:++z;if(0==y.npars)return a[b+0]=0|h.TOKENS.NEGERR,a[b+1]=z-D<<8|h.TOKENS.RB,2;a[b]=z-D<<8|h.TOKENS.RB;return 1;case za:++z;if(0==y.npars)return a[b+0]=0|h.TOKENS.NEGERR,a[b+1]=z-D<<8|h.TOKENS.RC,2;a[b]=z-D<<8|h.TOKENS.RC;return 1;case Xa:return++z,a[b]=z-D<<8|h.TOKENS.QUEST,1;case Wa:return++z,a[b]=z-D<<8|h.TOKENS.SHARP,1;case $a:return++z,a[b]=z-D<<8|h.TOKENS.DOLLAR,1;case ab:return++z,a[b]=z-D<<8|h.TOKENS.BACKQUOTE,1;case La:return++z,
a[b]=z-D<<8|h.TOKENS.AT,1;case Ma:return++z,a[b]=z-D<<8|h.TOKENS.PLUS,1;case Na:return++z,a[b]=z-D<<8|h.TOKENS.MINUS,1;case Ea:return++z,a[b]=z-D<<8|h.TOKENS.MUL,1;case Fa:return++z,a[b]=z-D<<8|h.TOKENS.DIV,1;case Ga:return++z,a[b]=z-D<<8|h.TOKENS.LDIV,1;case Ha:return++z,a[b]=z-D<<8|h.TOKENS.EXP,1;case na:if(0<z&&y.lstate!=s&&y.lstate!=u)switch(C(z-1)){case ya:if(y.atlp)break;case P:case ca:case xa:case Z:case za:case Ia:case na:case ua:return++z,a[b]=z-D<<8|h.TOKENS.TRANS,1}for(++z;C(z)!=ia;++z)if(C(z)==
na)if(C(z+1)==na)++z;else return++z,a[b]=z-D<<8|h.TOKENS.STRING,1;a[b]=z-D<<8|h.TOKENS.UNTERM;return 1;case ua:for(++z;C(z)!=ia;++z)if(C(z)==ua)if(C(z+1)==ua)++z;else return++z,a[b]=z-D<<8|h.TOKENS.STRING_LITERAL,1;a[b]=z-D<<8|h.TOKENS.UNTERM_STRING_LITERAL;return 1;case Ya:if(y.lstate!=p&&C(z+1)==ka)return z+=2,a[b]=z-D<<8|h.TOKENS.CNE,1;M();a[b+0]=z-D<<8|h.TOKENS.BANG;D=z;Q();return 1+J(a,b+1);case xa:case E:for(++z;;){switch(C(z)){case xa:case E:++z;continue}break}a[b]=z-D<<8|h.TOKENS.BADCHAR;
return 1;default:return++z,a[b]=z-D<<8|h.TOKENS.BADCHAR,1}}function da(){for(;z<X&&C(z)==ca;++z);if(z<X&&C(z)==P)switch(ba.charAt(z)){case "d":case "D":case "e":case "E":++z;if(z>=X)return h.TOKENS.FP_ERR;if(C(z)==Ma||C(z)==Na)if(++z,z>=X)return h.TOKENS.FP_ERR;if(C(z)!=ca)return h.TOKENS.FP_ERR;for(;z<X&&C(z)==ca;)++z}z<X&&(C(z)==P&&("i"==ba.charAt(z)||"j"==ba.charAt(z)))&&++z;return h.TOKENS.FLOAT}function ga(a,b){var c,d=0,e=0,f=0,d=!1;if(C(z)!=ha)return q;for(c=z;C(c)==ha;++c);if(c>=X)return q;
if(pa&&b&&(L(ba,"load",4,a)||L(ba,"save",4,a)))d=!0;switch(C(c)){case Z:if(C(c+1)==Z&&C(c+2)==Z)return q;switch(C(c+1)){case ca:return m;case ha:break;case Ha:case Ea:case Fa:case Ga:case na:case ta:return V(c+2);case P:break;default:return m}break;case ka:if(C(c+1)==ka)return V(c+2);case ta:case ya:return q;case ia:case Aa:case Ba:case qa:case ua:return q;case ma:break;case Ja:return C(c+1)==Ja?V(c+2):V(c+1);case Ka:return C(c+1)==Ka?V(c+2):V(c+1);case Oa:return C(c+1)==ka?V(c+2):m;case Ra:case Sa:case Ya:return C(c+
1)==ka?V(c+2):V(c+1);case Ta:case Ma:case Na:case Ea:case Fa:case Ga:case Ha:case La:return V(c+1);case Da:if(d||y.ldsv==ra)return s;default:return m}for(f=e=d=0;c<X;++c){switch(C(c)){case ka:if(!e&&!f&&C(c+1)!=ka)return d?m:q;continue;case Ba:if(!e&&!f&&!d)break;continue;case Z:if(C(c+1)==Z&&C(c+2)==Z)break;continue;case Aa:if(!e||!f||!d)break;continue;case qa:if(!e&&!f)break;continue;case ia:break;case na:e^=1;continue;case ua:f^=1;continue;case ta:case ma:case Da:!e&&!f&&++d;continue;case ya:case za:case Ia:!e&&
!f&&--d;continue;default:continue}break}return m}function V(a){if(C(a)==ha){for(;C(a)==ha;)++a;switch(C(a)){case Z:if(C(a+1)==Z&&C(a+2)==Z||C(a+1)==ca)return q;break;case Ba:case Aa:case ia:case ya:case za:case Ia:case qa:case Ja:case Ka:case Ra:case Sa:case ka:case Ta:case Ea:case Fa:case Ga:case La:case Ha:break;default:return q}}return m}function R(a){return a>>8}function aa(a){for(;a<X;++a){if(C(a)===ia)return z=C(a+1)===ia&&"\r"===ba.charAt(a)?a+1:a,1;if(C(a)!==ha)return 0}z=X;return 1}function oa(a,
b){var c=z;D=z;if(z>=X)return 0;for(;C(c)==ha;)++c;if(0!==y.ncoms){var d=h.TOKENS.BLKCOM;if(C(c)===qa&&(C(c+1)===ma||C(c+1)===za)&&aa(c+2))d=C(c+1)===ma?y.ncoms>=Qa?h.TOKENS.DEEP_COM:h.TOKENS.BLKSTART:h.TOKENS.BLKEND;Q();a[b]=z-D<<8|d;return 1}if(C(c)===ia)return 0;if(C(c)===qa){if(C(c+1)===qa&&(C(c+2)===ia||C(c+2)===ha))return M(),a[b]=z-D<<8|h.TOKENS.CPAD,1;if(C(c+1)===ma&&aa(c+2))return Q(),a[b]=z-D<<8|h.TOKENS.BLKSTART,1}return 0}function fa(n,Q){y.lstate===p&&U===va&&(U=Pa);a:{var N,J=Q>>8;y.begin=
0;if(y.cstate===F)switch(Q&255){case h.TOKENS.EOL:case h.TOKENS.IEOL:y.propParseState===l&&(y.propParseState=e);break;case h.TOKENS.BEGIN_TYPE:y.propParseState=d;break;case h.TOKENS.END_TYPE:y.propParseState=l;break;case h.TOKENS.ID:if(y.propParseState===e)y.propParseState=g;else if(y.propParseState===b||y.propParseState===d)y.propParseState=a;break;case h.TOKENS.COMMA:y.propParseState===l&&0===y.npars&&(y.propParseState=e);break;case h.TOKENS.SEMI:if(y.propParseState===l&&(0===y.npars||!(y.stack&
1)))y.propParseState=e;break;case h.TOKENS.RP:1===y.npars&&y.propParseState===c&&(y.propParseState=b);break;case h.TOKENS.LP:y.propParseState===d&&(y.propParseState=c);break;case h.TOKENS.LC:if(y.propParseState===f||y.propParseState===b||y.propParseState===d)y.propParseState=k}switch(Q&255){case h.TOKENS.COMMENT:case h.TOKENS.DOTDOTDOT:break;case h.TOKENS.BLKSTART:case h.TOKENS.BLKCOM:case h.TOKENS.BLKEND:y.begin=1;break;case h.TOKENS.EOL:case h.TOKENS.IEOL:y.begin=1;y.contin=0;break;case h.TOKENS.SEOL:case h.TOKENS.CEOL:y.contin=
1;y.begin=1;break;case h.TOKENS.LP:y.lstate==t&&(y.atlp=1);case h.TOKENS.ID:case h.TOKENS.EEND:case h.TOKENS.FEEND:y.lstate==t&&(y.lstate=s);default:y.contin=0}if(y.cstate==w)switch(Q&255){case h.TOKENS.WHITE:case h.TOKENS.COMMENT:case h.TOKENS.BLKSTART:case h.TOKENS.BLKCOM:case h.TOKENS.BLKEND:case h.TOKENS.DOTDOTDOT:case h.TOKENS.EOL:case h.TOKENS.IEOL:case h.TOKENS.CEOL:break;case h.TOKENS.CLASSDEF:y.cstate=A;break;default:y.cstate=x}switch(Q&255){case h.TOKENS.ID:case h.TOKENS.EEND:case h.TOKENS.FEEND:switch(y.lstate){case p:N=
z-(Q>>8);var G;b:{G=Q>>8;var H=ba.slice(N),O="pi eps nan NaN inf Inf i j ans".split(" "),I=[2,3,3,3,3,3,1,1,3],T;if(0===H.length)G=1;else{for(T=0;T<O.length;++T)if(G==I[T]&&L(H,O[T],G)){G=1;break b}G=0}}if(G){y.lstate=q;break}y.lstate=ga(N,4===Q>>8);if(pa&&4===Q>>8&&y.lstate!==q&&(L(n,"load",4,J)||L(n,"save",4,J)))y.ldsv=ra;break;case v:case s:case u:y.lstate=q}break;case h.TOKENS.TRY:++y.indent;case h.TOKENS.ELSE:case h.TOKENS.OTHERWISE:case h.TOKENS.CATCH:case h.TOKENS.RETURN:case h.TOKENS.BREAK:case h.TOKENS.CONTINUE:y.npars=
0;y.stack=0;y.lstate=p;break;case h.TOKENS.FUNCTION:y.npars=0;y.stack=0;y.indent=1;y.cstate===A&&(y.cstate=B,y.indent=3);y.infun=y.indent;y.lstate=s;break;case h.TOKENS.NESTED:y.npars=0;y.stack=0;y.indent<Va&&(y.infun=++y.indent);y.cstate===A&&(y.cstate=B,y.indent=3);y.haveends=1;y.lstate=s;break;case h.TOKENS.END:y.npars=0;y.stack=0;0<y.indent&&--y.indent;if(y.cstate===B&&2===y.indent||y.cstate===F){y.cstate=A;y.lstate=s;break}y.cstate===A&&0===y.indent&&(y.cstate=x,y.infun=0);y.indent<y.infun&&
(y.haveends=1,--y.infun);y.lstate=p;break;case h.TOKENS.PROPERTIES:y.cstate=F,y.propParseState=e;case h.TOKENS.METHODS:case h.TOKENS.EVENTS:case h.TOKENS.ENUMERATION:y.npars=0;y.stack=0;++y.indent;y.lstate=s;break;case h.TOKENS.IF:case h.TOKENS.WHILE:case h.TOKENS.FOR:case h.TOKENS.PARFOR:case h.TOKENS.SPMD:case h.TOKENS.PARSECTION:case h.TOKENS.SECTION:case h.TOKENS.SWITCH:++y.indent;case h.TOKENS.ELSEIF:case h.TOKENS.CASE:y.npars=0;y.stack=0;y.lstate=s;break;case h.TOKENS.GLOBAL:case h.TOKENS.PERSISTENT:y.npars=
0;y.stack=0;y.elist=1;y.lstate=s;break;case h.TOKENS.BLKSTART:y.ncoms<Qa&&++y.ncoms;break;case h.TOKENS.BLKEND:0<y.ncoms&&--y.ncoms;break;case h.TOKENS.COMMA:y.npars?y.lstate=s:(y.ldsv=0,y.stack=0,y.lstate=y.cstate===A?s:p);y.elist=0;break;case h.TOKENS.SEMI:y.npars?y.stack&1?y.lstate=s:(y.elist=0,y.npars=0,y.stack=0,y.ldsv=0,y.lstate=y.cstate===A?s:p):(y.ldsv=0,y.stack=0,y.lstate=y.cstate===A?s:p);break;case h.TOKENS.RB:0<y.npars&&(y.npars--,y.stack>>=1);y.ldsv===ra&&0===y.npars?(y.lstate=m,y.ldsv=
Ca):y.lstate=r;break;case h.TOKENS.RC:0<y.npars&&(y.npars--,y.stack>>=1);y.lstate=q;break;case h.TOKENS.RP:0<y.npars&&(y.npars--,y.stack>>=1);y.lstate=q;y.atlp&&(y.lstate=s,y.atlp=0);break;case h.TOKENS.LP:y.npars<wa&&(y.npars++,y.stack<<=1);y.lstate=s;break;case h.TOKENS.LB:y.npars<wa&&(y.npars++,y.stack<<=1,y.stack|=1);y.lstate=s;break;case h.TOKENS.LC:y.npars<wa&&(y.npars++,y.stack<<=1,y.lstate!==q&&(y.stack|=1));y.lstate=s;break;case h.TOKENS.COMMENT:case h.TOKENS.WHITE:case h.TOKENS.PRAGMA:case h.TOKENS.CPAD:case h.TOKENS.DOTDOTDOT:switch(y.lstate){case q:case r:if(y.npars||
y.elist||y.cstate==A)break a;switch(C(z)){case P:case ca:case na:case ua:case Da:case Oa:y.lstate=p;break;case Z:C(z+1)===ca&&(y.lstate=p)}}break;case h.TOKENS.AT:switch(y.lstate){case q:case r:y.elist=1;break;default:y.lstate=t}break;case h.TOKENS.PLUS:case h.TOKENS.MINUS:case h.TOKENS.MUL:case h.TOKENS.DIV:case h.TOKENS.LDIV:case h.TOKENS.EXP:case h.TOKENS.COLON:case h.TOKENS.AND:case h.TOKENS.ANDAND:case h.TOKENS.OR:case h.TOKENS.OROR:case h.TOKENS.NOT:case h.TOKENS.LT:case h.TOKENS.LE:case h.TOKENS.GT:case h.TOKENS.GE:case h.TOKENS.EQ:case h.TOKENS.NE:case h.TOKENS.CNE:case h.TOKENS.DOTMUL:case h.TOKENS.DOTDIV:case h.TOKENS.DOTLDIV:case h.TOKENS.DOTEXP:y.lstate=
s;break;case h.TOKENS.EQUALS:y.lstate=u;y.elist=0;break;case h.TOKENS.DOTTRANS:case h.TOKENS.FLOAT:case h.TOKENS.INT:case h.TOKENS.STRING:case h.TOKENS.STRING_LITERAL:case h.TOKENS.TRANS:y.lstate=r;break;case h.TOKENS.DOT:y.lstate=v;break;case h.TOKENS.SEOL:y.elist=0;y.lstate=s;break;case h.TOKENS.EOL:case h.TOKENS.IEOL:y.elist=0;y.npars=0;y.stack=0;y.ldsv=0;y.lstate=y.cstate===A?s:p;break;case h.TOKENS.CEOL:y.contin=1;break;case h.TOKENS.BANG:y.lstate=p;break;case h.TOKENS.SEMERR:case h.TOKENS.EOLERR:y.stack=
0;y.npars=0;y.elist=0;y.lstate=p;break;case h.TOKENS.NEGERR:y.stack=0;y.npars=0;y.elist=0;y.lstate=r;break;case h.TOKENS.DEEP_PAREN:case h.TOKENS.DEEP_COM:case h.TOKENS.DEEP_NEST:case h.TOKENS.DEEP_STMT:y.stack=0;y.npars=0;y.elist=0;y.lstate=s;break;case h.TOKENS.RES_ERR:case h.TOKENS.FP_ERR:case h.TOKENS.UNTERM:case h.TOKENS.UNTERM_STRING_LITERAL:case h.TOKENS.BADCHAR:case h.TOKENS.SHARP:case h.TOKENS.DOLLAR:case h.TOKENS.BACKQUOTE:y.lstate=r;break;case h.TOKENS.CLASSDEF:y.cstate=A;y.lstate=s;y.indent=
1;y.haveends=1;break;case h.TOKENS.DUAL:y.ldsv===ra&&"-"!==n[J+0]&&(y.ldsv=Ca)}}switch(Q&255){case h.TOKENS.COMMENT:case h.TOKENS.BLKSTART:case h.TOKENS.BLKCOM:case h.TOKENS.BLKEND:case h.TOKENS.WHITE:case h.TOKENS.DOTDOTDOT:case h.TOKENS.CPAD:case h.TOKENS.PRAGMA:case h.TOKENS.EOL:case h.TOKENS.SEOL:case h.TOKENS.IEOL:case h.TOKENS.CEOL:break;case h.TOKENS.FUNCTION:case h.TOKENS.NESTED:case h.TOKENS.CLASSDEF:case h.TOKENS.UNTERM:case h.TOKENS.UNTERM_STRING_LITERAL:case h.TOKENS.DEEP_PAREN:case h.TOKENS.DEEP_COM:case h.TOKENS.DEEP_NEST:case h.TOKENS.DEEP_STMT:case h.TOKENS.FP_ERR:case h.TOKENS.RES_ERR:case h.TOKENS.SEMERR:case h.TOKENS.EOLERR:case h.TOKENS.NEGERR:case h.TOKENS.SHARP:case h.TOKENS.DOLLAR:case h.TOKENS.BACKQUOTE:U=
Ua;break;default:U===Pa&&(U=sa)}}var z=0,X=0,D=0,ba=null,la=null,U=0,ja=0,pa=0,y=G(),ra=1,Ca=2,va=0,Pa=1,sa=2,Ua=3,wa=32,Va=7,Qa=7,E=0,P=1,ca=2,xa=3,ta=4,ya=5,ma=6,za=7,Da=8,Ia=9,La=10,Ma=11,Na=12,Ea=13,Fa=14,Ga=15,Ha=16,Ta=17,Z=18,Ja=19,Ka=20,Ra=21,Sa=22,Oa=23,na=24,Aa=25,Ba=26,ia=27,ka=28,qa=29,Wa=30,ha=31,Ya=32,Xa=33,$a=34,ab=35,ua=36,Za=37,bb=[qa,E,E,E,E,E,E,E,E,ha,ia,ia,ia,ia,E,E,E,E,E,E,E,E,E,E,E,E,Za,E,E,E,E,E,ha,Ya,ua,Wa,$a,qa,Ja,na,ta,ya,Ea,Ma,Ba,Na,Z,Fa,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,Ta,
Aa,Ra,ka,Sa,Xa,La,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,Da,Ga,Ia,Ha,xa,ab,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,ma,Ka,za,Oa,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E];return{lex_line:function(a,b,c,d,f){U=va;I(y,c);ba=d;z=0;X=f;D=0;ja=!0;d=0;var g,k;la=ba;if(0===
f){g=J(a,0);for(f=0;f<g;++f)fa(la,a[f]);return{numTokens:g,newState:y,isExecutable:U===sa}}if(k=y.cstate===F&&y.propParseState!==e&&y.propParseState!==l)if(3<b)a[0]=0|h.TOKENS.BEGIN_TYPE,d=1;else return{numTokens:-1,newState:c,isExecutable:U===sa};for(;d<b-3;){g=$(a,d);if(!g)break;for(f=0;f<g;++f,++d)if(fa(la,a[d]),(a[d]&255)===h.TOKENS.FEEND){var n=a,m=d+f,q=R(a[d+f]);n[m]=q<<8|h.TOKENS.EEND}}if(d>=b-3&&!y.begin)return{numTokens:-1,newState:c,isExecutable:U===sa};k&&(1<d&&(a[1]&255)===h.TOKENS.WHITE)&&
(b=a[0],a[0]=a[1],a[1]=b);return{numTokens:d,newState:y,isExecutable:U===sa}},lex_file:function(a,b,c,d,e){U=va;I(y,c);ba=d;z=0;X=e;ja=!1;D=0;la=ba;for(c=0;c<b-3;c+=e){e=$(a,c);if(!e)break;for(d=0;d<e;++d)fa(la,a[c+d]),(a[c+d]&127)===h.TOKENS.FEEND&&(a[c+d]=a[c+d]>>8<<8|h.TOKENS.EEND)}return{isExecutable:U===sa,newState:y}},make_lex_state:G,copy_lex_state:I,dump_token:n,set_state:function(a){I(y,a)},initialize:function(a,b,c){y=G();K(y);la=ba=a;z=0;X=b;ja=c;U=va},initialize_state:K,in_block_comment:function(a){a||
(a=y);return 0<a.ncoms},are_states_equal:function(a,b){return a.lstate!==b.lstate||a.cstate!==b.cstate||a.indent!==b.indent||a.contin!==b.contin||a.atlp!==b.atlp||a.begin!==b.begin||a.infun!==b.infun||a.ldsv!==b.ldsv||a.ncoms!==b.ncoms||a.elist!==b.elist||a.npars!==b.npars||a.stack!==b.stack||a.haveends!==b.haveends?0:1},is_contin:function(a){return a.contin}}}()})},"MW/rtc/plugins/resizer/ResizerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/resizer/Resizer"],
function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.view"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/resizer/Resizer":function(){define("dijit/popup dijit/TooltipDialog dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-construct dojo/dom-style dojo/on dojo/touch mw-log/Log".split(" "),function(h,e,g,d,c,b,a,f,k,l){return g(null,{_MINIMUM_SIZE:18,constructor:function(a){this._view=a;this._handlers=[]},activate:function(a,c){this._resizer||(l.assert(a,
"Missing initial rectangle!"),this._callbacks=c,this._resizer=this._makeResizer(a),b.place(this._resizer,this._view.getDomtarget()),this._tooltip=new e({"class":"rtcTooltip"}),this._handlers.push(f(this._resizer,"click",function(a){a.preventDefault();a.stopPropagation()})))},deactivate:function(){this._resizer&&(b.destroy(this._resizer),this._resizer=null,this._handlers.forEach(function(a){a.remove()}),this._handlers=[],this._callbacks.closed&&this._callbacks.closed())},moveTo:function(b,c){null!==
b&&a.set(this._resizer,"top",b+"px");null!==c&&a.set(this._resizer,"left",c+"px")},resize:function(b,c){null!==b&&a.set(this._resizer,"width",b+"px");null!==c&&a.set(this._resizer,"height",c+"px")},_trackResize:function(a,b){this._tooltip.set("content",a+" x "+b+"px");return this._callbacks.drag?this._callbacks.drag(a,b):!1},_pointerMove:function(b){if(this._resizer){var c=b.clientX-this._lastClickState.startX,d=b.clientY-this._lastClickState.startY,e=this._lastClickState.currentWidth,f=this._lastClickState.currentHeight,
g=e/f,h=this._lastClickState.dir,c=c*h[0],d=d*h[1],k;h[0]&&h[1]&&!b.altKey?c>d*g?(k=e+c,c=(e+c)/g):(c=f+d,k=(f+d)*g):(k=e+c,c=f+d);k>this._MINIMUM_SIZE&&c>this._MINIMUM_SIZE&&(a.set(this._resizer,"width",k+"px"),a.set(this._resizer,"height",c+"px"));this._tracking||(this._tracking=!0,this._callbacks.startDrag());this._trackResize(this._resizer.clientWidth,this._resizer.clientHeight)||(0>h[0]&&a.set(this._resizer,"left",this._lastClickState.currentLeft+e-k+"px"),0>h[1]&&a.set(this._resizer,"top",this._lastClickState.currentTop+
f-c+"px"));b.preventDefault();b.stopPropagation()}},_pointerUp:function(a){a.preventDefault();a.stopPropagation();this._moveHandle.remove();this._upHandle.remove();h.close(this._tooltip);this._tracking&&(this._resizer&&this._callbacks.endDrag&&this._callbacks.endDrag(this._resizer.clientWidth,this._resizer.clientHeight),this._tracking=!1)},_pointerDown:function(a,b){b.preventDefault();b.stopPropagation();this._lastClickState={startX:b.clientX,startY:b.clientY,currentWidth:this._resizer.clientWidth,
currentHeight:this._resizer.clientHeight,currentTop:this._resizer.offsetTop,currentLeft:this._resizer.offsetLeft,dir:a};this._moveHandle=f(window,k.move,d.hitch(this,"_pointerMove"));this._upHandle=f(window,k.release,d.hitch(this,"_pointerUp"));this._tooltip.set("content",this._resizer.clientWidth+" x "+this._resizer.clientHeight+"px");h.open({popup:this._tooltip,around:b.target})},_makeResizer:function(a){var c,e,g={"class":"gripperFrame"};g.style="width: "+a.width+"px; height: "+a.height+"px; top: "+
a.top+"px; left: "+a.left+"px;";c=b.create("div",g);var h={"top-right":[1,-1],"middle-right":[1,0],"bottom-right":[1,1],"top-center":[0,-1],"bottom-center":[0,1],"top-left":[-1,-1],"middle-left":[-1,0],"bottom-left":[-1,1]};Object.keys(h).forEach(function(a){e=b.create("div",{"class":"gripper "+a});b.place(e,c);this._handlers.push(f(e,k.press,d.hitch(this,"_pointerDown",h[a])))},this);return c}})})},"MW/rtc/plugins/richtext/RichTextNodeInsertionRulesProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./RichTextNodeInsertionRules"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/richtext/RichTextNodeInsertionRules":function(){define(["dojo/_base/declare","MW/rtc/plugins/insertionrules/BaseInsertionRules","MW/rtc/plugins/richtext/nodes/inner/RichTextContainerNode","MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNode","MW/rtc/plugins/richtext/nodes/leaf/RichTextNode"],
function(h,e,g,d,c){return h([e],{_compatibleParents:[g],constructor:function(){},destroy:function(){},getApplicableNodeClass:function(){return c},getTopLevelInsertionInstruction:function(b,a,c,e,g){return{insertInRoot:{insertionPosition:g,containerConstructor:d}}}})})},"MW/rtc/plugins/richtext/RichTextParagraphInsertionRulesProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./RichTextParagraphInsertionRules"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},
createInstance:function(){return new g},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/richtext/RichTextParagraphInsertionRules":function(){define(["dojo/_base/declare","MW/rtc/plugins/insertionrules/BaseInsertionRules","MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNode"],function(h,e,g){return h([e],{_compatibleParents:[],constructor:function(){},destroy:function(){},getApplicableNodeClass:function(){return g},getTopLevelInsertionInstruction:function(d,c,b,a,e){return{insertInRoot:{insertionPosition:e}}}})})},
"MW/rtc/plugins/richtext/view/HeadingLayouterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./HeadingLayouter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/richtext/view/HeadingLayouter":function(){define(["dojo/_base/declare","dojo/dom-class","MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter","../nodes/inner/HeadingNode"],
function(h,e,g,d){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return d},layout:function(c,b){var a={"class":"heading-"+b.level};b.align&&(a.style="text-align: "+b.align+";");return c.layoutInto(b,"h"+b.level,a)}})})},"MW/rtc/plugins/richtext/view/RichTextLayouterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./RichTextLayouter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.view.decoration.viewmodel"]}},
createInstance:function(d){return new g(d)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/richtext/view/RichTextLayouter":function(){define(["dojo/_base/declare","MW/rtc/plugins/view/layoutmanager/layouters/PlainTextLayouter","../nodes/leaf/RichTextNode"],function(h,e,g){return h(e,{constructor:function(d){this._decorationViewModel=d},getApplicableNodeClass:function(){return g},_getStyle:function(d){var c="";d.color&&(c=d.color.hasOwnProperty("r")&&d.color.hasOwnProperty("g")&&d.color.hasOwnProperty("b")?
c+("color: rgb("+d.color.r+","+d.color.g+","+d.color.b+");"):c+("color: "+d.color+";"));d.bold&&(c+="font-weight: bold;");d.italic&&(c+="font-style: italic;");d.underline&&(c+="text-decoration: underline;");d.monospace&&(c+='font-family: Menlo, Monaco, Consolas, "Courier New", monospace;');d.size&&(c+="font-size: "+d.size+";");d.font&&(c+="font-family: "+d.font+";");return c}})})},"MW/rtc/plugins/view/layoutmanager/layouters/PlainTextLayouter":function(){define(["dojo/_base/declare","dojo/dom-construct",
"MW/rtc/nodes/leaf/PlainTextNode","MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter","MW/rtc/view/decoration/DecorationUtilities"],function(h,e,g,d,c){return h(d,{_TEXT_OUTER_CSS:"textBox",_TEXT_INNER_CSS:"textWrapper",constructor:function(b){this._decorationViewModel=b},getApplicableNodeClass:function(){return g},layout:function(b,a){var c=b.layoutInto(a,"span",{"class":this._TEXT_OUTER_CSS});c.hasChildNodes()||this._render(b,a,c);return c},refresh:function(b,a,c,d){this._render(b,a,d);
return d},_render:function(b,a,d){var g=a.getText(),h=this._decorationViewModel.getDecoration(a),n=e.create("span",this._getAttributes(a)),g=c.createViewForTextNode(g,h,n);d.appendChild(g);h.forEach(function(c){c.domNodes.forEach(function(c,e){a===c.rtcPosition.getNode()&&b.insertDomNode(e,c.rtcPosition,c.domPlacement,d)},this)},this)},_getAttributes:function(b){var a={},c=this._getClass(b);c&&(a["class"]=c);(b=this._getStyle(b))&&(a.style=b);return a},_getClass:function(b){var a=this._TEXT_INNER_CSS;
b.cssClass&&(a+=" "+b.cssClass);return a},_getStyle:function(b){return""}})})},"MW/rtc/plugins/richtext/view/RichTextParagraphLayouterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./RichTextParagraphLayouter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/richtext/view/RichTextParagraphLayouter":function(){define(["dojo/_base/declare",
"dojo/dom-class","MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter","../nodes/inner/RichTextParagraphNode"],function(h,e,g,d){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return d},layout:function(c,b){var a={"class":"paragraphNode"};b.align&&(a.style="text-align: "+b.align+";");return c.layoutInto(b,"div",a)}})})},"MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNodeContentConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"./RichTextParagraphNodeContentConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/richtext/nodes/inner/HeadingNodeContentConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./HeadingNodeContentConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/richtext/nodes/inner/HeadingNodeContentConverter":function(){define(["dojo/_base/declare",
"MW/rtc/nodes/contentconverter/base/InnerNodeContentConverter","./HeadingNode"],function(h,e,g){return h(e,{getApplicableNodeClass:function(){return g}})})},"MW/rtc/plugins/richtext/nodes/leaf/RichTextNodeContentConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./RichTextNodeContentConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/richtext/nodes/leaf/RichTextNodeContentConverter":function(){define(["dojo/_base/declare",
"MW/rtc/nodes/contentconverter/base/LeafNodeContentConverter","./RichTextNode"],function(h,e,g){return h(e,{getApplicableNodeClass:function(){return g}})})},"MW/rtc/plugins/save/SaveReadyManagerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/save/SaveReadyManager"],function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{createInstance:["rtc.saveready"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/save/SaveReadyManager":function(){define("dojo/aspect dojo/Deferred dojo/_base/declare dojo/_base/lang MW/rtc/abstract/AbstractPlugin MW/rtc/misc/Synchronizer".split(" "),
function(h,e,g,d,c,b){return g([c],{_SAVE_TIMEOUT:5E3,constructor:function(a){this._saveReadyPlugins=a;this._currentTimeout=this._saveReadyPromise=null},getReadyPromise:function(){if(this._saveReadyPromise)return this._saveReadyPromise;this._saveReadyPromise=new e;(new b(this._saveReadyPlugins)).whenAllReady(d.hitch(this,"_resolveSaveReady"));this._currentTimeout=setTimeout(d.hitch(this,"_resolveSaveReady"),this._SAVE_TIMEOUT);return this._saveReadyPromise},_resolveSaveReady:function(){this._saveReadyPromise&&
(this._saveReadyPromise.resolve(),this._saveReadyPromise=null);this._currentTimeout&&(clearTimeout(this._currentTimeout),this._currentTimeout=null)}})})},"MW/rtc/plugins/sectionbreak/SectionBreakInsertionRulesProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./SectionBreakInsertionRules"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/sectionbreak/SectionBreakInsertionRules":function(){define("dojo/_base/declare MW/rtc/model/Position MW/rtc/nodes/inner/LineNode MW/rtc/plugins/insertionrules/BaseInsertionRules MW/rtc/plugins/insertionrules/InsertionRuleConstants MW/rtc/plugins/insertionrules/receivinginstructions/ContinueUpInstruction MW/rtc/plugins/sectionbreak/model/SectionBreakNode".split(" "),
function(h,e,g,d,c,b,a){return h([d],{_compatibleParents:[],constructor:function(){},destroy:function(){},getApplicableNodeClass:function(){return a},getReceivingInstruction:function(a){return new b},getTopLevelInsertionInstruction:function(b,d,e,h,p){if(b.isAtRightEdge()&&b.isAtLeftEdge())return this._getInstructionForInsertingIntoEmptyLine(d,e);b=b.isAtEdge()||b.node.isUnique?g:b.getNode().constructor;return p.isAtRightEdge()&&(!e||e.isInstanceOf(a))?{insertInRoot:{relationToPosition:c.RELATION.AFTER,
insertSibling:!0,siblingConstructor:b}}:p.isAtLeftEdge()&&(!d||d.isInstanceOf(a))?{insertInRoot:{relationToPosition:c.RELATION.BEFORE,insertSibling:!0,siblingConstructor:b}}:{insertInRoot:{insertionPosition:p}}},_getInstructionForInsertingIntoEmptyLine:function(b,d){return b&&!b.isInstanceOf(a)?{insertInRoot:{relationToPosition:c.RELATION.BEFORE}}:d&&!d.isInstanceOf(a)?{insertInRoot:{relationToPosition:c.RELATION.AFTER}}:{insertInRoot:{relationToPosition:c.RELATION.AFTER,insertSibling:!0,siblingConstructor:g}}}})})},
"MW/rtc/plugins/undoredo/UndoRedoControllerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/undoredo/UndoRedoController"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.undoredo.editblock","rtc.cursor","rtc.cursorcontroller"]}},createInstance:function(d,c,b,a){return new g(d,c,b,a)}})})},"MW/rtc/plugins/undoredo/UndoRedoController":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/plugins/undoredo/EditBlockConstants MW/rtc/RichTextComponentFeatureEnum".split(" "),
function(h,e,g,d,c,b){return h(d,{constructor:function(a,b,c,d){this._undoStack=[];this._redoStack=[];this._transientBlock=null;this._internalDocument=a;this._cursor=c;this._cursorController=d;this.own(g.after(b,"onEndBlock",e.hitch(this,"_insert"),!0));this.own(g.after(a,"onDocumentReset",e.hitch(this,"clear"),!0))},_update:function(){this.onUndoRedoStackUpdated({isUndoable:this.canUndo(),isRedoable:this.canRedo()})},onUndoRedoStackUpdated:function(a){},clear:function(){this._undoStack=[];this._redoStack=
[];this._transientBlock=null;this._update()},canUndo:function(){return 0<this._undoStack.length&&!this._internalDocument.isReadOnly()},canRedo:function(){return 0<this._redoStack.length&&!this._internalDocument.isReadOnly()},undo:function(){if(this.canUndo()){var a=this._suspendCursor();this._transientBlock&&(this._transientBlock.unexecute(),this._transientBlock=null);var b=this._undoStack.pop();b.unexecute();var c=b.getUndoEvents();c.length&&this._internalDocument.emitDocumentEvents(c);this._resumeCursor(a);
this._redoStack.push(b);this._update()}},redo:function(){if(this.canRedo()){var a=this._suspendCursor();this._transientBlock&&(this._transientBlock.unexecute(),this._transientBlock=null);var b=this._redoStack.pop();b.execute();var c=b.getRedoEvents();c.length&&this._internalDocument.emitDocumentEvents(c);this._resumeCursor(a);this._undoStack.push(b);this._update()}},_insert:function(a){if(!(0===this._undoStack.length&&0===this._redoStack.length&&a.getType()===c.AUTO))if(0<this._redoStack.length&&
a.getType()===c.AUTO)this._transientBlock?a.mergeWith(this._transientBlock):this._transientBlock=a;else{var b=this._undoStack[this._undoStack.length-1];b&&this._transientBlock&&this._transientBlock.mergeWith(b);this._transientBlock=null;b&&a.canMergeWith(b)?a.mergeWith(b):(this._undoStack.push(a),this._redoStack=[],this._update());this._mergeAndAdvance(a.getBlockTypesForMergeAndAdvance())}},_mergeAndAdvance:function(a){for(;0<a.length;){var b=this._undoStack[this._undoStack.length-1],c=this._undoStack[this._undoStack.length-
2];if(!b||!c)break;b.mergeWith(c);this._undoStack.pop();if(0>a.indexOf(c.getType()))break}},_suspendCursor:function(){this._cursorController.suspendUpdates();return!this._cursor.isSelectionHidden()?(this._cursor.hideSelection(),!0):!1},_resumeCursor:function(a){a&&this._cursor.showSelection();this._cursorController.emitUpdate(!0,!0);this._cursorController.activateUpdates(!0)}})})},"MW/rtc/plugins/undoredo/EditBlockControllerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"MW/rtc/plugins/undoredo/EditBlockController"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/undoredo/EditBlockController":function(){define(["dojo/_base/declare","dojo/aspect","MW/rtc/plugins/undoredo/EditBlock","MW/rtc/plugins/undoredo/EditBlockConstants"],function(h,e,g,d){return h(null,{constructor:function(){this._block=null},startEdit:function(c){this._block?this._block.incrementReferenceCount():(this._block=
new g(c),this.onStartBlock(this._block));return this._block},endEdit:function(){this._block.decrementReferenceCount()&&(this._block.hasCommands()&&(this.onBeforeEndBlock(this._block),this.onEndBlock(this._block)),this._block=null)},getActiveBlock:function(){return this._block},onStartBlock:function(c){},onEndBlock:function(c){},onBeforeEndBlock:function(c){}})})},"MW/rtc/plugins/undoredo/EditBlock":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","MW/rtc/plugins/undoredo/EditBlockConstants"],
function(h,e,g,d){return e(null,{constructor:function(c){this._commands=[];this._undoEvents=[];this._redoEvents=[];this._type=c;this._references=1;this._blockTypesForMergeAndAdvance=[]},setType:function(c){this._type||(this._type=c)},getType:function(){return this._type},appendUndoEvents:function(c){c=this._copyEvents(c);this._undoEvents=this._undoEvents.concat(c)},getUndoEvents:function(){var c=this._undoEvents;c.reverse();return c},appendRedoEvents:function(c){c=this._copyEvents(c);this._redoEvents=
this._redoEvents.concat(c)},getRedoEvents:function(){return this._redoEvents},_copyEvents:function(c){return h.map(c,function(b){return!b?b:g.mixin({},b,{isUndoRedo:!0})})},appendCommand:function(c){this._commands.push(c)},hasCommands:function(){return 0<this._commands.length},execute:function(){this._commands.forEach(function(c){c.execute()},this)},unexecute:function(){for(var c=this._commands.length-1;0<=c;c-=1)this._commands[c].unexecute()},pushAndExecuteCommand:function(c){this._commands.push(c);
return c.execute()},preventMerge:function(){this._preventMerge=!0},canMergeWith:function(c){return!this._type?!1:this._type===d.AUTO?!0:this._preventMerge||this._type!==c.getType()?!1:!0},setBlockTypesForMergeAndAdvance:function(c){this._blockTypesForMergeAndAdvance=c},getBlockTypesForMergeAndAdvance:function(){return this._blockTypesForMergeAndAdvance},mergeWith:function(c){c.addCommands(this._commands);c.appendRedoEvents(this._redoEvents);c.appendUndoEvents(this._undoEvents)},addCommands:function(c){this._commands=
this._commands.concat(c)},incrementReferenceCount:function(){this._references+=1},decrementReferenceCount:function(){this._references-=1;return 0===this._references}})})},"MW/rtc/plugins/undoredo/UndoRedoActionProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/undoredo/UndoRedoAction"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.actionservice","rtc.undoredo.controller"]}},createInstance:function(d,c){return new g(d,
c)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/undoredo/UndoRedoAction":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/RichTextComponentFeatureEnum"],function(h,e,g,d){return h(null,{constructor:function(c,b){this._actionService=c;this._undoRedoController=b;var a=[{id:d.UNDO_REDO.UNDO_ACTION,enabled:b.canUndo(),key:"ctrl_z",platformKey:{mac:"meta_z"},callback:e.hitch(this._undoRedoController,"undo")},{id:d.UNDO_REDO.REDO_ACTION,enabled:b.canRedo(),
key:"ctrl_y",platformKey:{mac:"meta_shift_z"},callback:e.hitch(this._undoRedoController,"redo")},{id:d.UNDO_REDO.CLEAR_ACTION,enabled:!0,callback:e.hitch(this._undoRedoController,"clear")}];c.loadActions(a);this.aspectHandler=g.after(b,"onUndoRedoStackUpdated",e.hitch(this,"_updateActions"),!0)},_updateActions:function(c){this._actionService.updateAction(d.UNDO_REDO.UNDO_ACTION,{enabled:c.isUndoable});this._actionService.updateAction(d.UNDO_REDO.REDO_ACTION,{enabled:c.isRedoable})},destroy:function(){this.aspectHandler.remove()}})})},
"MW/rtc/plugins/undoredo/UndoRedoCursorProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/undoredo/UndoRedoCursor"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.undoredo.editblock","rtc.cursorcontroller"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/plugins/undoredo/UndoRedoCursor":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/plugins/undoredo/commands/SetCursorCommand MW/rtc/plugins/undoredo/EditBlockConstants".split(" "),
function(h,e,g,d,c,b){return h(d,{constructor:function(a,b){this._cursorController=b;this._lastPosition=null;this.own(g.after(a,"onStartBlock",e.hitch(this,"_onStartBlock"),!0));this.own(g.after(a,"onBeforeEndBlock",e.hitch(this,"_onEndBlock"),!0))},_onStartBlock:function(a){a.getType()!==b.AUTO&&((this._cursorController.hasSelection()||!this._matchesLastPosition())&&a.preventMerge(),a.appendCommand(new c(this._cursorController)))},_onEndBlock:function(a){a.getType!==b.AUTO&&(this._lastPosition=this._getPositions(),
a.appendCommand(new c(this._cursorController,!0)))},_matchesLastPosition:function(){var a=this._getPositions();return this._lastPosition&&a.length===this._lastPosition.length&&a.every(function(a,b){return a.line===this._lastPosition[b].line&&a.column===this._lastPosition[b].column},this)},_getPositions:function(){return this._cursorController.getCursors(!0).map(function(a){return a.getPosition()})}})})},"MW/rtc/plugins/undoredo/commands/SetCursorCommand":function(){define(["dojo/_base/declare","mw-log/Log",
"MW/rtc/plugins/undoredo/commands/CommandInterface"],function(h,e,g){return h(g,{constructor:function(d,c){this._cursorController=d;this._positions=this._cursorController.getPositions();this._onRedo=c},execute:function(){this._onRedo&&this._cursorController.setPositions(this._positions)},unexecute:function(){this._onRedo||this._cursorController.setPositions(this._positions)}})})},"MW/rtc/plugins/language/matlab/alert/AlertControllerProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/alert/AlertController",
"MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.alert.model","rtc.internaldocument"]}},createInstance:function(d,c){return new e(d,c)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/language/matlab/alert/AlertController":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect"],function(h,e,g){return h(null,{constructor:function(d,c){this._alertModel=d;
this._aspectHandle=g.before(c,"onDocumentReset",e.hitch(this,"_handleDocumentReset"))},_handleDocumentReset:function(){this._alertModel.removeAllAlerts();this.onAlertsReset()},onAlertsReset:function(){},destroy:function(){this._aspectHandle&&(this._aspectHandle.remove(),this._aspectHandle=null);this._alertModel.removeAllAlerts()}})})},"MW/rtc/plugins/language/matlab/alert/AlertModelProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/alert/AlertModel","MW/rtc/core/provider/PluginProvider"],
function(h,e,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.document"]}},createInstance:function(d){return new e(d)}})})},"MW/rtc/plugins/language/matlab/alert/AlertModel":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/on","mw-utils/Utils","MW/rtc/plugins/language/matlab/alert/AlertModelBase"],function(h,e,g,d,c){return h(c,{constructor:function(b){this._document=b;this._alerts=[]},getAlerts:function(){return this._alerts},
addAlert:function(b,a,c){b=this._addAlert(b,a,c);this.onModelChanged();return b},addAlerts:function(b){b=b.map(function(a){return this._addAlert(a.type,a.line,a.payload)},this);this.onModelChanged();return b},updateAlert:function(b,a){var c=this._getAlertById(b);this._copyAlertProperties(a,c);a.isActive&&this._clearActiveAlert();this.onModelChanged()},removeAlerts:function(b){var a=Array.isArray(b)?b:[b];this._alerts=this._alerts.filter(function(b){var c=a.some(function(a){return a===b.id});c&&this._document.deletePosition(b.position);
return!c},this);this.onModelChanged()},removeAllAlerts:function(){this._alerts=this._alerts.filter(function(b){this._document.deletePosition(b.position)},this);this.onModelChanged()},_addAlert:function(b,a,c){var e=d.generateUuid();c.isActive&&this._clearActiveAlert();a=this._document.createLinePositionInLine(a-1,!0);this._alerts.push({id:e,type:b,position:a,payload:c});return e},_getAlertById:function(b){for(var a=0;a<this._alerts.length;a++)if(this._alerts[a].id===b)return this._alerts[a];throw Error("Alert with ID "+
b+" not found.");},_copyAlertProperties:function(b,a){for(var c in b)"object"===typeof b[c]?this._copyAlertProperties(b[c],a[c]):a[c]=b[c]},_clearActiveAlert:function(){this._alerts.forEach(function(b){b.payload.isActive&&(b.payload.isActive=!1)})}})})},"MW/rtc/plugins/language/matlab/alert/AlertModelBase":function(){define(["dojo/_base/declare"],function(h){return h(null,{getAlerts:function(){throw Error("Unimplemented API: MW.rtc.plugins.language.matlab.alert.getAlerts");},onModelChanged:function(){}})})},
"MW/rtc/plugins/language/matlab/alert/AlertViewProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/alert/AlertView","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{createInstance:"rtc.document rtc.view rtc.view.visibility rtc.alert.model rtc.alert.widgetfactory rtc.internaldocument".split(" ")}},createInstance:function(d,c,b,a,f,g){return new e(d,c,b,a,f,g)},destroyInstance:function(d){d.destroy()}})})},
"MW/rtc/plugins/language/matlab/alert/AlertView":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/on MW/rtc/model/CodeUtilities MW/rtc/model/DocumentConstants MW/rtc/model/DocumentEventUtilities MW/rtc/plugins/language/matlab/alert/AlertTypeEnum".split(" "),function(h,e,g,d,c,b,a,f,k,l,n,p,m){return h(null,{_HORIZONTAL_OFFSET_PX:43,_ALERT_HEIGHT:15,constructor:function(a,c,d,f,h,k){this._document=a;this._view=
c;this._visibliltyNotifier=d;this._alertModel=f;this._alertWidgetFactory=h;this._internalDocument=k;this._alertLayerNode=b.create("div",{className:"alertPluginLayer"});this._view.addLayer(this._alertLayerNode);this._alertLinesMap={};this._rightMarginCache=this._leftPositionCache=NaN;this._transientAspectHandles=[];this._permanentAspectHandles=[g.after(this._visibliltyNotifier,"onShow",e.hitch(this,"_enable")),g.after(this._visibliltyNotifier,"onHide",e.hitch(this,"_disable"))];this._enable()},destroy:function(){this._removeTransientAspectHandles();
this._permanentAspectHandles.forEach(function(a){a.remove()});this._permanentAspectHandles=[];this._clearAlertLines()},_removeTransientAspectHandles:function(){this._transientAspectHandles.forEach(function(a){a.remove()});this._transientAspectHandles=[]},_enable:function(){0===this._transientAspectHandles.length&&(this._transientAspectHandles=[g.after(this._alertModel,"onModelChanged",e.hitch(this,"_layout")),g.after(this._view,"onViewUpdated",e.hitch(this,"_handleOnViewUpdated"))]);this._layout()},
_disable:function(){this._removeTransientAspectHandles();this._clearAlertLines()},_layout:function(){this._clearAlertLines();var a=this._alertModel.getAlerts();this._updateLeftPositionCache();var b=this._calculateViewPositions(a);a.forEach(function(a,c){var d=a.position,e=d.getLineColumn().line,f=this._alertLinesMap[e];f?this._mergeAlertIntoAlertLine(a,f):(f=this._createAlertLine(d),this._alertLinesMap[e]=f,this._updateAlertLineInDom(f,b[c]),this._addAlertToAlertLine(a,f,"last"))},this)},_clearAlertLines:function(){this._getAlertLines().forEach(function(a){a.alerts.forEach(function(a){a.destroy()},
this);a.alerts=[];a.positionListeners.forEach(function(a){a.remove()},this);a.domNode&&b.destroy(a.domNode)},this);this._alertLinesMap={}},_mergeAlertIntoAlertLine:function(a,b){var c=a.type,d=b.alerts.filter(function(a){return a.getType()===c},this);if(0<d.length){if(d=d[0],d.payload.isActive=d.payload.isActive||a.payload.isActive,a.payload.message&&d.setMessage(d.getMessage()+"\x3chr\x3e"+a.payload.message),void 0!==d.payload.isStale||void 0!==a.payload.isStale)d.payload.isStale=!(!d.payload.isStale||
!a.payload.isStale),d.setStaleness(d.payload.isStale)}else this._addAlertToAlertLine(a,b,c===m.WARNING?"first":"last")},_createAlertLine:function(a){var c={alerts:[],domNode:b.create("div",{className:"alertPlugin-alertLine"}),position:a,positionListeners:null};c.positionListeners=[g.after(a,"onChange",e.hitch(this,"_handleAlertLinePositionOnChange",c)),g.after(this._internalDocument,"onDocumentChanged",e.hitch(this,"_handleOnDocumentChanged",c),!0)];return c},_addAlertToAlertLine:function(a,c,d){a=
this._alertWidgetFactory.createAlert(a.type,a.position,a.payload);b.place(a.domNode,c.domNode,d);c.alerts.push(a);this._updateAlertLineVisibility(c);a.startup()},_handleAlertLinePositionOnChange:function(a){var b=a.position,c=b.getLineColumn().line;this._getAlertLines().some(function(a){a=a.position;var d=a.getLineColumn().line;return c===d&&b!==a},this)?this._layout():this._updateAlertLinesInDom([a]);this._updateAlertLineVisibility(a)},_handleOnViewUpdated:function(){this._updateRightMarginCache();
this._updateLeftPositionCache();this._updateAlertLinesInDom(this._getAlertLines())},_updateAlertLinesInDom:function(a){var b=this._calculateViewPositions(a);a.forEach(function(a,c){this._updateAlertLineInDom(a,b[c])},this)},_updateAlertLineInDom:function(a,b){null===b?this._removeAlertLineIfNeeded(a):(this._placeAlertIfNeeded(a),a.domNode.style.top=b.top+"px",a.domNode.style.left=b.left+"px")},_removeAlertLineIfNeeded:function(a){a.domNode.parentElement&&a.domNode.parentElement.removeChild(a.domNode)},
_placeAlertIfNeeded:function(a){a.domNode.parentElement||b.place(a.domNode,this._alertLayerNode,"last")},_handleOnDocumentChanged:function(a,b){p.hasEventType(b,n.FORMAT_CHANGE_EVENT)&&this._updateAlertLineVisibility(a)},_updateAlertLineVisibility:function(a){var b=!l.isCodeContainer(a.position.node);c.toggle(a.domNode,"alertPlugin-onTextLine",b)},_getAlertLines:function(){return Object.keys(this._alertLinesMap).map(function(a){return this._alertLinesMap[a]},this)},_calculateViewPositions:function(a){return a.map(function(a){var b=
a.position.getNode();a=this._view.getCoordinateForPosition(b.startPosition());if(!this._view.isValidCoordinate(a))return null;b=b.children[0].getHeight()-this._ALERT_HEIGHT;return{top:a.y+Math.floor(b/2),left:this._leftPositionCache}},this)},_updateLeftPositionCache:function(){var a=this._view.getDomTargetPosition();this._leftPositionCache=a.scrollLeft+a.clientWidth-this._rightMarginCache-this._HORIZONTAL_OFFSET_PX},_updateRightMarginCache:function(){if(!isFinite(this._rightMarginCache)){var b=this._view.getDomtarget().querySelector(".lineNode");
if(b&&d.isDescendant(b,document.body)){var c=this._view.getDomTargetPosition(),e=f.getComputedStyle(b),b=a.getMarginBox(b,e);this._rightMarginCache=c.scrollWidth-b.w-b.l}}}})})},"MW/rtc/plugins/language/matlab/alert/AlertWidgetFactoryProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/alert/AlertWidgetFactory","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{createInstance:["rtc.view","rtc.cursor"]}},
createInstance:function(d,c){return new e(d,c)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/language/matlab/alert/AlertWidgetFactory":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-construct MW/rtc/plugins/language/matlab/alert/AlertTypeEnum MW/rtc/plugins/language/matlab/alert/ErrorAlert MW/rtc/plugins/language/matlab/alert/WarningAlert".split(" "),function(h,e,g,d,c,b,a){return h(null,{constructor:function(a,b){this._view=a;this._cursor=b},destroy:function(){},
createAlert:function(d,e,g){switch(d){case c.ERROR:d=new b({view:this._view,position:e,payload:g});break;case c.WARNING:d=new a({view:this._view,position:e,payload:g});break;default:throw Error("Unable to construct alert widget. Unknown alert widget type.");}return d}})})},"MW/rtc/plugins/language/matlab/alert/ErrorAlert":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/aspect dojo/on dijit/_TemplatedMixin dojo/text!./templateErrorAlert.html MW/rtc/plugins/language/matlab/alert/AlertWidgetBase MW/rtc/plugins/language/matlab/alert/AlertTypeEnum".split(" "),
function(h,e,g,d,c,b,a,f,k){return h([f,b],{templateString:a,baseClass:"alertPlugin-errorElement",constructor:function(a){this._payload=a.payload},startup:function(){this.inherited(arguments);this.setStaleness(this._payload.isStale);this.setMessage(this._payload.message)},destroy:function(){this.inherited(arguments)},getType:function(){return k.ERROR}})})},"MW/rtc/plugins/language/matlab/alert/AlertWidgetBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class dojo/dom-construct dojo/dom-style dojo/on dijit/_WidgetBase dijit/popup dijit/TooltipDialog MW/rtc/view/ViewEventUtilities".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n){return h([f],{_STALE_CLASS:"alertPlugin-isStale",_HAS_TOOLTIP_CLASS:"alertPlugin-hasTooltip",_MOUSE_DOWN_EVENT:window.PointerEvent?"pointerdown":"mousedown",_MOUSE_UP_EVENT:window.PointerEvent?"pointerup":"mouseup",statics:{onAlertBecameActive:function(a){}},constructor:function(a){this._message="";this._tooltip=null;this._isTooltipVisible=!1;this._view=a.view;this._position=a.position;this._tooltipPosition="after-centered below below-alt below-centered above above-alt above-centered".split(" ");
this._mouseListeners=[];this._tooltipListeners=[];this._blockedMouseDown=!1},startup:function(){this.inherited(arguments)},destroy:function(){this._removeMouseListeners();this._removeTooltipAndListeners();this.inherited(arguments)},getType:function(){throw Error("Unimplemented API: MW.rtc.plugins.language.matlab.alert.AlertWidgetBase.getType");},setMessage:function(a){this._message=a;this._removeMouseListeners();this._removeTooltipAndListeners();this._isTooltipEnabled()&&(this._addMouseListeners(),
d.add(this.domNode,this._HAS_TOOLTIP_CLASS),this._updateTooltipVisibility())},getMessage:function(){return this._message},_showMessage:function(){this._tooltip||this._initializeTooltips();this._tooltip.connectorNode.style.top="";this._tooltip.connectorNode.style.left="";k.open({parent:this,popup:this._tooltip,around:this.domNode,orient:this._tooltipPosition,maxHeight:Infinity,onClose:e.hitch(this,"_onTooltipClose")});this._adjustTooltipZIndex("99");this._tooltip.set("data-testid","alertPluginTooltip_visible");
this._isTooltipVisible=this._payload.isActive=!0;this.statics.onAlertBecameActive(this)},_hideMessage:function(a){if(this._tooltip){var b=this._payload.isActive;k.close(this._tooltip);this._tooltip.set("data-testid","alertPluginTooltip_hidden");a&&(this._payload.isActive=b)}},_onTooltipClose:function(){this._isTooltipVisible=this._payload.isActive=!1},setStaleness:function(a){d.toggle(this.domNode,this._STALE_CLASS,a||!1)},onMouseDown:function(a){a.stopPropagation();this._blockedMouseDown=!0},onMouseUp:function(a){this._blockedMouseDown&&
(a.stopPropagation(),this._payload.isActive=!this._payload.isActive,this._updateTooltipVisibility());this._blockedMouseDown=!1},onWindowMouseUp:function(){this._blockedMouseDown=!1},_handleOtherAlertBecameActive:function(a){a!==this&&(this._payload.isActive=!1)},_wrapMessage:function(a){return c.create("div",{className:"alertPlugin-alertMessage",innerHTML:a})},_isTooltipEnabled:function(){return this._message&&0<this._message.length},_initializeTooltips:function(){this._tooltip=new l({"class":"rtcTooltip",
content:this._wrapMessage(this._message)});k.moveOffScreen(this._tooltip);this._addTooltipListeners()},_addMouseListeners:function(){this._mouseListeners=[a(this.domNode,this._MOUSE_DOWN_EVENT,e.hitch(this,"onMouseDown")),a(this.domNode,this._MOUSE_UP_EVENT,e.hitch(this,"onMouseUp")),a(window,this._MOUSE_UP_EVENT,e.hitch(this,"onWindowMouseUp"))]},_removeMouseListeners:function(){this._mouseListeners.forEach(function(a){a.remove()});this._mouseListeners=[]},_addTooltipListeners:function(){this._tooltipListeners=
[g.after(this._view,"onViewUpdated",e.hitch(this,"_updateTooltipVisibilityOnViewChange"),!0),g.after(this._position,"onChange",e.hitch(this,"_updateTooltipVisibility")),g.after(this.statics,"onAlertBecameActive",e.hitch(this,"_handleOtherAlertBecameActive"),!0)]},_removeTooltipAndListeners:function(){null!==this._tooltip&&(this._tooltipListeners.forEach(function(a){a.remove()}),this._tooltipListeners=[],this._hideMessage(!0),this._tooltip.destroy(),this._tooltip=null);d.remove(this.domNode,this._HAS_TOOLTIP_CLASS)},
_updateTooltipVisibility:function(){if(this._isTooltipEnabled()){if(this._payload.isActive){var a=this._position.getLineColumn();if(this._view.isLineInView(a.line)){this._showMessage();return}}this._hideMessage(!0)}},_updateTooltipVisibilityOnViewChange:function(a){(n.hasScrollEvent(a)||n.hasSizingEvent(a))&&this._updateTooltipVisibility()},_adjustTooltipZIndex:function(a){for(var c=this._tooltip.domNode;c&&!d.contains(c,"dijitTooltipDialogPopup");)c=c.parentNode;b.set(c,"zIndex",a)}})})},"MW/rtc/plugins/language/matlab/alert/WarningAlert":function(){define("dojo/_base/declare dojo/dom-construct dijit/_TemplatedMixin dojo/text!./templateWarningAlert.html MW/rtc/plugins/language/matlab/alert/AlertWidgetBase MW/rtc/plugins/language/matlab/alert/AlertTypeEnum".split(" "),
function(h,e,g,d,c,b){return h([c,g],{templateString:d,baseClass:"alertPlugin-warningElement",constructor:function(a){this._payload=a.payload},startup:function(){this.inherited(arguments);this.setStaleness(this._payload.isStale);this.setMessage(this._payload.message)},destroy:function(){this.inherited(arguments)},getType:function(){return b.WARNING}})})},"MW/rtc/plugins/language/matlab/diagnosticmessage/DiagnosticMessageFormatterProvider":function(){define(["dojo/_base/declare","./DiagnosticMessageFormatter",
"MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{createInstance:[]}},createInstance:function(){return new e},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/language/matlab/diagnosticmessage/DiagnosticMessageFormatter":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/language/matlab/diagnosticmessage/ErrorMessageContent","MW/rtc/plugins/language/matlab/diagnosticmessage/WarningMessageContent"],
function(h,e,g,d,c){return h(null,{constructor:function(){},destroy:function(){},createErrorMessageWithStack:function(b){return new d(b)},createWarningMessageWithStack:function(b){return new c(b)}})})},"MW/rtc/plugins/language/matlab/diagnosticmessage/ErrorMessageContent":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/diagnosticmessage/MessageContentBase"],function(h,e){return h([e],{_SECTION_SEPARATOR:"\x3cbr\x3e\x3cbr\x3e",_ERROR_CLASS:"diagnosticMessage-errorType",constructor:function(){},
getClass:function(){return this._ERROR_CLASS},getSectionSeparator:function(){return this._SECTION_SEPARATOR}})})},"MW/rtc/plugins/language/matlab/diagnosticmessage/MessageContentBase":function(){define(["dojo/_base/declare","dojo/dom-construct"],function(h,e){return h(null,{_LINEBREAK:"\x3cbr\x3e",constructor:function(e){this._rawReport=e},getClass:function(){throw Error("Unimplemented API: MW.rtc.plugins.language.matlab.diagnosticmessage.MessageContentBase.getClass");},getSectionSeparator:function(){throw Error("Unimplemented API: MW.rtc.plugins.language.matlab.diagnosticmessage.MessageContentBase.getSectionSeparator");
},getDomNode:function(){var g,d,c=this._rawReport,c=c.replace(/\n/g,this._LINEBREAK);d=c.indexOf(this.getSectionSeparator());1<d?(g=c.substring(0,d),d=c.substring(d+this._LINEBREAK.length)):(g=c,d="");c={className:"diagnosticMessage-wrapper "+this.getClass()};d={innerHTML:d,className:"diagnosticMessage-stackPart"};g={innerHTML:g,className:"diagnosticMessage-messagePart"};c=e.create("div",c);e.create("div",g,c);e.create("div",d,c);return c}})})},"MW/rtc/plugins/language/matlab/diagnosticmessage/WarningMessageContent":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/language/matlab/diagnosticmessage/MessageContentBase"],function(h,e){return h([e],{_SECTION_SEPARATOR:"\x3cbr\x3e\x3e ",_WARNING_CLASS:"diagnosticMessage-warningType",constructor:function(){},getClass:function(){return this._WARNING_CLASS},getSectionSeparator:function(){return this._SECTION_SEPARATOR}})})},"MW/rtc/plugins/language/matlab/autoindent/AutoIndentProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/autoindent/AutoIndent","MW/rtc/core/provider/PluginProvider"],
function(h,e,g){return h(g,{requires:function(){return{createInstance:"rtc.internaldocument rtc.document rtc.cursor matlab.tokens rtc.indentutilities rtc.cursorcontroller".split(" ")}},createInstance:function(d,c,b,a,f,g){return new e(d,c,b,a,f,g)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/language/matlab/autoindent/AutoIndent":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/model/CodeUtilities MW/rtc/model/DocumentConstants MW/rtc/model/DocumentEventUtilities MW/rtc/model/DocumentUtilities MW/rtc/model/NodeUtilities MW/rtc/plugins/language/matlab/autoindent/ExchangeService MW/rtc/plugins/language/matlab/autoindent/Formatter MW/rtc/plugins/language/matlab/autoindent/FormatSupport mw-utils/Utils".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m){return h(d,{constructor:function(a,b,c,d,f,h){this._document=b;this._internalDocument=a;this._cursor=c;this._tokenizerService=d;this._indentUtilities=f;this._cursorController=h;this._formatter=new n(this._cursor,this._document,this._internalDocument,d,f);this._notifyAutoIndentEnablement();this._formatSupport=new p(this._formatter,this._document);this.own(g.after(this._internalDocument,"onDocumentChanged",e.hitch(this,"_handleDocumentChanged"),!0));this.own(g.after(this._cursorController,
"onUpdate",e.hitch(this,"_handleCursorControllerOnUpdate")));this._isEnabled=!0},_handleCursorControllerOnUpdate:function(){this._cursorController.hasMultipleCursors()?this.disable():this.enable()},_notifyAutoIndentEnablement:function(){l.notifyAutoIndentEnablement()},_handleDocumentChanged:function(a){if(this._isEnabled&&a){var d=a[0],d=d||{},e=this._cursor.getNode();if(!d.isUndoRedo)switch(d.type){case b.INSERT_TEXT:if(!c.isCodeContainer(e))break;this._handleInsertTextEvent(a);break;case b.INSERT_BREAK_EVENT:this._handleLineBreakEvent(a);
break;case b.DELETION_EVENT:if(!c.isCodeContainer(e))break;this._handleDeleteEvent();break;case b.FORMAT_CHANGE_EVENT:c.isCodeContainer(e)&&this._shouldFormatChangeTriggerIndent(d)&&this._handleFormatChangeEvent(d)}}},enable:function(){this._isEnabled=!0},disable:function(){this._isEnabled=!1},_handleInsertTextEvent:function(b){if(!a.isMultiLineEvent(b,this._internalDocument)){b=b[0].text;var c=this._cursor.getLineColumn();c.line-=1;c.column-=1;this._formatIfNecessary(b,c)}},_handleLineBreakEvent:function(b){l.resetNumberOfWhiteSpaces();
l.resetIndentLevel();b=a.finalLineRangeFromEvents(b);var d=b.startLine;b=b.endLine;var e=this._internalDocument.getLineNode(d),f=this._internalDocument.getLineNode(b);if(e&&f&&c.isCodeRange(e,f)){for(;d<b;d+=1)e={line:d,column:this._document.getLineText(d+1).length},this._formatIfNecessary("\n",e);d=this._indentUtilities.getIndentForLineNumber(b);0<d&&l.setNumberOfWhiteSpaces(d);b=this._formatter.format(b);0<b&&l.setIndentLevel(b);d=this._cursor.getPosition().line;e=this._document.getLineText(d+1);
this._adjustCursorPosition(e,d,b)}},_handleDeleteEvent:function(){var a=this._cursor.getLineColumn();a.line-=1;a.column-=1;this._formatIfNecessary("\b",a)},_handleFormatChangeEvent:function(a){this._formatter.format(a.startLine)},_adjustCursorPosition:function(a,b,c){m.isWhitespace(a)?this._cursor.movePosition(this._cursor.LINE_END):this._cursor.setPosition(null,{line:b,column:c},!0)},_formatIfNecessary:function(a,b){this._formatSupport.shouldKeyTriggerFormat(a,b)&&this._formatter.format(b.line)},
_shouldFormatChangeTriggerIndent:function(a){return"code"===a.newFormat&&a.startLine===a.endLine},destroy:function(){this.inherited(arguments);this._formatSupport=this._formatter=null}})})},"MW/rtc/plugins/language/matlab/autoindent/ExchangeService":function(){define([],function(){return{_latestNumberOfWhiteSpaces:0,_latestIndentLevel:0,_autoIndentEnablement:!1,getLatestNumberOfWhiteSpaces:function(){return this._latestNumberOfWhiteSpaces},setNumberOfWhiteSpaces:function(h){this._latestNumberOfWhiteSpaces=
h},resetNumberOfWhiteSpaces:function(){this._latestNumberOfWhiteSpaces=0},getLatestIndentLevel:function(){return this._latestIndentLevel},setIndentLevel:function(h){this._latestIndentLevel=h},resetIndentLevel:function(){this._latestIndentLevel=0},notifyAutoIndentEnablement:function(){this._autoIndentEnablement=!0},isAutoIndentEnabled:function(){return this._autoIndentEnablement}}})},"MW/rtc/plugins/language/matlab/autoindent/Formatter":function(){define(["dojo/_base/declare","dojo/_base/lang","mw-log/Log"],
function(h,e,g){return h(null,{_INDENT_AMOUNT:4,_UNDOREDO_BLOCK_NAME:"AutoIndent",constructor:function(d,c,b,a,e){this._cursor=d;this._document=c;this._internalDocument=b;this._tokenizerService=a;this._indentUtilities=e},findFirstNonWhitespaceTokenInLine:function(d){return this._indentUtilities.findFirstNonWhitespaceTokenInLine(d)},processLineContinuations:function(d){return this._indentUtilities.processLineContinuations(d)},processNonLineContinuations:function(d){return this._indentUtilities.processNonLineContinuations(d)},
format:function(d){return this._indentUtilities.format(d)},_isNotWhitespaceOrComment:function(d){return this._indentUtilities.isNotWhitespaceOrComment(d)},_findCorrespondingStartToken:function(d,c){return this._indentUtilities.findCorrespondingStartToken(d,c)},_searchBackAndCalculateIndent:function(d,c){return this._indentUtilities.searchBackAndCalculateIndent(d,c)},_getTokenIndent:function(d){return this._indentUtilities.getTokenIndent(d)},_getDeltaOfIndent:function(d,c){return this._indentUtilities.getDeltaOfIndent(d,
c)}})})},"MW/rtc/plugins/language/matlab/autoindent/FormatSupport":function(){define(["dojo/_base/array","dojo/_base/declare","mw-utils/Utils"],function(h,e,g){return e(null,{constructor:function(d,c){this.KEYWORD_MAP=this._createOutdentKeywordMap();this._formatter=d;this._document=c},shouldKeyTriggerFormat:function(d,c){var b=this._checkTextMatchesToken(d,c);!1===b&&1===d.length&&(b=this._checkPreviousChar(d,c));return b},_checkTextMatchesToken:function(d,c){var b=!1;if(this._isStringAtEndOfKeyword(d)){var a=
this._formatter.findFirstNonWhitespaceTokenInLine(c.line),e=this._getKeywordsEndingInString(d),g;if(a)for(g=0;g<e.length;g+=1)if(this._doesTokenMatch(a,e,g,c)){b=!0;break}}return b},_checkPreviousChar:function(d,c){var b=!1;g.isWhitespace(d)?(b=this._goBackUntilNoWhitespace(d,c),b=this._checkTextMatchesToken(b.typedText,b.cursorPosition)):this._didDeletionOccur(c,d)?b=this._checkCursorPositionForToken(c):1<c.column&&(c.column-=1,b=this._checkCursorPositionForToken(c));return b},_checkCursorPositionForToken:function(d){var c=
this._document.getTextCharacters(d.line,d.column-1,1);return this._checkTextMatchesToken(c,d)},_didDeletionOccur:function(d,c){return 0<d.column&&this._document.getTextCharacters(d.line,d.column-1,1)!==c},_goBackUntilNoWhitespace:function(d,c){for(;d&&g.isWhitespace(d)&&1<c.column;)c.column-=1,d=this._document.getTextCharacters(c.line,c.column,1);return{typedText:d,cursorPosition:c}},_getKeywordsEndingInString:function(d){return this.KEYWORD_MAP[d]},_isStringAtEndOfKeyword:function(d){return void 0!==
this.KEYWORD_MAP[d]},_createOutdentKeywordMap:function(){return{e:["else","case","otherwise"],f:["elseif"],n:["function"],h:["catch"],d:["end"]}},_doesTokenMatch:function(d,c,b,a){d=d.getColumn();return!(0<=d)?!1:this._document.getTextCharacters(a.line,d,c[b].length)===c[b]}})})},"MW/rtc/plugins/language/matlab/autoindent/preferences/AutoIndentPreferenceProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/autoindent/preferences/AutoIndentPreference","MW/rtc/core/provider/PluginProvider"],
function(h,e,g){return h(g,{requires:function(){return{createInstance:["rtc.preferences.service","rtc.indentutilities"]}},createInstance:function(d,c){return new e(d,c)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/language/matlab/autoindent/preferences/AutoIndentPreference":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/preferences/PreferenceKeysEnum ./FunctionIndentingPreferences".split(" "),function(h,e,g,d,c,b){return h(d,
{constructor:function(a,b){this._preferenceService=a;this._indentUtilities=b;this.own(g.after(this._preferenceService,"onPreferencesChanged",e.hitch(this,"_handlePreferenceChanged")));this._setIndentingStyle()},_handlePreferenceChanged:function(){this._setIndentingStyle()},_setIndentingStyle:function(){var a=this._preferenceService.getValue(c.INDENTING,b.MixedFunctionIndenting);this._indentUtilities.setIndentingStyle(a)}})})},"MW/rtc/plugins/language/matlab/code/CodeChangeServiceProvider":function(){define(["dojo/_base/declare",
"dojo/_base/lang","./CodeChangeService","MW/rtc/core/provider/PluginProvider"],function(h,e,g,d){return h(d,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.cursor","rtc.internaldocument"]}},createInstance:function(c,b){return new g(c,b)},destroyInstance:function(c){c.destroy()}})})},"MW/rtc/plugins/language/matlab/code/CodeChangeService":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/model/CodeUtilities MW/rtc/model/DocumentConstants MW/rtc/model/DocumentEventUtilities MW/rtc/model/NodeUtilities".split(" "),
function(h,e,g,d,c,b,a){return h(null,{constructor:function(a,b){this._cursor=a;this._internalDocument=b;this._aspectHandles=[];this._aspectHandles.push(g.after(this._internalDocument,"onDocumentChanged",e.hitch(this,"_checkCodeChange"),!0));this._aspectHandles.push(g.after(this._internalDocument,"onDocumentReset",e.hitch(this,"_checkCodeChangeOnReset")))},destroy:function(){this._aspectHandles.forEach(function(a){a.remove()});this._aspectHandles=[]},onCodeChanged:function(a){},_checkCodeChange:function(c){if(!c||
0===c.length)this.onCodeChanged([this._cursor.getNode().rootContainer()]);else{var e=b.getLineNodesFromEvents(c,this._internalDocument).filter(d.isCodeContainer,a);c=this._getFormerCodeLineNodes(c);e=e.concat(c);if(e.length)this.onCodeChanged(e)}},_getFormerCodeLineNodes:function(a){a=b.getEventsOfType(a,c.FORMAT_CHANGE_EVENT);a=a.filter(function(a){return"code"===a.oldFormat});return b.getLineNodesFromEvents(a,this._internalDocument)},_checkCodeChangeOnReset:function(){var a=d.getCodeLineNodes(this._internalDocument);
if(a.length)this.onCodeChanged(a)}})})},"MW/rtc/plugins/language/matlab/codecontent/CodeContentProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","./CodeContent","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities"],function(h,e,g,d,c){return h(g,{isApplicable:function(b){return c.isMatlabCodeFileOrBuffer(b)},requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:[]}},createInstance:function(){return new d}})})},
"MW/rtc/plugins/language/matlab/codecontent/CodeContent":function(){define(["dojo/_base/declare","mw-string-utils/StringUtils"],function(h,e){return h(null,{_FUNCTION_KEYWORD:"function ",_CLASSDEF_KEYWORD:"classdef ",_COMMENT_SYMBOL:"%",_BLOCK_COMMENT_START_SYMBOL:"%{",_BLOCK_COMMENT_END_SYMBOL:"%}",TYPE_ENUM:{SCRIPT:0,FUNCTION:1,CLASS:2},constructor:function(){},getCodeType:function(e){var d=this.TYPE_ENUM.SCRIPT;(e=this._findFirstCodeLine(e))&&(d=this._checkLineForCodeType(e));return d},_checkLineForCodeType:function(g){var d=
e.leftTrim(g.getText());g=0===d.indexOf(this._FUNCTION_KEYWORD);d=0===d.indexOf(this._CLASSDEF_KEYWORD);return g?this.TYPE_ENUM.FUNCTION:d?this.TYPE_ENUM.CLASS:this.TYPE_ENUM.SCRIPT},lineNodesContainCode:function(e){return!!this._findFirstCodeLine(e)},_findFirstCodeLine:function(e){for(var d=0;d<e.length;d++){var c=e[d],b=c.getText().trim();if(0!==b.length)if(0===b.indexOf(this._BLOCK_COMMENT_START_SYMBOL)){if(d=this._findEndOfBlockLine(d,e),-1===d)break}else if(0!==b.indexOf(this._COMMENT_SYMBOL))return c}return null},
_findEndOfBlockLine:function(e,d){for(var c=e+1;c<d.length;c++){var b=d[c].getText().trim();if(0===b.indexOf(this._BLOCK_COMMENT_START_SYMBOL))this._findEndOfBlockLine(c,d);else if(0===b.indexOf(this._BLOCK_COMMENT_END_SYMBOL))return c}return-1}})})},"MW/rtc/plugins/language/matlab/codeanalyzer/model/CodeAnalyzerModelProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/plugins/language/matlab/codeanalyzer/model/CodeAnalyzerModel","MW/rtc/core/provider/PluginProvider"],function(h,
e,g,d){return h(d,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.editordataservice","rtc.document"]}},createInstance:function(c,b){return new g(c,b)}})})},"MW/rtc/plugins/language/matlab/codeanalyzer/model/CodeAnalyzerModel":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/abstract/AbstractDocumentSynchronizableMixin","MW/rtc/abstract/AbstractPlugin"],function(h,e,g,d){return h([d,g],{constructor:function(c,b){this._editorDataService=
c;this._document=b;this._modelData=null;this._model={};this._processedMessages=[];this._linePropertiesArray=[];this.initializeSynchronizable(b);this._handles=[this._editorDataService.listenTo("matlab.code.codeanalyzer",e.hitch(this,"_handleResponse"))]},_handleResponse:function(c){c&&(this._lastDocumentState=c.documentState,this._shouldModelBeUpdated(c)&&(this._updateForModelData(c),this.onModelChange()),this._checkForSyntaxErrors())},_shouldModelBeUpdated:function(c){if(!this.isModelUpToDate())return!1;
if(!this._modelData)return!0;var b=JSON.stringify(this._modelData.messages)+JSON.stringify(this._modelData.extendedHelpMessageMap);c=JSON.stringify(c.messages)+JSON.stringify(c.extendedHelpMessageMap);return b!==c},_updateForModelData:function(c){this._modelData=c;this._model=this._processMessages(c.messages,c.extendedHelpMessageMap)},_processMessages:function(c,b){var a={};this._linePropertiesArray=this._document.getLinePropertiesArray();this._processedMessages=[];for(var d=0;d<c.length;d+=1){var e=
c[d],g=this._linePropertiesArray[e.lineNumber];if(!g||!g.readOnly)e.extendedHelpMessage=b[e.messageTag],g=this._createNewToken(e),this._processedMessages.push(g),this._appendTokenToMap(a,e.lineNumber,g)}return a},_appendTokenToMap:function(c,b,a){c[b]||(c[b]=[]);c[b].push(a)},_createNewToken:function(c){var b=this._linePropertiesArray[c.lineNumber],b=b&&b.readOnly;return{message:c.message,severity:c.severity,range:{start:{row:c.lineNumber,column:c.startColumn},end:{row:c.lineNumber,column:c.endColumn}},
autoFix:{autoFixMessage:b?null:c.autoFixMessage,autoFixChanges:b?null:c.autoFixChanges},extendedHelpMessage:c.extendedHelpMessage}},_checkForSyntaxErrors:function(){if(this.isModelUpToDate()){var c=this._processedMessages;1>c.length?(this.onDocumentChangeWithNoSyntaxErrors(),this.markClean()):c.some(function(b){return 1<b.severity})||(this.onDocumentChangeWithNoSyntaxErrors(),this.markClean())}},isModelUpToDate:function(){return this._document.getState()===this._lastDocumentState},onDocumentChangeWithNoSyntaxErrors:function(){},
onModelChange:function(){},hasMessages:function(){return!!this._model},getMessages:function(c){return this._model[c]||[]},getAllMessages:function(){return this._processedMessages},destroy:function(){this._handles.forEach(function(c){c.remove()});this.inherited(arguments)}})})},"MW/rtc/abstract/AbstractDocumentSynchronizableMixin":function(){define(["dojo/_base/declare","dojo/aspect","dojo/_base/lang","MW/rtc/abstract/AbstractSynchronizableMixin"],function(h,e,g,d){return h(d,{constructor:function(){},
initializeSynchronizable:function(c){this._document=c;this.own(e.after(c,"onChange",g.hitch(this,"markDirty")))}})})},"MW/rtc/plugins/language/matlab/codeanalyzer/preferences/CodeAnalyzerPreferencesProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/language/matlab/codeanalyzer/preferences/CodeAnalyzerPreferences"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.preferences.service"]}},createInstance:function(d){return new g(d)}})})},
"MW/rtc/plugins/language/matlab/codeanalyzer/preferences/CodeAnalyzerPreferences":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/plugins/language/matlab/codeanalyzer/preferences/UnderlineModesEnum MW/rtc/preferences/PreferenceKeysEnum".split(" "),function(h,e,g,d,c,b){return h(d,{constructor:function(a){this._preferencesService=a;this._displayEnabled=!0;this._underlineMode=c.UNDERLINE_ALL;this._setInitialPreferences();this.own(g.after(this._preferencesService,
"onPreferencesChanged",e.hitch(this,"_onPreferencesChanged")))},_onPreferencesChanged:function(){var a=this._getDisplayValueFromPreferences(),b=this.isDisplayEnabled();a!==b&&this._setDisplayEnabled(a);a=this._getUnderliningModeFromPreferences();b=this.getUnderlineMode();a!==b&&this._setUnderlineMode(a)},_getDisplayValueFromPreferences:function(){return this._preferencesService.getValue(b.CODE_ANALYZER_DISPLAY,!0)},_getUnderliningModeFromPreferences:function(){return this._preferencesService.getValue(b.CODE_ANALYZER_UNDERLINING,
c.UNDERLINE_ALL)},isDisplayEnabled:function(){return this._displayEnabled},_setDisplayEnabled:function(a){this._displayEnabled=a;this.onDisplayPreferenceChange(a)},onDisplayPreferenceChange:function(a){},getUnderlineMode:function(){return this._underlineMode},_setUnderlineMode:function(a){this._underlineMode=a;this.onUnderlineModeChange(this._displayEnabled)},onUnderlineModeChange:function(a){},_setInitialPreferences:function(){this._setDisplayEnabled(this._getDisplayValueFromPreferences());this._setUnderlineMode(this._getUnderliningModeFromPreferences())}})})},
"MW/rtc/plugins/language/matlab/codeanalyzer/preferences/UnderlineModesEnum":function(){define([],function(){return{UNDERLINE_NONE:0,UNDERLINE_ERRORS_ONLY:1,UNDERLINE_ALL:2}})},"MW/rtc/plugins/language/matlab/codeanalyzer/tooltip/CodeAnalyzerTooltipProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/codeanalyzer/tooltip/CodeAnalyzerTooltip","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],
createInstance:["rtc.code.codeanalyzermodel","rtc.code.codeanalyzerautofix","rtc.code.codeanalyzerpreferences","rtc.hyperlinkservice","rtc.focusservice"]}},createInstance:function(d,c,b,a,f){return new e(d,c,b,a,f)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/language/matlab/codeanalyzer/tooltip/CodeAnalyzerTooltip":function(){define("dojo/_base/declare dojo/_base/lang MW/rtc/plugins/tooltip/HoverableTooltipPlugin MW/rtc/plugins/language/matlab/codeanalyzer/CodeAnalyzerUtils MW/rtc/plugins/language/matlab/codeanalyzer/preferences/UnderlineModesEnum MW/rtc/plugins/language/matlab/codeanalyzer/tooltip/CodeAnalyzerTooltipContent".split(" "),
function(h,e,g,d,c,b){return h(g,{constructor:function(a,b,c,d,e){this._codeAnalyzerModel=a;this._codeAnalyzerAutoFix=b;this._hyperlinkService=d;this._focusService=e;this._codeAnalyzerPreferences=c},priority:function(){return 5},_generateToolTipContent:function(a){a={messageInfo:a,callback:e.hitch(this,function(a){this._codeAnalyzerAutoFix.fixLine(a);this.onTooltipClose();this._focusService.setFocus()}),hyperlinkService:this._hyperlinkService};return(new b(a)).tooltipContentNode},onTooltipClose:function(){},
getTooltipContent:function(a,b,c){if(this._codeAnalyzerPreferences.isDisplayEnabled()){var e;if(b&&(a=b.getLineColumn(),b=this._codeAnalyzerModel.getMessages(a.line-1))){b=d.generateRangeToMessageMap(b);for(var g in b)if(b.hasOwnProperty(g)){var h=b[g];if(h.autoFix.autoFixChanges||this._isMessageUnderlined(h))this._isEventPositionWithinMessageRange(a,h)&&(e=this._generateToolTipContent(h))}}c(e)}},_isMessageUnderlined:function(a){var b=this._codeAnalyzerPreferences.getUnderlineMode();return d.isError(a.severity)?
b!==c.UNDERLINE_NONE:b!==c.UNDERLINE_ERRORS_ONLY&&b!==c.UNDERLINE_NONE},_isEventPositionWithinMessageRange:function(a,b){var c=a.column,d=b.range;return d.start.column<=c&&c<=d.end.column+1},destroy:function(){}})})},"MW/rtc/plugins/language/matlab/codeanalyzer/CodeAnalyzerUtils":function(){define([],function(){return{CSSCLASSES:{ERROR:"error_squiggle_rte",WARNING:"warning_squiggle_rte",WARNING_HIGHLIGHT:"warningHighlight"},isError:function(h){return void 0===h||1<h||-99===h},hasHigherSeverity:function(h,
e){return h.severity>e.severity?!0:h.severity===e.severity?Boolean(h.autoFix.autoFixMessage&&!e.autoFix.autoFixMessage):!1},generateRangeToMessageMap:function(h){var e={};h.forEach(function(g){var d=JSON.stringify(g.range);if(!e[d]||this.hasHigherSeverity(g,e[d]))e[d]=g},this);return e}}})},"MW/rtc/plugins/language/matlab/codeanalyzer/tooltip/CodeAnalyzerTooltipContent":function(){define("dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/on dijit/_WidgetBase dijit/_TemplatedMixin dijit/form/Button dojo/text!MW/rtc/plugins/language/matlab/codeanalyzer/tooltip/templates/CodeAnalyzerTooltipContent.html dojo/i18n!l10n/nls/actions mw-utils/Utils require dojo/domReady!".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q){return h([k,l],{templateString:p,constructor:function(a){this._callBack=a.callback;this._codeAnlayzerMessage=a.messageInfo.message;this._autoFixObject=a.messageInfo.autoFix;this._extendedHelpMessage=a.messageInfo.extendedHelpMessage;this._hyperlinkService=a.hyperlinkService;this._widgetId=q.generateUuid()},postCreate:function(){this.tooltipContentNode.innerHTML=this._codeAnlayzerMessage;this.tooltipContentNode.setAttribute("data-testid","codeAnalyzerTooltip");
d.add(this.tooltipContentNode,"codeAnalyzerTooltip");var b=c.create("div",{className:"hoverFix"});this.tooltipContentNode.appendChild(b);null!=this._extendedHelpMessage&&(b=new n({label:m.detailsButtonLabel}),this._extendedHelpButtonDomNode=b.domNode,b.set("data-testid","extendedHelpButton"),g.set(b.domNode,"id","extendedHelpButton_"+this._widgetId),d.add(b.domNode,"tooltipInlineButton extendedHelp"),f(b,"click",a.hitch(this,"_extendedHelpButtonClick")),b.placeAt(this.tooltipContentNode));this._autoFixObject.autoFixMessage&&
(b=new n({label:m.fixButtonLabel}),b.set("data-testid","autoFixButton"),f(b,"click",a.hitch(this,function(){this._callBack(this._autoFixObject.autoFixChanges)})),d.add(b.domNode,"tooltipInlineButton autoFixButton"),b.placeAt(this.tooltipContentNode));this.inherited(arguments);this.tooltipContentNode.addEventListener("onAdjustingOrientation",a.hitch(this,"_handleAdjustingOrientation"));this.tooltipContentNode.addEventListener("onReadyToDisplay",a.hitch(this,"_handleReadyToDisplay"))},_handleAdjustingOrientation:function(){this._extendedHelpButtonDomNode&&
this._expandExtendedHelp(this._extendedHelpButtonDomNode)},_handleReadyToDisplay:function(){this._extendedHelpButtonDomNode&&this._collapseExtendedHelp(this._extendedHelpButtonDomNode)},_extendedHelpButtonClick:function(){d.contains(this._extendedHelpButtonDomNode,"extendedHelpExpanded")?this._collapseExtendedHelp(this._extendedHelpButtonDomNode):this._expandExtendedHelp(this._extendedHelpButtonDomNode)},_expandExtendedHelp:function(a){d.toggle(a,"extendedHelpExpanded",!0);this.tooltipContentNode.appendChild(c.create("hr",
{id:"exthelpdivider"+this._widgetId}));a=c.create("div",{id:"exthelptextnode"+this._widgetId,innerHTML:this._extendedHelpMessage,className:"extendedHelpTextNode","data-testid":"extendedHelpDialog"});b.set(a,"width",this.tooltipContentNode.clientWidth+"px");this.tooltipContentNode.appendChild(a);this._emitResizeEvent()},_collapseExtendedHelp:function(a){d.toggle(a,"extendedHelpExpanded",!1);c.destroy("exthelptextnode"+this._widgetId);c.destroy("exthelpdivider"+this._widgetId);this._emitResizeEvent()},
_emitResizeEvent:function(){f.emit(this.tooltipContentNode,"onResized",{bubbles:!1,cancelable:!0})},getWidgetId:function(){return this._widgetId}})})},"MW/rtc/plugins/language/matlab/codeanalyzer/view/CodeAnalyzerViewProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/codeanalyzer/view/CodeAnalyzerView","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.code.codeanalyzermodel",
"rtc.code.codeanalyzerpreferences","rtc.internaldocument","rtc.view.decoration"]}},createInstance:function(d,c,b,a){return new e(d,c,b,a)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/language/matlab/codeanalyzer/view/CodeAnalyzerView":function(){define("dojo/_base/declare MW/rtc/abstract/AbstractPlugin MW/rtc/model/CodeUtilities MW/rtc/plugins/language/matlab/codeanalyzer/CodeAnalyzerUtils MW/rtc/plugins/language/matlab/codeanalyzer/preferences/UnderlineModesEnum MW/rtc/view/decoration/DecorationUtilities".split(" "),
function(h,e,g,d,c,b){return h(e,{constructor:function(a,b,c,d){this._codeAnalyzerModel=a;this._codeAnalyzerPreferences=b;this._internalDocument=c;this._decorator=d.createDecorator()},updateMarkers:function(){b.decorateAllCodeLines(function(a,b){var c=this._codeAnalyzerModel.getMessages(a);this._updateMarkersOnRange(b,c)}.bind(this),this._decorator,this._internalDocument)},_updateMarkersOnRange:function(a,b){var c=this._getDecorationInfo(b);this._decorator.updateClasses(a,c)},clearAllMarkers:function(){b.decorateAllCodeLines(function(a,
b){this._decorator.clearRange(b)}.bind(this),this._decorator,this._internalDocument)},_getErrorOrWarningClass:function(a){var b=this._codeAnalyzerPreferences.getUnderlineMode();if(d.isError(a)){if(b!==c.UNDERLINE_NONE)return d.CSSCLASSES.ERROR}else if(b!==c.UNDERLINE_ERRORS_ONLY&&b!==c.UNDERLINE_NONE)return d.CSSCLASSES.WARNING},_getDecorationInfo:function(a){var b=[];if(!(a&&0<a.length))return b;a=d.generateRangeToMessageMap(a);for(var c in a)if(a.hasOwnProperty(c)){var e=a[c];b.push({range:this._getRangeFromMessage(e),
classList:this._getClassListFromMessage(e)})}return b},_getClassListFromMessage:function(a){var b=[this._getErrorOrWarningClass(a.severity)];a.autoFix&&a.autoFix.autoFixMessage&&b.push(d.CSSCLASSES.WARNING_HIGHLIGHT);return b},_getRangeFromMessage:function(a){var b=a.range.start;a=a.range.end;return this._internalDocument.getRangeForLineColumn(b.row+1,b.column+1,a.row+1,a.column+1)},_isParentElementValid:function(a){return g.isCodeContainer(a.parent)},destroy:function(){this._tooltip&&this._tooltip.hideTooltip()}})})},
"MW/rtc/plugins/language/matlab/codeanalyzer/CodeAnalyzerPluginProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities","MW/rtc/plugins/language/matlab/codeanalyzer/CodeAnalyzerPlugin","MW/rtc/core/provider/PluginProvider"],function(h,e,g,d,c){return h(c,{isApplicable:function(b){return g.isMatlabCodeFileOrBuffer(b)},requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:["rtc.document","rtc.internaldocument",
"rtc.code.codeanalyzermodel","rtc.code.codeanalyzerpreferences","rtc.code.codeanalyzerview"]}},createInstance:function(b,a,c,e,g){return new d(b,a,c,e,g)}})})},"MW/rtc/plugins/language/matlab/codeanalyzer/CodeAnalyzerPlugin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin"],function(h,e,g,d){return h(d,{constructor:function(c,b,a,d,h){this._document=c;this._internalDocument=b;this._codeAnalyzerModel=a;this._codeAnalyzerPreferences=d;this._codeAnalyzerView=
h;this._WAIT_TIME=900;this._modelHasBeenChanged=!1;this.own(g.after(this._document,"onChange",e.hitch(this,"_handleDocumentChange"),!0));this.own(g.after(this._internalDocument,"onDocumentReset",e.hitch(this,"_handleDocumentChange"),!0));this.own(g.after(this._codeAnalyzerModel,"onModelChange",e.hitch(this,"_handleModelChange")));this.own(g.after(this._codeAnalyzerPreferences,"onDisplayPreferenceChange",e.hitch(this,"_onDisplayPreferenceChange"),!0));this.own(g.after(this._codeAnalyzerPreferences,
"onUnderlineModeChange",e.hitch(this,"_onDisplayPreferenceChange"),!0))},_handleDocumentChange:function(){this._timer&&clearTimeout(this._timer);this._timer=setTimeout(e.hitch(this,"_handleTimeout"),this._WAIT_TIME)},_handleTimeout:function(){this._timer=null;this._modelHasBeenChanged&&this._redrawMessages()},_handleModelChange:function(){this._modelHasBeenChanged=!0;this._timer||this._redrawMessages()},_onDisplayPreferenceChange:function(c){c?this._timer||this._redrawMessages():this._codeAnalyzerView.clearAllMarkers()},
_redrawMessages:function(){this._codeAnalyzerModel.hasMessages()&&this._codeAnalyzerModel.isModelUpToDate()&&this._codeAnalyzerPreferences.isDisplayEnabled()&&(this._codeAnalyzerView.updateMarkers(),this._modelHasBeenChanged=!1)}})})},"MW/rtc/plugins/language/matlab/codeanalyzer/CodeAnalyzerAutoFixProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities","MW/rtc/plugins/language/matlab/codeanalyzer/CodeAnalyzerAutoFix","MW/rtc/core/provider/PluginProvider"],
function(h,e,g,d,c){return h(c,{isApplicable:function(b){return g.isMatlabCodeFileOrBuffer(b)},requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:["rtc.document","rtc.cursor","rtc.eventhandler","rtc.actionservice","rtc.code.codeanalyzermodel"]}},createInstance:function(b,a,c,e,g){return new d(b,a,c,e,g)}})})},"MW/rtc/plugins/language/matlab/codeanalyzer/CodeAnalyzerAutoFix":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect"],function(h,e,g){return h(null,
{constructor:function(d,c,b,a,f){this._document=d;this._cursor=c;this._codeAnalyzerModel=f;this._actionService=a;this._evtListener=g.after(b,"onMouseDown",e.hitch(this,"_updateContextMenuLabel"));this._addActions()},destroy:function(){this._evtListener.remove()},_findAndExecuteAutoFix:function(){var d=this._cursor.getLineColumn(),c=d.line-1,d=d.column-1,b=this._codeAnalyzerModel.getMessages(c);if(b)for(var a=0;a<b.length;a+=1){var e=b[a];if(this._isWithinRangeOfAutoFix(e,c,d))return this.fixLine(e.autoFix.autoFixChanges),
!0}},_addActions:function(){var d=[{id:"rtc_autofix",enabled:!0,contextMenuGroup:"Autofix",text:"",callback:e.hitch(this,"_findAndExecuteAutoFix")}];this._actionService.loadActions(d)},_updateContextMenuLabel:function(){var d="",c=this._cursor.getLineColumn(),b=c.column-1;if(c=this._codeAnalyzerModel.getMessages(c.line-1))for(var a=0;a<c.length;a+=1){var e=c[a],g=e.range.end.column;b>=e.range.start.column&&b<=g&&e.autoFix.autoFixMessage&&(d=e.autoFix.autoFixMessage,d=d.bold())}this._actionService.updateAction("rtc_autofix",
{text:d})},_isWithinRangeOfAutoFix:function(d,c,b){var a=d.range.start.row,e=d.range;return d.autoFix.autoFixChanges&&a===c&&e.start.column<=b&&e.end.column>=b},fixLine:function(d){this._document.startEdit();d.forEach(function(c){this._replace(c)},this);this._document.endEdit()},_replace:function(d){this._isEndOfLineAddition(d)?this._document.insertText(d.fText,d.fStartLine,d.fStartColumn+1):this._isEndOfLineDeletion(d)?this._document.replaceText(d.fText,d.fStartLine,d.fStartColumn,d.fEndLine+1,1):
this._document.replaceText(d.fText,d.fStartLine,d.fStartColumn,d.fEndLine,d.fEndColumn+1)},_isEndOfLineAddition:function(d){return d.fStartColumn>d.fEndColumn&&d.fStartLine===d.fEndLine||d.fStartLine>d.fEndLine},_isEndOfLineDeletion:function(d){var c=this._document.getLineText(d.fEndLine);return d.fEndColumn===c.length+1},isAutoFixAvailable:function(){return!this._document.isReadOnly()}})})},"MW/rtc/plugins/language/matlab/codeanalyzer/messagebar/AlertMessageLayerProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./AlertMessageLayer"],function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.alert.model","rtc.internaldocument"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/plugins/language/matlab/codeanalyzer/messagebar/AlertMessageLayer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/language/matlab/alert/AlertTypeEnum","MW/rtc/plugins/messagebar/MessageBarLayer"],
function(h,e,g,d,c){return h(c,{_ALERT_LAYER:"alertLayer",_ERROR:"errorMarker",_WARNING:"warningMarker",constructor:function(b,a){this._alertModel=b;this._internalDocument=a;this.own(g.after(this._alertModel,"onModelChanged",e.hitch(this,"_updateMessages")));this.own(g.after(this._internalDocument,"onDocumentChanged",e.hitch(this,"_updateMessages")))},getLayerName:function(){return this._ALERT_LAYER},_updateMessages:function(){this.clearLayer(this._ALERT_LAYER);this._alertModel.getAlerts().forEach(function(b){if(b.position.isValid()){var a=
b.position.getLineColumn(),c=a.line,a=a.column;b.type===d.ERROR?this.addMessage(this._ALERT_LAYER,this._ERROR,null,!0,c,a):this.addMessage(this._ALERT_LAYER,this._WARNING,null,!1,c,a)}},this);this.updateLayer(this._ALERT_LAYER)}})})},"MW/rtc/plugins/messagebar/MessageBarLayer":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,e){return h(e,{getLayerName:function(){throw Error("Unimplemented API: MW.rtc.plugins.messagebar.MessageBarLayer.getLayerName");},addMessage:function(e,
d,c,b,a,f){},clearLayer:function(e){},updateLayer:function(){},onTooltipClose:function(){}})})},"MW/rtc/plugins/language/matlab/codeanalyzer/messagebar/CodeAnalyzerMessageLayerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./CodeAnalyzerMessageLayer"],function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:"rtc.document rtc.code.codeanalyzermodel rtc.code.codeanalyzerautofix rtc.code.codeanalyzerpreferences rtc.hyperlinkservice rtc.focusservice".split(" ")}},
createInstance:function(d,c,b,a,e,h){return new g(d,c,b,a,e,h)}})})},"MW/rtc/plugins/language/matlab/codeanalyzer/messagebar/CodeAnalyzerMessageLayer":function(){define("dojo/_base/declare dojo/_base/lang dijit/registry dojo/aspect dojo/query MW/rtc/plugins/language/matlab/codeanalyzer/tooltip/CodeAnalyzerTooltipContent MW/rtc/plugins/messagebar/MessageBarLayer".split(" "),function(h,e,g,d,c,b,a){return h(a,{_CODE_ANALYZER_LAYER:"codeAnalyzerLayer",_ERROR:"errorMarker",_WARNING:"warningMarker",_TIMER_LENGTH:900,
constructor:function(a,b,c,g,h,m){this._codeAnalyzerModel=b;this._codeAnalyzerAutoFix=c;this._codeAnalyzerPreferences=g;this._hyperlinkService=h;this._focusService=m;this._timer=null;this._layerIsUpdating=!1;this.own(d.after(this._codeAnalyzerPreferences,"onDisplayPreferenceChange",e.hitch(this,"_handlePreferenceChange"),!0));this.own(d.after(this._codeAnalyzerModel,"onModelChange",e.hitch(this,"_updateMessages")));this.own(d.after(a,"onChange",e.hitch(this,"_handleDocumentChange")))},getLayerName:function(){return this._CODE_ANALYZER_LAYER},
_handleDocumentChange:function(){this.onTooltipClose()},_updateMessages:function(){this._codeAnalyzerPreferences.isDisplayEnabled()&&(this._resetTimeout(),this._layerIsUpdating=!0,this._timer=setTimeout(e.hitch(this,function(){this.clearLayer(this._CODE_ANALYZER_LAYER);this._codeAnalyzerModel.getAllMessages().forEach(function(a){var c=a.range.start.row+1,d=a.range.start.column+1,g={messageInfo:a,hyperlinkService:this._hyperlinkService,callback:e.hitch(this,function(a){this._codeAnalyzerAutoFix.fixLine(a);
this.onTooltipClose();this._focusService.setFocus()})},h=e.hitch(this,function(){var a=new b(g);this._updateAutofixButtonState(a);return a});2<=a.severity?this.addMessage(this._CODE_ANALYZER_LAYER,this._ERROR,h,!0,c,d):this.addMessage(this._CODE_ANALYZER_LAYER,this._WARNING,h,!1,c,d)},this);this._layerIsUpdating=!1;this.updateLayer(this._CODE_ANALYZER_LAYER)}),this._TIMER_LENGTH))},_handlePreferenceChange:function(a){this._resetTimeout();a?this._updateMessages():this.clearLayer(this._CODE_ANALYZER_LAYER)},
_resetTimeout:function(){this._timer&&clearTimeout(this._timer)},_updateAutofixButtonState:function(a){(a=g.getEnclosingWidget(c(".tooltipInlineButton.autoFixButton",a.domNode)[0]))&&a.set("disabled",!this._codeAnalyzerModel.isModelUpToDate()||this._layerIsUpdating)},destroy:function(){this.inherited(arguments);this._resetTimeout()}})})},"MW/rtc/plugins/language/matlab/codingui/CodingUIActionHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./CodingUIActionHandler"],
function(h,e,g){return h(e,{requires:function(){return{createInstance:"rtc.document rtc.actionservice rtc.code.codingui.view rtc.code.codingui.eventbus rtc.code.codingui.contextmanager rtc.code.codingui.requesthandler rtc.embeddedoutputs.statehandler rtc.view rtc.focusservice rtc.helpservice rtc.indentutilities rtc.cursorcontroller".split(" ")}},createInstance:function(d,c,b,a,e,h,l,n,p,m,q,r){return new g(d,c,b,a,e,h,l,n,p,m,q,r)}})})},"MW/rtc/plugins/language/matlab/codingui/CodingUIActionHandler":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/keys MW/rtc/abstract/AbstractPlugin MW/rtc/model/DocumentUtilities ./CodingUIActivities ./CodingUIContextEvents ./utilities/CodingUIActionHandlerUtilities ./utilities/CodingUIWidgetUtilities".split(" "),
function(h,e,g,d,c,b,a,f,k,l){return h(c,{constructor:function(a,b,c,f,h,k,l,u,v,w,x,A){this._document=a;this._uiView=c;this._contextManager=h;this._requestHandler=k;this._stateHandler=l;this._rtcView=u;this._helpService=w;this._indentUtilities=x;this._cursorController=A;this._cursor=A.getCursors()[0];this._actions=[{id:"codingui_tab",enabled:!0,key:"tab",callback:e.hitch(this,"_complete",{keyCode:d.TAB})},{id:"codingui_escape",enabled:!0,key:"escape",callback:e.hitch(this,"_escape",{keyCode:d.ESCAPE})},
{id:"codingui_enter",enabled:!0,key:"enter",callback:e.hitch(this,"_select")},{id:"codingui_up",enabled:!0,key:"up",callback:e.hitch(this,"_navigate",{keyCode:d.UP_ARROW})},{id:"codingui_down",enabled:!0,key:"down",callback:e.hitch(this,"_navigate",{keyCode:d.DOWN_ARROW})},{id:"codingui_open_signature_dropdown",enabled:!0,key:"ctrl_down",platformKey:{mac:"meta_down"},callback:e.hitch(this,"_navigate",{keyCode:d.DOWN_ARROW,ctrlKey:!0,metaKey:!0})},{id:"codingui_right",enabled:!0,key:"right",callback:e.hitch(this,
"_rightNavigate",{keyCode:d.RIGHT_ARROW})},{id:"rtc_codingui_move_left_arg",enabled:!0,key:"ctrl_left",platformKey:{mac:"meta_left"},callback:e.hitch(this,"_navigate",{keyCode:d.LEFT_ARROW,ctrlKey:!0,metaKey:!0})},{id:"rtc_codingui_move_right_arg",enabled:!0,key:"ctrl_right",platformKey:{mac:"meta_right"},callback:e.hitch(this,"_navigate",{keyCode:d.RIGHT_ARROW,ctrlKey:!0,metaKey:!0})},{id:"codingui_pageup",enabled:!0,key:"pageup",callback:e.hitch(this,"_navigate",{keyCode:d.PAGE_UP})},{id:"codingui_pagedown",
enabled:!0,key:"pagedown",callback:e.hitch(this,"_navigate",{keyCode:d.PAGE_DOWN})},{id:"codingui_show_widget",enabled:!0,key:"ctrl_f1",platformKey:{mac:"ctrl_f1"},callback:e.hitch(this,"_handleCtrlF1",{keyCode:d.F1,ctrlKey:!0,metaKey:!0})},{id:"codingui_home",enabled:!0,key:"home",callback:e.hitch(this,"_navigate",{keyCode:d.HOME})},{id:"codingui_end",enabled:!0,key:"end",callback:e.hitch(this,"_navigate",{keyCode:d.END})}];b.loadActions(this._actions);this.own(g.after(f,"onCompleteText",e.hitch(this,
"completeText"),!0));this.own(g.after(f,"onSelectBounds",e.hitch(this,"_selectBoundsRequest"),!0));this.own(g.after(f,"onRequestHelp",e.hitch(this,"_requestHelp")));this.own(g.after(l,"stateChanged",e.hitch(this,"_stateChangeListener"),!0));this.own(g.after(v,"onBlur",e.hitch(this,"_handleBlur")));this.own(g.after(v,"onFocus",e.hitch(this,"_handleFocus")));this.own(g.after(h,"onContextUpdated",e.hitch(this,"_handleOnContextUpdated"),!0));this._isRightArrowQueued=this._isTabQueued=!1;this._inFocus=
!0},_handleOnContextUpdated:function(a){if(a===f.CONTEXT_RESET||a===f.CONTEXT_SWITCHED)this._fulfilQueuedAction(),this._isRightArrowQueued=this._isTabQueued=!1},_fulfilQueuedAction:function(){this._isTabQueued?this._complete({keyCode:d.TAB})||this._doDefaultTab():this._isRightArrowQueued&&(this._rightNavigate({keyCode:d.RIGHT_ARROW})||this._cursor.movePosition(this._cursor.WORD_RIGHT))},_doDefaultTab:function(){this._cursor.hasSelection()&&1===this._cursorController.getCursors().length?this._indentUtilities.indentSelection(b.DEFAULT_TAB_STRING,
!0):this._document.insertTab()},_stateChangeListener:function(a){switch(a){case this._stateHandler.CHANGE_TYPE_ENUM.EVAL_INITIALIZED:this._closeView()}},completeText:function(b,c){if(!this._requestHandler.hasPendingRequest()){var d=this._contextManager.getContext();if(d&&!this._contextManager.isContextCompleted()){this._contextManager.setContextToCompleted();var e=d.currentBounds,f=d.position.getLineColumn().line,g=!1,h=d.metaData,l="",v=h.getPresentingSignature();v&&(l=k.additionalCharToInsert(c,
v.callingSyntax));e=this._getReplacementBounds(e,f);l&&(v=this._document.getLineText(f).substr(e.right-1),/^\s*,/.test(v)||(b+=l,g=!0));e=k.updateBoundsForFolderAndMessageId(h,e,b);this._document.replaceText(b,f,e.left,f,e.right);!g&&(!h.isFileOrFolderName()&&!h.isMessageId())&&(d.widget.set("showWidgets",!1),this._requestHandler.request(a.COMPLETE))}}},_getReplacementBounds:function(a,b){var c={left:a.left,right:a.right};if(this._cursor.hasSelection()){var d=this._cursor.getSelectionLineColumn();
if(d.start.line!==d.end.line)return c;var e=d.start.column,d=d.end.column;e<d?(c.left=e,c.right=d):(c.left=d,c.right=e);e=this._document.getTextCharacters(b-1,c.right-1,1);if("'"===e||'"'===e)c.left--,c.right++}return c},_selectBoundsRequest:function(b){var c=this._contextManager.getContext();c&&(this._selectBounds(b,c),this._requestHandler.request(a.ACTIVE_REQUEST,{line:b.endLine,column:b.right}))},_selectBounds:function(a,b){var c=b.position.getLineColumn().column,d=a.left,e=a.right,f=a.startLine,
g=a.endLine,h={start:{line:f,column:d},end:{line:g,column:e}},k=this._cursor.hasSelection()&&this._cursor.getSelectionLineColumn();if((!k||!(JSON.stringify(k)===JSON.stringify(h)||a.startLine===k.start.line&&(a.left===k.start.column||a.left===k.end.column)))&&!(d===c&&d===e))this._rtcView.scrollLineColumnIntoView(f,d),this._cursor.setSelectionLineColumn(f,d,g,e)},_requestHelp:function(){var a=this._contextManager.getContext();if(a){var b=a.widget.domNode.getBoundingClientRect();if(a=a.metaData.getFunctionName()){var c=
this._rtcView.getCoordinateForPosition(this._cursor.position),b={currentLineCode:this._cursor.getNode().rootContainer().getText(),caretX:b.left+b.width+100,caretY:b.top,lineHeight:c.height,endCaretPosition:this._cursor.getPosition().column};this._helpService.showInHelpBrowser(a,b)}}},_select:function(){return!this._uiView.isTopViewDisplayed()||!this._contextManager.getContext()?!1:this._navigate({keyCode:d.ENTER})},_complete:function(a){if(this._cursorController.hasMultipleCursors())return!1;if(this._requestHandler.hasPendingRequest())return a.keyCode===
d.TAB?this._isTabQueued=!0:a.keyCode===d.RIGHT_ARROW&&(this._isRightArrowQueued=!0),!0;a=this._contextManager.getContext();if(!a)return!1;if(this._tabKeyHandled(a))return!0;this._contextManager.setContextTabMode(!1);return this._uiView.sendEventToTopView({keyCode:d.TAB})},_tabKeyHandled:function(a){var b=a.widget,c=l.getSelectedCompletion(b),b=l.getNumberOfChoices(b),d=this._uiView.isTopViewDisplayed(),e=c===a.code;a=this._cursor.getLineColumn().column===a.currentBounds.right;var f=!1;d&&e?(this._closeView(),
f=!0):!d&&(!e&&a&&1===b)&&(this.completeText(c),f=!0);return f},_escape:function(a){this._requestHandler.stopPendingRequest();a=this._navigate(a);return!a?(this._contextManager.setContextTabMode(!0),this._closeView()):a},_navigate:function(a){if(!this._contextManager.getContext())return!1;var b=!1;this._uiView.isTopViewDisplayed()&&(b=this._uiView.sendEventToTopView(a));return b},_rightNavigate:function(a){return this._uiView.isShadowTextViewDisplayed()&&this._uiView.isTopViewDisplayed()?(this._complete(a),
!0):!1},_handleBlur:function(){this._inFocus=!1;this._closeView();this._contextManager.reset()},_handleFocus:function(){this._inFocus||(this._inFocus=!0,this._requestHandler.request(a.SILENT_UPDATE))},_handleCtrlF1:function(a){if(this._cursorController.hasMultipleCursors())return!1;var b=this._contextManager.getContext();return!b||!b.metaData.hasSignatures()?!1:this._uiView.sendEventToTopView(a)},_closeView:function(){return this._uiView.close()}})})},"MW/rtc/plugins/language/matlab/codingui/CodingUIActivities":function(){define([],
function(){return{SILENT_UPDATE:1,CURSOR_SELECTION:2,INSERT_DELETE_TEXT:3,ACTIVE_REQUEST:4,COMPLETE:5}})},"MW/rtc/plugins/language/matlab/codingui/CodingUIContextEvents":function(){define([],function(){return{CONTEXT_SWITCHED:1,CONTEXT_RESET:2,LEAVING_RANGE:3,SILENT_RESET:4}})},"MW/rtc/plugins/language/matlab/codingui/utilities/CodingUIActionHandlerUtilities":function(){define([],function(){return{_NAMEVALUE_PAIR_SEPERATOR:",",_NAMEVALUE_PAIR_SEPERATOR_COMMAND_SYNTAX:" ",_METADATA_CALLING_SYNTAX_COMMAND:"command",
_METADATA_ARGUMENT_KIND_NAME:"name",updateBoundsForFolderAndMessageId:function(h,e,g){h=h.getFunctionPresentingArgument();if(!h)return e;var d=h.value,c=d.length;if(d&&1>=c)return e;d=d.charAt(c-1);if(!("'"===d||'"'===d))return e;g=this._getMatchingChoice(h,g);return!g?e:this._getBoundsForMatchingChoice(g,e)},_getMatchingChoice:function(h,e){if(!h.widgetData)return null;var g=h.widgetData.choices;if(!g)return null;for(var d=0;d<g.length;d++){var c=g[d];if(c.completion===e)return c}return null},_getBoundsForMatchingChoice:function(h,
e){var g=h.matchType;if("folder"!==g&&"messageId"!==g)return e;var d=h.completion,c=d.length;if(1>=c)return e;g=d.charAt(0);d=d.charAt(c-1);("'"===g&&"'"!==d||'"'===g&&'"'!==d)&&e.right--;return e},additionalCharToInsert:function(h,e){return h&&h.mwEventData.kind===this._METADATA_ARGUMENT_KIND_NAME?e===this._METADATA_CALLING_SYNTAX_COMMAND?this._NAMEVALUE_PAIR_SEPERATOR_COMMAND_SYNTAX:this._NAMEVALUE_PAIR_SEPERATOR:""}}})},"MW/rtc/plugins/language/matlab/codingui/utilities/CodingUIWidgetUtilities":function(){define(["dojo/_base/lang",
"MW/rtc/plugins/language/matlab/codingui/programmingaids/WidgetTypes","MW/rtc/plugins/language/matlab/codingui/programmingaids/manifest"],function(h,e,g){return{isSuggestionWidget:function(d){d=d.widgetType;return d===e.COMPLETION||d===e.FILE_NAME},isFunctionAssistantWidget:function(d){return(d=d.signatures)&&0<d.length},getNumberOfChoices:function(d){return!d?0:d.get("numberOfChoices")},getSelectedCompletion:function(d){if(!d)return null;var c=d.get("value");return c?c:d.get("valueOfFirstChoice")},
getCompletionChoices:function(d){return!d?[]:d.get("choices")},createWidget:function(d){var c=d.getData(),b=null,a=c.signatures,f=c.shared;if(a&&0<a.length)f=!d.isCallingSyntaxObjectOrCell(),b=new g[e.FUNCTION_ASSISTANT]({data:c}),b.set("showHelp",f);else if(d=null,f?d=f:c.widgetType&&(d=c),d&&g[d.widgetType]&&(c=g[d.widgetType]))b=h.mixin({},d.widgetData),b=new c(b);return b}}})},"MW/rtc/plugins/language/matlab/codingui/programmingaids/WidgetTypes":function(){define({FUNCTION_ASSISTANT:"functionAssistant",
COMPLETION:"completion",FILE_NAME:"filename",FOLDER_NAME:"foldername",SCALAR:"scalar"})},"MW/rtc/plugins/language/matlab/codingui/programmingaids/manifest":function(){define(["dojo/_base/lang","MW/rtc/plugins/language/matlab/codingui/programmingaids/atomicManifest","MW/rtc/plugins/language/matlab/codingui/programmingaids/widgets/FunctionAssistant","MW/rtc/plugins/language/matlab/codingui/programmingaids/WidgetTypes"],function(h,e,g,d){var c={};c[d.FUNCTION_ASSISTANT]=g;h.mixin(c,e);return c})},"MW/rtc/plugins/language/matlab/codingui/programmingaids/atomicManifest":function(){define(["MW/rtc/plugins/language/matlab/codingui/widgets/Completion",
"MW/rtc/plugins/language/matlab/codingui/programmingaids/WidgetTypes"],function(h,e){var g={};g[e.FILE_NAME]=h;g[e.FOLDER_NAME]=h;g[e.COMPLETION]=h;g[e.SCALAR]=h;return g})},"MW/rtc/plugins/language/matlab/codingui/widgets/Completion":function(){define("dojo/_base/declare dojo/_base/lang dojo/keys dojo/on dijit/_WidgetBase MW/rtc/plugins/language/matlab/codingui/widgets/WidgetsUtility".split(" "),function(h,e,g,d,c,b){function a(a,b){var c=null,d=a.parentNode.children,e=d.length,f=null,g;for(g=0;g<
e;g+=1)if(d[g]===a){f=g;break}null!==f&&(c=0<b?d[Math.min(e-1,f+b)]:d[Math.max(0,f+b)]);return c}var f=["mwCompletion__choiceContainer__choice--hover","mwCompletion__choiceContainer__choice--selected"];h=h(c,{baseClass:"mwCompletion",presenting:!1,attachedAt:"none",value:"",constructor:function(){this.choices=[];this._choiceClass="mwCompletion__choiceContainer__choice--hover"},buildRendering:function(){this.inherited(arguments);this.completionContainer=b.buildNode("div",{className:"choiceContainer",
parent:this.domNode},"mwCompletion")},postCreate:function(){this.inherited(arguments);this.domNode.setAttribute("data-focus","refuse");this.on("mousemove",e.hitch(this,this._handleMouseMove));this.own(d(this.completionContainer,"scroll",e.hitch(this,this._handleScroll)));this.on("click",e.hitch(this,this._handleClick))},_handleMouseMove:function(a){var b,c=a.target;if((this._previousPageX!==a.pageX||this._previousPageY!==a.pageY)&&!c.classList.contains("mwCompletion")&&!c.classList.contains("mwCompletion__choiceContainer"))b=
c.classList.contains("mwCompletion__choiceContainer__choice")?c:c.parentNode,b.classList.contains("mwCompletion__choiceContainer__choice--hover")||(b=b.getAttribute("data-completion"),this._choiceClass="mwCompletion__choiceContainer__choice--hover",this.set("value",b)),this._hideExistingTooltip(),(c.classList.contains("mwCompletion__choiceContainer__choice__purpose")||c.classList.contains("mwCompletion__choiceContainer__choice__text"))&&this._createTooltip(c);this._previousPageX=a.pageX;this._previousPageY=
a.pageY},_hideExistingTooltip:function(){var a=this.domNode.querySelector(".mwCompletion__choiceContainer__choice__purpose--showTooltip");a&&a.classList.remove("mwCompletion__choiceContainer__choice__purpose--showTooltip");(a=this.domNode.querySelector(".mwCompletion__choiceContainer__choice__text--showTooltip"))&&a.classList.remove("mwCompletion__choiceContainer__choice__text--showTooltip")},_createTooltip:function(a){if(a.offsetWidth<a.scrollWidth){var c,d;c=a.classList.contains("mwCompletion__choiceContainer__choice__purpose")?
"mwCompletion__choiceContainer__choice__purpose":"mwCompletion__choiceContainer__choice__text";d=a.classList.contains("mwCompletion__choiceContainer__choice__purpose")?"purposeTooltip":"choiceTooltip";a.classList.add(c+"--showTooltip");0===a.children.length?(c=a.textContent,a=b.buildNode("span",{className:d,text:c,parent:a},"mwCompletion")):a=a.children[0];d=this.domNode.querySelector(".mwCompletion__choiceContainer__choice--hover");c=this.completionContainer.getBoundingClientRect().top;d=d.getBoundingClientRect().top-
c;a.style.top=d+"px"}},_handleScroll:function(){this._hideExistingTooltip()},_handleClick:function(){this._triggerChangeEvent(this.get("value"),this.get("value"))},_triggerChangeEvent:function(a,b){this.emit("change",{mwEventData:{propertyName:"value",oldValue:a,newValue:b}})},_triggerSelectEvent:function(a,b){this.emit("select",{mwEventData:{propertyName:"value",oldValue:a,newValue:b}})},_removeChoiceClasses:function(a){f.forEach(function(b){a.classList.remove(b)})},_setValueAttr:function(a){if(void 0===
a)throw Error("Invalid Value. Value can only be a string");var b=this._getChoiceNode(this.get("value")),c="";b&&(c=b.getAttribute("data-completion"),this._removeChoiceClasses(b));if(""===a)this._triggerSelectEvent(c,"");else if(b=this._getChoiceNode(a)){b.classList.add(this._choiceClass);var d=b.getAttribute("data-completion");this._triggerSelectEvent(c,d);var c=this.completionContainer,b=b.getBoundingClientRect(),d=c.getBoundingClientRect(),e=b.bottom>d.bottom;b.top<d.top?c.scrollTop-=d.top-b.top+
1:e&&(c.scrollTop+=b.bottom-d.bottom+1)}this._set("value",a)},_setPresentingAttr:function(a){a?this.domNode.classList.add("mwCompletion--presenting"):this.domNode.classList.remove("mwCompletion--presenting");this._set("presenting",a)},_setAttachedAtAttr:function(a){-1!==["none","top","bottom"].indexOf(a)&&(this.domNode.classList.remove("mwCompletion--top"),this.domNode.classList.remove("mwCompletion--bottom"),"top"===a?this.domNode.classList.add("mwCompletion--top"):"bottom"===a&&this.domNode.classList.add("mwCompletion--bottom"),
this._set("attachedAt",a))},_setNumberOfChoicesAttr:function(){throw Error("numberOfChoices is a read-only property!");},_getNumberOfChoicesAttr:function(){return this.domNode.querySelectorAll(".mwCompletion__choiceContainer__choice").length},_setValueOfFirstChoiceAttr:function(){throw Error("valueOfFirstChoice is a read-only property!");},_getValueOfFirstChoiceAttr:function(){var a=this.completionContainer.firstChild,b=null;a&&(b=a.getAttribute("data-completion"));return b},_setAlignmentXOffsetAttr:function(){throw Error("alignmentXOffset is a read-only property!");
},_getAlignmentXOffsetAttr:function(){var a=this.completionContainer.firstChild,b=0;if(a&&(a=a.querySelector(".mwCompletion__choiceContainer__choice__text")))b=a.getBoundingClientRect().left,a=this.domNode.getBoundingClientRect().left,b-=a;return b},_setChoicesAttr:function(a){for(;this.completionContainer.firstChild;)this.completionContainer.removeChild(this.completionContainer.firstChild);var c=!0;a.forEach(function(a){var d=b.buildNode("div",{className:"choice",parent:this.completionContainer},
"mwCompletion");this.renderItem(d,a)||(c=!1);d.setAttribute("data-completion",a.completion)},this);c?this.domNode.classList.add("mwCompletion--hideIcons"):this.domNode.classList.remove("mwCompletion--hideIcons");this.domNode.style.display=0===a.length?"none":null;this._set("choices",a)},renderItem:function(a,c){var d=!0;c.matchType&&"unknown"!==c.matchType&&("mFile"===c.matchType?c.matchType="function":"pathItem"===c.matchType&&(c.matchType="filename"),d=!1);c.separated&&a.classList.add("mwCompletion__choiceContainer__choice--separated");
b.buildNode("div",{className:"icon",parent:a},"mwCompletion").classList.add("mwCompletion__icon--"+c.matchType);var e=c.hasOwnProperty("displayString")?c.displayString:c.completion;b.buildNode("div",{className:"text",text:e,parent:a},"mwCompletion");b.buildNode("div",{className:"purpose",text:c.purpose,parent:a},"mwCompletion");return d},navigate:function(b){var c=this._getChoiceNode(this.get("value")),d,e=!1;switch(b.keyCode){case g.DOWN_ARROW:if(c){var f;c.nextSibling&&(f=c.nextSibling);d=f}else d=
this.completionContainer.firstChild;e=!0;break;case g.UP_ARROW:if(c){var h;c.previousSibling&&(h=c.previousSibling);d=h;e=!0}break;case g.HOME:d=c?this.completionContainer.firstChild:d;break;case g.END:d=c?this.completionContainer.lastChild:d;break;case g.PAGE_DOWN:d=c?a(c,7):d;break;case g.PAGE_UP:d=c?a(c,-7):d;break;case g.TAB:e=c?c:this.completionContainer.firstChild;this._triggerChangeEvent(this.get("value"),e.getAttribute("data-completion"));e=!0;break;case g.ENTER:c&&(this._triggerChangeEvent(this.get("value"),
this.get("value")),e=!0)}void 0!==d&&(d=d.getAttribute("data-completion"),e=!0,this._choiceClass="mwCompletion__choiceContainer__choice--selected",this.set("value",d),this._choiceClass="mwCompletion__choiceContainer__choice--hover");return e},_getChoiceNode:function(a){for(var b=null,c=this.completionContainer.children.length,d=0;d<c;d++)if(this.completionContainer.children[d].getAttribute("data-completion")===a){b=this.completionContainer.children[d];break}return b},startup:function(){this.inherited(arguments)}});
h.BASE_CLASS="mwCompletion";h.CHOICE_CLASS="mwCompletion__choiceContainer__choice";h.SELECTED_CHOICE_CLASS="mwCompletion__choiceContainer__choice--selected";h.HOVER_SELECTED_CHOICE_CLASS="mwCompletion__choiceContainer__choice--hover";h.CHOICE_TEXT_CLASS="mwCompletion__choiceContainer__choice__text";h.CHOICE_TOOLTIP_CLASS="mwCompletion__choiceContainer__choice__text__choiceTooltip";h.PURPOSE_CLASS="mwCompletion__choiceContainer__choice__purpose";h.PURPOSE_TOOLTIP_CLASS="mwCompletion__choiceContainer__choice__purpose__purposeTooltip";
h.SEPARATED_CHOICE_CLASS="mwCompletion__choiceContainer__choice--separated";h.HIDE_ICON_CLASS="mwCompletion--hideIcons";h.PRESENTING_CLASS="mwCompletion--presenting";h.BOTTOM_ATTACHED_CLASS="mwCompletion--bottom";h.TOP_ATTACHED_CLASS="mwCompletion--top";return h})},"MW/rtc/plugins/language/matlab/codingui/widgets/WidgetsUtility":function(){define([],function(){return{buildNode:function(h,e,g){e=e||{};var d=document.createElement(h),c="";e.parent&&!e.useOwnClass?c=e.parent.classList[0]:e.useOwnClass||
(c=g);e.className&&(""===c?d.classList.add(e.className):d.classList.add(c+"__"+e.className));e.classModifiers&&e.classModifiers.forEach(function(b){""===c?d.classList.add(e.className+"--"+b):d.classList.add(c+"__"+e.className+"--"+b)},this);e.text&&(d.textContent=e.text);e.parent&&e.parent.appendChild(d);e.title&&d.setAttribute("title",e.title);return d}}})},"MW/rtc/plugins/language/matlab/codingui/programmingaids/widgets/FunctionAssistant":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/keys dojo/on dojo/string dijit/registry dijit/_WidgetBase MW/rtc/plugins/language/matlab/codingui/programmingaids/atomicManifest MW/rtc/plugins/language/matlab/codingui/programmingaids/WidgetTypes MW/rtc/plugins/language/matlab/codingui/widgets/WidgetsUtility dojo/i18n!l10n/nls/tabcompletion".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p){h=h(f,{baseClass:"mwFunctionAssistant",showWidgets:!0,showSignatures:!1,position:"bottom",showHelp:!0,constructor:function(){this.data={signatures:[]}},buildRendering:function(){this.inherited(arguments);this.domNode.setAttribute("data-focus","refuse");this._createChildDomNodes()},_setShowSignaturesAttr:function(a){if(a){if(1<this._signatureCompletion.get("numberOfChoices")){this._previousSignature=this._currentSignature;this.domNode.classList.add("mwFunctionAssistant--showSignatures");
var b=this._indexOfSignature(this._currentSignature);-1<b&&this._signatureCompletion.set("value",b+"");this.emit("size-change",{});this._set("showSignatures",a)}}else this.domNode.classList.remove("mwFunctionAssistant--showSignatures"),this.emit("size-change",{}),this._set("showSignatures",a)},_setPositionAttr:function(a){this.domNode.classList.remove(this.baseClass+"--"+this.position);this.domNode.classList.add(this.baseClass+"--"+a);this.position!==a&&this._set("position",a)},_setShowWidgetsAttr:function(a){a?
this.domNode.classList.remove("mwFunctionAssistant--widgetsHidden"):this.domNode.classList.add("mwFunctionAssistant--widgetsHidden");this._set("showWidgets",a)},_setValueAttr:function(){throw Error("value is a read-only property!");},_getValueAttr:function(){var b="",c=this._signatureContainer.querySelector(".mwCompletion__choiceContainer__choice--selected"),d=this._signatureContainer.querySelector(".mwCompletion__choiceContainer__choice--hover");(c=c?c:d)&&(b=a.getEnclosingWidget(c).get("value"));
return b},_setNumberOfChoicesAttr:function(){throw Error("numberOfChoices is a read-only property!");},_getNumberOfChoicesAttr:function(){var a=0,b=this._signatureContainer.querySelector(".mwFunctionAssistant__signatureContainer__argumentContainer__argument--current");b&&(a=b.querySelectorAll(".mwCompletion__choiceContainer__choice").length);return a},_setAlignmentXOffsetAttr:function(){throw Error("alignmentXOffset is a read-only property!");},_getAlignmentXOffsetAttr:function(){var a=this._argumentContainer.getBoundingClientRect().left,
b=this.domNode.getBoundingClientRect().left;return a-b},_setValueOfFirstChoiceAttr:function(){throw Error("valueOfFirstChoice is a read-only property!");},_getValueOfFirstChoiceAttr:function(){var a=this.domNode.querySelector(".mwFunctionAssistant__signatureContainer__argumentContainer__argument--current"),b=null;a.widget&&(a=a.widget.completionContainer.firstChild)&&(b=a.getAttribute("data-completion"));return b},_setDataAttr:function(a){this._signaturesBeforePromotion=JSON.parse(JSON.stringify(a.signatures));
a=this._sortPromotedSignatures(a);this._set("data",a);this.data.signatures&&0<this.data.signatures.length&&(this._setCurrentSignatureIndex(),2>this.data.signatures.length?this.domNode.classList.add("mwFunctionAssistant--noSignatureCompletions"):this.domNode.classList.remove("mwFunctionAssistant--noSignatureCompletions"));this._setAppropriateSignature();0!==this.data.signatures.length&&(this._buildArgumentContainer(),this._setTotalSignaturesNode(this.data.signatures),this._buildSignatureCompletion(this.data.signatures));
this.domNode.style.display=0===this.data.signatures.length?"none":null;this._dropDownContainer.style.display=1===this.data.signatures.length?"none":null},_setShowHelpAttr:function(a){a?this.domNode.classList.add("mwFunctionAssistant--helpAvailable"):this.domNode.classList.remove("mwFunctionAssistant--helpAvailable");this._set("showHelp",a)},postCreate:function(){this.inherited(arguments);this._hookupDomNodeListeners()},_createChildDomNodes:function(){this._signatureContainer=n.buildNode("div",{className:"signatureContainer",
parent:this.domNode},"mwFunctionAssistant");this._createHelpNode();this._argumentContainer=n.buildNode("div",{className:"argumentContainer",parent:this._signatureContainer},"mwFunctionAssistant");this._createDropDownNode()},_createHelpNode:function(){this._helpContainer=n.buildNode("div",{className:"helpContainer",parent:this._signatureContainer,title:p.help},"mwFunctionAssistant");this._helpNode=n.buildNode("div",{parent:this._helpContainer,className:"help"},"mwFunctionAssistant")},_createDropDownNode:function(){var a=
g("mac")?p.moreSignatures+" (\u2318\u2193)":p.moreSignatures+" (Ctrl + Down)";this._dropDownContainer=n.buildNode("div",{className:"dropDownContainer",parent:this._signatureContainer,title:a},"mwFunctionAssistant");this._currentSignatureIndexNode=n.buildNode("div",{className:"currentSignatureIndex",parent:this._dropDownContainer},"mwFunctionAssistant");n.buildNode("div",{className:"signatureLabel",parent:this._dropDownContainer,text:"of"},"mwFunctionAssistant");this._totalSignaturesNode=n.buildNode("div",
{className:"totalSignatures",parent:this._dropDownContainer},"mwFunctionAssistant");n.buildNode("div",{className:"dropDown",parent:this._dropDownContainer},"mwFunctionAssistant")},_hookupDomNodeListeners:function(){this._handleDocumentBodyClick=e.hitch(this,function(a){this.domNode.classList.contains("mwFunctionAssistant--showSignatures")&&!this._dropDownContainer.contains(a.target)&&this.set("showSignatures",!1)});document.body.addEventListener("click",this._handleDocumentBodyClick,!0);this.domNode.addEventListener("change",
this._handleChange.bind(this));this.domNode.addEventListener("select",this._handleSelect.bind(this));this.domNode.addEventListener("click",this._handleClick.bind(this));this.domNode.addEventListener("mouseover",this._handleMouseOver.bind(this));this.domNode.addEventListener("mouseout",this._handleMouseOut.bind(this))},_handleChange:function(b){var c=a.getEnclosingWidget(b.target);c===this._signatureCompletion?b.mwEventData.type="signatureChange":c&&c._argumentNode&&(b.mwEventData.kind=c._argumentNode.kind,
this._findOriginalSignature(c))},_handleSelect:function(b){a.getEnclosingWidget(b.target)===this._signatureCompletion&&(b.stopImmediatePropagation(),b.stopPropagation())},_handleClick:function(a){var b=a.target;if(b===this._helpNode)this.emit("help");else if(this._dropDownContainer.contains(b))this._toggleSignatureCompletion();else if(b.classList.contains("leftArrow")||b.classList.contains("rightArrow")){var c=b.classList.contains("leftArrow")?-1:1;a=this._argumentContainer.querySelector(".mwFunctionAssistant__signatureContainer__argumentContainer__argument--current");
b=Array.prototype.slice.call(this._argumentContainer.querySelectorAll(".mwFunctionAssistant__signatureContainer__argumentContainer__argument--present"));c=b.indexOf(a)+c;this._updateCurrentArgumentOnNavigation(a,b[c])}else if(this._argumentContainer.contains(b)&&(a=this._findArgument(a))&&a.classList.contains("mwFunctionAssistant__signatureContainer__argumentContainer__argument--present"))b=this._argumentContainer.querySelector(".mwFunctionAssistant__signatureContainer__argumentContainer__argument--current"),
this._updateCurrentArgumentOnNavigation(b,a)},_handleMouseOver:function(a){this._argumentContainer.contains(a.target)&&(a=this._findArgument(a))&&this.emit("argument-over",{mwEventData:{argumentName:a.name,bounds:a.bounds}})},_handleMouseOut:function(a){this._argumentContainer.contains(a.target)&&(a=this._findArgument(a))&&this.emit("argument-out",{mwEventData:{argumentName:a.name,bounds:a.bounds}})},_findOriginalSignature:function(a){var b=a.domNode.parentNode.parentNode,b=Array.prototype.slice.call(this._argumentContainer.querySelectorAll(".mwFunctionAssistant__signatureContainer__argumentContainer__argument")).indexOf(b),
c=a.get("value")?a.get("value"):a.get("valueOfFirstChoice");a=this.data.signatures[this._currentSignatureIndex].inputArguments[b];if(void 0!==a.widgetData){var d;a.widgetData.choices.some(function(a){if(a.completion===c)return d=a,!0});if(d&&0<=d.originalSignature){a=this._signaturesBeforePromotion[d.originalSignature];for(var e,b=0;b<this.data.signatures.length;b++)if(this._isSameArgumentArray(a.inputArguments,this.data.signatures[b].inputArguments)){e=b;break}e!==this._currentSignatureIndex&&(this._currentSignature=
this.data.signatures[e].inputArguments)}}},_setCurrentSignatureIndex:function(){for(var a=this.data.signatures,b=null,c=0;c<a.length;c++)if(0!==a[c].inputArguments.length){b=c;break}this._currentSignatureIndex=b},_setAppropriateSignature:function(){if(this._currentSignature)for(var a=0;a<this.data.signatures.length;a++)if(this._isSameArgumentArray(this._currentSignature,this.data.signatures[a].inputArguments)){this._currentSignatureIndex=a;break}if(!(2>this.data.signatures.length)&&(a=this._findCurrentArgumentIndex(),
-1!==a)){var b=this.data.signatures[this._currentSignatureIndex].inputArguments[a];b&&b.value&&(b=b.value,0!==b.length&&(b&&"''"!==b)&&(b=b.replace(/'/g,""),a=this._findMatchingSignature(a,b),this._currentSignatureIndex=-1==a?this._currentSignatureIndex:a))}},_isArgumentMatching:function(a,b,c){if((a=this.data.signatures[a].inputArguments[b])&&a.widgetData&&a.widgetData.choices&&0!==a.widgetData.choices.length){a=a.widgetData.choices;c=c.toLowerCase();for(b=0;b<a.length;b++){if(a[b].displayString){var d=
a[b].displayString;0<=c.lastIndexOf("\\")&&c.lastIndexOf("\\")<c.length?c=c.substring(c.lastIndexOf("\\")+1):0<=c.lastIndexOf("/")&&c.lastIndexOf("/")<c.length&&(c=c.substring(c.lastIndexOf("/")+1))}else d=a[b].completion;d=d.replace(/'/g,"");d=d.toLowerCase();if(0===d.indexOf(c))return!0}}return!1},_findMatchingSignature:function(a,b){if(this._isArgumentMatching(this._currentSignatureIndex,a,b))return this._currentSignatureIndex;for(var c=0;c<this.data.signatures.length;c++)if(c!==this._currentSignatureIndex&&
this._isArgumentMatching(c,a,b))return c;return-1},_findCurrentArgumentIndex:function(){var a=this._argumentContainer.querySelector(".mwFunctionAssistant__signatureContainer__argumentContainer__argument--current");return Array.prototype.slice.call(this._argumentContainer.querySelectorAll(".mwFunctionAssistant__signatureContainer__argumentContainer__argument")).indexOf(a)},_findArgument:function(a){var b=null;a.target.parentNode.classList.contains("mwFunctionAssistant__signatureContainer__argumentContainer__argument")?
b=a.target.parentNode:a.target.classList.contains("mwFunctionAssistant__signatureContainer__argumentContainer__argument")&&(b=a.target);return b},_isSameArgumentArray:function(a,b){var c=a.map(function(a){return a.name}).sort(),d=b.map(function(a){return a.name}).sort();return c.join(",")===d.join(",")},_indexOfSignature:function(a){for(var b=this.data.signatures,c=b.length,d=-1,e=0;e<c;e+=1)if(this._isSameArgumentArray(a,b[e].inputArguments)){d=e;break}return d},_sortPromotedSignatures:function(a){var b=
[],c=[];a=JSON.parse(JSON.stringify(a));a.signatures.forEach(function(a){"primary"===a.promotion?b.push(a):c.push(a)});a.signatures=b.concat(c);return a},_setCurrentSignatureIndexNode:function(a){0<=a&&(this._currentSignatureIndexNode.textContent=a+1)},_setTotalSignaturesNode:function(a){this._totalSignaturesNode.textContent=a.length},_checkForCommandLineSyntax:function(){return"command"===this.data.signatures[this._currentSignatureIndex].callingSyntax},_checkForObjectSyntax:function(){return"object"===
this.data.signatures[this._currentSignatureIndex].callingSyntax},_checkForCellSyntax:function(){return"cell"===this.data.signatures[this._currentSignatureIndex].callingSyntax},_checkBracketType:function(){var a="(";this._checkForCommandLineSyntax()?a=" ":this._checkForCellSyntax()&&(a="{");return a},_findHeaderText:function(a){var b="";a.purpose?b=a.purpose:"name"===a.kind?b="name-value pairs":"value"===a.kind&&(b=a.name+" value");return b},_buildSignatureCompletion:function(a){this._signatureCompletion&&
this._signatureCompletion.destroyRecursive();a=JSON.parse(JSON.stringify(a));this._signatureCompletion=new k[l.COMPLETION]({choices:a.map(function(a,b){return{data:a.inputArguments,completion:b+"",functionName:a.functionName}}),renderItem:e.hitch(this,function(a,b){var c=this._checkForCommandLineSyntax();n.buildNode("span",{text:b.functionName,parent:a},"mwFunctionAssistant");n.buildNode("span",{text:c?" ":"(",parent:a},"mwFunctionAssistant");b.data.forEach(function(b,d){var e=this._prepareClassModifiers(b);
if(0<d){var f=this._prepareCommaClassModifiers(e);n.buildNode("span",{parent:a,text:c?" ":",",className:"comma",useOwnClass:!0,classModifiers:f},"mwFunctionAssistant")}n.buildNode("span",{parent:a,text:b.repeatedCount?b.name+b.repeatedCount:b.name,className:"mwFunctionAssistant__signatureCompletion__mwCompletion__choice__argument",useOwnClass:!0,classModifiers:e})},this);n.buildNode("span",{text:c?" ":")",parent:a},"mwFunctionAssistant")})});this._signatureCompletion.domNode.classList.add("mwFunctionAssistant__signatureCompletion");
this._signatureCompletion.placeAt(this.domNode);this._signatureCompletion.startup();this._signatureCompletion.on("change",e.hitch(this,this._handleSignatureChange))},_handleSignatureChange:function(a){this._currentSignatureIndex=parseInt(a.mwEventData.newValue,10);this.set("showSignatures",!1);this._buildArgumentContainer()},_buildArgumentContainer:function(){this._setCurrentSignatureIndexNode(this._currentSignatureIndex);this._updateCurrentSignature(this.data.signatures[this._currentSignatureIndex].inputArguments);
this._buildNavigationArrowsInToolTip();this._setCurrentArgument()},_updateCurrentSignature:function(a){this._currentSignature=a;this._buildCurrentSignature(a)},_updateCurrentArgument:function(a){this._currentArgument=a},_buildCurrentSignature:function(a){var b=a.length;this._cleanupOldDOM();n.buildNode("span",{text:this.data.signatures[0].functionName,parent:this._argumentContainer},"mwFunctionAssistant");if(0!==b){var c=this._checkBracketType();n.buildNode("span",{text:c,parent:this._argumentContainer},
"mwFunctionAssistant");if(this._checkForObjectSyntax()||this._checkForCellSyntax())Array.prototype.splice.call(a,0,1),b-=1;a.forEach(function(a,c){this._buildArgumentsAndWidget(a,c,b)},this)}},_buildArgumentsAndWidget:function(a,b,c){b=this._buildArgument(a,b,c);c=this._buildCorrespondingWidget(a,this.data.shared);var d=n.buildNode("div",{className:"widgetContainer",parent:b},"mwFunctionAssistant"),e=this._findHeaderText(a),e=this._buildHeaderNode(e,d,b,!!c);c?(c.placeAt(d),c.startup(),c._argumentNode=
b,b.widget=c,b.classList.add("mwFunctionAssistant__signatureContainer__argumentContainer__argument--hasWidget")):this._buildSubHeadNode(a,e)},_buildHeaderNode:function(a,c,d,e){var f=!1;if(""===a){if(!e){a=p.argumentHeader;var g=a.split("${0}")}f=!0}e=n.buildNode("div",{className:"header",parent:c},"mwFunctionAssistant");var h=n.buildNode("div",{className:"text",parent:e},"mwFunctionAssistant"),k=n.buildNode("div",{parent:h,useOwnClass:!0,className:"headerValue"},"mwFunctionAssistant");g?(""!==g[0]&&
""!==g[1]&&(g.push(g[1]),g[1]=""),g.forEach(function(a){""!==a?n.buildNode("span",{parent:k,text:a,useOwnClass:!0},"mwFunctionAssistant"):n.buildNode("span",{parent:k,text:d.name,useOwnClass:!0,className:"argumentName"},"mwFunctionAssistant")}),a=b.substitute(p.argumentHeader,[d.name])):a&&n.buildNode("span",{parent:k,text:a,useOwnClass:!0},"mwFunctionAssistant");""===a&&f&&(n.buildNode("span",{parent:k,text:d.name,useOwnClass:!0,className:"argumentName"},"mwFunctionAssistant"),a+=d.name);""!==a?
c.classList.add("mwFunctionAssistant__signatureContainer__argumentContainer__argument__widgetContainer--headerAvailable"):c.classList.remove("mwFunctionAssistant__signatureContainer__argumentContainer__argument__widgetContainer--headerAvailable");c=n.buildNode("div",{parent:h,useOwnClass:!0,className:"optionalDiv"},"mwFunctionAssistant");21<a.length&&k.setAttribute("title",a);!d.classList.contains("mwFunctionAssistant__signatureContainer__argumentContainer__argument--required")&&!d.classList.contains("mwFunctionAssistant__signatureContainer__argumentContainer__argument--value")&&
(c.textContent="("+p.optionalArgument+")");return e},_findNavigationTooltipText:function(a,b){var c;switch(b){case "first":c=a?p.nextArgument+" (\u2318\u2192)":p.nextArgument+" (Ctrl + Right)";break;case "middle":c=a?p.nextArgument+" (\u2318\u2192).\n"+p.previousArgument+" (\u2318\u2190)":p.nextArgument+" (Ctrl + Right).\n"+p.previousArgument+" (Ctrl + Left)";break;case "last":c=a?p.previousArgument+" (\u2318\u2190)":p.previousArgument+" (Ctrl + Left)"}return c},_buildNavigationArrowsInToolTip:function(){var a=
Array.prototype.slice.call(this._argumentContainer.querySelectorAll(".mwFunctionAssistant__signatureContainer__argumentContainer__argument")).filter(function(a){return a.classList.contains("mwFunctionAssistant__signatureContainer__argumentContainer__argument--present")}),b=a.length;1<b&&a.forEach(function(a,c){var d=a.querySelector(".mwFunctionAssistant__signatureContainer__argumentContainer__argument__widgetContainer__header").firstChild;d.classList.add("mwFunctionAssistant__signatureContainer__argumentContainer__argument__widgetContainer__header--hasNavigationArrows");
var e;e=0===c?this._findNavigationTooltipText(g("mac"),"first"):c===b-1?this._findNavigationTooltipText(g("mac"),"last"):this._findNavigationTooltipText(g("mac"),"middle");d=n.buildNode("div",{className:"argNavigationContainer",parent:d,useOwnClass:!0,title:e},"mwFunctionAssistant");0!==c&&n.buildNode("div",{className:"leftArrow",parent:d,useOwnClass:!0},"mwFunctionAssistant");e=n.buildNode("div",{className:"presentingArgIndexContainer",parent:d,useOwnClass:!0,title:e},"mwFunctionAssistant");n.buildNode("div",
{className:"currentArg",parent:e,text:c+1,useOwnClass:!0},"mwFunctionAssistant");n.buildNode("div",{className:"argumentLabel",parent:e,text:"of",useOwnClass:!0},"mwFunctionAssistant");n.buildNode("div",{className:"totalArguments",parent:e,text:b,useOwnClass:!0},"mwFunctionAssistant");c!==b-1&&n.buildNode("div",{className:"rightArrow",parent:d,useOwnClass:!0},"mwFunctionAssistant")},this)},_buildSubHeadNode:function(a,b){if(a.valueSummary){if(26<a.valueSummary.length)var c=a.valueSummary;n.buildNode("div",
{className:"valueSummary",parent:b,text:a.valueSummary,title:c},"mwFunctionAssistant")}},_isValueOfTypeString:function(a){var b=!1;0<a.length&&-1!==a.indexOf("'")&&(b=!0);return b},_setCurrentArgument:function(){var a,b=0,c=!0;a=this.data.signatures[this._currentSignatureIndex].inputArguments.filter(function(a){return"presenting"===a.status});if(0!==a.length){var d=a[b];if(this._currentArgument&&(a.forEach(function(a,c){a.name===this._currentArgument.name&&(b=c)},this),d=a[b],d.widgetData&&d.widgetData.choices&&
d.widgetData.choices.length||"none"===d.widgetType))c=!1;a=this._signatureContainer.querySelectorAll(".mwFunctionAssistant__signatureContainer__argumentContainer__argument--present");var e=Array.prototype.slice.call(this._signatureContainer.querySelectorAll(".mwFunctionAssistant__signatureContainer__argumentContainer__argument"));if(this._isValueOfTypeString(d.value)&&c){var f=!0;"none"===d.widgetType&&(f=!1);c=d.value;c=c.toLowerCase();0===c.indexOf("'")&&(c=c.substring(1));c.lastIndexOf("'")===
c.length-1&&(c=c.substring(0,c.lastIndexOf("'")));if(!(""===c||"required"===d.kind||!f))for(d=0;d<a.length;d++)if(a[d].classList.contains("mwFunctionAssistant__signatureContainer__argumentContainer__argument--hasWidget")&&(f=e.indexOf(a[d]),this._isArgumentMatching(this._currentSignatureIndex,f,c))){b=d;break}}a=a[b];a.classList.add("mwFunctionAssistant__signatureContainer__argumentContainer__argument--current");this.moveWidgetIntoView()}},moveWidgetIntoView:function(){var a=this._argumentContainer.querySelector(".mwFunctionAssistant__signatureContainer__argumentContainer__argument--current");
if(a){var b=a.querySelector(".mwFunctionAssistant__signatureContainer__argumentContainer__argument__widgetContainer");if(b&&(0>b.getBoundingClientRect().left&&a.classList.add("mwFunctionAssistant__signatureContainer__argumentContainer__argument--moveIntoView"),g("ff")&&(a=b.getBoundingClientRect().width)))a=Math.round(a),a%2&&(b.style.width=a+1+"px")}},_cleanupOldDOM:function(){for(;this._argumentContainer.children.length;){var a=this._argumentContainer.lastChild;this._argumentContainer.removeChild(a);
(a=a.widget)&&a.destroy()}},_prepareClassModifiers:function(a){var b=[];"presenting"===a.status&&b.push("present");a.bounds||b.push("future");a.kind&&(b.push(a.kind),"required"!==a.kind&&"value"!==a.kind&&b.push("optional"));return b},_prepareCommaClassModifiers:function(a){var b=[];-1!==a.indexOf("optional")&&(b.push("optional"),-1!==a.indexOf("present")?b.push("present"):-1!==a.indexOf("future")&&b.push("present"));return b},_buildArgument:function(a,b,c){var d=this._prepareClassModifiers(a);if(0<
b){var e=this._prepareCommaClassModifiers(d);n.buildNode("span",{text:this._checkForCommandLineSyntax()?" ":",",parent:this._argumentContainer,className:"comma",useOwnClass:!0,classModifiers:e},"mwFunctionAssistant")}e=a.name;a.repeatedCount&&(e=a.name+a.repeatedCount);e="value"===a.kind?"value":e;d=n.buildNode("div",{parent:this._argumentContainer,className:"argument",classModifiers:d},"mwFunctionAssistant");n.buildNode("span",{parent:d,text:e,className:"argumentText",useOwnClass:!0});d.status=a.status;
d.name=a.originalName?a.originalName:a.name;d.bounds=a.bounds;d.kind=a.kind;a=this._checkBracketType();"("===a?a=")":"{"===a&&(a="}");b===c-1&&n.buildNode("span",{text:a,parent:this._argumentContainer},"mwFunctionAssistant");return d},_buildCorrespondingWidget:function(a,b){var c=null;if(void 0===a.widgetType||"scalar"===a.widgetType)a.widgetType=l.COMPLETION,a.widgetData={choices:[]};if("presenting"===a.status&&(a.widgetData||b)){var d=k[l.COMPLETION];if(d){var e=a.widgetData?a.widgetData.choices:
[];if(b&&b.widgetData&&b.widgetData.choices&&0<b.widgetData.choices.length){var f=b.widgetData.choices.filter(function(a){return!e.some(function(b){return b.completion===a.completion})});0<e.length&&0<f.length&&(f[0].separated=!0);e=e.concat(f)}0<e.length&&(c=new d({choices:e,autoSelect:!1,selectionScope:this._signatureContainer,attachedAt:"bottom",presenting:!0}),c.domNode.classList.add(a.kind))}}return c},_toggleSignatureCompletion:function(){this.set("showSignatures",!this.get("showSignatures"))},
_updateCurrentArgumentOnNavigation:function(a,b){if(a!==b){a.classList.remove("mwFunctionAssistant__signatureContainer__argumentContainer__argument--current");var c=a.widget,d="";c&&(d=c.get("value")?c.get("value"):c.get("valueOfFirstChoice"),c.set("value",""));b.classList.add("mwFunctionAssistant__signatureContainer__argumentContainer__argument--current");var e=b.widget,c="";e&&(c=e.get("valueOfFirstChoice"));e=Array.prototype.slice.call(this.domNode.querySelectorAll(".mwFunctionAssistant__signatureContainer__argumentContainer__argument")).indexOf(b);
this._updateCurrentArgument(this.data.signatures[this._currentSignatureIndex].inputArguments[e]);this.moveWidgetIntoView();this.emit("argument-change",{mwEventData:{oldValue:d,newValue:c}})}},_signatureCompletionNavigate:function(a){if(-1<[d.UP_ARROW,d.DOWN_ARROW,d.HOME,d.END,d.PAGE_UP,d.PAGE_DOWN].indexOf(a.keyCode))return this._signatureCompletion.navigate(a);if(a.keyCode===d.ENTER)return this._signatureCompletion.navigate(a),this.set("showSignatures",!1),!0;if(a.keyCode===d.ESCAPE)return this.set("showSignatures",
!1),!0},_navigateWithinArgumentCompletion:function(a){var b=this.domNode.querySelector(".mwFunctionAssistant__signatureContainer__argumentContainer__argument--current");if(b.widget)return b.widget.navigate(a)},_navigateBetweenPresentingArguments:function(a){var b=Array.prototype.slice.call(this._argumentContainer.querySelectorAll(".mwFunctionAssistant__signatureContainer__argumentContainer__argument")),c=Array.prototype.slice.call(this._argumentContainer.querySelectorAll(".mwFunctionAssistant__signatureContainer__argumentContainer__argument--present")),
e=this._argumentContainer.querySelector(".mwFunctionAssistant__signatureContainer__argumentContainer__argument--current"),f=b.indexOf(e);if(1===c.length)return!1;if((a.metaKey||a.ctrlKey)&&a.keyCode===d.LEFT_ARROW)var g=-1;else if((a.metaKey||a.ctrlKey)&&a.keyCode===d.RIGHT_ARROW)g=1;for(a=f;;){a+=g;if(0>a||a>=b.length)return!1;if(b[a].classList.contains("mwFunctionAssistant__signatureContainer__argumentContainer__argument--present"))break}(b=b[a])&&(b.classList.contains("mwFunctionAssistant__signatureContainer__argumentContainer__argument--present")&&
a!==f)&&this._updateCurrentArgumentOnNavigation(e,b);return!0},navigate:function(a){if((a.metaKey||a.ctrlKey)&&a.keyCode===d.DOWN_ARROW)return this._toggleSignatureCompletion(),!0;if(this.domNode.classList.contains("mwFunctionAssistant--showSignatures"))return this._signatureCompletionNavigate(a);if(this.showWidgets)return(a.metaKey||a.ctrlKey)&&(a.keyCode===d.LEFT_ARROW||a.keyCode===d.RIGHT_ARROW)?this._navigateBetweenPresentingArguments(a):this._navigateWithinArgumentCompletion(a)},startup:function(){this.inherited(arguments);
this.moveWidgetIntoView()},destroy:function(){for(;this._signatureContainer.firstChild;){var a=this._signatureContainer.firstChild;this._signatureContainer.removeChild(a);(a=a.widget)&&a.destroy()}document.body.removeEventListener("click",this._handleDocumentBodyClick,!0);this.domNode.removeEventListener("change",this._handleChange.bind(this));this.domNode.removeEventListener("select",this._handleSelect.bind(this));this.domNode.removeEventListener("click",this._handleClick.bind(this));this.domNode.removeEventListener("mouseover",
this._handleMouseOver.bind(this));this.domNode.removeEventListener("mouseout",this._handleMouseOut.bind(this));this.inherited(arguments)}});h.BASE_CLASS="mwFunctionAssistant";h.SIGNATURE_CONTAINER_CLASS="mwFunctionAssistant__signatureContainer";h.CURRENT_SIGNATURE_INDEX_CLASS="mwFunctionAssistant__signatureContainer__dropDownContainer__currentSignatureIndex";h.HELP_AVAILABLE_CLASS="mwFunctionAssistant--helpAvailable";h.SIGNATURE_COMPLETION_CLASS="mwFunctionAssistant__signatureCompletion";h.COMPLETION_CLASS=
"mwCompletion";h.CHOICE_CLASS="mwCompletion__choiceContainer__choice";h.SELECTED_CHOICE_CLASS="mwCompletion__choiceContainer__choice--selected";h.SHOW_SIGNATURE_CLASS="mwFunctionAssistant--showSignatures";h.ARGUMENT_CONTAINER_CLASS="mwFunctionAssistant__signatureContainer__argumentContainer";h.ARGUMENT_CLASS="mwFunctionAssistant__signatureContainer__argumentContainer__argument";h.PRESENT_ARGUMENT_CLASS="mwFunctionAssistant__signatureContainer__argumentContainer__argument--present";h.CURRENT_ARGUMENT_CLASS=
"mwFunctionAssistant__signatureContainer__argumentContainer__argument--current";h.WIDGET_CONTAINER_CLASS="mwFunctionAssistant__signatureContainer__argumentContainer__argument__widgetContainer";h.HAS_WIDGET_CLASS="mwFunctionAssistant__signatureContainer__argumentContainer__argument--hasWidget";h.WIDGETS_HIDDEN_CLASS="mwFunctionAssistant--widgetsHidden";h.MOVE_INTO_VIEW_CLASS="mwFunctionAssistant__signatureContainer__argumentContainer__argument--moveIntoView";h.SIGNATURE_COMPLETION_ARGUMENT_CLASS="mwFunctionAssistant__signatureCompletion__mwCompletion__choice__argument";
h.NO_SIGNATURE_COMPLETIONS_CLASS="mwFunctionAssistant--noSignatureCompletions";h.ARGUMENT_HEADER_CLASS="mwFunctionAssistant__signatureContainer__argumentContainer__argument__widgetContainer__header";h.HELP_BUTTON_CLASS="mwFunctionAssistant__signatureContainer__helpContainer";h.DROPDOWN_BUTTON_CLASS="mwFunctionAssistant__signatureContainer__dropDownContainer";h.REQUIRED_ARGUMENT_CLASS="mwFunctionAssistant__signatureContainer__argumentContainer__argument--required";h.OPTIONAL_ARGUMENT_CLASS="mwFunctionAssistant__signatureContainer__argumentContainer__argument--optional";
return h})},"MW/rtc/plugins/language/matlab/codingui/CodingUIContextManagerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./CodingUIContextManager"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.cursorcontroller","rtc.internaldocument"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/plugins/language/matlab/codingui/CodingUIContextManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin ./CodingUIContext ./CodingUIContextEvents ./utilities/CodingUIContextManagerUtilities ./utilities/CodingUIContextUtilities".split(" "),
function(h,e,g,d,c,b,a,f){return h(d,{constructor:function(a,b){this._cursor=a.getCursors()[0];this.own(g.after(this._cursor,"onChange",e.hitch(this,"_handleCursorChanged")));this.own(g.before(b,"onDocumentReset",e.hitch(this,"reset")));this._context=null;this._contextDataStack=[]},createContextAndSetup:function(a){this._cleanupOldContext();a=new c(a);this._updateContextAndStack(a);this._setContext(a);var b=this._contextDataStack.length;this._shouldCacheWidget&&0<b&&(this._contextDataStack[b-1].widget=
a.widget,this._shouldCacheWidget=!1)},_cleanupOldContext:function(){this._context&&(this._context.position.destroy(),this._context.range.destroy(),this._context=null)},_setContext:function(a){this._context=a;this.onContextUpdated(b.CONTEXT_SWITCHED)},_updateContextAndStack:function(b){var c=a.getPresentingSignature(b);if(c){var d;for(d=this._contextDataStack.length-1;0<=d;d--){var e=this._contextDataStack[d];if(a.isNewContextSameAsOldContext(b,c,e)){b.widget=e.widget;break}}if(-1===d)this._addContextDataToStack(b,
c);else for(b=this._contextDataStack.length-1;b>d;b--)this._contextDataStack.pop()}},_addContextDataToStack:function(a,b){var c=a.widget;this._contextDataStack.push({functionName:b.functionName,leftBounds:a.leftMostBounds.left,widget:c});c||(this._shouldCacheWidget=!0)},isWidgetHeld:function(a){return this._contextDataStack.some(function(b){return a===b.widget})},getContext:function(){return this._context},reset:function(){this._clearStack();this._cleanupOldContext();this.onContextUpdated(b.CONTEXT_RESET)},
setContextToCompleted:function(){this._context.setCompleted()},isContextCompleted:function(){return this._context.isCompleted()},setContextTabMode:function(a){this._context&&this._context.setTabMode(a)},isContextInTabMode:function(){return this._context?this._context.isInTabMode():!1},onContextUpdated:function(a){},_handleCursorChanged:function(){if(this.getContext()){var a=f.checkLeavingContext(this._context,this._cursor.position);a&&(a===b.LEAVING_RANGE?this._clearLastElementInStack():a===b.SILENT_RESET&&
this._clearStack(),a&&(this._cleanupOldContext(),this.onContextUpdated(a)))}},_clearLastElementInStack:function(){var a=this._contextDataStack[this._contextDataStack.length-1];a&&(a.widget&&a.widget.domNode)&&(a.widget.destroy(),a.widget=null,this._contextDataStack.pop())},_clearStack:function(){this._contextDataStack.forEach(function(a){a.widget&&a.widget.domNode&&(a.widget.destroy(),a.widget=null)});this._contextDataStack=[]},destroy:function(){this._clearStack();this._cleanupOldContext()}})})},
"MW/rtc/plugins/language/matlab/codingui/CodingUIContext":function(){define(["mw-utils/Utils","dojo/_base/declare"],function(h,e){return e(null,{constructor:function(e){this.uid=h.generateUuid();this.position=e.position;this.range=e.range;this.activity=e.activity;this.widget=e.widget;this.metaData=e.metaData;this.completed=!1;this.isWidgetReUsed=e.isWidgetReUsed;this.tabMode=e.tabMode||!1;this.isStale=!1;this.code=this.metaData.getCode();this.leftMostBounds=this.metaData.getLeftMostBounds(this.position);
this.currentBounds=this.metaData.getCurrentBounds(this.position)},setCompleted:function(){this.completed=!0},isCompleted:function(){return this.completed},setTabMode:function(e){this.tabMode=e},isInTabMode:function(){return this.tabMode}})})},"MW/rtc/plugins/language/matlab/codingui/utilities/CodingUIContextManagerUtilities":function(){define([],function(){return{getPresentingSignature:function(h){h=h.metaData;return!h?null:h.getPresentingSignature()},isNewContextSameAsOldContext:function(h,e,g){return!g?
!1:e.functionName===g.functionName&&h.leftMostBounds.left===g.leftBounds}}})},"MW/rtc/plugins/language/matlab/codingui/utilities/CodingUIContextUtilities":function(){define(["MW/rtc/model/PositionUtilities","MW/rtc/nodes/OpaqueNode","../CodingUIContextEvents"],function(h,e,g){return{_METADATA_WIDGET_TYPE_PROPERTY:"widgetType",checkLeavingContext:function(d,c){return this._checkLeavingRange(d,c)||this._isInvalidPosition(c)},_isInvalidPosition:function(d){if(1===d.getLineColumn().column)return g.SILENT_RESET},
_checkLeavingRange:function(d,c){return!h.isPositionInRange(c,d.range)?g.LEAVING_RANGE:null},isInSameContext:function(d,c,b){return!c||c.leftMostBounds.left!==d.getLeftMostBounds(b).left||d.hasSignatures()!==c.metaData.hasSignatures()||d.hasOwnProperty(this._METADATA_WIDGET_TYPE_PROPERTY)?!1:!0},getLineColumnForOffsetBounds:function(d,c,b){if(!d)return null;var a=d.right;d=this.getLineColumnForOffsetPosition(d.left,c,b);c=this.getLineColumnForOffsetPosition(a,c,b);return{startLine:d.line,startColumn:d.column,
endLine:c.line,endColumn:c.column}},getLineColumnForOffsetPosition:function(d,c,b){var a=b.getLineColumn(),e=a.line,g=a.column;b=b.getNode().rootContainer();a=b.getTextForPositioning().length;c=c-g+1;var g=c+a,h=0;for(d<c?h=-1:d>g&&(h=1);!(d>=c&&d<=g);){e+=h;b=-1===h?b.previousSibling():b.nextSibling();if(!b)return null;a=b.getTextForPositioning().length;-1===h?(g=c-1,c=g-a):1===h&&(c=g+1,g=c+a)}return{column:a-(g-d)+1,line:e}},isContextInOpaqueNode:function(d,c){var b=d.currentBounds,a=c.createPositionAtLineColumn(b.startLine-
1,b.left-1),b=c.createPositionAtLineColumn(b.endLine-1,b.right-1),f=a.getNode(),g=!1,h=b.getNode();for(h instanceof e&&(g=!0);f!==h;)f instanceof e&&(g=!0),f=f.nextNode();a.destroy();b.destroy();return g}}})},"MW/rtc/plugins/language/matlab/codingui/CodingUIProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./CodingUI"],function(h,e,g){return h(e,{requires:function(){return{createInstance:"rtc.internaldocument rtc.code.codingui.view rtc.code.codingui.requesthandler rtc.code.codingui.contextmanager rtc.eventhandler rtc.document rtc.cursorcontroller".split(" ")}},
createInstance:function(d,c,b,a,e,h,l){return new g(d,c,b,a,e,h,l)}})})},"MW/rtc/plugins/language/matlab/codingui/CodingUI":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/model/CodeUtilities MW/rtc/model/DocumentConstants ./CodingUIActivities ./utilities/CodingUIUtilities".split(" "),function(h,e,g,d,c,b,a,f){return h(d,{constructor:function(a,b,c,d,f,h,r){this._internalDocument=a;this._cursor=r.getCursors()[0];this._eventHandler=f;this._document=
h;this._cursorController=r;this._uiView=b;this._requestHandler=c;this._contextManager=d;this.own(g.after(this._internalDocument,"onDocumentReset",e.hitch(this,"_initialize")));this._initialized=!1;this._prefAutomatic=!0},_initialize:function(){this._initialized||(this._setListeners(),this._initialized=!0)},setMode:function(a){this._prefAutomatic=a},_setListeners:function(){this.own(g.after(this._internalDocument,"onDocumentChanged",e.hitch(this,"_handleDocumentChanged"),!0));this.own(g.after(this._cursor,
"onChange",e.hitch(this,"_handleCursorChanged")));this.own(g.after(this._cursor,"movePosition",e.hitch(this,"_checkAndEmitSelectionEvent")));this.own(g.after(this._eventHandler,"onMouseUp",e.hitch(this,"_checkAndEmitSelectionEvent")));this.own(g.after(this._document,"deleteTextAtCurrentPosition",e.hitch(this,"_handleInsertDeleteText")));this.own(g.after(this._document,"insertTextAtCurrentPosition",e.hitch(this,"_handleInsertDeleteText")))},_isSilentViewUpdate:function(){var a=this._contextManager&&
this._contextManager.isContextInTabMode();return!this._prefAutomatic&&!this._uiView.isTopViewDisplayed()||a},_updateViewForDocChange:function(){var b=this._isSilentViewUpdate()?a.SILENT_UPDATE:a.INSERT_DELETE_TEXT;this._requestHandler.request(b)},_handleDocumentChanged:function(c){if(!this._isCursorReadOnly()&&!this._cursorController.hasMultipleCursors()&&c&&0<c.length)if(c=c[c.length-1],c.isUndoRedo)this._uiView.close();else switch(c.type){case b.INSERT_BREAK_EVENT:this._updateViewForDocChange();
break;case b.FORMAT_CHANGE_EVENT:this._contextManager.reset(),this._requestHandler.request(a.SILENT_UPDATE)}},_handleInsertDeleteText:function(){!this._isCursorReadOnly()&&!this._cursorController.hasMultiplePendingCursors()&&this._updateViewForDocChange()},_handleCursorChanged:function(){if(this._cursorController.hasMultipleCursors())this._uiView.close();else if(!this._isCursorReadOnly()){var b=this._cursor.position.getLineColumn(),c=this._requestHandler.getLastRequestPosition();f.isSamePositionAsLast(b,
c)||this._requestHandler.request(a.SILENT_UPDATE,null)}},_checkAndEmitSelectionEvent:function(){this._cursorController.hasMultipleCursors()?this._uiView.close():this._isCursorReadOnly()||this._cursor.hasSelection()&&this._requestHandler.request(this._prefAutomatic?a.CURSOR_SELECTION:a.SILENT_UPDATE)},_isCursorReadOnly:function(){return this._cursor.isCursorReadOnly()}})})},"MW/rtc/plugins/language/matlab/codingui/utilities/CodingUIUtilities":function(){define([],function(){return{isSamePositionAsLast:function(h,
e){return e.line===h.line&&e.column===h.column},isMatlabString:function(h){return"'"===h.slice(0,1)&&"'"===h.slice(-1)||'"'===h.slice(0,1)&&'"'===h.slice(-1)},isArgumentSelected:function(h,e,g){if(!(h.startLine===h.endLine&&e.start.line===e.end.line&&h.startLine===e.start.line))return!1;var d=e.start.column;e=e.end.column;if(d>e){var c=d,d=e;e=c}c=h.startColumn;h=h.endColumn;return c===d&&h===e||this.isMatlabString(g)&&c+1===d&&h-1===e?!0:!1}}})},"MW/rtc/plugins/language/matlab/codingui/CodingUIRequestHandlerProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./CodingUIRequestHandler"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.cursorcontroller","rtc.document","rtc.internaldocument","rtc.code.codingui.contextmanager","rtc.code.codingui.backendservice"]}},createInstance:function(d,c,b,a,e){return new g(d,c,b,a,e)}})})},"MW/rtc/plugins/language/matlab/codingui/CodingUIRequestHandler":function(){define("dojo/_base/declare dojo/_base/lang mw-utils/Utils MW/rtc/abstract/AbstractPlugin MW/rtc/model/CodeUtilities MW/rtc/model/Range ./CodingUIActivities ./CodingUIMetaData ./utilities/CodingUIContextUtilities ./utilities/CodingUIUtilities".split(" "),
function(h,e,g,d,c,b,a,f,k,l){return h(d,{_TIMER:150,_FEATURE_ID:"matlab.code.codingui",constructor:function(a,b,c,d,e){this._cursor=a.getCursors()[0];this._document=b;this._internalDocument=c;this._contextManager=d;this._serviceProvider=e;this._lastRequestPosition={};this._lastClientPacket={};this._requestMadeForCurrentPosition=this._isBusy=!1},request:function(a,b){this.stopPendingRequest();this._setLastRequestPosition(this._cursor.getLineColumn());this._isBusy=!0;this._requestTimeout=window.setTimeout(e.hitch(this,
"_requestCodingUI",a,b),this._TIMER)},stopPendingRequest:function(){this.hasPendingRequest()&&this._serviceProvider.cancelRequest();this._requestTimeout&&(window.clearTimeout(this._requestTimeout),this._requestTimeout=null);this._isBusy=!1},hasPendingRequest:function(){return this._isBusy||this._serviceProvider.isBusy()},_setLastRequestPosition:function(a){this._lastRequestPosition={id:g.generateUuid(),line:a.line,column:a.column}},getLastRequestPosition:function(){return this._lastRequestPosition},
_requestCodingUI:function(a,b){b=b||this._cursor.getLineColumn();this._setLastRequestPosition(b);if(this._isInvalidPosition(b))this._isBusy=!1;else{this._lastClientPacket={activity:a,requestId:this._lastRequestPosition.id,position:b,documentState:this._internalDocument.getState()};var c=e.hitch(this,"_handleResponse",this._lastClientPacket),d=this._contextManager.getContext();d&&(d.isStale=!0);this._serviceProvider.requestMetaData(this._FEATURE_ID,c,b)}},_handleResponse:function(a,b){this._isBusy=
!1;if(!(a.requestId!==this._lastRequestPosition.id||a.documentState!==this._internalDocument.getState())){var c=new f(b);if(c.hasSuggestion())if(!this._requestMadeForCurrentPosition&&!this._isSilentUpdate(a.activity)&&this._continuousRequest(a,c))this._requestMadeForCurrentPosition=!0;else{this._requestMadeForCurrentPosition=!1;var d=this._contextManager.getContext(),e,g=!1,h=this._document.createPositionAtLineColumn(a.position.line-1,a.position.column-1),l=k.isInSameContext(c,d,h);l&&(e=this._contextManager.getContext().widget,
g=d.tabMode);this._contextManager.createContextAndSetup({position:h,range:this._getSignatureBoundsAsRange(c,h),activity:a.activity,widget:e,metaData:c,isWidgetReUsed:l,tabMode:g})}else this._contextManager.reset()}},_getSignatureBoundsAsRange:function(a,c){var d=a.getMetaDataBounds();if(!d)return null;var e=a.getCursorPosition(),f=k.getLineColumnForOffsetPosition(d.left-1,e,c),d=k.getLineColumnForOffsetPosition(d.right-1,e,c);")"===this._document.getTextCharacters(d.line-1,d.column-2,1)&&(d.column-=
1);f=this._document.createPositionAtLineColumn(f.line-1,f.column-1);d=this._document.createPositionAtLineColumn(d.line-1,d.column-1,!0);return new b(f,d)},_continuousRequest:function(a,b){var c;c=this._getRequestForSelection(a,b);if(!c)return!1;this.request(c.activity,c.position);return!0},_getRequestForSelection:function(b,c){if(!this._cursor.hasSelection()||!this._presentingArgumentIsSelected(c))return null;var d=this._cursor.getSelectionLineColumn(),e=d.start.column,d=d.end.column;return{activity:a.ACTIVE_REQUEST,
position:{line:b.position.line,column:e>d?e:d}}},_presentingArgumentIsSelected:function(a){var b=a.getFunctionPresentingArgument();if(!b)return!1;a=k.getLineColumnForOffsetBounds(b.bounds,a.getCursorPosition(),this._cursor.position);var c=this._cursor.getSelectionLineColumn();return l.isArgumentSelected(a,c,b.value)},_isInvalidPosition:function(a){var b=this._internalDocument.getLineNode(a.line-1);return!c.isCodeContainer(b)||1===a.column},_isSilentUpdate:function(b){return b===a.SILENT_UPDATE},destroy:function(){this.stopPendingRequest()}})})},
"MW/rtc/plugins/language/matlab/codingui/CodingUIMetaData":function(){define(["dojo/_base/declare","./programmingaids/WidgetTypes","./utilities/CodingUIContextUtilities"],function(h,e,g){return h(null,{_METADATA_PRESENTING_STATUS:"presenting",_METADATA_KIND_REQUIRED:"required",_METADATA_WIDGET_TYPE_NONE:"none",_METADATA_CALLING_SYNTAX_OBJECT:"object",_METADATA_CALLING_SYNTAX_COMMAND:"command",_METADATA_CALLING_SYNTAX_CELL:"cell",_METADATA_SIGNATURES_PROPERTY:"signatures",_METADATA_MATCHTYPE_MESSAGE_ID:"messageId",
constructor:function(d){this._data=d},_getFirstSignatureWithInputArgs:function(){var d=this._getSignatures();if(!d)return null;var c=null;d.some(function(b){if(b.inputArguments&&0<b.inputArguments.length)return c=b,!0});return c},_getSignatures:function(){var d=this._data.signatures;if(!d)return null;Array.isArray(d)||(d=[d]);return d},getPresentingArgument:function(){var d=this.getFunctionPresentingArgument();!d&&this._data.widgetType!==this._METADATA_WIDGET_TYPE_NONE&&(d=this._data);return d},getFunctionPresentingArgument:function(){var d=
null,c=this._getSignatures();c&&c.some(function(b){if(b.status===this._METADATA_PRESENTING_STATUS)return b.inputArguments.some(function(a){if(a.status===this._METADATA_PRESENTING_STATUS)return d=a,!0},this)},this);return d},getPresentingSignature:function(){var d=this._getSignatures(),c=null;d&&d.some(function(b){if(b.status===this._METADATA_PRESENTING_STATUS)return c=b,!0},this);return c},getMetaDataBounds:function(){var d=this._getFirstSignatureWithInputArgs(),c,b=0;d?(c=d.bounds,b=d.functionName.length+
1):c=this._data.bounds;return c?{left:c.left+b+1,right:c.right+1}:null},getLeftMostBounds:function(d){var c=this._getFirstSignatureWithInputArgs();if(!c)return this.getCurrentBounds(d);d=c.callingSyntax===this._METADATA_CALLING_SYNTAX_OBJECT||c.callingSyntax===this._METADATA_CALLING_SYNTAX_CELL?this._getArgument(c,1):this._getArgument(c,0);var b=c.bounds.left+1;return d&&d.wsbounds?{left:b,right:b+c.functionName.length}:null},getFunctionName:function(){var d=this.getPresentingSignature();return!d?
null:d.functionName},getCurrentBounds:function(d){var c,b,a=this.getPresentingArgument();if(a&&(c=(c=this._data.shared)?c.bounds:a.widgetData&&a.widgetData.bounds?a.widgetData.bounds:a.bounds,c=g.getLineColumnForOffsetBounds(c,this.getCursorPosition(),d),(d=a.widgetData)&&d.choices&&0<d.choices.length)){a=d.choices[0];d=a.completion;var a=a.displayString,e=d.length;a&&(e-=a.length);0<=e&&0<=d.indexOf(a,e)&&(b=e)}return c?{left:c.startColumn,right:c.endColumn,startLine:c.startLine,endLine:c.endLine,
offset:b||0}:null},getNextBounds:function(d){var c=this._getNextNonPresentingArgument();if(c)var c=c.widgetData&&c.widgetData.bounds?c.widgetData.bounds:c.bounds,b=g.getLineColumnForOffsetBounds(c,this.getCursorPosition(),d);return b?{left:b.startColumn,right:b.endColumn,startLine:b.startLine,endLine:b.endLine}:null},_getNextNonPresentingArgument:function(){for(var d=this.getPresentingArgument(),c=this._getInputArguments(),b,d=c.indexOf(d)+1;d<c.length;d+=1){var a=c[d];if(a.status!==this._METADATA_PRESENTING_STATUS){b=
a;break}}return b},_getInputArguments:function(){return this.getPresentingSignature().inputArguments},getCode:function(){var d="",c=this._data.signatures;if(c&&0<c.length){arguments=c[0].inputArguments;if(!arguments)return d;arguments.some(function(b){if(b.status&&b.status===this._METADATA_PRESENTING_STATUS)return d=b.value,!0},this)}else this._data.widgetType!==this._METADATA_WIDGET_TYPE_NONE&&(d=this._data.value);return d},hasSuggestion:function(){if(!this._data)return!1;var d=this._data.widgetType,
c=this._data.signatures,c=c&&0<c.length;return d&&d!==this._METADATA_WIDGET_TYPE_NONE||c},hasSignatures:function(){return this._data.hasOwnProperty(this._METADATA_SIGNATURES_PROPERTY)},_getArgument:function(d,c){arguments=d.inputArguments;return!arguments||c>=arguments.length?null:arguments[c]},isCallingSyntaxObjectOrCell:function(){var d=this.getPresentingSignature();return null===d?!1:d.callingSyntax===this._METADATA_CALLING_SYNTAX_OBJECT||d.callingSyntax===this._METADATA_CALLING_SYNTAX_CELL?!0:
!1},getData:function(){return this._data},isFileOrFolderName:function(){var d=this.getPresentingArgument().widgetType;return d===e.FILE_NAME||d==e.FOLDER_NAME},isMessageId:function(){var d=this.getPresentingArgument().widgetData;if(d&&(d=d.choices)&&0<d.length)return d[0].matchType===this._METADATA_MATCHTYPE_MESSAGE_ID},getCursorPosition:function(){return this._data.cursorPosition}})})},"MW/rtc/plugins/language/matlab/codingui/CodingUIViewEventBusProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./CodingUIViewEventBus"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/language/matlab/codingui/CodingUIViewEventBus":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,e){return h(e,{constructor:function(){},onCompleteText:function(e,d){},onSelectBounds:function(e){},onRequestHelp:function(){}})})},"MW/rtc/plugins/language/matlab/codingui/preferences/CodingUIPreferenceProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./CodingUIPreference"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.preferences.service","rtc.code.codingui.plugin"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/plugins/language/matlab/codingui/preferences/CodingUIPreference":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin"],function(h,e,g,d){return h(d,{_LIVE_EDITOR_PROGRAMMING_AIDS_PREFERENCE_KEY:"LiveEditorProgrammingAids",
constructor:function(c,b){this._preferencesService=c;this._codingUI=b;this.own(g.after(this._preferencesService,"onPreferencesChanged",e.hitch(this,"_onPreferencesChanged")))},_onPreferencesChanged:function(){var c=this._preferencesService.getValue(this._LIVE_EDITOR_PROGRAMMING_AIDS_PREFERENCE_KEY,1);this._codingUI.setMode(1===c)}})})},"MW/rtc/plugins/language/matlab/codingui/view/CodingUIViewProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./CodingUIView"],
function(h,e,g){return h(e,{requires:function(){return{createInstance:"rtc.cursorcontroller rtc.view rtc.domnode rtc.internaldocument rtc.code.codingui.contextmanager rtc.shadowtextservice rtc.code.codingui.eventbus rtc.tooltipservice rtc.document matlab.tokens".split(" ")}},createInstance:function(d,c,b,a,e,h,l,n,p,m){return new g(d,c,b,a,e,h,l,n,p,m)}})})},"MW/rtc/plugins/language/matlab/codingui/view/CodingUIView":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/keys MW/rtc/abstract/AbstractPlugin MW/rtc/view/ViewEventUtilities ./CodingUIFunctionAssistantView ./CodingUIShadowTextView ./CodingUISuggestionView ./CodingUIViewProxy ../CodingUIContextEvents ../utilities/CodingUIContextUtilities ../utilities/CodingUIWidgetUtilities".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m){return h(c,{_LAYER_CSS:"mwCodingUILayer",constructor:function(b,c,d,h,n,m,p,x,A,B){this._cursor=b.getCursors()[0];this._rtcView=c;this._contextManager=n;this._document=A;this._topView=new l;this._shadowTextView=new f(this._cursor,A,n,m);this._functionAssistantView=new a(c,n,d,p,this._shadowTextView,x,this._cursor,h,B,A);this._suggestionView=new k(c,this._cursor,n,d,h,p,this._shadowTextView,x,A,B);this.own(g.after(this._contextManager,"onContextUpdated",e.hitch(this,
"_handleContextUpdated"),!0));this.own(g.after(c,"onViewUpdated",e.hitch(this,"_handleViewUpdated"),!0));this._scrolledIntoViewNow=!1},_handleContextUpdated:function(a){switch(a){case n.CONTEXT_RESET:case n.LEAVING_RANGE:case n.SILENT_RESET:this._updateViewOnInvalidContext();break;case n.CONTEXT_SWITCHED:this._updateViewOnContextChanged()}},_handleViewUpdated:function(a){if(b.hasHeightEvent(a)||b.hasWidthEvent(a)||b.hasScrollEvent(a)){var c=this._contextManager.getContext();if(c&&this._topView.isDisplayed()){var d=
c.position.isValid()&&this._rtcView.isLineInView(c.position.getLineColumn().line,!0);!d&&this._shouldCloseView(c,a)?this.close():(d&&(this._scrolledIntoViewNow=!1),this._topView.reposition())}}},_shouldCloseView:function(a,c){return this._scrolledIntoViewNow||b.isOnlyClientOrOffsetHeightChange(c)?!1:!0},_updateViewOnInvalidContext:function(){this._shadowTextView.close();this.closeTopView()},_updateViewOnContextChanged:function(){var a=this._contextManager.getContext();this._shadowTextView.close();
a.isWidgetReUsed||this.closeTopView();p.isContextInOpaqueNode(a,this._document)?this._contextManager.reset():this._updateTopView(a)},sendEventToTopView:function(a){var b=this._topView.sendEvent(a),c=this._contextManager.getContext();if(c){var c=c.position.getLineColumn(),d=c.line;b&&this._isTabAction(a)&&!this._rtcView.isLineInView(d,!0)?(this._rtcView.scrollLineColumnIntoView(d,c.column),this._scrolledIntoViewNow=!0):this._scrolledIntoViewNow=!1}return b},_isTabAction:function(a){return a.hasOwnProperty("keyCode")&&
a.keyCode===d.TAB},_updateTopView:function(a){var b=a.metaData,c=b.getData(),d;if(m.isSuggestionWidget(c)){if(c=m.createWidget(b))a.widget=c,d=this._suggestionView}else m.isFunctionAssistantWidget(c)&&((c=a.widget)||(c=m.createWidget(b)),c&&(a.widget=c,d=this._functionAssistantView));d?(this._topView.setView(d),d.update(),d.show()):this._updateViewOnInvalidContext()},isShadowTextViewDisplayed:function(){return this._shadowTextView.isDisplayed()},isTopViewDisplayed:function(){return this._topView.isDisplayed()},
closeTopView:function(){this._scrolledIntoViewNow=!1;return this._topView.close()},close:function(){this._shadowTextView.close();return this.closeTopView()},show:function(){return this._topView.show()},destroy:function(){this._shadowTextView.destroy();this._topView.destroy()}})})},"MW/rtc/plugins/language/matlab/codingui/view/CodingUIFunctionAssistantView":function(){define("dojo/_base/declare dojo/_base/lang ../CodingUIActivities ./CodingUIHighlightView ./CodingUIPopupWidgetView ../utilities/CodingUIContextUtilities ../utilities/CodingUIWidgetUtilities".split(" "),
function(h,e,g,d,c,b,a){return h(c,{_CONTAINER_NAME:"mwCodingUIFunctionAssistant",_CONTAINER_CSS:"mwCodingUIContainer mwCodingUIFunctionAssistant",_FLIPPED_OFFSET:5,_SIGNATURE_CHANGE_EVENT:"signatureChange",constructor:function(a,b,c,e,g,h,q,r,s,t){this._rtcView=a;this._contextManager=b;this._parentContainer=c;this._uiViewEventBus=e;this._shadowTextView=g;this._tooltipService=h;this._cursor=q;this._highlightView=new d(a,r,s,t);this._initialize();this._continueShowingWidget=!1},update:function(){var a=
this._contextManager.getContext(),b=a.activity===g.COMPLETE;if(b){var c=a.metaData.getNextBounds(a.position);if(c){this._uiViewEventBus.onSelectBounds(c);return}}this.isDisplayed()&&(this._continueShowingWidget=!0);this._isActivityForAutomatic(a.activity)||this.close();this._highlightView.close();b&&this._shadowTextView.close();this.inherited(arguments);this._widget&&(this._widget.set("showWidgets",!b),this._widget.set("showSignatures",!1))},show:function(b){var c=this._contextManager.getContext();
if(!c)return!1;var d=c.widget;if(b||this._isActivityForAutomatic(c.activity)||c.isWidgetReUsed&&this._continueShowingWidget){if(!this._show(b))return!1;this._continueShowingWidget=!1;d&&d.moveWidgetIntoView()}b=a.getSelectedCompletion(d);var e=a.getNumberOfChoices(d);c.activity!==g.COMPLETE&&this.isDisplayed()&&this._shadowTextView.show(b);1===e&&b===c.code&&d.set("showWidgets",!1);return!0},_isActivityForAutomatic:function(a){return a!==g.SILENT_UPDATE&&a!==g.CURSOR_SELECTION},_registerEventHandlers:function(a){this.inherited(arguments);
a.on("argument-over",e.hitch(this,"_handleWidgetArgumentOver"));a.on("argument-out",e.hitch(this,"_handleWidgetArgumentOut"));a.on("argument-change",e.hitch(this,"_handleWidgetArgumentChange"));a.on("help",e.hitch(this,"_handleWidgetHelp"))},_handleWidgetArgumentOver:function(a){if(a=a.mwEventData.bounds){var c=this._contextManager.getContext();c.isStale||(a=b.getLineColumnForOffsetBounds(a,c.metaData.getCursorPosition(),c.position),this._highlightView.show({start:{line:a.startLine,column:a.startColumn},
end:{line:a.endLine,column:a.endColumn}}))}},_handleWidgetArgumentOut:function(){this._highlightView.show()},_handleWidgetArgumentChange:function(a){this.showShadowTextIfAllowed(a.mwEventData.newValue.toString())},handleWidgetChange:function(b,c){if(c.mwEventData.type===this._SIGNATURE_CHANGE_EVENT){var d=a.getSelectedCompletion(b);this.showShadowTextIfAllowed(d)}else this.inherited(arguments)},_handleWidgetHelp:function(){this._uiViewEventBus.onRequestHelp()},destroy:function(){this.inherited(arguments);
this._highlightView.destroy()}})})},"MW/rtc/plugins/language/matlab/codingui/view/CodingUIHighlightView":function(){define(["dojo/_base/declare","dojo/dom-construct","MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenUtilities","./CodingUIAbstractView"],function(h,e,g,d){return h(d,{_HIGHLIGHT_LAYER_CLASS:"mwCodingUIHighlightLayer",_HIGHLIGHT_MARKER_CLASS:"mwCodingUIHighlightMarker",constructor:function(c,b,a,d){this._rtcView=c;this._internalDocument=b;this._tokenService=a;this._document=d;this._layer=
this._createLayer();c.addLayer(this._layer)},_createLayer:function(){return e.create("div",{"class":this._HIGHLIGHT_LAYER_CLASS})},_createHighlightMarkerDiv:function(c,b){var a=this._rtcView.getCoordinateForLineColumn(b.start.line,b.start.column),d=this._rtcView.getCoordinateForLineColumn(b.end.line,b.end.column);e.create("div",{"class":this._HIGHLIGHT_MARKER_CLASS,style:{top:a.y+"px",height:a.height+"px",left:a.x+"px",width:d.x-a.x+"px"}},c)},show:function(c){this._clear();if(c){var b=this._createLayer();
c.start.line===c.end.line?this._createHighlightMarkerDiv(b,c):this._createHighlightMarkerDivForEachLine(b,c);this._rtcView.switchLayer(b,this._layer);this._layer=b}},_createHighlightMarkerDivForEachLine:function(c,b){for(var a=b.end.line,d=b.start.line;d<=a;d++){var e=this._getStartAndEndColumnToHighlightForLine(b,d);this._createHighlightMarkerDiv(c,{start:{line:d,column:e.startColumn},end:{line:d,column:e.endColumn}})}},_getStartAndEndColumnToHighlightForLine:function(c,b){var a=c.start.line;if(b===
c.end.line)var a=this._getTrimmedStartColumn(b,1),d=c.end.column;else d=this._getLineLength(b),a=b===a?c.start.column:this._getTrimmedStartColumn(b,1),d=this._getTrimmedEndColumn(b,d+1);return{startColumn:a,endColumn:d}},_getTrimmedStartColumn:function(c,b){for(var a=b,d=this._getLineLength(c),e=b;e<d&&" "===this._document.getTextCharacters(c-1,e-1,1);e++)a++;return a},_getTrimmedEndColumn:function(c,b){for(var a=this._tokenService.getTokensOnLine(c-1),d=b,e=a.length-1;1<=e;e--){var h=a[e];if(g.isDotDotDotToken(h)){d=
h.getColumn()+1;a=a[e-1];g.isWhitespaceToken(a)&&(d=a.getColumn()+1);break}}return d},_getLineLength:function(c){return this._internalDocument.getLineNode(c-1).getTextForPositioning().length},close:function(){this._clear()},_clear:function(){e.empty(this._layer)},destroy:function(){this._clear()}})})},"MW/rtc/plugins/language/matlab/codingui/view/CodingUIAbstractView":function(){define(["dojo/_base/declare"],function(h){return h(null,{isDisplayed:function(){},show:function(e){},close:function(){},
update:function(){},sendEvent:function(e){},destroy:function(){}})})},"MW/rtc/plugins/language/matlab/codingui/view/CodingUIPopupWidgetView":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/keys ../utilities/CodingUIWidgetUtilities ./CodingUIAbstractView".split(" "),function(h,e,g,d,c,b){return h(b,{_CONTAINER_NAME:null,_CONTAINER_CSS:null,_BOTTOM_MAX_HEIGHT:200,_BOTTOM_OFFSET:5,_FLIPPED_OFFSET:0,_INVALID_MATCH_TYPES_FOR_REPOSITION:["filename","folder","literal"],_initialize:function(){var a=
this._createContainer();a.addEventListener("mousedown",function(a){a.preventDefault()});this._parentContainer&&g.place(a,this._parentContainer);this._container=a},isDisplayed:function(){return"none"!==this._container.style.display},update:function(){var a=this._contextManager.getContext(),b=a.widget;b!==this.getWidget()&&(this.destroy(),this.setWidget(b));b.set("data",a.metaData.getData())},getWidget:function(){return this._widget},setWidget:function(a){a!==this.getWidget()&&this._registerEventHandlers(a);
this._widget=a},_registerEventHandlers:function(a){a.on("size-change",e.hitch(this,"reposition"));a.on("change",e.hitch(this,"handleWidgetChange",a));a.on("select",e.hitch(this,"_handleWidgetSelect"))},handleWidgetChange:function(a,b){this._uiViewEventBus.onCompleteText(b.mwEventData.newValue.toString(),b)},_handleWidgetSelect:function(a){this.showShadowTextIfAllowed(a.mwEventData.newValue.toString())},showShadowTextIfAllowed:function(a){!this._cursor.hasSelection()&&this.isDisplayed()&&this._shadowTextView.show(a)},
show:function(a){return this._show(a)},_show:function(a){if(this._widget)return this._ensureTooltipRemoved(),a=a?this._tooltipService.PRIORITY.ON_DEMAND:this._tooltipService.PRIORITY.AUTO,this._tooltipServiceHandle=this._tooltipService.requestTooltip(e.hitch(this,"_showCallback"),e.hitch(this,"_closeCallback"),a),!!this._tooltipServiceHandle},_showCallback:function(){this._showContainer();this._showWidget();this.reposition()},_closeCallback:function(){this.close()},close:function(){this._contextManager.getContext()||
(this._widget=null);this._ensureTooltipRemoved();return this.isDisplayed()?(this._closeContainer(),!0):!1},_ensureTooltipRemoved:function(){this._tooltipServiceHandle&&(this._tooltipServiceHandle.remove(),this._tooltipServiceHandle=null)},sendEvent:function(a){return a.hasOwnProperty("keyCode")?this._handleKeyEvent(a):!1},_handleKeyEvent:function(a){return a.keyCode===d.TAB?this._handleTabKey(a):a.keyCode===d.F1&&(a.metaKey||a.ctrlKey)?this._handleCtrlF1Key():this.getWidget().navigate(a)},_handleTabKey:function(a){var b=
this._contextManager.getContext();return this.isDisplayed()?(a=this.getWidget().navigate(a),!a?(this.close(),!0):a):b.metaData.hasSuggestion()?this.show(!0):!1},_handleCtrlF1Key:function(){return this.isDisplayed()?this.close():this.show(!0)},reposition:function(){var a=this._contextManager.getContext();a&&(a=this._getCoordinateForPosition(a),this._reposition(a.x,a.y))},_reposition:function(a,b){this._container.style.left=a+"px";this._container.style.top=b+"px"},_showWidget:function(){this._widget.placeAt(this._container);
this._widget.startup()},_getCoordinateForPosition:function(a){var b=this._rtcView.getCoordinateForLineColumn(this._getLineNumberForPositioning(a),this._getColumnNumberForPositioning(a)),c=this._getPageX(b);a=this._getPageY(b);var b=a+b.height,c=c-this._widget.get("alignmentXOffset"),d=b+this._BOTTOM_OFFSET;d+this._BOTTOM_MAX_HEIGHT>window.innerHeight&&a>window.innerHeight-b?(this._widget.set("position","top"),d=a-(this._widget.domNode.clientHeight+this._FLIPPED_OFFSET)):this._widget.set("position",
"bottom");a=this._parentContainer.getBoundingClientRect().left;return{x:Math.max(a,c,0),y:d}},_getLineNumberForPositioning:function(a){return a.position.getLineColumn().line},_getColumnNumberForPositioning:function(a){var b=a.position.getNode().rootContainer().maxOffset()+1,c=a.leftMostBounds.left;this._shouldUpdateColumnForDotNotation(a)&&(a=a.metaData.getData().value.lastIndexOf("."),c=c+a+1);return Math.min(c,b)},_shouldUpdateColumnForDotNotation:function(a){a=c.getCompletionChoices(a.widget);
if(!a||0===a.length)return!1;for(var b=0;b<a.length;b++){var d=a[b];if(!d.displayString||0<=this._INVALID_MATCH_TYPES_FOR_REPOSITION.indexOf(d.matchType)||-1===d.completion.indexOf("."))return!1}return!0},_getPageX:function(a){return a.pageX},_getPageY:function(a){var b=this._rtcView.getDomtarget().getBoundingClientRect().top,c=this._rtcView.getDomTargetPosition().scrollTop;return a.y+b-c},_showContainer:function(){this._container.style.display=""},_closeContainer:function(){this._container.style.display=
"none"},_clearContainer:function(){g.empty(this._container)},_createContainer:function(){return g.create("div",{className:this._CONTAINER_CSS,style:"display: none","data-testid":this._CONTAINER_NAME})},destroy:function(){this._widget&&(this._widget.domNode&&!this._contextManager.isWidgetHeld(this._widget))&&(this._widget.destroy(),this._widget=null);this._closeContainer();this._clearContainer()}})})},"MW/rtc/plugins/language/matlab/codingui/view/CodingUIShadowTextView":function(){define("dojo/_base/declare dojo/_base/lang MW/rtc/model/DocumentUtilities ./CodingUIAbstractView ../CodingUIActivities ../utilities/CodingUIWidgetUtilities".split(" "),
function(h,e,g,d,c,b){return h(d,{_SHADOWTEXT_CSS:"mwCodingUIShadowText",_SINGLE_QUOTE:"'",_DOUBLE_QUOTE:'"',constructor:function(a,b,c,d){this._cursor=a;this._document=b;this._contextManager=c;this._shadowTextService=d;this._shadowTextBeforeCursorHandle=this._shadowTextAfterCursorHandle=null},isDisplayed:function(){return null!==this._shadowTextAfterCursorHandle},show:function(a){var c=this._contextManager.getContext();c&&(this._destroy(),this._cursor.position.isEqualTo(c.position)&&a&&0!==b.getNumberOfChoices(c.widget)&&
this._createShadowTextViews(c,a))},_createShadowTextViews:function(a,b){var c=a.code,d=a.position.getLineColumn().column-a.currentBounds.left,e=this._getShadowTextAfterCursor(c,d,b);if(e&&(this._shadowTextAfterCursorHandle=this._createView(e.text,e.position),c=this._getShadowTextBeforeCursor(c,d,b)))this._shadowTextBeforeCursorHandle=this._createView(c.text,c.position),this._cursor.onUpdate(!0)},_getShadowTextAfterCursor:function(a,b,c){a=this._getShadowTextInfo(a,b,c);a.leftTextMatch&&b++;if((a.leftMatch||
a.leftTextMatch)&&a.rightMatch){b=c.slice(b,c.length-a.right.length);if(!b)return null;c=this._cursor.getLineColumn();c=this._document.createPositionAtLineColumn(c.line-1,c.column-1,!0);return{text:b,position:c}}return null},_getShadowTextBeforeCursor:function(a,b,c){b=this._getShadowTextInfo(a,b,c);return b.leftTextMatch&&b.rightMatch?(b=this._cursor.getLineColumn(),a=this._document.createPositionAtLineColumn(b.line-1,b.column-1-a.length,!0),{text:c.charAt(0),position:a}):null},_getShadowTextInfo:function(a,
b,c){var d=a.substr(0,b);a=a.substr(b,a.length);b=this._isRightTextAllowed(a);var e=c.toLowerCase().indexOf(d.toLowerCase());c=c.charAt(0);return{left:d,right:a,rightMatch:b,leftMatch:0===e,leftTextMatch:1===e&&("'"===c||'"'===c)}},_createView:function(a,b){var c=b.getLineColumn(),c={text:a,cssClass:this._SHADOWTEXT_CSS,updateCallback:e.hitch(this,"_handleServiceUpdate",c,a),position:b};return this._shadowTextService.requestTextAtPosition(c)},_handleServiceUpdate:function(a,b,c){var d=c.position.getLineColumn(),
e=d.column-a.column,h=g.getTextRangeFromLeftToPosition(c.position),h=h?h.text:"",h=e?h.substr(-e):"",m=b.substr(0,e);d.column<a.column||h!==m||0!==e&&e===b.length?c.remove():c.update(b.substring(e));this._cursor.onUpdate(!0)},_isRightTextAllowed:function(a){return""===a||a===this._SINGLE_QUOTE||a===this._DOUBLE_QUOTE},close:function(){this._destroy()},destroy:function(){this._destroy()},_destroy:function(){this._shadowTextBeforeCursorHandle&&(this._shadowTextBeforeCursorHandle.remove(),this._shadowTextBeforeCursorHandle=
null);this._shadowTextAfterCursorHandle&&(this._shadowTextAfterCursorHandle.remove(),this._shadowTextAfterCursorHandle=null,this._cursor.onUpdate(!0))}})})},"MW/rtc/plugins/language/matlab/codingui/view/CodingUISuggestionView":function(){define(["dojo/_base/declare","../CodingUIActivities","../utilities/CodingUIWidgetUtilities","./CodingUIPopupWidgetView"],function(h,e,g,d,c){return h(d,{_CONTAINER_NAME:"mwCodingUISuggestion",_CONTAINER_CSS:"mwCodingUIContainer mwCodingUISuggestion",_FLIPPED_OFFSET:5,
constructor:function(b,a,c,d,e,g,h,m,q,r){this._rtcView=b;this._cursor=a;this._contextManager=c;this._parentContainer=d;this._internalDocument=e;this._uiViewEventBus=g;this._shadowTextView=h;this._tooltipService=m;this._document=q;this._tokenService=r;this._initialize()},update:function(){this.inherited(arguments);var b=this._contextManager.getContext(),a=g.getNumberOfChoices(b.widget);(0>=a||!this._isActivityAllowed(b.activity))&&this.close();(0===a||this._cursor.hasSelection())&&this._shadowTextView.close()},
show:function(b){if(this._cursor.hasSelection())return!1;var a=this._contextManager.getContext(),c=a.widget;if(!this._isCursorAtValidPositionForCompletions(a))return!1;if(!b&&!this._isActivityAllowed(a.activity)||!this._showView(a,b)||!this._show(b))return!0;b=g.getSelectedCompletion(c);this._shadowTextView.show(b);return!0},_isCursorAtValidPositionForCompletions:function(b){var a=b.metaData,c=this._cursor.getLineColumn(),d=c.line,c=c.column;b=a.getLeftMostBounds(b.position).right;d=this._document.getTextCharacters(d-
1,c-1,1);return c===b||c===b-1&&("'"===d||'"'===d)},_isActivityAllowed:function(b){return b!==e.COMPLETE&&b!==e.SILENT_UPDATE&&b!==e.CURSOR_SELECTION},_showView:function(b,a){var c=b.widget;if(0===g.getNumberOfChoices(c))return!1;c=g.getSelectedCompletion(c);return!a&&c===b.code?!1:!0}})})},"MW/rtc/plugins/language/matlab/codingui/view/CodingUIViewProxy":function(){define(["dojo/_base/declare","mw-log/Log","./CodingUIAbstractView"],function(h,e,g){return h(g,{constructor:function(){this._view=null},
setView:function(d){e.assert(d instanceof g,"The view instance to configure must be of CodingUIAbstractView");this._view=d},getView:function(){return this._view},sendEvent:function(d){return this._view&&this._view.sendEvent(d)},isDisplayed:function(){return this._view&&this._view.isDisplayed()},reposition:function(){return this._view&&this._view.reposition()},show:function(d){return this._view&&this._view.show(d)},close:function(){return this._view&&this._view.close()},destroy:function(){this._view&&
(this._view.destroy(),this._view=null)}})})},"MW/rtc/plugins/language/matlab/contextualselection/ContextualSelectionUtilityProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./ContextualSelectionUtility"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.cursor","rtc.internaldocument"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/plugins/language/matlab/contextualselection/ContextualSelectionUtility":function(){define(["dojo/_base/declare",
"dojo/string","dojo/i18n!l10n/nls/actions","MW/rtc/abstract/AbstractPlugin","MW/rtc/model/DocumentUtilities"],function(h,e,g,d,c){return h(d,{constructor:function(b,a){this._cursor=b;this._internalDocument=a},getText:function(){var b=null;return b=this._cursor.selectedText()?this._cursor.selectedText().trim():this._getTextAtPosition()},_getTextAtPosition:function(){var b=c.getWordAtPosition(this._internalDocument,this._cursor.position),a;b&&(a=b.text);return a},getUpdatedLabel:function(b,a,c){var d=
this.getText(),g="";return g=d?1<d.split("\n").length?b:30<d.length?e.substitute(c,[d.substring(0,30)]):e.substitute(a,[d]):b}})})},"MW/rtc/plugins/language/matlab/contextualselection/EvaluateSelectionProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities","MW/rtc/plugins/language/matlab/contextualselection/EvaluateSelection","MW/rtc/core/provider/PluginProvider"],function(h,e,g,d,c){return h(c,{requires:function(){return{createInstance:["rtc.document",
"rtc.cursor","rtc.eventhandler","rtc.actionservice","rtc.executionservice"]}},createInstance:function(b,a,c,e,g){return new d(b,a,c,e,g)},destroyInstance:function(b){b.dispose()}})})},"MW/rtc/plugins/language/matlab/contextualselection/EvaluateSelection":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/i18n!l10n/nls/actions","MW/rtc/RichTextComponentFeatureEnum"],function(h,e,g,d,c){return h(null,{constructor:function(b,a,f,h,l){this._document=b;this._cursor=a;this._actionService=
h;this._executionService=l;this._connections=[];this._connections.push(g.after(this._cursor,"onChange",e.hitch(this,this._updateActionState)));this._connections.push(g.after(f,"onMouseDown",e.hitch(this,this._updateActionState)));b=[{id:c.EVALUATE_SELECTION.EVALUATE_SELECTION_ACTION,key:"f9",shortcut:d.evaluateSelectionShortcut,platformKey:{mac:"shift_f7"},enabled:!1,contextMenuGroup:"Selections",text:d.evaluateSelectionLabel,callback:e.hitch(this,"_evaluateSelectionCallback")}];this._actionService.loadActions(b)},
_evaluateSelectionCallback:function(){if(this._actionService.getAction(c.EVALUATE_SELECTION.EVALUATE_SELECTION_ACTION).enabled)return this.evaluateSelection()},evaluateSelection:function(){var b=this._getSelection();this._executionService&&b&&(this._executionService.streamingEval?this._executionService.authoringEval(b,this._executionService.streamingEval):this._executionService.authoringEval(b))},_getSelection:function(){if(!this._cursor.hasSelection())return"";var b=this._cursor.getSelectionLineColumn();
return b.start.line===b.end.line?this._cursor.selectedText():this._document.getCodeTextForRange(this._cursor.getSelection())},_updateActionState:function(){var b=this._cursor.hasSelection();this._actionService.updateAction(c.EVALUATE_SELECTION.EVALUATE_SELECTION_ACTION,{enabled:b})},dispose:function(){this._connections.forEach(function(b){b.remove()})}})})},"MW/rtc/plugins/language/matlab/contextualselection/HelpOnSelectionProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"./HelpOnSelection"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.helpservice","rtc.cursor","rtc.actionservice","rtc.eventhandler","rtc.contextualselection.utility"]}},createInstance:function(d,c,b,a,e){return new g(d,c,b,a,e)}})})},"MW/rtc/plugins/language/matlab/contextualselection/HelpOnSelection":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/i18n!l10n/nls/actions","MW/rtc/abstract/AbstractPlugin"],function(h,e,g,d,c){return h(c,{constructor:function(b,
a,c,h,l){this._helpService=b;this._cursor=a;this._actionService=c;this._contextualSelectionUtility=l;this.own(g.after(h,"onMouseDown",e.hitch(this,"_updateLabel")));b=[{id:"help_on_selection",key:"f1",shortcut:"F1",contextMenuGroup:"Selections",text:d.helpOnSelectionLabel,enabled:!0,callback:e.hitch(this,"_helpOnSelection")}];c.loadActions(b)},_helpOnSelection:function(){if(this._actionService.getAction("help_on_selection").enabled){var b=this._getText();this._helpService.showInHelpBrowser(b)}},_getText:function(){var b=
this._contextualSelectionUtility.getText();b||(b="");return b},_updateLabel:function(){var b=this._contextualSelectionUtility.getUpdatedLabel(d.helpOnSelectionLabel,d.helpLabel,d.helpLabelTruncated);this._actionService.updateAction("help_on_selection",{text:b})}})})},"MW/rtc/plugins/language/matlab/contextualselection/HelpServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./HelpService"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.executionservice"]}},
createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/language/matlab/contextualselection/HelpService":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin","MW/rtc/model/CodeUtilities"],function(h,e,g){return h(e,{_HELP_COMMAND:"helpPopup ",constructor:function(d){this._executionService=d},showInHelpBrowser:function(d){d=g.getMATLABStringFromCodeText(d);this._executionService.executionEval(this._HELP_COMMAND+"("+d+")")}})})},"MW/rtc/plugins/language/matlab/contextualselection/OpenSelectionProvider":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities","MW/rtc/plugins/language/matlab/contextualselection/OpenSelection","MW/rtc/core/provider/PluginProvider"],function(h,e,g,d,c){return h(c,{requires:function(){return{createInstance:"rtc.internaldocument rtc.cursor rtc.eventhandler rtc.actionservice rtc.executionservice rtc.functionservice rtc.contextualselection.utility".split(" ")}},createInstance:function(b,a,c,e,g,h,p){return new d(b,a,c,e,g,h,p)}})})},"MW/rtc/plugins/language/matlab/contextualselection/OpenSelection":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on dojo/touch MW/rtc/abstract/AbstractPlugin MW/rtc/model/CodeUtilities MW/rtc/RichTextComponentFeatureEnum dojo/i18n!l10n/nls/actions".split(" "),
function(h,e,g,d,c,b,a,f,k){return h(b,{constructor:function(a,b,c,d,h,r,s){this._internalDocument=a;this._cursor=b;this._actionService=d;this._executionService=h;this._functionService=r;this._contextualSelectionUtility=s;this.own(g.after(c,"onMouseDown",e.hitch(this,this._updateLabel)));a=[{id:f.OPEN_SELECTION.OPEN_SELECTION_ACTION,key:"ctrl_d",shortcut:"Ctrl+D",platformKey:{mac:"meta_shift_d"},enabled:!0,contextMenuGroup:"Selections",text:k.openSelectionLabel,callback:e.hitch(this,"_openSelectionCallback")}];
this._actionService.loadActions(a)},_openSelectionCallback:function(){if(this._actionService.getAction(f.OPEN_SELECTION.OPEN_SELECTION_ACTION).enabled)return this.openSelection()},_updateLabel:function(){var a=this._contextualSelectionUtility.getUpdatedLabel(k.openSelectionLabel,k.openLabel,k.openLabelTruncated);this._actionService.updateAction(f.OPEN_SELECTION.OPEN_SELECTION_ACTION,{text:a})},_getLocalFunctionInfo:function(a){var b=this._functionService.getFunctionDeclarationByName(a);if(b)return b;
this._functionService.getAllFunctionDeclarations().some(function(c){return c.getName()===a?(b=c,!0):!1});return b},openSelection:function(){var b=this._contextualSelectionUtility.getText();if(b){var c=this._getLocalFunctionInfo(b);c?this._cursor.setLineColumn(c.getStartLine(),1,!0):(b=a.getMATLABStringFromCodeText(b),this._executionService.executionEval("try open("+b+"); catch edit("+b+"); end;"))}}})})},"MW/rtc/plugins/language/matlab/commentCode/CommentCodeProvider":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/language/matlab/commentCode/CommentCode","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities","MW/rtc/core/provider/PluginProvider"],function(h,e,g,d){return h(d,{isApplicable:function(c){return g.isMatlabCodeFileOrBuffer(c)},requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:["rtc.cursor","rtc.actionservice","rtc.document","rtc.internaldocument","rtc.nodeconversionrulesservice"]}},createInstance:function(c,b,a,d,g){return new e(c,b,a,d,g)}})})},
"MW/rtc/plugins/language/matlab/commentCode/CommentCode":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect mw-string-utils/StringUtils MW/rtc/abstract/AbstractPlugin MW/rtc/model/CodeUtilities MW/rtc/model/DocumentConstants MW/rtc/model/events/NumberOfLinesChangedEvent MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities MW/rtc/plugins/nodeconversionrules/NodeConversionRulesUtilities MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNode MW/rtc/RichTextComponentFeatureEnum dojo/i18n!l10n/nls/actions".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m){return h(c,{_DEFAULT_COMMENT_STRING:"%",_DEFAULT_COMMENT_ANNOTATION:"% ",constructor:function(a,b,c,d,f){this._cursor=a;this._document=c;this._internalDocument=d;this._actionService=b;this._nodeConversionRules=f;a=[{id:p.COMMENT.COMMENT_ACTION,key:"ctrl_r",platformKey:{mac:"meta_/"},contextMenuGroup:"Default",enabled:!0,shortcut:m.commentShortcut,description:m.commentDescription,icon:"smallInsertComment",callback:e.hitch(this,"_comment")},{id:p.COMMENT.UNCOMMENT_ACTION,
enabled:!0,contextMenuGroup:"Default",description:m.uncommentDescription,icon:"smallUncomment",callback:e.hitch(this,"_uncomment")}];this._actionService.loadActions(a);this._actionService.updateAction(p.COMMENT.COMMENT_ACTION,{enabled:!0});this._actionService.updateAction(p.COMMENT.UNCOMMENT_ACTION,{enabled:!0});this.own(g.after(this._cursor,"onChange",e.hitch(this,this._updateActionState)));this.own(g.after(this._document,"onChange",e.hitch(this,this._updateActionsOnDocumentChange),!0))},_commentValid:function(){return!this._document.isReadOnly()&&
!this._cursor.isCursorReadOnly()},_comment:function(){this._actionService.getAction(p.COMMENT.COMMENT_ACTION).enabled&&this._commentValid()&&this._augmentSelection(e.hitch(this,"_commentAugmenter"))},_uncomment:function(){this._actionService.getAction(p.COMMENT.UNCOMMENT_ACTION).enabled&&this._commentValid()&&this._augmentSelection(e.hitch(this,"_uncommentAugmenter"))},_augmentSelection:function(a){var b,c;if(c=this._cursor.getSelection()){b=c.getStartPosition().getLineColumn().line;var d=c.getEndPosition().getLineColumn();
c=1===d.column&&!c.fileEndSelected()?d.line-1:d.line}else b=c=this._cursor.getLineColumn().line;this._augmentLines(b,c,a)},_augmentLines:function(a,b,c){for(var d=this._document.startBlockEdit(),e=a;e<=b;e++)this._document.isLineCode(e)&&c(e);d.appendRedoEvents([f.create(a-1,b-1,0)]);d.appendUndoEvents([f.create(a-1,b-1,0)]);this._document.endBlockEdit(d)},_commentAugmenter:function(a){var b=this._cursor.getSelection();if(b)var c=b.getStartPosition().getLine(),d=b.getEndPosition().getLine();this._document.insertText(this._DEFAULT_COMMENT_ANNOTATION,
a,1);this._checkAndExtendSelection(b,c,d)},_checkAndExtendSelection:function(a,b,c){a&&(b=this._internalDocument.getLineNode(b-1),c=this._internalDocument.getLineNode(c-1),a.getStartPosition().setPosition(b.startNode(),0),a.getEndPosition().setPosition(c.endNode(),c.endNode().maxOffset()),this._cursor.setSelection(a))},_uncommentAugmenter:function(a){var b=this._document.getLineText(a),c="";if(0===d.leftTrim(b).indexOf(this._DEFAULT_COMMENT_ANNOTATION))c=this._DEFAULT_COMMENT_ANNOTATION;else if(0===
d.leftTrim(b).indexOf(this._DEFAULT_COMMENT_STRING))c=this._DEFAULT_COMMENT_STRING;else return;var b=b.indexOf(c)+1,c=b+c.length,e=this._cursor.getSelection();if(e)var f=e.getStartPosition().getLine(),g=e.getEndPosition().getLine();this._document.deleteText(a,b,a,c);this._checkAndExtendSelection(e,f,g)},_updateActionsOnDocumentChange:function(b){b&&e.isArray(b)&&b.some(function(b){if(b.type===a.READONLY_STATE_CHANGE_EVENT)return this._updateActionState(),!0},this)},_updateActionState:function(){var a=
this._isCodeInRange(),b=!this._cursor.isCursorReadOnly(),a=a&&b&&l.textContainersInCursorConvertibleTo(this._cursor,n,this._nodeConversionRules);this._actionService.updateAction(p.COMMENT.COMMENT_ACTION,{enabled:a});this._actionService.updateAction(p.COMMENT.UNCOMMENT_ACTION,{enabled:a})},_isCodeInRange:function(){var a=this._cursor.selectionInfo();return b.isCodeInRange(a.startNode,a.endNode)},getCommentAnnotation:function(){return this._DEFAULT_COMMENT_ANNOTATION}})})},"MW/rtc/plugins/nodeconversionrules/NodeConversionRulesUtilities":function(){define(["MW/rtc/model/NodeUtilities"],
function(h){return{textContainersInCursorConvertibleTo:function(e,g,d){var c=!0,b=e.getSelection();if(!b)return b=e.getNode().textContainer(),d.isNodeConvertibleTo(b,g);e=b.getStartPosition().getNode();b=b.getEndPosition().getNode();h.textContainerNodesInRangeIterator(e,b,function(a){a=a.textContainer();if(!d.isNodeConvertibleTo(a,g))return c=!1,!0});return c}}})},"MW/rtc/plugins/language/matlab/filetype/FileTypeProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider",
"./FileType","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities"],function(h,e,g,d,c){return h(g,{isApplicable:function(b){return c.isMatlabCodeFileOrBuffer(b)},requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:["rtc.document","rtc.editordataservice"]}},createInstance:function(b,a){return new d(b,a)}})})},"MW/rtc/plugins/language/matlab/filetype/FileType":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/abstract/AbstractDocumentSynchronizableMixin",
"MW/rtc/abstract/AbstractPlugin"],function(h,e,g,d){return h([d,g],{_FILE_TYPE_INFO:"matlab.code.filetype",FILE_TYPE:{ScriptFile:0,FunctionFile:1,ClassDefinitionFile:2,Unknown:3},constructor:function(c,b){this._document=c;this._editorDataService=b;this._fileType=-1;this._isFileTypeSupported=null;this._connections=[];this.initializeSynchronizable(c);this._connections.push(this._editorDataService.listenTo(this._FILE_TYPE_INFO,e.hitch(this,"_updateFileType")))},isFunction:function(){return this.getFileType()===
this.FILE_TYPE.FunctionFile},isClass:function(){return this.getFileType()===this.FILE_TYPE.ClassDefinitionFile},isScript:function(){return this.getFileType()===this.FILE_TYPE.ScriptFile||this.getFileType()===this.FILE_TYPE.Unknown},getFileType:function(){return this._fileType},onFileTypeChange:function(c,b){},onSupportedFileTypeChange:function(c,b){},_updateFileType:function(c){var b=this._fileType;this._fileType=this.FILE_TYPE[c.fileType];this._fileType!==b&&(this.onFileTypeChange(this._fileType,
b),this._isFileTypeSupported!==c.isFileTypeSupported&&(this._isFileTypeSupported=c.isFileTypeSupported,this.onSupportedFileTypeChange(this._isFileTypeSupported,this._fileType)));this._document.getState()===c.documentState&&this.markClean()},destroy:function(){this._connections.forEach(function(c){c.remove()})}})})},"MW/rtc/plugins/language/matlab/functionhints/FunctionHintsProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/language/matlab/functionhints/FunctionHints",
"MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities"],function(h,e,g,d,c){return h(g,{isApplicable:function(b){return c.isMatlabCodeFileOrBuffer(b)},requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:"rtc.document rtc.cursor rtc.focusservice rtc.editordataservice rtc.actionservice rtc.functionargumentnotifier rtc.view".split(" ")}},createInstance:function(b,a,c,e,g,h,p){return new d(b,a,c,e,g,h,p)},destroyInstance:function(b){b.dispose()}})})},"MW/rtc/plugins/language/matlab/functionhints/FunctionHints":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-style dojo/dom-construct mw-log/Log dijit/popup dijit/TooltipDialog dojo/mouse dojo/on dojo/touch MW/rtc/plugins/functionnotifier/FunctionStateConstants".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p){return h(null,{_FUNCTION_HINTS_FEATURE_ID:"code.functionhints",constructor:function(a,b,d,h,k,p,v){this._document=a;this._cursor=b;this._editorDataService=h;this._handles=[];this._view=v;this._tooltipInfo={tooltipDialog:new f({"class":"rtcTooltip",style:"width: 300px; word-wrap: break-word;"}),isTooltipOpen:!1};this._isCancelled=!1;this._actionService=k;this._functionNotifier=p;this._functionHintsHolder=c.create("div",{"class":"functionHintsHolder",style:{position:"absolute",
top:"0px",left:"0px",width:"0px",height:"0px"}});c.place(this._functionHintsHolder,this._view.getDomtarget());a=[{id:"rtc_function_hints",key:"ctrl_f1",platformKey:{mac:"ctrl_f1"},enabled:!0,callback:e.hitch(this,"_toggleTooltip")},{id:"rtc_function_hints_close",key:"escape",enabled:!0,callback:e.hitch(this,"_closeTooltip")}];this._actionService.loadActions(a);this._handles.push(g.after(this._functionNotifier,"onFunctionNavigationNotify",e.hitch(this,"_checkForFunctionHints"),!0));this._handles.push(g.after(this._document,
"onChange",e.hitch(this,"_openFunctionHints")));this._handles.push(l(v.getDomtarget(),n.press,e.hitch(this,"_closeTooltipOnRightClick")));this._handles.push(g.after(d,"onBlur",e.hitch(this,"_closeTooltip")))},_toggleTooltip:function(){this._tooltipInfo.isTooltipOpen?this._closeTooltip():this.showFunctionHints()},showFunctionHints:function(){var a=this._functionNotifier.getFunctionInfo();a?(this._updateHintsHolderPosition(),this._triggerFunctionHints(a.text)):this._functionHintsScheduled=!0},_updateHintsHolderPosition:function(){var a=
this._cursor.getLineColumn(),a=this._view.getCoordinateForLineColumn(a.line,a.column);this._setHolderPosition(a.y,a.x,a.height)},_setHolderPosition:function(a,b,c){d.set(this._functionHintsHolder,{top:a+"px",left:b+"px",height:c+"px"})},_resetHolderPosition:function(){this._setHolderPosition(0,0,0)},_openFunctionHints:function(){"("===this._cursor.charAtCursor(-1)&&this.showFunctionHints()},_checkForFunctionHints:function(a){var b="",c=this._tooltipInfo.isTooltipOpen;this._functionHintsScheduled&&
(this._functionHintsScheduled=!1,this.showFunctionHints());c&&a.type===p.FUNCTION_ARGS_NAVIGATE_ENTER&&(b=a.functionInfo,b.relation===p.INNER_NESTED_FUNCTION_CALL||b.relation===p.OUTER_NESTED_FUNCTION_CALL?(b=b.text,this._updateHintsHolderPosition(),this._triggerFunctionHints(b)):this._closeTooltip());c&&a.type===p.FUNCTION_ARGS_NAVIGATE_CHANGE&&(b=a.functionInfo.text,this._triggerFunctionHints(b));a.type===p.FUNCTION_ARGS_NAVIGATE_EXIT&&this._closeTooltip()},_triggerFunctionHints:function(a){this._isCancelled=
!1;this._editorDataService.request(this._FUNCTION_HINTS_FEATURE_ID,{content:a}).then(e.hitch(this,function(a){this._openFunctionHintsTooltip(a)}),function(a){b.assert(!1,"[Unsuccessful Request] The request for function hints was not sent successfully -\x3e"+a)})},_openFunctionHintsTooltip:function(a){if(this._isCancelled)return this._resetHolderPosition(),!1;if(!a||a.error)b.assert(!1,"[Unsuccessful Response] The data from the server is not received successfully -\x3e"+(a?a.error:""));a.functionHintsResults&&
this._showTooltip(a.functionHintsResults);return!0},_showTooltip:function(b){var c=this._tooltipInfo.tooltipDialog;c.set("content",b);a.open({popup:c,around:this._functionHintsHolder,orient:["below-centered","below","above-centered","above"],onCancel:e.hitch(this,"_closeTooltip")});this._tooltipInfo={tooltipDialog:c,isTooltipOpen:!0};this._tooltipInfo.tooltipDialog.set("data-testid","functionHints_visible")},_closeTooltipOnRightClick:function(a){a&&k.isRight(a)&&this._closeTooltip()},_closeTooltip:function(){this._isCancelled=
!0;return this._tooltipInfo&&this._tooltipInfo.isTooltipOpen?(this._tooltipInfo.tooltipDialog.set("data-testid","functionHints_hidden"),a.close(this._tooltipInfo.tooltipDialog),this._resetHolderPosition(),this._tooltipInfo.isTooltipOpen=!1,!0):!1},dispose:function(){this._closeTooltip();this._tooltipInfo.tooltipDialog.destroy();c.destroy(this._functionHintsHolder);this._tooltipInfo=null;this._handles.forEach(function(a){a.remove()})}})})},"MW/rtc/plugins/language/matlab/syntax/functions/FunctionServiceProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./FunctionService"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.editordataservice","rtc.internaldocument"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/plugins/language/matlab/syntax/functions/FunctionService":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/abstract/AbstractPlugin","./FunctionDeclaration","./FunctionDeclarationUtils"],function(h,e,g,d,c){return h(g,{_MATLAB_FUNCTIONS_FEATURE_ID:"matlab.code.functions",
_DEFAULT_FUNCTION_NAME:"untitled",constructor:function(b,a){this._internalDocument=a;this._functionsInfo=[];this._functionDeclarations=null;this._edsHandle=b.listenTo(this._MATLAB_FUNCTIONS_FEATURE_ID,e.hitch(this,"_handleEDSCallback"))},onUpdate:function(){},destroy:function(){this.inherited(arguments);this._edsHandle.remove()},_handleEDSCallback:function(b){this._functionsInfo=b.functionsInfo;this._expandFunctionBounds();this._functionDeclarations=null;this.onUpdate()},_expandFunctionBounds:function(){if(this._functionsInfo&&
!(0<!this._functionsInfo.length)){var b=this._functionsInfo[0];b.isTopLevelFunction&&!this._functionsInfo[1]&&(b.endLine=this._internalDocument.getMaxLineNumber())}},getFunctionsInfo:function(){return this._functionsInfo},getLocalFunctionsInfo:function(){return this._filterForLocalFunctions(this._functionsInfo)},getTopLevelFunctionInfo:function(){return this._filterForTopFunction(this._functionsInfo)},getAllFunctionDeclarations:function(){return this.getFunctionDeclarations().map(function(b){return c.flattenFunctionDeclaration(b)}).reduce(function(b,
a){return b.concat(a)},[])},getFunctionDeclarations:function(){this._functionDeclarations||this._buildFunctionDeclarations();return this._functionDeclarations},_buildFunctionDeclarations:function(){this._functionDeclarations=this._functionsInfo.map(function(b){return new d(b)})},isFunction:function(b){return!!this._getLocalFunctionInfoByName(b)},getFunctionDeclarationByName:function(b){return(b=this._getLocalFunctionInfoByName(b))?new d(b):null},_getLocalFunctionInfoByName:function(b){var a=null;
this._functionsInfo.some(function(c){return c.functionName===b?(a=c,!0):!1});return a},isLineInFunction:function(b){return!!this._getLocalFunctionInfoByLine(b)},_getLocalFunctionInfoByLine:function(b){var a=null;this._functionsInfo.some(function(c){return b>=c.startLine&&b<=c.endLine?(a=c,!0):!1});return a},isNewLocalFunctionName:function(b){return!this.isFunction(b)},getUniqueFunctionName:function(){var b=this._DEFAULT_FUNCTION_NAME,a=b.length,c=RegExp("^"+this._DEFAULT_FUNCTION_NAME+"\\d*$"),d=
this.getLocalFunctionsInfo().filter(function(a){return c.test(a.functionName)}).map(function(b){return b.functionName.slice(a)}).reduce(function(a,b){return Math.max(a,b)},-Infinity);return-Infinity<d?b+(d+1):b},_filterForLocalFunctions:function(b){return b.filter(function(a){return!a.isTopLevelFunction&&!a.isClassMethod})},_filterForTopFunction:function(b){return b.filter(function(a){return a.isTopLevelFunction})}})})},"MW/rtc/plugins/language/matlab/syntax/functions/FunctionDeclaration":function(){define(["dojo/_base/declare"],
function(h){return h(null,{constructor:function(e){this._data=e},getStartLine:function(){return this._data.startLine},getStartColumn:function(){return this._data.startLine},getEndLine:function(){return this._data.endLine},getEndColumn:function(){return this._data.endColumn},getName:function(){return this._data.functionName},getInputArgumentNames:function(){return this._data.functionInputArguments},getOutputArgumentNames:function(){return this._data.functionOutputArguments},getNestedFunctionDeclarations:function(){var e=
this.constructor;return this._data.nestedFunctions.map(function(g){return new e(g)})},isTopLevelFunction:function(){return this._data.isTopLevelFunction},isClassMethod:function(){return this._data.isClassMethod}})})},"MW/rtc/plugins/language/matlab/syntax/functions/FunctionDeclarationUtils":function(){define([],function(){return{flattenFunctionDeclaration:function(h){return h.getNestedFunctionDeclarations().reduce(function(e,g){return e.concat(this.flattenFunctionDeclaration(g))}.bind(this),[h])}}})},
"MW/rtc/plugins/functionnotifier/FunctionArgumentNotifierProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/functionnotifier/FunctionArgumentNotifier","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities"],function(h,e,g,d,c){return h(g,{isApplicable:function(b){return c.isMatlabCodeFileOrBuffer(b)},requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:["rtc.document","rtc.cursor"]}},createInstance:function(b,
a){return new d(b,a)}})})},"MW/rtc/plugins/functionnotifier/FunctionArgumentNotifier":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/model/CodeUtilities MW/rtc/plugins/functionnotifier/FunctionUtilities MW/rtc/plugins/functionnotifier/FunctionStateConstants".split(" "),function(h,e,g,d,c,b,a){return h(d,{constructor:function(a,b){this._document=a;this._cursor=b;this._lastEventObject=null;this.own(g.after(b,"onChange",e.hitch(this,"_checkFunctionArgsNavigation")))},
onFunctionNavigationNotify:function(a){},getFunctionInfo:function(){return this._lastEventObject.functionInfo},_checkFunctionArgsNavigation:function(){var b={},c=this._getFunctionInfoForCursorPosition();if(c){var b=!0,d=null;this._lastEventObject&&this._lastEventObject.functionInfo&&(d=this._lastEventObject.functionInfo,b=d.functionName!==c.functionName);b?(c.relation=this._checkForRelationship(c,d),b={type:a.FUNCTION_ARGS_NAVIGATE_ENTER,functionInfo:c}):b=this._lastEventObject.functionInfo.currentArgumentNumber!==
c.currentArgumentNumber?{type:a.FUNCTION_ARGS_NAVIGATE_CHANGE,functionInfo:c}:{type:a.FUNCTION_ARGS_NAVIGATE,functionInfo:c}}else b.type=a.FUNCTION_ARGS_NAVIGATE_EXIT;this._notifyFunctionInfoChanged(b)},_notifyFunctionInfoChanged:function(a){this._lastEventObject=a;this.onFunctionNavigationNotify(a)},_getFunctionInfoForCursorPosition:function(){var a=this._getCodeLineInfoUnderCursor();return!a?null:b.getFunctionArgsInfoForOffset(a.lineText,a.column-1,a.line-1)},_getCodeLineInfoUnderCursor:function(){var a=
this._cursor.selectionInfo();if(!c.isCodeInRange(a.startNode,a.endNode))return null;a=this._cursor.getLineColumn();return{lineText:this._document.getLineText(a.line),line:a.line,column:a.column}},_checkForRelationship:function(b,c){return!c||b.line!==c.line||-1===b.line?null:b.functionCallDepth>c.functionCallDepth?a.INNER_NESTED_FUNCTION_CALL:a.OUTER_NESTED_FUNCTION_CALL}})})},"MW/rtc/plugins/functionnotifier/FunctionUtilities":function(){define(["mw-utils/Utils"],function(h){return{functionComparator:function(e,
g){return e===g?!0:e.functionName===g.functionName&&e.startLine===g.startLine&&e.startColumn===g.startColumn&&e.endLine===g.endLine&&e.endColumn===g.endColumn&&e.isTopLevelFunction===g.isTopLevelFunction&&e.isClassMethod===g.isClassMethod&&h.arrayEquals(e.functionInputArguments,g.functionInputArguments)&&h.arrayEquals(e.functionOutputArguments,g.functionOutputArguments)&&h.arrayEquals(e.nestedFunctions,g.nestedFunctions,this.functionComparator)},getFunctionArgsInfoForOffset:function(e,g,d){var c=
{};if(!e)return null;var b=e.substring(0,g),a=e.substring(g,e.length),f=this._getLastUnClosedOpenParen(b);if(-1==f)return null;b=b.substring(0,f).split(" ").pop();if(!b.trim())return null;c.functionName=b;a=a.indexOf(")");c.isArgsEnclosed=-1!==a;c.isArgsEnclosed?(a=e.substring(f,g+a),c.totalArgsEnclosed=a.split(",").length):c.totalArgsEnclosed=0;f=e.substring(f,g);c.currentArgumentNumber=f.split(",").length;c.text=e.substring(0,g);c.line=d;c.functionCallDepth=this._getUnclosedParenCountTillOffset(c.text);
return c},_getLastUnClosedOpenParen:function(e){var g=e.length,d=e.lastIndexOf("(");if(-1==d)return d;var c=e.substring(0,d),b=e.substring(d,g).indexOf(")");-1<b&&(b=d+b,e=c+"@"+e.substring(d+1,b)+"#"+e.substring(b+1,g),d=this._getLastUnClosedOpenParen(e));return d},_getUnclosedParenCountTillOffset:function(e){var g=e.split("(").length-1;e=e.split(")").length-1;return g-e}}})},"MW/rtc/plugins/functionnotifier/LocalFunctionNotifierProvider":function(){define(["dojo/_base/declare","dojo/_base/lang",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/functionnotifier/LocalFunctionNotifier","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities"],function(h,e,g,d,c){return h(g,{isApplicable:function(b){return c.isMatlabCodeFileOrBuffer(b)},requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:["rtc.functionservice","rtc.code.codeanalyzermodel"]}},createInstance:function(b,a){return new d(b,a)}})})},"MW/rtc/plugins/functionnotifier/LocalFunctionNotifier":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/aspect","MW/rtc/plugins/functionnotifier/AbstractFunctionNotifier"],function(h,e,g,d){return h(d,{constructor:function(c,b){this._functionService=c;this._codeAnalyzerModel=b},getFunctionInfoOfDesiredFunctions:function(){return this._functionService.getLocalFunctionsInfo()}})})},"MW/rtc/plugins/functionnotifier/AbstractFunctionNotifier":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/model/CodeUtilities MW/rtc/plugins/functionnotifier/FunctionUtilities MW/rtc/plugins/functionnotifier/FunctionStateConstants mw-utils/Utils".split(" "),
function(h,e,g,d,c,b,a,f){return h(d,{constructor:function(a,b){this._functionService=a;this._codeAnalyzerModel=b;this.own(g.after(this._codeAnalyzerModel,"onDocumentChangeWithNoSyntaxErrors",e.hitch(this,"_validFunctionsHandler")));this._updatedValidFunctionInfo=[]},onValidFunctionsChange:function(a){},getFunctionInfoOfDesiredFunctions:function(){throw"Unimplemented API in AbstractFunctionNotifier";},_validFunctionsHandler:function(){var b=this.getFunctionInfoOfDesiredFunctions(),c={};0<b.length?
(1>this._updatedValidFunctionInfo.length?c.type=a.VALID_FUNCTIONS_ADDED:this._hasFunctionsChanged(b)?c.type=a.VALID_FUNCTIONS_CHANGED:c.type=a.FUNCTIONS_ON_VALID_DOCUMENT_CHANGE,this._updatedValidFunctionInfo=b,c.validFunctions=this._updatedValidFunctionInfo,this.onValidFunctionsChange(c)):0<this._updatedValidFunctionInfo.length&&(this._updatedValidFunctionInfo=[],c={type:a.VALID_FUNCTIONS_REMOVED},this.onValidFunctionsChange(c))},_hasFunctionsChanged:function(a){return!f.arrayEquals(a,this._updatedValidFunctionInfo,
e.hitch(b,"functionComparator"))}})})},"MW/rtc/plugins/functionnotifier/AllFunctionNotifierProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/functionnotifier/AllFunctionNotifier","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities"],function(h,e,g,d,c){return h(g,{isApplicable:function(b){return c.isMatlabCodeFileOrBuffer(b)},requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:["rtc.functionservice",
"rtc.code.codeanalyzermodel"]}},createInstance:function(b,a){return new d(b,a)}})})},"MW/rtc/plugins/functionnotifier/AllFunctionNotifier":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/functionnotifier/AbstractFunctionNotifier"],function(h,e,g,d){return h(d,{constructor:function(c,b){this._functionService=c;this._codeAnalyzerModel=b},getFunctionInfoOfDesiredFunctions:function(){return this._functionService.getFunctionsInfo()}})})},"MW/rtc/plugins/functionnotifier/TopLevelFunctionNotifierProvider":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/functionnotifier/TopLevelFunctionNotifier","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities"],function(h,e,g,d,c){return h(g,{isApplicable:function(b){return c.isMatlabCodeFileOrBuffer(b)},requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:["rtc.functionservice","rtc.code.codeanalyzermodel"]}},createInstance:function(b,a){return new d(b,a)}})})},"MW/rtc/plugins/functionnotifier/TopLevelFunctionNotifier":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/aspect","MW/rtc/plugins/functionnotifier/AbstractFunctionNotifier"],function(h,e,g,d){return h(d,{constructor:function(c,b){this._functionService=c;this._codeAnalyzerModel=b},getFunctionInfoOfDesiredFunctions:function(){return this._functionService.getTopLevelFunctionInfo()}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppBackendServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LiveAppBackendService"],function(h,
e,g){return h(e,{requires:function(){return{createInstance:["rtc.id","rtc.editordataservice"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppBackendService":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,e){return h(e,{constructor:function(e,d){this._rtcId=e;this._editorDataService=d;this._removePromise=this._requestPromise=this._initializePromise=null},initializeApp:function(e,d,c){this._cancelRequest(this._initializePromise);
this._initializePromise=this._sendRequest({editorId:this._rtcId,operation:"initialize",appId:this._getAppId(e),appPath:d});this._initializePromise.then(function(b){(b=b.result)&&c(b)},function(){})},requestData:function(e,d){this._cancelRequest(this._requestPromise);this._requestPromise=this._sendRequest({editorId:this._rtcId,operation:"getData",appId:this._getAppId(e),oldCode:e.getContext("code")});this._requestPromise.then(function(c){(c=c.result)&&d(c.code,c.outputs.join(","),c.summary,c.difference)},
function(){})},removeApp:function(e){this._cancelRequest(this._removePromise);this._removePromise=this._sendRequest({editorId:this._rtcId,operation:"remove",appId:this._getAppId(e)});this._removePromise.then(function(){},function(){})},_sendRequest:function(e){return this._editorDataService.request("matlab.code.codingui.liveapps",e,15E3)},_cancelRequest:function(e){e&&!e.isResolved()&&e.cancel()},_getAppId:function(e){return e.uid},destroy:function(){this.inherited(arguments);this._initializePromise&&
(this._initializePromise.reject(),this._initializePromise=null);this._requestPromise&&(this._requestPromise.reject(),this._requestPromise=null);this._removePromise&&(this._removePromise.reject(),this._removePromise=null)}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppCodeManagerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LiveAppCodeManager"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.document","rtc.internaldocument",
"rtc.cursorcontroller","rtc.liveapps.documenthandler","rtc.view.layoutmanager.paragraphhostingmodel"]}},createInstance:function(d,c,b,a,e){return new g(d,c,b,a,e)}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppCodeManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect mw-log/Log MW/rtc/abstract/AbstractPlugin MW/rtc/model/DocumentEventUtilities MW/rtc/model/Range MW/rtc/model/events/DocumentEvent ./LiveAppUtilities".split(" "),function(h,e,g,d,c,b,a,f,k){return h(c,
{constructor:function(a,b,c,d,f){this._document=a;this._internalDocument=b;this._liveAppDocumentHandler=d;this._layoutParagraphHostingModel=f;this._cursor=c.getCursors()[0];this.own(g.after(this._liveAppDocumentHandler,"onUpdate",e.hitch(this,"_handleLiveAppsUpdate"),!0))},_handleLiveAppsUpdate:function(a){var b=this._internalDocument.startBlockEdit();a.forEach(this._configureForGeneratedCode,this);this._internalDocument.endBlockEdit(b)},_configureForGeneratedCode:function(a){var b=this._createRangeOfGeneratedCode(a);
if(b){var c=this._layoutParagraphHostingModel.get(a);c&&c.destroy();this._layoutParagraphHostingModel.set(a,b);k.setCodeRange(a,b);b=this._document.createLinePosition(a,!1);c=this._handleLiveAppLinePositionChange.bind(this,a);k.setLiveAppLineTracker(a,b,c);k.setReadOnly(a,!0,this._document)}else this._removeAllGeneratedCodeInfo(a)},_handleLiveAppLinePositionChange:function(a){a.parent!==this._internalDocument.root&&(k.setReadOnly(a,!1,this._document),this._removeAllGeneratedCodeInfo(a))},_removeAllGeneratedCodeInfo:function(a){this._layoutParagraphHostingModel.delete(a);
k.removeLiveAppLineTracker(a);k.removeCodeRange(a)},_createRangeOfGeneratedCode:function(b){var c=b.getContext("numOfLines")||0;if(1>c)return null;var d=this._internalDocument.getLineNumber(b);b=this._document.createLinePositionInLine(d+1,!1);c=this._document.createLinePositionInLine(d+c,!1);return new a(b,c)},updateGeneratedCode:function(a,b,c,e){d.assert(k.isLiveAppLineNode(a),"The given node must be a LiveAppLineNode!");var f=this._document.startBlockEdit();this._cursor.suspendChangeEvent();b?
this._canPerformEdit(a,c)?this._editGeneratedCode(a,b,e):this._setGeneratedCode(a,b):this._removeGeneratedCode(a);var g;void 0===c?g=this._createContext(b):null!==c&&(g=this._createContext(c));g&&this._liveAppDocumentHandler.updateContextWithUndoRedo(a,g);this._cursor.activateChangeEvent(!0);this._document.endBlockEdit(f)},_setGeneratedCode:function(a,b){this._liveAppDocumentHandler.replaceGeneratedCodeWithUndoRedo(a,b);k.setDirtyState(a,!0)},_editGeneratedCode:function(a,b,c){var d=b.split("\n"),
e={};c?c.forEach(function(a){a=void 0!==a.leftPosition?a.leftPosition:a.rightPosition;e[a]=d[a]}):d.forEach(function(a,b){e[b]=a});this._liveAppDocumentHandler.editGeneratedCodeWithUndoRedo(a,e);k.setDirtyState(a,!0)},_removeGeneratedCode:function(a){this._liveAppDocumentHandler.replaceGeneratedCodeWithUndoRedo(a,"");this._liveAppDocumentHandler.mergeLiveAppLineWithEmptyLineWithUndoRedo(a.nextSibling());this._removeAllGeneratedCodeInfo(a)},_createContext:function(a){a=a||"";return{code:a,numOfLines:a?
a.split("\n").length:0}},_canPerformEdit:function(a,b){var c=a.getContext("code");if(!c)return!1;var c=c.split("\n"),d=[];null===b?d=c:b&&(d=b.split("\n"));return c.length===d.length}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppUtilities":function(){define("dojo/aspect dojo/has MW/rtc/model/DocumentUtilities MW/rtc/model/NodeUtilities MW/rtc/model/Position MW/rtc/model/PositionUtilities MW/rtc/model/RangeUtilities MW/rtc/model/Selection MW/rtc/plugins/language/matlab/codingui/liveapps/nodes/LiveAppInlineNode MW/rtc/plugins/language/matlab/codingui/liveapps/nodes/LiveAppLineNode MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenConstants MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenUtilities MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenizer MW/rtc/view/ViewUtilities mw-form/TextField".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r){var s=/`[^`]+`|\|[^|]+\|/g,t=/_[^_]+_|\*[^*]+\*/g,u=/^[a-zA-Z]\w*$/;return{FROM_LEFT:1,FROM_RIGHT:-1,DOWN_EVENT:window.PointerEvent?"pointerdown":"mousedown",getLiveAppNode:function(a){return this.getLiveAppLineNode(a)||this.getLiveAppInlineNode(a)},getLiveAppInlineNode:function(a){a=a.getNode();return this.isLiveAppInlineNode(a)?a:null},getAdjustedPositionFromDirection:function(a,b){var c=a.getNode();a.isAtRightEdge()&&b===this.FROM_LEFT?c.nextSibling()&&(a=
c.nextSibling().startPosition()):a.isAtLeftEdge()&&b===this.FROM_RIGHT&&c.previousSibling()&&(a=c.previousSibling().endPosition());return a},getPositionForNavigationFromDirection:function(a,b){return b===this.FROM_RIGHT?this._getLeftPositionForNavigation(a):this._getRightPositionForNavigation(a)},_getLeftPositionForNavigation:function(a){var b=a.getNode().rootContainer();if(g.isAtStartOfContainer(a,b)){if((a=this.getLiveAppLineNodeFromViewModel(a))&&this.hasGeneratedCode(a)){if(this.getStartLineOfGeneratedCode(a)===
b)return new c(a,0);if(b!==a)return null}if(b=b.previousSibling())if(b=b.startPosition(),a=this.getLiveAppLineNodeFromViewModel(b))return new c(a,1)}else if(g.isAtEndOfContainer(a,b)&&(a=this.getLiveAppLineNodeFromViewModel(a),a===b&&this.hasGeneratedCode(a)))return b=this.getEndLineOfGeneratedCode(a),new c(b,b.maxOffset());return null},_getRightPositionForNavigation:function(a){var b=a.getNode().rootContainer();if(g.isAtStartOfContainer(a,b)){if(a=this.getLiveAppLineNodeFromViewModel(a),a===b&&this.hasGeneratedCode(a))return b=
this.getStartLineOfGeneratedCode(a),new c(b,0)}else if(g.isAtEndOfContainer(a,b)){a=this.getLiveAppLineNodeFromViewModel(a);if(!a||!this.hasGeneratedCode(a))return null;var d=this.getEndLineOfGeneratedCode(a);if(d===b)return new c(a,1);if(a===b)return(b=d.nextSibling())?new c(b,0):new c(a,1)}return null},getAdjustedSelection:function(a){var b=a.getStartPosition(),c=a.getEndPosition(),d=this.getLiveAppLineNodeFromViewModel(b),e=this.getLiveAppLineNodeFromViewModel(c);if(!d&&!e||d&&d===e&&this._isSelectionInCodeRange(a,
d))return null;var g,h;d&&(d=this.getStartPositionOfLiveApp(d),d.isEqualTo(b)||(g=d));e&&(d=this.getEndPositionOfLiveApp(e),d.isEqualTo(c)||(h=d));e=!!e&&this.hasGeneratedCode(e);if(!g&&!(h||e!==a.fileEndSelected()))return null;b=g||b;c=h||c;a=a.isReversed();return new f(b,c,a,e)},_isSelectionInCodeRange:function(a,b){var c=this.getCodeRange(b);return!c?!1:c.getStartPosition().getLine()<=a.getStartPosition().getLine()&&c.getEndPosition().getLine()>=a.getEndPosition().getLine()},getLiveAppLineNode:function(a){a=
a.getNode().rootContainer();return this.isLiveAppLineNode(a)?a:null},getLiveAppLines:function(a){var b=a.getStartPosition().getNode().rootContainer();a=a.getEndPosition().getNode().rootContainer();return d.getParagraphNodesInRange(b,a,l)},getLiveAppLineNodeFromInnerNodes:function(a){var b=this.getLiveAppLineNodeFromViewModel(a);return b&&!this.getLiveAppInlineNode(a)?b:null},getLiveAppLineNodeFromViewModel:function(a){a=q.getLineage(a.getNode())[0];return this.isLiveAppLineNode(a)?a:null},getGeneratedCodeLineNodes:function(b){b=
this.getCodeRange(b);return!b||this.isLiveAppLineNode(b.getStartPosition().getNode())?[]:a.paragraphNodesInRange(b)},getStartPositionOfLiveApp:function(a){return a.startPosition()},getEndPositionOfLiveApp:function(a){return this.hasGeneratedCode(a)?this.getEndPositionOfGeneratedCode(a):a.endPosition()},getStartPositionOfGeneratedCode:function(a){return(a=this.getStartLineOfGeneratedCode(a))?a.startPosition():null},getStartLineOfGeneratedCode:function(a){return(a=this.getCodeRange(a))?a.getStartPosition().getNode():
null},getEndPositionOfGeneratedCode:function(a){return(a=this.getEndLineOfGeneratedCode(a))?a.endPosition():null},getEndLineOfGeneratedCode:function(a){return(a=this.getCodeRange(a))?a.getEndPosition().getNode():null},setLiveAppLineTracker:function(a,b,c){this.removeLiveAppLineTracker(a);a=a.getStore();a.linePosition=b;a.linePositionTracker=h.after(b,"onChange",c,!0);return a.linePositionTracker},removeLiveAppLineTracker:function(a){a=a.getStore();a.linePosition&&(a.linePosition.destroy(),a.linePosition=
null);a.linePositionTracker&&(a.linePositionTracker.remove(),a.linePositionTracker=null)},removeGeneratedCode:function(a,b){if(this.getCodeRange(a)){var c=this.getStartPositionOfGeneratedCode(a).getLineColumn(),d=this.getEndPositionOfGeneratedCode(a).getLineColumn();this.setReadOnly(a,!1,b);b.deleteText(c.line,c.column,d.line,d.column)}},updateLiveAppWithBlockEdit:function(a,b,c,d,e){var f=document.activeElement,g=d.getScrollTop(),h=d.getScrollLeft(),k=c.startBlockEdit();k.preventMerge();b();c.endBlockEdit(k);
e.restoreFocus(a,f);d.setScrollTop(g);d.setScrollLeft(h)},setReadOnly:function(a,b,c){var d=this.getCodeRange(a);if(d&&(a=d.getStartPosition().getLine(),d=d.getEndPosition().getLine(),!(-1===a||-1===d)))for(;a<=d;a++)c.setReadOnlyLine(a,b)},hasGeneratedCode:function(a){return!!this.getCodeRange(a)},setCodeRange:function(a,b){this.removeCodeRange(a);a.getStore().codeRange=b},removeCodeRange:function(a){a=a.getStore();a.codeRange&&(a.codeRange.destroy(),a.codeRange=null)},getCodeRange:function(a){return a.getStore().codeRange},
isLiveAppInlineNode:function(a){return a instanceof k},isLiveAppLineNode:function(a){return a instanceof l},setDirtyState:function(a,b){a.getStore().isDirty=b},isDirty:function(a){return a.getStore().isDirty},compareContext:function(a,b,c,d){b=a.getContext("code")===b;c=a.getContext("appVariables")===c;a=a.getContext("appOperation")===d;return{codeSame:b,outputsSame:c,summarySame:a,allSame:b&&c&&a}},getDecoratedDomFragment:function(a){var b=document.createDocumentFragment();if(!a)return b;b.textContent=
a;var c=this._getRangesInDomNode(b.firstChild,s,a);a=this._getRangesInDomNode(b.firstChild,t,a);c.forEach(this._decorateForAppOperationOnRange.bind(this,"liveAppCodeStyle"));a.forEach(this._decorateForAppOperationOnRange.bind(this,"liveAppHighlightStyle"));return b},_getRangesInDomNode:function(a,b,c){b=RegExp(b);for(var d,e=[];d=b.exec(c);){var f=document.createRange();f.setStart(a,d.index);f.setEnd(a,d.index+d[0].length);e.push(f)}return e},_decorateForAppOperationOnRange:function(a,b){if(!b.collapsed){var c=
document.createElement("span");c.classList.add(a);b.surroundContents(c);c.firstChild.textContent=c.firstChild.textContent.slice(1);c.lastChild.textContent=c.lastChild.textContent.slice(0,-1)}},getEditField:function(a){var b=document.createElement("span");b.classList.add("liveAppVariableWrapper");var c=document.createElement("span");c.textContent=a;c.classList.add("liveAppVariableTextView");c.classList.add("liveAppCodeStyle");(e("trident")||e("ie")||e("edge"))&&c.classList.add("liveAppVariableExtraPadding");
a=new r({width:"100%",height:"auto",value:a});a.inputNode.classList.add("liveAppCodeStyle");b.appendChild(c);b.appendChild(a.domNode);return{domNode:b,textView:c,inputWidget:a}},getCodeWithUserVariableNames:function(a,b){var c=new m;c.initializeLines(a);var d=a.split("\n"),e=d.length-1,f=d.map(function(a){var b=document.createElement("span");b.textContent=a;return b}),g=c.getTokenMap(),h=[];Object.keys(b).forEach(function(a){var c=b[a];p.getTokensFromLineRange(g,0,e,this._isVariableNameToken.bind(this,
a,{})).forEach(function(a){var b=f[a.getLineNumber()].firstChild,d=document.createRange();d.setStart(b,a.getColumn());d.setEnd(b,a.getColumn()+a.getLength());d.userVariableName=c;h.push(d)})},this);h.forEach(function(a){var b=document.createElement("span");a.surroundContents(b);b.textContent=a.userVariableName});return f.map(function(a){return a.textContent}).join("\n")},_isVariableNameToken:function(a,b,c,d,e){if(c.getType()!==n.TOKENS.ID||c.getValue()!==a||(a=e[d-1])&&a.getType()===n.TOKENS.DOT)return!1;
if(b.hasOwnProperty("firstOutputLine")){if(c.getLineNumber()>b.firstOutputLine)return!0}else for(c=d+1;c<e.length;c+=1)if(d=e[c],d.getType()===n.TOKENS.EQUALS)return b.firstOutputLine=d.getLineNumber(),!0;return!1},addEventListenerWithHandle:function(a,b,c,d){a.addEventListener(b,c,d);return{remove:function(){a.removeEventListener(b,c,d)}}},isValidVariableName:function(a){return u.test(a)}}})},"MW/rtc/plugins/language/matlab/codingui/liveapps/nodes/LiveAppInlineNode":function(){define(["dojo/_base/declare",
"MW/rtc/nodes/OpaqueNode"],function(h,e){return h(e,{className:"LiveAppInlineNode",constructor:function(e){e=e||{};this.metadata=e.metadata||{appName:"",appOperation:"",appPath:""};this.code=e.code||"";this.numOfLines=e.numOfLines||0;this.appVariables=e.appVariables||"";this.appVariablesUserMap=e.appVariablesUserMap||{};this.appOperation=e.appOperation||this.metadata.appOperation;this.store={}},getMetaData:function(){return this.metadata},setActive:function(e){this.getWidget().setActive(e)},getContext:function(e){return this[e]},
getStore:function(){return this.store},getWidget:function(){return this.widget},setWidget:function(e){this.widget=e},destroyWidget:function(){this.widget.destroy();this.widget=null},_serializeAttributes:function(e){e.text=this.getText();e.metadata=this.metadata;e.code=this.code;e.numOfLines=this.numOfLines;e.appVariables=this.appVariables;e.appOperation=this.appOperation}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/nodes/LiveAppLineNode":function(){define(["dojo/_base/declare","MW/rtc/nodes/InnerNode",
"MW/rtc/plugins/view/layoutmanager/rules/ContiguousGroupingRule"],function(h,e,g){return h(e,{constructor:function(d,c){this.groupingType=g().groupingType},className:"LiveAppLineNode",groupingName:"CodeBlock",containerType:function(){return"liveapp"},isTextContainerNode:function(){return!0},isSplittable:function(){return!1},getDefaultChild:function(){return null},destroyWidget:function(){this.getInlineNode().destroyWidget();this.widget.destroy();this.widget=null},getWidget:function(){return this.widget},
setWidget:function(d){this.widget=d},setActive:function(d){this.getWidget().setActive(d)},getContext:function(d){return this.getInlineNode().getContext(d)},getMetaData:function(){return this.getInlineNode().getMetaData()},getStore:function(){return this.getInlineNode().getStore()},getInlineNode:function(){return this.startNode()},_serializeAttributes:function(d){}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppControllerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"./LiveAppController"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.cursorcontroller","rtc.liveapps.documenthandler"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppController":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,e){return h(e,{constructor:function(e,d){this._cursor=e.getCursors()[0];this._liveAppDocumentHandler=d},insertLiveAppAtCurrentPosition:function(e,
d,c,b){return this._liveAppDocumentHandler.insertLiveAppWithUndoRedo({metadata:{appName:e||"",appOperation:c||"",appPath:b||""},appVariables:d||""},this._cursor.getCursorPosition())}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppCursorHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LiveAppCursorHandler"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.cursorcontroller"]}},createInstance:function(d){return new g(d)}})})},
"MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppCursorHandler":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin","./LiveAppUtilities"],function(h,e,g,d,c){return h(d,{constructor:function(b){this._cursor=b.getCursors()[0];this.own(g.after(this._cursor,"onChange",e.hitch(this,"_handleCursorChange"),!0))},_handleCursorChange:function(){var b=this._cursor.getSelection();if(b&&(b=c.getAdjustedSelection(b)))this._cursor.suspendChangeEvent(),
this._cursor.setSelection(b),this._cursor.activateChangeEvent()}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppDocumentHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LiveAppDocumentHandler"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.view","rtc.cursorcontroller","rtc.liveapps.focusmanager"]}},createInstance:function(d,c,b,a,e){return new g(d,c,b,a,e)}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppDocumentHandler":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/model/DocumentConstants MW/rtc/model/DocumentEventUtilities MW/rtc/model/DocumentUtilities MW/rtc/model/SelectionUtilities MW/rtc/model/events/DocumentEvent MW/rtc/model/events/NumberOfLinesChangedEvent ./nodes/LiveAppInlineNode ./LiveAppUtilities".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p){return h(d,{constructor:function(a,b,c,d,f){this._internalDocument=a;this._document=b;this._view=c;this._cursorController=d;this._liveAppFocusManager=f;this._cursor=d.getCursors()[0];this.own(g.after(this._document,"onPreDeletion",e.hitch(this,"_handlePreDeletion"),!0),g.after(this._internalDocument,"onDocumentChanged",e.hitch(this,"_handleDocumentChanged"),!0))},_handlePreDeletion:function(a){if(this._cursor.hasSelection())return this._removeLiveAppsInSelectionIfAny()},
_removeLiveAppsInSelectionIfAny:function(){var a=this._getLiveAppLinesFromCursor();if(0!==a.length){var b=this._document.startBlockEdit();a.forEach(this.removeLiveAppCompletelyWithUndoRedo,this);this._document.endBlockEdit(b);if(!this._cursor.hasSelection())return!0}},_getLiveAppLinesFromCursor:function(){return p.getLiveAppLines(this._cursor.getSelection())},_handleDocumentChanged:function(a){var c=[];a=b.finalLineRangeFromEvents(a);for(var d=a.startLine;d<=a.endLine;d++){var e=this._internalDocument.getLineNode(d);
p.isLiveAppLineNode(e)&&c.push(e)}0!==c.length&&(this.onUpdate(c),c.forEach(function(a){this._view.refreshNode(a)},this),this._view.onLayoutChange())},onUpdate:function(a){},mergeLiveAppLineWithEmptyLineWithUndoRedo:function(a){var b=this._document.startBlockEdit();a=this._mergeLiveAppLineAndEmptyLine(a);this._processEventsFromResult(a,b);this._document.endBlockEdit(b)},_mergeLiveAppLineAndEmptyLine:function(a){var b=Math.max(0,this._internalDocument.getLineNumber(a)-1),c=[l.create(b,b+1,-1)],b=[l.create(b,
b+1,1)],d=a.nextNode();this._internalDocument.deleteNode(a,d?{node:d,offset:0}:null);return{events:c,undoEvents:b,redoEvents:c}},replaceGeneratedCodeWithUndoRedo:function(a,b){var c=this._document.startBlockEdit();this._removeGeneratedCodeOrInsertEmptyCodeLineWithUndoRedo(a);if(b){var d=this._internalDocument.getLineNumber(a)+1;this._document.insertText(b,d+1,1)}this._document.endBlockEdit(c)},editGeneratedCodeWithUndoRedo:function(a,b){var c=this._document.startBlockEdit(),d=this._internalDocument.getLineNumber(a)+
1;Object.keys(b).forEach(function(a){var c=d+parseInt(a,10)+1,e=this._document.getLineLength(c)+1;this._document.setReadOnlyLine(c,!1);this._document.replaceText(b[a],c,1,c,e);this._document.setReadOnlyLine(c,!0)},this);this._document.endBlockEdit(c)},removeLiveAppCompletelyWithUndoRedo:function(a){this.onBeforeRemove(a);var b=this._document.startBlockEdit();this._removeGeneratedCodeOrInsertEmptyCodeLineWithUndoRedo(a);this._liveAppFocusManager.blurLiveAppAndReturnFocusToEditor(!0);var c=this._removeLiveAppLine(a);
this._processEventsFromResult(c,b);this._document.endBlockEdit(b);this.onAfterRemove(a)},_removeGeneratedCodeOrInsertEmptyCodeLineWithUndoRedo:function(a){var b=this._document.startBlockEdit();p.hasGeneratedCode(a)?p.removeGeneratedCode(a,this._document):(a=this._insertEmptyCodeLine(a.endPosition()),this._processEventsFromResult(a,b));this._document.endBlockEdit(b)},removeLiveAppWithUndoRedo:function(a,b){this.onBeforeRemove(a);var d=this._document.startBlockEdit();p.isLiveAppInlineNode(a)?(this._cursor.setPosition(a,
b===c.BACKWARD_DELETE?1:0),this._document.deleteTextAtCurrentPosition(b)):this.convertLiveAppIntoPlainCodeWithUndoRedo(a,b);this._document.endBlockEdit(d);this.onAfterRemove(a)},onBeforeRemove:function(a){},onAfterRemove:function(a){},convertLiveAppIntoPlainCodeWithUndoRedo:function(a,b){var c=this._document.startBlockEdit(),d;p.hasGeneratedCode(a)?(d=b===p.FROM_LEFT?p.getStartPositionOfGeneratedCode(a):p.getEndPositionOfGeneratedCode(a),this._cursor.setPosition(d.getNode(),d.getOffset(),!0)):(d=
this._insertEmptyCodeLine(a.endPosition()),this._processEventsFromResult(d,c));this._liveAppFocusManager.blurLiveAppAndReturnFocusToEditor(!0);d=this._removeLiveAppLine(a,this);this._processEventsFromResult(d,c);this._document.endBlockEdit(c)},_removeLiveAppLine:function(a){var b=this._internalDocument.getLineNumber(a),c=a.nextNode(),c=c?{node:c,offset:0}:null;a.destroyWidget();this._internalDocument.deleteNode(a,c);a=[l.create(b,b+1,-1)];b=[l.create(b,b+1,1)];return{events:a,undoEvents:b,redoEvents:a}},
insertEmptyCodeLineWithUndoRedo:function(a){var b=this._document.startBlockEdit(),c=a.getNode().rootContainer(),d=c.readOnly;c.readOnly=!1;a=this._document.createPosition(a.getNode(),a.getOffset(),!0);var e=this._insertEmptyCodeLine(a);this._processEventsFromResult(e,b);this._cursorController.clearSelection();this._cursor.setPosition(a.getNode(),a.getOffset(),!0);a.destroy();c.readOnly=d;this._document.endBlockEdit(b)},_insertEmptyCodeLine:function(a){var c=this._internalDocument.createContainerForType("code").container,
d=this._internalDocument.createNode(c.getDefaultChild());c.addChild(d);a=this._internalDocument.insertAtPosition(c,a);var e=b.finalLineRangeFromEvents(a.events),d=[l.create(e.startLine,e.endLine,-1)],e=[l.create(e.startLine,e.endLine,1)];return{events:a.events,undoEvents:d,redoEvents:e,lineNode:c}},updateContextWithUndoRedo:function(a,b){var c=this._document.startBlockEdit();p.isLiveAppLineNode(a)&&(a=a.getInlineNode());this._internalDocument.changeNodeAttributes(a,b);var d=this._internalDocument.getLineNumber(a.rootContainer()),
d=[k.create(d,d,0)];c.appendUndoEvents(d);c.appendRedoEvents(d);this._internalDocument.emitDocumentEvents(d);this._document.endBlockEdit(c)},insertLiveAppWithUndoRedo:function(a,b){var d=this._document.startBlockEdit();this._cursorController.hasSelection()&&this._document.deleteTextAtCurrentPosition(c.BACKWARD_DELETE);var e=this._insertLiveApp(a,b);this._processEventsFromResult(e,d);this._document.endBlockEdit(d);this._cursor.setPosition(e.inlineNode,0);d=p.getLiveAppNode(this._cursor.getCursorPosition());
this._liveAppFocusManager.focusLiveApp(d);return d},_insertLiveApp:function(a,c){var d=new n(a),e=this._internalDocument.insertAtPosition(d,c),f=b.finalLineRangeFromEvents(e.events),g=[l.create(f.startLine,f.endLine,-1)],f=[l.create(f.startLine,f.endLine,1)];return{events:e.events,undoEvents:g,redoEvents:f,inlineNode:d}},_processEventsFromResult:function(a,b){b.appendUndoEvents(a.undoEvents);b.appendRedoEvents(a.redoEvents);this._internalDocument.emitDocumentEvents(a.events)}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppEditorKeyHandlerProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./LiveAppEditorKeyHandler"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.cursorcontroller","rtc.actionservice","rtc.liveapps.documenthandler","rtc.liveapps.focusmanager"]}},createInstance:function(d,c,b,a){return new g(d,c,b,a)}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppEditorKeyHandler":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/keys MW/rtc/abstract/AbstractPlugin MW/rtc/model/DocumentConstants MW/rtc/model/DocumentUtilities MW/rtc/model/Position ./LiveAppUtilities".split(" "),
function(h,e,g,d,c,b,a,f,k){return h(c,{constructor:function(a,b,c,d){this._liveAppDocumentHandler=c;this._liveAppFocusManager=d;this._cursor=a.getCursors()[0];a=[{id:"rtc_live_app_backspace",enabled:!0,key:"backspace",callback:this._handleRemoveKeys.bind(this,k.FROM_RIGHT)},{id:"rtc_live_app_delete",enabled:!0,key:"delete",callback:this._handleRemoveKeys.bind(this,k.FROM_LEFT)},{id:"rtc_live_app_enter",enabled:!0,key:"enter",callback:this._handleEnter.bind(this)},{id:"rtc_live_app_shift_enter",enabled:!0,
key:"shift_enter",callback:this._handleEnter.bind(this)},{id:"rtc_live_app_left",enabled:!0,key:"left",callback:this._handleArrowsKey.bind(this,k.FROM_RIGHT)},{id:"rtc_live_app_right",enabled:!0,key:"right",callback:this._handleArrowsKey.bind(this,k.FROM_LEFT)},{id:"rtc_live_app_tab",enabled:!0,key:"tab",callback:this._handleNavigation.bind(this,k.FROM_LEFT,!0)},{id:"rtc_live_app_shift_tab",enabled:!0,key:"shift_tab",callback:this._handleNavigation.bind(this,k.FROM_RIGHT,!0)}];b.loadActions(a)},_handleRemoveKeys:function(a){if(this._cursor.hasSelection())return!1;
if(this._handleNavigation(a,!1))return!0;var b=this._cursor.getCursorPosition(),b=k.getAdjustedPositionFromDirection(b,a);return this._moveCursorOrRemoveEmptySiblingContainer(b,a)},_moveCursorOrRemoveEmptySiblingContainer:function(a,c){var d=this._getSiblingContainerIfTriggerPositionExpected(a,c);if(!d)return!1;var e=a.getNode().rootContainer(),f;k.isLiveAppLineNode(e)?f=e:k.isLiveAppLineNode(d)&&(f=d,d=e);if(!f)return!1;d.isEmpty()&&this._liveAppDocumentHandler.mergeLiveAppLineWithEmptyLineWithUndoRedo(d);
var g=c===b.BACKWARD_DELETE;e===d?this._cursor.setPosition(f,g?1:0):d.isEmpty()?this._cursor.setPosition(f,g?0:1):this._cursor.setPosition(d,g?d.maxOffset():0);return!0},_getSiblingContainerIfTriggerPositionExpected:function(a,b){return this._isTriggerPositionExpected(a,b)?this._getSiblingByDirection(a,b):null},_isTriggerPositionExpected:function(c,d){var e=c.getNode().rootContainer();return d===b.BACKWARD_DELETE?a.isAtStartOfContainer(c,e):a.isAtEndOfContainer(c,e)},_getSiblingByDirection:function(a,
c){var d=a.getNode().rootContainer();if(c===b.BACKWARD_DELETE){var e=d.previousSibling();if(e)return d=new f(e,0),(d=k.getLiveAppLineNodeFromViewModel(d))?d:e}return c===b.FORWARD_DELETE?(k.isLiveAppLineNode(d)&&k.hasGeneratedCode(d)&&(d=k.getEndLineOfGeneratedCode(d)),d.nextSibling()):null},_handleEnter:function(){var a=this._cursor.getCursorPosition(),b=k.getLiveAppLineNode(a);if(!b)return!1;var c=a;1===a.getOffset()&&k.hasGeneratedCode(b)&&(c=k.getEndPositionOfGeneratedCode(b));this._liveAppDocumentHandler.insertEmptyCodeLineWithUndoRedo(c);
return!0},_handleArrowsKey:function(a){if(this._cursor.hasSelection())return!1;var b=this._cursor.getCursorPosition();return(b=k.getPositionForNavigationFromDirection(b,a))?(this._cursor.setPosition(b.getNode(),b.getOffset(),!0),!0):this._handleNavigation(a,!0)},_handleNavigation:function(a,b){var c=this._cursor.getCursorPosition(),c=k.getAdjustedPositionFromDirection(c,a),d=k.getLiveAppNode(c);if(!d)return!1;var e=a===k.FROM_LEFT?0:1;return e===c.getOffset()?(b&&this._cursor.setPosition(d,0===e?
1:0),this._liveAppFocusManager.focusLiveApp(d),!0):!1}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppExecutionManagerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LiveAppExecutionManager"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.cursorcontroller","rtc.liveapps.focusmanager","rtc.embeddedoutputs.executionmanager","rtc.code.sections.model","rtc.code.sections.stale.model"]}},createInstance:function(d,c,b,
a,e){return new g(d,c,b,a,e)}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppExecutionManager":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin","./LiveAppUtilities"],function(h,e,g,d,c){return h(d,{constructor:function(b,a,c,d,h){this._cursorController=b;this._liveAppFocusManager=a;this._executionManager=c;this._sectionModel=d;this._staleSectionModel=h;this.own(g.after(this._liveAppFocusManager,"onExitLiveApp",e.hitch(this,"_handleExitLiveApp"),
!0))},_handleExitLiveApp:function(b){if(!this._cursorController.hasSelection()&&c.hasGeneratedCode(b)&&c.isDirty(b)){var a=this._sectionModel.getSectionNumberForNode(b);this._staleSectionModel.isSectionStale(a)&&(c.setDirtyState(b,!1),this._executionManager.executeSection(a,!1,!1))}}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppFocusManagerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LiveAppFocusManager"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.view",
"rtc.cursorcontroller","rtc.focusservice","rtc.keyhandler","rtc.liveapps.viewmodel"]}},createInstance:function(d,c,b,a,e){return new g(d,c,b,a,e)}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppFocusManager":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin","./LiveAppUtilities"],function(h,e,g,d,c){return h(d,{constructor:function(b,a,c,d,h){this._view=b;this._cursorController=a;this._focusService=c;this._keyHandler=d;this._liveAppViewModel=
h;this._cursor=a.getCursors()[0];this.own(g.after(this._cursor,"onUpdate",e.hitch(this,"_handleCursorUpdate"),!0),g.after(this._cursor,"onChange",e.hitch(this,"_handleCursorChange"),!0),g.after(this._liveAppViewModel,"onLiveAppViewCreated",e.hitch(this,"_handleLiveAppViewCreated"),!0));this._lastActiveLiveApp=this._activeLiveApp=null},_handleCursorUpdate:function(){this._activeLiveApp&&!this._cursor.isHidden()&&this._handleCursorChange()},_handleCursorChange:function(){if(!this._keyHandler.hasFocus())return!1;
var b=this._getLiveAppLineNodeAtCursor(!1);this._exitLastActiveLiveAppForTheNextOne(this._lastActiveLiveApp,b);this._lastActiveLiveApp=b;b=this._getLiveAppLineNodeAtCursor(!0);this._setActiveLiveApp(b)},_handleLiveAppViewCreated:function(b){var a=b.getWidget();a.addDownHandler(this._handleDown.bind(this,b,!0),!0);a.addDownHandler(this._handleDown.bind(this,b,!1),!1)},_handleDown:function(b,a,c){a?this._handleFocus(b):c.stopPropagation()},_handleFocus:function(b){var a=this._activeLiveApp;c.isLiveAppLineNode(b)?
(this._getLiveAppLineNodeAtCursor(!1)!==b||1!==this._cursor.getOffset())&&this._cursor.setPosition(b,1,!1):this._cursor.getNode()!==b&&this._cursor.setPosition(b,1,!1);this._cursorController.hasSelection()&&this._cursorController.clearSelection();this._exitLastActiveLiveAppForTheNextOne(a,b);this._setActiveLiveApp(b)},_exitLastActiveLiveAppForTheNextOne:function(b,a){if(b&&b!==a)this.onExitLiveApp(b)},onExitLiveApp:function(b){},_setActiveLiveApp:function(b){this._activeLiveApp&&this._activeLiveApp.setActive(!1);
(this._activeLiveApp=b)&&this._activeLiveApp.setActive(!0)},restoreFocus:function(b,a){a&&(a===document.body?this.focusLiveApp(b):a.focus())},focusLiveApp:function(b){var a=this._view.getScrollTop(),c=this._view.getScrollLeft();b.getWidget().focus();this._setActiveLiveApp(b);b=this._view.getDomtarget();b.scrollTop=a;b.scrollLeft=c},blurLiveAppAndReturnFocusToEditor:function(b){this._focusService.setFocus();(!this._getLiveAppLineNodeAtCursor(!0)||b)&&this._setActiveLiveApp(null)},_getLiveAppLineNodeAtCursor:function(b){var a=
this._cursor.getCursorPosition();return b?c.getLiveAppLineNodeFromInnerNodes(a):c.getLiveAppLineNodeFromViewModel(a)}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppUIFigureHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LiveAppUIFigureHandler"],function(h,e,g){return h(e,{requires:function(){return{createInstance:"rtc.document rtc.view rtc.liveapps.viewmodel rtc.liveapps.backend rtc.liveapps.codemanager rtc.liveapps.documenthandler rtc.liveapps.focusmanager".split(" ")}},
createInstance:function(d,c,b,a,e,h,l,n){return new g(d,c,b,a,e,h,l,n)}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppUIFigureHandler":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin","./LiveAppUtilities"],function(h,e,g,d,c){return h(d,{_DELAY:50,constructor:function(b,a,c,d,h,n,p){this._document=b;this._view=a;this._liveAppBackendService=d;this._liveAppCodeManager=h;this._liveAppDocumentHandler=n;this._liveAppFocusManager=p;
this.own(g.after(c,"onLiveAppViewCreated",e.hitch(this,"_handleLiveAppViewCreated"),!0),g.after(this._liveAppDocumentHandler,"onAfterRemove",e.hitch(this,"_handleRemove"),!0))},_handleLiveAppViewCreated:function(b){var a=b.getMetaData().appPath;a&&this._liveAppBackendService.initializeApp(b,a,this._initializeApp.bind(this,b))},_initializeApp:function(b,a){var d=b.getWidget();d&&(d.initialize(a),d.own(g.after(this._view,"onResize",this._handleViewResize.bind(this,b))),c.isLiveAppLineNode(b)&&(d.addChangeHandler(this._handleUIFigureChange.bind(this,
b)),d.on("variablenamechange",this._handleVariableNameChange.bind(this,b))),this._view.onLayoutChange())},_handleViewResize:function(b){b.getWidget().resize()},_handleUIFigureChange:function(b){var a=b.getStore();a.timer&&(window.clearTimeout(a.timer),a.timer=null);a.timer=window.setTimeout(function(){a.timer=null;this._requestDataAndUpdateLiveApp(b)}.bind(this),this._DELAY)},_requestDataAndUpdateLiveApp:function(b){this._liveAppBackendService.requestData(b,this._updateLiveApp.bind(this,b))},_updateLiveApp:function(b,
a,d,e,g){var h=c.compareContext(b,a,d,e);if(h.allSame)return!1;var p=b.getContext("appVariablesUserMap"),m=a?c.getCodeWithUserVariableNames(a,p):"";c.updateLiveAppWithBlockEdit(b,function(){var c={};h.codeSame||this._liveAppCodeManager.updateGeneratedCode(b,m,a,g);if(!h.outputsSame&&(c.appVariables=d))c.appVariablesUserMap=this._getVariablesUserMap(b,d);h.summarySame||(c.appOperation=e);0<Object.keys(c).length&&(this._liveAppDocumentHandler.updateContextWithUndoRedo(b,c),c=b.getWidget(),!h.outputsSame&&
c.updateVariables(),!h.summarySame&&c.updateOperation())}.bind(this),this._document,this._view,this._liveAppFocusManager);return!0},_getVariablesUserMap:function(b,a){var c=b.getContext("appVariablesUserMap"),d={};(a?a.split(","):[]).forEach(function(a){d[a]=c[a]||a});return d},_handleVariableNameChange:function(b,a){c.updateLiveAppWithBlockEdit(b,function(){var d=b.getContext("appVariablesUserMap"),d=JSON.parse(JSON.stringify(d));d[a.mwEventData.originalVariableName]=a.mwEventData.newValue;this._liveAppDocumentHandler.updateContextWithUndoRedo(b,
{appVariablesUserMap:d});var e=b.getContext("code"),d=c.getCodeWithUserVariableNames(e,d);this._liveAppCodeManager.updateGeneratedCode(b,d,null)}.bind(this),this._document,this._view,this._liveAppFocusManager)},_handleRemove:function(b){this._liveAppBackendService.removeApp(b)}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppViewModelProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LiveAppViewModel"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},
createInstance:function(){return new g}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppViewModel":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin","./widgets/LiveAppInlineWidget","./widgets/LiveAppLineWidget","./LiveAppUtilities"],function(h,e,g,d,c){return h(e,{constructor:function(){},createInlineDomNode:function(b,a){this._createInlineWidgetView(b,a);a.classList.add("liveAppInlineNode");return a},_createInlineWidgetView:function(b,a){var d=b.getWidget();if(d)d.placeAt(a);
else if(d=this._createAndSetInlineWidget(b),d.placeAt(a),d.startup(),!c.isLiveAppLineNode(b.parent))this.onLiveAppViewCreated(b)},_createAndSetInlineWidget:function(b){var a=new g({node:b});b.setWidget(a);return a},createLineDomNode:function(b,a){this._createLineWidgetView(b,a);a.classList.add("liveAppLineNode");return a},_createLineWidgetView:function(b,a){var c=b.getWidget();c?c.layout(a):(c=this._createAndSetLineWidget(b,a),c.layout(a),c.startup(),this.onLiveAppViewCreated(b))},_createAndSetLineWidget:function(b){var a=
new d({node:b});b.setWidget(a);return a},onLiveAppViewCreated:function(b){}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/widgets/LiveAppInlineWidget":function(){define("dojo/_base/declare dojo/i18n!l10n/nls/liveApps dojo/text!./LiveAppInlineWidgetTemplate.html MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppUtilities ./AbstractLiveAppWidget ./UIFigureWidget".split(" "),function(h,e,g,d,c,b){return h(c,{templateString:g,constructor:function(a){},buildRendering:function(){this.inherited(arguments);
this._uifigureWidget=new b({uuid:this.uuid},this.uifigureContainer);this.own(this._uifigureWidget);this._editFields={};this.updateView()},updateView:function(){this.updateName();this.updateVariables();this.updateOperation()},initialize:function(a){this._uifigureWidget.initialize(a)},resize:function(){this._uifigureWidget.resize()},updateName:function(){this.appName.textContent=this.node.getMetaData().appName},updateVariables:function(){var a=this.node.getContext("appVariables"),b=a?a.split(","):[];
a===this._appVariables?this._setVariables(b):(this._buildVariables(b),this._appVariables=a)},_setVariables:function(a){var b=this.node.getContext("appVariablesUserMap");a.forEach(function(a){var c=this._editFields[a],d=c.inputWidget;a=b[a]||a;d.get("value")!==a&&(d.set("value",a),c.textView.textContent=a)},this)},_buildVariables:function(a){this.appVariablesList.innerHTML="";this._cleanupInputWidgets();var b=this.node.getContext("appVariablesUserMap");a.forEach(function(c,d){this._addVariableName(c,
b[c]||c);d<a.length-1&&this._addComma()},this);0<a.length&&this.node.getContext("appOperation")&&this._addEqualSign();this._updateDescriptionDisplayState()},_cleanupInputWidgets:function(){Object.keys(this._editFields).forEach(function(a){this._editFields[a].inputWidget.destroy()},this);this._editFields={}},_addVariableName:function(a,b){var c=d.getEditField(b);this._editFields[a]=c;var e=c.textView,g=c.inputWidget;g.on(d.DOWN_EVENT,this._handleDownForEditField.bind(this,g));g.on("input",this._handleInputForEditField.bind(this,
g,e));g.on("change",this._handleChangeForEditField.bind(this,g,e,a));g.own(d.addEventListenerWithHandle(g.inputNode,"blur",this._handleBlurForEditField.bind(this,g)));g.startup();this.appVariablesList.appendChild(c.domNode)},_handleDownForEditField:function(a,b){var c=a.inputNode;document.activeElement!==c&&(c.select(),b.preventDefault())},_handleInputForEditField:function(a,b){b.textContent=a.inputNode.value;this._validateVariableField(a)},_handleChangeForEditField:function(a,b,c,e){d.isValidVariableName(e.mwEventData.newValue)?
this.emit("variablenamechange",{mwEventData:{originalVariableName:c,oldValue:e.mwEventData.oldValue,newValue:e.mwEventData.newValue}}):(a.set("value",e.mwEventData.oldValue),a.set("validationState","normal"),b.textContent=e.mwEventData.oldValue)},_validateVariableField:function(a){if(d.isValidVariableName(a.inputNode.value))return a.set("validationState","normal"),!0;a.set("errorText",e.validateVariableNameErrorMessage);a.set("validationState","error");return!1},_handleBlurForEditField:function(a){a=
a.inputNode;a.selectionStart!==a.selectionEnd&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(document.createRange()))},_addComma:function(){var a=document.createElement("span");a.textContent=",";this.appVariablesList.appendChild(a)},_addEqualSign:function(){var a=document.createElement("span");a.textContent=" \x3d ";this.appVariablesList.appendChild(a)},updateOperation:function(){var a=this.node.getContext("appOperation"),a=d.getDecoratedDomFragment(a);this.appOperation.innerHTML=
"";this.appOperation.appendChild(a);this._updateDescriptionDisplayState()},_updateDescriptionDisplayState:function(){this.appDescription.textContent.trim()?this.appDescription.style.display="":this.appDescription.style.display="none"},addDownHandler:function(a,b){this.own(d.addEventListenerWithHandle(this.domNode,d.DOWN_EVENT,a,b))},addKeydownHandler:function(a){this.on("keydown",a)},addChangeHandler:function(a){this._uifigureWidget.addChangeHandler(a)},isEventFromInnerControl:function(a){return this.summaryContainer.contains(a)||
this.uifigureContainer.contains(a)}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/widgets/AbstractLiveAppWidget":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetBase","dijit/_WidgetsInTemplateMixin","dojo/_base/declare","dojo/text!./LiveAppInlineWidgetTemplate.html"],function(h,e,g,d,c){return d([e,h,g],{templateString:c,constructor:function(b){},updateView:function(){},setActive:function(b){b?this.domNode.classList.add("active"):this.domNode.classList.remove("active")},focus:function(){this.domNode.focus()},
resize:function(){},addDownHandler:function(b,a){},addKeydownHandler:function(b){},addChangeHandler:function(b){},isEventFromInnerControl:function(b){}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/widgets/UIFigureWidget":function(){define(["dojo/_base/declare","dijit/_WidgetBase"],function(h,e){var g=h(null,{constructor:function(d){},createWidget:function(){return{placeAt:function(){}}}});return h(e,{baseClass:"liveAppContentPane",constructor:function(d){this._initialized=!1;this._embeddedFigureFactory=
new g},initialize:function(d){this._initialized||(this.domNode.style.minWidth=d.clientData.width+"px",this.domNode.style.height=d.clientData.height+"px",this._embeddedFigure=this._embeddedFigureFactory.createWidget(this,d.figureData,this._handleServerPropertyChange.bind(this)),this._embeddedFigure.placeAt(this.domNode),this._initialized=!0)},_handleServerPropertyChange:function(d){},resize:function(){if(this._embeddedFigureFactory.FigureManager){var d=this.domNode.getBoundingClientRect();this._embeddedFigureFactory.FigureManager.resize({w:d.width,
h:d.height})}},addChangeHandler:function(d){this.on("mouseup, pointerup",d);this.on("value-change",d);this.on("change",d)},destroyRecursive:function(){}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/widgets/LiveAppLineWidget":function(){define(["dojo/_base/declare","dojo/text!./LiveAppLineWidgetTemplate.html","./AbstractLiveAppWidget"],function(h,e,g){return h(g,{templateString:e,constructor:function(d){},buildRendering:function(){this.inherited(arguments);this._inlineWidget=this.node.getInlineNode().getWidget();
this.own(this._inlineWidget)},updateView:function(){this._inlineWidget.updateView()},initialize:function(d){this._inlineWidget.initialize(d)},updateVariables:function(){this._inlineWidget.updateVariables()},updateOperation:function(){this._inlineWidget.updateOperation()},focus:function(){this._inlineWidget.focus()},resize:function(){this._inlineWidget.resize()},addDownHandler:function(d,c){this._inlineWidget.addDownHandler(d,c)},addKeydownHandler:function(d){this._inlineWidget.addKeydownHandler(d)},
addChangeHandler:function(d){this._inlineWidget.addChangeHandler(d)},isEventFromInnerControl:function(d){return this._inlineWidget.isEventFromInnerControl(d)},layout:function(d){this.domNode.insertBefore(d.childNodes[0],this.codeContainer);this.placeAt(d)},addCodeLines:function(d){d.forEach(function(c){c.contains(this.domNode)||this.codeContainer.appendChild(c)},this)}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppWidgetKeyHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"./LiveAppWidgetKeyHandler"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.cursorcontroller","rtc.liveapps.viewmodel","rtc.liveapps.documenthandler","rtc.liveapps.focusmanager"]}},createInstance:function(d,c,b,a){return new g(d,c,b,a)}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppWidgetKeyHandler":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/keys MW/rtc/abstract/AbstractPlugin ./LiveAppUtilities".split(" "),function(h,e,g,d,
c,b){return h(c,{constructor:function(a,b,c,d){this._cursorController=a;this._liveAppViewModel=b;this._liveAppDocumentHandler=c;this._liveAppFocusManager=d;this._cursor=a.getCursors()[0];this.own(g.after(this._liveAppViewModel,"onLiveAppViewCreated",e.hitch(this,"_handleLiveAppViewCreated"),!0))},_handleLiveAppViewCreated:function(a){a.getWidget().addKeydownHandler(this._handleKeydown.bind(this,a))},_handleKeydown:function(a,b){b.stopPropagation();a.getWidget().isEventFromInnerControl(b.target)?this._handleKeydownFromInnerControl(a,
b):this._handleKeydownFromWidgetWrapper(a,b)},_handleKeydownFromInnerControl:function(a,b){var c=b.keyCode,e=!1,g;if(c===d.TAB&&b.shiftKey){c=this._findTabbableElements(a);g=this._findElementInNodeList(c,b.target);if(0>g||!this._focusOnPreviousTabbableElement(c,g-1))this._cursor.setPosition(a,0),e=!0;b.preventDefault()}else if(c===d.TAB){c=this._findTabbableElements(a);g=this._findElementInNodeList(c,b.target);if(0>g||!this._focusOnNextTabbableElement(c,g+1))this._cursor.setPosition(a,1),e=!0;b.preventDefault()}e&&
this._liveAppFocusManager.blurLiveAppAndReturnFocusToEditor(!1)},_handleKeydownFromWidgetWrapper:function(a,c){c.preventDefault();var e=c.keyCode,g=!1;if(e===d.ESCAPE)g=!0;else if(e===d.TAB&&c.shiftKey){if(this._cursor.setPosition(a,0),e=this._findTabbableElements(a),0===e.length||!this._focusOnLastTabbableElement(e))g=!0}else if(e===d.TAB){if(this._cursor.setPosition(a,1),e=this._findTabbableElements(a),0===e.length||!this._focusOnFirstTabbableElement(e))g=!0}else e===d.LEFT_ARROW?(this._cursor.setPosition(a,
0),g=!0):e===d.RIGHT_ARROW?(this._cursor.setPosition(a,1),g=!0):e===d.UP_ARROW?(this._cursor.movePosition(this._cursor.UP),g=!0):e===d.DOWN_ARROW?(b.hasGeneratedCode(a)&&(g=b.getEndLineOfGeneratedCode(a).startPosition(),this._cursor.setPosition(g.getNode(),g.getOffset())),this._cursor.movePosition(this._cursor.DOWN),g=!0):e===d.DELETE?(this._liveAppDocumentHandler.removeLiveAppWithUndoRedo(a,b.FROM_LEFT),g=!0):e===d.BACKSPACE&&(this._liveAppDocumentHandler.removeLiveAppWithUndoRedo(a,b.FROM_RIGHT),
g=!0);g&&this._liveAppFocusManager.blurLiveAppAndReturnFocusToEditor(!1)},_findTabbableElements:function(a){return a.getWidget().domNode.querySelectorAll('button, [href], input:not([type\x3d"hidden"]), select, textarea, [tabindex]:not([tabindex\x3d"-1"])')},_findElementInNodeList:function(a,b){for(var c=0;c<a.length;c+=1)if(a[c]===b)return c;return-1},_focusOnLastTabbableElement:function(a){return this._focusOnPreviousTabbableElement(a,a.length-1)},_focusOnFirstTabbableElement:function(a){return this._focusOnNextTabbableElement(a,
0)},_focusOnPreviousTabbableElement:function(a,b){for(var c=b;0<=c;c-=1)if(this._checkTabbableElement(a[c]))return!0;return!1},_focusOnNextTabbableElement:function(a,b){for(var c=b;c<a.length;c+=1)if(this._checkTabbableElement(a[c]))return!0;return!1},_checkTabbableElement:function(a){a.focus();return document.activeElement===a}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/nodes/LiveAppInlineNodeContentConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"./LiveAppInlineNodeContentConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/nodes/LiveAppInlineNodeContentConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/contentconverter/base/LeafNodeContentConverter","./LiveAppInlineNode"],function(h,e,g){return h(e,{getApplicableNodeClass:function(){return g}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/nodes/LiveAppInlineNodeInsertionRulesProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./LiveAppInlineNodeInsertionRules"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/nodes/LiveAppInlineNodeInsertionRules":function(){define("dojo/_base/declare MW/rtc/plugins/insertionrules/BaseInsertionRules MW/rtc/plugins/insertionrules/InsertionRuleConstants MW/rtc/plugins/richtext/nodes/inner/RichTextContainerNode ./LiveAppInlineNode ./LiveAppLineNode".split(" "),
function(h,e,g,d,c,b){return h(e,{_compatibleParents:[d],constructor:function(){},getApplicableNodeClass:function(){return c},getTopLevelInsertionInstruction:function(a,c,d,e,h){return{insertInRoot:{relationToPosition:a.getNode().rootContainer().isEmpty()?g.RELATION.BEFORE:g.RELATION.AT,containerConstructor:b}}},destroy:function(){}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/nodes/LiveAppLineNodeContentConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"./LiveAppLineNodeContentConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/nodes/LiveAppLineNodeContentConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/contentconverter/base/InnerNodeContentConverter","./LiveAppLineNode"],function(h,e,g){return h(e,{getApplicableNodeClass:function(){return g}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/nodes/LiveAppLineNodeConversionRulesProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./LiveAppLineNodeConversionRules"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/nodes/LiveAppLineNodeConversionRules":function(){define(["dojo/_base/declare","MW/rtc/nodes/nodeconversionrules/base/AbstractNodeConversionRules","./LiveAppLineNode"],function(h,e,g){return h(e,{constructor:function(){},getApplicableNodeClass:function(){return g},
isConvertibleTo:function(d){return!1},isConvertibleFrom:function(d){return!1}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/nodes/LiveAppLineNodeInsertionRulesProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LiveAppLineNodeInsertionRules"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/nodes/LiveAppLineNodeInsertionRules":function(){define("dojo/_base/declare MW/rtc/model/Position MW/rtc/nodes/inner/LineNode MW/rtc/plugins/insertionrules/BaseInsertionRules MW/rtc/plugins/insertionrules/InsertionRuleConstants ./LiveAppLineNode".split(" "),
function(h,e,g,d,c,b){return h(d,{_compatibleParents:[],constructor:function(){},getApplicableNodeClass:function(){return b},getTopLevelInsertionInstruction:function(a,b,d,e,g){return g.isAtLeftEdge()?{insertInRoot:{relationToPosition:c.RELATION.BEFORE}}:g.isAtRightEdge()?{insertInRoot:{relationToPosition:c.RELATION.AFTER}}:{insertInRoot:{insertionPosition:g}}},destroy:function(){}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/view/LiveAppInlineNodeCoordinateConverterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./LiveAppInlineNodeCoordinateConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/view/LiveAppInlineNodeCoordinateConverter":function(){define("dojo/_base/declare MW/rtc/model/Position MW/rtc/view/coordinateconverter/CoordinateConverterUtilities MW/rtc/view/coordinateconverter/base/OpaqueBoxCoordinateConverter MW/rtc/plugins/language/matlab/codingui/liveapps/nodes/LiveAppInlineNode MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppUtilities".split(" "),
function(h,e,g,d,c,b){return h(d,{constructor:function(){},getApplicableNodeClass:function(){return c},getPositionFromCoordinate:function(a,b){var c=this._getClientRects(b)[0];if(!g.isCoordinateWithinRect(a,c))return null;var d=0;a.x>=c.left+0.95*c.width&&(d=1);return new e(b,d)},getCoordinateFromPosition:function(a){var c=this.inherited(arguments),d=b.getLiveAppNode(a);if(b.isLiveAppInlineNode(d))return c;d=d.getWidget().domNode.getBoundingClientRect();c.height=20;1===a.getOffset()?(c.y+=d.height-
c.height-1,c.x+=1,c.pageX+=1):(c.x-=1,c.pageX-=1);return c}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/view/LiveAppInlineNodeLayouterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LiveAppInlineNodeLayouter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.liveapps.viewmodel"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/view/LiveAppInlineNodeLayouter":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppUtilities","MW/rtc/plugins/language/matlab/codingui/liveapps/nodes/LiveAppInlineNode","MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter"],function(h,e,g,d){return h(d,{constructor:function(c){this._liveAppViewModel=c},getApplicableNodeClass:function(){return g},canLayoutIndividually:function(c){return!e.isLiveAppLineNode(c.parent)},layout:function(c,b){var a=c.layoutInto(b,"div");return a=this._liveAppViewModel.createInlineDomNode(b,
a)}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/view/LiveAppLineNodeCoordinateConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LiveAppLineNodeCoordinateConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/view/LiveAppLineNodeCoordinateConverter":function(){define(["dojo/_base/declare","MW/rtc/view/coordinateconverter/CoordinateConverterUtilities",
"MW/rtc/view/coordinateconverter/base/BaseCoordinateConverter","MW/rtc/plugins/language/matlab/codingui/liveapps/LiveAppUtilities","MW/rtc/plugins/language/matlab/codingui/liveapps/nodes/LiveAppLineNode"],function(h,e,g,d,c){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return c},_getSubClientRects:function(b,a,c){var g=b.startNode(),h=[c(g)],g=h[0][0];if(!g||e.isCoordinateRightOfRect(a,g))return this.inherited(arguments);d.getGeneratedCodeLineNodes(b).forEach(function(a){h.push(c(a))});
return Array.prototype.concat.apply([],h)}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/view/LiveAppLineNodeLayouterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LiveAppLineNodeLayouter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.liveapps.viewmodel"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/language/matlab/codingui/liveapps/view/LiveAppLineNodeLayouter":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/language/matlab/codingui/liveapps/nodes/LiveAppLineNode","MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter"],function(h,e,g){return h(g,{constructor:function(d){this._liveAppViewModel=d},getApplicableNodeClass:function(){return e},layout:function(d,c){var b=d.layoutInto(c,"div");return b=this._liveAppViewModel.createLineDomNode(c,b)},refresh:function(d,c){c.getWidget().updateView();return null},place:function(d,c){d.getWidget().addCodeLines(c)}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlActionHandlerProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./LiveControlActionHandler"],function(h,e,g){return h(e,{requires:function(){return{createInstance:"rtc.internaldocument rtc.cursorcontroller rtc.actionservice matlab.tokens rtc.livecontrols.contextmanager rtc.livecontrols.toolstrip rtc.livecontrols.widgethandler rtc.document".split(" ")}},createInstance:function(d,c,b,a,e,h,l,n,p){return new g(d,c,b,a,e,h,l,n,p)}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlActionHandler":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/keys MW/rtc/abstract/AbstractPlugin MW/rtc/model/CodeUtilities MW/rtc/model/SelectionUtilities MW/rtc/plugins/language/matlab/codingui/livecontrols/nodes/LiveControlNode MW/rtc/plugins/language/matlab/codingui/livecontrols/utilities/LiveControlUtilities MW/rtc/plugins/language/matlab/codingui/livecontrols/utilities/LiveControlWidgetUtilities".split(" "),
function(h,e,g,d,c,b,a,f,k,l){return h(c,{_EMPTY_WIDGET_VALUE:"",constructor:function(a,b,c,f,h,k,l,u){this._internalDocument=a;this._cursor=b.getCursors()[0];this._tokenService=f;this._document=u;this._contextManager=h;this._liveControlToolstripActions=k;this._widgetHandler=l;a=[{id:"rtc_live_control_delete",enabled:!0,key:"delete",callback:e.hitch(this,"_handleNavigation",{keyCode:d.DELETE},!0)},{id:"rtc_live_control_tab",enabled:!0,key:"tab",callback:e.hitch(this,"_handleNavigation",{keyCode:d.TAB},
!0)},{id:"rtc_live_control_right",enabled:!0,key:"right",callback:e.hitch(this,"_handleNavigation",{keyCode:d.RIGHT_ARROW},!0)},{id:"rtc_live_control_left",enabled:!0,key:"left",callback:e.hitch(this,"_handleNavigation",{keyCode:d.LEFT_ARROW})},{id:"rtc_live_control_backspace",enabled:!0,key:"backspace",callback:e.hitch(this,"_handleNavigation",{keyCode:d.BACKSPACE})}];c.loadActions(a);this.own(g.after(this._cursor,"onChange",e.hitch(this,"_handleCursorChange")));this.own(g.after(this._document,"onPreDeletion",
e.hitch(this,"_handlePreDeletion"),!0));this.own(g.after(this._tokenService,"onUpdate",e.hitch(this,"_handleTokenizerUpdate"),!0));this.own(g.after(this._internalDocument,"onDocumentReset",e.hitch(this,"_updateControlState")));this.own(g.after(this._internalDocument,"readOnlyChanged",e.hitch(this,"_updateControlState")))},_handleNavigation:function(a,b){if(this._cursor.hasSelection())return!1;var c=this._cursor.getNode(),d=this._cursor.position;return b?this._navigateToControlAfterCursor(a,c,d):this._navigateToControlBeforeCursor(a,
c,d)},_navigateToControlAfterCursor:function(a,b,c){b=k.getControlAfterCursor(b,c);return this._sendEventToEnabledWidget(b,a)},_navigateToControlBeforeCursor:function(a,b,c){b=k.getControlBeforeCursor(b,c);return this._sendEventToEnabledWidget(b,a)},_sendEventToEnabledWidget:function(a,b){if(!a)return!1;var c=a.widget;return l.getDisabled(c)?this._handleForDisabledWidget(a,b.keyCode):c.navigate(b)},_handleForDisabledWidget:function(a,b){return b===d.BACKSPACE||b===d.DELETE?(this._widgetHandler.replaceControlWithText(a),
!0):!1},_handleCursorChange:function(){if(this._internalDocument.isReadOnly()||this._cursor.isCursorReadOnly()||this._isCursorInCommentedCode())this._resetModelAndUpdateActions(!1);else{var a=this._cursor.getSelection();if(a){var b=this._cursor.getSelectionLineColumn();b.start.line!==b.end.line?this._resetModelAndUpdateActions(!1):k.isLiveControlNodeInRange(a)?this._resetModelAndUpdateActions(!1):(a=this._parseSelection(),this._widgetHandler.update(a))}else this._resetModelAndUpdateActions(!0)}},
_isCursorInCommentedCode:function(){var a=this._cursor.getLineColumn(),b=a.line,a=a.column,c=this._tokenService.getTokensOnLine(b-1);return k.isCursorInCommentedCode(b,a,c)},_resetModelAndUpdateActions:function(a){this._contextManager.reset();this._liveControlToolstripActions.updateAllActions(a)},_parseSelection:function(){var a=this._cursor.selectedText(),b=k.getWidgetType(a);this._contextManager.createContextAndSetup({selectedText:a});return{text:a,widgetType:b}},_handlePreDeletion:function(){var b=
this._cursor.getSelection();if(b&&!this._internalDocument.isReadOnly()&&(b=a.trimTrailingLineBreak(b),k.isLiveControlNodeInRange(b))){var c=this._cursor.getSelectionLineColumn();k.getLiveControlNodesInRange(b).forEach(function(a){this._replaceNodeWithText(a)},this);b=c.start;c=c.end;this._cursor.setSelectionLineColumn(b.line,b.column,c.line,c.column)}},_replaceNodeWithText:function(a){var b=a.startPosition().getLineColumn(),c=a.getText();this._internalDocument.deleteNode(a);this._document.insertText(c,
b.line,b.column)},_handleTokenizerUpdate:function(a){this._enableDisableControlInLines(a.startLine,a.endLine)},_updateControlState:function(){this._enableDisableControlInLines(0,this._internalDocument.getMaxLineNumber()-1)},_enableDisableControlInLines:function(a,c){for(var d=a;d<=c;d++){var e=this._internalDocument.getLineNode(d);if(e&&b.isCodeContainer(e)){var f=e.children;f&&0!==f.length&&(e.isReadOnly()?k.setDisabledPropertyOfControlInNodes(f,!0):k.enableOrDisableControl(this._tokenService,f))}}}})})},
"MW/rtc/plugins/language/matlab/codingui/livecontrols/utilities/LiveControlUtilities":function(){define("MW/rtc/model/RangeUtilities MW/rtc/plugins/language/matlab/codingui/livecontrols/nodes/LiveControlNode MW/rtc/plugins/language/matlab/codingui/livecontrols/utilities/LiveControlWidgetUtilities MW/rtc/plugins/language/matlab/codingui/livecontrols/WidgetTypes MW/rtc/plugins/language/matlab/codingui/utilities/CodingUIUtilities MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenUtilities".split(" "),
function(h,e,g,d,c,b){return{getControlAfterCursor:function(a,b){return b.isAtLeftEdge()?this._getNodeIfLiveControlNode(a):b.isAtRightEdge()?this._getNodeIfLiveControlNode(a.nextSibling()):null},getControlBeforeCursor:function(a,b){return b.isAtRightEdge()?this._getNodeIfLiveControlNode(a):b.isAtLeftEdge()?this._getNodeIfLiveControlNode(a.previousSibling()):null},_getNodeIfLiveControlNode:function(a){return a instanceof e?a:null},isLiveControlNodeInRange:function(a){return h.isNodeTypeInRange(a,e)},
getLiveControlNodesInRange:function(a){return h.getNodesInRangeOfNodeType(a,e)},isCursorInCommentedCode:function(a,b,c){a=this.getCommentStartColumnOnLine(c);return-1===a?!1:b>a},getCommentStartColumnOnLine:function(a){if(!a)return-1;for(var c=-1,d=0;d<a.length;d++)if(b.isCommentToken(a[d])){c=a[d].getColumn()+1;break}return c},getWidgetType:function(a){return!isNaN(a)&&""!==a.trim()?d.SCALAR:c.isMatlabString(a)?d.STRING:d.NONE},enableOrDisableControl:function(a,b){for(var c=0;c<b.length;c++){var d=
b[c];if(d instanceof e){var h=d.startPosition().getLine()-1,p=d.startPosition().getColumn()-1,d=d.getWidget();(h=a.isInComment(h,p))&&g.setEditMode(d,!1);g.setDisabled(d,h)}}},setDisabledPropertyOfControlInNodes:function(a,b){for(var c=0;c<a.length;c++){var d=a[c];d instanceof e&&(d=d.getWidget(),b&&g.setEditMode(d,!1),g.setDisabled(d,b))}}}})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/utilities/LiveControlWidgetUtilities":function(){define(["MW/rtc/plugins/language/matlab/codingui/livecontrols/ExecutionModelTypes",
"MW/rtc/plugins/language/matlab/codingui/livecontrols/ExecutionOnTypes","MW/rtc/view/ViewMeasurementUtilities"],function(h,e,g){return{_CONTROL_EDIT_MODE_PROPERTY:"editMode",_CONTROL_DATA_PROPERTY:"data",_CONTROL_VALUE_PROPERTY:"value",_CONTROL_DISABLED_PROPERTY:"disabled",_CONTROL_POSITION_PROPERTY:"position",_CONTROL_WIDTH_PROPERTY:"width",_CONTROL_EXECUTE_ON_PROPERTY:"executionOn",_CONTROL_EXECUTION_MODEL_PROPERTY:"executionModel",getEditMode:function(d){return d.get(this._CONTROL_EDIT_MODE_PROPERTY)},
getData:function(d){return d.get(this._CONTROL_DATA_PROPERTY)},getValue:function(d){return d.get(this._CONTROL_VALUE_PROPERTY)},getDisabled:function(d){return d.get(this._CONTROL_DISABLED_PROPERTY)},getExecuteOn:function(d){return d.get(this._CONTROL_EXECUTE_ON_PROPERTY)||this._getDefaultValueForExecuteOn(d)},getExecutionModel:function(d){return d.get(this._CONTROL_EXECUTION_MODEL_PROPERTY)||h.CURRENT_SECTION},getWidth:function(d){return d.get(this._CONTROL_WIDTH_PROPERTY)},setEditMode:function(d,
c){d.set(this._CONTROL_EDIT_MODE_PROPERTY,c)},setDisabled:function(d,c){d.set(this._CONTROL_DISABLED_PROPERTY,c)},setPosition:function(d,c){d.set(this._CONTROL_POSITION_PROPERTY,c)},setWidth:function(d,c){d.set(this._CONTROL_WIDTH_PROPERTY,c)},_getDefaultValueForExecuteOn:function(d){if("ComboBox"===d.type)return e.VALUE_CHANGED;if("Slider"===d.type)return e.VALUE_CHANGING},resizeWidgetWidth:function(d){var c=g.getNumericCharacterWidth(),b=this.getWidth(d),a=b/c;0!==a%1&&(c*=Math.round(a),b!==c&&
this.setWidth(d,c))}}})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/ExecutionModelTypes":function(){define({CURRENT_SECTION:"Section",CURRENT_SECTION_TO_END:"SectionToEnd",ALL:"AllSections",NOTHING:"Nothing"})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/ExecutionOnTypes":function(){define({VALUE_CHANGING:"ValueChanging",VALUE_CHANGED:"ValueChanged"})},"MW/rtc/view/ViewMeasurementUtilities":function(){define(["dojo/dom-construct"],function(h){return{_singleCharWidth:null,_TEXT:"1234567890",
_WRAPPER_CLASS:"characterWidthTextWrapper",_TEXT_NODE_CLASS:"characterWidthTextNode",_cache:{},getNumericCharacterWidth:function(){if(null===this._singleCharWidth){var e=h.create("span",{className:"rtePane"}),g=h.create("span",{innerHTML:this._TEXT});h.place(g,e);h.place(e,document.body);this._singleCharWidth=g.getBoundingClientRect().width/this._TEXT.length;h.destroy(e)}return this._singleCharWidth},getNumericCharacterWidthForFontFamilyAndSize:function(e,g){if(!this._cache[e]||!this._cache[e][g]){this._cache[e]=
this._cache[e]||{};var d=h.create("span",{className:this._WRAPPER_CLASS});d.style.position="fixed";d.style.visibility="hidden";d.style.whiteSpace="nowrap";var c=h.create("span",{innerHTML:this._TEXT,className:this._TEXT_NODE_CLASS},d);c.style.fontFamily=e;c.style.fontSize=g+"px";h.place(d,document.body);this._cache[e][g]=c.getBoundingClientRect().width/this._TEXT.length;h.destroy(d)}return this._cache[e][g]}}})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/WidgetTypes":function(){define({SCALAR:"scalar",
NONE:"none",STRING:"string",SLIDER:"slider",COMBO_BOX:"comboBox"})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlContextManagerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LiveControlContextManager"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlContextManager":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin","./LiveControlContext"],function(h,e,g,d,c){return h(d,{constructor:function(){this._context=null},createContextAndSetup:function(b){this._cleanupOldContext();b=new c(b);this._setContext(b)},_cleanupOldContext:function(){this._context=null},_setContext:function(b){this._context=b},getContext:function(){return this._context},reset:function(){this._cleanupOldContext()},destroy:function(){this._cleanupOldContext()}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlContext":function(){define(["dojo/_base/declare"],
function(h){return h(null,{constructor:function(e){this.selectedText=e.selectedText}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlContextMenuProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LiveControlContextMenu"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.livecontrols.viewmodel","rtc.actionservice","rtc.cursorcontroller"]}},createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlContextMenu":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/i18n!l10n/nls/actions MW/rtc/abstract/AbstractPlugin MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlActions MW/rtc/plugins/language/matlab/codingui/livecontrols/utilities/LiveControlUtilities MW/rtc/plugins/language/matlab/codingui/livecontrols/utilities/LiveControlWidgetUtilities".split(" "),
function(h,e,g,d,c,b,a,f){return h(c,{constructor:function(a,c,f){this._cursor=f.getCursors()[0];this._actionService=c;this._cursorController=f;this.own(g.after(this._cursor,"onChange",e.hitch(this,"_handleCursorChange")));a=[{id:b.CONFIGURE_CONTROL,enabled:!1,contextMenuGroup:"RichText",callback:e.hitch(this,"_handleConfigureControl"),text:d.configureControl}];c.loadActions(a);this._rightClickedWidget=null},_handleCursorChange:function(){var b=this._cursor.getNode(),c=this._cursor.position,d=a.getControlBeforeCursor(b,
c),b=a.getControlAfterCursor(b,c);(d=d?d:b)?(this._rightClickedWidget=d.widget,d=!f.getDisabled(this._rightClickedWidget),this._updateConfigureControlAction(d)):(this._updateConfigureControlAction(!1),this._rightClickedWidget=null)},_handleConfigureControl:function(){this._rightClickedWidget&&f.setEditMode(this._rightClickedWidget,!0)},_updateConfigureControlAction:function(a){this._actionService.updateAction(b.CONFIGURE_CONTROL,{enabled:a})}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlActions":function(){define([],
function(){return{CONFIGURE_CONTROL:"rtc_configure_live_control",NUMERIC_SLIDER_INSERT_ACTION:"rtc_insert_slider",COMBO_BOX_INSERT_ACTION:"rtc_insert_combo_box"}})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlExecutionProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LiveControlExecution"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.code.sections.model","rtc.embeddedoutputs.viewservice"]}},createInstance:function(d,
c){return new g(d,c)}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlExecution":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin","MW/rtc/plugins/language/matlab/codingui/livecontrols/ExecutionModelTypes","MW/rtc/plugins/language/matlab/codingui/livecontrols/ExecutionOnTypes"],function(h,e,g,d){return h(e,{constructor:function(c,b){this._sectionModel=c;this._viewService=b},execute:function(c,b,a){c=this._sectionModel.getSectionNumberForLine(c);var e=0;
a===d.VALUE_CHANGING&&(e=1E3);switch(b){case g.CURRENT_SECTION:this._viewService.executeSectionWithVisualDelay(c,!1,!0,e,!0);break;case g.CURRENT_SECTION_TO_END:this._viewService.executeSectionWithVisualDelay(c,!0,!0,e,!0);break;case g.ALL:this._viewService.executeAllSectionsWithVisualDelay(!0,e,!0)}}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlInsertionProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LiveControlInsertion"],function(h,
e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.cursorcontroller","rtc.actionservice","rtc.livecontrols.contextmanager"]}},createInstance:function(d,c,b,a,e){return new g(d,c,b,a,e)}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlInsertion":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/model/events/DocumentEvent MW/rtc/plugins/language/matlab/codingui/livecontrols/nodes/LiveControlNode MW/rtc/plugins/language/matlab/codingui/livecontrols/utilities/LiveControlWidgetUtilities MW/rtc/plugins/language/matlab/codingui/livecontrols/WidgetDetails".split(" "),
function(h,e,g,d,c,b,a,f){return h(d,{constructor:function(a,b,c,d,f){this._internalDocument=a;this._document=b;this._cursor=c.getCursors()[0];this._actionService=d;this._contextManager=f;this._loadActions();this.own(g.after(this._internalDocument,"onDocumentReset",e.hitch(this,"_handleDocumentReset")))},_loadActions:function(){var a=[{id:"rtc_insert_live_control",enabled:!1,callback:e.hitch(this,function(){})}],b;for(b in f){var c=f[b],d=c.actionId,c={id:d,enabled:!0,callback:e.hitch(this,"_insertLiveControlNode",
{type:b,id:d,value:c.defaultValue}),key:c.key};a.push(c)}this._actionService.loadActions(a)},_handleDocumentReset:function(){this._actionService.updateAction("rtc_insert_live_control",{enabled:!0})},_insertLiveControlNode:function(d){if(!this._actionService.getAction(d.id).enabled)return!1;var e=this._document.startBlockEdit();d=this._createNodeData(d);d=new b(d);var f=this._internalDocument.insertAtPosition(d,this._cursor.position),g=this._cursor.position.getLineColumn().line-1,h=d.startPosition().getLineColumn().line-
1;e.appendUndoEvents([c.create(g,h)]);f=f.events;e.appendRedoEvents(f);this._internalDocument.emitDocumentEvents(f);f=d.endPosition().getLineColumn();this._cursor.setLineColumn(f.line,f.column);this._document.endBlockEdit(e);a.setEditMode(d.widget,!0);return!0},_createNodeData:function(a){var b=a.type;a=a.value;var c=this._contextManager.getContext();c&&(a=c.selectedText.trim(),this._document.deleteTextAtCurrentPosition());return{context:{type:b,data:{value:a}}}}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/WidgetDetails":function(){define(["MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlActions",
"MW/rtc/plugins/language/matlab/codingui/livecontrols/WidgetTypes"],function(h,e){var g={};g[e.SLIDER]={actionId:h.NUMERIC_SLIDER_INSERT_ACTION,defaultValue:0,key:"ctrl_shift_s"};g[e.COMBO_BOX]={actionId:h.COMBO_BOX_INSERT_ACTION,defaultValue:"",key:"ctrl_shift_c"};return g})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlToolstripActionsProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LiveControlToolstripActions"],function(h,e,g){return h(e,
{requires:function(){return{createInstance:["rtc.actionservice"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlToolstripActions":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin","MW/rtc/plugins/language/matlab/codingui/livecontrols/WidgetDetails"],function(h,e,g,d,c){return h(d,{constructor:function(b){this._actionService=b},updateActions:function(b){for(var a in c){var d=
c[a],e=!1;-1<b.indexOf(a)&&(e=!0);this._actionService.updateAction(d.actionId,{enabled:e})}},updateAllActions:function(b){for(var a in c)this._actionService.updateAction(c[a].actionId,{enabled:b})}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlWidgetHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LiveControlWidgetHandler"],function(h,e,g){return h(e,{requires:function(){return{createInstance:"rtc.livecontrols.viewmodel rtc.view rtc.internaldocument rtc.document rtc.livecontrols.execution rtc.livecontrols.toolstrip rtc.cursorcontroller rtc.code.sections.stale.model".split(" ")}},
createInstance:function(d,c,b,a,e,h,l,n){return new g(d,c,b,a,e,h,l,n)}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlWidgetHandler":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/keys MW/rtc/abstract/AbstractPlugin MW/rtc/model/DocumentConstants MW/rtc/model/events/InsertTextEvent MW/rtc/model/events/DeletionEvent MW/rtc/model/events/DocumentEvent MW/rtc/view/ViewEventUtilities MW/rtc/plugins/language/matlab/codingui/livecontrols/utilities/LiveControlWidgetHandlerUtilities MW/rtc/plugins/language/matlab/codingui/livecontrols/utilities/LiveControlWidgetUtilities MW/rtc/plugins/language/matlab/codingui/livecontrols/ValidWidgetsManifest".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m){return h(c,{constructor:function(a,b,c,d,f,h,k,l){this._liveControlViewModel=a;this._view=b;this._cursor=k.getCursors()[0];this._internalDocument=c;this._document=d;this._liveControlExecution=f;this._liveControlToolstripActions=h;this._cursorController=k;this._staleSectionModel=l;this.own(g.after(a,"onKeyEvents",e.hitch(this,"_handleKeyEvents"),!0));this.own(g.after(a,"onControlChange",e.hitch(this,"_handleControlChange"),!0));this.own(g.after(a,"onEditModeStart",
e.hitch(this,"_handleEditModeStart"),!0));this.own(g.after(a,"onEditModeEnd",e.hitch(this,"_handleEditModeEnd"),!0));this.own(g.after(a,"onFocus",e.hitch(this,"_handleFocus"),!0));this.own(g.after(a,"onWidgetResize",e.hitch(this,"_handleWidgetResize"),!0));this.own(g.after(b,"onViewUpdated",e.hitch(this,"_performBatchResize")));this.own(g.after(c,"onDocumentReset",e.hitch(this,"_performBatchResize")));this._windowBlur=!1;this.own(g.after(window,"onfocus",e.hitch(this,"_handleWindowFocus")));this.own(g.after(window,
"onblur",e.hitch(this,"_handleWindowBlur")))},_handleWindowFocus:function(){this._windowBlur=!1},_handleWindowBlur:function(){this._windowBlur=!0},_handleKeyEvents:function(a,c){if(a)switch(a.mwEventData.keyCode){case d.LEFT_ARROW:var e=c.startPosition();this._cursor.setPosition(e);break;case d.RIGHT_ARROW:case d.TAB:case d.ENTER:e=c.endPosition();this._cursor.setPosition(e);break;case d.BACKSPACE:this.replaceControlWithText(c,b.BACKWARD_DELETE);break;case d.DELETE:this.replaceControlWithText(c,b.FORWARD_DELETE)}},
replaceControlWithText:function(a,c){var d=this._document.startBlockEdit(),e=a.startPosition().getLineColumn(),g=a.endPosition().getLineColumn(),h=a.getText();this._document.replaceText(h,e.line,e.column,g.line,g.column);g=this._cursor.getLineColumn().line;g=[f.create(g-1,g-1,0)];c===b.BACKWARD_DELETE?this._cursor.setLineColumn(e.line,e.column+h.length):c===b.FORWARD_DELETE&&this._cursor.setLineColumn(e.line,e.column);d.appendUndoEvents(g);d.appendRedoEvents(g);this._internalDocument.emitDocumentEvents(g);
this._document.endBlockEdit(d)},update:function(a){this._liveControlToolstripActions.updateActions(m[a.widgetType])},_handleControlChange:function(a,b,c){this._updateNodeBasedOnEvent(a,c);var d=a.getWidget(),e=p.getExecuteOn(d);n.alreadyExecuted(e,c,b.mwEventData)?this._handleStalenessAndEmitDocEvent(a,!0):(b=n.shouldExecute(e,c),this._handleStalenessAndEmitDocEvent(a,b),c||d.focus(),b&&(c=p.getExecutionModel(d),a=a.startPosition().getLine()-1,this._liveControlExecution.execute(a,c,e)))},_updateNodeBasedOnEvent:function(a,
b){var c=a.getWidget(),c=p.getValue(c).toString();b?this._updateNodeIntermediately(a,c):this._updateNodeAndRecord(a,c)},_handleStalenessAndEmitDocEvent:function(a,b){var c=this._staleSectionModel.getEnablement();b&&this._staleSectionModel.setEnablement(!1);var d=a.startPosition().getLine()-1,d=[k.create(d,d)];this._internalDocument.emitDocumentEvents(d);this._staleSectionModel.setEnablement(c)},_handleEditModeStart:function(a){this._cursorController.clearSelection();n.hasSpaceBelow(this._view,a)?
p.setPosition(a.widget,"top"):p.setPosition(a.widget,"bottom")},_handleEditModeEnd:function(a){var b=a.getWidget(),b=p.getValue(b).toString();""===b?this._deleteNode(a):this._updateNode(a,b);this._view.onViewUpdated([l.createEvent(l.EVENTS.renderUpdate)]);this._windowBlur||this._cursor.show()},_deleteNode:function(a){var b=a.startPosition().getLineColumn().line-1,c=this._document.startEdit(n.getUndoRedoBlockType(a));this._internalDocument.deleteNode(a);a.widget.destroy();a.widget=null;a=[f.create(b,
b,0)];c.appendUndoEvents(a);c.appendRedoEvents(a);this._document.endEdit(c);this._internalDocument.emitDocumentEvents(a)},_updateNode:function(a,b){var c=this._updateNodeAndRecord(a,b);this._internalDocument.emitDocumentEvents(c)},_updateNodeIntermediately:function(a,b){a.intermediateEvalText=b},_updateNodeAndRecord:function(b,c){if(!n.shouldUpdate(b,c))return[];var d=b.getText(),e=b.startPosition(),g=e.getLine()-1,h=e.getColumn()-1,l=this._document.startEdit(n.getUndoRedoBlockType(b)),p=[k.create(g,
g)];if(c!==d){this._internalDocument.updateTextInNode(b,c,0,d.length);var m=[f.create(g,g,h),a.create(g,g,e,d)],B=[a.create(g,g,e,c),f.create(g,g,h)]}this._internalDocument.changeNodeAttributes(b,{context:n.createContextFromWidget(b)});b.intermediateEvalText=null;l.appendUndoEvents(m||p);l.appendRedoEvents(B||p);this._document.endEdit(l);return B||p},_handleFocus:function(a){this._cursorController.clearSelection();this._cursor.setPosition(a.endPosition())},_handleWidgetResize:function(a){p.resizeWidgetWidth(a)},
_performBatchResize:function(){this._liveControlViewModel.getNodesToResize().forEach(function(a){a=a.getWidget();this._handleWidgetResize(a)},this);this._liveControlViewModel.clearNodesToResizeQueue()}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/utilities/LiveControlWidgetHandlerUtilities":function(){define(["MW/rtc/plugins/language/matlab/codingui/livecontrols/ExecutionOnTypes","MW/rtc/plugins/language/matlab/codingui/livecontrols/utilities/LiveControlWidgetUtilities","MW/rtc/plugins/undoredo/EditBlockConstants"],
function(h,e,g){return{_BOTTOM_MAX_HEIGHT:100,_BOTTOM_OFFSET:5,createContextFromWidget:function(d){return{type:d.getType(),data:e.getData(d.getWidget())}},shouldUpdate:function(d,c){if(d.getText()!==c)return!0;var b=this.createContextFromWidget(d);return!d.isContextEqualTo(b)?!0:!1},hasSpaceBelow:function(d,c){var b=d.getCoordinateForPosition(c.startPosition()),a=d.getDomtarget().getBoundingClientRect();return this._getTopYCoordinate(d,b,a)+this._BOTTOM_MAX_HEIGHT>a.height},_getTopYCoordinate:function(d,
c,b){b=b.top;d=d.getDomTargetPosition().scrollTop;return c.y+b-d},getUndoRedoBlockType:function(d){return" "===d.getText()?g.AUTO:null},shouldExecute:function(d,c){return!(c&&d===h.VALUE_CHANGED)},alreadyExecuted:function(d,c,b){return!c&&b.oldValue===b.newValue&&d===h.VALUE_CHANGING}}})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/ValidWidgetsManifest":function(){define(["MW/rtc/plugins/language/matlab/codingui/livecontrols/WidgetTypes"],function(h){var e={};e[h.SCALAR]=[h.SLIDER,h.COMBO_BOX];
e[h.NONE]=[h.COMBO_BOX];e[h.STRING]=[h.COMBO_BOX];return e})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/export/LiveControl2HTMLProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/language/matlab/codingui/livecontrols/export/LiveControl2HTML"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/export/LiveControl2HTML":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/export/NodeExporterInterface","MW/rtc/plugins/language/matlab/codingui/livecontrols/nodes/LiveControlNode"],function(h,e,g){return h([e],{constructor:function(){},getApplicableNodeClass:function(){return g},visit:function(d,c,b,a,e){c=c.box.getElementsByClassName("liveControlTextView")[0];d.addToBody(c.innerHTML);return!0}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/nodes/LiveControlNodeContentConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"./LiveControlNodeContentConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/nodes/LiveControlNodeContentConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/contentconverter/base/LeafNodeContentConverter","MW/rtc/plugins/language/matlab/codingui/livecontrols/nodes/LiveControlNode"],function(h,e,g){return h(e,{getApplicableNodeClass:function(){return g}})})},
"MW/rtc/plugins/language/matlab/codingui/livecontrols/nodes/LiveControlNodeExecutableCodeConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LiveControlNodeExecutableCodeConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/nodes/LiveControlNodeExecutableCodeConverter":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/base/AbstractExecutableCodeConverter",
"MW/rtc/plugins/language/matlab/codingui/livecontrols/nodes/LiveControlNode"],function(h,e,g){return h(e,{constructor:function(){},getApplicableNodeClass:function(){return g},getEvalTextFromNode:function(d){return d.intermediateEvalText||d.text}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/view/converters/LiveControlCoordinateConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LiveControlCoordinateConverter"],function(h,e,g){return h(e,
{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/view/converters/LiveControlCoordinateConverter":function(){define(["dojo/_base/declare","MW/rtc/model/Position","MW/rtc/plugins/language/matlab/codingui/livecontrols/nodes/LiveControlNode","MW/rtc/view/coordinateconverter/base/OpaqueBoxCoordinateConverter","MW/rtc/view/coordinateconverter/CoordinateConverterUtilities"],function(h,e,g,d,c){return h(d,{BOUNDARY_OFFSET:1,
getApplicableNodeClass:function(){return g},getCoordinateFromPosition:function(b){var a=this.inherited(arguments),c=b.getOffset();c===b.getNode().maxOffset()?(a.x+=this.BOUNDARY_OFFSET,a.pageX+=this.BOUNDARY_OFFSET):0===c&&(a.x-=this.BOUNDARY_OFFSET,a.pageX-=this.BOUNDARY_OFFSET);return a},getPositionFromCoordinate:function(b,a){var d=this._getClientRects(a)[0];if(!c.isCoordinateWithinRect(b,d))return null;var g=0;b.x>=d.left+d.width/2&&(g=a.maxOffset());return new e(a,g)}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/view/LiveControlViewModelProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./LiveControlViewModel"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.view.decoration.viewmodel"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/view/LiveControlViewModel":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/aspect dojo/on MW/rtc/abstract/AbstractPlugin MW/rtc/plugins/language/matlab/codingui/livecontrols/utilities/LiveControlWidgetUtilities MW/rtc/plugins/language/matlab/codingui/livecontrols/manifest MW/rtc/view/decoration/DecorationUtilities".split(" "),
function(h,e,g,d,c,b,a,f,k){return h(b,{_LIVE_CONTROL_INNER_NODE:"liveControlInnerNode",_LIVE_CONTROL_DIV:"liveControlDiv",_LIVE_CONTROL_TEXT_VIEW:"liveControlTextView",constructor:function(a,b){this._internalDocument=a;this._decorationViewModel=b;this._nodesToBeResized=[]},createLiveControl:function(a){var b=this._createWrapperDomNode(),c=this._createWidgetView(a,b);b.appendChild(c);c=this._createTextView(a);b.appendChild(c);-1===this._nodesToBeResized.indexOf(a)&&this._nodesToBeResized.push(a);
return b},updateTextView:function(a,b){var c=this._createTextView(a),d=b.querySelector("."+this._LIVE_CONTROL_TEXT_VIEW);d.parentNode.replaceChild(c,d)},_createWrapperDomNode:function(){var a=g.create("div",{"class":this._LIVE_CONTROL_INNER_NODE});c(a,"pointerdown, mousedown",e.hitch(this,function(a){a.stopPropagation()}));return a},_createTextView:function(a){var b=a.getText(),c=g.create("span");a=this._decorationViewModel.getDecoration(a);b=k.createViewForTextNode(b,a,c);c=g.create("div",{"class":this._LIVE_CONTROL_TEXT_VIEW});
c.appendChild(b);return c},_createWidgetView:function(a){var b=g.create("div",{"class":this._LIVE_CONTROL_DIV}),c=a.widget;c?(!a.intermediateEvalText&&c.set("data",a.getContextData()),c.placeAt(b)):(c=this._createAndSetWidget(a),c.placeAt(b),c.startup());return b},_createAndSetWidget:function(b){var c=new (f[b.getType()])({data:b.getContextData()});b.setWidget(c);b.setContextData(a.getData(c));this._attachListenersOnWidget(b);return c},_attachListenersOnWidget:function(a){var b=a.widget;b.on("change",
e.hitch(this,function(b){this._handleChangeEvent(a,b)}));b.on("changing",e.hitch(this,function(b){this._handleChangingEvent(a,b)}));b.on("keyuponwidgets",e.hitch(this,function(b){this.onKeyEvents(b,a)}));b.watch("editMode",e.hitch(this,function(){this._handleEditModeChange(a)}));b.on("focusin",e.hitch(this,function(){this.onFocus(a)}));b.on("sizechange",e.hitch(this,function(){this.onWidgetResize(b)}))},_handleChangeEvent:function(a,b){this.onControlChange(a,b,!1)},_handleChangingEvent:function(a,
b){this.onControlChange(a,b,!0)},_handleEditModeChange:function(b){if(a.getEditMode(b.widget))this.onEditModeStart(b);else this.onEditModeEnd(b)},getNodesToResize:function(){return this._nodesToBeResized},clearNodesToResizeQueue:function(){this._nodesToBeResized=[]},onControlChange:function(a,b,c){},onEditModeStart:function(a){},onEditModeEnd:function(a){},onKeyEvents:function(a,b){},onFocus:function(a){},onWidgetResize:function(a){}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/manifest":function(){define(["MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/LiveControlSlider",
"MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/LiveControlComboBox","MW/rtc/plugins/language/matlab/codingui/livecontrols/WidgetTypes"],function(h,e,g){var d={};d[g.SLIDER]=h;d[g.COMBO_BOX]=e;return d})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/LiveControlSlider":function(){define("dojo/_base/declare dojo/keys dijit/_WidgetBase dijit/registry mw-form/TextField mw-event-utils/doubleClickHandler MW/rtc/plugins/language/matlab/codingui/widgets/WidgetsUtility MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/HorizontalSlider MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/SliderWidgetUtility MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/mixins/EditableMixin MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/mixins/DataMixin MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/mixins/DisabledMixin MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/mixins/PositionMixin dojo/i18n!l10n/nls/liveControls".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q){h=h([g,n,p,l,m],{baseClass:"mwLiveControlSlider",trackWidth:150,type:"Slider",value:0,dataProperties:["minimum","maximum","value","step"],constructor:function(){this.slider=new f;this.own(this.slider)},buildRendering:function(){this.inherited(arguments);this.domNode.setAttribute("tabindex","-1");this.domNode.setAttribute("data-focus","temporary");this.valueContainer=a.buildNode("div",{className:"valueContainer",parent:this.domNode},"mwLiveControlSlider");this.valueNode=
a.buildNode("div",{className:"value",parent:this.valueContainer},"mwLiveControlSlider");this.widgetContainer=a.buildNode("div",{className:"mwSliderContainer",parent:this.domNode},"mwLiveControlSlider");this.minLabel=a.buildNode("span",{className:"minLabel",parent:this.widgetContainer},"mwLiveControlSlider");this.maxLabel=a.buildNode("span",{className:"maxLabel",parent:this.widgetContainer},"mwLiveControlSlider");this.widgetContainer.appendChild(this.slider.domNode);this.editorContainer=a.buildNode("div",
{className:"mwSliderEditorContainer",parent:this.widgetContainer},"mwLiveControlSlider")},_setWidthAttr:function(a){var b=this.valueContainer.getBoundingClientRect().width;this.set("trackWidth",a-b-8);this.domNode.style.width=a+"px";this._set("width",a)},_setTrackWidthAttr:function(a){this.slider.set("width",a);this._set("trackWidth",a);this.emit("sizechange")},_getWidthAttr:function(){var a=this.get("trackWidth"),b=this.valueContainer.getBoundingClientRect().width;return a+b+8},_setDefaultLimits:function(){var a=
this.get("value");if(void 0===this.get("maximum")){var b=a?Math.max(0,2*a):100;this.set("maximum",b)}void 0===this.get("minimum")&&(a=a?Math.min(0,2*a):-100,this.set("minimum",a))},_setValueAttr:function(a){this.slider.set("value",a);this._set("value",a);this.valueNode.textContent=a;this._resizeValueNode()},_setMinimumAttr:function(a){this.slider.set("minimum",a);this.minLabel.textContent=a;this._set("minimum",a);this._resizeValueNode()},_setMaximumAttr:function(a){this.slider.set("maximum",a);this.maxLabel.textContent=
a;this._set("maximum",a);this._resizeValueNode()},_setStepAttr:function(a){this.slider.set("step",a);this._set("step",a)},_getStepAttr:function(){return this.slider.get("step")?this.slider.get("step"):this.slider.get("defaultStep")},_setDisabledAttr:function(a){this.inherited(arguments);this.slider.set("disabled",a)},postCreate:function(){this.inherited(arguments);this.set("value",this.value);this._setDefaultLimits();this.domNode.addEventListener("focus",this.focus.bind(this));this.slider.focusNode.addEventListener("blur",
this._handleSliderBlur.bind(this));this.slider.focusNode.addEventListener("focus",this._handleSliderFocus.bind(this));this._clickCallback=this._handleClick.bind(this);this._doubleClickCallback=this._handleDoubleClick.bind(this);this._doubleClickHandlerCallback=b.createCallback(this._clickCallback,this._doubleClickCallback);this.valueContainer.addEventListener("click",this._doubleClickHandlerCallback);this.widgetContainer.addEventListener("click",this._handleClick.bind(this));this.widgetContainer.addEventListener("dblclick",
this._handleDoubleClick.bind(this));this.domNode.addEventListener("mousedown",this._handleMouseDown.bind(this),!0);this.slider.domNode.addEventListener("mousedragging",this.focus.bind(this),!0);this.slider.domNode.addEventListener("mousedragreleased",this.focus.bind(this),!0);this.slider.domNode.addEventListener("mouseclicked",this.focus.bind(this),!0);this.domNode.addEventListener("keyup",this._handleKeyUp.bind(this));this.domNode.addEventListener("keydown",this._handleKeyDown.bind(this));this.domNode.addEventListener("change",
this._handleChange.bind(this));this._valueWatchHandle=this.slider.watch("value",this._updateValue.bind(this))},focus:function(){this.slider.focusNode.focus()},_handleSliderBlur:function(){this.domNode.classList.remove("mwLiveControlSlider--SliderFocused")},_handleSliderFocus:function(){this.domNode.classList.add("mwLiveControlSlider--SliderFocused")},_handleChange:function(a){var b=d.getEnclosingWidget(a.target);if(b===this.valueEditor||b===this.minEditor||b===this.maxEditor||b===this.stepEditor)a.stopImmediatePropagation(),
a.stopPropagation()},showInPlaceEditor:function(){this._showSliderLimitEditors()},_showSliderValueEditor:function(){this.domNode.classList.add("mwLiveControlSlider--valueEdit");this.valueEditor||this._createEditor("mwValueEditor");this._setValueEditorContent();this._saveEditor=!0},_showSliderLimitEditors:function(){var a=this.valueContainer.getBoundingClientRect().width;this.editorContainer.style.left="-"+a+"px";0===this.editorContainer.children.length&&(this._createEditor("mwMinEditor"),this._createEditor("mwStepEditor"),
this._createEditor("mwMaxEditor"));this._setLimitEditorContents();this._saveEditor=!0},_createEditor:function(b){var d,e,f;if("mwValueEditor"!==b){f=a.buildNode("div",{className:"editorWrapper",parent:this.editorContainer},"mwLiveControlSlider");switch(b){case "mwMinEditor":d=q.sliderMinLabel;this.minEditor=e=new c;break;case "mwStepEditor":d=q.sliderStepLabel;this.stepEditor=e=new c;break;case "mwMaxEditor":d=q.sliderMaxLabel,this.maxEditor=e=new c}a.buildNode("span",{className:"editorLabel",useOwnClass:!0,
text:d,parent:f},"mwLiveControlSlider");d=f;f=40}else d=this.valueContainer,this.valueEditor=e=new c,f=this.valueContainer.getBoundingClientRect().width;e.domNode.classList.add(b);d.appendChild(e.domNode);e.startup();e.set("width",f);this._hookUpEditorListeners(e)},_hookUpEditorListeners:function(a){this.get("editMode")?(this._editorChangeCallback=this._handleInputChanges.bind(this),a.focusNode.addEventListener("change",this._editorChangeCallback)):(this._editorBlurCallback=this._handleValueEditorBlur.bind(this),
a.focusNode.addEventListener("blur",this._editorBlurCallback))},_setValueEditorContent:function(){this.valueEditor.set("value",this.get("value"));this.valueEditor.focusNode.focus()},_setLimitEditorContents:function(){this.minEditor.set("value",this.get("minimum"));this.maxEditor.set("value",this.get("maximum"));this.stepEditor.set("value",this.get("step"));this.minEditor.focusNode.focus()},_handleValueEditorBlur:function(){this.hideInPlaceEditor()},_handleInputChanges:function(){var a=parseFloat(this.stepEditor.focusNode.value),
b=parseFloat(this.minEditor.focusNode.value),c=parseFloat(this.maxEditor.focusNode.value),a=this._computeValidSliderProperties(this.get("value"),b,c,a);isNaN(a.max)||this.maxEditor.set("value",a.max);isNaN(a.min)||this.minEditor.set("value",a.min);isNaN(a.step)||this.stepEditor.set("value",a.step)},hideInPlaceEditor:function(){this._removeEditors();this.domNode.classList.remove("mwLiveControlSlider--valueEdit")},_removeEditors:function(){var a=this._getEditorContentToSave();this._saveEditor&&this._saveSliderChanges(a)},
_getEditorContentToSave:function(){var a=[],b=[];this.get("editMode")?(b.push(this.minEditor),b.push(this.stepEditor),b.push(this.maxEditor)):this.valueEditor&&b.push(this.valueEditor);b&&b.forEach(function(b){var c,d,e={},f=this._validateWidgetTextChanges(b);switch(b){case this.minEditor:c="minimum";d=this.get("minimum");break;case this.stepEditor:c="step";d=this.get("step");break;case this.maxEditor:c="maximum";d=this.get("maximum");break;case this.valueEditor:c="value",d=this.get("value")}f&&(d=
b.focusNode.value);e[c]=d;a.push(e)},this);return a},_validateWidgetTextChanges:function(a){a=a.get("value");return/^[-+]?([0-9]*.?[0-9]+|[0-9]+.?[0-9]*)([eE][-+]?[0-9]+)?$|^$/.test(a)},_saveSliderChanges:function(a){var b,c=this.get("value");if(0!==a.length)if(1===a.length)a=a[0],b=Object.keys(a)[0],b=a[b],b=parseFloat(b),a=this._computeValidSliderProperties(b,this.get("minimum"),this.get("maximum"),this.get("step")),b=a.value,c!==b&&!isNaN(b)&&(this.set("value",b),this.slider._triggerChangeEvent("value",
c,b));else{b=parseFloat(a[0].minimum);var d=parseFloat(a[1].step),e=parseFloat(a[2].maximum);a=this._computeValidSliderProperties(this.get("value"),b,e,d);c!==a.value&&this.set("value",a.value);isNaN(b)||this.set("minimum",a.min);isNaN(d)||this.set("step",a.step);isNaN(e)||this.set("maximum",a.max)}},_computeValidSliderProperties:function(a,b,c,d){var e=Math.abs(c-b);if(c<b){var f=c;c=b;b=f}d=d>e?e:d;d=0>=d?this.get("step"):d;return{value:a<b?b:a>c?c:a,max:c,min:b,step:d}},_handleClick:function(a){this.valueContainer.contains(a.target)&&
!this.domNode.classList.contains("mwLiveControlSlider--valueEdit")&&this._showSliderValueEditor();a.stopPropagation()},_handleDoubleClick:function(a){!this.get("editMode")&&!this.domNode.classList.contains("mwLiveControlSlider--valueEdit")&&(this.set("editMode",!0),a.stopPropagation())},_handleMouseDown:function(a){this.domNode.contains(document.activeElement)||a.stopPropagation();a.target===this.slider.focusNode&&this.slider.focusNode.focus()},_updateValue:function(a,b,c){this._set("value",c);this.valueNode.textContent=
c},_resizeValueNode:function(){var a=this.get("value"),b=this.get("step"),c=k.findSuitablePrecision(b,a),d=this.get("maximum"),e=d?d.toString().length:0,f=0;-1!==b.toString().indexOf(".")&&(f=parseFloat((d-b).toFixed(c)),f=f.toString().length);var g=this.get("minimum"),d=g?g.toString().length:0,h=0;-1!==b.toString().indexOf(".")&&(c=parseFloat((g-b).toFixed(c)),h=c.toString().length);a=Math.max(d,h,e,f,a.toString().length,b.toString().length)+"ch";this.valueContainer.style.width!==a&&(this.emit("sizechange"),
this.valueContainer.style.width=a)},navigate:function(a){var b=document.activeElement,c=!1;switch(a.keyCode){case e.BACKSPACE:b!==this.domNode&&!this.get("editMode")&&(this.focus(),c=!0);break;case e.DELETE:b!==this.domNode&&!this.get("editMode")&&(this.focus(),c=!0);break;case e.LEFT_ARROW:b!==this.domNode&&(this._showSliderValueEditor(),b=document.activeElement,a=b.value.length,b.setSelectionRange(a,a),c=!0);break;case e.RIGHT_ARROW:b!==this.domNode&&(this._showSliderValueEditor(),document.activeElement.setSelectionRange(0,
0),c=!0);break;case e.TAB:b!==this.domNode&&(this.focus(),c=!0)}return c},_handleKeyDown:function(a){a=a.keyCode;var b=document.activeElement;switch(a){case e.LEFT_ARROW:this.domNode.classList.contains("mwLiveControlSlider--valueEdit")&&0===b.selectionStart&&(this.hideInPlaceEditor(),this.emit("restorefocustolastnonrefuseelement"),this.emit("keyuponwidgets",{mwEventData:{keyCode:a}}));break;case e.RIGHT_ARROW:if(this.domNode.classList.contains("mwLiveControlSlider--valueEdit")){var c=this.valueContainer.querySelector(".mwTextField"),
c=d.getEnclosingWidget(c);b.selectionStart===c.focusNode.value.length&&(this.hideInPlaceEditor(),this.emit("restorefocustolastnonrefuseelement"),this.emit("keyuponwidgets",{mwEventData:{keyCode:a}}))}break;case e.TAB:b===this.slider.focusNode?(this.emit("restorefocustolastnonrefuseelement"),this.emit("keyuponwidgets",{mwEventData:{keyCode:a}})):this.maxEditor&&b===this.maxEditor.focusNode&&(this.set("editMode",!1),this.emit("restorefocustolastnonrefuseelement"),this.emit("keyuponwidgets",{mwEventData:{keyCode:a}}));
break;case e.ESCAPE:this._saveEditor=!1;this.domNode.classList.contains("mwLiveControlSlider--valueEdit")?this.hideInPlaceEditor():this.get("editMode")&&this.set("editMode",!1);this.emit("restorefocustolastnonrefuseelement");break;case e.ENTER:this.get("editMode")?this.set("editMode",!1):this.domNode.classList.contains("mwLiveControlSlider--valueEdit")&&this.hideInPlaceEditor();this.emit("keyuponwidgets",{mwEventData:{keyCode:a}});this.emit("restorefocustolastnonrefuseelement");break;case e.BACKSPACE:b===
this.slider.focusNode&&(this.emit("restorefocustolastnonrefuseelement"),this.emit("keyuponwidgets",{mwEventData:{keyCode:a}}));break;case e.DELETE:b===this.slider.focusNode&&(this.emit("restorefocustolastnonrefuseelement"),this.emit("keyuponwidgets",{mwEventData:{keyCode:a}}))}},_handleKeyUp:function(a){a.keyCode===e.TAB&&this.domNode.classList.contains("mwLiveControlSlider--valueEdit")&&(this.hideInPlaceEditor(),this.slider.focusNode.focus())},startup:function(){this.inherited(arguments);this.slider.startup()},
destroy:function(){this._valueWatchHandle.unwatch();this.slider.destroy();this._editorDestroy();this.domNode.removeEventListener("click",this._doubleClickHandlerCallback);this.inherited(arguments)},_editorDestroy:function(){0<this.editorContainer.children.length&&(this.minEditor.focusNode.removeEventListener("change",this._editorChangeCallback),this.maxEditor.focusNode.removeEventListener("change",this._editorChangeCallback),this.stepEditor.focusNode.removeEventListener("change",this._editorChangeCallback),
this.minEditor.destroy(),this.maxEditor.destroy(),this.stepEditor.destroy());this.valueEditor&&(this.valueEditor.focusNode.removeEventListener("blur",this._editorBlurCallback),this.valueEditor.destroy())}});h.BASE_CLASS="mwLiveControlSlider";h.EDIT_MODE_CLASS="mwLiveControlSlider--editMode";h.VALUE_EDIT_CLASS="mwLiveControlSlider--valueEdit";return h})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/HorizontalSlider":function(){define(["dojo/_base/declare","dojo/keys","dijit/_WidgetBase",
"MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/BaseHorizontalSlider","MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/SliderWidgetUtility"],function(h,e,g,d,c){return h([g,d],{discrete:!0,minimum:0,maximum:100,value:0,width:150,defaultStep:1,step:null,constructor:function(){this.minorTicks=[];this.majorTicks=[];this.majorTickLabels="     ".split(" ")},_setWidthAttr:function(b){this.set("outerWidth",b);this._set("width",b)},postCreate:function(){this.inherited(arguments);
this.set("outerHeight",16);this.set("minimum",this.minimum);this.set("value",this.value);this.domNode.addEventListener("keydown",this._handleKeyboardEvents.bind(this))},_emitChangeEvent:function(){var b=this.get("value");this._lastChangeValueEmitted!==b&&(this._triggerChangeEvent("value",b,b),this._lastChangeValueEmitted=b)},_triggerChangeEvent:function(b,a,c){this.emit("change",{mwEventData:{propertyName:b,oldValue:a,newValue:c}})},_triggerChangingEvent:function(b,a){this.emit("changing",{mwEventData:{propertyName:"value",
oldValue:b,newValue:a}})},_setMinimumAttr:function(b){b=parseFloat(b);isNaN(b)||(this.inherited(arguments),this._set("minimum",b),this._calculateStepSize())},_setMaximumAttr:function(b){b=parseFloat(b);isNaN(b)||(this.inherited(arguments),this._set("maximum",b),this._calculateStepSize())},_setValueAttr:function(b){this.inherited(arguments);this._set("value",b);0!==b%1?(this.set("discrete",!1),this._calculateStepSize()):this.set("discrete",!0)},_setStepAttr:function(b){b=parseFloat(b);isNaN(b)||this._set("step",
b)},_calculateStepSize:function(){var b=c.findSuitableStepSize(this.get("value"),this.get("maximum"),this.get("minimum"),this.get("discrete"));this.set("defaultStep",b)},_handleKeyboardEvents:function(b){if(!this.get("disabled")){var a=parseFloat(this.get("value")),d=this.get("step")?this.get("step"):this.get("defaultStep"),g=a;b.keyCode===e.LEFT_ARROW||b.keyCode===e.DOWN_ARROW?(g=a-d,g<this.get("minimum")&&(g=this.get("minimum"))):b.keyCode===e.RIGHT_ARROW||b.keyCode===e.UP_ARROW?(g=a+d,g>this.get("maximum")&&
(g=this.get("maximum"))):b.keyCode===e.HOME?g=this.get("minimum"):b.keyCode===e.END&&(g=this.get("maximum"));d=c.findSuitablePrecision(d,this.get("value"));g=parseFloat(g.toFixed(d));this.set("value",g);a!==g&&this._triggerChangeEvent("value",a,g);b.preventDefault()}},_onTrackClick:function(b){(b.target===this.sliderTrackNode||this.sliderTrackNode.contains(b.target))&&this.inherited(arguments)},_setPixelValue:function(b,a){if(!this.disabled&&!this.readOnly){var d,e=this.get("value"),g=this.get("step")?
this.get("step"):this.get("defaultStep"),h=c.findSuitablePrecision(g,this.get("value"));0>b?d=this.get("minimum"):(d=b>a?this.get("maximum"):Math.max(Math.min((this.maximum-this.minimum)*b/a+this.minimum,this.maximum),this.minimum),d=c.findValidSliderValue(d,this.get("minimum"),this.get("maximum"),g));d=parseFloat(d.toFixed(h));this._set("value",d);e!==d&&this._triggerChangingEvent(e,d)}}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/BaseHorizontalSlider":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/dom-geometry dojo/query dojo/number dijit/_WidgetBase dijit/_TemplatedMixin MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/mixins/SliderMixin".split(" "),
function(h,e,g,d,c,b,a,f,k){var l=h(k,{baseClass:"mwWidget mwSlider mwHorizontalSlider",width:200,height:3,_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_thumbPositionParam1:"width",_thumbPositionParam2:"left",_isScaleDirectionReverse:!1,orientation:"horizontal",getRuleLabelConstructor:function(){return l._HorizontalRuleLabels},_setWidthAttr:function(a){this.inherited(arguments);g.set(this.containerNode,{width:a+"px"})},_updateVisual:function(){0<this.width&&0<this.height?(g.set(this.sliderTrackNode,
{display:"block"}),g.set(this.containerNode,{display:"block"})):(g.set(this.sliderTrackNode,{display:"none"}),g.set(this.containerNode,{display:"none"}))},getRuleConstructor:function(){return l._HorizontalRule},postCreate:function(){this.inherited(arguments);this.own(this.watch("width",e.hitch(this,"_adjustThumbPosition")),this.watch("fontSize",e.hitch(this,"_adjustLabelContainerPositioning")),this.watch("fontWeight",e.hitch(this,"_adjustLabelContainerPositioning")),this.watch("fontFamily",e.hitch(this,
"_adjustLabelContainerPositioning")),this.watch("fontStyle",e.hitch(this,"_adjustLabelContainerPositioning")))},_setMajorTickLabelsAttr:function(a){this.inherited(arguments);this._adjustLabelContainerPositioning()},_adjustLabelContainerPositioning:function(){this.majorTickLabelDijit&&c(".dijitRuleLabelContainerH",this.majorTickLabelDijit.domNode).forEach(function(a){var b=-1*(d.position(a).w/2);g.set(a,"margin-left",b+"px")})},_computePreferredWidth:function(){var a,b;b=d.position(this.sliderTrackNode);
a=Math.min(b.x-this.sliderThumbSize.w/2,this.sliderThumbSize.x);b=Math.max(b.x+b.w+this.sliderThumbSize.w/2,this.sliderThumbSize.x+this.sliderThumbSize.w);this._majorTickLabelsPosition=this._computePreferredSizeOfMajorTickLabels();null!==this._majorTickLabelsPosition&&(a=Math.min(this._majorTickLabelsPosition.x,a),b=Math.max(this._majorTickLabelsPosition.x+this._majorTickLabelsPosition.w,b));return Math.ceil(b)-Math.floor(a)},_computePreferredX:function(){var a=this._adjustTrackAndContainerOffset();
return this.location[0]-a},_computePreferredHeight:function(){var a=this._getDomNodeOfWidgetAtEnd(),b=this.sliderThumbSize.y;a?(this._bottomWidgetPosition=null!==this.majorTickLabelDijit&&a===this.majorTickLabelDijit.domNode?null!==this._majorTickLabelsPosition?this._majorTickLabelsPosition:this._computePreferredSizeOfMajorTickLabels():d.position(a),a=this._bottomWidgetPosition.y+this._bottomWidgetPosition.h):a=this.sliderThumbSize.y+this.sliderThumbSize.h;return Math.ceil(a)-Math.floor(b)},_computePreferredY:function(){var a;
a=d.position(this.sliderTrackNode);this._bottomWidgetPosition?(a=this._bottomWidgetPosition.y-a.y-a.h+this._bottomWidgetPosition.h,this._bottomWidgetPosition=null):a=this.sliderThumbSize.h/3;return this.location[1]-a},_computePreferredSizeOfMajorTickLabels:function(){var a=null;if(this.majorTickLabelDijit){var a=c(".dijitRuleLabel",this.majorTickLabelDijit.domNode),b=[],e=-1*Number.MAX_VALUE,f=0,g=Number.MAX_VALUE,h=0;a.forEach(function(a){a=d.position(a);a.y>e&&(e=a.y);a.x<g&&(g=a.x);a.h>f&&(f=a.h);
b.push(a.x+a.w)});a=Math.max.apply(null,b);h=Math.ceil(a)-Math.floor(g);a={w:h,h:f,y:e,x:g}}return a},_adjustTrackAndContainerOffset:function(){var a=c(".dijitRuleLabel",this.containerNode),b=d.position(this.sliderTrackNode),e=Math.max(this.sliderThumbSize.w/2,b.x-this.sliderThumbSize.x);if(0!==a.length){for(var f=[],h=0;h<a.length;h++)f[h]=d.position(a[h]).x;a=Math.min.apply(null,f);a<Math.min(b.x-this.sliderThumbSize.w/2,this.sliderThumbSize.x)&&(e=b.x-a)}e=Math.round(e);g.set(this.sliderTrackNode,
{left:e+"px"});g.set(this.containerNode,{left:e+"px"});return e},getTickLabelTrackLength:function(a){return d.position(this.sliderTrackNode).w}});l._HorizontalRule=h([a,f],{templateString:'\x3cdiv class\x3d"dijitRuleContainer dijitRuleContainerH"\x3e\x3c/div\x3e',count:3,container:"containerNode",ruleStyle:"",_positionPrefix:'\x3cdiv class\x3d"dijitRuleMark dijitRuleMarkH" style\x3d"left:',_positionSuffix:"%;",_suffix:'"\x3e\x3c/div\x3e',ticks:null,minimum:0,maximum:100,_isHorizontal:!0,isAddQeIdForTickBased:!0,
_qeIdSuffix:"id\x3d",_genHTML:function(a,b){var c="";this.isAddQeIdForTickBased&&this.ticks&&(c='"'+this._qeIdSuffix+'"'+this["class"]+"_"+this.ticks[b]);return this._positionPrefix+a+this._positionSuffix+this.ruleStyle+c+this._suffix},buildRendering:function(){this.inherited(arguments);var a="",b;if(this.ticks){var c=this.maximum-this.minimum;for(b=0;b<this.count;b++)a+=this._genHTML(100*((this.ticks[b]-this.minimum)/c),b)}else{a=this._genHTML(0,0);c=100/(this.count-1);for(b=1;b<this.count-1;b++)a+=
this._genHTML(c*b,b);a+=this._genHTML(100,this.count-1)}this.domNode.innerHTML=a}});l._HorizontalRuleLabels=h(l._HorizontalRule,{templateString:'\x3cdiv class\x3d"dijitRuleContainer dijitRuleContainerH dijitRuleLabelsContainer dijitRuleLabelsContainerH"\x3e\x3c/div\x3e',labelStyle:"",labels:[],numericMargin:0,minimum:0,maximum:1,constraints:{pattern:"#%"},_positionPrefix:'\x3cdiv class\x3d"dijitRuleLabelContainer dijitRuleLabelContainerH" style\x3d"left:',_labelPrefix:'"\x3e\x3cdiv class\x3d"dijitRuleLabel dijitRuleLabelH"',
_suffix:"\x3c/div\x3e\x3c/div\x3e",_qeIdSuffix:"id\x3d",_calcPosition:function(a){return a},_genHTML:function(a,b){var c=this._qeIdSuffix+'"'+this["class"]+"_"+this.labels[b]+'"\x3e';return this._positionPrefix+this._calcPosition(a)+this._positionSuffix+this.labelStyle+this._labelPrefix+c+this.labels[b]+this._suffix},getLabels:function(){var a=this.labels;!a.length&&this.srcNodeRef&&(a=c("\x3e li",this.srcNodeRef).map(function(a){return String(a.innerHTML)}));if(!a.length&&1<this.count)for(var d=
this.minimum,e=(this.maximum-d)/(this.count-1),f=0;f<this.count;f++)a.push(f<this.numericMargin||f>=this.count-this.numericMargin?"":b.format(d,this.constraints)),d+=e;return a},postMixInProperties:function(){this.inherited(arguments);this.labels=this.getLabels();this.count=this.labels.length}});return l})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/mixins/SliderMixin":function(){define("dojo/_base/declare dojo/on dojo/_base/lang dojo/dom-style dojo/dom-geometry dojo/_base/event dojo/dnd/Moveable dojo/dnd/Mover dijit/focus dijit/_WidgetBase dijit/_CssStateMixin dijit/_TemplatedMixin dijit/_Container dojo/text!../templates/Slider.html mw-mixins/property/DisabledMixin mw-mixins/property/VisualFamilyMixin mw-mixins/event/ChangeEventMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u){var v=h(u.validate([l,n,p,m,r,s,t]),{baseClass:"mwWidget mwSlider",templateString:q,sliderTrackNode:null,sliderThumbNode:null,value:0,maximum:100,minimum:0,THUMB_WIDTH:11,majorTickDijit:null,majorTickLabelDijit:null,minorTickDijit:null,_majorTickLabelsPosition:null,constructor:function(){this.location=[100,100];this.preferredSize={width:0,height:0,left:0,bottom:0};this.minorTicks=[0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,95,100];this.majorTicks=
[0,20,40,60,80,100];this.majorTickLabels="0 20 40 60 80 100".split(" ")},_setHeightAttr:function(a){d.set(this.sliderTrackNode,{height:a+"px"});this._set("height",a);this.set("outerHeight",this.get("height")+35);this._updateVisual()},_setWidthAttr:function(a){d.set(this.sliderTrackNode,{width:a+"px"});this._set("width",a);this.set("outerWidth",this.get("width")+30);this._updateVisual()},_updateVisual:function(){},_setOuterWidthAttr:function(a){d.set(this.domNode,{width:a+"px"})},_setOuterHeightAttr:function(a){d.set(this.domNode,
{height:a+"px"})},_setLocationAttr:function(a){this._set("location",a)},_setPixelValue:function(a,b){if(!this.disabled&&!this.readOnly){var c=(this.maximum-this.minimum)*(a/b)+this.minimum,c=Math.min(c,this.maximum),c=Math.max(c,this.minimum);this._setValueAttr(c)}},_setValueAttr:function(a){this._set("value",a)},_setMinimumAttr:function(a){this._set("minimum",a);this._setMajorTickLabelsAttr(this.get("majorTickLabels"));this._setMajorTicksAttr(this.get("majorTicks"))},_setMaximumAttr:function(a){this._set("maximum",
a)},_setMajorTicksAttr:function(a){this.majorTickDijit&&(this.majorTickDijit.destroy(),this.majorTickDijit=null);this._set("majorTicks",a);0<a.length&&(this.majorTickDijit=new (this.getRuleConstructor())({"class":"mwMajorTickMarks",ticks:this.majorTicks,minimum:this.minimum,maximum:this.maximum,count:this.majorTicks?this.majorTicks.length:3}),this.majorTickDijit.placeAt(this.containerNode))},_setMinorTicksAttr:function(a){this.minorTickDijit&&(this.minorTickDijit.destroy(),this.minorTickDijit=null);
this._set("minorTicks",a);0<a.length&&(this.minorTickDijit=new (this.getRuleConstructor())({"class":"mwMinorTickMarks",count:this.minorTicks?this.minorTicks.length:3,ticks:this.minorTicks,minimum:this.minimum,maximum:this.maximum}),this.minorTickDijit.placeAt(this.containerNode))},_setMajorTickLabelsAttr:function(a){this.majorTickLabelDijit&&(this.majorTickLabelDijit.destroy(),this.majorTickLabelDijit=null);this._set("majorTickLabels",a);0<a.length&&0<a.join("").trim().length&&(this.majorTickLabelDijit=
new (this.getRuleLabelConstructor())({"class":"mwMajorTickLabels",minimum:this.minimum,maximum:this.maximum,labels:this.majorTickLabels,count:this.majorTickLabels.length,ticks:this.majorTicks}),this.majorTickLabelDijit.placeAt(this.containerNode))},_onTrackClick:function(a){if(!this.disabled&&!(this.readOnly||0!==a.button))this._sliderTrackDimensions=c.position(this.sliderTrackNode),this._snapValueToTarget(this,a),k.focus(this.sliderThumbNode),b.stop(a),this._thumbMoveable.onMouseDown(a)},_emitChangeEvent:function(){var a=
this.get("value");this._lastChangeValueEmitted!==a&&(this._triggerChangeEvent("value",this._lastChangeValueEmitted,a),this._lastChangeValueEmitted=a)},_snapValueToTarget:function(a,b){var c=b.target;if(this._snapToMajorTick(c))c=this._findChildNode(c),c=a.majorTicks[c],a.set("value",c);else if(this._snapToMajorTickLabel(c))c=this._findChildNode(c.parentNode),c=a.majorTicks[c],a.set("value",c);else if(a._snapToMinorTick(c))c=this._findChildNode(c),a.set("value",a.minorTicks[c]);else{var c=this._sliderTrackDimensions,
d=b[a._mousePixelCoord]-c[a._startingPixelCoord];a._isScaleDirectionReverse&&(d=c[a._pixelCount]-d);a._setPixelValue(d,c[a._pixelCount])}},_snapToMajorTick:function(a){return-1!==a.id.indexOf("MajorTickMarks")},_snapToMajorTickLabel:function(a){return-1!==a.id.indexOf("MajorTickLabels")},_snapToMinorTick:function(a){return-1!==a.id.indexOf("MinorTickMarks")},postCreate:function(){this.inherited(arguments);this.set("outerWidth",this.get("width")+30);this.set("outerHeight",this.get("height")+35);var a=
h(v._SliderThumbMover,{widget:this});this._thumbMoveable=new v._SliderThumbMoveable(this.sliderThumbNode,{mover:a});this.own(this.watch("value",g.hitch(this,"_adjustThumbPosition")),this.watch("minimum",g.hitch(this,"_adjustThumbPosition")),this.watch("maximum",g.hitch(this,"_adjustThumbPosition")));this._adjustThumbPosition();this._lastChangeValueEmitted=this.get("value")},_adjustThumbPosition:function(){var a,b=!1;a=100*((this.value-this.minimum)/(this.maximum-this.minimum)-this.THUMB_WIDTH/this[this._thumbPositionParam1]/
2);this.value<this.minimum?(a=Math.max(100*-(this.THUMB_WIDTH/this[this._thumbPositionParam1]),a),b=!0):this.value>this.maximum&&(a=Math.min(100,a),b=!0);var c=[];c[this._thumbPositionParam2]=a+"%";d.set(this.sliderThumbNode,c);b&&this.computePreferredSize()},computePreferredSize:function(){var a,b,d,e;this.sliderThumbSize=c.position(this.sliderThumbNode);d=Math.round(this._computePreferredWidth());a=Math.round(this._computePreferredX());e=Math.round(this._computePreferredHeight());b=Math.round(this._computePreferredY());
this.set("preferredSize",{width:d,height:e,left:a,bottom:b})},_getDomNodeOfWidgetAtEnd:function(){var a;this.majorTickLabelDijit?a=this.majorTickLabelDijit.domNode:this.majorTickDijit?a=this.majorTickDijit.domNode:this.minorTickDijit&&(a=this.minorTickDijit.domNode);return a},_findChildNode:function(a){for(var b=a.parentNode.childNodes,c=0;c<b.length;c++)if(b.item(c)===a)return c;return-1}});v._SliderThumbMoveable=h(a,{onMouseDown:function(a){0===a.button&&this.inherited(arguments)}});v._SliderThumbMover=
h(f,{onMouseMove:function(a){var b=this.widget;b._sliderTrackDimensions||(b._sliderTrackDimensions=c.position(b.sliderTrackNode,!0));b._snapValueToTarget(b,a,!1);this._wasDragged=!0;b.emit("mousedragging")},onMouseUp:function(a){var b=this.widget;b._sliderTrackDimensions||(b._sliderTrackDimensions=c.position(b.sliderTrackNode,!0));b._snapValueToTarget(b,a,!0);b._emitChangeEvent();this._wasDragged?(b.emit("mousedragreleased"),this._wasDragged=!1):b.emit("mouseclicked");this.inherited(arguments)},destroy:function(){this.widget._sliderTrackDimensions=
null;this.inherited(arguments)}});return v})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/SliderWidgetUtility":function(){define([],function(){return{findValidSliderValue:function(h,e,g,d){var c=Math.round(h/d);h=c*d;e=h<e?c+1:h>g?c-1:c;e!==c&&(h=e*d);return h},findSuitableStepSize:function(h,e,g,d){var c;d?c=Math.pow(10,(e-g).toString().length-1)/10:(h=h.toString().split("."),void 0!==h[1]&&(c=1/Math.pow(10,h[1].length)));0===c&&(c=1);return c},findSuitablePrecision:function(h,
e){var g=0,d=h.toString().split(".");if(d[1])var c=d[1].length;d=e.toString().split(".");if(d[1])var b=d[1].length;if(c&&b)g=Math.max(b,c);else if(c||b)g=c?c:b;return g}}})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/mixins/EditableMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{editMode:!1,_setEditModeAttr:function(e){var g=this.baseClass+"--editMode";e?(this._set("editMode",e),this.domNode.classList.add(g),this.showInPlaceEditor(),this._hookUpEventListener()):
(this.domNode.classList.remove(g),this.hideInPlaceEditor(),this._removeEventListener(),this._set("editMode",e))},_hookUpEventListener:function(){this._blurCallBack=this._handleBlur.bind(this);this.domNode.addEventListener("blur",this._blurCallBack,!0)},_handleBlur:function(){setTimeout(function(){this.domNode&&!this.domNode.contains(document.activeElement)&&this.get("editMode")&&this.set("editMode",!1)}.bind(this),0)},_removeEventListener:function(){this._blurCallBack&&this.domNode.removeEventListener("blur",
this._blurCallBack,!0)},showInPlaceEditor:function(){throw Error("showInPlaceEditor method should be implemented");},hideInPlaceEditor:function(){throw Error("hideInPlaceEditor method should be implemented");},destroy:function(){this._removeEventListener();this.inherited(arguments)}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/mixins/DataMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{_setDataAttr:function(e){0!==Object.keys(e).length&&Object.keys(e).forEach(function(g){this.set(g,
e[g])},this)},_getDataAttr:function(){var e={},g=this.get("dataProperties");if(!g)throw Error("no 'dataProperties' property present");g.forEach(function(d){e[d]=this.get(d)},this);return e}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/mixins/DisabledMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{disabled:!1,_setDisabledAttr:function(e){var g=this.baseClass+"--disabled";e?this.domNode.classList.add(g):this.domNode.classList.remove(g);this._set("disabled",
e)}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/mixins/PositionMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{position:"bottom",_setPositionAttr:function(e){this.domNode.classList.remove(this.baseClass+"--"+this.position);this.domNode.classList.add(this.baseClass+"--"+e);this.position!==e&&this._set("position",e)}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/LiveControlComboBox":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/registry dojo/has dojo/keys mw-event-utils/doubleClickHandler mw-form/TextArea MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/ComboBox MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/mixins/EditableMixin MW/rtc/plugins/language/matlab/codingui/widgets/WidgetsUtility MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/mixins/DataMixin MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/mixins/DisabledMixin MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/mixins/PositionMixin".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m){h=h([e,n,p,k,m],{baseClass:"mwLiveControlComboBox",type:"ComboBox",constructor:function(){this.comboBox=new f;this.own(this.comboBox);this.dataProperties=["items","value"]},buildRendering:function(){this.inherited(arguments);this.domNode.setAttribute("tabindex","-1");this.domNode.setAttribute("data-focus","temporary");l.buildNode("div",{className:"widgetContainer",parent:this.domNode},"mwLiveControlComboBox").appendChild(this.comboBox.domNode);this.editorContainer=
l.buildNode("div",{className:"editorContainer",parent:this.domNode},"mwLiveControlComboBox")},_setWidthAttr:function(a){this.comboBox.set("width",a);this.domNode.style.width=a+"px";this._set("width",a);this.emit("sizechange")},_getWidthAttr:function(){return this.comboBox.get("width")},_setItemsAttr:function(a){this.comboBox.set("items",a);this._set("items",a)},_setValueAttr:function(a){this.comboBox.set("value",a);this._set("value",a)},_setDisabledAttr:function(a){this.inherited(arguments);this.comboBox.set("disabled",
a)},postCreate:function(){this.inherited(arguments);this.get("items")||this._setComboBoxItems();this.domNode.addEventListener("change",this._handleChange.bind(this));this.domNode.addEventListener("keyup",this._handleKeyUp.bind(this));this.domNode.addEventListener("keydown",this._handleKeyDown.bind(this));this.domNode.addEventListener("doubleclick",this._handleDoubleClick.bind(this));this.comboBox.watch("value",this._updateValue.bind(this))},focus:function(){this.comboBox.focusNode.focus()},showInPlaceEditor:function(){this._createEditor();
this._setEditorContent();this._saveEditor=!0},_getContentForEditor:function(){var a=[];this.get("items").forEach(function(b){a.push(b.label)});return a},_setComboBoxItems:function(){var a=[],b={label:this.get("value"),value:this.get("value")};a.push(b);this.set("items",a)},_createEditor:function(){this.editor=new a;this.editorContainer.appendChild(this.editor.domNode);this.editor.startup();var b=this.get("width")-18;this.editor.set("width",b);this._editorWheelCallback=this._handleEditorWheel.bind(this);
this.editor.domNode.addEventListener("wheel",this._editorWheelCallback)},_handleEditorWheel:function(a){a.stopPropagation()},_createPlaceholder:function(){l.buildNode("div",{className:"placeholder",parent:this.editorContainer},"mwLiveControlComboBox").innerHTML="'one'\x3cbr\x3e'two'";this.editor.domNode.addEventListener("keydown",this._handlePlaceholderOnKeyDown.bind(this));this.editor.domNode.addEventListener("keyup",this._handlePlaceholderOnKeyUp.bind(this))},_handlePlaceholderOnKeyDown:function(){this.editorContainer.children[1].classList.add("mwLiveControlComboBox__editorContainer__placeholder--inactive")},
_handlePlaceholderOnKeyUp:function(){var a=this.editorContainer.children[1];0===this.editor.focusNode.value.length&&a.classList.remove("mwLiveControlComboBox__editorContainer__placeholder--inactive")},_setEditorContent:function(){var a=this._getContentForEditor(),b="";1===a.length&&""===a[0]?this._createPlaceholder():a.forEach(function(a){b+=a+"\n"});this.editor.set("value",b);this.editor.focusNode.focus();d("trident")&&(a=b.length,this.editor.focusNode.setSelectionRange(a,a))},hideInPlaceEditor:function(){if(this.editor){if(this._saveEditor){var a=
this.editor.focusNode.value.split("\n");this._saveComboBoxChanges(a)}this.editorContainer.removeChild(this.editor.domNode);this.editor.domNode.removeEventListener("wheel",this._editorWheelCallback);this.editor.destroy();this.editor=null}},_saveComboBoxChanges:function(a){var b=[],c=this.get("value"),d=!1;this._hasEmptyContent(a)?(this.set("value",""),this._setComboBoxItems()):(a.forEach(function(a){if(a=a.trim())a===c&&(d=!0),b.push({label:a,value:a})},this),this.set("items",b),a=d?c:b[0].label,this.set("value",
a))},_hasEmptyContent:function(a){var b=!0;a.forEach(function(a){""!==a&&(b=!1)});return b},_handleChange:function(a){g.getEnclosingWidget(a.target)===this.editor&&(a.stopImmediatePropagation(),a.stopPropagation())},_handleDoubleClick:function(){this.get("editMode")||this.set("editMode",!0)},_updateValue:function(a,b,c){this._set("value",c)},navigate:function(a){a=a.keyCode;var b=document.activeElement,d=!1;if((a===c.DELETE||a===c.BACKSPACE||a===c.TAB)&&b!==this.comboBox.domNode)this.comboBox.focusNode.focus(),
this.focus(),d=!0;return d},_handleKeyDown:function(a){a=a.keyCode;var b=document.activeElement;switch(a){case c.TAB:this.editor&&b===this.editor.focusNode&&this.set("editMode",!1);this.emit("restorefocustolastnonrefuseelement");this.emit("keyuponwidgets",{mwEventData:{keyCode:a}});break;case c.BACKSPACE:b===this.comboBox.focusNode&&(this.emit("restorefocustolastnonrefuseelement"),this.emit("keyuponwidgets",{mwEventData:{keyCode:a}}));break;case c.DELETE:b===this.comboBox.focusNode&&(this.emit("restorefocustolastnonrefuseelement"),
this.emit("keyuponwidgets",{mwEventData:{keyCode:a}}))}},_handleKeyUp:function(a){a.keyCode===c.ESCAPE&&(this.get("editMode")&&(this._saveEditor=!1,this.set("editMode",!1)),this.emit("restorefocustolastnonrefuseelement"))},startup:function(){this.inherited(arguments);this.comboBox.startup()},destroy:function(){this.comboBox.destroy();this.inherited(arguments)}});h.BASE_CLASS="mwLiveControlComboBox";return h})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/ComboBox":function(){define(["dijit/_WidgetBase",
"dojo/_base/declare","mw-event-utils/doubleClickHandler","mw-form/ComboBox"],function(h,e,g,d){return e([d],{postCreate:function(){this.domNode.addEventListener("mousedown",this._handleMouseDown.bind(this),!0);this.inherited(arguments);this.domNode.addEventListener("click",g.createCallback(this._handleClick.bind(this),this._handleDoubleClick.bind(this)),220)},_handleClick:function(c){(!c.mwEventData||!c.mwEventData.keyCode)&&this._handleArrowNodeMouseDown(c)},_handleMouseDown:function(c){c.stopImmediatePropagation()},
_handleDoubleClick:function(c){this.emit("doubleclick",{});c.stopPropagation()},_handleMenuClick:function(c){if(this._isSeparator(c.target)||!c.target.classList.contains("mwMenuItem")&&!c.target.classList.contains("mwTextNode"))c.preventDefault();else{c=this._getSelectedItemFromLabel(c.target.textContent).value;var b=this.get("value");this.set("value",c);b!==c&&this._triggerChangeEvent("value",b,c);this.closeMenu()}},_setValueAttr:function(c){var b=this._getSelectedItemFromValue(c);if(("number"===
typeof c?c.toString():c)&&b&&void 0!==b.index)this._textField.set("value",b.label),this._isTextEmpty=!0,this._removeSelectedMenuItemColor(),0<this.get("menu").getChildren().length&&void 0!==b.index&&this.get("menu").getChildren()[b.index].classList.add("mwComboBoxSelectedMenuItem");else if(("number"===typeof c?c.toString():c)&&!b)if(this.get("editable"))this._removeSelectedMenuItemColor(),this._textField.set("value",c),this._isTextEmpty=!1;else{if(!this.get("items")||0===this.get("items").length){this._pendingValue=
c;return}throw Error("Value must match an existing item for non-editable combo box");}else""===c&&(this._textField.set("value",""),void 0!==this._get("value")&&(this._removeSelectedMenuItemColor(),this._isTextEmpty=!0),""!==this.get("text")&&(this._isTextEmpty=!1));!0===this._isTextEmpty?this.set("text",""):this.set("text",c);this._set("value",c)}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/view/LiveControlLayouterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"./LiveControlLayouter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.livecontrols.viewmodel","rtc.view.decoration.viewmodel"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/view/LiveControlLayouter":function(){define(["dojo/_base/declare","dojo/dom-construct","MW/rtc/plugins/language/matlab/codingui/livecontrols/nodes/LiveControlNode","MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter"],function(h,
e,g,d){return h(d,{_LIVE_CONTROL_OUTER_NODE:"liveControlOuterNode",_LIVE_CONTROL_DECORATION_NODE:"liveControlDecoration",constructor:function(c,b){this._layoutService=c;this._decorationViewModel=b},getApplicableNodeClass:function(){return g},layout:function(c,b){var a=c.layoutInto(b,"div",{"class":this._LIVE_CONTROL_OUTER_NODE}),d=this._createDecorationView(b);d&&a.appendChild(d);d=this._layoutService.createLiveControl(b);a.appendChild(d);return a},refresh:function(c,b,a,d){this._layoutService.updateTextView(b,
a);this._updateDecoration(b,a);return null},_createDecorationView:function(c){c=this._decorationViewModel.getDecoration(c);if(!c.length)return null;var b=e.create("div",{"class":this._LIVE_CONTROL_DECORATION_NODE});c.forEach(function(a){a.domNodes.forEach(function(a,c){e.place(c,b,a.domPlacement)})});return 0===b.children.length?null:b},_updateDecoration:function(c,b){var a=this._createDecorationView(c),d=b.querySelector("."+this._LIVE_CONTROL_DECORATION_NODE);d&&d.parentNode!==b||(d&&a?b.replaceChild(a,
d):d&&!a?b.removeChild(d):!d&&a&&b.insertBefore(a,b.firstChild))}})})},"MW/rtc/plugins/language/matlab/functions/LocalFunctionsProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/functions/LocalFunctions","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.internaldocument","rtc.document","rtc.cursor","rtc.code.sections.sectionbreak","rtc.code.sections.model"]}},
createInstance:function(d,c,b,a,f){return new e(d,c,b,a,f)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/language/matlab/functions/LocalFunctions":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect mw-log/Log MW/rtc/abstract/AbstractPlugin MW/rtc/model/CodeUtilities MW/rtc/model/events/DocumentEvent MW/rtc/model/events/NumberOfLinesChangedEvent MW/rtc/plugins/language/matlab/functions/FunctionAttributeConstants MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNode MW/rtc/plugins/richtext/nodes/leaf/RichTextNode".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n){return h(c,{_UNDOREDO_BLOCK_TYPE:"LocalFunction",_BLOCK_TYPES_FOR_MERGE_AND_ADVANCE:["AutoIndent"],constructor:function(a,b,c,d,f){this._internalDocument=a;this._document=b;this._cursor=c;this._sectionBreak=d;this._sectionModel=f;this.own(g.around(b,"insertBreak",e.hitch(this,"_onInsertBreak")));this.own(g.after(f,"onAttributesUpdated",e.hitch(this,"_handleAttributesUpdate"),!0))},_onInsertBreak:function(a){var b=this;return function(){var c=b._sectionModel.getCurrentSection();
if(c&&c[k.LOCAL_FUNCTION_ATTRIBUTE]&&0<c[k.LOCAL_FUNCTION_ATTRIBUTE].length){var d=c.start.getLineColumn().line,e=b._cursor.getLineColumn(),g=e.line,e=e.column,c=c.localFunctions[0].position.getLineColumn().line;if(g>=d&&g<=c&&1===e)return d=b._document.startEdit(),b._cursor.hasSelection()&&b._document.deleteTextAtCurrentPosition(),g=b._cursor.getLineColumn().line,c=b._insertTextContainerBefore(g),d.appendUndoEvents([f.create(g-1,g,-1)]),d.appendRedoEvents(c),b._document.endEdit(),!0}return a.apply(b._document,
arguments)}},_insertTextContainerBefore:function(a){a=this._internalDocument.getLineNode(a-1);var b=new l([]);b.addChild(new n({}));this._document.startEdit();a=this._internalDocument.insertAtPosition(b,a.startPosition());this._cursor.setPosition(a.insertedRange.getEndPosition());this._document.endEdit();this._internalDocument.emitDocumentEvents(a.events);this._cursor.onUpdate();return a.events},_handleAttributesUpdate:function(a){if(a===k.LOCAL_FUNCTION_ATTRIBUTE&&(a=this._sectionModel.getSections(),
a=this._getFirstLocalFunction(a))){var b=a.startLine,c=this._internalDocument.getMaxLineNumber();this._needsUpdate(b,c)&&(a=this._document.startBlockEdit(this._UNDOREDO_BLOCK_TYPE),a.setBlockTypesForMergeAndAdvance(this._BLOCK_TYPES_FOR_MERGE_AND_ADVANCE),this._sectionBreak.deleteSectionBreakInBetween(b,c),b=this._getTopBoundary(b),this._sectionBreak.isLineSectionBreak(b-1)||(this._sectionBreak.insertSectionBreakAtLineColumn(b,1),a.appendRedoEvents([f.create(b,b+1,1)]),a.appendUndoEvents([f.create(b,
b+1,-1)])),this._document.endBlockEdit(a))}},_needsUpdate:function(a,b){if(!(1<a))return!1;if(this._sectionBreak.hasSectionBreakInBetween(a,b))return!0;var c=this._sectionModel.getSectionForLine(a-1).start.getLineColumn().line;return this._getTopBoundary(a)!==c?!0:!1},_getTopBoundary:function(a){var c=this._sectionModel.getSectionForLine(a-1).start.getLineColumn().line;d.assert(c<=a,"Invalid start line of section or local function");for(a-=1;a>=c;a-=1){var e=this._internalDocument.getLineNode(a-1);
if(b.isCodeContainer(e))break}return a+1},_getFirstLocalFunction:function(a){var b=null;a.some(function(a){if((a=a[k.LOCAL_FUNCTION_ATTRIBUTE])&&0<a.length)return b=a[0],!0});return b}})})},"MW/rtc/plugins/language/matlab/functions/LocalFunctionsSectionAttributeContributorProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/functions/LocalFunctionsSectionAttributeContributor","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{isApplicable:function(){return!0},
requires:function(){return{isApplicable:[],createInstance:["rtc.document","rtc.code.sections.model","rtc.localfunctionnotifier"]}},createInstance:function(d,c,b){return new e(d,c,b)}})})},"MW/rtc/plugins/language/matlab/functions/LocalFunctionsSectionAttributeContributor":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/functions/AbstractFunctionSectionAttributeContributor","MW/rtc/plugins/language/matlab/functions/FunctionAttributeConstants"],function(h,e,g){return h(e,{constructor:function(d,
c,b){},getSectionAttribute:function(){return g.LOCAL_FUNCTION_ATTRIBUTE}})})},"MW/rtc/plugins/language/matlab/functions/AbstractFunctionSectionAttributeContributor":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect mw-log/Log MW/rtc/abstract/AbstractPlugin MW/rtc/plugins/functionnotifier/FunctionStateConstants".split(" "),function(h,e,g,d,c,b){return h(c,{constructor:function(a,b,c){this._document=a;this._sectionModel=b;this._functionNotifier=c;this.own(g.after(this._functionNotifier,
"onValidFunctionsChange",e.hitch(this,"_handleFunctionChange"),!0));this.own(g.before(this._sectionModel,"onModelUpdated",e.hitch(this,"_setAttributesForSectionsOnReset")));this._functionsData=null},getSectionAttribute:function(){throw"Unimplemented API in AbstractFunctionSectionAttributeContributor";},_handleFunctionChange:function(a){a&&(a=this._getFunctionsFromEvent(a),this._initializeFunctionData(a),this._setAttributesForSections(this._functionsData))},_getFunctionsFromEvent:function(a){var c;
switch(a.type){case b.VALID_FUNCTIONS_REMOVED:c=null;break;case b.VALID_FUNCTIONS_ADDED:case b.VALID_FUNCTIONS_CHANGED:case b.FUNCTIONS_ON_VALID_DOCUMENT_CHANGE:c=a.validFunctions}return c},_initializeFunctionData:function(a){this._functionsData&&(this._functionsData.forEach(function(a){d.assert(a.position,"Must have position!");this._document.deletePosition(a.position)},this),this._functionsData=null);a&&(a.forEach(function(a){a.position=this._document.createLinePositionInLine(a.startLine-1)},this),
this._functionsData=a)},_setAttributesForSections:function(a){this._sectionModel.setAttribute(this.getSectionAttribute(),this._getFunctionMap(a))},_setAttributesForSectionsOnReset:function(){this._sectionModel.setAttributeOnReset(this.getSectionAttribute(),this._getFunctionMap(this._functionsData))},_getFunctionMap:function(a){var b={};a&&a.forEach(function(a){var c=this._sectionModel.getSectionNumberForLine(a.startLine-1);b[c]?b[c].push(a):b[c]=[a]},this);return b}})})},"MW/rtc/plugins/language/matlab/functions/TopLevelFunctionProvider":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/language/matlab/functions/TopLevelFunction","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.document","rtc.code.sections.sectionbreak","rtc.code.sections.model"]}},createInstance:function(d,c,b){return new e(d,c,b)}})})},"MW/rtc/plugins/language/matlab/functions/TopLevelFunction":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/model/events/NumberOfLinesChangedEvent MW/rtc/plugins/language/matlab/functions/FunctionAttributeConstants".split(" "),
function(h,e,g,d,c,b){return h(d,{_UNDOREDO_BLOCK_TYPE:"TopLevelFunction",_BLOCK_TYPES_FOR_MERGE_AND_ADVANCE:["AutoIndent"],constructor:function(a,b,c){this._document=a;this._sectionBreak=b;this._sectionModel=c;this.own(g.after(c,"onAttributesUpdated",e.hitch(this,"_handleAttributesUpdate"),!0))},_handleAttributesUpdate:function(a){if(a===b.TOP_LEVEL_FUNCTION_ATTRIBUTE&&(a=this._sectionModel.getSections(),a=this._getTopLevelFunction(a)))if(a=Math.min(a.endLine,this._document.getNumberOfLines()),a=
this._getLastLineInSectionForLine(a-1),this._needsUpdate(1,a)){var c=this._document.startBlockEdit(this._UNDOREDO_BLOCK_TYPE);c.setBlockTypesForMergeAndAdvance(this._BLOCK_TYPES_FOR_MERGE_AND_ADVANCE);this._sectionBreak.deleteSectionBreakInBetween(1,a);this._document.endBlockEdit(c)}},_needsUpdate:function(a,b){return this._sectionBreak.hasSectionBreakInBetween(a,b)},_getTopLevelFunction:function(a){var c=null;a.some(function(a){if((a=a[b.TOP_LEVEL_FUNCTION_ATTRIBUTE])&&0<a.length)return c=a[0],!0});
return c},_getLastLineInSectionForLine:function(a){return this._sectionModel.getSectionForLine(a).end.getLine()}})})},"MW/rtc/plugins/language/matlab/functions/TopLevelFunctionSectionAttributeContributorProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/functions/TopLevelFunctionSectionAttributeContributor","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.document",
"rtc.code.sections.model","rtc.toplevelfunctionnotifier"]}},createInstance:function(d,c,b){return new e(d,c,b)}})})},"MW/rtc/plugins/language/matlab/functions/TopLevelFunctionSectionAttributeContributor":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/functions/AbstractFunctionSectionAttributeContributor","MW/rtc/plugins/language/matlab/functions/FunctionAttributeConstants"],function(h,e,g){return h(e,{constructor:function(d,c,b){},getSectionAttribute:function(){return g.TOP_LEVEL_FUNCTION_ATTRIBUTE}})})},
"MW/rtc/plugins/language/matlab/section/SectionPluginProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities","MW/rtc/plugins/language/matlab/section/SectionPlugin","MW/rtc/core/provider/PluginProvider"],function(h,e,g,d,c){return h(c,{isApplicable:function(b){return g.isMatlabCodeFileOrBuffer(b)},requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:"rtc.document rtc.internaldocument rtc.view rtc.cursor rtc.cursorcontroller rtc.cursor.view rtc.actionservice rtc.executionservice rtc.featureinterface rtc.indentutilities rtc.backingstore rtc.code.matlabfiletype rtc.breakpointlessevalservice".split(" ")}},
createInstance:function(b,a,c,e,g,h,p,m,q,r,s,t,u){return new d(b,a,c,e,g,h,p,m,q,r,s,t,u)}})})},"MW/rtc/plugins/language/matlab/section/SectionPlugin":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/has MW/rtc/abstract/AbstractPlugin MW/rtc/datamodel/FileBackingStore MW/rtc/model/CodeUtilities MW/rtc/model/DocumentUtilities MW/rtc/model/NodeUtilities MW/rtc/model/Position MW/rtc/plugins/language/matlab/section/PublishUtilities MW/rtc/plugins/language/matlab/section/SectionsList MW/rtc/plugins/language/matlab/section/view/SectionPluginViewLayer MW/rtc/RichTextComponentFeatureEnum dojo/i18n!l10n/nls/actions".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r){return h(c,{_SECTION_EVALUATION_FUNCTION:"matlab.internal.editor.evaluateCode",_SECTION_EVAL_EDITOR_ID:"SectionEval",constructor:function(a,b,c,d,f,h,k,l,F,G,H,I,K){this._internalDocument=b;this._document=a;this._view=c;this._cursorController=f;this._cursorView=h;this._actionService=k;this._executionService=l;this._editorInterface=F;this._backingStore=H;this._fileType=I;this._breakpointlessEvalService=K;this._sections=[];this._activeSection={};this._sectionMarkers=
{};this._sectionTitles={};this._sectionsList=new p(this._internalDocument,this._document);this._viewLayer=new m;this._SECTION_TITLE_CLASS="section_title";this._SECTION_SEPARATOR_CLASS="matlab_section_separator";this._publishUtilities=new n(this,this._document,this._internalDocument,d,G);this.own(g.after(this._internalDocument,"onDocumentChanged",e.hitch(this,"_handleDocumentChanged")));this.own(g.after(this._sectionsList,"onUpdateModel",e.hitch(this,"_onSectionLocationUpdate"),!0));this.own(g.after(this._cursorView,
"onChange",e.hitch(this,"_updateActiveSection"),!0));this.own(g.after(this._editorInterface,"onActivated",e.hitch(this,"_updateActiveSection")));this.own(g.after(this._internalDocument,"onDocumentReset",e.hitch(this._sectionsList,"updateCells")));this.own(g.after(this._view,"onLayoutChange",e.hitch(this,"_updateActiveSectionHighlighting")));this.own(g.after(this._view,"onLinesDOMUpdated",e.hitch(this,"_handleOnLinesDOMUpdated"),!0));a=[{id:q.SECTIONS.INSERT_SECTION_ACTION,enabled:!0,description:r.insertSectionDescription,
text:r.insertSectionLabel,icon:"smallInsertSection",contextMenuGroup:"Sections",callback:e.hitch(this,"_insertSectionCallback")},{id:q.SECTIONS.RUN_SECTION_ACTION,enabled:!1,contextMenuGroup:"Sections",text:r.runSectionLabel,key:"ctrl_enter",platformKey:{mac:"meta_enter"},callback:e.hitch(this,"_evaluateSectionCallback")},{id:q.SECTIONS.NEXT_SECTION_ACTION,enabled:!0,key:"ctrl_down",platformKey:{mac:"meta_down"},callback:e.hitch(this,"_gotoNextSectionCallback")},{id:q.SECTIONS.PREVIOUS_SECTION_ACTION,
enabled:!0,key:"ctrl_up",platformKey:{mac:"meta_up"},callback:e.hitch(this,"_gotoPreviousSectionCallback")}];this._actionService.loadActions(a)},_evaluateSectionCallback:function(){if(this._actionService.getAction(q.SECTIONS.RUN_SECTION_ACTION).enabled)return this.evaluateActiveSection()},_insertSectionCallback:function(){if(this._actionService.getAction(q.SECTIONS.INSERT_SECTION_ACTION).enabled)return this._publishUtilities.insertSection()},_gotoNextSectionCallback:function(a){if(this._actionService.getAction(q.SECTIONS.NEXT_SECTION_ACTION).enabled)return this.gotoNextSection(a)},
_gotoPreviousSectionCallback:function(a){if(this._actionService.getAction(q.SECTIONS.PREVIOUS_SECTION_ACTION).enabled)return this._gotoPreviousSection(a)},hasSection:function(){return 0<this._sections.length},_onSectionLocationUpdate:function(a,b,c,d){this._document.getText()===d&&(this._sections=this._sectionsList.getSections(),this._updateSectionsInView(!0))},_getMaxColumnOnLine:function(a){return this._internalDocument.getLineNode(a).getText().length},_updateSectionsInView:function(a){this._updateActiveSection();
this._updateSectionSeparators(a);this._updateSectionTitle()},_handleDocumentChanged:function(){this._sectionsList.updateCells();this._updateSectionsInView()},_handleOnLinesDOMUpdated:function(a,b,c){c&&(this._redrawSectionSeparatorsForLines(a,b),this._redrawSectionTitleForLines(a,b))},_updateSectionTitle:function(){var a,b=this;Object.keys(this._sectionTitles).forEach(function(a){b._view.removeClassFromLine(a,b._SECTION_TITLE_CLASS)});this._sectionTitles={};for(a=0;a<this._sections.length;a+=1){var c=
this._sections[a].startPosition.getRow(),d=this._internalDocument.getLineNode(c);d&&p.hasSectionTitle(d.getText())&&(this._view.applyClassToLine(c,this._SECTION_TITLE_CLASS),this._sectionTitles[c]=!0)}},_addSectionMarker:function(a,b){var c=b?a.startPosition.getRow():a.endPosition.getRow()+1;0!==c&&c<this._internalDocument.getMaxLineNumber()&&!this._sectionMarkers[c]&&(this._view.applyClassToLine(c,this._SECTION_SEPARATOR_CLASS),this._sectionMarkers[c]=!0,b?a.usedSectionStart=!0:a.usedSectionEnd=
!0)},_updateSectionSeparators:function(a){var b;this._view.removeClassFromAllLines(this._SECTION_SEPARATOR_CLASS);this._sectionMarkers={};for(b=this._sections.length-1;0<=b;b-=1)a?(this._addSectionMarker(this._sections[b],!0),this._addSectionMarker(this._sections[b],!1)):(this._sections[b].usedSectionStart&&this._addSectionMarker(this._sections[b],!0),this._sections[b].usedSectionEnd&&this._addSectionMarker(this._sections[b],!1))},_redrawSectionSeparatorsForLines:function(a,b){var c;for(c=a;c<=b;c++)this._sectionMarkers[c]&&
this._view.applyClassToLine(c,this._SECTION_SEPARATOR_CLASS)},_redrawSectionTitleForLines:function(a,b){var c;for(c=a;c<=b;c++){var d=this._internalDocument.getLineNode(c);d&&p.hasSectionTitle(d.getText())&&this._view.applyClassToLine(a,this._SECTION_TITLE_CLASS)}},_updateActiveSection:function(){var a=this._cursorController.getCursors()[0],b=a.getPosition();b&&(b=b.line,this._currentSectionNodes&&(this._viewLayer.hide(this._currentSectionNodes),this._currentSectionNodes=null),this.hasSection()?(b=
this.getSectionNumber(b),this._activeSection=this._sections[b]||{}):this._activeSection={},this._actionService.updateAction(q.SECTIONS.RUN_SECTION_ACTION,{enabled:this.hasSection()}),this._updateActiveSectionHighlighting(),a=!this._cursorController.hasMultipleCursors()&&!a.isCursorReadOnly(),this._actionService.updateAction(q.SECTIONS.INSERT_SECTION_ACTION,{enabled:a}))},_updateActiveSectionHighlighting:function(){if(void 0!==this._activeSection.startPosition){var a=this._internalDocument.getLineNode(this._activeSection.startPosition.getRow()),
b=this._internalDocument.getLineNode(this._activeSection.endPosition.getRow());a&&b&&(this._currentSectionNodes=k.getParagraphNodesInRange(a,b),this._viewLayer.show(this._currentSectionNodes))}},_getActiveSectionContents:function(){var a="";if(void 0!==this._activeSection.startPosition)var a=this._internalDocument.getLineNode(this._activeSection.startPosition.getRow()),b=this._internalDocument.getLineNode(this._activeSection.endPosition.getRow()),a=k.getFullRange(a,b),a=this._internalDocument.getTextInRange(a.start.node,
a.start.offset,a.end.node,a.end.offset);return a},evaluateActiveSection:function(){if(this._executionService&&void 0!==this._activeSection.startPosition){var a=this._fileType.getFileType()===this._fileType.FILE_TYPE.ClassDefinitionFile;this._backingStore instanceof b&&!a?this._evaluateActiveSectionInFileContext():(a=this._getActiveSectionContents(),this._executionService.executionEval(a))}},_evaluateActiveSectionInFileContext:function(){var b=this._internalDocument.getLineNode(this._activeSection.startPosition.getRow()),
c=this._internalDocument.getLineNode(this._activeSection.endPosition.getRow()),d=new l(b,0),e=new l(c,c.getText().length),c=this._backingStore.getFileName(),b=this._backingStore.getAbsoluteFilePath(),b=b.substring(0,b.length-c.length),f=this._document.getCodeText(),f=a.getMATLABStringFromCodeText(f),d=this._getAbsoluteCodeOffsetFromPosition(this._internalDocument,d)+1,e=this._getAbsoluteCodeOffsetFromPosition(this._internalDocument,e)+1-d,c=this._SECTION_EVALUATION_FUNCTION+"('"+c+"', '"+b+"', "+
f+", "+d+", "+e+", "+this._document.getState()+", '"+this._SECTION_EVAL_EDITOR_ID+"');";this._breakpointlessEvalService.noBreakpointEval(c)},_getAbsoluteCodeOffsetFromPosition:function(b,c){return a.getAbsoluteCodeOffsetFromPosition(b,c)},gotoNextSection:function(a){this._cursorController.clearSelection();var b=this._cursorController.getPositions()[0];a=this._getNextSectionPosition(b,a);this._cursorController.setPositions([a])},_gotoPreviousSection:function(){this._cursorController.clearSelection();
var a=this._cursorController.getPositions()[0],a=this._getPreviousSectionPosition(a);this._cursorController.setPositions([a])},_getNextSectionPosition:function(a,b){var c=this.getSectionNumber(a.line);if(0>c||c===this._sections.length-1)return a;var d=c+1;if(b){var c=this._getSectionEndPosititon(c),e,f;for(e=this._sections.length-1;0<=e;e-=1){var g=this._sections[e].startPosition.getRow();if(g<=c.line){d=this.getSectionNumber(f);break}else f=g}}return this.getSectionStartPosition(d)},_getPreviousSectionPosition:function(a){var b=
a.line,c=a.column,d=this.getSectionNumber(b);if(0>d)return a;a=this.getSectionStartPosition(d);return this.getSectionStartPosition(b>a.line||c>a.column||0===d?d:d-1)},getSectionNumber:function(a){var b=-1,c;for(c=this._sections.length-1;0<=c;c-=1){var d=this._sections[c].startPosition.getRow(),e=this._sections[c].endPosition.getRow();if(a>=d&&a<=e){b=c;break}}return b},getSectionStartPosition:function(a){a=this._sections[a].startPosition.getRow();var b=this._internalDocument.getLineNode(a).getText(),
b=f.getLeadingWhitespace(b);return{line:a,column:b}},_getSectionEndPosititon:function(a){a=this._sections[a].endPosition.getRow();var b=this._internalDocument.getLineNode(a).getText().length;return{line:a,column:b}},isSectionStart:function(a){var b=!1,c;for(c=this._sections.length-1;0<=c;c-=1){var d=this._sections[c].startPosition.getRow();if(a===d&&(d=this._internalDocument.getLineNode(a))&&p.hasSectionTitle(d.getText())){b=!0;break}}return b}})})},"MW/rtc/plugins/language/matlab/section/PublishUtilities":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/aspect","MW/rtc/EditorUtilities","MW/rtc/model/DocumentConstants"],function(h,e,g,d,c){return h(null,{constructor:function(b,a,c,d,e){this._sectionPlugin=b;this._document=a;this._internalDocument=c;this._cursor=d;this._indentUtilities=e;this.DESCRIPTIVE_START="% ";this.BULLETED_LIST_SYMBOL="* ";this.NUMBERED_LIST_SYMBOL="# ";this.PREFORMATTED_TEXT_SYMBOL=" ";this.CODE_SYMBOL="  ";this.DISPLAY_LATEX_SYMBOL="$$";this.IMAGE_START_SYMBOL="\x3c\x3c";this.IMAGE_END_SYMBOL="\x3e\x3e";
this.PREFORMATTED_TEXT="PREFORMATTED\n% "+this.PREFORMATTED_TEXT_SYMBOL+"TEXT";this.CODE_TEXT="for x \x3d 1:10\n%       disp(x)\n% "+this.CODE_SYMBOL+"end";this.BULLETED_LIST="ITEM1\n% "+this.BULLETED_LIST_SYMBOL+"ITEM2";this.NUMBERED_LIST="ITEM1\n% "+this.NUMBERED_LIST_SYMBOL+"ITEM2";this.IMAGE="FILENAME.PNG";this.DISPLAY_LATEX="e^{\\pi i} + 1 \x3d 0";this.BOLD_INSERT_TEXT="BOLD TEXT";this.ITALIC_INSERT_TEXT="ITALIC TEXT";this.MONO_INSERT_TEXT="MONOSPACED TEXT";this.INLINE_MATH_TEXT="x^2+e^{\\pi i}";
this.HYPERLINKED_TEXT_BEGINNING="http://www.mathworks.com ";this.HYPERLINKED_TEXT_END="MathWorks";this.TITLE_AND_DESCRIPTION="SECTION TITLE\n% DESCRIPTIVE TEXT";this.SECTION_TAG="%%";this.SELECTION_MARK="$%^";this.FORMATTED_BLOCK_REGEX=/^\s*%(\s|$)/},insertSection:function(){this._insertSection("")},insertSectionWithTitle:function(){this._insertSection(this.TITLE_AND_DESCRIPTION)},insertBoldMarkup:function(){this._insertInlineMarkup(" *"," *","* ",this.BOLD_INSERT_TEXT)},insertItalicMarkup:function(){this._insertInlineMarkup(" _",
" _","_ ",this.ITALIC_INSERT_TEXT)},insertMonospacedMarkup:function(){this._insertInlineMarkup(" |"," |","| ",this.MONO_INSERT_TEXT)},insertHyperlinkMarkup:function(){this._insertInlineMarkup(" \x3c"," \x3c"+this.HYPERLINKED_TEXT_BEGINNING,"\x3e ",this.HYPERLINKED_TEXT_BEGINNING+this.HYPERLINKED_TEXT_END)},insertInlineLatexMarkup:function(){this._insertInlineMarkup(" $"," $","$ ",this.INLINE_MATH_TEXT)},insertBulletedListMarkup:function(){this._insertBlockMarkup(this.BULLETED_LIST_SYMBOL,this.BULLETED_LIST,
"")},insertNumberedListMarkup:function(){this._insertBlockMarkup(this.NUMBERED_LIST_SYMBOL,this.NUMBERED_LIST,"")},insertImageMarkup:function(){this._insertBlockMarkup(this.IMAGE_START_SYMBOL,this.IMAGE,this.IMAGE_END_SYMBOL)},insertPreformattedTextMarkup:function(){this._insertBlockMarkup(this.PREFORMATTED_TEXT_SYMBOL,this.PREFORMATTED_TEXT,"")},insertCodeMarkup:function(b,a){this._insertBlockMarkup(this.CODE_SYMBOL,this.CODE_TEXT,"")},insertDisplayLatexMarkup:function(){this._insertBlockMarkup(this.DISPLAY_LATEX_SYMBOL,
this.DISPLAY_LATEX,this.DISPLAY_LATEX_SYMBOL)},_insertSection:function(b){var a=this._document.startBlockEdit();b=this.SECTION_TAG+" "+this.SELECTION_MARK+b+this.SELECTION_MARK;var c=this._getSelectionStartPosition(),d=this._getFirstNonWhiteSpace(c.line),e="",g="";this._isWithinInitialWhiteSpace(c)?(this._cursor.movePosition(this._cursor.LINE_START),e="\n"):(this._cursor.movePosition(this._cursor.LINE_END),g="\n");this._document.insertTextAtCurrentPosition(this._getExpandedText(g+b+e,d));this._selectMarkedText();
this._document.endBlockEdit(a)},_insertInlineMarkup:function(b,a,c,d){b=this._cursor.hasSelection()?a+this.SELECTION_MARK:b+this.SELECTION_MARK;c=this.SELECTION_MARK+c;var e=this._getSelectionStartPosition(),g=e.line;a=this._isInFormattedBlock(g);var h=this._sectionPlugin.isSectionStart(g),m=this._getSelectionEndPosition(),q=m.line,r=this._isInFormattedBlock(q),s=this._sectionPlugin.isSectionStart(q);a?e.column=Math.max(e.column,this._getFirstNonWhiteSpace(g)+this.DESCRIPTIVE_START.length):h&&(e.column=
Math.max(e.column,this._getFirstNonWhiteSpace(g)+this.SECTION_TAG.length+1));r?m.column=Math.max(m.column,this._getFirstNonWhiteSpace(q)+this.DESCRIPTIVE_START.length):s&&(m.column=Math.max(m.column,this._getFirstNonWhiteSpace(q)+this.SECTION_TAG.length+1));this._isWhiteSpace({line:g,column:e.column-1})&&(b=b.substring(1));this._isWhiteSpace({line:q,column:m.column})&&(c=c.substring(0,c.length-1));g===q&&e.column===m.column?this._cursor.setPosition(e):this._cursor.setPosition({line:q,column:m.column,
anchor:e});e=this._document.startBlockEdit();this._cursor.hasSelection()?(g=this._sectionPlugin.getSectionNumber(g),q=this._sectionPlugin.getSectionNumber(q),g===q&&(a||h)&&(r||s)?this._wrapSelection(b,c):(this._cursor.releaseAnchor(),this._cursor.setPosition(m),this._insertSectionWithInlineMarkup(b+d+c))):a||h?this._document.insertTextAtCurrentPosition(b+d+c):this._insertSectionWithInlineMarkup(b+d+c);this._selectMarkedText();this._document.endBlockEdit(e)},_insertSectionWithInlineMarkup:function(b){" "===
b.charAt(0)&&(b=b.substring(1));var a=this._getSelectionStartPosition(),c=this._getFirstNonWhiteSpace(a.line),d="";this._isWithinInitialWhiteSpace(a)?this._cursor.movePosition(this._cursor.LINE_START):(this._cursor.movePosition(this._cursor.LINE_END),d="\n");b=this._getExpandedText(d+"%%\n"+this.DESCRIPTIVE_START+b,c);this._document.insertTextAtCurrentPosition(b)},_insertBlockMarkup:function(b,a,c){var d=this._document.startBlockEdit();a=this.SELECTION_MARK+a+this.SELECTION_MARK;var e=this._getSelectionStartPosition(),
g=this._getFirstNonWhiteSpace(e.line),h=this._sectionPlugin.isSectionStart(e.line),m=this._isInFormattedBlock(e.line),q="";this._cursor.setPosition(e);h||m?(this._cursor.movePosition(this._cursor.LINE_END),q=this._getExpandedText("\n"+this.DESCRIPTIVE_START+"\n"+this.DESCRIPTIVE_START+b+a+c+"\n"+this.DESCRIPTIVE_START,g)):(m=h="",this._isWithinInitialWhiteSpace(e)?(this._cursor.movePosition(this._cursor.LINE_START),h="\n"):(this._cursor.movePosition(this._cursor.LINE_END),m="\n"),q=this._getExpandedText(m+
"%%\n"+this.DESCRIPTIVE_START+"\n"+this.DESCRIPTIVE_START+b+a+c+"\n"+this.DESCRIPTIVE_START+h,g));this._document.insertTextAtCurrentPosition(q);this._selectMarkedText();this._document.endBlockEdit(d)},_getExpandedText:function(b,a){var c=d.getWhiteSpaces(a),e=b.split("\n"),g="",h;for(h=0;h<e.length;h+=1)g+=c+e[h]+"\n";return g=g.substring(0,g.length-1)},_wrapSelection:function(b,a){var c=this._getSelectionStartPosition(),d=this._getSelectionEndPosition();this._cursor.releaseAnchor();this._cursor.setPosition(c);
this._document.insertTextAtCurrentPosition(b);c.line===d.line&&(d.column+=b.length);this._cursor.setPosition(d);this._document.insertTextAtCurrentPosition(a)},_selectMarkedText:function(){var b=this._getSelectionMark({line:0,column:0}),a=this._getSelectionMark({line:b.line,column:b.column+this.SELECTION_MARK.length});this._cursor.setPosition({line:a.line,column:a.column,anchor:{line:a.line,column:a.column+this.SELECTION_MARK.length}});this._document.deleteTextAtCurrentPosition(c.BACKWARD_DELETE);
this._cursor.setPosition({line:b.line,column:b.column,anchor:{line:b.line,column:b.column+this.SELECTION_MARK.length}});this._document.deleteTextAtCurrentPosition(c.BACKWARD_DELETE);var d=b.line,e=b.column,g=a.line,b=b.line===a.line?a.column-this.SELECTION_MARK.length:a.column;(d!==g||e!==b)&&this._cursor.setPosition({line:g,column:b,anchor:{line:d,column:e}})},_isInFormattedBlock:function(b){var a=!0;if(!this._internalDocument.getLineNode(b).getText().match(this.FORMATTED_BLOCK_REGEX)||!this._sectionPlugin.hasSection())return!1;
for(var c=this._sectionPlugin.getSectionNumber(b),c=this._sectionPlugin.getSectionStartPosition(c).line+1;c<b;c+=1)if(!this._internalDocument.getLineNode(c).getText().match(this.FORMATTED_BLOCK_REGEX)){a=!1;break}return a},_getSelectionMark:function(b){var a=this._internalDocument.getMaxLineNumber(),c=b.line,d;for(d=c;d<a;d+=1){var e=this._internalDocument.getLineNode(d).getText();d===c&&(e=e.substring(b.column));if(-1!==e.indexOf(this.SELECTION_MARK))return{line:d,column:d===c?b.column+e.indexOf(this.SELECTION_MARK):
e.indexOf(this.SELECTION_MARK)}}return null},_isWithinInitialWhiteSpace:function(b){var a=!1,c=this._getFirstNonWhiteSpace(b.line);b.column<=c&&(a=!0);return a},_getFirstNonWhiteSpace:function(b){b=this._internalDocument.getLineNode(b);return this._indentUtilities.getIndentLevel(b)},_isWhiteSpace:function(b){return" "===this._internalDocument.getLineNode(b.line).getText().charAt(b.column)},_getSelectionStartPosition:function(){var b=this._cursor.getPosition();return this._cursor.hasSelection()&&!this._cursor.isReversed()?
b.anchor:{line:b.line,column:b.column}},_getSelectionEndPosition:function(){var b=this._cursor.getPosition();return this._cursor.hasSelection()&&this._cursor.isReversed()?b.anchor:{line:b.line,column:b.column}}})})},"MW/rtc/plugins/language/matlab/section/view/SectionPluginViewLayer":function(){define(["dojo/_base/declare","dojo/dom-class"],function(h,e){return h(null,{constructor:function(){},show:function(g){g&&g.forEach(function(d){d.box&&e.add(d.box,"active_cell")},this)},hide:function(g){g&&
g.forEach(function(d){d.box&&e.remove(d.box,"active_cell")},this)}})})},"MW/rtc/plugins/language/matlab/sections/CodeRegionSectionContributorProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/sections/CodeRegionSectionContributor","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.internaldocument","rtc.document","rtc.code.sections.model"]}},createInstance:function(d,
c,b){return new e(d,c,b)}})})},"MW/rtc/plugins/language/matlab/sections/CodeRegionSectionContributor":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class dojo/on MW/rtc/model/CodeUtilities MW/rtc/model/DocumentConstants MW/rtc/model/DocumentEventUtilities".split(" "),function(h,e,g,d,c,b,a,f,k){return e(null,{constructor:function(a,b,c){this._internalDocument=a;this._document=b;this._sectionModel=c;this._aspectHandles=[];this._aspectHandles.push(d.after(this._document,
"onChange",g.hitch(this,"_updateSectionsOnDocLength"),!0));this._aspectHandles.push(d.after(this._internalDocument,"onDocumentChanged",g.hitch(this,"_updateSectionsOnFormatChange"),!0));this._aspectHandles.push(d.after(this._internalDocument,"onDocumentReset",g.hitch(this,"_updateSections")))},destroy:function(){this._aspectHandles.forEach(function(a){a.remove()});this._aspectHandles=[]},_updateSectionsOnDocLength:function(a){k.hasEventType(a,f.NUMBER_OF_LINES_CHANGED)&&this._updateSections()},_updateSectionsOnFormatChange:function(a){k.hasEventType(a,
f.FORMAT_CHANGE_EVENT)&&this._updateSections()},_updateSections:function(){var a=this._getSectionsAsLineNodes();this._sectionModel.resetSections(a)},_getSectionsAsLineNodes:function(){for(var a=[],b=this._internalDocument.startNode(),b=this._getNextStartCodeNode(b);b;){var c=this._getSectionEndNode(b);a.push({startNode:b,endNode:c});b=this._getNextSection(c)}return a},_getNextStartCodeNode:function(b){return b&&!a.isCodeContainer(b)?this._getNextStartCodeNode(b.rootContainer().nextSibling()):b},_getSectionEndNode:function(b){if(!a.isCodeContainer(b))return null;
var c=b.rootContainer().nextSibling();return!c||!a.isCodeContainer(c)?b:this._getSectionEndNode(c)},_getNextSection:function(b){a.isCodeContainer(b)&&(b=this._getNextStartNonCodeNode(b));return this._getNextStartCodeNode(b)},_getNextStartNonCodeNode:function(b){return b&&a.isCodeContainer(b)?this._getNextStartNonCodeNode(b.rootContainer().nextSibling()):b}})})},"MW/rtc/plugins/language/matlab/sections/CurrentSectionViewProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/sections/CurrentSectionView",
"MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.internaldocument","rtc.view","rtc.code.sections.model","rtc.code.sections.view.containerutility"]}},createInstance:function(d,c,b,a){return new e(d,c,b,a)}})})},"MW/rtc/plugins/language/matlab/sections/CurrentSectionView":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/dom-class","MW/rtc/abstract/AbstractPlugin"],
function(h,e,g,d,c){return h(c,{_ACTIVE_CLASS:"active",constructor:function(b,a,c,d){this._internalDocument=b;this._view=a;this._sectionModel=c;this._sectionContainerUtil=d;this.own(g.after(this._internalDocument,"onDocumentChanged",e.hitch(this,"_updateView")));this.own(g.after(this._view,"onLayoutChange",e.hitch(this,"_updateView")));this.own(g.after(this._sectionModel,"currentSectionChanged",e.hitch(this,"_updateView")))},_updateView:function(){var b=this._sectionModel.getCurrentSectionNumber();
if(0>b)this._clearDecoration();else if(b=this._sectionContainerUtil.getSectionBlock(b))d.contains(b,this._ACTIVE_CLASS)?this._currentSectionDomNode=b:(this._clearDecoration(),this._currentSectionDomNode=b,this._applyDecoration())},_applyDecoration:function(){this._currentSectionDomNode&&d.add(this._currentSectionDomNode,this._ACTIVE_CLASS)},_clearDecoration:function(){this._currentSectionDomNode&&d.remove(this._currentSectionDomNode,this._ACTIVE_CLASS)}})})},"MW/rtc/plugins/language/matlab/sections/InsertSectionProvider":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/language/matlab/sections/InsertSection","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.internaldocument","rtc.cursor","rtc.actionservice","rtc.document"]}},createInstance:function(d,c,b,a){return new e(d,c,b,a)}})})},"MW/rtc/plugins/language/matlab/sections/InsertSection":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect mw-log/Log MW/rtc/RichTextComponentFeatureEnum MW/rtc/abstract/AbstractPlugin MW/rtc/model/CodeUtilities MW/rtc/model/DocumentConstants MW/rtc/model/DocumentEventUtilities MW/rtc/model/DocumentUtilities MW/rtc/model/NodeUtilities MW/rtc/model/events/NumberOfLinesChangedEvent dojo/i18n!l10n/nls/actions".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m){return h(b,{_CODE_NODE_TYPE:"code",_TEXT_NODE_TYPE:"text",_INSERT_NODE_BEFORE:"before",_INSERT_NODE_AFTER:"after",constructor:function(a,b,c,d){this._internalDocument=a;this._cursor=b;this._actionService=c;this._document=d;a=[{id:"rtc_insert_section",enabled:!1,callback:e.hitch(this,"_insertSection")},{id:"rtc_insert_text",enabled:!1,key:"alt_enter",platformKey:{mac:"alt_enter"},callback:e.hitch(this,"_insertTextCallback")},{id:"rtc_insert_code",enabled:!1,key:"alt_enter",
platformKey:{mac:"alt_enter"},callback:e.hitch(this,"_insertCodeCallback")}];this._actionService.loadActions(a);this.own(g.after(this._cursor,"onChange",e.hitch(this,this._updateActionState)))},_insertSectionCallback:function(){if(this._actionService.getAction(c.SECTIONS.INSERT_SECTION_ACTION).enabled)return this._insertSection()},_insertTextCallback:function(){if(this._actionService.getAction("rtc_insert_text").enabled)return this._insertTextOrCode()},_insertCodeCallback:function(){if(this._actionService.getAction("rtc_insert_code").enabled)return this._insertTextOrCode()},
_updateActionState:function(){this._actionService.updateAction("rtc_insert_section",{enabled:this._canInsertSection()});var a=this._canInsertText(),b=a&&this._cursor.hasSelection()?m.convertSelectionToTextDescription:m.insertTextDescription;this._actionService.updateAction("rtc_insert_text",{enabled:a,description:b});b=(a=this._canInsertCode())&&this._cursor.hasSelection()?m.convertSelectionToCodeDescription:m.insertCodeDescription;this._actionService.updateAction("rtc_insert_code",{enabled:a,description:b})},
_canInsertSection:function(){return!this._cursor||this._internalDocument.isReadOnly()?!1:!this._cursor.hasSelection()},_canInsertText:function(){if(!this._cursor||this._cursor.isCursorReadOnly()||this._internalDocument.isReadOnly())return!1;var a=this._cursor.adjustSelection(this._cursor.selectionInfo(),!0);return!n.isContinuousFormat(a)?!1:"code"===n.getParagraphFormat(a)},_canInsertCode:function(){if(!this._cursor||this._cursor.isCursorReadOnly()||this._internalDocument.isReadOnly())return!1;var a=
this._cursor.adjustSelection(this._cursor.selectionInfo(),!0);return!n.isContinuousFormat(a)?!1:"code"!==n.getParagraphFormat(a)},_insertSection:function(){if(this._internalDocument.isReadOnly())return d.assert("Trying to insert a section in a read only state."),!1;var a=this._cursor.adjustSelection(this._cursor.selectionInfo(),!0);if(!n.isContinuousFormat(a))return d.assert("Trying to insert a section in a multi format selection."),!1;this._insertTextOrCode()},_insertTextOrCode:function(){var a=
this._canInsertText(),b=this._canInsertCode();if(!a&&!b)return!1;var c=this._fixedSelectionInfo();if(this._coversFullParagraphs(c))return this._actionService.executeAction("rtc_toggle_code_and_text"),!0;this._internalDocument.onPreDocumentChanged({});var c=this._document.startBlockEdit(),d=this._treatSelection(),a=this._insertBlankLine(a);0<a.length&&(c.appendUndoEvents([p.create(a[0].startLine,a[0].endLine,-1)]),c.appendRedoEvents(a));d&&(d=l.textToContent(d,this._cursor.getNode()),b&&!this._cursor.getNode().textContainer().isEmpty()&&
this._insertBlankLine(!1),this._document.insertContent(d,this._cursor.position,this._cursor));this._internalDocument.emitDocumentEvents(a);this._document.endBlockEdit(c);this._cursor.onUpdate(!1,!0);return!0},_insertBlankLine:function(a){var b=this._cursor.position;this._cursor.hasSelection()&&d.assert("_insertBlankLine: Selection must be empty!");var c=this._internalDocument.createContainerForType(a?this._TEXT_NODE_TYPE:this._CODE_NODE_TYPE).container;a=this._internalDocument.createNode(c.getDefaultChild());
c.addChild(a);b=this._internalDocument.insertAtPosition(c,b);b.insertionNotAllowed||(this._cursor.setPosition(a.startPosition()),this._cursor.onUpdate(!1,!0));return b.events},_treatSelection:function(){var a;this._cursor.hasSelection()&&(a=this._cursor.selectedText(),this._document.deleteTextAtCurrentPosition(f.BACKWARD_DELETE));return a},_coversFullParagraphs:function(a){return l.isAtStartOfContainer(a.startPosition)&&l.isAtEndOfContainer(a.endPosition)},_fixedSelectionInfo:function(){var a=this._cursor.selectionInfo();
a.isNull||(a=this._cursor.adjustSelection(a,!0),this._cursor.setPosition(a.startNode,a.startPos),this._cursor.fixAnchor(!0),this._cursor.setPosition(a.endNode,a.endPos),a=this._cursor.selectionInfo());return a}})})},"MW/rtc/plugins/language/matlab/sections/NavigateSectionProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/sections/NavigateSection","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{requires:function(){return{isApplicable:[],createInstance:["rtc.cursorcontroller",
"rtc.actionservice","rtc.view","rtc.code.sections.model","rtc.code.sections.view.containerutility"]}},createInstance:function(d,c,b,a,f){return new e(d,c,b,a,f)}})})},"MW/rtc/plugins/language/matlab/sections/NavigateSection":function(){define(["dojo/_base/declare","dojo/aspect","MW/rtc/abstract/AbstractPlugin","MW/rtc/model/Position"],function(h,e,g,d){return h(g,{_NEXT_SECTION_ACTION_ID:"rtc_navigate_next_section",_PREVIOUS_SECTION_ACTION_ID:"rtc_navigate_previous_section",_CHECK_FULLY_ONSCREEN:!0,
_SECTION_TOP_PERCENT:3,constructor:function(c,b,a,d,g){this._cursorController=c;this._actionService=b;this._view=a;this._sectionModel=d;this._sectionContainerUtility=g;c=[{id:this._NEXT_SECTION_ACTION_ID,enabled:!1,key:"ctrl_down",callback:this._nextSectionCallback.bind(this)},{id:this._PREVIOUS_SECTION_ACTION_ID,enabled:!1,key:"ctrl_up",callback:this._previousSectionCallback.bind(this)}];this._actionService.loadActions(c);this._updateActionState();this.own(e.after(this._sectionModel,"currentSectionChanged",
this._updateActionState.bind(this)))},_nextSectionCallback:function(){if(this._actionService.getAction(this._NEXT_SECTION_ACTION_ID).enabled)return this._nextSection()},_previousSectionCallback:function(){if(this._actionService.getAction(this._PREVIOUS_SECTION_ACTION_ID).enabled)return this._previousSection()},_updateActionState:function(){var c=null!=this._sectionModel.getNextSection(),b=null!=this._sectionModel.getPreviousSection();this._actionService.updateAction("rtc_navigate_next_section",{enabled:c});
this._actionService.updateAction("rtc_navigate_previous_section",{enabled:b})},_previousSection:function(){this._cursorController.clearSelection();var c=this._cursorController.getPositions()[0],b=this._sectionModel.getCurrentSection().start,a=b.getLineColumn();if(c.line+1!==a.line||c.column+1!==a.column)return this._setCursorToPosition(b);c=this._sectionModel.getPreviousSection();return!c||!c.start.getNode()?!0:this._setCursorToPosition(c.start)},_nextSection:function(){var c=this._sectionModel.getNextSection();
if(!c||!c.start.getNode())return!0;var c=c.start.getNode(),b=this._sectionModel.getCurrentSectionNumber(),a=this._sectionModel.getSection(b),e=null;this._cursorController.clearSelection();this._cursorController.setPositions([new d(c,0)]);var g=b+2,e=this._view.getClientHeight(),h=this._sectionContainerUtility.getSectionDimensions(b+1).height,g=this._sectionModel.getSection(g),n=null,p=n=!1;g&&(n=g.start.getNode(),n=this._view.isNodeInView(n,this._CHECK_FULLY_ONSCREEN),p=this._view.isNodeInView(c,
this._CHECK_FULLY_ONSCREEN));if(!n||!p)e=e>h?this._sectionContainerUtility.getSectionDimensions(b).height+h<e?a.start.getNode():c:c,this._view.scrollNodeToPercent(e,this._SECTION_TOP_PERCENT);return!0},_setCursorToPosition:function(c){c=c.getNode();this._cursorController.setPositions([new d(c,0)]);this._view.isNodeInView(c,this._CHECK_FULLY_ONSCREEN)||this._view.scrollNodeToPercent(c,this._SECTION_TOP_PERCENT);return!0}})})},"MW/rtc/plugins/language/matlab/sections/SectionBreakSectionContributorProvider":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/language/matlab/sections/SectionBreakSectionContributor","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.internaldocument","rtc.document","rtc.code.sections.model"]}},createInstance:function(d,c,b){return new e(d,c,b)}})})},"MW/rtc/plugins/language/matlab/sections/SectionBreakSectionContributor":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/model/DocumentConstants MW/rtc/model/DocumentEventUtilities MW/rtc/model/NodeUtilities MW/rtc/plugins/sectionbreak/model/SectionBreakNode".split(" "),
function(h,e,g,d,c,b,a,f){return h(d,{constructor:function(a,b,c){this._internalDocument=a;this._document=b;this._sectionModel=c;this.own(g.after(a,"onDocumentChanged",e.hitch(this,"_handleDocumentChanged"),!0));this.own(g.after(a,"onDocumentReset",e.hitch(this,"_handleDocumentReset")))},_handleDocumentChanged:function(a){a.some(function(a){return b.isLengthChangingEvent(a)},this)&&this._updateSections()},_handleDocumentReset:function(){this._updateSections()},_updateSections:function(){var a=this._getSectionsAsLineNodes();
this._sectionModel.resetSections(a)},_getSectionsAsLineNodes:function(){for(var b=[],c=null,d=null,e=this._internalDocument.getMaxLineNumber(),g=0;g<e;g+=1){var h=this._internalDocument.getLineNode(g),r=a.isInType(h,f);r||(c||(c=h),d=h);h=c&&d;if((r||g===e-1)&&h)b.push({startNode:c,endNode:d}),d=c=null}return b}})})},"MW/rtc/plugins/language/matlab/sections/SectionModelProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/sections/SectionModel","MW/rtc/core/provider/PluginProvider"],
function(h,e,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.internaldocument","rtc.document","rtc.cursor"]}},createInstance:function(d,c,b){return new e(d,c,b)}})})},"MW/rtc/plugins/language/matlab/sections/SectionModel":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect mw-log/Log MW/rtc/abstract/AbstractPlugin MW/rtc/model/NodeUtilities".split(" "),function(h,e,g,d,c,b){return h(c,{constructor:function(a,b,c){this._internalDocument=
a;this._document=b;this._cursor=c;this._sections=[];this._lastLine=null;this._currentSectionNumber=-1;this.own(g.after(c,"onChange",e.hitch(this,"_updateCurrentSection")))},_areSectionsEqual:function(a){return this._sections.length!==a.length?!1:!this._sections.some(function(b,c){var d=a[c];if(b.start.getNode()!==d.startNode||b.end.getNode()!==d.endNode)return!0},this)},resetSections:function(a){this._areSectionsEqual(a)?-1===this._currentSectionNumber&&this._updateCurrentSection():(this._clearSections(),
this._sections=this._convertFromNodesToPositions(a),this._lastLine=null,this._currentSectionNumber=-1,this._updateCurrentSection(),this.onModelUpdated())},_convertFromNodesToPositions:function(a){return a.map(function(a){return{start:this._document.createLinePosition(a.startNode),end:this._document.createLinePosition(a.endNode)}},this)},setAttribute:function(a,b){this._setAttribute(a,b);this.onAttributesUpdated(a)},setAttributeOnReset:function(a,b){this._setAttribute(a,b)},_setAttribute:function(a,
b){d.assert("start"!==a&&"end"!==a,"You cannot use start/end as they are reserved attributes!");this._sections.forEach(function(c,d){c[a]=b.hasOwnProperty(d)?b[d]:null})},getFirstSectionWithAttributeData:function(a){var b=null;this._sections.some(function(c){return(b=c[a])&&0<b.length});return b},_clearSections:function(){this._sections.forEach(function(a){this._document.deletePosition(a.start);this._document.deletePosition(a.end)},this);this._sections=[]},onModelUpdated:function(){},onAttributesUpdated:function(){},
getSections:function(){return this._sections},getSection:function(a){if(0>a||a>=this._sections.length)return null;a=this._sections[a];return this._isSectionValid(a)?a:null},_isSectionValid:function(a){return a&&a.start&&a.start.isValid()&&a.end&&a.end.isValid()},getSectionNumberForNode:function(a){a=b.getLineNumberForNode(a,this._internalDocument);return this.getSectionNumberForLine(a)},getSectionForNode:function(a){a=this.getSectionNumberForNode(a);return this.getSection(a)},getSectionNumberForLine:function(a){var b=
-1;this._sections.some(function(c,d){if(this._isLineInSection(c,a))return b=d,!0},this);return b},getSectionForLine:function(a){a=this._internalDocument.getLineNode(a);if(!a)return null;a=this.getSectionNumberForNode(a);return this.getSection(a)},_isLineInSection:function(a,b){return b>=a.start.getLine()-1&&b<=a.end.getLine()-1},_updateCurrentSection:function(){var a=this._cursor.getNode().rootContainer();if(!(this._lastLine===a&&-1<this._currentSectionNumber)){var b=a?this.getSectionNumberForNode(a):
-1;this._lastLine=a;b!==this._currentSectionNumber&&(this._currentSectionNumber=b,this.currentSectionChanged())}},currentSectionChanged:function(){},getCurrentSectionNumber:function(){return this._currentSectionNumber},getCurrentSection:function(){return 0>this._currentSectionNumber?null:this._sections[this._currentSectionNumber]},getNextSection:function(){return 0>this._currentSectionNumber||this._currentSectionNumber===this._sections.length-1?null:this._sections[this._currentSectionNumber+1]},getPreviousSection:function(){return 0>
this._currentSectionNumber||0===this._currentSectionNumber?null:this._sections[this._currentSectionNumber-1]},getLastSectionNumber:function(){return this._sections.length-1},destroy:function(){this.inherited(arguments);this._clearSections()}})})},"MW/rtc/plugins/language/matlab/sections/SectionContainerUtilityProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/sections/SectionContainerUtility","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{isApplicable:function(){return!0},
requires:function(){return{isApplicable:[],createInstance:["rtc.scrollpane"]}},createInstance:function(d){return new e(d)}})})},"MW/rtc/plugins/language/matlab/sections/SectionContainerUtility":function(){define(["dojo/_base/declare","dojo/dom-geometry","dojo/query!lite"],function(h,e,g){return h(null,{constructor:function(d){this._scrollPane=d},getSectionDimensions:function(d){var c=this.getSectionBlock(d);if(!c)return null;d={top:0,left:0,height:0,width:0};var c=c.getBoundingClientRect(),b=this._scrollPane.getBoundingClientRect();
d.top=c.top-b.top;d.left=c.left-b.left;d.height=c.height;d.width=c.width;return d},getSectionNumberByCoordinate:function(d){for(var c=this._getSectionBlocks(),b=0;b<c.length;b+=1){var a=e.getMarginBox(c[b]);if(d.y>=a.t&&d.y<=a.t+a.h)return b}return-1},getClosestSectionNumberByCoordinate:function(d){var c=this._getSectionBlocks();if(0===c.length)return-1;for(var b=0,a=0;a<c.length;a+=1){var f=e.getMarginBox(c[a]);if(d.y<f.t)break;b=a}return b},getSectionBlock:function(d){return this._getSectionBlocks()[d]},
_getSectionBlockClass:function(){return"SectionBlock"},_getSectionBlocks:function(){return g(".rootNode \x3e ."+this._getSectionBlockClass(),this._scrollPane)}})})},"MW/rtc/plugins/language/matlab/sections/StaleSectionModelProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/sections/StaleSectionModel","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:"rtc.internaldocument rtc.code.sections.model rtc.document rtc.code.codechange rtc.code.codecontent rtc.embeddedoutputs.statehandler rtc.allfunctionnotifier".split(" ")}},
createInstance:function(d,c,b,a,f,g,h){return new e(d,c,b,a,f,g,h)},destroyInstance:function(d){this.inherited(arguments);d.destroy()}})})},"MW/rtc/plugins/language/matlab/sections/StaleSectionModel":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/browsersupport/BrowserSupportUtilities MW/rtc/model/CodeUtilities MW/rtc/model/NodeUtilities MW/rtc/plugins/functionnotifier/FunctionStateConstants MW/rtc/plugins/language/matlab/functions/FunctionAttributeConstants mw-utils/Utils".split(" "),
function(h,e,g,d,c,b,a,f,k,l){return h(d,{constructor:function(a,b,c,d,f,h,k){this._sectionModel=b;this._stateHandler=h;this._codeChangeService=d;this._document=c;this._codeContent=f;this._internalDocument=a;this._functionNotifier=k;this._upperBoundaryPosition=this._previousFunctionRange=null;this._staleNodePositions=[];this._latestCompletedSectionNumber=null;this._isEnabled=!0;this.own(g.after(this._internalDocument,"onDocumentReset",e.hitch(this,"_clearStaleNodes")));this.own(g.after(this._codeChangeService,
"onCodeChanged",e.hitch(this,"_codeChangeListener"),!0));this.own(g.after(this._stateHandler,"stateChanged",e.hitch(this,"_stateChangeListener"),!0));this.own(g.after(this._functionNotifier,"onValidFunctionsChange",e.hitch(this,"_handleValidFunctionChange"),!0))},destroy:function(){this._staleNodePositions=[];this._upperBoundaryPosition&&this._document.deletePosition(this._upperBoundaryPosition)},onModelUpdated:function(){},getEnablement:function(){return this._isEnabled},setEnablement:function(a){var b=
this._isEnabled;this._isEnabled=a;return b},isSectionStale:function(b){b=this._sectionModel.getSection(b);if(!b)return!1;var c=a.getParagraphNodesInRangeAsSet(b.start.getNode(),b.end.getNode());return this._staleNodePositions.some(function(a){return c.has(a.position.getNode())})},getStaleSectionNumbers:function(){return l.unique(this.getStaleNodes().map(function(a){return this._sectionModel.getSectionNumberForNode(a)},this))},_clearDeadStaleNodes:function(){this._staleNodePositions=this._staleNodePositions.filter(function(a){if(a.position.getNode().parent)return!0;
this._document.deletePosition(a.position)},this)},_clearStaleNodes:function(){this._staleNodePositions=this._clearStaleNodePositions();this.onModelUpdated()},_clearStaleNodePositions:function(){return this._staleNodePositions.filter(function(a){this._document.deletePosition(a.position)},this)},_codeChangeListener:function(a){this._isEnabled&&(this._removeMergedStaleNodes(),this._clearDeadStaleNodes(),a=a.filter(function(a){return b.isCodeContainer(a)&&!this._nodeInFunction(a)},this),this._setNodesStale(a),
this.onModelUpdated(a))},_removeMergedStaleNodes:function(){var a=c.createSet();this._staleNodePositions=this._staleNodePositions.filter(function(b){var c=b.position.getNode();if(!a.has(c))return a.add(c),!0;this._document.deletePosition(b.position)},this)},_handleValidFunctionChange:function(a){this._clearStalenessFromFunctions(a);this.onModelUpdated()},_clearStalenessFromFunctions:function(a){a=this._getFunctionRange(a);if(this._hasFunctionRangeShrunk(a)){var b=this._getRangeDiffForFunctions(a);
this._setPreviousFunctionNodesStale(b)}else this._clearStalenessFromLineRange(a);this._updateUpperBoundaryPosition(a);this._previousFunctionRange=a},_getFunctionRange:function(a){var b=this._getFunctionsFromEvent(a),c=a=null;b&&0<b.length&&b[0].isTopLevelFunction?(a=[b[0]],c=b.slice(1)):c=b;b=null;c&&0<c.length&&(b=c);if(!a&&!b)return null;c={startLine:null,endLine:null};a&&(c.startLine=0,c.endLine=a[0].endLine-1);b&&(a||(c.startLine=b[0].startLine-1),c.endLine=this._internalDocument.getMaxLineNumber());
return c},_getFunctionsFromEvent:function(a){var b;switch(a.type){case f.VALID_FUNCTIONS_REMOVED:b=[];break;case f.VALID_FUNCTIONS_ADDED:case f.VALID_FUNCTIONS_CHANGED:case f.FUNCTIONS_ON_VALID_DOCUMENT_CHANGE:b=a.validFunctions}return b},_hasFunctionRangeShrunk:function(a){if(!a)return!0;if(!this._upperBoundaryPosition||!this._upperBoundaryPosition.isValid())return!1;a=a.startLine;var b=this._upperBoundaryPosition.getLine();if(-1===b)return!1;if(a>b)return!0},_getRangeDiffForFunctions:function(a){if(!a)return this._previousFunctionRange;
a=a.startLine;return{startLine:this._upperBoundaryPosition.getLine(),endLine:a-1}},_updateUpperBoundaryPosition:function(a){this._upperBoundaryPosition&&this._document.deletePosition(this._upperBoundaryPosition);a&&(this._upperBoundaryPosition=this._document.createLinePositionInLine(a.startLine))},_clearStalenessFromLineRange:function(a){a&&(this._staleNodePositions=this._staleNodePositions.filter(function(b){if(b.position.getLineColumn().line-1<a.startLine||b.position.getLineColumn().line-1>a.endLine)return!0;
this._document.deletePosition(b.position);return!1},this))},_setPreviousFunctionNodesStale:function(a){if(a){for(var c=[],d=a.startLine;d<=a.endLine;d+=1){var e=this._internalDocument.getLineNode(d);b.isCodeContainer(e)&&c.push(e)}this._setNodesStale(c)}},_nodeInFunction:function(a){if(!this._previousFunctionRange)return!1;var b=this._internalDocument.getLineNumber(a)>=this._previousFunctionRange.startLine,c=this._internalDocument.getLineNumber(a)<=this._previousFunctionRange.endLine;if(b&&c)return!0;
a=this._sectionModel.getSectionForNode(a);return!a?!1:!!a[k.TOP_LEVEL_FUNCTION_ATTRIBUTE]||!!a[k.LOCAL_FUNCTION_ATTRIBUTE]},_setNodesStale:function(a){if(0!==a.length){var b=this.getStaleNodes();a.forEach(function(a){this._setNodeStale(a,b)},this)}},_setNodeStale:function(a,b){var c=b.indexOf(a);0>c?(c={position:this._document.createLinePosition(a),count:2},this._staleNodePositions.push(c),b.push(a)):this._staleNodePositions[c].count+=1},getStaleNodes:function(){return this._staleNodePositions.map(function(a){return a.position.getNode()})},
_stateChangeListener:function(a,b){switch(a){case this._stateHandler.CHANGE_TYPE_ENUM.EVAL_INITIALIZED:this._normalizeStaleness();this._clearEmptySections();this.onModelUpdated();break;case this._stateHandler.CHANGE_TYPE_ENUM.SECTION_EVAL_COMPLETE:this._clearEmptyLinesInSectionNumber(b);this._setSectionUpToDate(b);this._latestCompletedSectionNumber=b;this.onModelUpdated();break;case this._stateHandler.CHANGE_TYPE_ENUM.EVAL_COMPLETE:this._updateMissedSections(b.requestedEvaluationRange,b.didRunToCompletion,
this._latestCompletedSectionNumber),this._latestCompletedSectionNumber=null,this._normalizeStaleness()}},_sectionIsEmpty:function(c){c=a.getParagraphNodesInRange(c.start.getNode(),c.end.getNode());c=c.filter(b.isCodeContainer,b);return!this._codeContent.lineNodesContainCode(c)},_clearEmptySections:function(){this._sectionModel.getSections().forEach(function(a,b){this._sectionIsEmpty(a)&&this._setSectionUpToDate(b)},this)},_setSectionUpToDate:function(a){(a=this._sectionModel.getSection(a))&&this._setRangeUpToDate(a.start.line,
a.end.line)},_setRangeUpToDate:function(a,b){this._staleNodePositions=this._staleNodePositions.filter(function(c){var d=!0,e=c.position.line;a<=e&&e<=b&&(d=this._setStaleNodeUpToDate(c));return d},this)},_setStaleNodeUpToDate:function(a){a.count-=1;return 0===a.count?(this._document.deletePosition(a.position),!1):!0},_updateMissedSections:function(a,b,c){if(b&&null!==c&&(b=this._sectionModel.getSection(c+1)))b=b.start.line,a=a.getEndPosition().line,b<=a&&(this._setRangeUpToDate(b,a),this.onModelUpdated())},
_normalizeStaleness:function(){this._staleNodePositions.forEach(function(a){a.count=0<a.count?1:0})},_clearEmptyLinesInSectionNumber:function(b){(b=this._sectionModel.getSection(b))&&a.getParagraphNodesInRange(b.start.getNode(),b.end.getNode()).forEach(function(a){this._lineIsEmpty(a)&&(this._staleNodePositions=this._staleNodePositions.filter(function(b){if(b.position.getNode()!==a)return!0;this._document.deletePosition(b.position)},this))},this)},_lineIsEmpty:function(a){return!this._codeContent.lineNodesContainCode([a])}})})},
"MW/rtc/plugins/language/matlab/tokenizer/MatlabTokensPluginProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/language/matlab/tokenizer/MatlabTokensPlugin"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/plugins/language/matlab/tokenizer/MatlabTokensPlugin":function(){define("dojo/_base/declare dojo/aspect dojo/_base/lang MW/rtc/abstract/AbstractPlugin MW/rtc/model/DocumentConstants MW/rtc/model/DocumentEventUtilities ./MatlabTokenUtilities ./MatlabTokenizer".split(" "),
function(h,e,g,d,c,b,a,f){return h(d,{constructor:function(a,b){this._internalDocument=a;this._document=b;this._tokenizer=new f;this._tokensData={tokens:{},executableLines:[],lastEventStartLine:0};this.own(e.after(this._internalDocument,"onDocumentReset",g.hitch(this,"_initializeLines")));this.own(e.after(this._internalDocument,"onDocumentChanged",g.hitch(this,"_handleDocumentChanged"),!0))},_initializeLines:function(){var a=this._internalDocument.getMaxLineNumber()-1,b=this._document.getCodeText();
this._tokenizer.initializeLines(b);this._emitEvent(0,a,a,!1)},_emitEvent:function(a,b,c,d){var e=this._tokenizer.getTokenMap(),f=this._tokenizer.getExecutableLineData();this._tokensData={tokens:e,executableLines:f,startLine:a,endLine:b,eventEndLine:c,isUndoRedo:d};this.onUpdate(this._tokensData)},_handleDocumentChanged:function(a){var c=this._findDeletionEvent(a);if(c)this.onDelete(c.startLine,c.endLine);c=b.getCoalescedDocumentMutations(a);a=a[0].isUndoRedo;var d=Math.min(c[0].getFromRange().start,
c[0].getToRange().start),c=Math.max(c[c.length-1].getFromRange().end,c[c.length-1].getToRange().end);this._updateTokens(d,c,a)},_findDeletionEvent:function(a){var b=null;a.some(function(a){if(a.type===c.DELETION_EVENT)return b=a,!0},this);return b},onDelete:function(a,b){},_updateTokens:function(a,b,c){var d=this.retokenizeFromLine(this._document.getCodeText(),a,b);this._emitEvent(a,d,b,c)},retokenizeFromLine:function(a,b,c){return this._tokenizer.retokenize(a,b,c)},onUpdate:function(a){},getTokensData:function(){return this._tokensData},
getTokensOnLine:function(a){return this._tokensData.tokens[a]},resetTokenStateForLine:function(a){this._tokenizer.resetStartingTokenizerStateForLine(a)},getFirstTokenOnLine:function(a){return this._tokenizer.getFirstToken(a)},getTokenOnLineColumn:function(a,b){return this._tokenizer.getTokenOnLineColumn(a,b)},getNextTokenOf:function(a){return this._tokenizer.getNextToken(a)},getPreviousTokenOf:function(a,b){return this._tokenizer.getPreviousToken(a,b)},getNumberOfTokensOnLine:function(a){return this._tokenizer.getNumberOfTokensOnLine(a)},
getLexStateForLine:function(a){return this._tokenizer.getLexStateForLine(a)},isLineContinuation:function(a){return this._tokenizer.isLineContinuation(a)},isInComment:function(b,c){var d=this.getTokenOnLineColumn(b,c);return!!d&&a.isCommentToken(d)},isUnmatchedStartToken:function(b){var c=!1,d=[],e=!0;this._getAllBlockTokens().forEach(function(f){if(b!==f)if(a.isTokenStartOfBlock(f))d.push(f);else if(0<d.length)d.pop();else{if(c)return e=!1}else c=!0});return e},_getAllBlockTokens:function(){var b=
this.getTokensData().tokens,c=[],d;for(d in b)for(var e=b[d],f=0;f<e.length;f++){var g=e[f];(a.isTokenStartOfBlock(g)||a.isTokenEndOfBlock(g))&&c.push(g)}return c},findStartOfBlockOnLine:function(b){var c=0;b=this.getTokensData().tokens[b];for(var d=b.length-1;0<=d;d--){var e=b[d];if(a.isTokenStartOfBlock(e)){if(0===c)return e;c-=1}else a.isTokenEndOfBlock(e)&&(c+=1)}return null},isInBlockComment:function(b,c){var d=this.getTokenOnLineColumn(b,c);return!!d&&a.isBlockCommentToken(d)},isInString:function(b,
c){var d=this.getTokenOnLineColumn(b,c);return!!d&&a.isMatlabStringToken(d)},destroy:function(){this._tokensData={};this._tokenizer.destroy();this._tokenizer={}}})})},"MW/rtc/plugins/language/matlab/nonlocalvariablehighlighting/NonlocalVariableHighlightingProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./NonlocalVariableHighlighting"],function(h,e,g){return h(e,{requires:function(){return{isApplicable:[],createInstance:["rtc.internaldocument","matlab.code.variables.service",
"rtc.view.decoration"]}},createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/plugins/language/matlab/nonlocalvariablehighlighting/NonlocalVariableHighlighting":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin","MW/rtc/view/decoration/DecorationUtilities"],function(h,e,g,d,c){return h(d,{_NONLOCAL_VARIABLE_HIGHLIGHT:["nonlocalVariableHighlighting"],constructor:function(b,a,c){this._internalDocument=b;this._variableService=a;this._decorator=
c.createDecorator();this.own(g.after(this._variableService,"onVariablesUpdated",e.hitch(this,"_handleVariablesUpdated")))},_handleVariablesUpdated:function(){var b=this._variableService.getNonlocalVariableInstances();if(null!==b){var a=this._getDecorationInfo(b);c.decorateAllCodeLines(function(b,c){this._decorator.updateClasses(c,a[b]||[])}.bind(this),this._decorator,this._internalDocument)}},_getDecorationInfo:function(b){var a={};b.forEach(function(b){var c=b.startLine,d=a[c];d||(d=[],a[c]=d);b=
this._internalDocument.getRangeForLineColumn(b.startLine+1,b.startColumn+1,b.endLine+1,b.endColumn+1);d.push({range:b,classList:this._NONLOCAL_VARIABLE_HIGHLIGHT})},this);return a}})})},"MW/rtc/plugins/language/matlab/variablehighlighting/messagebar/VariableHighlightMessageLayerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./VariableHighlightMessageLayer"],function(h,e,g){return h(e,{requires:function(){return{isApplicable:[],createInstance:["matlab.code.variables.plugin",
"rtc.internaldocument"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/plugins/language/matlab/variablehighlighting/messagebar/VariableHighlightMessageLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/browsersupport/BrowserSupportUtilities MW/rtc/plugins/messagebar/MessageBarLayer ./TooltipTextUtils".split(" "),function(h,e,g,d,c,b){return h(c,{_VARIABLE_HIGHLIGHT_LAYER:"variableHighlightLayer",_VARIABLE:"variableMarker",_HIGHLIGHT_STYLE:"highlightedVariable",
constructor:function(a,b){this._internalDocument=b;this.own(g.after(a,"onModelUpdated",e.hitch(this,"_updateMessages"),!0))},getLayerName:function(){return this._VARIABLE_HIGHLIGHT_LAYER},_updateMessages:function(a){this.clearLayer(this._VARIABLE_HIGHLIGHT_LAYER);this._getLinesWithHighlights(a).forEach(e.hitch(this,function(a,c){var d=this._internalDocument.getLineNode(c).getCodeText(),g=e.hitch(this,function(){return b.createTooltipMessageForLine(d,a,this._HIGHLIGHT_STYLE)});this.addMessage(this._VARIABLE_HIGHLIGHT_LAYER,
this._VARIABLE,g,!1,a[0].startLine+1,a[0].startColumn+1)}));this.updateLayer(this._VARIABLE_HIGHLIGHT_LAYER)},_getLinesWithHighlights:function(a){var b=d.createMap();a.forEach(function(a){var c=a.startLine;if(b.has(c)){var d=b.get(c);d.push(a);b.set(c,d)}else b.set(c,[a])});return b}})})},"MW/rtc/plugins/language/matlab/variablehighlighting/messagebar/TooltipTextUtils":function(){define(["dojo/_base/lang","dojo/dom-construct","MW/rtc/model/DocumentUtilities"],function(h,e,g){return{_MAX_LINE_LENGTH:75,
_TOOLTIP_CSS_CLASS:"tooltipContent",_ELLIPSE:"...",createTooltipMessageForLine:function(d,c,b){var a=[];c.forEach(function(c){a+=this._trimLineAndStyleRange(d,{startColumn:c.startColumn,endColumn:c.endColumn},b)+e.create("br").outerHTML},this);return e.create("div",{innerHTML:a,className:this._TOOLTIP_CSS_CLASS})},_trimLineAndStyleRange:function(d,c,b){var a=g.getLeadingWhitespace(d);d=d.trim();var e=c.startColumn-a;c=c.endColumn-a;d=this._trimLineAroundRange(d,{startColumn:e,endColumn:c});a=d.lineStart;
d=d.trimmedLine;e-=a;c-=a;b=this._styleRange(d.substring(e,c),b);return d.substring(0,e)+b.outerHTML+d.substring(c)},_trimLineAroundRange:function(d,c){var b=d,a=0;if(d.length>this._MAX_LINE_LENGTH){var e=c.startColumn,g=c.endColumn,h=d.length,n=h-g,p=Math.floor((this._MAX_LINE_LENGTH-(g-e))/2),m=p,q=p;e<n&&e<p&&(q+=p-e);q+g<h&&(b=b.substring(0,g+q)+this._ELLIPSE);n<e&&n<p&&(m+=p-n);e>m&&(a=e-m,b=this._ELLIPSE+b.substring(a+3))}return{trimmedLine:b,lineStart:a}},_styleRange:function(d,c){return e.create("span",
{className:c,innerHTML:d})}}})},"MW/rtc/plugins/language/matlab/variablehighlighting/view/VariableHighlightViewProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./VariableHighlightView"],function(h,e,g){return h(e,{requires:function(){return{isApplicable:[],createInstance:["matlab.code.variables.plugin","rtc.view"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/plugins/language/matlab/variablehighlighting/view/VariableHighlightView":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-construct dojo/dom-style dojo/dom-attr MW/rtc/abstract/AbstractPlugin".split(" "),
function(h,e,g,d,c,b,a){return h(a,{_VARIABLE_HIGHLIGHT_LAYER:"variableHighlightLayer",_VARIABLE_HIGHLIGHT:"variableHighlight",_VARIABLE_HIGHLIGHT_LAYER_HIDDEN:"variableHighlight_hidden",_VARIABLE_HIGHLIGHT_LAYER_VISIBLE:"variableHighlight_visible",constructor:function(a,b){this._view=b;this._layer=this._createLayer();b.addLayer(this._layer);this.own(g.after(a,"onModelUpdated",e.hitch(this,"_highlightAllVariables"),!0))},destroy:function(){this.inherited(arguments);this._removeAllHighlights();d.destroy(this._layer)},
_createLayer:function(){return d.create("div",{"class":this._VARIABLE_HIGHLIGHT_LAYER,"data-testid":this._VARIABLE_HIGHLIGHT_LAYER_HIDDEN})},_highlightAllVariables:function(a){if(a.length){var c=this._createLayer();a.forEach(function(a){var b=this._view.getCoordinateForLineColumn(a.startLine+1,a.startColumn+1);a=this._view.getCoordinateForLineColumn(a.endLine+1,a.endColumn+1);this._highlightVariable(b,a,c)},this);this._view.switchLayer(c,this._layer);this._layer=c;b.set(this._layer,"data-testid",
this._VARIABLE_HIGHLIGHT_LAYER_VISIBLE)}else this._removeAllHighlights()},_removeAllHighlights:function(){b.set(this._layer,"data-testid",this._VARIABLE_HIGHLIGHT_LAYER_HIDDEN);d.empty(this._layer)},_highlightVariable:function(a,b,e){e=d.create("div",{"class":this._VARIABLE_HIGHLIGHT},e);c.set(e,{top:a.y+"px",height:a.height+"px",left:a.x+"px",width:b.x-a.x+"px"})}})})},"MW/rtc/plugins/language/matlab/variablehighlighting/VariableHighlightProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"./VariableHighlight"],function(h,e,g){return h(e,{requires:function(){return{createInstance:"rtc.internaldocument rtc.eventhandler rtc.view rtc.cursor matlab.code.variables.service rtc.actionservice".split(" ")}},createInstance:function(d,c,b,a,e,h){return new g(d,c,b,a,e,h)}})})},"MW/rtc/plugins/language/matlab/variablehighlighting/VariableHighlight":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/model/CodeUtilities MW/rtc/model/DocumentUtilities MW/rtc/plugins/language/matlab/variableservice/VariableUtilities MW/rtc/view/ViewEventUtilities".split(" "),
function(h,e,g,d,c,b,a,f){return h(d,{_UPDATE_TIMER_LENGTH:1333,constructor:function(a,b,c,d,f,h){this._internalDocument=a;this._eventHandler=b;this._view=c;this._cursor=d;this._variableService=f;this._actionService=h;this.own(g.after(this._variableService,"onEnable",e.hitch(this,"_setListeners")));this.own(g.after(this._variableService,"onDisable",e.hitch(this,"_removeListeners")));this.own(g.after(this._variableService,"onVariablesUpdated",e.hitch(this,"_clearAllAndUpdateNow")));this._handleArray=
[];this._setListeners();this._showTimer=null;this._suspend=!1;a=[{id:"rtc_variable_highlighting_escape",key:"escape",enabled:!0,callback:e.hitch(this,"_removeHighlights")}];this._actionService.loadActions(a);this._highlightedVariableInstances=[]},_setListeners:function(){0===this._handleArray.length&&(this._handleArray.push(g.after(this._eventHandler,"onMouseDown",e.hitch(this,"_updateNow"))),this._handleArray.push(g.after(this._cursor,"selectAll",e.hitch(this,"_updateNow"))),this._handleArray.push(g.after(this._cursor,
"setPosition",e.hitch(this,"_update"),!0)),this._handleArray.push(g.before(this._cursor,"movePosition",e.hitch(this,"_updateLater"))),this._handleArray.push(g.after(this._internalDocument,"onPreDocumentChanged",e.hitch(this,"_pendingDocumentChanged"))),this._handleArray.push(g.after(this._internalDocument,"onDocumentChanged",e.hitch(this,"_clearAllAndUpdateNow"))),this._handleArray.push(g.after(this._view,"onLayoutChange",e.hitch(this,"_update"))),this._handleArray.push(g.after(this._view,"onViewUpdated",
e.hitch(this,"_handleViewUpdated"),!0)))},_handleViewUpdated:function(a){(f.hasWidthEvent(a)||f.hasRenderEvent(a))&&this._update()},_drawHighlights:function(){this.onModelUpdated(this._highlightedVariableInstances)},_removeHighlights:function(){this._clearCache();this.onModelUpdated([])},onModelUpdated:function(a){},_clearCache:function(){this._highlightedVariableInstances=[]},_updateLater:function(){this._showTimer&&clearTimeout(this._showTimer);this._clearCache();this._showTimer=setTimeout(e.hitch(this,
"_updateNow"),this._UPDATE_TIMER_LENGTH)},_updateNow:function(){var a=this._getVariableUnderCursor();this._highlightedVariableInstances=this._variableService.getVariableInstances(a);1>=this._highlightedVariableInstances.length&&(this._highlightedVariableInstances=[]);this._drawHighlights()},_update:function(){this._suspend||this._updateNow()},_pendingDocumentChanged:function(){this._suspend=!0},_clearAllAndUpdateNow:function(){this._suspend=!1;this._clearCache();this._drawHighlights();this._updateNow()},
destroy:function(){this._removeListeners()},_removeListeners:function(){this._handleArray.forEach(function(a){a.remove()});this._handleArray=[]},_getVariableUnderCursor:function(){if(!c.isCodeContainer(this._cursor.position.getNode()))return null;var d=b.getWordAtPosition(this._internalDocument,this._cursor.position);return!d||a.selectionSpansOutsideVariable(this._cursor,d)?null:d}})})},"MW/rtc/plugins/language/matlab/variableservice/VariableUtilities":function(){define([],function(){return{isSameVariable:function(h,
e){return!this.isSameVariableLocation(h,e)||h.text!==e.text?!1:!0},isSameVariableLocation:function(h,e){return!h||!e?!1:h.startLineCol.line===e.startLineCol.line&&h.endLineCol.line===e.endLineCol.line&&h.startLineCol.column===e.startLineCol.column},getUpdatedVariableStructure:function(h){return!h?null:{endLineCol:{column:h.endColumn,line:h.endLine},startLineCol:{column:h.startColumn,line:h.startLine},text:h.text}},selectionSpansOutsideVariable:function(h,e){if(!h.hasSelection())return!1;if(!e)return!0;
var g=h.getSelectionLineColumn(),d=e.startLineCol.line;if(g.start.line-1!==d||g.end.line-1!==d)return!0;d=g.start.column;g=g.end.column;if(d>g)var c=d,d=g,g=c;return d-1<e.startLineCol.column||g-1>e.endLineCol.column?!0:!1}}})},"MW/rtc/plugins/language/matlab/variablerenaming/VariableRenamingControllerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./VariableRenamingController"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.actionservice",
"matlab.code.variables.rename.model","matlab.code.variables.rename.view","rtc.tooltipservice"]}},createInstance:function(d,c,b,a){return new g(d,c,b,a)}})})},"MW/rtc/plugins/language/matlab/variablerenaming/VariableRenamingController":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin"],function(h,e,g,d){return h(d,{constructor:function(c,b,a,d){this._variableRenamingModel=b;this._tooltipService=d;this._variableRenamingView=a;this.own(g.after(this._variableRenamingModel,
"onModelUpdated",e.hitch(this,"_checkRenaming")));this.own(g.after(this._variableRenamingModel,"exitRenaming",e.hitch(this,"_hideTooltip")));b=[{id:"rtc_variable_renaming_action",key:"shift_enter",platformKey:{mac:"shift_enter"},enabled:!0,callback:e.hitch(this,"_doRenameCallback")},{id:"rtc_variable_renaming_escape",key:"escape",enabled:!0,callback:e.hitch(this,"_notRenamingCallback")}];c.loadActions(b);this._isRenaming=!1},_checkRenaming:function(){this._isRenaming=!1;this._variableRenamingModel.isRenaming()?
this._renaming():this._notRenaming()},_renaming:function(){this._tooltipServiceHandle=this._tooltipService.requestTooltip(e.hitch(this,"_renamingCallback"),e.hitch(this,"_notRenamingCallback"),this._tooltipService.PRIORITY.PROMPT)},_notRenaming:function(){this._variableRenamingModel.notRenaming();this._variableRenamingView.closeTooltip()},_renamingCallback:function(){this._isRenaming=!0;this._variableRenamingModel.renaming();var c=this._variableRenamingModel.getCurrentVariable(),b=this._variableRenamingModel.getLastVariable();
this._variableRenamingView.showToolTip(b,c,c.otherInstances.length+1)},_hideTooltip:function(){this._variableRenamingView.closeTooltip();this._isRenaming=!1;this._tooltipServiceHandle&&(this._tooltipServiceHandle.remove(),this._tooltipServiceHandle=null)},destroy:function(){this._variableRenamingView.closeTooltip()},_doRenameCallback:function(){return this._isRenaming&&this._variableRenamingView.isTooltipOpen()?(this._variableRenamingModel.doRename(),!0):!1},_notRenamingCallback:function(){return this._isRenaming?
(this._variableRenamingModel.exitRenamingCompletely(),this._hideTooltip(),!0):!1}})})},"MW/rtc/plugins/language/matlab/variablerenaming/VariableRenamingModelProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./VariableRenamingModel"],function(h,e,g){return h(e,{requires:function(){return{isApplicable:[],createInstance:["rtc.internaldocument","rtc.cursor","rtc.document","matlab.code.variables.service","matlab.code.variables.rename.utility"]}},createInstance:function(d,
c,b,a,e){return new g(d,c,b,a,e)}})})},"MW/rtc/plugins/language/matlab/variablerenaming/VariableRenamingModel":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/model/CodeUtilities MW/rtc/model/DocumentUtilities MW/rtc/model/PositionUtilities MW/rtc/plugins/language/matlab/variableservice/VariableServiceUtilities MW/rtc/plugins/language/matlab/variableservice/VariableUtilities".split(" "),function(h,e,g,d,c,b,a,f,k){return h(d,{_EMPTY_BLOCK_TYPE_FOR_MERGE_WITH_LAST_BLOCK:[""],
_VARIABLE_NAME_REGEXP:/[a-zA-Z][a-zA-Z0-9_]*/,constructor:function(a,b,c,d,e){this._internalDocument=a;this._cursor=b;this._document=c;this._variableService=d;this._variableRenamingUtility=e;this._setListeners();this._renamingVariable=this._variableCache=this._lastVariable=null;this._inUndoRedoState=!1},onModelUpdated:function(){},exitRenaming:function(){},getCurrentVariable:function(){return this._renamingVariable},getLastVariable:function(){return this._lastVariable},_setListeners:function(){this._handleArray=
[];this._handleArray.push(g.after(this._internalDocument,"onDocumentChanged",e.hitch(this,"_documentChanged"),!0));this._handleArray.push(g.after(this._internalDocument,"onDocumentReset",e.hitch(this,"_documentChanged"),!0));this._handleArray.push(g.after(this._cursor,"onChange",e.hitch(this,"_cursorChanged")));this._handleArray.push(g.after(this._variableService,"EDSUpdateToDate",e.hitch(this,"_documentChanged"),!0));this._variableService.onEnable()},_documentChanged:function(a){a&&(a[0]||{}).isUndoRedo?
(this._clearRenamingObjects(),this._inUndoRedoState=!0):(this._inUndoRedoState=!1,this._lastVariable&&!this._isCodeLine(this._lastVariable)?this._clearVariables():(a=this._getCurrentVariable(),this._updateModel(a)))},_cursorChanged:function(){if(!this._inUndoRedoState){var a=this._getCurrentVariable();k.selectionSpansOutsideVariable(this._cursor,a)||this._hasCursorMovedToAnotherLine(a)?this._clearRenamingObjects():this._updateModel(a)}},_getCurrentVariable:function(){var a=b.getWordAtPosition(this._internalDocument,
this._cursor.position);if(!a||-1===a.text.search(this._VARIABLE_NAME_REGEXP))return null;this._variableRenamingUtility.isLastVariablePositionInvalid(this._lastVariable)&&this._clearVariables();a=this._isSameAsLastVariable(a)?this._createNewVariableUsingLastVariable(a):this._createCurrentVariableWithLivePositions(a);return!a?null:k.isSameVariable(this._renamingVariable,a)?this._renamingVariable:this._variableRenamingUtility.updateVariableAndInstancesWithLivePosition(a)},_isSameAsLastVariable:function(a){if(!this._lastVariable||
!a)return!1;var b=this._lastVariable.startPos.getLineColumn();this._lastVariable.startLineCol.line=b.line-1;this._lastVariable.startLineCol.column=b.column-1;b=this._lastVariable.endPos.getLineColumn();this._lastVariable.endLineCol.line=b.line-1;this._lastVariable.endLineCol.column=b.column-1;return k.isSameVariableLocation(a,this._lastVariable)},_createNewVariableUsingLastVariable:function(a){a.isAssignment=this._lastVariable.isAssignment;this._lastVariable=this._variableRenamingUtility.updateVariableInstances(this._lastVariable);
a.otherInstances=this._lastVariable.otherInstances;return a},_createCurrentVariableWithLivePositions:function(a){return this._variableService.getVariableThatOverlapsRange(a)},_updateModel:function(a){this._notPossibleToRename(a)||(this._setVariables(a),this.onModelUpdated())},_notPossibleToRename:function(a){return!a||this._variableRenamingUtility.checkVariableLength(a)?(this._variableService.startListeningToEDS(),this.exitRenaming(),!0):!1},_setVariables:function(a){this._lastVariable||(this._lastVariable=
a);this._renamingVariable&&!k.isSameVariable(this._renamingVariable,this._lastVariable)&&(this._renamingVariable.startPos.destroy(),this._renamingVariable.endPos.destroy());this._renamingVariable=a},_isCodeLine:function(a){a=this._internalDocument.getLineNode(a.startLineCol.line);return c.isCodeContainer(a)},_hasCursorMovedToAnotherLine:function(a){return!a&&this._renamingVariable&&this._renamingVariable.startLineCol.line!==this._cursor.getLineColumn().line-1},isRenaming:function(){return this._variableRenamingUtility.isRenaming(this._lastVariable,
this._renamingVariable)},notRenaming:function(){this._lastVariable&&(this._renamingVariable&&0!==(0!==a.comparePositions(this._lastVariable.startPos,this._renamingVariable.startPos)||a.comparePositions(this._lastVariable.endPos,this._renamingVariable.endPos)))&&this._variableRenamingUtility.clearLivePositionsFromVariable(this._lastVariable);this._lastVariable=this._renamingVariable;this._startListeningToEDS()},renaming:function(){this._variableCache||(this._variableCache=this._variableService.getVariableData());
this._variableService.stopListeningToEDS(this._lastVariable);this._updateVariableCache();this._variableService.setVariableCache(this._variableCache)},_updateVariableCache:function(){var a=f.getScopedVariables(this._lastVariable,this._variableCache);this._variableRenamingUtility.updateVariableCache(a,this._renamingVariable)},doRename:function(){this._removeListeners();this._renameVariablesAndUpdateCache();this.exitRenamingCompletely();this._updateModel(this._getCurrentVariable())},_renameVariablesAndUpdateCache:function(){var a=
this._document.startBlockEdit();a.setBlockTypesForMergeAndAdvance(this._EMPTY_BLOCK_TYPE_FOR_MERGE_WITH_LAST_BLOCK);this._renamingVariable.otherInstances.forEach(function(a){var b=a.startPos.getLineColumn(),c=a.endPos.getLineColumn();this._document.replaceText(this._renamingVariable.text,b.line,b.column,c.line,c.column);a.startColumn=a.startPos.getLineColumn().column-1;a.endColumn=a.startColumn+this._renamingVariable.text.length;this._updateCacheWithRenamingVariables(a)},this);this._setListeners();
this._document.endBlockEdit(a)},_updateCacheWithRenamingVariables:function(a){this._variableRenamingUtility.updateInstanceWithLivePosition(a);this._updateVariableCache();this._variableService.setVariableCache(this._variableCache)},destroy:function(){this._removeListeners();this._clearVariables();this._variableCache=null},_removeListeners:function(){this._handleArray.forEach(function(a){a.remove()});this._handleArray=[];this._variableService.onDisable()},_clearVariables:function(){this._lastVariable&&
(this._variableRenamingUtility.clearLivePositionsFromVariable(this._lastVariable),this._lastVariable=null);this._renamingVariable&&(this._variableRenamingUtility.clearLivePositionsFromVariable(this._renamingVariable),this._renamingVariable=null)},exitRenamingCompletely:function(){this._clearVariables();this._startListeningToEDS()},_startListeningToEDS:function(){this._variableService.startListeningToEDS();this._variableCache=null},_clearRenamingObjects:function(){this._clearVariables();this._variableService.startListeningToEDS();
this.exitRenaming()}})})},"MW/rtc/plugins/language/matlab/variableservice/VariableServiceUtilities":function(){define(["MW/rtc/model/DocumentUtilities","MW/rtc/plugins/language/matlab/variableservice/Variable","MW/rtc/plugins/language/matlab/variableservice/VariableUtilities"],function(h,e,g){return{getValidScopedVariables:function(d,c,b){c=this._getMatchingVariableLocations(d,c);var a,e;for(a=0;a<c.length;a+=1){var g=this._getVariablePositionsFromScope(c[a]);for(e=0;e<g.length;e+=1)if(!h.checkLineColumnIsValid(b,
g[e].startLine,g[e].endColumn))return[];if(h.checkOverlapsWithRange(d.startLineCol,d.endLineCol,g))return g}return[]},getScopedVariables:function(d,c){for(var b=this._getMatchingVariableLocations(d,c),a=0;a<b.length;a+=1){var e=this._getVariablePositionsFromScope(b[a]);if(h.checkOverlapsWithRange(d.startLineCol,d.endLineCol,e))return e}return[]},_getMatchingVariableLocations:function(d,c){if(!d||!c)return[];var b=c[d.text];return!b?[]:b},isSameVariableLocation:function(d,c){var b=g.getUpdatedVariableStructure(d);
return g.isSameVariableLocation(b,c)},_getVariablePositionsFromScope:function(d){var c=[],b;for(b=0;b<d.length;b+=1)c[b]=d[b].position;return c},getOverlappingVariableFromCache:function(d,c){if(!c)return null;var b=c[d.text];if(!b)return null;var a;for(a=0;a<b.length;a+=1){var e=this._checkAndCreateOverlappingVariable(b[a],d);if(e)return e}return null},_checkAndCreateOverlappingVariable:function(d,c){var b=this._getVariablePositionsFromScope(d);if(h.checkOverlapsWithRange(c.startLineCol,c.endLineCol,
b)){var a=new e(c.startLineCol,c.endLineCol,c.text),f;for(f=0;f<b.length;f++)this.isSameVariableLocation(b[f],c)?a.isAssignment=d[f].isAssignment:a.addOtherInstance(b[f].startLine,b[f].startColumn,b[f].endLine,b[f].endColumn);return a}return null},findNonlocalVariableInstances:function(d){var c=[];Object.keys(d).forEach(function(b){d[b].forEach(function(a){a.forEach(function(a){a.isNonlocal&&c.push(a.position)})})});return c}}})},"MW/rtc/plugins/language/matlab/variableservice/Variable":function(){define(["dojo/_base/declare"],
function(h){return h(null,{constructor:function(e,g,d){this.startLineCol=e;this.endLineCol=g;this.endPos=this.startPos=null;this.text=d;this.isAssignment=!1;this.otherInstances=[]},addOtherInstance:function(e,g,d,c){this.otherInstances.push({startPos:null,endPos:null,startLine:e,startColumn:g,endLine:d,endColumn:c})}})})},"MW/rtc/plugins/language/matlab/variablerenaming/VariableRenamingModelUtilityProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./VariableRenamingModelUtility"],
function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.document","rtc.internaldocument"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/plugins/language/matlab/variablerenaming/VariableRenamingModelUtility":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/plugins/language/matlab/variableservice/VariableServiceUtilities MW/rtc/plugins/language/matlab/variableservice/VariableUtilities".split(" "),function(h,
e,g,d,c,b){return h(d,{_MAX_VARIABLE_LENGTH:64,_INVALID_KEYWORD_LIST:["varargin","varargout"],constructor:function(a,b){this._document=a;this._internalDocument=b},isRenaming:function(a,c){return!a||(!c||!c.text)||a.text===c.text||!b.isSameVariableLocation(a,c)||-1!==this._INVALID_KEYWORD_LIST.indexOf(a.text.toLowerCase())||!c.isAssignment||1>c.otherInstances.length?!1:!0},checkVariableLength:function(a){return a.text.length>=this._MAX_VARIABLE_LENGTH?!0:!1},updateVariableCache:function(a,b){var d=
0;a.forEach(function(a){if(c.isSameVariableLocation(a,b))a.startColumn=b.startLineCol.column,a.startLine=b.startLineCol.line,a.endColumn=b.endLineCol.column,a.endLine=b.endLineCol.line;else{var e=b.otherInstances[d];a.startColumn=e.startPos.getLineColumn().column-1;a.startLine=e.startPos.getLineColumn().line-1;a.endColumn=e.endPos.getLineColumn().column-1;a.endLine=e.endPos.getLineColumn().line-1;d++}})},updateVariableAndInstancesWithLivePosition:function(a){a.startPos&&(a.startPos.destroy(),a.endPos.destroy());
var b=a.startLineCol,c=a.endLineCol;a.startPos=this._document.createPositionAtLineColumn(b.line,b.column);a.endPos=this._document.createPositionAtLineColumn(c.line,c.column,!0);a.otherInstances.forEach(function(a){if(a.startLine<this._internalDocument.getMaxLineNumber())this.updateInstanceWithLivePosition(a);else return null},this);return a},updateInstanceWithLivePosition:function(a){a.startPos&&a.startPos.destroy();a.startPos=this._document.createPositionAtLineColumn(a.startLine,a.startColumn);a.endPos&&
a.endPos.destroy();a.endPos=this._document.createPositionAtLineColumn(a.endLine,a.endColumn,!0);return a},clearLivePositionsFromVariable:function(a){a.otherInstances.forEach(function(a){a.startPos&&(a.startPos.destroy(),a.startPos=null);a.endPos&&(a.endPos.destroy(),a.endPos=null)},this);a.startPos&&(a.startPos.destroy(),a.endPos.destroy(),a.startPos=null,a.endPos=null)},isLastVariablePositionInvalid:function(a){if(!a)return!1;var b=a.startPos.getLineColumn();a=a.endPos.getLineColumn();var c=b.line===
a.line;return!c||c&&b.column===a.column?!0:!1},updateVariableInstances:function(a){a.otherInstances.forEach(function(a){var b=a.startPos,c=a.endPos;b&&c&&(a.startColumn=b.getLineColumn().column-1,a.startLine=b.getLineColumn().line-1,a.endColumn=c.getLineColumn().column-1,a.endLine=c.getLineColumn().line-1)},this);return a}})})},"MW/rtc/plugins/language/matlab/variablerenaming/view/VariableRenamingViewProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./VariableRenamingView"],
function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.view","rtc.cursor","rtc.view.visibility"]}},createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/plugins/language/matlab/variablerenaming/view/VariableRenamingView":function(){define("dijit/popup dijit/TooltipDialog dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-construct dojo/dom-style dojo/i18n!l10n/nls/actions dojo/string MW/rtc/abstract/AbstractPlugin MW/rtc/view/ViewEventUtilities MW/uiframework/FocusManager".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p){return g(l,{_VERTICAL_OFFSET_PX:7,constructor:function(a,b,f){this._view=a;this._cursor=b;this._tooltipInfo={tooltipDialog:new e({"class":"rtcTooltip"}),isTooltipOpen:!1};this._renamingTooltipLayer=this._createLayer();a.addLayer(this._renamingTooltipLayer);this.own(c.after(f,"onHide",d.hitch(this,"hideTooltip")));this.own(c.after(f,"onShow",d.hitch(this,"_prepareTooltipInfo")));this._reopenTooltipListener=null;this._wasOutOfView=!0},_createLayer:function(){return b.create("div",
{"class":"variableRenamingTooltipHolder",id:"renamingNode"})},showToolTip:function(a,b,e){this._prepareTooltipInfo();this._openTooltipIfInView();this._updateTooltipContent(a,b,e);this._reopenTooltipListener&&this._reopenTooltipListener.remove();this._reopenTooltipListener=c.after(this._view,"onViewUpdated",d.hitch(this,"_updateTooltipOnScroll"),!0);p.refuseFocus(this._tooltipInfo.tooltipDialog.domNode)},_prepareTooltipInfo:function(){var b=this._tooltipInfo.tooltipDialog,c=this._getTooltipPosition();
a.set(this._renamingTooltipLayer,{top:c.y+"px",left:c.x+"px"});this._tooltipInfo={tooltipDialog:b,isTooltipOpen:!0}},_openTooltipIfInView:function(){this._view.isElementOutOfView(this._renamingTooltipLayer)||(this._wasOutOfView=!1,this._openTooltip(!0))},_openTooltip:function(){h.open({popup:this._tooltipInfo.tooltipDialog,around:this._renamingTooltipLayer,orient:["below-centered","below","above-centered","above"],onCancel:d.hitch(this,"closeTooltip")});this._tooltipInfo.isTooltipOpen=!0;this._tooltipInfo.tooltipDialog.set("data-testid",
"variableRenaming_visible")},_getTooltipPosition:function(){var a=this._cursor.getLineColumn(),a=this._view.getCoordinateForLineColumn(a.line,a.column);return{y:a.y+this._VERTICAL_OFFSET_PX,x:a.x}},_updateTooltipContent:function(a,b,c){b=this._getStyledVariableText(a.text,b.text);a=k.substitute(f.variableRenamingTooltip,{"0":c,1:a.text,2:b});this._tooltipInfo.tooltipDialog.set("content",a)},_getStyledVariableText:function(a,b){var c="";b.split("").some(function(b,d){var e=a.charAt(d);if(e===b)c+=
e;else return!0});var d=b.substring(c.length,b.length);return""!==d?c+"\x3cb\x3e"+d+"\x3c/b\x3e":c},_updateTooltipOnScroll:function(a){n.hasScrollEvent(a)&&(a=this._view.isElementOutOfView(this._renamingTooltipLayer),this._wasOutOfView!==a&&((this._wasOutOfView=a)?this.hideTooltip():this._openTooltip()))},hideTooltip:function(){return this._tooltipInfo.isTooltipOpen?(this._tooltipInfo.tooltipDialog.set("data-testid","variableRenaming_hidden"),h.close(this._tooltipInfo.tooltipDialog),this._tooltipInfo.isTooltipOpen=
!1,!0):!1},closeTooltip:function(){this._reopenTooltipListener&&(this._reopenTooltipListener.remove(),this._reopenTooltipListener=null);return this.hideTooltip()},isTooltipOpen:function(){return this._tooltipInfo.isTooltipOpen},destroy:function(){b.destroy(this._renamingTooltipLayer)}})})},"MW/rtc/plugins/language/matlab/variableservice/VariableServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./VariableService"],function(h,e,g){return h(e,{requires:function(){return{isApplicable:[],
createInstance:["rtc.internaldocument","rtc.editordataservice"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/plugins/language/matlab/variableservice/VariableService":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin","MW/rtc/plugins/language/matlab/variableservice/VariableServiceUtilities"],function(h,e,g,d,c){return h(d,{_VARIABLE_EDS_NAME:"matlab.code.variables",_DOCUMENT_STATE:".documentstate",constructor:function(b,a){this._editorDataService=
a;this._editorDataService.get(this._VARIABLE_EDS_NAME);this._internalDocument=b;this._listenToHandle=this._editorDataService.listenTo(this._VARIABLE_EDS_NAME,e.hitch(this,"onVariablesUpdated"));this._variableCache=null;this._isListeningToEDS=!0;this._variableBeingChanged=null},onDisable:function(){},onEnable:function(){},onVariablesUpdated:function(){},destroy:function(){this._listenToHandle.remove()},getVariableInstances:function(b){if(this._isListeningToEDS&&!this._isDocumentUpToDate())return[];
b=this._getVariableInstances(b);return!b?[]:b},_isDocumentUpToDate:function(){return this._internalDocument.getState()===this._editorDataService.get(this._VARIABLE_EDS_NAME+this._DOCUMENT_STATE)},_getVariableInstances:function(b){if(!b)return[];var a=[];if(this._isListeningToEDS)this._variableCache=this._editorDataService.get(this._VARIABLE_EDS_NAME),this.EDSUpdateToDate(),a=c.getValidScopedVariables(b,this._variableCache,this._internalDocument);else{if(!this._variableBeingChanged)return[];a=c.getValidScopedVariables(this._variableBeingChanged,
this._variableCache,this._internalDocument)}return a},getNonlocalVariableInstances:function(){if(!this._isDocumentUpToDate())return null;var b=[];this._isDocumentUpToDate()&&this._isListeningToEDS&&(this._variableCache=this._editorDataService.get(this._VARIABLE_EDS_NAME))&&(b=c.findNonlocalVariableInstances(this._variableCache));return b},EDSUpdateToDate:function(){},setVariableCache:function(b){this._variableCache=b;this.onVariablesUpdated()},getVariableData:function(){this._isListeningToEDS&&(this._variableCache=
this._editorDataService.get(this._VARIABLE_EDS_NAME));return this._variableCache},getVariableThatOverlapsRange:function(b){return!this._overwriteCacheWithUpToDateEDS()?null:c.getOverlappingVariableFromCache(b,this._variableCache)},_overwriteCacheWithUpToDateEDS:function(){if(this._isListeningToEDS){if(!this._isDocumentUpToDate())return!1;this._variableCache=this._editorDataService.get(this._VARIABLE_EDS_NAME)}return!0},stopListeningToEDS:function(b){this._isListeningToEDS&&(this._variableBeingChanged=
b,this._listenToHandle&&this._listenToHandle.remove(),this._isListeningToEDS=!1)},startListeningToEDS:function(){this._isListeningToEDS||(this._listenToHandle=this._editorDataService.listenTo(this._VARIABLE_EDS_NAME,e.hitch(this,"onVariablesUpdated")),this._variableCache=this._editorDataService.get(this._VARIABLE_EDS_NAME),this._isListeningToEDS=!0,this._variableBeingChanged=null)}})})},"MW/rtc/plugins/lists/ListsProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/lists/Lists","MW/rtc/core/provider/PluginProvider"],
function(h,e,g){return h(g,{requires:function(){return{createInstance:["rtc.document","rtc.internaldocument","rtc.cursor","rtc.actionservice","rtc.nodeconversionrulesservice"]}},createInstance:function(d,c,b,a,f){return new e(d,c,b,a,f)}})})},"MW/rtc/plugins/lists/Lists":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/model/DocumentConstants MW/rtc/model/DocumentUtilities MW/rtc/model/DocumentEventUtilities MW/rtc/model/NodeUtilities MW/rtc/model/Position MW/rtc/model/PositionUtilities MW/rtc/model/events/FormatChangeEvent MW/rtc/model/events/InsertBreakEvent MW/rtc/model/events/DeletionEvent MW/rtc/plugins/nodeconversionrules/NodeConversionRulesUtilities MW/rtc/plugins/richtext/RichTextUtilities MW/rtc/plugins/richtext/nodes/leaf/RichTextNode MW/rtc/RichTextComponentFeatureEnum ./model/ListParagraph ./model/ListItem".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v){return h(d,{constructor:function(a,b,c,d,f){this._internalDocument=b;this._document=a;this._cursor=c;this._actionService=d;this._nodeConversionRules=f;this._ORDERED_LIST_TYPE="ordered";this._UNORDERED_LIST_TYPE="unordered";a=[{name:"ordered",method:e.hitch(this,this.formatTemplate,this._ORDERED_LIST_TYPE)},{name:"unordered",method:e.hitch(this,this.formatTemplate,this._UNORDERED_LIST_TYPE)}];b.registerFormatTemplates(a);this.own(g.around(this._document,
"deleteTextAtCurrentPosition",e.hitch(this,"_onDoDelete")));this.own(g.around(this._document,"insertBreak",e.hitch(this,"_onInsertBreak")));this.own(g.after(this._cursor,"onChange",e.hitch(this,this._updateActions)));d.loadActions(this._actions());this.own(g.after(this._actionService,"onActionChange",e.hitch(this,"_onActionChange"),!0))},formatTemplate:function(a){var b={};b.container=new u([],{type:a});b.textContainer=new v([]);b.container.addChild(b.textContainer,0);return b},_actions:function(){return[{id:t.LISTS.UNORDERED_LIST_ACTION,
key:"ctrl_alt_u",platformKey:{mac:"ctrl_alt_u"},enabled:!1,selected:!1,callback:e.hitch(this,this._toggleToList,this._UNORDERED_LIST_TYPE)},{id:t.LISTS.ORDERED_LIST_ACTION,key:"ctrl_alt_o",platformKey:{mac:"ctrl_alt_o"},enabled:!1,selected:!1,callback:e.hitch(this,this._toggleToList,this._ORDERED_LIST_TYPE)}]},_onActionChange:function(a){if("selected"===a.key)switch(a.id){case t.LISTS.UNORDERED_LIST_ACTION:this._toggleIfNeeded(a.newValue,this._UNORDERED_LIST_TYPE);break;case t.LISTS.ORDERED_LIST_ACTION:this._toggleIfNeeded(a.newValue,
this._ORDERED_LIST_TYPE)}},_toggleIfNeeded:function(a,b){var c=r.getParagraphFormat(this._cursor);a!==(c===b)&&this._toggleToList(b)},_updateActions:function(){var a=r.getParagraphFormat(this._cursor);this._actionService.updateAction(t.LISTS.UNORDERED_LIST_ACTION,{enabled:this._canSetFormat(),selected:a===this._UNORDERED_LIST_TYPE});this._actionService.updateAction(t.LISTS.ORDERED_LIST_ACTION,{enabled:this._canSetFormat(),selected:a===this._ORDERED_LIST_TYPE})},_canSetFormat:function(){return this._internalDocument&&
this._internalDocument.isReadOnly()||!q.textContainersInCursorConvertibleTo(this._cursor,u,this._nodeConversionRules)?!1:r.hasRichText(this._cursor)},_stripListItem:function(a,b){var c=this._document.startEdit(),d=b.nextSibling(),e=this._internalDocument.createContainerForType("text").container,f=new s({});e.addChild(f);var f=this._internalDocument.splitContainerAtNode(a,b.endNode()),g=new k(f,f.maxOffset());this._internalDocument.insertAtPosition(e,g);this._internalDocument.spliceContainers(e,b);
var h=e,g=e;f.firstChild()&&(h=f);0===a.children.length&&this._internalDocument.deleteNode(a,{node:e,offset:0});d&&(g=e.nextSibling());d=this._internalDocument.getLineNumber(h);f=this._internalDocument.getLineNumber(g);g=[n.create(d,f)];f>d&&g.push(p.create(d,f,0,1));c.appendRedoEvents([n.create(d,f)]);c.appendUndoEvents([n.create(d,f)]);this._document.endEdit();this._internalDocument.emitDocumentEvents(g);return e},_onDoDelete:function(a){var d=this._cursor,e=this._document,f=this;return function(g){if(g===
c.BACKWARD_DELETE&&!d.hasSelection()&&b.isAtStartOfContainer(d.position)){var h=d.getNode().rootContainer();if(f._isListParagraph(h)){var k=d.getNode().textContainer(),h=f._stripListItem(h,k);d.setPosition(h,0);d.onUpdate(!1,!0);return!0}}return g===c.FORWARD_DELETE&&!d.hasSelection()&&(h=d.getNode().rootContainer(),(k=h.nextSibling())&&k.childrenAreContainers&&(!h.isEmpty()||h.childrenAreContainers)&&b.isAtEndOfContainer(d.position,h))?(e.startEdit(),f._stripListItem(k,k.firstChild()),h=a.apply(e,
arguments),e.endEdit(),h):a.apply(e,arguments)}},_onInsertBreak:function(a){var d=this._document,e=this._cursor,f=this;return function(){var g=d.startBlockEdit();if(e.hasSelection()){var h=e.selectionInfo();b.isAtStartOfContainer(h.startPosition)&&b.isAtEndOfContainer(h.endPosition)&&d.deleteTextAtCurrentPosition(c.FORWARD_DELETE)}if(!e.hasSelection()&&0===e.getOffset()){var k=e.getNode(),h=k.textContainer(),k=k.rootContainer();if(h instanceof v&&h.isEmpty()){h=f._stripListItem(k,h);e.setPosition(h,
0);e.onUpdate(!1,!0);d.endBlockEdit(g);return}}h=a.apply(d,arguments);d.endBlockEdit(g);return h}},_toggleToList:function(a){this._canSetFormat()&&(r.getParagraphFormat(this._cursor)===a?this._actionService.executeAction(t.RICH_TEXT.PARAGRAPH_FORMAT_TEXT_ACTION,{}):this._convertToList(a))},_convertToList:function(b){if(this._canSetFormat()){var c=this._cursor.selectionInfo(),d=c.startNode.rootContainer(),e=this._internalDocument.getLineNumber(d),g=c.endNode,c=this._cursor.adjustSelection(c,!0),h=
f.getParagraphFormat(c);if(h!==b&&d){var k=c.endNode.rootContainer();this._internalDocument.getLineNumber(k);var l=this._cursor.getPosition(),m=this._document.startEdit(),p,q,r,s;f.getParagraphNodesInRange(d,k).forEach(function(a){this._nodeConversionRules.isNodeConvertibleTo(a,u)?(q||(q=a),a===k&&(r=a),s=a):q&&(r=s);q&&r&&(p=this._convertRangeToList(q,r,b),q=r=null)},this);if(p){var t=p.listParagraph,v=p.newListItem,d=p.needCursorChangeEvent,O=this._internalDocument.getLineNumber(t),e=[n.create(e,
O,h,b)];m.appendRedoEvents(e);m.appendUndoEvents(a.translateEventsForUndo(e));this._internalDocument.emitDocumentEvents(e);this._document.endEdit();m=v?v.startNode().offsetInContainer(t):0;l.anchor.hasOwnProperty("line")?(t=this._internalDocument.getLineNumber(t),g!==c.endNode&&(t+=1,m=0),c.isReversed?(l.anchor.line=t,l.anchor.column+=m):(l.line=t,l.column+=m)):l.column+=m;this._cursor.setPosition(l);if(d)this._cursor.onUpdate(!1,!0)}}}},_convertRangeToList:function(b,c,d){var e=this._internalDocument.getLineNumber(b),
f=this._internalDocument.getLineNumber(c),g=this._document.startEdit(),h=new u([],{type:d}),k=new s({}),l=new v([k]);h.addChild(l);var p=l;this._internalDocument.insertAtPosition(h,b.startPosition());var q=b,r;for(b=!1;q;){var t=!0;q.anchorId&&(h.anchorId=q.anchorId);r=q===c?null:q.nextSibling();this._isListParagraph(q)?p=h:q.childrenAreContainers?(q.children.forEach(function(a){k=new s({text:a.getText()});p=new v([k]);this._internalDocument.insertAtPosition(p,h.endPosition())},this),this._internalDocument.deleteNode(q,
{node:k,offset:0}),t=!1):(k=new s({}),p=new v([k],{align:q.align}),this._internalDocument.insertAtPosition(p,h.endPosition()));"LineNode"===q.className&&(k=new s({text:q.getText()}),this._internalDocument.insertAtPosition(k,p.startPosition()),this._internalDocument.deleteNode(q,{node:k,offset:0}),t=!1);t&&(this._internalDocument.spliceContainers(p,q),b=!0);q=r}l.parent&&this._internalDocument.deleteNode(l,{node:l.nextSibling(),offset:0});c=[];c=c.concat(m.create(e,f,0));c=c.concat(n.create(e,e,"",
d));g.appendRedoEvents(c);g.appendUndoEvents(a.translateEventsForUndo(c));this._internalDocument.emitDocumentEvents(c);this._document.endEdit();return{listParagraph:h,needCursorChangeEvent:b,newListItem:p}},convertLineRangeIntoList:function(a,b,c){if(this._canSetFormat()&&(a=this._internalDocument.getLineNode(a-1),b=this._internalDocument.getLineNode(b-1),this._convertRangeToList(a,b,c).needCursorChangeEvent))this._cursor.onUpdate(!1,!0)},isLineListParagraph:function(a,b){if(1>a||a>this._internalDocument.getMaxLineNumber())return!1;
var c=this._internalDocument.getLineNode(a-1);return this._isListParagraph(c,b)},_isListParagraph:function(a,b){return a instanceof u&&!(b&&a.type!==b)},getNumberOfItemsInList:function(a,b){return!this.isLineListParagraph(a,b)?0:this._internalDocument.getLineNode(a-1).children.length}})})},"MW/rtc/model/events/FormatChangeEvent":function(){define(["dojo/_base/declare","MW/rtc/model/DocumentConstants","MW/rtc/model/DocumentEventUtilities","MW/rtc/model/Mutation","./UndoableEvent"],function(h,e,g,d,
c){var b=h(c,{constructor:function(a,b,c,d){this.type=e.FORMAT_CHANGE_EVENT;this.oldFormat=c;this.newFormat=d},getMutation:function(){return d.createFromEvent(this,d.MUTATION_TYPE.INPLACE)},getUndoEvent:function(){return new b(this.startLine,this.endLine,this.newFormat,this.oldFormat)},destroy:function(){}});return{create:function(a,c,d,h){g.assertValidLines(a,c,e.FORMAT_CHANGE_EVENT);return new b(a,c,d,h)}}})},"MW/rtc/plugins/richtext/RichTextUtilities":function(){define(["MW/rtc/model/NodeUtilities",
"MW/rtc/nodes/inner/LineNode","MW/rtc/plugins/richtext/ParagraphFormatsEnum","./nodes/inner/HeadingNode","./nodes/inner/RichTextParagraphNode"],function(h,e,g,d,c){return{hasRichText:function(b){var a=!1;b=this._getStartEndNodeForCursor(b);h.textContainerNodesInRangeIterator(b.startNode,b.endNode,function(b){if(b.isInstanceOf(c))return a=!0});return a},isRichText:function(b){var a=!0;b=this._getStartEndNodeForCursor(b);h.textContainerNodesInRangeIterator(b.startNode,b.endNode,function(b){if(!b.isInstanceOf(c))return a=
!1,!0});return a},getParagraphFormat:function(b){b=this._getStartEndNodeForCursor(b);return h.getParagraphFormat(b)},_getStartEndNodeForCursor:function(b){var a=b.selectionInfo(),a=b.adjustSelection(a,!0);return{startNode:a.startNode,endNode:a.endNode}},getNodeConstructorByFormat:function(b){return b===g.NORMAL?c:this.isRichTextParagraphFormat(b)?d:"code"===b?e:null},isRichTextParagraphFormat:function(b){for(var a in g)if(g.hasOwnProperty(a)&&g[a]===b)return!0;return!1}}})},"MW/rtc/plugins/lists/HTMLListElementHandlerProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/lists/HTMLListElementHandler"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.cutcopypaste.htmlmimeconverter","rtc.richtext.lists.htmlwordstylelist"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/lists/HTMLListElementHandler":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-style","MW/rtc/plugins/lists/model/ListItem","MW/rtc/plugins/lists/model/ListParagraph"],function(h,e,g,
d,c){return h(null,{constructor:function(b){b.registerNodeHandler("LI",e.hitch(this,"_convertLI"))},_convertLI:function(b,a){var c=g.getComputedStyle(b);this._startOrContinueList(a,b.parentNode&&"OL"===b.parentNode.nodeName?"ordered":"unordered",c.textAlign)},_startOrContinueList:function(b,a,e){a=a||"unordered";var g=b.getLastParagraph();!g||!(g instanceof c)||g.type!==a?b.appendParagraph(new c([],{type:a})):b.setActiveNode(g);b.appendInnerNode(new d([],{align:"start"!==e?e:"left"}))}})})},"MW/rtc/plugins/lists/HTMLWordStyleListHandlerProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./HTMLWordStyleListHandler"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.cutcopypaste.htmlmimeconverter"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/lists/HTMLWordStyleListHandler":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/dom-construct"],function(h,e,g,d){return e(null,{constructor:function(c){c.registerDocumentPreprocessor(g.hitch(this,"_preprocess"))},_preprocess:function(c){for(var b,
a=c.querySelectorAll("p[style*\x3dmso-list]").length;0<a;){b=c.querySelector("p[style*\x3dmso-list]");if(!b)break;this._convert(b);a-=1}},_convert:function(c){var b=c.querySelectorAll("span[style*\x3d'mso-list']"),b=h.some(b,function(a){return a.getAttribute("style").match(/\bmso-list:\s*Ignore\b/)&&a.textContent.match(/\d/)}),b=d.create(b?"ol":"ul");d.place(b,c,"before");for(var a,e;this._isWordListItem(c);){a=c.nextElementSibling;e=c.querySelectorAll("br");for(var g=0;g<e.length;g+=1)d.destroy(e[g]);
e=this._createLiFromParagraph(c);d.place(e,b,"append");this._copyChildren(c,e);d.destroy(c);c=a}},_isWordListItem:function(c){return!c?!1:c.className.match(/MsoListParagraph/)?!0:(c=c.getAttribute("style"))&&c.match(/mso-list/)?!0:!1},_createLiFromParagraph:function(c){var b=d.create("li");h.forEach(c.attributes,function(a){b.setAttribute(a.name,a.value);b.style.textIndent=""});return b},_copyChildren:function(c,b){for(var a,e=c.firstChild;e;){e=this._skipConditionalComments(e);if(!e)break;a=e.nextSibling;
d.place(e,b,"append");e=a}},_skipConditionalComments:function(c){if("#comment"===c.nodeName&&"[if !supportLists]"===c.textContent){for(;c&&("#comment"!==c.nodeName||"[endif]"!==c.textContent);)c=c.nextSibling;c&&(c=c.nextSibling)}return c}})})},"MW/rtc/plugins/lists/export/ListParagraph2HTMLProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/lists/export/ListParagraph2HTML"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},
createInstance:function(){return new g}})})},"MW/rtc/plugins/lists/export/ListParagraph2HTML":function(){define(["dojo/_base/declare","MW/rtc/plugins/export/html/BaseInnerNode2HTML","MW/rtc/plugins/lists/model/ListParagraph"],function(h,e,g){return h([e],{_STYLES:["margin","padding-left","font-family","font-size"],constructor:function(){},getApplicableNodeClass:function(){return g},_getTagName:function(d){return"ordered"===d.type?"ol":"ul"}})})},"MW/rtc/plugins/lists/export/ListItem2HTMLProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/lists/export/ListItem2HTML"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/lists/export/ListItem2HTML":function(){define(["dojo/_base/declare","MW/rtc/plugins/export/html/BaseInnerNode2HTML","MW/rtc/plugins/lists/model/ListItem"],function(h,e,g){return h([e],{_STYLES:["margin-left","line-height","min-height","text-align","white-space"],constructor:function(){},
getApplicableNodeClass:function(){return g},_getTagName:function(d){return"li"}})})},"MW/rtc/plugins/lists/view/ListParagraphCoordinateConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./ListParagraphCoordinateConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/lists/view/ListParagraphCoordinateConverter":function(){define(["dojo/_base/declare","MW/rtc/plugins/lists/model/ListParagraph",
"MW/rtc/view/coordinateconverter/base/VerticalAlignCoordinateConverter"],function(h,e,g){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return e}})})},"MW/rtc/plugins/lists/view/ListItemLayouterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./ListItemLayouter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/lists/view/ListItemLayouter":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter","../model/ListItem"],function(h,e,g){return h(e,{constructor:function(){},getApplicableNodeClass:function(){return g},layout:function(d,c){var b={"class":"RTClistItem",style:""};c.bullet&&(b.style+="list-style-type:"+c.bullet+";");c.align&&(b.style+=" text-align: "+c.align+";");return d.layoutInto(c,"li",b)}})})},"MW/rtc/plugins/lists/view/ListParagraphLayouterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"./ListParagraphLayouter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/lists/view/ListParagraphLayouter":function(){define(["dojo/_base/declare","MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter","../model/ListParagraph"],function(h,e,g){return h(e,{constructor:function(){},getApplicableNodeClass:function(){return g},layout:function(d,c){var b={"class":"RTClistNode"},
a;"ordered"===c.type?(a="ol",c.start&&(b.start=c.start)):a="ul";return d.layoutInto(c,a,b)}})})},"MW/rtc/plugins/smoothscrolling/SmoothScrollingPluginProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smoothscrolling/SmoothScrollingPlugin"],function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.view"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/smoothscrolling/SmoothScrollingPlugin":function(){define(["dojo/_base/declare",
"dojo/aspect","dojo/on","MW/rtc/abstract/AbstractPlugin","MW/rtc/events/MouseEventUtil"],function(h,e,g,d,c){return h(d,{_DIRECTION:{UNSET:0,UP:1,DOWN:2,LEFT:3,RIGHT:4},_SET_SCROLL_TOP_DURATION:500,_SET_SCROLL_LEFT_DURATION:500,_SCROLL_DURATION:800,_SCROLL_POSITION_THRESHOLD:0.5,constructor:function(b){this._view=b;this._viewScrollListeners=[];this._targetDataMap={};this._isEnabled=!1},destroy:function(){this.inherited(arguments);this._clearMouseTimeEvents()},setEnabled:function(b){b&&!this._isEnabled?
(this._isEnabled=!0,this._enable()):!b&&this._isEnabled&&(this._isEnabled=!1,this._disable())},_enable:function(){this.setSmoothScrolling(this._view.getDomtarget());this._viewScrollListeners.push(e.before(this._view,"setScrollTop",this._animateSetScrollTop.bind(this)));this._viewScrollListeners.push(e.before(this._view,"setScrollLeft",this._animateSetScrollLeft.bind(this)));this._viewScrollListeners.push(e.before(this._view,"offsetScrollTop",this._animateOffsetScrollTop.bind(this)));this._viewScrollListeners.push(e.before(this._view,
"offsetScrollLeft",this._animateOffsetScrollLeft.bind(this)));this._viewScrollListeners.forEach(function(b){this.own(b)},this)},_disable:function(){this._clearScrollListeners();this._clearMouseTimeEvents();this._clearListeners();this._targetDataMap={}},_clearScrollListeners:function(){Object.keys(this._targetDataMap).forEach(function(b){this._targetDataMap[b].scrollAction&&(this._targetDataMap[b].scrollAction.remove(),this._targetDataMap[b].scrollAction=null)},this)},_clearMouseTimeEvents:function(){Object.keys(this._targetDataMap).forEach(function(b){this._targetDataMap[b].mouseTimeEvent&&
(clearTimeout(this._targetDataMap[b].mouseTimeEvent),this._targetDataMap[b].mouseTimeEvent=null)},this)},_clearListeners:function(){this._viewScrollListeners.forEach(function(b){b.remove()});this._viewScrollListeners=[]},setSmoothScrolling:function(b){this._targetDataMap[b]||(this._targetDataMap[b]={scrollAction:g(b,c.MOUSEWHEEL,this._initiateAnimation.bind(this,b)),previousScrollDirectionV:this._DIRECTION.UNSET,previousScrollDirectionH:this._DIRECTION.UNSET,mouseTimeEvent:null,remainingDistanceV:0,
remainingDistanceH:0},this.own(this._targetDataMap[b].scrollAction))},_initiateAnimation:function(b,a){if(!a.defaultPrevented){a.preventDefault();var c=this._calculateScrollDestination(b,a);this._animateSmoothScroll(b,c,this._SCROLL_DURATION)}},_calculateScrollDestination:function(b,a){var d=this._targetDataMap[b],e=c.getVerticalScrollDistance(a),g=b.scrollTop-e,e=0<e?this._DIRECTION.UP:0>e?this._DIRECTION.DOWN:this._DIRECTION.UNSET;e!==d.previousScrollDirectionV&&(d.remainingDistanceV=0);g+=d.remainingDistanceV;
d.previousScrollDirectionV=e;var h=c.getHorizontalScrollDistance(a),e=b.scrollLeft-h,h=0<h?this._DIRECTION.LEFT:0>h?this._DIRECTION.RIGHT:this._DIRECTION.UNSET;h!==d.previousScrollDirectionH&&(d.remainingDistanceH=0);e+=d.remainingDistanceH;d.previousScrollDirectionH=h;return{v:g,h:e}},_easeFunction:function(b,a,c){return c<=b?0:c>=a?1:1+Math.pow((c-b)/(a-b)-1,5)},_animateSmoothScroll:function(b,a,c){var d=this._targetDataMap[b],e=b.scrollLeft+d.remainingDistanceH,g=b.scrollTop+d.remainingDistanceV,
g=void 0===a.v?g:a.v;a=void 0===a.h?e:a.h;if(g===b.scrollTop&&a===b.scrollLeft)d.mouseTimeEvent&&(clearTimeout(d.mouseTimeEvent),d.mouseTimeEvent=null);else{var d=Date.now(),e=b.scrollTop,h=b.scrollLeft;this._scrollFrame(b,d,d+c,{top:e,left:h},{v:g-e,h:a-h},{v:g,h:a})}},_scrollFrame:function(b,a,c,d,e,g){var h=this._targetDataMap[b],m=Date.now(),q=this._easeFunction(a,c,m),r=Math.round(d.top+e.v*q);b.scrollTop=r;h.remainingDistanceV=g.v-r;q=Math.round(d.left+e.h*q);b.scrollLeft=q;h.remainingDistanceH=
g.h-q;r=m>=c||Math.abs(b.scrollTop-r)>this._SCROLL_POSITION_THRESHOLD;m=m>=c||Math.abs(b.scrollLeft-q)>this._SCROLL_POSITION_THRESHOLD;r&&m?(clearTimeout(h.mouseTimeEvent),h.mouseTimeEvent=null,this._view.onScroll()):(b=this._scrollFrame.bind(this,b,a,c,d,e,g),null!==h.mouseTimeEvent&&clearTimeout(h.mouseTimeEvent),h.mouseTimeEvent=setTimeout(b,2))},_animateSetScrollTop:function(b){this._animateSmoothScroll(this._view.getDomtarget(),{v:b},this._SET_SCROLL_TOP_DURATION);return[this._view.getDomtarget().scrollTop]},
_animateSetScrollLeft:function(b){this._animateSmoothScroll(this._view.getDomtarget(),{h:b},this._SET_SCROLL_LEFT_DURATION);return[this._view.getDomtarget().scrollLeft]},_animateOffsetScrollTop:function(b){var a=this._view.getDomtarget();this._animateSmoothScroll(a,{v:a.scrollTop+this._targetDataMap[a].remainingDistanceV+b},this._SET_SCROLL_TOP_DURATION);return[0]},_animateOffsetScrollLeft:function(b){var a=this._view.getDomtarget();this._animateSmoothScroll(a,{h:a.scrollLeft+this._targetDataMap[a].remainingDistanceH+
b},this._SET_SCROLL_LEFT_DURATION);return[0]}})})},"MW/rtc/plugins/margin/TraditionalLineNumberMarginProvider":function(){define(["dojo/_base/declare","dojo/dom-attr","dojo/dom-class","MW/rtc/core/provider/PluginProvider","MW/rtc/margin/DecoratableLineMargin"],function(h,e,g,d,c){return h(d,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.view","rtc.internaldocument","rtc.featureinterface","margin.linenumberdecorator"]}},createInstance:function(b,
a,d,h){b=new c(b,a,d,[h],300,null,null);g.add(b.getMarginElement(),"lineNumberMargin");e.set(b.getMarginElement(),"data-testid","lineNumberMargin");return b}})})},"MW/rtc/plugins/margin/EmptyWithSectionBreaksMarginProvider":function(){define(["dojo/dom-attr","dojo/dom-class","dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/margin/DecoratableLineMargin"],function(h,e,g,d,c){return g(d,{requires:function(){return{isApplicable:[],createInstance:"rtc.view rtc.internaldocument rtc.linenumberservice rtc.focusservice rtc.margin.sectionbreak rtc.view.decoration.margindecorator".split(" ")}},
createInstance:function(b,a,d,g,h,n){b=new c(b,a,g,[h,n],10,null,null);e.add(b.getMarginElement(),"whitespaceMargin");return b}})})},"MW/rtc/plugins/margin/MarginContainerProvider":function(){define(["dojo/_base/declare","dojo/dom-construct","MW/rtc/core/provider/PluginProvider","MW/rtc/margin/MarginContainer"],function(h,e,g,d){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.view","rtc.left.margin","rtc.featureinterface","rtc.focusservice"]}},
createInstance:function(c,b,a,e){return new d(c,b,a,e)}})})},"MW/rtc/margin/MarginContainer":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class dojo/dom-construct dojo/dom-style dojo/on mw-log/Log MW/rtc/abstract/AbstractPlugin MW/rtc/events/MouseEventUtil MW/rtc/view/ViewEventUtilities MW/rtc/view/ViewUtilities".split(" "),function(h,e,g,d,c,b,a,f,k,l,n,p){return h(k,{MARGIN_SPACER:2,constructor:function(b,d,f,h){this._view=b;this.marginContainer=c.create("div",{"class":"leftMargin"});
this.lineMargin=c.create("div",{"class":"rteGutter"},this.marginContainer);this.lineMargin.setAttribute("tabIndex",-1);this.margins=d;this._focusService=h;this.margins.sort(this.marginPriorityComparator);this.own(g.after(b,"onViewUpdated",e.hitch(this,"_handleViewUpdated"),!0));this._getMargins().forEach(function(a){c.place(a.getMarginElement(),this.lineMargin);this.own(g.after(a,"onWidthChange",e.hitch(this,"updateWidth")));this.own(g.after(a,"onUpdate",e.hitch(this,"update")))},this);this.own(g.after(f,
"onEnableLineGutter",e.hitch(this,this.show,!0)));this.own(a(this.marginContainer,"mouseup",e.hitch(this,"_setFocus")));this.own(a(this.lineMargin,"focusin",e.hitch(this,"_setFocus")));l.redirectMouseScroll(this.lineMargin,b)},_setFocus:function(){this._focusService.setFocus()},_handleViewUpdated:function(a){0!==this.margins.length&&(n.hasVerticalScrollEvent(a)||n.hasSizingEvent(a)||n.hasLayoutEvent(a))&&this.update()},marginPriorityComparator:function(a,b){var c=b.priority()-a.priority();f.assert(0!==
c,"Duplicate priority of "+b.priority()+" found.");return c},onResize:function(){},show:function(){b.set(this.lineMargin,{display:"block"});this.lineMargin.hidden=!1},hide:function(){b.set(this.lineMargin,{display:"none"});this.lineMargin.hidden=!0},update:function(){var a=this._getMargins(),b=0,c=0,d;0<a.length&&(d=p.getZeroBasedVisibleLineNumbers(this._view));a.forEach(function(a){a.getMarginElement().style.left=b+"px";a.update(null,d);a=a.getWidth();b=b+a+this.MARGIN_SPACER;c=c+a+this.MARGIN_SPACER},
this);this._hasWidthChanged(this.marginContainer.style.width,b)&&(this.marginContainer.style.width=b+"px",this.lineMargin.style.width=c+"px",this._width=b,this.onResize())},updateWidth:function(){var a=0,b=0;this._getMargins().forEach(function(c){c.getMarginElement().style.left=a+"px";var d=c.getWidth();c=c.getHorizontalPadding();a=a+d+c;b=b+d+c},this);this._hasWidthChanged(this.marginContainer.style.width,a)&&(this.marginContainer.style.width=a+"px",this.lineMargin.style.width=b+"px",this._width=
a,this.onResize())},_hasWidthChanged:function(a,b){return!a||1E-4<Math.abs(parseFloat(a)-b)},getWidth:function(){return this._width||10},_getMargins:function(){return this.margins}})})},"MW/rtc/plugins/margin/RightMarginButtonProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./RightMarginButton"],function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.messagebar.rightmargincontainer"]}},createInstance:function(d){return new g(d)},
destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/margin/RightMarginButton":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-class dojo/dom-attr dojo/_base/lang dojo/aspect dojo/on dojo/touch MW/rtc/abstract/AbstractPlugin".split(" "),function(h,e,g,d,c,b,a,f,k){return h(k,{constructor:function(a){this._rightMarginContainer=a;this._tooltips={};this._buttons={};this._handles=[]},addButton:function(b,d,g,h){var k=e.create("div",{"class":b,"data-buttonname":b});this._rightMarginContainer.addLayer(k,
d,h);this._buttons[b]=k;this.own(a(this._buttons[b],"mouseover",c.hitch(this,"_generateTooltipMessage")));this.own(a(this._buttons[b],"mouseout",c.hitch(this._rightMarginContainer,"hideTooltip")));this.own(a(this._buttons[b],f.release,g))},setTooltipMessage:function(a,b){this._tooltips[a]=b},_generateTooltipMessage:function(a){var b=this._tooltips[a.target.dataset.buttonname];null!==b&&"undefined"!==typeof b&&this._rightMarginContainer.showTooltip(b,a.target)},modifyButton:function(a,b){g.remove(this._buttons[a]);
g.add(this._buttons[a],[a,b])},removeButton:function(a){this._rightMarginContainer.removeLayer(this._buttons[a])}})})},"MW/rtc/plugins/margin/RightMarginContainerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./RightMarginContainer"],function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.view","rtc.domnode","rtc.bordercontainer","rtc.focusservice"]}},createInstance:function(d,c,b,a){return new g(d,
c,b,a)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/margin/RightMarginContainer":function(){define("dijit/layout/ContentPane dijit/TooltipDialog dijit/popup dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on dojo/touch dojo/dom-construct dojo/dom dojo/dom-attr dojo/dom-class MW/rtc/abstract/AbstractPlugin MW/uiframework/FocusManager".split(" "),function(h,e,g,d,c,b,a,f,k,l,n,p,m,q){return d(m,{_FIXED_LAYER_WIDTH:17,_RIGHT_MARGIN_TOOLTIP:"rightMarginTooltipHolder",_TOOLTIP_TIMER_LENGTH:200,
_MAX_PRIORITY:99,_LAYER_PRIORITY_PROPERTY:"rightMarginLayerPriority",_LAYER_HEIGHT_PROPERTY:"rightMarginLayerHeight",_TOP_REGION:"top",constructor:function(d,g,n,m,q){this._view=d;this._rtcDomNode=g;this._borderContainer=n;this._focusService=m;this._topStaticHeight=0;this._rightMarginContainer=new h({"class":"rightMarginContainer"});k.place(this._rightMarginContainer.domNode,this._rtcDomNode,"last");this._fixedLayerWidth=this._FIXED_LAYER_WIDTH+(q||0);this._borderContainer.domNode.style.width="calc(100% - "+
this._fixedLayerWidth+"px)";this.own(b.after(this._view,"onResize",c.hitch(this,"_handleViewResize")));this.own(a(this._rightMarginContainer,f.release,c.hitch(this,"_setFocus")));this._tooltipTimer=null;this._tooltipInfo={tooltipDialog:new e({"class":"rtcTooltip",onMouseDown:c.hitch(this,function(){clearTimeout(this._tooltipTimer);this._tooltipTimer=null}),onMouseEnter:c.hitch(this,function(){clearTimeout(this._tooltipTimer);this._tooltipTimer=null}),onMouseLeave:c.hitch(this,function(){this.hideTooltip()})}),
isTooltipOpen:!1};d=k.create("div",{"class":this._RIGHT_MARGIN_TOOLTIP});k.place(d,this._view.getDomtarget());(this._buttonPanel=l.byId("toggleButtonPanel"))&&p.add(this._buttonPanel,"buttonPanelShift")},_setFocus:function(){this._focusService.setFocus()},showTooltip:function(a,b){this._tooltipTimer&&(clearTimeout(this._tooltipTimer),this._tooltipTimer=null);var d=this._tooltipInfo.tooltipDialog;this._tooltipInfo={tooltipDialog:d,isTooltipOpen:!0};this._tooltipInfo.tooltipDialog.set("content",a);
this._tooltipInfo.tooltipDialog.set("data-testid","rightMarginTooltip_visible");q.refuseFocus(d.domNode);a&&a.domNode&&a.domNode.addEventListener("onResized",c.hitch(this,"_repositionTooltip"));this._popupInfo={popup:d,around:b,orient:["before-centered","before"],onCancel:c.hitch(this,"hideTooltip"),onExecute:c.hitch(this,"hideTooltip"),onMouseOver:c.hitch(this,function(){clearTimeout(this._tooltipTimer);this._tooltipTimer=null})};g.open(this._popupInfo)},_repositionTooltip:function(){if(this._popupInfo){var a=
this._tooltipInfo.tooltipDialog.domNode.parentNode,b=a.getBoundingClientRect().left;g.open(this._popupInfo);a.style.overflowY="visible";a.style.left=b+"px"}},hideTooltip:function(){this._tooltipInfo.isTooltipOpen&&(this._tooltipInfo.tooltipDialog.set("data-testid","rightMarginTooltip_hidden"),g.close(this._tooltipInfo.tooltipDialog),this._tooltipInfo.isTooltipOpen=!1,clearTimeout(this._tooltipTimer),this._popupInfo=this._tooltipTimer=null)},timeoutTooltip:function(){null===this._tooltipTimer&&(this._tooltipTimer=
setTimeout(c.hitch(this,function(a){this.hideTooltip()}),this._TOOLTIP_TIMER_LENGTH))},addLayer:function(a,b,c){n.set(a,this._LAYER_PRIORITY_PROPERTY,b);n.set(a,this._LAYER_HEIGHT_PROPERTY,c);k.place(a,this._rightMarginContainer.domNode,this._getPositionBasedOnPriority(b));this._addTopStaticHeight(c)},addOverlayLayer:function(a){this._overlayLayer=a;k.place(a,this._rightMarginContainer.domNode,this._getPositionBasedOnPriority(this._MAX_PRIORITY))},removeLayer:function(a){var b=n.get(a,this._LAYER_HEIGHT_PROPERTY);
k.destroy(a);this._addTopStaticHeight(-1*b)},removeOverlayLayer:function(){k.destroy(this._overlayLayer);this._overlayLayer=null},_addTopStaticHeight:function(a){this._topStaticHeight+=a;this._overlayLayer&&(this._overlayLayer.style.top=this._topStaticHeight+"px",this._overlayLayer.style.height="calc(100% - "+this._topStaticHeight+"px)");this.onStaticHeightChanged()},onStaticHeightChanged:function(){},getTopStaticHeight:function(){return this._topStaticHeight},_getPositionBasedOnPriority:function(a){for(var b=
0,c=0;c<this._rightMarginContainer.domNode.children.length;c+=1)n.get(this._rightMarginContainer.domNode.children[c],this._LAYER_PRIORITY_PROPERTY)<=a&&(b+=1);return b},_handleViewResize:function(){var a=this._borderContainer.getChildInRegion(this._TOP_REGION),b=(a?this._borderContainer.getFreeDimension(this._TOP_REGION):0)+"px";this._rightMarginContainer.domNode.style.top=b;this._rightMarginContainer.domNode.style.height="calc(100% - "+b+")";a&&(a.domNode.style.width="100%")},destroy:function(){this.inherited(arguments);
this._buttonPanel&&p.remove(this._buttonPanel,"buttonPanelShift")}})})},"MW/rtc/plugins/margin/SeverityStatusButtonProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./SeverityStatusButton"],function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.margin.button","rtc.code.codeanalyzermodel","rtc.code.codeanalyzerpreferences","rtc.cursor","rtc.focusservice"]}},createInstance:function(d,c,b,a,
e){return new g(d,c,b,a,e)}})})},"MW/rtc/plugins/margin/SeverityStatusButton":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/i18n!l10n/nls/messagebar","MW/rtc/abstract/AbstractPlugin"],function(h,e,g,d,c){return h(c,{_SEVERITY_STATUS_BUTTON:"severityStatusButton",_CLEAR:"statusClear",_ERROR:"statusError",_WARNING:"statusWarning",_BUSY:"statusBusy",_STATIC_HEIGHT:17,_SEVERITY_LEVEL_NONE:0,_SEVERITY_LEVEL_WARNING:1,_BUTTON_POSITION_PRIORITY:2,_SEVERITY_LEVEL_ERROR:2,_TIMER_LENGTH:900,
constructor:function(b,a,c,h,l,n){this._messageBarButtonView=b;this._codeAnalyzerModel=a;this._codeAnalyzerPreferences=c;this._cursor=h;this._focusService=l;this._timer=null;this._severity=0;this._staticHeight=this._STATIC_HEIGHT+(n||0);this._messagePositions=[];this._messageBarButtonView.addButton(this._SEVERITY_STATUS_BUTTON,this._BUTTON_POSITION_PRIORITY,e.hitch(this,"_buttonClick"),this._staticHeight);this._messageBarButtonView.setTooltipMessage(this._SEVERITY_STATUS_BUTTON,d.noMessages);this.own(g.after(this._codeAnalyzerModel,
"onModelChange",e.hitch(this,"_updateMarkerPositions")));this.own(g.after(this._codeAnalyzerPreferences,"onDisplayPreferenceChange",e.hitch(this,"_updateMarkerPositionsAfterPreferenceChange"),!0))},_buttonClick:function(){this._focusService.setFocus();if(0!==this._messagePositions.length){var b=this._getNextCursorPosition(this._cursor.getPosition(),this._messagePositions);this._cursor.setLineColumn(b.line,b.column,!0)}},_getNextCursorPosition:function(b,a){var c=b.line+1,d=b.column+1,e=a.length;if(c>
a[e-1].line||c===a[e-1].line&&d>=a[e-1].column)return a[0];for(var g=0;g<e;g++)if(a[g].line>c||a[g].line===c&&a[g].column>d)return a[g];return a[e-1]},_updateMarkerPositions:function(){this._codeAnalyzerPreferences.isDisplayEnabled()&&(this._clearTimeout(),this._timer=setTimeout(e.hitch(this,function(b){this._severity=this._SEVERITY_LEVEL_NONE;var a=[],c=[];this._codeAnalyzerModel.getAllMessages().forEach(function(b){var d={line:b.range.start.row+1,column:b.range.start.column+1};2<=b.severity?(this._severity=
this._SEVERITY_LEVEL_ERROR,c.push(d)):this._severity<=this._SEVERITY_LEVEL_WARNING&&(this._severity=this._SEVERITY_LEVEL_WARNING,a.push(d))},this);switch(this._severity){case this._SEVERITY_LEVEL_NONE:this._messageBarButtonView.modifyButton(this._SEVERITY_STATUS_BUTTON,this._CLEAR);this._messageBarButtonView.setTooltipMessage(this._SEVERITY_STATUS_BUTTON,d.noMessages);this._messagePositions=[];break;case this._SEVERITY_LEVEL_WARNING:1<a.length?(this._messageBarButtonView.modifyButton(this._SEVERITY_STATUS_BUTTON,
this._WARNING),this._messageBarButtonView.setTooltipMessage(this._SEVERITY_STATUS_BUTTON,d.warningsFound)):(this._messageBarButtonView.modifyButton(this._SEVERITY_STATUS_BUTTON,this._WARNING),this._messageBarButtonView.setTooltipMessage(this._SEVERITY_STATUS_BUTTON,d.warningFound));this._messagePositions=a;break;case this._SEVERITY_LEVEL_ERROR:1<c.length?(this._messageBarButtonView.modifyButton(this._SEVERITY_STATUS_BUTTON,this._ERROR),this._messageBarButtonView.setTooltipMessage(this._SEVERITY_STATUS_BUTTON,
d.errorsFound)):(this._messageBarButtonView.modifyButton(this._SEVERITY_STATUS_BUTTON,this._ERROR),this._messageBarButtonView.setTooltipMessage(this._SEVERITY_STATUS_BUTTON,d.errorFound)),this._messagePositions=c}}),this._TIMER_LENGTH))},_updateMarkerPositionsAfterPreferenceChange:function(b){this._clearTimeout();b?this._updateMarkerPositions():(this._messageBarButtonView.modifyButton(this._SEVERITY_STATUS_BUTTON,this._CLEAR),this._messageBarButtonView.setTooltipMessage(this._SEVERITY_STATUS_BUTTON,
d.noMessages),this._messagePositions=[])},_clearTimeout:function(){this._timer&&(this._messageBarButtonView.modifyButton(this._SEVERITY_STATUS_BUTTON,this._BUSY),clearTimeout(this._timer))},destroy:function(){this.inherited(arguments);this._messageBarButtonView.removeButton(this._SEVERITY_STATUS_BUTTON)}})})},"MW/rtc/plugins/messagebar/MessageBarModelProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./MessageBarModel"],function(h,e,g){return h(e,{isApplicable:function(){return!0},
requires:function(){return{isApplicable:[],createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/messagebar/MessageBarModel":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(h,e){return h([],{constructor:function(){this._layers={}},hideMessagesOnLine:function(e){for(var d in this._layers)if(this._layers.hasOwnProperty(d)){var c=this._layers[d].messageAtLine[e];if("undefined"!==typeof c){this._getMessage(c,d).visible=!1;this.onMessageHidden(d,c);break}}},
addLayer:function(e){this._layers[e.name]=e;this.onLayerAdded(e.name)},getMessagesForLayer:function(e){return this._layers[e]?this._layers[e].messages:null},resetLayer:function(e){this._layers[e].messages={};this._layers[e].messageAtLine={};this.onLayerReset(e)},getTooltip:function(e,d){return this._getMessage(e,d).tooltip},_getMessage:function(e,d){return this._layers[d].messages[e]},getPositionInfo:function(e,d){var c=this._getMessage(d,e);return{line:c.line,column:c.column}},addMessage:function(e,
d,c){this._layers[e].messages[d]=c;this._layers[e].messageAtLine[c.line]=d},onMessageHidden:function(e,d){},onLayerAdded:function(e){},onLayerUpdate:function(e){},onLayerReset:function(e){}})})},"MW/rtc/plugins/messagebar/MessageBarServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./MessageBarService"],function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.messagebar.view","rtc.messagebar.model",
"messagebarlayer"]}},createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/plugins/messagebar/MessageBarService":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","mw-utils/Utils","MW/rtc/abstract/AbstractPlugin"],function(h,e,g,d,c){return h(c,{constructor:function(b,a,c){this._messageBarView=b;this._messageBarModel=a;this._messageBarLayers=c;for(b=0;b<this._messageBarLayers.length;b++)this._initializeLayer(this._messageBarLayers[b].getLayerName()),this.own(g.after(this._messageBarLayers[b],
"addMessage",e.hitch(this,"_handleAddMessage"),!0),g.after(this._messageBarLayers[b],"clearLayer",e.hitch(this,"_handleClearLayer"),!0),g.after(this._messageBarLayers[b],"updateLayer",e.hitch(this,"_handleUpdateLayer"),!0),g.after(this._messageBarLayers[b],"onTooltipClose",e.hitch(this,"_handleTooltipClose")))},_handleAddMessage:function(b,a,c,e,g,h){var p=d.generateUuid();a={style:a,tooltip:c,highPriority:e,visible:!0};e&&this._messageBarModel.hideMessagesOnLine(g);a.line=g;a.column=h;this._messageBarModel.addMessage(b,
p,a)},_handleUpdateLayer:function(b){this._messageBarModel.onLayerUpdate(b)},_initializeLayer:function(b){this._messageBarModel.addLayer({name:b,messages:{},messageAtLine:{}})},_handleClearLayer:function(b){this._messageBarModel.resetLayer(b)},_handleTooltipClose:function(){this._messageBarView.triggerTooltipClose()}})})},"MW/rtc/plugins/messagebar/MessageBarViewProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./MessageBarView"],function(h,e,g){return h(e,{isApplicable:function(){return!0},
requires:function(){return{isApplicable:[],createInstance:["rtc.cursor","rtc.internaldocument","rtc.messagebar.model","rtc.messagebar.rightmargincontainer","rtc.view"]}},createInstance:function(d,c,b,a,e){return new g(d,c,b,a,e)}})})},"MW/rtc/plugins/messagebar/MessageBarView":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-class dojo/dom-attr dojo/_base/lang dojo/aspect dojo/on dojo/touch mw-log/Log MW/rtc/abstract/AbstractPlugin MW/rtc/model/DocumentUtilities MW/rtc/view/ViewEventUtilities MW/rtc/view/ViewUtilities".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m){return h(l,{_MESSAGE_BAR_TITLE:"messageBar",_VERTICAL_OFFSET_PX:4,constructor:function(a,d,f,g,h){this._cursor=a;this._internalDocument=d;this._messageBarModel=f;this._rightMarginContainer=g;this._view=h;this._layerNodes={};this._markerNodes={};this._messageBar=e.create("div",{"class":this._MESSAGE_BAR_TITLE});this.own(b.after(this._messageBarModel,"onMessageHidden",c.hitch(this,"_removeMarker"),!0),b.after(this._messageBarModel,"onLayerAdded",c.hitch(this,"_createLayer"),
!0),b.after(this._messageBarModel,"onLayerUpdate",c.hitch(this,"_updateLayer"),!0),b.after(this._messageBarModel,"onLayerReset",c.hitch(this,"_resetLayer"),!0));this.own(b.after(this._view,"onViewUpdated",c.hitch(this,"_handleViewUpdated"),!0));this.own(b.after(this._rightMarginContainer,"onStaticHeightChanged",c.hitch(this,"_updateAllLayers")));this._rightMarginContainer.addOverlayLayer(this._messageBar)},_handleViewUpdated:function(a){(p.hasHeightEvent(a)||p.hasWidthEvent(a))&&this._updateAllLayers()},
triggerTooltipClose:function(){this._rightMarginContainer.hideTooltip()},_updateLayer:function(a){var b=this._messageBarModel.getMessagesForLayer(a);this._resetLayer(a);var c=document.createDocumentFragment(),d;for(d in b)b.hasOwnProperty(d)&&(b[d].id=d,this._drawMessage(c,a,b[d]));this._layerNodes[a].appendChild(c)},_updateAllLayers:function(){for(var a in this._layerNodes)this._layerNodes.hasOwnProperty(a)&&this._updateLayer(a)},_generateTooltipMessage:function(a){if(a.target.dataset.messageid)var b=
this._messageBarModel.getTooltip(a.target.dataset.messageid,a.target.dataset.layer);null!==b&&"undefined"!==typeof b&&("string"===typeof b?this._rightMarginContainer.showTooltip(b,a.target):this._rightMarginContainer.showTooltip(b(),a.target))},_markerClick:function(a){a=this._messageBarModel.getPositionInfo(a.target.dataset.layer,a.target.dataset.messageid);try{this._cursor.setLineColumn(a.line,a.column,!0)}catch(b){}},_removeMarker:function(a,b){e.destroy(this._markerNodes[a][b]);this._markerNodes[a][b]=
null},_drawMessage:function(a,b,c){if(this._checkLineIsValid(c.line)){var d=this._getMarkerPositionStyle(c.line);a=e.create("div",{"class":"messageMarker",style:d,"data-messageid":c.id,"data-testid":c.style,"data-layer":b},a,c.highPriority?"last":"first");this._markerNodes[b][c.id]=e.create("div",{"class":c.style},a)}},_getMarkerPositionStyle:function(a){a=this._getMarkerHeightForLine(a);return"top: "+(this._view.canScroll()?this._getRelativeMarkerPosition(a)+"%":this._getInlineMarkerPosition(a)+
"px")},_getMarkerHeightForLine:function(a){a=this._internalDocument.getPositionForLineColumn(a,1);return m.getTopOfVisiblePositionLine(a,this._view)},_getRelativeMarkerPosition:function(a){return 100*(a/this._view.getScrollHeight())},_getInlineMarkerPosition:function(a){var b=this._rightMarginContainer.getTopStaticHeight();return Math.max(0,a-b+this._VERTICAL_OFFSET_PX)},_resetLayer:function(a){this._layerNodes[a]&&(e.empty(this._layerNodes[a]),this._markerNodes[a]={})},_createLayer:function(b){var d=
e.create("div",{"class":b});this._layerNodes[b]=e.place(d,this._messageBar);this._markerNodes[b]={};this.own(a(this._layerNodes[b],f.release,c.hitch(this,"_markerClick")),a(this._layerNodes[b],"mouseover",c.hitch(this,"_generateTooltipMessage")),a(this._layerNodes[b],"mouseout",c.hitch(this._rightMarginContainer,"timeoutTooltip")))},_checkLineIsValid:function(a){return n.checkLineColumnIsValid(this._internalDocument,a-1,0)},destroy:function(){this._rightMarginContainer.removeOverlayLayer()}})})},
"MW/rtc/plugins/nodeconversionrules/NodeConversionRulesServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./NodeConversionRulesService"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.nodeconversionrule"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/nodeconversionrules/NodeConversionRulesService":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractRecursiveConverterPlugin"],function(h,e){return h(e,
{constructor:function(e){this._initializeRecursiveConverter(e)},isNodeConvertibleTo:function(e,d){var c=this._getConverter(e),b=this._getConverterByConstructor(d);return c.isConvertibleTo(d)&&b.isConvertibleFrom(e)}})})},"MW/rtc/plugins/offscreennotification/OffscreenNotificationProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./OffscreenNotification"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.cursor","rtc.view","rtc.scrollpane"]}},
createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/plugins/offscreennotification/OffscreenNotification":function(){define("dojo/_base/declare mw-log/Log MW/rtc/abstract/AbstractPlugin MW/rtc/model/Position MW/rtc/model/Range ./OffscreenNotificationAlignment ./OffscreenNotificationUtils ./view/OffscreenNotificationView".split(" "),function(h,e,g,d,c,b,a,f){return h(g,{_DEFAULT_HORIZONTAL_ALIGNMENT:a.HORIZONTAL_POSITION.CENTER,_DEFAULT_VERTICAL_ALIGNMENT:a.VERTICAL_POSITION.TOP,_DEFAULT_CUSTOM_X:0,
_DEFAULT_CUSTOM_Y:0,_DEFAULT_LINE_OFFSET:0,_DEFAULT_COLUMN_OFFSET:0,constructor:function(a,b,c){this._cursor=a;this._view=b;this._offscreenNotificationView=new f(b,c)},displayOffscreenNotificationForString:function(a,b,c,d){return this._displayOffscreenNotification(a,b,c,d,this._offscreenNotificationView.displayNotificationForString)},displayOffscreenNotificationForDomNode:function(a,b,c,d){return this._displayOffscreenNotification(a,b,c,d,this._offscreenNotificationView.displayNotificationForDomNode)},
removeOffscreenNotification:function(a){this._offscreenNotificationView.removeNotification(a)},_displayOffscreenNotification:function(a,f,g,h,m){e.assert(a instanceof d||a instanceof c,"Expected first argument to be either a Position or a Range");a=this._getRangeFromInput(a);g=g||new b;return this._isRangeInView(a)?null:m.call(this._offscreenNotificationView,a,f,g,h)},_getRangeFromInput:function(a){return a instanceof d?new c(a,a):a},_isRangeInView:function(a){return this._view.isPositionInView(a.getStartPosition(),
!0)&&this._view.isPositionInView(a.getEndPosition(),!0)},_removeAllOffscreenNotifications:function(){this._offscreenNotificationView.removeAllNotifications()},destroy:function(){this.inherited(arguments);this._removeAllOffscreenNotifications();this._offscreenNotificationView.destroy()}})})},"MW/rtc/plugins/offscreennotification/view/OffscreenNotificationView":function(){define(["dojo/_base/declare","dojo/dom-construct","mw-log/Log","./OffscreenNotificationPopup"],function(h,e,g,d){return h(null,{_NOTIFICATION_ID_COUNTER:1,
constructor:function(c,b){this._view=c;this._scrollPane=b;this._allNotifications={}},displayNotificationForString:function(c,b,a,d){b=e.create("div",{innerHTML:b},null);return this.displayNotificationForDomNode(c,b,a,d)},displayNotificationForDomNode:function(c,b,a,e){var g=this._scrollPane.parentElement;if(!g)return null;c=new d(c,b,a,e,this._view,g);c.forceUpdate();b=this._NOTIFICATION_ID_COUNTER;this._allNotifications[b]={notification:c};this._NOTIFICATION_ID_COUNTER++;return b},removeNotification:function(c){this._removeNotification(c);
delete this._allNotifications[c]},removeAllNotifications:function(){Object.keys(this._allNotifications).forEach(function(c){this._removeNotification(this._allNotifications[c])});this._allNotifications={}},_removeNotification:function(c){g.assert("number"===typeof c,"Expected notification ID to be a valid ID");g.assert(this._allNotifications[c],"ID provided does not match an existing notification");this._allNotifications[c].notification.destroy()},destroy:function(){this.removeAllNotifications()}})})},
"MW/rtc/plugins/offscreennotification/view/OffscreenNotificationPopup":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-construct dojo/dom-style mw-log/Log MW/rtc/view/ViewEventUtilities ../OffscreenNotificationUtils".split(" "),function(h,e,g,d,c,b,a,f,k){return h(null,{_OFFSCREEN_NOTIFICATION:"offscreenNotification",constructor:function(a,b,d,e,f,h){this._range=a;this._alignment=d;this._view=f;this._scrollParent=h;d.horizontalAlignment===k.HORIZONTAL_POSITION.NEAREST&&
(this._characterWidth=f.getCharacterWidthForLine(a.getStartPosition().getLine()));this.notificationDomNode=this._createNotification(b,e);this._aspectHandles=[];this._aspectHandles.push(g.after(f,"onViewUpdated",this._handleViewUpdated.bind(this),!0));this._setTestId();c.place(this.notificationDomNode,h);this._updatePosition()},forceUpdate:function(){this._updatePosition()},_createNotification:function(a,b){var d=c.create("div",{"class":this._OFFSCREEN_NOTIFICATION},null);c.place(a,d);this._setCss(d,
b);return d},_setCss:function(a,b){b&&Object.keys(b).forEach(function(c){a.style[c]=b[c]})},_handleViewUpdated:function(a){f.hasScrollEvent(a)&&!f.hasSizingEvent(a)&&this._updatePosition()},_updatePosition:function(){var a=this._getHorizontalPositioning(),b=this._getVerticalPositioning();this._setCss(this.notificationDomNode,a);this._setCss(this.notificationDomNode,b)},_getHorizontalPositioning:function(){var c={left:"auto",right:"auto"};switch(this._alignment.horizontalAlignment){case k.HORIZONTAL_POSITION.LEFT:c.left=
this._alignment.xOffset+"px";break;case k.HORIZONTAL_POSITION.RIGHT:if(this._view.getScrollWidth()===this._view.getClientWidth())c.right=-this._alignment.xOffset+"px";else{var d=this._scrollParent.clientWidth-this._view.getClientWidth();c.right=d-this._alignment.xOffset+"px"}break;case k.HORIZONTAL_POSITION.CENTER:d=parseInt(b.getComputedStyle(this.notificationDomNode).width);c.left=(this._view.getClientWidth()-d)/2+this._alignment.xOffset+"px";break;case k.HORIZONTAL_POSITION.NEAREST:d=this._getNearestHorizontalPosition();
c.left=d+this._alignment.xOffset+"px";break;case k.HORIZONTAL_POSITION.CUSTOM:c.left=this._alignment.x+this._alignment.xOffset+"px";break;default:a.assert(!1,"Invalid horizontal alignment provided: "+this._alignment.horizontalAlignment)}return c},_getNearestHorizontalPosition:function(){var a=parseInt(b.getComputedStyle(this.notificationDomNode).width),a=this._view.getClientWidth()-a,c=this._view.getCoordinateForPosition(this._range.getStartPosition()).x-this._view.getScrollLeft()+this._alignment.columnOffset*
this._characterWidth,d=c;c>a?d=a:0>c&&(d=0);return d},_getVerticalPositioning:function(){var c={top:"auto",bottom:"auto"};switch(this._alignment.verticalAlignment){case k.VERTICAL_POSITION.TOP:c.top=this._alignment.yOffset+"px";break;case k.VERTICAL_POSITION.BOTTOM:if(this._view.getScrollHeight()===this._view.getClientHeight())c.bottom=-this._alignment.yOffset+"px";else{var d=this._scrollParent.clientHeight-this._view.getClientHeight();c.bottom=d-this._alignment.yOffset+"px"}break;case k.VERTICAL_POSITION.CENTER:d=
parseInt(b.getComputedStyle(this.notificationDomNode).height);c.top=(this._view.getClientHeight()-d)/2+this._alignment.yOffset+"px";break;case k.VERTICAL_POSITION.NEAREST:d=this._getNearestVerticalPosition();c.top=d+this._alignment.yOffset+"px";break;case k.VERTICAL_POSITION.CUSTOM:c.top=this._alignment.y+this._alignment.yOffset+"px";break;default:a.assert(!1,"Invalid vertical alignment provided: "+this._alignment.verticalAlignment)}return c},_getNearestVerticalPosition:function(){var a=parseInt(b.getComputedStyle(this.notificationDomNode).height),
a=this._view.getClientHeight()-a,c=this._range.getStartPosition(),d=this._view.getCoordinateForPosition(c).y-this._view.getScrollTop(),c=this._view.getLineHeight(c.getLine()),c=d+=this._alignment.lineOffset*c;d>a?c=a:0>d&&(c=0);return c},_setTestId:function(){var b=null,c=null;switch(this._alignment.horizontalAlignment){case k.HORIZONTAL_POSITION.LEFT:b="left";break;case k.HORIZONTAL_POSITION.RIGHT:b="right";break;case k.HORIZONTAL_POSITION.CENTER:b="center";break;case k.HORIZONTAL_POSITION.NEAREST:b=
this._alignment.columnOffset;b="nearest("+(0<=b?"+":"")+b+")";break;case k.HORIZONTAL_POSITION.CUSTOM:b=this._alignment.x;b="custom("+(0<=b?"+":"")+b+")";break;default:a.assert(!1,"Invalid horizontal alignment provided: "+this._alignment.horizontalAlignment)}var e=this._alignment.xOffset,b=b+((0<=e?"+":"")+e+"x");switch(this._alignment.verticalAlignment){case k.VERTICAL_POSITION.TOP:c="top";break;case k.VERTICAL_POSITION.BOTTOM:c="bottom";break;case k.VERTICAL_POSITION.CENTER:c="center";break;case k.VERTICAL_POSITION.NEAREST:c=
this._alignment.lineOffset;c="nearest("+(0<=c?"+":"")+c+")";break;case k.VERTICAL_POSITION.CUSTOM:c=this._alignment.y;c="custom("+(0<=c?"+":"")+c+")";break;default:a.assert(!1,"Invalid vertical alignment provided: "+this._alignment.verticalAlignment)}e=this._alignment.yOffset;d.set(this.notificationDomNode,"data-testid","offscreenNotification_"+b+"_"+(c+((0<=e?"+":"")+e+"y")))},destroy:function(){this._aspectHandles.forEach(function(a){a.remove()});c.destroy(this.notificationDomNode)}})})},"MW/rtc/plugins/richtext/RichTextProvider":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/richtext/RichText","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{requires:function(){return{createInstance:"rtc.document rtc.internaldocument rtc.cursor rtc.actionservice rtc.indentutilities rtc.nodeconversionrulesservice".split(" ")}},createInstance:function(d,c,b,a,f,g){return new e(d,c,b,a,f,g)}})})},"MW/rtc/plugins/richtext/RichText":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/model/CodeUtilities MW/rtc/model/DocumentUtilities MW/rtc/model/NodeUtilities MW/rtc/model/Position MW/rtc/model/PositionUtilities MW/rtc/model/events/DocumentEvent MW/rtc/model/events/NumberOfLinesChangedEvent MW/rtc/model/events/FormatChangeEvent MW/rtc/model/DocumentEventUtilities MW/rtc/RichTextComponentFeatureEnum MW/rtc/plugins/nodeconversionrules/NodeConversionRulesUtilities MW/rtc/plugins/richtext/HeadingUtilities MW/rtc/plugins/richtext/ParagraphFormatsEnum ./nodes/inner/HeadingNode ./nodes/inner/RichTextParagraphNode ./nodes/leaf/RichTextNode ./RichTextUtilities dojo/i18n!l10n/nls/actions".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A){return h(d,{_SET_ALIGN:"_setAlign",_LEFT:"left",_CENTER:"center",_RIGHT:"right",constructor:function(a,b,c,d,f,h){this._document=a;this._internalDocument=b;this._cursor=c;this._actionService=d;this._indentUtilities=f;this._nodeConversionRules=h;this.own(g.after(this._cursor,"onChange",e.hitch(this,"_onCursorChange")));this.own(g.around(this._document,"insertBreak",e.hitch(this,"_aroundInsertBreak")));this.own(g.after(this._actionService,"onActionChange",
e.hitch(this,"_onActionChange"),!0));this.own(g.after(this._document,"onPreInsertText",e.hitch(this,"_createStyledContentFromText"),!0));a=[{name:t.NORMAL,method:e.hitch(this,"formatTemplate",t.NORMAL)},{name:t.TITLE,method:e.hitch(this,"formatTemplate",t.TITLE)},{name:t.HEADING1,method:e.hitch(this,"formatTemplate",t.HEADING1)},{name:t.HEADING2,method:e.hitch(this,"formatTemplate",t.HEADING2)},{name:t.HEADING3,method:e.hitch(this,"formatTemplate",t.HEADING3)}];b.registerFormatTemplates(a);d.loadActions(this._actions())},
_onCursorChange:function(a){this._checkPendingStyle();this._updateActions()},_onActionChange:function(a){if("selected"===a.key)switch(a.id){case q.RICH_TEXT.TOGGLE_BOLD_ACTION:var b=this.getFormatAndStyle();a.newValue!==b.bold&&this._toggleBold();break;case q.RICH_TEXT.TOGGLE_ITALIC_ACTION:b=this.getFormatAndStyle();a.newValue!==b.italic&&this._toggleItalic();break;case q.RICH_TEXT.TOGGLE_UNDERLINE_ACTION:b=this.getFormatAndStyle();a.newValue!==b.underline&&this._toggleUnderline();break;case q.RICH_TEXT.TOGGLE_MONOSPACE_ACTION:b=
this.getFormatAndStyle();a.newValue!==b.monospace&&this._toggleMonospace();break;case q.RICH_TEXT.ALIGNMENT_LEFT_ACTION:a.newValue&&!this._isAlignTo(this._LEFT)&&this._setAlign(this._LEFT);break;case q.RICH_TEXT.ALIGNMENT_CENTER_ACTION:a.newValue&&!this._isAlignTo(this._CENTER)&&this._setAlign(this._CENTER);break;case q.RICH_TEXT.ALIGNMENT_RIGHT_ACTION:a.newValue&&!this._isAlignTo(this._RIGHT)&&this._setAlign(this._RIGHT)}},formatTemplate:function(a){var b={};a===t.NORMAL?b.container=new v([]):x.isRichTextParagraphFormat(a)&&
(a=s.getLevelByHeadingFormat(a),b.container=new u([],{level:a}));return b},_actions:function(){return[{id:"rtc_bold_on",enabled:!1,callback:e.hitch(this,"_setStyle","bold",!0)},{id:"rtc_bold_off",enabled:!1,callback:e.hitch(this,"_setStyle","bold",!1)},{id:q.RICH_TEXT.TOGGLE_BOLD_ACTION,enabled:!1,selected:!1,key:"ctrl_b",platformKey:{mac:"meta_b"},callback:e.hitch(this,"_toggleBold")},{id:"rtc_italic_on",enabled:!1,callback:e.hitch(this,"_setStyle","italic",!0)},{id:"rtc_italic_off",enabled:!1,callback:e.hitch(this,
"_setStyle","italic",!1)},{id:q.RICH_TEXT.TOGGLE_ITALIC_ACTION,enabled:!1,selected:!1,callback:e.hitch(this,"_toggleItalic")},{id:"rtc_smart_indent_or_italic",enabled:!1,selected:!1,key:"ctrl_i",platformKey:{mac:"meta_i"},callback:e.hitch(this,"_smartIndentOrItalic")},{id:"rtc_underline_on",enabled:!1,callback:e.hitch(this,"_setStyle","underline",!0)},{id:"rtc_underline_off",enabled:!1,callback:e.hitch(this,"_setStyle","underline",!1)},{id:q.RICH_TEXT.TOGGLE_UNDERLINE_ACTION,enabled:!1,selected:!1,
key:"ctrl_u",platformKey:{mac:"meta_u"},callback:e.hitch(this,"_toggleUnderline")},{id:"rtc_monospace_on",enabled:!1,callback:e.hitch(this,"_setStyle","monospace",!0)},{id:"rtc_monospace_off",enabled:!1,callback:e.hitch(this,"_setStyle","monospace",!1)},{id:q.RICH_TEXT.TOGGLE_MONOSPACE_ACTION,enabled:!1,selected:!1,key:"ctrl_m",platformKey:{mac:"ctrl_m"},callback:e.hitch(this,"_toggleMonospace")},{id:q.RICH_TEXT.PARAGRAPH_FORMAT_CODE_ACTION,enabled:!1,selected:!1,callback:e.hitch(this,"_setTextFormat",
"code")},{id:q.RICH_TEXT.PARAGRAPH_FORMAT_TEXT_ACTION,enabled:!1,selected:!1,callback:e.hitch(this,"_setTextFormat",t.NORMAL)},{id:q.RICH_TEXT.PARAGRAPH_FORMAT_HEADING1_ACTION,enabled:!1,selected:!1,callback:e.hitch(this,"_setTextFormat",t.HEADING1)},{id:q.RICH_TEXT.PARAGRAPH_FORMAT_HEADING2_ACTION,enabled:!1,selected:!1,callback:e.hitch(this,"_setTextFormat",t.HEADING2)},{id:q.RICH_TEXT.PARAGRAPH_FORMAT_HEADING3_ACTION,enabled:!1,selected:!1,callback:e.hitch(this,"_setTextFormat",t.HEADING3)},{id:q.RICH_TEXT.PARAGRAPH_FORMAT_TITLE_ACTION,
enabled:!1,selected:!1,callback:e.hitch(this,"_setTextFormat",t.TITLE)},{id:"rtc_insert_break_and_toggle",enabled:!1,callback:e.hitch(this,"_insertBreakAndToggleCode")},{id:q.RICH_TEXT.TOGGLE_CODE_AND_TEXT_ACTION,text:A.toggleCodeText,enabled:!this._isReadOnly(),callback:e.hitch(this,"_toggleCodeAndText")},{id:"rtc_richtext_tab_insert",key:"tab",callback:e.hitch(this,"_insertTab")},{id:"rtc_richtext_shift_tab_insert",key:"shift_tab",callback:e.hitch(this,"_insertTab",!0)},{id:q.RICH_TEXT.ALIGNMENT_LEFT_ACTION,
enabled:!1,selected:!1,callback:e.hitch(this,this._SET_ALIGN,this._LEFT)},{id:q.RICH_TEXT.ALIGNMENT_CENTER_ACTION,enabled:!1,selected:!1,callback:e.hitch(this,this._SET_ALIGN,this._CENTER)},{id:q.RICH_TEXT.ALIGNMENT_RIGHT_ACTION,enabled:!1,selected:!1,callback:e.hitch(this,this._SET_ALIGN,this._RIGHT)}]},_setAlign:function(a){for(var b=this._document.startEdit(),c=this._cursor.selectionInfo(),d=c.startNode,c=this._cursor.adjustSelection(c,!0),c=c.endNode,e=c.textContainer();e;){e instanceof v&&this._internalDocument.changeNodeAttributes(e,
{align:a});if(e===d.textContainer())break;e=e.prevNode().textContainer()}a=this._internalDocument.getLineNumber(d.rootContainer());d=this._internalDocument.getLineNumber(c.rootContainer());a=[l.create(a,d)];this._internalDocument.emitDocumentEvents(a);this._cursor.onUpdate();b.appendUndoEvents(a);b.appendRedoEvents(a);this._document.endEdit();this._updateActions()},_setTextFormat:function(a){x.hasRichText(this._cursor)&&r.textContainersInCursorConvertibleTo(this._cursor,v,this._nodeConversionRules)&&
this._setParagraphFormat(a)},_setPendingStyleChange:function(a,b){this._pendingStyleChange||(this._pendingStyleChange={});a?(this._pendingStyleChange[a]=b,this._lastPendingStylePosition=this._cursor.getLineColumn()):this._resetPendingStyleChange()},_checkPendingStyle:function(){var a=this._cursor.getLineColumn();(!this._lastPendingStylePosition||!(this._lastPendingStylePosition.line===a.line&&this._lastPendingStylePosition.column===a.column))&&this._resetPendingStyleChange()},_aroundInsertBreak:function(a){var b=
this._document,c=this._cursor,d=this;return function(){if(a.apply(b,arguments)){var e=c.getNode().textContainer();e.isEmpty()&&e instanceof u&&d._setParagraphFormat(t.NORMAL)}}},_createStyledContentFromText:function(a){if(this._pendingStyleChange&&this._canSetStyle()){a=new w({text:a});var b=this._getStyle();a.updateAttributes(b);this._pendingStyleChange=null;return[a.serialize()]}},_resetPendingStyleChange:function(){this._lastPendingStylePosition=this._pendingStyleChange=null},_updateActions:function(){var a=
this.getFormatAndStyle();this._updateTextStyleActions(a);this._updateParagraphStyleActions(a)},_updateTextStyleActions:function(a){var b=r.textContainersInCursorConvertibleTo(this._cursor,v,this._nodeConversionRules),c=this._canSetStyle();this._actionService.updateAction(q.RICH_TEXT.TOGGLE_BOLD_ACTION,{enabled:c,selected:a.bold});this._actionService.updateAction(q.RICH_TEXT.TOGGLE_ITALIC_ACTION,{enabled:c,selected:a.italic});this._actionService.updateAction(q.RICH_TEXT.TOGGLE_UNDERLINE_ACTION,{enabled:c,
selected:a.underline});this._actionService.updateAction(q.RICH_TEXT.TOGGLE_MONOSPACE_ACTION,{enabled:c,selected:a.monospace});this._actionService.updateAction(q.RICH_TEXT.TOGGLE_CODE_AND_TEXT_ACTION,{enabled:!this._isReadOnly()&&b})},_updateParagraphStyleActions:function(a){var b=this.canSetFormat(),c=b&&x.isRichText(this._cursor),d=this._isAlignTo(this._LEFT),e=!1,f=!1;d||(e=this._isAlignTo(this._CENTER));!d&&!e&&(f=this._isAlignTo(this._RIGHT));var g=t.NORMAL;x.isRichTextParagraphFormat(a.format)&&
(g=a.format);this._actionService.updateAction(q.RICH_TEXT.PARAGRAPH_FORMAT_CODE_ACTION,{enabled:b,selected:"code"===a.format});this._actionService.updateAction(q.RICH_TEXT.PARAGRAPH_FORMAT_TEXT_ACTION,{enabled:b,selected:g===t.NORMAL});this._actionService.updateAction(q.RICH_TEXT.PARAGRAPH_FORMAT_HEADING1_ACTION,{enabled:b,selected:g===t.HEADING1});this._actionService.updateAction(q.RICH_TEXT.PARAGRAPH_FORMAT_HEADING2_ACTION,{enabled:b,selected:g===t.HEADING2});this._actionService.updateAction(q.RICH_TEXT.PARAGRAPH_FORMAT_HEADING3_ACTION,
{enabled:b,selected:g===t.HEADING3});this._actionService.updateAction(q.RICH_TEXT.PARAGRAPH_FORMAT_TITLE_ACTION,{enabled:b,selected:g===t.TITLE});this._actionService.updateAction(q.RICH_TEXT.ALIGNMENT_LEFT_ACTION,{enabled:!d&&c,selected:d});this._actionService.updateAction(q.RICH_TEXT.ALIGNMENT_CENTER_ACTION,{enabled:!e&&c,selected:e});this._actionService.updateAction(q.RICH_TEXT.ALIGNMENT_RIGHT_ACTION,{enabled:!f&&c,selected:f})},_isAlignTo:function(a){if(!this.canSetFormat())return!1;for(var b=
this._cursor.adjustSelection(this._cursor.selectionInfo(),!0),c=b.startNode,b=b.endNode.textContainer();b;){if(b instanceof v&&b.align!==a)return!1;if(b===c.textContainer())break;b=b.prevNode().textContainer()}return!0},_insertTab:function(a){if(!this._cursor.hasSelection())return a&&x.isRichText(this._cursor)?this._document.insertTab():!1;a=this._cursor.selectionInfo();if(!c.isCodeInRange(a.startNode,a.endNode))return this._indentUtilities.indentSelection(b.DEFAULT_TAB_STRING,!0),!0},_toggleCodeAndText:function(){this._actionService.getAction(q.RICH_TEXT.TOGGLE_CODE_AND_TEXT_ACTION).enabled&&
(this._isReadOnly()||("code"===x.getParagraphFormat(this._cursor)?this._setParagraphFormat(t.NORMAL):this._setParagraphFormat("code")))},_insertBreakAndToggleCode:function(){var a=this._cursor.selectionInfo(),b=this._cursor.getNode().textContainer();this._document.insertBreak();a.isLocal&&("RichTextParagraphNode"===b.className?this._setParagraphFormat("code"):"LineNode"===b.className&&this._setParagraphFormat(t.NORMAL))},getFormatAndStyle:function(){var a={bold:!1,italic:!1,underline:!1,monospace:!1};
a.format=x.getParagraphFormat(this._cursor);if("code"===a.format||!this._cursor)return a;var b=this._getStyle(),c;for(c in a)a.hasOwnProperty(c)&&b.hasOwnProperty(c)&&(a[c]=b[c]?!0:!1);return a},_getStyle:function(){var a=this._pendingStyleChange;if(!this._cursor)return a;a=this._cursor.selectionInfo();a.startPosition.isEqualTo(a.endPosition)?a=this._getStyleAttributes(this._cursor.getNode()):(a=this._cursor.adjustSelection(a,!0),a=this._getSelectionStyleAttributes(a.startNode,a.endNode));return a},
_getSelectionStyleAttributes:function(b,c){return c?a.getStyleAttributesFromRange(b,c):this._getStyleAttributes(b)},_getStyleAttributes:function(a){if(a){a=a.getStyleAttributes();if(this._pendingStyleChange)for(var b in this._pendingStyleChange)this._pendingStyleChange.hasOwnProperty(b)&&(a[b]=this._pendingStyleChange[b]);return a}return null},_setStyle:function(a,c){if(this._canSetStyle()){void 0===c&&(c=!0);var d=this._cursor.selectionInfo();if(d.startPosition.isEqualTo(d.endPosition))if(!0===b.isInWord(this._cursor.position))this._cursor.selectWordUnderCursor();
else{this._setPendingStyleChange(a,c);this._updateActions();return}var d=this._cursor.selectionInfo(),d=this._cursor.adjustSelection(d,!0),e=new f(d.startNode,d.startPos),d=new f(d.endNode,d.endPos);this._setStyleForRange(a,c,e,d)}},_setStyleForRange:function(a,b,c,d){var e=this._cursor.getPosition(),f=this._document.startEdit();c=this._internalDocument.createContiguousRange(c,d,!0);d={};d[a]=b;this._applyStyle(d,c.startNode,c.endNode);this._cursor.setPosition(e);this._cursor.onUpdate();a=this._internalDocument.getLineNumber(c.startNode.rootContainer());
b=this._internalDocument.getLineNumber(c.endNode.rootContainer());a=[l.create(a,0<=b?b:a)];this._internalDocument.emitDocumentEvents(a);f.appendUndoEvents(a);f.appendRedoEvents(a);this._document.endEdit()},applyStyleInLineColumn:function(a,b,c,d,e,f){c=this._internalDocument.getPositionForLineColumn(c,d);e=this._internalDocument.getPositionForLineColumn(e,f);this._setStyleForRange(a,b,c,e)},applyFormatInLine:function(a,b){var c=this._cursor.getLineColumn();this._cursor.setLineColumn(b,1);this._setParagraphFormatAtCursor(a);
this._cursor.setLineColumn(c.line,c.column)},_applyStyle:function(a,b,c){for(;c;){this._internalDocument.changeNodeAttributes(c,a);this._internalDocument.mergeTextNodeWithSibling(c,!0);if(c===b)break;c=c.prevNode()}this._internalDocument.mergeTextNodeWithSibling(b)},_canSetStyle:function(){if(this._isReadOnly()||!r.textContainersInCursorConvertibleTo(this._cursor,v,this._nodeConversionRules)||!this._cursor||!x.hasRichText(this._cursor))return!1;var a=this._cursor.selectionInfo();if(a.isNull)return this._isRichTextNode(a.startNode,
a.startPos);a=this._cursor.adjustSelection(a,!0);if(a.startPosition.isEqualTo(a.endPosition)&&!this._cursor.isFileEndSelected())return!1;for(var b=a.startNode;b;){if(b instanceof w)return!0;b=b===a.endNode?null:b.nextNode()}return!1},_isRichTextNode:function(a,b){return a.isInstanceOf(w)||(0===b||b===a.maxOffset())&&a.textContainer().isInstanceOf(v)?!0:!1},canSetFormat:function(){return this._isReadOnly()||!r.textContainersInCursorConvertibleTo(this._cursor,v,this._nodeConversionRules)?!1:x.hasRichText(this._cursor)},
_isReadOnly:function(){return this._internalDocument&&this._internalDocument.isReadOnly()||this._cursor&&this._cursor.isCursorReadOnly()?!0:!1},_toggleBold:function(){var a=this._getStyle().bold?!1:!0;this._setStyle("bold",a)},_smartIndentOrItalic:function(){var a=this._cursor.selectionInfo();c.isCodeInRange(a.startNode,a.endNode)||this._toggleItalic()},_toggleItalic:function(){var a=this._getStyle().italic?!1:!0;this._setStyle("italic",a)},_toggleMonospace:function(){var a=this._getStyle().monospace?
!1:!0;this._setStyle("monospace",a)},_toggleUnderline:function(){var a=this._getStyle().underline?!1:!0;this._setStyle("underline",a)},_setParagraphFormat:function(a){this._setParagraphFormatAtCursor(a);this._cursor.onUpdate(!1,!0)},_setParagraphFormatAtCursor:function(a){if(this._cursor){var b=x.getParagraphFormat(this._cursor);if(b!==a){var c=this._cursor.selectionInfo(),d=c.startNode.rootContainer(),e=c.endNode,g=c.startNode,c=this._cursor.adjustSelection(c,!0);if(d){var h=c.endNode.rootContainer(),
k=e===c.endNode?0:1,l=this._cursor.getPosition(),l=this._cursor.expandCursorPos(l),q,r,s=this._document.startBlockEdit(),t=[],u,w,A=-1;d.childrenAreContainers&&(u=c.startNode.textContainer(),u!==d.firstChild()&&(q=d.startPosition().getLine()-1,d=this._internalDocument.splitContainerAtNode(d,u.startNode(),!0),w=d.startPosition().getLine()-1,q!==w&&t.push(n.create(q,w,1)),q=c.isNull?l.posInNode:l.anchor.posInNode,w={line:this._internalDocument.getLineNumber(g.rootContainer()),column:g.offsetInContainer(u)+
q},q=d.previousSibling()));h.childrenAreContainers&&(u=c.endNode.textContainer(),A=e.offsetInContainer(e.textContainer()),g=u===h.lastChild(),e=h.endPosition().getLine()-1,this._internalDocument.splitContainerAtNode(h,u.endNode()),g||(r=h.nextSibling(),u=r.startPosition().getLine()-1,e!==u&&t.push(n.create(e,u,1))));var R=null;for(u=!1;d;){d===h&&(u=!0);if(this._nodeConversionRules.isNodeConvertibleTo(d,x.getNodeConstructorByFormat(a)))if(e=d.startPosition().getLine()-1,d.childrenAreContainers){for(var g=
d.children.length,ea=0;ea<g;ea+=1){var R=this._internalDocument.createContainerForType("text").container,Y=this._internalDocument.createNode(R.getDefaultChild());R.addChild(Y);this._internalDocument.insertAtPosition(R,new f(d,0));var $=d.firstChild();$ instanceof v?this._internalDocument.spliceContainers(R,$):(Y.insertText($.getText()),this._internalDocument.deleteNode($,{node:Y,offset:0}));R=this._internalDocument.convertParagraph(a,R);if($=$.align)R.align=$;d.anchorId&&(R.anchorId=d.anchorId);q||
(q=R)}this._internalDocument.deleteNode(d,{node:R.firstChild(),offset:0});1!==g&&t.push(n.create(e,e+g-1,1))}else R=this._internalDocument.convertParagraph(a,d),d.align&&(R.align=d.align),d.anchorId&&(R.anchorId=d.anchorId),q||(q=R);else R=d;if(u)break;d=R.nextSibling()}r||(r=R);c.isReversed?(l.anchor.line=this._internalDocument.getLineNumber(R)+k,0<=A&&(l.anchor.column=A+l.anchor.posInNode),!c.isNull&&w&&(l.line=w.line,l.column=w.column)):(l.line=this._internalDocument.getLineNumber(R)+k,0<=A&&(l.column=
A+l.posInNode),!c.isNull&&w&&(l.anchor=w));this._cursor.setPosition(l);c=this._internalDocument.getLineNumber(q);r=this._internalDocument.getLineNumber(r);t.push(p.create(c,r,b,a));s.appendRedoEvents(t);s.appendUndoEvents(m.translateEventsForUndo(t));this._internalDocument.emitDocumentEvents(t);this._document.endBlockEdit(s)}}}}})})},"MW/rtc/plugins/richtext/CodeTextToggleShortcutsProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/richtext/CodeTextToggleShortcuts"],
function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.actionservice","rtc.richtext"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/richtext/CodeTextToggleShortcuts":function(){define(["dojo/_base/declare","MW/rtc/RichTextComponentFeatureEnum"],function(h,e){return h(null,{_ACTIONS:[{id:e.RICH_TEXT.TOGGLE_CODE_AND_TEXT_ACTION,key:"ctrl_e",contextMenuGroup:"Default",platformKey:{mac:"ctrl_alt_e"}},{id:e.RICH_TEXT.PARAGRAPH_FORMAT_TEXT_ACTION,key:"ctrl_alt_t",
platformKey:{mac:"ctrl_alt_t"}},{id:e.RICH_TEXT.PARAGRAPH_FORMAT_TITLE_ACTION,key:"ctrl_alt_l",platformKey:{mac:"ctrl_alt_l"}},{id:e.RICH_TEXT.PARAGRAPH_FORMAT_HEADING1_ACTION,key:"ctrl_shift_1",platformKey:{mac:"ctrl_shift_1"}},{id:e.RICH_TEXT.PARAGRAPH_FORMAT_HEADING2_ACTION,key:"ctrl_shift_2",platformKey:{mac:"ctrl_shift_2"}},{id:e.RICH_TEXT.PARAGRAPH_FORMAT_HEADING3_ACTION,key:"ctrl_shift_3",platformKey:{mac:"ctrl_shift_3"}}],constructor:function(e){this._ACTIONS.forEach(function(d){var c=e.getAction(d.id);
e.removeAction(d.id);c.key=d.key;c.platformKey=d.platformKey;d.contextMenuGroup&&(c.contextMenuGroup=d.contextMenuGroup);e.addAction(c)})}})})},"MW/rtc/plugins/richtext/MatlabJSONMimeConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/richtext/MatlabJSONMimeConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/richtext/MatlabJSONMimeConverter":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/cutcopypaste/MIMETypes","MW/rtc/plugins/cutcopypaste/mime/MimeConverter"],function(h,e,g){return h(g,{_PRIORITY:99,constructor:function(d){this._cursor=d},getType:function(){return e.MATLAB_RICHTEXT},convertFromMimeData:function(d){try{return JSON.parse(d)}catch(c){}},priority:function(){return this._PRIORITY}})})},"MW/rtc/plugins/richtext/HTMLRichTextElementHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/richtext/HTMLRichTextElementHandler"],
function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.cutcopypaste.htmlmimeconverter"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/richtext/HTMLRichTextElementHandler":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-geometry dojo/dom-style MW/rtc/plugins/richtext/nodes/inner/HeadingNode MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNode MW/rtc/plugins/richtext/nodes/leaf/RichTextNode".split(" "),function(h,e,g,d,
c,b,a,f){return h(null,{_LEFT:"left",_CENTER:"center",_RIGHT:"right",constructor:function(b){b.registerNodeHandler(["P","DIV","TR","PRE"],e.hitch(this,"_convertDIVs"));b.registerNodeHandler("H1",e.hitch(this,"_convertHeader",1));b.registerNodeHandler("H2",e.hitch(this,"_convertHeader",2));b.registerNodeHandler("BR",e.hitch(this,"_convertBR"));b.registerTextHandler(e.hitch(this,"_convertText"));b.setDefaultParagraphFactory(function(){return new a([])});this._fontMap={monospace:!0}},_convertHeader:function(a,
d,e){d=c.getComputedStyle(d).textAlign;e.appendParagraph(new b([],{align:this._normalizeAlignment(d),level:a}))},_convertDIVs:function(a,b){var c=b.getLastParagraph();c&&(0<c.children.length&&!c.childrenAreContainers)&&b.leaveParagraph()},_convertBR:function(a,b){b.isInParagraph()||(b.appendParagraph(),b.appendNode(new f({})));b.leaveParagraph()},_checkMonospace:function(a){var b=c.getComputedStyle(a).fontFamily;if(this._fontMap.hasOwnProperty(b))return this._fontMap[b];a=g.create("span",null,a,"last");
a.innerText="iiiii";var e=d.position(a).w;a.innerText="mmmmm";var f=d.position(a).w;g.destroy(a);a=0<e+f&&2>Math.abs(e-f);return this._fontMap[b]=a},_convertText:function(a,b){var d=c.getComputedStyle(a.parentNode),e=b.getLastParagraph(),g={};if((d.fontWeight.match(/\bbold\b/)||"700"===d.fontWeight)&&(!e||"HeadingNode"!==e.className))g.bold=!0;d.fontStyle.match(/\bitalic\b/)&&(g.italic=!0);d.textDecoration.match(/\bunderline\b/)&&(g.underline=!0);this._checkMonospace(a.parentNode)&&(g.monospace=!0);
e=a.textContent;d=d.whiteSpace&&"pre"===d.whiteSpace;d||(e=e.replace(/^\n+/,""),e=e.replace(/\n+\s*/g," "));e=e.replace(/\xA0/g," ");if(d&&e.match(/\n/))this._convertTextArray(e.split(/\n/),g,b),this._setAlign(a,b);else if(e||d)g.text=e,b.appendNode(new f(g)),this._setAlign(a,b)},_convertTextArray:function(a,b,c){a.forEach(function(a,d){b.text=a;0<d&&c.leaveParagraph();c.appendNode(new f(b))})},_setAlign:function(b,d){var e=d.getLastParagraph();if(e&&e instanceof a){var f=c.getComputedStyle(b.parentNode).textAlign;
e.align=this._normalizeAlignment(f)}},_normalizeAlignment:function(a){return-1<a.indexOf(this._CENTER)?this._CENTER:-1<a.indexOf(this._RIGHT)?this._RIGHT:this._LEFT}})})},"MW/rtc/plugins/richtext/export/RichTextParagraphNode2HTMLProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/richtext/export/RichTextParagraphNode2HTML"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/richtext/export/RichTextParagraphNode2HTML":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/export/html/BaseInnerNode2HTML","MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNode"],function(h,e,g){return h([e],{_STYLES:"margin padding line-height min-height white-space color font-family font-style font-size font-weight text-align".split(" "),constructor:function(){},getApplicableNodeClass:function(){return g}})})},"MW/rtc/plugins/richtext/export/HeadingNode2HTMLProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/richtext/export/HeadingNode2HTML"],
function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/richtext/export/HeadingNode2HTML":function(){define(["dojo/_base/declare","MW/rtc/plugins/export/html/BaseInnerNode2HTML","MW/rtc/plugins/richtext/nodes/inner/HeadingNode"],function(h,e,g){return h([e],{_STYLES:"margin padding line-height min-height white-space color font-family font-style font-size font-weight text-align".split(" "),constructor:function(){this.reset()},
getApplicableNodeClass:function(){return g},reset:function(){this._firstTitle=""},finalize:function(d){d.addToHead("\x3ctitle\x3e"+(""!==this._firstTitle?this._firstTitle:"Untitled")+"\x3c/title\x3e")},enter:function(d,c,b){""===this._firstTitle&&1===c.level&&(this._firstTitle=c.getText());this.inherited(arguments)},_getTagName:function(d){return"h"+d.level}})})},"MW/rtc/plugins/richtext/export/RichTextNode2HTMLProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"MW/rtc/plugins/richtext/export/RichTextNode2HTML"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/richtext/export/RichTextNode2HTML":function(){define(["dojo/_base/declare","mw-html-utils/HtmlUtils","MW/rtc/plugins/export/NodeExporterInterface","MW/rtc/plugins/richtext/nodes/leaf/RichTextNode"],function(h,e,g,d){return h([g],{constructor:function(){},getApplicableNodeClass:function(){return d},visit:function(c,
b,a,d,g){g="";b.bold&&(g+=" font-weight: bold;");b.italic&&(g+=" font-style: italic;");b.underline&&(g+=" text-decoration: underline;");b.monospace&&(g+=" font-family: monospace;");var h="\x3cspan";g&&(h=h+" style\x3d'"+g);h+="'\x3e";c.addToBody(h);b=b.getText().substring(a,d);c.addToBody(e.escapeHtml(b));c.addToBody("\x3c/span\x3e")}})})},"MW/rtc/plugins/richtext/view/RichTextCoordinateConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./RichTextCoordinateConverter"],
function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.richtext.rangeconverter","rtc.view.viewmodel"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/plugins/richtext/view/RichTextCoordinateConverter":function(){define(["dojo/_base/declare","MW/rtc/plugins/richtext/nodes/leaf/RichTextNode","MW/rtc/view/coordinateconverter/base/TextCoordinateConverter"],function(h,e,g){return h(g,{constructor:function(d,c){this._rangeConverter=d;this._viewModel=c},getApplicableNodeClass:function(){return e}})})},
"MW/rtc/view/coordinateconverter/base/TextCoordinateConverter":function(){define("dojo/_base/declare dojo/has mw-log/Log MW/rtc/model/Position MW/rtc/view/ViewUtilities ../CoordinateConverterUtilities ./BaseCoordinateConverter".split(" "),function(h,e,g,d,c,b,a){return h(a,{getPositionFromCoordinate:function(a,c){var e=this._getClientRects(c);if(!b.isCoordinateWithinRects(a,e))return null;e=this.getDomNode(c);return(e=this._getOffsetFromCoordinate(e,a))?new d(c,e.offset,e.isRightAligned):null},_getClientRects:function(a){var c=
[];a=this.getDomNode(a);if(!a)return c;a.textContent?(c=this._rangeConverter.getNodeContentsRange(a),c=b.getClientRectsByRange(c)):(a=this._rangeConverter.getNodeRange(a))&&(c=b.getClientRectsByRange([a]));return c},_getSubClientRects:function(a){return this.getClientRects(a)},_getOffsetFromCoordinate:function(a,c){var d=this._rangeConverter.createIndexMap(a),e=d.length;if(!e)return{offset:0};for(var g=0,h=e-1,e=0,q;g<=h;)if(e=Math.floor((g+h)/2),q=this._getRectAt(a,e,d),b.isCoordinateAboveOrLeftOfRect(c,
q))h=e-1;else if(b.isCoordinateBelowOrRightOfRect(c,q))g=e+1;else break;g>h&&(c.x>q.right&&c.y<q.top?e=h:c.x<q.left&&c.y>q.bottom&&(e=g),q=this._getRectAt(a,e,d)||q);b.isCoordinateAtRightHalfOfRect(c,q)&&(e+=1);g=!1;(h=this._getRectAt(a,e,d))&&h.top>q.top&&(g=!0);return{offset:e,isRightAligned:g,indexMap:d}},_getRectAt:function(a,b,c){return(a=this._rangeConverter.getCharRange(a,b,!1,c))?this._selectedRectFromRange(a):null},_selectedRectFromRange:function(a,b){var c=a.getClientRects();if(0===c.length)return null;
var d=c[0];if(e("ie")||e("trident")||e("edge"))return d;for(var g=0;g<c.length;g+=1)if(0!==c[g].width){d=c[g];break}return d},getCoordinateFromPosition:function(a){var b=a.getOffset();if(0>b)return null;var c=a.getNode(),c=this.getDomNode(c);if(!c||!c.children)return null;(a=this.isRightAligned(a))&&(b-=1);b=this._rangeConverter.getCharRange(c,b,a)||this._rangeConverter.getNodeRange(c);return!b?null:this._getCoordinateFromRange(b,a)},isRightAligned:function(a){var b=a.getNode(),c=a.getOffset();return 0===
c?!1:a.isRightAligned()||c===b.maxOffset()},_getCoordinateFromRange:function(a,b){return e("ie")||e("trident")||e("edge")?this._getCoordinateFromRangeByExplosion(a,b):this._getCoordinateFromRangeByRects(a,b)},_getCoordinateFromRangeByExplosion:function(a,c){var d=this._selectedRectFromRange(a,c);if(null===d)return d;var e=document.createElement("span");a.insertNode(e);var g=e.getBoundingClientRect(),g=b.convertFromClientToOffset({x:g.left,y:g.top},this._viewModel),d={x:g.x,y:g.y,height:e.offsetHeight,
width:d.width,pageX:c?d.right:d.left};this._removeAndMergeSiblingTextNodes(e);return d},_removeAndMergeSiblingTextNodes:function(a){var b=a.previousSibling,c=a.nextSibling,d=a.parentNode;d.removeChild(a);this._canMergeTextNodes(b,c)&&(b.nodeValue+=c.nodeValue,d.removeChild(c))},_canMergeTextNodes:function(a,b){return c.isDomTextNode(a)&&c.isDomTextNode(b)},_getCoordinateFromRangeByRects:function(a,c){var d=this._selectedRectFromRange(a,c);if(null===d)return d;var e=b.convertFromClientToOffset({x:d.left,
y:d.top},this._viewModel);return{x:e.x,y:e.y,height:d.height,width:d.width,pageX:c?d.right:d.left}}})})},"MW/rtc/plugins/richtext/view/RichTextRangeConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./RichTextRangeConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/richtext/view/RichTextRangeConverter":function(){define(["dojo/_base/declare","MW/rtc/plugins/richtext/nodes/leaf/RichTextNode",
"MW/rtc/view/rangeconverter/base/TextRangeConverter"],function(h,e,g){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return e}})})},"MW/rtc/view/rangeconverter/base/TextRangeConverter":function(){define(["dojo/_base/declare","dojo/dom-construct","MW/rtc/view/ViewUtilities","./AbstractRangeConverter"],function(h,e,g,d){return h(d,{_PLACEHOLDER_CLASS:"textContainer",getRangeFromPosition:function(c,b){var a=c.getNode(),d=c.getOffset(),e=a.maxOffset();b=b||this._getDomNode(a);
a=d;0===e?(d=b.firstChild||b,a=0):(a=this.createIndexMap(b),d===e?(e=a[d-1],d=e.textNode,a=e.localIndex+1):(e=a[d],d=e.textNode,a=e.localIndex));return this._getRangeStartEnd(d,a,d,a)},getContainerForPosition:function(c,b){var a=this.getRangeFromPosition(c,b);return!a?null:g.isDomTextNode(a.startContainer)?this._getOrInsertNewContainerAroundText(c,a):this._getOrInsertNewContainerWhenEmptyText(c,b)},_getOrInsertNewContainerAroundText:function(c,b){var a,d=b.startContainer;a=d.parentNode;var g=a.previousSibling,
h=a.nextSibling;0===b.startOffset?a=this._isViewOnlyContainer(g)?g:this._insertNewContainerInto(a,"before"):0<c.getOffset()&&c.isAtRightEdge()?a=this._isViewOnlyContainer(h)?h:this._insertNewContainerInto(a,"after"):(d=d.splitText(b.startOffset),g=a.cloneNode(!1),e.place(d,g),e.place(g,a,"after"),a=this._insertNewContainerInto(a,"after"));return a},_getOrInsertNewContainerWhenEmptyText:function(c,b){var a=c.getNode();b=b||this._getDomNode(a);return this._isViewOnlyContainer(b.firstChild)?b.firstChild:
this._insertNewContainerInto(b,"first")},_insertNewContainerInto:function(c,b){var a=this._createContainer();e.place(a,c,b);return a},_isViewOnlyContainer:function(c){return c&&c.className===this._PLACEHOLDER_CLASS},_createContainer:function(){return e.create("span",{"class":this._PLACEHOLDER_CLASS})},getNodeRange:function(c){var b=document.createRange();try{b.selectNode(c)}catch(a){return null}return b},getNodeContentsRange:function(c){var b=[];for(c=document.createTreeWalker(c,NodeFilter.SHOW_TEXT|
NodeFilter.SHOW_ELEMENT,this._filterTextNodes.bind(this),!1);c.nextNode();){var a=c.currentNode;try{var d=document.createRange();d.selectNodeContents(a);b.push(d)}catch(e){}}return b},getCharRange:function(c,b,a,d){d=d||this.createIndexMap(c);var e=d[b];if(!e)return null;c=e.textNode;var g=e.localIndex,h=e.textNode,e=e.localIndex+1;!a&&0<b&&(b=d[b-1],this._hasViewOnlyElementBetweenTextNodes(b.textNode,c)&&(c=b.textNode,g=b.localIndex+1));return this._getRangeStartEnd(c,g,h,e)},_hasViewOnlyElementBetweenTextNodes:function(c,
b){if(c===b)return!1;var a=b.parentNode.previousSibling;return this._isViewOnlyContainer(a)&&0<a.textContent.length},createIndexMap:function(c){var b=[];for(c=document.createTreeWalker(c,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,this._filterTextNodes.bind(this),!1);c.nextNode();)for(var a=c.currentNode,d=0;d<a.textContent.length;d+=1)b.push({textNode:a,localIndex:d});return b},_filterTextNodes:function(c){return g.isDomTextNode(c)&&""!==c.nodeValue?NodeFilter.FILTER_ACCEPT:this._isViewOnlyContainer(c)?
NodeFilter.FILTER_REJECT:NodeFilter.FILTER_SKIP},_getRangeStartEnd:function(c,b,a,d){var e=document.createRange();try{e.setStart(c,b),e.setEnd(a,d)}catch(g){return null}return e},_getDomNode:function(c){return c.box}})})},"MW/rtc/view/rangeconverter/base/AbstractRangeConverter":function(){define(["dojo/_base/declare","mw-log/Log","MW/rtc/abstract/AbstractConverter"],function(h,e,g){return h(g,{getRangeFromPosition:function(d){e.error("Unimplemented: getRangeFromPosition")},getContainerFromPosition:function(d){e.error("Unimplemented: getContainerFromPosition")},
_getDomNode:function(d){e.error("Unimplemented: getDomNode")}})})},"MW/rtc/plugins/saveaspdf/SaveAsPDFProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/saveaspdf/SaveAsPDF"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.pdfwriters"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/plugins/saveaspdf/SaveAsPDF":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/DeferredList MW/rtc/plugins/saveaspdf/Tags MW/rtc/plugins/saveaspdf/utils/XSLFOWriter MW/rtc/plugins/saveaspdf/utils/XSLFOWriterUtilities".split(" "),
function(h,e,g,d,c,b,a){return h(null,{_REPLACEMENT_CHARACTER_STRING:"\x26#xFFFD;",_FIGURE_DEFAULT_FORMAT:"png",_FIGURE_DEFAULT_RESOLUTION:"600",constructor:function(a,c){this._internalDocument=a;this._writer=new b(c);this._promiseList=[]},saveAsPDF:function(b){var h=this._internalDocument.root.box,l=[],n;b&&b.figurePath&&(n={figureFormat:this._FIGURE_DEFAULT_FORMAT,figureResolution:this._FIGURE_DEFAULT_RESOLUTION,promiseList:l},e.mixin(n,b));b=this._writer.createDocument(h,n);var p=a.serializeToFormattedString(b,
c.XML_HEADER),p=this._normalizeString(p),m=new g;(new d(l)).then(function(a){m.resolve(p)});return m},_normalizeString:function(a){var b,c=a.split("");for(b=0;b<c.length;b++){var d=a.charCodeAt(b);if(32>d||126<d)c[b]=this._replaceDecouragedChar(d)}return a=c.join("")},_replaceDecouragedChar:function(a){return 9>a||11===a||12===a||14<=a&&31>=a||55296<=a&&56319>=a||65533<a?this._REPLACEMENT_CHARACTER_STRING:56320<=a&&57343>=a?"":"\x26#"+a+";"}})})},"dojo/DeferredList":function(){define(["./_base/kernel",
"./_base/Deferred","./_base/array"],function(h,e,g){h.DeferredList=function(d,c,b,a,f){var h=[];e.call(this);var l=this;0===d.length&&!c&&this.resolve([0,[]]);var n=0;g.forEach(d,function(e,f){function g(a,b){h[f]=[a,b];n++;n===d.length&&l.resolve(h)}e.then(function(a){c?l.resolve([f,a]):g(!0,a)},function(c){b?l.reject(c):g(!1,c);if(a)return null;throw c;})})};h.DeferredList.prototype=new e;h.DeferredList.prototype.gatherResults=function(d){d=new h.DeferredList(d,!1,!0,!1);d.addCallback(function(c){var b=
[];g.forEach(c,function(a){b.push(a[1])});return b});return d};return h.DeferredList})},"MW/rtc/plugins/saveaspdf/Tags":function(){define({XML_HEADER:'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e',NAMESPACE_URL:"http://www.w3.org/1999/XSL/Format",NAMESPACE_TAG:"fo",SCHEMA_TAG:"xmlns",ROOT_TAG_NAME:"root",LAYOUT_MASTER:"layout-master-set",SIMPLE_PAGE_MASTER:"simple-page-master",PAGE_SEQUENCE:"page-sequence",REGION_BODY:"region-body",REGION_AFTER:"region-after",STATIC_CONTENT:"static-content",
PAGE_NUMBER:"page-number",PAGE_NUMBER_CITATION:"page-number-citation",FLOW:"flow",BLOCK:"block",BLOCK_CONTAINER:"block-container",INLINE:"inline",LIST_BLOCK:"list-block",LIST_ITEM:"list-item",LIST_ITEM_LABEL:"list-item-label",LIST_ITEM_BODY:"list-item-body",BASIC_LINK:"basic-link",EXTERNAL_GRAPHIC:"external-graphic",LEADER:"leader"})},"MW/rtc/plugins/saveaspdf/utils/XSLFOWriter":function(){define("dojo/_base/declare dojo/_base/lang mw-log/Log MW/rtc/plugins/saveaspdf/Attributes MW/rtc/plugins/saveaspdf/Tags MW/rtc/plugins/saveaspdf/utils/XSLConstants MW/rtc/plugins/saveaspdf/utils/XSLFOWriterUtilities".split(" "),
function(h,e,g,d,c,b,a){return h(null,{constructor:function(a){this._writers={};a.forEach(function(a){a.getTypes().forEach(function(b){g.assert(!this._writers[b],"Writer for type '"+b+"'' already exists.");this._writers[b]=a},this)},this);a.forEach(function(a){a.setWriters(this._writers)},this)},createDocument:function(a,e){Object.keys(this._writers).forEach(function(a){this._writers[a].setOptions(e)},this);var g=this._writers[b.BASE_DOCUMENT].createElement(c,d),h=this._getPageFlow(g);this._createTags(a,
h);return g},_createTags:function(e,g){var h,n,p,m,q=e.children.length;for(h=0;h<q;h+=1)n=e.children[h],p=this._getWriterType(n),m=this._writers[p],a.isBlock(n)?(p=a.createXMLElement(c,c.BLOCK_CONTAINER),a.isSectionBlock(n)&&(m=a.getCommonStyles(n),m["padding-left"]="0px",m["padding-right"]="0px",a.applyStyles(p,m)),-1<n.className.indexOf("CodeExampleBlock")&&(m=a.getCommonStyles(n),m["margin-left"]="20pt",m["border-top"]="0pt none",m["border-left"]="0pt none",m["border-right"]="0pt none",m["border-bottom"]=
"0pt none",a.applyStyles(p,m)),this._createTags(n,p),g.appendChild(p)):p===b.TABLEOFCONTENT?(n=m.createElement(n,c,d,this._writers),g.appendChild(n)):(p=a.createWrapperElement(n,c),n=m.createElement(n,c,d,this._writers),n.paragraph?p.appendChild(n.paragraph):p.appendChild(n),g.appendChild(p),n.output&&g.appendChild(n.output))},_getPageFlow:function(a){return a.firstChild.childNodes[1].lastChild},_getWriterType:function(c){if(a.isCode(c)||a.isSectionBreak(c)||a.isBlock(c)||a.isHeading(c)||a.isTitle(c))return b.PARAGRAPH;
if(a.isTableOfContent(c))return b.TABLEOFCONTENT;if(a.isParagraph(c))return b.PARAGRAPH;if(a.isUnorderedList(c)||a.isOrderedList(c))return b.LIST;if(a.isCodeExample(c))return b.PARAGRAPH}})})},"MW/rtc/plugins/saveaspdf/Attributes":function(){define({MASTER_NAME:"master-name",MASTER_REFERENCE:"master-reference",PAGE_MASTER:"PageMaster",MARGIN:"margin",MARGIN_BOTTOM:"margin-bottom",MARGIN_LEFT:"margin-left",MARGIN_RIGHT:"margin-right",MARGIN_VALUE:"1cm",FONT_FAMILY:"font-family",FONT_SIZE:"font-size",
SERIF:"serif",ARIAL_UNICODE:"Arial Unicode MS",ARIAL:"Arial",COLOR:"color",WHITE_SPACE:"white-space",WHITE_SPACE_PRESERVE:"pre",FLOW_NAME:"flow-name",XSL_REGION_BODY:"xsl-region-body",REGION_NAME:"region-name",REGION_NAME_VALUE:"Footer",EXTENT:"extent",EXTENT_VALUE:"1cm",DISPLAY_ALIGN:"display-align",DISPLAY_ALIGN_VALUE:"after",PAGE_NUMBER_FONT_SIZE:"11pt",PROVISIONAL_DISTANCE:"provisional-distance-between-starts",LIST_INDENT:"5mm",LABEL_END:"label-end()",BODY_START:"body-start()",END_INDENT:"end-indent",
START_INDENT:"start-indent",SOURCE:"src",ERROR_ICON:"url(../images-liveeditor/error.png)",WARNING_ICON:"url(../images-liveeditor/warning.png)",HORIZONTAL_ELLIPSIS:"url(../images-liveeditor/HEllipsis.png)",VERTICAL_ELLIPSIS:"url(../images-liveeditor/VEllipsis.png)",CONTENT_HEIGHT:"content-height",CONTENT_WIDTH:"content-width",IMAGE_HEIGHT:"80%",IMAGE_WIDTH:"80%",TEXT_ALIGN:"text-align",TEXT_ALIGN_LAST:"text-align-last",CENTER:"center",RIGHT:"right",JUSTIFY:"justify",ID:"id",REF_ID:"ref-id",EXTERNAL_DESTINATION:"external-destination",
INTERNAL_DESTINATION:"internal-destination",LEADER_PATTERN:"leader-pattern",VERTICAL_ALIGN:"vertical-align",PADDING_LEFT:"padding-left",VERTICAL_ELLIPSIS_PADDING_LEFT:"25pt"})},"MW/rtc/plugins/saveaspdf/utils/XSLFOWriterUtilities":function(){define(["dojo/dom-style","dojo/query","MW/rtc/plugins/saveaspdf/utils/XSLConstants"],function(h,e,g){return{serializeToFormattedString:function(d,c){var b=(new window.XMLSerializer).serializeToString(d);return c+b},createXMLElement:function(d,c){c=d.NAMESPACE_TAG+
":"+c;return document.createElementNS(d.NAMESPACE_URL,c)},createWrapperElement:function(d,c){var b=this.createXMLElement(c,c.BLOCK),a=this.getCommonStyles(d);this.applyStyles(b,a);return b},setAttribute:function(d,c,b){d.setAttributeNS(null,c,b)},createTextTag:function(d){return document.createTextNode(d)},isOutputParagraph:function(d){return-1<d.className.indexOf(g.OUTPUT_CLASS)},isWarning:function(d){return-1<d.className.indexOf(g.WARNING_CLASS)},isError:function(d){return-1<d.className.indexOf(g.ERROR_CLASS)},
isFigure:function(d){return-1<d.className.indexOf(g.FIGURES_CLASS)},isSymEquation:function(d){return-1<d.className.indexOf(g.SYMEQUATION_CLASS)},isText:function(d){return-1<d.className.indexOf(g.TEXT_CLASS)},isVariable:function(d){return-1<d.className.indexOf(g.VARIABLES_CLASS)},isVariableString:function(d){return-1<d.className.indexOf(g.VARIABLE_STRING_CLASS)},isInteractiveVariable:function(d){return-1<d.className.indexOf(g.INTERACTIVE_VARIABLE_CLASS)},isMatrix:function(d){return-1<d.className.indexOf(g.MATRIX_CLASS)},
isInteractiveMatrix:function(d){return-1<d.className.indexOf(g.INTERACTIVE_MATRIX_CLASS)},getCommonStyles:function(d){var c=h.getComputedStyle(d),b={},a=Math.round(parseFloat(c.fontSize)*g.FONT_SCALING_FACTOR),e="";isNaN(a)||(e=a+g.POINT_UNIT);b.color=this._rgba2rgb(c.color);b["font-family"]=this.getFontFamily(d,c.fontFamily);b["font-style"]=c.fontStyle;b["font-size"]=e;b["font-weight"]=this._fontWeightNumberToName(c.fontWeight);b["text-align"]=c.textAlign;b["vertical-align"]=c.verticalAlign;b["text-decoration"]=
c.textDecoration.split(" ")[0];b["margin-top"]=this._replacePXWithPT(c.marginTop);b["margin-bottom"]=this._replacePXWithPT(c.marginBottom);b["margin-left"]=this._replacePXWithPT(c.marginLeft);b["margin-right"]=this._replacePXWithPT(c.marginRight);b["padding-top"]=this._replacePXWithPT(c.paddingTop);b["padding-bottom"]=this._replacePXWithPT(c.paddingBottom);b["padding-left"]=this._replacePXWithPT(c.paddingLeft);b["padding-right"]=this._replacePXWithPT(c.paddingRight);b["border-top"]=this._replacePXWithPT(c.borderTop);
b["border-bottom"]=this._replacePXWithPT(c.borderBottom);b["border-left"]=this._replacePXWithPT(c.borderLeft);b["border-right"]=this._replacePXWithPT(c.borderRight);b["line-height"]=Math.round(c.lineHeight*g.FONT_SCALING_FACTOR);b["white-space"]="pre-wrap"!==c.whiteSpace?c.whiteSpace:"";0===c.whiteSpace.indexOf("pre")&&(b["linefeed-treatment"]="preserve");b["min-height"]=this._replacePXWithPT(c.minHeight);return b},createInlineElement:function(d,c){var b=this.createXMLElement(c,c.INLINE),a=this.getInlineStyles(d);
this.applyStyles(b,a);return b},getInlineStyles:function(d){var c=h.getComputedStyle(d),b={};b["text-decoration"]=c.textDecoration.split(" ")[0];b["font-style"]=c.fontStyle;b["font-weight"]=this._fontWeightNumberToName(c.fontWeight);b["font-family"]=this.getFontFamily(d,c.fontFamily);b.color=this._rgba2rgb(c.color);return b},getFontFamily:function(d,c){var b=g.BASE_FONT;c&&(b=c+","+b);return b},applyStyles:function(d,c){Object.keys(c).forEach(function(b){var a=c[b];a&&""!==a&&this.setAttribute(d,
b,a)},this)},isCode:function(d){return-1<d.className.indexOf(g.LINENODE_CLASS)||-1<d.className.indexOf(g.INLINE_WRAPPER_CLASS)},isBlock:function(d){var c=g.BLOCK_CLASS_SUFFIX;d=d.classList[0];return-1<d.indexOf(c,d.length-c.length)},isSectionBlock:function(d){return-1<d.className.indexOf(g.SECTIONBLOCK_CLASS)},isSectionBreak:function(d){return-1<d.className.indexOf(g.SECTIONBREAK_CLASS)},isTableOfContent:function(d){return-1<d.className.indexOf(g.TABLEOFCONTENT_CLASS)},isHeading:function(d){return-1<
d.className.indexOf(g.HEADING1_CLASS)||-1<d.className.indexOf(g.HEADING2_CLASS)||-1<d.className.indexOf(g.HEADING3_CLASS)},isHyperLink:function(d){return-1<d.className.indexOf(g.HYPERLINK_CLASS)},isImage:function(d){return-1<d.className.indexOf(g.IMAGE_CLASS)},isLiveControl:function(d){return-1<d.className.indexOf(g.LIVE_CONTROL_CLASS)},getEquation:function(d){d=e(".MathEquation",d);return 0<d.length?d[0]:null},isEquationNode:function(d){return-1<d.className.indexOf(g.EQUATIONNODE_CLASS)},isTitle:function(d){return-1<
d.className.indexOf(g.TITLE_CLASS)},isParagraph:function(d){return-1<d.className.indexOf(g.PARAGRAPH_CLASS)},isUnorderedList:function(d){return-1<d.className.indexOf(g.LIST_CLASS)&&d.nodeName===g.UNORDERED_LIST_NODENAME},isOrderedList:function(d){return-1<d.className.indexOf(g.LIST_CLASS)&&d.nodeName===g.ORDERED_LIST_NODENAME},isCodeExample:function(d){return-1<d.className.indexOf(g.CODE_EXAMPLE_CLASS)},_replacePXWithPT:function(d){return d.replace(g.REGEX_FOR_PX,g.POINT_UNIT)},_fontWeightNumberToName:function(d){return"700"===
d?"bold":"400"===d?"normal":d},_rgba2rgb:function(d){return d.replace(/rgba(\(.*), 1\)/,"rgb$1)")}}})},"MW/rtc/plugins/saveaspdf/document/BaseDocumentWriterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/saveaspdf/document/BaseDocumentWriter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/saveaspdf/document/BaseDocumentWriter":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/saveaspdf/PDFWriterInterface","MW/rtc/plugins/saveaspdf/utils/XSLConstants","MW/rtc/plugins/saveaspdf/utils/XSLFOWriterUtilities"],function(h,e,g,d){return h(e,{createElement:function(c,b){var a=this._createRoot(c.ROOT_TAG_NAME,c),d=this._createLayoutMasterSet(c,b);a.documentElement.appendChild(d);d=this._createPageSequence(c,b);a.documentElement.appendChild(d);return a},getTypes:function(){return[g.BASE_DOCUMENT]},_createRoot:function(c,b){var a;document.implementation&&document.implementation.createDocument&&
(a=document.implementation.createDocument(b.NAMESPACE_URL,b.NAMESPACE_TAG+":"+b.ROOT_TAG_NAME,null));return a},_createLayoutMasterSet:function(c,b){var a=d.createXMLElement(c,c.REGION_BODY);d.setAttribute(a,b.MARGIN,b.MARGIN_VALUE);var e=d.createXMLElement(c,c.REGION_AFTER);d.setAttribute(e,b.REGION_NAME,b.REGION_NAME_VALUE);d.setAttribute(e,b.EXTENT,b.EXTENT_VALUE);d.setAttribute(e,b.DISPLAY_ALIGN,b.DISPLAY_ALIGN_VALUE);var g=d.createXMLElement(c,c.SIMPLE_PAGE_MASTER);d.setAttribute(g,b.MASTER_NAME,
b.PAGE_MASTER);d.setAttribute(g,b.MARGIN_BOTTOM,b.MARGIN_VALUE);g.appendChild(a);g.appendChild(e);a=d.createXMLElement(c,c.LAYOUT_MASTER);a.appendChild(g);return a},_createPageSequence:function(c,b){var a=d.createXMLElement(c,c.PAGE_SEQUENCE);d.setAttribute(a,b.FONT_FAMILY,b.SERIF);d.setAttribute(a,b.MASTER_REFERENCE,b.PAGE_MASTER);var e=d.createXMLElement(c,c.STATIC_CONTENT);d.setAttribute(e,b.FLOW_NAME,b.REGION_NAME_VALUE);var g=d.createXMLElement(c,c.BLOCK);d.setAttribute(g,b.TEXT_ALIGN,b.CENTER);
d.setAttribute(g,b.FONT_FAMILY,b.ARIAL);d.setAttribute(g,b.FONT_SIZE,b.PAGE_NUMBER_FONT_SIZE);g.appendChild(d.createXMLElement(c,c.PAGE_NUMBER));e.appendChild(g);g=d.createXMLElement(c,c.FLOW);d.setAttribute(g,b.FLOW_NAME,b.XSL_REGION_BODY);a.appendChild(e);a.appendChild(g);return a}})})},"MW/rtc/plugins/saveaspdf/PDFWriterInterface":function(){define(["dojo/_base/declare","mw-log/Log"],function(h,e){return h(null,{getTypes:function(){e.error("Subclasses must override getTypes.")},setWriters:function(e){},
setOptions:function(e){},createElement:function(g,d,c){e.error("Subclasses must override createElement.")}})})},"MW/rtc/plugins/saveaspdf/document/EquationWriterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/saveaspdf/document/EquationWriter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/saveaspdf/document/EquationWriter":function(){define("dojo/query dojo/_base/declare dojo/dom-class MW/rtc/plugins/saveaspdf/PDFWriterInterface MW/equations/renderer/Renderer MW/rtc/plugins/saveaspdf/utils/XSLConstants MW/rtc/plugins/saveaspdf/utils/XSLFOWriterUtilities".split(" "),
function(h,e,g,d,c,b,a){return e(d,{_renderer:new c,SCALING_FACTOR:4,getTypes:function(){return[b.EQUATION]},isSimpleEquation:function(a){a=this._getMathNode(a);var b,c,d;a&&1===a.children.length&&(b=a.children[0]);b&&1===b.children.length&&(c=b.children[0]);c&&1===c.children.length&&(d=c.children[0]);if(d&&g.contains(d,"MathTextBox"))return d},createElement:function(a,b,c){a=this._getURIFromEquation(a);return this._createChildElement(b,c,a)},_getMathNode:function(a){return h("."+b.EQUATION_CLASS,
a)[0]},_getURIFromEquation:function(a){var c=a;-1===a.className.indexOf(b.EQUATION_CLASS)&&(c=this._getMathNode(a));return this._renderer.exportDomnodeToImageURL(c,b.FONT_SCALING_FACTOR*this.SCALING_FACTOR)},_createChildElement:function(b,c,d){b=a.createXMLElement(b,b.EXTERNAL_GRAPHIC);this._applyStyles(b,c,d);return b},_applyStyles:function(b,c,d){a.setAttribute(b,c.SOURCE,d.dataURL);this._scaleToFitInPage(b,c,d)},_scaleToFitInPage:function(c,d,e){a.setAttribute(c,d.CONTENT_HEIGHT,Math.floor(e.height/
this.SCALING_FACTOR)+b.POINT_UNIT);a.setAttribute(c,d.CONTENT_WIDTH,Math.floor(e.width/this.SCALING_FACTOR)+b.POINT_UNIT);a.setAttribute(c,d.VERTICAL_ALIGN,e.verticalAlign*b.FONT_SCALING_FACTOR+"pt")}})})},"MW/rtc/plugins/saveaspdf/document/HyperlinkWriterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/saveaspdf/document/HyperlinkWriter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},
"MW/rtc/plugins/saveaspdf/document/HyperlinkWriter":function(){define(["dojo/_base/declare","MW/rtc/plugins/saveaspdf/utils/XSLConstants","MW/rtc/plugins/saveaspdf/utils/XSLFOWriterUtilities","MW/rtc/plugins/saveaspdf/document/ParagraphWriter"],function(h,e,g,d){return h(d,{getTypes:function(){return[e.HYPERLINK]},createElement:function(c,b,a){return this._createChildElement(b,c,a)},_createChildElement:function(c,b,a){var d=g.createXMLElement(c,c.BASIC_LINK),h=g.getCommonStyles(b);g.applyStyles(d,
h);h=b.href;0===h.indexOf(e.INTERNAL_LINK_PREFIX)?g.setAttribute(d,a.INTERNAL_DESTINATION,h.substring(e.INTERNAL_LINK_PREFIX.length)):g.setAttribute(d,a.EXTERNAL_DESTINATION,h);this.insertRichTextElement(b.children,d,c,a);return d}})})},"MW/rtc/plugins/saveaspdf/document/ParagraphWriter":function(){define(["dojo/_base/array","dojo/_base/declare","MW/rtc/plugins/saveaspdf/PDFWriterInterface","MW/rtc/plugins/saveaspdf/utils/XSLConstants","MW/rtc/plugins/saveaspdf/utils/XSLFOWriterUtilities"],function(h,
e,g,d,c){return e(g,{getTypes:function(){return[d.PARAGRAPH]},setWriters:function(b){this._writers=b},createElement:function(b,a,d){var e=this._getProperElement(b),g=this._createWrapperElement(e.line,a),h=b.rteNode?b.rteNode.anchorId:null;!h&&(b.firstElementChild&&b.firstElementChild.rteNode&&b.firstElementChild.rteNode.anchorId)&&(h=b.firstElementChild.rteNode.anchorId);h&&c.setAttribute(g,d.ID,h);e.outputs?(this.insertRichTextElement(e.line.children,g,a,d),b=this.insertRichTextElement(e.outputs,
g,a,d)):b=this.insertRichTextElement(e.line.children,g,a,d);return{paragraph:g,output:b}},insertRichTextElement:function(b,a,e,g){var h=null,n;Array.prototype.forEach.apply(b,[function(b){if(c.isHyperLink(b))n=this._writers[d.HYPERLINK],a.appendChild(n.createElement(b,e,g));else if(c.isOutputParagraph(b))n=this._writers[d.OUTPUT],h=n.createElement(b,e,g);else if(c.isEquationNode(b)){n=this._writers[d.EQUATION];var m=n.isSimpleEquation(b);m?this._createStyledTextElements(m.parentNode,e).forEach(function(b){a.appendChild(b)}):
a.appendChild(n.createElement(b,e,g))}else c.isImage(b)?(n=this._writers[d.IMAGE],a.appendChild(n.createElement(b,e,g))):c.isLiveControl(b)?(n=this._writers[d.LIVE_CONTROL],n.createElement(b,e).forEach(function(b){a.appendChild(b)})):this._createStyledTextElements(b,e).forEach(function(b){a.appendChild(b)})},this]);return h},_createWrapperElement:function(b,a){var e=c.createXMLElement(a,a.BLOCK),g=c.getCommonStyles(b),h=parseInt(g["margin-left"],10)+parseInt(g["margin-right"],10);g["margin-left"]=
"0pt";if("center"===g["text-align"]){var n=0;Array.prototype.forEach.apply(b.children,[function(a){n+=a.clientWidth*d.FONT_SCALING_FACTOR}]);n>d.AVAILABLE_WIDTH-h&&(g["text-align"]="left")}c.isCode(b)?(g["background-color"]="#F7F7F7",g["white-space"]="pre",g["margin-left"]="3pt",g["padding-left"]="10pt"):g["white-space-collapse"]="false";c.applyStyles(e,g);return e},_createStyledTextElements:function(b,a){var e=b.lastElementChild,g=b.firstElementChild,l=1===b.childElementCount;return h.map(b.childNodes,
function(b){var h=b.textContent;b===e&&(0<h.length&&" "===h[h.length-1])&&(h=h.slice(0,h.length-1)+d.NBSP);b===g&&(0<h.length&&" "===h[0])&&(h=d.NBSP+h.slice(1,h.length));if(h)b=c.createInlineElement(b,a);else if(l)h=d.NBSP,b=c.createXMLElement(a,a.INLINE);else return null;h=c.createTextTag(h);b.appendChild(h);return b}).filter(function(a){return null!==a})},_getProperElement:function(b){return-1===b.className.indexOf("inlineWrapper")?{line:b,outputs:null}:{line:b.children[0],outputs:2===b.children.length?
[b.children[1]]:null}}})})},"MW/rtc/plugins/saveaspdf/document/ImageWriterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/saveaspdf/document/ImageWriter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/saveaspdf/document/ImageWriter":function(){define(["dojo/_base/declare","MW/rtc/plugins/saveaspdf/document/ParagraphWriter","MW/rtc/plugins/saveaspdf/utils/XSLConstants",
"MW/rtc/plugins/saveaspdf/utils/XSLFOWriterUtilities"],function(h,e,g,d){return h(e,{getTypes:function(){return[g.IMAGE]},createElement:function(c,b,a){return this._createChildElement(b,c,a)},_createChildElement:function(c,b,a){c=d.createXMLElement(c,c.EXTERNAL_GRAPHIC);d.setAttribute(c,a.SOURCE,b.src);d.setAttribute(c,a.CONTENT_HEIGHT,b.height*g.FONT_SCALING_FACTOR+g.POINT_UNIT);d.setAttribute(c,a.CONTENT_WIDTH,b.width*g.FONT_SCALING_FACTOR+g.POINT_UNIT);b=d.getCommonStyles(b);d.setAttribute(c,a.VERTICAL_ALIGN,
b["vertical-align"]);d.setAttribute(c,"scaling","non-uniform");return c}})})},"MW/rtc/plugins/saveaspdf/document/LiveControlWriterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/saveaspdf/document/LiveControlWriter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/saveaspdf/document/LiveControlWriter":function(){define(["dojo/_base/declare","MW/rtc/plugins/saveaspdf/document/ParagraphWriter",
"MW/rtc/plugins/saveaspdf/utils/XSLConstants"],function(h,e,g){return h(e,{_LIVE_CONTROL_DIV:"liveControlTextView",getTypes:function(){return[g.LIVE_CONTROL]},createElement:function(d,c){var b=d.getElementsByClassName(this._LIVE_CONTROL_DIV)[0];return this._createStyledTextElements(b,c)}})})},"MW/rtc/plugins/saveaspdf/document/ListWriterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/saveaspdf/document/ListWriter"],function(h,e,g){return h(e,
{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/saveaspdf/document/ListWriter":function(){define(["dojo/_base/declare","MW/rtc/plugins/saveaspdf/utils/XSLConstants","MW/rtc/plugins/saveaspdf/utils/XSLFOWriterUtilities","MW/rtc/plugins/saveaspdf/document/ParagraphWriter"],function(h,e,g,d){return h(d,{_LIST_ITEM_MARGIN:"18pt",getTypes:function(){return[e.LIST]},setWriters:function(c){this._writers=c},createElement:function(c,b,a){var d=this._createListBlockElement(c,
b,a),e=this._getListType(c);Array.prototype.forEach.apply(c.children,[function(c,h){var p=g.getCommonStyles(c);p["margin-left"]=this._LIST_ITEM_MARGIN;var m=this._createListItem(c,h,e,b,a);d.appendChild(m);g.applyStyles(m,p)},this]);return d},_createListBlockElement:function(c,b,a){c=g.createXMLElement(b,b.LIST_BLOCK);this._addAttributesForListBlock(c,a);return c},_createListItem:function(c,b,a,d,e){var h=g.createXMLElement(d,d.LIST_ITEM);h.appendChild(this._createListItemLabel(d,e,b+1,a));h.appendChild(this._createListItemBody(d,
e,c));return h},_addAttributesForListBlock:function(c,b){g.setAttribute(c,b.PROVISIONAL_DISTANCE,b.LIST_INDENT);g.setAttribute(c,b.START_INDENT,b.LIST_INDENT);g.setAttribute(c,b.END_INDENT,b.LIST_INDENT)},_createListItemLabel:function(c,b,a,d){var h=g.createXMLElement(c,c.LIST_ITEM_LABEL);g.setAttribute(h,b.END_INDENT,b.LABEL_END);g.setAttribute(h,b.TEXT_ALIGN,b.RIGHT);b=g.createXMLElement(c,c.BLOCK);h.appendChild(b);var l;c=g.createXMLElement(c,c.INLINE);d===e.UNORDERED_LIST?l=g.createTextTag(e.SQUARE_LIST_LABEL):
d===e.ORDERED_LIST&&(l=g.createTextTag(a+"."));c.appendChild(l);b.appendChild(c);return h},_createListItemBody:function(c,b,a){var d=g.createXMLElement(c,c.LIST_ITEM_BODY);g.setAttribute(d,b.START_INDENT,b.BODY_START);var e=g.createXMLElement(c,c.BLOCK);d.appendChild(e);this.insertRichTextElement(a.children,e,c,b);return d},_getListType:function(c){if(g.isUnorderedList(c))return e.UNORDERED_LIST;if(g.isOrderedList(c))return e.ORDERED_LIST}})})},"MW/rtc/plugins/saveaspdf/document/ParagraphWriterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/saveaspdf/document/ParagraphWriter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/saveaspdf/document/TableOfContentWriterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/saveaspdf/document/TableOfContentWriter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},
"MW/rtc/plugins/saveaspdf/document/TableOfContentWriter":function(){define(["dojo/_base/array","dojo/_base/declare","MW/rtc/plugins/saveaspdf/PDFWriterInterface","MW/rtc/plugins/saveaspdf/utils/XSLConstants","MW/rtc/plugins/saveaspdf/utils/XSLFOWriterUtilities"],function(h,e,g,d,c){return e(g,{getTypes:function(){return[d.TABLEOFCONTENT]},setWriters:function(b){this._writers=b},createElement:function(b,a,d){var e=c.createXMLElement(a,a.BLOCK),g=c.getCommonStyles(b);c.applyStyles(e,g);this._removeBorders(e);
g=this._createHeader(b,a,d);e.appendChild(g);b=this._createEntries(b,a,d);e.appendChild(b);return e},_createHeader:function(b,a,c){b=this._writers[d.PARAGRAPH].createElement(b.children[0],a,c).paragraph;this._removeBorders(b);return b},_createEntries:function(b,a,e){b=b.children[1];var g=c.getCommonStyles(b),l=c.createXMLElement(a,a.BLOCK);c.applyStyles(l,g);this._removeBorders(l);var n=this._writers[d.HYPERLINK],p,m,q,r,s=0;h.forEach(b.children,function(b){b.className===d.HYPERLINK_CLASS?(m=c.createXMLElement(a,
a.BLOCK),c.setAttribute(m,e.TEXT_ALIGN_LAST,e.JUSTIFY),c.setAttribute(m,e.MARGIN_LEFT,s+d.POINT_UNIT),p=n.createElement(b,a,e),p.textContent=p.textContent.replace("\n",""),m.appendChild(p),q=c.createXMLElement(a,a.LEADER),c.setAttribute(q,e.LEADER_PATTERN,d.DOTS),m.appendChild(q),r=c.createXMLElement(a,a.PAGE_NUMBER_CITATION),c.setAttribute(r,e.REF_ID,p.getAttribute(e.INTERNAL_DESTINATION)),m.appendChild(r),l.appendChild(m),s=0):s=3*b.textContent.length});return l},_removeBorders:function(b){c.setAttribute(b,
"border-bottom","0pt none");c.setAttribute(b,"border-right","0pt none");c.setAttribute(b,"border-left","0pt none");c.setAttribute(b,"border-top","0pt none")}})})},"MW/rtc/plugins/saveaspdf/outputs/FigureWriterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/saveaspdf/outputs/FigureWriter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.embeddedoutputs"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/saveaspdf/outputs/FigureWriter":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/saveaspdf/PDFWriterInterface","MW/rtc/plugins/saveaspdf/utils/XSLConstants","MW/rtc/plugins/saveaspdf/utils/XSLFOWriterUtilities"],function(h,e,g,d){return h(e,{constructor:function(c){this._outputView=c.getEmbeddedOutputsView()},getTypes:function(){return[g.FIGURES]},setOptions:function(c){this._options=c},createElement:function(c,b,a){var d=this._createWrapperElement(b,c);c=this._createChildElement(b,a,c);d.appendChild(c);return d},_createWrapperElement:function(c,b){var a=d.createXMLElement(c,
c.BLOCK),e=d.getCommonStyles(b);d.applyStyles(a,e);return a},_createChildElement:function(c,b,a){c=d.createXMLElement(c,c.EXTERNAL_GRAPHIC);var e=a.firstChild.querySelector("img.figureImage"),g=this._outputView.getOutputFromOutputDiv(a);this._hasValidOptions()&&g.canPrintToFile()?(a=this._options.figurePath+"/"+g.uid+"."+this._options.figureFormat,g=g.printToFile(this._options.figureFormat,this._options.figureResolution,a),this._options.promiseList.push(g),d.setAttribute(c,b.SOURCE,a)):d.setAttribute(c,
b.SOURCE,e.src);this._applyStyles(c,b,e);return c},_applyStyles:function(c,b,a){var e=a.clientWidth*g.FONT_SCALING_FACTOR,h=a.offsetLeft;a.offsetParent===a.parentElement&&(h+=a.parentElement.offsetLeft);a=g.AVAILABLE_WIDTH-2*h;e>a&&(e=a);d.setAttribute(c,b.CONTENT_WIDTH,e+g.POINT_UNIT)},_hasValidOptions:function(){return this._options&&this._options.figurePath&&this._options.figureFormat&&this._options.figureResolution&&this._options.promiseList?!0:!1}})})},"MW/rtc/plugins/saveaspdf/outputs/MatrixWriterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/saveaspdf/outputs/MatrixWriter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/saveaspdf/outputs/MatrixWriter":function(){define("dojo/_base/declare dojo/dom-class MW/rtc/plugins/saveaspdf/PDFWriterInterface MW/rtc/plugins/saveaspdf/utils/XSLConstants MW/rtc/plugins/saveaspdf/utils/XSLFOWriterUtilities MW/rtc/plugins/saveaspdf/outputs/WriterUtils MW/rtc/plugins/view/exporters/HTMLOutputUtils".split(" "),
function(h,e,g,d,c,b,a){return h(g,{MAX_CHARACTERS:80,_SUMMARY_FONT_FAMILY:"'Consolas', sans-serif",getTypes:function(){return[d.MATRIX]},createElement:function(b,d,g){var h=c.createXMLElement(d,d.BLOCK),p=c.getCommonStyles(b);b=a.processOutput(b);c.applyStyles(h,p);Array.prototype.forEach.apply(b.firstChild.children,[function(a){var b,f=c.getCommonStyles(a);f[g.WHITE_SPACE]=g.WHITE_SPACE_PRESERVE;f[g.FONT_FAMILY]="";e.contains(a,"valueContainer")?(b=JSON.parse(a.dataset.layout),b=this._getChoppedData(b,
this._getValue(a),d,g)):e.contains(a,"veVariableName")?b=this._getNameAndSummary(a,d,g):e.contains(a,"veScalingFactor")?b=this._getScalingFactor(a,d,g):(b=c.createXMLElement(d,d.BLOCK),b.appendChild(c.createTextTag(a.textContent)));c.applyStyles(b,f);h.appendChild(b)},this]);return h},_getValue:function(a){return a.textContent},_getScalingFactor:function(a,b,d){return c.createTextTag("")},_getNameAndSummary:function(a,b,d){var e=a.firstChild;a=this._createMetaSummaryInfo(a,b,d);b=c.createXMLElement(b,
b.BLOCK);b.appendChild(c.createTextTag(e.textContent));b.appendChild(a);return b},_createMetaSummaryInfo:function(a,c,d){a=a.lastChild;a.displayType=c.INLINE;return b.createElement(a,c,d)},_getChoppedData:function(a,b,d,e){var g=this._getAmountOfDataToShow(a),h=g.totalCharactersInRow,q=g.totalCharacters;this._styleHeader(h,e);var r=c.createXMLElement(d,d.BLOCK),s;b.split("\n").forEach(function(a,b){a&&(s=c.createXMLElement(d,d.BLOCK),s.appendChild(c.createTextTag(a.substring(0,q))),this._addHorizontalEllipsis(b,
h,d,e,s),r.appendChild(s))},this);this._addVerticalEllipsis(a.totalRows,d,e,r);return r},_styleHeader:function(a,b){},_getAmountOfDataToShow:function(a){var b=a.charsPerColumn,c=a.totalColumns*a.charsPerColumn;a=Math.min(Math.floor(this.MAX_CHARACTERS/b),a.totalColumns)*b;return{totalCharactersInRow:c,totalCharacters:a}},_showEllipsis:function(){return!0},_addHorizontalEllipsis:function(a,b,d,e,g){0===a&&(b>this.MAX_CHARACTERS&&this._showEllipsis())&&(a=c.createXMLElement(d,d.EXTERNAL_GRAPHIC),c.setAttribute(a,
e.SOURCE,e.HORIZONTAL_ELLIPSIS),g.appendChild(a))},_addVerticalEllipsis:function(a,b,d,e){10<a&&this._showEllipsis()&&(a=c.createXMLElement(b,b.EXTERNAL_GRAPHIC),c.setAttribute(a,d.SOURCE,d.VERTICAL_ELLIPSIS),c.setAttribute(a,d.PADDING_LEFT,d.VERTICAL_ELLIPSIS_PADDING_LEFT),e.appendChild(a))}})})},"MW/rtc/plugins/saveaspdf/outputs/WriterUtils":function(){define(["dojo/dom-class","dojo/dom-style","MW/rtc/plugins/saveaspdf/utils/XSLFOWriterUtilities"],function(h,e,g){return{_ELEMENT_NODE:1,_TEXT_NODE:3,
createElement:function(d,c,b){var a=e.getComputedStyle(d),a=this._getDisplayType(a,d,c),a=g.createXMLElement(c,a),f=g.getCommonStyles(d);g.applyStyles(a,f);for(f=0;f<d.childNodes.length;f++){var k=d.childNodes[f];h.contains(k,"doNotExport")||(this._isElementNode(k)?a.appendChild(this._createElementNode(k,c,b)):this._isTextNode(k)&&a.appendChild(this._createTextNode(k)))}return a},_getDisplayType:function(d,c,b){return"inline"===d.display||c.displayType&&"inline"===c.displayType?b.INLINE:b.BLOCK},
_isElementNode:function(d){return d.nodeType===this._ELEMENT_NODE},_isTextNode:function(d){return d.nodeType===this._TEXT_NODE},_createElementNode:function(d,c,b){return"A"===d.nodeName?g.createTextTag(d.text):"BR"===d.nodeName?g.createTextTag("\n"):h.contains(d,"verticalEllipsis")?this._createVerticalEllipsisNode(c,b):this.createElement(d,c,b)},_createTextNode:function(d){return g.createTextTag(d.data)},_createVerticalEllipsisNode:function(d,c){var b=g.createXMLElement(d,d.BLOCK),a=g.createXMLElement(d,
d.EXTERNAL_GRAPHIC);g.setAttribute(a,c.SOURCE,c.VERTICAL_ELLIPSIS);g.setAttribute(a,c.PADDING_LEFT,c.VERTICAL_ELLIPSIS_PADDING_LEFT);b.appendChild(a);return b},_createHorizontalEllipsisNode:function(d,c){var b=g.createXMLElement(d,d.BLOCK),a=g.createXMLElement(d,d.EXTERNAL_GRAPHIC);g.setAttribute(a,c.SOURCE,c.HORIZONTAL_ELLIPSIS);b.appendChild(a);return b}}})},"MW/rtc/plugins/saveaspdf/outputs/TableWriterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/saveaspdf/outputs/TableWriter"],
function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/saveaspdf/outputs/TableWriter":function(){define("dojo/_base/declare dojo/dom-class MW/rtc/plugins/saveaspdf/PDFWriterInterface MW/rtc/plugins/saveaspdf/utils/XSLConstants MW/rtc/plugins/saveaspdf/utils/XSLFOWriterUtilities MW/rtc/plugins/saveaspdf/outputs/WriterUtils".split(" "),function(h,e,g,d,c,b){return h(g,{MAX_CHARACTERS:80,getTypes:function(){return[d.INTERACTIVE_VARIABLE]},
createElement:function(a,b,d){var e=c.createXMLElement(b,b.BLOCK),g=c.getCommonStyles(a);c.applyStyles(e,g);var h=this._getNameAndSummary(a,b,d,g);e.appendChild(h);h=c.createXMLElement(b,"table");h.setAttribute("wrap-option","no-wrap");var m=this._getHeaderInfo(a,b,d,g);h.appendChild(m);a=this._getTableContents(a,b,d,g);h.appendChild(a);e.appendChild(h);return e},_getNameAndSummary:function(a,d,e,g){a=a.getElementsByClassName("summaryBarContainer")[0];b.createElement(a,d,e);e=c.createXMLElement(d,
d.BLOCK);a=a.children;for(var h=0;h<a.length;h++){var p=c.createXMLElement(d,d.BLOCK);p.appendChild(c.createTextTag(a[h].textContent));e.appendChild(p)}c.applyStyles(e,g);return e},_getHeaderInfo:function(a,b,d,e){a=a.getElementsByClassName("mw-table-header-label");d=c.createXMLElement(b,"table-header");for(var g=c.createXMLElement(b,"table-row"),h=0;h<a.length;h++){var m=c.createXMLElement(b,"table-cell"),q=c.createXMLElement(b,b.BLOCK);q.appendChild(c.createTextTag(a[h].textContent));m.appendChild(q);
g.appendChild(m)}d.appendChild(g);c.applyStyles(d,e);return d},_getTableContents:function(a,b,d,e){a=a.getElementsByClassName("mw-table-row");d=c.createXMLElement(b,"table-body");for(e=0;e<a.length;e++){for(var g=c.createXMLElement(b,"table-row"),h=a[e].getElementsByClassName("mw-table-cell-content"),m=0;m<h.length;m++){var q=c.createXMLElement(b,"table-cell"),r=c.createXMLElement(b,b.BLOCK);r.appendChild(c.createTextTag(h[m].textContent));q.appendChild(r);g.appendChild(q)}d.appendChild(g)}return d}})})},
"MW/rtc/plugins/saveaspdf/outputs/OutputWriterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/saveaspdf/outputs/OutputWriter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.embeddedoutputs"]}},createInstance:function(d){d=d.getEmbeddedOutputsView();return new g(d)}})})},"MW/rtc/plugins/saveaspdf/outputs/OutputWriter":function(){define(["dojo/_base/declare","MW/rtc/plugins/saveaspdf/PDFWriterInterface","MW/rtc/plugins/saveaspdf/utils/XSLConstants",
"MW/rtc/plugins/saveaspdf/utils/XSLFOWriterUtilities"],function(h,e,g,d){return h(e,{constructor:function(c){this._embeddedOutputsView=c},getTypes:function(){return[g.OUTPUT]},setWriters:function(c){this._writers=c},createElement:function(c,b,a){var d=this._createWrapperElement(b,c);Array.prototype.forEach.apply(c.children,[function(c){0<c.children.length&&d.appendChild(this._createOutputRegion(c,b,a))},this]);return d},_createWrapperElement:function(c,b){var a=d.createXMLElement(c,c.BLOCK),e=d.getCommonStyles(b);
d.applyStyles(a,e);return a},_createOutputRegion:function(c,b,a){var d=this._embeddedOutputsView.getOutputFromOutputDiv(c);if(d.getPdfContent)return d.getPdfContent(c,b,a);d=this._getOutputWriterType(c);return this._writers[d].createElement(c,b,a)},_getOutputWriterType:function(c){if(d.isWarning(c)||d.isError(c))return g.WARNING_ERROR;if(d.isFigure(c))return g.FIGURES;if(d.isSymEquation(c))return g.SYMEQUATION;if(d.isText(c))return g.TEXT;if(d.isVariable(c))return g.VARIABLES;if(d.isVariableString(c))return g.VARIABLE_STRING;
if(d.isMatrix(c)||d.isInteractiveMatrix(c))return g.MATRIX;if(d.isInteractiveVariable(c))return g.INTERACTIVE_VARIABLE}})})},"MW/rtc/plugins/saveaspdf/outputs/SymEquationWriterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/saveaspdf/outputs/SymEquationWriter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/saveaspdf/outputs/SymEquationWriter":function(){define("dojo/_base/declare dojo/dom-class dojo/query MW/rtc/plugins/saveaspdf/PDFWriterInterface MW/rtc/plugins/saveaspdf/utils/XSLConstants MW/rtc/plugins/saveaspdf/utils/XSLFOWriterUtilities".split(" "),
function(h,e,g,d,c,b){return h(d,{getTypes:function(){return[c.SYMEQUATION]},setWriters:function(a){this._writers=a},createElement:function(a,c,d){var h=this._createWrapperElement(c,a),n=a.children[0];a=0<g(".inlineSymbolicElement",a).length;var p=n.childNodes[0];e.contains(p,"embeddedOutputsVariableElement")&&h.appendChild(this._createTextElement(p,c,a));n=b.getEquation(n);h.appendChild(this._createEquationElement(n,c,d,a));return h},_createEquationElement:function(a,d,e,g){var h=this._writers[c.EQUATION];
g=this._createWrapperElement(d,a,g);var p=b.getCommonStyles(a);g.appendChild(h.createElement(a,d,e));b.applyStyles(g,p);return g},_createTextElement:function(a,c,d){c=this._createWrapperElement(c,a,d);d=b.getCommonStyles(a);c.appendChild(b.createTextTag(a.textContent));b.applyStyles(c,d);return c},_createWrapperElement:function(a,c,d){a=b.createXMLElement(a,d?a.INLINE:a.BLOCK);c=b.getCommonStyles(c);b.applyStyles(a,c);return a}})})},"MW/rtc/plugins/saveaspdf/outputs/TextWriterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/saveaspdf/outputs/TextWriter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/saveaspdf/outputs/TextWriter":function(){define(["dojo/_base/declare","MW/rtc/plugins/saveaspdf/PDFWriterInterface","MW/rtc/plugins/saveaspdf/outputs/WriterUtils","MW/rtc/plugins/saveaspdf/utils/XSLConstants"],function(h,e,g,d){return h(e,{getTypes:function(){return[d.TEXT,d.WARNING_ERROR,
d.VARIABLE_STRING]},createElement:function(c,b,a){return g.createElement(c,b,a)}})})},"MW/rtc/plugins/saveaspdf/outputs/VariableWriterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/saveaspdf/outputs/VariableWriter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/saveaspdf/outputs/VariableWriter":function(){define(["dojo/_base/declare","MW/rtc/plugins/saveaspdf/PDFWriterInterface",
"MW/rtc/plugins/saveaspdf/outputs/WriterUtils","MW/rtc/plugins/saveaspdf/utils/XSLConstants"],function(h,e,g,d){return h(e,{getTypes:function(){return[d.VARIABLES]},createElement:function(c,b,a){return g.createElement(c,b,a)}})})},"MW/rtc/plugins/service/CodingUIBackendCodeProviderProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./CodingUIBackendCodeProvider"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.document"]}},createInstance:function(d){return new g(d)}})})},
"MW/rtc/plugins/service/CodingUIBackendCodeProvider":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin","MW/rtc/EditorUtilities"],function(h,e,g){return h(e,{constructor:function(d){this._document=d},getCode:function(){return this._document.getCodeText()},getAbsolutePositionInCode:function(d){return g.getOffsetFromLine(this.getCode(),d.line-1)[0]+d.column-1}})})},"MW/rtc/plugins/service/CodingUIBackendServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities","MW/rtc/plugins/service/CodingUIBackendService"],function(h,e,g,d){return h(e,{requires:function(){return{createInstance:["rtc.document","rtc.cursor","rtc.editordataservice","rtc.code.codingui.codeprovider","rtc.backingstore"]}},createInstance:function(c,b,a,e,g){return new d(c,b,a,e,g)}})})},"MW/rtc/plugins/service/CodingUIBackendService":function(){define(["dojo/_base/declare","dojo/_base/lang","mw-log/Log","MW/rtc/datamodel/FileBackingStoreUtilities"],
function(h,e,g,d){return h(null,{constructor:function(c,b,a,d,e){this._editorDataService=a;this._document=c;this._cursor=b;this._codeProvider=d;this._backingStore=e;this._latestPromise=null},requestMetaData:function(c,b,a){this.isBusy()&&this.cancelRequest();this._requestMetaData(c,b,this._codeProvider.getCode(),this._codeProvider.getAbsolutePositionInCode(a))},_requestMetaData:function(c,b,a,d){this._latestPromise=this._editorDataService.request(c,{uri:this._getFilePath(),document:a,cursor:d},1E4);
c=this._cursor.getLineColumn();b=e.hitch(this,"_preprocessResultsCallback",c,b);this._latestPromise.then(b,function(a){"CODINGUICANCEL"!==a&&g.info(a)})},_getFilePath:function(){return d.getAbsoluteFilePathFromBackingStore(this._backingStore)},cancelRequest:function(){this._latestPromise&&(this._latestPromise.cancel("CODINGUICANCEL"),this._latestPromise=null)},isBusy:function(){return this._latestPromise&&!this._latestPromise.isResolved()},_preprocessResultsCallback:function(c,b,a){var d=this._cursor.getLineColumn();
if(!(c.line!==d.line||c.column!==d.column)){c=a.results;a=a.maxResults;d=null;try{d=JSON.parse(c)}catch(e){}b(d,a);this._latestPromise=null}}})})},"MW/rtc/plugins/service/FocusServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/service/FocusService"],function(h,e,g){return h(e,{requires:function(){return{isApplicable:[],createInstance:["rtc.keyhandler","rtc.eventhandler","rtc.cursorcontroller","rtc.scrollpane"]}},createInstance:function(d,
c,b,a){return new g(d,c,b,a)}})})},"MW/rtc/plugins/service/FocusService":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin"],function(h,e,g,d){return h(d,{constructor:function(c,b,a,d){this._keyHandler=c;this._cursorController=a;this._eventHandler=b;this._domTarget=d;this.own(g.after(this._keyHandler,"onFocus",e.hitch(this,"_doFocus")));this.own(g.after(this._keyHandler,"onBlur",e.hitch(this,"_doBlur"),!0));this.own(g.after(this._eventHandler,
"onFocus",e.hitch(this,"setFocus")))},_doFocus:function(){this._keyHandler.hasFocus()&&(this._cursorController.show(!0,!0),this.onFocus())},_doBlur:function(c){if((c=c.relatedTarget)&&this._domTarget!==c)this._cursorController.hide(),this.onBlur()},onFocus:function(){},onBlur:function(){},setFocus:function(){this._cursorController.positionsAreValid()||this._cursorController.reinitializeCursors();this._keyHandler.focus()},setBlur:function(){this._keyHandler.blur();this._cursorController.hide();this.onBlur()},
hasFocus:function(){return this._keyHandler.hasFocus()}})})},"MW/rtc/plugins/service/LineNumberServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LineNumberService"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/service/LineNumberService":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractCachedModelQueryService MW/rtc/browsersupport/BrowserSupportUtilities MW/rtc/model/CodeUtilities".split(" "),
function(h,e,g,d,c,b){return h(d,{constructor:function(a){this._lineNodeToLineMap=this._codeLineToLine=this._lineToCodeLine=null},getCodeLineNumberFromLineNumber:function(a){this._ensureBuilt();return this._lineToCodeLine[a]},getCodeLineNumberAtOrBeforeLineNumber:function(a){for(this._ensureBuilt();0<=a;a--)if(-1<this._lineToCodeLine[a])return this._lineToCodeLine[a];return 0},getLineNumberFromCodeLineNumber:function(a){this._ensureBuilt();var b=this._codeLineToLine[a];if(void 0===b)throw a="LineNumberService: Invalid code line number "+
a+". There are only "+this.getNumberOfCodeLines()+" lines of code.",Error(a);return b},getNumberOfCodeLines:function(){this._ensureBuilt();return 0===this._codeLineToLine.length?0:this._codeLineToLine.length-1},getLineNumber:function(a){this._ensureBuilt();a=this._lineNodeToLineMap.get(a);return 0<=a?a:-1},_build:function(){var a=this._internalDocument.root.children;this._lineToCodeLine=[];this._codeLineToLine=[];this._lineNodeToLineMap=c.createMap();var d=1;a.forEach(function(a,c){this._lineNodeToLineMap.set(a,
c);if(b.isCodeContainer(a,!0)){var e=d++;this._lineToCodeLine[c]=e;this._codeLineToLine[e]=c}else this._lineToCodeLine[c]=-1},this)}})})},"MW/rtc/plugins/service/OutputHandlerServiceProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/service/OutputHandlerService"],function(h,e,g,d){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:[]}},createInstance:function(){return new d},
destroyInstance:function(c){c.destroy()}})})},"MW/rtc/plugins/service/OutputHandlerService":function(){define(["dojo/_base/declare","mw-log/Log"],function(h,e){return h(null,{constructor:function(){this._outputHandlers={}},handleRawOutput:function(g,d){var c=g.outputData,b=g.type,a=this._outputHandlers[b];try{return a.getOutputFromData(c,d)}catch(f){return e.error("Error in getOutputFromData. Skipping output.\nOutput type: "+b+"\nOutput data: "+JSON.stringify(c),f),null}},registerOutputPlugin:function(e){e&&
e.OUTPUT_TYPE&&(this._outputHandlers[e.OUTPUT_TYPE]=e)},destroy:function(){this._outputHandlers={}}})})},"MW/rtc/plugins/service/hover/JavaToolstripHoverServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/service/hover/JavaToolstripHoverService"],function(h,e,g){return h(e,{requires:function(){return{isApplicable:[],createInstance:["rtc.id","rtc.editordataservice","rtc.view.viewportopenedservice"]}},createInstance:function(d,c,b){return new g(d,
c,b)}})})},"MW/rtc/plugins/service/hover/JavaToolstripHoverService":function(){define(["dojo/_base/declare","dojo/_base/lang","mw-messageservice/MessageService","MW/rtc/plugins/service/hover/AbstractActionHoverNotifier"],function(h,e,g,d){return h(d,{_FEATURE_ID:"toolstrip.hover",constructor:function(c,b,a,d){a.whenViewportOpened(e.hitch(this,function(){b.request(this._FEATURE_ID,{}).then(function(){},function(){})}));this.messageService=d||g;this._hoverChannel="/editor/toolstrip/hover/"+c;this.messageService.subscribe(this._hoverChannel,
"_handleToolstripHoverEvent",this)},destroy:function(){this.inherited(arguments);this.messageService.unsubscribe(this._hoverChannel,"_handleToolstripHoverEvent",this)},_handleToolstripHoverEvent:function(c){if(c&&c.data){var b=c.data.action;if(c.data.isHovering)this.onHover(b);else this.onHoverAway(b)}},onHover:function(c){},onHoverAway:function(c){}})})},"MW/rtc/plugins/service/hover/AbstractActionHoverNotifier":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,
e){return h(e,{onHover:function(e){throw Error("Unimplemented API: MW.rtc.plugins.service.hover.AbstractActionHoverNotifier.onHover");},onHoverAway:function(e){throw Error("Unimplemented API: MW.rtc.plugins.service.hover.AbstractActionHoverNotifier.onHoverAway");}})})},"MW/rtc/plugins/service/TooltipServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/service/TooltipService"],function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],
createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/service/TooltipService":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(h,e){return h(null,{PRIORITY:{HOVER:0,AUTO:5,PROMPT:10,ON_DEMAND:15},constructor:function(){this._tooltipInfo=null},requestTooltip:function(g,d,c){c=c||this.PRIORITY.HOVER;if(this._tooltipInfo&&c<this._tooltipInfo.priority)return null;this._tooltipInfo&&this._closeTooltip();this._tooltipInfo=
this._createTooltipInfo(g,d,c);this._showTooltip();return{remove:e.hitch(this,"_handleNotifyClosed",this._tooltipInfo)}},_createTooltipInfo:function(e,d,c){return{show:e,close:d,priority:c}},_showTooltip:function(){this._tooltipInfo.show()},_closeTooltip:function(){this._tooltipInfo.close()},_handleNotifyClosed:function(e){e===this._tooltipInfo&&(this._tooltipInfo=null)},destroy:function(){}})})},"MW/rtc/plugins/settings/RtcSettingServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"./RtcSettingService"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/settings/RtcSettingService":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin","MW/rtc/browsersupport/BrowserSupportUtilities"],function(h,e,g,d,c){return h(d,{constructor:function(){this._settingValueMap=c.createMap()},listenTo:function(b,a){var c=e.partial(function(a,b,c,d){a===c&&b(d)},
b,a);return g.after(this,"_settingChanged",c,!0)},get:function(b,a){return this._settingValueMap.has(b)?this._settingValueMap.get(b):a},set:function(b,a){var c=this._settingValueMap.get(b);this._areValuesEqual(c,a)||(this._settingValueMap.set(b,a),this._settingChanged(b,a))},_areValuesEqual:function(b,a){return JSON.stringify(b)===JSON.stringify(a)},_settingChanged:function(b,a){},destroy:function(){this.inherited(arguments);this._settingValueMap.clear()}})})},"MW/rtc/plugins/shadowtext/ShadowTextServiceProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./ShadowTextService"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.cursor","rtc.divcaret","rtc.view"]}},createInstance:function(d,c,b,a,e){return new g(d,c,b,a,e)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/shadowtext/ShadowTextService":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/model/DocumentEventUtilities","./ShadowTextServiceView"],
function(h,e,g,d,c){return h(null,{constructor:function(b,a,d,h,l){this._internalDocument=b;this._document=a;this._cursor=d;this._rtcView=l;this._view=new c(d,h,l);this._services=[];this._aspectHandles=[g.after(this._rtcView,"onLinesDOMUpdated",e.hitch(this,"_handleLinesDOMUpdated"),!0),g.after(this._internalDocument,"onDocumentChanged",e.hitch(this,"_handleDocumentChanged"))]},_handleLinesDOMUpdated:function(b,a,c){c||this._updateLineRange(b,a)},_handleDocumentChanged:function(b){b&&0<b.length?b=
d.finalLineRangeFromEvents(b):(b=this._cursor.getLineColumn().line-1,b={startLine:b,endLine:b});0<=b.startLine&&0<=b.endLine&&this._updateLineRange(b.startLine,b.endLine)},_updateLineRange:function(b,a){this._services.filter(function(c){c=c.position.getLineColumn();return c.line>=b+1&&c.line<=a+1}).forEach(function(a){a.updateCallback&&a.updateCallback(a.handle)})},requestTextAfterCursor:function(b){var a=this._cursor.getLineColumn();b.position=this._document.createPositionAtLineColumn(a.line-1,a.column-
1,!0);return this.requestTextAtPosition(b)},requestTextAtPosition:function(b){b.handle=this._getServiceHandle(b);this._services.push(b);this._view.drawView(b);return b.handle},_getServiceHandle:function(b){return{position:b.position,remove:e.hitch(this,"_removeService",b),update:e.hitch(this,"_updateService",b)}},_updateService:function(b,a,c){b.text=a;b.domNodeToAppend=c||b.domNodeToAppend;this._view.redrawView(b)},_removeService:function(b){this._view.removeView(b);b.position.destroy();b=this._services.indexOf(b);
this._services.splice(b,1)},destroy:function(){this._aspectHandles.forEach(function(b){b.remove()});for(this._aspectHandles=[];0<this._services.length;)this._removeService(this._services[this._services.length-1])}})})},"MW/rtc/plugins/shadowtext/ShadowTextServiceView":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/dom-construct"],function(h,e,g){return h(null,{_SHADOW_TEXT_CSS:"shadowText",constructor:function(d,c,b){this._cursor=d;this._divcaret=c;this._view=b},drawView:function(d){var c=
this._drawView(d);d.caretRightAligned&&(d=this._view.getCoordinateForDomNode(c),d.x+=d.width,this._divcaret.updateCaretGeometry(this._divcaret._permanentLayer,d))},_drawView:function(d){var c=this._createView(d.text,d.cssClass,d.domNodeToAppend);d.viewHandle=this._view.insertDomNode(c,d.position);return c},redrawView:function(d){this._removeView(d);this.drawView(d)},removeView:function(d){d.viewHandle&&(this._removeView(d),d.viewHandle=null,d.cleanup=null,this._cursor.onUpdate(!0))},_removeView:function(d){d.viewHandle&&
d.viewHandle.remove();d.cleanup&&d.cleanup()},_createView:function(d,c,b){c=c||"";d=g.create("span",{textContent:d,"class":c,"data-testid":this._SHADOW_TEXT_CSS+c});e.add(d,this._SHADOW_TEXT_CSS);b&&d.appendChild(b);return d}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/AutoWrapCommentSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/AutoWrapCommentSmartFormatter"],function(h,
e,g){return h(e,{requires:function(){return{createInstance:["rtc.document","matlab.tokens","rtc.indentutilities","rtc.settings.service"]}},createInstance:function(d,c,b,a){return new g(d,c,b,a)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/AutoWrapCommentSmartFormatter":function(){define("dojo/_base/declare mw-log/Log MW/rtc/model/CodeUtilities MW/rtc/model/DocumentUtilities MW/rtc/plugins/language/matlab/autoindent/ExchangeService MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenUtilities MW/rtc/plugins/smartformatting/abstract/AbstractSmartFormatter MW/rtc/plugins/smartformatting/SmartFormattingTriggerTypeEnum MW/rtc/plugins/smartformatting/SmartFormatterUtilities".split(" "),
function(h,e,g,d,c,b,a,f,k){return h(a,{SMART_FORMATTER_ID:"automaticcoding_autowrapcomment",_AUTOWRAP_ID:"matlab.editor.language.matlab.comments.WrapAutomatically",_AUTOWRAP_FROM_COMMENT_START_ID:"matlab.editor.language.matlab.comments.FromCommentStart",_AUTOWRAP_WIDTH_ID:"matlab.editor.language.matlab.comments.MaxWidth",_AUTOWRAP_DEFAULT_WIDTH:75,constructor:function(a,b,c,d){this._document=a;this._tokenizerService=b;this._indentUtilities=c;this._settingService=d;this.own(this._settingService.listenTo(this._AUTOWRAP_ID,
this._onAutoWrapEnabledPreferenceChange.bind(this)));this._onAutoWrapEnabledPreferenceChange()},_onAutoWrapEnabledPreferenceChange:function(){this._settingService.get(this._AUTOWRAP_ID,!1)?this.enable():this.disable()},_isTriggerTypeExpected:function(a){return a.type===f.INSERT_TEXT},_isTriggerPositionExpected:function(a){var c=this._getCurrentLine(a)-1,d=this._getCurrentColumn(a)-1;e.assert(0<=c&&0<=d,"Line and column numbers must be non-negative");if(!g.isCodeContainer(a.triggerPos.getNode()))return!1;
d=this._indentUtilities.findFirstNonWhitespaceTokenInLine(c);return null!==d&&this._isCursorAtEndOfLine(a)&&b.isCommentToken(d)&&!b.isSectionTitleToken(d)&&this._isLineLongEnoughToBeWrapped(c+1)},_findAndRecordTarget:function(a){var b=this._getCurrentLine(a),c=b-1,e=this._getCurrentColumn(a)-1;if(this._tokenizerService.isInBlockComment(c,e)){c=this._getCurrentText(b);c=d.getLeadingWhitespace(c);c=d.getWhitespaceStringOfLength(c);if(c.length>=this._getMaxWidthForLine(a)||c.length>=this._getRowEnd(b))return!1;
a.target=c;return!0}b=this._getCommentAnnotation(b);if(!b)return!1;a.target=b;return!0},format:function(a){var b=this._getCurrentLine(a)-1,c=this._getCommentBreakPosition(a);if(!(0>c)){var d=this._getRowEnd(b+1)-c,d=this._document.getTextCharacters(b,c,d);a=a.target+this._trimStart(d);b+=1;c+=1;d=this._getRowEnd(b)+1;this._document.deleteText(b,c,b,d);this._document.insertBreakAt(b,c);this._document.insertText(a,b+1,c)}},postFormat:function(a){a=a.cursorPos.getLineColumn();c.isAutoIndentEnabled()&&
!this._tokenizerService.isInBlockComment(a.line-1,a.column-1)&&this._indentUtilities.format(a.line-1)},_getCurrentLine:function(a){return a.triggerPos.getLine()},_getCurrentColumn:function(a){return a.triggerPos.getColumn()},_isCursorAtEndOfLine:function(a){return this._getCurrentColumn(a)===this._getRowEnd(this._getCurrentLine(a))},_getRowEnd:function(a){return this._getCurrentText(a).length},_getCurrentText:function(a){return this._document.getLineText(a)},_isLineLongEnoughToBeWrapped:function(a){return this._getRowEnd(a)>
this._getMaxWidthForLine(a)},_getMaxWidthForLine:function(a){var b=this._settingService.get(this._AUTOWRAP_WIDTH_ID,this._AUTOWRAP_DEFAULT_WIDTH);this._settingService.get(this._AUTOWRAP_FROM_COMMENT_START_ID,!1)&&(a=this._getCurrentText(a),b+=d.getLeadingWhitespace(a));return b},_getLeadingWhitespace:function(a){return null===a?a:a.match(/^\s*/)},_getCommentAnnotation:function(a){var b=this._getCurrentText(a).match(k.COMMENT_ANNOTATION_REGEXP)[0],c=b.length;return 1>c||c>=this._getMaxWidthForLine(a)?
null:this._trimStart(b)},_trimStart:function(a){return null===a?"":a.replace(k.LEADING_SPACES_REGEXP,"")},_getCommentBreakPosition:function(a){var b=this._getCurrentLine(a),c=this._getRowEnd(b),d=c-1,e=this._getMaxWidthForLine(b),f=-1,g=!1;a=a.target.length;for(b=this._getCurrentText(b);d>=a;d--){var h=this._isWhitespace(b.charAt(d));if(g&&!h)break;else h&&(f=d,c-d<e&&(g=!0))}return f},_isWhitespace:function(a){e.assert(1===a.length,"Expected input length of 1");return 0===a.trim().length}})})},"MW/rtc/plugins/smartformatting/abstract/AbstractSmartFormatter":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/abstract/AbstractPlugin"],function(h,e,g){return h(g,{SMART_FORMATTER_ID:void 0,_enabled:!0,isApplicable:function(d){return this._isEnabled()&&this._isTriggerExpected(d)&&this._findAndRecordTarget(d)},enable:function(){this._enabled=!0},disable:function(){this._enabled=!1},format:function(d){throw Error("Unimplemented API: MW.rtc.plugins.smartformatting.AbstractSmartFormatter.format");},postFormat:function(d){},_isEnabled:function(){return this._enabled},_isTriggerExpected:function(d){return this._isTriggerTypeExpected(d)&&
this._isTriggerPositionExpected(d)},_isTriggerTypeExpected:function(d){throw Error("Unimplemented API: MW.rtc.plugins.smartformatting.AbstractSmartFormatter._isTriggerTypeExpected");},_isTriggerPositionExpected:function(d){throw Error("Unimplemented API: MW.rtc.plugins.smartformatting.AbstractSmartFormatter._isTriggerPositionExpected");},_findAndRecordTarget:function(d){throw Error("Unimplemented API: MW.rtc.plugins.smartformatting.AbstractSmartFormatter._findAndRecordTarget");},_getActions:function(){return[{id:"rtc_smartformatting_"+
this.SMART_FORMATTER_ID+"_on",enabled:!0,callback:e.hitch(this,this.enable)},{id:"rtc_smartformatting_"+this.SMART_FORMATTER_ID+"_off",enabled:!0,callback:e.hitch(this,this.disable)}]}})})},"MW/rtc/plugins/smartformatting/SmartFormattingTriggerTypeEnum":function(){define([],function(){return{INSERT_BREAK:0,INSERT_TEXT:1,DELETE:2}})},"MW/rtc/plugins/smartformatting/SmartFormatterUtilities":function(){define("mw-log/Log MW/rtc/model/CodeUtilities MW/rtc/model/DocumentConstants MW/rtc/model/DocumentUtilities MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenConstants MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenUtilities".split(" "),
function(h,e,g,d,c,b){return{LEADING_SPACES_REGEXP:/^\s+/,TRAILING_SPACES_REGEXP:/\s+$/,URL_REGEXP_STRING:"((https?|ftp):\\/\\/|www\\.)[^\\s]+",COMMENT_REGEXP:/%\s*\S*/,COMMENT_ANNOTATION_REGEXP:/^\s*%+\s*/,ROUND_PAREN_OPEN_CHAR:"(",ROUND_PAREN_CLOSE_CHAR:")",CURLY_PAREN_OPEN_CHAR:"{",CURLY_PAREN_CLOSE_CHAR:"}",SQUARE_PAREN_OPEN_CHAR:"[",SQUARE_PAREN_CLOSE_CHAR:"]",SINGLE_QUOTE_OPEN_CHAR:"'",SINGLE_QUOTE_CLOSE_CHAR:"'",DOUBLE_QUOTE_OPEN_CHAR:'"',DOUBLE_QUOTE_CLOSE_CHAR:'"',PAIR_INSERT_ALLOWED_CHAR_AFTER_CURSOR:", ,),},],;,%".split(","),
LINE_CONTINUATION:"...",isAtEndOfEmptyLine:function(a){var b=a.getNode().rootContainer();return d.isAtEndOfContainer(a,b)&&""===b.getTextForPositioning().trim()},isFirstLayerContainer:function(a){a=a.getNode();return a.textContainer()===a.rootContainer()},isInString:function(a,c,d){a=d.getTokenOnLineColumn(a,c);return 2>=a.getLength()?!1:b.isMatlabStringToken(a)},isInMatlabUntermString:function(a,c,d,e){a=d.getTokenOnLineColumn(a,c);return"single"===e?b.isMatlabUntermSingleQuoteStringToken(a):b.isMatlabUntermDoubleQuoteStringToken(a)},
isCursorPositionApplicableForSplitRule:function(a){var b=a.getNode();if(!e.isCodeContainer(b))return!1;b=a.getNode().rootContainer();return!(d.isAtEndOfContainer(a,b)||""===b.getTextForPositioning().trim())},isNonCodeLineInBetweenForSplitRule:function(a,b,c){for(h.assert(b<=c,"Start line should be \x3c\x3d end line!");b<=c;b+=1){var d=a.getLineNode(b);if(!e.isCodeContainer(d))return!0}return!1},areThereMoreOpenCharactersThanClosingOnLine:function(a,b,c,d,e){a=this._getLineTextForFormatting(a,c-1);
for(var g=0,h=0,q=0;q<a.length;q++)b.isInString(c,q)||(a[q]===d&&(g+=1),a[q]===e&&(h+=1));return d===e?0!==g%2:g>h},isLineColumnBeforeValidString:function(a,b,c,e,g){b=this._getLineTextForFormatting(a,c-1);c=a.getPositionForLineColumn(c,e+1);a=d.getWordAtPosition(a,c);if(null===a)return b.substring(e,e+1)===g;a=a.endLineCol.column;e=b.substring(e-1,e);b=b.substring(a,a+1);return e===g&&b===g},isCharAtLineColumnForFormatting:function(a,b,c,d){h.assert(1===b.length,"Input must be a character");return b===
this.getTextAtLineColumnForFormatting(a,c,d,1)},getTextAtLineColumnForFormatting:function(a,b,c,d){return this._getLineTextForFormatting(a,b).substr(c,d)},_getLineTextForFormatting:function(a,b){return a.getLineNode(b).getTextForPositioning()},lineHasUntermSingleQuoteString:function(a,c){return c.getTokensOnLine(a).some(function(a){return b.isMatlabUntermSingleQuoteStringToken(a)})},lineHasUntermDoubleQuoteString:function(a,c){return c.getTokensOnLine(a).some(function(a){return b.isMatlabUntermDoubleQuoteStringToken(a)})}}})},
"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SplitCommentSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/SplitCommentSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.actionservice","rtc.code.comment","matlab.tokens"]}},createInstance:function(d,c,b,a,e){return new g(d,c,b,a,e)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SplitCommentSmartFormatter":function(){define(["dojo/_base/declare",
"MW/rtc/model/CodeUtilities","MW/rtc/plugins/language/matlab/autoindent/ExchangeService","MW/rtc/plugins/smartformatting/abstract/ParagraphFormatSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],function(h,e,g,d,c){return h(d,{SMART_FORMATTER_ID:"automaticcoding_splitcomment",_TARGET_REGEXP:c.COMMENT_REGEXP,constructor:function(b,a,c,d,e){this._internalDocument=b;this._document=a;this._actionService=c;this._commentCode=d;this._tokenizerService=e;this._actionService.loadActions(this._getActions())},
_isTriggerPositionExpected:function(b){var a=b.triggerPos.getNode(),d=b.triggerPos.getLineColumn().line-1,g=b.triggerPos.getLineColumn().column-1;return 0>d||0>=g?!1:e.isCodeContainer(a)&&c.isFirstLayerContainer(b.triggerPos)&&c.isCursorPositionApplicableForSplitRule(b.cursorPos)&&this._tokenizerService.isInComment(d,g-1)&&!this._tokenizerService.isInBlockComment(d,g-1)},format:function(b){if(!this._document.isReadOnly()&&!b.cursor.isCursorReadOnly()){var a=this._commentCode.getCommentAnnotation(),
c=b.cursorPos.getLineColumn().line;this._document.insertText(a,c,b.cursorPos.getLineColumn().column);b.cursor.onUpdate()}}})})},"MW/rtc/plugins/smartformatting/abstract/ParagraphFormatSmartFormatter":function(){define("dojo/_base/declare MW/rtc/model/DocumentUtilities MW/rtc/plugins/richtext/ParagraphFormatsEnum MW/rtc/plugins/smartformatting/abstract/AbstractSmartFormatter MW/rtc/plugins/smartformatting/SmartFormattingTriggerTypeEnum MW/rtc/plugins/smartformatting/SmartFormatterUtilities".split(" "),
function(h,e,g,d,c,b){return h(d,{_TARGET_REGEXP:void 0,_isTriggerTypeExpected:function(a){return a.type===c.INSERT_BREAK},_isTriggerPositionExpected:function(a){return b.isFirstLayerContainer(a.triggerPos)&&b.isAtEndOfEmptyLine(a.cursorPos)},_findAndRecordTarget:function(a){var b=a.triggerPos.getLineColumn().line,b=this._getRangeOfDirectivesOnLine(b);if(!b)return!1;a.target=b;return!0},format:function(a){var b=a.cursorPos.getLineColumn().line,c=a.triggerPos.getLineColumn().line,d=this._document.startBlockEdit();
this._removeLeadingSpaces(b);this._format(c,a.target);this._document.endBlockEdit(d);this._cursor.onUpdate();return a},_format:function(a,b){this._transformLineToParagraph(a,b)},_getRangeOfDirectivesOnLine:function(a){return e.getRangeAndTextOfTargetOnLine(this._internalDocument,a,this._TARGET_REGEXP)},_transformLineToParagraph:function(a,b){var c=this._getTypeOfParagraph(a);this._richText.applyFormatInLine(c,a);this._removeDirectives(a,b);this._removeTrailingSpaces(a)},_getTypeOfParagraph:function(a){throw Error("Unimplemented API: MW.rtc.plugins.smartformatting.abstract.ParagraphFormatSmartFormatter._getTypeOfParagraph");
},_removeDirectives:function(a,b){this._document.deleteText(a,b.start,a,b.end-1)},_removeTrailingSpaces:function(a){var c=e.getRangeAndTextOfTargetOnLine(this._internalDocument,a,b.TRAILING_SPACES_REGEXP);c&&this._document.deleteText(a,c.start,a,c.end)},_removeLeadingSpaces:function(a){var c=e.getRangeAndTextOfTargetOnLine(this._internalDocument,a,b.LEADING_SPACES_REGEXP);c&&this._document.deleteText(a,c.start,a,c.end)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/RoundParenInsertSmartFormatterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/RoundParenInsertSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.actionservice","matlab.tokens"]}},createInstance:function(d,c,b,a){return new g(d,c,b,a)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/RoundParenInsertSmartFormatter":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/smartformatting/abstract/PairInsertSmartFormatter",
"MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],function(h,e,g,d,c){return h(d,{SMART_FORMATTER_ID:"automaticcoding_roundpareninsert",_OPEN_CHAR:c.ROUND_PAREN_OPEN_CHAR,_CLOSE_CHAR:c.ROUND_PAREN_CLOSE_CHAR,_ALLOWED_CHAR_AFTER_CURSOR:c.PAIR_INSERT_ALLOWED_CHAR_AFTER_CURSOR,constructor:function(b,a,c,d){this._internalDocument=b;this._document=a;this._actionService=c;this._tokenizerService=d;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/abstract/PairInsertSmartFormatter":function(){define("dojo/_base/declare MW/rtc/model/CodeUtilities MW/rtc/model/DocumentUtilities MW/rtc/plugins/smartformatting/abstract/AbstractSmartFormatter MW/rtc/plugins/smartformatting/SmartFormattingTriggerTypeEnum MW/rtc/plugins/smartformatting/SmartFormatterUtilities".split(" "),
function(h,e,g,d,c,b){return h(d,{_OPEN_CHAR:void 0,_CLOSE_CHAR:void 0,_ALLOWED_CHAR_AFTER_CURSOR:void 0,_isTriggerTypeExpected:function(a){return a.type===c.INSERT_TEXT&&a.text===this._OPEN_CHAR},_isTriggerPositionExpected:function(a){var b=a.triggerPos.getNode();return e.isCodeContainer(b)&&this._isCursorPositionApplicable(a)&&this._isLineValidForPairInsert(a)},_isCursorPositionApplicable:function(a){var c=a.cursorPos.getLineColumn().line;a=a.cursorPos.getLineColumn().column;c-=1;a-=1;if(0>c||0>
a||this._tokenizerService.isInComment(c,a-1)||this._tokenizerService.isInString(c,a-1))return!1;c=b.getTextAtLineColumnForFormatting(this._internalDocument,c,a,1);for(a=0;a<this._ALLOWED_CHAR_AFTER_CURSOR.length;a+=1)if(c===this._ALLOWED_CHAR_AFTER_CURSOR[a])return!0;return!1},_isLineValidForPairInsert:function(a){a=a.cursorPos.getLineColumn().line;return this._OPEN_CHAR!==this._CLOSE_CHAR&&!b.areThereMoreOpenCharactersThanClosingOnLine(this._internalDocument,this._tokenizerService,a,this._OPEN_CHAR,
this._CLOSE_CHAR)?!1:!0},_findAndRecordTarget:function(a){return!0},format:function(a){var b=a.cursorPos.getLineColumn().line,c=a.cursorPos.getLineColumn().column;this._document.insertText(this._CLOSE_CHAR,b,a.cursorPos.getLineColumn().column);a.cursor.setLineColumn(b,c)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/RoundParenDeleteSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/RoundParenDeleteSmartFormatter"],
function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.actionservice","matlab.tokens"]}},createInstance:function(d,c,b,a){return new g(d,c,b,a)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/RoundParenDeleteSmartFormatter":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/smartformatting/abstract/ParenDeleteSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],function(h,
e,g,d,c){return h(d,{SMART_FORMATTER_ID:"automaticcoding_roundparendelete",_OPEN_CHAR:c.ROUND_PAREN_OPEN_CHAR,_CLOSE_CHAR:c.ROUND_PAREN_CLOSE_CHAR,constructor:function(b,a,c,d){this._internalDocument=b;this._document=a;this._actionService=c;this._tokenizerService=d;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/abstract/ParenDeleteSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/plugins/smartformatting/abstract/PairDeleteSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormattingPairMatcher"],
function(h,e,g){return h(e,{constructor:function(d,c,b,a){this._smartFormattingMatcher=new g(a,this._OPEN_CHAR,this._CLOSE_CHAR)},_checkPairDeleteIsApplicable:function(d){return!this.inherited(arguments)?!1:this._smartFormattingMatcher.areTokensBalancedForPosition(d.cursorPos)}})})},"MW/rtc/plugins/smartformatting/abstract/PairDeleteSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","MW/rtc/plugins/smartformatting/abstract/AbstractSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormattingTriggerTypeEnum",
"MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],function(h,e,g,d,c){return h(g,{_OPEN_CHAR:void 0,_CLOSE_CHAR:void 0,_isTriggerExpected:function(b){return this._isTriggerTypeExpected(b)&&this._isTriggerDirectionExpected(b)&&this._isTriggerPositionExpected(b)},_isTriggerDirectionExpected:function(b){return-1===b.direction},_isTriggerTypeExpected:function(b){return b.type===d.DELETE},_isTriggerPositionExpected:function(b){var a=b.triggerPos.getNode();return e.isCodeContainer(a)&&this._checkPairDeleteIsApplicable(b)},
_findAndRecordTarget:function(b){return!0},format:function(b){var a=b.cursorPos;this._document.deleteText(a.getLineColumn().line,a.getLineColumn().column-1,a.getLineColumn().line,a.getLineColumn().column+1);return b},_checkPairDeleteIsApplicable:function(b){var a=b.cursorPos.getLineColumn().line-1,d=b.cursorPos.getLineColumn().column-1;if(0>a||0>=d||this._tokenizerService.isInComment(a,d-1)||c.isInString(a,d-1,this._tokenizerService))return!1;b=c.isCharAtLineColumnForFormatting(this._internalDocument,
this._OPEN_CHAR,a,d-1);a=c.isCharAtLineColumnForFormatting(this._internalDocument,this._CLOSE_CHAR,a,d);return b&&a}})})},"MW/rtc/plugins/smartformatting/SmartFormattingPairMatcher":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect mw-log/Log MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenConstants MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenUtilities".split(" "),function(h,e,g,d,c,b){return h(null,{constructor:function(a,b,c){this._tokenizerService=a;this._openCharacter=
b;this._closeCharacter=c},areTokensBalancedForPosition:function(a){var b=a.getLineColumn().column-1,c=a.getLineColumn().line-1;a=this._tokenizerService.getTokenOnLineColumn(c,b);b=this._tokenizerService.getTokenOnLineColumn(c,b-1);b=this._findStartToken(b);a=this._findEndToken(a);return this._areTokensBalanced(b,a)},hasOneMoreCloseThanOpenCharacter:function(a){var b=a.getLineColumn().column-1,c=a.getLineColumn().line-1;a=this._tokenizerService.getTokenOnLineColumn(c,b);b=this._tokenizerService.getTokenOnLineColumn(c,
b-1);b=this._findStartToken(b);a=this._findEndToken(a);return this._hasOneMoreCloseThanOpenCharacter(b,a)},_areTokensBalanced:function(a,b){var c=this._getUnmatchedCharacterCounts(a,b);return 0===c.unmatchedCloseCharacters&&0===c.unmatchedOpenCharacters},_hasOneMoreCloseThanOpenCharacter:function(a,b){var c=this._getUnmatchedCharacterCounts(a,b);return 1===c.unmatchedCloseCharacters&&0===c.unmatchedOpenCharacters},_getUnmatchedCharacterCounts:function(a,b){d.assert(null!==a,"Start token cannot be null");
d.assert(null!==b,"End token cannot be null");for(var c=[],e=0,g=a;null!==g&&!(g.getValue()===this._openCharacter?c.push(g.getValue()):g.getValue()===this._closeCharacter&&(0===c.length?e+=1:c.pop()),g===b);)g=this._getNextToken(g);return{unmatchedCloseCharacters:e,unmatchedOpenCharacters:c.length}},_findStartToken:function(a){var b=a;for(a=a.getPositionInfo().line;null!=b;){var c=this._tokenizerService.getPreviousTokenOf(b,b.getPositionInfo().line);if(null===c)return b;var d=c.getPositionInfo().line;
if(a!==d)if(this._lineContainsLineContinuation(d,this._tokenizerService))a=d;else return b;b=c}return null},_lineContainsLineContinuation:function(a){return this._tokenizerService.getTokensOnLine(a).some(function(a){return b.isDotDotDotToken(a)})},_findEndToken:function(a){for(;null!=a;){var b=this._getNextToken(a);if(null===b)return a;if(this._isEndOfLine(b))return b;a=b}return null},_isEndOfLine:function(a){return b.isEndOfLineToken(a)},_getNextToken:function(a){return b.isDotDotDotToken(a)?(a=
a.getPositionInfo().line+1,this._tokenizerService.getFirstTokenOnLine(a)):this._tokenizerService.getNextTokenOf(a)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SquareParenInsertSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/SquareParenInsertSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.actionservice",
"matlab.tokens"]}},createInstance:function(d,c,b,a){return new g(d,c,b,a)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SquareParenInsertSmartFormatter":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/smartformatting/abstract/PairInsertSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],function(h,e,g,d,c){return h(d,{SMART_FORMATTER_ID:"automaticcoding_squarepareninsert",_OPEN_CHAR:c.SQUARE_PAREN_OPEN_CHAR,_CLOSE_CHAR:c.SQUARE_PAREN_CLOSE_CHAR,
_ALLOWED_CHAR_AFTER_CURSOR:c.PAIR_INSERT_ALLOWED_CHAR_AFTER_CURSOR,constructor:function(b,a,c,d){this._internalDocument=b;this._document=a;this._actionService=c;this._tokenizerService=d;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SquareParenDeleteSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/SquareParenDeleteSmartFormatter"],
function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.actionservice","matlab.tokens"]}},createInstance:function(d,c,b,a){return new g(d,c,b,a)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SquareParenDeleteSmartFormatter":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/smartformatting/abstract/ParenDeleteSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],function(h,
e,g,d,c){return h(d,{SMART_FORMATTER_ID:"automaticcoding_squareparendelete",_OPEN_CHAR:c.SQUARE_PAREN_OPEN_CHAR,_CLOSE_CHAR:c.SQUARE_PAREN_CLOSE_CHAR,constructor:function(b,a,c,d){this._internalDocument=b;this._document=a;this._actionService=c;this._tokenizerService=d;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/CurlyParenInsertSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"MW/rtc/plugins/smartformatting/formatter/automaticcoding/CurlyParenInsertSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.actionservice","matlab.tokens"]}},createInstance:function(d,c,b,a){return new g(d,c,b,a)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/CurlyParenInsertSmartFormatter":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/smartformatting/abstract/PairInsertSmartFormatter",
"MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],function(h,e,g,d,c){return h(d,{SMART_FORMATTER_ID:"automaticcoding_curlypareninsert",_OPEN_CHAR:c.CURLY_PAREN_OPEN_CHAR,_CLOSE_CHAR:c.CURLY_PAREN_CLOSE_CHAR,_ALLOWED_CHAR_AFTER_CURSOR:c.PAIR_INSERT_ALLOWED_CHAR_AFTER_CURSOR,constructor:function(b,a,c,d){this._internalDocument=b;this._document=a;this._actionService=c;this._tokenizerService=d;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/CurlyParenDeleteSmartFormatterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/CurlyParenDeleteSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.actionservice","matlab.tokens"]}},createInstance:function(d,c,b,a){return new g(d,c,b,a)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/CurlyParenDeleteSmartFormatter":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/smartformatting/abstract/ParenDeleteSmartFormatter",
"MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],function(h,e,g,d,c){return h(d,{SMART_FORMATTER_ID:"automaticcoding_curlyparendelete",_OPEN_CHAR:c.CURLY_PAREN_OPEN_CHAR,_CLOSE_CHAR:c.CURLY_PAREN_CLOSE_CHAR,constructor:function(b,a,c,d){this._internalDocument=b;this._document=a;this._actionService=c;this._tokenizerService=d;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SingleQuoteInsertSmartFormatterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/SingleQuoteInsertSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.actionservice","matlab.tokens"]}},createInstance:function(d,c,b,a){return new g(d,c,b,a)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SingleQuoteInsertSmartFormatter":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/model/CodeUtilities MW/rtc/model/DocumentUtilities MW/rtc/plugins/smartformatting/abstract/QuoteInsertSmartFormatter MW/rtc/plugins/smartformatting/SmartFormatterUtilities".split(" "),
function(h,e,g,d,c,b,a){return h(b,{SMART_FORMATTER_ID:"automaticcoding_singlequoteinsert",_OPEN_CHAR:a.SINGLE_QUOTE_OPEN_CHAR,_CLOSE_CHAR:a.SINGLE_QUOTE_CLOSE_CHAR,_ALLOWED_CHAR_AFTER_CURSOR:a.PAIR_INSERT_ALLOWED_CHAR_AFTER_CURSOR,constructor:function(a,b,c,d){this._internalDocument=a;this._document=b;this._actionService=c;this._tokenizerService=d;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/abstract/QuoteInsertSmartFormatter":function(){define(["dojo/_base/declare",
"MW/rtc/model/CodeUtilities","MW/rtc/model/DocumentUtilities","MW/rtc/plugins/smartformatting/SmartFormatterUtilities","MW/rtc/plugins/smartformatting/abstract/PairInsertSmartFormatter"],function(h,e,g,d,c){return h(c,{_UNALLOWED_CHAR_BEFORE_CURSOR:[")","}","]","."],_WORD_REGEX:/\w/,_NON_WORD_REGEX:/[^\\w=({[,\s]/,_isTriggerPositionExpected:function(b){var a=b.triggerPos.getNode();return e.isCodeContainer(a)&&this._isCursorPositionApplicable(b)&&this._checkAllowedCharsBeforeCursor(b)},_checkAllowedCharsBeforeCursor:function(b){var a=
b.cursorPos.getLineColumn().line;b=b.cursorPos.getLineColumn().column;a-=1;b-=1;if(0>a||0>b)return!1;if(2>b)return!0;a=d.getTextAtLineColumnForFormatting(this._internalDocument,a,b-2,1);for(b=0;b<this._UNALLOWED_CHAR_BEFORE_CURSOR.length;b+=1)if(a===this._UNALLOWED_CHAR_BEFORE_CURSOR[b])return!1;b=a.search(this._WORD_REGEX);if(0===b)return!1;b=a.search(this._NON_WORD_REGEX);return 0===b?!1:!0}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SingleQuoteDeleteSmartFormatterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/SingleQuoteDeleteSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.actionservice","matlab.tokens"]}},createInstance:function(d,c,b,a){return new g(d,c,b,a)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SingleQuoteDeleteSmartFormatter":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect",
"MW/rtc/plugins/smartformatting/abstract/PairDeleteSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],function(h,e,g,d,c){return h(d,{SMART_FORMATTER_ID:"automaticcoding_singlequotedelete",_OPEN_CHAR:c.SINGLE_QUOTE_OPEN_CHAR,_CLOSE_CHAR:c.SINGLE_QUOTE_CLOSE_CHAR,constructor:function(b,a,c,d){this._internalDocument=b;this._document=a;this._actionService=c;this._tokenizerService=d;this._actionService.loadActions(this._getActions())},_checkPairDeleteIsApplicable:function(b){if(!this.inherited(arguments))return!1;
var a=b.cursorPos.getLineColumn().line-1;return!c.lineHasUntermSingleQuoteString(a,this._tokenizerService)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/DoubleQuoteInsertSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/DoubleQuoteInsertSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.actionservice",
"matlab.tokens"]}},createInstance:function(d,c,b,a){return new g(d,c,b,a)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/DoubleQuoteInsertSmartFormatter":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/smartformatting/abstract/QuoteInsertSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],function(h,e,g,d,c){return h(d,{SMART_FORMATTER_ID:"automaticcoding_doublequoteinsert",_OPEN_CHAR:c.DOUBLE_QUOTE_OPEN_CHAR,_CLOSE_CHAR:c.DOUBLE_QUOTE_CLOSE_CHAR,
_ALLOWED_CHAR_AFTER_CURSOR:c.PAIR_INSERT_ALLOWED_CHAR_AFTER_CURSOR,constructor:function(b,a,c,d){this._internalDocument=b;this._document=a;this._actionService=c;this._tokenizerService=d;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/DoubleQuoteDeleteSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/DoubleQuoteDeleteSmartFormatter"],
function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.actionservice","matlab.tokens"]}},createInstance:function(d,c,b,a){return new g(d,c,b,a)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/DoubleQuoteDeleteSmartFormatter":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/smartformatting/abstract/PairDeleteSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],function(h,
e,g,d,c){return h(d,{SMART_FORMATTER_ID:"automaticcoding_doublequotedelete",_OPEN_CHAR:c.DOUBLE_QUOTE_OPEN_CHAR,_CLOSE_CHAR:c.DOUBLE_QUOTE_CLOSE_CHAR,constructor:function(b,a,c,d){this._internalDocument=b;this._document=a;this._actionService=c;this._tokenizerService=d;this._actionService.loadActions(this._getActions())},_checkPairDeleteIsApplicable:function(b){if(!this.inherited(arguments))return!1;var a=b.cursorPos.getLineColumn().line-1;return!c.lineHasUntermDoubleQuoteString(a,this._tokenizerService)}})})},
"MW/rtc/plugins/smartformatting/formatter/automaticcoding/RoundParenOverwritingSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/RoundParenOverwritingSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.actionservice","matlab.tokens"]}},createInstance:function(d,c,b,a){return new g(d,c,b,a)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/RoundParenOverwritingSmartFormatter":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/aspect","MW/rtc/plugins/smartformatting/abstract/ParenCloseCharOverwritingSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],function(h,e,g,d,c){return h(d,{SMART_FORMATTER_ID:"automaticcoding_roundparenoverwrite",_OPEN_CHAR:c.ROUND_PAREN_OPEN_CHAR,_CLOSE_CHAR:c.ROUND_PAREN_CLOSE_CHAR,constructor:function(b,a,c,d){this._internalDocument=b;this._document=a;this._actionService=c;this._tokenizerService=d;this._actionService.loadActions(this._getActions())}})})},
"MW/rtc/plugins/smartformatting/abstract/ParenCloseCharOverwritingSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/plugins/smartformatting/abstract/CloseCharOverwritingSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormattingPairMatcher"],function(h,e,g){return h(e,{constructor:function(d,c,b,a){this._smartFormattingMatcher=new g(a,this._OPEN_CHAR,this._CLOSE_CHAR)},_isCursorPositionApplicable:function(d){return!this.inherited(arguments)?!1:this._smartFormattingMatcher.hasOneMoreCloseThanOpenCharacter(d.cursorPos)}})})},
"MW/rtc/plugins/smartformatting/abstract/CloseCharOverwritingSmartFormatter":function(){define("dojo/_base/declare MW/rtc/model/CodeUtilities MW/rtc/model/DocumentUtilities MW/rtc/plugins/smartformatting/abstract/AbstractSmartFormatter MW/rtc/plugins/smartformatting/SmartFormattingTriggerTypeEnum MW/rtc/plugins/smartformatting/SmartFormatterUtilities".split(" "),function(h,e,g,d,c,b){return h(d,{_OPEN_CHAR:void 0,_CLOSE_CHAR:void 0,_BLOCK_TYPES_FOR_MERGE_AND_ADVANCE:["TypingText"],_isTriggerTypeExpected:function(a){return a.type===
c.INSERT_TEXT&&a.text===this._CLOSE_CHAR},_isTriggerPositionExpected:function(a){var b=a.triggerPos.getNode();return e.isCodeContainer(b)&&this._isCursorPositionApplicable(a)},_isCursorPositionApplicable:function(a){var c=a.cursorPos.getLineColumn().line;a=a.cursorPos.getLineColumn().column;c-=1;a-=1;return 0>c||0>a||b.getTextAtLineColumnForFormatting(this._internalDocument,c,a,1)!=this._CLOSE_CHAR||this._tokenizerService.isInComment(c,a-1)||b.isInString(c,a-1,this._tokenizerService)?!1:!0},_findAndRecordTarget:function(a){return!0},
format:function(a){var b=a.cursorPos.getLineColumn().line,c=a.cursorPos;this._document.startEdit().setBlockTypesForMergeAndAdvance(this._BLOCK_TYPES_FOR_MERGE_AND_ADVANCE);this._document.deleteText(c.getLineColumn().line,c.getLineColumn().column-1,c.getLineColumn().line,c.getLineColumn().column);a.cursor.setLineColumn(b,c.getLineColumn().column+1);this._document.endEdit()}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/CurlyParenOverwritingSmartFormatterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/CurlyParenOverwritingSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.actionservice","matlab.tokens"]}},createInstance:function(d,c,b,a){return new g(d,c,b,a)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/CurlyParenOverwritingSmartFormatter":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect",
"MW/rtc/plugins/smartformatting/abstract/ParenCloseCharOverwritingSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],function(h,e,g,d,c){return h(d,{SMART_FORMATTER_ID:"automaticcoding_curlyparenoverwrite",_OPEN_CHAR:c.CURLY_PAREN_OPEN_CHAR,_CLOSE_CHAR:c.CURLY_PAREN_CLOSE_CHAR,constructor:function(b,a,c,d){this._internalDocument=b;this._document=a;this._actionService=c;this._tokenizerService=d;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SquareParenOverwritingSmartFormatterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/SquareParenOverwritingSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.actionservice","matlab.tokens"]}},createInstance:function(d,c,b,a){return new g(d,c,b,a)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SquareParenOverwritingSmartFormatter":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect",
"MW/rtc/plugins/smartformatting/abstract/ParenCloseCharOverwritingSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],function(h,e,g,d,c){return h(d,{SMART_FORMATTER_ID:"automaticcoding_squareparenoverwrite",_OPEN_CHAR:c.SQUARE_PAREN_OPEN_CHAR,_CLOSE_CHAR:c.SQUARE_PAREN_CLOSE_CHAR,constructor:function(b,a,c,d){this._internalDocument=b;this._document=a;this._actionService=c;this._tokenizerService=d;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SingleQuoteOverwritingSmartFormatterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/SingleQuoteOverwritingSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.actionservice","matlab.tokens"]}},createInstance:function(d,c,b,a){return new g(d,c,b,a)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SingleQuoteOverwritingSmartFormatter":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect",
"MW/rtc/plugins/smartformatting/abstract/CloseCharOverwritingSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],function(h,e,g,d,c){return h(d,{SMART_FORMATTER_ID:"automaticcoding_singlequoteoverwrite",_OPEN_CHAR:c.SINGLE_QUOTE_OPEN_CHAR,_CLOSE_CHAR:c.SINGLE_QUOTE_CLOSE_CHAR,constructor:function(b,a,c,d){this._internalDocument=b;this._document=a;this._actionService=c;this._tokenizerService=d;this._actionService.loadActions(this._getActions())},_isCursorPositionApplicable:function(b){if(!this.inherited(arguments))return!1;
var a=b.cursorPos.getLineColumn().line-1;return c.lineHasUntermSingleQuoteString(a,this._tokenizerService)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/DoubleQuoteOverwritingSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/DoubleQuoteOverwritingSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document",
"rtc.actionservice","matlab.tokens"]}},createInstance:function(d,c,b,a){return new g(d,c,b,a)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/DoubleQuoteOverwritingSmartFormatter":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/smartformatting/abstract/CloseCharOverwritingSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],function(h,e,g,d,c){return h(d,{SMART_FORMATTER_ID:"automaticcoding_doublequoteoverwrite",_OPEN_CHAR:c.DOUBLE_QUOTE_OPEN_CHAR,
_CLOSE_CHAR:c.DOUBLE_QUOTE_CLOSE_CHAR,constructor:function(b,a,c,d){this._internalDocument=b;this._document=a;this._actionService=c;this._tokenizerService=d;this._actionService.loadActions(this._getActions())},_isCursorPositionApplicable:function(b){if(!this.inherited(arguments))return!1;var a=b.cursorPos.getLineColumn().line-1;return c.lineHasUntermDoubleQuoteString(a,this._tokenizerService)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SplitDoubleQuoteStringSmartFormatterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/SplitDoubleQuoteStringSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.actionservice","matlab.tokens","rtc.indentutilities"]}},createInstance:function(d,c,b,a,e){return new g(d,c,b,a,e)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SplitDoubleQuoteStringSmartFormatter":function(){define("dojo/_base/declare MW/rtc/model/CodeUtilities MW/rtc/plugins/language/matlab/autoindent/Formatter MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenUtilities MW/rtc/plugins/smartformatting/abstract/SplitStringSmartFormatter MW/rtc/plugins/smartformatting/SmartFormatterUtilities".split(" "),
function(h,e,g,d,c,b){return h(c,{SMART_FORMATTER_ID:"automaticcoding_splitdoublequotestring",_TRIGGER_POS_REQ_CHAR:b.DOUBLE_QUOTE_CLOSE_CHAR+" + "+b.LINE_CONTINUATION,_CURSOR_POS_REQ_CHAR:b.DOUBLE_QUOTE_OPEN_CHAR,_TRIGGER_POS_REQ_CHAR_ESC_CHAR:b.DOUBLE_QUOTE_CLOSE_CHAR+b.DOUBLE_QUOTE_CLOSE_CHAR+" + "+b.LINE_CONTINUATION,_QUOTE_TYPE:"double",constructor:function(a,b,c,d,e){this._internalDocument=a;this._document=b;this._actionService=c;this._tokenizerService=d;this._indentUtilities=e;this._actionService.loadActions(this._getActions())},
_formatQuoteTypeSpecific:function(a,b,c){}})})},"MW/rtc/plugins/smartformatting/abstract/SplitStringSmartFormatter":function(){define("dojo/_base/declare MW/rtc/model/CodeUtilities MW/rtc/model/DocumentUtilities MW/rtc/plugins/language/matlab/autoindent/ExchangeService MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenUtilities MW/rtc/plugins/smartformatting/abstract/ParagraphFormatSmartFormatter MW/rtc/plugins/smartformatting/SmartFormatterUtilities".split(" "),function(h,e,g,d,c,b,a){return h(b,
{_TRIGGER_POS_REQ_CHAR:void 0,_CURSOR_POS_REQ_CHAR:void 0,_TRIGGER_POS_REQ_CHAR_ESC_CHAR:void 0,_QUOTE_TYPE:void 0,_isTriggerPositionExpected:function(b){var c=b.triggerPos.getNode(),g=b.triggerPos.getLineColumn().line-1,h=b.triggerPos.getLineColumn().column-1;if(0>g||0>=h)return!1;var p=b.cursorPos.getLineColumn().line-1;return e.isCodeContainer(c)&&!a.isNonCodeLineInBetweenForSplitRule(this._internalDocument,g,p)&&a.isCursorPositionApplicableForSplitRule(b.cursorPos)&&this._checkUntermString(g,
h-1,this._tokenizerService,d.getLatestNumberOfWhiteSpaces(),b.cursor)},_checkUntermString:function(b,c,d,e,g){var h=a.isInMatlabUntermString(b,c,d,this._QUOTE_TYPE);return!h&&0===e?this._checkEscapeCharCondition(b,c,d,g):h},_checkEscapeCharCondition:function(b,d,e,g){var h=a.getTextAtLineColumnForFormatting(this._internalDocument,b,d,1);g=g.getLineColumn();g=a.getTextAtLineColumnForFormatting(this._internalDocument,g.line-1,g.column-1,1);var m;m="single"===this._QUOTE_TYPE?a.SINGLE_QUOTE_CLOSE_CHAR:
a.DOUBLE_QUOTE_CLOSE_CHAR;if(h===m&&g===m)return b=e.getTokenOnLineColumn(b,d),c.isMatlabStringToken(b)},_findAndRecordTarget:function(a){return!0},format:function(a){if(!this._document.isReadOnly()&&!a.cursor.isCursorReadOnly()){var b=a.triggerPos.getLineColumn(),c=b.line,b=b.column,e=a.cursorPos.getLineColumn().line,g=d.getLatestNumberOfWhiteSpaces(),h=d.getLatestIndentLevel(),q=this._CURSOR_POS_REQ_CHAR;if(g>h)for(var r=0;r<g-h;r+=1)q+=" ";r=this._cacheDataForQuoteTypeSpecificFormat(a);this._checkEscapeCharCondition(c-
1,b-2,this._tokenizerService,a.cursor)?(this._document.insertText(this._TRIGGER_POS_REQ_CHAR_ESC_CHAR,c,b),0<h&&this._document.deleteText(e,1,e,h+1)):(this._document.insertText(this._TRIGGER_POS_REQ_CHAR,c,b),g<h&&this._document.deleteText(e,1,e,h-g+1),this._document.insertText(q,e,1));this._formatQuoteTypeSpecific(r);a.cursor.setLineColumn(e,2);a.cursor.onUpdate()}},postFormat:function(a){d.isAutoIndentEnabled()&&(a=a.cursorPos.getLine(),this._indentUtilities.format(a-1))},_formatQuoteTypeSpecific:function(a){throw Error("Unimplemented API: MW.rtc.plugins.smartformatting.SplitStringSmartFormatter._formatQuoteTypeSpecific");
},_cacheDataForQuoteTypeSpecificFormat:function(a){}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SplitSingleQuoteStringSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/SplitSingleQuoteStringSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.actionservice","matlab.tokens","rtc.indentutilities"]}},
createInstance:function(d,c,b,a,e){return new g(d,c,b,a,e)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SplitSingleQuoteStringSmartFormatter":function(){define("dojo/_base/declare MW/rtc/model/CodeUtilities MW/rtc/model/DocumentUtilities MW/rtc/plugins/language/matlab/autoindent/Formatter MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenizer MW/rtc/plugins/smartformatting/abstract/SplitStringSmartFormatter MW/rtc/plugins/smartformatting/SmartFormatterUtilities".split(" "),function(h,
e,g,d,c,b,a){return h(b,{SMART_FORMATTER_ID:"automaticcoding_splitsinglequotestring",_TRIGGER_POS_REQ_CHAR:a.SINGLE_QUOTE_CLOSE_CHAR+" "+a.LINE_CONTINUATION,_CURSOR_POS_REQ_CHAR:a.SINGLE_QUOTE_OPEN_CHAR,_STRING_OPEN_BRACKET:a.SQUARE_PAREN_OPEN_CHAR,_STRING_CLOSE_BRACKET:a.SQUARE_PAREN_CLOSE_CHAR,_TRIGGER_POS_REQ_CHAR_ESC_CHAR:a.SINGLE_QUOTE_CLOSE_CHAR+a.SINGLE_QUOTE_CLOSE_CHAR+a.LINE_CONTINUATION,_STRING_OPEN_REGEX:RegExp("\\"+a.SQUARE_PAREN_OPEN_CHAR+"\\s*"+a.SINGLE_QUOTE_OPEN_CHAR),_STRING_CLOSE_REGEX:RegExp(a.SINGLE_QUOTE_CLOSE_CHAR+
"\\s*\\"+a.SQUARE_PAREN_CLOSE_CHAR),_STRING_CONTINUATION_REGEX:RegExp(a.SINGLE_QUOTE_CLOSE_CHAR+"\\s*\\.\\.\\."),_QUOTE_TYPE:"single",constructor:function(a,b,d,e,g){this._internalDocument=a;this._document=b;this._actionService=d;this._tokenizerService=e;this._indentUtilities=g;this._actionService.loadActions(this._getActions());this._isolatedTokenizer=new c;this.own(this._isolatedTokenizer)},_formatForFirstTimeSplitString:function(a,b){var c=this._getRange(this._internalDocument,a.getLine(),this._STRING_OPEN_REGEX),
d=this._getRange(this._internalDocument,b.getLine(),this._STRING_CLOSE_REGEX),e=this._getRange(this._internalDocument,b.getLine(),this._STRING_CONTINUATION_REGEX);this._isFirstTimeSplit(a.getColumn()-1,b.getColumn()-1,c,d,e)&&(this._document.insertText(this._STRING_OPEN_BRACKET,a.getLine(),a.getColumn()),this._document.insertText(this._STRING_CLOSE_BRACKET,b.getLine(),b.getColumn()))},_isFirstTimeSplit:function(a,b,c,d,e){if(!c&&!d&&!e)return!0;var g=!0,h=!0,r=!0;c&&(g=!(a>=c.end-2));d&&(h=!(b<=d.start));
e&&(r=b!==e.start);return g&&h&&r},_getRange:function(a,b,c){return g.getRangeAndTextOfTargetOnLine(a,b,c)},_formatQuoteTypeSpecific:function(a){var b=this._getEndSplitStringPosition(a.cursorPos);this._formatForFirstTimeSplitString(a.startOfSplitString,b);a.startOfSplitString.destroy();b.destroy()},_getEndSplitStringPosition:function(a){var b=a.getLine(),c=b-1;a=a.getColumn()-1;b=this._document.getLineText(b);this._isolatedTokenizer.initializeLines(b);b=this._isolatedTokenizer.getTokenOnLineColumn(0,
a);return this._document.createPositionAtLineColumn(c,b.getColumn()+b.getLength())},_cacheDataForQuoteTypeSpecificFormat:function(a){var b=this._tokenizerService.getTokenOnLineColumn(a.triggerPos.getLine()-1,a.triggerPos.getColumn()-2),b=this._document.createPositionAtLineColumn(b.getLineNumber(),b.getColumn());a.startOfSplitString=b;return a}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndClassDefBlockSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndClassDefBlockSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.actionservice","matlab.tokens","rtc.indentutilities"]}},createInstance:function(d,c,b,a,e){return new g(d,c,b,a,e)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndClassDefBlockSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","MW/rtc/plugins/smartformatting/abstract/BlockSmartFormatter",
"MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenConstants","MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenUtilities"],function(h,e,g,d,c){return h(g,{SMART_FORMATTER_ID:"automaticcoding_endclassdefblock",_TARGET_REGEXP:c.getTokenValueById(d.TOKENS.CLASSDEF),constructor:function(b,a,c,d,e){this._internalDocument=b;this._document=a;this._actionService=c;this._indentUtilities=e;this._tokenizerService=d;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/abstract/BlockSmartFormatter":function(){define("dojo/_base/declare mw-log/Log MW/rtc/model/CodeUtilities MW/rtc/model/DocumentUtilities MW/rtc/plugins/smartformatting/abstract/AbstractSmartFormatter MW/rtc/plugins/smartformatting/SmartFormattingTriggerTypeEnum MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenConstants MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenUtilities".split(" "),
function(h,e,g,d,c,b,a,f){return h(c,{_TARGET_REGEXP:void 0,_END_STRING:f.getTokenValueById(a.TOKENS.END),_LINE_COLUMN_LESS_THAN_ZERO:"Line and column must be greater than or equal to zero",_DOCUMENT_IS_READ_ONLY:"This document should not be read only",_isTriggerTypeExpected:function(a){return a.type===b.INSERT_BREAK},_isTriggerPositionExpected:function(a){var b=a.triggerPos.getNode(),c=a.cursorPos.getNode(),d=a.triggerPos.getLineColumn().line-1;a=a.triggerPos.getLineColumn().column-1;e.assert(0<=
d&&0<=a,this._LINE_COLUMN_LESS_THAN_ZERO);if(d=this._tokenizerService.findStartOfBlockOnLine(d))var f=d.getValue()===this._TARGET_REGEXP;return f&&g.isCodeContainer(b)&&g.isCodeContainer(c)&&this._tokenizerService.isUnmatchedStartToken(d)},_findAndRecordTarget:function(a){var b=a.triggerPos.getLineColumn().line,b=this._getRangeOfDirectivesOnLine(b);if(!b)return!1;a.target=b;return!0},_getRangeOfDirectivesOnLine:function(a){return d.getRangeAndTextOfTargetOnLine(this._internalDocument,a,this._TARGET_REGEXP)},
format:function(a){e.assert(!(this._document.isReadOnly()||a.cursor.isCursorReadOnly()),this._DOCUMENT_IS_READ_ONLY);var b=a.cursorPos.getLineColumn().line,c=a.cursorPos.getLineColumn().column,d=this._document.getLineLength(b),f=this._indentUtilities.getIndentForLineNumber(b-2);this._document.insertText("\n",b,d+1);this._document.insertText(this._END_STRING,b+1,1);0<f&&this._indentUtilities.changeLineIndent(b,f);this._tokenSpecificFormat(b,c,d,f,a)},_tokenSpecificFormat:function(a,b,c,d,e){e.cursor.setLineColumn(a,
b,!0)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndEnumerationBlockSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndEnumerationBlockSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.actionservice","matlab.tokens","rtc.indentutilities"]}},createInstance:function(d,c,b,a,e){return new g(d,
c,b,a,e)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndEnumerationBlockSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","MW/rtc/plugins/smartformatting/abstract/BlockSmartFormatter","MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenConstants","MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenUtilities"],function(h,e,g,d,c){return h(g,{SMART_FORMATTER_ID:"automaticcoding_endenumerationblock",_TARGET_REGEXP:c.getTokenValueById(d.TOKENS.ENUMERATION),
constructor:function(b,a,c,d,e){this._internalDocument=b;this._document=a;this._actionService=c;this._indentUtilities=e;this._tokenizerService=d;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndEventsBlockSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndEventsBlockSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument",
"rtc.document","rtc.actionservice","matlab.tokens","rtc.indentutilities"]}},createInstance:function(d,c,b,a,e){return new g(d,c,b,a,e)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndEventsBlockSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","MW/rtc/plugins/smartformatting/abstract/BlockSmartFormatter","MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenConstants","MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenUtilities"],function(h,e,
g,d,c){return h(g,{SMART_FORMATTER_ID:"automaticcoding_endeventsblock",_TARGET_REGEXP:c.getTokenValueById(d.TOKENS.EVENTS),constructor:function(b,a,c,d,e){this._internalDocument=b;this._document=a;this._actionService=c;this._indentUtilities=e;this._tokenizerService=d;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndForBlockSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndForBlockSmartFormatter"],
function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.actionservice","matlab.tokens","rtc.indentutilities"]}},createInstance:function(d,c,b,a,e){return new g(d,c,b,a,e)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndForBlockSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","MW/rtc/plugins/smartformatting/abstract/BlockSmartFormatter","MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenConstants",
"MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenUtilities"],function(h,e,g,d,c){return h(g,{SMART_FORMATTER_ID:"automaticcoding_endforblock",_TARGET_REGEXP:c.getTokenValueById(d.TOKENS.FOR),constructor:function(b,a,c,d,e){this._internalDocument=b;this._document=a;this._actionService=c;this._indentUtilities=e;this._tokenizerService=d;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndFunctionBlockSmartFormatterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndFunctionBlockSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.actionservice","matlab.tokens","rtc.indentutilities"]}},createInstance:function(d,c,b,a,e){return new g(d,c,b,a,e)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndFunctionBlockSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities",
"MW/rtc/plugins/smartformatting/abstract/BlockSmartFormatter","MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenConstants","MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenUtilities"],function(h,e,g,d,c){return h(g,{SMART_FORMATTER_ID:"automaticcoding_endfunctionblock",_TARGET_REGEXP:c.getTokenValueById(d.TOKENS.FUNCTION),constructor:function(b,a,c,d,e){this._internalDocument=b;this._document=a;this._actionService=c;this._indentUtilities=e;this._tokenizerService=d;this._actionService.loadActions(this._getActions())}})})},
"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndIfBlockSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndIfBlockSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.actionservice","matlab.tokens","rtc.indentutilities"]}},createInstance:function(d,c,b,a,e){return new g(d,c,b,a,e)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndIfBlockSmartFormatter":function(){define(["dojo/_base/declare",
"MW/rtc/model/CodeUtilities","MW/rtc/plugins/smartformatting/abstract/BlockSmartFormatter","MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenConstants","MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenUtilities"],function(h,e,g,d,c){return h(g,{SMART_FORMATTER_ID:"automaticcoding_endifblock",_TARGET_REGEXP:c.getTokenValueById(d.TOKENS.IF),constructor:function(b,a,c,d,e){this._internalDocument=b;this._document=a;this._actionService=c;this._indentUtilities=e;this._tokenizerService=d;this._actionService.loadActions(this._getActions())}})})},
"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndMethodsBlockSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndMethodsBlockSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.actionservice","matlab.tokens","rtc.indentutilities"]}},createInstance:function(d,c,b,a,e){return new g(d,c,b,a,e)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndMethodsBlockSmartFormatter":function(){define(["dojo/_base/declare",
"MW/rtc/model/CodeUtilities","MW/rtc/plugins/smartformatting/abstract/BlockSmartFormatter","MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenConstants","MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenUtilities"],function(h,e,g,d,c){return h(g,{SMART_FORMATTER_ID:"automaticcoding_endmethodsblock",_TARGET_REGEXP:c.getTokenValueById(d.TOKENS.METHODS),constructor:function(b,a,c,d,e){this._internalDocument=b;this._document=a;this._actionService=c;this._indentUtilities=e;this._tokenizerService=
d;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndParforBlockSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndParforBlockSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.actionservice","matlab.tokens","rtc.indentutilities"]}},createInstance:function(d,
c,b,a,e){return new g(d,c,b,a,e)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndParforBlockSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","MW/rtc/plugins/smartformatting/abstract/BlockSmartFormatter","MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenConstants","MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenUtilities"],function(h,e,g,d,c){return h(g,{SMART_FORMATTER_ID:"automaticcoding_endparforblock",_TARGET_REGEXP:c.getTokenValueById(d.TOKENS.PARFOR),
constructor:function(b,a,c,d,e){this._internalDocument=b;this._document=a;this._actionService=c;this._indentUtilities=e;this._tokenizerService=d;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndPropertiesBlockSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndPropertiesBlockSmartFormatter"],function(h,e,g){return h(e,
{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.actionservice","matlab.tokens","rtc.indentutilities"]}},createInstance:function(d,c,b,a,e){return new g(d,c,b,a,e)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndPropertiesBlockSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","MW/rtc/plugins/smartformatting/abstract/BlockSmartFormatter","MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenConstants","MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenUtilities"],
function(h,e,g,d,c){return h(g,{SMART_FORMATTER_ID:"automaticcoding_endpropertiesblock",_TARGET_REGEXP:c.getTokenValueById(d.TOKENS.PROPERTIES),constructor:function(b,a,c,d,e){this._internalDocument=b;this._document=a;this._actionService=c;this._indentUtilities=e;this._tokenizerService=d;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndSpmdBlockSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndSpmdBlockSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.actionservice","matlab.tokens","rtc.indentutilities"]}},createInstance:function(d,c,b,a,e){return new g(d,c,b,a,e)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndSpmdBlockSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","MW/rtc/plugins/smartformatting/abstract/BlockSmartFormatter",
"MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenConstants","MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenUtilities"],function(h,e,g,d,c){return h(g,{SMART_FORMATTER_ID:"automaticcoding_endspmdblock",_TARGET_REGEXP:c.getTokenValueById(d.TOKENS.SPMD),constructor:function(b,a,c,d,e){this._internalDocument=b;this._document=a;this._actionService=c;this._indentUtilities=e;this._tokenizerService=d;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndSwitchBlockSmartFormatterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndSwitchBlockSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.actionservice","matlab.tokens","rtc.indentutilities"]}},createInstance:function(d,c,b,a,e){return new g(d,c,b,a,e)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndSwitchBlockSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities",
"MW/rtc/plugins/smartformatting/abstract/BlockSmartFormatter","MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenConstants","MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenUtilities"],function(h,e,g,d,c){return h(g,{SMART_FORMATTER_ID:"automaticcoding_endswitchblock",_TARGET_REGEXP:c.getTokenValueById(d.TOKENS.SWITCH),constructor:function(b,a,c,d,e){this._internalDocument=b;this._document=a;this._actionService=c;this._indentUtilities=e;this._tokenizerService=d;this._actionService.loadActions(this._getActions())}})})},
"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndTryBlockSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndTryBlockSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.actionservice","matlab.tokens","rtc.indentutilities"]}},createInstance:function(d,c,b,a,e){return new g(d,c,b,a,e)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndTryBlockSmartFormatter":function(){define(["dojo/_base/declare",
"MW/rtc/model/CodeUtilities","MW/rtc/plugins/smartformatting/abstract/BlockSmartFormatter","MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenConstants","MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenUtilities"],function(h,e,g,d,c){return h(g,{SMART_FORMATTER_ID:"automaticcoding_endtryblock",_TARGET_REGEXP:c.getTokenValueById(d.TOKENS.TRY),_CATCH_STRING:"catch ME",constructor:function(b,a,c,d,e){this._internalDocument=b;this._document=a;this._actionService=c;this._indentUtilities=e;this._tokenizerService=
d;this._actionService.loadActions(this._getActions())},_tokenSpecificFormat:function(b,a,c,d,e){this._document.insertText("\n\n",b,c+1);this._document.insertText(this._CATCH_STRING,b+1,1);1<a&&this._indentUtilities.changeLineIndent(b+1,a-1);0<d&&this._indentUtilities.changeLineIndent(b,d);e.cursor.setLineColumn(b,a,!0)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndWhileBlockSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndWhileBlockSmartFormatter"],
function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.actionservice","matlab.tokens","rtc.indentutilities"]}},createInstance:function(d,c,b,a,e){return new g(d,c,b,a,e)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndWhileBlockSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","MW/rtc/plugins/smartformatting/abstract/BlockSmartFormatter","MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenConstants",
"MW/rtc/plugins/language/matlab/tokenizer/MatlabTokenUtilities"],function(h,e,g,d,c){return h(g,{SMART_FORMATTER_ID:"automaticcoding_endwhileblock",_TARGET_REGEXP:c.getTokenValueById(d.TOKENS.WHILE),constructor:function(b,a,c,d,e){this._internalDocument=b;this._document=a;this._actionService=c;this._indentUtilities=e;this._tokenizerService=d;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/paragraph/MarkdownBulletedListSmartFormatterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./MarkdownBulletedListSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.document","rtc.actionservice","rtc.richtext.lists"]}},createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/paragraph/MarkdownBulletedListSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","MW/rtc/plugins/smartformatting/abstract/InlineSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],
function(h,e,g,d){return h(g,{SMART_FORMATTER_ID:"markdown_bulletedlist",_TARGET_REGEXP:/^[\*+-]\s$/,_TRIGGER_CHAR:" ",_LIST_TYPE:"unordered",constructor:function(c,b,a){this._document=c;this._actionService=b;this._list=a;this._actionService.loadActions(this._getActions())},_isTriggerPositionExpected:function(c){var b=c.triggerPos.getNode();return!e.isCodeContainer(b)&&d.isFirstLayerContainer(c.triggerPos)&&b===b.rootContainer().startNode()},_format:function(c){var b=c.target,a=b.line,d=b.line;this._list.isLineListParagraph(a-
1,this._LIST_TYPE)&&(b.line-=1,a-=1);this._list.convertLineRangeIntoList(a,d,this._LIST_TYPE);a=c.cursorPos.getLineColumn();b.left=a.column-c.cursorPos.getOffset();b.right=a.column;this._document.deleteText(b.line,b.left,b.line,b.right);return c}})})},"MW/rtc/plugins/smartformatting/abstract/InlineSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/model/DocumentUtilities","MW/rtc/plugins/smartformatting/abstract/AbstractSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormattingTriggerTypeEnum"],
function(h,e,g,d){return h(g,{_TARGET_REGEXP:void 0,_TRIGGER_CHAR:void 0,_APPLY_ONLY_STANDALONE_SEGMENT:!0,_isTriggerTypeExpected:function(c){return c.type===d.INSERT_TEXT&&c.text===this._TRIGGER_CHAR},_findAndRecordTarget:function(c){var b=this._getTextRangeForFormatting(c.cursorPos);if(!b)return!1;c.target=b;return!0},format:function(c){var b=this._document.startBlockEdit();c=this._format(c);this._document.endBlockEdit(b);return c},_format:function(c){throw Error("Unimplemented API: MW.rtc.plugins.smartformatting.InlineSmartFormatter._format");
},_getTextRangeForFormatting:function(c){var b=e.getTextRangeFromLeftToPosition(c);if(!b)return null;var a=c.getLineColumn().column,d=b.startPos.getLineColumn().column,b=b.text.substr(0,a-d),g=this._getOffsetOfTargetString(b);return 0>g?null:{line:c.getLineColumn().line,left:d+g,right:a,text:b.slice(g)}},_getOffsetOfTargetString:function(c){var b=c.search(this._TARGET_REGEXP);return 0>b?b:this._APPLY_ONLY_STANDALONE_SEGMENT&&!this._isAtStartOfSegment(c,b)?-1:b},_isAtStartOfSegment:function(c,b){return""===
c.charAt(b-1).replace(" ","")}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/paragraph/MarkdownHeadingSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./MarkdownHeadingSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.cursor","rtc.actionservice","rtc.richtext"]}},createInstance:function(d,c,b,a,e){return new g(d,c,b,a,e)}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/paragraph/MarkdownHeadingSmartFormatter":function(){define(["dojo/_base/declare",
"MW/rtc/model/DocumentUtilities","MW/rtc/plugins/richtext/ParagraphFormatsEnum","MW/rtc/plugins/smartformatting/abstract/ParagraphFormatSmartFormatter"],function(h,e,g,d){return h(d,{SMART_FORMATTER_ID:"markdown_heading",_TARGET_REGEXP:/^#{2,4}(?!#)\s*\S/,constructor:function(c,b,a,d,e){this._internalDocument=c;this._document=b;this._cursor=a;this._actionService=d;this._richText=e;this._actionService.loadActions(this._getActions())},_getTypeOfParagraph:function(c){c=e.getRangeAndTextOfTargetOnLine(this._internalDocument,
c,this._TARGET_REGEXP);c=(c?c.text:"").match(/^#{2,4}/)[0];return"###"===c?g.HEADING2:"####"===c?g.HEADING3:g.HEADING1}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/paragraph/MarkdownNumberedListSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./MarkdownNumberedListSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.document","rtc.actionservice","rtc.richtext.lists"]}},createInstance:function(d,
c,b){return new g(d,c,b)}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/paragraph/MarkdownNumberedListSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","MW/rtc/plugins/smartformatting/abstract/InlineSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],function(h,e,g,d){return h(g,{SMART_FORMATTER_ID:"markdown_numberedlist",_TARGET_REGEXP:/^[1-9][0-9]*\.\s/,_TRIGGER_CHAR:" ",_LIST_TYPE:"ordered",constructor:function(c,b,a){this._document=
c;this._actionService=b;this._list=a;this._actionService.loadActions(this._getActions())},_isTriggerPositionExpected:function(c){var b=c.triggerPos.getNode();return!e.isCodeContainer(b)&&d.isFirstLayerContainer(c.triggerPos)&&b===b.rootContainer().startNode()},_findAndRecordTarget:function(c){var b=this._getTextRangeForFormatting(c.cursorPos);if(!b||b.text.match(this._TARGET_REGEXP)[0].length+1!==c.cursorPos.getLineColumn().column)return!1;var a=this._getItemNumberFromExtractedText(b.text);if(!this._isItemNumberValidForLine(a,
b.line))return!1;c.target=b;return!0},_format:function(c){var b=c.target,a=b.line,d=b.line,e=this._getItemNumberFromExtractedText(b.text);this._canItemNumberJoinList(e,b.line-1)&&(b.line-=1,a-=1);this._list.convertLineRangeIntoList(a,d,this._LIST_TYPE);a=c.cursorPos.getLineColumn();b.left=a.column-c.cursorPos.getOffset();b.right=a.column;this._document.deleteText(b.line,b.left,b.line,b.right);return c},_getItemNumberFromExtractedText:function(c){return parseInt(c.slice(0,-2),10)},_isItemNumberValidForLine:function(c,
b){return this._canItemNumberJoinList(c,b-1)?!0:1===c},_canItemNumberJoinList:function(c,b){return this._list.isLineListParagraph(b,this._LIST_TYPE)&&c===this._list.getNumberOfItemsInList(b,this._LIST_TYPE)+1}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/paragraph/MarkdownTitleSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./MarkdownTitleSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument",
"rtc.document","rtc.cursor","rtc.actionservice","rtc.richtext"]}},createInstance:function(d,c,b,a,e){return new g(d,c,b,a,e)}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/paragraph/MarkdownTitleSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/plugins/richtext/ParagraphFormatsEnum","MW/rtc/plugins/smartformatting/abstract/ParagraphFormatSmartFormatter"],function(h,e,g){return h(g,{SMART_FORMATTER_ID:"markdown_title",_TARGET_REGEXP:/^#(?!#)\s*\S/,constructor:function(d,c,b,
a,e){this._internalDocument=d;this._document=c;this._cursor=b;this._actionService=a;this._richText=e;this._actionService.loadActions(this._getActions())},_getTypeOfParagraph:function(d){return e.TITLE}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownBold2SmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./MarkdownBold2SmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.document","rtc.actionservice",
"rtc.richtext"]}},createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownBold2SmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/plugins/smartformatting/abstract/MarkdownStyleSmartFormatter"],function(h,e){return h(e,{SMART_FORMATTER_ID:"markdown_bold2",_OPEN_CHAR:"__",_CLOSE_CHAR:"__",_TARGET_REGEXP:/\_\_(?!\s)[^\_]*[^\_\s]\_\_$/,_TARGET_STYLE:["bold"],constructor:function(e,d,c){this._document=e;this._actionService=d;
this._richText=c;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/abstract/MarkdownStyleSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/plugins/smartformatting/abstract/OpenCloseInlineSmartFormatter"],function(h,e){return h(e,{_TARGET_STYLE:[],format:function(){var e=this.inherited(arguments);this._TARGET_STYLE.forEach(function(d){e.style[d]||this._actionService.executeAction("rtc_toggle_"+d)},this);return e},_format:function(){var e=this.inherited(arguments);
e.style=this._richText.getFormatAndStyle();var d=e.target;this._TARGET_STYLE.forEach(function(c){this._richText.applyStyleInLineColumn(c,!0,d.line,d.left,d.line,d.right)},this);return e}})})},"MW/rtc/plugins/smartformatting/abstract/OpenCloseInlineSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","MW/rtc/plugins/smartformatting/abstract/InlineSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormattingTriggerTypeEnum"],function(h,e,g,d){return h(g,{_OPEN_CHAR:void 0,
_CLOSE_CHAR:void 0,_isTriggerPositionExpected:function(c){c=c.triggerPos.getNode();return!e.isCodeContainer(c)&&!e.isNonExecutableCodeContainer(c)},_isTriggerTypeExpected:function(c){return c.type===d.INSERT_TEXT&&c.text===this._CLOSE_CHAR.slice(-1)},_getTextRangeForFormatting:function(){var c=this.inherited(arguments);if(!c)return null;var b=this._OPEN_CHAR.length,a=this._CLOSE_CHAR.length;c.left+=b;c.right-=a;c.text=c.text.slice(b,-a);return c},_format:function(c){var b=c.target;this._document.deleteText(b.line,
b.right,b.line,b.right+this._CLOSE_CHAR.length);this._document.deleteText(b.line,b.left-this._OPEN_CHAR.length,b.line,b.left);b.left-=this._OPEN_CHAR.length;b.right-=this._OPEN_CHAR.length;return c}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownBoldSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./MarkdownBoldSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.document","rtc.actionservice",
"rtc.richtext"]}},createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownBoldSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/plugins/smartformatting/abstract/MarkdownStyleSmartFormatter"],function(h,e){return h(e,{SMART_FORMATTER_ID:"markdown_bold",_OPEN_CHAR:"**",_CLOSE_CHAR:"**",_TARGET_REGEXP:/\*\*(?!\s)[^\*]*[^\*\s]\*\*$/,_TARGET_STYLE:["bold"],constructor:function(e,d,c){this._document=e;this._actionService=d;this._richText=
c;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownHyperlinkLabelUrlSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./MarkdownHyperlinkLabelUrlSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.document","rtc.actionservice","rtc.richtext.hyperlink"]}},createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownHyperlinkLabelUrlSmartFormatter":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/smartformatting/abstract/OpenCloseInlineSmartFormatter"],function(h,e){return h(e,{SMART_FORMATTER_ID:"markdown_hyperlink_labelurl",_OPEN_CHAR:"[",_CLOSE_CHAR:")",_TARGET_REGEXP:/(\[(.+)\]\()(.+?)(\))$/,constructor:function(e,d,c){this._document=e;this._actionService=d;this._hyperlink=c;this._actionService.loadActions(this._getActions())},_format:function(){var e=this.inherited(arguments).target,d=e.text.split("]("),c=d[0].trim(),d=d[1].trim();this._hyperlink.applyHyperlinkInLineColumn(d,
c,e.line,e.left,e.right);return e}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownHyperlinkUrlTagSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./MarkdownHyperlinkUrlTagSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.document","rtc.actionservice","rtc.richtext.hyperlink"]}},createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownHyperlinkUrlTagSmartFormatter":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/smartformatting/abstract/OpenCloseInlineSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],function(h,e,g){return h(e,{SMART_FORMATTER_ID:"markdown_hyperlink_urltag",_OPEN_CHAR:"\x3c",_CLOSE_CHAR:"\x3e",_TARGET_REGEXP:RegExp("\x3c"+g.URL_REGEXP_STRING+"\x3e$"),constructor:function(d,c,b){this._document=d;this._actionService=c;this._hyperlink=b;this._actionService.loadActions(this._getActions())},_format:function(){var d=this.inherited(arguments).target;this._hyperlink.applyHyperlinkInLineColumn(d.text,
d.text,d.line,d.left,d.right);return d}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownItalic2SmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./MarkdownItalic2SmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.document","rtc.actionservice","rtc.richtext"]}},createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownItalic2SmartFormatter":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/smartformatting/abstract/MarkdownStyleSmartFormatter"],function(h,e){return h(e,{SMART_FORMATTER_ID:"markdown_italic2",_OPEN_CHAR:"_",_CLOSE_CHAR:"_",_TARGET_REGEXP:/\_(?!\s)[^\_]*[^\_\s]\_$/,_TARGET_STYLE:["italic"],constructor:function(e,d,c){this._document=e;this._actionService=d;this._richText=c;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownItalicBold2SmartFormatterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./MarkdownItalicBold2SmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.document","rtc.actionservice","rtc.richtext"]}},createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownItalicBold2SmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/plugins/smartformatting/abstract/MarkdownStyleSmartFormatter"],function(h,e){return h(e,{SMART_FORMATTER_ID:"markdown_italicbold2",
_OPEN_CHAR:"___",_CLOSE_CHAR:"___",_TARGET_REGEXP:/\_\_\_(?!\s)[^\_]*[^\_\s]\_\_\_$/,_TARGET_STYLE:["italic","bold"],constructor:function(e,d,c){this._document=e;this._actionService=d;this._richText=c;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownItalicBoldSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./MarkdownItalicBoldSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.document",
"rtc.actionservice","rtc.richtext"]}},createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownItalicBoldSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/plugins/smartformatting/abstract/MarkdownStyleSmartFormatter"],function(h,e){return h(e,{SMART_FORMATTER_ID:"markdown_italicbold",_OPEN_CHAR:"***",_CLOSE_CHAR:"***",_TARGET_REGEXP:/\*\*\*(?!\s)[^\*]*[^\*\s]\*\*\*$/,_TARGET_STYLE:["italic","bold"],constructor:function(e,
d,c){this._document=e;this._actionService=d;this._richText=c;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownItalicSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./MarkdownItalicSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.document","rtc.actionservice","rtc.richtext"]}},createInstance:function(d,c,b){return new g(d,c,b)}})})},
"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownItalicSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/plugins/smartformatting/abstract/MarkdownStyleSmartFormatter"],function(h,e){return h(e,{SMART_FORMATTER_ID:"markdown_italic",_OPEN_CHAR:"*",_CLOSE_CHAR:"*",_TARGET_REGEXP:/\*(?!\s)[^\*]*[^\*\s]\*$/,_TARGET_STYLE:["italic"],constructor:function(e,d,c){this._document=e;this._actionService=d;this._richText=c;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownMonospaceSmartFormatterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./MarkdownMonospaceSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.document","rtc.actionservice","rtc.richtext"]}},createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownMonospaceSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/plugins/smartformatting/abstract/MarkdownStyleSmartFormatter"],function(h,e){return h(e,{SMART_FORMATTER_ID:"markdown_monospace",
_OPEN_CHAR:"`",_CLOSE_CHAR:"`",_TARGET_REGEXP:/`(?!\s)[^`]*[^`\s]`$/,_TARGET_STYLE:["monospace"],constructor:function(e,d,c){this._document=e;this._actionService=d;this._richText=c;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/matlab/MatlabMonospaceSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./MatlabMonospaceSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.document",
"rtc.actionservice","rtc.richtext"]}},createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/plugins/smartformatting/formatter/matlab/MatlabMonospaceSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/plugins/smartformatting/abstract/MarkdownStyleSmartFormatter"],function(h,e){return h(e,{SMART_FORMATTER_ID:"matlab_monospace",_OPEN_CHAR:"|",_CLOSE_CHAR:"|",_TARGET_REGEXP:/\|(?!\s)[^\|]*[^\|\s]\|$/,_TARGET_STYLE:["monospace"],constructor:function(e,d,c){this._document=e;this._actionService=
d;this._richText=c;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/matlab/MatlabSectionBreakHeadingSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/matlab/MatlabSectionBreakHeadingSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:"rtc.internaldocument rtc.document rtc.cursor rtc.actionservice rtc.richtext rtc.code.sections.sectionbreak".split(" ")}},
createInstance:function(d,c,b,a,e,h){return new g(d,c,b,a,e,h)}})})},"MW/rtc/plugins/smartformatting/formatter/matlab/MatlabSectionBreakHeadingSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/plugins/richtext/ParagraphFormatsEnum","MW/rtc/plugins/smartformatting/abstract/ParagraphFormatSmartFormatter"],function(h,e,g){return h(g,{SMART_FORMATTER_ID:"matlab_sectionbreak_heading",_TARGET_REGEXP:/^%{2}\s+\S/,constructor:function(d,c,b,a,e,g){this._internalDocument=d;this._document=c;this._cursor=
b;this._actionService=a;this._richText=e;this._sectionBreak=g;this._actionService.loadActions(this._getActions())},_isEnabled:function(){var d=this.inherited(arguments);this._sectionBreak.canInsertSectionBreak()||(d=!1);return d},_format:function(d,c){this._sectionBreak.isLineAtStartOfSection(d)||(this._sectionBreak.insertSectionBreakAtLineColumn(d,1),d+=1);this._transformLineToParagraph(d,c)},_getTypeOfParagraph:function(d){return 1===d?e.TITLE:e.HEADING1}})})},"MW/rtc/plugins/smartformatting/formatter/matlab/MatlabSectionBreakSeparatorSmartFormatterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/matlab/MatlabSectionBreakSeparatorSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.cursor","rtc.actionservice","rtc.code.sections.sectionbreak"]}},createInstance:function(d,c,b,a,e){return new g(d,c,b,a,e)}})})},"MW/rtc/plugins/smartformatting/formatter/matlab/MatlabSectionBreakSeparatorSmartFormatter":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/smartformatting/abstract/ParagraphFormatSmartFormatter"],function(h,e){return h(e,{SMART_FORMATTER_ID:"matlab_sectionbreak_separator",_TARGET_REGEXP:/^(%{2}|-{3,}|\*{3,})\s*$/,constructor:function(e,d,c,b,a){this._internalDocument=e;this._document=d;this._cursor=c;this._actionService=b;this._sectionBreak=a;this._actionService.loadActions(this._getActions())},_isEnabled:function(){var e=this.inherited(arguments);this._sectionBreak.canInsertSectionBreak()||(e=!1);return e},_format:function(e,
d){var c=this._internalDocument.getLineNode(e-1),b=e+1;this._sectionBreak.isLineAtStartOfSection(e)?(c=c.getTextForPositioning().length+1,this._document.deleteText(e,1,e,c),this._sectionBreak.insertSectionBreakAtLineColumn(b,1)):(b=this._internalDocument.getLineNode(b-1),this._internalDocument.deleteNode(c,{node:b.startNode(),offset:0}),this._sectionBreak.insertSectionBreakAtLineColumn(e,1))}})})},"MW/rtc/plugins/smartformatting/formatter/symbol/SymbolTrademarkCopyrightSmartFormatterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./SymbolTrademarkCopyrightSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.document","rtc.actionservice"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/plugins/smartformatting/formatter/symbol/SymbolTrademarkCopyrightSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/plugins/smartformatting/abstract/OpenCloseInlineSmartFormatter"],function(h,e){var g={C:"\u00a9",R:"\u00ae",TM:"\u2122",
SM:"\u2120"};return h(e,{SMART_FORMATTER_ID:"symbol_trademark_copyright",_OPEN_CHAR:"(",_CLOSE_CHAR:")",_TARGET_REGEXP:/\((C|R|TM|SM)\)$/i,_APPLY_ONLY_STANDALONE_SEGMENT:!1,constructor:function(d,c){this._document=d;this._actionService=c;this._actionService.loadActions(this._getActions())},_format:function(){var d=this.inherited(arguments),c=d.target,b=c.text.toUpperCase();this._document.replaceText(g[b],c.line,c.left,c.line,c.right);return d}})})},"MW/rtc/plugins/smartformatting/formatter/HyperlinkSmartFormatterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/HyperlinkSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.document","rtc.actionservice","rtc.richtext.hyperlink"]}},createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/plugins/smartformatting/formatter/HyperlinkSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","MW/rtc/plugins/smartformatting/SmartFormatterUtilities","MW/rtc/plugins/smartformatting/SmartFormattingTriggerTypeEnum",
"MW/rtc/plugins/smartformatting/abstract/InlineSmartFormatter"],function(h,e,g,d,c){return h(c,{SMART_FORMATTER_ID:"hyperlink",_TARGET_REGEXP:RegExp(g.URL_REGEXP_STRING+"$"),_TRIGGER_CHAR:" ",constructor:function(b,a,c){this._document=b;this._actionService=a;this._hyperlink=c;this._actionService.loadActions(this._getActions())},_isTriggerTypeExpected:function(b){return b.type===d.INSERT_TEXT&&b.text===this._TRIGGER_CHAR||b.type===d.INSERT_BREAK},_findAndRecordTarget:function(b){var a=this._getTextRangeForFormatting(b.triggerPos);
if(!a)return!1;b.target=a;return!0},_isTriggerPositionExpected:function(b){b=b.triggerPos;if(b.isAtLeftEdge()){var a=b.getNode().previousSibling();a&&(b=a.endPosition())}a=b.getNode();return!e.isCodeContainer(a)&&!e.isNonExecutableCodeContainer(a)&&!this._hyperlink.isAtHyperlink(b)},_format:function(b){var a=b.target;this._hyperlink.applyHyperlinkInLineColumn(a.text,a.text,a.line,a.left,a.right);return b}})})},"MW/rtc/plugins/smartformatting/formatter/MarkupEquationSmartFormatterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/MarkupEquationSmartFormatter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.document","rtc.actionservice","rtc.richtext.equationcontroller"]}},createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/plugins/smartformatting/formatter/MarkupEquationSmartFormatter":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/smartformatting/abstract/OpenCloseInlineSmartFormatter"],
function(h,e,g,d){return h(d,{SMART_FORMATTER_ID:"markup_equation",_OPEN_CHAR:"$",_CLOSE_CHAR:"$",_TARGET_REGEXP:/\$(?=[^\s\$])(\S|\s(?!\$))*[^\\\s]\$$/,constructor:function(c,b,a){this._document=c;this._actionService=b;this._equation=a;this._actionService.loadActions(this._getActions());this._aspectHandles=[];this._initialize()},_convertEquationToMarkup:function(c){var b=c.getTeXString();if(!(0<=b.indexOf("\n"))){var a=this._document.createPosition(c),d=a.getLineColumn(),e=d.line,d=d.column,g=this._document.startBlockEdit();
this._document.insertText("$"+b+"$",e,d);this._equation.deleteEquation(c);this._document.endBlockEdit(g);this._document.deletePosition(a);return!0}},_format:function(){var c=this.inherited(arguments),b=c.target;this._equation.convertRangeToEquation(b.text,b.line,b.left,b.line,b.right);return c},enable:function(){this._isEnabled()||this._initialize();this.inherited(arguments)},disable:function(){this.inherited(arguments);this._aspectHandles.forEach(function(c){c.remove()});this._aspectHandles=[]},
_initialize:function(){this._aspectHandles.push(g.after(this._equation,"onDelete",e.hitch(this,"_convertEquationToMarkup"),!0))}})})},"MW/rtc/plugins/smartformatting/BackspaceUndoHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/BackspaceUndoHandler"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.document","rtc.cursor","rtc.undoredo.controller"]}},createInstance:function(d,c,b){return new g(d,
c,b)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/smartformatting/BackspaceUndoHandler":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/model/DocumentConstants"],function(h,e,g,d){return h(null,{constructor:function(c,b,a){this._document=c;this._cursor=b;this._undoRedoController=a;this._aspectHandles=[];this._cachedCursorPos=null},start:function(){this.reset();this._cachedCursorPos=this._cursor.getLineColumn();this._aspectHandles.push(g.after(this._document,
"onChange",e.hitch(this,"reset")));this._aspectHandles.push(g.after(this._cursor,"onChange",e.hitch(this,"_resetOnCursorChange")));this._aspectHandles.push(g.around(this._document,"deleteTextAtCurrentPosition",e.hitch(this,"_oneTimeUndo")))},reset:function(){this._aspectHandles.forEach(function(c){c.remove()});this._aspectHandles=[];this._cachedCursorPos=null},_resetOnCursorChange:function(){var c=this._cursor.getLineColumn();(c.line!==this._cachedCursorPos.line||c.column!==this._cachedCursorPos.column)&&
this.reset()},_oneTimeUndo:function(c){return e.hitch(this,function(b){this.reset();return b===d.BACKWARD_DELETE?(this._undoRedoController.undo(),!0):c.apply(this._document,arguments)})},destroy:function(){this.reset()}})})},"MW/rtc/plugins/smartformatting/SmartFormattingProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/SmartFormatting"],function(h,e,g){return h(e,{requires:function(){return{createInstance:"rtc.internaldocument rtc.document rtc.cursorcontroller rtc.actionservice rtc.smartformatter rtc.smartformatting.backspaceundohandler".split(" ")}},
createInstance:function(d,c,b,a,e,h){return new g(d,c,b,a,e,h)}})})},"MW/rtc/plugins/smartformatting/SmartFormatting":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/cursor/CursorUtilities MW/rtc/model/DocumentConstants MW/rtc/model/DocumentEventUtilities MW/rtc/model/PositionUtilities MW/rtc/model/Range MW/rtc/plugins/smartformatting/SmartFormattingTriggerData MW/rtc/plugins/smartformatting/SmartFormattingTriggerTypeEnum".split(" "),function(h,
e,g,d,c,b,a,f,k,l,n){return h(d,{_SMART_FORMATTING_EDIT_BLOCK_TYPE:"SmartFormattingEditBlock",constructor:function(a,b,c,d,f,g){this._internalDocument=a;this._document=b;this._cursorController=c;this._actionService=d;this._smartFormatters=f;this._backspaceUndoHandler=g;this.enable();this._actionService.loadActions([{id:"rtc_smartformatting_on",enabled:!0,callback:e.hitch(this,this.enable)},{id:"rtc_smartformatting_off",enabled:!0,callback:e.hitch(this,this.disable)}])},enable:function(){this._enabled||
(this._initialize(),this._enabled=!0)},disable:function(){this._enabled&&(this.destroy(),this._backspaceUndoHandler.reset(),this._enabled=!1,this._smartFormatters.forEach(function(a){a.disable()}))},getSmartFormattersIds:function(){return this._smartFormatters.map(function(a){return a.SMART_FORMATTER_ID})},_initialize:function(){if(!this._smartFormatters.length)return null;this.own(g.after(this._internalDocument,"onDocumentChanged",e.hitch(this,"_documentChanged"),this));this.own(g.after(this._document,
"onDirectedDeletion",e.hitch(this,"_onDelete"),!0))},_documentChanged:function(a){if(this._enabled){var c=this._cursorController.getCursors();if(!this._isSmartFormattingInvalidForDocChange(c,a)&&!(a[0]||{}).isUndoRedo)a=a.filter(function(a){a=a.type;return a===b.INSERT_TEXT||a===b.INSERT_BREAK_EVENT}),a=this._findSmartFormattersToApply(a,c),this._applySmartFormatters(a)&&this._backspaceUndoHandler.start()}},_isSmartFormattingInvalidForDocChange:function(b,c){return!c||0===c.length?!0:b.length===c.length&&
a.allEventsOfSameType(c)||2*b.length===c.length&&this._isSetOfReplacements(c)?!1:!0},_isSetOfReplacements:function(a){if(0!==a.length%2)return!1;for(var c=!0,d=0;d<a.length;d+=2){var e=a[d+1].type;if(!(a[d].type===b.DELETION_EVENT&&(e===b.INSERT_TEXT||e===b.INSERT_BREAK_EVENT))){c=!1;break}}return c},_findSmartFormattersToApply:function(a,c){var d=[];a.forEach(function(a,e){var f=c[e],g=null;switch(a.type){case b.INSERT_BREAK_EVENT:g=this._createInsertBreakTriggerData(a,f);break;case b.INSERT_TEXT:g=
this._createInsertTextTriggerData(a,f)}null!==g&&(f=this._getFirstApplicable(this._smartFormatters,g),null!==f&&d.push({triggerData:g,smartFormatter:f}))},this);return d},_createInsertBreakTriggerData:function(a,b){var c=b.getCursorPosition(),d=this._internalDocument.getPositionForLineColumn(a.startLine+1,a.column+1);return 0>=f.comparePositions(c,d)?null:l.createInsertBreakEventTriggerData(n.INSERT_BREAK,d,b)},_createInsertTextTriggerData:function(a,b){var c=b.getCursorPosition().getLineColumn(),
d=c.line,c=c.column,e=a.position.getLineColumn(),f=e.column+a.length;return!(d===e.line&&c===f)?null:l.createInsertTextEventTriggerData(n.INSERT_TEXT,a.position,a.text,b)},_applySmartFormatters:function(a){if(0!==a.length){this._enabled=!1;var b=this._document.startBlockEdit(this._SMART_FORMATTING_EDIT_BLOCK_TYPE),c=!1;a.forEach(function(a){a.smartFormatter.format(a.triggerData)&&(c=!0)},this);this._document.endBlockEdit(b);b=this._document.startBlockEdit(this._SMART_FORMATTING_EDIT_BLOCK_TYPE);a.forEach(function(a){a.smartFormatter.postFormat(a.triggerData)},
this);this._document.endBlockEdit(b);this._enabled=!0;return c}},_findSmartFormatterAndApply:function(a){var b=this._getFirstApplicable(this._smartFormatters,a);if(!b)return null;this._enabled=!1;a=b.format(a);this._enabled=!0;return a},_getFirstApplicable:function(a,b){for(var c=0;c<a.length;c+=1){var d=a[c];if(d.isApplicable(b))return d}return null},_onDelete:function(a,b){if(this._enabled){var d=this._cursorController.getCursorsWithoutSelection(),e=new k(b.startPosition,b.endPosition),d=c.getCursorAtEdgeOfRange(d,
e);if(null!==d&&(e=d.getCursorPosition(),d=l.createDeleteTriggerData(n.DELETE,e,a,b,d),this._findSmartFormatterAndApply(d)))return!0}}})})},"MW/rtc/plugins/smartformatting/SmartFormattingTriggerData":function(){define(["dojo/_base/declare"],function(h){var e=h(null,{constructor:function(e,d,c,b,a,f){this.type=e;this.triggerPos=d;this.cursorPos=f.getCursorPosition();this.text=c;this.direction=b;this.selection=a;this.cursor=f}});return{createInsertBreakEventTriggerData:function(g,d,c){return new e(g,
d,null,null,null,c)},createInsertTextEventTriggerData:function(g,d,c,b){return new e(g,d,c,null,null,b)},createDeleteTriggerData:function(g,d,c,b,a){return new e(g,d,null,c,b,a)}}})},"MW/rtc/plugins/smartformatting/settings/AutoCodingSettingManagerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./AutoCodingSettingManager"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.settings.service","rtc.actionservice"]}},createInstance:function(d,
c){return new g(d,c)}})})},"MW/rtc/plugins/smartformatting/settings/AutoCodingSettingManager":function(){define(["dojo/_base/declare","MW/rtc/plugins/smartformatting/settings/AbstractSmartFormattingSettingManager"],function(h,e){return h(e,{_MASTER_SETTING:"matlab.editor.autocoding.EnableAutoCoding",_SETTING_TO_ACTION_MAP:{"matlab.editor.autocoding.Parentheses":["_automaticcoding_roundpareninsert","_automaticcoding_roundparendelete","_automaticcoding_roundparenoverwrite"],"matlab.editor.autocoding.CurlyBraces":["_automaticcoding_curlypareninsert",
"_automaticcoding_curlyparendelete","_automaticcoding_curlyparenoverwrite"],"matlab.editor.autocoding.SquareBrackets":["_automaticcoding_squarepareninsert","_automaticcoding_squareparendelete","_automaticcoding_squareparenoverwrite"],"matlab.editor.autocoding.SingleQuotes":["_automaticcoding_singlequoteinsert","_automaticcoding_singlequotedelete","_automaticcoding_singlequoteoverwrite"],"matlab.editor.autocoding.DoubleQuotes":["_automaticcoding_doublequoteinsert","_automaticcoding_doublequotedelete",
"_automaticcoding_doublequoteoverwrite"],"matlab.editor.autocoding.Comments":["_automaticcoding_splitcomment"],"matlab.editor.autocoding.CharacterVectors":["_automaticcoding_splitsinglequotestring"],"matlab.editor.autocoding.Strings":["_automaticcoding_splitdoublequotestring"],"matlab.editor.autocoding.ControlFlows":"_automaticcoding_endifblock _automaticcoding_endforblock _automaticcoding_endwhileblock _automaticcoding_endtryblock _automaticcoding_endswitchblock _automaticcoding_endspmdblock _automaticcoding_endparforblock".split(" "),
"matlab.editor.autocoding.Definitions":"_automaticcoding_endfunctionblock _automaticcoding_endclassdefblock _automaticcoding_endpropertiesblock _automaticcoding_endmethodsblock _automaticcoding_endeventsblock _automaticcoding_endenumerationblock".split(" ")}})})},"MW/rtc/plugins/smartformatting/settings/AbstractSmartFormattingSettingManager":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,e){return h(e,{_ACTION_ID_PREFIX:"rtc_smartformatting",_ACTION_ON_SUFFIX:"_on",
_ACTION_OFF_SUFFIX:"_off",_MASTER_SETTING:null,_SETTING_TO_ACTION_MAP:null,constructor:function(e,d){this._rtcSettingService=e;this._actionService=d;this._setupSettingListeners()},_setupSettingListeners:function(){this.own(this._rtcSettingService.listenTo(this._MASTER_SETTING,this._handleMasterSettingChange.bind(this)));Object.keys(this._SETTING_TO_ACTION_MAP).forEach(function(e){this.own(this._rtcSettingService.listenTo(e,this._handleSettingChange.bind(this,e)))},this)},_handleMasterSettingChange:function(e){Object.keys(this._SETTING_TO_ACTION_MAP).forEach(function(d){var c=
e?this._ACTION_ON_SUFFIX:this._ACTION_OFF_SUFFIX;this._SETTING_TO_ACTION_MAP[d].forEach(function(b){this._actionService.executeAction(this._ACTION_ID_PREFIX+b+c)},this)},this)},_handleSettingChange:function(e,d){var c=this._SETTING_TO_ACTION_MAP[e],b=this._rtcSettingService.get(this._MASTER_SETTING,!0)&&d?this._ACTION_ON_SUFFIX:this._ACTION_OFF_SUFFIX;c.forEach(function(a){this._actionService.executeAction(this._ACTION_ID_PREFIX+a+b)},this)}})})},"MW/rtc/plugins/smartformatting/settings/AutoFormattingSettingManagerProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./AutoFormattingSettingManager"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.settings.service","rtc.actionservice"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/plugins/smartformatting/settings/AutoFormattingSettingManager":function(){define(["dojo/_base/declare","MW/rtc/plugins/smartformatting/settings/AbstractSmartFormattingSettingManager"],function(h,e){return h(e,{_MASTER_SETTING:"matlab.editor.autoformat.EnableAutoFormatting",
_SETTING_TO_ACTION_MAP:{"matlab.editor.autoformat.DollarSignForLatex":["_markup_equation"],"matlab.editor.autoformat.AngleBracketsForHyperlink":["_hyperlink"],"matlab.editor.autoformat.URLToHyperlink":["_markdown_hyperlink_urltag"],"matlab.editor.autoformat.LabelURLToHyperlink":["_markdown_hyperlink_labelurl"],"matlab.editor.autoformat.TrademarkCopyrightSymbol":["_symbol_trademark_copyright"],"matlab.editor.autoformat.AsteriskForItalicAndBold":["_markdown_italic","_markdown_bold","_markdown_italicbold"],
"matlab.editor.autoformat.UnderscoreForItalicAndBold":["_markdown_italic2","_markdown_bold2","_markdown_italicbold2"],"matlab.editor.autoformat.BacktickAndBarForMonospace":["_markdown_monospace","_matlab_monospace"],"matlab.editor.autoformat.HashtagForTitle":["_markdown_title"],"matlab.editor.autoformat.DoubleHashtagForHeading":["_markdown_heading"],"matlab.editor.autoformat.AutomaticBulletedList":["_markdown_bulletedlist"],"matlab.editor.autoformat.AutomaticNumberedList":["_markdown_numberedlist"],
"matlab.editor.autoformat.SectionBreak":["_matlab_sectionbreak_separator"],"matlab.editor.autoformat.SectionBreakAndHeading":["_matlab_sectionbreak_heading"]}})})},"MW/rtc/plugins/smarttab/SmartTabProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/smarttab/SmartTab","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{requires:function(){return{createInstance:["rtc.actionservice","rtc.cursor","rtc.document"]}},createInstance:function(d,c,b){return new e(d,c,b)},destroyInstance:function(d){d.destroy()}})})},
"MW/rtc/plugins/smarttab/SmartTab":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/model/DocumentUtilities"],function(h,e,g){return h(null,{constructor:function(d,c,b){this._actionService=d;this._cursor=c;this._document=b;d=[{id:"rtc_smart_tab",enabled:!0,key:"tab",callback:e.hitch(this,"_doSmartTab")}];this._actionService.loadActions(d)},_doSmartTab:function(){if(this._cursor.hasSelection())return!1;var d=this._cursor.getPosition(),c=g.DEFAULT_TAB_STRING.length,d=g.getWhitespaceStringOfLength(c-
d.column%c);this._document.insertTextAtCurrentPosition(d);return!0},destroy:function(){}})})},"MW/rtc/plugins/statusactionbar/decorators/SectionsDecoratorProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/statusactionbar/decorators/SectionsDecorator"],function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.code.sections.model","margin.execution.sectionsdecorator.utilities","margin.statusactionbar.evaluation"]}},
createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/plugins/statusactionbar/decorators/SectionsDecorator":function(){define("dojo/aspect dojo/dom-class dojo/dom-construct dojo/has dojo/_base/declare dojo/_base/lang MW/rtc/margin/AbstractRangeMarginDecorator MW/rtc/margin/MarginRangeDescription".split(" "),function(h,e,g,d,c,b,a,f){return c([a],{_WIDTH:10,_CURRENT_CSS_CLASS:"current",_DECORATOR_CSS_CLASS:"section-highlight",_RUN_SECTION_ACTION:"rtc_run_section",constructor:function(a,
c,d){this._sectionModel=a;this._sectionDecoratorUtilities=c;this._sectionEvaluation=d;this._divs=[];this.own(h.after(this._sectionModel,"onModelUpdated",b.hitch(this,"onUpdate")));this.own(h.after(this._sectionModel,"currentSectionChanged",b.hitch(this,"_handleCurrentSectionChanged")))},getRangeDescriptions:function(a){a=[];this._divs=[];var b=this._sectionDecoratorUtilities.getSectionNumbersInView(),c=this._sectionModel.getCurrentSectionNumber();if(-1===b.firstSectionNumber||-1===b.lastSectionNumber)return[];
for(var d=b.firstSectionNumber;d<=b.lastSectionNumber;d++){var e=this._getDescriptionForSection(d,c===d);e&&(this._divs[d]=e.div,a.push(e))}return a},_getDescriptionForSection:function(a,b){var c=g.create("div"),d=this._sectionDecoratorUtilities.getDecorationClassesForSection(a);d.push(this._DECORATOR_CSS_CLASS);b&&d.push(this._CURRENT_CSS_CLASS);e.add(c,d);var h=this._sectionModel.getSection(a),d=h.start.getLine(),h=h.end.getLine();return 0>d||0>h?null:new f(c,d,h,this,!0)},_handleCurrentSectionChanged:function(){this._divs.forEach(function(a){e.remove(a,
this._CURRENT_CSS_CLASS)},this);var a=this._sectionModel.getCurrentSectionNumber();0<=a&&(a<this._divs.length&&this._divs[a])&&e.add(this._divs[a],this._CURRENT_CSS_CLASS)},handleMouseClick:function(a,b){var c=this._sectionModel.getSectionNumberForLine(b);this._sectionEvaluation.handleMouseClick(a,c)},getWidth:function(){return this._WIDTH},getPriority:function(){return 2},getId:function(){return"Sections"}})})},"MW/rtc/plugins/statusactionbar/decorators/StaleSectionsDecoratorProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/statusactionbar/decorators/StaleSectionsDecorator"],function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.code.sections.model","rtc.code.sections.stale.model","margin.execution.sectionsdecorator.utilities"]}},createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/plugins/statusactionbar/decorators/StaleSectionsDecorator":function(){define(["dojo/_base/declare","MW/rtc/plugins/statusactionbar/decorators/AbstractStaleSectionsDecorator"],
function(h,e){return h(e,{_STALE_CSS_CLASS:"stale",constructor:function(e,d,c){},getPriority:function(){return 5},getId:function(){return"Stale_Sections"},_getDecorationClassesForStaleSection:function(e){e=this._sectionDecoratorUtilities.getDecorationClassesForSection(e);e.push(this._STALE_CSS_CLASS);return e}})})},"MW/rtc/plugins/statusactionbar/decorators/AbstractStaleSectionsDecorator":function(){define("dojo/aspect dojo/dom-class dojo/dom-construct dojo/_base/declare dojo/_base/lang dojo/i18n!l10n/nls/actions MW/rtc/margin/AbstractRangeMarginDecorator MW/rtc/margin/MarginRangeDescription".split(" "),
function(h,e,g,d,c,b,a,f){return d(a,{_WIDTH:10,constructor:function(a,b,d){this._sectionModel=a;this._staleSectionModel=b;this._sectionDecoratorUtilities=d;this._staleSections=[];this.own(h.after(this._staleSectionModel,"onModelUpdated",c.hitch(this,"_handleStalenessModelUpdate")));this.own(h.after(this._sectionModel,"onModelUpdated",c.hitch(this,"onUpdate")));this.onUpdate()},getRangeDescriptions:function(a){a=[];var b=this._sectionDecoratorUtilities.getSectionNumbersInView();if(-1===b.firstSectionNumber||
-1===b.lastSectionNumber)return[];for(var c=b.firstSectionNumber;c<=b.lastSectionNumber;c++)if(this._staleSectionModel.isSectionStale(c)){var d=g.create("div");e.add(d,this._getDecorationClassesForStaleSection(c));var h=this._sectionModel.getSection(c),q=h.start.getLine(),h=h.end.getLine();0<q&&0<h&&(d=new f(d,q,h,this,!0),a.push(d))}return a},_handleStalenessModelUpdate:function(){var a=!1,b=this._sectionModel.getSections().map(function(a,b){return this._staleSectionModel.isSectionStale(b)},this),
a=b.length!==this._staleSections.length?!0:b.some(function(a,b){return a!==this._staleSections[b]},this);this._staleSections=b;if(a)this.onUpdate()},getWidth:function(){return this._WIDTH},_getDecorationClassesForStaleSection:function(a){}})})},"MW/rtc/plugins/statusactionbar/decorators/StaleSectionsBackgroundDecoratorProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/statusactionbar/decorators/StaleSectionsBackgroundDecorator"],function(h,e,g){return h(e,
{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.code.sections.model","rtc.code.sections.stale.model","margin.execution.sectionsdecorator.utilities"]}},createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/plugins/statusactionbar/decorators/StaleSectionsBackgroundDecorator":function(){define(["dojo/_base/declare","MW/rtc/plugins/statusactionbar/decorators/AbstractStaleSectionsDecorator"],function(h,e){return h(e,{_STALE_BACKGROUND_CSS_CLASS:"stale-background",
constructor:function(e,d,c){},getPriority:function(){return 1},getId:function(){return"Stale_Sections_Background"},_getDecorationClassesForStaleSection:function(e){e=this._sectionDecoratorUtilities.getDecorationClassesForSection(e);e.push(this._STALE_BACKGROUND_CSS_CLASS);return e}})})},"MW/rtc/plugins/statusactionbar/evaluation/StatusActionBarEvaluationProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/statusactionbar/evaluation/StatusActionBarEvaluation"],
function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.actionservice","rtc.cursorcontroller","rtc.code.sections.model","rtc.code.sections.stale.model","rtc.code.matlabfiletype"]}},createInstance:function(d,c,b,a,e){return new g(d,c,b,a,e)}})})},"MW/rtc/plugins/statusactionbar/evaluation/StatusActionBarEvaluation":function(){define(["dojo/mouse","dojo/_base/declare"],function(h,e){return e(null,{constructor:function(e,d,c,b,a){this._actionService=
e;this._cursorController=d;this._sectionModel=c;this._staleSectionModel=b;this._fileTypeService=a},canBeEvaluated:function(e){var d=this._sectionModel.getCurrentSectionNumber()===e,c=this._staleSectionModel.isSectionStale(e);e=!!this._sectionModel.getSection(e).localFunctions;var b=this._fileTypeService.isFunction()||this._fileTypeService.isClass();return(d||c)&&!(e||b)},handleMouseClick:function(e,d){if(h.isLeft(e)){var c=this.canBeEvaluated(d);this._sectionModel.getCurrentSectionNumber()!==d&&this._cursorController.setCursorToEvent(e);
c&&this._actionService.executeAction("rtc_run_section")}},handleMouseDown:function(e,d){e.stopPropagation()},handleMouseUp:function(e,d){e.stopPropagation()}})})},"MW/rtc/plugins/statusactionbar/decorators/SectionBreakLineMarginDecoratorProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/statusactionbar/decorators/SectionBreakLineMarginDecorator"],function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],
createInstance:["rtc.code.sections.model"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/statusactionbar/decorators/SectionBreakLineMarginDecorator":function(){define("dojo/aspect dojo/dom-class dojo/dom-construct dojo/_base/declare dojo/_base/lang MW/rtc/margin/AbstractLineMarginDecorator".split(" "),function(h,e,g,d,c,b){return d(b,{_WIDTH:8,_ACTIVE_SECTION_CSS_CLASS:"active",_SECTION_BREAK_CSS_CLASS:"sectionBreakLineMarginDiv",constructor:function(a){this._sectionModel=a;this.own(h.after(this._sectionModel,
"onModelUpdated",c.hitch(this,"_handleSectionsUpdated")));this.own(h.after(this._sectionModel,"currentSectionChanged",c.hitch(this,"_handleSectionsUpdated")))},_handleSectionsUpdated:function(){this.onUpdate()},hasLayerForLineNumber:function(a,b){return!this._sectionModel.getSectionForLine(a)},createDecorationForLineNumber:function(a,b){var c=g.create("div"),d=this._sectionModel.getSectionForLine(a+1);(d===this._sectionModel.getCurrentSection()||d===this._sectionModel.getNextSection())&&e.add(c,this._ACTIVE_SECTION_CSS_CLASS);
e.add(c,this._SECTION_BREAK_CSS_CLASS);return c},getWidth:function(){return this._WIDTH}})})},"MW/rtc/plugins/statusactionbar/SectionDecoratorUtilitiesProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/statusactionbar/SectionDecoratorUtilities"],function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.code.sections.model","rtc.code.matlabfiletype","rtc.view","rtc.code.sections.view.containerutility"]}},
createInstance:function(d,c,b,a){return new g(d,c,b,a)}})})},"MW/rtc/plugins/statusactionbar/SectionDecoratorUtilities":function(){define(["dojo/aspect","dojo/dom-class","dojo/dom-construct","dojo/has","dojo/_base/declare"],function(h,e,g,d,c){return c(null,{_SECTION_CSS_CLASS:"section",_ONLY_SECTION_CSS_CLASS:"only",_FUNCTION_SECTION:"function",_FIRST_SECTION_CSS_CLASS:"first",_LAST_SECTION_CSS_CLASS:"last",constructor:function(b,a,c,d){this._sectionModel=b;this._fileTypeService=a;this._view=c;this._sectionContainerUtilities=
d},getDecorationClassesForSection:function(b){var a=[this._SECTION_CSS_CLASS],c=this._sectionModel.getSections().length;if(0>b||b>=c)return[];var d=0===b,e=b===c-1,c=1===c,g=this._fileTypeService.isFunction()||this._fileTypeService.isClass();b=!!this._sectionModel.getSection(b).localFunctions;d&&a.push(this._FIRST_SECTION_CSS_CLASS);e&&a.push(this._LAST_SECTION_CSS_CLASS);c&&a.push(this._ONLY_SECTION_CSS_CLASS);(g||b)&&a.push(this._FUNCTION_SECTION);return a},getSectionNumbersInView:function(){var b=
this._view.getDomTargetPosition(),a=b.scrollTop,c=this._sectionContainerUtilities.getClosestSectionNumberByCoordinate({y:a});this._sectionModel.getSection(c)||(c=-1);b=this._sectionContainerUtilities.getClosestSectionNumberByCoordinate({y:a+b.clientHeight});this._sectionModel.getSection(b)||(b=-1);return{firstSectionNumber:c,lastSectionNumber:b}}})})},"MW/rtc/plugins/statusactionbar/SectionRangeMarginExpansionHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"MW/rtc/plugins/statusactionbar/SectionRangeMarginExpansionHandler"],function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.margin.execution","rtc.code.sections.model","rtc.code.sections.view.containerutility"]}},createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/plugins/statusactionbar/SectionRangeMarginExpansionHandler":function(){define(["dojo/_base/declare","MW/rtc/margin/AbstractRangeMarginExpansionHandler"],
function(h,e){return h(e,{constructor:function(e,d,c){this._executionMargin=e;this._sectionModel=d;this._sectionContainerUtil=c;this._executionMargin.setExpansionHandler(this)},calculateUpdatedDivDimensions:function(e,d,c){d-=1;c-=1;var b=this._sectionModel.getSectionForLine(d),a=this._sectionModel.getSectionForLine(c);if(!b||!a)return e;b=b.start.getLine()-1===d;a=a.end.getLine()-1===c;b&&(d=this._getSectionDimensionsForLine(d),e.height+=e.top-d.top,e.top=d.top);a&&(d=this._getSectionDimensionsForLine(c),
e.height+=d.top+d.height-(e.top+e.height));return e},_getSectionDimensionsForLine:function(e){e=this._sectionModel.getSectionNumberForLine(e);return this._sectionContainerUtil.getSectionDimensions(e)},dispose:function(){this.inherited(arguments);this._executionMargin.removeExpansionHandler(this)}})})},"MW/rtc/margin/AbstractRangeMarginExpansionHandler":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,e){return h(e,{calculateUpdatedDivDimensions:function(e,d,c){throw Error("Unimplemented API: MW.rtc.margin.AbstractMarginRangeExpansionHandler.getDivDimensions");
}})})},"MW/rtc/plugins/statusbar/StatusBarRequestHandlerProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/statusbar/StatusBarRequestHandler"],function(h,e,g,d){return h(g,{requires:function(){return{createInstance:["rtc.id","rtc.cursor","rtc.linenumberservice","rtc.editordataservice"]}},createInstance:function(c,b,a,e){return new d(c,b,a,e)}})})},"MW/rtc/plugins/statusbar/StatusBarRequestHandler":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin"],function(h,e,g,d){return h(d,{_FEATURE_ID:"rtc.statusbar",constructor:function(c,b,a,d){this._editorId=c;this._cursor=b;this._editorDataService=d;this._lineNumberService=a;this.own(g.after(this._cursor,"onChange",e.hitch(this,"_handleCursorChange")))},_handleCursorChange:function(){var c=this._cursor.getLineColumn();this._editorDataService.request(this._FEATURE_ID,{line:c.line,codeline:this._lineNumberService.getCodeLineNumberFromLineNumber(c.line-
1),column:c.column,editorId:this._editorId}).then(e.hitch(this,function(b){!0==b.resendRequest&&this._handleCursorChange()}),function(){})}})})},"MW/rtc/plugins/sections/SectionsRequestHandlerProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/sections/SectionsRequestHandler"],function(h,e,g,d){return h(g,{requires:function(){return{createInstance:["rtc.id","rtc.internaldocument","rtc.editordataservice","rtc.code.sections.model"]}},
createInstance:function(c,b,a,e){return new d(c,b,a,e)}})})},"MW/rtc/plugins/sections/SectionsRequestHandler":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin","MW/rtc/plugins/richtext/HeadingUtilities"],function(h,e,g,d,c){return h(d,{_FEATURE_ID:"rtc.dataservice.sections",_LABEL:"label",_LINE:"line",_COLUMN:"column",_EDITOR_ID:"editorId",_SECTIONS:"sections",constructor:function(b,a,c,d){this._editorId=b;this._internalDocument=a;this._editorDataService=
c;this._sectionsModel=d;this.own(g.after(this._internalDocument,"onDocumentChanged",e.hitch(this,"_handleDocumentChange")));this.own(g.after(this._internalDocument,"onDocumentReset",e.hitch(this,"_handleDocumentChange")))},_handleDocumentChange:function(){var b={};b[this._EDITOR_ID]=this._editorId;var a=this._sectionsModel.getSections();b[this._SECTIONS]=this._reducedSectionsArray(a);this._editorDataService.request(this._FEATURE_ID,b)},_reducedSectionsArray:function(b){b=b.map(function(a){return this._getParsedSectionData(a.start.node,
a.end.node)},this);return 0<b.length?b:null},_getParsedSectionData:function(b,a){for(var d="",e=1,g=b;g;){if(!g.isEmpty()||g===a){c.isHeadingNode(g)&&(d=g.getText());e=this._internalDocument.getLineNumber(g)+1;break}g=g.nextSibling()}g={};g[this._LABEL]=d;g[this._LINE]=e;g[this._COLUMN]=0;return g}})})},"MW/rtc/plugins/functions/FunctionsRequestHandlerProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/functions/FunctionsRequestHandler"],
function(h,e,g,d){return h(g,{requires:function(){return{createInstance:["rtc.id","rtc.editordataservice","rtc.functionservice"]}},createInstance:function(c,b,a){return new d(c,b,a)}})})},"MW/rtc/plugins/functions/FunctionsRequestHandler":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin","MW/rtc/plugins/goto/GotoUtilities"],function(h,e,g,d,c){return h(d,{_FEATURE_ID:"rtc.dataservice.functions",_LABEL:"label",_LINE:"line",_COLUMN:"column",_EDITOR_ID:"editorId",
_FUNCTIONS:"functions",constructor:function(b,a,c){this._editorId=b;this._editorDataService=a;this._functionService=c;this.own(g.after(this._functionService,"onUpdate",e.hitch(this,"_handleFunctionsChange")))},_handleFunctionsChange:function(){var b={};b[this._EDITOR_ID]=this._editorId;b[this._FUNCTIONS]=this._getResponseFunctionsArray(!0,!0);this._editorDataService.request(this._FEATURE_ID,b)},_getResponseFunctionsArray:function(b,a){b=!1!==b;a=!1!==a;var d=this._functionService.getAllFunctionDeclarations();
if(1>d.length)return null;a=a&&0<this._functionService.getTopLevelFunctionInfo().length;b&&(d=c.sortFunctionDeclarations(d,a));return d.map(function(a){var b={};a=a._data;b[this._LABEL]=a.functionName;b[this._LINE]=a.startLine;b[this._COLUMN]=a.startColumn;return b},this)}})})},"MW/rtc/plugins/sectionbreak/SectionBreakProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/sectionbreak/SectionBreak"],function(h,e,g){return h(e,{requires:function(){return{createInstance:"rtc.internaldocument rtc.document rtc.view rtc.cursor rtc.actionservice rtc.code.sections.model rtc.code.sections.contributor.sectionbreak rtc.code.matlabfiletype".split(" ")}},
createInstance:function(d,c,b,a,e,h,l,n){return new g(d,c,b,a,e,h,n)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/sectionbreak/SectionBreak":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/i18n!l10n/nls/actions mw-log/Log MW/rtc/abstract/AbstractPlugin MW/rtc/model/CodeUtilities MW/rtc/model/DocumentEventUtilities MW/rtc/model/DocumentUtilities MW/rtc/model/events/DeletionEvent MW/rtc/model/events/NumberOfLinesChangedEvent MW/rtc/plugins/language/matlab/functions/FunctionAttributeConstants ./model/SectionBreakNode".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m){return h(b,{ACTION_ID:"rtc_insert_sectionbreak",_UNDOREDO_BLOCK_TYPE:"RemoveSectionBreaks",_BLOCK_TYPES_FOR_MERGE_AND_ADVANCE:["AutoIndent"],constructor:function(a,b,c,f,h,k,l){this._internalDocument=a;this._document=b;this._cursor=f;this._actionService=h;this._sectionModel=k;this._fileTypeService=l;this._actionService.loadActions([{id:this.ACTION_ID,key:"ctrl_alt_enter",platformKey:{mac:"meta_alt_enter"},enabled:!0,contextMenuGroup:"CodeSections",description:d.insertSectionLabel,
callback:e.hitch(this,"_insertSectionBreakAtCursor")}]);this.own(g.after(this._document,"onDirectedDeletion",e.hitch(this,"_onDoDelete"),!0));this.own(g.after(this._cursor,"onChange",e.hitch(this,"_updateActions")));this.own(g.after(this._sectionModel,"currentSectionChanged",e.hitch(this,"_updateActions")));this.own(g.after(this._sectionModel,"onAttributesUpdated",e.hitch(this,"_updateActions")));this.own(g.after(this._fileTypeService,"onFileTypeChange",e.hitch(this,"_handleFileTypeChange"),!0))},
_updateActions:function(){var a=this.canInsertSectionBreak();this._actionService.updateAction(this.ACTION_ID,{enabled:a})},canInsertSectionBreak:function(){if(this._internalDocument.isReadOnly()||this._cursor.isCursorReadOnly())return!1;var a=!0,b=this._fileTypeService.isFunction()||this._fileTypeService.isClass();if(this._atLocalFunction()||b)a=!1;return a},_atLocalFunction:function(){var a=this._sectionModel.getCurrentSection(),b=this._getFirstLocalFunctionFromSection(a);if(!b)return!1;a=this._cursor.getLineColumn().line;
b=b.position.getLineColumn().line;return a>=b},_getFirstLocalFunctionFromSection:function(a){return a&&a[p.LOCAL_FUNCTION_ATTRIBUTE]&&0<a[p.LOCAL_FUNCTION_ATTRIBUTE].length?a[p.LOCAL_FUNCTION_ATTRIBUTE][0]:null},_canDeleteSectionBreak:function(a){if(this._internalDocument.isReadOnly()||this._cursor.isCursorReadOnly())return!1;var b=!0;a=1===a?this._sectionModel.getNextSection():this._sectionModel.getCurrentSection();this._canMergeWithPreviousSection(a)||(b=!1);return b},_canMergeWithPreviousSection:function(b){if(!this._getFirstLocalFunctionFromSection(b))return!0;
b=this._sectionModel.getSections().indexOf(b)-1;b=this._sectionModel.getSection(b).end.getLineColumn().line;b=this._internalDocument.getLineNode(b-1);return!a.isCodeContainer(b)},_onDoDelete:function(a,b){if(!this._cursor.hasSelection()&&!b.isLocal&&k.isAtEndOfContainer(b.startPosition,b.startNode.rootContainer())&&k.isAtStartOfContainer(b.endPosition,b.endNode.rootContainer())){var c=b.startNode.rootContainer().nextSibling();if(this._isContainerSectionBreak(c)){if(!this._canDeleteSectionBreak(a))return this._cursor.movePosition(1===
a?this._cursor.RIGHT:this._cursor.LEFT),!0;this._deleteSectionBreak(c,a);this._cursor.onUpdate(!1,!0);return!0}}},deleteSectionBreakInBetween:function(a,b){c.assert(a<=b,"Start line should be \x3c\x3d end line!");this._document.startEdit();for(var d=b;d>=a;d-=1){var e=this._internalDocument.getLineNode(d-1);this._isContainerSectionBreak(e)&&this._deleteSectionBreak(e)}this._document.endEdit();this._cursor.onUpdate()},hasSectionBreakInBetween:function(a,b){c.assert(a<=b,"Start line should be \x3c\x3d end line!");
for(var d=a;d<=b;d+=1){var e=this._internalDocument.getLineNode(d-1);if(this._isContainerSectionBreak(e))return!0}return!1},_insertAtPosition:function(a){var b=this._document.startEdit(),c=new m;a=this._internalDocument.insertAtPosition(c,a);var d=f.finalLineRangeFromEvents(a.events);b.appendUndoEvents([n.create(d.startLine,d.endLine,-1)]);b.appendRedoEvents([n.create(d.startLine,d.endLine,1)]);this._document.endEdit();return{sectionBreakNode:c,insertionResults:a}},_deleteSectionBreak:function(a,
b){var c=this._getLineRangeForSectionBreakDeletion(a,b),d=this._document.startEdit();this._internalDocument.deleteNode(a,{node:this._cursor.getNode(),offset:this._cursor.getOffset()});var e=[l.create(c.startLine,c.endLine,0)];d.appendUndoEvents([n.create(c.startLine,c.endLine,1)]);d.appendRedoEvents(e);this._document.endEdit();this._internalDocument.emitDocumentEvents(e)},_getLineRangeForSectionBreakDeletion:function(a,b){var c=this._internalDocument.getLineNumber(a),d=c;-1===b?c+=1:d-=1;return{startLine:d,
endLine:c}},_insertSectionBreakForSelection:function(a){var b=this._document.createPosition(a.startPosition.getNode(),a.startPosition.getOffset()),c=this._document.createPosition(a.endPosition.getNode(),a.endPosition.getOffset()),d=[];this._cursor.collapseSelection();var e=this._insertAtPosition(b),f=e.insertionResults,e=e.sectionBreakNode,d=d.concat(f.events);this._shouldInsertSectionBreakAtEndPosition(a,e,c)&&(f=this._insertAtPosition(c).insertionResults,d=d.concat(f.events));this._cursor.setPosition(f.insertedRange.getEndPosition());
this._document.deletePosition(b);this._document.deletePosition(c);return d},_shouldInsertSectionBreakAtEndPosition:function(a,b,c){return a.fileEndSelected&&a.startPosition.isEqualTo(a.endPosition)||this._internalDocument.getLineNumber(b)>c.getLine()-1?!1:!0},_insertSectionBreakAtCursor:function(){if(this._actionService.getAction(this.ACTION_ID).enabled&&this.canInsertSectionBreak()){this._internalDocument.onPreDocumentChanged({});this._document.startEdit();var a;if(this._cursor.hasSelection())a=
this._insertSectionBreakForSelection(this._cursor.selectionInfo());else{var b;b=this._shouldMoveCursorAfterBreak();var c=this._insertAtPosition(this._cursor.position).insertionResults;a=c.events;b=b?c.insertedRange.getEndPosition():c.insertedRange.getStartPosition();this._cursor.setPosition(b)}this._document.endEdit();this._emitInsertEvents(a)}},_shouldMoveCursorAfterBreak:function(){var a=this._cursor.position,b=a.getNode().textContainer(),c=a.getNode().rootContainer(),d=b.previousSibling()||c.previousSibling(),
b=b.nextSibling()||c.nextSibling();return k.isAtStartOfContainer(a)&&d&&!d.isInstanceOf(m)||k.isAtEndOfContainer(a)&&!b||k.isAtEndOfContainer(a)&&b.isInstanceOf(m)||!k.isAtStartOfContainer(a)&&!k.isAtEndOfContainer(a)?!0:!1},insertSectionBreakAtLineColumn:function(a,b){this._internalDocument.onPreDocumentChanged({});var c=this._internalDocument.getPositionForLineColumn(a,b),c=this._insertAtPosition(c).insertionResults;this._emitInsertEvents(c.events)},_emitInsertEvents:function(a){this._internalDocument.emitDocumentEvents(a);
this._cursor.onUpdate(!1,!0)},isLineSectionBreak:function(a){a=this._internalDocument.getLineNode(a-1);return this._isContainerSectionBreak(a)},_isContainerSectionBreak:function(a){return a instanceof m},isLineAtStartOfSection:function(a){a=this._internalDocument.getLineNode(a-1);return this._isAtStartOfSection(a)},_isAtStartOfSection:function(a){a=a.previousSibling();return!a||this._isContainerSectionBreak(a)},_handleFileTypeChange:function(){this._updateActions()}})})},"MW/rtc/plugins/sectionbreak/SectionBreakNodeConversionRulesProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./SectionBreakNodeConversionRules"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/sectionbreak/SectionBreakNodeConversionRules":function(){define(["dojo/_base/declare","MW/rtc/nodes/nodeconversionrules/base/AbstractNodeConversionRules","./model/SectionBreakNode"],function(h,e,g){return h(e,{constructor:function(){},getApplicableNodeClass:function(){return g},isConvertibleTo:function(d){return!1},
isConvertibleFrom:function(d){return!1}})})},"MW/rtc/plugins/sectionbreak/model/SectionBreakNodeContentConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./SectionBreakNodeContentConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/sectionbreak/model/SectionBreakNodeContentConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/contentconverter/base/InnerNodeContentConverter",
"./SectionBreakNode"],function(h,e,g){return h(e,{getApplicableNodeClass:function(){return g}})})},"MW/rtc/plugins/sectionbreak/view/SectionBreakCoordinateConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./SectionBreakCoordinateConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/sectionbreak/view/SectionBreakCoordinateConverter":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/sectionbreak/model/SectionBreakNode","MW/rtc/view/coordinateconverter/base/AbstractCoordinateConverter"],function(h,e,g){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return e},getPositionFromCoordinate:function(){return null},getCoordinateFromPosition:function(){return null},getDomNode:function(){return null},getClosestRect:function(){return null}})})},"MW/rtc/plugins/sectionbreak/view/SectionBreakLayouterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./SectionBreakLayouter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/sectionbreak/view/SectionBreakLayouter":function(){define(["dojo/_base/declare","MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter","../model/SectionBreakNode"],function(h,e,g){return h(e,{constructor:function(){},getApplicableNodeClass:function(){return g},
layout:function(d,c){return d.layoutInto(c,"div",{"class":"sectionBreak"})}})})},"MW/rtc/plugins/tabcompletion/CompletionHandlerProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities","./CompletionHandler","MW/rtc/core/provider/PluginProvider"],function(h,e,g,d,c){return h(c,{isApplicable:function(b){return g.isMatlabCodeFileOrBuffer(b)},requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:["rtc.focusservice",
"rtc.document","rtc.cursor","rtc.divcaret"]}},createInstance:function(b,a,c,e){return new d(b,a,c,e)}})})},"MW/rtc/plugins/tabcompletion/CompletionHandler":function(){define(["dojo/_base/declare","dojo/_base/lang","mw-log/Log","MW/rtc/model/DocumentConstants","MW/rtc/plugins/completionpopup/CompletionPopup"],function(h,e,g,d,c){return h(null,{constructor:function(b,a,d,g){this._focusService=b;this._document=a;this._cursor=d;this._startOffsetColumn=0;this._popup=new c(g.getBox(),function(){},function(){b.setFocus()},
e.hitch(this,"_charKeyTypedCallback"),e.hitch(this,"_backspaceTypedCallback"))},handleCompletions:function(b,a){this._startOffsetColumn=0;b.partialCompletion&&this._completionCallback(b.partialCompletion);var c=b.finalCompletions;if(!c||0===c.length)this._popup.showStatusPopup(this._popup.STATUS_ENUM.STATUS_NO_MATCHES);else if(c.length>a)this._popup.showStatusPopup(this._popup.STATUS_ENUM.STATUS_TOO_MANY_MATCHES);else if(1===c.length)this._completionCallback(c[0].completion);else{var d=c[0].completion.offset,
g=this._cursor.getLineColumn(),d=this._document.getLineText(g.line).substring(g.column-d-1,g.column-1);this._popup.showPopup(c,e.hitch(this,"_preCompletionCallback"),d)}},_preCompletionCallback:function(b){this._completionCallback(b.completion)},_completionCallback:function(b){var a=this._cursor.getLineColumn();a.column=a.column-b.offset-this._startOffsetColumn;var c=this._cursor.getLineColumn();this._document.replaceText(b.completionString,a.line,a.column,c.line,c.column);this._focusService.setFocus();
this._popup.removePopup()},_charKeyTypedCallback:function(b){this._document.insertTextAtCurrentPosition(b);this._startOffsetColumn+=1},_backspaceTypedCallback:function(){this._document.deleteTextAtCurrentPosition(d.BACKWARD_DELETE);this._startOffsetColumn-=1;0>this._startOffsetColumn&&this._popup.removePopup()}})})},"MW/rtc/plugins/tabcompletion/TabCompletionProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities","./TabCompletion","MW/rtc/core/provider/PluginProvider"],
function(h,e,g,d){return h(d,{isApplicable:function(c){return e.isMatlabCodeFileOrBuffer(c)},requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:["rtc.document","rtc.cursor","rtc.code.codingui.backendservice","matlab.tabcompletion.completionhandler","rtc.actionservice"]}},createInstance:function(c,b,a,d,e){return new g(c,b,a,d,e)}})})},"MW/rtc/plugins/tabcompletion/TabCompletion":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/model/CodeUtilities","mw-log/Log",
"MW/rtc/RichTextComponentFeatureEnum"],function(h,e,g,d,c){return h(null,{WORD_REGEXP:/[a-zA-Z0-9(/\\_"'-]/,_NEXT_CHARAT_REGEXP:/[a-zA-Z0-9_'"]/,_featureID:"matlab.code.tabcompletion",constructor:function(b,a,c,d,e){this._tabCompletionDataService=c;this._completionHandler=d;this._document=b;this._cursor=a;this._actionService=e;this._init()},_init:function(){var b=[{id:c.TAB_COMPLETION.TAB_COMPLETE_ACTION,enabled:!0,key:"tab",callback:e.hitch(this,this._popupActionCallback)},{id:"rtc_tab_completion_escape",
enabled:!0,key:"escape",callback:e.hitch(this,this._cancelTabCompletionRequest)}];this._actionService.loadActions(b)},_popupActionCallback:function(){if(this._actionService.getAction(c.TAB_COMPLETION.TAB_COMPLETE_ACTION).enabled)return this._popupIfValidLocation()},_cancelTabCompletionRequest:function(){this._tabCompletionDataService.isBusy()&&this._tabCompletionDataService.cancelRequest();return!1},_popupIfValidLocation:function(){if(this._shouldShowPopup()){var b=this._cursor.getLineColumn();this._tabCompletionDataService.requestMetaData(this._featureID,
e.hitch(this._completionHandler,"handleCompletions"),b);d.warn("Sending tab completion request to MATLAB.");return!0}return!1},_shouldShowPopup:function(){if(this._cursor.hasSelection()||this._cursor.isCursorReadOnly()||!g.isCodeContainer(this._cursor.getNode()))return!1;var b=this._cursor.getLineColumn(),a=this._document.getLineText(b.line);return this._isDotOrValidPartialString(a,b.column-1)},_isDotOrValidPartialString:function(b,a){d.assert(0<=a&&a<=b.length,"position "+a+" is out of bounds of text (length "+
b.length+")");if(a<b.length&&-1!==b.charAt(a).search(this._NEXT_CHARAT_REGEXP))return!1;if(0!==a&&"."===b.substring(a-1,a))return 2<a&&"..."===b.substring(a-3,a)?!1:!0;for(var c=a;0<=c;c-=1){var e=b.charAt(c-1);if(c<a)return!0;if(-1===e.search(this.WORD_REGEXP))break}return!1}})})},"MW/rtc/plugins/templates/TemplateServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/templates/TemplateService"],function(h,e,g){return h(e,{isApplicable:function(){return!0},
requires:function(){return{isApplicable:[],createInstance:["rtc.document","rtc.internaldocument","rtc.id","rtc.actionservice"]}},createInstance:function(d,c,b,a){return new g(d,c,b,a)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/templates/TemplateService":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/i18n!l10n/nls/template mw-messageservice/MessageService MW/rtc/RichTextComponentFeatureEnum".split(" "),function(h,e,g,d,c,b){return h(null,{_APPLY_TAMPLATE_NAMESPLACE:"/templateService/applyTemplate/",
TEMPLATES:{liveFunction:function(a){return{className:"RootNode",children:[{className:"RichTextParagraphNode",align:"left",children:[{className:"RichTextNode",text:d.summary}]},{className:"RichTextParagraphNode",align:"left",children:[{className:"RichTextNode",text:d.description}]},{className:"LineNode",children:[{className:"PlainTextNode",text:"function z \x3d "+a+"(x, y)"}]},{className:"LineNode",children:[{className:"PlainTextNode",text:"    z \x3d x + y;"}]},{className:"LineNode",children:[{className:"PlainTextNode",
text:"end"}]}]}}},constructor:function(a,b,d,e){this._document=a;this._internalDocument=b;this._editorId=d;this._actionService=e;c.subscribe(this._APPLY_TAMPLATE_NAMESPLACE+this._editorId,"_handleApplyTemplate",this)},_handleApplyTemplate:function(a){this.applyTemplate(a.data.type,a.data.pendingName)},applyTemplate:function(a,c){var d=this.TEMPLATES[a];d&&(this._internalDocument.deserialize(d(c)),this._actionService.updateAction(b.FORMAT_CODE.SMART_INDENT_ACTION,{enabled:!0}),this._actionService.executeAction(b.FORMAT_CODE.SMART_INDENT_ACTION),
this._actionService.updateAction(b.FORMAT_CODE.SMART_INDENT_ACTION,{enabled:!1}))},destroy:function(){c.unsubscribe(this._APPLY_TAMPLATE_NAMESPLACE+this._editorId,"_handleApplyTemplate",this)}})})},"MW/rtc/plugins/text/parenmatch/ParenMatchingPluginProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/parenmatch/ParenMatchingPlugin","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],
createInstance:["rtc.internaldocument","rtc.view","rtc.cursor","rtc.cursor.view","matlab.tokens"]}},createInstance:function(d,c,b,a,f){return new e(d,c,b,a,f)}})})},"MW/rtc/plugins/language/matlab/parenmatch/ParenMatchingPlugin":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/model/NodeUtilities MW/rtc/view/ViewUtilities ./model/Matcher ./view/ParenMatchView".split(" "),function(h,e,g,d,c,b,a,f){return h(d,{constructor:function(b,c,d,h,m){this._internalDocument=
b;this._view=c;this._cursor=d;this._cursorView=h;this._matlabTokens=m;this.own(g.after(h,"onUpdate",e.hitch(this,"_handleUpdate")));this.own(g.after(m,"onUpdate",e.hitch(this,"_handleUpdate"),!0));this._matchView=new f(c);this._matcher=new a(b,m)},_handleUpdate:function(){var a=this._cursor,b="",c=a.getPosition();a.hasSelection()?(b=a.charAtCursor(),this._matcher.isOpenOrClose(b)?a.isReversed()||(c.column-=1):b=""):(b=a.charAtCursor(-1),this._matcher.isClose(b)?c.column-=1:(b=a.charAtCursor(),this._matcher.isOpen(b)||
(b="")));this._matchView.hide();b&&this._scanAndShowAnyMatch(b,c)},_scanAndShowAnyMatch:function(a,b){this._matcher.scanLeftOrRight(a,b);this._showMatch(this._matcher.Left,this._matcher.Right)},_showMatch:function(a,b){var c=this._getViewInformation(a),d=this._getViewInformation(b);(!a||!b||c&&d)&&this._matchView.show(c,d)},_getViewInformation:function(a){if(!a)return null;var b=this._getCoordinateForParen(a);b&&a.mismatch&&(b.mismatch=!0);return b},_getCoordinateForParen:function(a){a=this._getPositionForParen(a.line,
a.column);var c=a.getNode();return b.hasViewOnlyText(c)?null:this._view.getCoordinateForPosition(a)},_getPositionForParen:function(a,b){var c=this._internalDocument.getPositionForLineColumn(a+1,b+1);if(c.isAtRightEdge()){var d=c.getNode(),e=d.nextNode();if(d!==d.textContainer().endNode()&&e.isTextNode())return e.startPosition()}return c}})})},"MW/rtc/plugins/language/matlab/parenmatch/model/Matcher":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(e,g){this.Right=
this.Left=null;this._internalDocument=e;this._matlabTokens=g;this._OPEN=["(","[","{"];this._CLOSE=[")","]","}"];this._PARENREG="(\\(|\\[|{)|(\\)|\\]|})"},scanLeftOrRight:function(e,g){var d=this._OPEN.indexOf(e),c=0;this.Right=this.Left=null;0<=d?(c=1,this.Left=g,this.Right=null):(d=this._CLOSE.indexOf(e),0<=d&&(c=-1,this.Right=g,this.Left=null));0!==c&&this._scan(g,c,d)},_scan:function(e,g,d){e=this._scanDocument(e,g,d);if(0<g){if(e&&(this.Right=e),this.Left&&(!e||e.mismatch))this.Left.mismatch=
!0}else if(e&&(this.Left=e),this.Right&&(!e||e.mismatch))this.Right.mismatch=!0},_scanDocument:function(e,g,d){var c=e.line;e=e.column;var b="",a=(g=1===g)?-1:0,f=!1,h=this._internalDocument.getLineNode(c);if(!h||this._isInStringOrComment(c,e))return this.Right=this.Left=null;for(var l=h.getTextForPositioning(),n=this._internalDocument.containerType(h);;){var b=g?l.substring(e):l.substring(0,e),p=RegExp(this._PARENREG,"g"),m=p.exec(b);if(!g&&m)for(var q=m;q;)(q=p.exec(b))&&(m=q);if(m){if(!this._isInStringOrComment(c,
g?e+m.index:m.index))if(m[1]){if(!g&&0===a)return d!==this._OPEN.indexOf(m[0])&&(f=!0),{line:c,column:m.index,mismatch:f};a+=1}else{if(g&&0===a)return d!==this._CLOSE.indexOf(m[0])&&(f=!0),{line:c,column:e+m.index,mismatch:f};a-=1}e=g?e+m.index+m[0].length:m.index}if(g){if(!m||e>=l.length)c+=1,e=0}else if(!m||0===e)c-=1,e=-1;if(0>=e){for(;;){h=this._internalDocument.getLineNode(c);if(!h)return null;if(n===this._internalDocument.containerType(h))break;c+=g?1:-1}l=h.getTextForPositioning();0>e&&(e=
l.length)}}return null},isOpenOrClose:function(e){return this.isOpen(e)||this.isClose(e)},isOpen:function(e){return 0<=this._OPEN.indexOf(e)},isClose:function(e){return 0<=this._CLOSE.indexOf(e)},_isInStringOrComment:function(e,g){return this._matlabTokens.isInString(e,g)||this._matlabTokens.isInComment(e,g)}})})},"MW/rtc/plugins/language/matlab/parenmatch/view/ParenMatchView":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-class","dojo/dom-style"],function(h,e,g,d){return h(null,
{constructor:function(c){this._layer=e.create("div",{"class":"parenMatchLayer"});c.addLayer(this._layer);this._parenMatchLeft=e.create("div",{"class":"parenMatch"},this._layer);this._parenMatchRight=e.create("div",{"class":"parenMatch"},this._layer);this._hideTimer=null},show:function(c,b){this._clearHideTimer();c?this._showOne(this._parenMatchLeft,{left:c.x,top:c.y+c.height-2,width:c.width},c):this._hideOne(this._parenMatchLeft);b?this._showOne(this._parenMatchRight,{left:b.x,top:b.y+b.height-2,
width:b.width},b):this._hideOne(this._parenMatchRight);this._startHideTimer()},hide:function(){this._clearHideTimer();this._hideOne(this._parenMatchLeft);g.remove(this._parenMatchLeft,"parenMismatch");this._hideOne(this._parenMatchRight);g.remove(this._parenMatchRight,"parenMismatch")},_showOne:function(c,b,a){d.set(c,{display:"block",top:b.top+"px",left:b.left+"px",width:b.width+"px"});a.mismatch&&g.add(c,"parenMismatch")},_hideOne:function(c){d.set(c,{display:"none"})},_clearHideTimer:function(){this._hideTimer&&
(clearTimeout(this._hideTimer),this._hideTimer=null)},_startHideTimer:function(){var c=this;this._hideTimer=setTimeout(function(){c.hide()},1E3)}})})},"MW/rtc/plugins/language/clike/clikeautoindent/CLikeAutoIndentProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/language/clike/clikeautoindent/CLikeAutoIndent"],function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.document",
"rtc.internaldocument","rtc.cliketokenizer"]}},createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/plugins/language/clike/clikeautoindent/CLikeAutoIndent":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin","MW/rtc/model/DocumentConstants"],function(h,e,g,d,c){return h(d,{constructor:function(b,a,c){this._document=b;this._internalDocument=a;this._externalTokenizer=c;this.own(g.after(this._internalDocument,"onDocumentChanged",e.hitch(this,
"_handleDocumentChanged"),!0))},_handleDocumentChanged:function(b){b=b[0];var a;if(b.type===c.INSERT_BREAK_EVENT){if(a=this._document.getLineText(b.endLine+1),b=this._externalTokenizer.getIndentAmountForNewLine(b.endLine,a))b=Array(b+1).join(" "),this._document.insertTextAtCurrentPosition(b)}else if(b.type===c.INSERT_TEXT){a=this._document.getLineText(b.endLine+1);var d=a.trim();if(d){var e=a.length-d.length,g=this._externalTokenizer.getIndentAmountIfSnap(b.endLine,d);void 0!==g&&e!==g&&(d=Array(g+
1).join(" ")+d,this._document.replaceText(d,b.endLine+1,1,b.endLine+1,a.length+1))}}}})})},"MW/rtc/plugins/language/clike/clikesyntaxhighlighter/CLikeSyntaxHighlighterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/language/clike/clikesyntaxhighlighter/CLikeSyntaxHighlighter"],function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.view.decoration","rtc.internaldocument","rtc.cliketokenizer"]}},
createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/plugins/language/clike/clikesyntaxhighlighter/CLikeSyntaxHighlighter":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/plugins/language/clike/clikesyntaxhighlighter/CLikeColorMapDefaults MW/rtc/plugins/syntaxhighlighter/AbstractSyntaxHighlighter MW/rtc/plugins/syntaxhighlighter/ColorRange".split(" "),function(h,e,g,d,c,b,a){return h(b,{constructor:function(a,b,c){this._internalDocument=
b;this._externalTokenizer=c;this._aspectHandles=[];this._aspectHandles.push(g.after(this._externalTokenizer,"onBeginningOfLine",e.hitch(this,"_clearLineDecoration"),!0));this._aspectHandles.push(g.after(this._externalTokenizer,"onUpdateTokens",e.hitch(this,"_colorTokens"),!0))},_colorTokens:function(b){for(var c=[],d=[],e=[],g=0,h=b.length;g<h;g++){var q=b[g].startRow+1;0>e.indexOf(q)&&(e.push(q),q=this._internalDocument.getRangeForLine(q),d.push(q));var q=this._internalDocument.getRangeForLineColumn(b[g].startRow+
1,b[g].startColumn+1,b[g].startRow+1,b[g].startColumn+1+b[g].token.length),r=this._getColorFromTokenType(b[g].style);"rgb(0,0,0)"!==r&&c.push(new a(q,r))}this._updateHighlighting(d,c)},_getColorFromTokenType:function(a){return a?"rgb("+c.tokenTypesToColors[a].r+","+c.tokenTypesToColors[a].g+","+c.tokenTypesToColors[a].b+")":"rgb(0,0,0)"},_clearLineDecoration:function(a){a=this._internalDocument.getRangeForLine(a+1);this._decorator.clearRange(a)}})})},"MW/rtc/plugins/language/clike/clikesyntaxhighlighter/CLikeColorMapDefaults":function(){define([],
function(){return{tokenTypesToColors:{meta:{r:178,g:140,b:0},keyword:{r:0,g:0,b:255},"variable-3":{r:0,g:0,b:255},atom:{r:0,g:0,b:255},error:{r:255,g:0,b:0},comment:{r:34,g:139,b:34},string:{r:160,g:32,b:240},"string-2":{r:255,g:64,b:255},number:{r:0,g:0,b:0},def:{r:0,g:0,b:0},variable:{r:0,g:0,b:0},"variable-2":{r:0,g:0,b:0},property:{r:0,g:0,b:0},operator:{r:0,g:0,b:0},qualifier:{r:0,g:0,b:0},builtin:{r:0,g:0,b:0},bracket:{r:0,g:0,b:0},tag:{r:0,g:0,b:0},attribute:{r:0,g:0,b:0},link:{r:0,g:0,b:0}}}})},
"MW/rtc/plugins/syntaxhighlighter/AbstractSyntaxHighlighter":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,e){return h(e,{constructor:function(e){this._decorator=e.createDecorator()},_updateHighlighting:function(e,d){e.forEach(function(c){this._decorator.clearRange(c)},this);d.forEach(function(c){this._decorator.setStyle(c.getRange(),"color",c.getColor())},this);this._decorator.applyChanges()}})})},"MW/rtc/plugins/syntaxhighlighter/ColorRange":function(){define(["dojo/_base/declare"],
function(h){return h(null,{constructor:function(e,g){this._range=e;this._color=g},getRange:function(){return this._range},getColor:function(){return this._color}})})},"MW/rtc/plugins/language/clike/cliketokenizer/CLikeTokenizerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/language/clike/cliketokenizer/CLikeTokenizer"],function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.document",
"rtc.internaldocument","rtc.internal.language"]}},createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/plugins/language/clike/cliketokenizer/CLikeTokenizer":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/model/DocumentEventUtilities MW/rtc/plugins/language/clike/cliketokenizer/CodeMirror MW/rtc/plugins/language/clike/cliketokenizer/StringStream MW/rtc/plugins/language/clike/cliketokenizer/modes/clike MW/rtc/language/LanguageConstants mw-utils/Utils".split(" "),
function(h,e,g,d,c,b,a,f,k,l){return h(d,{constructor:function(a,c,d){this._internalDocument=c;this._document=a;this.own(g.after(this._internalDocument,"onDocumentChanged",e.hitch(this,"_handleDocumentChangeEvent"),!0));this.own(g.after(this._internalDocument,"onDocumentReset",e.hitch(this,"_handleDocumentRestartEvent"),!0));this._stateCache=[];this._tokenCache=[];this._tokensToUpdate=[];this._codemirror=new b;a={name:"text/plain"};switch(d.getLanguage()){case k.DEFAULT_SUPPORTED_LANGUAGES.CPP:new f(this._codemirror);
a={name:"text/x-c++src"};break;case k.DEFAULT_SUPPORTED_LANGUAGES.C:new f(this._codemirror),a={name:"text/x-c"}}this._mode=this._codemirror.getMode({indentUnit:4},a)},onUpdateTokens:function(a){},onBeginningOfLine:function(a){},getIndentAmountForNewLine:function(a,b){return this._mode.indent(this._stateCache[a],b)},getIndentAmountIfSnap:function(a,b){if(this._mode.electricInput&&this._mode.electricInput.test(b))return this.getIndentAmountForNewLine(a,b)},_handleDocumentChangeEvent:function(a){var b=
c.isMultiLineEvent(a,this._internalDocument),d=c.getCoalescedDocumentMutations(a);a=Math.min(d[0].getFromRange().start,d[0].getToRange().start);d=Math.max(d[d.length-1].getFromRange().end,d[d.length-1].getToRange().end);this._runMode(this._document.getCodeText(),a,d,b)},_handleDocumentRestartEvent:function(){var a=this._document.getCodeText();this._runMode(this._document.getCodeText(),0,a.length,!0)},_runMode:function(a,b,c,d){a=this._codemirror.splitLines(a);var e=this._stateCache[b]||this._codemirror.startState(this._mode);
this._tokensToUpdate=[];for(var f=b,g=a.length;f<g;f++){this.onBeginningOfLine(f);var h=this._parseLineForTokens(a[f],e,f);if(!this._updateTokensIfChanged(f,h))if(d){if(f>=c)break}else if(f!==b)break}if(this._tokensToUpdate.length)this.onUpdateTokens(this._tokensToUpdate)},_updateTokensIfChanged:function(a,b){var c=!this._tokenCache[a]||!l.arrayEquals(this._tokenCache[a],b);c&&(this._tokenCache[a]=b);return c},_parseLineForTokens:function(b,c,d){this._stateCache[d]=this._codemirror.copyState(this._mode,
c);var e=[];b=new a(b);!b.string&&this._mode.blankLine&&this._mode.blankLine(c);for(var f=0;!b.eol();){var g=this._mode.token(b,c);e[f]=g;this._tokensToUpdate.push({token:b.current(),style:g,startRow:d,startColumn:b.start});b.start=b.pos;f++}return e}})})},"MW/rtc/plugins/language/clike/cliketokenizer/CodeMirror":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(){this.modes={};this.mimeModes={};this.defineMIME("text/plain","null");this.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}})},
defineMode:function(e,g){2<arguments.length&&(g.dependencies=Array.prototype.slice.call(arguments,2));this.modes[e]=g},defineMIME:function(e,g){this.mimeModes[e]=g},resolveMode:function(e){"string"==typeof e&&this.mimeModes.hasOwnProperty(e)?e=this.mimeModes[e]:e&&("string"==typeof e.name&&this.mimeModes.hasOwnProperty(e.name))&&(e=this.mimeModes[e.name]);return"string"==typeof e?{name:e}:e||{name:"null"}},getMode:function(e,g){g=this.resolveMode(g);var d=this.modes[g.name];if(!d)throw Error("Unknown mode: "+
g);return d(e,g)},startState:function(e,g,d){return e.startState?e.startState(g,d):!0},splitLines:function(e){return e.split(/\r?\n|\r|\n/)},copyState:function(e,g){if(!0===g)return g;if(e.copyState)return e.copyState(g);var d={},c;for(c in g){var b=g[c];b instanceof Array&&(b=b.concat([]));d[c]=b}return d},registerGlobalHelper:Math.min,registerHelper:Math.min})})},"MW/rtc/plugins/language/clike/cliketokenizer/StringStream":function(){define(["dojo/_base/declare"],function(h){return h(null,{findIndentation:function(){for(var e=
0;" "==this.string[e];)e++;return e},constructor:function(e){this.pos=this.start=0;this.string=e;this.lineStart=0;this.indentation=this.findIndentation.bind(this)},eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||null},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var g=this.string.charAt(this.pos);if("string"==typeof e?g==e:g&&(e.test?e.test(g):e(g)))return++this.pos,
g},eatWhile:function(e){for(var g=this.pos;this.eat(e););return this.pos>g},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){e=this.string.indexOf(e,this.pos);if(-1<e)return this.pos=e,!0},backUp:function(e){this.pos-=e},column:function(){return this.start-this.lineStart},indentation:function(){return 0},match:function(e,g,d){if("string"==typeof e){var c=this.string.substr(this.pos,
e.length);if((d?c.toLowerCase():c)==(d?e.toLowerCase():e))return!1!==g&&(this.pos+=e.length),!0}else{if((e=this.string.slice(this.pos).match(e))&&0<e.index)return null;e&&!1!==g&&(this.pos+=e[0].length);return e}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,g){this.lineStart+=e;try{return g()}finally{this.lineStart-=e}}})})},"MW/rtc/plugins/language/clike/cliketokenizer/modes/clike":function(){define(["dojo/_base/declare"],function(h){function e(a,b,
c,d,e,g){this.indented=a;this.column=b;this.type=c;this.info=d;this.align=e;this.prev=g}function g(a,b,c,d){var g=a.indented;a.context&&("statement"==a.context.type&&"statement"!=c)&&(g=a.context.indented);return a.context=new e(g,b,c,d,null,a.context)}function d(a){var b=a.context.type;if(")"==b||"]"==b||"}"==b)a.indented=a.context.indented;return a.context=a.context.prev}function c(a,b,c){if("variable"==b.prevToken||"variable-3"==b.prevToken||/\S(?:[^- ]>|[*\]])\s*$|\*$/.test(a.string.slice(0,c))||
b.typeAtEndOfLine&&a.column()==a.indentation())return!0}function b(a){for(;;){if(!a||"top"==a.type)return!0;if("}"==a.type&&"namespace"!=a.prev.info)return!1;a=a.prev}}return h(null,{constructor:function(a){function f(a){var b={};a=a.split(" ");for(var c=0;c<a.length;++c)b[a[c]]=!0;return b}function h(a,b){return"function"===typeof a?a(b):a.propertyIsEnumerable(b)}function l(a,b){if(!b.startOfLine)return!1;for(var c,d=null;c=a.peek();){if("\\"==c&&a.match(/^.$/)){d=l;break}else if("/"==c&&a.match(/^\/[\/\*]/,
!1))break;else if(" "===c)break;a.next()}b.tokenize=d;return"meta"}function n(a,b){return"variable-3"==b.prevToken?"variable-3":!1}function p(a){a.eatWhile(/[\w\.']/);return"number"}function m(a,b){a.backUp(1);if(a.match(/(R|u8R|uR|UR|LR)/)){var c=a.match(/"([^\s\\()]{0,16})\(/);if(!c)return!1;b.cpp11RawStringDelim=c[1];b.tokenize=r;return r(a,b)}if(a.match(/(u8|u|U|L)/))return a.match(/["']/,!1)?"string":!1;a.next();return!1}function q(a,b){for(var c;null!=(c=a.next());)if('"'==c&&!a.eat('"')){b.tokenize=
null;break}return"string"}function r(a,b){var c=b.cpp11RawStringDelim.replace(/[^\w\s]/g,"\\$\x26");a.match(RegExp(".*?\\)"+c+'"'))?b.tokenize=null:a.skipToEnd();return"string"}function s(b,c){function d(a){if(a)for(var b in a)a.hasOwnProperty(b)&&e.push(b)}"string"==typeof b&&(b=[b]);var e=[];d(c.keywords);d(c.types);d(c.builtin);d(c.atoms);e.length&&(c.helperType=b[0],a.registerHelper("hintWords",b[0],e));for(var f=0;f<b.length;++f)a.defineMIME(b[f],c)}function t(a,b){for(var c=!1;!a.eol();){if(!c&&
a.match('"""')){b.tokenize=null;break}c="\\"==a.next()&&!c}return"string"}function u(a){return function(b,c){for(var d=!1,e,f=!1;!b.eol();){if(!a&&!d&&b.match('"')){f=!0;break}if(a&&b.match('"""')){f=!0;break}e=b.next();!d&&("$"==e&&b.match("{"))&&b.skipTo("}");d=!d&&"\\"==e&&!a}if(f||!a)c.tokenize=null;return"string"}}function v(a){return function(b,c){for(var d=!1,e,f=!1;!b.eol();){if(!d&&b.match('"')&&("single"==a||b.match('""'))){f=!0;break}if(!d&&b.match("``")){w=v(a);f=!0;break}e=b.next();d=
"single"==a&&!d&&"\\"==e}f&&(c.tokenize=null);return"string"}}a.defineMode("clike",function(f,l){function n(a,b){var c=a.next();if(T[c]){var d=T[c](a,b);if(!1!==d)return d}if('"'==c||"'"==c)return b.tokenize=m(c),b.tokenize(a,b);if(ea.test(c))return V=c,null;if(Y.test(c)){a.backUp(1);if(a.match($))return"number";a.next()}if("/"==c){if(a.eat("*"))return b.tokenize=p,p(a,b);if(a.eat("/"))return a.skipToEnd(),"comment"}if(da.test(c)){for(;!a.match(/^\/[\/*]/,!1)&&a.eat(da););return"operator"}a.eatWhile(ga);
if(R)for(;a.match(R);)a.eatWhile(ga);c=a.current();return h(t,c)?(h(N,c)&&(V="newstatement"),h(J,c)&&(aa=!0),"keyword"):h(v,c)?"variable-3":h(w,c)?(h(N,c)&&(V="newstatement"),"builtin"):h(O,c)?"atom":"variable"}function m(a){return function(b,c){for(var d=!1,e,f=!1;null!=(e=b.next());){if(e==a&&!d){f=!0;break}d=!d&&"\\"==e}if(f||!d&&!W)c.tokenize=null;return'"'==a?"string":"string-2"}}function p(a,b){for(var c=!1,d;d=a.next();){if("/"==d&&c){b.tokenize=null;break}c="*"==d}return"comment"}function q(a,
d){l.typeFirstDefinitions&&(a.eol()&&b(d.context))&&(d.typeAtEndOfLine=c(a,d,a.pos))}var r=f.indentUnit,s=l.statementIndentUnit||r,u=l.dontAlignCalls,t=l.keywords||{},v=l.types||{},w=l.builtin||{},N=l.blockKeywords||{},J=l.defKeywords||{},O=l.atoms||{},T=l.hooks||{},W=l.multiLineStrings,S=!1!==l.indentStatements,R=l.namespaceSeparator,ea=l.isPunctuationChar||/[\[\]{}\(\),;\:\.]/,Y=l.numberStart||/[\d\.]/,$=l.number||/^(?:0x[a-f\d]+|0b[01]+|(?:\d+\.?\d*|\.\d+)(?:e[-+]?\d+)?)(u|ll?|l|f)?/i,da=l.isOperatorChar||
/[+\-*&%=<>!?|\/\^~]/,ga=l.isIdentifierChar||/[\w\$_\xa1-\uffff]/,V,aa;return{startState:function(a){return{tokenize:null,context:new e((a||0)-r,0,"top",null,!1),indented:0,startOfLine:!0,prevToken:null}},token:function(a,e){var f=e.context;a.sol()&&(null==f.align&&(f.align=!1),e.indented=a.indentation(),e.startOfLine=!0);if(a.eatSpace())return q(a,e),null;V=aa=null;var h=(e.tokenize||n)(a,e);if("comment"==h||"meta"==h)return h;null==f.align&&(f.align=!0);":"==V&&(e.currentSwitchIndentAmount=e.indented+
r);";"==V&&(e.currentSwitchIndentAmount=e.indented);if(";"==V||":"==V||","==V&&a.match(/^\s*(?:\/\/.*)?$/,!1))for(;"statement"==e.context.type;)d(e);else if("{"==V)g(e,a.column(),"}");else if("["==V)g(e,a.column(),"]");else if("("==V)g(e,a.column(),")");else if("}"==V){for(;"statement"==f.type;)f=d(e);for("}"==f.type&&(f=d(e));"statement"==f.type;)f=d(e)}else V==f.type?d(e):S&&(("}"==f.type||"top"==f.type)&&";"!=V||"statement"==f.type&&"newstatement"==V)&&g(e,a.column(),"statement",a.current());if("variable"==
h&&("def"==e.prevToken||l.typeFirstDefinitions&&c(a,e,a.start)&&b(e.context)&&a.match(/^\s*\(/,!1)))h="def";T.token&&(f=T.token(a,e,h),void 0!==f&&(h=f));"def"==h&&!1===l.styleDefs&&(h="variable");e.startOfLine=!1;e.prevToken=aa?"def":h||V;q(a,e);return h},indent:function(b,c){if(b.tokenize!=n&&null!=b.tokenize||b.typeAtEndOfLine)return a.Pass;var d=b.context,e=c&&c.charAt(0);"statement"==d.type&&"}"==e&&(d=d.prev);if(l.dontIndentStatements)for(;"statement"==d.type&&l.dontIndentStatements.test(d.info);)d=
d.prev;if(T.indent){var f=T.indent(b,d,c);if("number"==typeof f)return f}var f=e==d.type,g=d.prev&&"switch"==d.prev.info;if(l.allmanIndentation&&/[{(]/.test(e)){for(;"top"!=d.type&&"}"!=d.type;)d=d.prev;return d.indented}return"statement"==d.type?d.indented+("{"==e?0:s):d.align&&(!u||")"!=d.type)?d.column+(f?0:1):")"==d.type&&!f?d.indented+s:/^(?:case|default)\b/.test(c)&&g?d.prev.indented+r:g&&"}"!==e?b.currentSwitchIndentAmount:d.indented+(f?0:r)},electricInput:!1!==l.indentSwitch?/^\s*(?:case .*?:|default:|\{\}?|\})$/:
/^\s*[{}]$/,blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace"}});s(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:f("auto if break case register continue return default do sizeof static else struct switch extern typedef union for goto while enum const volatile"),types:f("int long char short double float unsigned signed void size_t ptrdiff_t bool _Complex _Bool float_t double_t intptr_t intmax_t int8_t int16_t int32_t int64_t uintptr_t uintmax_t uint8_t uint16_t uint32_t uint64_t"),
blockKeywords:f("case do else for if switch while struct"),defKeywords:f("struct"),typeFirstDefinitions:!0,atoms:f("null true false"),hooks:{"#":l,"*":n},modeProps:{fold:["brace","include"]}});s(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:f("auto if break case register continue return default do sizeof static else struct switch extern typedef union for goto while enum const volatile asm dynamic_cast namespace reinterpret_cast try explicit new static_cast typeid catch operator template typename class friend private this using const_cast inline public throw virtual delete mutable protected alignas alignof constexpr decltype nullptr noexcept thread_local final static_assert override and and_eq atomic_cancel atomic_commit atomic_noexcept bitand bitor char16_t char32_t compl concept export import module not not_eq or or_eq requires synchronized xor xor_eq"),
types:f("int long char short double float unsigned signed void size_t ptrdiff_t bool wchar_t"),blockKeywords:f("catch class do else finally for if struct switch try while"),defKeywords:f("class namespace struct enum union"),typeFirstDefinitions:!0,atoms:f("true false null"),dontIndentStatements:/^template$/,isIdentifierChar:/[\w\$_~\xa1-\uffff]/,hooks:{"#":l,"*":n,u:m,U:m,L:m,R:m,"0":p,1:p,2:p,3:p,4:p,5:p,6:p,7:p,8:p,9:p,token:function(a,b,c){if(c="variable"==c)if(c="("==a.peek()){if(b=";"==b.prevToken||
null==b.prevToken||"}"==b.prevToken)a=a.current(),b=(a=/(\w+)::~?(\w+)$/.exec(a))&&a[1]==a[2];c=b}if(c)return"def"}},namespaceSeparator:"::",modeProps:{fold:["brace","include"]}});s("text/x-java",{name:"clike",keywords:f("abstract assert break case catch class const continue default do else enum extends final finally float for goto if implements import instanceof interface native new package private protected public return static strictfp super switch synchronized this throw throws transient try volatile while @interface"),
types:f("byte short int long float double boolean char void Boolean Byte Character Double Float Integer Long Number Object Short String StringBuffer StringBuilder Void"),blockKeywords:f("catch class do else finally for if switch try while"),defKeywords:f("class interface package enum @interface"),typeFirstDefinitions:!0,atoms:f("true false null"),number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+\.?\d*|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,hooks:{"@":function(a){if(a.match("interface",!1))return!1;a.eatWhile(/[\w\$_]/);
return"meta"}},modeProps:{fold:["brace","import"]}});s("text/x-csharp",{name:"clike",keywords:f("abstract as async await base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),
types:f("Action Boolean Byte Char DateTime DateTimeOffset Decimal Double Func Guid Int16 Int32 Int64 Object SByte Single String Task TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),blockKeywords:f("catch class do else finally for foreach if struct switch try while"),defKeywords:f("class interface namespace struct var"),typeFirstDefinitions:!0,atoms:f("true false null"),hooks:{"@":function(a,b){if(a.eat('"'))return b.tokenize=
q,q(a,b);a.eatWhile(/[\w\$_]/);return"meta"}}});s("text/x-scala",{name:"clike",keywords:f("abstract case catch class def do else extends final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try type val var while with yield _ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble"),types:f("AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Int Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),
multiLineStrings:!0,blockKeywords:f("catch class do else finally for forSome if match switch try while"),defKeywords:f("class def object package trait type val var"),atoms:f("true false null"),indentStatements:!1,indentSwitch:!1,isOperatorChar:/[+\-*&%=<>!?|\/#:@]/,hooks:{"@":function(a){a.eatWhile(/[\w\$_]/);return"meta"},'"':function(a,b){if(!a.match('""'))return!1;b.tokenize=t;return b.tokenize(a,b)},"'":function(a){a.eatWhile(/[\w\$_\xa1-\uffff]/);return"atom"},"\x3d":function(a,b){var c=b.context;
return"}"==c.type&&c.align&&a.eat("\x3e")?(b.context=new e(c.indented,c.column,c.type,c.info,null,c.prev),"operator"):!1}},modeProps:{closeBrackets:{triples:'"'}}});s("text/x-kotlin",{name:"clike",keywords:f("package as typealias class interface this super val var fun for is in This throw return break continue object if else while do try when !in !is as? file import where by get set abstract enum open inner override private public internal protected catch finally out final vararg reified dynamic companion constructor init sealed field property receiver param sparam lateinit data inline noinline tailrec external annotation crossinline const operator infix suspend"),
types:f("Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),intendSwitch:!1,indentStatements:!1,multiLineStrings:!0,number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+\.?\d*|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,blockKeywords:f("catch class do else finally for if where try while enum"),
defKeywords:f("class val var object package interface fun"),atoms:f("true false null this"),hooks:{'"':function(a,b){b.tokenize=u(a.match('""'));return b.tokenize(a,b)}},modeProps:{closeBrackets:{triples:'"'}}});s(["x-shader/x-vertex","x-shader/x-fragment"],{name:"clike",keywords:f("sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow const attribute uniform varying break continue discard return for while do if else struct in out inout"),types:f("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4"),
blockKeywords:f("for while do if else struct"),builtin:f("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smoothstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"),
atoms:f("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_PointCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TexureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"),
indentSwitch:!1,hooks:{"#":l},modeProps:{fold:["brace","include"]}});s("text/x-nesc",{name:"clike",keywords:f("auto if break case register continue return default do sizeof static else struct switch extern typedef union for goto while enum const volatileas atomic async call command component components configuration event generic implementation includes interface module new norace nx_struct nx_union post provides signal task uses abstract extends"),types:f("int long char short double float unsigned signed void size_t ptrdiff_t"),
blockKeywords:f("case do else for if switch while struct"),atoms:f("null true false"),hooks:{"#":l},modeProps:{fold:["brace","include"]}});s("text/x-objectivec",{name:"clike",keywords:f("auto if break case register continue return default do sizeof static else struct switch extern typedef union for goto while enum const volatileinline restrict _Bool _Complex _Imaginary BOOL Class bycopy byref id IMP in inout nil oneway out Protocol SEL self super atomic nonatomic retain copy readwrite readonly"),
types:f("int long char short double float unsigned signed void size_t ptrdiff_t"),atoms:f("YES NO NULL NILL ON OFF true false"),hooks:{"@":function(a){a.eatWhile(/[\w\$]/);return"keyword"},"#":l,indent:function(a,b,c){if("statement"==b.type&&/^@\w/.test(c))return b.indented}},modeProps:{fold:"brace"}});s("text/x-squirrel",{name:"clike",keywords:f("base break clone continue const default delete enum extends function in class foreach local resume return this throw typeof yield constructor instanceof static"),
types:f("int long char short double float unsigned signed void size_t ptrdiff_t"),blockKeywords:f("case catch class else for foreach if switch try while"),defKeywords:f("function local class"),typeFirstDefinitions:!0,atoms:f("true false null"),hooks:{"#":l},modeProps:{fold:["brace","include"]}});var w=null;s("text/x-ceylon",{name:"clike",keywords:f("abstracts alias assembly assert assign break case catch class continue dynamic else exists extends finally for function given if import in interface is let module new nonempty object of out outer package return satisfies super switch then this throw try value void while"),
types:function(a){a=a.charAt(0);return a===a.toUpperCase()&&a!==a.toLowerCase()},blockKeywords:f("case catch class dynamic else finally for function if interface module new object switch try while"),defKeywords:f("class dynamic function interface module object package value"),builtin:f("abstract actual aliased annotation by default deprecated doc final formal late license native optional sealed see serializable shared suppressWarnings tagged throws variable"),isPunctuationChar:/[\[\]{}\(\),;\:\.`]/,
isOperatorChar:/[+\-*&%=<>!?|^~:\/]/,numberStart:/[\d#$]/,number:/^(?:#[\da-fA-F_]+|\$[01_]+|[\d_]+[kMGTPmunpf]?|[\d_]+\.[\d_]+(?:[eE][-+]?\d+|[kMGTPmunpf]|)|)/i,multiLineStrings:!0,typeFirstDefinitions:!0,atoms:f("true false null larger smaller equal empty finished"),indentSwitch:!1,styleDefs:!1,hooks:{"@":function(a){a.eatWhile(/[\w\$_]/);return"meta"},'"':function(a,b){b.tokenize=v(a.match('""')?"triple":"single");return b.tokenize(a,b)},"`":function(a,b){if(!w||!a.match("`"))return!1;b.tokenize=
w;w=null;return b.tokenize(a,b)},"'":function(a){a.eatWhile(/[\w\$_\xa1-\uffff]/);return"atom"},token:function(a,b,c){if(("variable"==c||"variable-3"==c)&&"."==b.prevToken)return"variable-2"}},modeProps:{fold:["brace","import"],closeBrackets:{triples:'"'}}})}})})},"MW/rtc/language/LanguageConstants":function(){define([],function(){return{DEFAULT_SUPPORTED_LANGUAGES:{TEXT:"TEXT",MATLAB:"MATLAB",CPP:"CPP",C:"C"}}})},"MW/rtc/plugins/language/matlab/syntaxhighlighter/MatlabSyntaxHighlighterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/language/matlab/syntaxhighlighter/MatlabSyntaxHighlighter"],function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.internaldocument","matlab.tokens","rtc.view.decoration"]}},createInstance:function(d,c,b){return new g(b,d,c)}})})},"MW/rtc/plugins/language/matlab/syntaxhighlighter/MatlabSyntaxHighlighter":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/model/CodeUtilities MW/rtc/plugins/language/matlab/syntaxhighlighter/MatlabTokenColorUtilities MW/rtc/plugins/syntaxhighlighter/AbstractSyntaxHighlighter MW/rtc/plugins/syntaxhighlighter/ColorRange mw-log/Log".split(" "),
function(h,e,g,d,c,b,a,f){return h(b,{constructor:function(a,b,c){this._internalDocument=b;this._matlabTokens=c;this._tokensData=c.getTokensData();this._cachedTokens=[];this._aspectHandles=[];this._changedLines=[];this.own(g.after(this._internalDocument,"onDocumentReset",e.hitch(this,"_resetCaches")));this.own(g.after(this._matlabTokens,"onUpdate",e.hitch(this,"_updateTokens"),!0));this.own(g.after(this._matlabTokens,"onDelete",e.hitch(this,"_handleDelete"),!0));this._tokensToColorize=[];this._linesToClear=
[]},recolorTokens:function(){this._resetCaches();var a=this._tokensData.tokens,b=this._internalDocument.getMaxLineNumber()-1;this._tokensToColorize=[];this._linesToClear=[];this._doSyntaxHighlighting(a,0,b,b,!1,b)},_resetCaches:function(){this._tokensData=this._matlabTokens.getTokensData();this._cachedTokens=[];for(var a=this._internalDocument.getMaxLineNumber(),b=0;b<a;b++)this._changedLines[b]=!0},_updateTokens:function(a){this._tokensToColorize=[];this._linesToClear=[];this._redrawSyntaxHighlighting(a)},
_handleDelete:function(a,b){for(var c=a;c<=b;c++)this._cachedTokens[c]=""},_isNoCodeInDocument:function(a){return 1<Object.keys(a.tokens).length||1<a.tokens[0].length?!1:0===a.tokens[0][0].getLength()},_redrawSyntaxHighlighting:function(a){if(this._isNoCodeInDocument(a))this._resetCaches();else{var b=a.startLine,c=a.endLine,d=a.eventEndLine,e=a.isUndoRedo;a=a.tokens;var f=Math.max(c,d);this._doSyntaxHighlighting(a,b,c,d,e,f)}},_doSyntaxHighlighting:function(a,b,d,e,f,g){g=c.processTokens(a,b,g);this._updateCache(a,
b,d);d>e?(this._decorateLines(b,d,g,this._changedLines),f&&this._decorateLines(b,e,g,!0)):this._decorateLines(b,e,g,!0);this._updateHighlighting(this._linesToClear,this._tokensToColorize)},_decorateLines:function(a,b,c,d){for(;a<=b;a++){var e=this._internalDocument.getLineNode(a);Array.isArray(d)?d[a]&&this._decorate(e,a,c[a]):this._decorate(e,a,c[a])}},_decorate:function(a,b,c){d.isCodeContainer(a)&&c&&(a=this._internalDocument.getRangeForLine(b+1),this._linesToClear.push(a),this._decorateForTokens(c))},
_decorateForTokens:function(b){b.forEach(function(b){var c=b.range.start,d=b.range.end,c=this._internalDocument.getRangeForLineColumn(c.row+1,c.column+1,d.row+1,d.column+1);this._tokensToColorize.push(new a(c,b.color))},this)},_updateCache:function(a,b,c){var d=this._cachedTokens,e=d.length,f=this._internalDocument.getMaxLineNumber();if(e>f){a=e-f;this._cachedTokens.splice(c,a);this._changedLines.splice(c,a);for(a=b;a<=c;a++)void 0!==this._changedLines[a]&&(this._changedLines[a]=!0)}else if(e<f){d=
f-e;for(a=b;a<b+d;a++)this._cachedTokens.splice(a,0,"");for(a=b;a<=c;a++)this._changedLines[a]=!0}else this._markWhichLinesChangedTokens(d,a,b,c)},_markWhichLinesChangedTokens:function(a,b,c,d){for(;c<=d;c++){var e=JSON.stringify(b[c]),f=a[c];this._changedLines[c]=e!==f;e!==f&&b[c]&&(this._cachedTokens[c]=e)}}})})},"MW/rtc/plugins/language/matlab/syntaxhighlighter/preferences/MatlabSyntaxHighlighterPreferencesProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"MW/rtc/plugins/language/matlab/syntaxhighlighter/preferences/MatlabSyntaxHighlighterPreferences"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.code.syntaxhighlighter","rtc.settings.service"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/plugins/language/matlab/syntaxhighlighter/preferences/MatlabSyntaxHighlighterPreferences":function(){define("dojo/_base/declare dojo/_base/lang MW/rtc/abstract/AbstractPlugin MW/rtc/plugins/settings/RtcSettingServiceBatchSubscriber MW/rtc/plugins/language/matlab/syntaxhighlighter/MatlabSyntaxHighlighterColorMap MW/rtc/plugins/language/matlab/syntaxhighlighter/preferences/MatlabSyntaxHighlighterSettingKeys".split(" "),
function(h,e,g,d,c,b){return h(g,{constructor:function(a,f){this._syntaxHighlighter=a;this._settingsService=f;this._settingKeyToSyntaxType={};this._settingKeyToSyntaxType[b.SETTING_KEYS.COMMENT_COLOR]=c.SYNTAX_TYPE.COMMENTS;this._settingKeyToSyntaxType[b.SETTING_KEYS.STRING_COLOR]=c.SYNTAX_TYPE.STRINGS;this._settingKeyToSyntaxType[b.SETTING_KEYS.SYSTEM_COMMAND_COLOR]=c.SYNTAX_TYPE.SYSTEM_COMMANDS;this._settingKeyToSyntaxType[b.SETTING_KEYS.KEYWORD_COLOR]=c.SYNTAX_TYPE.KEYWORDS;this._settingKeyToSyntaxType[b.SETTING_KEYS.VALIDATION_SECTION_COLOR]=
c.SYNTAX_TYPE.TYPE_SECTION;this._settingKeyToSyntaxType[b.SETTING_KEYS.UNTERMINATED_STRING_COLOR]=c.SYNTAX_TYPE.UNTERMINATED_STRINGS;this._settingKeyToSyntaxType[b.SETTING_KEYS.SYNTAX_ERROR_COLOR]=c.SYNTAX_TYPE.ERRORS;this._batchsub=new d(b.getAllValuesAsArray(),this._settingsService,e.hitch(this,"_onSettingsChanged"));this.own(this._batchsub)},_onSettingsChanged:function(a){for(var c=b.getAllValuesAsArray(),d=0;d<c.length;d++){var e=c[d];this._ifNewValueSetColor(this._settingKeyToSyntaxType[e],a.get(e))}this._syntaxHighlighter.recolorTokens()},
_ifNewValueSetColor:function(a,b){b&&c.setColor(a,{r:b[0],g:b[1],b:b[2]})}})})},"MW/rtc/plugins/settings/RtcSettingServiceBatchSubscriber":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dijit/Destroyable","MW/rtc/browsersupport/BrowserSupportUtilities"],function(h,e,g,d,c){return h(d,{_TIMEOUT:50,constructor:function(b,a,d){this._settingsToListenTo=b;this._rtcSettingService=a;this._updateCallback=d;this._settingsChangedMap=c.createMap();this._batchTimer=null;this._setupSettingsSubscriptions()},
_setupSettingsSubscriptions:function(){this._settingsToListenTo.forEach(function(b){b=this._rtcSettingService.listenTo(b,this._handleSettingUpdate.bind(this,b));this.own(b)},this)},_handleSettingUpdate:function(b,a){this._clearTimer();this._settingsChangedMap.set(b,a);this._batchTimer=setTimeout(this._publishChange.bind(this),this._TIMEOUT)},_publishChange:function(){this._updateCallback(this._settingsChangedMap);this._settingsChangedMap.clear();this._clearTimer()},_clearTimer:function(){this._batchTimer&&
(clearTimeout(this._batchTimer),this._batchTimer=null)},destroy:function(){this.inherited(arguments);this._clearTimer()}})})},"MW/rtc/plugins/language/matlab/syntaxhighlighter/preferences/MatlabSyntaxHighlighterSettingKeys":function(){define(function(){return{SETTING_KEYS:{COMMENT_COLOR:"matlab.colors.CommentColor",STRING_COLOR:"matlab.colors.StringColor",SYSTEM_COMMAND_COLOR:"matlab.colors.SystemCommandColor",KEYWORD_COLOR:"matlab.colors.KeywordColor",VALIDATION_SECTION_COLOR:"matlab.colors.ValidationSectionColor",
UNTERMINATED_STRING_COLOR:"matlab.colors.UnterminatedStringColor",SYNTAX_ERROR_COLOR:"matlab.colors.SyntaxErrorColor"},getAllKeysAsArray:function(){return Object.keys(this.SETTING_KEYS)},getAllValuesAsArray:function(){for(var h=[],e=Object.keys(this.SETTING_KEYS),g=0;g<e.length;g++)h[g]=this.SETTING_KEYS[e[g]];return h}}})},"MW/rtc/plugins/textnodeservice/TextNodeServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/textnodeservice/TextNodeService"],
function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/textnodeservice/TextNodeService":function(){define("dojo/_base/declare mw-log/Log MW/rtc/nodes/inner/LineNode MW/rtc/nodes/leaf/PlainTextNode MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNode MW/rtc/plugins/richtext/nodes/leaf/RichTextNode".split(" "),function(h,e,g,d,c,b){return h(null,{constructor:function(){},destroy:function(){},
createTextNodeForPosition:function(a,b){var c=b.getNode(),d=c.textContainer(),d=this.createTextNodeForContainer(a,d);d.setStyleAttributes(c.getStyleAttributes());return d},createTextNodeForContainer:function(a,e){return e.isInstanceOf(c)?new b({text:a}):new d({text:a})}})})},"MW/rtc/plugins/tooltip/TooltipPluginContainerProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/tooltip/TooltipPluginContainer","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{isApplicable:function(){return!0},
requires:function(){return{isApplicable:[],createInstance:["rtc.internaldocument","rtc.view","hoverabletooltip","rtc.view.visibility","rtc.tooltipservice"]}},createInstance:function(d,c,b,a,f){return new e(d,c,b,a,f)}})})},"MW/rtc/plugins/tooltip/TooltipPluginContainer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/dom-style dojo/aspect dojo/query MW/rtc/abstract/AbstractPlugin MW/rtc/plugins/view/tooltip/Tooltip MW/rtc/model/CodeUtilities mw-log/Log".split(" "),function(h,
e,g,d,c,b,a,f,k,l){return h(a,{_HIDE_TOOLTIP_TIMEOUT:800,constructor:function(a,b,d,f,h){this._internalDocument=a;this._view=b;this._tooltipPlugins=d.sort(function(a,b){return b.priority()-a.priority()});this._tooltipService=h;for(a=0;a<this._tooltipPlugins.length;a++)if("function"==typeof this._tooltipPlugins[a].onTooltipClose){this.own(e.connect(this._tooltipPlugins[a],"onTooltipClose",this,"cleanup"));break}this.own(c.after(f,"onHide",g.hitch(this,"cleanup")));this._isMouseInTooltip=this._isMouseOutsideRTC=
!1;this._initializeTooltip();this._currentTargetNode=null},_initializeTooltip:function(){this._tooltip=new f(this._view,this._internalDocument,{timeout:500});this.own(this._tooltip);this.own(c.after(this._tooltip,"onTooltip",g.hitch(this,"_handleOnTooltip"),!0));this.own(c.after(this._tooltip,"hideTooltip",g.hitch(this,"_handleHideTooltip"),!0))},_handleOnTooltip:function(a,b){if(this._isActiveWindow()){var c=this.getPositionFromEvent(b);null!==c&&(this._currentTargetNode=a,this._displayTooltip(a,
b,c,0))}},_handleHideTooltip:function(){this._currentTargetNode=null;this._tooltipServiceHandle&&(this._tooltipServiceHandle.remove(),this._tooltipServiceHandle=null)},_isActiveWindow:function(){return!!b(".layeredNode").every(function(a){return"none"===d.get(a,"display")})},getPositionFromEvent:function(a){a=this._view.fixEvent(a);a=this._view.getCoordinateFromEvent(a);return null===a?null:this._view.getPositionFromCoordinate(a)},_displayTooltip:function(a,b,c,d){if(!this._isMouseOutsideRTC)if(d>=
this._tooltipPlugins.length)this.cleanup();else if(a&&(a.box&&a.box.contains(b.target))&&this._isParentElementValid(a)){var e=this._view.getDomtarget();e.onmouseout=g.hitch(this,"_handleMouseLeftWindow");e.onmouseover=g.hitch(this,"_handleMouseEnteredWindow");var e=this._tooltipPlugins[d],f=g.hitch(this,function(e,f){var h=b.target;if(this._currentTargetNode&&this._currentTargetNode===a&&this.isStillHoveringOverTarget(h))if(e){var k={domNode:h};f&&(b=this._view.fixEvent(b),k.xOffset=b.layerX-h.offsetLeft+
this._view.getScrollLeft());e.onmouseenter=g.hitch(this,"_setIsInTooltip",!0);e.onmouseleave=g.hitch(this,"_setIsInTooltip",!1);this._tooltipServiceHandle=this._tooltipService.requestTooltip(g.hitch(this._tooltip,"showTooltip",e,k),g.hitch(this._tooltip,"hideTooltip"),this._tooltipService.PRIORITY.HOVER)}else this._displayTooltip(a,b,c,d+1)});try{e.getTooltipContent(a,c,f)}catch(h){l.assert(!1,"Resolving Tooltip failed: "+h)}}},_handleMouseLeftWindow:function(){this._isMouseOutsideRTC=!0;this._timer=
setTimeout(g.hitch(this,"_hideTooltipIfMouseStillOutsideRTC"),this._HIDE_TOOLTIP_TIMEOUT)},_hideTooltipIfMouseStillOutsideRTC:function(){this._isMouseInTooltip||this.cleanup()},_handleMouseEnteredWindow:function(){this._isMouseOutsideRTC=!1;this._timer&&(clearTimeout(this._timer),this._timer=null);this.cleanup()},_setIsInTooltip:function(a){this._isMouseInTooltip=a},isStillHoveringOverTarget:function(a){return!0},_isParentElementValid:function(a){return k.isCodeContainer(a.parent)},cleanup:function(){this._tooltip&&
this._tooltip.hideTooltip();this._isMouseInTooltip=!1}})})},"MW/rtc/plugins/typocorrection/TypoSuggestionFeatureProvider":function(){define(["dojo/_base/declare","./TypoSuggestionFeature","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{createInstance:"rtc.document rtc.embeddedoutputs.model rtc.typocorrection.typocorrectionservice rtc.id rtc.code.sections.model rtc.typocorrection.typocorrectionhandlerfactory".split(" ")}},
createInstance:function(d,c,b,a,f,g){return new e(d,c,b,a,f,g)}})})},"MW/rtc/plugins/typocorrection/TypoSuggestionFeature":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class dojo/query MW/rtc/abstract/AbstractPlugin MW/rtc/browsersupport/BrowserSupportUtilities MW/rtc/plugins/embeddedoutputs/outputhandlers/error/ErrorOutputProperties".split(" "),function(h,e,g,d,c,b,a,f){return h(b,{constructor:function(b,c,d,f,h,q){this._document=b;this._embeddedOutputsModel=c;this._editorId=
f;this._sectionModel=h;this._handlerFactory=q;this._typoSuggestionHandlerStore=a.createMap();this.own(g.after(this._embeddedOutputsModel,"onModelUpdated",e.hitch(this,"_handleSuggestions")))},_handleSuggestions:function(){var a=this._embeddedOutputsModel.getOutputs(),a=this._filterErrorOutputs(a);this._clearHandlersForNonExistentOutputs(a);a=this._findNewSuggestionErrorOutputs(a);this._showSuggestionForErrors(a)},_filterErrorOutputs:function(a){return a.filter(function(a){return a.type===f.OUTPUT_TYPE})},
_clearHandlersForNonExistentOutputs:function(a){var b=a.map(function(a){return a.uid}),c=this._typoSuggestionHandlerStore;c.forEach(function(a,d){-1===b.indexOf(d)?(a.destroy(),c.delete(d)):a.isSuggestionOutputStale()&&a.destroy()})},_findNewSuggestionErrorOutputs:function(a){var b=[];a.forEach(function(a){"error"===a.type&&(!this._containsSuggestion(a.getDomElement())&&this._hasSuggestion(a.identifier)&&!this._typoSuggestionHandlerStore.has(a.uid))&&b.push(a)},this);return b},_hasSuggestion:function(a){return a&&
0<a.length},_containsSuggestion:function(a){var b=d.contains(a,"typoFixApplied");a=c(".errorRecoveryDiv",a);return b||0!==a.length},_showSuggestionForErrors:function(a){a.forEach(function(a){var b=this._handlerFactory.createHandler(a);b.handleSuggestion(a.identifier.trim());this._typoSuggestionHandlerStore.set(a.uid,b)},this)},destroy:function(){this.inherited(arguments);this._typoSuggestionHandlerStore.forEach(function(a){a.destroy()});this._typoSuggestionHandlerStore.clear()}})})},"MW/rtc/plugins/typocorrection/handler/TypoSuggestionHandlerFactoryProvider":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/typocorrection/handler/TypoSuggestionHandlerFactory","MW/rtc/core/provider/PluginProvider"],function(h,e,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{createInstance:"rtc.document rtc.internaldocument rtc.linenumberservice rtc.cursor rtc.embeddedoutputs.model rtc.code.codechange rtc.code.sections.model rtc.embeddedoutputs rtc.cursorcontroller rtc.focusservice".split(" ")}},createInstance:function(d,c,b,a,f,g,h,n,p,m){n=n.getEmbeddedOutputsView();return new e(d,
c,b,a,f,g,h,n,p,m)}})})},"MW/rtc/plugins/typocorrection/handler/TypoSuggestionHandlerFactory":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin","./TypoSuggestionHandler"],function(h,e,g,d,c){return h(d,{constructor:function(b,a,c,d,e,g,h,m,q,r){this._document=b;this._internalDocument=a;this._lineNumberService=c;this._cursor=d;this._embeddedOutputsModel=e;this._codeChangeService=g;this._sectionModel=h;this._embeddedOutputsView=m;this._cursorController=
q;this._focusService=r},createHandler:function(b){return new c(this._document,this._internalDocument,this._lineNumberService,this._cursor,this._embeddedOutputsModel,this._codeChangeService,this._sectionModel,b,this._embeddedOutputsView,this._cursorController,this._focusService)}})})},"MW/rtc/plugins/typocorrection/handler/TypoSuggestionHandler":function(){define("dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/aspect dojo/dom-class dojo/dom-construct dojo/on dijit/Destroyable mw-gesture/GestureDetector mw-gesture/GestureRegistry MW/rtc/model/CodeUtilities MW/rtc/plugins/typocorrection/TypoSuggestionContentFactory MW/rtc/plugins/typocorrection/TypoSuggestionFix".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m){return h(f,{_STALE_SUGGESTION_OUTPUT_CLASS:"typoFixApplied",_STALE_OUTPUT_CLASS:"stale_output",constructor:function(a,b,c,d,e,f,g,h,k,l,m){this._domElement=h.getDomElement();this._document=a;this._internalDocument=b;this._lineNumberService=c;this._cursor=d;this._embeddedOutputsModel=e;this._codeChangeService=f;this._output=h;this._sectionModel=g;this._didYouMeanContainer=null;this._stackLineNumberLivePosition=h.stackLineNumber;this._embeddedOutputsView=k;this._cursorController=
l;this._focusService=m},handleSuggestion:function(a){this._suggestion=a;a=new m(this._document,this._internalDocument,this._lineNumberService,this._suggestion,this._stackLineNumberLivePosition);this.initFixButton(a)},initFixButton:function(c){var e=this._domElement,f=p.getContent(c.getSuggestion());this._didYouMeanContainer=f.didYouMeanContainer;this._fixButton=f.fixButton;this._createGestureHandlerForDownEvent(this._fixButton);b.place(this._didYouMeanContainer,e);this._fixButtonHandeler=a.pausable(this._fixButton,
"click",g.hitch(this,"_fixButtonClick",c));this.own(d.after(this._codeChangeService,"onCodeChanged",g.hitch(this,"_handleCodeChange"),!0));this.own(d.after(this._stackLineNumberLivePosition,"onChange",g.hitch(this,"_handleLivePositionChange")));this._embeddedOutputsView.outputChanged()},_createGestureHandlerForDownEvent:function(a){a=new k(a,[l.tapmove({options:{numTaps:0},callbacks:{began:function(a){e.stop(a.srcEvent)}}})]);this.own(a)},_handleCodeChange:function(a){if(!this._isFixButtonDisabled()&&
(this._output.codeLinePositions&&0!==this._output.codeLinePositions.length)&&a){var b=this._sectionModel.getSectionNumberForLine(this._stackLineNumberLivePosition.line);a.forEach(function(a){b===this._sectionModel.getSectionNumberForNode(a)&&this._disableFixButton()},this)}},_handleLivePositionChange:function(){n.isCodeContainer(this._stackLineNumberLivePosition.getNode())||this._disableFixButton()},_disableFixButton:function(){c.add(this._fixButton,"disabled");this._fixButtonHandeler.pause()},_isFixButtonDisabled:function(){return c.contains(this._fixButton,
"disabled")},_fixButtonClick:function(a,d){this._cursorController.holdCursors();var e=a.performFix();this._cursorController.resetCursors();b.destroy(this._didYouMeanContainer);e&&(this._cursorController.clearSelection(),this._cursor.setSelectionLineColumn(e.startLine,e.startColumn,e.endLine,e.endColumn),c.add(this._domElement,this._STALE_SUGGESTION_OUTPUT_CLASS),this._embeddedOutputsModel.onModelUpdated());d.stopPropagation();this._embeddedOutputsView.outputChanged();this._focusService.setFocus()},
isSuggestionOutputStale:function(){return c.contains(this._domElement,this._STALE_OUTPUT_CLASS)},destroy:function(){this.inherited(arguments);b.destroy(this._didYouMeanContainer)}})})},"MW/rtc/plugins/typocorrection/TypoSuggestionContentFactory":function(){define(["dojo/dom-construct","dojo/string","dojo/i18n!l10n/nls/actions"],function(h,e,g){return{getContent:function(d){var c=h.create("div",{className:"errorRecoveryDiv doNotExport"});c.setAttribute("data-testid","errorRecoveryDiv");h.create("div",
{textContent:g.didYouMeanText},c);h.create("div",{className:"suggestion",textContent:d},c);d=h.create("button",{className:"codeFixBtn",textContent:g.fixButtonLabel},c);d.setAttribute("data-testid","typoFixButton");return{didYouMeanContainer:c,fixButton:d}}}})},"MW/rtc/plugins/typocorrection/TypoSuggestionFix":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","mw-log/Log"],function(h,e,g){return h(null,{constructor:function(d,c,b,a,e){this._document=d;this._internalDocument=c;this._lineNumberService=
b;this._suggestion=a;this._stackLineNumberLivePosition=e},getSuggestion:function(){return this._suggestion},_getCodeLineNumberFromStackLivePosition:function(){return e.getCodeLineNumberFromPosition(this._internalDocument,this._stackLineNumberLivePosition)},_getUpdatedDocLineNumber:function(){return this._determineLineNumber(this._getCodeLineNumberFromStackLivePosition())},performFix:function(){var d=this._document.getLineText(this._getUpdatedDocLineNumber()),c=d.search(/\S/)+1,d=d.length+1;this._document.replaceText(this._suggestion,
this._getUpdatedDocLineNumber(),c,this._getUpdatedDocLineNumber(),d);d=c+this._suggestion.length;return{startLine:this._getUpdatedDocLineNumber(),endLine:this._getUpdatedDocLineNumber(),startColumn:c,endColumn:d}},_determineLineNumber:function(d){return this._lineNumberService.getLineNumberFromCodeLineNumber(d)+1}})})},"MW/rtc/plugins/view/divcaret/DivCaretPluginProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/view/divcaret/DivCaretPlugin"],function(h,
e,g){return h(e,{isApplicable:function(d){return!d.getAttribute("contenteditable")},requires:function(){return{isApplicable:["rtc.scrollpane"],createInstance:["rtc.cursor.view","rtc.view","rtc.cursorcontroller"]}},createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/plugins/view/divselection/DivSelectionPluginProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/view/divselection/DivSelectionPlugin"],function(h,e,g){return h(e,{isApplicable:function(d){return!d.getAttribute("contenteditable")},
requires:function(){return{isApplicable:["rtc.scrollpane"],createInstance:["rtc.cursor.view","rtc.view","rtc.cursorcontroller"]}},createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/plugins/view/divselection/DivSelectionPlugin":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-construct dojo/dom-geometry dojo/dom-style MW/rtc/abstract/AbstractPlugin MW/rtc/model/Position".split(" "),function(h,e,g,d,c,b,a,f){return h(a,{_PX:"px",_MARGIN:15,constructor:function(a,
b,c){this._rtcView=b;this._paddingLeft=this._rtcView.paddingLeft;this._cursorController=c;this._layers=[];this._layer=d.create("span",{"class":"selectionGroup"});this._rtcView.addLayer(this._layer);this._hidden=this._isLocked=!1;this.own(g.after(a,"onUpdate",e.hitch(this,"_layout")))},_layout:function(){this._isLocked||(this._removeAllSelections(),this._cursorController.getCursors().forEach(function(a){this.draw(a)},this),this._addAllLayers())},lockSelection:function(){this._isLocked=!0},unlockSelection:function(){this._isLocked=
!1;this._layout()},draw:function(a){if(a.hasSelection()&&!a.isSelectionHidden()){this._hidden=!1;var d=a.selectionInfo(),e=this._addSelectionLayer(),f=e.layer,g=e.top,h=e.body,e=e.bottom;d.endPosition=d.isReversed?a.anchor:a.position;var r=this._getStartAndEndOfSelection(d),s=r.start,r=r.end;if(s&&r){var t=this._rtcView.getDomTargetPosition().scrollWidth-this._paddingLeft;a.isFileEndSelected()&&(r.x=t+this._paddingLeft);0===d.startPos&&(0===d.startNode.offsetInContainer()&&d.startNode.textContainer()!==
d.endNode.textContainer())&&(s.x=this._paddingLeft);var u=this._getFooterHeight(d,r);if(s.y+s.height>r.y+4){var d=Math.min(s.y,r.y),v=Math.max(s.height,r.height);b.set(g,{left:(s.x||this._paddingLeft)+"px",top:d+"px",width:r.x-s.x+"px",height:v+"px",display:"block"});a.isFileEndSelected()?b.set(h,{left:this._paddingLeft+"px",top:d+v+"px",width:t+"px",height:u+"px",display:"block"}):b.set(h,{display:"none"});b.set(e,{display:"none"})}else a=r.y-(s.y+s.height),v=d.startNode.textContainer().nextSibling()===
d.endNode.textContainer(),r.y-(s.y+s.height)>Math.min(s.height,r.height)&&(v=!1),4>a||v?(b.set(h,{display:"none"}),r.height&&(s.height+=a)):b.set(h,{left:this._paddingLeft+"px",top:s.y+s.height+"px",width:t+"px",height:a+"px",display:"block"}),b.set(g,{left:(s.x||this._paddingLeft)+"px",top:s.y+"px",width:t-(s.x||this._paddingLeft)+this._paddingLeft+"px",height:s.height+"px",display:"block"}),g=0===d.endPos&&d.fileEndSelected||0<d.endPos||d.endNode.previousSibling(),b.set(e,{left:this._paddingLeft+
"px",top:r.y+"px",width:(r.x||this._paddingLeft)-this._paddingLeft+"px",height:r.height+u+"px",display:g?"block":"none"});b.set(f,{display:"block"});c.setMarginBox(f,{h:Math.max(r.y+r.height,s.y+s.height)+u,w:this._rtcView.getDocumentDimension().width})}}},_getStartAndEndOfSelection:function(a){var b,c,d=this._rtcView.getCoordinateForPosition(a.startPosition),e=this._rtcView.getCoordinateForPosition(a.endPosition);if(!d||!e)return{start:null,end:null};if(a.isLocal)return{start:d,end:e};var g;c=b=
0;var h=a.startNode.nextSibling();g=this._rtcView.getCoordinateForNode(a.startNode);for(b=g.x+g.width;h&&h!==a.endNode;){g=this._rtcView.getCoordinateForNode(h);if(g.x+g.width<=b)break;if(this._isBelow(g,d,!1))break;c=new f(h,h.maxOffset());c=this._rtcView.getCoordinateForPosition(c);if(this._isBelow(c,d,!1))break;this._growCoordinateToMatchSibling(d,g);h=h.nextSibling()}h=a.endNode.previousSibling();for(b=this._rtcView.getCoordinateForNode(a.endNode).x;h&&h!==a.startNode;){g=this._rtcView.getCoordinateForNode(h);
c=g.x;if(c>=b)break;b=c;if(this._isBelow(e,g,!0))break;c=new f(h,0);c=this._rtcView.getCoordinateForPosition(c);if(this._isBelow(e,c,!0))break;this._growCoordinateToMatchSibling(e,g);h=h.previousSibling()}if(d.y+d.height<=e.y+4){for(h=a.startNode.previousSibling();h;){g=this._rtcView.getCoordinateForNode(h);b=g.y;c=g.height;if(this._isBelow(g,d,!0))break;d.y+d.height<b+c&&(d.height=b+c-d.y);h=h.previousSibling()}for(h=a.endNode.nextSibling();h;){g=this._rtcView.getCoordinateForNode(h);b=g.y;if(this._isBelow(e,
g,!0))break;e.y>b&&(e.height+=e.y-b,e.y=b);h=h.nextSibling()}}return{start:d,end:e}},_isBelow:function(a,b,c){return c?a.y>b.y+b.height:a.y>=b.y+b.height},_growCoordinateToMatchSibling:function(a,b){var c=b.y,d=b.height;a.y>c&&(a.height+=a.y-c,a.y=c);c+=d;d=a.y+a.height;c>d&&(a.height+=c-d)},_getFooterHeight:function(a,b){var d=0;if(a.fileEndSelected){var e=a.endNode.rootContainer(),f=e.box.nextElementSibling;f&&(d=c.getMarginBox(f),d=e.getBottom()+d.h-(b.y+b.height))}return d},updateContainerFullSelection:function(){if(this._layers[0])for(var a=
0;a<this._layers[0].children.length;a++)this._layers[0].children[a].style.top=parseInt(this._layers[0].children[a].style.top,10)-this._MARGIN+this._PX},_removeAllSelections:function(){this._layer.innerHTML="";this._layers=[];c.setMarginBox(this._layer,{w:0})},_addAllLayers:function(){if(0!==this._layers.length){var a=document.createDocumentFragment();this._layers.forEach(function(b){a.appendChild(b)});this._layer.appendChild(a);var b=this._rtcView.getDocumentDimension();c.setMarginBox(this._layer,
{w:b.width})}},_addSelectionLayer:function(){var a=d.create("span",{"class":"selectionLayer"}),b=d.create("span",{"class":"selection sel-top"},a),c=d.create("span",{"class":"selection sel-body"},a),e=d.create("span",{"class":"selection sel-bot"},a);this._layers.push(a);return{layer:a,top:b,body:c,bottom:e}}})})},"MW/rtc/plugins/view/layoutmanager/LayoutManagerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/view/layoutmanager/LayoutManager"],
function(h,e,g){return h(e,{requires:function(){return{createInstance:"rtc.internaldocument rtc.scrollpane rtc.fixedsize rtc.view.viewmodel rtc.view.layoutmanager.layouter rtc.view.layoutmanager.rule rtc.view.layoutmanager.rules.default rtc.view.rangeconverter".split(" ")}},createInstance:function(d,c,b,a,e,h,l,n){return new g(d,c,b,a,e,h,l,n)}})})},"MW/rtc/plugins/view/layoutmanager/LayoutManager":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style mw-log/Log MW/rtc/abstract/AbstractPlugin MW/rtc/core/NodeMap ./LayoutConstants ./LayoutUtilities".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q){return e(n,{constructor:function(a,b,c,e,f,h,k,l){this._internalDocument=a;this._domTarget=b;this.fixedSize=c;this._viewModel=e;this._defaultRule=k;this._rangeConverter=l;this._root=null;this._scrollTopMayHaveChanged=!1;this._layoutOperations=[];this._layoutCache={};this._pendingNodes=[];this._initializeRules(h);this._initializeLayouters(f);this.own(d.after(a,"onNodeChange",g.hitch(this,"_handleNodeChanged"),!0))},_initializeRules:function(a){this._layoutRules=
a&&1<a.length?a.sort(function(a,b){return b.priority()-a.priority()}):[this._defaultRule]},_initializeLayouters:function(a){this._layouters=new p(a)},registerLayouter:function(a){this._layouters.registerOverwrite(a)},_handleNodeChanged:function(a){a=q.getLayoutOperationsFromNodeChangeEvent(a);for(var b=0;b<a.length;b+=1)this._layoutOperations.push(a[b])},layoutDocument:function(){var c=this._internalDocument.root;this._getDomNode(c)||this._reset();var d=this._root;this._root=this._createDomNode(c);
d&&d.parentElement?a.place(this._root,d,"replace"):a.place(this._root,this._domTarget);this.resize();b.toggle(this._domTarget,"readonly",c.readOnly);this._layoutOperations=[];this._layoutCache={}},layoutOnDocumentChange:function(){var a=[];if(0===this._layoutOperations.length)return a;var b=this._viewModel.getViewProperties().scrollTop;this._layoutOperations.forEach(function(b){(b=this._executeOperation(b))&&a.push(b)},this);this._flushPendingNodes();this._scrollTopMayHaveChanged&&(this._domTarget.scrollTop=
b,this._scrollTopMayHaveChanged=!1);this._layoutOperations=[];this._layoutCache={};return a},_executeOperation:function(a){var b=null,c=a.node,d=q.isInModel(c),e=q.isInView(c,this._domTarget),f=c.parent&&q.isInView(c.parent,this._domTarget);if(!d)return q.isRemoveOperation(a)&&e&&(b=c,this._removeNode(c)),b;q.isUpdateOperation(a)&&e?(b=c,this._layoutNode(c,a)):q.isLayoutOperation(a)&&f&&(b=c,this._layoutNode(c,a));return b},layoutNode:function(a){this._layoutNode(a);this._flushPendingNodes();this._layoutCache=
{}},_layoutNode:function(a,b){this._relayout=!0;a=this._getNodeToLayout(a);var c=this._createDomNode(a),d=a.parent;c&&(d&&this._getDomNode(d))&&this._layoutNodeUsingRules(c,a,null,b);this._relayout=!1},_getNodeToLayout:function(a){for(;a&&!a.isRootContainer()&&!this._getLayouter(a).canLayoutIndividually(a);)a=a.parent;return a},_addToPendingNodesList:function(a){0>this._pendingNodes.indexOf(a)&&this._pendingNodes.push(a)},_flushPendingNodes:function(){for(;0<this._pendingNodes.length;){var a=this._pendingNodes;
this._pendingNodes=[];a.forEach(this.refreshNode,this)}},refreshNode:function(b){if(b.parent){var c=this._getDomNode(b);if(c&&c.parentNode){var d=this._getLayouter(b).refresh(this,b,c,c.cloneNode(!1));d&&d!==c&&(a.place(d,c,"replace"),this._connect(b,d));this._layoutRules.forEach(function(a){if(a=a.getOperationsForRefresh(b))this._setWidthFromLayoutInfo(a),this._setRootWidthFromLayoutInfo(a),this._performHostingFromLayoutInfo(a,b)},this)}}},_createDomNode:function(a){return this._getLayouter(a).layout(this,
a)},_getLayouter:function(a){var b=this._layouters.get(a);l.assert(b,"No layouter found for "+a.className);return b},layoutInto:function(b,d,e){var f=this._getDomNode(b);if(f&&!this._relayout)return c.set(f,e),f;f&&this._removeNode(b);d=a.create(d,e);this._layoutNodesIntoContainer(d,b.children);this._connect(b,d);return d},removeAndDisconnectNode:function(a){this._getDomNode(a)&&this._removeNode(a);this._connect(a,null)},_layoutNodesIntoContainer:function(a,b){b&&b.length&&b.forEach(function(b){this._layoutNodeIntoContainer(a,
b)},this)},_layoutNodeIntoContainer:function(a,b){var c=this._createDomNode(b);this._layoutNodeUsingRules(c,b,a)},_layoutNodeUsingRules:function(a,b,c,d){var e=c||this._root;this._layoutRules.forEach(function(f){var g=a.parentElement||c;if(f=f.getOperationsForLayout(a,b,e,d))this._placeDomNodeFromLayoutInfo(f,b,g),this._mergeBlocksFromLayoutInfo(f),this._removeDomNodesFromLayoutInfo(f),this._injectBlocksFromLayoutInfo(f),this._redrawBlocksFromLayoutInfo(f),this._performHostingFromLayoutInfo(f,b),
this._scheduleRefreshFromLayoutInfo(f),this._decorateFromLayoutInfo(f)},this)},_placeDomNodeFromLayoutInfo:function(b,c,d){b.nodeToPlace&&(b.nodeToPlaceRefNode?a.place(b.nodeToPlace,b.nodeToPlaceRefNode,b.nodeToPlaceRefPos):this._placeDomNode(b.nodeToPlace,c,d))},_mergeBlocksFromLayoutInfo:function(a){if(a.nodeToPlace&&a.mergeWithSiblingBlock){a=a.nodeToPlace;var b=a.className,c=a.nextElementSibling,d=a.previousElementSibling;c&&0<=c.className.indexOf(b)?this._mergeBlocks([[a,c]]):d&&0<=d.className.indexOf(b)&&
this._mergeBlocks([[d,a]])}},_removeDomNodesFromLayoutInfo:function(a){a.nodesToRemove&&a.nodesToRemove.forEach(function(a){for(a.parentNode&&a.parentNode.removeChild(a);0<a.childElementCount;)a.removeChild(a.firstElementChild)},this)},_injectBlocksFromLayoutInfo:function(a){var b=this._createBlockFromLayoutInfo(a.prevBlock);this._placeBlock(b,a.nodeToPlace,"before");b=this._createBlockFromLayoutInfo(a.nextBlock);this._placeBlock(b,a.nodeToPlace,"after")},_createBlockFromLayoutInfo:function(b){if(b&&
b.container){var c=b.container;b.childDomNodes.forEach(function(b){a.place(b,c)},this);b.oldBlockDomNodes.forEach(function(a){a&&(a.parentNode&&!a.hasChildNodes())&&a.parentNode.removeChild(a)},this);return c}},_redrawBlocksFromLayoutInfo:function(a){var b=this._getRedrawnBlockByNodes(a.prevNodes),c=this._getRedrawnBlockByNodes(a.nextNodes);this._placeBlock(b,a.nodeToPlace,"before");this._placeBlock(c,a.nodeToPlace,"after")},_performHostingFromLayoutInfo:function(a,b){if(a.hostedNodes){var c=a.hostedNodes.map(function(b){this._getDomNode(b)||
this._createDomNode(b);return a.mapFunction(b)},this);this._getLayouter(b).place(b,c)}a.hostingNode&&this._addToPendingNodesList(a.hostingNode)},_scheduleRefreshFromLayoutInfo:function(a){var b=[],c=a.prevBlock,d=a.nextBlock,e=a.prevNodes;a=a.nextNodes;c&&(b=b.concat(c.childNodes));d&&(b=b.concat(d.childNodes));e&&(b=b.concat(e));a&&(b=b.concat(a));b.forEach(this._addToPendingNodesList,this)},_decorateFromLayoutInfo:function(a){this._setWidthFromLayoutInfo(a);this._setClassFromLayoutInfo(a);this._setRootWidthFromLayoutInfo(a)},
_setWidthFromLayoutInfo:function(a){(a=a.widthToSet)&&a.forEach(function(a){a.nodesToApply.forEach(function(b){this._domTarget.contains(b)&&(b.style.width=this._getMarginWidth(b)-a.widthOffset+"px")},this)},this)},_getMarginWidth:function(a){var b=a.className;if(!this._layoutCache.hasOwnProperty(b)){var c=a.offsetLeft;a=k.get(a,"marginRight");this._layoutCache[b]=this._domTarget.offsetWidth-(c+a)}return this._layoutCache[b]},_setClassFromLayoutInfo:function(a){(a=a.classToSet)&&a.forEach(function(a){a.nodesToApply.forEach(function(c){b.toggle(c,
a.name,a.value)})},this)},_setRootWidthFromLayoutInfo:function(a){if((a=a.rootNodeWidth)&&this._layoutCache.rootWidth!==a)this._layoutCache.rootWidth=a,this._root.style.minWidth=a>this._domTarget.clientWidth?a+"px":"100%"},_getRedrawnBlockByNodes:function(b){if(!b||!b.length)return null;var c=a.create("div",{"class":m.ROOTNODE_CLASS});b.forEach(function(a){this._getDomNode(a)&&this._layoutNodeIntoContainer(c,a)},this);return c.firstChild},_placeDomNode:function(b,c,d){if(!b.parentElement){var e=this._getReferenceForPlace(c,
b,d);e&&this._isDomNodeAttached(e.domNode)?a.place(b,e.domNode,e.position):(c=c.parent,d?a.place(b,d):c&&this._getDomNode(c)&&a.place(b,this._getDomNode(c)))}},_placeBlock:function(b,c,d){b&&(this._scrollTopMayHaveChanged=!0,a.place(b,c,d))},_getReferenceForPlace:function(a,b,c){if(!a)return null;c=c||this._root;if(!c.hasChildNodes())return null;var d=a,e=a;do{if(d=d&&d.previousSibling()){var f=this._getRefDomNode(a,d,b);if(this._isPreferredReference(f,c))return f}if(e=e&&e.nextSibling()){var g=this._getRefDomNode(a,
e,b);if(this._isPreferredReference(g,c))return g}if(this._isValidReference(f,c))return f;if(this._isValidReference(g,c))return g}while(d||e);return null},_isPreferredReference:function(a,b){return!this._isValidReference(a,b)?!1:!this._domTarget.contains(b)?!0:a.base},_isValidReference:function(a,b){return a&&a.domNode&&b.contains(a.domNode)},_getRefDomNode:function(a,b,c){if(!b)return null;var d=null;this._layoutRules.some(function(e){if(e=e.getRefDomNode(a,b,c))return d=e,!0},this);return d},_isDomNodeAttached:function(a){for(;a;){if(b.contains(a,
m.ROOTNODE_CLASS))return!0;a=a.parentElement}return!1},resize:function(){this._layoutRules.forEach(function(a){if(a=a.getOperationsForResize())this._setWidthFromLayoutInfo(a),this._setRootWidthFromLayoutInfo(a)},this);this._layoutCache={}},_removeNode:function(a){for(var b=[],c=[],d=[],e=this._layoutRules.length-1;0<=e;e-=1){var f=this._layoutRules[e].getOperationsForRemove(a,c);f&&(f.nodeToMerge&&f.nodeToMerge.length&&b.unshift(f.nodeToMerge),f.nodeToRemove&&c.unshift(f.nodeToRemove),f.nodesToLayout&&
(d=d.concat(f.nodesToLayout)),this._decorateFromLayoutInfo(f))}b.forEach(this._mergeBlocks,this);c.forEach(function(a){a&&a.parentNode&&a.parentNode.removeChild(a)},this);d.forEach(this._layoutNode,this)},_mergeBlocks:function(b){b&&b.length&&b.forEach(function(b){if(2===b.length){var c=b[0],d=b[1];b=c.parentElement;var e=d.parentElement,f=h.indexOf(b.children,c);b.removeChild(c);e.removeChild(d);c=this._getBlockAfterMerge(c,d);a.place(c,b,f)}},this)},_getBlockAfterMerge:function(b,c){for(var d=a.create("div",
{"class":b.className});b.childElementCount;)a.place(b.firstChild,d);for(;c.childElementCount;)a.place(c.firstChild,d);return d},isLayoutPending:function(){return 0<this._layoutOperations.length},insertDomNode:function(b,c,d,e){return(c=this._rangeConverter.getContainerForPosition(c,e))?a.place(b,c,d):null},removeDomNode:function(a){this._domTarget.contains(a)&&a.parentNode.removeChild(a)},_reset:function(){this._layoutRules.forEach(function(a){a.reset()},this)},_connect:function(a,b){b&&(b.rteNode=
a);a.box=b},applyStyle:function(a,b,c){this._getDomNode(a).style[b]=c},clearStyle:function(a,b){this._getDomNode(a).style[b]=""},applyClass:function(a,c){var d=this._getDomNode(a);null!==d&&b.add(d,c)},clearClass:function(a,c){var d=this._getDomNode(a);null!==d&&b.remove(d,c)},_getDomNode:function(a){return a.box}})})},"MW/rtc/plugins/view/layoutmanager/LayoutParagraphHostingModelProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LayoutParagraphHostingModel"],
function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/view/layoutmanager/LayoutParagraphHostingModel":function(){define(["dojo/_base/declare","mw-log/Log","MW/rtc/abstract/AbstractPlugin","MW/rtc/browsersupport/BrowserSupportUtilities","MW/rtc/model/RangeUtilities"],function(h,e,g,d,c){return h(g,{constructor:function(){this._paragraphHostingMap=d.createMap()},set:function(b,a){b.isRootContainer()&&this._paragraphHostingMap.set(b,
a)},get:function(b){return this._paragraphHostingMap.get(b)},getHostingNode:function(b){var a=this._getNodeRangePairs();if(0===a.length)return null;var d=null;a.some(function(a){if(c.isParagraphNodeInRange(b,a.range))return d=a.node,!0},this);return d},_getNodeRangePairs:function(){var b=[];this._paragraphHostingMap.forEach(function(a,c){b.push({node:c,range:a})});return b},getHostedNodes:function(b){b=this.get(b);return!b?null:c.paragraphNodesInRange(b)},"delete":function(b){this._paragraphHostingMap.delete(b)},
destroy:function(){this.reset();this._paragraphHostingMap=null},reset:function(){this._paragraphHostingMap.forEach(function(b){b.destroy()});this._paragraphHostingMap.clear()}})})},"MW/rtc/plugins/view/layoutmanager/layouters/LineLayouterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LineLayouter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.view.decoration.layerviewmodel","rtc.view.hidden.hiddennodemodel"]}},createInstance:function(d,
c){return new g(d,c)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/view/layoutmanager/layouters/PlainTextLayouterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./PlainTextLayouter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.view.decoration.viewmodel"]}},createInstance:function(d){return new g(d)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/view/layoutmanager/layouters/RootLayouterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./RootLayouter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/view/layoutmanager/layouters/RootLayouter":function(){define(["dojo/_base/declare","dojo/dom-class","MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter","MW/rtc/nodes/inner/RootNode"],function(h,e,g,d){return h(g,{constructor:function(c){},getApplicableNodeClass:function(){return d},
layout:function(c,b){var a=c.layoutInto(b,"div",{"class":"rootNode"});b.plainText&&e.add(a,"plainText");c.fixedSize&&e.add(a,"rootNodeFixedSize");return a}})})},"MW/rtc/plugins/view/layoutmanager/rules/BaseGroupingRuleProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/view/layoutmanager/rules/BaseGroupingRule"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/view/layoutmanager/rules/ContainmentGroupingRuleProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/view/layoutmanager/rules/ContainmentGroupingRule"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.scrollpane"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/view/layoutmanager/rules/ContiguousGroupingRuleProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/view/layoutmanager/rules/ContiguousGroupingRule"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.scrollpane"]}},
createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/view/layoutmanager/rules/DefaultRuleProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/view/layoutmanager/rules/DefaultRule"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/view/layoutmanager/rules/ExpandableRuleProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"MW/rtc/plugins/view/layoutmanager/rules/ExpandableRule"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/view/layoutmanager/rules/ExpandableRule":function(){define("dojo/_base/declare dojo/dom-geometry dojo/query dojo/dom-class MW/rtc/plugins/view/layoutmanager/abstract/BaseRule MW/rtc/plugins/view/layoutmanager/rules/ContainmentGroupingRule".split(" "),function(h,e,g,d,c,b){return h(c,{_EXPANSION_THRESHOLD:10,
_EXPANDABLE_CLASSLIST:["equationNode","imageNode"],constructor:function(){this.reset()},reset:function(){this._cachedExpandable=[];this._cachedWidth=[];this._currentMaxWidth=0},getOperationsForLayout:function(a,c,d){d=[];d=c.wrappable?g("*",a):c.groupingType===b().groupingType?this._getElementsInSiblingBlocks(a):[a];d=d.filter(this._canExpandRootNode,this);if(!d.length)return null;d.forEach(function(a){var b=this._cachedExpandable.indexOf(a),c=this._getMarginWidth(a);0>b?(this._cachedExpandable.push(a),
this._cachedWidth.push(c)):this._cachedWidth[b]=c},this);this._currentMaxWidth=this._getMaxCachedWidth();return{rootNodeWidth:this._getExpandedWidth()}},_getElementsInSiblingBlocks:function(a){var b=a.previousElementSibling;if(b)var c=g("*",b);if(a=a.nextElementSibling)var d=g("*",a);return c&&d?c.concat(d):c||d||[]},getOperationsForRemove:function(a,b){var c=this._getDomNode(a);if(!a.wrappable&&!this._canExpandRootNode(c))return null;var d=g("*",c);d.push(c);d.forEach(function(a){this._canExpandRootNode(a)&&
(a=this._cachedExpandable.indexOf(a),0<=a&&(this._cachedExpandable.splice(a,1),this._cachedWidth.splice(a,1)))},this);this._currentMaxWidth=this._getMaxCachedWidth();return{rootNodeWidth:this._getExpandedWidth()}},getOperationsForResize:function(){if(!this._cachedExpandable.length)return null;this._updateCachedWidth();return{rootNodeWidth:this._getExpandedWidth()}},_updateCachedWidth:function(){this._cachedWidth=this._cachedExpandable.map(this._getMarginWidth);this._currentMaxWidth=this._getMaxCachedWidth()},
_getExpandedWidth:function(){return this._currentMaxWidth+this._EXPANSION_THRESHOLD},_getMaxCachedWidth:function(){return Math.max.apply(null,this._cachedWidth)},_getMarginWidth:function(a){a=e.getMarginBox(a);return a.l+a.w},_canExpandRootNode:function(a){return this._EXPANDABLE_CLASSLIST.some(function(b){return d.contains(a,b)})},_isApplicable:function(a,b){return b.wrappable||this._canExpandRootNode(a)},priority:function(){return-4},destroy:function(){this.inherited(arguments);this._cachedExpandable=
[]}})})},"MW/rtc/plugins/view/layoutmanager/rules/OutputRuleProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/view/layoutmanager/rules/OutputRule"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/view/layoutmanager/rules/OutputRule":function(){define(["dojo/_base/declare","dojo/query","MW/rtc/plugins/view/layoutmanager/abstract/BaseRule","MW/rtc/plugins/view/layoutmanager/LayoutConstants"],
function(h,e,g,d){return h(g,{_INLINEELEMENT_CLASS:"inlineElement",constructor:function(){},getOperationsForLayout:function(c,b,a){return!this._isApplicable(b)?null:this._getOperationsForWidthSetting(c)},getOperationsForRefresh:function(c){return!this._isApplicable(c)?null:this._getOperationsForWidthSetting(this._getDomNode(c))},_getOperationsForWidthSetting:function(c){c=e("."+this._INLINEELEMENT_CLASS,c);return!c.length?null:{widthToSet:[{nodesToApply:c,widthOffset:this._getWidthOffset()}]}},_getWidthOffset:function(){return d.RIGHT_MARGIN_WIDTH},
_isApplicable:function(c){return"LineNode"===c.className},priority:function(){return-3}})})},"MW/rtc/plugins/view/layoutmanager/rules/ParagraphHostingRuleProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/view/layoutmanager/rules/ParagraphHostingRule"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.view.layoutmanager.paragraphhostingmodel"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/view/layoutmanager/rules/ParagraphHostingRule":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/view/layoutmanager/abstract/BaseRule"],function(h,e){return h(e,{constructor:function(e){this._paragraphHostingModel=e},getOperationsForLayout:function(e,d,c){return this._getParagraphHostingInfo(d)},getOperationsForRefresh:function(e){return this._getParagraphHostingInfo(e)},_getParagraphHostingInfo:function(e){if(!e.isRootContainer())return null;var d=this._paragraphHostingModel.getHostedNodes(e);if(d)return{hostedNodes:d,mapFunction:this._getDomNode.bind(this)};if(e=this._paragraphHostingModel.getHostingNode(e))return{hostingNode:e}},
getOperationsForRemove:function(e,d){if(!e.parent){var c=this._paragraphHostingModel.getHostedNodes(e);if(c)return this._paragraphHostingModel.delete(e),{nodesToLayout:c}}},priority:function(){return-2}})})},"MW/rtc/plugins/view/layoutmanager/rules/WrappableRuleProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/view/layoutmanager/rules/WrappableRule"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},
"MW/rtc/plugins/view/layoutmanager/rules/WrappableRule":function(){define(["dojo/_base/declare","dojo/query","MW/rtc/plugins/view/layoutmanager/abstract/BaseRule","MW/rtc/plugins/view/layoutmanager/rules/ContainmentGroupingRule","MW/rtc/plugins/view/layoutmanager/LayoutConstants"],function(h,e,g,d,c){return h(g,{_WRAPPABLE_CLASS:"wrappable",constructor:function(){this.reset()},reset:function(){this._cachedWrappable=[]},getOperationsForLayout:function(b,a,c){var e;a.wrappable?e=this._getOperationsForLayoutWrappable(b):
a.groupingType===d().groupingType&&(e=this._getOperationsForLayoutSiblingBlocks(b,a));return e},_getOperationsForLayoutWrappable:function(b,a){var c={};c.classToSet=[{nodesToApply:[b],name:this._WRAPPABLE_CLASS,value:!0}];var d=e("."+this._WRAPPABLE_CLASS,b);d.push(b);c.widthToSet=[{nodesToApply:d,widthOffset:this._getWidthOffset()}];0>this._cachedWrappable.indexOf(b)&&this._cachedWrappable.push(b);return c},_getOperationsForLayoutSiblingBlocks:function(b){b=this._getWrappableInSiblingBlocks(b);return!b.length?
null:{widthToSet:[{nodesToApply:b,widthOffset:this._getWidthOffset()}]}},_getWrappableInSiblingBlocks:function(b){var a=b.previousElementSibling;if(a)var c=e("."+this._WRAPPABLE_CLASS,a);if(b=b.nextElementSibling)var d=e("."+this._WRAPPABLE_CLASS,b);return c&&d?c.concat(d):c||d||[]},getOperationsForRemove:function(b){if(b.wrappable){b=this._getDomNode(b);var a=e("."+this._WRAPPABLE_CLASS,b);a.push(b);a.forEach(function(a){a=this._cachedWrappable.indexOf(a);0<=a&&this._cachedWrappable.splice(a,1)},
this)}return null},getOperationsForResize:function(){return!this._cachedWrappable.length?null:{widthToSet:[{nodesToApply:this._cachedWrappable,widthOffset:this._getWidthOffset()}]}},_getWidthOffset:function(){return c.RIGHT_MARGIN_WIDTH},priority:function(){return-1},destroy:function(){this.inherited(arguments);this._cachedWrappable=[]}})})},"MW/rtc/plugins/view/movehiddenkeycapture/MoveHiddenKeyCaptureProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./MoveHiddenKeyCapture"],
function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.cursor","rtc.divcaret","rtc.domnode","rtc.keyhandler"]}},createInstance:function(d,c,b,a){return new g(d,c,b,a)}})})},"MW/rtc/plugins/view/movehiddenkeycapture/MoveHiddenKeyCapture":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/dom-class","dojo/dom-geometry"],function(h,e,g,d,c){return h(null,{constructor:function(b,a,c,d){this._cursor=b;this._divcaret=a;this._keyCapture=d.keyCapture;this._rtePane=
c},_getFocusPosition:function(){var b=this._cursor.getNode(),a=b.box,d=this._divcaret.getBox(),b=b.isIMENode?c.position(a):c.position(d),a={x:0,y:0};this._rtePane&&(a=c.position(this._rtePane));return{left:b.x-a.x+"px",top:b.y-a.y+"px"}},moveHiddenKeyCaptureToCaret:function(b){var a={top:0,left:0};b&&(a=this._getFocusPosition());this._keyCapture.style.top=a.top;this._keyCapture.style.left=a.left}})})},"MW/rtc/preferences/PreferencesServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"MW/rtc/preferences/PreferencesService"],function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.editordataservice"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/preferences/PreferencesService":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(h,e){return h(null,{MATLAB_PREFERENCES_FEATURE_ID:"matlab.preferences",constructor:function(g){this._editorDataService=g;this._listener=this._editorDataService.listenTo(this.MATLAB_PREFERENCES_FEATURE_ID,
e.hitch(this,"_preferencesChanged"))},_preferencesChanged:function(){this.onPreferencesChanged()},getValue:function(e,d){var c=this._editorDataService.get(this.MATLAB_PREFERENCES_FEATURE_ID);return c&&e in c?c[e]:d},getValues:function(e){var d=this._editorDataService.get(this.MATLAB_PREFERENCES_FEATURE_ID),c={};e.forEach(function(b){c[b]=d[b]},this);return c},onPreferencesChanged:function(){}})})},"MW/rtc/view/PerformanceTestHelper":function(){define(["dojo/_base/declare","dojo/aspect","dojo/has",
"MW/rtc/abstract/AbstractPlugin","MW/rtc/core/provider/PluginProvider"],function(h,e,g,d,c){var b=h(d,{constructor:function(a,b,c){this._view=a;this._documentLoadedService=b;this._embeddedOutputsView=c;this._emitCustomEventAfterOnScroll();this._emitCustomEventAfterDocumentLoadedWithText();this._emitCustomEventBeforeOutputViewToggle();this._emitCustomEventAfterOutputViewToggle()},_emitCustomEventAfterOnScroll:function(){this.own(e.after(this._view,"onScroll",function(){if(!g("mac")){var a=new CustomEvent("customMPoint",
{detail:"ScrollCompleted"});window.dispatchEvent(a)}},!0))},_emitCustomEventAfterDocumentLoadedWithText:function(){this.own(e.after(this._documentLoadedService,"onDocumentLoadedWithText",function(){if(g("chrome")){var a=new CustomEvent("customMPoint",{detail:"textLoaded"});window.dispatchEvent(a)}},!0))},_emitCustomEventBeforeOutputViewToggle:function(){this.own(e.before(this._embeddedOutputsView,"toggle",function(){if(g("chrome")){var a=new CustomEvent("customMPoint",{detail:"startToggle"});window.dispatchEvent(a)}},
!0))},_emitCustomEventAfterOutputViewToggle:function(){this.own(e.after(this._embeddedOutputsView,"toggle",function(){if(g("chrome")){var a=new CustomEvent("customMPoint",{detail:"endToggle"});window.dispatchEvent(a)}},!0))}});return h(c,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.view","rtc.service.documentloaded","rtc.embeddedoutputs"]}},createInstance:function(a,c,d){return new b(a,c,d.getEmbeddedOutputsView())}})})},"MW/rtc/view/RTCPerformanceTestHelper":function(){define(["dojo/_base/declare",
"dojo/aspect","dojo/has","MW/rtc/abstract/AbstractPlugin","MW/rtc/core/provider/PluginProvider"],function(h,e,g,d,c){var b=h(d,{constructor:function(a,b){this._document=a;this._view=b;this._emitCustomEventAfterSetText();this._emitCustomEventAfterOnScroll()},_emitCustomEventAfterSetText:function(){this.own(e.after(this._document,"setText",function(){var a=new CustomEvent("customMPoint",{detail:"setTextCompleted"});window.dispatchEvent(a)},!0))},_emitCustomEventAfterOnScroll:function(){this.own(e.after(this._view,
"onScroll",function(){if(!g("mac")){var a=new CustomEvent("customMPoint",{detail:"ScrollCompleted"});window.dispatchEvent(a)}},!0))}});return h(c,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.document","rtc.view"]}},createInstance:function(a,c){return new b(a,c)}})})},"MW/rtc/view/ViewModelProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/view/ViewModel"],function(h,e,g){return h(e,{isApplicable:function(){return!0},
requires:function(){return{isApplicable:[],createInstance:["rtc.internaldocument","rtc.scrollpane"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/view/ViewModel":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin","./ViewEventUtilities"],function(h,e,g,d,c){return h(d,{DOMTARGET_PROPERTIES:"scrollTop scrollLeft clientWidth clientHeight offsetHeight offsetWidth scrollHeight scrollWidth".split(" "),constructor:function(b,a){this._internalDocument=
b;this._domTarget=a;this._documentDimension=null;this._properties={}},update:function(){this._invalidateAllCaches();return this._updateAllViewProperties()},_invalidateAllCaches:function(){this._invalidateCacheForDocumentDimension()},_invalidateCacheForDocumentDimension:function(){this._documentDimension=null},_updateAllViewProperties:function(){var b=[],b=b.concat(this._updateViewProperties(this.DOMTARGET_PROPERTIES));this._properties.scrollHeight>this._properties.clientHeight||b.push(c.createEvent(c.EVENTS.layoutChange));
return b},_updateViewProperties:function(b){var a=[];b.forEach(function(b){var d=this._domTarget[b];d!==this._properties[b]&&(a.push(c.createEvent(c.EVENTS[b])),this._properties[b]=d)},this);return a},getViewProperties:function(){return this._properties},getDomTargetDomNode:function(){return this._domTarget},getDomTargetBoundingClientRect:function(){return this._domTarget.getBoundingClientRect()},getDocumentDimension:function(){if(!this._documentDimension){var b=this.getDocumentClientRect();this._documentDimension=
{width:b.width,height:b.height}}return this._documentDimension},getDocumentClientRect:function(){return this._internalDocument.root.box.getBoundingClientRect()}})})},"MW/rtc/view/ViewLinesTestHelper":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-class dojo/query MW/rtc/core/provider/PluginProvider".split(" "),function(h,e,g,d,c,b,a){var f=h(null,{constructor:function(a,b,c){this._internalDocument=a;this._scrollPane=c;this._listener=g.after(b,"layoutDocument",
e.hitch(this,"addTags"),!0);this._listener=g.after(b,"_layoutNode",e.hitch(this,"addTags"),!0);this._listener=g.after(b,"layoutInto",e.hitch(this,"addTags"),!0);this._listener=g.after(b,"_removeNode",e.hitch(this,"addTags"),!0);this._lineCounter=0;this.addTags()},destroy:function(){this._listener.remove()},addTags:function(){0!==b(".rootNode",this._scrollPane).length&&(this._lineCounter=0,this._internalDocument.root.children.forEach(function(a){this._addChildTag(a.box)},this))},_addChildTag:function(a){if(a)if(c.contains(a,
"heading-1"))d.set(a,"data-testid","RtcLine"+this._lineCounter++),d.set(a,"type","TitleLine");else if(c.contains(a,"heading-2"))d.set(a,"data-testid","RtcLine"+this._lineCounter++),d.set(a,"type","HeadingLine");else if(c.contains(a,"paragraphNode"))d.set(a,"data-testid","RtcLine"+this._lineCounter++),d.set(a,"type","NormalLine");else if(c.contains(a,"RTClistItem"))d.set(a,"data-testid","RtcLine"+this._lineCounter++),"OL"===a.parentElement.tagName?d.set(a,"type","OrderedListItem"):d.set(a,"type","UnorderedListItem");
else if(c.contains(a,"lineNode"))d.set(a,"data-testid","RtcLine"+this._lineCounter++),d.set(a,"type","CodeLine");else{if(0<a.children.length)for(var b=0;b<a.children.length;b+=1)this._addChildTag(a.children[b])}else this._lineCounter++}});return h(a,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.internaldocument","rtc.view.layoutmanager","rtc.scrollpane"]}},createInstance:function(a,b,c){return new f(a,b,c)},destroyInstance:function(a){a.destroy()}})})},
"MW/rtc/view/ViewSectionsTestHelper":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-class dojo/query MW/rtc/core/provider/PluginProvider".split(" "),function(h,e,g,d,c,b,a){var f=h(null,{SECTION_CSS:"SectionBlock",SECTION_DATATEST_PREFIX:"RtcSection",constructor:function(a,b){this._scrollPane=b;this._listener=g.after(a,"layoutDocument",e.hitch(this,"addTags"),!0);this._listener=g.after(a,"_layoutNode",e.hitch(this,"addTags"),!0);this._listener=g.after(a,"layoutInto",
e.hitch(this,"addTags"),!0);this._listener=g.after(a,"_removeNode",e.hitch(this,"addTags"),!0);this.addTags()},addTags:function(){var a=b(".rootNode",this._scrollPane);if(0!==a.length)for(var e=0,a=a[0],f=0;f<a.children.length;f+=1){var g=a.children[f];c.contains(g,this.SECTION_CSS)&&d.set(g,"data-testid",this.SECTION_DATATEST_PREFIX+e++)}},destroy:function(){this._listener.remove()}});return h(a,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.view.layoutmanager",
"rtc.scrollpane"]}},createInstance:function(a,b){return new f(a,b)},destroyInstance:function(a){a.destroy()}})})},"MW/rtc/view/ViewportOpenedServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./ViewportOpenedService"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.view","rtc.domnode","rtc.service.documentloaded"]}},createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/view/ViewportOpenedService":function(){define(["dojo/_base/declare",
"dojo/aspect","dojo/Deferred","MW/rtc/abstract/AbstractPlugin","MW/rtc/view/ViewEventUtilities"],function(h,e,g,d,c){return h(d,{constructor:function(b,a,c){this._view=b;this._rtcDomNode=a;this._documentLoadedService=c;this._viewportOpenedWithContentPromise=new g;this._viewportOpenedPromise=new g;this._setupViewListener();c.whenDocumentLoadedWithText(this._updateViewportOpenedWithContentPromise.bind(this))},_setupViewListener:function(){0<this._rtcDomNode.getBoundingClientRect().height?(this._viewportOpenedPromise.resolve(),
this._updateViewportOpenedWithContentPromise()):this._viewUpdatedHandler=e.after(this._view,"onViewUpdated",function(b){c.hasSizingEvent(b)&&0<this._rtcDomNode.getBoundingClientRect().height&&(this._removeViewListener(),this._viewportOpenedPromise.resolve(),this._updateViewportOpenedWithContentPromise())}.bind(this),!0)},whenViewportOpenedWithContent:function(b){this._viewportOpenedWithContentPromise.then(b,function(){})},whenViewportOpened:function(b){this._viewportOpenedPromise.then(b,function(){})},
_updateViewportOpenedWithContentPromise:function(){this._viewportOpenedPromise.isResolved()&&this._documentLoadedService.isDocumentLoadedWithText()&&this._viewportOpenedWithContentPromise.resolve()},_removeViewListener:function(){this._viewUpdatedHandler&&(this._viewUpdatedHandler.remove(),this._viewUpdatedHandler=null)},destroy:function(){this.inherited(arguments);this._viewportOpenedPromise.reject();this._viewportOpenedPromise=null;this._viewportOpenedWithContentPromise.reject();this._viewportOpenedWithContentPromise=
null;this._removeViewListener()}})})},"MW/rtc/view/ViewProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/view/View"],function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.internaldocument","rtc.view.viewmodel","rtc.scrollpane","rtc.view.layoutmanager","rtc.view.coordinateconverter"]}},createInstance:function(d,c,b,a,e){return new g(d,c,b,a,e)},destroyInstance:function(d){d.destroy()}})})},
"MW/rtc/view/View":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/on mw-log/Log MW/rtc/abstract/AbstractPlugin MW/rtc/model/DocumentEventUtilities MW/rtc/model/DocumentUtilities MW/rtc/model/NodeUtilities ./ViewEventUtilities ./ViewMeasurementUtilities ./ViewUtilities".split(" "),function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t){return h(n,{_DEFAULT_HORIZONTAL_PADDING:60,_DEFAULT_VERTICAL_PADDING:14,_DEFAULT_SCROLL_AMOUNT:50,
_LINE_SHOULD_BE_IN_VIEW:"The specified line should be in the current view.",_POSITION_SHOULD_NOT_BE_NULL:"The position should not be null.",constructor:function(a,b,c,d,f){this._internalDocument=a;this._viewModel=b;this._domTarget=c;this._layoutManager=d;this._coordinateConverter=f;this.paddingLeft=0;this._pendingEvents=[];this.own(k(c,"scroll",e.hitch(this,"_handleScroll")));this.own(g.after(a,"onDocumentChanged",e.hitch(this,"_handleDocumentChanged"),!0));this.own(g.after(a,"onDocumentReset",e.hitch(this,
"_handleDocumentReset")));this.own(g.after(a,"readOnlyChanged",e.hitch(this,"_handleReadOnlyChanged")))},onViewUpdated:function(a){},onVisitNode:function(a){},onLinesDOMUpdated:function(a,b,c){},onLayoutChange:function(a){a&&a.isValid()&&this.scrollPositionIntoView(a);this._pendingEvents.push(r.createEvent(r.EVENTS.layoutChange));this._updateViewPropertiesAndEmitEvents()},onScroll:function(){},onResize:function(){this._layoutManager.resize();this._updateViewPropertiesAndEmitEvents()},_handleScroll:function(){this._updateViewPropertiesAndEmitEvents()},
_handleDocumentChanged:function(a){var b=this._layoutManager.layoutOnDocumentChange();0<b.length&&this._pendingEvents.push(r.createEvent(r.EVENTS.renderUpdate));r.isLayoutChangeEventToPatch(a,this._internalDocument)&&this._pendingEvents.push(r.createEvent(r.EVENTS.layoutChange));this._updateViewPropertiesAndEmitEvents();if(0<b.length)this.onVisitNode(b)},_handleDocumentReset:function(){this._layoutManager.layoutDocument();this._updateViewProperties()},_handleReadOnlyChanged:function(){this._layoutManager.layoutDocument()},
_updateViewPropertiesAndEmitEvents:function(){this._updateViewProperties();this._emitPendingEvents()},_updateViewProperties:function(){var a=this._viewModel.update();this._pendingEvents=this._pendingEvents.concat(a)},_emitPendingEvents:function(){var a=this._pendingEvents;0<a.length&&(this._pendingEvents=[],this.onViewUpdated(a))},getDomTargetPosition:function(){return this._viewModel.getViewProperties()},setScrollTop:function(a){this.getScrollTop()===a||0===this.getScrollTop()&&0>a||(this._domTarget.scrollTop=
a,this._updateViewPropertiesAndEmitEvents(),this.onScroll())},offsetScrollTop:function(a){var b=this.getScrollTop(),c=this.getScrollHeight()-this.getClientHeight();a=Math.min(Math.max(b+a,0),c);a!==b&&(this._domTarget.scrollTop=a,this._updateViewPropertiesAndEmitEvents(),this.onScroll())},setScrollLeft:function(a){this.getScrollLeft()===a||0===this.getScrollLeft()&&0>a||(this._domTarget.scrollLeft=a,this._updateViewPropertiesAndEmitEvents(),this.onScroll())},offsetScrollLeft:function(a){var b=this.getScrollLeft(),
c=this.getScrollWidth()-this.getClientWidth();a=Math.min(Math.max(b+a,0),c);a!==b&&(this._domTarget.scrollLeft=a,this._updateViewPropertiesAndEmitEvents(),this.onScroll())},canScroll:function(){return this.getScrollHeight()>this.getClientHeight()},getScrollLeft:function(){return this._viewModel.getViewProperties().scrollLeft},getScrollTop:function(){return this._viewModel.getViewProperties().scrollTop},getScrollWidth:function(){return this._viewModel.getViewProperties().scrollWidth},getScrollHeight:function(){return this._viewModel.getViewProperties().scrollHeight},
getClientWidth:function(){return this._viewModel.getViewProperties().clientWidth},getClientHeight:function(){return this._viewModel.getViewProperties().clientHeight},applyStyleToLine:function(a,b,c){m.checkLineExists(this._internalDocument,a);(a=this._internalDocument.getLineNode(a-1))&&this._layoutManager.applyStyle(a,b,c)},registerLayouter:function(a){this._layoutManager.registerLayouter(a)},isLayoutPending:function(){return this._layoutManager.isLayoutPending()},layoutNode:function(a){this._layoutManager.layoutNode(a);
this.onVisitNode([a])},refreshNode:function(a){this._layoutManager.refreshNode(a)},getDomtarget:function(){return this._domTarget},addLayer:function(a){d.add(a,"layer");c.place(a,this._domTarget)},switchLayer:function(a,b){this._domTarget.contains(b)&&(d.add(a,"layer"),c.place(a,b,"replace"))},setBlockLayer:function(b){d.add(b,"layer fullWidthLayer");var c=this;k(this._domTarget,"scroll",function(){a.set(b,{left:c._domTarget.scrollLeft+"px"})})},isElementOutOfView:function(a,b){var c=this._viewModel.getDomTargetBoundingClientRect(),
d=a.getBoundingClientRect();b=b||{left:0,right:0,top:0,bottom:0};return d.top>c.bottom+b.bottom||d.left>c.right+b.right||d.bottom<c.top-b.top||d.right<c.left-b.left},getLineHeight:function(a){m.checkLineExists(this._internalDocument,a);return this._internalDocument.getLineNode(a-1).getHeight()},getPreciseLineHeight:function(a){m.checkLineExists(this._internalDocument,a);a=this._internalDocument.getLineNode(a-1);return this.getNodeBottom(a.rootContainer(),!0)-this.getNodeTop(a.rootContainer(),!0)},
getCharacterWidthForLine:function(a){a=this._internalDocument.getLineNode(a-1);var b=window.getComputedStyle(a.box);a=b.fontFamily;b=parseInt(b.fontSize);return s.getNumericCharacterWidthForFontFamilyAndSize(a,b)},getNodeTop:function(b,c){var d=0;if(c)var e=a.getComputedStyle(b.box),d=d+a.get(b.box,"paddingTop",e),d=d+a.get(b.box,"borderTopWidth",e);return b.getTop()+d},getNodeBottom:function(b,c){var d=0;if(c)var e=a.getComputedStyle(b.box),d=d+a.get(b.box,"paddingBottom",e),d=d+a.get(b.box,"borderBottomWidth",
e);return b.getBottom()-d},getNodeHeight:function(b,c){return b.getHeight()+(c?a.get(b.box,"paddingTop")+a.get(b.box,"paddingBottom"):0)},scrollNodeToPercent:function(a,b){this.scrollLineToPercent(this._internalDocument.getLineNumber(a)+1,b)},scrollLineToPercent:function(a,b){m.checkLineExists(this._internalDocument,a);var c=this._internalDocument.getLineNode(a-1).box;this.scrollElementToPercent(c,b)},scrollElementToPercent:function(a,b){t.assert(t.isDescendant(a,this.getDomtarget()));if(void 0===
b||null===b)b=this._DEFAULT_SCROLL_AMOUNT;var c=(this.getClientHeight()-a.clientHeight)*(b/100);this.setScrollTop(a.offsetTop-c)},getLineAtPercent:function(a){var b=this.getScrollTop(),c=this.getClientHeight();a=this.getLineColumnFromCoordinate({x:0,y:b+c*(a/100)}).line;var d=this.getFirstVisibleLineNumber();a===d&&this.getCoordinateForLineColumn(d,1).y<b&&(a+=1);d=this.getLastVisibleLineNumber();a===d&&(d=this.getCoordinateForLineColumn(d,1),d.y+d.height>b+c&&(a-=1));return Math.min(this._internalDocument.getMaxLineNumber(),
Math.max(1,a))},getPositionAtPercent:function(a){a=this.getLineAtPercent(a);return this._internalDocument.getPositionForLineColumn(a,1)},getLinePercentScrolled:function(a,b,c){m.checkLineExists(this._internalDocument,a);b||m.assert(this.isLineInView(a,c),this._LINE_SHOULD_BE_IN_VIEW);c=this.getCoordinateForLineColumn(a,1);a=c.y;c=c.height;c=this.getClientHeight()-c;var d=this.getScrollTop();a=100*((a-d)/c);isNaN(a)&&(a=0);b||(a=Math.max(Math.min(100,a),0));return a},getNodePercentScrolled:function(a,
b){var c=this._internalDocument.getLineNumber(a)+1;return this.getLinePercentScrolled(c,b)},isNodeInView:function(a,b){m.assert("boolean"===typeof b||"undefined"===typeof b,"Second parameter should be boolean");var c=this._internalDocument.getLineNumber(a)+1;return this.isLineInView(c,b)},isLineInView:function(a,b){m.assert("boolean"===typeof b||"undefined"===typeof b,"Second parameter should be boolean");m.checkLineExists(this._internalDocument,a);var c=this.getFirstVisibleLineNumber(b),d=this.getLastVisibleLineNumber(b);
return a>=c&&a<=d},getVisibleLineNumbers:function(a){var b=this.getFirstVisibleLineNumber(a);a=this.getLastVisibleLineNumber(a);for(var c=[];b<=a;b+=1)this._internalDocument.getLineNode(b-1).box&&c.push(b);return c},isPositionInView:function(a,b){m.assert("boolean"===typeof b||"undefined"===typeof b,"Second parameter should be boolean");m.assert(a,this._POSITION_SHOULD_NOT_BE_NULL);if(!a.isValid())return!1;var c=this.getCoordinateForPosition(a),d=this.getLineColumnFromCoordinate(c);return!this.isLineInView(d.line,
b)?!1:b?c.x>=this.getScrollLeft()&&c.x+c.width<=this.getScrollLeft()+this.getClientWidth():c.x<=this.getScrollLeft()+this.getClientWidth()&&c.x+c.width>=this.getScrollLeft()},getFirstVisibleLineNumber:function(a){m.assert("boolean"===typeof a||"undefined"===typeof a,"Second parameter should be boolean");var b={x:0,y:this._getTopOfView()},b=this.getLineFromCoordinate(b);a&&!this.isLineFullyOnScreen(b)&&(b+=1);return b},getFirstVisibleNode:function(a){a=this.getFirstVisibleLineNumber(a);return this._internalDocument.getLineNode(a-
1)},getLastVisibleLineNumber:function(a){m.assert("boolean"===typeof a||"undefined"===typeof a,"Second parameter should be boolean");var b={x:0,y:this._getBottomOfView()-1},b=this.getLineFromCoordinate(b),c=this._internalDocument.getMaxLineNumber(),b=0<=b?b:c;a&&!this.isLineFullyOnScreen(b)&&(b-=1);return b},getLastVisibleNode:function(a){a=this.getFirstVisibleLineNumber(a);return this._internalDocument.getLineNode(a-1)},isLineFullyOnScreen:function(a){m.assert("number"===typeof a,a+" is not of type number");
a=this._internalDocument.getLineNode(a-1);return this.isNodeFullyOnScreen(a)},isNodeFullyOnScreen:function(a){m.assert(q.isNode(a),a+" is not of type Node");var b=this.getCoordinateForNode(a);a=b.y;b=a+b.height;a=a>=this._getTopOfView();b=b<=this._getBottomOfView();return a&&b},_getTopOfView:function(){return this.getScrollTop()},_getBottomOfView:function(){return this._getTopOfView()+this.getClientHeight()},getDocumentDimension:function(){return this._viewModel.getDocumentDimension()},scrollLineColumnIntoView:function(a,
b,c,d){m.checkLineColumnExists(this._internalDocument,a,b);a=this._internalDocument.getPositionForLineColumn(a,b);return this.scrollPositionIntoView(a,c,d)},scrollPositionIntoView:function(a,b,c){b=b||this._DEFAULT_VERTICAL_PADDING;c=c||this._DEFAULT_HORIZONTAL_PADDING;var d;m.assert(a,this._POSITION_SHOULD_NOT_BE_NULL);if(!a.isValid())return!1;d=this.getCoordinateForPosition(a);d||(a=a.getNode(),d=this.getCoordinateForNode(a));if(0>d.x||0>d.y)return!1;var e=d.y,f=this.getScrollTop()+b,g=e+d.height,
h=this.getScrollTop()+this.getClientHeight()-b;b=e<=f;a=g>=h;var k=g-e>h-f;a&&b&&(b=a=!1);var l=this.getScrollTop();k?a?l-=f-e:b&&(l+=g-h):a?l+=g-h:b&&(l-=f-e);l=Math.max(0,l);this.setScrollTop(l);d=d.x;e=this.getScrollLeft()+c;c=Math.max(0,this.getScrollLeft()+this.getClientWidth()-c);f=d<=e;g=d>=c;h=this.getScrollLeft();g?h+=d-c:f&&(h-=e-d);h=Math.max(0,h);this.setScrollLeft(h);return a||b||f||g},applyClassToLine:function(a,b){var c=this._internalDocument.getLineNode(a);c&&this._layoutManager.applyClass(c,
b)},removeClassFromLine:function(a,b){var c=this._internalDocument.getLineNode(a);c&&this._layoutManager.clearClass(c,b)},removeClassFromAllLines:function(a){for(var b=this._internalDocument.getMaxLineNumber(),c=0;c<b;c+=1)this.removeClassFromLine(c,a)},getCoordinateForLineColumn:function(a,b){m.checkLineColumnExists(this._internalDocument,a,b);var c=this._internalDocument.getPositionForLineColumn(a,b);return this.getCoordinateForPosition(c)},getLineColumnFromCoordinate:function(a){return(a=this.getPositionFromCoordinate(a))?
a.getLineColumn():null},getLineFromCoordinate:function(a){return(a=this.getPositionFromCoordinate(a))?a.getLineColumn().line:-1},fixEvent:function(a){var c,d,e,f,g,h;g=this.getDomtarget();h={target:a.target,pageX:a.pageX,pageY:a.pageY,layerX:a.layerX,layerY:a.layerY,button:a.button,offsetX:a.offsetX};f=b.position(g);d=b.position(document.getElementsByTagName("body")[0]);c=f.x-d.x;d=f.y-d.y;e=f.w;f=f.h;h.layerX=a.pageX-Math.floor(c);h.layerY=a.pageY-Math.floor(d);h._meta={viewSelectionOffset:{top:d,
bottom:d+f,left:c,right:c+e}};if((a=a.target)&&!a.rteNode){for(;a&&a!==g&&a.parentNode&&!a.rteNode;)a=a.parentNode;a===g&&(a=this._internalDocument.root.box)}h.target=a?a:this._internalDocument.root.box;h.offsetX=h.layerX+this.getScrollLeft();return h},isFixedEventOutside:function(a){var b=this.getDomTargetPosition();return 0>a.layerX||0>a.layerY||a.layerX>=b.clientWidth||a.layerY>=b.clientHeight},getFixedEventDirectionOutside:function(a){var b={x:0,y:0};a.pageX<a._meta.viewSelectionOffset.left?b.x=
-1:a.pageX>a._meta.viewSelectionOffset.right&&(b.x=1);a.pageY<a._meta.viewSelectionOffset.top?b.y=-1:a.pageY>a._meta.viewSelectionOffset.bottom&&(b.y=1);return b},getFixedEventPositionAtBorder:function(a){var b={target:a.target,layerX:a.layerX,layerY:a.layerY},c=this.getFixedEventDirectionOutside(a);if(0!==c.x||0!==c.y)0>c.x?b.layerX=0:0<c.x&&(b.layerX=a._meta.viewSelectionOffset.right-a._meta.viewSelectionOffset.left),0>c.y?b.layerY=0:0<c.y&&(b.layerY=a._meta.viewSelectionOffset.bottom-a._meta.viewSelectionOffset.top),
b.target=this._internalDocument.root.box;return this.getPositionFromEvent(b)},getCoordinateFromEvent:function(a){a={x:a.layerX,y:a.layerY};if(f("mozilla")&&0===a.x&&0===a.y)return null;a.x+=this.getScrollLeft();a.y+=this.getScrollTop();return a},getPositionFromEvent:function(a){var b=a.target;a=this.getCoordinateFromEvent(a);return this._coordinateConverter.getPositionFromCoordinate({x:a.x,y:a.y+1},b.rteNode)},getCoordinateForNode:function(a){return this.getCoordinateForDomNode(a.box)},getCoordinateForLineNumber:function(a){a=
this._internalDocument.getLineNode(a);return this.getCoordinateForNode(a)},getDomNodeForLine:function(a){return this._internalDocument.getLineNode(a).box},getCoordinateForDomNode:function(a){if(!a||!this._domTarget.contains(a))return{x:0,y:0,width:0,height:0};a=a.getBoundingClientRect();var b=this._domTarget.getBoundingClientRect(),c=a.left-b.left+this.getScrollLeft(),b=a.top-b.top+this.getScrollTop();return{x:c,y:b,width:a.width,height:a.height}},getCoordinateForPosition:function(a){var c=a.getNode().box;
if(!c||!this._domTarget.contains(c))return{x:0,y:0,width:0,height:0};a=this._coordinateConverter.getCoordinateFromPosition(a);var c=this.getDomtarget(),d=b.position(c);a.x=a.pageX-d.x+c.scrollLeft;return a},isValidCoordinate:function(a){return!a||0===a.x&&0===a.y&&0===a.width&&0===a.height?!1:!0},getPositionFromCoordinate:function(a){return this._coordinateConverter.getPositionFromCoordinate({x:a.x,y:a.y+1})},setDraggable:function(a){a||this.setDomTargetDraggable(!1);this._allowDrag=a},setDomTargetDraggable:function(a){this._allowDrag?
this._domTarget.draggable=a:l.assert(!1,"The dom node is not allow to be a draggable object")},isDraggable:function(){return this._allowDrag},isDomTargetDraggable:function(){return this._domTarget.draggable},insertDomNode:function(a,b,c){return this._layoutManager.insertDomNode(a,b,c)?{remove:e.hitch(this._layoutManager,"removeDomNode",a)}:null},setDefaultVerticalPadding:function(a){this._DEFAULT_VERTICAL_PADDING=a}})})},"MW/rtc/view/VisibilityNotifierProvider":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/view/VisibilityNotifier"],function(h,e,g,d){return h(g,{requires:function(){return{createInstance:[]}},createInstance:function(){return new d}})})},"MW/rtc/view/VisibilityNotifier":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/view/VisibilityNotifiable"],function(h,e,g){return h(g,{onShow:function(){},onHide:function(){}})})},"MW/rtc/view/VisibilityNotifiable":function(){define(["dojo/_base/declare"],function(h){return h(null,
{onShow:function(){throw Error("Unimplemented OnShow  method");},onHide:function(){throw Error("Unimplemented onHide  method");}})})},"MW/rtc/view/coordinateconverter/PlainTextCoordinateConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./PlainTextCoordinateConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.view.rangeconverter.converter.plaintext","rtc.view.viewmodel"]}},createInstance:function(d,c){return new g(d,
c)}})})},"MW/rtc/view/coordinateconverter/PlainTextCoordinateConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/leaf/PlainTextNode","./base/TextCoordinateConverter"],function(h,e,g){return h(g,{constructor:function(d,c){this._rangeConverter=d;this._viewModel=c},getApplicableNodeClass:function(){return e}})})},"MW/rtc/view/coordinateconverter/RootCoordinateConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./RootCoordinateConverter"],function(h,
e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/view/coordinateconverter/RootCoordinateConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/inner/RootNode","MW/rtc/view/ViewUtilities","./CoordinateConverterUtilities","./base/VerticalAlignCoordinateConverter"],function(h,e,g,d,c){return h(c,{constructor:function(){},getApplicableNodeClass:function(){return e},getClosestRect:function(b,a,c){var e=this.inherited(arguments);
if(!e){var h=b.children[0],e=this.getDomNode(h).getBoundingClientRect();e.associatedNode=h;return e}d.isCoordinateRightOfRect(a,e)&&(h=g.getLineage(e.associatedNode),e.associatedNode=h[0]);return e},_chooseUpOrDownRect:function(b,a,c){return!d.isCoordinateRightOfRect(b,a)?this.inherited(arguments):g.getLineage(a.associatedNode)[0]!==a.associatedNode?a:this.inherited(arguments)}})})},"MW/rtc/view/coordinateconverter/CoordinateConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"./CoordinateConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.view.viewmodel","rtc.view.coordinateconverter.converter"]}},createInstance:function(d,c,b){return new g(d,c,b)}})})},"MW/rtc/view/coordinateconverter/CoordinateConverter":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractConverterPlugin","./CoordinateConverterUtilities","./base/BaseCoordinateConverter"],function(h,e,g,d){return h(e,{CONVERTER_PLUGIN_NAME:"CoordinateConverter",
constructor:function(c,b,a){this._internalDocument=c;this._viewModel=b;this._baseConverter=new d;this._createConverterMap(a)},getPositionFromCoordinate:function(c,b){var a;c=g.convertFromOffsetToClient(c,this._viewModel);b=b||this._internalDocument.root;do{var d=this._getPositionFromCoordinate(c,b);if(d)a=d,b=d.getNode();else break}while(b.children&&0<b.children.length);return a},_getPositionFromCoordinate:function(c,b){var a=this._getConverter(b),d=this._getRectsRetriever.bind(this),a=a.getClosestRect(b,
c,d);if(!a)return null;var d=a.associatedNode,e=this._getConverter(d);c=g.getProjectedCoordinate(c,a);return e.getPositionFromCoordinate(c,d)},_getRectsRetriever:function(c){return this._getConverter(c).getClientRects(c)},getCoordinateFromPosition:function(c){for(;c;){var b=this._getConverter(c.getNode()),a=b.getCoordinateFromPosition(c);if(a)return a;c=b.getDelegatedPositionForCoordinate(c)}return{x:0,y:0,width:0,height:0,pageX:0}},_getConverter:function(c){return this.inherited(arguments)||this._baseConverter}})})},
"MW/rtc/view/decoration/DecorationProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./Decoration"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.view","rtc.view.decoration.viewmodel","rtc.view.decoration.layerviewmodel"]}},createInstance:function(d,c,b,a){return new g(d,c,b,a)}})})},"MW/rtc/view/decoration/Decoration":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/browsersupport/BrowserSupportUtilities MW/rtc/model/DocumentEventUtilities MW/rtc/model/RangeUtilities MW/rtc/view/ViewEventUtilities MW/rtc/view/decoration/DecorationUtilities MW/rtc/view/decoration/Decorator MW/rtc/view/decoration/LayerDecorator".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n){return h(d,{constructor:function(a,b,d,f){this._internalDocument=a;this._rtcView=b;this._inlineViewModel=d;this._layerViewModel=f;this._decoratorToLineNumberMap=c.createMap();this._decoratorLayerMap=c.createMap();this.own(g.after(a,"onDocumentChanged",e.hitch(this,"_handleDocumentChanged"),!0),g.after(a,"onDocumentReset",e.hitch(this,"_handleDocumentReset")),g.after(d,"onDecorationUpdate",e.hitch(this,"_handleDecorationUpdate"),!0),g.after(f,"onLayerDecoratorUpdate",
e.hitch(this,"_handleLayerDecorationUpdate"),!0),g.after(b,"onViewUpdated",e.hitch(this,"_handleViewUpdated"),!0));this._cachedDocumentWidth=0;this._resetPendingList();this._resetPendingLayerList();this._resetPendingLayerDecorators()},_handleDocumentChanged:function(a){0<this._pendingRanges.length&&this._applyChanges();0<this._pendingLayerDecorators.length&&this._applyLayerChanges()},_handleDocumentReset:function(){this._resetPendingList();this._resetPendingLayerDecorators();this._decoratorToLineNumberMap.clear()},
createDecorator:function(a,b){void 0===b&&(b=!1);return new l(this._inlineViewModel,a,e.hitch(this,"_applyChanges",b))},_applyChanges:function(a){this._getPendingNodes().forEach(this._rtcView.refreshNode,this._rtcView);this._pendingRanges.forEach(function(a){var b=a.getStartPosition().getLineColumn().line-1;a=a.getEndPosition().getLineColumn().line-1;this._rtcView.onLinesDOMUpdated(b,a,!1)},this);if(a&&0<this._pendingRanges.length)this._rtcView.onViewUpdated([f.createEvent(f.EVENTS.renderUpdate)]);
this._resetPendingList()},_getPendingNodes:function(){return Object.keys(this._pendingNodes).map(function(a){return this._pendingNodes[a]},this)},_resetPendingList:function(){this._pendingNodes={};this._pendingRanges=[]},_handleDecorationUpdate:function(a){a.forEach(this._addPendingRange,this)},_addPendingRange:function(b){this._pendingRanges.push(b);a.nodesInRange(b).forEach(this._addPendingNode,this)},_addPendingNode:function(a){this._pendingNodes[a.uid]||(this._pendingNodes[a.uid]=a)},createLayerDecorator:function(a,
b){var c=this._applyLayerChanges.bind(this),c=new n(this._layerViewModel,c,a,b),d=k.createNewLayerForDecorator(c,this._layerViewModel,this._rtcView);this._rtcView.addLayer(d);this._decoratorLayerMap.set(c,d);return c},_applyLayerChanges:function(){this._pendingLayerDecorators.forEach(function(a){var b=this._decoratorLayerMap.get(a),c=k.createNewLayerForDecorator(a,this._layerViewModel,this._rtcView);this._rtcView.switchLayer(c,b);this._decoratorLayerMap.set(a,c);this._getNodesToRefreshForLayerDecorator(a).forEach(this._addPendingLayerNode,
this)},this);this._resetPendingLayerDecorators();this._refreshPendingLayerNodes();this._resetPendingLayerList()},_refreshPendingLayerNodes:function(){this._getPendingLayerNodes().forEach(function(a){this._rtcView.refreshNode(a);a=a.startPosition();null!==a&&(a=a.getLine()-1,this._rtcView.onLinesDOMUpdated(a,a,!0))},this)},_getNodesToRefreshForLayerDecorator:function(a){var b=[];this._decoratorToLineNumberMap.has(a)&&(b=this._decoratorToLineNumberMap.get(a));var c=[],d=this._layerViewModel.getDescriptorsForLayerDecorator(a);
null!==d&&(c=d.map(function(a){return a.getRange().getStartPosition().getLine()},this));var d=b.filter(function(a){return 0>c.indexOf(a)},this),e=c.filter(function(a){return 0>b.indexOf(a)},this);this._decoratorToLineNumberMap.set(a,c);return d.concat(e).map(this._getLineNodeForLineNumber.bind(this)).filter(function(a){return a})},_getLineNodeForLineNumber:function(a){return this._internalDocument.getLineNode(a-1)},_addPendingLayerNode:function(a){this._pendingLayerNodes[a.uid]||(this._pendingLayerNodes[a.uid]=
a)},_getPendingLayerNodes:function(){return Object.keys(this._pendingLayerNodes).map(function(a){return this._pendingLayerNodes[a]},this)},_resetPendingLayerList:function(){this._pendingLayerNodes={}},_resetPendingLayerDecorators:function(){this._pendingLayerDecorators=[]},_handleLayerDecorationUpdate:function(a){-1===this._pendingLayerDecorators.indexOf(a)&&this._pendingLayerDecorators.push(a)},_handleViewUpdated:function(a){if(f.hasSizingEvent(a)||f.hasLayoutEvent(a)||this._cachedDocumentWidth!==
this._rtcView.getDocumentDimension().width)this._cachedDocumentWidth=this._rtcView.getDocumentDimension().width,this._redrawAllLayerDecorators()},_redrawAllLayerDecorators:function(){this._decoratorLayerMap.forEach(function(a,b){var c=k.createNewLayerForDecorator(b,this._layerViewModel,this._rtcView);this._rtcView.switchLayer(c,a);this._decoratorLayerMap.set(b,c)},this)},destroy:function(){this.inherited(arguments);this._resetPendingList();this._resetPendingLayerList();this._resetPendingLayerDecorators();
this._decoratorLayerMap.clear();this._decoratorToLineNumberMap.clear()}})})},"MW/rtc/view/decoration/Decorator":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(e,g,d){this._viewModel=e;this._priority=g||0;this._applyChangesCallback=d},updateClasses:function(e,g){this._viewModel.updateClasses(e,g,this)},addClasses:function(e){this._viewModel.addClasses(e,this)},addClass:function(e,g){this._viewModel.addClass(e,g,this)},removeClass:function(e,g){this._viewModel.removeClass(e,
g,this)},setStyle:function(e,g,d){this._viewModel.setStyle(e,g,d,this)},removeStyle:function(e,g){this._viewModel.removeStyle(e,g,this)},addDomNode:function(e,g,d){this._viewModel.addDomNode(g,e,d,this)},removeDomNode:function(e,g,d){this._viewModel.removeDomNode(g,e,d,this)},clearRange:function(e){this._viewModel.clearRange(e,this)},applyChanges:function(){this._applyChangesCallback()},priority:function(){return this._priority}})})},"MW/rtc/view/decoration/LayerDecorator":function(){define(["dojo/_base/declare",
"MW/rtc/model/CodeUtilities","mw-log/Log"],function(h,e,g){return h(null,{constructor:function(d,c,b,a){this._viewModel=d;this._applyChangesCallback=c;this._layerCssClass=b||"";this._lineNodeCSSClass=a||""},getLayerCssClass:function(){return this._layerCssClass},getLineNodeCssClass:function(){return this._lineNodeCSSClass},addClasses:function(d){d.forEach(function(c){this.addClass(c.range,c.classList)},this)},addClass:function(d,c){g.assert(e.isCodeRange(d.getStartPosition().getNode(),d.getEndPosition().getNode()),
"Layer decorator class should only be applied to code range");this._viewModel.addLayerClass(d,c,this)},removeClass:function(d,c){this._viewModel.removeLayerClass(d,c,this)},setStyle:function(d,c){this._viewModel.setLayerStyle(d,c,this)},removeStyle:function(d,c){this._viewModel.removeStyle(d,c,this)},clearRange:function(d){this._viewModel.clearLayerRange(d,this)},applyChanges:function(){this._applyChangesCallback()}})})},"MW/rtc/view/decoration/LayerDecoratorMarginDecoratorProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/view/decoration/LayerDecoratorMarginDecorator"],function(h,e,g){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.view.decoration.layerviewmodel","rtc.view","rtc.internaldocument"]}},createInstance:function(d,c,b){return g(d,c,b)}})})},"MW/rtc/view/decoration/LayerDecoratorMarginDecorator":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style mw-log/Log MW/rtc/browsersupport/BrowserSupportUtilities MW/rtc/margin/AbstractLineMarginDecorator MW/rtc/view/ViewUtilities".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n){return h(l,{_DEFAULT_WIDTH:16,_BASE_CSS_CLASS:"marginLineHighlight",constructor:function(a,b,c){this._decorationViewModel=a;this._view=b;this._internalDocument=c;this._pendingDecoratorListeners=k.createMap();this.own(g.after(this._decorationViewModel,"onLayerDecoratorUpdate",e.hitch(this,"_handleLayerDecorationChanged"),!0))},hasLayerForLineNumber:function(a,b){return this._decorationViewModel.hasLayerDecorationForLineNumber(a+1)},createDecorationForLineNumber:function(a,
c){var d=b.create("div"),e=a+1,f=this._decorationViewModel.getLayerCssClassesArrayForLineNumber(e),g=this._decorationViewModel.getLayerStylesArrayForLineNumber(e),e=this._internalDocument.getPositionForLineColumn(e,1),e=n.getVerticalDimensionsBetweenPositions(e,e,this._view),h=e.bottom-e.top;f.forEach(function(c,e){var f=b.create("div",{style:{height:h+"px"}},d);this._applyStyle(f,c,g[e],a)},this);return d},_applyStyle:function(b,d,e,f){d=d.slice();d.push(this._BASE_CSS_CLASS);var g=d.join(" ");c.add(b,
g);a.set(b,e);this._addTestTag(b,d,f)},_addTestTag:function(a,b,c){c=b&&0<b.length?c+"_"+b.join("_"):c+"_invalid";d.set(a,"data-testid",c)},_handleLayerDecorationChanged:function(a){if(!this._pendingDecoratorListeners.has(a)){var b=g.after(a,"applyChanges",this._handleDecoratorChangesApplied.bind(this,a));this._pendingDecoratorListeners.set(a,b)}},_handleDecoratorChangesApplied:function(a){this._pendingDecoratorListeners.get(a).remove();this._pendingDecoratorListeners.delete(a);this.onUpdate()},getWidth:function(){return this._DEFAULT_WIDTH}})})},
"MW/rtc/view/decoration/viewmodel/DecorationDescriptorsStoreProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./DecorationDescriptorsStore"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/view/decoration/viewmodel/DecorationDescriptorsStore":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin","MW/rtc/browsersupport/BrowserSupportUtilities","MW/rtc/model/PositionUtilities",
"MW/rtc/model/RangeUtilities"],function(h,e,g,d,c){return h(e,{constructor:function(){this._descriptorMap=g.createMap()},add:function(b){var a=this._getKeyForDescriptor(b);this._descriptorMap.set(a,b)},remove:function(b){this._destroyDescriptor(b);this._removeFromMap(b)},clear:function(){this._clearMap()},classesEqualToByRange:function(b,a,d){var e=this._getRangeDescriptionMapForDecorator(b,d);return 0===a.length&&0===Object.keys(e).length?!0:!(a.some(function(a){return c.rangeIterator(a.range,function(b,
c,d){b=e[this._getKeyForNode(b)];return!b||!this._compareClassesAndEliminate(b,c,d,a.classList)}.bind(this))},this)||this._hasResidualsInRangeDecorationMap(e))},_compareClassesAndEliminate:function(b,a,c,d){for(;a<c;a+=1){var e=b[a];if(!e||!e.classesEqualTo(d))return!1;delete b[a]}return!0},_hasResidualsInRangeDecorationMap:function(b){return Object.keys(b).some(function(a){return 0<Object.keys(b[a]).length},this)},_getRangeDescriptionMapForDecorator:function(b,a){var c={};this.getForRange(b).forEach(function(b){var d=
b.getAtomicDescriptor(a);if(d){var e=b.getRange().getStartPosition().getNode(),g=this._getKeyForNode(e),e=c[g];e||(e={},c[g]=e);g=b.getStartOffset();for(b=b.getEndOffset();g<b;g+=1)e[g]=d}},this);return c},getForRange:function(b){var a=[];c.rangeIterator(b,function(b,c,d){a=0===c&&d===b.maxOffset()?a.concat(this.getForNode(b)):a.concat(this.getInNode(b,c,d))}.bind(this));return a},getForNode:function(b){var a=[];d.getPositions(b).forEach(function(b){(b=this.getForPosition(b))&&a.push(b)},this);return a.sort(function(a,
b){return a.getStartOffset()-b.getStartOffset()})},getForPosition:function(b){return this._descriptorMap.get(b)},getInNode:function(b,a,c){return this.getForNode(b).filter(function(b){var d=b.getStartOffset();b=b.getEndOffset();return d>=a&&d<c||b>a&&b<=c||d<a&&b>c},this)},_removeFromMap:function(b){b=this._getKeyForDescriptor(b);this._descriptorMap["delete"](b)},_getKeyForDescriptor:function(b){return b.getRange().getStartPosition()},_getKeyForNode:function(b){return b.uid},_clearMap:function(){this._descriptorMap.forEach(this._destroyDescriptor,
this);this._descriptorMap.clear()},_destroyDescriptor:function(b){b.destroy()},destroy:function(){this.inherited(arguments);this.clear()}})})},"MW/rtc/view/decoration/viewmodel/DecorationLayerViewModelProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./DecorationLayerViewModel"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument"]}},createInstance:function(d){return new g(d)}})})},"MW/rtc/view/decoration/viewmodel/DecorationLayerViewModel":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/model/CodeUtilities MW/rtc/view/decoration/viewmodel/DecorationRangeDescriptor MW/rtc/view/decoration/viewmodel/LayerDecoratorDescriptorStore".split(" "),
function(h,e,g,d,c,b,a){return h(d,{constructor:function(b){this._internalDocument=b;this._layerDecoratorDescriptorsStore=new a;this.own(g.after(this._internalDocument,"onDocumentReset",e.hitch(this,"_handleDocumentReset")))},_handleDocumentReset:function(){this._layerDecoratorDescriptorsStore.clear()},getAllLayerDecoratorsForRange:function(a){return this._layerDecoratorDescriptorsStore.getAllDecoratorsForRange(a)},getLayerDecoratorsLineNodeCSSForRange:function(a){return this.getAllLayerDecoratorsForRange(a).map(function(a){return a.getLineNodeCssClass()}).join(" ")},
hasLayerDecorationForLineNumber:function(a){a=this._internalDocument.getRangeForLine(a);if(!this._isValidRangeForLineNumberSearch(a))return!1;a=this._getAllLayerDescriptorsForRange(a);for(var b=0;b<a.length;b+=1){var c=a[b].getClasses();if(0<Object.keys(c).length)return!0}return!1},_getAllLayerDescriptorsForRange:function(a){var b=[];this._layerDecoratorDescriptorsStore.getAllDecoratorsForRange(a).forEach(function(c){b.push(this._layerDecoratorDescriptorsStore.getDescriptorForRange(a,c))},this);return b},
getLayerCssClassesArrayForLineNumber:function(a){var b=[];a=this._internalDocument.getRangeForLine(a);if(!this._isValidRangeForLineNumberSearch(a))return b;this._getAllLayerDescriptorsForRange(a).forEach(function(a){a=a.getClasses();a=Object.keys(a);b.push(a)},this);return b},getLayerStylesArrayForLineNumber:function(a){var b=[];a=this._internalDocument.getRangeForLine(a);this._getAllLayerDescriptorsForRange(a).map(function(a){a=a.getStyles();b.push(a)},this);return b},addLayerClass:function(a,b,
c){var d=a.getStartPosition();a=a.getEndPosition();d.setPosition(d.getNode(),0);a.setPosition(d.getNode(),d.getNode().maxOffset());var e=this._createLayerDescriptor({startPosition:d,endPosition:a});b.forEach(function(a){e.addClass(a,c)},this);this._configureLayerRangeDescriptor(e,c)},removeLayerClass:function(a,b,c){var d=a.getStartPosition(),e=a.getEndPosition();d.setPosition(d.getNode(),0);e.setPosition(d.getNode(),d.getNode().maxOffset());var g=this._layerDecoratorDescriptorsStore.getDescriptorForRange(a,
c);b.forEach(function(a){g.removeClass(a,c)},this);this.onLayerDecoratorUpdate(c)},setLayerStyle:function(a,b,c){var d=this._createLayerRangeDescriptor(a);Object.keys(b).forEach(function(a){d.setStyle(a,b[a],c)},this);this._configureLayerRangeDescriptor(d,c)},_createLayerRangeDescriptor:function(a){var b=a.getStartPosition();a=a.getEndPosition();b.setPosition(b.getNode(),0);a.setPosition(b.getNode(),b.getNode().maxOffset());return this._createLayerDescriptor({startPosition:b,endPosition:a})},_configureLayerRangeDescriptor:function(a,
b){a.addChangeListener(this._handleLayerDescriptorChanged.bind(this,a,b));this._layerDecoratorDescriptorsStore.add(b,a);this.onLayerDecoratorUpdate(b)},getDescriptorsForLayerDecorator:function(a){return this._layerDecoratorDescriptorsStore.get(a)},clearLayerRange:function(a,b){this._layerDecoratorDescriptorsStore.clearRange(a,b);this.onLayerDecoratorUpdate(b)},_createLayerDescriptor:function(a){a.startPosition.setLive(!0);a.endPosition.setLive(!0);return new b(a)},_handleLayerDescriptorChanged:function(a,
b,c){c.hasOwnProperty("columnHasChanged")?this._handleActivePositionUpdateForLayer(a,b,c):this._handlePositionUpdateForLayer(a,b)},_handlePositionUpdateForLayer:function(a,b){var d=a.getRange(),e=d.getStartPosition().getNode();c.isCodeContainer(e)||this._clearRangeFromDecoratorAndUpdate(d,b)},_handleActivePositionUpdateForLayer:function(a,b,c){var d=a.getRange(),e=this._isRangeStartEndEqual(d);a=a.getStartOffset()>a.getEndOffset();e=e||a;c.columnHasChanged&&(!c.lineHasChanged&&1===d.getEndPosition().getColumn())&&
(e=!1);if(e)this._clearRangeFromDecoratorAndUpdate(d,b);else if(c.lineHasChanged)this.onLayerDecoratorUpdate(b)},_clearRangeFromDecoratorAndUpdate:function(a,b){this._layerDecoratorDescriptorsStore.clearRange(a,b);this.onLayerDecoratorUpdate(b)},_isRangeStartEndEqual:function(a){return a.getStartPosition().isEqualTo(a.getEndPosition())},_isValidRangeForLineNumberSearch:function(a){return a.getStartPosition().getNode().rootContainer()===a.getEndPosition().getNode().rootContainer()},onLayerDecoratorUpdate:function(a){},
destroy:function(){this.inherited(arguments);this._layerDecoratorDescriptorsStore.clear()}})})},"MW/rtc/view/decoration/viewmodel/LayerDecoratorDescriptorStore":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/abstract/AbstractPlugin","MW/rtc/browsersupport/BrowserSupportUtilities","MW/rtc/model/PositionUtilities"],function(h,e,g,d,c){return h(g,{constructor:function(){this._descriptorMap=d.createMap()},add:function(b,a){var c=this._descriptorMap.get(b);if(c){var d=this.getDescriptorForRange(a.getRange(),
b);d?this._mergeClasses(d,a,b):c.push(a)}else c=[a],this._descriptorMap.set(b,c)},_mergeClasses:function(b,a,c){a=a.getDescriptorMap().get(c).getClasses();for(var d in a)a.hasOwnProperty(d)&&b.addClass(d,c)},getDescriptorForRange:function(b,a){var d=this._descriptorMap.get(a);if(!d)return null;for(var e=0;e<d.length;e++){var g=d[e],h=g.getRange().getStartPosition(),p=b.getStartPosition(),m=b.getEndPosition();if(0>=c.comparePositions(p,h)&&0<=c.comparePositions(m,h))return g}return null},get:function(b){return this._descriptorMap.has(b)?
this._descriptorMap.get(b):null},getAllDecoratorsForRange:function(b){var a=b.getStartPosition(),d=b.getEndPosition(),e=[];this._descriptorMap.forEach(function(b,g){b.some(function(b){b=b.getRange().getStartPosition();if(0>=c.comparePositions(a,b)&&0<=c.comparePositions(d,b))return e.push(g),!0},this)},this);return e},clearRange:function(b,a){var c=this.getDescriptorForRange(b,a);if(null!==c){var d=this._descriptorMap.get(a),c=d.indexOf(c);d.splice(c,1)}b.destroy()},clear:function(){this._clearMap()},
_clearMap:function(){this._descriptorMap.forEach(this._destroyDescriptors,this);this._descriptorMap.clear()},_destroyDescriptors:function(b){b.forEach(this._destroyDescriptor,this)},_destroyDescriptor:function(b){b.destroy()},destroy:function(){this.inherited(arguments);this._clearMap()}})})},"MW/rtc/view/decoration/viewmodel/DecorationViewModelProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./DecorationViewModel"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument",
"rtc.view.decoration.descriptorsstore"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/view/decoration/viewmodel/DecorationViewModel":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/model/CodeUtilities MW/rtc/model/DocumentUtilities MW/rtc/model/Position MW/rtc/model/RangeUtilities MW/rtc/view/decoration/DecorationUtilities MW/rtc/view/decoration/viewmodel/DecorationRangeDescriptor".split(" "),function(h,e,g,d,c,b,a,f,k,l){return h(d,
{constructor:function(a,b){this._internalDocument=a;this._descriptorsStore=b;this.own(g.after(this._internalDocument,"onDocumentReset",e.hitch(this,"_handleDocumentReset")))},_handleDocumentReset:function(){this._descriptorsStore.clear()},getDecoration:function(a){var b=this._descriptorsStore.getForNode(a),c=[];if(this._invalidDescriptorsForNode(b,a))return c;b.forEach(function(a){if(!this._isRangeDescriptorPositionsInvalidOrFlipped(a)){var b=a.getStartOffset(),d=a.getEndOffset();c.push({start:b,
end:d,styles:a.getStyles(),classes:a.getClasses(),domNodes:a.getDomNodes()})}},this);return c},_invalidDescriptorsForNode:function(a,b){var c=b.maxOffset(),d=0;return a.some(function(a){var b=a.getStartOffset();a=a.getEndOffset();if(b<d||a>c||b>a)return!0;d=a},this)},updateClasses:function(a,b,c){this._descriptorsStore.classesEqualToByRange(a,b,c)||(this.clearRange(a,c),this.addClasses(b,c))},addClasses:function(a,b){a.forEach(function(a){this.addClass(a.range,a.classList,b)},this)},addClass:function(a,
b,c){this._addDecoration(a,function(a){a.forEach(function(a){b.forEach(function(b){a.addClass(b,c)},this)},this)})},removeClass:function(a,b,c){this._removeDecoration(a,function(a){return a.filter(function(a){var d=!1;b.forEach(function(b){d=a.removeClass(b,c)||d},this);return d},this)})},setStyle:function(a,b,c,d){this._addDecoration(a,function(a){a.forEach(function(a){a.setStyle(b,c,d)},this)})},removeStyle:function(a,b,c){this._removeDecoration(a,function(a){return a.filter(function(a){return a.removeStyle(b,
c)},this)})},addDomNode:function(a,b,c,d){var e,f;switch(c){case k.PLACEMENT.BEFORE:e=a.getStartPosition();f="first";break;case k.PLACEMENT.AFTER:e=a.getEndPosition();f="last";break;case k.PLACEMENT.BETWEEN:e=a.getStartPosition(),f="last"}this._addDecoration(a,function(a){a=this._getDescriptorForDomNodeLocation(a,c);null!==a&&a.addDomNode(b,e,f,d)}.bind(this))},removeDomNode:function(a,b,c,d){this._removeDecoration(a,function(a){var e=[];a=this._getDescriptorForDomNodeLocation(a,c);null!==a&&a.removeDomNode(b,
d)&&e.push(a);return e}.bind(this))},_getDescriptorForDomNodeLocation:function(a,b){if(1>a.length)return null;var c=0;b===k.PLACEMENT.AFTER&&(c=a.length-1);return a[c]},clearRange:function(a,b){this._removeDecoration(a,function(a){return a.filter(function(a){if(a.clear(b))return!0},this)})},_addDecoration:function(a,b){if(this._isRangeExpected(a)){var c=this._prepareDescriptorsForRange(a,!0);b(c);c.forEach(this._mergeForSiblingDescriptors,this);this.onDecorationUpdate([a])}},_removeDecoration:function(a,
b){if(this._isRangeExpected(a)){var c=this._prepareDescriptorsForRange(a,!1),d=this._applyCallbackAndGetRemovedRanges(c,b);c.forEach(this._mergeForSiblingDescriptors,this);c.forEach(this._cleanupForSiblingDescriptors,this);this.onDecorationUpdate(d)}},_applyCallbackAndGetRemovedRanges:function(a,b){return b(a).map(function(a){return a.getRange()})},_prepareDescriptorsForRange:function(a,b){this._updateDescriptorsRange(a);var c=a.getStartPosition().getNode(),d=a.getStartPosition().getOffset(),e=a.getEndPosition().getNode(),
f=a.getEndPosition().getOffset();c===e?this._prepareDescriptorsInNode(c,d,f,b):(this._prepareDescriptorsInNode(c,d,c.maxOffset(),b),c.nextNode()!==e&&this._prepareDescriptorsBetweenNodes(c.nextNode(),e.prevNode(),b),this._prepareDescriptorsInNode(e,0,f,b));return this._descriptorsStore.getForRange(a)},_updateDescriptorsRange:function(a){var b=[];this._descriptorsStore.getForRange(a).forEach(function(a){var c=a.getRange();f.rangeIsInsideOneNode(c)||(a=this._handleRangeChangeAcrossNodes(a),b=b.concat(a))},
this);this.onDecorationUpdate(b)},_prepareDescriptorsBetweenNodes:function(a,b,c){for(;a;){this._prepareDescriptorsInNode(a,0,a.maxOffset(),c);if(a===b)break;a=a.nextNode()}if(a!==b)throw Error("The input startNode and endNode don't seem to span a range");},_prepareDescriptorsInNode:function(a,b,c,d){var e=this._descriptorsStore.getInNode(a,b,c);if(0===e.length)d&&this._createAndAddDescriptor(a,b,c);else{var f,g;d&&e.forEach(function(b){f=b.getStartOffset();f>g&&this._createAndAddDescriptor(a,g,f);
g=b.getEndOffset()},this);var h=e[e.length-1],k=h.getStartOffset(),l=h.getEndOffset();c>k&&c<l?this._split(h,c):d&&l<c&&this._createAndAddDescriptor(a,l,c);c=e[0];e=c.getStartOffset();h=c.getEndOffset();b>e&&b<h?this._split(c,b):d&&b<e&&this._createAndAddDescriptor(a,b,e)}},_createAndAddDescriptor:function(b,c,d,f){if(c>=d)return null;c=new a(b,c);b=new a(b,d);f=f||{};e.mixin(f,{startPosition:c,endPosition:b});f=this._createDescriptor(f);f.addChangeListener(this._handleDescriptorChanged.bind(this,
f));this._descriptorsStore.add(f);return f},_createDescriptor:function(a){a.startPosition.setRightAligned(!0);a.startPosition.setLive(!0);a.endPosition.setLive(!0);return new l(a)},_split:function(a,b){var c=a.getStartNode(),d=a.cloneSettings(),e=a.getEndOffset();a.adjust(b);return this._createAndAddDescriptor(c,b,e,d)},_mergeForSiblingDescriptors:function(a){a=a.getStartNode();a=this._descriptorsStore.getForNode(a);this._merge(a)},_merge:function(a){for(var b=0;b<a.length-1;){var c=a[b],d=a[b+1];
c.canMerge(d)?(c.merge(d),a.splice(b+1,1),this._descriptorsStore.remove(d)):b+=1}},_cleanupForSiblingDescriptors:function(a){a=a.getStartNode();a=this._descriptorsStore.getForNode(a);this._cleanup(a)},_cleanup:function(a){a.filter(function(a){return!a.hasDecoration()}).forEach(this._descriptorsStore.remove,this._descriptorsStore)},_handleDescriptorChanged:function(a){var b=a.getRange(),c=this._isRangeStartEndEqual(b),d=f.rangeIsInsideOneNode(b),e=d&&a.getStartOffset()>a.getEndOffset();c||e?(this._descriptorsStore.remove(a),
this.onDecorationUpdate([b])):(a=d?this._handleRangeChangeInNode(a):this._handleRangeChangeAcrossNodes(a),this.onDecorationUpdate(a))},_handleRangeChangeAcrossNodes:function(a){var b=[],c=a.getStartNode(),d=a.getEndNode(),e=a.getEndOffset();if(this._isRangeDescriptorPositionsInvalidOrFlipped(a))return this._descriptorsStore.remove(a),b;c=c.maxOffset();a.adjust(c);b.push(a.getRange());0<e&&(a=a.cloneSettings(),d=this._createAndAddDescriptor(d,0,e,a),b.push(d.getRange()));return b},_isRangeDescriptorPositionsInvalidOrFlipped:function(a){var c=
a.getRange(),d=a.getStartNode();a=a.getEndNode();return!c.getStartPosition().isValid()||!c.getEndPosition().isValid()||-1===b.nodesInOrder(d,a)},_handleRangeChangeInNode:function(a){this._mergeForSiblingDescriptors(a);return[a.getRange()]},_isRangeExpected:function(a){if(a.getStartPosition().isLinePosition()||a.getEndPosition().isLinePosition())throw Error("Input range for decoration cannot be line positions");return this._isRangeStartEndEqual(a)?!1:!0},_isRangeStartEndEqual:function(a){return a.getStartPosition().isEqualTo(a.getEndPosition())},
onDecorationUpdate:function(a){}})})},"MW/rtc/view/hidden/HiddenNodeModelProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./HiddenNodeModel"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/view/hidden/HiddenNodeModel":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin","MW/rtc/browsersupport/BrowserSupportUtilities","MW/rtc/model/NodeUtilities"],function(h,
e,g,d){return h(e,{constructor:function(){this._hiddenNodes=g.createWeakSet()},setHidden:function(c){if(this.isHidden(c))return null;this._hiddenNodes.add(c);return c},setVisible:function(c){var b=null;d.getLineageReverse(c).forEach(function(a){this._hiddenNodes.delete(a)&&(b=a)},this);return b},isHidden:function(c){return d.getLineageReverse(c).some(function(b){return this._hiddenNodes.has(b)},this)}})})},"MW/rtc/view/hidden/HiddenNodeServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"./HiddenNodeService"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.view.hidden.hiddennodemodel","rtc.view"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/view/hidden/HiddenNodeService":function(){define(["dojo/_base/declare","dojo/aspect","MW/rtc/abstract/AbstractPlugin"],function(h,e,g){return h(g,{constructor:function(d,c){this._hiddenNodeModel=d;this._view=c;this._pendingEvent=!1},hide:function(d){this._hideAndPrepareEvent(d);this._firePendingEvent()},
show:function(d){this._showAndPrepareEvent(d);this._firePendingEvent()},hideAll:function(d){d.forEach(this._hideAndPrepareEvent,this);this._firePendingEvent()},showAll:function(d){d.forEach(this._showAndPrepareEvent,this);this._firePendingEvent()},_hideAndPrepareEvent:function(d){this._setAndPrepareEvent(this._hiddenNodeModel.setHidden.bind(this._hiddenNodeModel),d)},_showAndPrepareEvent:function(d){this._setAndPrepareEvent(this._hiddenNodeModel.setVisible.bind(this._hiddenNodeModel),d)},_setAndPrepareEvent:function(d,
c){var b=d(c);this._layoutNode(b)},_layoutNode:function(d){d&&(this._view.layoutNode(d),this._pendingEvent=!0)},_firePendingEvent:function(){this._pendingEvent&&(this._view.onLayoutChange(),this._pendingEvent=!1)}})})},"MW/rtc/view/rangeconverter/PlainTextRangeConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./PlainTextRangeConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},
"MW/rtc/view/rangeconverter/PlainTextRangeConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/leaf/PlainTextNode","./base/TextRangeConverter"],function(h,e,g){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return e}})})},"MW/rtc/view/rangeconverter/RangeConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./RangeConverter"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["rtc.view.rangeconverter.converter"]}},
createInstance:function(d){return new g(d)}})})},"MW/rtc/view/rangeconverter/RangeConverter":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractConverterPlugin"],function(h,e){return h(e,{CONVERTER_PLUGIN_NAME:"RangeConverter",constructor:function(e){this._createConverterMap(e)},getRangeFromPosition:function(e){var d=e.getNode();return(d=this._getConverter(d))?d.getRangeFromPosition(e):null},getContainerForPosition:function(e,d){var c=e.getNode();return(c=this._getConverter(c))?c.getContainerForPosition(e,
d):null}})})},"MW/rtc/plugins/matlabmobile/MatlabMobileProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/matlabmobile/MatlabMobile"],function(h,e,g){return h(e,{isApplicable:function(){return/Android/.test(navigator.userAgent)},requires:function(){return{isApplicable:[],createInstance:"rtc.clipboard rtc.cutcopypaste rtc.internaldocument rtc.document rtc.cursor rtc.view rtc.actionservice".split(" ")}},createInstance:function(d,c,b,a,e,h,l){return new g(d,
c,b,a,e,h,l)}})})},"MW/rtc/plugins/matlabmobile/MatlabMobile":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-construct dojo/dom-attr dojo/dom-style dojo/has dojo/on mw-messageservice/MessageService mw-remote/Remote MW/rtc/abstract/AbstractPlugin MW/rtc/model/DocumentConstants".split(" "),function(h,e,g,d,c,b,a,f,k,l,n,p){return h(n,{constructor:function(a,b,d,e,f,g,h){this._rtcScrollPane=g.getDomtarget();this._cutCopyPaste=b;this._document=e;this._internalDocument=d;this._cursor=
f;this._view=g;this._actionService=h;this._clipboard=a;this._setupMessageService();c.set(this._rtcScrollPane,"contentEditable",!0);c.set(this._rtcScrollPane,"spellcheck",!1);this._setupEventHandlers()},_setupEventHandlers:function(){this.own(f(this._rtcScrollPane,"keypress",e.hitch(this,function(a){this._handleNativeKeyPress(a)})));this.own(f(this._rtcScrollPane,"keydown",e.hitch(this,function(a){this._handleNativeKeyDown(a)})));this.own(f(this._rtcScrollPane.ownerDocument,"selectionchange",e.hitch(this,
function(a){this._handleNativeSelectionChange(a)})));this.own(f(this._rtcScrollPane.ownerDocument,"cut",e.hitch(this,function(a){this._handleNativeCut(a)})));this.own(f(this._rtcScrollPane.ownerDocument,"copy",e.hitch(this,function(a){this._handleCopy(a)})));this.own(f(this._rtcScrollPane.ownerDocument,"paste",e.hitch(this,function(a){this._handlePaste(a)})))},_setupMessageService:function(){l.setComputeToken({computeSessionId:MM.getComputeTokenSessionId()});l.setWorkerEndpoint(MM.getWorkerRoutingHost(),
MM.getWorkerRoutingKey());l.setEndpoint(MM.getWorkerRoutingHost());var a={filePath:MM.getFilePath(),rtcId:"12345"};k.publish("/mlx/service/readRequest",a)},_handleNativeKeyDown:function(a){"Backspace"===a.key&&(this._document.deleteTextAtCurrentPosition(p.BACKWARD_DELETE),this._syncNativeCursorWithCaret(this._cursor.getLineColumn().line,this._cursor.getLineColumn().column),a.preventDefault(),a.stopPropagation())},_handleNativeKeyPress:function(a){var b=a.key;"Enter"===a.key?b="\n":"Tab"===a.key&&
(b="\t");this._document.insertTextAtCurrentPosition(b);this._syncNativeCursorWithCaret(this._cursor.getLineColumn().line,this._cursor.getLineColumn().column);a.preventDefault();a.stopPropagation()},_handleNativeSelectionChange:function(a){var b=this._rtcScrollPane.ownerDocument.getSelection(),c=b.getRangeAt(0).getClientRects(),d=this._view.getDomtarget().getClientRects()[0].left;0===c.length?(a.layerX=b.getRangeAt(0).startContainer.getClientRects()[0].left-d,a.layerY=b.getRangeAt(0).startContainer.getClientRects()[0].top):
(a.layerX=c[0].left-d,a.layerY=c[0].top);c=this._view.getPositionFromEvent(a).getLineColumn();"Caret"===b.type?(this._cursor.setLineColumn(c.line,c.column),window._caretLine=c.line,window._caretColumn=c.column):"Range"===b.type&&(c=b.anchorNode.parentNode,a.layerX=c.getClientRects()[0].left,a.layerY=c.getClientRects()[0].top,c=this._view.getPositionFromEvent(a).getLineColumn(),d=b.focusNode.parentNode,a.layerX=d.getClientRects()[0].left,a.layerY=d.getClientRects()[0].top,a=this._view.getPositionFromEvent(a).getLineColumn(),
this._cursor.setSelectionLineColumn(c.line,b.anchorOffset+1,a.line,b.focusOffset+1))},_handleNativeCut:function(a){this._actionService.updateAction("rtc_cut",{enabled:!0});this._cutCopyPaste._cut();this._clipboard.getCopyPasteHandlers().cut(a);a.preventDefault()},_handleCopy:function(a){this._actionService.updateAction("rtc_copy",{enabled:!0});this._cutCopyPaste._copy();this._clipboard.getCopyPasteHandlers().copy(a);a.preventDefault()},_handlePaste:function(a){this._actionService.updateAction("rtc_paste",
{enabled:!0});this._cutCopyPaste._paste();this._clipboard.getCopyPasteHandlers().paste(a);this._syncNativeCursorWithCaret(this._cursor.getLineColumn().line,this._cursor.getLineColumn().column);a.preventDefault()},_syncNativeCursorWithCaret:function(a,b){if(!(0===a||0===b)){for(var c=document.getSelection(),d=document.createRange(),e=b-1,f=this._internalDocument.getLineNode(a-1).box,g,h,k=0;k<f.children.length;k++)if(e>f.children[k].textContent.length)e-=f.children[k].textContent.length;else{0===f.children[k].textContent.length?
(g=f.children[k],h=0):(g=f.children[k].lastElementChild.lastChild,h=g.textContent.length<e?g.textContent.length:e);break}d.setStart(g,h);d.setEnd(g,h);c.removeAllRanges();c.addRange(d)}}})})},"MW/rtc/core/_dependencyinjector/SubsystemDependencyError":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(e){this._subsystemId=e},getSubsystemId:function(){return this._subsystemId}})})},"MW/rtc/core/provider/SubsystemPluginsProviderFactory":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./SubsystemPluginsProviderUtilities"],function(h,e,g){return{make:function(d){var c=g.getMembersId(d);return new (h(e,{isApplicable:function(){return!0},requires:function(){return{createInstance:[c]}},createInstance:function(b){return b}}))}}})},"MW/rtc/language/Language":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin","MW/rtc/language/LanguageConstants","mw-log/Log"],function(h,e,g,d){return h(null,{constructor:function(){this._language=
g.DEFAULT_SUPPORTED_LANGUAGES.TEXT;this._supportedLanguages=Object.keys(g.DEFAULT_SUPPORTED_LANGUAGES)},setLanguage:function(c){d.assert(this.isLanguageSupported(c),"Language not supported.");this._language=c},isLanguageSupported:function(c){var b=!1;this._supportedLanguages.forEach(function(a){a===c&&(b=!0)},this);return b},getLanguage:function(){return this._language},getSupportedLanguages:function(){return this._supportedLanguages},addSupportedLanguage:function(c){0<=this._supportedLanguages.indexOf(c)?
d.assert(!1,"Language already supported."):this._supportedLanguages.push(c)},removeSupportedLanguage:function(c){this.isLanguageSupportedLanguage(c)?c in g.DEFAULT_SUPPORTED_LANGUAGES?d.assert(!1,"a default supported language cannot be removed."):(c===this._language&&(this._language=g.DEFAULT_SUPPORTED_LANGUAGES.TEXT),c=this._supportedLanguages.indexOf(c),this._supportedLanguages.splice(c,1)):d.assert(!1,"Language can't be deleted; it is not a supported language.")}})})},"MW/layout/BorderContainer":function(){define("dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/_base/fx dojo/_base/window dojo/dom dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/Evented dojo/mouse dojo/on dojo/touch dijit/layout/_LayoutWidget dijit/layout/ContentPane MW/layout/HidingContainer MW/layout/LayoutChildProperty MW/layout/LayoutContainerEvent MW/layout/LayoutUtils MW/layout/MaximizingContainer MW/layout/Restorable MW/layout/SelectionBlocker MW/layout/Traversable mw-log/Log dojo/text!./templates/CollapsedBorderChildH.html dojo/text!./templates/CollapsedBorderChildV.html".split(" "),
function(h,e,g,d,c,b,a,f,k,l,n,p,m,q,r,s,t,u,v,w,x,A,B,F,G,H,I){var K=Number.MAX_VALUE,C=["top","left","center","right","bottom"],M=["left","top","center","bottom","right"];return h([r,n,F,t,x],{_:void 0,design:"headline",animationEnabled:!0,minimumCenterWidth:100,minimumCenterHeight:100,baseClass:"borderContainer",constructor:function(){this._borderInfo={};this._dragInfo={}},buildRendering:function(){this.inherited(arguments);a.add(this.domNode,"mwLayoutContainer")},startup:function(){if(!this._started){var a=
this;this.getChildren().forEach(function(b){a._setupChild(b)});this.inherited(arguments)}},addWithProperties:function(a,b){var c=b.region,d;G.assert(c,"No region specified for "+a.id);a.region=c;"center"===c?(this._bindCenterProperties(b),this._isCenterProportional=b.isProportional):(d=this._createBorderInfo(c,a),this._bindChildProperties(d,b),b===a?this._getInfoFromWidget(a,d):(g.mixin(d,b),void 0===b.isResizable&&(d.isResizable=d.hasSplitter)),this._borderInfo[c]=d);this.addChild(a)},addChild:function(a){var b=
a.region,c;G.assert(b,"No region specified for "+a.id);"center"===b?(this._centerWidget=a,this._bindCenterProperties(a)):this._isBorderRegion(b)&&((c=this._borderInfo[b])?G.assert(c.widget.getParent()!==this,b+" region already occupied"):(c=this._createBorderInfo(b,a),this._borderInfo[b]=c,this._getInfoFromWidget(a,c)),this._bindChildProperties(c,a));this.inherited(arguments);this._started&&(this._pendingState&&this._isPopulatedPerState(this._pendingState)?(this._restoreState(this._pendingState),
delete this._pendingState):this.layout(),this.emit(v.STATE_CHANGED));"center"===b&&this._updateExpandedStates()},_setupChild:function(c){var d=c.region,e,h,k;this.inherited(arguments);l.set(c.domNode,"position","absolute");if(d){if(d=this._borderInfo[d]){if(c===d.collapsedWidget)return;d.initComplete=!0}else this._initialCenterWidth=c.domNode.style.width,this._initialCenterHeight=c.domNode.style.height;d&&d.hasSplitter&&(h="H"===d.splitterOrientation?"height":"width",k="H"===d.splitterOrientation?
"padding-top":"padding-left",d.isResizable?(d.initialDimension=this._getDimensionFromStyle(d),d.splitterNode=f.create("div",{id:c.domNode.id+"Splitter"},this.domNode),a.add(d.splitterNode,"splitter"+d.splitterOrientation),b.setSelectable(d.splitterNode,!1),w.preventFocus(d.splitterNode,!0),e=f.create("div",{id:c.domNode.id+"SplitterLine"},d.splitterNode),a.add(e,"splitterLine"+d.splitterOrientation),b.setSelectable(e,!1),w.preventFocus(e,!0),d.splitterThickness=Math.round(l.get(d.splitterNode,h)),
d.visibleSplitterThickness=Math.round(l.get(e,h)),d.preSplitterOverlap=Math.round(l.get(d.splitterNode,k)),d.postSplitterOverlap=d.splitterThickness-d.visibleSplitterThickness-d.preSplitterOverlap,d.followOpposite&&l.set(d.splitterNode,{visibility:"hidden"}),h=g.hitch(this,"_beginSplitterDrag",d),m(d.splitterNode,q.press,h),m(e,q.press,h),h=g.hitch(this,"_handleDoubleClick",d),m(d.splitterNode,"dblclick",h),m(e,"dblclick",h),h=function(a){a.preventDefault()},m(d.splitterNode,"contextmenu",h),m(e,
"contextmenu",h)):(d.splitterNode=f.create("div",{id:c.domNode.id+"Splitter"},this.domNode),l.set(d.splitterNode,"position","absolute"),a.add(d.splitterNode,"splitterLine"+d.splitterOrientation),b.setSelectable(d.splitterNode,!1),w.preventFocus(d.splitterNode),d.splitterThickness=Math.round(l.get(d.splitterNode,h)),d.visibleSplitterThickness=d.splitterThickness,d.preSplitterOverlap=0,d.postSplitterOverlap=0),"function"===typeof d.restoredSplitterPosition&&(d.restoredSplitterPosition=d.restoredSplitterPosition()),
d.collapsePending&&(e=this.animationEnabled,this.animationEnabled=!1,h=d.restoredSplitterPosition,k=d.restoredReferenceDimension,this._collapse(d),d.restoredSplitterPosition=h,d.restoredReferenceDimension=k,this.animationEnabled=e,delete d.collapsePending))}},getChildInRegion:function(a){return"center"===a&&this._centerWidget?this._centerWidget:(a=this._borderInfo[a])?a.widget:null},removeChildInRegion:function(a){(a=this.getChildInRegion(a))&&this.removeChild(a);return a},removeChild:function(a){var b=
a.region,c,d={top:"auto",left:"auto",position:"static",clip:"auto"};if("center"===b)this._centerWidget=null,this._unbindCenterProperties&&this._unbindCenterProperties(),d.width=this._initialCenterWidth,d.height=this._initialCenterHeight;else if(c=this._borderInfo[b])c.unbindChildProperties&&c.unbindChildProperties(),c.initialDimension&&("H"===c.splitterOrientation?d.height=c.initialDimension:d.width=c.initialDimension),c.splitterNode&&f.destroy(c.splitterNode),c.isCollapsed&&r.prototype.removeChild.apply(this,
[c.collapsedWidget]),c.collapsedWidget&&c.collapsedWidget.isDefaultCollapsedWidget&&c.collapsedWidget.destroyRecursive(),delete this._borderInfo[b];this.inherited(arguments);if(c||"center"===b)this._started&&(this.layout(),this.emit(v.STATE_CHANGED)),l.set(a.domNode,d)},collapse:function(a){(a=this._borderInfo[a])&&this._collapse(a)},isCollapsed:function(a){return(a=this._borderInfo[a])?!!a.isCollapsed:!1},isCollapsing:function(a){return(a=this._borderInfo[a])?!!a.isCollapsing:!1},expand:function(a){var b,
c,d=[],e;if("center"===a||!this._centerWidget){c=Object.keys(this._borderInfo);for(b=0;b<c.length;b+=1)e=c[b],e!==a&&!this._borderInfo[e].isCollapsed&&(this._collapse(this._borderInfo[e]),d.push(e));"center"===a?(this._setCenterExpanded(!0),this._regionsCollapsedUponCenterExpand=d):this._borderInfo[a]&&(this._setExpanded(this._borderInfo[a],!0),this._borderInfo[a].regionsCollapsedUponExpand=d)}},isExpanded:function(a){return"center"===a?this._isCenterExpanded:this._borderInfo[a]&&this._borderInfo[a].isExpanded},
restore:function(a){var b,c,d,e;if("center"===a)b=this._isCenterExpanded,d=this._regionsCollapsedUponCenterExpand,this._setCenterExpanded(!1),this._regionsCollapsedUponCenterExpand=null;else if((c=this._borderInfo[a])&&c.isExpanded)b=!0,d=c.regionsCollapsedUponExpand,this._setExpanded(c,!1),c.regionsCollapsedUponExpand=null;if(b){b=Object.keys(this._borderInfo);for(c=0;c<b.length;c+=1)e=b[c],e!==a&&(!d||-1!==d.indexOf(e))&&this._restore(this._borderInfo[b[c]])}else c&&this._restore(c)},canMaximizeLocally:function(a){a=
a.region;var b,c;if(a){if(this.isExpanded(a)||"center"!==a)return!1;a=Object.keys(this._borderInfo);for(b=0;b<a.length;b++)if(c=this._borderInfo[a[b]],c.isCollapsible&&!c.isCollapsed)return!0}return!1},canRestoreLocally:function(a){return(a=a.region)?this.isExpanded(a):!1},maximizeLocally:function(a){(a=a.region)&&this.expand(a)},restoreLocally:function(a){(a=a.region)&&this.restore(a)},revealChild:function(a){a=a.region;this.isCollapsed(a)&&this.restore(a)},nextChild:function(a,b){if(0===this.getChildren().length)return null;
var c=this.traversalOrder||("headline"===this.design?C:M),d=c[c.length-1];if(a&&a.region===d&&this.getParent())return null;var e=a?c.indexOf(a.region):-1,f,g,h;for(f=(e+1)%c.length;f!==e;f=(f+1)%c.length){g=c[f];if("center"===g&&this._centerWidget)return this._centerWidget;if((h=this._borderInfo[g])&&(!b||!h.isCollapsed))if(h.widget.nextChild){if(h.widget.nextChild(null,b))return h.widget}else return h.widget;if((!h||b&&h.isCollapsed)&&g===d&&this.getParent())break}return null},previousChild:function(a,
b){if(0===this.getChildren().length)return null;var c=this.traversalOrder||("headline"===this.design?C:M),d=c[0];if(a&&a.region===d&&this.getParent())return null;var e=a?c.indexOf(a.region):c.length,f,g,h;for(f=(e-1+c.length)%c.length;f!==e;f=(f-1)%c.length){g=c[f];if("center"===g&&this._centerWidget)return this._centerWidget;if((h=this._borderInfo[g])&&(!b||!h.isCollapsed))if(h.widget.previousChild){if(h.widget.previousChild(null,b))return h.widget}else return h.widget;if((!h||b&&h.isCollapsed)&&
g===d&&this.getParent())break}return null},isShowingLocally:function(a){return a.getParent()===this&&!this.isCollapsed(a.region)&&!this.isCollapsing(a.region)},resize:function(){var a,b,c,d,e;this.computedStyle||(this.computedStyle=l.getComputedStyle(this.domNode));this.inherited(arguments);!1===this._isCenterProportional&&(this._portionsAreStale=!0);b=Object.keys(this._dragInfo);0<b.length&&(e=k.getContentBox(this.domNode,this.computedStyle));for(a=0;a<b.length;a+=1)if(c=b[a],d=this._dragInfo[c],
d.animation)switch(c){case "left":e.w!==d.lastReferenceDimension&&(c=e.w-d.lastReferenceDimension,d.oppositeCollapsePosition+=c,d.upperLimit+=c,d.lastReferenceDimension=e.w);break;case "top":e.h!==d.lastReferenceDimension&&(c=e.h-d.lastReferenceDimension,d.oppositeCollapsePosition+=c,d.upperLimit+=c,d.lastReferenceDimension=e.h);break;case "right":e.w!==d.lastReferenceDimension&&(c=e.w-d.lastReferenceDimension,d.collapsePosition+=c,d.upperLimit+=c,d.lastReferenceDimension=e.w);break;case "bottom":e.h!==
d.lastReferenceDimension&&(c=e.h-d.lastReferenceDimension,d.collapsePosition+=c,d.upperLimit+=c,d.lastReferenceDimension=e.h)}},getFreeDimension:function(a){return(a=this._borderInfo[a])&&a.freeDimension?a.freeDimension:0},setFreeDimension:function(a,b){var c=this._borderInfo[a];if(c){var d=k.getContentBox(this.domNode,this.computedStyle),e=this._computeSplitterOverhead(),d="H"===c.splitterOrientation?d.h-e.h:d.w-e.w;0<d&&(e=Math.floor(0.25*d),b>=d?b=Math.max(d-100,e):0>b&&(b=e));c.isCollapsed?c.preCollapseFreeDimension=
b:c.freeDimension=b;c.isProportional&&(c.proportion=0<d?c.freeDimension/d:1);this._started&&this.layout()}},getNonCollapsedFreeDimension:function(a){var b=this._borderInfo[a];return b&&b.isCollapsed&&b.preCollapseFreeDimension?b.preCollapseFreeDimension:this.getFreeDimension(a)},getProportion:function(a){return this._getProportion(this._borderInfo[a])},setProportion:function(a,b){var c=this._borderInfo[a];if(c){if(0>b||1<=b)b=0.25;c.proportion=b;this._started&&this.layout()}},getState:function(){var a=
k.getContentBox(this.domNode,this.computedStyle),b={referenceWidth:a.w,referenceHeight:a.h,centerExpanded:!!this._isCenterExpanded},c,d=this;Object.keys(this._borderInfo).forEach(function(e){c=d._borderInfo[e];c.isResizable&&(b[e]=d._getBorderState(c,"left"===e||"right"===e?a.w:a.h))});return b},setState:function(a){this._isPopulatedPerState(a)?this._restoreState(a):this._pendingState=a},isRestoringState:function(){return void 0!==this._pendingState},endStateRestore:function(){delete this._pendingState},
_isPopulatedPerState:function(a){var b=!0,c=["left","right","top","bottom"],d,e,f;for(d=0;d<c.length&&b;d+=1)e=c[d],f=!!this._borderInfo[e]&&this._borderInfo[e].isResizable,f!==(void 0!==a[e])&&(b=!1);return b},_restoreState:function(a){var b=k.getContentBox(this.domNode,this.computedStyle),c=a.referenceWidth===b.w,d=a.referenceHeight===b.h,e=this;this._updateLayoutConstraints();Object.keys(this._borderInfo).forEach(function(b){a[b]&&("H"===e._borderInfo[b].splitterOrientation?e._restoreBorderState(b,
a[b],d,a.referenceHeight):e._restoreBorderState(b,a[b],c,a.referenceWidth))})},_getBorderState:function(a,b){var c={freeDimension:a.isCollapsed?this._computeFreeDimensionFromSplitterPosition(a,a.restoredSplitterPosition,b):a.freeDimension,collapsed:!!a.isCollapsed};a.proportion&&(c.portion=a.proportion);return c},_restoreBorderState:function(a,b,c,d){var e,f=this._borderInfo[a];if(f){var h=this.animationEnabled;this.animationEnabled=!1;f.isResizable&&!f.followOpposite&&(c?(this.setFreeDimension(a,
b.freeDimension),e=b.freeDimension):(e=b.portion||b.proportion,this.setProportion(a,void 0===e?0.25:e),e=Math.floor(this._getProportion(f)*d)));a=b.collapsed||b.isCollapsed;f.isCollapsible&&f.isCollapsed!==a&&(a?this._collapse(f):this._restore(f));a&&(f.restoredSplitterPosition=f.initComplete?this._computeSplitterPositionFromFreeDimension(f,e,d):g.hitch(this,"_computeSplitterPositionFromFreeDimension",f,e,d),f.restoredReferenceDimension=d);this.animationEnabled=h}},_getProportion:function(a){return a&&
(a.proportion||0===a.portion)?a.proportion:0.25},_getDimensionFromStyle:function(a){return a.widget.domNode.style["H"===a.splitterOrientation?"height":"width"]},_getBorderThickness:function(a){var b=k.getBorderExtents(a.widget.domNode);return"H"===a.splitterOrientation?b.h:b.w},layout:function(){this._started&&this.domNode&&this._layoutChildren()},_isBorderRegion:function(a){return"left"===a||"right"===a||"top"===a||"bottom"===a},_oppositeRegion:function(a){switch(a){case "top":return"bottom";case "bottom":return"top";
case "left":return"right";case "right":return"left"}return"center"},_oppositeBorderInfo:function(a){return this._borderInfo[this._oppositeRegion(a.region)]},_layoutChildren:function(){this._updateLayoutConstraints();var a=k.getContentBox(this.domNode,this.computedStyle);if(!a||0===a.h||0===a.w)return!1;var b=this,c=g.clone(a),d=c.w,e=c.h,f,h,m,n,p={},q={},r,s;h={};var t={},u=this._computeSplitterOverhead(),v=0<Object.keys(this._dragInfo).length,x,A=[];f=Object.keys(this._borderInfo);for(s=0;s<f.length;s++)r=
this._borderInfo[f[s]],r.initComplete&&A.push(r);A.sort(function(a,b){return 2*a.layoutOrder+("left"===a.region||"top"===a.region?0:1)-(2*b.layoutOrder+("left"===b.region||"top"===b.region?0:1))});for(s=0;s<A.length;s++){r=A[s];f=g.clone(c);m=g.clone(c);n=g.clone(c);r.unconstrainedFreeDimension&&(v?delete r.unconstrainedFreeDimension:r.freeDimension=r.unconstrainedFreeDimension);switch(r.region){case "top":v&&this._portionsAreStale&&this._updatePortion(r,e,u.h);x=this._computeFreeDimension(r,e,u.h);
f.h=x;c.t+=f.h;c.h-=f.h;r.splitterNode&&(m.t=c.t-r.preSplitterOverlap,m.h=r.splitterThickness,c.t+=r.visibleSplitterThickness,c.h-=r.visibleSplitterThickness);r.isCollapsed&&(n.h=this._getCollapsedThickness(r));break;case "bottom":v&&this._portionsAreStale&&this._updatePortion(r,e,u.h);x=this._computeFreeDimension(r,e,u.h);f.h=x;f.t=c.t+c.h-f.h;c.h-=f.h;r.splitterNode&&(m.t=f.t-r.preSplitterOverlap-r.visibleSplitterThickness,m.h=r.splitterThickness,c.h-=r.visibleSplitterThickness);r.isCollapsed&&
(n.h=this._getCollapsedThickness(r),n.t=a.t+a.h-n.h);break;case "left":v&&this._portionsAreStale&&this._updatePortion(r,d,u.w);x=this._computeFreeDimension(r,d,u.w);f.w=x;c.l+=f.w;c.w-=f.w;r.splitterNode&&(m.l=c.l-r.preSplitterOverlap,m.w=r.splitterThickness,c.l+=r.visibleSplitterThickness,c.w-=r.visibleSplitterThickness);r.isCollapsed&&(n.w=this._getCollapsedThickness(r));break;case "right":v&&this._portionsAreStale&&this._updatePortion(r,d,u.w),x=this._computeFreeDimension(r,d,u.w),f.w=x,f.l=c.l+
c.w-f.w,c.w-=f.w,r.splitterNode&&(m.l=f.l-r.preSplitterOverlap-r.visibleSplitterThickness,m.w=r.splitterThickness,c.w-=r.visibleSplitterThickness),r.isCollapsed&&(n.w=this._getCollapsedThickness(r),n.l=a.l+a.w-n.w)}p[r.region]={};p[r.region].borderBox=f;p[r.region].splitterBox=m;p[r.region].collapsedBox=n;q[r.region]=r.isResizable&&r.isProportional&&!r.isCollapsed;h[r.region]=Math.max(r.minSize,r.minAutoSize)-x;t[r.region]=r.maxSize-x}v&&(this._portionsAreStale=!1);r=this._centerWidget&&!1===this._isCenterProportional&&
this._centerSize&&!this._isCenterExpanded&&!v;d=0;this._centerWidget&&c.w<this.minimumCenterWidth||-1>c.w?d=c.w-this.minimumCenterWidth:r&&(d=c.w-this._centerSize.w);0<=d&&(this._borderInfo.left&&delete this._borderInfo.left.unconstrainedFreeDimension,this._borderInfo.right&&delete this._borderInfo.right.unconstrainedFreeDimension);s=function(a){var c=b._borderInfo[a];c&&(q[a]=!c.isCollapsed&&c.isResizable,q[a]&&void 0===c.unconstrainedFreeDimension&&(c.unconstrainedFreeDimension=c.freeDimension))};
if(0!==d&&this._borderInfo.length===A.length&&(0>d&&(s("left"),s("right")),m=f=d,q.left&&q.right&&(f=this._borderInfo.left.portion||0.5,m=this._borderInfo.right.portion||0.5,f=d*f/(f+m),m=d-f),q.left&&(f=Math.max(h.left,Math.min(t.left,f)),this._borderInfo.left.freeDimension+=f,p.left.borderBox.w+=f,c.l+=f,c.w-=f,p.left.splitterBox.l+=f),q.right&&(m=Math.max(h.right,Math.min(t.right,m)),this._borderInfo.right.freeDimension+=m,p.right.borderBox.w+=m,p.right.borderBox.l-=m,c.w-=m,p.right.splitterBox.l-=
m),"sidebar"===this.design&&(q.left||q.right)))p.top&&(p.top.borderBox.l=c.l,p.top.borderBox.w=c.w,p.top.splitterBox.l=c.l,p.top.splitterBox.w=c.w),p.bottom&&(p.bottom.borderBox.l=c.l,p.bottom.borderBox.w=c.w,p.bottom.splitterBox.l=c.l,p.bottom.splitterBox.w=c.w);d=0;this._centerWidget&&c.h<this.minimumCenterHeight||-1>c.h?d=c.h-this.minimumCenterHeight:r&&(d=c.h-this._centerSize.h);0<=d&&(this._borderInfo.top&&delete this._borderInfo.top.unconstrainedFreeDimension,this._borderInfo.bottom&&delete this._borderInfo.bottom.unconstrainedFreeDimension);
if(0!==d&&(0>d&&(s("top"),s("bottom")),s=r=d,q.top&&q.bottom&&(r=this._borderInfo.top.portion||0.5,s=this._borderInfo.bottom.portion||0.5,r=d*r/(r+s),s=d-r),q.top&&(r=Math.max(h.top,Math.min(t.top,r)),this._borderInfo.top.freeDimension+=r,p.top.borderBox.h+=r,c.t+=r,c.h-=r,p.top.splitterBox.t+=r),q.bottom&&(s=Math.max(h.bottom,Math.min(t.bottom,s)),this._borderInfo.bottom.freeDimension+=s,p.bottom.borderBox.h+=s,p.bottom.borderBox.t-=s,c.h-=s,p.bottom.splitterBox.t-=s),"headline"===this.design&&(q.top||
q.bottom)))p.left&&(p.left.borderBox.t=c.t,p.left.borderBox.h=c.h,p.left.splitterBox.t=c.t,p.left.splitterBox.h=c.h),p.right&&(p.right.borderBox.t=c.t,p.right.borderBox.h=c.h,p.right.splitterBox.t=c.t,p.right.splitterBox.h=c.h);for(s=0;s<A.length;s++){r=A[s];f=p[r.region].borderBox;m=p[r.region].splitterBox;n=p[r.region].collapsedBox;h={t:0,l:0,w:a.l+a.w,h:a.t+a.h};switch(r.region){case "top":f.h<r.minSize?(d=r.minSize-f.h,f.t-=d,f.h=r.minSize,h.t=d):h=null;break;case "bottom":f.h<r.minSize?(h.h=
f.h,f.h=r.minSize):h=null;break;case "left":f.w<r.minSize?(d=r.minSize-f.w,f.l-=d,f.w=r.minSize,h.l=d):h=null;break;case "right":f.w<r.minSize?(h.w=f.w,f.w=r.minSize):h=null}w.setSize(r.widget,f);r.isCollapsed&&w.setSize(this._getCollapsedWidget(r),n);r.isResizable&&l.set(r.widget.domNode,null===h?{clip:"auto"}:w.formatClipStyle(h));r.splitterNode&&(k.setMarginBox(r.splitterNode,m),r.splitterBox=m);r.properties&&(r.properties.freeDimension!==r.freeDimension&&void 0!==r.freeDimension)&&r.properties.set("freeDimension",
r.freeDimension)}if(this._centerWidget&&(w.setSize(this._centerWidget,c),!this._centerSize||v))this._centerSize=c;return!0},_updateLayoutConstraints:function(){if(this._started){var a=this,b,c,d;!this._centerWidget&&!this.isRestoringState()&&Object.keys(this._borderInfo).forEach(function(e){b=a._borderInfo[e];c=("left"===e||"right"===e)&&"headline"===a.design||("top"===e||"bottom"===e)&&"sidebar"===a.design;d=a._oppositeBorderInfo(b);b.isCollapsed&&(c&&(!d||d.isCollapsed||!d.isCollapsible))&&a._setCollapsed(b,
!1)});var e,f,g;if(this._borderInfo.left||this._borderInfo.right){e=!this._centerWidget&&("headline"===this.design||!(this._borderInfo.top||this._borderInfo.bottom));if(this._borderInfo.right&&this._borderInfo.right.isResizable&&(f=!(!e||!this._borderInfo.left),g=!(!e||this._borderInfo.left),f!==this._borderInfo.right.followOpposite||g!==this._borderInfo.right.fillAvailable))this._borderInfo.right.followOpposite=f,this._borderInfo.right.fillAvailable=g,delete this._borderInfo.right.freeDimension,
this._borderInfo.left&&delete this._borderInfo.left.freeDimension,g&&this._setCollapsed(this._borderInfo.right,!1),this._setSplitterVisible(this._borderInfo.right,!(f||g));this._borderInfo.left&&this._borderInfo.left.isResizable&&(g=!(!e||this._borderInfo.right),g!==this._borderInfo.left.fillAvailable&&((this._borderInfo.left.fillAvailable=g)&&this._setCollapsed(this._borderInfo.left,!1),delete this._borderInfo.left.freeDimension,this._setSplitterVisible(this._borderInfo.left,!g)))}if(this._borderInfo.bottom||
this._borderInfo.top){e=!this._centerWidget&&("sidebar"===this.design||!(this._borderInfo.left||this._borderInfo.right));if(this._borderInfo.bottom&&this._borderInfo.bottom.isResizable&&(f=!(!e||!this._borderInfo.top),g=!(!e||this._borderInfo.top),f!==this._borderInfo.bottom.followOpposite||g!==this._borderInfo.bottom.fillAvailable))this._borderInfo.bottom.followOpposite=f,this._borderInfo.bottom.fillAvailable=g,delete this._borderInfo.bottom.freeDimension,this._borderInfo.top&&delete this._borderInfo.top.freeDimension,
this._setSplitterVisible(this._borderInfo.bottom,!(f||g));this._borderInfo.top&&this._borderInfo.top.isResizable&&(g=!(!e||this._borderInfo.bottom),g!==this._borderInfo.top.fillAvailable&&((this._borderInfo.top.fillAvailable=g)&&this._setCollapsed(this._borderInfo.top,!1),delete this._borderInfo.top.freeDimension,this._setSplitterVisible(this._borderInfo.top,!g)))}}},_setSplitterVisible:function(a,b){a.splitterNode&&l.set(a.splitterNode,{visibility:b?"visible":"hidden"})},_setCollapsed:function(b,
c){(b.isCollapsed=c)?a.add(b.widget.domNode,"collapsedChild"):a.remove(b.widget.domNode,"collapsedChild");b.properties&&(b.properties.set(u.IS_COLLAPSED,c),c?b.properties.set(u.IS_SHOWING,!1):w.isShowing(this.domNode)&&b.properties.set(u.IS_SHOWING,!0));var d=this._getCollapsedWidget(b);c?(l.set(d.domNode,"position","absolute"),r.prototype.addChild.apply(this,[d])):r.prototype.removeChild.apply(this,[d])},_setExpanded:function(a,b){a.isExpanded=b;a.properties&&a.properties.set(u.IS_EXPANDED,b)},_setCenterExpanded:function(a){this._isCenterExpanded=
a;this._centerProperties&&this._centerProperties.set(u.IS_EXPANDED,a)},_createBorderInfo:function(a,b){return{region:a,widget:b,hasSplitter:!1,isResizable:!1,splitterOrientation:"top"===a||"bottom"===a?"H":"V",minSize:0,minAutoSize:0,maxSize:K,isCollapsible:!1,layoutOrder:"headline"===this.design&&("top"===a||"bottom"===a)||"sidebar"===this.design&&("left"===a||"right"===a)?0:1,isProportional:!1,proportion:0.25,collapsedWidget:b.collapsedWidget,fillAvailable:!1,followOpposite:!1}},_getInfoFromWidget:function(a,
b){void 0!==a.splitter?b.hasSplitter=a.splitter:void 0!==a.hasSplitter&&(b.hasSplitter=a.hasSplitter);void 0!==a.collapsible?b.isCollapsible=a.collapsible:void 0!==a.isCollapsibled&&(b.isCollapsible=a.isCollapsible);b.isResizable=void 0!==a.resizable?a.resizable:void 0!==a.isResizable?a.isResizable:b.hasSplitter;void 0!==a.minSize&&(b.minSize=a.minSize);void 0!==a.minAutoSize&&(b.minAutoSize=a.minAutoSize);void 0!==a.maxSize&&(b.maxSize=a.maxSize);void 0!==a.layoutOrder&&(b.layoutOrder=a.layoutOrder)},
_bindChildProperties:function(a,b){var c=this,d,e;!a.properties&&(b.watch&&b.set&&b.get)&&(a.properties=b,d=b.watch(u.IS_COLLAPSED,function(b,d,e){e!==a.isCollapsed&&(e?c._collapse(a):c._restore(a))}),e=b.watch(u.IS_EXPANDED,function(b,d,e){e!==a.isExpanded&&(e?c.expand(a.region):c.restore(a.region))}),a.unbindChildProperties=function(){d&&d.remove();e&&e.remove();delete a.properties;delete a.unbindChildProperties})},_bindCenterProperties:function(a){var b=this,c;!this._centerProperties&&(a.watch&&
a.set&&a.get)&&(this._centerProperties=a,c=a.watch(u.IS_EXPANDED,function(a,c,d){d!==b._isCenterExpanded&&(d?b.expand("center"):b.restore("center"))}),this._unbindCenterProperties=function(){c.remove();delete this._centerProperties;delete this._unbindCenterProperties})},_getProperties:function(a){return"center"===a?this._centerProperties:(a=this._borderInfo[a])?a.properties:null},_computeSplitterOverhead:function(){var a=0,b=0,c=this._borderInfo;Object.keys(this._borderInfo).forEach(function(d){c[d.hasSplitter]&&
("H"===c[d].splitterOrientation?b+=c[d].visibleSplitterThickness:a+=c[d].visibleSplitterThickness)});return{w:a,h:b}},_computeFreeDimension:function(a,b,c){var d=Math.max(1,b-c),e;if(e=this._dragInfo[a.region])return a.freeDimension=this._computeFreeDimensionFromSplitterPosition(a,e.splitterPosition,b),this._enforceFreeDimensionLimits(a),a.freeDimension;if(a.isCollapsed)return void 0===a.freeDimension&&(a.freeDimension=this._getCollapsedThickness(a)),a.freeDimension;if(a.fillAvailable)return b;if(e=
this._oppositeBorderInfo(a)){if(a.followOpposite)return a.freeDimension=b-e.freeDimension-(e.splitterNode?e.visibleSplitterThickness:0),a.freeDimension;if(e.followOpposite&&e.isCollapsed)return a.freeDimension=b-a.postSplitterOverlap-a.visibleSplitterThickness-a.preSplitterOverlap,a.freeDimension}if(!a.freeDimension||!a.isResizable&&!a.isProportional){if(e=void 0!==a.initialDimension?a.initialDimension:this._getDimensionFromStyle(a))0<=e.indexOf("%")?a.freeDimension=Math.floor(parseInt(e.slice(0,
-1),10)*d/100):a.freeDimension=l.toPixelValue(a.widget.domNode,e)+this._getBorderThickness(a);this._updatePortion(a,b,c)}if(a.isProportional||!a.freeDimension)b=a.freeDimension,a.freeDimension=Math.floor(this._getProportion(a)*d),a.minSize&&a.freeDimension<a.minSize&&(a.freeDimension=a.minSize),a.minAutoSize&&a.freeDimension<a.minAutoSize&&(a.freeDimension=a.minAutoSize,b&&b<a.freeDimension&&(a.freeDimension=b));this._enforceFreeDimensionLimits(a);return a.freeDimension},_computeFreeDimensionFromSplitterPosition:function(a,
b,c){var d=k.getPadExtents(this.domNode,this.computedStyle);b="left"===a.region||"top"===a.region?b+a.preSplitterOverlap:c-b-a.splitterThickness+a.postSplitterOverlap;switch(a.region){case "left":b-=d.l;break;case "top":b-=d.t;break;case "right":b+=d.l;break;case "bottom":b+=d.t}return b},_computeSplitterPositionFromFreeDimension:function(a,b,c){var d=k.getPadExtents(this.domNode,this.computedStyle);b="left"===a.region||"top"===a.region?b-a.preSplitterOverlap:c-b-a.splitterThickness+a.postSplitterOverlap;
switch(a.region){case "left":b+=d.l;break;case "top":b+=d.t;break;case "right":b-=d.l;break;case "bottom":b-=d.t}return b},_enforceFreeDimensionLimits:function(a){void 0!==a.maxSize&&a.freeDimension>a.maxSize&&(a.freeDimension=a.maxSize);!a.isCollapsible&&(void 0!==a.minSize&&a.freeDimension<a.minSize)&&(a.freeDimension=a.minSize)},_updatePortion:function(a,b,c){a.freeDimension&&(!a.isCollapsed&&a.isProportional&&!a.fillAvailable)&&(b=Math.max(1,b-c),a.proportion=a.freeDimension/b)},_collapse:function(a){if(!a.isCollapsed&&
a.isCollapsible)if(a.initComplete){var b=a.followOpposite;b&&(a=this._oppositeBorderInfo(a));var c=this._dragInfo[a.region];c||(c=this._initDragInfo(a,0,0),this._dragInfo[a.region]=c);c.done=!0;this._doCollapse(c,b)}else a.collapsePending=!0},_restore:function(a){if(a.isCollapsed){var b=a.followOpposite;b&&(a=this._oppositeBorderInfo(a));var c=this._dragInfo[a.region];c||(c=this._initDragInfo(a,0,0),this._dragInfo[a.region]=c);c.done=!0;this._doRestore(c,b)}},_beginSplitterDrag:function(a,b){if((p.isLeft(b)||
"touchstart"===b.type)&&!a.isRestoring){if(this._dragInfo[a.region])return;var c=this._initDragInfo(a,b.pageX,b.pageY);this._dragInfo[a.region]=c;c.connections=[m(this.ownerDocument,q.move,g.hitch(this,"_continueSplitterDrag",c)),m(this.ownerDocument,q.release,g.hitch(this,"_endSplitterDrag",c))];B.blockUntilRelease(this.domNode)}w.stopEvent(b)},_initDragInfo:function(a,b,c){var d={borderInfo:a},e=this._oppositeBorderInfo(a),f=k.getContentBox(this.domNode,this.computedStyle),g=a.splitterBox||k.getMarginBox(a.splitterNode),
h=k.getPadExtents(this.domNode,this.computedStyle),l=a.isCollapsed||e&&e.followOpposite&&e.isCollapsed,m="left"===a.region||"right"===a.region?this.minimumCenterWidth:this.minimumCenterHeight;"V"===a.splitterOrientation?(d.startPoint=b,d.splitterPosition=g.l,d.initialPosition=g.l,d.lastReferenceDimension=f.w,b=h.l,c=f.w,l||(a.restoredSplitterPosition=g.l,a.restoredReferenceDimension=f.w)):(d.startPoint=c,d.splitterPosition=g.t,d.initialPosition=g.t,d.lastReferenceDimension=f.h,b=h.t,c=f.h,l||(a.restoredSplitterPosition=
g.t,a.restoredReferenceDimension=f.h));"left"===a.region||"top"===a.region?(d.lowerLimit=b+this._getCollapsedThickness(a)-a.preSplitterOverlap,d.upperLimit=c+b,e?e.followOpposite?(d.upperLimit-=this._getCollapsedThickness(e)+a.splitterThickness-a.postSplitterOverlap,d.oppositeCollapsePosition=d.upperLimit):d.upperLimit-=m+e.freeDimension:d.upperLimit-=m,d.collapsePosition=d.lowerLimit):(d.lowerLimit=b+m+(e?e.freeDimension:0),d.upperLimit=b+c-this._getCollapsedThickness(a)-a.splitterThickness+a.postSplitterOverlap,
d.collapsePosition=d.upperLimit);d.lastPoint=d.startPoint;return d},_continueSplitterDrag:function(a,b){var c=a.borderInfo,d,e=k.getContentBox(this.domNode,this.computedStyle),f,g,e="V"===c.splitterOrientation?e.w:e.h;f="V"===c.splitterOrientation?b.pageX:b.pageY;var h=f-a.lastPoint;"right"===c.region||"bottom"===c.region?h*=-1:d=this._oppositeBorderInfo(c);a.lastPoint=f;f=a.lastPoint-a.startPoint;3<Math.abs(f)&&!a.hasSplitterMoved&&(a.hasSplitterMoved=!0,this.emit(v.SPLITTER_DRAG_STARTED,c.region));
f=a.initialPosition+f;f<a.lowerLimit?f=a.lowerLimit:f>a.upperLimit&&(f=a.upperLimit);c.isCollapsible&&(g=this._computeFreeDimensionFromSplitterPosition(c,f,e),0<h&&0<g&&this._setCollapsed(c,!1),0>h&&(0<g&&g<c.freeDimension&&g<c.minSize-0)&&this._doCollapse(a));d&&(d.followOpposite&&d.isCollapsible)&&(h*=-1,g=this._computeFreeDimensionFromSplitterPosition(d,f,e),0<h&&0<g&&this._setCollapsed(d,!1),0>h&&(0<g&&g<d.freeDimension&&g<d.minSize-0)&&this._doCollapse(a,!0));if(!a.animation&&!c.isCollapsed&&
(!d||!d.followOpposite||!d.isCollapsed)&&f!==a.splitterPosition)a.splitterPosition=f,this.layout()},_endSplitterDrag:function(a){var b=a.borderInfo,c=this._oppositeBorderInfo(b);a.connections.forEach(function(a){a.remove()});if(a.hasSplitterMoved){if(!b.isCollapsed&&(!c||!c.followOpposite||!c.isCollapsed)&&!a.animation)c=k.getContentBox(this.domNode,this.computedStyle),b.proportion="H"===b.splitterOrientation?b.freeDimension/c.h:b.freeDimension/c.w;a.animation?a.done=!0:(delete this._dragInfo[b.region],
this.emit(v.SPLITTER_DRAG_ENDED,b.region),this.emit(v.STATE_CHANGED))}else b.isCollapsed?this._restore(b):c&&(c.followOpposite&&c.isCollapsed)&&this._restore(c),delete this._dragInfo[b.region]},_handleDoubleClick:function(a,b){if(!a.isCollapsed&&!a.isRestoring){var c=this._oppositeBorderInfo(a);(!c||!c.followOpposite)&&this._collapse(a)}w.stopEvent(b)},_doCollapse:function(a,b){if(!a.animation){var c=this,e=a.borderInfo,f=b?c._oppositeBorderInfo(e):e;e.preCollapseFreeDimension=e.freeDimension;var g=
function(){a.animation=null;a.splitterPosition=b?a.oppositeCollapsePosition:a.collapsePosition;c._layoutChildren()||(e.freeDimension=c._getCollapsedThickness(e));f.isCollapsing=!1;c._setCollapsed(f,!0);c._updateExpandedStates();c.layout();a.done&&(delete c._dragInfo[e.region],c.emit(v.STATE_CHANGED));c.emit(v.SPLITTER_DRAG_ENDED,e.region)};f.isCollapsing=!0;!this.animationEnabled||!w.isAnimationEnabled()?g():(a.splitterStartPosition=a.splitterPosition,a.animation=(new d.Animation({curve:[0,1],onAnimate:function(d){a.splitterPosition=
a.splitterStartPosition+Math.floor(d*((b?a.oppositeCollapsePosition:a.collapsePosition)-a.splitterStartPosition));c.layout()},onEnd:g})).play())}},_doRestore:function(a,b){if(!a.animation){var c=this,e=a.borderInfo;e.isRestoring=!0;var f=k.getContentBox(this.domNode,this.computedStyle),f="V"===e.splitterOrientation?f.w:f.h,g,h;e.restoredSplitterPosition&&(g=e.restoredSplitterPosition,f!==e.restoredReferenceDimension&&(g*=f,g/=e.restoredReferenceDimension));g||(h="left"===e.region||"top"===e.region?
0.25:0.75,g=Math.floor(h*f));b?this._setCollapsed(this._oppositeBorderInfo(e),!1):this._setCollapsed(e,!1);this._setCenterExpanded(!1);f=Object.keys(this._borderInfo);for(h=0;h<f.length;h+=1)this._setExpanded(this._borderInfo[f[h]],!1);f=function(){a.animation=null;a.splitterPosition=g;c.layout();a.done&&(delete c._dragInfo[e.region],c.emit(v.STATE_CHANGED));e.isRestoring=!1};!this.animationEnabled||!w.isAnimationEnabled()?f():a.animation=(new d.Animation({curve:[a.splitterPosition,g],onAnimate:function(b){a.splitterPosition=
Math.floor(b);c.layout()},onEnd:f})).play()}},_getCollapsedWidget:function(c){if(!c.collapsedWidget){var d=new s({content:"H"===c.splitterOrientation?H:I});d.isDefaultCollapsedWidget=!0;a.add(d.domNode,"collapsedBorderChild"+c.splitterOrientation);b.setSelectable(d.domNode,!1);w.preventFocus(d.domNode);var e=c.followOpposite?this._oppositeBorderInfo(c):c;d.own(m(d.domNode,q.press,g.hitch(this,"_beginSplitterDrag",e)));d.own(m(d.domNode,"contextmenu",function(a){a.preventDefault()}));c.collapsedWidget=
d}return c.collapsedWidget},_getCollapsedThickness:function(a){if(!a.collapsedThickness){var b=this._getCollapsedWidget(a),c;l.set(b.domNode,{visibility:"hidden"});f.place(b.domNode,this.domNode);c=k.getContentBox(b.domNode);a.collapsedThickness="H"===a.splitterOrientation?c.h:c.w;this.domNode.removeChild(b.domNode);l.set(b.domNode,{visibility:"visible"})}return a.collapsedThickness},_updateExpandedStates:function(){var a=0,b=0,c,d,e,f;this._centerWidget&&(a+=1,c="center");d=Object.keys(this._borderInfo);
for(e=0;e<d.length&&1>=a;e+=1)f=this._borderInfo[d[e]],f.isCollapsible&&(b++,f.isCollapsed||(a+=1,c=d[e]));1===a&&("center"===c?!this._isCenterExpanded&&b&&(this._setCenterExpanded(!0),this._regionsCollapsedUponCenterExpand=d):(f=this._borderInfo[c],f.isExpanded||(this._setExpanded(f,!0),f.regionsCollapsedUponExpand=d.filter(function(a){return a!==c}))))},destroyRecursive:function(){var a,b,c;a=Object.keys(this._borderInfo);for(b=0;b<a.length;b++)c=this._borderInfo[a[b]],c.collapsedWidget&&!c.isCollapsed&&
c.collapsedWidget.destroyRecursive();this.inherited(arguments)}})})},"MW/layout/HidingContainer":function(){define(["dojo/_base/declare"],function(h){var e=h([],{isShowingLocally:function(e){return e.getParent()===this}});e.isShowingGlobally=function(g){for(var d=g.getParent();d;){if(d.isInstanceOf(e)&&!d.isShowingLocally(g))return!1;g=d;d=g.getParent()}return!0};return e})},"MW/layout/LayoutChildProperty":function(){define([],function(){return{TITLE:"title",SHORT_TITLE:"shortTitle",DESCRIPTION:"description",
REGION:"region",IS_OPEN:"isOpen",IS_ENABLED:"isEnabled",IS_COLLAPSIBLE:"isCollapsible",IS_COLLAPSED:"isCollapsed",IS_EXPANDED:"isExpanded",IS_MAXIMIZED:"isMaximized",IS_RESIZABLE:"isResizable",IS_SELECTABLE:"isSelectable",IS_SELECTED:"isSelected",IS_SHOWING:"isShowing",ACTIONS:"actions",INDEX:"index",TILE:"tile",PERMISSIBLE_REGIONS:"permissibleRegions",PREFERRED_WIDTH:"preferredWidth",PREFERRED_HEIGHT:"preferredHeight",MINIMUM_WIDTH:"minimumWidth",MINIMUM_HEIGHT:"minimumHeight",SET_ID:"setId",TITLE_SHORTENING_ALLOWED:"titleShorteningAllowed",
DESTROY_ON_CLOSE:"destroyOnClose"}})},"MW/layout/LayoutUtils":function(){define("dojo/_base/event dojo/_base/kernel dojo/_base/lang dojo/dom dojo/dom-geometry dojo/dom-style dojo/on dojo/sniff dojo/touch dijit/focus dijit/popup".split(" "),function(h,e,g,d,c,b,a,f,k,l,n){var p=function(a,b){(!a||b.target===a)&&b.preventDefault()},m=function(a){r.stopEvent(a)},q=!0,r={formatClipStyle:function(a){return{clip:"rect("+a.t+"px,"+(a.l+a.w)+"px,"+(a.t+a.h)+"px,"+a.l+"px)"}},isShowing:function(a){return!a||
"hidden"!==b.get(a,"visibility")&&"none"!==b.get(a,"display")&&this.isShowing(a.parent)},setSize:function(a,b){a.resize?a.resize(b):c.setMarginBox(a.domNode,b)},restoreStyle:function(a){b.set(a.domNode,{top:"auto",left:"auto",position:"static",display:"block",clip:"auto"})},removeFromParent:function(a){if(a){var b=a.parentNode;b&&(f("ie")&&b.canHaveChildren&&"removeNode"in a?a.removeNode(!1):b.removeChild(a))}},getScrollPosition:function(a){var b={l:0,t:0};if(a=this._findScrollPane(a))b.l=a.scrollLeft,
b.t=a.scrollTop;return b},setScrollPosition:function(a,b){var c=this._findScrollPane(a);c&&(c.scrollLeft=b.l,c.scrollTop=b.t)},saveScrollPosition:function(a,b){b.scrollPane||(b.scrollPane=this._findScrollPane(a));b.scrollPane&&!b.savedScrollTop&&(b.savedScrollTop=b.scrollPane.scrollTop,b.savedScrollLeft=b.scrollPane.scrollLeft)},restoreScrollPosition:function(a,b){b.scrollPane&&(b.savedScrollTop&&(b.scrollPane.scrollTop=b.savedScrollTop,delete b.savedScrollTop),b.savedScrollLeft&&(b.scrollPane.scrollLeft=
b.savedScrollLeft,delete b.savedScrollLeft))},_findScrollPane:function(a){var b=dojo.query(".scrollPane",a.domNode);return 0<b.length?b[0]:this._findScrolledChild(a.domNode)},_findScrolledChild:function(a){if(a.scrollTop||a.scrollLeft)return a;if(!a.children)return null;var b,c;for(b=0;b<a.children.length;b++)if(c=this._findScrolledChild(a.children[b]))return c;return null},saveIfNotDefault:function(a,b,c,d){c=c.get?c.get(b):c[b];void 0!==c&&c!==d&&(a[b]=c)},restoreOrSetDefault:function(a,b,c,d){a=
void 0===a[b]?d:a[b];c.set?c.set(b,a):c[b]=a},preventDefaultContextMenu:function(b,c){a(b,"contextmenu",g.partial(p,!1===c?b:null))},preventFocus:function(b,c){c||a(b,k.press,m)},stopEvent:function(a){if(this.isPopupShowing()){if(!this.popupHasFocus()){var b=l.curNode;setTimeout(function(){l.focus(b)},0)}}else h.stop(a)},isPopupShowing:function(){return 0<n._stack.length},popupHasFocus:function(){var a=n.getTopPopup().widget.domNode;return a&&(a===l.curNode||d.isDescendant(l.curNode,a))},setLocaleOnDomNode:function(a){(0===
e.locale.indexOf("ko")||0===e.locale.indexOf("ja")||0===e.locale.indexOf("zh"))&&a.classList.add("isCJK")},disableLayoutAnimation:function(){q=!1},enableLayoutAnimation:function(){q=!0},isAnimationEnabled:function(){return q}};return r})},"MW/layout/MaximizingContainer":function(){define(["dojo/_base/declare"],function(h){var e=h([],{canMaximizeLocally:function(e){return!1},canRestoreLocally:function(e){return!1},maximizeLocally:function(e){},restoreLocally:function(e){}});e.canMaximizeGlobally=function(g){var d=
e._getMaximizingContainerAncestor(g);return d&&(d.canMaximizeLocally(g)||e.canMaximizeGlobally(d))};e.canRestoreGlobally=function(g){var d=e._getMaximizingContainerAncestor(g);return d&&(d.canRestoreLocally(g)||e.canRestoreGlobally(d))};e.maximizeGlobally=function(g){var d=e._getMaximizingContainerAncestor(g);d&&(e.maximizeGlobally(d),d.canMaximizeLocally(g)&&d.maximizeLocally(g))};e.restoreGlobally=function(g){var d=e._getMaximizingContainerAncestor(g);d&&(e.restoreGlobally(d),d.canRestoreLocally(g)&&
d.restoreLocally(g))};e._getMaximizingContainerAncestor=function(g){for(g=g.getParent();g&&!g.isInstanceOf(e);)g=g.getParent();return g};return e})},"MW/layout/Restorable":function(){define(["dojo/_base/declare"],function(h){return h([],{getState:function(){return null},setState:function(e){},isRestoringState:function(){return!1},endStateRestore:function(){}})})},"MW/layout/SelectionBlocker":function(){define(["dojo/dom-class","dojo/on","dojo/query","dojo/touch"],function(h,e,g,d){var c,b,a,f;return{blockUntilRelease:function(a){if(!b){this.blockSelection(a);
this._blockIframePointerEvents();var c=this;b=e(window,d.release,function(){c.unblockSelection(a);c._unblockIframePointerEvents(a.ownerDocument.body);b=null})}},blockSelection:function(a){c||(f=a.ownerDocument.body,h.add(f,"noselect"),c=!0)},unblockSelection:function(){c&&(h.remove(f,"noselect"),c=!1)},_blockIframePointerEvents:function(b){a=g("iframe, object",b);a.forEach(function(a){h.add(a,"nopointer")})},_unblockIframePointerEvents:function(){a&&(a.forEach(function(a){h.remove(a,"nopointer")}),
a=null)}}})},"MW/layout/Traversable":function(){define(["dojo/_base/declare"],function(h){return h([],{revealChild:function(e){},nextChild:function(e,g){return null},previousChild:function(e,g){return null}})})},"MW/rtc/datamodel/RichTextBackingStore":function(){define(["dojo/_base/declare","MW/rtc/datamodel/FileBackingStore","mw-messageservice/MessageService"],function(h,e,g){return h(e,{FILE_NAME_UPDATED:"/liveeditor/event/FileNameUpdated/",constructor:function(d,c){this.inherited(arguments);this._filePath=
d;this._load=this._save=null;this._rtcId=c;g.subscribe(this.FILE_NAME_UPDATED+this._rtcId,"_handleFileNameUpdatedResponse",this)},_handleFileNameUpdatedResponse:function(d){this._filePath=d.data.fileName;this._updateFilePath(this._filePath)},getFilePath:function(){return this._filePath},save:function(d){return this._save(d)},load:function(d){return this._load(d)}})})},"viewer/plugin/ViewerContextMenuGenerator":function(){define(["dojo/_base/declare","MW/rtc/plugins/contextmenu/ContextMenuGenerator"],
function(h,e){return h(e,{createContextMenu:function(e,d){}})})},"viewer/plugin/ViewerEventHandler":function(){define(["dojo/_base/declare","MW/rtc/plugins/events/EventHandler"],function(h,e){return h(e,{onMouseDown:function(e){},onMouseUp:function(e){},onFocus:function(e){},onBlur:function(e){}})})},"viewer/plugin/ViewerKeyHandler":function(){define(["dojo/_base/declare"],function(h){return h(null,{destroy:function(){},place:function(e){},prepareKeyCapture:function(e){},blur:function(){},focus:function(){},
enableCopyPaste:function(){},setInputHandler:function(e){},setDefaultInputHandler:function(){},handleInput:function(e){},addBindings:function(e){},addBindingsFromActionService:function(e){},removeBindings:function(e){},enableBrowserCopyPaste:function(e){},listenTo:function(e,g){}})})},"viewer/plugin/ViewerHyperlinkHandler":function(){define(["dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(h,e,g){return e(null,{constructor:function(d){this._handleHyperlinkCallback=d;h.after(document,
"onclick",g.hitch(this,"_handleHyperlink"),!0)},_handleHyperlink:function(d){d=d.target||d.srcElement;if("A"==d.tagName.toUpperCase()||"A"==d.parentElement.tagName.toUpperCase())return this._handleHyperlinkCallback(d.href?d.href:d.parentElement.href),!1}})})},"viewer/plugin/ViewerStatusActionBar":function(){define(["dojo/_base/declare","dojo/dom-construct","MW/rtc/margin/MarginPlugin"],function(h,e,g){return h(g,{priority:function(){return 200},getMarginElement:function(){return e.create("div")},
update:function(){},getWidth:function(){return 0},onWidthChange:function(){}})})},"viewer/plugin/ViewerContentLoadedHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","viewer/plugin/ViewerContentLoadedHandler"],function(h,e,g){return h(e,{requires:function(){return{createInstance:["viewer.load","viewer.contentloadedcallback"]}},createInstance:function(d,c){return new g(d,c)}})})},"viewer/plugin/ViewerContentLoadedHandler":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/aspect"],function(h,e,g){return h(null,{constructor:function(d,c){this._viewerLoad=d;this._callback=c;g.after(this._viewerLoad,"onContentLoaded",e.hitch(this,"_handleContentLoaded"),!0)},_handleContentLoaded:function(){this._callback&&this._callback()}})})},"viewer/plugin/ViewerLoadProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","viewer/plugin/ViewerLoad"],function(h,e,g){return h(e,{requires:function(){return{createInstance:"rtc.document rtc.internaldocument rtc.embeddedoutputs rtc.actionservice rtc.serializers viewer.contentToLoad".split(" ")}},
createInstance:function(d,c,b,a,e,h){return new g(d,c,b,a,e,h)}})})},"viewer/plugin/ViewerLoad":function(){define("dojo/_base/declare dojo/_base/lang MW/rtc/model/io/MDocumentWriter MW/rtc/model/io/OpcPackage MW/rtc/model/io/Reader MW/rtc/plugins/embeddedoutputs/model/io/OutputReader".split(" "),function(h,e,g,d,c,b){return h(null,{_OUTPUT_LOCATION:"/matlab/output.xml",_OUTPUT_FORMAT:"text/xml",_OUTPUT_RELATIONSHIP_TYPE:"http://schemas.mathworks.com/matlab/code/2013/relationships/output",constructor:function(a,
b,c,e,g,h){this._document=a;this._internalDocument=b;this._embeddedOutputsPlugin=c;this._actionService=e;this._serializers=g;a=this._convertToLoadData(h.documentXml,h.output,h.images);this._opcPackage=d.fromJson(a);this._viewerType=h.viewerType,this._documentXml=window.currentDocument.documentXml},_load:function(){"live_code"===this._viewerType&&this._loadLiveCode();"plain_code"===this._viewerType&&this._loadPlainCode()},_loadLiveCode:function(){try{c.read(this._internalDocument,this._opcPackage,this._serializers);var a=this._opcPackage.getPart(this._OUTPUT_LOCATION),
d=a.getContent();this._embeddedOutputsPlugin&&(0!==Object.keys(a).length&&d)&&(d=d.replace("\x3clayoutState\x3ecode\x3c/layoutState\x3e","\x3clayoutState\x3edocument\x3c/layoutState\x3e"),b.read(this._embeddedOutputsPlugin,{output:d}));this.onContentLoaded()}catch(e){}this._document.setReadOnly(!0)},onContentLoaded:function(){},_loadPlainCode:function(){this._document.setText(this._documentXml);this._switchInline();this.onContentLoaded();
this._document.setReadOnly(!0)},_switchInline:function(){this._actionService.getAction("rtc_inline_view_no_animation")&&this._actionService.executeAction("rtc_inline_view_no_animation")},_convertToLoadData:function(a,b,c){var d={content:a,contentType:"text/xml",partUri:"/matlab/document.xml",relationship:null};if(0<c.length){d.relationship=[];for(a=0;a<c.length;a++){var e=a+1;d.relationship.push({relationshipId:"rId"+e,relationshipType:"http://schemas.mathworks.com/matlab/code/2013/relationships/image",
target:"/media/image"+e+".jpeg"})}}b={parts:[d,{content:b,contentType:"text/xml",partUri:this._OUTPUT_LOCATION,relationship:null}],relationships:[{relationshipId:"rId1",relationshipType:"http://schemas.mathworks.com/matlab/code/2013/relationships/document",target:"/matlab/document.xml"}]};if(0<c.length)for(a=0;a<c.length;a++)b.parts.push({content:c[a],contentType:"image/jpeg",partUri:"/media/image"+(a+1)+".jpeg",relationship:null});return b}})})},"MW/rtc/model/io/OpcPackage":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/model/io/relationship/OpcRelationshipCollection","MW/rtc/model/io/part/OpcPart","MW/rtc/model/io/OpcUtils"],function(h,e,g,d,c){var b=h(null,{constructor:function(){this._opcParts=[];this._opcPackageRelationship=new g},createPart:function(a,b){var c=new d(a,b);this._opcParts.push(c);return c},getPart:function(a){a=a.replace(/^(?:\.\.\/)+/,"/");var b={};this._opcParts.forEach(function(c){var d=c.getPartURI();"/"!==d.charAt(0)&&(d="/"+d);a===d&&(b=c)});return b},getParts:function(){return this._opcParts},
getPartURI:function(a,b,d){var e=[];this._opcParts.forEach(function(a){e.push(a.getPartURI())});return c.getUniquePartUri(a,b,d,e)},createRelationship:function(a,b){return this._opcPackageRelationship.createRelationship(a,b)}});b.toJson=function(a){var b=[];a._opcParts.forEach(function(c,e){b.push(d.toJson(a._opcParts[e]))},this);return{parts:b,relationships:g.toJson(a._opcPackageRelationship)}};b.fromJson=function(a){var c=new b,e;for(e in a.parts)c._opcParts.push(d.fromJson(a.parts[e]));c._opcPackageRelationship=
g.fromJson(a.relationships);return c};return b})},"MW/rtc/model/io/relationship/OpcRelationshipCollection":function(){define(["dojo/_base/declare","MW/rtc/model/io/relationship/OpcRelationship"],function(h,e){var g=h(null,{_baseRelationshipId:"rId",constructor:function(){this._relationshipIdCounter=0;this._opcRelationshipCollection={}},createRelationship:function(d,c){this._relationshipIdCounter+=1;var b=this._baseRelationshipId+this._relationshipIdCounter;this._opcRelationshipCollection[b]=new e(b,
d,c);return b},getRelationship:function(d){return this._opcRelationshipCollection[d]},getRelationshipCollection:function(){return this._opcRelationshipCollection}});g.toJson=function(d){var c=[],b;for(b in d._opcRelationshipCollection)c.push(e.toJson(d._opcRelationshipCollection[b]));return 0===c.length?null:c};g.fromJson=function(d){var c=g.createInstance();d.forEach(function(b){c._opcRelationshipCollection[b.relationshipId]=e.fromJson(b)});return c};g.createInstance=function(){return new g};return g})},
"MW/rtc/model/io/relationship/OpcRelationship":function(){define(["dojo/_base/declare"],function(h){var e=h(null,{constructor:function(e,d,c){this._relationshipType=d;this._target=c;this._relationshipId=e},getRelationshipType:function(){return this._relationshipType},getTarget:function(){return this._target}});e.toJson=function(e){return{relationshipType:e._relationshipType,target:e._target,relationshipId:e._relationshipId}};e.fromJson=function(g){return new e(g.relationshipId,g.relationshipType,
g.target)};return e})},"MW/rtc/model/io/part/OpcPart":function(){define(["dojo/_base/declare","MW/rtc/model/io/relationship/OpcRelationshipCollection"],function(h,e){var g=h(null,{_relationshipIdCounter:0,constructor:function(d,c){this._partUri=d;this._contentType=c;this._opcPartRelationship=new e},setContent:function(d){this._content=d},getContent:function(){return this._content},getContentType:function(){return this._contentType},getPartURI:function(){return this._partUri},createRelationship:function(d,
c){return this._opcPartRelationship.createRelationship(d,c)},getAllRelationships:function(){return this._opcPartRelationship},getRelationship:function(d){return this._opcPartRelationship.getRelationship(d)}});g.toJson=function(d){return{partUri:d._partUri,contentType:d._contentType,content:d._content,relationship:e.toJson(d._opcPartRelationship)}};g.fromJson=function(d){var c=new g(d.partUri,d.contentType);c.setContent(d.content);d.relationship&&(c._opcPartRelationship=e.fromJson(d.relationship));
return c};return g})},"MW/rtc/model/io/OpcUtils":function(){define(["dojo/_base/lang"],function(h){return{getUniquePartUri:function(e,g,d,c){return this._getUpdatedPartUri(e+(g?g:"")+"."+(d?d:""),c)},_getUpdatedPartUri:function(e,g){var d=this._getFileNameWithCount(e),c=d;g.some(function(b){b=this._getFileNameWithCount(b);b.partUri===d.partUri&&b.fileName===d.fileName&&b.fileExtension===d.fileExtension&&b.count>c.count&&(c=b)},this);c||(c=d);c.count+=1;return this._getPartUri(c)},_getFileNameWithCount:function(e){var g=
e.split(".");e=g[0];var g=g[1],d=e.lastIndexOf("/"),c=e.slice(d+1),b=c.match(/\d+$/),b=b?parseInt(b[0]):0,c=c.replace(/\d+/g,"");-1===d?e=c:(e=e.slice(0,d),e=e+"/"+c);return{partUri:e,fileName:c,fileExtension:g,count:b}},_getPartUri:function(e){var g=e.partUri+e.count;0!==e.fileExtension.length&&(g=g+"."+e.fileExtension);return g}}})},"MW/rtc/model/io/Reader":function(){define("dojo/_base/lang mw-log/Log MW/rtc/model/io/DocumentTag MW/rtc/model/io/ForwardCompatibility MW/rtc/model/io/XmlUtils MW/rtc/model/io/Serializers".split(" "),
function(h,e,g,d,c,b){return{_SUPPORTED_READER_VERSIONS:["R2018a","R2018b"],read:function(a,b,c){var e=b.getPart(g.DOCUMENT_TARGET),e=d.processXML(e.getContent(),this._SUPPORTED_READER_VERSIONS),n=this._getAllTopItems(e.xmlDocument).reduce(h.partial(this._reduceByNodeType,c),[]);b=this._readItems(n,b,c);this._insertNodeInDocument(b.readArray,a);return!e.status},_readItems:function(a,b,d){var e=!0,g=[];a.forEach(function(a){var h=this._getParagraph(a);if(h)a=this._readParagraph(h,b,d),g=g.concat(a.readObject),
e=e&&a.readStatus;else{var q=this._getSDT(a);q&&(a=c.getSdtAttribute(q),h=d.getSerializer(a),q=this._getSDTContent(q),h&&q&&(a=h.read(q,b,d,a),g=g.concat(a.readObject),e=e&&a.readStatus))}},this);return{readStatus:e,readArray:g}},_getParagraph:function(a){return a&&a[0]&&a[0].localName===g.PARAGRAPH_TAG_NAME?a:null},_getSDT:function(a){return a&&a[0]&&a[0].localName===g.SDT_TAG?a[0]:null},_getSDTContent:function(a){for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];if(c.localName===g.SDT_CONTENT_TAG)return c}return null},
_readParagraph:function(a,b,d){var e=!0,g=c.getAttribute(a[0]),h=d.getSerializer(g);if(!g||!h)h=d.getSerializer("text"),e=!1;a=h.read(a,b,d);a.readStatus||(e=!1);return{readObject:a.readObject,readStatus:e}},_reduceByNodeType:function(a,b,d){if(a=a.getSerializer(c.getAttribute(d))){var e=b[b.length-1];e&&c.getAttribute(e[0])===c.getAttribute(d)&&a.mustMerge(e[0],d)?e.push(d):b.push([d])}return b},_insertNodeInDocument:function(a,b){var c={className:"RootNode",children:[]};a.forEach(function(a){c.children.push(a)});
b.deserialize(c)},_getAllTopItems:function(a){a=(new window.DOMParser).parseFromString(a,"text/xml").getElementsByTagNameNS(g.NAMESPACE_URL,g.BODY_TAG_NAME)[0].childNodes;for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b}}})},"MW/rtc/model/io/ForwardCompatibility":function(){define([],function(){return{_ALTERNATE_CONTENT_TAG:"mc:AlternateContent",_FALLBACK_TAG:"Fallback",_CHOICE_TAG:"Choice",_MARKUP_COMPATIBILITY_NAMESPACE:"http://schemas.openxmlformats.org/markup-compatibility/2006",_REQUIRE_TAG:"Requires",
_supportedVersions:[],_showCompatibilityBanner:!1,processXML:function(h,e){this._showCompatibilityBanner=!1;this._supportedVersions=e;this._latestMatlabVersion=this._getLatestMatlabVersion(e);var g=this._getXMLDocumentObject(h);this._createCompatibilityNode(g);return{xmlDocument:(new window.XMLSerializer).serializeToString(g),status:this._showCompatibilityBanner}},_getLatestMatlabVersion:function(h){if(0===h.length)return"";h.sort();h.reverse();return h[0]},_getXMLDocumentObject:function(h){return(new window.DOMParser).parseFromString(h,
"text/xml")},_hasCompatibilityTag:function(h){return h.nodeName===this._ALTERNATE_CONTENT_TAG},_createCompatibilityNode:function(h){if(this._hasCompatibilityTag(h))return this._getChoiceNodeVersion(h)>this._latestMatlabVersion&&(this._showCompatibilityBanner=!0),this._getCompatibleNode(h);var e=this;[].forEach.call(h.childNodes,function(g,d){var c=e._createCompatibilityNode(g);c?h.replaceChild(c,h.childNodes.item(d)):h.removeChild(g)});return h},_getCompatibleNode:function(h){if(!this._hasElementWithTag(h,
this._CHOICE_TAG)&&!this._hasElementWithTag(h,this._FALLBACK_TAG))return h.childNodes[0];var e=this._hasSupportedVersion(h,this._supportedVersions)?this._CHOICE_TAG:this._FALLBACK_TAG;h=h.getElementsByTagNameNS(this._MARKUP_COMPATIBILITY_NAMESPACE,e);return!h[0]||0===h[0].getElementsByTagName("*").length?null:e===this._FALLBACK_TAG?this._getCompatibleNode(h[0]):h[0].childNodes[0]},_hasElementWithTag:function(h,e){h=h.getElementsByTagNameNS(this._MARKUP_COMPATIBILITY_NAMESPACE,e);return!h||0===h.length?
!1:!0},_getChoiceNodeVersion:function(h){return(h=h.getElementsByTagNameNS(this._MARKUP_COMPATIBILITY_NAMESPACE,this._CHOICE_TAG))&&h[0]?h[0].getAttribute(this._REQUIRE_TAG):!1},_hasSupportedVersion:function(h,e){if(!this._hasElementWithTag(h,this._CHOICE_TAG))return!1;var g=this._getChoiceNodeVersion(h);return-1!==e.indexOf(g)}}})},"MW/rtc/plugins/embeddedoutputs/model/io/OutputReader":function(){define(["dojo/_base/lang","dojo/dom-construct","mw-log/Log","MW/rtc/model/io/ForwardCompatibility","MW/rtc/plugins/embeddedoutputs/model/io/OutputTag"],
function(h,e,g,d,c){return{_ELEMENT_NODE:1,_TEXT_NODE:3,read:function(b,a){try{var e=d.processXML(a.output,[]),h=(new window.DOMParser).parseFromString(e.xmlDocument,"text/xml").getElementsByTagName(c.lookup.OUTPUT_ROOT_TAG_NAME)[0],l=this._visitNode(h);b.load(l);return!e.status}catch(n){return g.assert(!1,"Exception occurred while reading output object. Outputs will not be loaded:"+n),!0}},_visitLeafNode:function(b){return this._getValue(b)},_visitNonLeafNode:function(b){return this._isArrayNode(b)?
this._getArrayObject(b):this._getObject(b)},_visitNode:function(b){return this._isLeafNode(b)?this._visitLeafNode(b):this._visitNonLeafNode(b)},_getArrayObject:function(b){for(var a=[],c=0;c<b.childNodes.length;c++){var d=this._visitNode(b.childNodes[c]);a.push(d)}return a},_getObject:function(b){if(!b.hasChildNodes())return"";for(var a={},c=0;c<b.childNodes.length;c++){var d=this._visitNode(b.childNodes[c]),e=b.childNodes[c].nodeName;this._isArrayElement(e)?a=d:a.hasOwnProperty(e)||(a[e]=d)}return a},
_getValue:function(b){return"undefined"!==typeof b.childNodes[1]?b.textContent:b.childNodes[0].nodeValue},_isLeafNode:function(b){return b.childNodes[0]&&b.childNodes[0].nodeType===this._TEXT_NODE},_isArrayNode:function(b){return 1===b.attributes.length&&b.attributes[0].nodeValue===c.lookup.ARRAY},_isObjectNode:function(b){return b.childNodes[0].nodeType==this._ELEMENT_NODE},_isArrayElement:function(b){return b===c.lookup.ELEMENT_TAG_NAME}}})},"MW/rtc/plugins/embeddedoutputs/model/io/OutputTag":function(){define([],
function(){return{lookup:{OUTPUT_ROOT_TAG_NAME:"embeddedOutputs",ELEMENT_TAG_NAME:"element",TYPE_ATTRIBUTE_NAME:"type",META_DATA_TAG_NAME:"metaData",REGION_TAG_NAME:"region",VALUE:"value",ARRAY:"array",NAMESPACE_TAG:"mc",MARKUP_COMPATIBILITY_NAMESPACE:"http://schemas.openxmlformats.org/markup-compatibility/2006",ALTERNATE_CONTENT_TAG:"AlternateContent",CHOICE_TAG:"Choice",REQUIRE_TAG:"Requires",MATLAB_VERSION_R2016B:"R2016b",FALLBACK_TAG:"Fallback"}}})},"dojo/selector/lite":function(){define(["../has",
"../_base/kernel"],function(h,e){var g=document.createElement("div"),d=g.matches||g.webkitMatchesSelector||g.mozMatchesSelector||g.msMatchesSelector||g.oMatchesSelector,c=g.querySelectorAll,b=/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g;h.add("dom-matches-selector",!!d);h.add("dom-qsa",!!c);var a=function(b,d){if(l&&-1<b.indexOf(","))return l(b,d);var g=d?d.ownerDocument||d:e.doc||document,q=(c?/^([\w]*)#([\w\-]+$)|^(\.)([\w\-\*]+$)|^(\w+$)/:/^([\w]*)#([\w\-]+)(?:\s+(.*))?$|(?:^|(>|.+\s+))([\w\-\*]+)(\S*$)/).exec(b);
d=d||g;if(q){var r=8===h("ie")&&h("quirks")?d.nodeType===g.nodeType:null!==d.parentNode&&9!==d.nodeType&&d.parentNode===g;if(q[2]&&r){var s=e.byId?e.byId(q[2],g):g.getElementById(q[2]);if(!s||q[1]&&q[1]!=s.tagName.toLowerCase())return[];if(d!=g)for(g=s;g!=d;)if(g=g.parentNode,!g)return[];return q[3]?a(q[3],s):[s]}if(q[3]&&d.getElementsByClassName)return d.getElementsByClassName(q[4]);if(q[5])if(s=d.getElementsByTagName(q[5]),q[4]||q[6])b=(q[4]||"")+q[6];else return s}if(c)return 1===d.nodeType&&"object"!==
d.nodeName.toLowerCase()?f(d,b,d.querySelectorAll):d.querySelectorAll(b);s||(s=d.getElementsByTagName("*"));q=[];g=0;for(r=s.length;g<r;g++){var t=s[g];1==t.nodeType&&k(t,b,d)&&q.push(t)}return q},f=function(a,c,d){var e=a,f=a.getAttribute("id"),g=f||"__dojo__",h=a.parentNode,k=/^\s*[+~]/.test(c);if(k&&!h)return[];f?g=g.replace(/'/g,"\\$\x26"):a.setAttribute("id",g);k&&h&&(a=a.parentNode);c=c.match(b);for(h=0;h<c.length;h++)c[h]="[id\x3d'"+g+"'] "+c[h];c=c.join(",");try{return d.call(a,c)}finally{f||
e.removeAttribute("id")}};if(!h("dom-matches-selector"))var k=function(){function a(b,c,d){var e=c.charAt(0);if('"'==e||"'"==e)c=c.slice(1,-1);c=c.replace(/\\/g,"");var f=h[d||""];return function(a){return(a=a.getAttribute(b))&&f(a,c)}}function b(a){return function(b,c){for(;(b=b.parentNode)!=c;)if(a(b,c))return!0}}function c(a){return function(b,c){b=b.parentNode;return a?b!=c&&a(b,c):b==c}}function d(a,b){return a?function(c,d){return b(c)&&a(c,d)}:b}var e="div"==g.tagName?"toLowerCase":"toUpperCase",
f={"":function(a){a=a[e]();return function(b){return b.tagName==a}},".":function(a){var b=" "+a+" ";return function(c){return-1<c.className.indexOf(a)&&-1<(" "+c.className+" ").indexOf(b)}},"#":function(a){return function(b){return b.id==a}}},h={"^\x3d":function(a,b){return 0==a.indexOf(b)},"*\x3d":function(a,b){return-1<a.indexOf(b)},"$\x3d":function(a,b){return a.substring(a.length-b.length,a.length)==b},"~\x3d":function(a,b){return-1<(" "+a+" ").indexOf(" "+b+" ")},"|\x3d":function(a,b){return 0==
(a+"-").indexOf(b+"-")},"\x3d":function(a,b){return a==b},"":function(a,b){return!0}},k={};return function(e,g,h){var l=k[g];if(!l){if(g.replace(/(?:\s*([> ])\s*)|(#|\.)?((?:\\.|[\w-])+)|\[\s*([\w-]+)\s*(.?=)?\s*("(?:\\.|[^"])+"|'(?:\\.|[^'])+'|(?:\\.|[^\]])*)\s*\]/g,function(e,g,h,k,r,t,u){k?l=d(l,f[h||""](k.replace(/\\/g,""))):g?l=(" "==g?b:c)(l):r&&(l=d(l,a(r,u,t)));return""}))throw Error("Syntax error in query");if(!l)return!0;k[g]=l}return l(e,h)}}();if(!h("dom-qsa"))var l=function(c,d){for(var e=
c.match(b),f=[],g=0;g<e.length;g++){c=new String(e[g].replace(/\s*$/,""));c.indexOf=escape;for(var h=a(c,d),k=0,l=h.length;k<l;k++){var v=h[k];f[v.sourceIndex]=v}}e=[];for(g in f)e.push(f[g]);return e};a.match=d?function(a,b,c){return c&&9!=c.nodeType?f(c,b,function(b){return d.call(a,b)}):d.call(a,b)}:k;return a})},"mw-facade/MatlabFacade":function(){define("dojo/_base/declare dojo/_base/lang mw-log/Log mw-remote/Remote mw-messageservice/MessageService mw-deprecation-utils/deprecation".split(" "),
function(h,e,g,d,c,b){b.deprecated({deprecated:{module:"mw-facade/MatlabFacade"},replacement:{module:"mw-remote/Remote"}});return h(null,{constructor:function(a){c.start();this._config=a||{};this._registerHandlers()},_config:{},_registerHandlers:function(){var a=this._config;d.registerFaultHandler("Eval",function(b,c){g.error("Error: "+b.code+", "+b.message);c&&e.isFunction(c.errorCallback)?c.errorCallback(b):e.isFunction(a.errorCallback)&&a.errorCallback(b)});d.registerResponseHandler("EvalResponse",
function(b,c){g.info("eval response");c&&e.isFunction(c.evalCallback)?c.evalCallback(b):e.isFunction(a.evalCallback)&&a.evalCallback(b)});d.registerFaultHandler("FEval",function(b,c){g.error("Error: "+b.code+", "+b.message);c&&e.isFunction(c.errorCallback)?c.errorCallback(b):e.isFunction(a.errorCallback)&&a.errorCallback(b)});d.registerResponseHandler("FEvalResponse",function(b,c){g.info("feval response");c&&e.isFunction(c.fevalCallback)?c.fevalCallback(b):e.isFunction(a.evalCallback)&&a.evalCallback(b)})},
executionEval:function(a){e.isString(a)&&(a={matlabcode:a});d.sendMessage({Eval:{mcode:a.matlabcode}},a)},feval:function(a){a.arguments=a.arguments||[];a.nargout=a.nargout||0;d.sendMessage({FEval:{"function":a["function"],arguments:a.arguments,nargout:a.nargout}},a)},publish:c.publish,subscribe:c.subscribe,unsubscribe:c.unsubscribe})})},"url:MW/rtc/templates/rtePane.html":'\x3cdiv data-dojo-attach-point\x3d"rtePane"\x3e\x3cdiv class\x3d"rteWindow" data-dojo-attach-point\x3d"rteWindow"\x3e\x3c/div\x3e\x3c/div\x3e\n',
"url:MW/rtc/plugins/dialog/ConditionalBreakpointTemplate.html":'\x3cdiv class\x3d"rteConditionalBreakpointDialog" data-dojo-attach-point\x3d"contentNode" data-dojo-attach-event\x3d"onkeydown:onTextKeydown"\x3e\n    \x3cspan class\x3d"iconColumn"\x3e\n        \x3cdiv class\x3d"mwIconNode bigConditionalBreakpointDialog" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/div\x3e\n    \x3c/span\x3e\n    \x3cspan class\x3d"contentColumn"\x3e\n        \x3cdiv class\x3d"fileLabel"\x3e\n            \x3clabel data-dojo-attach-point\x3d"fileLabel"\x3e\x3c/label\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"condition"\x3e\n            \x3cdiv class\x3d"conditionLabel"\x3e\n                \x3clabel data-dojo-attach-point\x3d"conditionLabel"\x3e\x3c/label\x3e\n            \x3c/div\x3e\n            \x3cdiv  class\x3d"input-row"\x3e\n                \x3cdiv class\x3d"conditionTextBox" tabindex\x3d"1" data-dojo-attach-point\x3d"conditionInput"\n                     data-dojo-attach-event\x3d"onkeydown:onTextKeydown" data-dojo-type\x3d"dijit.form.TextBox" name\x3d"conditionInput" id\x3d"conditionInput"\x3e\n                \x3c/div\x3e\n            \x3c/div\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"noteLabel"\x3e\n            \x3clabel data-dojo-attach-point\x3d"noteLabel"\x3e\x3c/label\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"confirmButtons"\x3e\n            \x3cbutton class\x3d"helpButton" tabindex\x3d"2" data-dojo-type\x3d"dijit.form.Button" data-dojo-attach-point\x3d"helpButton" name\x3d"helpButton" id\x3d"helpButton"\x3e\x3c/button\x3e\n            \x3cbutton class\x3d"cancelButton" tabindex\x3d"3" data-dojo-type\x3d"dijit.form.Button" data-dojo-attach-point\x3d"cancelButton" name\x3d"cancelButton" id\x3d"cancelButton"\x3e\x3c/button\x3e\n            \x3cbutton class\x3d"okButton" tabindex\x3d"4" data-dojo-type\x3d"dijit.form.Button" data-dojo-attach-point\x3d"okButton" name \x3d "okButton" id\x3d"okButton"\x3e\x3c/button\x3e\n        \x3c/div\x3e\n    \x3c/span\x3e\n\x3c/div\x3e',
"url:dijit/form/templates/Button.html":'\x3cspan class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" role\x3d"presentation"\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\n\t\t\t\tid\x3d"${id}_label"\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\n\t\t\t\x3e\x3c/span\n\t\t\x3e\x3c/span\n\t\x3e\x3c/span\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen"\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\n\t\ttabIndex\x3d"-1" aria-hidden\x3d"true" data-dojo-attach-point\x3d"valueNode"\n/\x3e\x3c/span\x3e\n',
"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\n\t\t\x3c/span\x3e\n\t\x3c/div\x3e\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\n\t${!actionBarTemplate}\n\x3c/div\x3e\n\n',
"url:dojox/layout/resources/FloatingPane.html":'\x3cdiv class\x3d"dojoxFloatingPane" id\x3d"${id}"\x3e\n\t\x3cdiv tabindex\x3d"0" role\x3d"button" class\x3d"dojoxFloatingPaneTitle" dojoAttachPoint\x3d"focusNode"\x3e\n\t\t\x3cspan dojoAttachPoint\x3d"closeNode" dojoAttachEvent\x3d"onclick: close" class\x3d"dojoxFloatingCloseIcon"\x3e\x3c/span\x3e\n\t\t\x3cspan dojoAttachPoint\x3d"maxNode" dojoAttachEvent\x3d"onclick: maximize" class\x3d"dojoxFloatingMaximizeIcon"\x3e\x26thinsp;\x3c/span\x3e\n\t\t\x3cspan dojoAttachPoint\x3d"restoreNode" dojoAttachEvent\x3d"onclick: _restore" class\x3d"dojoxFloatingRestoreIcon"\x3e\x26thinsp;\x3c/span\x3e\t\n\t\t\x3cspan dojoAttachPoint\x3d"dockNode" dojoAttachEvent\x3d"onclick: minimize" class\x3d"dojoxFloatingMinimizeIcon"\x3e\x26thinsp;\x3c/span\x3e\n\t\t\x3cspan dojoAttachPoint\x3d"titleNode" class\x3d"dijitInline dijitTitleNode"\x3e\x3c/span\x3e\n\t\x3c/div\x3e\n\t\x3cdiv dojoAttachPoint\x3d"canvas" class\x3d"dojoxFloatingPaneCanvas"\x3e\n\t\t\x3cdiv dojoAttachPoint\x3d"containerNode" role\x3d"region" tabindex\x3d"-1" class\x3d"${contentClass}"\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cspan dojoAttachPoint\x3d"resizeHandle" class\x3d"dojoxFloatingResizeHandle"\x3e\x3c/span\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:mw-dialog-utils/floatingPaneTemplate.html":'\x3cdiv tabindex\x3d"0" class\x3d"mwNonModalDialog dojoxFloatingPane" id\x3d"${id}"\x3e\n\t\x3cdiv role\x3d"button" class\x3d"dojoxFloatingPaneTitle dijitDialogTitleBar" dojoAttachPoint\x3d"focusNode"\x3e\n        \x3c!--\n         This template is required because the dojox Floating pane template uses onClick Event instead of ondijitclick,\n         which causes some issues with Ipad. Dojo ticket for dialogs not closing on touch devices: http://bugs.dojotoolkit.org/ticket/13488\n         the fix was implemented in _onDijitClickMixin() so using ondijitclick solves the problem.\n\n         This template also groups the icons into a div so that it can be absolute positioned which\n         allows it to be stacked on top of the title node. Previously long titles were overlapping\n         the icons making them unclickable, z-index does not work because the buttons are floats.\n         g985154\n        --\x3e\n\t\t\x3cspan style\x3d"float:left" dojoAttachPoint\x3d"titleNode" class\x3d"dijitInline dijitTitleNode dijitDialogTitle"\x3e\x3c/span\x3e\n\n        \x3cdiv class\x3d"dojoxFloatingIconContainer"\x3e\n            \x3cspan dojoAttachPoint\x3d"closeNode" dojoAttachEvent\x3d"ondijitclick: close" class\x3d"dojoxFloatingCloseIcon"\x3e\x3c/span\x3e\n            \x3cspan dojoAttachPoint\x3d"maxNode" dojoAttachEvent\x3d"ondijitclick: maximize" class\x3d"dojoxFloatingMaximizeIcon"\x3e\x26thinsp;\x3c/span\x3e\n            \x3cspan dojoAttachPoint\x3d"restoreNode" dojoAttachEvent\x3d"ondijitclick: _restore" class\x3d"dojoxFloatingRestoreIcon"\x3e\x26thinsp;\x3c/span\x3e\n            \x3cspan dojoAttachPoint\x3d"dockNode" dojoAttachEvent\x3d"ondijitclick: minimize" class\x3d"dojoxFloatingMinimizeIcon"\x3e\x26thinsp;\x3c/span\x3e\n        \x3c/div\x3e\n\t\x3c/div\x3e\n\t\x3cdiv dojoAttachPoint\x3d"canvas" class\x3d"dojoxFloatingPaneCanvas"\x3e\n\t\t\x3cdiv dojoAttachPoint\x3d"containerNode" role\x3d"region" tabindex\x3d"-1" class\x3d"${contentClass}"\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cspan dojoAttachPoint\x3d"resizeHandle" class\x3d"dojoxFloatingResizeHandle"\x3e\x3c/span\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:dijit/templates/Tooltip.html":'\x3cdiv class\x3d"dijitTooltip dijitTooltipLeft" id\x3d"dojoTooltip" data-dojo-attach-event\x3d"mouseenter:onMouseEnter,mouseleave:onMouseLeave"\n\t\x3e\x3cdiv class\x3d"dijitTooltipConnector" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d"dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point\x3d"containerNode" role\x3d\'alert\'\x3e\x3c/div\n\x3e\x3c/div\x3e\n',"url:dijit/templates/Menu.html":'\x3ctable class\x3d"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role\x3d"menu" tabIndex\x3d"${tabIndex}"\n\t   cellspacing\x3d"0"\x3e\n\t\x3ctbody class\x3d"dijitReset" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/tbody\x3e\n\x3c/table\x3e\n',
"url:dijit/templates/MenuItem.html":'\x3ctr class\x3d"dijitReset" data-dojo-attach-point\x3d"focusNode" role\x3d"menuitem" tabIndex\x3d"-1"\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuItemIconCell" role\x3d"presentation"\x3e\n\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitMenuItemIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\n\t\x3c/td\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuItemLabel" colspan\x3d"2" data-dojo-attach-point\x3d"containerNode,textDirNode"\n\t\trole\x3d"presentation"\x3e\x3c/td\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuItemAccelKey" style\x3d"display: none" data-dojo-attach-point\x3d"accelKeyNode"\x3e\x3c/td\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuArrowCell" role\x3d"presentation"\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d"arrowWrapper" style\x3d"visibility: hidden"\x3e\n\t\t\t\x3cspan class\x3d"dijitInline dijitIcon dijitMenuExpand"\x3e\x3c/span\x3e\n\t\t\t\x3cspan class\x3d"dijitMenuExpandA11y"\x3e+\x3c/span\x3e\n\t\t\x3c/span\x3e\n\t\x3c/td\x3e\n\x3c/tr\x3e\n',
"url:dijit/templates/MenuSeparator.html":'\x3ctr class\x3d"dijitMenuSeparator" role\x3d"separator"\x3e\n\t\x3ctd class\x3d"dijitMenuSeparatorIconCell"\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop"\x3e\x3c/div\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\n\t\x3c/td\x3e\n\t\x3ctd colspan\x3d"3" class\x3d"dijitMenuSeparatorLabelCell"\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop dijitMenuSeparatorLabel"\x3e\x3c/div\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\n\t\x3c/td\x3e\n\x3c/tr\x3e\n',
"url:MW/rtc/plugins/view/exporters/sectionrules.css":".CodeBlock {margin: 10px 0 10px 0; background-color: #F7F7F7;}.CodeBlock+.paragraphNode {margin-top: 10px;}.lineNode {padding-left: 10px; border-left: 1px solid #E9E9E9; border-right: 1px solid #E9E9E9;}.inlineWrapper:first-child .lineNode,.inlineWrapper.outputs+.inlineWrapper .lineNode {padding-top: 5px; border-top: 1px solid #E9E9E9;}.inlineWrapper:last-child .lineNode,.inlineWrapper.outputs .lineNode {padding-bottom: 5px; border-bottom: 1px solid #E9E9E9;}.lineNode .textBox {white-space: pre;}",
"url:MW/rtc/plugins/embeddedoutputs/outputhandlers/css/outputhandler.css":".rtePane .variableNameElement .headerElement {color: rgb(179, 179, 179); font-style: italic;}.rtePane .variableNameElement .headerElement .headerDataType {color: rgb(147, 176, 230);}","url:MW/rtc/plugins/embeddedoutputs/view/css/errorOutput.css":".rtePane .embeddedOutputsErrorElement {min-height: 18px; max-height: 250px; overflow: auto;}.rtePane .embeddedOutputsErrorElement.inlineElement {}.rtePane .embeddedOutputsErrorElement.rightPaneElement {}",
"url:MW/rtc/plugins/embeddedoutputs/view/css/matrixOutput.css":".rtePane .embeddedOutputsMatrixElement,.rtePane .eoOutputWrapper .matrixElement {min-height: 18px; box-sizing: border-box;}.rtePane .embeddedOutputsMatrixElement .matrixElement,.rtePane .eoOutputWrapper .matrixElement,.rtcDataTipElement .matrixElement {position: relative;}.rtePane .matrixElement .variableValue,.rtcDataTipElement .matrixElement .variableValue {white-space: pre; display: inline-block; vertical-align: top; overflow: hidden;}.rtePane .embeddedOutputsMatrixElement.inlineElement {}.rtePane .embeddedOutputsMatrixElement.inlineElement .topHeaderWrapper {display: none;}.rtePane .embeddedOutputsMatrixElement.inlineElement .veTable .body {padding-top: 0 !important; max-height: 100px;}.rtePane .inlineElement .matrixElement {max-height: 300px;}.rtePane .embeddedOutputsMatrixElement.rightPaneElement {}.rtePane .rightPaneElement .matrixElement,.rtcDataTipElement .matrixElement {overflow: hidden; padding-left: 9px;}.rtePane .rightPaneElement .matrixElement {margin-bottom: -1px;}.rtePane .embeddedOutputsMatrixElement .matrixElement .valueContainer,.rtePane .eoOutputWrapper .matrixElement .valueContainer,.rtcDataTipElement .matrixElement .valueContainer {white-space: nowrap; margin-bottom: 3px;}.rtePane .embeddedOutputsMatrixElement .matrixElement .valueContainer .horizontalEllipsis.hide,.rtePane .embeddedOutputsMatrixElement .matrixElement .verticalEllipsis.hide,.rtePane .eoOutputWrapper .matrixElement .valueContainer .horizontalEllipsis.hide,.rtePane .eoOutputWrapper .matrixElement .verticalEllipsis.hide,.rtcDataTipElement .matrixElement .valueContainer .horizontalEllipsis.hide,.rtcDataTipElement .matrixElement .verticalEllipsis.hide {display: none;}.embeddedOutputsVariableMatrixElement .matrixElement .valueContainer.hideEllipses .verticalEllipsis, .embeddedOutputsVariableMatrixElement .matrixElement .valueContainer.hideEllipses .horizontalEllipsis {display:none;}.rtePane .embeddedOutputsMatrixElement .matrixElement .valueContainer .horizontalEllipsis,.rtePane .eoOutputWrapper .matrixElement .valueContainer .horizontalEllipsis {margin-bottom: -3px;}.rtePane .eoOutputWrapper .embeddedOutputsVariableMatrixElement .matrixElement .valueContainer {cursor: default !important;}",
"url:MW/rtc/plugins/embeddedoutputs/view/css/variableTableOutput.css":".rtePane .embeddedOutputsVariableTableElement .ClientViewDiv table tr {height: 22px; white-space: nowrap;}.rtePane .embeddedOutputsVariableTableElement .ClientViewDiv table tr td,.rtePane .embeddedOutputsVariableTableElement .ClientViewDiv table tr th {min-width : 75px; max-width : 75px; background-color:white; text-overflow: ellipsis; font-family: 'Arial', sans-serif; font-size: 12px; overflow : hidden;}.rtePane .embeddedOutputsVariableTableElement .ClientViewDiv table tbody tr th {width: 34px; max-width: 100px;}.rtePane .embeddedOutputsVariableTableElement .ClientViewDiv table tr span {text-overflow: ellipsis; padding: 3px;}.rtePane .embeddedOutputsVariableTableElement .ClientViewDiv table tr th {color: rgba(0,0,0,0.5); padding: 3px; font-size: 9px;}.rtePane .embeddedOutputsVariableTableElement .ClientViewDiv table tr th:first-child {min-width: 28px; max-width: 250px;}",
"url:MW/rtc/plugins/embeddedoutputs/view/css/symbolicOutput.css":".rtePane .inlineElement .symbolicElement {margin-top: 1px; margin-bottom: 1px;}.rtePane .rightPaneElement .symbolicElement {padding-top: 3px; padding-left: 9px;}.rtePane .embeddedOutputsSymbolicElement .MathEquation {margin-top: 4px; margin-bottom: 4px;}.rtePane .embeddedOutputsSymbolicElement .MathEquation.displaySymbolicElement {margin-left: 15px;}.rtePane .embeddedOutputsSymbolicElement .MathEquation.inlineSymbolicElement {}.rtePane .embeddedOutputsSymbolicElement {overflow-x: auto; overflow-y: auto;}",
"url:MW/rtc/plugins/embeddedoutputs/view/css/textOutput.css":".rtePane .embeddedOutputsTextElement,.rtePane .embeddedOutputsVariableStringElement {white-space: pre; word-wrap: initial; min-height: 18px; max-height: 250px; overflow: auto;}.rtePane .textElement,.rtcDataTipElement .textElement {padding-top: 3px;}.rtePane .embeddedOutputsTextElement.inlineElement,.rtePane .embeddedOutputsVariableStringElement.inlineElement {}.rtePane .inlineElement .textElement {}.rtePane .embeddedOutputsTextElement.rightPaneElement,.rtePane .embeddedOutputsVariableStringElement.rightPaneElement {min-height: 16px;}.rtePane .rightPaneElement .textElement {padding-top: 2px; padding-left: 9px;}",
"url:MW/rtc/plugins/embeddedoutputs/view/css/variableEditor.css":'.rtePane .veSpecifier {}.rtePane .veContainer {}.rtePane .veSpecifierBox {height: 400px; width: 500px;}.rtePane .veSpecifier .veTable {padding-top: 3px; padding-bottom: 4px;}.rtePane .veSpecifierBox .veSpecifier .veContainer {position: relative; width: 100%; height: 370px;}.rtePane .veSpecifierBox .dijitDialogPaneContent {width: 97% !important; height: 88% !important;}.rtePane .veSpecifier .veTable .rowHeadersWrapper {padding-bottom: 0;}.rtePane .veSpecifier .veTable .scroller .variableEditorRenderers {padding-right: 3px; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none;}.rtePane .veSpecifier .veTable .topHeaderWrapper,.rtePane .veSpecifier .veTable .bottomRowHeaderWrapper {visibility: hidden; z-index: 0;}.rtePane .veMetaSummary {font-style: italic;}.rtePane .veSpecifier .veTable .scroller {overflow: hidden;}.rtePane .veSpecifier .veTable:hover .scroller {overflow: auto;}.rtePane .veSpecifier .veVariableName,.rtePane .veSpecifier .veDimensionFont {font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 12px;}.rtePane .veSpecifier .veVariableName {padding-top: 2px;}.rtePane .veSpecifier .veDimensionFont {font-style: italic; color: #9A9A9A;}.rtePane .veSpecifier .scroller::-webkit-scrollbar-track {background-color: white;}.rtePane .veSpecifier .scroller::-webkit-scrollbar-corner {background-color: white;}.rtePane .veSpecifier .veTable .topRowHeaderWrapper {border: none; background-color: #F8F9FA;}.rtePane .veSpecifier .mw_type_ListBase.showCellBorders,.rtePane .veSpecifier .veTable .topHeaderWrapper,.rtePane .veSpecifier .veTable .bottomRowHeaderWrapper,.rtePane .veSpecifier .veTable .verticalScrollSpacer,.rtePane .veSpecifier .veTable .horizontalScrollSpacer {border: none;}.rtePane .veSpecifier .veTable .dataScrollerNode {border: 1px solid #BFBFBF;}.rtePane .veSpecifier .veTable .columnHeaderNode,.rtePane .veSpecifier .veTable .rowHeaderNode,.rtePane .veSpecifier .veTable .dataBody {font-family: Arial; font-size: 13px;}.rtePane .veSpecifier .veTable .columnHeaderNode,.rtePane .veSpecifier .veTable .rowHeaderNode {color: #7F7F7F;}.rtePane .veSpecifier .veTable .dataBody {color: #000000;}.rtePane .veSpecifier .veTable .columnHeaderNode .cell .drag,.rtePane .veSpecifier .veTable .columnHeaderNode .cell .header,.rtePane .veSpecifier .veTable .topHeaderWrapper,.rtePane .veSpecifier .veTable .bottomRowHeaderWrapper {background-color: #F8F9FA;}.rtePane .veSpecifier .veTable .columnHeaderNode .cell .dragBorder {border-right: 1px solid #F8F9FA;}.rtePane .veSpecifier .veTable .rowHeaderNode .cell {padding-top: 3px; text-align: center; border-bottom: 1px solid #F8F9FA;}.rtePane .veSpecifier .veTable .dataBody .cell .plainText {text-align: right;}.rtePane .veSpecifier .veTable .dataBody .row .cell {border-bottom: 1px solid #E9E9E9; border-right: 1px solid #E9E9E9;}',
"url:MW/rtc/plugins/embeddedoutputs/view/css/variableOutput.css":".rtePane .embeddedOutputsVariableElement {white-space: pre-wrap; word-wrap: break-word; min-height: 18px; max-height: 250px; overflow: auto;}.rtePane .variableElement {}.rtePane .embeddedOutputsVariableElement.inlineElement {}.rtePane .inlineElement .variableElement {}.rtePane .embeddedOutputsVariableElement.rightPaneElement {min-height: 16px;}.rtePane .rightPaneElement .variableElement {padding-top: 2px; padding-left: 9px;}.variableNameElement {margin-bottom: 3px; display: inline-block;}",
"url:MW/rtc/plugins/embeddedoutputs/view/css/warningOutput.css":".rtePane .embeddedOutputsWarningElement{min-height: 18px; max-height: 250px; overflow: auto;}.rtePane .embeddedOutputsWarningElement.inlineElement {}.rtePane .embeddedOutputsWarningElement.rightPaneElement {}","url:MW/rtc/plugins/embeddedoutputs/view/inline/css/inlineoutput.css":".rtePane .outputGroup {margin: 2px 0 2px 0; padding: 2px 2px 2px 4px;}.rtePane .outputRegion {}.rtePane .outputParagraph {color: rgba(64, 64, 64, 1); padding: 10px 0 6px 17px; background: white; overflow-x: hidden;}.rtePane .inlineWrapper:last-child .outputParagraph {border-bottom-left-radius: 4px; border-bottom-right-radius: 4px;}.rtePane .outputParagraph:empty {margin: 0;}",
"url:MW/rtc/plugins/language/matlab/alert/css/alertPlugin.css":".dijitTooltipDialog .dijitTooltipContainer .dijitTooltipContents .alertPlugin-alertMessage {min-width: 12px; max-width: 400px; max-height: 300px; overflow: auto;}.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar {width: 11px; height: 11px;}.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-track {background-color: rgba(0, 0, 0, 0);}.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-corner {background-color: rgba(0, 0, 0, 0);}.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-thumb {border-radius: 7px; background-color: rgba(0, 0, 0, 0.1); border: 2px solid rgba(0, 0, 0, 0); background-clip: padding-box;}.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-thumb:hover {background-color: rgba(0, 0, 0, 0.2);}.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-thumb {background-color: rgba(0, 0, 0, 0);}.dijitTooltipDialog .alertPlugin-alertMessage:hover::-webkit-scrollbar-thumb {background-color: rgba(0, 0, 0, 0.1);}.dijitTooltipDialog .alertPlugin-alertMessage:hover::-webkit-scrollbar-thumb:hover {background-color: rgba(0, 0, 0, 0.2);}.alertPluginLayer {position: relative !important; z-index: 2;}.rtePane .alertPlugin-alertLine {position: absolute; display: initial; width: 40px; text-align: right; cursor: text;}.rtePane .alertPlugin-onTextLine {visibility: hidden;}.rtePane .alertPlugin-hasTooltip .alertPlugin-warningImg,.rtePane .alertPlugin-hasTooltip .alertPlugin-errorImg {cursor: pointer;}.rtePane .alertPlugin-alertLine .alertPlugin-warningElement,.rtePane .alertPlugin-alertLine .alertPlugin-errorElement {display: inline-block; margin-right: 4px;}.rtePane .alertPlugin-isStale {-webkit-filter: opacity(0.4) grayscale(80%); filter: opacity(0.4) grayscale(80%);}",
"url:MW/rtc/plugins/language/matlab/diagnosticmessage/css/diagnosticMessage.css":'.diagnosticMessage-wrapper {font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 12px;}.diagnosticMessage-wrapper.diagnosticMessage-warningType {color: rgb(255,100,0);}.diagnosticMessage-wrapper.diagnosticMessage-warningType a {color: rgb(255,100,0); text-decoration: underline;}.diagnosticMessage-wrapper.diagnosticMessage-errorType {color: rgb(230,0,0);}.diagnosticMessage-wrapper.diagnosticMessage-errorType a {color: rgb(230,0,0); text-decoration: underline;}.diagnosticMessage-wrapper .diagnosticMessage-messagePart {white-space: pre-wrap;}.diagnosticMessage-wrapper .diagnosticMessage-stackPart {white-space: pre;}',
"url:MW/rtc/plugins/view/exporters/ellipses.css":'.matrixElement .horizontalEllipsis,.rtcDataTipElement .matrixElement .horizontalEllipsis {display: inline-block; margin-top: 3px; width: 30px; height: 12px; background-repeat: no-repeat; background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAJCAYAAADO1CeCAAAAJUlEQVR42mP4//8/A70xw0i29BUDFPxnAEtTW37wWDqakIa4pQDvOOG89lHX2gAAAABJRU5ErkJggg\x3d\x3d");}.matrixElement .verticalEllipsis,.textElement .verticalEllipsis,.rtcDataTipElement .matrixElement .verticalEllipsis,.rtcDataTipElement .textElement .verticalEllipsis {margin-left: 35px; width: 12px; height: 30px; background-repeat: no-repeat; background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAZCAYAAAAIcL+IAAAALklEQVR42mP4//8/AzGYgWyFMECMwv8QddRS+P//KyimlmcGUOFoOI6GI/UVAgDnd8Dd4+NCwgAAAABJRU5ErkJggg\x3d\x3d");}',
"url:mw-menu/templates/Menu.html":'\x3cdiv data-dojo-attach-point\x3d"focusNode" tabindex\x3d"0" data-focus\x3d"temporary"\x3e\x3c/div\x3e\n',"url:mw-menu/templates/MenuItem.html":'\x3cdiv data-dojo-attach-point\x3d"focusNode"\n        \x3e\x3cdiv class\x3d"mwIconNode" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/div\n        \x3e\x3cdiv class\x3d"mwTextAndDescriptionContainerNode" data-dojo-attach-point\x3d"textAndDescriptionContainerNode"\n        \x3e\x3cdiv data-dojo-attach-point\x3d"textNode" class\x3d\'mwTextNode\'\x3e\x3c/div\n        \x3e\x3cdiv data-dojo-attach-point\x3d"descriptionNode" class\x3d\'mwDescriptionNode\'\x3e\x3c/div\n    \x3e\x3c/div\n    \x3e\x3cdiv class\x3d"mwShortcutKeyNode" data-dojo-attach-point\x3d"shortcutKeyNode"\x3e\x3c/div\n\x3e\x3c/div\x3e',
"url:mw-navigationbar/templates/navigationBar.html":'\x3cdiv class\x3d"navigationBarContainer" data-dojo-attach-point\x3d"navigationBarContainer"\x3e\n    \x3cdiv data-dojo-attach-point\x3d"navigationBarNode" class\x3d"navigationBarNode"\x3e\n        \x3cdiv class\x3d"locationNodeWithIcon" data-dojo-attach-point\x3d"locationNodeWithIcon"\x3e\n            \x3cdiv class\x3d"iconParentDiv" title\x3d""\x3e\n                \x3cdiv class\x3d"navBarIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/div\x3e\n            \x3c/div\x3e\n            \x3cdiv class\x3d"currentLocationNode" data-dojo-attach-point\x3d"currentLocationNode" data-tag\x3d""\x3e\x3c/div\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n\x3c/div\x3e',
"url:mw-form/templates/DropDownButton.html":'\x3cdiv data-dojo-attach-point\x3d"contentWrapperNode" class\x3d"mwContentWrapperNode"\n    \x3e\x3cdiv data-dojo-attach-point\x3d"focusNode" class\x3d"mwFocusNode"\n        \x3e\x3cdiv data-dojo-attach-point\x3d"buttonNode" class\x3d"mwButtonNode"\n            \x3e\x3cdiv data-dojo-attach-point\x3d"buttonAlignmentNode" class\x3d"mwButtonAlignmentNode"\x3e\x3c/div\n            \x3e\x3cdiv data-dojo-attach-point\x3d"buttonContainerNode" class\x3d"mwButtonContainerNode"\n                \x3e\x3cdiv data-dojo-attach-point\x3d"iconNode" class\x3d"mwIconNode"\x3e\x3c/div\n                \x3e\x3cdiv data-dojo-attach-point\x3d"textNode" class\x3d"mwTextNode mwBlockTextNode"\n                    \x3e\x3cdiv data-dojo-attach-point\x3d"textLine" class\x3d"mwTextContentNode"\x3e\x3c/div\n                \x3e\x3c/div\n            \x3e\x3c/div\n        \x3e\x3c/div\n        \x3e\x3cdiv data-dojo-attach-point\x3d"dropDownNode" class\x3d"mwDropDownNode"\n            \x3e\x3cdiv data-dojo-attach-point\x3d"dropDownAlignmentNode" class\x3d"mwDropDownAlignmentNode"\x3e\x3c/div\n            \x3e\x3cdiv data-dojo-attach-point\x3d"dropDownContainerNode" class\x3d"mwDropDownContainerNode"\n                \x3e\x3cdiv data-dojo-attach-point\x3d"inlineTextNode" class\x3d"mwTextNode mwInlineTextNode"\n                    \x3e\x3cdiv data-dojo-attach-point\x3d"inlineTextLine" class\x3d"mwTextContentNode"\x3e\x3c/div\n                \x3e\x3c/div\n                \x3e\x3cdiv data-dojo-attach-point\x3d"arrowNode" class\x3d"mwArrowNode"\n                    \x3e\x3cdiv data-dojo-attach-point\x3d"lastTextLineNode" class\x3d"mwLastTextLineNode"\n                        \x3e\x3cdiv data-dojo-attach-point\x3d"lastTextLine" class\x3d"mwTextContentNode"\x3e\x3c/div\n                    \x3e\x3c/div\n                    \x3e\x3cdiv data-dojo-attach-point\x3d"arrowIconNode" class\x3d"mwArrowIconNode"\x3e\x3c/div\n                \x3e\x3c/div\n            \x3e\x3c/div\n        \x3e\x3c/div\n    \x3e\x3c/div\n\x3e\x3c/div\x3e',
"url:mw-overlay-utils/templates/busyOverlayTemplate.html":'\x3cdiv class\x3d"mw-busyIndicator" data-dojo-attach-point\x3d"_busyOverlayNode"\x3e\n\t\x3cdiv class\x3d"underlayNode" data-dojo-attach-point\x3d"_underlayNode"\x3e\x3c/div\x3e\n\t\x3cdiv class\x3d"spinnerNode" data-dojo-attach-point\x3d"_spinnerNode" \x3e\x3c/div\x3e\n\x3c/div\x3e\n',"url:MW/rtc/plugins/debug/css/run_here_14.svg":'\x3csvg xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 14 14"\x3e\x3cg id\x3d"Layer_2" data-name\x3d"Layer 2"\x3e\x3cg id\x3d"Icons"\x3e\x3cg id\x3d"NEW"\x3e\x3cg id\x3d"CONTEXTUAL_MENU" data-name\x3d"CONTEXTUAL MENU"\x3e\x3cg id\x3d"run_here_14"\x3e\x3crect fill\x3d"#c2b59b" opacity\x3d"0" width\x3d"14" height\x3d"14"/\x3e\x3crect fill\x3d"#414042" x\x3d"9" y\x3d"2" width\x3d"2" height\x3d"10"/\x3e\x3cpolygon fill\x3d"#414042" points\x3d"3 2 3 12 8 7 3 2"/\x3e\x3c/g\x3e\x3c/g\x3e\x3c/g\x3e\x3c/g\x3e\x3c/g\x3e\x3c/svg\x3e',
"url:MW/rtc/plugins/debug/css/step_in_14.svg":'\x3csvg xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 14 14"\x3e\x3cg id\x3d"Layer_2" data-name\x3d"Layer 2"\x3e\x3cg id\x3d"Icons"\x3e\x3cg id\x3d"NEW"\x3e\x3cg id\x3d"CONTEXTUAL_MENU" data-name\x3d"CONTEXTUAL MENU"\x3e\x3cg id\x3d"step_in_14"\x3e\x3crect fill\x3d"#c2b59b" fill-opacity\x3d"0" opacity\x3d"0.36" width\x3d"14" height\x3d"14"/\x3e\x3crect fill\x3d"#414042" x\x3d"2" y\x3d"8" width\x3d"7" height\x3d"2"/\x3e\x3crect fill\x3d"#414042" x\x3d"1" y\x3d"1" width\x3d"2" height\x3d"9"/\x3e\x3cpolygon fill\x3d"#414042" points\x3d"9 5 9 13 13 9 9 5"/\x3e\x3c/g\x3e\x3c/g\x3e\x3c/g\x3e\x3c/g\x3e\x3c/g\x3e\x3c/svg\x3e',
"url:MW/rtc/plugins/embeddedoutputs/view/templateError.html":'\x3cspan\x3e\n    \x3csvg class\x3d"errorImg" width\x3d"14" height\x3d"15" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:svg\x3d"http://www.w3.org/2000/svg"\x3e\n        \x3ccircle id\x3d"error_circle" cx\x3d"7" cy\x3d"8" r\x3d"7" fill\x3d"rgb(204, 55, 41)"/\x3e\n        \x3crect id\x3d"top_bang" fill\x3d"white" x\x3d"6" y\x3d"3" width\x3d"2" height\x3d"6"/\x3e\n        \x3crect id\x3d"bottom_bang" fill\x3d"white" x\x3d"6" y\x3d"11" width\x3d"2" height\x3d"2"/\x3e\n    \x3c/svg\x3e\n\x3c/span\x3e',
"url:mw-form/templates/ToggleButton.html":'\x3cdiv data-dojo-attach-point\x3d"focusNode" role\x3d"button" aria-pressed\x3d"false"\n    \x3e\x3cdiv data-dojo-attach-point\x3d"contentWrapperNode" class\x3d"mwContentWrapperNode"\n        \x3e\x3cdiv data-dojo-attach-point\x3d"iconAndTextContainerNode" class\x3d"mwIconAndTextContainerNode mwAlignmentNode"\n            \x3e\x3cdiv data-dojo-attach-point\x3d"iconNode" class\x3d"mwIconNode"\x3e\x3c/div\n            \x3e\x3cdiv data-dojo-attach-point\x3d"textNode" class\x3d"mwTextNode"\x3e\x3c/div\n        \x3e\x3c/div\n    \x3e\x3c/div\x3e\n\x3c/div\x3e',
"url:MW/rtc/plugins/embeddedoutputs/codegen/templates/CodeGenWidget.html":'\x3cdiv data-dojo-attach-point\x3d\'containerNode\' class\x3d"${baseClass} figureWidget"\x3e\n    \x3cdiv data-dojo-attach-point\x3d"codeDiv" class\x3d"codeexpander"\x3e\n        \x3cspan class\x3d"codepopuplabel" data-dojo-attach-point\x3d"codeLabel"\x3e${_codeLabel}\x3c/span\x3e\n        \x3cimg data-dojo-attach-point\x3d"arrowImgNode" class\x3d"codepopuparrow"\x3e\n    \x3c/div\x3e\n    \x3cdiv data-dojo-attach-point\x3d"codeGenArea" class\x3d"codegentoggle overlay"\x3e\n        \x3ctextarea name\x3d"codearea" data-dojo-attach-point\x3d"textarea" class\x3d"textcodepopup" readonly rows\x3d"${_MIN_TEXT_SIZE}" dojoType\x3d"dijit.form.Textarea"\x3e\x3c/textarea\x3e\n        \x3cbutton type\x3d"button" data-dojo-attach-point\x3d"updateBtn" class\x3d"codebtn" data-dojo-type\x3d"dijit.form.Button"\x3e${_updateCodeLabel}\x3c/button\x3e\n        \x3cbutton type\x3d"button" data-dojo-attach-point\x3d"copyBtn" class\x3d"codebtn copybutton" data-dojo-type\x3d"dijit.form.Button"\x3e${_copyLabel}\x3c/button\x3e\n    \x3c/div\x3e\n\x3c/div\x3e',
"url:MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/templates/Palette.html":'\x3cdiv data-dojo-attach-point\x3d\'containerNode\' class\x3d"${baseClass} figureWidget" data-tag\x3d"${dataTag}"\x3e\x3c/div \x3e\n',"url:dijit/form/templates/TextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft" id\x3d"widget_${id}" role\x3d"presentation"\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\n\t/\x3e\x3c/div\n\x3e\x3c/div\x3e\n',
"url:dijit/templates/TooltipDialog.html":'\x3cdiv role\x3d"alertdialog" tabIndex\x3d"-1"\x3e\n\t\x3cdiv class\x3d"dijitTooltipContainer" role\x3d"presentation"\x3e\n\t\t\x3cdiv data-dojo-attach-point\x3d"contentsNode" class\x3d"dijitTooltipContents dijitTooltipFocusNode"\x3e\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\n\t\t\t${!actionBarTemplate}\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\t\x3cdiv class\x3d"dijitTooltipConnector" role\x3d"presentation" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\x3e\n\x3c/div\x3e\n',
"url:MW/equations/editor/utils/Templates.xml":'\x3croot\x3e\n    \x3c!--\n        This file contains all available structures.\n\n        The \'id\' will be used to generated the action-id by prepending \'equationeditor.insert.\'.\n\n        If no command-id is given, the id will also be used as command-id\n        (for LaTeX-style backslash commands).\n    --\x3e\n\n    \x3c!-- Structures --\x3e\n    \x3c!-- Script --\x3e\n    \x3ctemplate id\x3d"superscript"\x3e\n        \x3cMathScript data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder" /\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-cursor\x3d"1" data-category\x3d"placeholder" /\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"subscript"\x3e\n        \x3cMathScript data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder" /\x3e\n            \x3cMathRow data-cursor\x3d"1" data-category\x3d"placeholder" /\x3e\n            \x3cNull/\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"subsuperscript"\x3e\n        \x3cMathScript data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder" /\x3e\n            \x3cMathRow data-cursor\x3d"1" data-category\x3d"placeholder" /\x3e\n            \x3cMathRow data-cursor\x3d"2" data-category\x3d"placeholder" /\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"multiscript"\x3e\n        \x3cMathMultiScript numPostPairs \x3d"1" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder" /\x3e\n            \x3cMathRow data-cursor\x3d"1" data-category\x3d"placeholder" /\x3e\n            \x3cMathRow data-cursor\x3d"2" data-category\x3d"placeholder" /\x3e\n            \x3cMathRow data-cursor\x3d"3" data-category\x3d"placeholder" /\x3e\n            \x3cMathRow data-cursor\x3d"4" data-category\x3d"placeholder" /\x3e\n        \x3c/MathMultiScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"over"\x3e\n        \x3cMathScript limitStyle\x3d"stack" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-cursor\x3d"1" data-category\x3d"placeholder" /\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"under"\x3e\n        \x3cMathScript limitStyle\x3d"stack" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cMathRow data-cursor\x3d"1" data-category\x3d"placeholder" /\x3e\n            \x3cNull/\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"underover"\x3e\n        \x3cMathScript limitStyle\x3d"stack" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cMathRow data-cursor\x3d"1" data-category\x3d"placeholder" /\x3e\n            \x3cMathRow data-cursor\x3d"2" data-category\x3d"placeholder" /\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3c!-- Fractions and Radicals --\x3e\n    \x3ctemplate id\x3d"frac"\x3e\n        \x3cMathFraction data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cMathRow data-cursor\x3d"1" data-category\x3d"placeholder"/\x3e\n        \x3c/MathFraction\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"fracbevelled"\x3e\n        \x3cMathFraction data-category\x3d"structure" bevelled\x3d"true"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cMathRow data-cursor\x3d"1" data-category\x3d"placeholder"/\x3e\n        \x3c/MathFraction\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"fracinline"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cMathText kind\x3d"symbol" text\x3d"\x26#x002F;" symbolName\x3d"slash" data-category\x3d"static" /\x3e\n            \x3cMathRow data-cursor\x3d"1" data-category\x3d"placeholder"/\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"sqrt"\x3e\n        \x3cMathRadical data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder" /\x3e\n            \x3cMathRow data-category\x3d"static" /\x3e\n        \x3c/MathRadical\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"root"\x3e\n        \x3cMathRadical data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder" /\x3e\n            \x3cMathRow data-cursor\x3d"1" data-category\x3d"placeholder" /\x3e\n        \x3c/MathRadical\x3e\n    \x3c/template\x3e\n\n    \x3c!-- Operators --\x3e\n    \x3ctemplate id\x3d"int"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathText data-category\x3d"static" kind\x3d"symbol" text\x3d"\x26#x222B;" symbolName\x3d"intop" /\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"intdef"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathScript data-category\x3d"structure-part"\x3e\n                \x3cMathRow data-category\x3d"static"\x3e\n                    \x3cMathText kind\x3d"symbol" text\x3d"\x26#x222B;" symbolName\x3d"intop" /\x3e\n                \x3c/MathRow\x3e\n                \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"1" /\x3e\n                \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"2" /\x3e\n            \x3c/MathScript\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"oint"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathText data-category\x3d"static" kind\x3d"symbol" text\x3d"\x26#x222E;" symbolName\x3d"contourintop" /\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"ointdef"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathScript data-category\x3d"structure-part"\x3e\n                \x3cMathRow data-category\x3d"static"\x3e\n                    \x3cMathText kind\x3d"symbol" text\x3d"\x26#x222E;" symbolName\x3d"contourintop" /\x3e\n                \x3c/MathRow\x3e\n                \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"1" /\x3e\n                \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"2" /\x3e\n            \x3c/MathScript\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"sum"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathScript data-category\x3d"structure-part"\x3e\n                \x3cMathRow data-category\x3d"static"\x3e\n                    \x3cMathText kind\x3d"symbol" text\x3d"\x26#x2211;" symbolName\x3d"sum" /\x3e\n                \x3c/MathRow\x3e\n                \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"1" /\x3e\n                \x3cNull/\x3e\n            \x3c/MathScript\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"sumdef"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathScript data-category\x3d"structure-part"\x3e\n                \x3cMathRow data-category\x3d"static"\x3e\n                    \x3cMathText kind\x3d"symbol" text\x3d"\x26#x2211;" symbolName\x3d"sum" /\x3e\n                \x3c/MathRow\x3e\n                \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"1" /\x3e\n                \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"2" /\x3e\n            \x3c/MathScript\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"prod"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathScript data-category\x3d"structure-part"\x3e\n                \x3cMathRow data-category\x3d"static"\x3e\n                    \x3cMathText kind\x3d"symbol" text\x3d"\x26#x220F;" symbolName\x3d"prod" /\x3e\n                \x3c/MathRow\x3e\n                \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"1" /\x3e\n                \x3cNull/\x3e\n            \x3c/MathScript\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"proddef"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathScript data-category\x3d"structure-part"\x3e\n                \x3cMathRow data-category\x3d"static"\x3e\n                    \x3cMathText kind\x3d"symbol" text\x3d"\x26#x220F;" symbolName\x3d"prod" /\x3e\n                \x3c/MathRow\x3e\n                \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"1" /\x3e\n                \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"2" /\x3e\n            \x3c/MathScript\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"lim"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathScript limitStyle\x3d"stack" data-category\x3d"structure-part"\x3e\n                \x3cMathRow data-category\x3d"static"\x3e\n                    \x3cMathText kind\x3d"code" text\x3d"lim" /\x3e\n                \x3c/MathRow\x3e\n                \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"1" /\x3e\n                \x3cNull/\x3e\n            \x3c/MathScript\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n\n\n    \x3c!-- Misc_Structures --\x3e\n    \x3ctemplate id\x3d"cases"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathDelimiter symbolName\x3d"braceleft" data-category\x3d"static"/\x3e\n            \x3cMathMatrix data-category\x3d"structure-part" rows\x3d"2" cols\x3d"2"\x3e\n                \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n                \x3cMathRow data-cursor\x3d"1" data-category\x3d"placeholder"/\x3e\n                \x3cMathRow data-cursor\x3d"2" data-category\x3d"placeholder"/\x3e\n                \x3cMathRow data-cursor\x3d"3" data-category\x3d"placeholder"/\x3e\n            \x3c/MathMatrix\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"derivative"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathFraction data-category\x3d"structure-part"\x3e\n                \x3cMathRow data-category\x3d"static"\x3e\n                    \x3cMathText kind\x3d"code" text\x3d"d" /\x3e\n                \x3c/MathRow\x3e\n                \x3cMathRow data-category\x3d"structure-part"\x3e\n                    \x3cMathText data-category\x3d"static" kind\x3d"code" text\x3d"d" /\x3e\n                    \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"1" /\x3e\n                \x3c/MathRow\x3e\n            \x3c/MathFraction\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"derivativePrime"\x3e\n        \x3cMathScript data-category\x3d"structure"\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathText kind\x3d"symbol" symbolName\x3d"prime" /\x3e\n            \x3c/MathRow\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"derivativeN"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathFraction data-category\x3d"structure-part"\x3e\n                \x3cMathRow data-category\x3d"structure-part"\x3e\n                    \x3cMathScript\x3e\n                        \x3cMathRow data-category\x3d"static"\x3e\n                            \x3cMathText kind\x3d"code" text\x3d"d" /\x3e\n                        \x3c/MathRow\x3e\n                        \x3cNull/\x3e\n                        \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"1" /\x3e\n                    \x3c/MathScript\x3e\n                \x3c/MathRow\x3e\n                \x3cMathRow data-category\x3d"structure-part"\x3e\n                    \x3cMathText kind\x3d"code" text\x3d"d" data-category\x3d"static" /\x3e\n                    \x3cMathScript\x3e\n                        \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"2" /\x3e\n                        \x3cNull/\x3e\n                        \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"3" /\x3e\n                    \x3c/MathScript\x3e\n                \x3c/MathRow\x3e\n            \x3c/MathFraction\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"partialderivative"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathFraction data-category\x3d"structure-part"\x3e\n                \x3cMathRow data-category\x3d"static"\x3e\n                    \x3cMathText kind\x3d"symbol" symbolName\x3d"partial" /\x3e\n                \x3c/MathRow\x3e\n                \x3cMathRow data-category\x3d"structure-part"\x3e\n                    \x3cMathText kind\x3d"symbol" symbolName\x3d"partial" data-category\x3d"static" /\x3e\n                    \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"1" /\x3e\n                \x3c/MathRow\x3e\n            \x3c/MathFraction\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n\n    \x3ctemplate id\x3d"partialderivativeN"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathFraction data-category\x3d"structure-part"\x3e\n                \x3cMathRow data-category\x3d"structure-part"\x3e\n                    \x3cMathScript\x3e\n                        \x3cMathRow data-category\x3d"static"\x3e\n                            \x3cMathText kind\x3d"symbol" symbolName\x3d"partial" /\x3e\n                        \x3c/MathRow\x3e\n                        \x3cNull/\x3e\n                        \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"1" /\x3e\n                    \x3c/MathScript\x3e\n                \x3c/MathRow\x3e\n                \x3cMathRow data-category\x3d"structure-part"\x3e\n                    \x3cMathText kind\x3d"symbol" symbolName\x3d"partial" data-category\x3d"static" /\x3e\n                    \x3cMathScript\x3e\n                        \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"2" /\x3e\n                        \x3cNull/\x3e\n                        \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"3" /\x3e\n                    \x3c/MathScript\x3e\n                \x3c/MathRow\x3e\n            \x3c/MathFraction\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n\n    \x3c!-- Brackets --\x3e\n    \x3ctemplate id\x3d"parentheses"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathDelimiter symbolName\x3d"parenleft" data-category\x3d"static" /\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n            \x3cMathDelimiter symbolName\x3d"parenright" data-category\x3d"static" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"brackets"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathDelimiter symbolName\x3d"bracketleft" data-category\x3d"static" /\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n            \x3cMathDelimiter symbolName\x3d"bracketright" data-category\x3d"static" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"braces"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathDelimiter symbolName\x3d"braceleft" data-category\x3d"static" /\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n            \x3cMathDelimiter symbolName\x3d"braceright" data-category\x3d"static" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"ceil"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathDelimiter symbolName\x3d"ceilleft" data-category\x3d"static" /\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n            \x3cMathDelimiter symbolName\x3d"ceilright" data-category\x3d"static" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"floor"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathDelimiter symbolName\x3d"floorleft" data-category\x3d"static" /\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n            \x3cMathDelimiter symbolName\x3d"floorright" data-category\x3d"static" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"anglebracket"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathDelimiter symbolName\x3d"anglebracketleft" data-category\x3d"static" /\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n            \x3cMathDelimiter symbolName\x3d"anglebracketright" data-category\x3d"static" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"bars"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathDelimiter symbolName\x3d"verticalbar" data-category\x3d"static" /\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n            \x3cMathDelimiter symbolName\x3d"verticalbar" data-category\x3d"static" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"doublebars"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathDelimiter symbolName\x3d"dblverticalbar" data-category\x3d"static" /\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n            \x3cMathDelimiter symbolName\x3d"dblverticalbar" data-category\x3d"static" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3c!-- Accents --\x3e\n    \x3c!-- Accents above --\x3e\n    \x3ctemplate id\x3d"hat"\x3e\n        \x3cMathScript accent\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathText kind\x3d"symbol" symbolName\x3d"circumflex"/\x3e\n            \x3c/MathRow\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"breve"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accent\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathText kind\x3d"symbol" symbolName\x3d"breve"/\x3e\n            \x3c/MathRow\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"grave"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accent\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathText kind\x3d"symbol" symbolName\x3d"grave"/\x3e\n            \x3c/MathRow\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"bar"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accent\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathText kind\x3d"symbol"  stretchy\x3d"false" symbolName\x3d"macron"/\x3e\n            \x3c/MathRow\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"dot"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accent\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathText kind\x3d"symbol" symbolName\x3d"dotabove"/\x3e\n            \x3c/MathRow\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"check"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accent\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathText kind\x3d"symbol" symbolName\x3d"caron"/\x3e\n            \x3c/MathRow\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"acute"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accent\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathText kind\x3d"symbol" symbolName\x3d"acute"/\x3e\n            \x3c/MathRow\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"tilde"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accent\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathText kind\x3d"symbol" symbolName\x3d"sim"/\x3e\n            \x3c/MathRow\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"vec"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accent\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathText kind\x3d"symbol" symbolName\x3d"rightarrow"/\x3e\n            \x3c/MathRow\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"ddot"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accent\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathText kind\x3d"symbol" symbolName\x3d"diaresis"/\x3e\n            \x3c/MathRow\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n\n    \x3ctemplate id\x3d"widehat"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accent\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathDelimiter stretchy\x3d"true" symbolName\x3d"circumflex"/\x3e\n            \x3c/MathRow\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"widetilde"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accent\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathDelimiter stretchy\x3d"true" symbolName\x3d"sim"/\x3e\n            \x3c/MathRow\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"overleftarrow"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accent\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathDelimiter symbolName\x3d"leftarrow"/\x3e\n            \x3c/MathRow\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"overrightarrow"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accent\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathDelimiter symbolName\x3d"rightarrow"/\x3e\n            \x3c/MathRow\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"overleftrightarrow"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accent\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathDelimiter symbolName\x3d"leftrightarrow"/\x3e\n            \x3c/MathRow\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"overbrace"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accent\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathDelimiter symbolName\x3d"overbrace"/\x3e\n            \x3c/MathRow\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"overline"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accent\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathDelimiter symbolName\x3d"macron" stretchy\x3d"true"/\x3e\n            \x3c/MathRow\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n\n    \x3c!-- Accents below --\x3e\n    \x3ctemplate id\x3d"underbrace"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accentunder\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathDelimiter symbolName\x3d"underbrace"/\x3e\n            \x3c/MathRow\x3e\n            \x3cNull/\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"underline"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accentunder\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathDelimiter symbolName\x3d"macron"/\x3e\n            \x3c/MathRow\x3e\n            \x3cNull/\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n\x3c/root\x3e\n',
"url:MW/rtc/plugins/completionpopup/CompletionPopupMenu.html":'\x3ctable class\x3d"tabCompletionPopupMenuTable" role\x3d"menu" tabIndex\x3d"${tabIndex}"\n       cellspacing\x3d"0"\x3e\n    \x3ctbody class\x3d"dijitReset" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/tbody\x3e\n\x3c/table\x3e\n',"url:mw-form/templates/PushButton.html":'\x3cdiv data-dojo-attach-point\x3d"focusNode" role\x3d"button"\n    \x3e\x3cdiv data-dojo-attach-point\x3d"contentWrapperNode" class\x3d"mwContentWrapperNode"\n        \x3e\x3cdiv data-dojo-attach-point\x3d"iconAndTextContainerNode" class\x3d"mwIconAndTextContainerNode mwAlignmentNode"\n            \x3e\x3cdiv data-dojo-attach-point\x3d"iconNode" class\x3d"mwIconNode"\x3e\x3c/div\n            \x3e\x3cdiv data-dojo-attach-point\x3d"textNode" class\x3d"mwTextNode"\x3e\x3c/div\n        \x3e\x3c/div\n    \x3e\x3c/div\n\x3e\x3c/div\x3e',
"url:MW/rtc/plugins/equations/latexeditor/view/EquationDialogTemplate.html":'\x3cdiv class\x3d"rteEquationsDialog" data-dojo-attach-point\x3d"contentNode" data-dojo-attach-event\x3d"onkeyup:onTextKeyup"\x3e\n\n    \x3cdiv class\x3d"label"\x3e\n        \x3clabel data-dojo-attach-point \x3d\'equationCodeLabel\'\x3e\x3c/label\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"eqnCode"\x3e\n        \x3cspan class\x3d"codeTextarea" tabindex\x3d"1" data-dojo-attach-point\x3d"codeTextInput"\n              data-dojo-type\x3d"dijit.form.SimpleTextarea" name\x3d"codeTextInput" id\x3d"codeTextInput" \x3e\x3c/span\x3e\n     \x3c/div\x3e\n\n     \x3cdiv class\x3d"label"\x3e\n        \x3clabel data-dojo-attach-point \x3d\'previewLabel\'\x3e\x3c/label\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"preview"\x3e\n\n    \x3cdiv class\x3d"previewTextarea" data-dojo-attach-point\x3d"previewTextInput"\n               name\x3d"previewTextInput" id\x3d"previewTextInput"\x3e\x3c/div\x3e\n     \x3c/div\x3e\n\n\n    \x3cdiv class\x3d"linkButtons"\x3e\n        \x3cbutton class\x3d"okButton" data-dojo-attach-point \x3d"okButton" name\x3d"okButton"\n                tabIndex\x3d"2" data-dojo-type\x3d"dijit.form.Button"\x3e\x3c/button\x3e\n        \x3cbutton class\x3d"cancelButton" data-dojo-attach-point \x3d"cancelButton"\n                tabIndex\x3d"3" data-dojo-type\x3d"dijit.form.Button"\x3e\x3c/button\x3e\n        \x3cbutton class\x3d"helpButton" data-dojo-attach-point \x3d"helpButton" name\x3d"helpButton"\n                tabIndex\x3d"4" data-dojo-type\x3d"dijit.form.Button"\x3e\x3c/button\x3e\n    \x3c/div\x3e\n\n\x3c/div\x3e\n',
"url:MW/rtc/plugins/find/view/FindDialogTemplate.html":'\x3cdiv class\x3d"rteFindDialog" data-dojo-attach-point\x3d"contentNode" data-dojo-attach-event\x3d"onkeyup:onTextKeyup"\x3e\n    \x3cdiv class\x3d"find"\x3e\n         \x3cspan class\x3d"findLabel"\x3e\x3clabel data-dojo-attach-point\x3d"findTextLabel"\x3e\x3c/label\x3e\x3c/span\x3e\n         \x3cspan class\x3d"findTextBox" tabindex\x3d"1" data-dojo-attach-point\x3d"findTextInput"\n              data-dojo-type\x3d"dijit.form.TextBox" name\x3d"findTextInput" id\x3d"findTextInput"\x3e\x3c/span\x3e\n         \x3cspan class\x3d"findNextButton" tabindex\x3d"5" data-dojo-attach-point\x3d"findNextButton" data-dojo-type\x3d"dijit.form.Button" name\x3d "findNextButton" id\x3d"findNext"\x3e\x3c/span\x3e\n         \x3cspan class\x3d"findPreviousButton" tabindex\x3d"6" data-dojo-attach-point\x3d"findPreviousButton" data-dojo-type\x3d"dijit.form.Button" name\x3d "findPreviousButton" id\x3d"findPrevious"\x3e\n         \x3c/span\x3e\n     \x3c/div\x3e\n    \x3cdiv class\x3d"replace" data-dojo-attach-point\x3d"replace"\x3e\n         \x3cspan class\x3d"replaceLabel"\x3e\x3clabel data-dojo-attach-point\x3d"replaceTextLabel"\x3e\x3c/label\x3e\x3c/span\x3e\n         \x3cspan class\x3d"replaceTextBox" tabindex\x3d"2" data-dojo-attach-point\x3d"replaceTextInput"\n              data-dojo-type\x3d"dijit.form.TextBox" name\x3d"replaceTextInput" id\x3d"replaceTextInput"\x3e\x3c/span\x3e\n         \x3cspan class\x3d"replaceButton" tabindex\x3d"7" data-dojo-attach-point\x3d"replaceButton" data-dojo-type\x3d"dijit.form.Button" name\x3d "replaceButton" id\x3d"replaceButton"\x3e\x3c/span\x3e\n         \x3cspan class\x3d"replaceAllButton" tabindex\x3d"8" data-dojo-attach-point\x3d"replaceAllButton" data-dojo-type\x3d"dijit.form.Button" name\x3d "replaceAllButton" id\x3d"replaceAllButton"\x3e\x3c/span\x3e\n     \x3c/div\x3e\n    \x3cdiv class\x3d"options"\x3e\n        \x3cspan class\x3d"matchCase" tabindex\x3d"3"   data-dojo-attach-point\x3d"matchCaseCheckBox" data-dojo-props\x3d"checked: false" data-dojo-type\x3d"dijit.form.CheckBox" name\x3d "matchCaseCheckBox" id\x3d"matchCaseCheckBox"\x3e \x3c/span\x3e\n        \x3cspan class\x3d"matchCaseLabel"\x3e\x3clabel for \x3d "matchCaseCheckBox" data-dojo-attach-point\x3d"matchCaseLabel"\x3e\x3c/label\x3e\x3c/span\x3e\n        \x3cspan class\x3d"wholeWord" tabindex\x3d"4"   data-dojo-attach-point\x3d"wholeWordCheckBox"data-dojo-props\x3d"checked: false" data-dojo-type\x3d"dijit.form.CheckBox" name\x3d "wholeWordCheckBox" id\x3d"wholeWordCheckBox"\x3e \x3c/span\x3e\n        \x3cspan class\x3d"wholeWordLabel"\x3e\x3clabel for \x3d "wholeWordCheckBox" data-dojo-attach-point\x3d"wholeWordLabel"\x3e\x3c/label\x3e\x3c/span\x3e\n\n    \x3c/div\x3e\n\x3c/div\x3e\n',
"url:dijit/form/templates/CheckBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\n\t\x3e\x3cinput\n\t \t${!nameAttrSetting} type\x3d"${type}" role\x3d"${type}" aria-checked\x3d"false" ${checkedAttrSetting}\n\t\tclass\x3d"dijitReset dijitCheckBoxInput"\n\t\tdata-dojo-attach-point\x3d"focusNode"\n\t \tdata-dojo-attach-event\x3d"ondijitclick:_onClick"\n/\x3e\x3c/div\x3e\n',"url:dijit/form/templates/ValidationTextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\n\tid\x3d"widget_${id}" role\x3d"presentation"\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t/\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\n\t/\x3e\x3c/div\n\x3e\x3c/div\x3e\n',
"url:MW/rtc/plugins/goto/view/GotoDialogTemplate.html":'\x3cdiv class\x3d"rteGoToDialog" data-dojo-attach-point \x3d"contentNode"\x3e\n    \x3cdiv class\x3d"goToDetails" data-dojo-attach-point \x3d"goToDetails"\x3e\n        \x3cdiv class\x3d"input-row"\x3e\n            \x3cspan class\x3d"lineNumberLabel"\x3e\x3clabel data-dojo-attach-point \x3d\'lineNumberLabel\'\x3e\x3c/label\x3e\x3c/span\x3e\n            \x3cspan tabindex\x3d"1" data-dojo-attach-point \x3d"lineNumberInput"\n              data-dojo-type\x3d"dijit.form.NumberTextBox" data-dojo-props\x3d"constraints:{min:0, places:0}"\n              name\x3d"lineNumberInput" id\x3d"lineNumberInput"\x3e\x3c/span\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"linkButtons"\x3e\n        \x3cbutton class\x3d"okButton" data-dojo-attach-point \x3d"okButton"\n                tabIndex\x3d"3" data-dojo-type\x3d"dijit.form.Button"\x3e\x3c/button\x3e\n        \x3cbutton class\x3d"cancelButton" data-dojo-attach-point \x3d"cancelButton"\n                tabIndex\x3d"2" data-dojo-type\x3d"dijit.form.Button"\x3e\x3c/button\x3e\n    \x3c/div\x3e\n\x3c/div\x3e',
"url:MW/toolstrip/widgets/templates/Toolstrip.html":'\x3cdiv class\x3d"toolstrip toolstripNode" data-focus\x3d"refuse"\x3e\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"tabGroupContainer"\x3e\n    \x3c/div\x3e\n    \x3cdiv data-dojo-attach-point\x3d"toolstripTabContainer"\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"topRightContainer" data-dojo-attach-point\x3d"topRightContainer"\x3e\n        \x3cdiv class\x3d"QABContainer" data-dojo-attach-point\x3d"QABContainer"\x3e\x3c/div\x3e\x3cdiv class\x3d"searchContainer" data-dojo-attach-point\x3d"searchContainer"\x3e\x3c/div\x3e\x3cdiv class\x3d"searchPopupContainer dijitOffScreen" data-dojo-attach-point\x3d"searchPopupContainer"\x3e\x3c/div\x3e\x3cdiv class\x3d"logoutContainer" data-dojo-attach-point\x3d"logoutContainer"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"collapseButtonContainer" data-dojo-attach-point\x3d"collapseButtonContainer"\x3e\x3c/div\x3e\n\x3c/div\x3e',
"url:dijit/layout/templates/TabContainer.html":'\x3cdiv class\x3d"dijitTabContainer"\x3e\n\t\x3cdiv class\x3d"dijitTabListWrapper" data-dojo-attach-point\x3d"tablistNode"\x3e\x3c/div\x3e\n\t\x3cdiv data-dojo-attach-point\x3d"tablistSpacer" class\x3d"dijitTabSpacer ${baseClass}-spacer"\x3e\x3c/div\x3e\n\t\x3cdiv class\x3d"dijitTabPaneWrapper ${baseClass}-container" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\n\x3c/div\x3e\n',"url:dijit/layout/templates/_TabButton.html":'\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"titleNode,innerDiv,tabContent" class\x3d"dijitTabInner dijitTabContent"\x3e\n\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTabButtonIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\n\t\x3cspan data-dojo-attach-point\x3d\'containerNode,focusNode\' class\x3d\'tabLabel\'\x3e\x3c/span\x3e\n\t\x3cspan class\x3d"dijitInline dijitTabCloseButton dijitTabCloseIcon" data-dojo-attach-point\x3d\'closeNode\'\n\t\t  role\x3d"presentation"\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d\'closeText\' class\x3d\'dijitTabCloseText\'\x3e[x]\x3c/span\n\t\t\t\t\x3e\x3c/span\x3e\n\x3c/div\x3e\n',
"url:dijit/layout/templates/ScrollingTabController.html":'\x3cdiv class\x3d"dijitTabListContainer-${tabPosition}" style\x3d"visibility:hidden"\x3e\n\t\x3cdiv data-dojo-type\x3d"dijit.layout._ScrollingTabControllerMenuButton"\n\t\t class\x3d"tabStripButton-${tabPosition}"\n\t\t id\x3d"${id}_menuBtn"\n\t\t data-dojo-props\x3d"containerId: \'${containerId}\', iconClass: \'dijitTabStripMenuIcon\',\n\t\t\t\t\tdropDownPosition: [\'below-alt\', \'above-alt\']"\n\t\t data-dojo-attach-point\x3d"_menuBtn" showLabel\x3d"false" title\x3d""\x3e\x26#9660;\x3c/div\x3e\n\t\x3cdiv data-dojo-type\x3d"dijit.layout._ScrollingTabControllerButton"\n\t\t class\x3d"tabStripButton-${tabPosition}"\n\t\t id\x3d"${id}_leftBtn"\n\t\t data-dojo-props\x3d"iconClass:\'dijitTabStripSlideLeftIcon\', showLabel:false, title:\'\'"\n\t\t data-dojo-attach-point\x3d"_leftBtn" data-dojo-attach-event\x3d"onClick: doSlideLeft"\x3e\x26#9664;\x3c/div\x3e\n\t\x3cdiv data-dojo-type\x3d"dijit.layout._ScrollingTabControllerButton"\n\t\t class\x3d"tabStripButton-${tabPosition}"\n\t\t id\x3d"${id}_rightBtn"\n\t\t data-dojo-props\x3d"iconClass:\'dijitTabStripSlideRightIcon\', showLabel:false, title:\'\'"\n\t\t data-dojo-attach-point\x3d"_rightBtn" data-dojo-attach-event\x3d"onClick: doSlideRight"\x3e\x26#9654;\x3c/div\x3e\n\t\x3cdiv class\x3d\'dijitTabListWrapper\' data-dojo-attach-point\x3d\'tablistWrapper\'\x3e\n\t\t\x3cdiv role\x3d\'tablist\' data-dojo-attach-event\x3d\'onkeydown:onkeydown\'\n\t\t\t data-dojo-attach-point\x3d\'containerNode\' class\x3d\'nowrapTabStrip\'\x3e\x3c/div\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e',
"url:dijit/layout/templates/_ScrollingTabControllerButton.html":'\x3cdiv data-dojo-attach-event\x3d"ondijitclick:_onClick" class\x3d"dijitTabInnerDiv dijitTabContent dijitButtonContents"  data-dojo-attach-point\x3d"focusNode" role\x3d"button"\x3e\n\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitTabStripIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\n\t\x3cspan data-dojo-attach-point\x3d"containerNode,titleNode" class\x3d"dijitButtonText"\x3e\x3c/span\x3e\n\x3c/div\x3e',"url:mw-menu/templates/MenuSeparator.html":'\x3cdiv data-refuse-key-nav\x3d"true"\x3e\x3c/div\x3e\n',
"url:MW/layout/templates/ConfirmationDialog.html":'\x3cdiv\x3e\n    \x3cdiv data-dojo-attach-point\x3d"iconNode" class\x3d"mwIconNode"\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"messageNode" class\x3d"mwMessageNode"\x3e\x3c/div\x3e\n\x3c/div\x3e',"url:MW/toolstrip/widgets/templates/QAB.html":'\x3cdiv id\x3d${id} class\x3d"qab"\x3e\n    \x3cdiv class\x3d"leftArrow"\x3e\x3c/div\x3e\x3cdiv class\x3d"mainArea" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\n\x3c/div\x3e',"url:MW/toolstrip/widgets/templates/QAGroup.html":'\x3cdiv class\x3d"qaGroup"\x3e\n\x3cdiv data-dojo-attach-point\x3d"separatorNode" class\x3d"quickAccessGroupSeparator"\x3e\x3c/div\x3e\x3cdiv class\x3d"qaGroupContainer" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\n\x3c/div\x3e',
"url:MW/toolstrip/widgets/templates/TabGroup.html":'\x3cdiv class\x3d"tabGroup"\x3e\n\x3c/div\x3e',"url:MW/toolstrip/widgets/templates/Section.html":"\x3cdiv class\x3d'section'\x3e\n    \x3cdiv data-dojo-attach-point\x3d'sectionWrapper' class\x3d'sectionWrapper'\x3e\n        \x3cdiv data-dojo-attach-point\x3d'columnContainerWrapper' class\x3d'columnContainerWrapper'\x3e\n            \x3cdiv data-dojo-attach-point\x3d'containerNode' class\x3d'columnContainer'\x3e\x3c/div\x3e\n        \x3c/div\x3e\n        \x3cdiv data-dojo-attach-point\x3d'titleNode' class\x3d'title'\x3e\x3c/div\x3e\n    \x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d'sectionDropDownContainer' class\x3d'sectionDropDownContainer'\x3e\x3c/div\x3e\x3cdiv class\x3d'sectionDivider'\x3e\x3c/div\x3e\n\x3c/div\x3e",
"url:MW/toolstrip/widgets/gallery/templates/GalleryPopup.html":"\x3cdiv class\x3d'toolstrip galleryPopup' data-focus\x3d'temporary'\x3e\n    \x3cdiv data-dojo-attach-point\x3d'header' class\x3d'header'\x3e\n        \x3cdiv data-dojo-attach-point\x3d'searchTextFieldContainerNode' class\x3d\"mwSearchTextFieldContainerNode\"\x3e\x3c/div\x3e\n        \x3cdiv data-dojo-attach-point\x3d'buttonWrapper' class\x3d'ButtonWrapper'\x3e\n            \x3cdiv data-dojo-attach-point\x3d'listViewButtonContainerNode' class\x3d\"mwListViewButtonContainerNode\"\x3e\x3c/div\x3e\n            \x3cdiv data-dojo-attach-point\x3d'iconViewButtonContainerNode' class\x3d\"mwIconViewButtonContainerNode\"\x3e\x3c/div\x3e\n            \x3cdiv data-dojo-attach-point\x3d'closeButtonNode' class\x3d\"mwCloseButtonNode\" data-tag\x3d\"closeButton\"\x3e\x3c/div\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv data-dojo-attach-point\x3d\"categoryContainer\" class\x3d'categoryContainer'\x3e\n        \x3cdiv data-dojo-attach-point\x3d\"noSearchMatchNode\" class\x3d\"noSearchMatchNode\"\x3e\x3c/div\x3e\n        \x3cdiv data-dojo-attach-point\x3d\"favCategoryContainer\" class\x3d\"favCategoryContainer\"\x3e\x3c/div\x3e\n        \x3cdiv data-dojo-attach-point\x3d'containerNode' class\x3d\"otherCategoriesContainer\"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv data-dojo-attach-point\x3d\"footerContainer\" class\x3d'footerContainer'\x3e\x3c/div\x3e\n\x3c/div\x3e",
"url:mw-form/templates/TextField.html":'\x3cdiv\x3e\x3cinput class\x3d "mwInputNode mwAlignmentNode" spellcheck\x3d"false" type\x3d"text" data-dojo-attach-point\x3d"inputNode,focusNode"\x3e\x3c/div\x3e',"url:MW/toolstrip/widgets/templates/Panel.html":"\x3cdiv class\x3d'panel'\x3e\n\x3c/div\x3e","url:MW/toolstrip/widgets/templates/Column.html":"\x3cdiv class\x3d'column' data-dojo-attach-point\x3d\"containerNode\"\x3e\x3c/div\x3e","url:mw-menu/templates/MenuPanel.html":'\x3cdiv data-dojo-attach-point\x3d"focusNode" data-refuse-key-nav\x3d"true"\x3e\x3c/div\x3e\n',
"url:MW/toolstrip/widgets/templates/Footer.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e',"url:MW/toolstrip/widgets/templates/FooterCell.html":'\x3cdiv data-dojo-attach-point\x3d"footerCellNode"\x3e\x3c/div\x3e',"url:MW/toolstrip/widgets/gallery/templates/Gallery.html":'\x3cspan class\x3d\'gallery icon_view\'\x3e\n    \x3cdiv data-dojo-attach-point\x3d"_aroundNode" class\x3d"aroundNode"\x3e\x3c/div\x3e\n    \x3cdiv data-dojo-attach-point\x3d\'containerNode\' class\x3d\'mainArea\'\x3e\n    \x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d\'openPopupDiv, focusNode, _buttonNode\' class\x3d\'openPopupDiv\'\x3e\n        \x3cdiv class\x3d"buttonDownArrow"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv data-dojo-attach-point\x3d"busyLayer" class\x3d"busyLayer"\x3e\x3c/div\x3e\n    \x3cdiv data-dojo-attach-point\x3d"busyNode" class\x3d"busyIndicator"\x3e\x3c/div\x3e\n    \x3cdiv data-dojo-attach-point\x3d"textOverlayWrapperNode" class\x3d"textOverlayWrapper"\x3e\n        \x3cdiv class\x3d"textOverlayCell"\x3e\n            \x3cspan data-dojo-attach-point\x3d"textOverlayNode" class\x3d"textOverlay"\x3e\x3c/span\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n\x3c/span\x3e',
"url:MW/toolstrip/widgets/gallery/templates/GalleryCategory.html":"\x3cdiv class\x3d\"Category\"\n    \x3e\x3cdiv data-dojo-attach-point\x3d'header' class\x3d\"categoryHeader\"\n        \x3e\x3cdiv data-dojo-attach-point\x3d'headerDropNode' class\x3d'mwHeaderDropNode'\x3e\x3cspan class\x3d\"mwFirstDnDChildNode\"\x3e\x3cspan\x3e\x3c/div\n        \x3e\x3cdiv data-dojo-attach-point\x3d'titleIconContainer' class\x3d'titleIconContainer'\n            \x3e\x3cdiv data-dojo-attach-point\x3d'titleIconNode' class\x3d'titleIcon'\x3e\x3c/div\n        \x3e\x3c/div\n        \x3e\x3cdiv data-dojo-attach-point\x3d'titleNode' class\x3d'categoryTitle'\x3e\x3c/div\n        \x3e\x3cdiv data-dojo-attach-point\x3d'controlsNode' class\x3d'controlsNode'\n            \x3e\x3cdiv data-dojo-attach-point\x3d'moveTopButtonNode' class\x3d'moveTopButton'\x3e\x3c/div\n            \x3e\x3cdiv data-dojo-attach-point\x3d'moveBottomButtonNode' class\x3d'moveBottomButton'\x3e\x3c/div\n        \x3e\x3c/div\n    \x3e\x3c/div\n    \x3e\x3cdiv data-dojo-attach-point\x3d\"containerNode\" class\x3d'gridWrapperNode'\n    \x3e\x3c/div\n\x3e\x3c/div\x3e\n",
"url:mw-colorpicker/templates/ColorPalette.html":'\x3cdiv class\x3d"dijitInline mwDisableSelection"\n    \x3e\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"${baseClass}Title"\x3e${!title}\x3c/span\n    \x3e\x3ctable dojoAttachPoint\x3d"paletteTableNode" class\x3d"dijitPaletteTable" cellSpacing\x3d"0" cellPadding\x3d"0"\n        \x3e\x3ctbody data-dojo-attach-point\x3d"gridNode"\x3e\x3c/tbody\n    \x3e\x3c/table\n\x3e\x3c/div\x3e',"url:mw-colorpicker/templates/ColorPaletteSwatch.html":'\x3cdiv class\x3d"dijitInline mwPaletteDiv"\n    \x3e\x3cdiv title\x3d"${title}" class\x3d"mwColorPaletteSwatch" style\x3d"background-color: ${color}" data-test-id\x3d"${color}"\x3e\x3c/div\n\x3e\x3c/div\x3e\n',
"url:mw-form/templates/ComboBox.html":'\x3cdiv\x3e\n    \x3cdiv class\x3d"mwComboBoxInnerContainer"\x3e\x3cdiv class\x3d"mwTextFieldContainerNode" data-dojo-attach-point\x3d"textFieldContainerNode"\x3e\x3c/div\x3e\x3cdiv class\x3d"mwArrowContainerNode" data-dojo-attach-point\x3d"arrowNode"\x3e\x3cdiv class\x3d"mwArrowNode"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\n\x3c/div\x3e',"url:mw-form/templates/Spinner.html":'\x3cdiv\n    \x3e\x3cdiv class \x3d "mwContainerNode" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\n    \x3e\x3cdiv class \x3d "mwButtonsContainer" data-dojo-attach-point\x3d"buttonsContainerNode"\n        \x3e\x3cdiv class \x3d "mwIncrementButtonWrapper" data-dojo-attach-point\x3d"incrementButtonNodeWrapper"\n            \x3e\x3cdiv class \x3d "mwIncrementButton" data-dojo-attach-point\x3d"incrementButtonNode"\n            \x3e\x3c/div\n        \x3e\x3c/div\n        \x3e\x3cdiv class \x3d "mwDecrementButtonWrapper" data-dojo-attach-point\x3d"decrementButtonNodeWrapper"\n            \x3e\x3cdiv class \x3d "mwDecrementButton" data-dojo-attach-point\x3d"decrementButtonNode"\n            \x3e\x3c/div\n        \x3e\x3c/div\n    \x3e\x3c/div\n\x3e\x3c/div\x3e',
"url:mw-form/templates/Label.html":'\x3cdiv data-dojo-attach-point\x3d"focusNode"\n    \x3e\x3cdiv data-dojo-attach-point\x3d"contentWrapperNode" class\x3d"mwContentWrapperNode"\n        \x3e\x3cdiv data-dojo-attach-point\x3d"iconAndTextContainerNode" class\x3d"mwIconAndTextContainerNode mwAlignmentNode"\n            \x3e\x3cdiv data-dojo-attach-point\x3d"iconNode" class\x3d"mwIconNode"\x3e\x3c/div\n            \x3e\x3cdiv data-dojo-attach-point\x3d"textNode" class\x3d"mwTextNode"\x3e\x3c/div\n        \x3e\x3c/div\n    \x3e\x3c/div\n\x3e\x3c/div\x3e',
"url:mw-colorpicker/templates/ColorSpinner.html":'\x3cdiv class\x3d"mwDisableSelection"\n    \x3e\x3cdiv\n        \x3e\x3cdiv class\x3d"${baseClass}ComboBox" data-dojo-type\x3d"mw-form/ComboBox" data-dojo-attach-point\x3d"comboBox"\x3e\x3c/div\n    \x3e\x3c/div\n    \x3e\x3cdiv\n        \x3e\x3ctable\n            \x3e\x3ctr data-dojo-attach-point\x3d"spinnersNode"\n                \x3e\x3ctd class\x3d"${baseClass}Column"\n                    \x3e\x3cdiv data-dojo-type\x3d"mw-form/Label" data-dojo-attach-point\x3d"titleNode1"\n                    \x3e\x3c/div\n                    \x3e\x3cdiv class\x3d"${baseClass}Spinner" data-dojo-type\x3d"mw-form/Spinner" data-test-id\x3d"ColorSpinner1" data-dojo-attach-point\x3d"spinnerNode1"\n                    \x3e\x3c/div\n                \x3e\x3c/td\n                \x3e\x3ctd class\x3d"${baseClass}Column"\n                    \x3e\x3cdiv data-dojo-type\x3d"mw-form/Label" data-dojo-attach-point\x3d"titleNode2"\n                    \x3e\x3c/div\n                    \x3e\x3cdiv class\x3d"${baseClass}Spinner" data-dojo-type\x3d"mw-form/Spinner" data-test-id\x3d"ColorSpinner2" data-dojo-attach-point\x3d"spinnerNode2" \n                    \x3e\x3c/div\n                \x3e\x3c/td\n                \x3e\x3ctd class\x3d"${baseClass}Column"\n                    \x3e\x3cdiv data-dojo-type\x3d"mw-form/Label" data-dojo-attach-point\x3d"titleNode3"\n                    \x3e\x3c/div\n                    \x3e\x3cdiv class\x3d"${baseClass}Spinner" data-dojo-type\x3d"mw-form/Spinner" data-test-id\x3d"ColorSpinner3" data-dojo-attach-point\x3d"spinnerNode3" \n                    \x3e\x3c/div\x3e\n                \x3c/td\n            \x3e\x3c/tr\n\n            \x3e\x3ctr data-dojo-attach-point\x3d"hexNode" style\x3d"display: none"\n                \x3e\x3ctd class\x3d"${baseClass}Column" colspan\x3d"3"\x3e${_hexTitle}\n                \x3cdiv class\x3d"${baseClass}TextField" data-dojo-type\x3d"mw-form/TextField" data-test-id\x3d"HexTextField" data-dojo-attach-point\x3d"hexTextField"\x3e\x3c/div\n                \x3e\x3c/td\n            \x3e\x3c/tr\n        \x3e\x3c/table\n    \x3e\x3c/div\n\x3e\x3c/div\x3e',
"url:mw-colorpicker/templates/ColorGradient.html":'\x3cdiv class\x3d"mwDisableSelection"\n\t\x3e\x3cdiv data-dojo-attach-point\x3d\'gradientNode\' class\x3d"${baseClass}SatVal"\n        \x3e\x3cdiv id\x3d"gradientMarker" data-dojo-attach-point\x3d\'gradientMarkerNode\' class\x3d"${baseClass}Marker"\n        \x3e\x3c/div\n    \x3e\x3c/div\n\n    \x3e\x3cdiv data-dojo-attach-point\x3d\'hueNode\' class\x3d"${baseClass}Hue"\n        \x3e\x3cdiv id\x3d"hueMarker" data-dojo-attach-point\x3d\'hueMarkerNode\' class\x3d"${baseClass}HueMarker"\n        \x3e\x3c/div\n    \x3e\x3c/div\n\x3e\x3c/div\x3e\n',
"url:mw-colorpicker/templates/ColorStyle.html":'\x3cbutton class\x3d"${baseClass}" data-dojo-attach-point\x3d"colorStyleButton" data-test-id\x3d"${value}ColorStyle"\n\t\x3e\x3cdiv class\x3d"${baseClass}Swatch" data-dojo-attach-point\x3d"colorStyleSwatch"\x3e\x3c/div\n\t\x3e\x3cspan class\x3d"${baseClass}Label" data-dojo-attach-point\x3d"colorStyleLabel"\x3e\x3c/span\n\x3e\x3c/button\x3e',"url:mw-colorpicker/templates/ColorPicker.html":'\x3cdiv class\x3d"mwDisableSelection" data-test-id\x3d"mwColorPicker"\n\t\x3e\x3ctable\n\t\t\x3e\x3ctr\n\t\t\t\x3e\x3ctd\n\t\t\t\t\x3e\x3cdiv class\x3d"${baseClass}HeaderContainer"\n\t\t\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"${baseClass}Title"\n\t\t\t\t\t\x3e\x3c/span\n\t\t\t\t\t\x3e\x3cdiv class\x3d"${baseClass}ToggleButtonContainer"\n\t\t\t\t\t\t\x3e\x3cbutton class\x3d"${baseClass}ToggleButton" data-dojo-attach-point\x3d"standardButtonNode" \n\t\t\t\t\t\tdata-test-id\x3d"standardColorsButton"\n\t\t\t\t\t\t\t\x3e\x3cimg class\x3d"${baseClass}ToggleButtonStandard"\x3e\x3c/img\n\t\t\t\t\t\t\x3e\x3c/button\n\t\t\t\t\t\t\x3e\x3cbutton class\x3d"${baseClass}ToggleButton" data-dojo-attach-point\x3d"customButtonNode" \n\t\t\t\t\t\tdata-test-id\x3d"customColorsButton"\n\t\t\t\t\t\t\t\x3e\x3cimg class\x3d"${baseClass}ToggleButtonCustom"\x3e\x3c/img\n\t\t\t\t\t\t\x3e\x3c/button\n\t\t\t\t\t\x3e\x3c/div\n\t\t\t\t\x3e\x3c/div\n\t\t\t\x3e\x3c/td\n\t\t\x3e\x3c/tr\n\n\t\t\x3e\x3ctr\n            \x3e\x3ctd\n            \t\x3e\x3cdiv data-dojo-attach-point\x3d"standardPickerRow"\n\t            \t\x3e\x3cdiv data-dojo-attach-point\x3d"paletteContainerNode" \n\t            \t\x3e\x3cdiv class\x3d"${baseClass}Palette" data-dojo-type\x3d"mw-colorpicker/ColorPalette" \n\t            \tdata-dojo-attach-point\x3d"paletteNode" data-test-id\x3d"palette" data-dojo-props\x3d"palette: ${_parsedStandardColors}"\n\t            \t\x3e\x3c/div\n\t            \t\x3e\x3c/div\n\t\t\t\t\t\x3e\x3cdiv class\x3d"${baseClass}StylesContainer" data-dojo-attach-point\x3d"stylesContainerNode"\x3e\x3c/div\n\t    \t\t\t\x3e\x3ctable class\x3d"${baseClass}Middle"\n\t       \t\t\t\t\x3e\x3ctr\n\t            \t\t\t\x3e\x3cdiv class\x3d"${baseClass}Recent" data-dojo-attach-point\x3d"recentColorsNode"\n\t            \t\t\tdata-test-id\x3d"recentColors"\x3e\x3c/div\n\t        \t\t\t\x3e\x3c/tr\n\t    \t\t\t\x3e\x3c/table\n\t    \t\t\x3e\x3c/div\n\t    \t\t\x3e\x3cdiv class\x3d"${baseClass}ViewHidden" data-dojo-attach-point\x3d"customPickerRow"\n\t    \t\t\t\x3e\x3cdiv class\x3d"${baseClass}GradientContainer" data-dojo-attach-point\x3d"gradientContainerNode"\x3e\x3c/div\n            \t\t\x3e\x3cdiv data-dojo-attach-point\x3d"spinnerContainerNode"\x3e\x3c/div\n            \t\x3e\x3c/div\n\t\t\t\x3e\x3c/td\n\t\t\x3e\x3c/tr\n\n\t\t\x3e\x3ctr\n\t\t\t\x3e\x3ctd\n\t\t\t\t\x3e\x3cdiv class\x3d"${baseClass}Preview"\n                    \x3e\x3cspan\x3ePreview\x3c/span\n                    \x3e\x3cdiv class\x3d"${baseClass}PreviewColor" data-dojo-attach-point\x3d"previewColorNode"\x3e\x3c/div\n            \t\x3e\x3c/div \n            \x3e\x3c/td\n\t\t\x3e\x3c/tr\n\t\x3e\x3c/table\n\x3e\x3c/div\x3e',
"url:mw-menu/templates/PopupMenuItem.html":'\x3cdiv data-dojo-attach-point\x3d"focusNode" class\x3d"mwFocusNode"\n    \x3e\x3cdiv class\x3d"mwIconNode" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/div\n    \x3e\x3cdiv class\x3d"mwTextAndDescriptionContainerNode" data-dojo-attach-point\x3d"textAndDescriptionContainerNode"\n        \x3e\x3cdiv data-dojo-attach-point\x3d"textNode" class\x3d\'mwTextNode\'\x3e\x3c/div\n        \x3e\x3cdiv data-dojo-attach-point\x3d"descriptionNode" class\x3d\'mwDescriptionNode\'\x3e\x3c/div\n    \x3e\x3c/div\n    \x3e\x3cdiv class\x3d"mwShortcutAndArrowWrapperNode"\n        \x3e\x3cdiv class\x3d"mwShortcutKeyNode" data-dojo-attach-point\x3d"shortcutKeyNode"\x3e\x3c/div\n        \x3e\x3cdiv class\x3d"mwMenuArrowNode"  data-dojo-attach-point\x3d"menuArrowNode"\x3e\x3c/div\n    \x3e\x3c/div\n\x3e\x3c/div\x3e\n',
"url:mw-form/templates/CheckBox.html":'\x3cdiv data-dojo-attach-point\x3d"focusNode" role\x3d"checkbox" aria-checked\x3d"false"\n    \x3e\x3cdiv data-dojo-attach-point\x3d"checkBoxRadioIconNode" class\x3d"mwCheckBoxRadioIconNode"\n        \x3e\x3cdiv class\x3d"mwCheckBoxRadioIconInner"\x3e\x3c/div\x3e\x3c/div\n    \x3e\x3cdiv data-dojo-attach-point\x3d"textNode" class\x3d"mwTextNode"\x3e\x3c/div\n\x3e\x3c/div\x3e',"url:mw-menu/templates/CheckBoxRadioButtonMenuItem.html":'\x3cdiv data-dojo-attach-point\x3d"focusNode"\n    \x3e\x3cdiv class\x3d"mwTextAndDescriptionContainerNode" data-dojo-attach-point\x3d"textAndDescriptionContainerNode"\n        \x3e\x3cdiv data-dojo-attach-point\x3d"textNode" class\x3d\'mwTextNode\'\x3e\x3c/div\n        \x3e\x3cdiv data-dojo-attach-point\x3d"descriptionNode" class\x3d\'mwDescriptionNode\'\x3e\x3c/div\n    \x3e\x3c/div\n    \x3e\x3cdiv class\x3d"mwShortcutKeyNode" data-dojo-attach-point\x3d"shortcutKeyNode"\x3e\x3c/div\n    \x3e\x3cdiv class\x3d"mwOverlayNode"\x3e\x3c/div\n\x3e\x3c/div\x3e\n',
"url:mw-menu/templates/TextFieldMenuItem.html":'\x3cdiv data-dojo-attach-point\x3d"focusNode"\n    \x3e\x3cdiv class\x3d"mwTextContainer" data-dojo-attach-point\x3d"textContainerNode"\n        \x3e\x3cdiv data-dojo-attach-point\x3d"textNode" class\x3d\'mwTextNode\'\x3e\x3c/div\n    \x3e\x3c/div\n    \x3e\x3cdiv class\x3d"mwShortcutKeyNode" data-dojo-attach-point\x3d"shortcutKeyNode"\x3e\x3c/div\n\x3e\x3c/div\x3e\n',"url:mw-form/templates/RadioButton.html":'\x3cdiv data-dojo-attach-point\x3d"focusNode" role\x3d"radio" aria-checked\x3d"false"\n    \x3e\x3cdiv data-dojo-attach-point\x3d"checkBoxRadioIconNode" class\x3d"mwCheckBoxRadioIconNode"\n        \x3e\x3cdiv class\x3d"mwCheckBoxRadioIconInner"\x3e\x3c/div\x3e\x3c/div\n    \x3e\x3cdiv data-dojo-attach-point\x3d"textNode" class\x3d"mwTextNode"\x3e\x3c/div\n\x3e\x3c/div\x3e',
"url:mw-menu/templates/MenuHeader.html":'\x3cdiv data-dojo-attach-point\x3d"textNode" data-refuse-key-nav\x3d"true"\x3e\x3c/div\x3e\n',"url:mw-form/templates/ListBox.html":'\x3cdiv\x3e\x3cul tabindex \x3d "0" data-dojo-attach-point\x3d "containerNode, focusNode"\x3e\x3c/ul\x3e\x3c/div\x3e',"url:MW/toolstrip/widgets/templates/Tooltip.html":'\x3cdiv class\x3d"validation-tooltip-dialog"\x3e\n        \x3cdiv class\x3d"tooltipConnector" data-dojo-attach-point\x3d"arrowNode" style\x3d"display:inline-block"\x3e\x3c/div\n                \x3e\x3cdiv  style\x3d"display:inline-block" class\x3d"validationContents" data-dojo-attach-point\x3d"contentsNode"\x3e\x3cdiv data-dojo-attach-point\x3d"iconNode" class\x3d"validationImage" style\x3d"display:inline-block"\x3e\x3c/div\n        \x3e\x3cdiv data-dojo-attach-point\x3d"textNode" class\x3d"validationText" style\x3d"display:inline-block"\x3e\x3c/div\x3e\x3c/div\x3e\n\n\x3c/div\x3e\n\n',
"url:MW/toolstrip/widgets/templates/EmptyControl.html":'\x3cdiv\x3e\n    \x3cdiv class\x3d "emptyControl"\x3e\x3c/div\x3e\n\x3c/div\x3e',"url:mw-form/templates/TextArea.html":'\x3cdiv\x3e\x3ctextarea class\x3d"mwInputNode mwAlignmentNode" data-dojo-attach-point\x3d"inputNode,focusNode" spellcheck\x3d"false"\x3e\x3c/textarea\x3e\x3c/div\x3e',"url:MW/toolstrip/widgets/external/templates/Slider.html":'\x3cdiv class\x3d"vc-userSelectNone vc-defaultFontRules" data-dojo-attach-event\x3d"press:_onTrackClick"\x3e\n    \x3cinput type\x3d"hidden" data-dojo-attach-point\x3d"valueNode"\x3e\n    \x3cdiv class\x3d"vc-sliderTrack" data-dojo-attach-point\x3d"sliderTrackNode"\x3e\n        \x3cdiv class\x3d"vc-sliderThumb" data-dojo-attach-point\x3d"sliderThumbNode, focusNode"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"vc-sliderRuleAndLabelContainer" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\n\x3c/div\x3e',
"url:MW/toolstrip/widgets/templates/ToolbarWrapper.html":"\x3cdiv class\x3d'toolbarWrapper'\x3e\n\x3c/div\x3e","url:MW/toolstrip/widgets/templates/MenubarWrapper.html":"\x3cdiv class\x3d'menubarWrapper' data-focus\x3d'accept'\x3e\n\x3c/div\x3e","url:MW/toolstrip/widgets/gallery/templates/GalleryItem.html":'\x3cdiv class\x3d"Item"\n    \x3e\x3cdiv data-dojo-attach-point\x3d\'itemWrapperNode, focusNode\' class\x3d"itemWrapper"\n        \x3e\x3cdiv data-dojo-attach-point\x3d"iconWrapper" class\x3d"iconWrapper"\n            \x3e\x3cdiv data-dojo-attach-point\x3d"iconNode" class\x3d"iconNode"\x3e\x3c/div\n        \x3e\x3c/div\n        \x3e\x3cdiv data-dojo-attach-point\x3d"labelWrapper" class\x3d\'labelWrapper\'\n            \x3e\x3cdiv data-dojo-attach-point\x3d"labelNode" class\x3d"label"\x3e\x3c/div\n            \x3e\x3cdiv data-dojo-attach-point\x3d"descriptionNode" class\x3d"description"\x3e\x3c/div\n        \x3e\x3c/div\n    \x3e\x3c/div\n    \x3e\x3cdiv data-dojo-attach-point\x3d\'favButtonWrapperNode\' class\x3d\'favButtonWrapper\'\n        \x3e\x3cdiv data-dojo-attach-point\x3d\'favButtonNode\' class\x3d\'favButton\'\x3e\x3c/div\n    \x3e\x3c/div\n\x3e\x3c/div\x3e\n',
"url:MW/rtc/plugins/hyperlink/view/HyperlinkDialogTemplate.html":'\x3cdiv class\x3d"rteHyperlinkDialog" data-dojo-attach-point \x3d"contentNode" data-dojo-attach-event\x3d"onkeyup:onTextKeyup"\x3e\n\n    \x3ctable class\x3d"hyperlinkDetails"\x3e\n        \x3ctr class\x3d"displaytext-row"\x3e\n            \x3ctd\x3e\n                \x3clabel data-dojo-attach-point \x3d"displayTextLabel" for\x3d"displayTextInput"\x3e\x3c/label\x3e\n            \x3c/td\x3e\n        \x3c/tr\x3e\n        \x3ctr class\x3d"displaytext-row"\x3e\n            \x3ctd\x3e\n                \x3cdiv class\x3d"hyperlinkTextInput"\x3e\x3c/div\x3e\n          \x3c/td\x3e\n        \x3c/tr\x3e\n        \x3ctr\x3e\n            \x3ctd class\x3d"radioButtons"\x3e\n                \x3cdiv class\x3d"toggleRadioButtonExternalURL"\x3e\x3c/div\x3e\n                \x3cdiv class\x3d"toggleRadioButtonInternalHyperlink"\x3e\x3c/div\x3e\n            \x3c/td\x3e\n        \x3c/tr\x3e\n    \x3c/table\x3e\n\n    \x3ctable class\x3d"hyperlinkDetails" data-dojo-attach-point \x3d"targetUrlTable"\x3e\n        \x3ctr\x3e\n            \x3ctd\x3e\x3clabel data-dojo-attach-point \x3d"urlTextLabel" for\x3d"urlTextInput"\x3e\x3c/label\x3e\x3c/td\x3e\n        \x3c/tr\x3e\n        \x3ctr class\x3d"urltext-row"\x3e\n            \x3ctd\x3e\n                \x3cdiv class\x3d"hyperlinkUrlInput"\x3e\x3c/div\x3e\n            \x3c/td\x3e\n        \x3c/tr\x3e\n    \x3c/table\x3e\n\n    \x3ctable class\x3d"hyperlinkDescription" data-dojo-attach-point \x3d"targetInternalHyperlinkTable" hidden \x3d "true"\x3e\n        \x3ctr\x3e\n            \x3ctd width\x3d"120px"\x3e\n                \x3cp data-dojo-attach-point \x3d"internalTextLabel" for\x3d"internalSelection"\x3e\n                \x3c/p\x3e\n            \x3c/td\x3e\n        \x3c/tr\x3e\n    \x3c/table\x3e\n\x3c/div\x3e\n',
"url:MW/rtc/plugins/images/view/ImageDialogTemplate.html":'\x3cdiv class\x3d"rtcImageDialog" data-dojo-attach-point \x3d"contentNode" data-dojo-attach-event\x3d"onkeyup:onTextKeyup"\x3e\n    \n    \x3cdiv class\x3d"inputMode"\x3e\n      \x3cspan class\x3d"fileRadio" value\x3d"fromFile" data-dojo-attach-point\x3d"fileRadioBut" data-dojo-props\x3d"checked: true" data-dojo-type\x3d"dijit.form.RadioButton" name\x3d"inputRadioButGroup" id\x3d"fileRadioBut"\x3e \x3c/span\x3e\n      \x3clabel class\x3d"label" for\x3d"fileRadioBut" data-dojo-attach-point\x3d"fileRadioLabel"\x3e\x3c/label\x3e\n      \x3cspan class\x3d"urlRadio" value\x3d"fromWeb" data-dojo-attach-point\x3d"urlRadioBut" data-dojo-props\x3d"checked: false" data-dojo-type\x3d"dijit.form.RadioButton" name\x3d"inputRadioButGroup" id\x3d"urlRadioBut"\x3e \x3c/span\x3e\n      \x3clabel class\x3d"label" for\x3d"urlRadioBut" data-dojo-attach-point\x3d"urlRadioLabel"\x3e\x3c/label\x3e\n    \x3c/div\x3e\n\n    \x3cdiv class\x3d"inputField"\x3e     \n        \x3cdiv class\x3d"urlField" data-dojo-attach-point \x3d"urlField"\x3e\n            \x3clabel for\x3d"imageUrlTextInput" data-dojo-attach-point\x3d"imageUrlTextInputLabel"\x3eURL:\x3c/label\x3e\n            \x3cspan class\x3d"urlTextInput" data-dojo-attach-point \x3d"imageUrlTextInput" data-dojo-attach-event\x3d"onkeyup:onTextKeyup"\n              data-dojo-type\x3d"dijit.form.TextBox" name\x3d"imageUrlTextInput" id\x3d"imageUrlTextInput"\x3e\x3c/span\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"fileField" data-dojo-attach-point \x3d"fileField"\x3e\n            \x3cspan\x3e\x3cinput data-dojo-attach-point \x3d "imageFileInput" type\x3d"file" accept\x3d"image/*" id\x3d"imageFileInput"\x3e\x3c/span\x3e\n        \x3c/div\x3e    \n    \x3c/div\x3e\n\n\n    \x3cdiv class\x3d"imgPreview"\x3e\n        \x3cdiv class\x3d"noPreview" data-dojo-attach-point \x3d"noPreview"\x3eNo Preview\x3c/div\x3e\n        \x3cimg max-width\x3d"100%" max-height\x3d"100%" data-dojo-attach-point \x3d"imagePreview"/\x3e\n    \x3c/div\x3e\n\n\n    \x3cdiv class\x3d"label"\x3e\n        \x3cspan data-dojo-attach-point \x3d"detailsTriangle" class\x3d"detailTriangleCollapsed"\x3e\x3c/span\x3e\n        \x3clabel data-dojo-attach-point \x3d\'detailsLabel\'\x3e\x3c/label\x3e\n    \x3c/div\x3e\n\n    \x3cdiv class\x3d"detailArea" data-dojo-attach-point \x3d\'detailArea\'\x3e\n\n    \x3ctable class\x3d"detailTable"\x3e\n    \x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d"altTextInput" data-dojo-attach-point\x3d"altTextInputLabel"\x3e\x3c/label\x3e\x3c/td\x3e\n        \x3ctd\x3e\x3cspan data-dojo-attach-point \x3d"altTextInput" data-dojo-type\x3d"dijit.form.TextBox" name\x3d"altTextInput" id\x3d"altTextInput"\x3e\x3c/span\x3e\x3c/td\x3e\n    \x3c/tr\x3e\n    \x3ctr\x3e\n        \x3ctd\x3e\x3clabel for\x3d"sizeTextInput" data-dojo-attach-point\x3d"sizeInputLabel"\x3e\x3c/label\x3e\x3c/td\x3e\n        \x3ctd\x3e\x3cspan class\x3d"sizeCombo" data-dojo-attach-point \x3d"sizeTextInput" data-dojo-type\x3d"dijit.form.ComboBox" autoComplete\x3d"false" name\x3d"sizeTextInput" id\x3d"sizeTextInput"\x3e\n        \x3coption\x3e25\x3c/option\x3e\n        \x3coption\x3e50\x3c/option\x3e\n        \x3coption selected\x3e100\x3c/option\x3e\n        \x3coption\x3e125\x3c/option\x3e\n        \x3coption\x3e150\x3c/option\x3e\n        \x3coption\x3e200\x3c/option\x3e\n        \x3c/span\x3e\x3cspan class\x3d"origSize" data-dojo-attach-point \x3d"origSize"\x3e\x3c/span\x3e\x3c/td\x3e\n    \x3c/tr\x3e\n    \x3ctr\x3e\n        \x3ctd\x3e\x3clabel for\x3d"alignInput" data-dojo-attach-point\x3d"alignInputLabel"\x3e\x3c/label\x3e\x3c/td\x3e\n        \x3ctd\x3e\x3cselect data-dojo-attach-point \x3d"alignInput" name\x3d"alignInput" id\x3d"alignInput"\x3e\n            \x3coption value\x3d"top"\x3eTop\x3c/option\x3e\n            \x3coption value\x3d"middle"\x3eMiddle\x3c/option\x3e\n            \x3coption selected value\x3d"bottom"\x3eBottom\x3c/option\x3e\n        \x3c/select\x3e\x3c/td\x3e\n    \x3c/tr\x3e\n    \x3c/table\x3e\n\n    \x3c/div\x3e\n\n    \x3ctable width\x3d"100%"\x3e\x3ctr\x3e\n    \x3ctd\x3e\n    \x3cdiv class\x3d"linkButtons"\x3e\n        \x3cbutton class\x3d"okButton" data-dojo-attach-point \x3d"okButton" name\x3d"okButton"\n                 tabIndex\x3d"2" data-dojo-type\x3d"dijit.form.Button"\x3e\x3c/button\x3e\n        \x3cbutton class\x3d"cancelButton" data-dojo-attach-point \x3d"cancelButton"\n                tabIndex\x3d"3" data-dojo-type\x3d"dijit.form.Button"\x3e\x3c/button\x3e\n    \x3c/div\x3e\n    \x3c/td\x3e\n    \x3c/tr\x3e\x3c/table\x3e\n\x3c/div\x3e',
"url:dijit/form/templates/DropDownBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\n\tid\x3d"widget_${id}"\n\trole\x3d"combobox"\n\taria-haspopup\x3d"true"\n\tdata-dojo-attach-point\x3d"_popupStateNode"\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\n\t\tdata-dojo-attach-point\x3d"_buttonNode" role\x3d"presentation"\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitArrowButtonInner" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"button presentation" aria-hidden\x3d"true"\n\t\t\t${_buttonInputDisabled}\n\t/\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t/\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\n\t\t\x3e\x3cinput class\x3d\'dijitReset dijitInputInner\' ${!nameAttrSetting} type\x3d"${type}" autocomplete\x3d"off"\n\t\t\tdata-dojo-attach-point\x3d"textbox,focusNode" role\x3d"textbox"\n\t/\x3e\x3c/div\n\x3e\x3c/div\x3e\n',
"url:MW/rtc/plugins/language/matlab/alert/templateErrorAlert.html":'\x3cspan\x3e\n    \x3csvg class\x3d"alertPlugin-errorImg" width\x3d"14" height\x3d"15" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:svg\x3d"http://www.w3.org/2000/svg"\x3e\n        \x3ccircle id\x3d"error_circle" cx\x3d"7" cy\x3d"8" r\x3d"7" fill\x3d"rgb(204, 55, 41)"/\x3e\n        \x3crect id\x3d"top_bang" fill\x3d"white" x\x3d"6" y\x3d"3" width\x3d"2" height\x3d"6"/\x3e\n        \x3crect id\x3d"bottom_bang" fill\x3d"white" x\x3d"6" y\x3d"11" width\x3d"2" height\x3d"2"/\x3e\n    \x3c/svg\x3e\n\x3c/span\x3e',
"url:MW/rtc/plugins/language/matlab/alert/templateWarningAlert.html":'\x3cspan\x3e\n\x3csvg class\x3d"alertPlugin-warningImg" width\x3d"14" height\x3d"15" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:svg\x3d"http://www.w3.org/2000/svg"\x3e\n    \x3cpath id\x3d"warning_triangle" fill\x3d"rgb(255, 161, 0)" d\x3d"M 9.41,2.05 C 9.41,2.05 11.79,6.99 11.79,6.99 11.79,6.99 13.74,11.30 13.74,11.30 14.51,14.01 12.80,14.68 10.29,14.68 10.29,14.68 3.71,14.68 3.71,14.68 1.31,14.68 -0.40,14.17 0.21,11.51 0.40,10.67 1.18,9.06 1.60,8.22 1.60,8.22 3.86,3.49 3.86,3.49 4.50,2.20 4.95,1.06 6.18,0.21 7.88,-0.35 8.64,0.67 9.41,2.05 Z M -3.55,13.30M 18.47,12.60"/\x3e\n    \x3crect id\x3d"top_bang" fill\x3d"white" x\x3d"6" y\x3d"3" width\x3d"2" height\x3d"6"/\x3e\n    \x3crect id\x3d"bottom_bang" fill\x3d"white" x\x3d"6" y\x3d"11" width\x3d"2" height\x3d"2"/\x3e\n\x3c/svg\x3e\n\x3c/span\x3e',
"url:MW/rtc/plugins/language/matlab/codeanalyzer/tooltip/templates/CodeAnalyzerTooltipContent.html":'\x3cdiv data-dojo-attach-point\x3d"tooltipContentNode"\x3e\n\x3c/div\x3e',"url:MW/rtc/plugins/language/matlab/codingui/liveapps/widgets/LiveAppInlineWidgetTemplate.html":'\x3cdiv class\x3d"liveAppInlineWidget" tabindex\x3d"-1"\x3e\n    \x3cdiv class\x3d"liveAppSummary" data-dojo-attach-point\x3d"summaryContainer"\x3e\n        \x3cdiv class\x3d"liveAppSummaryName" data-dojo-attach-point\x3d"appName"\x3e\x3c/div\x3e\n        \x3cdiv class\x3d"liveAppSummaryDescription" data-dojo-attach-point\x3d"appDescription"\x3e\n            \x3cspan class\x3d"liveAppSummaryVariables" data-dojo-attach-point\x3d"appVariables"\x3e\x3cspan class\x3d"liveAppSummaryVariablesList liveAppCodeStyle" data-dojo-attach-point\x3d"appVariablesList"\x3e\x3c/span\x3e\x3c/span\x3e\x3cspan class\x3d"liveAppSummaryOperation" data-dojo-attach-point\x3d"appOperation"\x3e\x3c/span\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"liveAppUIFigure" data-dojo-attach-point\x3d"uifigureContainer"\x3e\n    \x3c/div\x3e\n\x3c/div\x3e',
"url:MW/rtc/plugins/language/matlab/codingui/liveapps/widgets/LiveAppLineWidgetTemplate.html":'\x3cdiv class\x3d"liveAppLineWidget"\x3e\n    \x3cdiv class\x3d"liveAppCode" data-dojo-attach-point\x3d"codeContainer"\x3e\x3c/div\x3e\n\x3c/div\x3e',"url:MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/templates/Slider.html":'\x3cdiv data-dojo-attach-event\x3d"mousedown:_onTrackClick"\n\x3e\x3cdiv class\x3d"mwSliderTrack" data-dojo-attach-point\x3d"sliderTrackNode"\n\x3e\x3cdiv class\x3d"mwSliderThumb" data-dojo-attach-point\x3d"sliderThumbNode, focusNode"\x3e\x3c/div\n\x3e\x3c/div\n\x3e\x3cdiv class\x3d"mwSliderRuleAndLabelContainer" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\n\x3e\x3c/div\x3e',
"url:MW/layout/templates/CollapsedBorderChildH.html":'\x3cdiv class\x3d"gripH"\x3e\x3c/div\x3e',"url:MW/layout/templates/CollapsedBorderChildV.html":'\x3cdiv class\x3d"gripV"\x3e\x3c/div\x3e',"*now":function(h){h(['dojo/i18n!*preload*viewer/nls/viewer*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])}}});define("viewer/viewer",[],1);
//# sourceMappingURL=viewer.js.map