function OnOverCover(id){$("#cgi"+id).animate({opacity:1},300);}function OnOutCover(id){$("#cgi"+id).animate({opacity:0.5},300);}function OnCheckForm(){var re=/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9_.-]+\.[a-zA-Z0-9]{2,4}$/;var mail=$('#email').attr('value');var matchArray=mail.match(re);var formFlag=false;if($('#name').attr('value')==''){$('#messBlock').html('<p style="font-size:10pt;color:#ED1C24;padding:0px;margin:0px;">Не заполнено поле имя</p>');$('#name').focus();formFlag=false;}else if(mail!=''&&matchArray==null){$('#messBlock').html('<p style="font-size:10pt;color:#ED1C24;padding:0px;margin:0px;">Не корректный E-mail</p>');$('#email').attr({value:""});$('#email').focus();formFlag=false;}else if($('#email').attr('value')==''){$('#messBlock').html('<p style="font-size:10pt;color:#ED1C24;padding:0px;margin:0px;">Не заполнено поле E-mail</p>');$('#email').focus();formFlag=false;}else if($('#per_job').attr('value')==''){$('#messBlock').html('<p style="font-size:10pt;color:#ED1C24;padding:0px;margin:0px;">Не заполнено поле код телефона</p>');$('#per_job').focus();formFlag=false;}else if($('#phone_job').attr('value')==''){$('#messBlock').html('<p style="font-size:10pt;color:#ED1C24;padding:0px;margin:0px;">Не заполнено поле телефон</p>');$('#phone_job').focus();formFlag=false;}else if($('#pass').attr('value')==''){$('#messBlock').html('<p style="font-size:10pt;color:#ED1C24;padding:0px;margin:0px;">Не заполнено поле пароль</p>');$('#pass').focus();formFlag=false;}else if($('#pass').attr('value')!=$('#pass2').attr('value')){$('#messBlock').html('<p style="font-size:10pt;color:#ED1C24;padding:0px;margin:0px;">Введенные пароли не совпадают</p>');$('#pass').attr({value:""});$('#pass2').attr({value:""});$('#pass').focus();formFlag=false;}else if($('#agree:checked').length==0){$('#messBlock').html('<p style="font-size:10pt;color:#ED1C24;padding:0px;margin:0px;">Регистрация не может быть продолжена без получения Вашего согласия на обработку Ваших персональных данных в соответствие с п.1 статьи 6 Федерального Закона №152-ФЗ "О персональных данных"</p>');formFlag=false;}else if($('#code').attr('value')==''){$('#messBlock').html('<p style="font-size:10pt;color:#ED1C24;padding:0px;margin:0px;">Не заполнено поле защитный код</p>');$('#code').focus();formFlag=false;}else{formFlag=true;}return formFlag;}function OnChangeProfile(){var formFlag=false;if($('#name').attr('value')==''){$('#messBlock').html('<p style="font-size:10pt;color:#ED1C24;text-align:center;">Не заполнено поле имя</p>');$('#name').focus();formFlag=false;}else if($('#per_job').attr('value')==''){$('#messBlock').html('<p style="font-size:10pt;color:#ED1C24;text-align:center;">Не заполнено поле код телефона</p>');$('#per_job').focus();formFlag=false;}else if($('#phone_job').attr('value')==''){$('#messBlock').html('<p style="font-size:10pt;color:#ED1C24;text-align:center;">Не заполнено поле телефон</p>');$('#phone_job').focus();formFlag=false;}else if(($('#pass1').attr('value')!=''||$('#pass2').attr('value')!='')&&$('#pass1').attr('value')!=$('#pass2').attr('value')){$('#messBlock').html('<p style="font-size:10pt;color:#ED1C24;text-align:center;">Введенные пароли не совпадают</p>');formFlag=false;}else{formFlag=true;}return formFlag;}function SetCart(usid,catcontvars_id,catcontent_id,price,weight){var count=$('#cnt'+catcontvars_id).attr('value');var user_id=usid;if(count<=0||count=='')count=1;var param=catcontent_id+'-'+catcontvars_id+'-'+count+'-'+price+'-'+weight+'-'+user_id;var cart=get_cookie('carts');if(cart!=null){var cart_tmp=cart.split('#');var ln=new Array();var flag=true;for(var key in cart_tmp){var val=cart_tmp[key];var line=val.split('-');if(line[0]==catcontent_id&&line[1]==catcontvars_id){ln[key]=catcontent_id+'-'+catcontvars_id+'-'+(parseInt(line[2])+parseInt(count))+'-'+price+'-'+weight+'-'+user_id;flag=false;}else{ln[key]=val;}}if(flag){ln[ln.length]=param;}cart='';for(var key in ln){cart=cart+'#'+ln[key];}cart=cart.substring(1,cart.length+1);}else{cart=param;}if(usid==0){$('#frame'+catcontvars_id).attr({href:"/shop/cartprod/"+param});save_cookie(cart);$.ajax({async:false,url:"/shop/test_cart/",type:"POST",success:function(data){var ss=data.split('-');var digit=ss[0];if(digit>20){digit=digit.substr(digit.length-1,1);digit=parseInt(digit);}else{digit=parseInt(digit);}if(digit==1){var tov=' товар ';}else if(digit>=2&&digit<=4){var tov=' товара ';}else if(digit==0||(digit>=5&&digit<=20)){var tov=' товаров ';}$('#cart').text(ss[0]+tov);$('#cartsumm').text(ss[1]);}});}else{$('#frame'+catcontvars_id).attr({href:"/shop/cartprod/"+param});$.ajax({async:false,url:"/shop/set_cart/",data:({cart:cart}),type:"POST",success:function(data){var ss=data.split('-');var digit=ss[0];if(digit>20){digit=digit.substr(digit.length-1,1);digit=parseInt(digit);}else{digit=parseInt(digit);}if(digit==1){var tov=' товар ';}else if(digit>=2&&digit<=4){var tov=' товара ';}else if(digit==0||(digit>=5&&digit<=20)){var tov=' товаров ';}$('#cart').text(ss[0]+tov);$('#cartsumm').text(ss[1]);}});}}function get_cookie(name){var cookie_name=name+"=";var cookie_length=document.cookie.length;var cookie_begin=0;while(cookie_begin<cookie_length){value_begin=cookie_begin+cookie_name.length;if(document.cookie.substring(cookie_begin,value_begin)==cookie_name){var value_end=document.cookie.indexOf(";",value_begin);if(value_end==-1){value_end=cookie_length;}return unescape(document.cookie.substring(value_begin,value_end));}cookie_begin=document.cookie.indexOf(" ",cookie_begin)+1;if(cookie_begin==0){break;}}return null;}function set_cookie(name,value,expires){if(!expires){expires=new Date();}document.cookie=name+"="+escape(value)+"; expires="+expires.toGMTString()+"; path=/";}function save_cookie(param){var name="carts"
expires=new Date();expires.setTime(expires.getTime()+(3600*20*20));set_cookie(name,param,expires);}function number_format(number,decimals,dec_point,thousands_sep){var i,j,kw,kd,km;if(isNaN(decimals=Math.abs(decimals))){decimals=2;}if(dec_point==undefined){dec_point=",";}if(thousands_sep==undefined){thousands_sep=".";}i=parseInt(number=(+number||0).toFixed(decimals))+"";if((j=i.length)>3){j=j%3;}else{j=0;}km=(j?i.substr(0,j)+thousands_sep:"");kw=i.substr(j).replace(/(\d{3})(?=\d)/g,"$1"+thousands_sep);kd=(decimals?dec_point+Math.abs(number-i).toFixed(decimals).replace(/-/,0).slice(2):"");return km+kw+kd;}function SubmitForm(url){$('#orderForm').attr({action:url});$('#orderForm').submit();}var deliverFlag=false;function SelectDeliver(val,res){var ss=val.split('-');if(val=='none'||ss[1]==1){$('#remark').attr({disabled:'disabled'});$('#messBlock').html('');deliverFlag=false;}else if(val=='none'){$('#remark').attr({disabled:'disabled'});$('#messBlock').html('<p style="font-size:10pt;color:#ED1C24;padding:0px;margin:0px;">Не выбран способ доставки</p>');deliverFlag=false;}else{$('#remark').removeAttr("disabled");$('#messBlock').html('');deliverFlag=true;}val=ss[0];var id=ss[1];id=parseInt(id);if(val=='none'||val=='0.00'){res=parseFloat(res);res=number_format(res,2,',',' ');$('#itog').html(res);$('#postval').html('0');$('#postexpense').attr({value:id});}else{res=parseFloat(res);val=parseFloat(val);var itog=res+val;itog=number_format(itog,2,',',' ');val=number_format(val,2,',',' ');$('#itog').html(itog);$('#postval').html(val);$('#postexpense').attr({value:id});}}function OnCheckDeliver(){var formFlag=false;if($('#deliver').attr('value')=='none'){$('#messBlock').html('<p style="font-size:10pt;color:#ED1C24;padding:0px;margin:0px;">Не выбран способ доставки</p>');formFlag=false;deliverFlag=false;}else if($('#remark').attr('value')==''&&deliverFlag){$('#messBlock').html('<p style="font-size:10pt;color:#ED1C24;padding:0px;margin:0px;">Не заполнено поле адрес</p>');$('#remark').focus();deliverFlag=false;formFlag=false;}else{formFlag=true;}return formFlag;}